<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎍 📖 🤯 我是一名Android开发人员，我不喜欢做手工工作。 ⚰️ 📩 🛸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="当我在Skyeng定居时，阳光明媚一点，草不绿（那是早春的那一天），团队负责人要我写信给Jira，花了多少时间进行编码，花了多少时间进行演讲和复习。每两周至少一次。
 
 
 他们说：“基于这些数据，我们试图了解是否有必要调整估算值，以及团队沟通中是否存在问题。”但是从来没有告诉过谁这样的“ bab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>我是一名Android开发人员，我不喜欢做手工工作。</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skyeng/blog/490784/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我在Skyeng定居时，阳光明媚一点，草不绿（那是早春的那一天），团队负责人要我写信给Jira，花了多少时间进行编码，花了多少时间进行演讲和复习。每两周至少一次。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p0/gd/rw/p0gdrwyypbzz6wn81ybvknbmohq.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他们说：“基于这些数据，我们试图了解是否有必要调整估算值，以及团队沟通中是否存在问题。”但是从来没有告诉过谁这样的“ babayka”。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我们都是远程工作者，所以这个想法听起来很合理。这八个小时过去了，这让我感到很有趣：它们在这里，但是究竟是什么呢？但是，日志记录是不寻常的。和一般的懒惰。然后，我决定寻找可以继续为我工作的东西。在研究过程中，我有些不高兴，为IntelliJ IDEA编写了插件。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在下面你会发现</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对成品工具和我的自行车的主观评价</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（含资料）。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我研究团队使用的解决方案</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我要做的第一件事就是去找我同事使用什么。</font><font style="vertical-align: inherit;">这些选项大致如下：</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clockify-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一键统治一切</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您需要时间编码或编写码头吗？</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该插件</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在几乎任何地方添加一个按钮（一个相当醒目的灰色pacman）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/9-/ic/yy9-icorb-pi37wptn9yh7wxtxk.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，它看起来在Google文档中</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1k/tf/m0/1ktfm0ax7-xl9rmwtlq9jvwtgec.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在GitHub上，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
您可以在仪表板上欣赏Natrekannyi，也可以导入表格并将其放入Jira。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/js/bf/6h/jsbf6htyizodd76lwvq5hbzuqhy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览器扩展</font></font></a></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">单独提供与Jira的集成，</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
但是可以将包含从Clockify获得的工作日志的表上传到您的工作日历。</font><font style="vertical-align: inherit;">为了离线跟踪时间，有适用于Windows，Linux和Mac的桌面应用程序。</font><font style="vertical-align: inherit;">移动应用程序也是如此。</font><font style="vertical-align: inherit;">主要功能是免费的，但是有一些收费计划，其中包括隐私，提醒和项目模板之类的好东西。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切换</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，仅切换</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一切都差不多，但还有更多好处-例如，在桌面应用程序中，您可以设置提醒自己有关时间记录的信息，打开pomodoro模式，甚至有机会将特定的应用程序链接到特定的项目并设置自动跟踪。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/yp/sv/hlypsvcpl66hldse0c4ayfhkmzi.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是有一个细微差别：在使用的第一天，我对这个窗口和带有提醒的通知感到惊讶。</font><font style="vertical-align: inherit;">虽然理论听起来很酷）</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Toggl + </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python脚本</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：当仅一个按钮不再足够时</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我同事的发明。</font><font style="vertical-align: inherit;">不知何故，他决定减少将表导出到Jira的手势，并将Toggl中税收的卸载转移到脚本中。</font><font style="vertical-align: inherit;">您可以放一个cron，享受生活。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wakatime-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们去的地方，无需任何按钮</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自己记录所有内容。因此，连接其浏览器扩展时要记住的第一件事是黑名单。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了扩展之外，它还为最常见的IDE和编辑器提供了一些集成和相当数量的插件。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xz/4u/uk/xz4uuk51xsdjdkemxh-ichx8ceg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDE插件跟踪在特定git分支和特定文件中花费的时间。在屏幕上，可用列表非常令人印象深刻。 Serenyk-“在计划中”，对于其快速实施，您可以投票。付费订阅中的某些插件每月收费9美元。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，在仪表板上，您可以看到以百分比表示的用不同语言编写代码所花费的时间：如果您还记得一个常规的android项目涉及到Kotlin，Java，Groovy和xml的使用-这本身就很有意义）。</font><font style="vertical-align: inherit;">而且，如果您使用已安装的插件一段时间，您会发现它相当残酷：仪表板获得了主动读写代码的时间。</font><font style="vertical-align: inherit;">而且玻璃表面不会粘住显示器。</font><font style="vertical-align: inherit;">不用说，一个业余爱好者。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嗯，WakaTime的源代码是开放的：您可以尝试了解它的工作原理...</font></font></b><div class="spoiler_text">  , ?           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   IDE  JetBrains</a>. <br>
<br>
 .     WakaTime.java.    ,         ,    Heartbeat (),   WakaTime CLI    .      , , ,       . <br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打个比方写你的自行车</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
也许用马铃薯枪更有用，但是您不会做任何研究用途。在思考WakaTime来源之后，我决定创建自己的插件，该插件可以跟踪IDE中的活动，记录编写时间并将其全部发送给Jira （在我们的流程中，分支是根据Jira中的任务命名的，因此看起来很现实）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并且为了避免在处理代码时向服务器发送请求，我们将在Android Studio关闭时发送日志，直到此刻将其存储在本地。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.我们可以在插件的源代码中找到哪些实体（并在我们自己的实体中使用）？</font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们不使用Components（这是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legacy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它以前是插件的主要结构单元。可以是应用程序级别，项目级别或模块级别。 WakaTime源代码中有一个ApplicationComponent，但是可以，源代码已经使用了五年，它应保持向后兼容性。组件取决于与其关联的级别的生命周期。因此，例如，IDE启动时将加载ApplicationComponent。使用它们时，它们将阻止重新启动插件而不重新启动IDE，并且通常会令人不快。因此，最好改用服务。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们使用服务</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-当前的主要结构单元。</font><font style="vertical-align: inherit;">它们分为应用程序，项目和模块的相同级别，它们将帮助我们在适当的级别上封装逻辑并存储插件的状态。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与组件不同，必须使用ServiceManager.getService（）方法自行加载服务。</font><font style="vertical-align: inherit;">该平台确保每个服务都是单例。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总之</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><b><font style="vertical-align: inherit;">添加操作</font></b><font style="vertical-align: inherit;"> -它们可以是快捷方式，也可以是其他菜单项-它们负责在某种程度上影响IDE中用户操作的所有内容。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们使用扩展</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -比操作要复杂的任何功能扩展：例如，连接到IDE生命周期并在显示初始屏幕时或退出之前执行某些操作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有这些都应该在文件/META_INF/plugin.xml中声明。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Plugin.xml和build.gradle</font></font></h4><br>
<img src="https://habrastorage.org/webt/ap/ia/vz/apiavzht769ipgzd8ltqaobce4o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目创建窗口。</font><font style="vertical-align: inherit;">我们将使用Kotlin编写插件，并使用Gradle进行组装，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
这是在IDEA中创建插件空白（文件-&gt;新建-&gt;项目...-&gt; Gradle-&gt; IntelliJ平台插件）后看到的第一件事。</font><font style="vertical-align: inherit;">它包含有关插件依赖性及其简短描述的信息。</font><font style="vertical-align: inherit;">它应该声明插件组件-前面提到的组件，服务，操作和扩展。</font><font style="vertical-align: inherit;">没有具体的入口点-这将是自定义操作或IDE生命周期事件，具体取决于我们的需求。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将需要这些依赖关系-毕竟，我们想为studio编写一个插件，以便它可以与Git一起使用。</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>Git4Idea<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>com.intellij.modules.androidstudio<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Git4Idea是虚拟文件系统（VCS）的插件，并提供主题，借助这些主题，我们以后可以收听git事件-例如，检出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我们还希望该插件能够与Jira一起使用，因此我们将通过gradle将一个提供良好的库与rest客户端连接。</font><font style="vertical-align: inherit;">为此，在此处添加Atlassian Maven存储库：</font></font><br>
<br>
<pre><code class="kotlin hljs">repositories {<font></font>
   mavenCentral()<font></font>
   maven {<font></font>
       url <span class="hljs-string">"https://packages.atlassian.com/maven/repository/public"</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实际上是库：</font></font><br>
<br>
<pre><code class="kotlin hljs">implementation <span class="hljs-string">"joda-time:joda-time:2.10.4"</span>
implementation(<span class="hljs-string">"com.atlassian.jira:jira-rest-java-client-core:4.0.0"</span>) {<font></font>
   exclude group: <span class="hljs-string">'org.slf4j'</span><font></font>
   dependencies {<font></font>
       implementation <span class="hljs-string">"com.atlassian.fugue:fugue:2.6.1"</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，我们确定使我们感兴趣的IDE的版本以及它的路径（哦，如果真正的Android Studio启动并以与调试插件的轻量级版本一样快的速度运行）：</font></font><br>
<br>
<pre><code class="kotlin hljs">intellij {<font></font>
   version <span class="hljs-string">'2019.1'</span>
   plugins <span class="hljs-string">'git4idea'</span>
   alternativeIdePath <span class="hljs-string">'E:\\Android Studio'</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，也许有一天，我们将撰写有关改进的新功能的文章。</font><font style="vertical-align: inherit;">但是不是现在。</font></font><br>
<br>
<pre><code class="kotlin hljs">patchPluginXml {<font></font>
   changeNotes <span class="hljs-string">"""
     Add change notes here.&lt;br&gt;
     &lt;em&gt;most HTML tags may be used&lt;/em&gt;"""</span>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.创建一个UI</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要将某些内容推送到Jira中，您首先需要登录。</font><font style="vertical-align: inherit;">在项目开始后立即这样做是合乎逻辑的。</font><font style="vertical-align: inherit;">看起来我们需要扩展，并且我们会毫不犹豫地在plugin.xml中声明它：</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">postStartupActivity</span> <span class="hljs-attr">implementation</span>=<span class="hljs-string">"Heartbeat"</span>/&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并在其中显示对话。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UI组件主要是来自Swing的组件以及来自平台sdk的一些扩展。</font><font style="vertical-align: inherit;">这一切最近都包装在kotlin ui dsl中。</font><font style="vertical-align: inherit;">在撰写本文时，文档指出dsl在主要版本之间可能会有很大的变化，因此我们在使用它时会有些担心：</font></font><br>
<br>
<pre><code class="kotlin hljs">
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createCenterPanel</span><span class="hljs-params">()</span></span>: JComponent? {<font></font>
<font></font>
   title = <span class="hljs-string">"Jira credentials"</span>
   setOKButtonText(<span class="hljs-string">"Save"</span>)<font></font>
<font></font>
   <span class="hljs-keyword">return</span> panel {<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Jira hostname"</span>)()<font></font>
           hostname = JTextField(<span class="hljs-string">"https://"</span>)<font></font>
           hostname()<font></font>
       }<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Username:"</span>)()<font></font>
           username = JTextField()<font></font>
           username()<font></font>
       }<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Password:"</span>)()<font></font>
           password = JPasswordField()<font></font>
           password()<font></font>
       }<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们创建了一个对话，展示了该对话，并从Jira获得了凭据。</font><font style="vertical-align: inherit;">现在我们需要保存它们，最好是安全保存。</font><font style="vertical-align: inherit;">PersistingStateComponent将会解救。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. PersistingStateComponent设备（不是很复杂）</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PersistingStateComponent可以做两件事-saveState和loadState：序列化并保存传递给它的对象，然后从存储中检索它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他从State批注中学到了确切的数据保存位置。</font><font style="vertical-align: inherit;">文档中提到了两个最简单的选项-指定文件或将所有内容存储在工作区设置中：</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-meta">@Storage(<span class="hljs-meta-string">"yourName.xml"</span>)</span>
<span class="hljs-meta">@Storage(StoragePathMacros.WORKSPACE_FILE)</span> 
<span class="hljs-meta">@State(
   name = <span class="hljs-meta-string">"JiraSettings"</span>,
   storages = [
       Storage(<span class="hljs-meta-string">"trackerSettings.xml"</span>)</span>
   ])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我们有特殊情况，因此我们转向用于存储敏感数据的文档。</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getState</span><span class="hljs-params">()</span></span>: Credentials? {
   <span class="hljs-keyword">if</span> (credentials == <span class="hljs-literal">null</span>)  {
       <span class="hljs-keyword">val</span> credentialAttributes = createCredentialAttributes()<font></font>
       credentials = PasswordSafe.instance.<span class="hljs-keyword">get</span>(credentialAttributes)<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> credentials<font></font>
}<font></font>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadState</span><span class="hljs-params">(state: <span class="hljs-type">Credentials</span>)</span></span> {<font></font>
   credentials = state<font></font>
   <span class="hljs-keyword">val</span> credentialAttributes = createCredentialAttributes()<font></font>
   PasswordSafe.instance.<span class="hljs-keyword">set</span>(credentialAttributes, credentials)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一个PersistingStateComponent将处理存储不同分支记录的时间。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jira想出了登录名。</font><font style="vertical-align: inherit;">随着用户数据的存储。</font><font style="vertical-align: inherit;">现在，您需要以某种方式跟踪分支上的checkout事件以开始倒计时。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.订阅事件</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过在所需级别的messageBus中订阅观察者的主题，IntelliJ平台可以使观察者关注我们感兴趣的事件。</font><font style="vertical-align: inherit;">这是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">码头</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这很有趣。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主题是某个端点，是事件的表示。</font><font style="vertical-align: inherit;">您需要做的就是订阅并实现一个监听器，该监听器应该处理正在发生的事情。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，我需要在Git中收听结帐...</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToProjectTopic(project, GitRepository.GIT_REPO_CHANGE) {<font></font>
    GitRepositoryChangeListener {<font></font>
        currentBranch = it.currentBranch<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...关闭应用程序（以愉快的典当时间）...</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToAppTopic(AppLifecycleListener.TOPIC) {
    <span class="hljs-keyword">object</span>: AppLifecycleListener {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">appWillBeClosed</span><span class="hljs-params">(isRestart: <span class="hljs-type">Boolean</span>)</span></span> {
            <span class="hljs-keyword">if</span> (!isRestart) {<font></font>
                JiraClient.logTime(entry.key, DateTime.now(), entry.value)<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...并保存文档（正是如此）。</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToAppTopic(AppTopics.FILE_DOCUMENT_SYNC) {<font></font>
    CustomSaveListener()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原则上，这已经足够了（如果没有，您可以随时编写自己的代码）。</font><font style="vertical-align: inherit;">但是，如果我们想听到一点滚动和鼠标移动怎么办？</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. EditorEventMulticaster</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
它收集在打开的编辑器窗口中发生的所有事件-编辑，更改可见区域，鼠标移动-并允许您在一个位置立即订阅。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在我们有了所需的一切。</font><font style="vertical-align: inherit;">我们可以从当前分支（如果有）中选择Jira中的任务名称，计算花费在该任务上的时间，然后立即退出工作室以将其添加到任务中。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.代码和详细信息</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要运行，您需要使用最新的Android Studio（3.6.1）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了测试性能-git和一个分支，其名称至少与Jira中的任务在远程相似。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这样，该插件不仅可以将时间输出到控制台，还可以对其进行跟踪-取消对Heartbeat.kt中相应行的注释。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.有用的链接</font></font></h4><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一系列插件开发文章</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于从Android开发人员开发插件的另一篇有趣的文章</font></font></a></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS，您最后选择了什么？</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-该死，这太邪恶了。</font><font style="vertical-align: inherit;">如果我不写代码？</font><font style="vertical-align: inherit;">如果我if之以鼻并努力了解其中正在发生什么？</font><font style="vertical-align: inherit;">在代码意义上。</font><font style="vertical-align: inherit;">毕竟，这花费了大部分时间。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -然后至少滚动它。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-因此，模拟暴力活动不远。</font><font style="vertical-align: inherit;">然后，我不能关闭工作室数周，也无法重新启动。</font><font style="vertical-align: inherit;">也许我们不需要这种幸福？</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 “绝对没有必要。” </font><font style="vertical-align: inherit;">然后需要另一个原因，否则我喜欢编写插件。</font><font style="vertical-align: inherit;">而且我仍然不太了解VCS。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“你自己用吗？” </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - 不。</font><font style="vertical-align: inherit;">我以某种方式学会了用手记录日志，这对我来说是潜移默化的。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490772/index.html">如何在电报开放网络（TON）中编写和发布智能合约</a></li>
<li><a href="../zh-CN490774/index.html">反应灵敏</a></li>
<li><a href="../zh-CN490778/index.html">可以在任何地方找到了解程序员工作的人</a></li>
<li><a href="../zh-CN490780/index.html">英特尔®至强®可扩展第二代：内核销售量大</a></li>
<li><a href="../zh-CN490782/index.html">AnalogBytes会议：Roskomnadzor，媒体，高负载和所有所有</a></li>
<li><a href="../zh-CN490786/index.html">二阶泄漏分析：当泄漏从窃取银行数据的人那里泄漏时</a></li>
<li><a href="../zh-CN490788/index.html">无用的REPL。Yandex报告</a></li>
<li><a href="../zh-CN490790/index.html">Zip文件：历史记录，说明和实现</a></li>
<li><a href="../zh-CN490792/index.html">NSX-V中的VXLAN-故障排除</a></li>
<li><a href="../zh-CN490796/index.html">如何使用CRD以策略即代码的方式自动化容器的安全性</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>