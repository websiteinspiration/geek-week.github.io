<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ ğŸ’‚ğŸ¼ ğŸ’ƒğŸ½ Robotarakan Petya Ù„Ø¹Ø´Ø±Ø© Ø¯ÙˆÙ„Ø§Ø±Ø§Øª ğŸ¶ ğŸ”‹ â•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø¨ÙŠØªÙŠØ§ ØŒ Ø§Ù„Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø°Ø§Øª Ø§Ù„Ø£Ø±Ø¬Ù„ Ø§Ù„Ø³ØªØ©
 

Ø£Ø³ØªÙ…Ø± ÙÙŠ Ù†Ø´Ø± Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ù† Ø³Ù„Ø³Ù„Ø© Arduino Brain. Ø¨ÙŠØªÙŠØ§ Ù‡ÙŠ Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø£Ø±Ø¬Ù„ Ø±Ø®ÙŠØµØ© Ø¬Ø¯Ø§ (Ø­ÙˆØ§Ù„ÙŠ Ø¹Ø´Ø±Ø© Ø¯ÙˆÙ„Ø§Ø±Ø§Øª)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Robotarakan Petya Ù„Ø¹Ø´Ø±Ø© Ø¯ÙˆÙ„Ø§Ø±Ø§Øª</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489144/"><h1 id="znakomtes-s-petey-shestinogom-o-tryoh-servoprivodah"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø¨ÙŠØªÙŠØ§ ØŒ Ø§Ù„Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø°Ø§Øª Ø§Ù„Ø£Ø±Ø¬Ù„ Ø§Ù„Ø³ØªØ©</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø£Ø³ØªÙ…Ø± ÙÙŠ Ù†Ø´Ø± Ù…Ù‚Ø§Ù„Ø§Øª Ù…Ù† Ø³Ù„Ø³Ù„Ø© Arduino Brain. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¨ÙŠØªÙŠØ§</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ù‡ÙŠ Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø£Ø±Ø¬Ù„ Ø±Ø®ÙŠØµØ© Ø¬Ø¯Ø§ (Ø­ÙˆØ§Ù„ÙŠ Ø¹Ø´Ø±Ø© Ø¯ÙˆÙ„Ø§Ø±Ø§Øª). </font><font style="vertical-align: inherit;">ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø´Ø±ÙˆØ¹Ù‹Ø§ Ø±Ø§Ø¦Ø¹Ù‹Ø§ Ù„Ù‚Ø¶Ø§Ø¡ ÙŠÙˆÙ… Ù…Ù…Ø·Ø± ÙˆØ§Ø­Ø¯ ØŒ ÙˆØ§Ù„Ø°ÙŠ Ø³ÙŠØ³ØªÙ…ØªØ¹ Ø¨Ù‡ ÙƒÙ„ Ù…Ù† Ø§Ù„Ø¨Ø§Ù„ØºÙŠÙ† ÙˆØ§Ù„Ø£Ø·ÙØ§Ù„. </font><font style="vertical-align: inherit;">Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù†Ù†Ø§ Ù†ØªØ­Ø¯Ø« Ø¹Ù† Ø§Ù„ØªØ±ÙÙŠÙ‡ ØŒ Ø¥Ù„ÙŠÙƒ Ù…Ù‚Ø·Ø¹ ÙÙŠØ¯ÙŠÙˆ ÙŠØ±Ù‚Øµ ÙÙŠÙ‡ Ø¨ÙŠØªÙŠØ§ Ø¹Ù„Ù‰ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„ÙØ§Ù†Ùƒ:</font></font></p><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/quMe5CEoOok" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¨Ø§Ù„Ø·Ø¨Ø¹ ØŒ Ù„Ù… Ø£Ù‚Ù… Ø¨Ø£ÙŠ ØªØ­Ù„ÙŠÙ„ ØµÙˆØªÙŠ ØŒ Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø¨Ø³Ø§Ø·Ø© Ø¨Ø¨Ø±Ù…Ø¬Ø© Ø¨ÙŠØªÙŠØ§ Ù„Ù„Ø±Ù‚Øµ Ø¨Ø¥ÙŠÙ‚Ø§Ø¹ Ù…Ø¹ÙŠÙ†. </font><font style="vertical-align: inherit;">Ø¥Ù„ÙŠÙƒÙ… Ù…Ù‚Ø·Ø¹ ÙÙŠØ¯ÙŠÙˆ Ø¢Ø®Ø± Ø£Ø¸Ù‡Ø± ÙÙŠÙ‡ Ø¨ÙŠØªÙŠØ§ Ø§Ø­ØªÙ‚Ø§Ø±Ù‡ Ù„Ù„ØªÙ„Ø§Ø¹Ø¨ Ø¨Ø§Ù„ÙƒØ±Ø§Øª:</font></font></p><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/f4vZZBQZLEU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÙÙŠ Ø´ÙƒÙ„Ù‡ Ø§Ù„Ø­Ø§Ù„ÙŠ ØŒ ÙŠÙ…ÙƒÙ† Ù„Ø¨ÙŠØªÙŠØ§ Ø§Ù„Ù…Ø´ÙŠ ÙÙ‚Ø· ØŒ ÙˆÙ„ÙƒÙ† ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª ÙŠÙ…ÙƒÙ†Ù‡ Ø±Ø¤ÙŠØ© (Ù‚ÙŠØ§Ø³ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¥Ù„Ù‰) Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©. </font><font style="vertical-align: inherit;">ÙˆÙ…Ø¹ Ø°Ù„Ùƒ ØŒ ÙØ¥Ù† Ø£Ø¯Ù…ØºØªÙ‡ Ù…Ù†ØªØ¬Ø© Ø¨Ù…Ø§ ÙŠÙƒÙÙŠ Ù„ØªÙƒÙˆÙ† Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø§Ø³ØªØ´Ø¹Ø§Ø± Ø§Ù„Ø£Ø®Ø±Ù‰ ØŒ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù‚ØªØ±Ø§Ø­Ø§ØªÙƒ!</font></font></p><br>
<h1 id="kak-klonirovat-petyu"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÙƒÙŠÙÙŠØ© Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø¨ÙŠØªÙŠØ§</font></font></h1><br>
<h2 id="spisok-pokupok"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ³ÙˆÙ‚</font></font></h2><br>
<p>      3 ,    /      .    ,    :</p><br>
<ul>
<li> .       ,     .  -      10â‚¬ / 10  ( ),      2â‚¬ / 10 .   ,       ,      .      â€”  ,      cheapduino  - ,    .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">SG90 9G , 3 * 1.47â‚¬ / </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">4x AAA   , 1.34â‚¬ / </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ATMega8A-AU (QFP-32), 1â‚¬ / </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">IR LED + IR , 0.20â‚¬ / </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">  1000uF 16V, 0.17â‚¬ / </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">2n3904 , 3 * 0.01â‚¬ / </a></li>
<li>    , , ,    0805   .       : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">hardware/motherboard/BOM.html</a>.</li>
</ul><br>
<p>  , ,   .         (,      ),      .           .    â€”    . ,          ;)</p><br>
<p><strong>NB:</strong>   9g   ,     .        . ,       ,      ,       SketchUp .           ,       , ,       .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/6fb/e8d/c8d/6fbe8dc8d4785b6cca757b26968cfad9.jpg"></p><br>
<h2 id="telo"></h2><br>
<p>  ,       3 ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">hardware/body/</a>.    - ::</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/9f6/ae9/84d/9f6ae984dc2f1692d60f74c41905f53c.jpg"></p><br>
<p>       1,          .      - :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/8bd/27e/e8f/8bd27ee8f42fe6bf04c90c14037ddff8.jpg"></p><br>
<p>3      .      ,         .      :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/b2a/c5b/640/b2ac5b640784d5ffa09cc39714143aa9.jpg"></p><br>
<h2 id="materinka"></h2><br>
<h3 id="mozgi"></h3><br>
<p>     .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">hardware/motherboard/</a>.   :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/3be/f7a/3e2/3bef7a3e23e979919e3ddb8cb7cbd4ed.png"></p><br>
<p>     ATMega8    ,    .      :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/5c3/26f/6a5/5c326f6a50b2aa7705ce86f09d1d2398.png"></p><br>
<p>     ,    ,   ,      .       :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/d1f/e4a/41a/d1fe4a41a8f284a205b650b2e8fa2a6b.jpg"></p><br>
<p><strong>N.B.  ,   ATMega8A      2.7-5.5,     6.     â€”   NiMH 1.2V .                (6.4  ),      ,    .     ,   ,        !</strong></p><br>
<p>      (     ):</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/06e/c00/3b2/06ec003b24995e070b025ef623ba62f6.jpg"></p><br>
<h3 id="datchik-prepyatstviy"> </h3><br>
<p>   ,          .    ;            .   ,    ,     .  ,         ,         ,     :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/989/a7e/4d6/989a7e4d698831420a7ddc789ac9daa3.gif"></p><br>
<p>    :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/8b6/77b/3fb/8b677b3fbb3ef35e821515eb95cefa1d.png"></p><br>
<p>   ;    ,  Q3  Q4 ""  Vcc,        ,    .               :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/b6c/914/f92/b6c914f9236d467385e643196ee22558.gif"></p><br>
<p> ,     ,    ,        R6. 47   55  ,       ( ). ,         ,        (910 )!</p><br>
<p>        ( ).    ,       CR2032,    . (       ,    []          ,  ,   )<br>
   , ,     Q3  Q4   . ,    ,      ,  ,      ,      .</p><br>
<p> ,             .    ,       .   2n3904,       ,    ,          .        ,    ,    .</p><br>
<p>,     ,   ,     ,        :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/d8d/1d5/381/d8d1d53817abf995be5571f35b6d5131.gif"></p><br>
<p>      .</p><br>
<p>        ,         ,     :</p><br>
<ul>
<li>  isf471          2n3904.</li>
<li>    Sharp GP2Y0A21YK0F: <br>
<img src="https://habrastorage.org/getpro/habr/post_images/d99/9d3/9f2/d999d39f236d2819a1e2895ff4650230.jpg" width="320"></li>
<li>          LM393: <br>
<img src="https://habrastorage.org/getpro/habr/post_images/eb2/30b/4be/eb230b4be464e3ca1aeac627edb4ef78.jpg" width="320"></li>
</ul><br>
<h1 id="kak-rabotaet-proshivka">  </h1><br>
<p> ,      ,            ,  ATMega8.        :</p><br>
<ul>
<li>  -</li>
<li>   </li>
<li> </li>
<li> </li>
</ul><br>
<h3 id="shim-signal">-</h3><br>
<p>     50   ; 1     (0   ), 2     (90   ).      ,      16   (timer1),      (timer2).    ,   Servo.h      ,     ,          fast PWM.</p><br>
<p>    8 ,   timer1    1  ( 8).<br>
 ICR1   TOP (20000),  ,    20 ,   50  .  OCR1A  OCR1B   ( )      .</p><br>
<p>     .      timer2,  ,  ,      ICR1,  ,       .     ,     50    ,     ,   -       :</p><br>
<ul>
<li>   timer2    128,  ,    4.096 ms = 256 * 128/(8 * 10^6).</li>
<li>     timer2,  ,       .</li>
<li>   capture interrupt  timer1    timer2 (      ).</li>
</ul><br>
<p>4    2    ,   ,       20 .  ,           (1.5   ),     :</p><br>
<pre><code class="cpp hljs">OCR1A = <span class="hljs-number">1500</span>;    <span class="hljs-comment">// left servo</span>
OCR1B = <span class="hljs-number">1500</span>;    <span class="hljs-comment">// right servo</span>
OCR2  = <span class="hljs-number">1500</span>/<span class="hljs-number">16</span>; <span class="hljs-comment">// center servo</span></code></pre><br>
<h3 id="planirovschik-dvizheniy"> </h3><br>
<p>-,      :</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span>  zero[<span class="hljs-number">3</span>] = {<span class="hljs-number">45</span>, <span class="hljs-number">50</span>, <span class="hljs-number">40</span>};     <span class="hljs-comment">// zero position of the servo (degrees)</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> range[<span class="hljs-number">3</span>] = {<span class="hljs-number">25</span>, <span class="hljs-number">25</span>, <span class="hljs-number">20</span>};     <span class="hljs-comment">// the servos are allowed to move in the zero[i] +- range[i] interval</span></code></pre><br>
<p> <code>zero[3]</code>       ,    (.    ).  ,       45Â° (  ),              45Â°  ,     . , <code>range[3]</code>      .  ,     <code>i</code>       <code>zero[i]-range[i]</code>  <code>zero[i]+range[i]</code>. </p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/d5b/98c/7ef/d5b98c7ef73966fd3617f0b890187ddf.jpg"></p><br>
<p>    ( , 0Â°-90Â°)    <code>uint8_t pos[3]</code>.   <code>update_servo_timers()</code>    -  .        <code>pos[i]=zero[i]+range[i]</code>     <code>i=0,1,2</code>.</p><br>
<p>          .         <code>pos_beg[3], pos_end[3], time_start[3]</code>  <code>duration[3]</code>.  ,       .      :</p><br>
<ul>
<li> <code>pos[0]</code>  <code>pos_beg[0]</code>,  ,   ;</li>
<li> <code>pos_end[0]</code>    (-  );</li>
<li>  <code>time_start[0]</code>    (,    );</li>
<li>, ,      <code>duration[0]</code> ( ).  ,   <code>(pos_end[0]-pos_beg[0])/duration[0]</code> /.</li>
</ul><br>
<p>       <code>movement_planner()</code>,        <code>pos[]</code>   ,    <code>update_servo_timers()</code>,    -    <code>pos[]</code>. </p><br>
<h3 id="pohodki"></h3><br>
<p> ,         ,  ,   ( )      .   ,            .  ,    .        ,    :</p><br>
<ul>
<li> 1: <code>{zero[0]-range[0], zero[1]-range[1], zero[2]+range[2]}</code></li>
<li> 2: <code>{zero[0]-range[0], zero[1]-range[1], zero[2]-range[2]}</code></li>
<li> 3: <code>{zero[0]+range[0], zero[1]+range[1], zero[2]-range[2]}</code></li>
<li> 4: <code>{zero[0]+range[0], zero[1]+range[1], zero[2]+range[2]}</code></li>
</ul><br>
<p>      2  (   ):</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int8_t</span> advance_sequence[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>] = {{<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>,  <span class="hljs-number">1</span>}, {<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>}, { <span class="hljs-number">1</span>,  <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>}, { <span class="hljs-number">1</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">1</span>}};</code></pre><br>
<p>   ,     <code>i</code>   <code>step</code>  <code>zero[i] + range[i]*advance_sequence[step][i]</code>.<br>
         :</p><br>
<pre><code class="cpp hljs">    <span class="hljs-keyword">uint8_t</span> step = steps_per_sequence<span class="hljs-number">-1</span>; <span class="hljs-comment">// at the initialization stage the (previous) movement is considered to be complete, thus the next movement will be planned starting from the step 0</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">if</span> (is_movement_finished()) {<font></font>
            step = (step + <span class="hljs-number">1</span>) % <span class="hljs-number">4</span>; <span class="hljs-comment">// if previous movement is complete, then perform the next step; this variable loops as 0,1,2,3.</span>
            plan_next_movement(step, advance_sequence); <span class="hljs-comment">// execute next movement</span><font></font>
        }<font></font>
        movement_planner(); <span class="hljs-comment">// update the servos position according to the planning</span>
        _delay_ms(<span class="hljs-number">1</span>);<font></font>
    }</code></pre><br>
<h3 id="obhod-prepyatstviy"> </h3><br>
<p> ,      ,    4  5  .  ,       (   ,  ),         <code>adc_left_eye</code>  <code>adc_right_eye</code>   ,      :</p><br>
<pre><code class="cpp hljs">        adc_left_eye  = adc_left_eye *<span class="hljs-number">.99</span> + adc_read(<span class="hljs-number">5</span>)*<span class="hljs-number">.01</span>; <span class="hljs-comment">// low-pass filter on the ADC readings</span>
        adc_right_eye = adc_right_eye*<span class="hljs-number">.99</span> + adc_read(<span class="hljs-number">4</span>)*<span class="hljs-number">.01</span>;</code></pre><br>
<p>       <code>_delay_ms()</code>   ,       <code>.99</code>  <code>1-.99</code>   .</p><br>
<p>      :</p><br>
<pre><code class="cpp hljs">        <span class="hljs-keyword">uint8_t</span> lobst = adc_left_eye  &lt; distance_threshold; <span class="hljs-comment">// obstacle on the left?</span>
        <span class="hljs-keyword">uint8_t</span> robst = adc_right_eye &lt; distance_threshold; <span class="hljs-comment">// obstacle on the right?</span></code></pre><br>
<p>     (,     )           :</p><br>
<pre><code class="cpp hljs">        <span class="hljs-keyword">if</span> (is_movement_finished()) {
            <span class="hljs-keyword">if</span> (!lobst &amp;&amp; !robst) {<font></font>
                sequence = advance_sequence; <span class="hljs-comment">// no obstacles =&gt; go forward</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (lobst &amp;&amp; robst) {<font></font>
                sequence = retreat_sequence; <span class="hljs-comment">// obstacles left and right =&gt; go backwards</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (lobst &amp;&amp; !robst) {<font></font>
                sequence = turn_right_sequence; <span class="hljs-comment">// obstacle on the left =&gt; turn right</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!lobst &amp;&amp; robst) {<font></font>
                sequence = turn_left_sequence; <span class="hljs-comment">// obstacle on the right =&gt; turn left</span><font></font>
            }<font></font>
            step = (step + <span class="hljs-number">1</span>) % steps_per_sequence; <span class="hljs-comment">// if previous movement is complete, then perform the next step</span>
            plan_next_movement(step, sequence); <span class="hljs-comment">// execute next movement</span>
        }</code></pre><br>
<p> ,  !</p><br>
<h1 id="pismo-dedu-morozu">  </h1><br>
<p>  !   ,      ,      :</p><br>
<h3 id="soft">:</h3><br>
<ul>
<li>      "",  .            ,      ,     . ,       ?</li>
<li>     (  !)    ,       ,           .</li>
<li> ,            ,        avr-gcc       .     ,  -    .</li>
</ul><br>
<h3 id="zhelezo">:</h3><br>
<p>   ,      V2 ,     !   ,     //   :</p><br>
<ul>
<li>  â€”   ,        ;</li>
<li> ,  RC-   ;</li>
<li>       ;</li>
<li>  R6        ;</li>
<li>  (     )        ;</li>
<li>      â€”  .       â€”    ,    ;</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø­Ø±Ùƒ Ø§Ù„Ù…Ù†Ø­Ù„ Ø¨Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù‚Ù„ÙŠÙ„Ø§. </font><font style="vertical-align: inherit;">Ø§Ø¶Ø·Ø±Ø±Øª Ø¥Ù„Ù‰ Ø¥Ù…Ø§Ù„Ø© Ø°Ù„Ùƒ ØŒ Ù„Ø£Ù†Ù‡ </font><font style="vertical-align: inherit;">Ø®Ù„Ø§Ù Ø°Ù„Ùƒ ØŒ ØªØ¤Ø°ÙŠÙ‡ Ø§Ù„Ø³Ø§Ù‚ Ø§Ù„ÙŠØ³Ø±Ù‰ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ§Ù‚Ø¹ Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹ Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ø³Ù… Ø§Ù„Ø°Ø¨Ø°Ø¨Ø§Øª Ø›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¥Ø¶Ø§ÙØ© Ø²ÙˆØ¬ Ù…Ù† Ù…ØµØ§Ø¨ÙŠØ­ LED Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø¯ÙˆÙ† Ù…Ù†Ø¸Ø§Ø± Ø§Ù„Ø°Ø¨Ø°Ø¨Ø§Øª Ø›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø£Ø¶Ù ÙˆØ³Ø§Ø¯Ø§Øª Ø§Ù„Ù„Ø­Ø§Ù… Ù„Ø¬Ù…ÙŠØ¹ Ø£Ø±Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø±ÙˆØ¨ÙˆØª.</font></font></li>
</ul><br>
<h1 id="zaklyuchenie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø§Ø³ØªÙ†ØªØ§Ø¬</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¨ÙŠØªÙŠØ§ Ù‡ÙŠ Ù…ØªØ¹Ø© Ø±Ù‡ÙŠØ¨Ø©!</font></font></p><br>
<img src="https://habrastorage.org/getpro/habr/post_images/000/c57/d11/000c57d11630c7c3c5bed78dd1e48683.jpg" width="512"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar489128/index.html">Ø§Ù„ØªØ¯ÙˆÙŠÙ„: ÙƒÙŠÙÙŠØ© ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© (ÙˆÙ„ÙŠØ³ Ø¨Ø§Ù„Ø¬Ù†ÙˆÙ†)</a></li>
<li><a href="../ar489132/index.html">ÙŠØ³Ù„Ø· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© Ø£ÙˆØ±ÙˆØ¨Ø§ 2020</a></li>
<li><a href="../ar489134/index.html">Ø¨Ø­Ø« ÙØ±Ù‚ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙÙŠ Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø£ØºØ°ÙŠØ© Ø§Ù„Ø±ÙˆØ³ÙŠØ©</a></li>
<li><a href="../ar489136/index.html">Ø§Ù„ÙÙˆØ² Ø¨Ø¹Ø´Ø±ÙŠÙ† Ø®Ø·Ù‹Ø§ Ù‡Ø§Ø³ÙƒÙ„: ÙƒØªØ§Ø¨Ø© Ù…Ø±Ø­Ø§Ø¶</a></li>
<li><a href="../ar489142/index.html">Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠØ© Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ù…Ù† Ø§Ù„Ø£Ù„Ù Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ§Ø¡</a></li>
<li><a href="../ar489146/index.html">802.11ba (WUR) Ø£Ùˆ ÙƒÙŠÙÙŠØ© Ø¹Ø¨ÙˆØ± Ø§Ù„Ø«Ø¹Ø¨Ø§Ù† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ù†ÙØ°</a></li>
<li><a href="../ar489152/index.html">Ø¨Ø·Ø±Ø³Ø¨ÙˆØ±Øº Ø¶Ø¯ Ø¨Ø§Ø±ÙŠØ³: ÙƒÙŠÙ ØªØ¬Ø¯Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ù ÙˆÙƒÙŠÙ ØªÙ‚Ù„Ù„ Ù…Ù† Ø§Ù„Ù…Ù„Ùƒ Ø§Ù„Ø¹Ø§Ù…</a></li>
<li><a href="../ar489156/index.html">Ù…Ù† Ù‡Ùˆ Ø£Ø°ÙƒÙ‰ Ù…Ù† IDEAØŸ</a></li>
<li><a href="../ar489160/index.html">Ù†ØªØ§Ø¦Ø¬ Ø¯Ø±Ø§Ø³Ø© Ø¹Ù† Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø´Ø§ØºØ±Ø© Ù„Ù…ØµÙ…Ù… Ù…Ù†ØªØ¬ Ø±Ù‚Ù…ÙŠ. Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„ - Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¡Ø§Øª</a></li>
<li><a href="../ar489162/index.html">Ø³ÙˆÙ ÙŠØ³Ù„Ù… Ø§Ù„Ù…Ø¯ÙŠØ±</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>