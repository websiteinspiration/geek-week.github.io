<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💷 🙈 🎅 So überspringen Sie keinen ungültigen Code im Repository 🧜🏻 💆🏾 👃🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warum ist es notwendig?
 

Wenn mehr als eine Person in Ihrem Team auf die eine oder andere Weise arbeitet, ist jeder mit dem Problem unterschiedliche...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>So überspringen Sie keinen ungültigen Code im Repository</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488626/"><h1 id="zachem-eto-neobhodimo"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum ist es notwendig?</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn mehr als eine Person in Ihrem Team auf die eine oder andere Weise arbeitet, ist jeder mit dem Problem unterschiedlicher Codierungsstile für jedes Teammitglied konfrontiert. </font><font style="vertical-align: inherit;">Jemand schreibt Klammern für Blöcke </font></font><code>if...else</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, jemand nicht. </font><font style="vertical-align: inherit;">Wenn ein Projekt größer wird, ist es schwieriger, einen solchen Code zu lesen, und noch schwieriger, eine Codeüberprüfung durchzuführen.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Damit die Codeüberprüfung und andere Teambesprechungen nicht zu einer Diskussion zwischen </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabulatoren und Leerzeichen</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit erhöhten Tönen führen, ist es besser, das Repository so zu konfigurieren, dass das Projekt selbst das Schreiben von Code nicht zulässt, der für das Team ungültig und nicht standardisiert ist.</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einerseits scheint die Verwendung verschiedener Codierungsstile geschmackvoll und unwürdig zu sein. </font><font style="vertical-align: inherit;">Nun, June schließt keine einzige Codezeile nach der Bedingung ein </font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber jemand schreibt, na und? </font><font style="vertical-align: inherit;">Wenn Sie den Code unter dem Juni-Stift "wie er ist" belassen, kann dies zu einer "Zeitbombe" werden: Diese Codezeile </font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann danach gelöscht werden, und die nächste Zeile fällt unter die Bedingung. </font><font style="vertical-align: inherit;">Natürlich wird diese Situation normalerweise in einer Codeüberprüfung erfasst, aber es kommt vor, dass dieser potenzielle Fehler den Test besteht, und hier sind zwei Hauptgründe:</font></font></p><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sind alle Menschen und die Menschen liegen falsch.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menschen sind sozial, was bedeutet, dass sie nicht in einen „Konflikt“ mit den Stilen geraten wollen. </font><font style="vertical-align: inherit;">Und hier sind zwei Möglichkeiten möglich:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Repariere es besser selbst", denkt der Rezensent und korrigiert den Code.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Inspektor bricht am Juni zusammen und äußert seine Zweifel an seiner Angemessenheit und der Notwendigkeit der Existenz.</font></font></li>
</ul></li>
</ol><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie können wir sicherstellen, dass jeder im Einklang mit dem Teamstil schreibt? </font><font style="vertical-align: inherit;">Jedes Mal, wenn eine Codeüberprüfung durchgeführt wird, werden sowohl der Autor des Codes als auch der Inspektor selbst demotiviert. </font><font style="vertical-align: inherit;">Glücklicherweise erregt dieses Problem die Köpfe von mehr als einem Programmierer seit mehr als einem Jahr, und jetzt verfügen wir über viele Tools.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Zweck dieses Artikels ist es, anderen und mir von der Zukunft zu erzählen, wie ich das Projekt-Repository so konfiguriere, dass es sich in Bezug auf Teamstandards vor ungültigem Code schützt.</font></font></p><br>
<h1 id="chto-my-imeem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was wir haben</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nehmen Sie als Beispiel ein Demo-Projekt, dessen Code auf GitHub veröffentlicht wird. </font><font style="vertical-align: inherit;">Da ich auf .NET Core entwickle, wird das Projekt darauf geschrieben. </font><font style="vertical-align: inherit;">Was ich verwenden werde:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.NET Core 3.1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Winkel 8+</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github-Konto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Travis ci</font></font></li>
</ul><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>     Travis-CI.    ,        .</p><br>
<h1 id="payplayn-repozitoriya"> </h1><br>
<p>  — ,          <code>master branch</code>.</p><br>
<p>" "    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gitlab</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Azure DevOps</a>,   Github —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Travis CI</a>.</p><br>
<h2 id="nastraivaem-repozitoriy"> </h2><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>   .  ,    ,      :</p><br>
<ul>
<li><strong>   </strong>.       develop  master ,   (maintainer).</li>
<li><strong> </strong>.        CICD      ,   .</li>
<li><strong>Repository is a king</strong>.          gitflow,         .</li>
<li><strong>Fail fast</strong>.         ,     .</li>
<li><strong>Git pre-commits hoocks</strong>.     CI   ,          -  .</li>
</ul><br>
<p>    ? -,  master  develop      .  , ,     ,   ""   .      " ".      ,        .</p><br>
<h2 id="validaciya-bekenda"> </h2><br>
<p>  solution- (*.sln)  ,        - .NET   .   ,       ,  nuget-   .</p><br>
<p>  stylecop    .NET Core.    ,            solution- (   gist.github.com):</p><br>
<ol>
<li><code>Directory.build.props</code> — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  .</li>
<li><code>standard.ruleset</code> — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  .</li>
<li><code>stylecop.json</code> — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  .</li>
</ol><br>
<p>       ,       .</p><br>
<h2 id="validaciya-frontenda"> </h2><br>
<p>-   .         :    -   ,      .        .    :</p><br>
<pre><code class="bash hljs"><span class="hljs-comment">#  </span><font></font>
ng lint<font></font>
<font></font>
<span class="hljs-comment">#    ,    html-</span><font></font>
ng build --prod<font></font>
<font></font>
<span class="hljs-comment">#  </span>
ng <span class="hljs-built_in">test</span>
</code></pre><br>
<p>       .   ,        (Chrome / Chromium),        CI-.      ,   npm- <code>puppeteer</code>  ,      .</p><br>
<p> ,      ,     :</p><br>
<ol>
<li>   <code>"test-headless-ci-only": "ng test --browsers ChromiumNoSandbox"</code>   <code>scripts</code>  <code>packages.json</code>:</li>
</ol><br>
<pre><code class="json hljs"><span class="hljs-string">"scripts"</span>: {
    <span class="hljs-attr">"ng"</span>: <span class="hljs-string">"ng"</span>,
    <span class="hljs-attr">"start"</span>: <span class="hljs-string">"ng serve -o"</span>,
    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"ng build"</span>,
    <span class="hljs-attr">"build-stage"</span>: <span class="hljs-string">"ng build --configuration=staging"</span>,
    <span class="hljs-attr">"build-prod"</span>: <span class="hljs-string">"ng build --prod"</span>,
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"ng test"</span>,
    <span class="hljs-attr">"test-headless-ci-only"</span>: <span class="hljs-string">"ng test --browsers ChromiumNoSandbox"</span>,
    <span class="hljs-attr">"lint"</span>: <span class="hljs-string">"ng lint"</span>,
    <span class="hljs-attr">"e2e"</span>: <span class="hljs-string">"ng e2e"</span><font></font>
  },<font></font>
</code></pre><br>
<ol>
<li>  <code>npm install puppeteer</code>      <code>karma.conf.js</code>    :</li>
</ol><br>
<pre><code class="plaintext hljs">const process = require("process");<font></font>
process.env.CHROME_BIN = require("puppeteer").executablePath();<font></font>
<font></font>
module.exports = function(config) {<font></font>
  ...<font></font>
};</code></pre><br>
<ol>
<li>      <code>karma.conf.js</code>   <code>customLaunchers</code>:</li>
</ol><br>
<pre><code class="plaintext hljs">config.set({<font></font>
....,<font></font>
customLaunchers: {<font></font>
      ChromiumNoSandbox: {<font></font>
        base: "ChromeHeadless",<font></font>
        flags: [<font></font>
          "--no-sandbox",<font></font>
          "--headless",<font></font>
          "--disable-gpu",<font></font>
          "--disable-translate",<font></font>
          "--disable-extensions"<font></font>
        ]<font></font>
      }<font></font>
    },<font></font>
    singleRun: true<font></font>
});</code></pre><br>
<p>        <code>npm run est-headless-ci-only</code>.</p><br>
<h2 id="standartiziruem-kod-frontenda">  </h2><br>
<p> -         ,    .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">prettierrc</a>,           .      .   prettierrc  , :</p><br>
<ol>
<li>  prettier  pretty-quick :</li>
</ol><br>
<pre><code class="bash hljs">npm install -g prettier<font></font>
npm install -g pretty-quick</code></pre><br>
<ol>
<li>     <code>.prettierrc</code>   -:</li>
</ol><br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"useTabs"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"printWidth"</span>: <span class="hljs-number">120</span>,
    <span class="hljs-attr">"tabWidth"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"singleQuote"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"trailingComma"</span>: <span class="hljs-string">"none"</span>,
    <span class="hljs-attr">"semi"</span>: <span class="hljs-literal">true</span>
}</code></pre><br>
<ol>
<li>     prettier-     <code>.prettierignore</code>   -:</li>
</ol><br>
<pre><code class="plaintext hljs">package.json<font></font>
package-lock.json<font></font>
tslint.json<font></font>
tsconfig.json<font></font>
browserslist<font></font>
.gitkeep<font></font>
favicon.ico<font></font>
tsconfig.lib.json<font></font>
tsconfig.app.json<font></font>
tsconfig.spec.json<font></font>
karma.conf.js<font></font>
protractor.conf.js<font></font>
ng-package.json<font></font>
*.html</code></pre><br>
<p>  "  "    <code>pretty-quick --staged</code>.</p><br>
<h2 id="ispolzovanie-prekommit-hukov"> -</h2><br>
<p>    CI/CD  —   ,   .       ,       .        .    ,   -,         . </p><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">husky</a>.   , :</p><br>
<ol>
<li>  husky</li>
</ol><br>
<pre><code class="bash hljs">npm install -g husky</code></pre><br>
<ol>
<li>  husk   <code>package.json</code>  :</li>
</ol><br>
<pre><code class="plaintext hljs">"devDependencies": {<font></font>
  ...<font></font>
},<font></font>
"husky": {<font></font>
    "hooks": {<font></font>
      "pre-commit": "pretty-quick --staged",<font></font>
      "pre-push": "ng lint &amp;&amp; ng test --browsers ChromiumNoSandbox"<font></font>
    }<font></font>
  }<font></font>
</code></pre><br>
<p>   :        ,         ,     "".</p><br>
<h1 id="itog"></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachdem die im Artikel beschriebenen Schritte ausgeführt wurden, erhalte ich ein Projekt, das sich vor ungültigem Code "selbst schützt". </font><font style="vertical-align: inherit;">Es ist klar, dass Sie das Produkt nicht mit einer einzigen Syntax und einem einzigen Styleguide vor Fehlern schützen können, aber selbst diese kleinen Dinge tragen zu einer besseren Codequalität bei und ermöglichen es Ihnen, Architekturlösungen für Codeüberprüfungen zu diskutieren, anstatt Probleme mit der Formatierung zu lösen.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488614/index.html">Bobbin 3.0.0 - Überprüfung der Verbesserungen</a></li>
<li><a href="../de488616/index.html">Nullproblem in Data Science und Machine Learning</a></li>
<li><a href="../de488618/index.html">Die Zusammenfassung interessanter Materialien für den mobilen Entwickler # 333 (10. - 16. Februar)</a></li>
<li><a href="../de488622/index.html">Ersetzen Cheeklisten Vorschriften?</a></li>
<li><a href="../de488624/index.html">Gegenseitige Wirtschaft</a></li>
<li><a href="../de488630/index.html">Digitale Veranstaltungen in Moskau vom 17. bis 23. Februar</a></li>
<li><a href="../de488632/index.html">Digitale Veranstaltungen in St. Petersburg vom 17. bis 23. Februar</a></li>
<li><a href="../de488636/index.html">Wie ein deutsches Lachen (das mit den Pfeilen) pumpte</a></li>
<li><a href="../de488638/index.html">Sicherer Start in i.MX6</a></li>
<li><a href="../de488640/index.html">Open Source-Anleitungen: Starten eines Open Source-Projekts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>