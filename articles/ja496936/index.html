<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–²ï¸ ğŸ“… ğŸš« Kubernetesã®cert-managerã§SSLè¨¼æ˜æ›¸ã‚’æš—å·åŒ–ã—ã¾ã—ã‚‡ã† ğŸ”¯ ğŸš· ğŸˆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã®è¨˜äº‹ã§ã¯ã€ã‚¢ãƒ‰ã‚ªãƒ³ã®cert-managerã‚’ä½¿ç”¨ã—ã¦ã€Kubernetesã®Ingressã®Let's Encryptï¼ˆã ã‘ã§ãªãï¼‰ã‹ã‚‰ã®è¨¼æ˜æ›¸ã®æ³¨æ–‡ã¨æ›´æ–°ã‚’è‡ªå‹•åŒ–ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ã—ã‹ã—ã€å•é¡Œã®æœ¬è³ªã®ç°¡å˜ãªç´¹ä»‹ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚
 
 ã¡ã‚‡ã£ã¨ã—ãŸæ•™è‚²ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
 å‰ä¸–ç´€ã®90å¹´ä»£...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetesã®cert-managerã§SSLè¨¼æ˜æ›¸ã‚’æš—å·åŒ–ã—ã¾ã—ã‚‡ã†</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/496936/"><img src="https://habrastorage.org/webt/la/qd/o7/laqdo7i6ovirl5ciie_qmnbrau4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€ã‚¢ãƒ‰ã‚ªãƒ³ã®cert-managerã‚’ä½¿ç”¨ã—ã¦ã€Kubernetesã®Ingressã®Let's Encryptï¼ˆã ã‘ã§ãªãï¼‰ã‹ã‚‰ã®è¨¼æ˜æ›¸ã®æ³¨æ–‡ã¨æ›´æ–°ã‚’è‡ªå‹•åŒ–ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€å•é¡Œã®æœ¬è³ªã®ç°¡å˜ãªç´¹ä»‹ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¡ã‚‡ã£ã¨ã—ãŸæ•™è‚²ãƒ—ãƒ­ã‚°ãƒ©ãƒ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‰ä¸–ç´€ã®90å¹´ä»£åˆé ­ã«é–‹ç™ºã•ã‚ŒãŸHTTPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯ã€æ—¥å¸¸ç”Ÿæ´»ã«æµ¸é€ã—ã™ãã¦ã€å°‘ãªãã¨ã‚‚1æ—¥ã‚’ä½¿ç”¨ã›ãšã«æƒ³åƒã™ã‚‹ã“ã¨ã¯å›°é›£ã§ã™ã€‚ãŸã ã—ã€ãã‚Œã ã‘ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨Webã‚µãƒ¼ãƒãƒ¼é–“ã§æƒ…å ±ã‚’äº¤æ›ã™ã‚‹ã¨ãã«æœ€ä½ãƒ¬ãƒ™ãƒ«ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã•ãˆæä¾›ã—ã¾ã›ã‚“ã€‚ HTTPSï¼ˆã€ŒSã€-ã‚»ã‚­ãƒ¥ã‚¢ï¼‰ãŒåŠ©ã‘ã«ãªã‚Šã¾ã™ã€‚SSL/ TLSã§é€ä¿¡ãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã“ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯æƒ…å ±ã‚’å‚å—ã‹ã‚‰ä¿è­·ã™ã‚‹ã“ã¨ã§è¨¼æ˜ã•ã‚Œã€æ¥­ç•Œã«ã‚ˆã£ã¦ç©æ¥µçš„ã«å®£ä¼ã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã¨ãˆã°ã€Googleã¯2014å¹´ã‚’</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://security.googleblog.com/2014/08/"><font style="vertical-align: inherit;">éµå®ˆ</font></a><font style="vertical-align: inherit;">ã—ã¦ã„ã¾ã™</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://security.googleblog.com/2014/08/"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ŒHTTPS everywhereã€ã®ä½ç½®ã«ãªã‚Šã€æ¤œç´¢çµæœã«å«ã¾ã‚Œã¦ã„ãªã„ã‚µã‚¤ãƒˆã®å„ªå…ˆåº¦ãŒä½ä¸‹ã—ã¾ã™ã€‚ã“ã®ã€Œå®£ä¼ã€ã¯ã€é€šå¸¸ã®æ¶ˆè²»è€…ã‚‚è¿‚å›ã—ã¾ã›ã‚“ã€‚æœ€æ–°ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ã€è¨ªå•ã—ãŸã‚µã‚¤ãƒˆã®SSLè¨¼æ˜æ›¸ã®å­˜åœ¨ã¨æ­£ç¢ºã•ã«ã¤ã„ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è­¦å‘Šã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sr/me/il/srmeilomqktrr7qofwjlgpiw01i.png"><br>
<img src="https://habrastorage.org/webt/mj/jo/pf/mjjopfpjvy84bnbdae_mv6vluw8.png"><br>
<img src="https://habrastorage.org/webt/dd/t4/vn/ddt4vnh-3yseofqyzip5qma-dti.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å€‹äººã‚µã‚¤ãƒˆã®è¨¼æ˜æ›¸ã®è²»ç”¨ã¯æ•°åãƒ‰ãƒ«ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚å¸¸ã«ãã‚Œã‚’è³¼å…¥ã™ã‚‹ã“ã¨ã¯æ­£å½“åŒ–ã•ã‚Œã€é©åˆ‡ã§ã‚ã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚å¹¸ã„ã«ã‚‚ã€2015å¹´ã®çµ‚ã‚ã‚Šä»¥æ¥ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's Encrypt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆLEï¼‰</font><font style="vertical-align: inherit;">è¨¼æ˜æ›¸</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã®</font></a><font style="vertical-align: inherit;">å½¢å¼ã§ç„¡æ–™ã®ä»£æ›¿ãŒåˆ©ç”¨å¯èƒ½ã§ã™</font><font style="vertical-align: inherit;">ã€‚ã“ã®éå–¶åˆ©ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã»ã¨ã‚“ã©ã®Webã‚µã‚¤ãƒˆã‚’æš—å·åŒ–ã—ã¦ã‚«ãƒãƒ¼ã™ã‚‹ãŸã‚ã«ã€Mozillaæ„›å¥½å®¶ã«ã‚ˆã£ã¦ä½œæˆã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èªè¨¼å±€ãŒ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãƒ‰ãƒ¡ã‚¤ãƒ³æ¤œè¨¼æ¸ˆã¿ã®</font></a><font style="vertical-align: inherit;">è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã™ã‚‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå¸‚å ´ã§å…¥æ‰‹å¯èƒ½ãªã‚‚ã®ã®ä¸­ã§æœ€ã‚‚å˜ç´”ï¼‰æœ‰åŠ¹æœŸé–“ã¯90æ—¥ã§ã€é•·å¹´ã«ã‚ãŸã‚Šã€ã„ãã¤ã‹ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã«å¯¾ã—ã¦ã„ã‚ã‚†ã‚‹ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¨¼æ˜æ›¸ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€ã‚µã‚¤ãƒˆã§ã¯ã€</font><font style="vertical-align: inherit;">Let's Encryptå°‚ç”¨ã«ä½œæˆ</font><font style="vertical-align: inherit;">ã•ã‚ŒãŸ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªå‹•è¨¼æ˜æ›¸ç®¡ç†ç’°å¢ƒ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆACMEï¼‰</font><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒˆã‚³ãƒ«</font><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä½¿ç”¨ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ãƒ‰ãƒ¡ã‚¤ãƒ³æ‰€æœ‰æ¨©ã®ç¢ºèªã¯ã€ç‰¹å®šã®HTTPã‚³ãƒ¼ãƒ‰ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP-01</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨å‘¼ã°ã‚Œã‚‹</font><font style="vertical-align: inherit;">ï¼‰ã®é…ç½®ã¾ãŸã¯DNSãƒ¬ã‚³ãƒ¼ãƒ‰</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆDNS-01ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’</font><font style="vertical-align: inherit;">ä»‹ã—ãŸè¦æ±‚ã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚Œã¾ã™</font><font style="vertical-align: inherit;">ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã§èª¬æ˜ã—ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èªå®šãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CERT-ãƒãƒãƒ¼ã‚¸ãƒ£ã¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CustomResourceDefinitionsã®ã‚»ãƒƒãƒˆï¼ˆã—ãŸãŒã£ã¦ã‚ã‚‹KubernetesãŸã‚ã®ç‰¹åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ã‚ã‚‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ¶é™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CAæ§‹æˆï¼ˆèªè¨¼å±€ï¼‰è¨¼æ˜æ›¸ã¨ã®ç›´æ¥ç™ºæ³¨ã™ã‚‹ãŸã‚ã®- V1.12 K8Sã®ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹æœ€å°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ï¼‰ã€‚</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¸ã®CRDã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ç°¡å˜ã§ã€</font><font style="vertical-align: inherit;">1ã¤ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã‚‹ã“ã¨ã«</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl create ns cert-manager<font></font>
kubectl apply -f https://github.com/jetstack/cert-manager/releases/download/v0.13.0/cert-manager.yaml</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font><font style="vertical-align: inherit;">Helmã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¯èƒ½æ€§ã‚‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã‚Š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚ï¼‰</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ³¨æ–‡æ‰‹é †ã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€èªè¨¼æ©Ÿé–¢ï¼ˆCAï¼‰ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š</font></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ãŸã¯</font></font><code>ClusterIssuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€CSRï¼ˆè¨¼æ˜æ›¸ç™ºè¡Œãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã®ç½²åã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€åˆã®ãƒªã‚½ãƒ¼ã‚¹ã¨2ç•ªç›®ã®ãƒªã‚½ãƒ¼ã‚¹ã®é•ã„ã¯ç¯„å›²å†…ã§ã™ã€‚</font></font><br>
<br>
<ul>
<li> <code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åŒã˜åå‰ç©ºé–“å†…ã§ä½¿ç”¨ã§ãã€</font></font></li>
<li> <code>ClusterIssuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¯ãƒ©ã‚¹ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cert-managerã§ç·´ç¿’ã™ã‚‹</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1ç•ªã€‚</font><font style="vertical-align: inherit;">è‡ªå·±ç½²åè¨¼æ˜æ›¸</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€ã‚‚ç°¡å˜ãªã‚±ãƒ¼ã‚¹ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†-è‡ªå·±ç½²åè¨¼æ˜æ›¸ã‚’æ³¨æ–‡ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ãŸã¨ãˆã°ã€é–‹ç™ºè€…å‘ã‘ã®å‹•çš„ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚„ã€SSLãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’çµ‚äº†ã™ã‚‹å¤–éƒ¨ãƒãƒ©ãƒ³ã‚µãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆãªã©ã€éå¸¸ã«ä¸€èˆ¬çš„ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªã‚½ãƒ¼ã‚¹</font></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Issuer<font></font>
metadata:<font></font>
  name: selfsigned<font></font>
spec:<font></font>
  selfSigned: {}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã™ã‚‹ã«ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ã®èª¬æ˜ãŒå¿…è¦ã§ã™ã€‚ãƒªã‚½ãƒ¼ã‚¹ã®</font></font><code>Certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç™ºè¡Œå ´æ‰€ï¼ˆ</font></font><code>issuerRef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥ä¸‹</font><font style="vertical-align: inherit;">ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’</font><font style="vertical-align: inherit;">å‚ç…§ï¼‰ã¨ç§˜å¯†ã‚­ãƒ¼ï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</font></font><code>secretName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã®</font><font style="vertical-align: inherit;">å ´æ‰€ãŒç¤ºã•ã‚Œã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã®å¾Œã€Ingressã¯ã“ã®ã‚­ãƒ¼ã‚’å‚ç…§ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³</font></font><code>tls</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cã‚’</font><font style="vertical-align: inherit;">å‚ç…§</font></font><code>spec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Certificate<font></font>
metadata:<font></font>
  name: selfsigned-crt<font></font>
spec:<font></font>
  secretName: tls-secret<font></font>
  issuerRef:<font></font>
    kind: Issuer<font></font>
    name: selfsigned<font></font>
  commonName: "yet-another.website"<font></font>
  dnsNames:<font></font>
  - "yet-another.website"<font></font>
---<font></font>
apiVersion: networking.k8s.io/v1beta1<font></font>
kind: Ingress<font></font>
metadata:<font></font>
  name: app<font></font>
spec:<font></font>
  tls:<font></font>
  - hosts:<font></font>
    - "yet-another.website"<font></font>
    secretName: tls-secret<font></font>
  rules:<font></font>
  - host: "yet-another.website"<font></font>
    http:<font></font>
      paths:<font></font>
      - path: /<font></font>
        backend:<font></font>
          serviceName: app<font></font>
          servicePort: 8080</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚‰ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«è¿½åŠ ã—ã¦ã‹ã‚‰æ•°ç§’å¾Œã«ã€è¨¼æ˜æ›¸ãŒç™ºè¡Œã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ã§å¯¾å¿œã™ã‚‹ãƒ¬ãƒãƒ¼ãƒˆã‚’ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">kubectl -n app describe  certificate selfsigned-crt<font></font>
...<font></font>
  Normal  GeneratedKey  5s    cert-manager  Generated a new private key<font></font>
  Normal  Requested     5s    cert-manager  Created new CertificateRequest resource "selfsigned-crt-4198958557"<font></font>
  Normal  Issued        5s    cert-manager  Certificate issued successfully</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒªã‚½ãƒ¼ã‚¹è‡ªä½“ã‚’è¦‹ã‚‹ã¨ã€æ¬¡ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§˜å¯†éµ</font></font><code>tls.key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ«ãƒ¼ãƒˆè¨¼æ˜æ›¸</font></font><code>ca.crt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªå·±ç½²åè¨¼æ˜æ›¸</font></font><code>tls.crt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯</font></font><code>openssl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãŸã¨ãˆã°æ¬¡ã®ã‚ˆã†ãª</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ç¢ºèªã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app get secret tls-secret -ojson | jq -r <span class="hljs-string">'.data."tls.crt"'</span> | base64 -d | openssl x509 -dates -noout -issuer<font></font>
notBefore=Feb 10 21:01:59 2020 GMT<font></font>
notAfter=May 10 21:01:59 2020 GMT<font></font>
issuer=O = cert-manager, CN = yet-another.website</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€èˆ¬çš„ãªã‚±ãƒ¼ã‚¹ã§ã¯ã€ã“ã‚Œ</font><b><font style="vertical-align: inherit;">ã‚’</font></b><font style="vertical-align: inherit;">ä½¿ç”¨ã—ã¦ç™ºè¡Œã•ã‚ŒãŸè¨¼æ˜æ›¸ã¯</font><b><font style="vertical-align: inherit;">ã€</font></b></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥ç¶š</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã•ã‚Œã¦</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã„ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰</font><b><font style="vertical-align: inherit;">ä¿¡é ¼ã•ã‚Œãªã„ã“ã¨ã«</font></b><font style="vertical-align: inherit;">æ³¨æ„ã—ã¦ãã ã•ã„</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç†ç”±ã¯å˜ç´”ã§ã™ã€‚CAãŒãªã„ãŸã‚ã§ã™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Webã‚µã‚¤ãƒˆã®æ³¨ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚ç…§</font><font style="vertical-align: inherit;">ï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’å›é¿ã™ã‚‹ã«ã¯</font></font><code>Certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãã‚ŒãŒå«ã¾ã‚Œã¦ã„ã‚‹ç§˜å¯†ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã‚’</font><font style="vertical-align: inherit;">æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>ca.crt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€ä¼æ¥­ã®CAçµ„ç¹”ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä»–ã®ã‚µãƒ¼ãƒãƒ¼ã‚µãƒ¼ãƒ“ã‚¹/æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‹ãƒ¼ã‚ºã«ã™ã§ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¤ãƒ³ã‚°ãƒ¬ã‚¹ã«ç™ºè¡Œã•ã‚ŒãŸè¨¼æ˜æ›¸ã«ç½²åã—ã¾ã™ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2ç•ªã€‚</font><font style="vertical-align: inherit;">HTTPæ¤œè¨¼ã§è¨¼æ˜æ›¸ã‚’æš—å·åŒ–ã—ã¾ã—ã‚‡ã†</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LEè¨¼æ˜æ›¸ã‚’ç™ºè¡Œã™ã‚‹ã«ã¯ã€å‰è¿°ã®ã‚ˆã†ã«ã€</font><font style="vertical-align: inherit;">HTTP-01ã¨DNS-01ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2ç¨®é¡ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‰ãƒ¡ã‚¤ãƒ³æ‰€æœ‰æ¨©</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ç¢ºèª</font></a><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨ã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆHTTP-01ï¼‰</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://cert-manager.io/docs/configuration/acme/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€åˆ¥å€‹ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã§å°ã•ãªWebã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã‚Œ</font></font><code>http://&lt;YOUR_DOMAIN&gt;/.well-known/acme-challenge/&lt;TOKEN&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ã‚ˆã‚Šã€è¦æ±‚ã•ã‚ŒãŸä¸€éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ãŒèªè¨¼ã‚µãƒ¼ãƒãƒ¼</font><font style="vertical-align: inherit;">ã‹ã‚‰ãƒªãƒ³ã‚¯ã‚’ä»‹ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«</font><font style="vertical-align: inherit;">é€ä¿¡ã•</font><font style="vertical-align: inherit;">ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã“ã®æ–¹æ³•ã¯ã€ãƒãƒ¼ãƒˆ80ã§ã®å¤–éƒ¨ã‹ã‚‰ã®ã‚¤ãƒ³ã‚°ãƒ¬ã‚¹ã®å¯ç”¨æ€§ã¨ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®DNSãƒ¬ã‚³ãƒ¼ãƒ‰ã®è§£æ±ºã‚’æ„å‘³ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç™ºè¡Œã•ã‚ŒãŸè¨¼æ˜æ›¸ï¼ˆDNS-01ï¼‰ã‚’ç¢ºèªã™ã‚‹2ç•ªç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIã‹ã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹DNSã‚µãƒ¼ãƒãƒ¼ã¸ã€‚ç™ºè¡Œè€…ã¯ã€ç¤ºã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸Šã«TXTãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ACMEã‚µãƒ¼ãƒãƒ¼ãŒç¢ºèªä¸­ã«å—ä¿¡ã—ã¾ã™ã€‚æ­£å¼ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹DNSãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã¯ã€CloudFlareã€AWS Route53ã€Google CloudDNSãªã©ã€ç‹¬è‡ªã®å®Ÿè£…ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acme-dns</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ãŒå«ã¾ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šLet's Encryptã«ã¯</font><font style="vertical-align: inherit;">ã€ACMEã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦</font><font style="vertical-align: inherit;">ã‹ãªã‚Š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å³ã—ã„åˆ¶é™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒã‚ã‚Šã¾ã™ã€‚é•·æ™‚é–“ç¦æ­¢ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€ãƒ‡ãƒãƒƒã‚°ã«ã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">letsencrypt-staging</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¨¼æ˜æ›¸ã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™</font><font style="vertical-align: inherit;">ï¼ˆé•ã„ã¯ACMEã‚µãƒ¼ãƒãƒ¼ã®ã¿ã§ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€ãƒªã‚½ãƒ¼ã‚¹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Issuer<font></font>
metadata:<font></font>
  name: letsencrypt<font></font>
spec:<font></font>
  acme:<font></font>
    server: https://acme-staging-v02.api.letsencrypt.org/directory <font></font>
    privateKeySecretRef:<font></font>
      name: letsencrypt<font></font>
    solvers:<font></font>
    - http01:<font></font>
       ingress:<font></font>
         class: nginx<font></font>
---<font></font>
apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Certificate<font></font>
metadata:<font></font>
  name: le-crt<font></font>
spec:<font></font>
  secretName: tls-secret<font></font>
  issuerRef:<font></font>
    kind: Issuer<font></font>
    name: letsencrypt<font></font>
  commonName: yet-another.website<font></font>
  dnsNames:<font></font>
  - yet-another.website</code></pre><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°</font></b><font style="vertical-align: inherit;">ã‚µãƒ¼ãƒãƒ¼ã®</font><font style="vertical-align: inherit;">ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯</font></font><code>server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>acme</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆc </font></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">
ã¨ã—ã¦</font><font style="vertical-align: inherit;">æŒ‡å®šã•</font><font style="vertical-align: inherit;">ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¾Œã§ãƒãƒˆãƒ«ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
ã“ã®æ§‹æˆã‚’é©ç”¨ã—ã¦ã€æ³¨æ–‡ãƒ‘ã‚¹å…¨ä½“ã‚’è¿½è·¡ã—ã¾ã™ã€‚</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œæˆ</font></font><code>Certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ã‚ˆã‚Šæ–°ã—ã„ãƒªã‚½ãƒ¼ã‚¹ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸ</font></font><code>CertificateRequest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app describe certificate le-crt<font></font>
...<font></font>
Created new CertificateRequest resource <span class="hljs-string">"le-crt-1127528680"</span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½¼ã®èª¬æ˜ã§ã¯-å‰µé€ ã®å°</font></font><code>Order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app describe certificaterequests le-crt-1127528680<font></font>
â€¦<font></font>
Created Order resource app/le-crt-1127528680-1805948596</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€</font></font><code>Order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã©ã®ã‚ˆã†ãªç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒä½•ã§ã‚ã‚‹ã‹ã‚’èª¬æ˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ãªæ¤œè¨¼ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚Œã¾ã™</font></font><code>Challenge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app describe order le-crt-1127528680-1805948596<font></font>
â€¦<font></font>
Created Challenge resource <span class="hljs-string">"le-crt-1127528680-1805948596-1231544594"</span> <span class="hljs-keyword">for</span> domain <span class="hljs-string">"yet-another.website"</span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æœ€å¾Œã«ã€ã“ã®ãƒªã‚½ãƒ¼ã‚¹ã®è©³ç´°ã«ã¯ã€ã‚¹ã‚­ãƒ£ãƒ³è‡ªä½“ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app describe challenges le-crt-1127528680-1805948596-1231544594<font></font>
...<font></font>
  Reason:      Successfully authorized domain                                                                                                                                                                      <font></font>
...<font></font>
  Normal  Started         2m45s  cert-manager  Challenge scheduled <span class="hljs-keyword">for</span> processing<font></font>
  Normal  Presented       2m45s  cert-manager  Presented challenge using http-01 challenge mechanism<font></font>
  Normal  DomainVerified  2m22s  cert-manager  Domain <span class="hljs-string">"yet-another.website"</span> verified with <span class="hljs-string">"http-01"</span> validation</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®æ¡ä»¶ãŒæº€ãŸã•ã‚Œã¦ã„ã‚‹å ´åˆï¼ˆã¤ã¾ã‚Šã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒå¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã‚ã‚Šã€LEã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒç¦æ­¢ã•ã‚Œã¦ã„ãªã„å ´åˆ...ï¼‰-1åˆ†è¶³ã‚‰ãšã§ã€è¨¼æ˜æ›¸ãŒç™ºè¡Œã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">æˆåŠŸ</font></font><code>describe certificate le-crt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã‚‹</font><font style="vertical-align: inherit;">ã¨ã€å‡ºåŠ›ã«</font><font style="vertical-align: inherit;">ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•</font><font style="vertical-align: inherit;">ã‚Œã¾ã™</font></font><code>Certificate issued successfully</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã§ã€ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æˆ¦é—˜ï¼ˆ</font></font><code>https://acme-v02.api.letsencrypt.org/directory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">ã«å®‰å…¨ã«å¤‰æ›´ã—ã€</font><font style="vertical-align: inherit;">ã™ã§ã«ç½²åã•ã‚Œã¦ã„ã‚‹ã®ã§ã¯ãªã</font></font><code>Fake LE Intermediate X1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font><font style="vertical-align: inherit;">å®Ÿéš›ã«ç½²åã•ã‚ŒãŸå®Ÿéš›ã®è¨¼æ˜æ›¸ã‚’ä¸¦ã¹</font><font style="vertical-align: inherit;">æ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™</font></font><code>Let's Encrypt Authority X3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€æœ€åˆã«ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>Certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ãã†ã§ãªã„å ´åˆã€è¨¼æ˜æ›¸ãŒã™ã§ã«å­˜åœ¨ã—ã€é–¢é€£ã—ã¦ã„ã‚‹ãŸã‚ã€æ³¨æ–‡æ‰‹é †ã¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å‰Šé™¤ã™ã‚‹ã¨ã€æ¬¡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã™ãã«è¿”ã•ã‚Œã¾ã™</font></font><code>describe certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">  Normal  PrivateKeyLost  44s                   cert-manager  Lost private key for CertificateRequest "le-crt-613810377", deleting old resource</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã¯ã®ãŸã‚ã«ã€ã€Œæˆ¦é—˜ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’é©ç”¨ã™ã‚‹ãŸã‚ã«æ®‹ã£ã¦</font></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æ—¢ã«ä¸Šè¿°ã—ãŸã‚‚ã®</font></font><code>Certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆãã‚Œã¯å¤‰ã‚ã£ã¦ã„ã¾ã›ã‚“ï¼‰ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Issuer<font></font>
metadata:<font></font>
  name: letsencrypt<font></font>
spec:<font></font>
  acme:<font></font>
    server: https://acme-v02.api.letsencrypt.org/directory<font></font>
    privateKeySecretRef:<font></font>
      name: letsencrypt<font></font>
    solvers:<font></font>
    - http01:<font></font>
       ingress:<font></font>
         class: nginx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã£</font><font style="vertical-align: inherit;">ãŸã‚‰</font></font><code>Certificate issued successfully</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>describe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app get secret tls-secret -ojson | jq -r <span class="hljs-string">'.data."tls.crt"'</span> | base64 -d | openssl x509 -dates -noout -issuer<font></font>
notBefore=Feb 10 21:11:48 2020 GMT<font></font>
notAfter=May 10 21:11:48 2020 GMT<font></font>
issuer=C = US, O = Let<span class="hljs-string">'s Encrypt, CN = Let'</span>s Encrypt Authority X3</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒŠãƒ³ãƒãƒ¼3ã€‚</font><font style="vertical-align: inherit;">DNSæ¤œè¨¼ä»˜ãã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰LE</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¨¼æ˜æ›¸ã‚’ã™ãã«ã‚µã‚¤ãƒˆã®ã™ã¹ã¦ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã«æ›¸ãè¾¼ã¿ã€ä»Šå›ã¯DNSæ¤œè¨¼ï¼ˆCloudFlareçµŒç”±ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¿ã‚¹ã‚¯ã‚’è¤‡é›‘ã«ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšã€APIã‚’ä»‹ã—ã¦ä½œæ¥­ã™ã‚‹ãŸã‚ã«CloudFlareã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã—ã¾ã™ã€‚</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«â†’APIãƒˆãƒ¼ã‚¯ãƒ³â†’ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½œæˆã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ¬¡ã®ã‚ˆã†ã«æ¨©é™ã‚’è¨­å®šã—ã¾ã™ã€‚</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨©é™ï¼š</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¾ãƒ¼ãƒ³-DNS-ç·¨é›†</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¾ãƒ¼ãƒ³-ã‚¾ãƒ¼ãƒ³-èª­ã¿å–ã‚Š</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¾ãƒ¼ãƒ³ã®ãƒªã‚½ãƒ¼ã‚¹ï¼š</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å«ã‚ã‚‹-ã™ã¹ã¦ã®ã‚¾ãƒ¼ãƒ³</font></font></li>
</ul></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿å­˜å¾Œã«å—ã‘å–ã£ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ï¼ˆä¾‹:) </font></font><code>y_JNkgQwkroIsflbbYqYmBooyspN6BskXZpsiH4M</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ ¼ç´ã•ã‚Œã‚‹ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä½œæˆã—ã€ç™ºè¡Œè€…ã§å‚ç…§ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: Secret<font></font>
metadata:<font></font>
  name: cloudflare-api-token<font></font>
type: Opaque<font></font>
stringData:<font></font>
  api-token: y_JNkgQwkroIsflbbYqYmBooyspN6BskXZpsiH4M<font></font>
---<font></font>
apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Issuer<font></font>
metadata:<font></font>
  name: letsencrypt<font></font>
spec:<font></font>
  acme:<font></font>
    server: https://acme-v02.api.letsencrypt.org/directory <font></font>
    privateKeySecretRef:<font></font>
      name: letsencrypt<font></font>
    solvers:<font></font>
    - dns01:<font></font>
        cloudflare:<font></font>
          email: my-cloudflare-acc@example.com<font></font>
          apiTokenSecretRef:<font></font>
            name: cloudflare-api-token<font></font>
            key: api-token<font></font>
<font></font>
---<font></font>
apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Certificate<font></font>
metadata:<font></font>
  name: le-crt<font></font>
spec:<font></font>
  secretName: tls-secret<font></font>
  issuerRef:<font></font>
    kind: Issuer<font></font>
    name: letsencrypt<font></font>
  commonName: yet-another.website<font></font>
  dnsNames:<font></font>
  - "yet-another.website"<font></font>
  - "*.yet-another.website"</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå®Ÿé¨“ã‚’è¡Œã†å ´åˆã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ï¼ï¼‰</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ‰ãƒ¡ã‚¤ãƒ³ã®æ‰€æœ‰æ¨©ã‚’ç¢ºèªã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app describe challenges.acme.cert-manager.io le-crt-613810377-1285319347-3806582233<font></font>
...<font></font>
Status:<font></font>
  Presented:   <span class="hljs-literal">true</span>
  Processing:  <span class="hljs-literal">true</span>
  Reason:      Waiting <span class="hljs-keyword">for</span> dns-01 challenge propagation: DNS record <span class="hljs-keyword">for</span> <span class="hljs-string">"yet-another.website"</span> not yet propagated<font></font>
  State:       pending<font></font>
Events:<font></font>
  Type    Reason     Age   From          Message<font></font>
  ----    ------     ----  ----          -------<font></font>
  Normal  Started    54s   cert-manager  Challenge scheduled <span class="hljs-keyword">for</span> processing<font></font>
  Normal  Presented  53s   cert-manager  Presented challenge using dns-01 challenge mechanism</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TXTãƒ¬ã‚³ãƒ¼ãƒ‰ãŒãƒ‘ãƒãƒ«ã«è¡¨ç¤ºã•ã‚Œã¾ã™</font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/hk/jc/pohkjc19ui1olxdlfeaiuuqm3ne.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€‚...ã—ã°ã‚‰ãã™ã‚‹ã¨ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ¬¡ã®ã‚ˆã†ã«å¤‰ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">Domain "yet-another.website" verified with "dns-01" validation</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¨¼æ˜æ›¸ãŒã™ã¹ã¦ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã§æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app get secret tls-secret -ojson | jq -r <span class="hljs-string">'.data."tls.crt"'</span> | base64 -d | openssl x509 -dates -noout -text |grep DNS:<font></font>
          DNS:*.yet-another.website, DNS:yet-another.website</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã»ã¨ã‚“ã©ã®DNSãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã¯ã€DNSãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚ŒãŸç¬é–“ã‹ã‚‰ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®DNSã‚µãƒ¼ãƒãƒ¼ã®å®Ÿéš›ã®æ›´æ–°ã¾ã§ã«çµŒéã—ãŸæ™‚é–“ã‚’ç¤ºã™ãƒ‡ãƒ¼ã‚¿æ›´æ–°æœŸé–“ãŒã‚ã‚‹ãŸã‚ã€é€šå¸¸ã€DNSã«ã‚ˆã‚‹æ¤œè¨¼ã¯ã™ãã«ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ACMEæ¨™æº–ã¯2ã¤ã®æ¤œè¨¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®çµ„ã¿åˆã‚ã›ã‚‚æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¡ã‚¤ãƒ³ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨¼æ˜æ›¸ã®å—ä¿¡ã‚’è¿…é€ŸåŒ–ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€èª¬æ˜</font></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="1c hljs">apiVersion: cert-manager.io/v1alpha2<font></font>
kind: Issuer<font></font>
metadata:<font></font>
  name: letsencrypt<font></font>
spec:<font></font>
  acme:<font></font>
    server: https:<span class="hljs-comment">//acme-v02.api.letsencrypt.org/directory</span><font></font>
    privateKeySecretRef:<font></font>
      name: letsencrypt<font></font>
    solvers:<font></font>
    - selector:<font></font>
        dnsNames:<font></font>
        - <span class="hljs-string">"*.yet-another.website"</span><font></font>
      dns01:<font></font>
        cloudflare:<font></font>
          email: my-cloudflare-acc@example.com<font></font>
          apiTokenSecretRef:<font></font>
            name: cloudflare-api-token<font></font>
            key: api-token            <font></font>
    - selector:<font></font>
        dnsNames:<font></font>
        - <span class="hljs-string">"yet-another.website"</span><font></font>
      http01:<font></font>
        ingress:<font></font>
          class: nginx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ§‹æˆã‚’é©ç”¨ã™ã‚‹ã¨ã€2ã¤ã®ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œ</font></font><code>Challenge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="bash hljs">kubectl -n app describe orders le-crt-613810377-1285319347<font></font>
â€¦<font></font>
  Normal  Created  3m29s  cert-manager  Created Challenge resource <span class="hljs-string">"le-crt-613810377-1285319347-3996324737"</span> <span class="hljs-keyword">for</span> domain <span class="hljs-string">"yet-another.website"</span>                 
  Normal  Created  3m29s  cert-manager  Created Challenge resource <span class="hljs-string">"le-crt-613810377-1285319347-1443470517"</span> <span class="hljs-keyword">for</span> domain <span class="hljs-string">"yet-another.website"</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒŠãƒ³ãƒãƒ¼4ã€‚</font><font style="vertical-align: inherit;">Ingressã®ç‰¹åˆ¥ãªã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cert-managerã§è¨¼æ˜æ›¸ã‚’ä½œæˆã™ã‚‹ç›´æ¥ãƒ‘ã‚¹ã«åŠ ãˆã¦ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ingress-shim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font><font style="vertical-align: inherit;">å‘¼ã°ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€</font><font style="vertical-align: inherit;">æ˜ç¤ºçš„ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹</font><font style="vertical-align: inherit;">ã“ã¨ã¯ã§ã</font><font style="vertical-align: inherit;">ã¾ã›ã‚“</font></font><code>Certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€ç‰¹åˆ¥ãªIngressã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã€è¨¼æ˜æ›¸ã«ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ä½¿ç”¨ã—ã¦è¨¼æ˜æ›¸ãŒè‡ªå‹•çš„ã«æ³¨æ–‡ã•ã‚Œã‚‹ã¨ã„ã†ã‚‚ã®</font></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚çµæœã¯ã€ãŠãŠã‚ˆãæ¬¡ã®Ingressãƒªã‚½ãƒ¼ã‚¹ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: networking.k8s.io/v1beta1<font></font>
kind: Ingress<font></font>
metadata:<font></font>
  annotations:<font></font>
    cert-manager.io/cluster-issuer: letsencrypt<font></font>
spec:<font></font>
  tls:<font></font>
  - hosts:<font></font>
    - "yet-another.website"<font></font>
    secretName: tls-secret<font></font>
  rules:<font></font>
  - host: "yet-another.website"<font></font>
    http:<font></font>
      paths:<font></font>
      - path: /<font></font>
        backend:<font></font>
          serviceName: app<font></font>
          servicePort: 8080</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­£ã—ã„æ“ä½œã®ãŸã‚ã«ã¯ã€ã“ã“ã§ã¯ç™ºè¡Œè€…ã®å­˜åœ¨ã ã‘ã§ååˆ†ã§ã™ã€‚ã¤ã¾ã‚Šã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’1ã¤å°‘ãªãä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŠ ãˆã¦ã€ã‚ã‚‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ™‚ä»£é…ã‚Œ</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨é‡ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KUBE-LEGO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><code>kubernetes.io/tls-acme: "true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…è¦- ã€</font></font><code>Issuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®</font><font style="vertical-align: inherit;">ã‚¸ãƒ§ãƒ–</font><font style="vertical-align: inherit;">ï¼ˆã¾ãŸã¯ãƒãƒãƒ¼ã‚¸ãƒ£ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ï¼‰ãƒ˜ãƒ«ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦è¨¼æ˜æ›¸ãƒãƒãƒ¼ã‚¸ãƒ£ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ãã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç¤¾ã§ã¯ã“ã‚Œã‚‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã›ãšã€SSLè¨¼æ˜æ›¸ã‚’æ³¨æ–‡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒä¸é€æ˜ã§ã‚ã‚‹ãŸã‚ï¼ˆãã—ã¦åŒæ™‚ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç™ºç”Ÿ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã‚‹ã•ã¾ã–ã¾ãª</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">å•é¡Œã®ãŸã‚</font></a><font style="vertical-align: inherit;">ï¼‰ã€</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“</font><font style="vertical-align: inherit;">ãŒã€ã‚ˆã‚Šå®Œå…¨ãªå›³ã®ãŸã‚ã«è¨˜äº‹ã§è¨€åŠã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–ã®ä»£ã‚ã‚Šã«</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CRDã‚’ä½¿ç”¨ã—ãŸç°¡å˜ãªæ“ä½œã‚’é€šã˜ã¦ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®Ingressã®ä¸€éƒ¨ã¨ã—ã¦èµ·å‹•ã•ã‚ŒãŸã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã®Let's Encryptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã€è‡ªå‹•æ›´æ–°å¯èƒ½ãªè‡ªå·±ç½²åã®ç„¡æ–™ã®SSLè¨¼æ˜æ›¸ã‚’æ›¸ãè¾¼ã‚€æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€ç§ãŸã¡ã®å®Ÿè·µã§æœ€ã‚‚ä¸€èˆ¬çš„ãªå•é¡Œã‚’è§£æ±ºã™ã‚‹ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€cert-managerã®æ©Ÿèƒ½ã¯ã€ä¸Šè¨˜ã®æ©Ÿèƒ½ã«é™å®šã•ã‚Œã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®Webã‚µã‚¤ãƒˆã§ã¯ã€ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æºã®ä¾‹ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vault</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã®</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãƒãƒ³ãƒ‰ãƒ«</font></a><font style="vertical-align: inherit;">ã‚„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤–éƒ¨ç™ºè¡Œã‚»ãƒ³ã‚¿ãƒ¼</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆç™ºè¡Œè€…ï¼‰ã®ä½¿ç”¨ãªã©ã§ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã®ãƒ–ãƒ­ã‚°ã‚‚èª­ã‚“ã§ãã ã•ã„ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å°‚é–€å®¶ã®ãŸã‚ã®Kubernetesãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒãƒªã‚·ãƒ¼ã®æ¦‚è¦</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â€;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â« </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesã®ãƒ’ãƒ³ãƒˆã¨ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ï¼šIngress NGINXã®ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Â»;</font></font></li>
<li> Â«<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    Ingress  Kubernetes</a>Â».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja496920/index.html">ASP.NET Coreã¨Arduinoã§ã‚¹ãƒãƒ¼ãƒˆãƒ›ãƒ¼ãƒ ã‚’ä½œã‚‹</a></li>
<li><a href="../ja496922/index.html">ã‚¸ãƒ§ãƒ–NeoQUEST-2020ã®ä¾‹ã«é–¢ã™ã‚‹ãƒªãƒãƒ¼ã‚¹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¼APKã®ã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="../ja496924/index.html">Webã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</a></li>
<li><a href="../ja496926/index.html">é‹å‘½ã®ã‚¸ãƒ§ãƒ³ãƒ»ãƒ­ãƒ¡ãƒ­ï¼šè£‚ã‘ç›®ã¨å¼•ãè£‚ãã®25å¹´</a></li>
<li><a href="../ja496934/index.html">ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¢ãƒãƒªã‚¹ã‹ã‚‰ãƒ“ã‚¸ãƒã‚¹ã‚µãƒ¼ãƒ“ã‚¹ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©ã¾ã§</a></li>
<li><a href="../ja496938/index.html">ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã€ã‚²ãƒãƒ é…åˆ—æ±ºå®šãŠã‚ˆã³ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹ã‚’å€’ã™è¦‹é€šã—</a></li>
<li><a href="../ja496940/index.html">GMã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒé›»å­æ©Ÿå™¨ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja496942/index.html">ãƒ¢ã‚¹ã‚¯ãƒ¯ã§ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ4æœˆ13ã€œ19æ—¥</a></li>
<li><a href="../ja496944/index.html">4æœˆ13æ—¥ã‹ã‚‰19æ—¥ã¾ã§ã®ã‚µãƒ³ã‚¯ãƒˆãƒšãƒ†ãƒ«ãƒ–ãƒ«ã‚¯ã§ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ</a></li>
<li><a href="../ja496946/index.html">ãƒšãƒ‹ãƒ¼ã®GPGãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚­ãƒ¼ã«ã¤ã„ã¦ã‚‚ã†ä¸€åº¦</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>