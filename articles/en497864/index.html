<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚ÄçüöÄ üßöüèº üõÄüèΩ (S) SDLC, or How to make development safer. Part 1 #‚É£ üë©üèª‚Äçüé§ üèä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Every year the development culture grows, new tools for ensuring the quality of code and new ideas on how to use these tools appear. We already wrote ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>(S) SDLC, or How to make development safer. Part 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/solarsecurity/blog/497864/"><img src="https://habrastorage.org/webt/ez/gl/hz/ezglhztqrhjd5rtgnmfdxktbhrg.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Every year the development culture grows, new tools for ensuring the quality of code and new ideas on how to use these tools appear. We already wrote about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the static analysis device</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">what aspects of analyzers you need to pay attention to</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and, finally, about how, from an organizational point of view, you can build a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">process based on static analysis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Based on the issues that we often encounter, we described the entire process of introducing a code scanner into a secure development process. Today we will talk about how to choose the analyzer that suits you.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One way or another, all developers are confronted with static analysis (code analysis without execution). For example, when the compiler generates some errors or warnings based on the results of the assembly, these are the results of static analysis. We often use linters - this is also a static analysis, although often very simple. There are more interesting examples - spotbugs (formerly findbugs), which allows you to find quite interesting vulnerabilities in Java bytecode, or the well-known SonarQube - a platform for code quality control.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, full-fledged SAST tools are still rarely encountered. </font><font style="vertical-align: inherit;">First of all, we are talking about tools that can find complex vulnerabilities. </font><font style="vertical-align: inherit;">As it turns out in practice, well-known open tools cannot cope with this task, at least because they focus on another area (bugs and simple vulnerabilities). </font><font style="vertical-align: inherit;">A good SAST tool implements interprocedural data flow analysis. </font><font style="vertical-align: inherit;">The analysis should not take place on the program text, but on the internal presentation - CFG, AST, etc. </font><font style="vertical-align: inherit;">Read more about this </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the previous article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAST</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is an example - the well-known SQL injection. In this example, data from the user falls into the completed function from the query, passed to the injectableQuery function, and already there they fall into the SQL query, making the application vulnerable to SQL injection. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0y/q-/ct/0yq-ctllfr2y2fjjdr64gi4d-es.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to find such a vulnerability, one must understand where the ‚Äúbad‚Äù data can come from, how such data can be validated, where it cannot be used. And most importantly - you need to monitor the data transfer throughout the application, this is dataflow analysis. The example is very simple, in a real application, data can go through many functions and modules, assignments and synonyms.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is clear that text search will not find such a vulnerability. Intraprocedural analysis also will not find, and in some open tools only it is implemented. To find such vulnerabilities (and this is usually the most critical vulnerabilities, that is, the main goal of the SAST tool), we need well-developed algorithms for inter-procedure analysis of data flow with large rule bases. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is on the basis of algorithmic complexity that a number of technical issues arise that distinguish the implementation of the SAST tool from other static analyzers, for example, SonarQube. We will discuss these issues in a series of articles. Spoiler: resource consumption, analysis duration, false positives.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It should be noted that in addition to algorithms, a good tool wraps all the math in a convenient interface shell, allowing you to use SAST without serious preparation. </font><font style="vertical-align: inherit;">Such tools are also embedded in the CI / CD using plugins and APIs, thereby automating the search for vulnerabilities and allowing you to build secure development processes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/87/kk/kp/87kkkppig-a42p3vglcjme_uoru.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the first article, we tried to classify the main issues that arise during the study of SAST, as well as after the decision to implement the tool. </font><font style="vertical-align: inherit;">We‚Äôll talk about some issues here, some will go to the following articles.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's start</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why SAST if you already have free static analyzers?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We partially addressed this question in the previous part. Of course, we in no way diminish the merits of open tools. Everyone knows SonarQube is a great tool for automating code quality assessment, with a large number of supported languages, integrations and plugins. SonarQube is good for embedding in the development process, but is intended more for counting various code metrics and searching for fairly simple errors or vulnerabilities. It does not implement interprocedural analysis of the data stream; accordingly, it cannot be used to search for complex vulnerabilities. Usually we recommend using both SonarQube and a good SAST tool (it can be useful here if the SAST tool can integrate with SonarQube).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are other good open static analyzers. You can call spotbugs (findbugs) for the JVM bytecode with the find-sec-bugs plugin, which implements in-process analysis of the data stream with a small set of rules. There is a well-known bandit analyzer for Python. One cannot but mention the static analyzer built into clang, which has a good analysis engine and a good rule base. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p9/nx/y3/p9nxy3lg9cfmxym2yewk17rcaxq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The problems of such tools are that they are usually rather narrowly specialized (for example, suitable for one language), they implement simple algorithms (that is, they do not allow finding complex vulnerabilities), and they have much smaller rule bases than commercial tools. In addition, they have a smaller set of functionality, both interface and integration. Well, we can mention the lack of support.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the other hand, good commercial SAST tools (and there are also bad ones) implement complex specific algorithms and have extensive rule bases that can include thousands of records. Usually they support many programming languages, have rich interface and integration capabilities (plugins, APIs). Below I give an example of what kind of integrations we are talking about.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/ah/s5/orahs5ozajcqajmoy4kptkv_axw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And even lower, look at an example of an integration scheme that can be built on the basis of a SAST tool. </font><font style="vertical-align: inherit;">In general, the scheme does not differ from the introduction of other code quality control tools. </font><font style="vertical-align: inherit;">Developers write code and can immediately run a SAST check. </font><font style="vertical-align: inherit;">The code gets into the repository and from there on various triggers using CI / CD gets into SAST. </font><font style="vertical-align: inherit;">Scan results can either be viewed in the SAST interface, or they can end up in tools that support the development process (bug tracker, mail, etc.).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6h/lz/hm/6hlzhmytzb-9qacck3hg0ztcdbc.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Which SAST tool to choose?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will dwell a little at the stage of choosing a tool. </font><font style="vertical-align: inherit;">There are a lot of SAST tools, usually several pieces are presented on the market (3-4). </font><font style="vertical-align: inherit;">The question arises, how to choose the right tool, what to look for? </font><font style="vertical-align: inherit;">Here I will not surprise, I will focus on three points: functional comparison, quality comparison and licensing. </font><font style="vertical-align: inherit;">It is important to take the testing tool (pilot) in your local circuit and check on your code in your infrastructure. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would be nice to try all the features of the interface, to understand how they are applicable to your case and how convenient they are to use. </font><font style="vertical-align: inherit;">I refer to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">one of the previous articles</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Here are some useful features:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the most automated launch of scanning (ideally, without unnecessary settings in two buttons, you can run a scan); </font></font></li>
<li>     ‚Äî  ,  ,     ;</li>
<li>   ;</li>
<li> ;</li>
<li>    ;</li>
<li>  (,        );</li>
<li>          ;</li>
<li>  ,          ‚Äú‚Äù;</li>
<li>  ‚Äú   ,      ‚Äù;</li>
<li> ;</li>
<li>      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The integration capabilities are very important - with CI / CD, bugtrackers, repositories, Active Directory. It would be nice to try to automate a simple action using the API, if any. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To check the quality you need to scan your code. It‚Äôs good to choose several different examples in different languages ‚Äã‚Äãso that the sample is representative. From the point of view of quality, you need to look at false positives (where there is clearly no vulnerability, but the tool shows) and omissions (ideally you need to know where the vulnerabilities are, well, or compare the vulnerabilities found in different tools). I would pay a little less attention to false positives, since it is usually enough to go through the scan results once, mark false ones, and then they will not bother you.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will focus on two important points. </font><font style="vertical-align: inherit;">First of all, it is very important to look at all this in application to your situation. </font><font style="vertical-align: inherit;">Check exactly your code (SAST may work differently on different types of applications). </font><font style="vertical-align: inherit;">Search for those features that you need to embed the tool in the development process. </font><font style="vertical-align: inherit;">Check integration with the systems that you have. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secondly, it is very important during the pilot to communicate with the vendor. </font><font style="vertical-align: inherit;">SAST is not the easiest thing, and often it‚Äôs enough to get the usual advice from the vendor in order to fully appreciate the power of the tool.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At what point do you start scanning?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The sooner a vulnerability is found, the cheaper it is. There are hackneyed schedules wandering from presentation to presentation, I won‚Äôt even add them here. But the statement is quite obvious. It is one thing to fix the vulnerability the day after it is made, another thing is to make a change to the combat server when it has already been hacked. Accordingly, it is necessary to transfer the use of SAST to the early stages of development. Here it can be argued that the introduction of SAST in development is in itself an expensive event and it may not pay off. Here I will argue: usually finding several critical vulnerabilities covers the entire implementation (you can even conduct an assessment within the pilot).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With this approach, we also get a bonus: developers, when they see the SAST results ‚Äúevery day‚Äù, advance in knowledge of safe programming, thus, in general, the culture of safe development is enhanced and the code gets better. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, when implementing SAST in the development process, it is necessary to implement in CI / CD, building DevSecOps. </font><font style="vertical-align: inherit;">The trend of transferring SAST from control checks before release to the development process has been visible for a long time, and in the last 2-3 years it has caught up with our market. </font><font style="vertical-align: inherit;">Now no pilot passes without testing the integration capabilities. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, I would leave control checks before the release, ideally, for binary assemblies (this is also possible). </font><font style="vertical-align: inherit;">So you can make sure that no new vulnerabilities were added during the assembly and transfer of the application to the product.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technical issues</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And then I‚Äôll give you 4 questions right away.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connect SAST as SonarQube, what is the difficulty?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAST works for a long time, how to configure DevSecOps?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAST gives false positives, how to configure Quality Gate?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And without false positives in the report, several thousand vulnerabilities, what to do with them?</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These are the main technical issues that arise when implementing SAST. </font><font style="vertical-align: inherit;">They arise for the following reasons.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Due to the exponential nature of the algorithms, SAST can run for a long time and consume a lot of resources - much more than a linter or SonarQube.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For the same reason, SAST can give a lot of false positives - it is unlikely that developers will want to parse a bunch of falls every day after the next scan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usually, SAST is launched on the code base for the first time, and the first run can show a lot of operations, especially if there is a lot of code and the database is not very new.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All issues are solvable. </font><font style="vertical-align: inherit;">In the next article in the series, we will examine, using a concrete example from our experience, how to implement SAST in such a way as to level all its technical features and to make everyone happy.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organizational matters</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would not forget about organizational issues. </font><font style="vertical-align: inherit;">In large companies, a lot of them arise, from the implementation process itself, the allocation of resources to the creation of regulations and the replication of processes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Organizational issues are generated by the same technical features that we discussed in the previous paragraph. </font><font style="vertical-align: inherit;">Well, besides this, the historically established division and confrontation between development and security have not yet gone away. </font><font style="vertical-align: inherit;">I also refer to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">our previous article.</font></font><br>
</a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To be continued</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implement SAST - it is necessary, it is usually justified. </font><font style="vertical-align: inherit;">But, starting to implement, it would be nice to get acquainted with all the pitfalls that arise on your way. </font><font style="vertical-align: inherit;">In this article, we began to disassemble them, we will continue with technical aspects in the following.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497850/index.html">How did I repair an arcade machine</a></li>
<li><a href="../en497856/index.html">Boost Converter: DCM vs CCM. Or why not be afraid to take it yourself</a></li>
<li><a href="../en497858/index.html">Big memory requirements in Android - what to do?</a></li>
<li><a href="../en497860/index.html">Generating design patterns in ES6 + on the example of the Game of Thrones</a></li>
<li><a href="../en497862/index.html">Why not delete all elements of the array by reassigning it to []?</a></li>
<li><a href="../en497866/index.html">Clean SIL Code</a></li>
<li><a href="../en497870/index.html">Computer viruses: a story from harmless home spies to bank card thieves</a></li>
<li><a href="../en497872/index.html">Unusual and quite obvious factors affecting the traffic of corporate networks and the work of providers</a></li>
<li><a href="../en497874/index.html">David Heinemeyer Hansson (Basecamp, ReWork, Ruby on Rails) on how it works</a></li>
<li><a href="../en497876/index.html">[bookmark] Working with images on the web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>