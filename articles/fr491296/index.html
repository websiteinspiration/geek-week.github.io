<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🎤 🖕🏾 🏳️‍🌈 Dagaz: une histoire de persistance 🌴 🧔🏾 🎠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Toute technologie suffisamment avancée est indiscernable de la magie. 
 Arthur Clark 
  
 - Je ne veux plus être une comparaison ... Fais-moi une méta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dagaz: une histoire de persistance</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491296/"><img align="left" src="https://habrastorage.org/webt/4i/sc/k4/4isck4toxbws20hsk3nrqghdkoy.png"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toute technologie suffisamment avancée est indiscernable de la magie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arthur Clark </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Je ne veux plus être une comparaison ... Fais-moi une métaphore. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chine Mieville</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Travailler sur un grand</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> projet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est similaire à</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la plongée en métro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En résolvant des problèmes particuliers, nous ouvrons de nouvelles opportunités. Au fil du temps, ces opportunités se renforcent, se connectent à d'autres opportunités et cela nous permet de résoudre des problèmes anciens, beaucoup plus importants et complexes d'une manière nouvelle et complètement inattendue. J'ai un bon exemple à ce sujet. Et je veux parler de lui.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le module de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration commune a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> été </font><font style="vertical-align: inherit;">conçu comme un simple outil de débogage. </font><font style="vertical-align: inherit;">Souvent, il est très utile de pouvoir revenir à une position spécifique afin de localiser le problème. </font><font style="vertical-align: inherit;">Mais cette disposition des figures se pose fugitivement dans le jeu, et sa restauration vaut un travail considérable. </font><font style="vertical-align: inherit;">J'avais besoin d'un outil pour automatiser ce processus, et je l'ai fait. </font><font style="vertical-align: inherit;">En fait, je peux facilement encoder n'importe quelle position en décrivant l'emplacement des pièces sur le plateau:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? setup = 0c3; 0a2; 0c2; 0d2; 1a1; 4b1; 5c1; 1d1; -1a4; 4b4; 5c4; 1d4; 0a3; 0d3; 0b2 ;; &amp; turn = 0</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, je peux ajouter ces paramètres à l'url pour reproduire la position. C'est ce que fait la configuration commune. Le module enregistre la description de toutes les positions intermédiaires dans le journal et permet de les reproduire. Ce n'est pas un mécanisme très parfait. Par exemple, une telle description ne nous donne rien si nous ne savons pas à quel jeu elle appartient. Il y a d'autres lacunes, dont je parlerai plus tard. Maintenant, il est temps de rencontrer le prochain participant de notre histoire.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/7_/i1/dz/7_i1dzv7lp6sajcawqmldwx4hma.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'option de niveaux progressifs est venue de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zillions of Games</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et pendant longtemps je n'ai pas compris pourquoi elle était nécessaire. Essayez d'éteindre toutes les ampoules (c'est simple) et vous comprendrez de quoi je parle. Une fois que le joueur a gagné, progressif-level regarde l'url actuelle et s'il y trouve un nombre, l'augmente d'une unité. En fait, c'est un excellent moyen d'engager le joueur, mais ses capacités ne se limitent pas à cela. Il y a des jeux composés de plusieurs tours. Après avoir terminé un, les joueurs, selon certaines règles, redistribuent les pièces et recommencent à jouer.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/iy/bi/ff/iybiff0rupuwcijge_z8b0fimiw.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche est souvent pratiquée dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mankali</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> africain </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">À </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ovalhu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , par exemple, le jeu ne recommence pas seulement. </font><font style="vertical-align: inherit;">Les joueurs utilisent des grains capturés lors du tour précédent pour remplir initialement leurs trous. </font><font style="vertical-align: inherit;">Les trous qui n'ont pas été remplis sont considérés comme abandonnés du jeu; ils ne peuvent pas être utilisés. </font><font style="vertical-align: inherit;">En fait, à chaque tour, une nouvelle partie est jouée, sur un nouveau plateau. </font><font style="vertical-align: inherit;">Ce n'est que lorsque le perdant au tour suivant, le joueur ne peut pas remplir au moins un trou, que sa défaite finale est reconnue.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette opportunité peut être comprise beaucoup plus largement.</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/o_/aj/lp/o_ajlpvgnzcglfojk3vd-rhwozy.png"></div></a><br>
   ,           .          common-setup    .   ,        ,     ,     .    ,       .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gk/hf/ye/gkhfyel6ybgkumfd5x_foxluhny.png"></div></a><br>
      ,  .  «»   ,       .  ,  "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Magyar Dama</a>"      ( ,     «»),   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Hive</a>, ,     .       ,      ,    ,   , ,     .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ss/0s/uo/ss0suora_d8v2vavrw7kz8wehlw.png"></div></a><br>
         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a> (      ,           roguelike-).          «»,   seed,    . ,            (       ).      (,   ),         .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/lt/ea/11/ltea11ctmcw6ymezanbr_ygakfi.png"></div></a><br>
    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>    .     .   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>", ,    ,    ,      .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prochaine étape a été franchie presque par accident. </font><font style="vertical-align: inherit;">Il y a du son dans mes jeux. </font><font style="vertical-align: inherit;">Je l'aime vraiment, mais il y a probablement des gens dans le monde qu'il agace. </font><font style="vertical-align: inherit;">C'était pour eux qu'il était possible de l'éteindre. </font><font style="vertical-align: inherit;">Il semblerait que cela fonctionnait bien, mais les paramètres n'étaient enregistrés nulle part et après chaque rafraîchissement de page, le son devait être à nouveau désactivé (et cela était encore plus gênant). </font><font style="vertical-align: inherit;">On m'a demandé de résoudre ce problème d'une manière ou d'une autre et la première solution qui m'est venue à l'esprit était un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cookie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (la première solution n'est pas toujours réussie).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici à quoi ça ressemblait</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">Dagaz.Controller.sound = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (Dagaz.Controller.soundOff) {<font></font>
        sound.innerHTML = <span class="hljs-string">"no Sound"</span>;<font></font>
        Dagaz.Controller.soundOff = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">document</span>.cookie = <span class="hljs-string">"dagaz.sound=on"</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        sound.innerHTML = <span class="hljs-string">"Sound"</span>;<font></font>
        Dagaz.Controller.soundOff = <span class="hljs-literal">true</span>;
        <span class="hljs-built_in">document</span>.cookie = <span class="hljs-string">"dagaz.sound=off"</span>;<font></font>
    }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne voulais pas jeter de déchets, donc les cookies ont été de courte durée jusqu'à la fermeture de la fenêtre du navigateur. </font><font style="vertical-align: inherit;">Et puis je me suis dit: "pourquoi ne pas enseigner la configuration commune à être également stockée dans les cookies?" </font><font style="vertical-align: inherit;">J'ai dû définir le paramètre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max-age</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais cela en valait la peine. </font><font style="vertical-align: inherit;">Tout d'abord, l'état du jeu était désormais sauvegardé lorsque la fenêtre était accidentellement fermée. </font><font style="vertical-align: inherit;">En prime, le changement de mode de jeu avec le bot AI / no AI n'a pas non plus réinitialisé le jeu. </font><font style="vertical-align: inherit;">C'était génial!</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bien sûr, je devais prévoir autre chose</font></font></b><div class="spoiler_text"> ,       ,   ,       ,    cookie (       ).        «New game»,     .      .   ,    common-setup        ,     ?  cookie        ( ,    ).<br>
<br>
<div class="spoiler"><b class="spoiler_title">  -    </b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">var</span> getName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">window</span>.location.pathname.toString();
  <span class="hljs-keyword">var</span> result = str.match(<span class="hljs-regexp">/\/([^.\/]+)\./</span>);
  <span class="hljs-keyword">if</span> (result) {
      <span class="hljs-keyword">return</span> result[<span class="hljs-number">1</span>].replace(<span class="hljs-string">"-board"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-string">"-ai"</span>, <span class="hljs-string">""</span>);<font></font>
  } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> str;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> badName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">var</span> result = str.match(<span class="hljs-regexp">/[?&amp;]game=([^&amp;*]*)/</span>);
  <span class="hljs-keyword">if</span> (result) {
      <span class="hljs-keyword">return</span> result[<span class="hljs-number">1</span>] != getName();<font></font>
  } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> getCookie = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">document</span>.cookie;
  <span class="hljs-keyword">var</span> result = str.match(<span class="hljs-regexp">/dagaz\.(setup=[^*]*)/</span>);
  <span class="hljs-keyword">if</span> (result) {
      <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">decodeURIComponent</span>(result[<span class="hljs-number">1</span>]);
      <span class="hljs-keyword">if</span> (badName(r)) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-string">"?"</span> + r;<font></font>
  } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> getSetup = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">window</span>.location.search.toString();
  <span class="hljs-keyword">var</span> result = str.match(<span class="hljs-regexp">/[?&amp;]setup=([^&amp;]*)/</span>);
  <span class="hljs-keyword">if</span> (result) {
      <span class="hljs-keyword">return</span> result[<span class="hljs-number">1</span>];<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
      str = getCookie();<font></font>
      result = str.match(<span class="hljs-regexp">/[?&amp;]setup=([^&amp;]*)/</span>);
      <span class="hljs-keyword">if</span> (result) {
          <span class="hljs-keyword">return</span> result[<span class="hljs-number">1</span>];<font></font>
      } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;<font></font>
      }<font></font>
  }<font></font>
}<font></font>
<font></font>
Dagaz.Model.getSetup = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">design, board</span>) </span>{
  <span class="hljs-keyword">var</span> str = <span class="hljs-string">""</span>;<font></font>
  ...<font></font>
  str = str + <span class="hljs-string">";&amp;turn="</span> + board.turn;
  <span class="hljs-keyword">if</span> (Dagaz.Controller.persistense == <span class="hljs-string">"setup"</span>) {
      <span class="hljs-keyword">var</span> s = str + <span class="hljs-string">"&amp;game="</span> + getName() + <span class="hljs-string">"*"</span>;
      <span class="hljs-keyword">var</span> maxage = getMaxage();
      <span class="hljs-keyword">if</span> (maxage) {
        <span class="hljs-built_in">document</span>.cookie = <span class="hljs-string">"dagaz.setup="</span> + <span class="hljs-built_in">encodeURIComponent</span>(s) + <span class="hljs-string">"; max-age="</span> + maxage;<font></font>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">document</span>.cookie = <span class="hljs-string">"dagaz.setup="</span> + <span class="hljs-built_in">encodeURIComponent</span>(s);<font></font>
      }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-string">"?setup="</span> + str;<font></font>
}<font></font>
</code></pre></div></div><br>
 ,           .   ,      (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Pasang</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Chaturanji</a>) ,   ,   ,         (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Morris</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Bolotoudou</a>)   common-setup   ,     .    ,          !<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/nw/xp/p1/nwxpp1i7qo0aevfux5rr_kqaaim.png"></div></a><br>
        .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a> (  ,        ).   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Stratego</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Luzhanqi</a>,       (     ).       (common-setup,   ,    ),     …<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/0y/hp/yd/0yhpyduqu2mgx4glqonulbwmrlw.png"></div></a><br>
  ,   ,          , common-setup     ,    .      ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Mana</a>, ,   ),         ,     . <br>
<br>
 ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>,    .   ,    random,   c seed ,      ,    ,    - .  , seed    cookie,    ,    ,     ,    .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, il existe des jeux pour lesquels la méthode d'enregistrement de l'état par le module de configuration commune n'est pas appropriée. </font><font style="vertical-align: inherit;">Dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kamisado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mentionné ci-dessus </font><font style="vertical-align: inherit;">, la possibilité de terminer un coup (pour tous les coups sauf le tout premier) dépend du champ dans lequel le coup précédent a été accompli. </font><font style="vertical-align: inherit;">Il existe des jeux avec des mécanismes encore plus complexes:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/pc/ah/yo/pcahyosk3fotjxjnlmmafvjw5jk.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moulin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en plus des mouvements habituels, il y a des bonus - si un joueur a arrangé ses trois pièces d'affilée, il a le droit de retirer la pièce d'un adversaire du plateau. </font><font style="vertical-align: inherit;">De plus, les règles interdisent de construire le même triplet deux fois de suite. </font><font style="vertical-align: inherit;">Tout cela signifie que pour que le jeu fonctionne correctement, vous devez sauvegarder l'historique des coups précédents. </font><font style="vertical-align: inherit;">Heureusement, il existe une telle opportunité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le module de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gestion de session</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enregistre l'historique du jeu, permettant au joueur de revenir en arrière un ou plusieurs coups, éventuellement en effectuant un autre. </font><font style="vertical-align: inherit;">De plus, l'option conseiller est associée à ce mécanisme, qui indique au joueur un mouvement possible lors de la lecture avec le bot. </font><font style="vertical-align: inherit;">Rétrospectivement, l'idée de sauvegarder l'historique du jeu dans les cookies semble évidente, mais je n'y suis pas tout de suite arrivée.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le jeu de correspondance est apparu pour la première fois</font></font></b><div class="spoiler_text"> Dagaz   .  - ,     "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Zillions of Games</a>",    1998 .  2003  Zillions  ,     ,      . Ed van Zon            .          "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">MindSports</a>",     .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/eu/in/mr/euinmrgfa_ur3e13hx3tjnhokdc.png"></div></a><br>
   MindSports  Dagaz     . Ed      ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Java-</a>,  ,   ,   .   , Ed        Dagaz,     .<br>
<br>
 ,       ,  ,       ,  .   ,  Dagaz,   ,   - backend-,   JavaScript-  . Ed   session-manager,      . ,     ,   ,        ,  ,     ,    (   , ),   ,    .<br>
<br>
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">SGF</a> ,   , session-manager   ,  SGF  .  ,         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>,      ,  ,  SGF        (   , ).    ,  MindSports,   ,    80      Dagaz          .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'étape suivante était assez évidente: j'ai commencé à enregistrer la </font><font style="vertical-align: inherit;">description </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SGF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des parties dans un cookie, puis ils m'ont dit que ce n'était pas très moderne et j'ai tout déplacé vers </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localStorage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (cela a simplifié le code et résolu certains problèmes de débogage dans Google Chrome). À ce stade, le lecteur peut avoir une question. J'ai deux mécanismes pour le même but, et l'un d'eux est plus parfait que l'autre. Pourquoi ne pas basculer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tous les</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jeux en persistance de session? Malheureusement, ce n'est pas si simple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe des familles entières de jeux pour lesquelles les sessions de sauvegarde ne sont pas applicables:</font></font><br>
<br>
<ol>
<li>           (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Shatranj</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Sittuyin</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Janggi</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Stratego</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Luzhanqi</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Banqi</a>   )</li>
<li>  ,    session-manager    (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Ur</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Puluc</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Shen</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Backgammon</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Chaturaji</a>  )</li>
<li>  (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Kamisado</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Washington</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Ohvalhu</a>)</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfin, il y a des jeux dans lesquels la persistance du gestionnaire de session ne peut pas être utilisée, pour des raisons de performance (curieusement, à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fanorona</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pour toute sa simplicité apparente, au tout début du jeu, il y a un grand nombre de débuts possibles liés aux spécificités de la prise dans ce jeu)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En général, j'ai deux mécanismes conçus, en général, pour le même. </font><font style="vertical-align: inherit;">Et c'est super, car je peux choisir lequel appliquer.</font></font><br></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr491282/index.html">Comment augmenter la productivité de l'équipe (et réduire les erreurs) à l'aide de rallyes</a></li>
<li><a href="../fr491284/index.html">Analyse: qu'est-ce que l'analyse fondamentale</a></li>
<li><a href="../fr491286/index.html">Réseaux IPv6 uniquement dans le gouvernement américain</a></li>
<li><a href="../fr491288/index.html">Les polygraphes deviennent fous un par un</a></li>
<li><a href="../fr491294/index.html">Transactions distribuées pour des bases de données hétérogènes dans MS .NET</a></li>
<li><a href="../fr491298/index.html">Comment trouver des logiciels malveillants (non) avec WinDbg</a></li>
<li><a href="../fr491300/index.html">STM32 Partie 2: Initialisation</a></li>
<li><a href="../fr491302/index.html">Client OVPN sur les téléphones Grandstream</a></li>
<li><a href="../fr491304/index.html">Helsinki: une ville de bonheur et de confort</a></li>
<li><a href="../fr491308/index.html">ClickHouse - analyse des données visuellement rapide et intuitive dans Tabix. Igor Strykhar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>