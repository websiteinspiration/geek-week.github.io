<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèñÔ∏è üë®üèæ‚Äçüè≠ üåà Exploration of the sand shader game Journey üõµ üõåüèª ‚ûï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beginning of a series of articles here
 
 
 Part 4: Mirror Image
 In this part, we will focus on mirror reflections, thanks to which the dunes resembl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Exploration of the sand shader game Journey</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487154/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beginning of a series of articles here</font></font></a><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/828/9b4/997/8289b49971bbe0046845f71284790124.png" alt="image"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 4: Mirror Image</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this part, we will focus on mirror reflections, thanks to which the dunes resemble an ocean of sand. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the most intriguing effects of </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 's </font><font style="vertical-align: inherit;">sand rendering </font><font style="vertical-align: inherit;">is how the dunes sparkle in the rays of light. This reflection is called </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">specular</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The name comes from the Latin word </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">speculum</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , meaning </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"mirror"</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Specular reflection</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is an ‚Äúumbrella‚Äù concept that combines all types of interactions in which light is strongly reflected in one direction rather than scattered or absorbed. Thanks to specular reflections, both water and polished surfaces at a certain angle look sparkling. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are three types of mirror reflections: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rim lighting</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ocean specular</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glitter reflections</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , shown in the diagram below.</font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In this part we will look at the first two types.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e83/9e1/047/e839e1047f41693c6830b105a3c55c59.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07a/739/06d/07a73906d58ed9d4c251340b4e92d7f5.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/d17/d2f/716d17d2f4d0d0796e51bee059ce39c2.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before and after applying mirror reflections</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rim lighting</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You may notice that at each </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> level a </font><font style="vertical-align: inherit;">limited set of colors is presented. </font><font style="vertical-align: inherit;">And while this creates a strong and clean aesthetics, this approach complicates the rendering of sand. </font><font style="vertical-align: inherit;">Dunes are rendered only by a limited number of shades, so it is difficult for the player to understand where one ends at a long distance and the other begins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To compensate for this, the edge of each dune has a slight radiance effect, highlighting its contours. </font><font style="vertical-align: inherit;">This allows the dunes not to hide into the horizon and creates the illusion of a much wider and more complex environment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before starting to figure out how to implement this effect, let's expand </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the lighting function by</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adding </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diffuse color to it</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (considered by us in the previous part of the article) and a new generalized component of specular reflection.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function">float4 <span class="hljs-title">LightingJourney</span> (<span class="hljs-params">SurfaceOutput s, fixed3 viewDir, UnityGI gi</span>)</span><font></font>
{<font></font>
    <span class="hljs-comment">// Lighting properties</span><font></font>
    float3 L = gi.light.dir;<font></font>
    float3 N = s.Normal;<font></font>
<font></font>
    <span class="hljs-comment">// Lighting calculation</span><font></font>
    float3 diffuseColor	= DiffuseColor (N, L);<font></font>
    float3 rimColor     = RimLighting  (N, V);<font></font>
<font></font>
    <span class="hljs-comment">// Combining</span><font></font>
    float3 color = diffuseColor + rimColor;<font></font>
<font></font>
    <span class="hljs-comment">// Final color</span>
    <span class="hljs-keyword">return</span> float4(color * s.Albedo, <span class="hljs-number">1</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the code snippet shown above, we see that the mirror component of the rim lighting, which is called </font></font><code>rimColor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, is simply added to the original diffuse color.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">High Dynamic Range and Bloom Effects</font></font></b><div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Both the diffuse component and the glow of the edges are RGB colors in the range from </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-1">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> before </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-2">1</script>.     .  ,       <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-3">1</script>.<br>
<br>
      ,   ,        <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-4">0</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-5">1</script>.   ,   ,    <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-6">1</script>.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">High Dynamic Range</a>,      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-7">1</script>  ¬´¬ª    .       bloom,    .       <strong> </strong>.<br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fresnel Reflections</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The glow of the edges can be realized in many different ways. </font><font style="vertical-align: inherit;">The most popular shader coding uses the well-known </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fresnel reflection model</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To understand the equation underlying Fresnel reflection, it is helpful to visualize where it occurs. </font><font style="vertical-align: inherit;">The diagram below shows how the dune is visible through the camera (in blue). </font><font style="vertical-align: inherit;">The red arrow indicates the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal surface of the</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> top of the dune, where it should be a mirror image. </font><font style="vertical-align: inherit;">It is easy to see that all the edges of the dune have a common property: their normal (</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">N</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, red) is perpendicular to the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direction of view</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.009ex" viewBox="0 -755.5 769.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-9">V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, of blue color).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c82/547/052/c82547052c28a89dbc8c8fc9b3fa5976.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Similar to what we did in the part about Diffuse Color, you can use the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scalar product</font></font></strong> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-10">N</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.009ex" viewBox="0 -755.5 769.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-11">V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to get a measure of their parallelism. </font><font style="vertical-align: inherit;">In this case</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi><mo>&amp;#x22C5;</mo><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.53ex" height="2.009ex" viewBox="0 -755.5 2380.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="1110" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="1611" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>‚ãÖ</mo><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-12">N \cdot V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> equals </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-13">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, because two unit vectors are perpendicular; </font><font style="vertical-align: inherit;">instead we can use</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mo>&amp;#x2212;</mo><mi>N</mi><mo>&amp;#x22C5;</mo><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.533ex" height="2.134ex" viewBox="0 -755.5 4104.4 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="1723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="2834" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="3334" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>‚àí</mo><mi>N</mi><mo>‚ãÖ</mo><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-14">1- N \cdot V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to obtain measures of their non-parallelism. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Direct use</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mo>&amp;#x2212;</mo><mi>N</mi><mo>&amp;#x22C5;</mo><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.533ex" height="2.134ex" viewBox="0 -755.5 4104.4 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="1723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="2834" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="3334" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>‚àí</mo><mi>N</mi><mo>‚ãÖ</mo><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-15">1- N \cdot V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will not give us good results, because the reflection will be too strong. </font><font style="vertical-align: inherit;">If we want to make the reflection </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sharper</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we can just take the expression in degree. </font><font style="vertical-align: inherit;">Degree of magnitude from</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-16">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> before </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-17">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remains limited to one interval, but the transition between darkness and light becomes sharper. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Fresnel reflection model states that the brightness of light</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.172ex" height="2.009ex" viewBox="0 -755.5 504.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-49" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-18">I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is set as follows:</font></font><br>
<br>
<p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>I</mi><mo>=</mo><msup><mrow><mo>(</mo><mrow><mn>1</mn><mo>&amp;#x2212;</mo><mi>N</mi><mo>&amp;#x22C5;</mo><mi>V</mi></mrow><mo>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>p</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>o</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>w</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi></mrow></msup><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>s</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>n</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>g</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>h</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.343ex" height="2.759ex" viewBox="0 -863.1 14356 1188" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="782" y="0"></use><g transform="translate(1838,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="1723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="2834" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="3334" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="4493" y="0"></use><g transform="translate(4883,477)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6F" x="511" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-77" x="1023" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1687" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="2148" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2217" x="8861" y="0"></use><g transform="translate(9584,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6E" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-67" x="2187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="2648" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-68" x="2980" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="13076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="13466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="13966" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>I</mi><mo>=</mo><msup><mrow><mo>(</mo><mrow><mn>1</mn><mo>‚àí</mo><mi>N</mi><mo>‚ãÖ</mo><mi>V</mi></mrow><mo>)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">p</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi></mrow></msup><mo>‚àó</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi></mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-19">\begin{equation*}  I = \left(1 -N \cdot V\right)^\mathit{power} * \mathit{strength} \end{equation*}(1)</script></math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Where </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>p</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>o</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>w</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.114ex" height="1.884ex" viewBox="0 -540.2 2632.5 811.3" role="img" focusable="false" style="vertical-align: -0.63ex; margin-right: -0.144ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6F" x="511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-77" x="1023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="2148" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">p</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-20">\mathit{power}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>s</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>n</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>g</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>h</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.189ex" height="2.384ex" viewBox="0 -755.5 3526 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex; margin-right: -0.079ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6E" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-67" x="2187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="2648" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-68" x="2980" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-21">\mathit{strength}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- These are two parameters that can be used to control the contrast and strength of the effect. </font><font style="vertical-align: inherit;">Parameters</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>p</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>o</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>w</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.114ex" height="1.884ex" viewBox="0 -540.2 2632.5 811.3" role="img" focusable="false" style="vertical-align: -0.63ex; margin-right: -0.144ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6F" x="511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-77" x="1023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="2148" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">p</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-22">\mathit{power}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>s</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>n</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>g</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>h</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.189ex" height="2.384ex" viewBox="0 -755.5 3526 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex; margin-right: -0.079ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6E" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-67" x="2187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="2648" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-68" x="2980" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-23">\mathit{strength}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sometimes called </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">specular</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gloss</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but the names may vary. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Equation (1) is very easy to convert to code:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">float</span> _TerrainRimPower;
<span class="hljs-keyword">float</span> _TerrainRimStrength;<font></font>
float3 _TerrainRimColor;<font></font>
<font></font>
<span class="hljs-function">float3 <span class="hljs-title">RimLighting</span>(<span class="hljs-params">float3 N, float3 V</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">float</span> rim = <span class="hljs-number">1.0</span> - saturate(dot(N, V));<font></font>
    rim = saturate(pow(rim, _TerrainRimPower) * _TerrainRimStrength);<font></font>
    rim = max(rim, <span class="hljs-number">0</span>); <span class="hljs-comment">// Never negative</span>
    <span class="hljs-keyword">return</span> rim * _TerrainRimColor;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Its result is shown in the animation below.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/X7xnX4OSc1A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ocean specular</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the most original aspects of </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gameplay is </font><font style="vertical-align: inherit;">that sometimes a player can literally ‚Äúsurf‚Äù the dunes. Leading engineer John Edwards explained that </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thatgamecompany</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sought to make sand more felt not solid, but liquid. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And this is not entirely wrong, because sand can be perceived as a very rough approximation of a liquid. And under certain conditions, for example, in an hourglass, he even behaves like a liquid. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To reinforce the idea that sand may have a liquid component, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> has added a second reflection effect, which is often found in liquid bodies. John Edwards calls it </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ocean specular</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: The idea is to get the same type of reflections that are visible on the surface of the ocean or lake at sunset (see below).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/095/17e/c43/09517ec43fc6abd21bf8b04bce0bf66b.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As before, we will make changes to the lighting function </font></font><code>LightingJourney</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to add a new type of specular reflection to it.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function">float4 <span class="hljs-title">LightingJourney</span> (<span class="hljs-params">SurfaceOutput s, fixed3 viewDir, UnityGI gi</span>)</span><font></font>
{<font></font>
    <span class="hljs-comment">// Lighting properties</span><font></font>
    float3 L = gi.light.dir;<font></font>
    float3 N = s.Normal;<font></font>
    float3 V = viewDir;<font></font>
<font></font>
    <span class="hljs-comment">// Lighting calculation</span><font></font>
    float3 diffuseColor	= DiffuseColor  (N, L);<font></font>
    float3 rimColor     = RimLighting   (N, V);<font></font>
    float3 oceanColor   = OceanSpecular (N, L, V);<font></font>
<font></font>
    <span class="hljs-comment">// Combining</span><font></font>
    float3 specularColor = saturate(max(rimColor, oceanColor));<font></font>
    float3 color = diffuseColor + specularColor;<font></font>
<font></font>
    <span class="hljs-comment">// Final color</span>
    <span class="hljs-keyword">return</span> float4(color * s.Albedo, <span class="hljs-number">1</span>);<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why do we take a maximum of two reflection components?</font></font></b><div class="spoiler_text">   ,    <strong>rim lighting</strong>  <strong>ocean specular</strong>.   ,     ,         -.   ,     .<br>
<br>
    ,       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mirror reflections on water are often realized using </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blinn-Fong reflection</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which is a low-cost solution for shiny materials. </font><font style="vertical-align: inherit;">It was first described by James F. Blinn in 1977 (article: " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Models of Light Reflection for Computer Synthesized Pictures</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ") as an approximation of an earlier shading technique developed by Bui Tyong Fong in 1973 (article: " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Illumination for Computer Generated Pictures</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ") . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When using Blinnu-Phong shading, luminosity</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.172ex" height="2.009ex" viewBox="0 -755.5 504.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-49" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-24">I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> surfaces is given by the following equation:</font></font><br>
<br>
<p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>I</mi><mo>=</mo><msup><mrow><mo>(</mo><mrow><mi>N</mi><mo>&amp;#x22C5;</mo><mi>H</mi></mrow><mo>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>p</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>o</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>w</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi></mrow></msup><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>s</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>r</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>e</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>n</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>g</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>t</mi><mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;>h</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><mn>2</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.617ex" height="2.759ex" viewBox="0 -863.1 12751.6 1188" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="782" y="0"></use><g transform="translate(1838,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="1110" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-48" x="1611" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="2889" y="0"></use><g transform="translate(3278,477)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6F" x="511" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-77" x="1023" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1687" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="2148" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2217" x="7257" y="0"></use><g transform="translate(7980,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-72" x="742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-65" x="1164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-6E" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-67" x="2187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-74" x="2648" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAINI-68" x="2980" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="11472" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="11861" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="12362" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>I</mi><mo>=</mo><msup><mrow><mo>(</mo><mrow><mi>N</mi><mo>‚ãÖ</mo><mi>H</mi></mrow><mo>)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">p</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi></mrow></msup><mo>‚àó</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi></mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-25">\begin{equation*}  I = \left(N \cdot H\right)^\mathit{power} * \mathit{strength} \end{equation*}(2)</script></math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Where </font></font><br>
<br>
<p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>H</mi><mo>=</mo><mfrac><mrow><mi>V</mi><mo>+</mo><mi>L</mi></mrow><mrow><mo symmetric=&quot;true&quot;>&amp;#x2016;</mo><mrow><mi>V</mi><mo>+</mo><mi>L</mi></mrow><mo symmetric=&quot;true&quot;>&amp;#x2016;</mo></mrow></mfrac><mo stretchy=&quot;false&quot;>(</mo><mn>3</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.505ex" height="5.884ex" viewBox="0 -1455.1 7537 2533.5" role="img" focusable="false" style="vertical-align: -2.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="1166" y="0"></use><g transform="translate(1944,0)"><g transform="translate(397,0)"><rect stroke="none" width="3794" height="60" x="0" y="220"></rect><g transform="translate(560,676)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="1992" y="0"></use></g><g transform="translate(60,-726)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2225" x="0" y="0"></use><g transform="translate(500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="1992" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2225" x="3174" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="6257" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="6647" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="7147" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>H</mi><mo>=</mo><mfrac><mrow><mi>V</mi><mo>+</mo><mi>L</mi></mrow><mrow><mo symmetric="true">‚Äñ</mo><mrow><mi>V</mi><mo>+</mo><mi>L</mi></mrow><mo symmetric="true">‚Äñ</mo></mrow></mfrac><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-26">\begin{equation*}  H = \frac{V + L}{\left \| V+L \right \|} \end{equation*}(3)</script></math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The denominator of equation (3) divides the vector </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi><mo>+</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.21ex" height="2.134ex" viewBox="0 -755.5 2673.9 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="1992" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi><mo>+</mo><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-27">V+L</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on its length. </font><font style="vertical-align: inherit;">This ensures that</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-48" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-28">H</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> has a length </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-29">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The equivalent shader function to perform this operation is this </font></font><code>normalize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">From a geometric point of view,</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-48" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-30">H</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> represents the vector between </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.009ex" viewBox="0 -755.5 769.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-31">V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.009ex" viewBox="0 -755.5 681.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-32">L</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and therefore is called a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">half vector</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7af/a5b/6f8/7afa5b6f85a208334f37ff8a3ec7d943.png"></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why is H between V and L?</font></font></b><div class="spoiler_text">,   ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.152ex" viewBox="0 -801.6 888.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-48" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-33">H</script> ‚Äî   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.152ex" viewBox="0 -801.6 769.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-34">V</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.152ex" viewBox="0 -801.6 681.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-35">L</script>.<br>
<br>
    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"> </a>,       .  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.152ex" viewBox="0 -801.6 769.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-36">V</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.152ex" viewBox="0 -801.6 681.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-37">L</script>    <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.152ex" viewBox="0 -801.6 681.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-38">L</script>   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.152ex" viewBox="0 -801.6 769.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-39">V</script>       <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.152ex" viewBox="0 -801.6 769.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-40">V</script>   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.152ex" viewBox="0 -801.6 681.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-41">L</script>.<br>
<br>
     ,   , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi><mo>+</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.21ex" height="2.295ex" viewBox="0 -801.6 2673.9 988.1" role="img" focusable="false" style="vertical-align: -0.433ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="1992" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi><mo>+</mo><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-42">V+L</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi><mo>+</mo><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.21ex" height="2.295ex" viewBox="0 -801.6 2673.9 988.1" role="img" focusable="false" style="vertical-align: -0.433ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="1904" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi><mo>+</mo><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-43">L+V</script>, .  ,      :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c9/2ba/181/4c92ba1815755568822507862486ec2e.png"></div><br>
   ,  ,     .    ,   (  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi><mo>+</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.21ex" height="2.295ex" viewBox="0 -801.6 2673.9 988.1" role="img" focusable="false" style="vertical-align: -0.433ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="1992" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi><mo>+</mo><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-44">V+L</script>)   .  ,       ( ).<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f02/02f/4d2/f0202f4d20afdbf26d3f1e80616180af.png"></div><br>
  ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi><mo>+</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.21ex" height="2.295ex" viewBox="0 -801.6 2673.9 988.1" role="img" focusable="false" style="vertical-align: -0.433ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="1992" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi><mo>+</mo><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-45">V+L</script> ‚Äî    <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.152ex" viewBox="0 -801.6 769.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-46">V</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.152ex" viewBox="0 -801.6 681.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-47">L</script>,       <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-48">1</script>.    ,      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-49">1</script>,       ( ).<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A more detailed description of Blinn-Fong reflection can be found in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Physically Based Rendering and Lighting Models</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tutorial </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Below is a simple implementation of it in the shader code.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">float</span> _OceanSpecularPower;
<span class="hljs-keyword">float</span> _OceanSpecularStrength;<font></font>
float3 _OceanSpecularColor;<font></font>
<font></font>
<span class="hljs-function">float3 <span class="hljs-title">OceanSpecular</span> (<span class="hljs-params">float3 N, float3 L, float3 V</span>)</span><font></font>
{<font></font>
    <span class="hljs-comment">// Blinn-Phong</span>
    float3 H = normalize(V + L); <span class="hljs-comment">// Half direction</span>
    <span class="hljs-keyword">float</span> NdotH = max(<span class="hljs-number">0</span>, dot(N, H));
    <span class="hljs-keyword">float</span> specular = pow(NdotH, _OceanSpecularPower) * _OceanSpecularStrength;
    <span class="hljs-keyword">return</span> specular * _OceanSpecularColor;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The animation presents a comparison of the traditional diffuse shadowing according to Lambert and the mirror one according to Blinn-Fong:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DGmK3VgzWUU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 5: brilliant reflection</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this part, we will recreate the brilliant reflections that are usually visible on the sand dunes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Shortly after publishing my series of articles, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Julian Oberbek</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Nadelek</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> made their own attempt to recreate a scene inspired by the Journey game in Unity. The tweet below shows how they perfected brilliant reflections to provide greater temporal integrity. Read more about their implementation in an article on IndieBurg </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mip Map Folding</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1214857483715567616"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the previous part of the course, we revealed the implementation of two mirror functions in </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sand rendering </font><font style="vertical-align: inherit;">: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rim lighting</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ocean specular</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In this part, I will explain how to implement the last version of specular reflection: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glitter</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/35e/ada/492/35eada4926ebf58a389faec51e2ae895.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you've ever been to the desert, you probably noticed how sand is actually shiny. </font><font style="vertical-align: inherit;">As discussed in the sand normals part, each grain of sand can potentially reflect light in a random direction. </font><font style="vertical-align: inherit;">Due to the nature of random numbers, part of these reflected rays will fall into the camera. </font><font style="vertical-align: inherit;">Because of this, random dots of sand will appear very bright. </font><font style="vertical-align: inherit;">This luster is very sensitive to movement, since the slightest shift will prevent the reflected rays from entering the camera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In other games, such as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Astroneer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slime Rancher,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> brilliant reflections were used for sand and caves.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/d17/d2f/716d17d2f4d0d0796e51bee059ce39c2.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/f3c/33c/539f3c33c6c12f5206540ff62ecf4102.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gloss: before and after applying the effect.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
It's easier to evaluate these gloss characteristics in a larger image:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/91a/563/52c/91a56352c32cc17c9701e1a60c4a28e5.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/347/28d/7e3/34728d7e33e9904f9815fe8a8b1d1105.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Without a doubt, the glitter effect on real dunes depends entirely on the fact that some grains of sand randomly reflect light into our eyes. Strictly speaking, this is exactly what we have already modeled in the second part of the course devoted to sand normals, when we modeled a random distribution of normals. So why do we need another effect for this? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The answer may not be too obvious. Let's imagine that we are trying to recreate the gloss effect only with the help of normals. Even if all the normals are directed to the camera, the sand will still not shine, because the normals can only reflect the amount of light that is available in the scene. That is, at best, we will reflect only 100% of the light (if the sand is completely white).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But we need something else. </font><font style="vertical-align: inherit;">If we want the pixel to appear so bright that the light </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spreads</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> onto the pixels adjacent to it, then the color should be larger</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-50">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This happened because in Unity, when the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloom filter is</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> applied to the camera </font><font style="vertical-align: inherit;">using </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the post-processing effect</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the colors are brighter</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-51">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spread to neighboring pixels and produce a halo that creates the feeling that some pixels are glowing. </font><font style="vertical-align: inherit;">This is the foundation of </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDR rendering</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So no, overlaying normals cannot be used in a simple way to create shiny surfaces. </font><font style="vertical-align: inherit;">Therefore, this effect is more convenient to implement as a separate process.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Theory of Microfaces</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To approach the situation more formally, we need to perceive the dunes as consisting of microscopic mirrors, each of which has a random direction. This approach is called the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microfacet theory</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where </font><font style="vertical-align: inherit;">each of these tiny mirrors is called </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microfacet</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The mathematical foundation of most modern shading models is based on the theory of micro faces, including the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard shader</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> model </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">from Unity</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first step is to divide the surface of the dune into micro faces and determine the orientation of each of them. As already mentioned, we did something similar in the part of the tutorial on the normals of sand, where the UV position of the 3D model of the dune was used to sample a random texture. The same approach can be used here to attach a random orientation to each micro facet. The size of each microface will depend on the scale of the texture and on its </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">level of mip-texturing</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Our task is to recreate a certain aesthetics, and not the desire for photorealism; this approach will be good enough for us. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After sampling a random texture, we can associate a random direction with each sand grain / micro facet of the dune. Let's call him</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>G</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.134ex" viewBox="0 -809.3 786.5 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-47" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></span></span><script type="math/tex" id="MathJax-Element-52">G</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It indicates the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direction of brightness</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , that is, the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direction of the normal of the</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> grains of sand we are looking at. </font><font style="vertical-align: inherit;">A ray of light falling on a grain of sand will be reflected, taking into account the fact that the micro facet is an ideal mirror oriented in the direction</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>G</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.134ex" viewBox="0 -809.3 786.5 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-47" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></span></span><script type="math/tex" id="MathJax-Element-53">G</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The resulting reflected light ray should enter the camera.</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>R</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.009ex" viewBox="0 -755.5 759.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi></math></span></span><script type="math/tex" id="MathJax-Element-54">R</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (see below).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d71/668/23c/d7166823c2badfe515d38068087de58a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we can again use the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scalar product</font></font></strong> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>R</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.009ex" viewBox="0 -755.5 759.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi></math></span></span><script type="math/tex" id="MathJax-Element-55">R</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.787ex" height="2.009ex" viewBox="0 -755.5 769.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-56">V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to obtain measures of their parallelism. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One approach is exponentiation</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>R</mi><mo>&amp;#x22C5;</mo><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.23ex" height="2.009ex" viewBox="0 -755.5 2251.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="1482" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi><mo>‚ãÖ</mo><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-57">R \cdot V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, as explained in the previous (fourth) part of the article. </font><font style="vertical-align: inherit;">If you try to do so, we will see that the result is very different from what is in </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Brilliant reflections should be rare and very bright. </font><font style="vertical-align: inherit;">The easiest way will be to consider only those brilliant reflections for which</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>R</mi><mo>&amp;#x22C5;</mo><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.23ex" height="2.009ex" viewBox="0 -755.5 2251.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="1482" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi><mo>‚ãÖ</mo><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-58">R \cdot V</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is below a certain threshold value.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We can easily implement the gloss effect described above using a function </font></font><code>reflect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Cg, which makes it very easy to calculate</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>R</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.009ex" viewBox="0 -755.5 759.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi></math></span></span><script type="math/tex" id="MathJax-Element-59">R</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="cs hljs">sampler2D_float _GlitterTex;
<span class="hljs-keyword">float</span> _GlitterThreshold;<font></font>
float3 _GlitterColor;<font></font>
<font></font>
<span class="hljs-function">float3 <span class="hljs-title">GlitterSpecular</span> (<span class="hljs-params">float2 uv, float3 N, float3 L, float3 V</span>)</span><font></font>
{<font></font>
    <span class="hljs-comment">// Random glitter direction</span>
    float3 G = normalize(tex2D(_GlitterTex, uv).rgb * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>); <span class="hljs-comment">// [0,1]-&gt;[-1,+1]</span><font></font>
<font></font>
    <span class="hljs-comment">// Light that reflects on the glitter and hits the eye</span><font></font>
    float3 R = reflect(L, G);<font></font>
    <span class="hljs-keyword">float</span> RdotV = max(<span class="hljs-number">0</span>, dot(R, V));<font></font>
	<font></font>
    <span class="hljs-comment">// Only the strong ones (= small RdotV)</span>
    <span class="hljs-keyword">if</span> (RdotV &gt; _GlitterThreshold)
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
	<font></font>
    <span class="hljs-keyword">return</span> (<span class="hljs-number">1</span> - RdotV) * _GlitterColor;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Strictly speaking, if </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>G</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.134ex" viewBox="0 -809.3 786.5 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-47" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></span></span><script type="math/tex" id="MathJax-Element-60">G</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> completely by chance then </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>R</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.009ex" viewBox="0 -755.5 759.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi></math></span></span><script type="math/tex" id="MathJax-Element-61">R</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will also be completely random. </font><font style="vertical-align: inherit;">It may seem that use is </font></font><code>reflect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optional. </font><font style="vertical-align: inherit;">And although this is true for a static frame, but what happens if the light source moves? </font><font style="vertical-align: inherit;">This can be either due to the movement of the sun itself, or because of a point source of light tied to the player. </font><font style="vertical-align: inherit;">In both cases, the sand will lose temporal integrity between the current and subsequent frames, due to which the glitter effect will appear in random places. </font><font style="vertical-align: inherit;">However, using the function </font></font><code>reflect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">provides much more stable rendering. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The results are shown below:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1wnw0B2hWPI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As we recall from the very first part of the tutorial, the gloss component is added to the final color.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> surface surf Journey fullforwardshadows</span><font></font>
<font></font>
<span class="hljs-function">float4 <span class="hljs-title">LightingJourney</span> (<span class="hljs-params">SurfaceOutput s, fixed3 viewDir, UnityGI gi</span>)</span><font></font>
{<font></font>
    float3 diffuseColor = DiffuseColor    ();<font></font>
    float3 rimColor     = RimLighting     ();<font></font>
    float3 oceanColor   = OceanSpecular   ();<font></font>
    float3 glitterColor = GlitterSpecular ();<font></font>
<font></font>
    float3 specularColor = saturate(max(rimColor, oceanColor));<font></font>
    float3 color = diffuseColor + specularColor + glitterColor;<font></font>
	<font></font>
    <span class="hljs-keyword">return</span> float4(color * s.Albedo, <span class="hljs-number">1</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a high probability that some pixels will eventually get more color </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-62">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which will lead to the bloom effect. </font><font style="vertical-align: inherit;">That is what we need. </font><font style="vertical-align: inherit;">The effect is also added on top of the already existing specular reflection (discussed in the previous part of the article), so shiny grains of sand can even be found where the dunes are well lit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many ways to improve this technique. </font><font style="vertical-align: inherit;">It all depends on the outcome that you want to achieve. </font><font style="vertical-align: inherit;">In </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Astroneer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slime Rancher</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , for example, this effect is only used at night. </font><font style="vertical-align: inherit;">This can be achieved by reducing the strength of the gloss effect depending on the direction of sunlight. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, the value </font></font><code>max(dot(L, fixed3(0,1,0),0))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-63">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when the sun falls from above, and is equal to zero when it is beyond the horizon. </font><font style="vertical-align: inherit;">But you can create your own system, the appearance of which depends on your preferences.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why is reflection not used in Blinn-Fong reflection?</font></font></b><div class="spoiler_text"> <strong>ocean specular</strong>,     ,     <strong>  -</strong>.<br>
<br>
   ,       3D-      , ,   .    ,   <code>reflect</code>   .       - <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>R</mi><mo>&amp;#x22C5;</mo><mi>V</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.23ex" height="2.152ex" viewBox="0 -801.6 2251.9 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-56" x="1482" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>R</mi><mo>‚ãÖ</mo><mi>V</mi></math></span></span><script type="math/tex" id="MathJax-Element-64">R \cdot V</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi><mo>&amp;#x22C5;</mo><mi>H</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.806ex" height="2.152ex" viewBox="0 -801.6 2499.9 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="1110" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-48" x="1611" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>‚ãÖ</mo><mi>H</mi></math></span></span><script type="math/tex" id="MathJax-Element-65">N \cdot H</script>,     .</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 6: waves</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the last part of the article, we will recreate typical sand waves resulting from the interaction of dunes and wind.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c00/b54/814/c00b54814122211b0ae5db424f92a7f5.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/f3c/33c/539f3c33c6c12f5206540ff62ecf4102.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/828/9b4/997/8289b49971bbe0046845f71284790124.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waves on the surface of the dunes: before and after It would be</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
theoretically logical to put this part after the part about the normals of sand. </font><font style="vertical-align: inherit;">I left it in the end because it is the most difficult of the effects of the tutorial. </font><font style="vertical-align: inherit;">Part of this complexity is due to the way the normal maps are stored and processed by a surface shader that performs many additional steps.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normal Maps</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the previous (fifth) part, we explored a method for producing heterogeneous sand. In the part devoted to sand normals, a very popular </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal mapping</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> technique was used to change the way light interacts with the geometry surface </font><font style="vertical-align: inherit;">. It is often used in 3D graphics to create the illusion that the object has more complex geometry, and is usually used to make curved surfaces smoother (see below).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f93/544/d9c/f93544d9c95a70da71848897f0913676.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To achieve this effect, each pixel is mapped to the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direction of the normal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , indicating its orientation. </font><font style="vertical-align: inherit;">And it is used to calculate lighting instead of the true orientation of the mesh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By reading the directions of the normals from an apparently random texture, we were able to simulate the graininess. </font><font style="vertical-align: inherit;">Despite the physical inaccuracy, she still looks believable.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waves in the sand</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, sand dunes show another feature that cannot be ignored: waves. </font><font style="vertical-align: inherit;">On each dune there are smaller dunes, appearing due to the influence of the wind and held together by the friction of individual grains of sand. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These waves are very visible and visible on most dunes. </font><font style="vertical-align: inherit;">In the photograph shown below, taken in Oman, it is seen that the near part of the dune has a pronounced wavy pattern.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/874/c94/2b7/874c942b78535dabc26f5971c4e6c30b.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These waves vary significantly depending not only on the shape of the dune, but also on the composition, direction and speed of the wind. </font><font style="vertical-align: inherit;">Most dunes with a sharp peak have waves on one side only (see below).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b30/e98/3da/b30e983daf43fc38b8fbe3714eebabc2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The effect presented in the tutorial is designed for smoother dunes with waves on both sides. </font><font style="vertical-align: inherit;">This is not always physically accurate, but realistic enough to be believable, and is a good first step toward more complex implementations.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realization of the waves</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many ways to implement waves. The least expensive is to simply draw them on a texture, but in the tutorial we want to achieve something else. The reason is simple: the waves are not ‚Äúflat‚Äù and must correctly interact with the light. If you simply draw them, it will be impossible to achieve a realistic effect when the camera (or the sun) moves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another way to add waves is to change the geometry of the dune model. But increasing the complexity of the model is not recommended, because it greatly affects the overall performance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As we saw in the part about sand normals, you can get around this problem using </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal maps</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In fact, they are drawn on the surface like traditional textures, but are used in lighting calculations to simulate more complex geometry.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That is, the task has turned into another: how to create these normal maps. Manual rendering will be too time consuming. In addition, each time you change the dunes, you will need to redraw the waves again. This will significantly slow down the process of creating resources, which many technical artists seek to avoid. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A much more effective and optimal solution would be to add waves in a </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">procedural</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> manner. This means that the normal directions of the dunes change based on local geometry in order to take into account not only sand grains, but also waves.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the waves need to be simulated on a 3D surface, it will be more logical to implement a change in the direction of the normals for each pixel. </font><font style="vertical-align: inherit;">It‚Äôs easier to use a seamless normal map with a wave pattern. </font><font style="vertical-align: inherit;">This map will then be combined with the existing normal map previously used for sand.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normal Maps</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Until this moment, we met with three different </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normals</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geometry Normal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : the orientation of each face of the 3D model, which is stored directly at the vertices;</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sand normal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : calculated using noise texture;</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wave Normal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : The new effect discussed in this part.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The example below, taken from the Unity </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surface Shader examples</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> page </font><font style="vertical-align: inherit;">, demonstrates a standard way to rewrite the normal of a 3D model. </font><font style="vertical-align: inherit;">This requires changing the value </font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which is usually done after sampling the texture (most often called the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal map</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<pre><code class="cpp hljs">  Shader <span class="hljs-string">"Example/Diffuse Bump"</span> {<font></font>
    Properties {<font></font>
      _MainTex (<span class="hljs-string">"Texture"</span>, <span class="hljs-number">2</span>D) = <span class="hljs-string">"white"</span> {}<font></font>
      _BumpMap (<span class="hljs-string">"Bumpmap"</span>, <span class="hljs-number">2</span>D) = <span class="hljs-string">"bump"</span> {}<font></font>
    }<font></font>
    SubShader {<font></font>
      Tags { <span class="hljs-string">"RenderType"</span> = <span class="hljs-string">"Opaque"</span> }<font></font>
      CGPROGRAM<font></font>
      #pragma surface surf Lambert<font></font>
      struct Input {<font></font>
        float2 uv_MainTex;<font></font>
        float2 uv_BumpMap;<font></font>
      };<font></font>
      sampler2D _MainTex;<font></font>
      sampler2D _BumpMap;<font></font>
      <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">surf</span> <span class="hljs-params">(Input IN, inout SurfaceOutput o)</span> </span>{<font></font>
        o.Albedo = tex2D (_MainTex, IN.uv_MainTex).rgb;<font></font>
        o.Normal = UnpackNormal (tex2D (_BumpMap, IN.uv_BumpMap));<font></font>
      }<font></font>
      ENDCG<font></font>
    } <font></font>
    Fallback <span class="hljs-string">"Diffuse"</span>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We used the exact same technique to replace the normal of geometry with the normal of sand.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is UnpackNormal?</font></font></b><div class="spoiler_text">  <strong> </strong>  <strong> </strong>.  <strong> </strong> (   1),   ,     .  X, Y  Z      R, G  B  .<br>
<br>
       <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.152ex" viewBox="0 -740.1 1279 926.6" role="img" focusable="false" style="vertical-align: -0.433ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>‚àí</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-66">-1</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.152ex" viewBox="0 -740.1 1279 926.6" role="img" focusable="false" style="vertical-align: -0.433ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-67">+1</script>.          <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-68-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-68">0</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-69-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-69">1</script>.  ,        ¬´¬ª     ¬´¬ª   .     <strong>  (normal packing)</strong>  <strong>  (normal unpacking)</strong>.         :<br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-70-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; displaystyle=&quot;true&quot;><mtr><mtd><mi>R</mi></mtd><mtd><mi></mi><mo>=</mo><mfrac><mi>X</mi><mn>2</mn></mfrac><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mtd></mtr><mtr><mtd><mi>G</mi></mtd><mtd><mi></mi><mo>=</mo><mfrac><mi>Y</mi><mn>2</mn></mfrac><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>=</mo><mfrac><mi>Z</mi><mn>2</mn></mfrac><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mtd></mtr></mtable><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.299ex" height="16.009ex" viewBox="0 -3692.5 7017.8 6892.9" role="img" focusable="false" aria-hidden="true" style="vertical-align: -7.249ex; margin-bottom: -0.184ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(167,0)"><g transform="translate(-13,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="27" y="2260"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-47" x="0" y="-87"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-42" x="27" y="-2435"></use></g><g transform="translate(774,0)"><g transform="translate(0,2260)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><g transform="translate(1056,0)"><g transform="translate(397,0)"><rect stroke="none" width="972" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-58" x="60" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="236" y="-686"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="2768" y="0"></use><g transform="translate(3547,0)"><g transform="translate(342,0)"><rect stroke="none" width="620" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="60" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="60" y="-686"></use></g></g></g><g transform="translate(0,-87)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><g transform="translate(1056,0)"><g transform="translate(397,0)"><rect stroke="none" width="883" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-59" x="60" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="191" y="-686"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="2679" y="0"></use><g transform="translate(3458,0)"><g transform="translate(342,0)"><rect stroke="none" width="620" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="60" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="60" y="-686"></use></g></g></g><g transform="translate(0,-2435)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><g transform="translate(1056,0)"><g transform="translate(397,0)"><rect stroke="none" width="843" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-5A" x="60" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="171" y="-686"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="2639" y="0"></use><g transform="translate(3418,0)"><g transform="translate(342,0)"><rect stroke="none" width="620" height="60" x="0" y="220"></rect><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="60" y="676"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="60" y="-686"></use></g></g></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="5738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="6127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="6628" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" displaystyle="true"><mtr><mtd><mi>R</mi></mtd><mtd><mi></mi><mo>=</mo><mfrac><mi>X</mi><mn>2</mn></mfrac><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mtd></mtr><mtr><mtd><mi>G</mi></mtd><mtd><mi></mi><mo>=</mo><mfrac><mi>Y</mi><mn>2</mn></mfrac><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>=</mo><mfrac><mi>Z</mi><mn>2</mn></mfrac><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mtd></mtr></mtable><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-70">\begin{align} R &= \frac{X}{2} + \frac{1}{2} \\ G &= \frac{Y}{2} + \frac{1}{2} \\B &= \frac{Z}{2} + \frac{1}{2}\end{align}(1)</script></p><br>
  :<br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-71-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; displaystyle=&quot;true&quot;><mtr><mtd><mi>X</mi></mtd><mtd><mi></mi><mo>=</mo><mn>2</mn><mi>R</mi><mo>&amp;#x2212;</mo><mn>1</mn></mtd></mtr><mtr><mtd><mi>Y</mi></mtd><mtd><mi></mi><mo>=</mo><mn>2</mn><mi>G</mi><mo>&amp;#x2212;</mo><mn>1</mn></mtd></mtr><mtr><mtd><mi>Z</mi></mtd><mtd><mi></mi><mo>=</mo><mn>2</mn><mi>B</mi><mo>&amp;#x2212;</mo><mn>1</mn></mtd></mtr></mtable><mo stretchy=&quot;false&quot;>(</mo><mn>2</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.79ex" height="8.866ex" viewBox="0 -2154.8 6798.3 3817.5" role="img" focusable="false" aria-hidden="true" style="vertical-align: -3.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(167,0)"><g transform="translate(-13,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-58" x="0" y="1250"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-59" x="89" y="-50"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-5A" x="129" y="-1350"></use></g><g transform="translate(840,0)"><g transform="translate(0,1250)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-52" x="1834" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="2816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="3817" y="0"></use></g><g transform="translate(0,-50)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-47" x="1834" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="2843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="3844" y="0"></use></g><g transform="translate(0,-1350)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-42" x="1834" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="2816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="3817" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="5518" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="5908" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="6408" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" displaystyle="true"><mtr><mtd><mi>X</mi></mtd><mtd><mi></mi><mo>=</mo><mn>2</mn><mi>R</mi><mo>‚àí</mo><mn>1</mn></mtd></mtr><mtr><mtd><mi>Y</mi></mtd><mtd><mi></mi><mo>=</mo><mn>2</mn><mi>G</mi><mo>‚àí</mo><mn>1</mn></mtd></mtr><mtr><mtd><mi>Z</mi></mtd><mtd><mi></mi><mo>=</mo><mn>2</mn><mi>B</mi><mo>‚àí</mo><mn>1</mn></mtd></mtr></mtable><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-71">\begin{align} X &= 2R - 1 \\ Y &= 2G - 1 \\ Z &= 2B - 1 \end{align}(2)</script></p><br>
 Unity      (2),   <code>UnpackNormal</code>.          .<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer">Normal Map Technical Details</a>    polycount.</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steepness of the dunes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, the first difficulty is related to the fact that the waveform changes depending on the sharpness of the dunes. </font><font style="vertical-align: inherit;">Low, flat dunes have small waves; </font><font style="vertical-align: inherit;">on steep dunes, wave patterns are more distinct. </font><font style="vertical-align: inherit;">This means that you need to consider the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">steepness of the</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dune. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The easiest way around this problem is to create two different normal maps, respectively, for flat and steep dunes. </font><font style="vertical-align: inherit;">The basic idea is to mix between the two normal maps based on the steepness of the dune.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ae/a7e/691/1aea7e6919021a7adf95b595e141348a.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normal Map for the Steep Dune</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cd/7d6/983/3cd7d698303b82e9c4aeac3c35c84925.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normal Map for a Flat Dune</font></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normal maps and blue channel</font></font></b><div class="spoiler_text">       ,   .<br>
<br>
 ,          .      ,       (X  Y)   (Z)  .<br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-72-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; displaystyle=&quot;true&quot;><mtr><mtd><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mrow><mo>(</mo><mi>N</mi><mo>)</mo></mrow></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn></mtd></mtr><mtr><mtd><msqrt><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Z</mi><mn>2</mn></msup></msqrt></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn></mtd></mtr></mtable><mo stretchy=&quot;false&quot;>(</mo><mn>3</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.753ex" height="6.581ex" viewBox="0 -1662.7 10657.4 2833.4" role="img" focusable="false" aria-hidden="true" style="vertical-align: -2.719ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(167,0)"><g transform="translate(-13,0)"><g transform="translate(2603,756)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-65" x="298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6E" x="765" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-67" x="1365" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-74" x="1846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-68" x="2207" y="0"></use><g transform="translate(2950,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="1278" y="0"></use></g></g><g transform="translate(0,-833)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ1-221A" x="0" y="126"></use><rect stroke="none" width="6221" height="60" x="1000" y="917"></rect><g transform="translate(1000,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-58" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1215" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="1535" y="0"></use><g transform="translate(2536,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-59" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1157" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="4030" y="0"></use><g transform="translate(5031,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1040" y="583"></use></g></g></g></g><g transform="translate(7209,0)"><g transform="translate(0,756)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="1334" y="0"></use></g><g transform="translate(0,-833)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="1334" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="9377" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="9767" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="10267" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" displaystyle="true"><mtr><mtd><mi>l</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi><mrow><mo>(</mo><mi>N</mi><mo>)</mo></mrow></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn></mtd></mtr><mtr><mtd><msqrt><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Z</mi><mn>2</mn></msup></msqrt></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn></mtd></mtr></mtable><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-72">\begin{align} length\left(N\right) &= 1 \\ \sqrt{X^2+Y^2+Z^2} &= 1 \\ \end{align}(3)</script></p><br>
  :<br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-73-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; displaystyle=&quot;true&quot;><mtr><mtd><msqrt><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Z</mi><mn>2</mn></msup></msqrt></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn></mtd></mtr><mtr><mtd><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Z</mi><mn>2</mn></msup></mtd><mtd><mi></mi><mo>=</mo><msup><mn>1</mn><mn>2</mn></msup></mtd></mtr><mtr><mtd><msup><mi>Z</mi><mn>2</mn></msup></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn><mo>&amp;#x2212;</mo><msup><mi>X</mi><mn>2</mn></msup><mo>&amp;#x2212;</mo><msup><mi>Y</mi><mn>2</mn></msup></mtd></mtr><mtr><mtd><mi>Z</mi></mtd><mtd><mi></mi><mo>=</mo><msqrt><mn>1</mn><mo>&amp;#x2212;</mo><msup><mi>X</mi><mn>2</mn></msup><mo>&amp;#x2212;</mo><msup><mi>Y</mi><mn>2</mn></msup></msqrt></mtd></mtr></mtable><mo stretchy=&quot;false&quot;>(</mo><mn>4</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.763ex" height="13.438ex" viewBox="0 -3138.9 16689.5 5785.7" role="img" focusable="false" aria-hidden="true" style="vertical-align: -6.148ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(167,0)"><g transform="translate(-13,0)"><g transform="translate(0,2008)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ1-221A" x="0" y="126"></use><rect stroke="none" width="6221" height="60" x="1000" y="917"></rect><g transform="translate(1000,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-58" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1215" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="1535" y="0"></use><g transform="translate(2536,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-59" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1157" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="4030" y="0"></use><g transform="translate(5031,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1040" y="583"></use></g></g></g><g transform="translate(1000,600)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-58" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1215" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="1535" y="0"></use><g transform="translate(2536,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-59" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1157" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="4030" y="0"></use><g transform="translate(5031,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1040" y="583"></use></g></g><g transform="translate(6032,-785)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1040" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-5A" x="6498" y="-2323"></use></g><g transform="translate(7209,0)"><g transform="translate(0,2008)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="1334" y="0"></use></g><g transform="translate(0,600)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><g transform="translate(1334,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="707" y="583"></use></g></g><g transform="translate(0,-785)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="1334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="2056" y="0"></use><g transform="translate(3057,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-58" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1215" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="4593" y="0"></use><g transform="translate(5594,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-59" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1157" y="583"></use></g></g><g transform="translate(0,-2323)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="277" y="0"></use><g transform="translate(1334,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ1-221A" x="0" y="126"></use><rect stroke="none" width="5532" height="60" x="1000" y="917"></rect><g transform="translate(1000,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="722" y="0"></use><g transform="translate(1723,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-58" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1215" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="3259" y="0"></use><g transform="translate(4260,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-59" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="1157" y="583"></use></g></g></g></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-28" x="15410" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-34" x="15799" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-29" x="16300" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" displaystyle="true"><mtr><mtd><msqrt><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Z</mi><mn>2</mn></msup></msqrt></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn></mtd></mtr><mtr><mtd><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>+</mo><msup><mi>Z</mi><mn>2</mn></msup></mtd><mtd><mi></mi><mo>=</mo><msup><mn>1</mn><mn>2</mn></msup></mtd></mtr><mtr><mtd><msup><mi>Z</mi><mn>2</mn></msup></mtd><mtd><mi></mi><mo>=</mo><mn>1</mn><mo>‚àí</mo><msup><mi>X</mi><mn>2</mn></msup><mo>‚àí</mo><msup><mi>Y</mi><mn>2</mn></msup></mtd></mtr><mtr><mtd><mi>Z</mi></mtd><mtd><mi></mi><mo>=</mo><msqrt><mn>1</mn><mo>‚àí</mo><msup><mi>X</mi><mn>2</mn></msup><mo>‚àí</mo><msup><mi>Y</mi><mn>2</mn></msup></msqrt></mtd></mtr></mtable><mo stretchy="false">(</mo><mn>4</mn><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-73">\begin{align} \sqrt{X^2+Y^2+Z^2} &= 1 \\ X^2+Y^2+Z^2 &= 1^2 \\ Z^2 &= 1 - X^2-Y^2 \\ Z &= \sqrt{1 - X^2-Y^2} \end{align}(4)</script></p><br>
     <code>UnpackNormal</code>  Unity.     Shader API         .<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">inline</span> fixed3 <span class="hljs-title">UnpackNormal</span><span class="hljs-params">(fixed4 packednormal)</span>
</span>{
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(SHADER_API_GLES)  defined(SHADER_API_MOBILE)</span>
    <span class="hljs-keyword">return</span> packednormal.xyz * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>;
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span><font></font>
    fixed3 normal;<font></font>
    normal.xy = packednormal.wy * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>;<font></font>
    normal.z = <span class="hljs-built_in">sqrt</span>(<span class="hljs-number">1</span> - normal.x*normal.x - normal.y * normal.y);
    <span class="hljs-keyword">return</span> normal;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
}</code></pre><br>
  Unity      <strong>DXT5nm</strong>,        (<code>packednormal.xy</code>) -    (<code>packednormal.wy</code>).<br>
<br>
          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer">Normal Map Compression</a>    polycount.</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why do normal maps seem lilac?</font></font></b><div class="spoiler_text">     ,  ,      .<br>
<br>
 <em> </em>  <em> </em>  <strong> </strong>,           .  ,      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-74-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.849ex" height="2.866ex" viewBox="0 -863.1 2948.8 1234.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="1446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="1891" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5D" x="2670" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-74">\left[0, 0, 1\right]</script>        .<br>
<br>
     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-75-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.849ex" height="2.866ex" viewBox="0 -863.1 2948.8 1234.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="1446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="1891" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5D" x="2670" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-75">\left[0, 0, 1\right]</script>   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-76-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mn>0.5</mn><mo>,</mo><mn>0.5</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.468ex" height="2.866ex" viewBox="0 -863.1 4506.8 1234.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-35" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="1279" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-35" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="3004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="3449" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5D" x="4228" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>[</mo><mrow><mn>0.5</mn><mo>,</mo><mn>0.5</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-76">\left[0.5, 0.5, 1\right]</script>,            RGB.<br>
<br>
         ;  ,         <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-77-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.849ex" height="2.866ex" viewBox="0 -863.1 2948.8 1234.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="1446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="1891" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-5D" x="2670" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-77">\left[0, 0, 1\right]</script>.<br>
<br>
 ,         ¬´¬ª.  ,   B       <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-78-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.152ex" viewBox="0 -740.1 1279 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.433ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>‚àí</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-78">-1</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-79-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.152ex" viewBox="0 -740.1 1279 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.433ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-79">+1</script>,     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-80-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-80">0</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-81-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.152ex" viewBox="0 -740.1 1279 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.433ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-81">+1</script>.             .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The steepness can be calculated using a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scalar product</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which is often used in shader coding to calculate the degree of ‚Äúparallelism‚Äù of two directions. </font><font style="vertical-align: inherit;">In this case, we take the direction of the normal of the geometry (shown below in blue) and compare it with a vector pointing to the sky (shown below in yellow). </font><font style="vertical-align: inherit;">The scalar product of these two vectors returns values ‚Äã‚Äãclose to</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-82-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-82">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when the vectors are almost parallel (flat dunes), and close to </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-83-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-83">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when the angle between them is 90 degrees (steep dunes).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ca1/41e/541/ca141e541313d8b0dcea3091bed240d5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, we are faced with the first problem - two vectors are involved in this operation. The normal vector obtained from the function </font></font><code>surf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">using </font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is expressed in </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tangent space</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . This means that </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the coordinate system</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> used to encode the normal direction is relative to the local surface geometry (see below). We briefly touched on this topic in the part about the normal sand.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c7/ac9/e27/8c7ac9e27aa358c7bd999859a3bf8777.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vector pointing to the sky is expressed in </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">world space</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">To get the correct scalar product, both vectors must be expressed in the same coordinate system. </font><font style="vertical-align: inherit;">This means that we need to transform one of them so that both are expressed in one space. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fortunately, Unity comes to the rescue with a function </font></font><code>WorldNormalVector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that allows us to transform the normal vector from </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tangent space</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">world space</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">To use this feature, we need to change the structure </font></font><code>Input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, so that it was included </font></font><code>float3 worldNormal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>INTERNAL_DATA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Input</span>
{</span><font></font>
    ...<font></font>
<font></font>
    float3 worldNormal;<font></font>
    INTERNAL_DATA<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is explained in an article from the Unity </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Writing Surface Shaders</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> documentation </font><font style="vertical-align: inherit;">that says:</font></font><br>
<br>
<blockquote><code>INTERNAL_DATA</code> ‚Äî     ,       <code>o.Normal</code>.<br>
<br>
       ,  <code>WorldNormalVector (IN, o.Normal)</code>.</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Often this becomes the main source of problems when writing surface shaders. </font><font style="vertical-align: inherit;">In fact, the value </font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that is available in the function </font></font><code>surf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">varies</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> depending on how you're using. </font><font style="vertical-align: inherit;">If you are only reading it, </font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contains </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the normal vector of the</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> current pixel in </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">world space</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">If you change its value, it </font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is in </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tangent space</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you record in </font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but you still need access to the normal in </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">world space</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (as in our case), then you can use it </font></font><code>WorldNormalVector (IN, o.Normal)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">However, for this you need to make a small change to the structure shown above </font></font><code>Input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is INTERNAL_DATA?</font></font></b><div class="spoiler_text"> <code>INTERNAL_DATA</code>       Unity.<br>
<br>
   ,    ,    <code>WorldNormalVector</code>.   ,   <em> </em>,     <em> </em>.      <strong> </strong>  <strong> </strong> (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"></a>).<br>
<br>
     ,        3D-     3√ó3.  ,   ,  <strong>       (tangent to world matrix)</strong>,  Unity   <strong>TtoW</strong>.<br>
<br>
 <code>INTERNAL_DATA</code>   TtoW   <code>Input</code>.    ,        ¬´Show generated code¬ª  :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2de/d96/ed0/2ded96ed0cdbf606643b9c6ff179380b.png"></div><br>
 ,  <code>INTERNAL_DATA</code> ‚Äî     ,        TtoW:<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> INTERNAL_DATA</span><font></font>
    half3 internalSurfaceTtoW0;<font></font>
    half3 internalSurfaceTtoW1;<font></font>
    half3 internalSurfaceTtoW2;</code></pre><br>
    <code>half3x3</code>,      <code>half3</code>.<br>
<br>
        <code>WorldNormalVector</code>,   ,       (  <em> </em>)   TtoW:<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> WorldNormalVector(data,normal)</span><font></font>
    fixed3<font></font>
    (<font></font>
        dot(data.internalSurfaceTtoW0, normal),<font></font>
        dot(data.internalSurfaceTtoW1, normal),<font></font>
        dot(data.internalSurfaceTtoW2, normal)<font></font>
    )</code></pre><br>
         <code>mul</code>,    TtoW     ,   <em> </em>.<br>
<br>
  ,  :<br>
<br>
<p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-84-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>&amp;#x22C5;</mo><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>&amp;#x22C5;</mo><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow></mtd></mtr><mtr><mtd><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>&amp;#x22C5;</mo><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow></mtd></mtr><mtr><mtd><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>&amp;#x22C5;</mo><mrow><mo>[</mo><mtable rowspacing=&quot;4pt&quot; columnspacing=&quot;1em&quot;><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow></mtd></mtr></mtable><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="65.959ex" height="30.581ex" viewBox="0 -6829.4 28398.9 13166.7" role="img" focusable="false" aria-hidden="true" style="vertical-align: -14.513ex; margin-bottom: -0.206ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(0,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3421"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1482)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="779" y="0"></use></g></g></g><g transform="translate(0,-6)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="779" y="0"></use></g></g></g><g transform="translate(0,-1495)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="779" y="0"></use></g></g></g></g><g transform="translate(4127,0)"><g transform="translate(0,1482)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="779" y="0"></use></g></g></g><g transform="translate(0,-6)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="779" y="0"></use></g></g></g><g transform="translate(0,-1495)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="779" y="0"></use></g></g></g></g><g transform="translate(8266,0)"><g transform="translate(0,1482)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="779" y="0"></use></g></g></g><g transform="translate(0,-6)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="779" y="0"></use></g></g></g><g transform="translate(0,-1495)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="779" y="0"></use></g></g></g></g></g><g transform="translate(12407,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3421"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="13296" y="0"></use><g transform="translate(13797,0)"><g transform="translate(0,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3155"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1350)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="888" y="0"></use></g><g transform="translate(0,-50)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="888" y="0"></use></g><g transform="translate(0,-1450)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="888" y="0"></use></g></g></g><g transform="translate(2378,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3155"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-3D" x="17121" y="0"></use><g transform="translate(18177,0)"><g transform="translate(0,6748)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-11230.615606446823) scale(1,15.720755566246805)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-12353"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,4465)"><g transform="translate(0,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3421"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1482)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="779" y="0"></use></g></g></g><g transform="translate(0,-6)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="779" y="0"></use></g></g></g><g transform="translate(0,-1495)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="779" y="0"></use></g></g></g></g></g><g transform="translate(4128,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3421"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="5018" y="0"></use><g transform="translate(5518,0)"><g transform="translate(0,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3155"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1350)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="888" y="0"></use></g><g transform="translate(0,-50)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="888" y="0"></use></g><g transform="translate(0,-1450)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="888" y="0"></use></g></g></g><g transform="translate(2378,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3155"></use></g></g></g><g transform="translate(0,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3421"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1482)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="779" y="0"></use></g></g></g><g transform="translate(0,-6)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="779" y="0"></use></g></g></g><g transform="translate(0,-1495)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="779" y="0"></use></g></g></g></g></g><g transform="translate(4128,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3421"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="5018" y="0"></use><g transform="translate(5518,0)"><g transform="translate(0,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3155"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1350)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="888" y="0"></use></g><g transform="translate(0,-50)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="888" y="0"></use></g><g transform="translate(0,-1450)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="888" y="0"></use></g></g></g><g transform="translate(2378,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3155"></use></g></g><g transform="translate(0,-4466)"><g transform="translate(0,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3421"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1482)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="779" y="0"></use></g></g></g><g transform="translate(0,-6)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="779" y="0"></use></g></g></g><g transform="translate(0,-1495)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-6F" x="704" y="0"></use><g transform="translate(1190,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-2C" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="779" y="0"></use></g></g></g></g></g><g transform="translate(4128,2282)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2313.8453787493827) scale(1,0.933408588307434)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3421"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-22C5" x="5018" y="0"></use><g transform="translate(5518,0)"><g transform="translate(0,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A1" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A2"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A3" x="0" y="-3155"></use></g><g transform="translate(834,0)"><g transform="translate(-13,0)"><g transform="translate(0,1350)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-31" x="888" y="0"></use></g><g transform="translate(0,-50)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-32" x="888" y="0"></use></g><g transform="translate(0,-1450)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJMAIN-33" x="888" y="0"></use></g></g></g><g transform="translate(2378,2150)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-2048.5066225165565) scale(1,0.49337748344370863)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-3155"></use></g></g></g></g></g><g transform="translate(9554,6748)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A4" x="0" y="-1155"></use><g transform="translate(0,-11230.615606446823) scale(1,15.720755566246805)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A5"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/487154/&amp;usg=ALkJrhgzvhWWmne5OTnardFWKLamvgAWJw#MJSZ4-23A6" x="0" y="-12353"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>‚ãÖ</mo><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow><mo>=</mo><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>‚ãÖ</mo><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow></mtd></mtr><mtr><mtd><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>‚ãÖ</mo><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow></mtd></mtr><mtr><mtd><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>1</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>2</mn></mrow></msub></mtd></mtr><mtr><mtd><mi>T</mi><mi>o</mi><msub><mi>W</mi><mrow class="MJX-TeXAtom-ORD"><mn>3</mn><mo>,</mo><mn>3</mn></mrow></msub></mtd></mtr></mtable><mo>]</mo></mrow><mo>‚ãÖ</mo><mrow><mo>[</mo><mtable rowspacing="4pt" columnspacing="1em"><mtr><mtd><mi>N</mi><mn>1</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>2</mn></mtd></mtr><mtr><mtd><mi>N</mi><mn>3</mn></mtd></mtr></mtable><mo>]</mo></mrow></mtd></mtr></mtable><mo>]</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-84">\begin{equation*} \begin{bmatrix} ToW_{1,1} & ToW_{1,2} & ToW_{1,3} \\ ToW_{2,1} & ToW_{2,2} & ToW_{2,3} \\ ToW_{3,1} & ToW_{3,2} & ToW_{3,3} \end{bmatrix} \cdot \begin{bmatrix} N1\\ N2\\ N3 \end{bmatrix}= \begin{bmatrix} \begin{bmatrix} ToW_{1,1} \\ ToW_{1,2} \\ ToW_{1,3} \end{bmatrix}\cdot\begin{bmatrix} N1\\ N2\\ N3 \end{bmatrix} \\ \begin{bmatrix} ToW_{2,1} \\ ToW_{2,2} \\ ToW_{2,3} \end{bmatrix}\cdot\begin{bmatrix} N1\\ N2\\ N3 \end{bmatrix} \\ \begin{bmatrix} ToW_{3,1} \\ ToW_{3,2} \\ ToW_{3,3} \end{bmatrix}\cdot\begin{bmatrix} N1\\ N2\\ N3 \end{bmatrix} \end{bmatrix} \end{equation*}</script></math></p><br>
           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer">LearnOpenGL</a>.</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A snippet of the code below converts the normal from </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tangent</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">world space</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and calculates the slope relative </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to the up direction</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Calculates normal in world space</span><font></font>
float3 N_WORLD = WorldNormalVector(IN, o.Normal);<font></font>
float3 UP_WORLD = float3(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<font></font>
<font></font>
<span class="hljs-comment">// Calculates "steepness"</span>
<span class="hljs-comment">// =&gt; 0: steep (90 degrees surface)</span>
<span class="hljs-comment">//  =&gt; 1: shallow (flat surface)</span>
<span class="hljs-keyword">float</span> steepness = saturate(dot(N_WORLD, UP_WORLD));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now that we have calculated the steepness of the dune, we can use it to mix the two normal maps. </font><font style="vertical-align: inherit;">Both normal maps are sampled, both flat and cool (in the code below they are called </font></font><code>_ShallowTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>_SteepTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Then they are mixed based on the value </font></font><code>steepness</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cpp hljs">float2 uv = W.xz;<font></font>
<font></font>
<span class="hljs-comment">// [0,1]-&gt;[-1,+1]</span><font></font>
float3 shallow = UnpackNormal(tex2D(_ShallowTex, TRANSFORM_TEX(uv, _ShallowTex)));<font></font>
float3 steep   = UnpackNormal(tex2D(_SteepTex,   TRANSFORM_TEX(uv, _SteepTex  )));<font></font>
<font></font>
<span class="hljs-comment">// Steepness normal</span>
float3 S = normalerp(steep, shallow, steepness);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As stated in the part about sand normals, it is quite difficult to combine normal maps correctly, and this cannot be done with </font></font><code>lerp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In this case </font></font><code>slerp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, it is more </font><font style="vertical-align: inherit;">correct to use </font><font style="vertical-align: inherit;">, but instead, a less expensive function called </font></font><code>normalerp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wave mixing</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we use the code shown above, the results may disappoint us. </font><font style="vertical-align: inherit;">This is because the dunes have very little steepness, which leads to too much mixing of the two normal textures. </font><font style="vertical-align: inherit;">To fix this, we can apply a non-linear transformation to the steepness, which will increase the sharpness of the mixture:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Steepness to blending</span>
steepness = <span class="hljs-built_in">pow</span>(steepness, _SteepnessSharpnessPower);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When mixing two textures, it is often used to control their sharpness and contrast </font></font><code>pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We learned how and why it works in my </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Physically Based Rendering</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tutorial </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Below we see two gradients. </font><font style="vertical-align: inherit;">The top shows the colors from black to white, linearly interpolated along the X axis with </font></font><code>c = uv.x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">At the bottom, the same gradient is represented with </font></font><code>c = pow(uv.x*1.5)*3.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ae4/db9/84c/ae4db984c649c8ae5357b71357ef208e.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf0/214/1b2/bf02141b275e8ae5596f7477016f5cc8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is easy to notice, which </font></font><code>pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allows </font><font style="vertical-align: inherit;">you </font><font style="vertical-align: inherit;">to create a much sharper transition between black and white. </font><font style="vertical-align: inherit;">When we work with textures, this reduces their overlap, creating sharper edges.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direction of the dunes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything that we did earlier works perfectly. </font><font style="vertical-align: inherit;">But we need to solve another last problem. </font><font style="vertical-align: inherit;">Waves vary with </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">steepness</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but not with </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direction</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As mentioned above, waves are usually not symmetrical due to the fact that the wind mainly blows in one direction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To make the waves even more realistic, we need to add two more normal maps (see table below). </font><font style="vertical-align: inherit;">They can be mixed depending on the parallelism of the dune of the X axis or Z axis.</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cool</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flat</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cool x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flat x</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cool z</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flat z</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we need to implement the calculation of the parallelism of the dune relative to the Z axis. This can be done similarly to the calculation of the steepness, but </font></font><code>float3 UP_WORLD = float3(0, 1, 0);</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be used </font><font style="vertical-align: inherit;">instead </font></font><code>float3 Z_WORLD = float3(0, 0, 1);</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This last step I will leave to you. </font><font style="vertical-align: inherit;">If you have any problems, then at the end of this tutorial there is a link to download the full Unity package.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is the last part of a series of tutorials on rendering sand from Journey. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following shows how far we have been able to advance in this series:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/509/4c1/65b/5094c165b5f2e1ba10696fec1641482c.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/828/9b4/997/8289b49971bbe0046845f71284790124.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before and after</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I want to thank you for reading this rather long tutorial to the end. </font><font style="vertical-align: inherit;">I hope you enjoyed exploring and re-creating this shader.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acknowledgments</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> video game </font><font style="vertical-align: inherit;">was developed by </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thatgamecompany</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and published by </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sony Computer Entertainment</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">It is available for PC ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Epic Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) and PS4 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3D dune models, backgrounds, and lighting options were created by </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jiadi Deng</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A 3D model of the Journey character was found on the FacePunch forum (now closed).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unity Package</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want to recreate this effect, then the full Unity package is available for download on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patreon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">It has everything you need, from shaders to 3D models.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/en487154/">https://habr.com/ru/post/en487154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en487136/index.html">Clean Code for TypeScript - Part 3</a></li>
<li><a href="../en487138/index.html">Graph theory in machine learning for the smallest</a></li>
<li><a href="../en487140/index.html">Saving business logic in Swift Combine. Part 1</a></li>
<li><a href="../en487144/index.html">Test Jabra Panacast panoramic camera with a viewing angle of 180 ¬∞ (video)</a></li>
<li><a href="../en487146/index.html">ResizeObserver - a new powerful tool for working with adaptability</a></li>
<li><a href="../en487158/index.html">Gesture control of application interface (Keras + CoreML)</a></li>
<li><a href="../en487162/index.html">Does modern businessmen and companies need privacy?</a></li>
<li><a href="../en487168/index.html">Toxic Grandfather Interface Tales ‚ÄúInstrumental Trash‚Äù (s1 e2)</a></li>
<li><a href="../en487172/index.html">Open course "Deep Learning in NLP" from the creators of DeepPavlov based on the course cs224n</a></li>
<li><a href="../en487174/index.html">Raise your Webogram instance with proxying via nginx</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>