<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëßüèª ‚úåüèΩ üè∞ Verificamos a n√≥s mesmos: como implantar e como administrar 1C: Fluxo de documentos dentro da empresa 1C ‚ìÇÔ∏è üíõ üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na 1C, usamos amplamente nossos pr√≥prios desenvolvimentos para organizar o trabalho da empresa. Em particular, ‚Äú1C: Gerenciamento de documentos 8‚Äù . A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Verificamos a n√≥s mesmos: como implantar e como administrar 1C: Fluxo de documentos dentro da empresa 1C</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/1c/blog/496532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na 1C, usamos amplamente nossos pr√≥prios desenvolvimentos para organizar o trabalho da empresa. Em particular, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú1C: Gerenciamento de documentos 8‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al√©m de gerenciamento de documentos (como o nome indica), √© tamb√©m um moderno </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECM-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sistema (Enterprise Content Management - gerenciamento de conte√∫do corporativo) com uma vasta gama de funcionalidades - mail, calend√°rios de trabalho do empregado, organiza√ß√£o do acesso compartilhado a recursos (por exemplo, reserva de salas de confer√™ncia), representando hor√°rio de trabalho, f√≥rum corporativo e muito mais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na 1C, mais de mil funcion√°rios usam documentos. O banco de dados j√° se tornou impressionante (11 bilh√µes de registros), o que significa que requer manuten√ß√£o mais completa e equipamentos mais potentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o trabalho do nosso sistema √© organizado, quais dificuldades enfrentamos no atendimento ao banco de dados e como os solucionamos (usamos o MS SQL Server como o DBMS), descreveremos neste artigo. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para quem leu primeiro sobre os produtos 1C. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1C: O gerenciamento de documentos √© uma solu√ß√£o (configura√ß√£o) de aplicativos implementada com base em uma estrutura para o desenvolvimento de aplicativos de neg√≥cios - 1C: plataforma corporativa.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/5a/ts/rb/5atsrbr1r_0dfqiyrdimcyze4by.png" alt="imagem"><br>
<br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Äú1C: Gerenciamento de documentos 8‚Äù (em formato abreviado - DO) permite automatizar o trabalho com documentos na empresa. </font><font style="vertical-align: inherit;">Uma das principais ferramentas para a intera√ß√£o dos funcion√°rios √© o email. </font><font style="vertical-align: inherit;">Al√©m do correio, o DO tamb√©m resolve outras tarefas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rastreamento de tempo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contabiliza√ß√£o de aus√™ncias</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedidos de correio / transporte</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calend√°rios de funcion√°rios</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registro de correspond√™ncia</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contatos dos funcion√°rios (Cat√°logo de endere√ßos)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√≥rum corporativo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reserva de quarto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planejamento de eventos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRM</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabalho coletivo com arquivos (com preserva√ß√£o de vers√µes de arquivos)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e etc. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entramos no Document Management como um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thin client</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (aplicativo execut√°vel nativo) do Windows, Linux, macOS, um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web client</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (de navegadores) e um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mobile client</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dependendo da situa√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, gra√ßas ao nosso outro produto conectado ao Gerenciamento de documentos - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o Sistema de intera√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- diretamente no Gerenciamento de documentos, obtemos a funcionalidade do messenger - bate-papos, chamadas de √°udio e v√≠deo (incluindo chamadas de grupo, que agora se tornaram especialmente importantes, inclusive de um cliente m√≥vel), compartilhamento r√°pido de arquivos e a capacidade de escrever bots de bate-papo que simplificam o trabalho com o sistema. Outra vantagem do uso do Sistema de Intera√ß√£o (em compara√ß√£o com outros mensageiros) √© a capacidade de conduzir discuss√µes contextuais vinculadas a objetos espec√≠ficos do Gerenciamento de Documentos - documentos, eventos etc. Ou seja, o Sistema de Intera√ß√£o se integra profundamente ao aplicativo de destino e n√£o atua como um "bot√£o separado".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O n√∫mero de letras em nosso DL j√° ultrapassou 100 milh√µes e, em geral, no DBMS - mais de 11 bilh√µes de registros. </font><font style="vertical-align: inherit;">No total, o sistema utiliza quase 30 TB de armazenamento: o banco de dados tem 7,5 TB, os arquivos para trabalho coletivo s√£o separados e ocupam outros 21 TB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se falamos de n√∫meros mais espec√≠ficos, aqui est√° o n√∫mero de letras e arquivos no momento:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cartas enviadas - 14,7 milh√µes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cartas recebidas - 85,4 milh√µes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vers√µes de arquivo - 70,8 milh√µes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentos internos - 30,6 mil</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No DO, n√£o h√° apenas emails e arquivos. </font><font style="vertical-align: inherit;">Abaixo est√£o os n√∫meros de outros objetos cont√°beis:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reserva de sala de confer√™ncia - 52 126</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relat√≥rios semanais - 153.940</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relat√≥rios di√°rios - 628 153</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aprova√ß√£o de visto - 11.821</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentos recebidos - 79 677</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentos enviados - 28 357</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registros de eventos nos calend√°rios de trabalho dos usu√°rios - 168.228</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedidos de correio - 21 883</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrapartes - 81 029</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registos dos trabalhos com empreiteiros - 45 632</font></font></li>
<li>   ‚Äì 41 795</li>
<li> ‚Äì 10 243</li>
<li> ‚Äì 6 320</li>
<li>  ‚Äì 245 980</li>
<li>   ‚Äì 26 282</li>
<li>   ‚Äì 891 095</li>
<li>- ‚Äì 109 056.       ‚Äì , , , ,   ..     ,  ,  ,  ,     .      ,  ,           .</li>
</ul><br>
<h2>      ?</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses n√∫meros indicam uma quantidade impressionante de tarefas; portanto, enfrentamos a necessidade de alocar equipamentos bastante produtivos para as necessidades das subsidi√°rias internas. </font><font style="vertical-align: inherit;">At√© o momento, suas caracter√≠sticas s√£o as seguintes: 38 n√∫cleos, 240 GB de RAM, unidades de 26 TB. </font><font style="vertical-align: inherit;">Damos </font></font><br>
<img src="https://habrastorage.org/webt/lt/l1/8t/ltl18tfpfsmxrdo8drblk-04r2o.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
a </font><font style="vertical-align: inherit;">tabela de servidores: </font><font style="vertical-align: inherit;">No futuro, planejamos aumentar a capacidade do equipamento.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E o carregamento do servidor?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A atividade de rede nunca foi um problema para n√≥s ou nossos clientes. Como regra, o ponto fraco √© o processador e os discos, porque todo mundo j√° sabe como lidar com a falta de mem√≥ria. Aqui est√£o as capturas de tela de nossos servidores do Resource Monitor, que mostram que n√£o temos carga terr√≠vel, √© muito modesto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, na captura de tela abaixo, vemos um servidor SQL em que a CPU est√° carregada em 23%. E este √© um indicador muito bom (para compara√ß√£o: se a carga se aproximar de 70%, provavelmente os funcion√°rios observar√£o desacelera√ß√µes bastante significativas). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vz/-w/oo/vz-woobphp0n1zll7bnpvwlxflk.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda captura de tela mostra o servidor de aplicativos no qual a plataforma 1C: Enterprise √© executada - ela serve apenas sess√µes do usu√°rio. Aqui a carga do processador √© um pouco maior - 38%, √© suave e calma. H√° carregamento de disco, mas √© aceit√°vel.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bz/qd/uv/bzqduvuuvjk4i0dchiimfrauum0.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A terceira captura de tela mostra outro servidor 1C: Enterprise (√© o segundo, temos dois deles no cluster). </font><font style="vertical-align: inherit;">Somente o anterior atende aos usu√°rios, e os rob√¥s trabalham nisso. </font><font style="vertical-align: inherit;">Por exemplo, eles recebem correio, encaminham documentos, trocam dados, consideram direitos etc. </font><font style="vertical-align: inherit;">Todas essas atividades em segundo plano executam aproximadamente 90-100 tarefas em segundo plano. </font><font style="vertical-align: inherit;">E este servidor est√° muito ocupado - com 88%. </font><font style="vertical-align: inherit;">Mas isso n√£o afeta as pessoas e implementa apenas toda a automa√ß√£o que o Gerenciamento de Documentos deve fazer.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fi/k7/o3/fik7o3yrdbucybkekjymjrgq1aa.png" alt="imagem"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quais s√£o as m√©tricas para determinar o desempenho?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criamos no BS um subsistema s√©rio para medir indicadores de desempenho e calcular v√°rias m√©tricas. </font><font style="vertical-align: inherit;">Isso √© necess√°rio para entender no momento atual e na perspectiva hist√≥rica o que est√° acontecendo no sistema, o que est√° piorando, o que est√° melhorando. </font><font style="vertical-align: inherit;">As ferramentas de monitoramento - m√©tricas e medidas de tempo - est√£o inclu√≠das no pacote padr√£o "1C: Gerenciamento de documentos 8". </font><font style="vertical-align: inherit;">As m√©tricas requerem ajuste na implementa√ß√£o, mas o mecanismo em si √© t√≠pico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√©tricas s√£o medi√ß√µes de v√°rios indicadores de neg√≥cios em determinados momentos (por exemplo, tempo m√©dio de entrega de correspond√™ncia no momento de 10 minutos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das m√©tricas mostra o n√∫mero de usu√°rios ativos no banco de dados. </font><font style="vertical-align: inherit;">Em m√©dia, existem 1000-1400 deles por dia. </font><font style="vertical-align: inherit;">O gr√°fico mostra que no momento da captura de tela havia 2144 usu√°rios ativos no banco de dados.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pr/ca/is/prcaismpjrysr1jm8pr3m77w4j8.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem mais de 30 a√ß√µes desse tipo, a lista est√° sob o corte.</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista</font></font></b><div class="spoiler_text"><ul>
<li>  </li>
<li>  </li>
<li> </li>
<li>  </li>
<li>  </li>
<li>  </li>
<li>   </li>
<li>  </li>
<li> </li>
<li> </li>
<li>  </li>
<li> </li>
<li> </li>
<li> </li>
<li>  </li>
<li> </li>
<li> </li>
<li> </li>
<li></li>
<li></li>
<li> </li>
<li></li>
<li>  </li>
<li> </li>
<li>  </li>
<li> </li>
<li>    </li>
<li>  </li>
<li>  </li>
<li></li>
<li> </li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na semana anterior, nossa atividade m√©dia do usu√°rio aumentou uma vez e meia (o gr√°fico mostra em vermelho) - isso ocorre devido √† transi√ß√£o da maioria dos funcion√°rios para o trabalho remoto (em conex√£o com eventos conhecidos). Al√©m disso, o n√∫mero de usu√°rios ativos aumentou tr√™s vezes (mostrado em azul na tela), conforme os funcion√°rios come√ßaram a usar ativamente o celular: cada cliente m√≥vel cria uma conex√£o com o servidor. Agora, em m√©dia, para cada um de nossos funcion√°rios, existem 2 conex√µes com o servidor.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_p/la/oy/_plaoyah-fhvkshuadl9ftidsty.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para n√≥s, assim como para os administradores, √© um sinal de que precisamos estar mais atentos √†s quest√µes de velocidade, para ver se piorou. E olhamos para isso de outras maneiras. Por exemplo, como o tempo de entrega do correio para o roteamento interno √© alterado (a captura de tela abaixo mostra azul). Vemos que ele saltou at√© este ano e agora √© est√°vel - para n√≥s √© um indicador de que tudo est√° em ordem com o sistema. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ws/-j/es/ws-jes5n002oaglztg92x6rhc70.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra m√©trica aplicada para n√≥s √© o tempo m√©dio de espera para baixar cartas do servidor de correio (mostrado em vermelho na captura de tela). Grosso modo, quanto tempo a carta permanecer√° na Internet antes de chegar ao nosso funcion√°rio. A captura de tela mostra que desta vez tamb√©m n√£o mudou de maneira recente. Existem explos√µes separadas - mas elas n√£o est√£o associadas a atrasos, mas ao fato de que o tempo se perde nos servidores de correio.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e-/tq/yk/e-tqykeehhyd-ztfieowpmodpro.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou, por exemplo, outra m√©trica (mostrada em azul na captura de tela) - atualizando letras em uma pasta. Abrir uma pasta de correio √© uma opera√ß√£o muito comum e precisa ser feita rapidamente. Medimos o qu√£o r√°pido ele est√° sendo executado. Este indicador √© medido para cada cliente. Voc√™ pode ver a imagem geral da empresa e a din√¢mica, por exemplo, de um funcion√°rio individual. A captura de tela mostra que at√© este ano a m√©trica estava desequilibrada, fizemos v√°rias melhorias e agora n√£o piora - um cronograma quase uniforme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w-/ew/ay/w-eway3c2wyaubpqk1onjq4ptjm.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As m√©tricas s√£o basicamente uma ferramenta do administrador para monitorar o sistema, para responder rapidamente a qualquer altera√ß√£o no comportamento do sistema. Em uma captura de tela - m√©tricas de OD interno por um ano. O salto nos gr√°ficos se deve ao fato de termos sido incumbidos de desenvolver subsidi√°rias internas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/pt/d1/fjptd1wgq42u1dpgl6p96cwuwv4.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° uma lista de mais algumas m√©tricas (abaixo do corte).</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©tricas</font></font></b><div class="spoiler_text"><ul>
<li> </li>
<li> </li>
<li> </li>
<li> </li>
<li>  ()</li>
<li> </li>
<li>    </li>
<li> </li>
<li> </li>
<li>          10 </li>
<li>  :  </li>
<li>    </li>
<li> </li>
<li> </li>
<li>      </li>
<li>      ( )</li>
<li>      ( )</li>
<li>      ( )</li>
<li>      ( )</li>
<li>      ()</li>
<li>  </li>
<li>  </li>
<li>  ¬´    ¬ª</li>
<li>    </li>
<li>   </li>
<li>    </li>
<li>   </li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso sistema faz medi√ß√µes de mais de 150 indicadores o tempo todo, mas nem todos podem ser monitorados rapidamente. </font><font style="vertical-align: inherit;">Eles podem ser √∫teis mais tarde, em alguma perspectiva hist√≥rica, e voc√™ pode se concentrar nos mais importantes para os neg√≥cios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em uma das implementa√ß√µes, por exemplo, apenas 5 indicadores foram selecionados. O cliente estabeleceu a meta de criar um conjunto m√≠nimo de indicadores, mas ao mesmo tempo para cobrir os principais cen√°rios de trabalho. Seria injustificado incluir 150 indicadores no ato de aceita√ß√£o, porque mesmo dentro da empresa √© dif√≠cil concordar sobre quais indicadores s√£o considerados aceit√°veis. E eles conheciam esses 5 indicadores e j√° os apresentavam ao sistema antes do in√≠cio do projeto de implementa√ß√£o, inclusive na documenta√ß√£o do concurso: tempo de abertura do cart√£o n√£o mais que 3 segundos, tempo de execu√ß√£o da tarefa com o arquivo n√£o mais que 5 segundos, etc. Em nossas subsidi√°rias, havia precisamente m√©tricas que refletiam claramente a solicita√ß√£o inicial dos requisitos do cliente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E tamb√©m temos uma an√°lise de perfil das medi√ß√µes de desempenho. </font><font style="vertical-align: inherit;">Indicadores de desempenho s√£o a fixa√ß√£o da dura√ß√£o de cada opera√ß√£o executada (escrevendo uma carta no banco de dados, enviando uma carta ao servidor de correio etc.). </font><font style="vertical-align: inherit;">√â utilizado exclusivamente por especialistas t√©cnicos. </font><font style="vertical-align: inherit;">Temos muitos indicadores de desempenho em nosso programa. </font><font style="vertical-align: inherit;">Agora, medimos aproximadamente 1.500 opera√ß√µes-chave, divididas por perfil. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kp/kw/ht/kpkwhtmfno5e6log8ozegzltuie.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dos perfis mais importantes para n√≥s √© a "Lista dos principais indicadores de correio do ponto de vista dos consumidores". </font><font style="vertical-align: inherit;">Esse perfil inclui, por exemplo, os seguintes indicadores:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execu√ß√£o do comando: Filtrar por Tag</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abrindo um formul√°rio: Formul√°rio de lista</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execu√ß√£o de comando: selecione por pasta</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exibir letras na √°rea de leitura</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salvando uma carta na sua pasta favorita</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pesquise letras por detalhes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie uma carta</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se percebermos que a m√©trica para algum indicador de neg√≥cios se tornou muito grande (por exemplo, cartas de um usu√°rio espec√≠fico come√ßaram a chegar por muito tempo), come√ßamos a entender, passamos a medir o tempo das opera√ß√µes t√©cnicas. </font><font style="vertical-align: inherit;">Temos a opera√ß√£o t√©cnica ‚ÄúArquivando cartas no servidor de correio‚Äù - vemos o excesso de tempo para esta opera√ß√£o no √∫ltimo per√≠odo. </font><font style="vertical-align: inherit;">Essa opera√ß√£o, por sua vez, se decomp√µe em outras opera√ß√µes - por exemplo, estabelecendo uma conex√£o com o servidor de correio. </font><font style="vertical-align: inherit;">Vimos que, por algum motivo, subitamente se tornou muito grande (temos todas as medi√ß√µes em um m√™s - podemos comparar a √∫ltima semana 10 milissegundos e agora 1000 milissegundos). </font><font style="vertical-align: inherit;">E entendemos que algo aqui est√° quebrado - precisamos corrigi-lo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como mantemos um banco de dados t√£o grande?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso DO interno √© um exemplo de um projeto realmente carregado e altamente carregado. </font><font style="vertical-align: inherit;">Vamos falar sobre os recursos t√©cnicos de seu banco de dados.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quanto tempo dura a reestrutura√ß√£o de grandes tabelas de banco de dados?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servidor SQL requer manuten√ß√£o peri√≥dica, limpando as tabelas. </font><font style="vertical-align: inherit;">De uma maneira boa, isso deve ser feito pelo menos uma vez por dia, e para tabelas altamente exigidas - com mais frequ√™ncia. </font><font style="vertical-align: inherit;">Mas se a base √© grande (e nosso n√∫mero de registros j√° ultrapassou 11 bilh√µes), n√£o √© f√°cil cuidar disso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fizemos a reestrutura√ß√£o das mesas h√° 6 anos, mas depois demorou tanto tempo que n√£o nos encaixamos mais nos intervalos noturnos. </font><font style="vertical-align: inherit;">E como essas opera√ß√µes carregam muito o servidor SQL, n√£o podem fornecer servi√ßos de qualidade a outros usu√°rios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, agora temos que aplicar v√°rios truques. Por exemplo, n√£o podemos executar esses procedimentos em conjuntos de dados completos. Voc√™ precisa recorrer ao procedimento Atualizar amostra 500000 linhas - isso leva 14 minutos. Ele n√£o atualiza as estat√≠sticas de todos os dados da tabela, mas seleciona meio milh√£o de linhas e calcula as estat√≠sticas a partir delas que s√£o usadas para toda a tabela. Essa √© uma suposi√ß√£o, mas somos for√ßados a segui-la, porque para uma tabela espec√≠fica a cole√ß√£o de estat√≠sticas para todo o bilh√£o de registros ser√° inaceitavelmente longa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/mq/9q/dlmq9qvlqsafte96p7yjhllxegm.png" alt="imagem"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m otimizamos outras opera√ß√µes de manuten√ß√£o, tornando-as parciais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A manuten√ß√£o de um DBMS geralmente √© uma tarefa dif√≠cil. </font><font style="vertical-align: inherit;">No caso de intera√ß√£o ativa entre funcion√°rios, o banco de dados est√° crescendo rapidamente, tornando-se cada vez mais dif√≠cil para os administradores mant√™-lo - atualizando estat√≠sticas, desfragmentando e indexando. </font><font style="vertical-align: inherit;">Aqui precisamos aplicar estrat√©gias diferentes, sabemos bem como fazer isso, temos experi√™ncia, podemos compartilh√°-lo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o backup √© implementado com esses volumes?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um backup completo do DBMS √© realizado uma vez por dia √† noite, incremental - a cada hora. </font><font style="vertical-align: inherit;">Al√©m disso, um diret√≥rio de arquivos √© criado todos os dias e √© uma parte do backup incremental do armazenamento de arquivos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quanto tempo leva um backup completo?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em um disco r√≠gido, um backup completo √© realizado em tr√™s horas, parcial - em uma hora. </font><font style="vertical-align: inherit;">Leva mais tempo para gravar na fita (um dispositivo especial que faz backup em um cassete especial armazenado fora do escrit√≥rio; uma c√≥pia alien√°vel √© feita na fita, que ser√° salva se, por exemplo, o servidor queimar). </font><font style="vertical-align: inherit;">O backup √© feito exatamente no mesmo servidor, cujos par√¢metros eram mais altos - servidor SQL com 20% de carga do processador. </font><font style="vertical-align: inherit;">No momento do backup, √© claro, o sistema fica muito pior, mas ainda est√° operacional.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/sb/6j/xqsb6jqlw7y8fg5pgpwwhghhm74.png" alt="imagem"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Existe desduplica√ß√£o?</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H√° </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">desduplica√ß√£o de</font></a><font style="vertical-align: inherit;"> arquivo, executamos por conta pr√≥pria e em breve ela ser√° inclu√≠da na nova vers√£o do Document Management. </font><font style="vertical-align: inherit;">Tamb√©m executamos o mecanismo de deduplica√ß√£o da contraparte. </font><font style="vertical-align: inherit;">N√£o h√° deduplica√ß√£o de registros no n√≠vel do DBMS, pois isso n√£o √© necess√°rio. </font><font style="vertical-align: inherit;">A plataforma 1C: Enterprise armazena objetos no DBMS e somente a plataforma pode ser respons√°vel por sua consist√™ncia.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Existem n√≥s somente leitura?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o h√° n√≥s para leitura (n√≥s do sistema dedicados que atendem √†queles que precisam receber dados de leitura). </font><font style="vertical-align: inherit;">O DO n√£o √© um sistema de contabilidade para colocar em um n√≥ de BI separado, mas h√° um n√≥ separado para o departamento de desenvolvimento, que √© trocado por mensagens no formato JSON, e os tempos de replica√ß√£o t√≠picos s√£o unidades e dezenas de segundos. </font><font style="vertical-align: inherit;">O n√≥ ainda √© pequeno, possui cerca de 800 milh√µes de entradas, mas est√° crescendo rapidamente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E as mensagens marcadas para exclus√£o n√£o s√£o exclu√≠das?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainda n√£o. </font><font style="vertical-align: inherit;">N√£o temos tarefas para facilitar a base. </font><font style="vertical-align: inherit;">Houve v√°rios casos bastante graves em que tive que recorrer a cartas marcadas para exclus√£o, incluindo 2009. </font><font style="vertical-align: inherit;">Portanto, por enquanto, decidimos manter tudo. </font><font style="vertical-align: inherit;">Mas quando o custo disso se tornar injustificado, pensaremos na remo√ß√£o. </font><font style="vertical-align: inherit;">Por√©m, se voc√™ precisar remover uma carta separada do banco de dados com as extremidades para que n√£o haja rastreios, isso poder√° ser feito mediante solicita√ß√£o especial.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que guardar? </font><font style="vertical-align: inherit;">Existem estat√≠sticas sobre acessos a documentos antigos?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o h√° estat√≠sticas. </font><font style="vertical-align: inherit;">Mais precisamente, √© na forma de um log de usu√°rio, mas n√£o √© armazenado por muito tempo. </font><font style="vertical-align: inherit;">Os registros com mais de um ano s√£o exclu√≠dos do protocolo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houve situa√ß√µes em que foi necess√°rio levantar a antiga correspond√™ncia de cinco ou mesmo dez anos atr√°s. </font><font style="vertical-align: inherit;">E isso sempre foi feito n√£o por curiosidade ociosa, mas por tomar decis√µes comerciais complexas. </font><font style="vertical-align: inherit;">Houve um caso em que, sem o hist√≥rico de correspond√™ncia, seria tomada a decis√£o comercial errada.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como √© o exame do valor e destrui√ß√£o dos documentos de acordo com o per√≠odo de armazenamento?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para documentos em papel, isso √© feito da maneira tradicional usual, como todos os outros. </font><font style="vertical-align: inherit;">Para eletr√¥nicos, n√£o fazemos - deixemos que seja armazenado. </font><font style="vertical-align: inherit;">O sit est√° aqui. </font><font style="vertical-align: inherit;">H√° um benef√≠cio. </font><font style="vertical-align: inherit;">Tudo est√° bem.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quais s√£o as perspectivas de desenvolvimento?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, nosso DO resolve cerca de 30 problemas internos, alguns dos quais listamos no in√≠cio do artigo. </font><font style="vertical-align: inherit;">Tamb√©m o DO √© usado para preparar confer√™ncias que realizamos duas vezes por ano para nossos parceiros: todo o programa, todos os relat√≥rios, todas as se√ß√µes paralelas, salas - tudo isso √© feito no DO e, em seguida, √© baixado dele e √© feito um programa impresso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No caminho para o DO, existem v√°rias outras tarefas, al√©m daquelas que ele j√° resolve. </font><font style="vertical-align: inherit;">Existem tarefas para toda a empresa, mas existem tarefas √∫nicas e raras, necess√°rias apenas por qualquer unidade espec√≠fica. </font><font style="vertical-align: inherit;">√â necess√°rio ajud√°-los e, portanto, expandir a "geografia" do uso do sistema dentro de 1C - para expandir o escopo, resolver as tarefas de todos os departamentos. </font><font style="vertical-align: inherit;">Este seria o melhor teste para desempenho e confiabilidade. </font><font style="vertical-align: inherit;">Eu gostaria de ver o sistema funcionar em trilh√µes de registros, petabytes de informa√ß√£o.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt496512/index.html"># 05 - E um byte inteiro n√£o √© suficiente ... | Animes</a></li>
<li><a href="../pt496514/index.html">IPIP IPsec VPN tunnel entre a m√°quina Linux e o Mikrotik por tr√°s do provedor NAT</a></li>
<li><a href="../pt496516/index.html">Bot de telegrama em python vs COVID-19</a></li>
<li><a href="../pt496518/index.html">Como chegamos ao controle remoto</a></li>
<li><a href="../pt496528/index.html">A localiza√ß√£o de um c√≥digo QR √© uma tarefa importante, imerecida priva√ß√£o de aten√ß√£o</a></li>
<li><a href="../pt496536/index.html">DeepCode: vista lateral</a></li>
<li><a href="../pt496538/index.html">Fractais em Python. Passo a passo</a></li>
<li><a href="../pt496542/index.html">O tr√°fego da Internet na Europa cresceu uma vez e meia. Fornecedores de backbone registram registros de carregamento</a></li>
<li><a href="../pt496544/index.html">Hackathon on-line de projetos para trabalhadores independentes: 500 mil rublos por suas id√©ias e apoio do Servi√ßo Fiscal Federal</a></li>
<li><a href="../pt496546/index.html">Inicializa√ß√£o dentro da corpora√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>