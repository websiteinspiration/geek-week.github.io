<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–²ï¸ ğŸ« ğŸŒ‘ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆjsã¾ãŸã¯.m3u8ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ã‚’ä»‹ã—ã¦VKontakteã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ ğŸ´â€â˜ ï¸ ğŸš ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã™ã¹ã¦ã®å§‹ã¾ã‚Š...
 ã„ã¤ã‚‚ã®ã‚ˆã†ã«ã€VKontakteã«ã¶ã‚‰ä¸‹ãŒã£ã¦ã„ãŸã®ã§ã€æ–°ã—ã„ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªéŒ²éŸ³ã‚’ã„ãã¤ã‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€å¤±æœ›ã‚’å¾…ã¡å—ã‘ã¦ã„ãŸã€‚éŸ³å£°ã®éŒ²éŸ³ãŒå¥‡å¦™ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆm3u8ã§è¿”ã•ã‚ŒãŸã€‚ã“ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã€vlcãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å†ç”Ÿã™ã‚‹ã“ã¨ã™...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆjsã¾ãŸã¯.m3u8ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ã‚’ä»‹ã—ã¦VKontakteã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457438/"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã¹ã¦ã®å§‹ã¾ã‚Š...</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã„ã¤ã‚‚ã®ã‚ˆã†ã«ã€VKontakteã«ã¶ã‚‰ä¸‹ãŒã£ã¦ã„ãŸã®ã§ã€æ–°ã—ã„ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªéŒ²éŸ³ã‚’ã„ãã¤ã‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€å¤±æœ›ã‚’å¾…ã¡å—ã‘ã¦ã„ãŸã€‚éŸ³å£°ã®éŒ²éŸ³ãŒå¥‡å¦™ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆm3u8ã§è¿”ã•ã‚ŒãŸã€‚</font><font style="vertical-align: inherit;">ã“ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã€vlcãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å†ç”Ÿã™ã‚‹ã“ã¨ã™ã‚‰ã—ã¾ã›ã‚“ã§ã—ãŸã€‚ãã—ã¦ã€ç§ã¯ä½•ã‚’ã™ã¹ãã‹ã‚’è€ƒãˆå§‹ã‚ã¾ã—ãŸ...</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Ÿéš›ã«ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚ŒãŒã©ã®ã‚ˆã†ãª.m3u8å½¢å¼ã§ã‚ã‚‹ã‹ã‚’ã‚°ã‚°ã‚‹ã¨ã€ã“ã‚ŒãŒ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.m3u</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½¢å¼ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã§ã¯ã€ã“ã®.m3u8ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§é–‹ã„ã¦ã€æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚­ã‚¹ãƒˆ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">#EXTM3U<font></font>
#EXT-X-TARGETDURATION:3<font></font>
#EXT-X-ALLOW-CACHE:YES<font></font>
#EXT-X-PLAYLIST-TYPE:VOD<font></font>
#EXT-X-VERSION:3<font></font>
#EXT-X-MEDIA-SEQUENCE:1<font></font>
#EXTINF:1.000,<font></font>
6cfGpgIDcrZjA.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh<font></font>
#EXTINF:2.000,<font></font>
c2d2tpKzIsYzM.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh<font></font>
#EXTINF:3.000,<font></font>
a3fWlvLDwmZD4.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh<font></font>
#EXTINF:3.000,<font></font>
edeWZhKTUnazE.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh<font></font>
#EXTINF:3.000,<font></font>
9df2NqJzcmZj0.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh<font></font>
#EXT-X-ENDLIST<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ç§ãŸã¡ã¯ãã‚Œã‚’ç†è§£ã—ã¦ã„ã¾ã™ </font></font><br>
<br>
<pre><code class="plaintext hljs">9df2NqJzcmZj0.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªéŒ²éŸ³ã¸ã®ãƒ‘ã‚¹ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€ãƒ‘ã‚¹ã”ã¨ã«ãƒ›ã‚¹ãƒˆã‚’ç½®ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã€ãŠãã‚‰ãã“ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãŒå†ç”Ÿå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">Pythonã§æ•°è¡Œã®ã‚³ãƒ¼ãƒ‰ã‚’ã™ã°ã‚„ãã‚¹ãƒ­ãƒ¼ã—ãŸã®ã§ã€ã“ã‚Œã‚’å®Ÿè£…ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> re<font></font>
text=<span class="hljs-string">'''#EXTM3U
#EXT-X-TARGETDURATION:3
#EXT-X-ALLOW-CACHE:YES
#EXT-X-PLAYLIST-TYPE:VOD
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:1
#EXTINF:1.000,
6cfGpgIDcrZjA.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh
#EXTINF:2.000,
c2d2tpKzIsYzM.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh
#EXTINF:3.000,
a3fWlvLDwmZD4.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh
#EXTINF:3.000,
edeWZhKTUnazE.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh
#EXTINF:3.000,
9df2NqJzcmZj0.ts?extra=0F4d1n-wWV6igsS5Ji7x6gYIbtU_aRzsiByqvrumv4W1iznLLoiC552LnsmyKeuuOtw70WTqfYdDCir-nmlL3VlLR9i2Y6IPOudQxWPbZjlslXE7prmIvdLyoLxb3A9NFnHo2KR5NStPg1sk6ZVXrYBh
#EXT-X-ENDLIST'''</span>
host=<span class="hljs-string">'https://cs9-5v4.vkuseraudio.net/p16/d5fce44eae6dbc/'</span>
al = re.findall(<span class="hljs-string">'\n.+?\.ts\?extra\=.+?\n'</span>,text)
<span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> al:<font></font>
    text=text.replace(r,<span class="hljs-string">'\n'</span>+host+r.strip(<span class="hljs-string">'\n'</span>)+<span class="hljs-string">'\n'</span>)<font></font>
<font></font>
print(text)<font></font>
input()<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€å†ç”Ÿå¯èƒ½ãª.m3uãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã ãŒï¼</font><font style="vertical-align: inherit;">å•é¡Œã¯ãã‚Œã§ã™ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚®ãƒ£ãƒƒãƒ—ã¸ã®ãƒªãƒ³ã‚¯ãŒæœ‰åŠ¹ãªé–“ã®ã¿å†ç”Ÿã§ãã¾ã™ã€‚ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒ³ã‚¯ãŒæœ‰åŠ¹ã§ã‚ã‚‹é™ã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›ã§ãã‚‹ã®ã¯ã€ãã‚ŒãŒå—ä¿¡ã•ã‚ŒãŸã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ä¸Šã ã‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒªãƒ³ã‚¯ã¯PCã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚‰ã™ã¹ã¦ã‚’ç†è§£ã—ãŸå¾Œã€ç§ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆjsã§æ›¸ãã“ã¨ã«ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãã‚ŒãŒç§ãŒã—ãŸã“ã¨ã§ã™ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚°ãƒ©ãƒ </font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">music_get</span></span>{
    <span class="hljs-keyword">constructor</span>(){
        <span class="hljs-keyword">this</span>.el=<span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">"audio_row"</span>);
        <span class="hljs-keyword">this</span>.str_param=[];
        <span class="hljs-keyword">this</span>.json=[];
        <span class="hljs-keyword">this</span>.last_len=<span class="hljs-keyword">this</span>.el.length;
        <span class="hljs-keyword">this</span>.make_str(<span class="hljs-keyword">this</span>.el);    
        <span class="hljs-keyword">this</span>.load_audio_to_json(<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.str_param[<span class="hljs-number">0</span>]);<font></font>
    }<font></font>
    parse(element_){<font></font>
        <span class="hljs-comment">//,  id ,     ,   .</span>
        <span class="hljs-comment">//let i=JSON.parse(element_.attributes['data-audio'].nodeValue),s1=i[13].split("/");</span>
        <span class="hljs-comment">//return i[1]+"_"+i[0]+"_"+s1[2]+"_"+s1[s1.length-2];</span>
        <span class="hljs-keyword">let</span> i = AudioUtils.asObject(<span class="hljs-built_in">JSON</span>.parse(element_.getAttribute(<span class="hljs-string">'data-audio'</span>)));
        <span class="hljs-keyword">return</span> i.fullId+<span class="hljs-string">"_"</span>+i.actionHash+<span class="hljs-string">"_"</span>+i.urlHash;<font></font>
    }<font></font>
    encode_url(t) {<font></font>
        <span class="hljs-comment">//,    </span>
        <span class="hljs-keyword">let</span> c = {<span class="hljs-attr">v</span>:<span class="hljs-function">(<span class="hljs-params">t</span>)=&gt;</span> { <span class="hljs-keyword">return</span> t.split(<span class="hljs-string">''</span>).reverse().join(<span class="hljs-string">''</span>)},<span class="hljs-attr">r</span>: <span class="hljs-function">(<span class="hljs-params">t, e</span>) =&gt;</span> {t = t.split(<span class="hljs-string">''</span>);<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i, o = _ + _, a = t.length; a--; ) ~(i = o.indexOf(t[a])) &amp;&amp; (t[a] = o.substr(i - e, <span class="hljs-number">1</span>));<span class="hljs-keyword">return</span> t.join(<span class="hljs-string">''</span>)},
             <span class="hljs-attr">s</span>: <span class="hljs-function">(<span class="hljs-params">t,e</span>)=&gt;</span> { <span class="hljs-keyword">let</span> i = t.length;<span class="hljs-keyword">if</span> (i) { <span class="hljs-keyword">let</span> o = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t, e</span>) </span>{<span class="hljs-keyword">let</span> i = t.length,o = [];<span class="hljs-keyword">if</span> (i) {<span class="hljs-keyword">let</span> a = i;<span class="hljs-keyword">for</span> (e = <span class="hljs-built_in">Math</span>.abs(e); a--; ) e = (i * (a + <span class="hljs-number">1</span>) ^ e + a) % i,o[a] = e }<span class="hljs-keyword">return</span> o}(t, e), a = <span class="hljs-number">0</span>;<span class="hljs-keyword">for</span> (t = t.split(<span class="hljs-string">''</span>); ++a &lt; i; ) t[a] = t.splice(o[i - <span class="hljs-number">1</span> - a], <span class="hljs-number">1</span>, t[a]) [<span class="hljs-number">0</span>];t = t.join(<span class="hljs-string">''</span>)}<span class="hljs-keyword">return</span> t},
             <span class="hljs-attr">i</span>:<span class="hljs-function">(<span class="hljs-params">t, e</span>)=&gt;</span> {<span class="hljs-keyword">return</span> c.s(t, e ^ vk.id)},<span class="hljs-attr">x</span>: <span class="hljs-function">(<span class="hljs-params">t, e</span>)=&gt;</span> {<span class="hljs-keyword">let</span> i = [];<span class="hljs-keyword">return</span> e = e.charCodeAt(<span class="hljs-number">0</span>),each(t.split(<span class="hljs-string">''</span>), (t, o) =&gt; {i.push(<span class="hljs-built_in">String</span>.fromCharCode(o.charCodeAt(<span class="hljs-number">0</span>) ^ e))}),i.join(<span class="hljs-string">''</span>)}<font></font>
        },_ = <span class="hljs-string">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/='</span>,h=<span class="hljs-function">(<span class="hljs-params">t</span>)=&gt;</span>{ <span class="hljs-keyword">if</span> (!t || t.length % <span class="hljs-number">4</span> == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> !<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> e, i, o = <span class="hljs-number">0</span>, a = <span class="hljs-number">0</span>, s = <span class="hljs-string">''</span>; i = t.charAt(a++); ) ~(i = _.indexOf(i)) &amp;&amp; (e = o % <span class="hljs-number">4</span> ? <span class="hljs-number">64</span> * e + i : i, o++ % <span class="hljs-number">4</span>) &amp;&amp; (s += <span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">255</span> &amp; e &gt;&gt; ( - <span class="hljs-number">2</span> * o &amp; <span class="hljs-number">6</span>)));<span class="hljs-keyword">return</span> s};
        <span class="hljs-keyword">if</span> ((!<span class="hljs-built_in">window</span>.wbopen || !~(<span class="hljs-built_in">window</span>.open + <span class="hljs-string">''</span>).indexOf(<span class="hljs-string">'wbopen'</span>)) &amp;&amp; ~t.indexOf(<span class="hljs-string">'audio_api_unavailable'</span>)) { 
        <span class="hljs-keyword">let</span> e = t.split(<span class="hljs-string">'?extra='</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">'#'</span>),i=<span class="hljs-string">''</span>===e[<span class="hljs-number">1</span>]?<span class="hljs-string">''</span>:h(e[<span class="hljs-number">1</span>]);
        <span class="hljs-keyword">if</span> (e = h(e[<span class="hljs-number">0</span>]), <span class="hljs-string">'string'</span> != <span class="hljs-keyword">typeof</span> i || !e) <span class="hljs-keyword">return</span> t;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> o, a, s = (i = i ? i.split(<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">9</span>))  : []).length; s--; ) {<span class="hljs-keyword">if</span> (o = (a = i[s].split(<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">11</span>))).splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, e) [<span class="hljs-number">0</span>], !c[o]) <span class="hljs-keyword">return</span> t; e = c[o].apply(<span class="hljs-literal">null</span>, a)}<span class="hljs-keyword">if</span> (e &amp;&amp; <span class="hljs-string">'http'</span> === e.substr(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>)) <span class="hljs-keyword">return</span> e}<span class="hljs-keyword">return</span> t<font></font>
    }<font></font>
    end(){<font></font>
        <span class="hljs-comment">//    html   </span>
        each(<span class="hljs-keyword">this</span>.json,(_,item)=&gt;{
            <span class="hljs-keyword">let</span> els = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'[data-full-id="'</span>+item.fullId+<span class="hljs-string">'"]'</span>)[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">if</span>(els.children[<span class="hljs-number">0</span>].children[<span class="hljs-number">6</span>].children.length===<span class="hljs-number">3</span>)<span class="hljs-keyword">return</span>;<font></font>
            els.children[<span class="hljs-number">0</span>].children[<span class="hljs-number">6</span>].innerHTML+=<span class="hljs-string">"&lt;div onclick='new music_download().download(this);' style='float:right;height:40px;width:40px;background:url(/doc472427950_504561254) no-repeat 5px 5px;'&gt;&lt;/div&gt;"</span>            
            els.children[<span class="hljs-number">0</span>].children[<span class="hljs-number">6</span>].children[<span class="hljs-number">2</span>].attributes.info=item;<font></font>
            <font></font>
        });<font></font>
    }<font></font>
    make_str(mass){<font></font>
        <span class="hljs-comment">//,    str_param   id ,     .</span><font></font>
        each(mass,(i,e)=&gt;{<font></font>
            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">10</span>)===i/<span class="hljs-number">10</span>)
                <span class="hljs-keyword">this</span>.str_param.push(<span class="hljs-keyword">this</span>.parse(e));
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">this</span>.str_param[<span class="hljs-keyword">this</span>.str_param.length<span class="hljs-number">-1</span>]+=<span class="hljs-string">","</span>+<span class="hljs-keyword">this</span>.parse(e);<font></font>
        });<font></font>
    }<font></font>
    load_audio_to_json(i,l){<font></font>
        <span class="hljs-comment">//    ,        ,</span>
        <span class="hljs-comment">//       this.json</span>
        ajax.post(<span class="hljs-string">"/al_audio.php"</span>,{<span class="hljs-attr">act</span>:<span class="hljs-string">'reload_audio'</span>,<span class="hljs-attr">al</span>:<span class="hljs-string">'1'</span>,<span class="hljs-attr">ids</span>:l},{<span class="hljs-attr">onDone</span>:<span class="hljs-function">(<span class="hljs-params">a</span>)=&gt;</span>{
            <span class="hljs-comment">//each - ,     vk.com -   array.forEach</span><font></font>
            each(a,(_,c)=&gt;{<font></font>
                c=AudioUtils.asObject(c);<font></font>
                <span class="hljs-comment">//   ,    )</span>
                c.url = <span class="hljs-keyword">this</span>.encode_url(c.url);
                <span class="hljs-keyword">this</span>.json.push(c);<font></font>
            });<font></font>
            <span class="hljs-comment">//</span>
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.str_param.length<span class="hljs-number">-1</span>===i) <span class="hljs-keyword">this</span>.end();
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.load_audio_to_json(i+<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.str_param[i+<span class="hljs-number">1</span>]);<font></font>
<font></font>
        }});<font></font>
    }<font></font>
    _update_scroll(){    <font></font>
        <span class="hljs-comment">//,    .</span>
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.el.length===<span class="hljs-keyword">this</span>.last_len)<span class="hljs-keyword">return</span>;<font></font>
        <font></font>
        <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.el.length,offset=c-<span class="hljs-keyword">this</span>.last_len;
        <span class="hljs-keyword">this</span>.last_len=c;
        <span class="hljs-keyword">let</span> arr = <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.el).splice(-offset);
        <span class="hljs-keyword">this</span>._load_button(arr);<font></font>
        <font></font>
    }<font></font>
    _load_button(list){<font></font>
        <span class="hljs-comment">//,    .</span>
        <span class="hljs-keyword">let</span> leng=<span class="hljs-keyword">this</span>.str_param.length<span class="hljs-number">-1</span>;
        <span class="hljs-keyword">this</span>.make_str(list);
        <span class="hljs-keyword">this</span>.load_audio_to_json(leng,<span class="hljs-keyword">this</span>.str_param[leng]);<font></font>
    }<font></font>
} <font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">music_download</span></span>{
    <span class="hljs-comment">//constructor(){}</span><font></font>
    download(e){    <font></font>
        <span class="hljs-keyword">this</span>.info = e.attributes.info;
        <span class="hljs-comment">//   - .mp3,       </span>
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.info.url.indexOf(<span class="hljs-string">".mp3?"</span>)!==<span class="hljs-number">-1</span>)
            <span class="hljs-built_in">window</span>.open(<span class="hljs-keyword">this</span>.info.url);
        <span class="hljs-keyword">else</span> 
            <span class="hljs-comment">//       .m3u8,   (), </span>
            <span class="hljs-comment">//       .ts,    . </span>
            <span class="hljs-comment">//    response:</span>
            fetch(<span class="hljs-keyword">this</span>.info.url).then(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span>e.text().then(<span class="hljs-function">(<span class="hljs-params">e</span>)=&gt;</span><span class="hljs-keyword">this</span>.response(e)));<font></font>
    }<font></font>
    response(data){<font></font>
        <span class="hljs-keyword">let</span> alls = data.match(<span class="hljs-regexp">/\n.+?\.ts\?/ig</span>), host=<span class="hljs-keyword">this</span>.info.url.split(<span class="hljs-string">"index.m3u8"</span>)[<span class="hljs-number">0</span>];<font></font>
        each(alls,(_,e)=&gt;data=data.replace(e,<span class="hljs-string">"\n"</span>+host+e.replace(<span class="hljs-string">'\n'</span>,<span class="hljs-string">''</span>)));
        <span class="hljs-comment">//  </span>
        <span class="hljs-keyword">this</span>.download_data(<span class="hljs-keyword">this</span>.info.title.replace(<span class="hljs-regexp">/[-\/\\:*?"&lt;&gt;|]/gim</span>,<span class="hljs-string">''</span>)+<span class="hljs-string">".m3u8"</span>,data);<font></font>
    <font></font>
    }<font></font>
    download_data(f_n, t) {<font></font>
        <span class="hljs-keyword">let</span> e = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'a'</span>);<font></font>
        e.setAttribute(<span class="hljs-string">'href'</span>, <span class="hljs-comment">//'data:text/plain;charset=utf-8,'</span>
                <span class="hljs-string">'data:text/html;base64,'</span>+ btoa(t));<font></font>
        e.setAttribute(<span class="hljs-string">'download'</span>, f_n);<font></font>
        e.style.display = <span class="hljs-string">'none'</span>;
        <span class="hljs-built_in">document</span>.body.appendChild(e);<font></font>
        e.click();<font></font>
        <span class="hljs-built_in">document</span>.body.removeChild(e);<font></font>
    }<font></font>
<font></font>
}<font></font>
<span class="hljs-keyword">var</span> mus = <span class="hljs-keyword">new</span> music_get();
<span class="hljs-comment">// </span>
<span class="hljs-built_in">window</span>.onscroll=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>mus._update_scroll();</code></pre><br>
    , :<br>
<img src="https://habrastorage.org/webt/pd/3z/zl/pd3zzlmw_eav9zxexidxgicinv4.png"><br>
</div></div> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ã™ã¹ã¦ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚’1ã¤ã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚‰ã€æ¬¡ã®pythonã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¦ã€ã™ã¹ã¦ã®.m3u8ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚’</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.ts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«å¤‰æ›ã—</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> requests,re,os
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">convert_mp3</span>(<span class="hljs-params">f</span>):</span><font></font>
    z=open(f).read()<font></font>
    con=list(map(<span class="hljs-keyword">lambda</span> e: e.rstrip(<span class="hljs-string">'\n'</span>).rstrip(<span class="hljs-string">'#EXT-X-ENDLIST'</span>).rstrip(<span class="hljs-string">"\n"</span>) <span class="hljs-keyword">if</span> <span class="hljs-string">'#EXTM3U'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> e <span class="hljs-keyword">else</span> <span class="hljs-string">''</span> ,re.split(<span class="hljs-string">'#EXTINF:\d+.\d+,\n'</span>,z)))<font></font>
    z = <span class="hljs-string">b''</span>
    <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> con:
        <span class="hljs-keyword">if</span>(r==<span class="hljs-string">''</span>):<span class="hljs-keyword">continue</span>;<font></font>
        z+=requests.get(r).content<font></font>
    open(f.strip(<span class="hljs-string">".m3u8"</span>)+<span class="hljs-string">".ts"</span>,<span class="hljs-string">'bw'</span>).write(z)<font></font>
z=set()<font></font>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> os.listdir():
    <span class="hljs-keyword">if</span> file.endswith(<span class="hljs-string">".m3u8"</span>):<font></font>
        z.add(file)<font></font>
        convert_mp3(file)<font></font>
z=<span class="hljs-string">',\n'</span>.join(z)<font></font>
input(<span class="hljs-string">f":<span class="hljs-subst">{z}</span> .\n Enter,  !"</span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸå‰‡çš„ã«ã¯ã€ï¼ˆã‚ãªãŸã¯JSã«.TSã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ã¾ã¨ã‚ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ã¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€ãã‚Œã¯ã†ã¾ãã„ã‹ãªã‹ã£ãŸ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -ã‚³ãƒ¡ãƒ³ãƒˆã§æ›¸ãè¾¼ã¿æˆåŠŸè€…</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P.PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Yandex.browserã¯ã¾ã .MP3ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¿”ã™ã¨è¨€ã£ã¦å¿˜ã‚Œã¾ã—ãŸãŒï¼‰</font></font><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ–°ï¼š</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­£ã—ãè¿°ã¹ãŸã‚ˆã†ã« </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®ãã¾ã‚</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚ãªãŸã¯ã™ãã«mp3ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">music_get</span></span>{
    <span class="hljs-keyword">constructor</span>(){
        <span class="hljs-keyword">this</span>.el=<span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">"audio_row"</span>);
        <span class="hljs-keyword">this</span>.s=[];
        <span class="hljs-keyword">this</span>.j=[];
        <span class="hljs-keyword">this</span>.last_len=<span class="hljs-keyword">this</span>.el.length;
        <span class="hljs-keyword">this</span>.make_str(<span class="hljs-keyword">this</span>.el);    
        <span class="hljs-keyword">this</span>.load_audio_to_json(<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.s[<span class="hljs-number">0</span>]);<font></font>
    }<font></font>
    parse(element_){<font></font>
        <span class="hljs-comment">//,  id ,     ,   .</span>
        <span class="hljs-comment">//let i=JSON.parse(element_.attributes['data-audio'].nodeValue),s1=i[13].split("/");</span>
        <span class="hljs-comment">//return i[1]+"_"+i[0]+"_"+s1[2]+"_"+s1[s1.length-2];</span>
        <span class="hljs-keyword">let</span> i = AudioUtils.asObject(<span class="hljs-built_in">JSON</span>.parse(element_.getAttribute(<span class="hljs-string">'data-audio'</span>)));
        <span class="hljs-keyword">return</span> i.fullId+<span class="hljs-string">"_"</span>+i.actionHash+<span class="hljs-string">"_"</span>+i.urlHash;<font></font>
    }<font></font>
    encode_url(t) {<font></font>
        <span class="hljs-comment">//,    </span>
        <span class="hljs-keyword">let</span> c = {<span class="hljs-attr">v</span>:<span class="hljs-function">(<span class="hljs-params">t</span>)=&gt;</span> { <span class="hljs-keyword">return</span> t.split(<span class="hljs-string">''</span>).reverse().join(<span class="hljs-string">''</span>)},<span class="hljs-attr">r</span>: <span class="hljs-function">(<span class="hljs-params">t, e</span>) =&gt;</span> {t = t.split(<span class="hljs-string">''</span>);<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i, o = _ + _, a = t.length; a--; ) ~(i = o.indexOf(t[a])) &amp;&amp; (t[a] = o.substr(i - e, <span class="hljs-number">1</span>));<span class="hljs-keyword">return</span> t.join(<span class="hljs-string">''</span>)},
             <span class="hljs-attr">s</span>: <span class="hljs-function">(<span class="hljs-params">t,e</span>)=&gt;</span> { <span class="hljs-keyword">let</span> i = t.length;<span class="hljs-keyword">if</span> (i) { <span class="hljs-keyword">let</span> o = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t, e</span>) </span>{<span class="hljs-keyword">let</span> i = t.length,o = [];<span class="hljs-keyword">if</span> (i) {<span class="hljs-keyword">let</span> a = i;<span class="hljs-keyword">for</span> (e = <span class="hljs-built_in">Math</span>.abs(e); a--; ) e = (i * (a + <span class="hljs-number">1</span>) ^ e + a) % i,o[a] = e }<span class="hljs-keyword">return</span> o}(t, e), a = <span class="hljs-number">0</span>;<span class="hljs-keyword">for</span> (t = t.split(<span class="hljs-string">''</span>); ++a &lt; i; ) t[a] = t.splice(o[i - <span class="hljs-number">1</span> - a], <span class="hljs-number">1</span>, t[a]) [<span class="hljs-number">0</span>];t = t.join(<span class="hljs-string">''</span>)}<span class="hljs-keyword">return</span> t},
             <span class="hljs-attr">i</span>:<span class="hljs-function">(<span class="hljs-params">t, e</span>)=&gt;</span> {<span class="hljs-keyword">return</span> c.s(t, e ^ vk.id)},<span class="hljs-attr">x</span>: <span class="hljs-function">(<span class="hljs-params">t, e</span>)=&gt;</span> {<span class="hljs-keyword">let</span> i = [];<span class="hljs-keyword">return</span> e = e.charCodeAt(<span class="hljs-number">0</span>),each(t.split(<span class="hljs-string">''</span>), (t, o) =&gt; {i.push(<span class="hljs-built_in">String</span>.fromCharCode(o.charCodeAt(<span class="hljs-number">0</span>) ^ e))}),i.join(<span class="hljs-string">''</span>)}<font></font>
        },_ = <span class="hljs-string">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/='</span>,h=<span class="hljs-function">(<span class="hljs-params">t</span>)=&gt;</span>{ <span class="hljs-keyword">if</span> (!t || t.length % <span class="hljs-number">4</span> == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> !<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> e, i, o = <span class="hljs-number">0</span>, a = <span class="hljs-number">0</span>, s = <span class="hljs-string">''</span>; i = t.charAt(a++); ) ~(i = _.indexOf(i)) &amp;&amp; (e = o % <span class="hljs-number">4</span> ? <span class="hljs-number">64</span> * e + i : i, o++ % <span class="hljs-number">4</span>) &amp;&amp; (s += <span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">255</span> &amp; e &gt;&gt; ( - <span class="hljs-number">2</span> * o &amp; <span class="hljs-number">6</span>)));<span class="hljs-keyword">return</span> s};
        <span class="hljs-keyword">if</span> ((!<span class="hljs-built_in">window</span>.wbopen || !~(<span class="hljs-built_in">window</span>.open + <span class="hljs-string">''</span>).indexOf(<span class="hljs-string">'wbopen'</span>)) &amp;&amp; ~t.indexOf(<span class="hljs-string">'audio_api_unavailable'</span>)) { 
        <span class="hljs-keyword">let</span> e = t.split(<span class="hljs-string">'?extra='</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">'#'</span>),i=<span class="hljs-string">''</span>===e[<span class="hljs-number">1</span>]?<span class="hljs-string">''</span>:h(e[<span class="hljs-number">1</span>]);
        <span class="hljs-keyword">if</span> (e = h(e[<span class="hljs-number">0</span>]), <span class="hljs-string">'string'</span> != <span class="hljs-keyword">typeof</span> i || !e) <span class="hljs-keyword">return</span> t;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> o, a, s = (i = i ? i.split(<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">9</span>))  : []).length; s--; ) {<span class="hljs-keyword">if</span> (o = (a = i[s].split(<span class="hljs-built_in">String</span>.fromCharCode(<span class="hljs-number">11</span>))).splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, e) [<span class="hljs-number">0</span>], !c[o]) <span class="hljs-keyword">return</span> t; e = c[o].apply(<span class="hljs-literal">null</span>, a)}<span class="hljs-keyword">if</span> (e &amp;&amp; <span class="hljs-string">'http'</span> === e.substr(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>)) <span class="hljs-keyword">return</span> e}<span class="hljs-keyword">return</span> t<font></font>
    }<font></font>
    end(){<font></font>
        <span class="hljs-comment">//    html   </span>
        each(<span class="hljs-keyword">this</span>.j,(_,i)=&gt;{
            <span class="hljs-keyword">let</span> e = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'[data-full-id="'</span>+i.fullId+<span class="hljs-string">'"]'</span>)[<span class="hljs-number">0</span>],q=e.children[<span class="hljs-number">0</span>].children[<span class="hljs-number">6</span>];
            <span class="hljs-keyword">if</span>(q.children.length===<span class="hljs-number">3</span>)<span class="hljs-keyword">return</span>;<font></font>
            q.innerHTML+=<span class="hljs-string">"&lt;a href='"</span>+<span class="hljs-keyword">this</span>._g(i)+<span class="hljs-string">"' target='_blank' style='float:right;height:40px;width:40px;background:url(/doc472427950_504561254) no-repeat 5px 5px;'&gt;&lt;/a&gt;"</span>            <font></font>
            <font></font>
        });<font></font>
    }<font></font>
	_g(info){    <font></font>
		<span class="hljs-keyword">if</span>(info.url.indexOf(<span class="hljs-string">".mp3?"</span>)!==<span class="hljs-number">-1</span>)
			<span class="hljs-keyword">return</span> info.url;
		<span class="hljs-keyword">else</span> 
			<span class="hljs-keyword">return</span> info.url.replace(<span class="hljs-string">"/index.m3u8"</span>,<span class="hljs-string">".mp3"</span>).replace(<span class="hljs-regexp">/\/\w{11}\//</span>,<span class="hljs-string">'/'</span>);<font></font>
	}<font></font>
    make_str(mass){<font></font>
        <span class="hljs-comment">//,    s   id ,     .</span><font></font>
        each(mass,(i,e)=&gt;{<font></font>
            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">10</span>)===i/<span class="hljs-number">10</span>)
                <span class="hljs-keyword">this</span>.s.push(<span class="hljs-keyword">this</span>.parse(e));
            <span class="hljs-keyword">else</span>
                <span class="hljs-keyword">this</span>.s[<span class="hljs-keyword">this</span>.s.length<span class="hljs-number">-1</span>]+=<span class="hljs-string">","</span>+<span class="hljs-keyword">this</span>.parse(e);<font></font>
        });<font></font>
    }<font></font>
    load_audio_to_json(i,l){<font></font>
        <span class="hljs-comment">//    ,        ,</span>
        <span class="hljs-comment">//       this.j</span>
        ajax.post(<span class="hljs-string">"/al_audio.php"</span>,{<span class="hljs-attr">act</span>:<span class="hljs-string">'reload_audio'</span>,<span class="hljs-attr">al</span>:<span class="hljs-string">'1'</span>,<span class="hljs-attr">ids</span>:l},{<span class="hljs-attr">onDone</span>:<span class="hljs-function">(<span class="hljs-params">a</span>)=&gt;</span>{
            <span class="hljs-comment">//each - ,     vk.com -   array.forEach</span><font></font>
            each(a,(_,c)=&gt;{<font></font>
                c=AudioUtils.asObject(c);<font></font>
                <span class="hljs-comment">//   ,    )</span>
                c.url = <span class="hljs-keyword">this</span>.encode_url(c.url);
                <span class="hljs-keyword">this</span>.j.push(c);<font></font>
            });<font></font>
            <span class="hljs-comment">//</span>
            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.s.length<span class="hljs-number">-1</span>===i) <span class="hljs-keyword">this</span>.end();
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.load_audio_to_json(i+<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.s[i+<span class="hljs-number">1</span>]);<font></font>
<font></font>
        }});<font></font>
    }<font></font>
    _update_scroll(){    <font></font>
        <span class="hljs-comment">//,    .</span>
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.el.length===<span class="hljs-keyword">this</span>.last_len)<span class="hljs-keyword">return</span>;<font></font>
        <font></font>
        <span class="hljs-keyword">let</span> c = <span class="hljs-keyword">this</span>.el.length,offset=c-<span class="hljs-keyword">this</span>.last_len;
        <span class="hljs-keyword">this</span>.last_len=c;
        <span class="hljs-keyword">let</span> arr = <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">this</span>.el).splice(-offset);
        <span class="hljs-keyword">this</span>._load_button(arr);<font></font>
        <font></font>
    }<font></font>
    _load_button(list){<font></font>
        <span class="hljs-comment">//,    .</span>
        <span class="hljs-keyword">let</span> leng=<span class="hljs-keyword">this</span>.s.length<span class="hljs-number">-1</span>;
        <span class="hljs-keyword">this</span>.make_str(list);
        <span class="hljs-keyword">this</span>.load_audio_to_json(leng,<span class="hljs-keyword">this</span>.s[leng]);<font></font>
    }<font></font>
} <font></font>
<font></font>
<font></font>
<span class="hljs-comment">// </span>
<span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> music_get();
<span class="hljs-built_in">window</span>.onscroll=<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>m._update_scroll();<font></font>
<font></font>
</code></pre><br>
 :<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">eval</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p,a,c,k,e,r</span>)</span>{e=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>)</span>{<span class="hljs-keyword">return</span>(c&lt;a?<span class="hljs-string">''</span>:e(<span class="hljs-built_in">parseInt</span>(c/a)))+((c=c%a)&gt;<span class="hljs-number">35</span>?<span class="hljs-built_in">String</span>.fromCharCode(c+<span class="hljs-number">29</span>):c.toString(<span class="hljs-number">36</span>))};<span class="hljs-keyword">if</span>(!<span class="hljs-string">''</span>.replace(<span class="hljs-regexp">/^/</span>,<span class="hljs-built_in">String</span>)){<span class="hljs-keyword">while</span>(c--)r[e(c)]=k[c]||e(c);k=[<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> r[e]}];e=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">'\\w+'</span>};c=<span class="hljs-number">1</span>};<span class="hljs-keyword">while</span>(c--)<span class="hljs-keyword">if</span>(k[c])p=p.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'\\b'</span>+e(c)+<span class="hljs-string">'\\b'</span>,<span class="hljs-string">'g'</span>),k[c]);<span class="hljs-keyword">return</span> p}(<span class="hljs-string">'8 p=7(){5.y=O.1a("1b");5.s=[];5.j=[];5.C=5.y.o;5.J(5.y);5.D(0,5.s[0])};p.q.E=7(a){a=P.Q(1c.E(a.1d("R-1e")));n a.S+"T"+a.1f+"T"+a.1g};p.q.U=7(a){8 b={v:7(a){n a.t("").1h().F("")},r:7(a,b){a=a.t("");A(8 k=1i 0,e=d+d,c=a.o;c--;)~(k=e.B(a[c]))&amp;&amp;(a[c]=e.V(k-b,1));n a.F("")},s:7(a,b){8 c=a.o;u(c){8 e=b,d=a.o,f=[];u(d){8 g=d;A(e=W.1j(e);g--;)e=(d*(g+1)^e+g)%d,f[g]=e}e=0;A(a=a.t("");++e&lt;c;)a[e]=a.K(f[c-1-e],1,a[e])[0];a=a.F("")}n a},i:7(a,d){n b.s(a,d^1k.X)},x:7(a,d){8 b=[];n d=d.Y(0),G(a.t(""),7(a,c){b.L(H.I(c.Y(0)^d))}),b.F("")}},d="1l+/=",c=7(a){u(!a||1==a.o%4)n!1;A(8 b,c,e=0,g=0,f="";c=a.1m(g++);)~(c=d.B(c))&amp;&amp;(b=e%4?1n*b+c:c,e++%4)&amp;&amp;(f+=H.I(1o&amp;b&gt;&gt;(-2*e&amp;6)));n f};u((!M.Z||!~(M.1p+"").B("Z"))&amp;&amp;~a.B("1q")){8 f=a.t("?1r=")[1].t("#"),g=""===f[1]?"":c(f[1]);u(f=c(f[0]),"1s"!=1t g||!f)n a;A(8 h,l=(g=g?g.t(H.I(9)):[]).o;l--;){u(h=(c=g[l].t(H.I(11))).K(0,1,f)[0],!b[h])n a;f=b[h].1u(1v,c)}u(f&amp;&amp;"1w"===f.V(0,4))n f}n a};p.q.12=7(){8 a=5;G(5.j,7(b,d){8 c=O.1x(\'[R-1y-X="\'+d.S+\'"]\')[0].N[0].N[6];3!==c.N.o&amp;&amp;(c.1z+="&lt;a 1A=\'"+a.13(d)+"\' 1B=\'1C\' 1D=\'1E:1F;1G:14;1H:14;1I:z(/1J) 1K-1L 15 15;\'&gt;&lt;/a&gt;")})};p.q.13=7(a){n-1!==a.z.B(".16?")?a.z:a.z.17("/1M.1N",".16").17(/\\/\\w{11}\\//,"/")};p.q.J=7(a){8 b=5;G(a,7(a,c){W.1O(a/10)===a/10?b.s.L(b.E(c)):b.s[b.s.o-1]+=","+b.E(c)})};p.q.D=7(a,b){8 d=5;1P.1Q("/1R.1S",{1T:"1U",1V:"1",1W:b},{1X:7(b){G(b,7(a,b){b=P.Q(b);b.z=d.U(b.z);d.j.L(b)});d.s.o-1===a?d.12():d.D(a+1,d.s[a+1])}})};p.q.18=7(){u(5.y.o!==5.C){8 a=5.y.o,b=a-5.C;5.C=a;a=1Y.1Z(5.y).K(-b);5.19(a)}};p.q.19=7(a){8 b=5.s.o-1;5.J(a);5.D(b,5.s[b])};8 m=20 p;M.21=7(){n m.18()};'</span>,<span class="hljs-number">62</span>,<span class="hljs-number">126</span>,<span class="hljs-string">'|||||this||function|var|||||||||||||||return|length|music_get|prototype|||split|if||||el|url|for|indexOf|last_len|load_audio_to_json|parse|join|each|String|fromCharCode|make_str|splice|push|window|children|document|AudioUtils|asObject|data|fullId|_|encode_url|substr|Math|id|charCodeAt|wbopen|||end|_g|40px|5px|mp3|replace|_update_scroll|_load_button|getElementsByClassName|audio_row|JSON|getAttribute|audio|actionHash|urlHash|reverse|void|abs|vk|abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789|charAt|64|255|open|audio_api_unavailable|extra|string|typeof|apply|null|http|querySelectorAll|full|innerHTML|href|target|_blank|style|float|right|height|width|background|doc472427950_504561254|no|repeat|index|m3u8|floor|ajax|post|al_audio|php|act|reload_audio|al|ids|onDone|Array|from|new|onscroll'</span>.split(<span class="hljs-string">'|'</span>),<span class="hljs-number">0</span>,{}))</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja457422/index.html">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¾ãŸã¯HabrÃ©ã§ã‚«ãƒ«ãƒã‚’å°ç„¡ã—ã«ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja457424/index.html">ãƒ¬ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚°ã‚²ãƒ¼ãƒ ã‚­ãƒƒãƒˆã€‚æˆ¦äº‰ã‚²ãƒ¼ãƒ ã‚’ã—ãŸäººã«æ§ã’ã‚‹</a></li>
<li><a href="../ja457430/index.html">æˆé•·ã€ãƒãƒ¼ãƒ ãƒªãƒ¼ãƒ€ãƒ¼ã€å¤§å°</a></li>
<li><a href="../ja457434/index.html">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¦ã‚£ãƒ¼ã‚¯26ï¼šGoogleã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¹ãƒ‘ãƒ </a></li>
<li><a href="../ja457436/index.html">GolangãƒŸãƒ¼ãƒˆã‚¢ãƒƒãƒ—ç¬¬4å·»-6æœˆ27æ—¥ã€ãƒ‹ã‚¸ãƒ‹ãƒãƒ´ã‚´ãƒ­ãƒ‰</a></li>
<li><a href="../ja457440/index.html">ServiceLoaderï¼šèã„ãŸã“ã¨ã‚‚ãªã„ã‚ˆã†ãªçµ„ã¿è¾¼ã¿ã®DIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</a></li>
<li><a href="../ja457442/index.html">ã‚µãƒ¼ãƒ¢ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿¡é ¼ãƒ¬ãƒ™ãƒ«ã®ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¤œé–²ã«åŠ¹æœçš„ã«æŠµæŠ—ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja457444/index.html">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ARãƒ¡ã‚¬ãƒã€‚æ‹¡å¼µç¾å®ŸãŒã•ã¾ã–ã¾ãªãƒ“ã‚¸ãƒã‚¹åˆ†é‡ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ãŸå®Ÿéš›ã®äº‹ä¾‹</a></li>
<li><a href="../ja457446/index.html">ãƒ•ã‚©ãƒ¼ãƒ«ãƒˆãƒˆãƒ¬ãƒ©ãƒ³ãƒˆã‚¨ãƒ‹ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ§‹ç¯‰ã¨é‹ç”¨</a></li>
<li><a href="../ja457450/index.html">Gartnerã«ã‚ˆã‚‹ã¨ã€2019å¹´ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã¨åˆ†æã«ãŠã‘ã‚‹ä¸Šä½10ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãƒˆãƒ¬ãƒ³ãƒ‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>