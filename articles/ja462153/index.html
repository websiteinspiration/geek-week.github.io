<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐓 👩🏽‍🤝‍👨🏾 ❗️ Unity Interactive Mapシェーダー 🤱🏽 👨‍🏫 🌶️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="このチュートリアルは、インタラクティブマップと、シェーダーを使用してUnityでそれらを作成することに関するものです。
 
 このエフェクトは、ホログラフィックプロジェクションや映画「ブラックパンサー」の砂のテーブルなど、より複雑な手法の基礎として使用できます。
 
 このチュートリアルのインスピレ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Unity Interactive Mapシェーダー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462153/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/511/6a1/e02/5116a1e02debfaa58afe0cddf3b4c6c9.png" alt="画像"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インタラクティブマップ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、シェーダーを使用してUnityでそれらを作成すること</font><font style="vertical-align: inherit;">に関するもの</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このエフェクトは、ホログラフィックプロジェクションや映画「ブラックパンサー」の砂のテーブルなど、より複雑な手法の基礎として使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルのインスピレーションの源は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baran Kahyaoglu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって公開された</font><font style="vertical-align: inherit;">ツイートで、彼が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapbox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用に作成しているものの例を示してい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<a name="habracut"></a><br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1118609807844442112"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1118610439049494540"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シーン（マップを除く）は、Unity Visual Effect Graph Spaceshipデモ（下記参照）から取得されまし</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">た</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;">こちらから</font></a><font style="vertical-align: inherit;">ダウンロードでき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/rqMcPZoEc3U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート1.頂点オフセット</font></font></h2><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">効果の解剖学</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すぐに気付く最初のことは、地理的マップが</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平坦であること</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。テクスチャとして使用される場合、対応するマップ領域の実際の3Dモデルが持つ3次元性が欠けています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このソリューションを適用できます。ゲームで必要な領域の3Dモデルを作成し、マップからテクスチャをそれに適用します。これは問題の解決に役立ちますが、時間がかかり、Baran Kahyaogluビデオからの「スクロール」の効果を実現できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、より技術的なアプローチが最善です。幸い、シェーダーを使用して3Dモデルのジオメトリを変更できます。彼らの助けを借りて、あなたは私たちが必要とする地域の谷と山に飛行機を変えることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルでは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;">、Quillota</font></a><font style="vertical-align: inherit;">のマップを使用します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特徴的な丘で有名なチリで。</font><font style="vertical-align: inherit;">下の画像は、円形メッシュにプロットされた領域のテクスチャを示しています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a7/b64/0a6/5a7b640a60ca2ce42c9d4ee3f5c95150.png" width="797" height="346"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
丘や山が見えますが、まだ完全に平坦です。</font><font style="vertical-align: inherit;">これはリアリズムの幻想を破壊します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線の押し出し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーダーを使用してジオメトリを変更する最初のステップは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常の押し出し</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる手法</font><font style="vertical-align: inherit;">です。彼女に</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は頂点モディファイヤ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要</font><font style="vertical-align: inherit;">です。これは、3Dモデルの個々の頂点を操作できる関数です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頂点モディファイアの使用方法は、使用するシェーダーのタイプによって異なります。このチュートリアルでは</font><font style="vertical-align: inherit;">、Unityで作成できるシェーダーのタイプの1つである、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surface Standard Shader</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を変更</font><font style="vertical-align: inherit;">します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3Dモデルの頂点を操作するには多くの方法があります。ほとんどの頂点シェーダーチュートリアルで説明されている最初の方法の1つは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線を押し出すこと</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。これは、各頂点を「</font><em><font style="vertical-align: inherit;">押し出す</font></em><font style="vertical-align: inherit;">」ことで構成されます（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">押し出し</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、3Dモデルの肥大化した外観を実現します。</font><font style="vertical-align: inherit;">「外側」とは、各頂点が法線の方向に沿って移動することを意味します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/275/3e4/fe3/2753e4fe3502d77d46d7205e1ec81809.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
滑らかなサーフェスの場合、これは非常にうまく機能しますが、頂点の接続が不十分なモデルでは、このメソッドは奇妙なアーティファクトを作成することがあります。</font><font style="vertical-align: inherit;">：この効果はよく私の最初のチュートリアルの1に説明されている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダにAジェントルはじめに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私がする方法を示しました、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">押し出し</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">侵入</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3Dモデル。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a8/668/0e5/5a86680e5ab92b536d4999e693aed8cb.gif" width="485" height="278"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
押し出された法線をサーフェスシェーダーに追加するのは非常に簡単です。</font><font style="vertical-align: inherit;">各サーフェスシェーダーには、</font></font><code>#pragma</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加の情報とコマンドを送信するために使用される</font><font style="vertical-align: inherit;">ディレクティブ</font><font style="vertical-align: inherit;">があります。</font><font style="vertical-align: inherit;">これらのコマンドの1つは</font><font style="vertical-align: inherit;">です。</font></font><code>vert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つまり、3Dモデルの各頂点を処理するために関数が使用されます</font></font><code>vert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
編集されたシェーダーは次のとおりです。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> surface surf Standard fullforwardshadows addshadow vertex:vert</span><font></font>
...<font></font>
<span class="hljs-keyword">float</span> _Amount;<font></font>
...<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{<font></font>
    v.vertex.xyz += v.normal * _Amount;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頂点の位置を変更しているので</font></font><code>addshadow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、モデルがそれ自体に影を正しく投影するようにしたい場合に</font><font style="vertical-align: inherit;">も、それを使用</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appdata_baseとは何ですか？</font></font></b><div class="spoiler_text"> ,      (<code>vert</code>),      <em></em>   <code>appdata_base</code>.         3D-.     <em> </em> (<code>v.vertex</code>),    ,  <em> </em> (<code>v.normal</code>)     <em>  </em> (<code>v.texcoord</code>).<br>
<br>
          ,  <em> </em> (<code>v.color</code>)  <em> </em> (<code>v.tangent</code>).          ,    <code>appdata_tan</code>  <code>appdata_full</code>,        .   <code>appdata</code> (  )    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener">Unity3D wiki</a>.</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値はどのようにして頂点から返されますか</font></font></b><div class="spoiler_text">     .      C#,   ,     ,     <code>v.vertex</code>      <code>v</code>,      .<br>
<br>
 <code>v</code>    <code>inout</code>,   ,      ,   .      ,     <code>vert</code>.   <code>inout</code>  <code>out</code>      ,       <code>ref</code>  <code>out</code>  C#.</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクスチャ付きの法線の押し出し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記で使用したコードは正しく動作しますが、達成したい効果にはほど遠いものです。その理由は、すべての頂点を同じ量だけ押し出したくないからです。 3Dモデルの表面を、対応する地理的領域の谷と山に一致させる必要があります。まず、どういうわけか、マップ上の各ポイントがどれだけ上昇したかに関する情報を格納および取得する必要があります。押し出しは、ランドスケープの高さがエンコードされているテクスチャの影響を受けます。このようなテクスチャは、しばしば「</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハイトマップ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">と呼ばれ</font><strong><font style="vertical-align: inherit;">ますが</font></strong><font style="vertical-align: inherit;">、「</font><strong><font style="vertical-align: inherit;">デプス</font></strong><strong><font style="vertical-align: inherit;">マップ</font></strong><font style="vertical-align: inherit;">」とも呼ばれ</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、状況に応じて。</font><font style="vertical-align: inherit;">高さに関する情報を受け取ったら、高さマップに基づいて平面の押し出しを変更できます。</font><font style="vertical-align: inherit;">図に示すように、これによりエリアの上げ下げを制御できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0f3/223/118/0f32231186763ee73f27bde4a1d2c5bf.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
興味のある地理的領域の衛星画像と関連する標高マップを見つけるのは非常に簡単です。</font><font style="vertical-align: inherit;">以下は、このチュートリアルで使用した火星の衛星マップ（上）と高度マップ（下）です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b80/468/176/b804681769208dfc72ec69441d9f0986.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/266/f0c/b59/266f0cb59bb01a7f875d3323d526372a.png"></div><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「内側から見たFacebookの3D写真：視差シェーダー」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
と呼ばれるチュートリアルの別のシリーズで、深度マップの概念について詳しく話しました</font><font style="vertical-align: inherit;">[ </font><font style="vertical-align: inherit;">Habréに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルでは、高さマップがグレースケールの画像として保存されていると仮定します。ここで、黒と白は高さの高低に対応しています。我々はまた、原寸に比例して、これらの値を必要とする</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直線</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">である、色差、例えば、</font></font><code>0.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">間の高さの差に対応</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、</font></font><code>0.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">又は間</font></font><code>0.9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及び</font></font><code>1.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。デプスマップの場合、デプス情報は</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">対数スケールで</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存されるため、これは常に正しいとは限りません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャをサンプリングするには、テクスチャ自体と</font><font style="vertical-align: inherit;">サンプリングしたいポイントの</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UV座標</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という2つの情報要素が必要です</font><font style="vertical-align: inherit;">。後者には</font></font><code>texcoord</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、構造体に格納され</font><font style="vertical-align: inherit;">ているフィールドを介してアクセスできます</font></font><code>appdata_base</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、処理中の現在の頂点に関連付けられたUV座標です。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーフェス関数</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でのテクスチャサンプリングは</font><font style="vertical-align: inherit;">を使用して実行され</font><em><font style="vertical-align: inherit;">ます</font></em><font style="vertical-align: inherit;">が</font></font><code>tex2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、にいるとき</font></font><code> </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は必要です</font></font><code>tex2Dlod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のコードスニペットでは、というテクスチャを</font></font><code>_HeightMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用して、各頂点に対して実行される押し出し値を変更しています。</font></font><br>
<br>
<pre><code class="cpp hljs">sampler2D _HeightMap;<font></font>
...<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{<font></font>
    fixed height = tex2Dlod(_HeightMap, float4(v.texcoord.xy, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)).r;<font></font>
    vertex.xyz += v.normal * height * _Amount;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tex2Dを頂点関数として使用できないのはなぜですか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unityが標準サーフェスシェーダー用に生成するコードを見ると、テクスチャをサンプリングする方法の例がすでに含まれていることがわかります。特に、</font><font style="vertical-align: inherit;">組み込み関数を使用</font><font style="vertical-align: inherit;">して、</font><em><font style="vertical-align: inherit;">表面関数</font></em><font style="vertical-align: inherit;">（と呼ばれる</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">の</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メインテクスチャ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（と呼ばれる</font></font><code>_MainTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">サンプリング</font><font style="vertical-align: inherit;">します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
実際には</font><font style="vertical-align: inherit;">、色や高さに関係なく、テクスチャからピクセルをサンプリングするために使用されます。ただし、</font><font style="vertical-align: inherit;">頂点関数では使用でき</font><font style="vertical-align: inherit;">ないことに気付くかもしれません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
その理由は、ある</font><em><font style="vertical-align: inherit;">だけでなく、</font></em></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><code>surf</code><font style="vertical-align: inherit;"></font><code>tex2D</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>tex2D</code><font style="vertical-align: inherit;"></font><code>tex2D</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>tex2D</code> <em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクスチャからピクセルを読み取ります。また、カメラまでの距離に応じて、使用するテクスチャのバージョンを決定します。この手法は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ミップマッピング</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。これにより、異なる距離で自動的に使用できる単一のテクスチャの小さいバージョンを作成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーフェス関数では、シェーダー</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用する</font><strong><font style="vertical-align: inherit;">MIPテクスチャを</font></strong><font style="vertical-align: inherit;">すでに認識してい</font><font style="vertical-align: inherit;">ます。この情報は頂点関数ではまだ利用</font></font><code>tex2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できない可能性があるため、確実に使用することはできません。それとは対照的に</font></font><code>tex2Dlod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、関数に2つの追加パラメーターを渡すことができます。このチュートリアルでは、このパラメーターはゼロの値を持つことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は下の画像ではっきりと確認できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a7/b64/0a6/5a7b640a60ca2ce42c9d4ee3f5c95150.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0b/dbf/dad/c0bdbfdadf38764dd3d75ffb69d07dea.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、1つのわずかな簡略化を行うことができます。</font><font style="vertical-align: inherit;">前にレビューしたコードは、どのジオメトリでも機能します。</font><font style="vertical-align: inherit;">ただし、表面は完全に平坦であると想定できます。</font><font style="vertical-align: inherit;">実際、この効果を飛行機に適用したいのです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、削除</font></font><code>v.normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して次のように置き換えること</font><font style="vertical-align: inherit;">ができます</font></font><code>float3(0, 1, 0)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{<font></font>
    float3 normal = float3(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<font></font>
<font></font>
    fixed height = tex2Dlod(_HeightMap, float4(v.texcoord.xy, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)).r;<font></font>
    vertex.xyz += normal * height * _Amount;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うことができるのは、のすべての座標</font></font><code>appdata_base</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデル空間に</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格納されている</font><strong><font style="vertical-align: inherit;">ためです</font></strong><font style="vertical-align: inherit;">。つまり</font><strong><font style="vertical-align: inherit;">、</font></strong><font style="vertical-align: inherit;">座標</font><font style="vertical-align: inherit;">は3Dモデルの中心と方向を基準にして設定されています。</font><font style="vertical-align: inherit;">Unity </font><font style="vertical-align: inherit;">での</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換による</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遷移、回転、スケーリング</font><font style="vertical-align: inherit;">は、オブジェクトの位置、回転、スケールを変更しますが、元の3Dモデルには影響しません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート2.スクロール効果</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記で行ったすべてがかなりうまくいきます。</font><font style="vertical-align: inherit;">先に進む前に、新しい頂点の高さを計算するために必要なコードを別の関数に抽出します</font></font><code>getVertex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">float4 <span class="hljs-title">getVertex</span><span class="hljs-params">(float4 vertex, float2 texcoord)</span>
</span>{<font></font>
    float3 normal = float3(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<font></font>
<font></font>
    fixed height = tex2Dlod(_HeightMap, float4(texcoord, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)).r;<font></font>
    vertex.xyz += normal * height * _Amount;<font></font>
    <span class="hljs-keyword">return</span> vertex;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、関数全体</font></font><code>vert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{<font></font>
    vertex = getVertex(v.vertex, v.texcoord.xy);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下でいくつかのポイントの高さを計算する必要があるため、これを行いました。</font><font style="vertical-align: inherit;">この機能は別の機能に含まれるため、コードははるかに単純になります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UV座標計算</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これにより別の問題が発生します。この関数</font></font><code>getVertex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、現在の頂点（v.vertex）の位置だけでなく、そのUV座標（</font></font><code>v.texcoord</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">も依存し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数が現在処理している頂点の高さオフセットを計算する場合</font></font><code>vert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、両方のデータ要素が構造体で使用できます</font></font><code>appdata_base</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。しかし、隣接するポイントの位置をサンプリングする必要がある場合はどうなりますか？この場合、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデル空間</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でのxyzの位置はわかり</font><font style="vertical-align: inherit;">ますが、そのUV座標にアクセスできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、既存のシステムが現在の頂点についてのみ高さオフセットを計算できることを意味します。このような制限により先に進むことができないため、解決策を見つける必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も簡単な方法は、頂点の位置を知っている3DオブジェクトのUV座標を計算する方法を見つけることです。</font><font style="vertical-align: inherit;">これは非常に難しい作業であり、解決するためのいくつかの手法があります（最も一般的なものの1つは3 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平面投影です</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">ただし、この特定のケースでは、UVをジオメトリと一致させる必要はありません。</font><font style="vertical-align: inherit;">シェーダーが常にフラットメッシュに適用されると仮定すると、タスクは簡単になります。</font><em><font style="vertical-align: inherit;">頂点</font></em><font style="vertical-align: inherit;">（上の画像）</font><font style="vertical-align: inherit;">の</font><em><font style="vertical-align: inherit;">位置</font></em><font style="vertical-align: inherit;">から</font><em><font style="vertical-align: inherit;">UV座標</font></em><font style="vertical-align: inherit;">（下の画像）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を計算できます</font><font style="vertical-align: inherit;">。これは、両方がフラットメッシュに線形に重ねられるためです。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/147/614/a7a/147614a7a05ba08700aef85be89f3a53.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02f/ff8/c42/02fff8c42dae9fa7de4f7e9598843afe.png" width="359" height="210"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、問題を解決するに</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></em> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、頂点位置の</font></font></em><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">コンポーネントXZを</font></em><font style="vertical-align: inherit;">対応する</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UV座標</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に変換する必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/48a/607/6b0/48a6076b06650e1074dd5b0f2f7ed023.png" width="363" height="393"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この手順は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">線形補間</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それは私のウェブサイトで詳細に議論されています（例：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色補間の秘密</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの場合、UV値は次の範囲です。</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-1">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 前 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-2">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">対照的に、各頂点の座標は潜在的に無制限です。</font><font style="vertical-align: inherit;">数学の観点からは、XZからUVへの変換では、限界値のみが必要です。</font></font><br>
<br>
<ul>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.153ex" height="2.259ex" viewBox="0 -755.5 2218.6 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-69" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6E" x="1224" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ん</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-3">X_{min}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.409ex" height="2.259ex" viewBox="0 -755.5 2328.9 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-78" x="1408" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-4">X_{max}</script></li>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.816ex" height="2.259ex" viewBox="0 -755.5 2073.6 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-5A" x="0" y="0"></use><g transform="translate(683,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-69" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6E" x="1224" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ん</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-5">Z_{min}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Z</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.072ex" height="2.259ex" viewBox="0 -755.5 2183.9 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-5A" x="0" y="0"></use><g transform="translate(683,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-78" x="1408" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-6">Z_{max}</script></li>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.816ex" height="2.259ex" viewBox="0 -755.5 2073.6 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use><g transform="translate(683,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-69" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6E" x="1224" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ん</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-7">U_{min}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.072ex" height="2.259ex" viewBox="0 -755.5 2183.9 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use><g transform="translate(683,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-78" x="1408" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-8">U_{max}</script></li>
<li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.584ex" height="2.259ex" viewBox="0 -755.5 1973.6 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-56" x="0" y="0"></use><g transform="translate(583,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-69" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6E" x="1224" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ん</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-9">V_{min}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.84ex" height="2.259ex" viewBox="0 -755.5 2083.9 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-56" x="0" y="0"></use><g transform="translate(583,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-78" x="1408" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-10">V_{max}</script></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下に示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/87a/520/05c/87a52005ccc02b02403068fd3e075864.png" width="359" height="210"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの値は、使用するメッシュによって異なります。</font><font style="vertical-align: inherit;">Unity平面では、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UV座標</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-11">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 前 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-12">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点の座標が</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">範囲内にあります</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mn>5</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.134ex" viewBox="0 -755.5 1279 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-35" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-13">-5</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 前 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mn>5</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.134ex" viewBox="0 -755.5 1279 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-35" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-14">+5</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
XZをUVに変換する方程式は次の形式になります：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（1）</font></font><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d2/e5c/a22/7d2e5ca229d8fc1c135aaa42e863fc9c.svg" alt="画像"></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらはどのように表示されますか？</font></font></b><div class="spoiler_text">     ,       .<br>
<br>
    .     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>U</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.783ex" height="2.152ex" viewBox="0 -801.6 767.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-15">U</script>.     :     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.153ex" height="2.438ex" viewBox="0 -801.6 2218.6 1049.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.576ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-69" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6E" x="1224" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ん</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-16">X_{min}</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.409ex" height="2.438ex" viewBox="0 -801.6 2328.9 1049.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.576ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-78" x="1408" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-17">X_{max}</script>,  —  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.816ex" height="2.438ex" viewBox="0 -801.6 2073.6 1049.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.576ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use><g transform="translate(683,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-69" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6E" x="1224" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ん</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-18">U_{min}</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.072ex" height="2.438ex" viewBox="0 -801.6 2183.9 1049.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.576ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use><g transform="translate(683,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-78" x="1408" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メートル</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-19">U_{max}</script>.     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.152ex" viewBox="0 -801.6 852.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-20">X</script>     ,      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>U</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.783ex" height="2.152ex" viewBox="0 -801.6 767.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-21">U</script>,    .<br>
<br>
      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.152ex" viewBox="0 -801.6 852.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-22">X</script>   ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>U</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.783ex" height="2.152ex" viewBox="0 -801.6 767.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-23">U</script>   . ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.152ex" viewBox="0 -801.6 852.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-24">X</script>   25%   ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>U</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.783ex" height="2.152ex" viewBox="0 -801.6 767.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-25">U</script>     25%   .<br>
<br>
     :<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/22a/784/da1/22a784da18e327b20b872699a901f0ec.png" width="292" height="202"></div><br>
    ,  ,       ,    ,        :<br>
<br>
(2) <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bcc/9e1/49e/bcc9e149ea65e83dd70345dd92784788.png" height="39" width="232"></div><br>
      ,   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>U</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.783ex" height="2.152ex" viewBox="0 -801.6 767.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-55" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-26">U</script>:<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/737/266/0fe/7372660fe877b0780e4cebc97a6f22f2.png" height="85" width="388"></div><br>
       ,     (1).</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの方程式は、次のようにコードで実装できます。</font></font><br>
<br>
<pre><code class="cpp hljs">float2 _VertexMin;<font></font>
float2 _VertexMax;<font></font>
float2 _UVMin;<font></font>
float2 _UVMax;<font></font>
<font></font>
<span class="hljs-function">float2 <span class="hljs-title">vertexToUV</span><span class="hljs-params">(float4 vertex)</span>
</span>{
    <span class="hljs-keyword">return</span><font></font>
        (vertex.xz - _VertexMin) / (_VertexMax - _VertexMin)<font></font>
        * (_UVMax - _UVMin) + _UVMin;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これ</font></font><code>getVertex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、渡さなくて</font><font style="vertical-align: inherit;">も関数</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">呼び出すことができます</font></font><code>v.texcoord</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">float4 <span class="hljs-title">getVertex</span><span class="hljs-params">(float4 vertex)</span>
</span>{<font></font>
    float3 normal = float3(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<font></font>
    float2 texcoord = vertexToUV(vertex);<font></font>
<font></font>
    fixed height = tex2Dlod(_HeightMap, float4(texcoord, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)).r;<font></font>
    vertex.xyz += normal * height * _Amount;<font></font>
    <span class="hljs-keyword">return</span> vertex;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、関数全体</font></font><code>vert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は次の形式になります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{<font></font>
    v.vertex = getVertex(v.vertex);<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクロール効果</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが書いたコードのおかげで、マップ全体がメッシュ上に表示されます。</font><font style="vertical-align: inherit;">表示を改善するには、変更を加える必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードをもう少し形式化しましょう。</font><font style="vertical-align: inherit;">まず、マップ全体を見るのではなく、マップの別の部分をズームインする必要があるかもしれません。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b5/1c3/bcd/0b51c3bcd59365527d3659564768b01b.png" width="530" height="309"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのサイズ（この領域は、2つの値によって規定することができる</font></font><code>_CropSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地図上の）と位置（</font></font><code>_CropOffset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で測定）、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点の空間</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（から</font></font><code>_VertexMin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font></font><code>_VertexMax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Cropping</span><font></font>
float2 _CropSize;<font></font>
float2 _CropOffset;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの2つの値を取得したら、もう一度線形補間を使用して</font></font><code>getVertex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、3Dモデルの上部の現在の位置ではなく、スケーリングされて転送されたポイントに対して呼び出される</font><font style="vertical-align: inherit;">ようにし</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0c/620/418/c0c620418088c383addcaa54328fe0fc.png" width="529" height="589"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関連コード：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{<font></font>
    float2 croppedMin = _CropOffset;<font></font>
    float2 croppedMax = croppedMin + _CropSize;<font></font>
<font></font>
    <span class="hljs-comment">// v.vertex.xz: [_VertexMin, _VertexMax]</span>
    <span class="hljs-comment">// cropped.xz : [croppedMin, croppedMax]</span><font></font>
    float4 cropped = v.vertex;<font></font>
    cropped.xz = (v.vertex.xz - _VertexMin) / (_VertexMax - _VertexMin)<font></font>
        * (croppedMax - croppedMin) + croppedMin;<font></font>
<font></font>
    v.vertex.y = getVertex(cropped);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクロールする場合は</font></font><code>_CropOffset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、スクリプトで</font><font style="vertical-align: inherit;">更新</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">だけで十分</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これにより、切り捨て領域が移動し、実際に横方向にスクロールします。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MoveMap</span> :</span> MonoBehaviour<font></font>
{<font></font>
    <span class="hljs-keyword">public</span> Material Material;
    <span class="hljs-keyword">public</span> Vector2 Speed;
    <span class="hljs-keyword">public</span> Vector2 Offset;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> CropOffsetID;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span>
    </span>{<font></font>
        CropOffsetID = Shader.PropertyToID(<span class="hljs-string">"_CropOffset"</span>);<font></font>
    }<font></font>
	<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span>
    </span>{<font></font>
        Material.SetVector(CropOffsetID, Speed * Time.time + Offset);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが機能するためには</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのテクスチャの</font><strong><font style="vertical-align: inherit;">Wrap Mode</font></strong><font style="vertical-align: inherit;">を</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repeat</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に設定することが非常に重要</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これを行わないと、テクスチャをループできなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
遠ざかる/近づく効果は、変えるだけで十分</font></font><code>_CropSize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート3.地形の陰影</font></font></h2><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラットシェーディング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが作成したコードはすべて機能しますが、深刻な問題があります。モデルのシェーディングがどういうわけか奇妙です。表面は適切に湾曲していますが、あたかも平らであるかのように光に反応します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは下の画像で非常にはっきりと見られます。上の画像は既存のシェーダーを示しています。一番下はそれが実際にどのように機能するかを示しています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0b/dbf/dad/c0bdbfdadf38764dd3d75ffb69d07dea.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/511/6a1/e02/5116a1e02debfaa58afe0cddf3b4c6c9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題を解決することは、大きな課題になる可能性があります。しかし、最初に、私たちは間違いが何であるかを理解する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常の押し出し操作により、最初に使用した平面の一般的なジオメトリが変更されました。ただし、Unityは頂点の位置のみを変更し、通常の方向は変更しませんでした。</font><font style="vertical-align: inherit;">頂点</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線の方向は、</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その名前が示すよう</font><font style="vertical-align: inherit;">に、サーフェスに垂直であることを示す</font><font style="vertical-align: inherit;">単位長ベクトル（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方向</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）です。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正常</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3Dモデルのシェーディングで重要な役割を果たすため、必要です。</font><font style="vertical-align: inherit;">これらはすべてのサーフェスシェーダーで使用され、3Dモデルの各三角形からの光の反射を計算します。</font><font style="vertical-align: inherit;">これは通常、モデルの3次元性を改善するために必要です。たとえば、曲面から跳ね返るように、光が平面から跳ね返ります。</font><font style="vertical-align: inherit;">このトリックは、低ポリゴンサーフェスを実際よりも滑らかに見せるためによく使用されます（以下を参照）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f6b/d7c/443/f6bd7c443381c1f0e133ee7b7bce05e1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私たちの場合、逆のことが起こります。</font><font style="vertical-align: inherit;">ジオメトリは曲線で滑らかですが、すべての法線が上を向いているため、光はモデルから平面のように反射されます（以下を参照）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/323/241/cde/323241cdef1b3a41604c579f4fdb509b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点法線の計算方法が異なるため、同じ3Dモデルにもかかわらず、同一の円柱が非常に異なって見える、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線マッピング（バンプマッピング）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
に関する記事で、オブジェクトシェーディングにおける法線の役割について詳しく読むことができます</font><font style="vertical-align: inherit;">（以下を参照）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b7/4fc/15f/1b74fc15f90516cc80b283953ef12373.png" width="315" height="243"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f93/544/d9c/f93544d9c95a70da71848897f0913676.png" width="347" height="254"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、Unityにも、シェーダーを作成するための言語にも、法線を自動的に変換するための組み込みのソリューションはありません。</font><font style="vertical-align: inherit;">つまり、3Dモデルのローカルジオメトリに応じて、手動で変更する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常の計算</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェーディングの問題を修正する唯一の方法は、サーフェスジオメトリに基づいて手動で法線を計算することです。同様の問題がポスト</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点ディスプレイスメント-メルティングシェーダーパート1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">説明されて</font><font style="vertical-align: inherit;">おり、ゲーム「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コーンウォーズ」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で3Dモデルの溶融をシミュレートするために使用されました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完成したコードは3D座標で機能する必要がありますが、ここでは、タスクを2次元のみに制限します。</font><font style="vertical-align: inherit;">2D曲線上の点（下図の大きな青い矢印）に対応する</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><strong><font style="vertical-align: inherit;">方向</font></strong><font style="vertical-align: inherit;">を計算する必要があると想像してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5a/405/6be/e5a4056be62b920d9721a84d7c050ee6.png" width="316" height="346"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幾何学的な観点から見る</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、法線</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><em><font style="vertical-align: inherit;">方向</font></em><font style="vertical-align: inherit;">（大きな青い矢印）は、対象</font><font style="vertical-align: inherit;">のポイントを通過する</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接線に</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直なベクトル</font><font style="vertical-align: inherit;">（細い青い線）です。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接線</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、モデルの曲率上にある線として表すことができます。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接線ベクトル</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font><strong><font style="vertical-align: inherit;">接線上</font></strong><font style="vertical-align: inherit;">にある</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単位ベクトル</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、法線を計算するには、2つの手順を実行する必要があります。最初</font><font style="vertical-align: inherit;">に、目的の点に</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接する</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">線を見つけます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、それに垂直なベクトルを計算します（これは</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線の</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要な</font><em><font style="vertical-align: inherit;">方向になります</font></em><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正接計算</font></font></h3><br><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を取得する</font><em><font style="vertical-align: inherit;">に</font></em><font style="vertical-align: inherit;">は、最初に</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接線</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を計算する必要があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは、近くの点をサンプリングし、それを使用して頂点の近くに線を作成することによって概算できます。</font><font style="vertical-align: inherit;">線が小さいほど、値は正確になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つのステップが必要です。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステージ1.平らな面で少し動かします</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ2.新しいポイントの高さを計算します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ3.現在のポイントの高さを使用して接線を計算する</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはすべて下の画像で確認できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46f/bd3/7e8/46fbd37e868d16ff7ec6f1a164377018.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを機能させるには、1点ではなく2点の高さを計算する必要があります。幸いなことに、これを行う方法はすでにわかっています。チュートリアルの前の部分で、メッシュポイントに基づいて風景の高さをサンプリングする関数を作成しました。私たちは彼女を呼んだ</font></font><code>getVertex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のポイントで新しい頂点値を取得し、次に2つの頂点値を取得できます。 1つは接線用、もう1つは2点の接線用です。彼らの助けを借りて、私たちは正常になります。ソースは、フラットの効果を作成するために使用され、メッシュた場合（だけでなく、我々の場合には、そこにあるので）、その後、我々はへのアクセスを必要としない</font></font><code>v.normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、と私たちはそれぞれ、2点の接線と接線を使用することができ、</font></font><code>float3(0, 0, 1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">かつ</font></font><code>float3(1, 0, 0)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同じことを行いたいが、たとえば球の場合、2つの点の接線と接線を計算するための2つの適切な点を見つけるのははるかに困難です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクターアートワーク</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
適切な接線と2点への接線ベクトルを取得したら、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトル積</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる演算を使用して法線を計算でき</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ベクトルの働きとその働きには多くの定義と説明があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベクトル積は2つのベクトルを受け取り、1つの新しいベクトルを返します。</font><font style="vertical-align: inherit;">2つの初期ベクトルがユニットであり（長さが1に等しい）、それらが90度の角度で配置されている場合、結果のベクトルは両方に対して90度に配置されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は混乱するかもしれませんが、グラフィカルに次のように表すことができます。2つの軸のベクトル積が3番目の軸を作成します。</font><font style="vertical-align: inherit;">つまり</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi><mo>&amp;#x00D7;</mo><mi>Y</mi><mo>=</mo><mi>Z</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.373ex" height="2.009ex" viewBox="0 -755.5 4896.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-D7" x="1074" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-59" x="2075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-3D" x="3116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-5A" x="4173" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-27">X \times Y = Z</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">だけでなく </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>X</mi><mo>&amp;#x00D7;</mo><mi>Z</mi><mo>=</mo><mi>Y</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.373ex" height="2.009ex" viewBox="0 -755.5 4896.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-58" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-D7" x="1074" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-5A" x="2075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMAIN-3D" x="3076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/462153/&amp;usg=ALkJrhjA0N7mfwLQHEEKTSonRd_tHpdtFg#MJMATHI-59" x="4133" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バツ</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">×</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-28">X \times Z = Y</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、など </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
十分に小さいステップを実行する場合（これはコードにあります</font></font><code>offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、2点への接線と接線のベクトルは90度の角度になります。</font><font style="vertical-align: inherit;">法線ベクトルとともに、これらはモデルの表面に沿って方向付けられた3つの垂直軸を形成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを知っていれば、法線ベクトルを計算して更新するために必要なすべてのコードを書くことができます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{<font></font>
    float3 bitangent = float3(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
    float3 tangent   = float3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<font></font>
<font></font>
    <span class="hljs-keyword">float</span> offset = <span class="hljs-number">0.01</span>;<font></font>
<font></font>
    float4 vertexBitangent = getVertex(v.vertex + float4(bitangent * offset, <span class="hljs-number">0</span>) );<font></font>
    float4 vertex          = getVertex(v.vertex);<font></font>
    float4 vertexTangent   = getVertex(v.vertex + float4(tangent   * offset, <span class="hljs-number">0</span>) );<font></font>
<font></font>
    float3 newBitangent = (vertexBitangent - vertex).xyz;<font></font>
    float3 newTangent   = (vertexTangent   - vertex).xyz;<font></font>
<font></font>
    v.normal = cross(newTangent, newBitangent);<font></font>
    v.vertex.y = vertex.y;<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてを一緒に入れて</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが機能しているので、スクロール効果を返すことができます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vert</span><span class="hljs-params">(inout appdata_base v)</span>
</span>{
    <span class="hljs-comment">// v.vertex.xz: [_VertexMin, _VertexMax]</span>
    <span class="hljs-comment">// cropped.xz : [croppedMin, croppedMax]</span><font></font>
    float2 croppedMin = _CropOffset;<font></font>
    float2 croppedMax = croppedMin + _CropSize;<font></font>
<font></font>
    float4 cropped = v.vertex;<font></font>
    cropped.xz = (v.vertex.xz - _VertexMin) / (_VertexMax - _VertexMin)<font></font>
        * (croppedMax - croppedMin) + croppedMin;<font></font>
<font></font>
    float3 bitangent = float3(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
    float3 normal    = float3(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<font></font>
    float3 tangent   = float3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<font></font>
<font></font>
    <span class="hljs-keyword">float</span> offset = <span class="hljs-number">0.01</span>;<font></font>
			<font></font>
    float4 vertexBitangent = getVertex(cropped + float4(bitangent * offset, <span class="hljs-number">0</span>) );<font></font>
    float4 vertex          = getVertex(cropped);<font></font>
    float4 vertexTangent   = getVertex(cropped + float4(tangent   * offset, <span class="hljs-number">0</span>) );<font></font>
<font></font>
    float3 newBitangent = (vertexBitangent - vertex).xyz;<font></font>
    float3 newTangent   = (vertexTangent   - vertex).xyz;<font></font>
<font></font>
    v.normal = cross(newTangent, newBitangent);<font></font>
    v.vertex.y = vertex.y;<font></font>
    v.texcoord = float4(vertexToUV(cropped), <span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これで私たちの効果がついに完成しました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d9/b07/680/0d9b0768068b2329d53e22a71ff27dfb.gif" width="700" height="272"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次はどこへ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルは、ホログラフィックプロジェクションや</font><font style="vertical-align: inherit;">映画「ブラックパンサー」の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂の表の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コピーなど、より複雑なエフェクトの基礎になる可能性があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ecS1_-Y_uP8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unityパッケージ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルの完全なパッケージは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patreon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">ダウンロードできます。パッケージには</font><font style="vertical-align: inherit;">、説明されている効果を再生するために必要なすべてのアセットが含まれています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja462141/index.html">データセンター用カート</a></li>
<li><a href="../ja462145/index.html">登録解除に数日かかるのはなぜですか？</a></li>
<li><a href="../ja462147/index.html">React Nativeでレガシープロジェクトをリファクタリングするときのナビゲーションの操作</a></li>
<li><a href="../ja462149/index.html">iOSデバイスのアクセサリのアクセス制限モードとそれをバイパスする方法</a></li>
<li><a href="../ja462151/index.html">Kubernetesディストリビューションのトップ5</a></li>
<li><a href="../ja462155/index.html">「可能な限り」ではなく、「希望どおりに」ワーカーと作業する</a></li>
<li><a href="../ja462159/index.html">GolangとOpenCVに基づく顔認識システムの構築</a></li>
<li><a href="../ja462161/index.html">Windows 10にApache Airflowをインストールした経験</a></li>
<li><a href="../ja462163/index.html">2020年に普及する技術</a></li>
<li><a href="../ja462165/index.html">存在しないゲーム会社で働くために25人が騙された方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>