<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞üèΩ üéè üöâ La douleur et la souffrance lors du d√©bogage des microservices dans le d√©veloppement Web üëçüèª üôçüèø üëéüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En informatique, vous voyez rarement une personne qui n'a pas entendu parler des microservices. Il existe de nombreux articles sur Internet et sur des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>La douleur et la souffrance lors du d√©bogage des microservices dans le d√©veloppement Web</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489912/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En informatique, vous voyez rarement une personne qui n'a pas entendu parler des microservices. Il existe de nombreux articles sur Internet et sur des sites sp√©cialis√©s √† ce sujet qui expliquent g√©n√©ralement bien les diff√©rences entre le monolithe et, en fait, les microservices. Un d√©veloppeur Java inexp√©riment√©, ayant lu des articles de la cat√©gorie ¬´Que sont les microservices pour les applications Web et ce avec quoi ils mangent¬ª, est plein de joie et de confiance que maintenant tout sera merveilleux. Apr√®s tout, l'objectif principal est de ¬´voir √† travers¬ª le monolithe monstrueux (l'artefact final, qui, en r√®gle g√©n√©rale, est un fichier de guerre / oreille), qui effectue un tas de tout, sur un certain nombre de services vivants s√©par√©ment, chacun remplissant une fonction strictement d√©finie qui ne lui est li√©e, et le fera bien. En plus de cela vient une √©volutivit√© horizontale - il suffit de faire une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mise √† l'√©chelle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n≈ìuds correspondants, et tout ira bien. </font><font style="vertical-align: inherit;">Plus d'utilisateurs sont arriv√©s ou plus de capacit√©s sont n√©cessaires - il suffit d'ajouter 5 √† 10 nouvelles instances de service. </font><font style="vertical-align: inherit;">En gros, en g√©n√©ral, c'est ainsi que cela fonctionne, mais, comme vous le savez, le diable est dans les d√©tails, et ce qui semblait initialement assez simple, √† y regarder de plus pr√®s, peut se transformer en probl√®mes que personne n'a pris en compte au d√©part. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, des coll√®gues de la pratique Java de Rexoft partagent leurs exp√©riences sur la fa√ßon de d√©boguer des microservices pour le Web.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/ls/xd/silsxdh5v-rwgybittlu4bvbcz0.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment atteindre l'int√©grit√© des donn√©es transactionnelles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsqu'elles tentent de transf√©rer l'architecture d'un monolithe vers des microservices, les √©quipes qui n'avaient pas une telle exp√©rience auparavant commencent souvent √† diviser les services en objets de premier niveau du mod√®le de domaine, par exemple: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilisateur / client / employ√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. √Ä l'avenir, avec une √©tude plus d√©taill√©e, la compr√©hension appara√Æt, ce qui est plus pratique pour se diviser en blocs plus grands qui regroupent plusieurs objets du domaine en eux-m√™mes. Pour cette raison, vous pouvez √©viter les appels inutiles vers des services tiers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me point important est la prise en charge de l'int√©grit√© des donn√©es transactionnelles. Dans le monolithe, ce probl√®me est r√©solu via le serveur d'applications, o√π la guerre / l'oreille tourne, √† l'int√©rieur de laquelle le conteneur, en fait, d√©finit les limites des transactions. Dans le cas des microservices, les limites des transactions sont floues et il est n√©cessaire, en plus d'√©crire du code logique m√©tier, de pouvoir g√©rer l'int√©grit√© des donn√©es et maintenir leur coh√©rence entre les diff√©rentes parties du syst√®me. C'est une t√¢che assez non triviale. Des recommandations pour r√©soudre ce type de probl√®me architectural peuvent √™tre trouv√©es sur Internet et dans les communaut√©s techniques concern√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous essaierons de d√©crire les difficult√©s techniques sp√©cifiques qui surviennent lorsque les √©quipes essaient de travailler avec des microservices et les moyens de les r√©soudre. Je constate tout de suite que les options propos√©es ne sont pas les seules vraies. Il existe peut-√™tre des services plus √©l√©gants, mais les recommandations que je donnerai sont test√©es dans la pratique et r√©solvent pr√©cis√©ment les difficult√©s existantes, et leur utilisation est une affaire personnelle pour tous. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principal probl√®me avec les microservices est qu'ils sont extr√™mement faciles √† ex√©cuter localement (par exemple, en utilisant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spring.io</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intellij idea</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cela peut √™tre fait en seulement 5 minutes, voire moins). Cependant, lorsque vous essayez de faire de m√™me dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le cluster (si vous en aviez peu d'exp√©rience auparavant), un simple lancement du contr√¥leur imprimant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´Hello World¬ª</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lors de l'acc√®s √† un point de terminaison sp√©cifique peut prendre une demi-journ√©e. </font><font style="vertical-align: inherit;">Dans le cas d'un monolithe, la situation est plus simple. </font><font style="vertical-align: inherit;">Chaque d√©veloppeur dispose d'un serveur d'applications local. </font><font style="vertical-align: inherit;">Le processus de d√©ploiement est √©galement assez simple - vous devez copier </font><font style="vertical-align: inherit;">manuellement l' </font><font style="vertical-align: inherit;">artefact final de guerre / oreille au bon endroit dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serveur d'applications</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou √† l'aide de l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EDI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ce n'est g√©n√©ralement pas un probl√®me.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©bogage des nuances</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me point important est le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©bogage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans les situations avec un monolithe, on suppose que le d√©veloppeur a un serveur d'applications sur sa machine, sur lequel sa </font><b><font style="vertical-align: inherit;">guerre / oreille est</font></b><font style="vertical-align: inherit;"> d√©ploy√©e</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Vous pouvez toujours d√©boguer, car tout ce dont vous avez besoin est √† port√©e de main. Avec les microservices, tout est un peu plus compliqu√©, un service est g√©n√©ralement une chose en soi. En r√®gle g√©n√©rale, il a son propre sch√©ma de base de donn√©es, dans lequel ses donn√©es sont situ√©es, ex√©cute des fonctions sp√©cifiques qui lui sont propres, toutes les communications avec d'autres services sont organis√©es via des appels HTTP synchrones (par exemple via RestTemplate ou Feign), asynchrones (par exemple Kafka ou RabbitMQ). Par cons√©quent, la t√¢che essentiellement simple de sauvegarder ou de valider un certain objet qui a √©t√© pr√©c√©demment impl√©ment√© en un seul endroit, √† l'int√©rieur d'un seul fichier war / ear, dans le cas g√©n√©ral avec une approche microservice, devient repr√©sentable sous la forme: aller √† un ou N services adjacents, que ce soit des op√©rations d'acquisition de donn√©es , par exemple, certaines valeurs de r√©f√©rence, ou l'op√©ration d'enregistrement des entit√©s adjacentes,dont les donn√©es sont n√©cessaires pour ex√©cuter la logique m√©tier dans notre service. L'√©criture de la logique m√©tier dans ce cas devient beaucoup plus difficile.</font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En cons√©quence, les options de solution sont les suivantes</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âcrivez votre code de logique m√©tier. </font><font style="vertical-align: inherit;">Dans le m√™me temps, tous les appels externes sont </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moqu√©s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - les contrats externes sont √©mul√©s, les tests sont √©crits sous l'hypoth√®se que les contrats externes sont exactement comme √ßa, apr√®s quoi il y a un d√©ploiement sur le circuit pour v√©rification. </font><font style="vertical-align: inherit;">Parfois, c'est chanceux et l'int√©gration fonctionne tout de suite, parfois c'est malchanceux - vous devez refaire le code de logique m√©tier une ni√®me fois, car pendant le temps que nous avons impl√©ment√© la fonctionnalit√©, le code dans le service adjacent a √©t√© mis √† jour, les signatures d'API ont chang√© et nous devons le refaire une partie de la t√¢che est de son c√¥t√©.</font></font></li>
<li>     <b></b>.     ,  ,         <b>Kubernetes</b>, . .  ,       ‚Äî     ,     <b>remote debug</b>  .      ,     <b>runtime</b> ,   ,    . -,      ,          2‚Äì5 , . .         ,  <b>Kubernetes</b> ,        . -,           (<b>Per thread</b>),    ,      .</li>
</ol><br>
<h2>     Kubernetes</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, une solution √† ce probl√®me est la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√©l√©pr√©sence</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il existe probablement d'autres programmes de ce type, mais l'exp√©rience personnelle n'a √©t√© qu'avec lui et il s'est √©tabli positivement. </font><font style="vertical-align: inherit;">En g√©n√©ral, le principe de fonctionnement est le suivant: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la machine locale, le d√©veloppeur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installe telepresenc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, configure </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kubectl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour acc√©der au cluster Kubernetes correspondant (ajoute la configuration de boucle √† </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ / .kube / config</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Apr√®s cela, la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√©l√©pr√©sence</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d√©marre </font><font style="vertical-align: inherit;">, qui agit en fait comme un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proxy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entre l'ordinateur du d√©veloppeur local et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il existe diff√©rentes options de lancement, il est pr√©f√©rable de regarder plus en d√©tail dans le guide officiel, mais dans le cas le plus basique cela se r√©sume √† deux √©tapes:</font></font><br>
<br>
<ol>
<li><b>Sudo telepresence</b> (,     Linux-  ,     sudo  .  ,        root/).          Kubernetes    deployment   <b>telepresence</b>  .  deployment          Kubernetes.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le d√©marrage de votre instance de service s'effectue comme d'habitude sur l'ordinateur local du d√©veloppeur. </font><font style="vertical-align: inherit;">Cependant, dans ce cas, il aura acc√®s √† l'ensemble de l'infrastructure du cluster Kubernetes, que ce soit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Discovery (Eureka, Consul), Api Gateway (Zuul), Kafka</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et ses files d'attente, le cas √©ch√©ant, etc. </font><font style="vertical-align: inherit;">Autrement dit, nous avons acc√®s √† tout l'environnement de cluster dont nous avons besoin, mais localement. </font><font style="vertical-align: inherit;">Le bonus est la possibilit√© de d√©bogage local, mais dans un environnement de cluster, et ce sera d√©j√† beaucoup plus rapide, car nous sommes en fait √† l'int√©rieur de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (via le tunnel), et </font><font style="vertical-align: inherit;">n'y </font><b><font style="vertical-align: inherit;">acc√©dons</font></b><font style="vertical-align: inherit;"> pas de l'ext√©rieur via le port pour le d√©bogage √† distance.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette solution pr√©sente plusieurs inconv√©nients:</font></font><br>
<br>
<ol>
<li><b>Telepresence</b>    Linux  Mac,   Windows     VFS,  ,  issue  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">GitHub</a>.          .   ,    - Linux/Mac,      .</li>
<li>      ,      <b>Service Discovery (Eureka, Consul) </b>      ‚Äî                 <b>Round Robin</b>  ,         endpoint  ,  ,   ,    : </li>
</ol><br>
<ul>
<li>       kubernetes -&gt;   .   <b>telepresence</b>      deployment  ,      ¬´¬ª     Eureka   <b>ip-address:port/service-name</b>  <b>dns-name:port/service-name</b>    ,  . .   Kubernetes        ,      timeout;</li>
<li>      deployment     -  Kubernetes    , <b> </b>      (   )           (Round Robin),    ;</li>
<li>  endpoint,      <b>feature</b>,     HTTP 404    endpoint  <b>Gateway</b>,          <b>Service Discovery</b>     ,    <b>Round Robin</b> .         Service Discovery  endpoint  ,    HTTP 404.</li>
<li> ,    ,        <b> </b> .</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par routage dynamique d'une demande, nous entendons que la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passerelle API (Zuul)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a la possibilit√© de choisir parmi plusieurs instances du m√™me service dont nous avons besoin. Dans le cas g√©n√©ral, ce probl√®me peut √™tre r√©solu en ajoutant un pr√©dicat qui vous permet de s√©lectionner le service souhait√© dans le pool de services communs avec le m√™me nom au stade du traitement de la demande. Naturellement, chaque service parmi ceux avec lesquels nous voulons pouvoir router dynamiquement, devra avoir une sorte de m√©ta-information contenant des donn√©es qui seront utilis√©es pour d√©terminer si ce service est n√©cessaire ou non. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring Cloud</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dans le cas d'Eureka), par exemple, vous permet de le faire en sp√©cifiant dans un bloc de m√©tadonn√©es sp√©cial dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application.yml</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">eureka:<font></font>
  instance:<font></font>
    preferIpAddress: true<font></font>
    metadata-map:<font></font>
      service.label: develop</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir enregistr√© un tel service dans Service Discovery dans son </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com.netflix.appinfo.InstanceInfo # getMetadata, il y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aura une √©tiquette avec la cl√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">service.label</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et la valeur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">develop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui peut √™tre obtenue au moment de l'ex√©cution. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un point important au stade du d√©marrage d'un service consiste √† v√©rifier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si une instance de service existe dans Service Discovery avec de telles m√©ta-informations ou non afin d'√©viter les collisions potentielles.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options de routage</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, la solution du probl√®me peut √™tre r√©duite √† deux options:</font></font><br>
<br>
<ol>
<li>API Gateway        .         , ,          , ,  Headers: <b>DestionationService: feature/PRJ-001</b>.     ,       ,           Header        .       ,         ‚Äî - API Gateway.</li>
<li>  API Gateway,        , . ., ,    ,     <b>Zuul 1</b>    endpoint-  <b>/api/users/</b>‚Ä¶       user,      <b>feature/PRJ-001</b>,    <b>Zuul 2</b>    endpoint- <b> /api/users/</b>‚Ä¶       user,      <b>feature/PRJ-002</b>.       ,         N API Gateway  N , . .        , . .   feature ‚Äî ,  ,  ,             ,    ,     ,        .          <b>API Gateway</b>, , . .,  ,   ,     ‚Äî   ,     .</li>
</ol><br>
<img src="https://habrastorage.org/webt/si/ls/xd/silsxdh5v-rwgybittlu4bvbcz0.png"><br>
<br>
<i>   </i><br>
<br>
<h2>       </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cadre de l'API Gateway, il est √©galement utile de fournir un m√©canisme qui vous permet de modifier les r√®gles de routage lors de l'ex√©cution. Il est pr√©f√©rable de placer ces param√®tres dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">config-map</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans ce cas, il suffira de r√©√©crire les nouvelles routes et soit de red√©marrer l'API de passerelle dans Kubernetes pour mettre √† jour le routage, soit d'utiliser le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring Boot Actuator</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (√† condition qu'il existe une d√©pendance correspondante dans l'API de passerelle) - appelez endpoint / refresh, qui relit essentiellement donn√©es de config-map et mettra √† jour les itin√©raires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un point important est qu'il devrait y avoir, relativement parlant, une instance de r√©f√©rence du service (par exemple, impression de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©velopper</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui sera collect√© aupr√®s de la branche principale du d√©veloppement du service) et d'une API de passerelle principale distincte, qui sera toujours sp√©cifi√©e dans les param√®tres d'acc√®s au service. En substance, nous nous fournissons un </font><font style="vertical-align: inherit;">environnement de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transfert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ind√©pendant </font><font style="vertical-align: inherit;">qui sera toujours op√©rationnel dans le contexte du routage dynamique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple de bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">config-map</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour l'API Gateway qui contient des param√®tres de routage (ici, c'est juste un exemple de son apparence, pour un fonctionnement correct, il n√©cessite une liaison correspondante sous forme de code sur le c√¥t√© backend du service </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API Gateway)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">{<font></font>
  "kind": "ConfigMap",<font></font>
  "apiVersion": "v1",<font></font>
  "metadata": {<font></font>
    ...<font></font>
  },  <font></font>
"data": {<font></font>
    ...        <font></font>
    "rules.meta.user": "develop",<font></font>
    "rules.meta.client": "develop",<font></font>
    "rules.meta.notification": "feature/PRJ-010",<font></font>
    ...    <font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rules.meta</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une carte contenant des r√®gles de routage pour les services. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilisateur / client / notification</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - le nom du service sous lequel il est enregistr√© dans Eureka. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">develop / feature / PRJ-010</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - √©tiquette de service √† partir du </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier application.yml du</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> service correspondant, sur la base de laquelle le service souhait√© sera s√©lectionn√© parmi tous les services disponibles portant le m√™me nom dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Discovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , s'il existe plusieurs instances d'un tel service.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme tout dans ce monde, les outils et solutions informatiques ne sont pas parfaits. </font><font style="vertical-align: inherit;">Ne pensez pas que si vous modifiez l'architecture, tous les probl√®mes se termineront en m√™me temps. </font><font style="vertical-align: inherit;">Seule une immersion d√©taill√©e dans les technologies utilis√©es et votre propre exp√©rience vous donneront une image r√©elle de ce qui se passe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'esp√®re que ce mat√©riel vous aidera √† r√©soudre votre probl√®me. </font><font style="vertical-align: inherit;">T√¢ches int√©ressantes et vendez sans bugs!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489898/index.html">Un autre article sur wc</a></li>
<li><a href="../fr489900/index.html">PostgreSQL Antipatterns: modification des donn√©es en contournant un d√©clencheur</a></li>
<li><a href="../fr489902/index.html">Comment mesurer l'efficacit√© d'un portefeuille d'investissement: 3 approches pratiques</a></li>
<li><a href="../fr489904/index.html">Pourquoi et comment testons-nous la mise √† jour</a></li>
<li><a href="../fr489906/index.html">Cabine d'essayage virtuelle en OpenCV</a></li>
<li><a href="../fr489914/index.html">Clustering dans Proxmox VE</a></li>
<li><a href="../fr489916/index.html">Protocole de communication frontal structur√© Protobuf ou JSON?</a></li>
<li><a href="../fr489918/index.html">Comment nous avons mis en ≈ìuvre le projet de carte carburant virtuelle</a></li>
<li><a href="../fr489920/index.html">Sites, passez √† IPv6, deux</a></li>
<li><a href="../fr489924/index.html">O√π commence Elasticsearch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>