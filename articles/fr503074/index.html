<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèº üë©üèø‚ÄçüöÄ üé† D√©tails sur le package de fournisseur pour Flutter ü•Ö üë©üèø‚Äçüé® üçî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 
 
 Nos plans √† moyen terme incluent la sortie du livre Flutter. En ce qui concerne le langage de Dart en tant que sujet, nous adoptons...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>D√©tails sur le package de fournisseur pour Flutter</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/503074/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos plans √† moyen terme incluent la sortie du livre Flutter. </font><font style="vertical-align: inherit;">En ce qui concerne le langage de Dart en tant que sujet, nous adoptons toujours une position plus prudente, nous allons donc essayer d'√©valuer sa pertinence en fonction des r√©sultats de cet article. </font><font style="vertical-align: inherit;">Il se concentrera sur le package </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provider</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et, par cons√©quent, sur la gestion des √©tats dans Flutter.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le fournisseur est un progiciel de gestion de l'√©tat √©crit par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remy Rusle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et adopt√© par Google et la communaut√© Flutter. </font><font style="vertical-align: inherit;">Mais qu'est-ce que la gestion de l'√âtat? </font><font style="vertical-align: inherit;">Pour commencer, qu'est-ce qu'une condition? </font><font style="vertical-align: inherit;">Permettez-moi de vous rappeler que l'√©tat n'est que des donn√©es pour repr√©senter l'interface utilisateur dans votre application. </font><font style="vertical-align: inherit;">La gestion des √©tats est une approche pour cr√©er ces donn√©es, y acc√©der, les manipuler et les √©liminer. </font><font style="vertical-align: inherit;">Pour mieux comprendre le package Provider, nous d√©crivons bri√®vement l'historique de la gestion des √©tats dans Flutter.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. StatefulWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatelessWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un simple composant d'interface utilisateur qui s'affiche uniquement lorsqu'il contient des donn√©es. Il n'y a </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pas de ¬´m√©moire¬ª; il est cr√©√© et d√©truit si n√©cessaire. Flutter a √©galement un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatefulWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dans lequel il y a une m√©moire, gr√¢ce √† lui un satellite √† longue dur√©e de vie - l'objet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Cette classe a une m√©thode </font></font><code>setState()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, lorsqu'elle est appel√©e, un widget est lanc√© qui reconstruit l'√©tat et l'affiche sous une nouvelle forme. Il s'agit de la forme la plus simple de gestion de l'√©tat Flutter fournie d√®s le d√©part. Voici un exemple avec un bouton qui affiche toujours l'heure de la derni√®re pression:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyWidgetState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyWidget</span>&gt; </span>{
  <span class="hljs-built_in">DateTime</span> _time = <span class="hljs-built_in">DateTime</span>.now();  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(_time.toString()),<font></font>
      onPressed: () {<font></font>
        setState(() =&gt; _time = <span class="hljs-built_in">DateTime</span>.now());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quel est donc le probl√®me avec cette approche? </font><font style="vertical-align: inherit;">Supposons que votre application ait un √©tat global stock√© dans la racine </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il contient des donn√©es destin√©es √† √™tre utilis√©es dans diverses parties de l'interface utilisateur. </font><font style="vertical-align: inherit;">Ces donn√©es sont partag√©es et transmises √† chaque widget enfant sous forme de param√®tres. </font><font style="vertical-align: inherit;">Tout √©v√©nement au cours duquel il est pr√©vu de modifier ces donn√©es s'affiche alors sous la forme de rappels. </font><font style="vertical-align: inherit;">Ainsi, √† travers tous les widgets interm√©diaires, un grand nombre de param√®tres et de rappels sont transmis, ce qui peut rapidement conduire √† la confusion. </font><font style="vertical-align: inherit;">Pire encore, toute mise √† jour de la racine susmentionn√©e entra√Ænera une reconstruction de l'arborescence enti√®re du widget, ce qui est inefficace.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. InheritedWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InheritedWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un widget sp√©cial dont les descendants peuvent y acc√©der sans lien direct. </font><font style="vertical-align: inherit;">Juste en se tournant vers </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, un widget consommateur peut s'inscrire pour une reconstruction automatique, qui se produira lors de la reconstruction d'un widget anc√™tre. </font><font style="vertical-align: inherit;">Cette technique vous permet d'organiser plus efficacement la mise √† jour de l'interface utilisateur. </font><font style="vertical-align: inherit;">Au lieu de reconstruire d'√©normes morceaux de l'application en r√©ponse √† un petit changement d'√©tat, vous ne pouvez s√©lectionner s√©lectivement que les widgets sp√©cifiques qui doivent √™tre reconstruits. </font><font style="vertical-align: inherit;">Vous avez d√©j√† travaill√© avec </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaque fois que vous avez utilis√© </font></font><code>MediaQuery.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>Theme.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Certes, il est moins probable que vous ayez impl√©ment√© votre propre InheritedWidget avec conservation de l'√©tat. </font><font style="vertical-align: inherit;">Le fait est que leur mise en ≈ìuvre correcte n'est pas facile.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ScopedModel</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un package cr√©√© en 2017 par Brian Egan, qui le rend facile √† utiliser </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour stocker l'√©tat de l'application. </font><font style="vertical-align: inherit;">Vous devez d'abord cr√©er un objet d'√©tat qui h√©rite de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis l'appeler </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lorsque ses propri√©t√©s changent. </font><font style="vertical-align: inherit;">La situation n'est pas sans rappeler l'impl√©mentation de l'interface </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PropertyChangeListener</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en Java.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{<font></font>
  String _foo;  String get foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> set <span class="hljs-title">foo</span><span class="hljs-params">(String value)</span> </span>{<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour fournir notre objet d'√©tat, nous enveloppons cet objet dans un widget </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† la racine de notre application:</font></font><br>
<br>
<pre><code class="java hljs">ScopedModel&lt;MyModel&gt;(<font></font>
  model: MyModel(),<font></font>
  child: MyApp(...)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√©sormais, tous les widgets descendants pourront acc√©der </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† l'aide du widget </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModelDescendant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">L'instance de mod√®le est pass√©e au param√®tre </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> ScopedModelDescendant&lt;MyModel&gt;(<font></font>
      builder: (context, child, model) =&gt; Text(model.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout widget descendant pourra √©galement mettre √† jour le mod√®le, ce qui provoquera automatiquement une reconstruction de tout </font></font><code>ScopedModelDescendants</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(√† condition que notre mod√®le appelle correctement </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = ScopedModel.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a gagn√© en popularit√© dans Flutter en tant qu'outil de gestion des √©tats, mais son utilisation est limit√©e √† la fourniture d'objets qui h√©ritent de la classe </font></font><code>Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et utilisent ce mod√®le de notification des modifications.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. BLoC</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la conf√©rence </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google I / O '18</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le </font><font style="vertical-align: inherit;">mod√®le </font><font style="vertical-align: inherit;">BLoC ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Business Logic Component</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) a </font><font style="vertical-align: inherit;">√©t√© introduit </font><font style="vertical-align: inherit;">, qui constitue un autre outil pour extraire l'√©tat des widgets. Les classes BLoC sont des composants non UI √† longue dur√©e de vie qui pr√©servent l'√©tat et l'exposent en tant que flux et r√©cepteurs. En prenant la logique d'√©tat et d'entreprise au-del√† de l'interface utilisateur, vous pouvez impl√©menter le widget de mani√®re simple </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et utiliser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamBuilder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour la reconstruction automatique. En cons√©quence, le widget "devient stupide", et il devient plus facile √† tester. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemple de classe BLoC:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBloc</span> </span>{
  <span class="hljs-keyword">final</span> _controller = StreamController&lt;MyType&gt;();  Stream&lt;MyType&gt; <span class="hljs-keyword">get</span> stream =&gt; _controller.stream;<font></font>
  StreamSink&lt;MyType&gt; <span class="hljs-keyword">get</span> sink =&gt; _controller.sink;<font></font>
  <font></font>
  myMethod() {<font></font>
    <span class="hljs-comment">//  </span><font></font>
    sink.add(foo);<font></font>
  }  dispose() {<font></font>
    _controller.close();<font></font>
  }<font></font>
}<font></font>
 ,   BLoC:<font></font>
<span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
 <span class="hljs-keyword">return</span> StreamBuilder&lt;MyType&gt;(<font></font>
  stream: myBloc.stream,<font></font>
  builder: (context, asyncSnapshot) {<font></font>
    <span class="hljs-comment">//  </span><font></font>
 });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le probl√®me avec le mod√®le BLoC est qu'il n'est pas √©vident de cr√©er et de d√©truire des objets BLoC. </font><font style="vertical-align: inherit;">Comment l'instance a-t-elle √©t√© cr√©√©e </font></font><code>myBloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans l'exemple ci-dessus? </font><font style="vertical-align: inherit;">Comment appelons-nous </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour nous d√©barrasser de lui? </font><font style="vertical-align: inherit;">Les flux n√©cessitent une utilisation </font></font><code>StreamController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ce qui devrait √™tre </font></font><code>closed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√®s qu'elle devient inutile - cela est fait pour √©viter les fuites de m√©moire. </font><font style="vertical-align: inherit;">(Il n'y a pas une </font><font style="vertical-align: inherit;">telle chose comme destructor de classe √† Dart, seule une classe </font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a une m√©thode </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">De plus, il n'est pas clair comment partager ce BLoC entre plusieurs widgets. </font><font style="vertical-align: inherit;">Il est souvent difficile pour les d√©veloppeurs de ma√Ætriser BLoC. </font><font style="vertical-align: inherit;">Il existe plusieurs packages qui tentent de simplifier cela.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Fournisseur</font></font></h4><br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est un package √©crit en 2018 par Remy Rusle, similaire √† </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais dont les fonctions ne sont pas limit√©es √†, fournissant une sous-classe de Model. C'est √©galement un wrapper qui conclut </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais le fournisseur peut fournir tous les objets d'√©tat, y compris BLoC, les flux, les futurs et autres. √âtant donn√© que le fournisseur est si simple et flexible, Google a annonc√© lors de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conf√©rence Google I / O '19</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qu'√† l'avenir, il </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serait le package pr√©f√©r√© pour la gestion de l'√©tat. Bien s√ªr, d'autres packages sont √©galement autoris√©s, mais si vous avez des doutes, Google recommande de s'arr√™ter √† </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">construit "avec des widgets, pour des widgets."</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous permet de placer n'importe quel objet avec un √©tat dans l'arborescence des widgets et d'ouvrir l'acc√®s √† celui-ci pour tout autre widget (enfant). </font><font style="vertical-align: inherit;">Il </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permet </font><font style="vertical-align: inherit;">√©galement de </font><font style="vertical-align: inherit;">g√©rer la dur√©e de vie des objets d'√©tat en les initialisant avec des donn√©es et en effectuant un nettoyage apr√®s leur suppression de l'arborescence des widgets. </font><font style="vertical-align: inherit;">Par cons√©quent, il </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">convient m√™me pour la mise en ≈ìuvre de composants BLoC ou peut servir de base √† d'autres solutions de gestion d'√©tat! </font><font style="vertical-align: inherit;">Ou tout simplement utilis√© pour </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impl√©menter des d√©pendances</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un terme sophistiqu√© qui signifie transf√©rer des donn√©es vers des widgets d'une mani√®re qui vous permet de rel√¢cher la connexion et d'am√©liorer la testabilit√© du code. </font><font style="vertical-align: inherit;">Finalement,</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est livr√© avec un ensemble de classes sp√©cialis√©es, gr√¢ce auxquelles il est encore plus pratique √† utiliser. </font><font style="vertical-align: inherit;">Ensuite, nous examinerons de plus pr√®s chacune de ces classes.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fournisseur de base</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Futureprovider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxyprovider</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'utiliser </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ajoutez d'abord une d√©pendance √† notre fichier </font></font><code>pubspec.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<code>provider: ^3.0.0</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous importons le paquet </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l√† o√π il est n√©cessaire: </font></font><br>
<br>
<code>import 'package:provider/provider.dart';</code><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fournisseur de base</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cr√©ez la base </font></font><code>Provide</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r √† la racine de notre application; </font><font style="vertical-align: inherit;">cela contiendra une instance de notre mod√®le:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le param√®tre </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr√©e une instance </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si vous souhaitez lui passer une instance existante, utilisez le constructeur ici </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Provider.value</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, vous pouvez consommer cette instance du mod√®le n'importe o√π dans </font></font><code>MyApp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en utilisant le widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;MyModel&gt;(<font></font>
      builder: (context, value, child) =&gt; Text(value.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'exemple ci-dessus, la classe </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obtient une instance </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† l'aide du widget </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consommateur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ce widget nous donne </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contenant notre objet dans le param√®tre </font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, que devons-nous faire si nous voulons mettre √† jour les donn√©es de notre mod√®le? Disons que nous avons un autre widget o√π, lorsqu'un bouton est cliqu√©, la propri√©t√© doit √™tre mise √† jour </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez la syntaxe sp√©cifique utilis√©e pour acc√©der √† l'instance </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Fonctionnellement, cela √©quivaut √† acc√©der au widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Le widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est utile dans les cas o√π le code ne peut pas facilement obtenir le lien </font></font><code>BuildContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que pensez-vous qu'il adviendra du widget original </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que nous avons cr√©√© plus t√¥t? Une nouvelle signification y sera-t-elle affich√©e </font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Malheureusement non</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il n'est pas possible d'√©couter les changements dans les anciens objets Dart traditionnels (au moins sans r√©flexion, ce qui n'est pas fourni dans Flutter). Ainsi, </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il ne pourra pas ¬´voir¬ª que nous avons correctement mis √† jour la propri√©t√© </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et ordonn√© la </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mise √† jour </font><font style="vertical-align: inherit;">du widget </font><font style="vertical-align: inherit;">en r√©ponse. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il y a de l'espoir! </font><font style="vertical-align: inherit;">Vous pouvez faire en sorte que notre classe </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impl√©mente une impuret√© </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il faudra un peu pour changer l'impl√©mentation de notre mod√®le et appeler une m√©thode sp√©ciale </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaque fois que l'une de nos propri√©t√©s change. </font><font style="vertical-align: inherit;">Cela fonctionne √† peu pr√®s de la m√™me mani√®re </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais dans ce cas, il est bien que vous n'ayez pas besoin d'h√©riter d'une classe particuli√®re du mod√®le. </font><font style="vertical-align: inherit;">Il suffit de r√©aliser le m√©lange </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Voici √† quoi √ßa ressemble:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-title">with</span> <span class="hljs-title">ChangeNotifier</span> </span>{
  <span class="hljs-built_in">String</span> _foo;  <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-keyword">void</span> <span class="hljs-keyword">set</span> foo(<span class="hljs-built_in">String</span> value) {<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, nous avons remplac√© notre propri√©t√© </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par </font></font><code>getter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>setter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, soutenu par la variable priv√©e _foo. </font><font style="vertical-align: inherit;">De cette fa√ßon, nous pouvons ¬´intercepter¬ª toutes les modifications apport√©es √† la propri√©t√© foo et faire savoir √† nos auditeurs que notre objet a chang√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, de l'ext√©rieur </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nous pouvons changer notre impl√©mentation afin qu'elle utilise une classe diff√©rente appel√©e </font></font><code> ChangeNotifierProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs">ChangeNotifierProvider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme √ßa! </font><font style="vertical-align: inherit;">Maintenant, lorsque notre </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">met √† jour la propri√©t√© </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans l'instance </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, elle </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sera automatiquement mise √† jour pour refl√©ter ce changement. </font><font style="vertical-align: inherit;">Cool, non? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fait. </font><font style="vertical-align: inherit;">Vous avez probablement remarqu√© un gestionnaire de boutons </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec lequel nous avons utilis√© la syntaxe suivante:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par d√©faut, cette syntaxe entra√Ænera automatiquement la reconstruction de l'instance </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√®s que le mod√®le changera </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Peut-√™tre que nous n'en avons pas besoin. </font><font style="vertical-align: inherit;">En fin de compte, il </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contient simplement un bouton qui ne change pas du tout lorsque la valeur change </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pour √©viter la reconstruction, vous pouvez utiliser la syntaxe suivante pour acc√©der √† notre mod√®le sans vous inscrire √† la reconstruction:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context, listen: <span class="hljs-keyword">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est un autre charme fourni dans le package </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">juste comme √ßa. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
√Ä premi√®re vue, il n'est pas clair pourquoi il est n√©cessaire </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En fin de compte, vous pouvez simplement utiliser l'habituel </font></font><code>StreamBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si vous avez besoin de consommer un flux dans Flutter. </font><font style="vertical-align: inherit;">Par exemple, nous √©coutons ici le flux </font></font><code>onAuthStateChanged</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fourni par </font></font><code>FirebaseAuth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context {<font></font>
  <span class="hljs-keyword">return</span> StreamBuilder(<font></font>
   stream: FirebaseAuth.instance.onAuthStateChanged, <font></font>
   builder: (BuildContext context, AsyncSnapshot snapshot){ <font></font>
     ...<font></font>
   });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour faire de m√™me avec de l'aide </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nous pourrions fournir notre flux </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† la racine de notre application:</font></font><br>
<br>
<pre><code class="dart hljs">StreamProvider&lt;FirebaseUser&gt;.value(<font></font>
  stream: FirebaseAuth.instance.onAuthStateChanged,<font></font>
  child: MyApp(...),<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consommez ensuite le widget enfant, comme c'est g√©n√©ralement le cas avec </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
  <span class="hljs-keyword">return</span> Consumer&lt;FirebaseUser&gt;(<font></font>
    builder: (context, value, child) =&gt; Text(value.displayName),<font></font>
  );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non seulement notre code de widget est devenu beaucoup plus propre, mais il fait √©galement abstraction du fait que les donn√©es proviennent du flux. Si nous d√©cidons de changer l'impl√©mentation de base, par exemple en </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, alors aucune modification du code du widget ne sera n√©cessaire. Comme vous le verrez, cela s'applique √† tous les autres fournisseurs indiqu√©s ci-dessous. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FutureProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Similaire √† l'exemple ci-dessus, c'est </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une alternative √† la norme </font></font><code> FutureBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lorsque vous travaillez avec des widgets. Voici un exemple:</font></font><br>
<br>
<pre><code class="plaintext hljs">FutureProvider&lt;FirebaseUser&gt;.value(<font></font>
  value: FirebaseAuth.instance.currentUser(),<font></font>
  child: MyApp(...),<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour consommer cette valeur dans le widget enfant, nous utilisons la m√™me impl√©mentation </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que dans l'exemple </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ci-dessus. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider </font></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une interface Dart impl√©ment√©e par la classe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueNotifier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui prend une valeur et avertit les √©couteurs lorsqu'elle passe √† une autre valeur. </font><font style="vertical-align: inherit;">Il est possible, par exemple, d'encapsuler un compteur entier dans une classe de mod√®le simple:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> </span>{
  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">int</span>&gt; counter = ValueNotifier(<span class="hljs-number">0</span>);  <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous travaillez avec des types complexes, il </font></font><code>ValueNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilise l'op√©rateur de l' </font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet qui y est stock√© pour d√©terminer si la valeur a chang√©. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ons le plus simple </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui contiendra notre mod√®le principal, et il sera suivi d'une </font><font style="vertical-align: inherit;">propri√©t√© d'√©coute </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imbriqu√©e </font><font style="vertical-align: inherit;">:</font></font><code>ValueListenableProvider</code><font style="vertical-align: inherit;"></font><code>counter</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: Consumer&lt;MyModel&gt;(builder: (context, value, child) {<font></font>
    <span class="hljs-keyword">return</span> ValueListenableProvider&lt;<span class="hljs-built_in">int</span>&gt;.value(<font></font>
      value: value.counter,<font></font>
      child: MyApp(...)<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que ce fournisseur imbriqu√© est de type </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il peut y en avoir d'autres. </font><font style="vertical-align: inherit;">Si vous avez plusieurs fournisseurs du m√™me type enregistr√©s, le fournisseur retournera le ¬´plus proche¬ª (anc√™tre le plus proche). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici comment √©couter une propri√©t√© √† </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir de n'importe quel widget enfant:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;<span class="hljs-built_in">int</span>&gt;(<font></font>
      builder: (context, value, child) {<font></font>
        <span class="hljs-keyword">return</span> Text(value.toString());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais voici comment mettre √† jour une propri√©t√© √† </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir d'un autre widget. </font><font style="vertical-align: inherit;">Veuillez noter: nous devons avoir acc√®s √† la copie originale </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.counter.value++;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si vous utilisez de nombreux widgets</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, √† la racine de l'application, vous obtenez une structure laide √† partir de nombreuses pi√®ces jointes:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;Foo&gt;.value( <font></font>
  value: foo, <font></font>
  child: Provider&lt;Bar&gt;.value( <font></font>
    value: bar, <font></font>
    child: Provider&lt;Baz&gt;.value( <font></font>
      value: baz , <font></font>
      child: MyApp(...)<font></font>
    ) <font></font>
  ) <font></font>
)</code></pre><br>
<code>MultiProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous permet de les d√©clarer tous au m√™me niveau. </font><font style="vertical-align: inherit;">C'est juste du sucre syntaxique: au niveau intra-syst√®me, ils restent tous imbriqu√©s de toute fa√ßon.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt;.value(value: foo), <font></font>
    Provider&lt;Bar&gt;.value(value: bar), <font></font>
    Provider&lt;Baz&gt;.value(value: baz), <font></font>
  ], <font></font>
  child: MyApp(...), <font></font>
)<font></font>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxyProvider</font></font></i></a><br>
<br>
<code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une classe int√©ressante ajout√©e dans la troisi√®me version du package</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il vous permet de d√©clarer des fournisseurs qui eux-m√™mes peuvent d√©pendre d'autres fournisseurs, jusqu'√† six sur un. </font><font style="vertical-align: inherit;">Dans cet exemple, la classe Bar est sp√©cifique √† l'instance</font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cela est utile lors de la compilation d'un ensemble racine de services qui d√©pendent eux-m√™mes les uns des autres.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider ( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt; ( <font></font>
      builder: (context) =&gt; Foo(),<font></font>
    ), <font></font>
    ProxyProvider&lt;Foo, Bar&gt;(<font></font>
      builder: (context, value, previous) =&gt; Bar(value),<font></font>
    ), <font></font>
  ], <font></font>
  child: MyApp(...),<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier argument de type g√©n√©rique est le type dont d√©pend le v√¥tre </font></font><code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et le second est le type qu'il renvoie.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment √©couter de nombreux fournisseurs en m√™me temps</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et si nous voulons qu'un seul widget √©coute de nombreux fournisseurs et se reconstruise lorsque l'un d'eux change? </font><font style="vertical-align: inherit;">Vous pouvez √©couter jusqu'√† 6 fournisseurs en m√™me temps √† l'aide des options de widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nous recevrons des instances en tant que param√®tres de m√©thode suppl√©mentaires </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs">Consumer2&lt;MyModel, <span class="hljs-built_in">int</span>&gt;(<font></font>
  builder: (context, value, value2, child) {<font></font>
    <span class="hljs-comment">//value  MyModel</span>
    <span class="hljs-comment">//value2  int</span><font></font>
  },<font></font>
);</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsqu'il est utilis√©, </font></font><code>InheritedWidget</code> <code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il </font><font style="vertical-align: inherit;">vous </font><font style="vertical-align: inherit;">permet de g√©rer l'√©tat comme il est de coutume dans Flutter. </font><font style="vertical-align: inherit;">Il permet aux widgets d'acc√©der aux objets d'√©tat et de les √©couter de mani√®re √† ce que le m√©canisme de notification sous-jacent soit abstrait. </font><font style="vertical-align: inherit;">Il est plus facile de g√©rer la dur√©e de vie des objets d'√©tat en cr√©ant des points d'ancrage pour cr√©er ces objets selon vos besoins et vous en d√©barrasser en cas de besoin. </font><font style="vertical-align: inherit;">Ce m√©canisme peut √™tre utilis√© pour impl√©menter facilement des d√©pendances et m√™me comme base pour des options de gestion d'√©tat plus avanc√©es. </font><font style="vertical-align: inherit;">Avec la b√©n√©diction de Google et le soutien croissant de la communaut√© Flutter, c'est </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devenu un package √† essayer sans tarder!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503062/index.html">Le co√ªt r√©el de la vie dans la Silicon Valley pour le d√©veloppeur</a></li>
<li><a href="../fr503064/index.html">IoT o√π vous n'avez pas attendu (partie 3). Construire un mod√®le de simulation</a></li>
<li><a href="../fr503068/index.html">Au carrefour de la technologie et des affaires: les leaders informatiques ouvrent une nouvelle universit√© en Suisse</a></li>
<li><a href="../fr503070/index.html">Mug √©lectrique. Construire un scooter √©lectrique / v√©lo √©lectrique fou</a></li>
<li><a href="../fr503072/index.html">Juste un autre outil: apprendre √† conna√Ætre la configuration du service avec la configuration de l'√©tat souhait√©¬†</a></li>
<li><a href="../fr503082/index.html">T√©l√©gramme en tant que NAS / FTP</a></li>
<li><a href="../fr503084/index.html">Revue des cours de l'Acad√©mie Lightbend - Architecture r√©active</a></li>
<li><a href="../fr503086/index.html">Les services de transcription en ligne sont-ils s√©curis√©s et confidentiels?</a></li>
<li><a href="../fr503088/index.html">Comment nous avons s√©lectionn√© le fret pour les transporteurs</a></li>
<li><a href="../fr503096/index.html">Pourquoi les gestionnaires veulent-ils que les travailleurs recyclent?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>