<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪 ⛹🏽 🕵🏾 ReactとNode.jsを使用して動的PDFを作成する 🧡 😦 👨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今日私たちが公開している翻訳は、HTMLコードをテンプレートとして使用して動的PDFファイルを作成することを目的としています。つまり、特定の商品やサービスの支払いに関する簡単な請求書を作成する方法について説明します。その中に含まれる動的データは、Reactアプリケーションの状態から取得されます。Re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ReactとNode.jsを使用して動的PDFを作成する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460018/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日私たちが公開している翻訳は、HTMLコードをテンプレートとして使用して動的PDFファイルを作成することを目的としています。</font><font style="vertical-align: inherit;">つまり、特定の商品やサービスの支払いに関する簡単な請求書を作成する方法について説明します。その中に含まれる動的データは、Reactアプリケーションの状態から取得されます。</font><font style="vertical-align: inherit;">Reactアプリケーションのベースはcreate-react-appを使用して作成され、プロジェクトのサーバー部分はNode.jsに基づいており、その開発にはExpressフレームワークが使用されました。</font><font style="vertical-align: inherit;">
この資料の作成者</font><font style="vertical-align: inherit;">は、プロジェクトの開発を示す</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ビデオ</font></a><font style="vertical-align: inherit;">を用意したと述べて</font><font style="vertical-align: inherit;">います。</font><font style="vertical-align: inherit;">ビデオを見て記事を読むことにした場合は、そうすることをお勧めします。</font><font style="vertical-align: inherit;">まず、記事をざっと読み、次にビデオをオンにして、そこで検討しているシステムを再作成します。</font><font style="vertical-align: inherit;">その後、記事を読んでください。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/qg/wj/qh/qgwjqhns2f1dddj3euztydtdl_y.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトの作成</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトディレクトリを作成し、そこに移動します。</font></font><br>
<br>
<pre><code class="plaintext hljs">mkdir pdfGenerator &amp;&amp; cd pdfGenerator</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいReactアプリケーションを作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">create-react-app client</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションの作成が完了したら、作成したディレクトリに移動して、依存関係をインストールします。</font></font><br>
<br>
<pre><code class="plaintext hljs">cd client &amp;&amp; npm i -S axios file-saver</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Expressサーバーを作成しましょう。</font><font style="vertical-align: inherit;">これを行うには、プロジェクトディレクトリにフォルダーを作成し、</font></font><code>server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そこに移動します。</font><font style="vertical-align: inherit;">その中で、ファイル</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成し</font><font style="vertical-align: inherit;">、プロジェクトの初期化を実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">mkdir server &amp;&amp; cd server &amp;&amp; touch index.js &amp;&amp; npm init</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、フォームを作成するには</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、数回クリックします</font></font><code>Enter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その後、次のコマンドを実行して、プロジェクトのサーバー部分に必要な依存関係を追加します。</font></font><br>
<br>
<pre><code class="plaintext hljs">npm i -S express body-parser cors html-pdf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで</font></font><code>client/package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、依存関係の説明セクションの上</font><font style="vertical-align: inherit;">にあるファイル</font><font style="vertical-align: inherit;">に、以下を追加します。</font></font><br>
<br>
<pre><code class="plaintext hljs">"proxy": "http://localhost:5000/"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、クライアントコードからローカルサーバーを操作するのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ターミナルの2つのウィンドウを開く必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のウィンドウで、ディレクトリに移動し</font></font><code>client</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">npm start</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のウィンドウで、フォルダーに移動し</font></font><code>server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">nodemon index.js</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアントの初期設定</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトのクライアント部分は非常にシンプルに見えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず</font></font><code>src/App.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、アプリケーションのクライアント部分の</font><font style="vertical-align: inherit;">ファイルで</font><font style="vertical-align: inherit;">、依存関係コードにインポートします。</font></font><br>
<br>
<pre><code class="plaintext hljs">import axios from 'axios';<font></font>
import { saveAs } from 'file-saver';</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、コンポーネントの説明の上部で、状態を初期化します。</font></font><br>
<br>
<pre><code class="plaintext hljs">state = {<font></font>
&nbsp;&nbsp;&nbsp;name: 'Adrian',<font></font>
&nbsp;&nbsp;&nbsp;receiptId: 0,<font></font>
&nbsp;&nbsp;&nbsp;price1: 0,<font></font>
&nbsp;&nbsp;&nbsp;price2: 0,<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションテンプレートで作成され</font></font><code>create-react-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メソッドから返された</font><font style="vertical-align: inherit;">標準のJSXマークアップを削除してみましょう</font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下を挿入してください：</font></font><br>
<br>
<pre><code class="plaintext hljs">&lt;div className="App"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&lt;input&nbsp;<font></font>
type="text" placeholder="Name" name="name" onChange {this.handleChange}/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&lt;input&nbsp;<font></font>
type="number" placeholder="Receipt ID" name="receiptId"&nbsp; &nbsp; onChange={this.handleChange}/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&lt;input&nbsp;<font></font>
type="number" placeholder="Price 1" name="price1" onChange={this.handleChange}/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&lt;input&nbsp;<font></font>
type="number" placeholder="Price 2" name="price2" onChange={this.handleChange}/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&lt;button&nbsp;<font></font>
onClick={this.createAndDownloadPdf}&gt;Download PDF&lt;/button&gt;&lt;/div&gt;</code></pre><br><font style="vertical-align: inherit;"></font><code>handleChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力フィールドに関連するアプリケーション状態データの更新を担当</font><font style="vertical-align: inherit;">
するメソッド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="plaintext hljs">handleChange = ({ target: { value, name }}) =&gt; this.setState({ [name]: value })</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、PDFファイルを作成するタスクに進みます。</font><font style="vertical-align: inherit;">クライアントによって解決されるその部分は、サーバーへのPOST要求を作成することです。</font><font style="vertical-align: inherit;">リクエストはアプリケーションの状態を送信します：</font></font><br>
<br>
<pre><code class="plaintext hljs">createAndDownloadPdf = () =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;axios.post('/create-pdf',&nbsp;<font></font>
this.state)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトのクライアント側で作業を続ける前に、サーバーでルートを構成する必要があります。</font><font style="vertical-align: inherit;">これにより、サーバーはクライアントからデータを受信し、PDFファイルを生成して、このファイルをクライアントに転送できます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーの初期設定</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトのサーバー部分には2つのルートのみが含まれます。</font><font style="vertical-align: inherit;">PDFを作成するには1つ必要です。</font><font style="vertical-align: inherit;">2つ目は、クライアントにファイルを送信するためのものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存関係</font><font style="vertical-align: inherit;">をファイルにインポートします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">const express = require('express');<font></font>
const bodyParser = require('body-parser');<font></font>
const pdf = require('html-pdf');<font></font>
const cors = require('cors');</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Expressアプリケーションを初期化し、ポートを構成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">const app = express();<font></font>
const port = process.env.PORT || 5000;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クエリパーサーを設定します。</font><font style="vertical-align: inherit;">必要なものはとして利用できます</font></font><code>req.body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、エラーによって作業が妨げられないようにCORSを構成します</font></font><code>Cross-Origin Request Blocked</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">app.use(cors());<font></font>
app.use(bodyParser.urlencoded({ extended: true }));<font></font>
app.use(bodyParser.json());</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、サーバーを起動します。</font></font><br>
<br>
<pre><code class="plaintext hljs">app.listen(port, () =&gt; console.log(`Listening on port ${port}`));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、PDFの作成を担当するコードに取り組むことができます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PDFのHTMLテンプレートを作成する</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PDFファイルを作成するときに使用されるHTMLテンプレートが必要です。</font><font style="vertical-align: inherit;">そのようなテンプレートを作成することで、無限の可能性が私たちの前に開かれます。</font><font style="vertical-align: inherit;">純粋なHTMLとCSSを使用して作成できるものはすべて、PDFファイルとして表すことができます。</font></font><code>server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリ</font></font><code>documents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">フォルダを作成し、その</font><font style="vertical-align: inherit;">中に移動してファイルを作成します</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">mkdir documents &amp;&amp; cd documents &amp;&amp; touch index.js</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このファイルから、必要なすべてのHTMLコードを返す矢印関数をエクスポートします。</font><font style="vertical-align: inherit;">この関数を呼び出すとき、ここでも説明するパラメータを使用できます。</font></font><br>
<br>
<pre><code class="plaintext hljs">module.exports = ({ name, price1, price2, receiptId }) =&gt; { ... }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HTMLテンプレートの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">例を</font></a><font style="vertical-align: inherit;">紹介します。プロジェクトにコピーするだけです。</font><font style="vertical-align: inherit;">ただし、もちろん、独自のテンプレートを作成することもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をフォルダー</font></font><code>server/documents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から次のフォームに移動します。</font></font><br>
<br>
<pre><code class="plaintext hljs">module.exports = ({ name, price1, price2, receiptId }) =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;const today = new Date();<font></font>
return `<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;!doctype html&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;html&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset="utf-8"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;PDF Result Template&lt;/title&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max-width: 800px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin: auto;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding: 30px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border: 1px solid #eee;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box-shadow: 0 0 10px rgba(0, 0, 0, .15);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size: 16px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height: 24px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family: 'Helvetica Neue', 'Helvetica',<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color: #555;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.margin-top {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin-top: 50px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.justify-center {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align: center;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: 100%;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height: inherit;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align: left;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding: 5px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vertical-align: top;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr td:nth-child(2) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align: right;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.top table td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding-bottom: 20px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.top table td.title {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size: 45px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height: 45px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color: #333;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.information table td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding-bottom: 40px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.heading td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background: #eee;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-bottom: 1px solid #ddd;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-weight: bold;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.details td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding-bottom: 20px;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.item td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-bottom: 1px solid #eee;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.item.last td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-bottom: none;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.total td:nth-child(2) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-top: 2px solid #eee;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-weight: bold;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@media only screen and (max-width: 600px) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.top table td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: 100%;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display: block;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align: center;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.invoice-box table tr.information table td {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width: 100%;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display: block;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align: center;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="invoice-box"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table cellpadding="0" cellspacing="0"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr class="top"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td colspan="2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td class="title"&gt;&lt;img&nbsp; src="https://i2.wp.com/cleverlogos.co/wp-content/uploads/2018/05/reciepthound_1.jpg?fit=800%2C600&amp;ssl=1"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style="width:100%; max-width:156px;"&gt;&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Datum: ${`${today.getDate()}. ${today.getMonth() + 1}. ${today.getFullYear()}.`}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr class="information"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td colspan="2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Customer name: ${name}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receipt number: ${receiptId}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr class="heading"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Bought items:&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Price&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr class="item"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;First item:&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;${price1}$&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr class="item"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Second item:&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;${price2}$&lt;/td&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br /&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1 class="justify-center"&gt;Total price: ${parseInt(price1) + parseInt(price2)}$&lt;/h1&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/html&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;`;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このファイルをファイルに含めます</font></font><code>server/index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">const pdfTemplate = require('./documents');</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PDFを作成する</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバー上で2つのルートを作成することを思い出してください。</font><font style="vertical-align: inherit;">POSTルートは、クライアントからのデータの受信とPDFファイルの作成を担当します。</font><font style="vertical-align: inherit;">GETルートは、完成したファイルをクライアントに送信するために使用されます。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍create-pdfルート</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
POSTルートで</font></font><code>create-pdf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>pdf.create()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、モジュールからインポートされたオブジェクトを参照する</font><font style="vertical-align: inherit;">コマンドを使用</font><font style="vertical-align: inherit;">します</font></font><code>html-pdf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">HTMLテンプレートは</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、メソッドの最初のパラメータとして</font></font><code>pdf.create()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用さ</font><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">、クライアントから受信したデータも同様です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を返すために</font></font><code>pdf.create()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メソッドを呼び出し</font></font><code>toFile()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て、PDFドキュメントに割り当てる名前と矢印のコールバック関数を渡します。</font><font style="vertical-align: inherit;">この関数は、エラーが発生した場合にコマンドを実行し</font></font><code>res.send(Promise.reject())</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">すべてがうまくいった場合、彼女はコマンドを実行し</font></font><code>res.send(Promise.resolve())</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="plaintext hljs">app.post('/create-pdf', (req, res) =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;pdf.create(pdfTemplate(req.body), {}).toFile('result.pdf', (err) =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(err) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.send(Promise.reject());<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.send(Promise.resolve());<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
});</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Fetch-pdfルート</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、クライアントの要求に応じてPDFファイルが正常に作成された後に使用されるルートを作成します。</font><font style="vertical-align: inherit;">ここでは、完成したドキュメントを取得し、それを使用してクライアントに送信します</font></font><code>res.sendFile()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">app.get('/fetch-pdf', (req, res) =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.sendFile(`${__dirname}/result.pdf`)<font></font>
})</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアント関数createAndDownloadPdf</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、クライアントコードに戻り、関数の作業を続けることができます</font></font><code>createAndDownloadPdf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ここでは、モジュールを使用してサーバーへのPOSTリクエストを実行します</font></font><code>axios</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この関数は次のようになります。</font></font><br>
<br>
<pre><code class="plaintext hljs">createAndDownloadPdf = () =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;axios.post('/create-pdf',&nbsp;<font></font>
this.state)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーへのPOSTリクエストの実行後にPDFドキュメントが作成された場合、サーバーが完成したドキュメントをクライアントに送信するために、GETリクエストを実行する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この動作パターンを実装するには</font></font><code>axios.post()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、呼び出しの</font><font style="vertical-align: inherit;">後、呼び出し</font><font style="vertical-align: inherit;">ます。</font></font><code>then()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これにより、クライアントのPOSTリクエストに応じてそれを行うことができ、サーバーから正常に解決または拒否できるプロミスを返します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコードで関数を補足します。</font></font><br>
<br>
<pre><code class="plaintext hljs">.then(() =&gt; axios.get('/fetch-pdf', { responseType: 'blob' }))<font></font>
.then((<font></font>
res) =&gt; {})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、として</font></font><code>responseType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用さ</font><font style="vertical-align: inherit;">れているものに注意を払うことができます</font></font><code>blob</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">先に進む前に、それが何であるかについて話しましょう。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blobオブジェクト</font></font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blob</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、未加工のデータを表す不変オブジェクトです。</font><font style="vertical-align: inherit;">このようなオブジェクトは、ネイティブJavaScript形式ではない可能性があるデータを操作するためによく使用されます。</font><font style="vertical-align: inherit;">このようなオブジェクトは、たとえばファイルデータを格納するバイトのシーケンスです。</font><font style="vertical-align: inherit;">オブジェクト</font></font><code>Blob</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がファイルへのリンクを格納して</font><font style="vertical-align: inherit;">いるように見えるかもしれ</font><font style="vertical-align: inherit;">ませんが、実際にはそうではありません。</font><font style="vertical-align: inherit;">これらのオブジェクトには、操作可能なデータが格納されています。</font><font style="vertical-align: inherit;">たとえば、ファイルに保存できます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト完了</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オブジェクトが何であるかがわかった</font><font style="vertical-align: inherit;">ので</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">それ</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">基づい</font><font style="vertical-align: inherit;">て新しい</font><font style="vertical-align: inherit;">オブジェクトを</font><font style="vertical-align: inherit;">作成することにより</font></font><code>Blob</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、別の課題を利用できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このオブジェクトを作成するときは、コンストラクターにパラメーターを渡し、オブジェクトが格納するデータのタイプがであることを示します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その後</font><font style="vertical-align: inherit;">、モジュールからインポートされた</font><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">、データをファイルに保存できます。</font><font style="vertical-align: inherit;">その結果、メソッドコード</font><font style="vertical-align: inherit;">は次のようになります。</font></font><code>.then()</code><font style="vertical-align: inherit;"></font><code>res.data</code><font style="vertical-align: inherit;"></font><code>Blob</code><font style="vertical-align: inherit;"></font><code>application/pdf</code><font style="vertical-align: inherit;"></font><code>saveAs()</code><font style="vertical-align: inherit;"></font><code>file-saver</code><font style="vertical-align: inherit;"></font><code>createAndDowndloadPdf</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs">&nbsp;&nbsp;createAndDownloadPdf = () =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;axios.post('/create-pdf', this.state)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(() =&gt; axios.get('fetch-pdf', { responseType: 'blob' }))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then((res) =&gt; {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const pdfBlob = new Blob([res.data], { type: 'application/pdf' });<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;saveAs(pdfBlob, 'newPdf.pdf');<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<font></font>
&nbsp;&nbsp;}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがブラウザのインターフェースです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f4/17c/b9d/9f417cb9dccdd8c80850227f92ce8eb8.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザでのアプリケーション</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
フィールドに入力してボタンをクリックすると</font></font><code>Download PDF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、データがサーバーに転送され、そこからPDFドキュメントがダウンロードされます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d8b/b1c/bad/d8bb1cbad063cb4dcd7e29d98fdae264.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PDF文書をダウンロードしてください</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PDF文書自体はこちらです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/346/de7/ff4/346de7ff4724d15f6723fed6093a44d3.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェアで生成されたPDF</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムでPDFファイルを作成できるメカニズムを検討しました。</font><font style="vertical-align: inherit;">プロジェクトコードを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含む</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GitHubリポジトリ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">は次の</font></a><font style="vertical-align: inherit;">とおりです。</font><font style="vertical-align: inherit;">この資料で出会ったアイデアがあなたの開発に応用されることを願っています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読者の皆様！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.jsを使用してプログラムでPDFファイルを作成する問題をどのように解決しますか？</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja460006/index.html">幸せなテクニカルサポートワーカー</a></li>
<li><a href="../ja460008/index.html">一度にテクニカルサポート... 2 ... 3 ...</a></li>
<li><a href="../ja460010/index.html">システム管理者vsボス：善と悪の間の闘争？</a></li>
<li><a href="../ja460012/index.html">WebMeetingを介した3CX V16 Update 2およびPCリモート管理の紹介</a></li>
<li><a href="../ja460016/index.html">真の上級プログラマーの兆候とそれらを実際に追跡する方法</a></li>
<li><a href="../ja460020/index.html">Denoとは何ですか？このプロジェクトはNode.jsとどう違うのですか？</a></li>
<li><a href="../ja460022/index.html">PHPダイジェストNo. 160（2019年7月1〜15日）</a></li>
<li><a href="../ja460028/index.html">pwnable.kr 04による問題解決-フラグ。パッケージ化された実行可能ファイル</a></li>
<li><a href="../ja460030/index.html">ネイティブ開発、React NativeおよびFlutter：選択基準</a></li>
<li><a href="../ja460036/index.html">アリスのB2Bスキル：プロトタイプから最初のルーブルを節約</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>