<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕢 🍪 🤦🏿 Comment l'erreur de 2009 provoque un conflit entre Docker pour Windows et Razer Synapse 👍🏽 🎆 🍻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, je suis tombé sur un bug très intéressant: Docker pour Windows ne démarre pas si le panneau de configuration du pilote Razer Synapse est ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment l'erreur de 2009 provoque un conflit entre Docker pour Windows et Razer Synapse</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488834/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aujourd'hui, je suis tombé sur un bug très intéressant: Docker pour Windows ne démarre pas si le panneau de configuration du pilote Razer Synapse est en cours d'exécution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais la chose la plus intéressante est pourquoi c'est arrivé ...</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6b6/3f6/680/6b63f6680d601cf429f683668e95b777.png"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux applications sont écrites de sorte que vous ne pouvez exécuter qu'une seule instance à la fois. Pour ce faire, ils créent un mutex global en utilisant l'assembly .NET comme clé GUID, non? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais hélas, ils se trompent et, de plus, ils se trompent également. Le code d'erreur ressemble à ceci:</font></font><br>
<br>
<pre><code class="plaintext hljs">string.Format("Global\{0}", (object) Assembly.GetExecutingAssembly().GetType().GUID);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'idée est d'obtenir le GUID de l'assembly exécutable et de créer un mutex basé sur celui-ci qui empêchera plus d'une instance de démarrer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais cela doit être faux. Il ne devrait pas y avoir d'appel </font></font><code>GetType()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette option ne renvoie pas le GUID d'un assembly particulier, mais le GUID d'un type intégré à .NET qui décrit les assemblys en tant que tels - </font></font><code>System.Reflection.RuntimeAssembly</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, lorsqu'ils créent des mutex, ils n'utilisent pas les GUID de leur propre code, mais les GUID des internes .NET. Et pour les deux applications, ce GUID sera le même. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment est-ce arrivé? C'est drôle, mais nous </font><font style="vertical-align: inherit;">savons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exactement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comment. Stackoverflow est à blâmer! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En 2009, un utilisateur avec le surnom Nathan a posé la question - " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comment obtenir le GUID de l'assemblage en cours?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". Après 12 minutes, l'utilisateur Cerebrus lui a répondu, mais il y avait une erreur dans sa réponse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après un an et un mois, l'utilisateur Yoopergeek indique une erreur. Cerebrus revient trois ans plus tard et corrige sa réponse - mais vous ne pouvez pas le supprimer car la réponse a été marquée comme «acceptée». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, une erreur dans la réponse à une question en 2009 a provoqué un bogue qui existait au moins jusqu'en mars 2018. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devoirs pour tous les programmeurs lisant ce post: pensez à comment vous trouveriez un tel bogue dans votre application? le code semble fonctionner, mais vous ne réalisez même pas qu'il est réellement cassé: vous n'exécutez pas deux programmes avec la même erreur en même temps, vous ne serez informé du problème que lorsque les utilisateurs commenceront à se plaindre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment le processus de développement pourrait-il être modifié pour détecter de telles erreurs avant la publication?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr488824/index.html">Meetup DGTL Design Community à Raiffeisenbank: Diffusion</a></li>
<li><a href="../fr488826/index.html">Reconnaître l'escalade de privilèges dans ABBYY FineReader</a></li>
<li><a href="../fr488828/index.html">Spam, spam, spam ...</a></li>
<li><a href="../fr488830/index.html">Internet au Turkménistan: prix, disponibilité et restrictions</a></li>
<li><a href="../fr488832/index.html">Étonnamment, l'année dernière, les disques durs d'entreprise étaient plus populaires que les SSD et leurs ventes augmentent</a></li>
<li><a href="../fr488836/index.html">Quelques aspects de l'utilisation de Dictionary lors du développement d'applications chargées</a></li>
<li><a href="../fr488842/index.html">Attraper un électron: observer un processus qui prend un quintillionième de seconde</a></li>
<li><a href="../fr488844/index.html">Frontières pour les gardes-frontières: un tribunal américain a établi des règles pour contrôler les appareils - discuter de la situation</a></li>
<li><a href="../fr488846/index.html">Postgresso 19</a></li>
<li><a href="../fr488848/index.html">CTO all startup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>