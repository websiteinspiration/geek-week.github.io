<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äç‚öïÔ∏è üíÉ üë©üèø‚Äçüè≠ "El destino tiene muchas formas ..." o automatizamos el control de una bombilla usando CANNY 3 tiny y un fotorresistor üèπ üë®üèΩ‚Äçüè≠ ü§õüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el √∫ltimo art√≠culo sobre Habr, les cont√© c√≥mo recib√≠ el peque√±o controlador Canny3 como regalo. "Parpadeamos" el LED, presionamos un bot√≥n. Sobre e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>"El destino tiene muchas formas ..." o automatizamos el control de una bombilla usando CANNY 3 tiny y un fotorresistor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489764/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√∫ltimo art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre Habr, les cont√© c√≥mo recib√≠ el peque√±o controlador Canny3 como regalo. "Parpadeamos" el LED, presionamos un bot√≥n. Sobre esto, en principio, fue posible terminar los experimentos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, durante las √∫ltimas semanas he estado escuchando audiolibros sobre The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Witcher</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y, por lo tanto, me he vuelto mucho m√°s serio sobre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Destination</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Seg√∫n la informaci√≥n proporcionada en el sitio web del fabricante, la familia de controladores CANNY est√° destinada principalmente a la automatizaci√≥n de diversos sistemas de autom√≥viles y equipos especiales.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El problema es que nadie me dejar√° hurgar en un auto real con mis "manos doradas", y en general tengo miedo de los autos. </font><font style="vertical-align: inherit;">Por lo tanto, tuve que comprar una peque√±a l√°mpara de autom√≥vil y una fotorresistencia especialmente para este art√≠culo. </font><font style="vertical-align: inherit;">Lo que no har√°s para no enojar al Destino. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoy conectaremos el controlador y la l√°mpara del autom√≥vil a una fuente de alimentaci√≥n de 12V, enviaremos un mensaje al puerto COM, automatizaremos la inclusi√≥n de la l√°mpara dependiendo de la luz y probaremos el controlador PWM de alta frecuencia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øTambi√©n crees en el poder del Destino? </font><font style="vertical-align: inherit;">Entonces eres bienvenido bajo cat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/kd/tj/ytkdtjul2i1qbdrqllt278lszck.png"><br>
<a name="habracut"></a><br>
<br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parte I: Introducci√≥n</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte I: Introducci√≥n </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte II: Componentes y precauciones </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte III: C√≥mo escribir datos en el puerto COM </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte IV: Conecte y programe la l√°mpara autom√°tica y el fotorresistor </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte V: </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">Intente </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">reducir el brillo de la l√°mpara usando PWM </font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte VI: Conclusi√≥n</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Al comienzo del art√≠culo, le recuerdo No tengo mucha experiencia en electr√≥nica de bricolaje. </font><font style="vertical-align: inherit;">Hace muchos a√±os incursion√© en CraftDuino, el clon dom√©stico de Arduino. </font><font style="vertical-align: inherit;">Y aparte de esas "manualidades" que hizo por m√≠</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es realmente mi experiencia en electr√≥nica de bricolaje es limitada. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aparentemente, conociendo mi amor por los desarrollos dom√©sticos, decid√≠ darle a Canny 3.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Incluso en el proceso de preparaci√≥n del √∫ltimo art√≠culo, me sorprendi√≥ que el controlador pueda alimentarse no solo desde 5V, sino tambi√©n desde 12V, mientras que el voltaje en las salidas ser√° el mismo que en entrada, y la corriente m√°xima por canal es de hasta 100 mA. Me pareci√≥ interesante, porque mi viejo CraftDuino no pod√≠a. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por c√°lculos simples usando la f√≥rmula</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo>=</mo><mi>U</mi><mo>&amp;#x2217;</mo><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.993ex" height="2.009ex" viewBox="0 -755.5 4302.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMATHI-55" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-2217" x="3075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMATHI-49" x="3798" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo>=</mo><mi>U</mi><mo>‚àó</mo><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">P=U*I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me di cuenta de que la potencia m√°xima por salida del controlador ser√° de alrededor de 1,2 vatios. Se decidi√≥ recoger una l√°mpara con reserva de marcha, por si acaso. La elecci√≥n recay√≥ en una bombilla LED de 0,9 W. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, todav√≠a no quer√≠a quemar mi regalo de A√±o Nuevo sin gloria, y antes de conectarlo, decid√≠ preguntar a los desarrolladores si entend√≠a todo correctamente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mi gran sorpresa, no solo me respondieron, sino que tambi√©n sugirieron que si combina varias salidas, la potencia aumentar√° proporcionalmente. Despu√©s de eso, se decidi√≥ comprar algo m√°s potente que la l√°mpara y la elecci√≥n recay√≥ en el ventilador del autom√≥vil, que se inserta en el encendedor. Sin embargo, para no hacer "vinagreta" del art√≠culo, decid√≠ posponer las manipulaciones con el ventilador del autom√≥vil hasta la pr√≥xima vez.</font></font><br>
<br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parte II: equipo y precauciones </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, al comienzo de los experimentos, ten√≠a lo siguiente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispositivo de carga y lanzamiento "Orion Vympel-55". </font><font style="vertical-align: inherit;">Ya lo ten√≠a y, afortunadamente, no solo puede cargar las bater√≠as, sino tambi√©n ser una fuente de alimentaci√≥n en un amplio rango (incluyendo 12 V);</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uj/fi/_i/ujfi_iwx1hku88fcb2trgbdhvqu.jpeg"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autolamp LED "Skyway H3. </font><font style="vertical-align: inherit;">SH3-9SMD-5050 W. " </font><font style="vertical-align: inherit;">Seg√∫n tengo entendido, la bombilla se puede usar en varios faros, pero no tengo d√≥nde pegarla, as√≠ que eleg√≠ la potencia y la facilidad de conexi√≥n sin soldar; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zw/vm/yi/zwvmyih0_5t0grxn5elq4j1zvfe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, volviendo a la f√≥rmula de c√°lculo de potencia, decid√≠ medir las corrientes y asegurarme de que encajaba en los 100 mA permitidos. </font><font style="vertical-align: inherit;">En teor√≠a, la corriente de la bombilla deber√≠a ser</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>I</mi><mo>=</mo><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.044ex" height="2.634ex" viewBox="0 -809.3 12504.8 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMATHI-50" x="1838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-2F" x="2590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMATHI-55" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-3D" x="4135" y="0"></use><g transform="translate(5192,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-39" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-2F" x="6471" y="0"></use><g transform="translate(6972,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-3D" x="8250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-30" x="9307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-2C" x="9807" y="0"></use><g transform="translate(10252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-37" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMAIN-35" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhiemA1DLaMOm0aT0fYLNViAoRWnww#MJMATHI-41" x="11754" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>I</mi><mo>=</mo><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">I=P/U=0.9/12=0,075A</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero a juzgar por la medida, result√≥ un poco menos. </font><font style="vertical-align: inherit;">Aunque tal vez acabo de hacer algo mal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gl/fw/qv/glfwqvsyuybaay2nr5bdftlk2n8.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fotoresistor FR-765. </font><font style="vertical-align: inherit;">Lo eleg√≠ simplemente porque no hab√≠a nada m√°s en la tienda.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h9/zq/gq/h9zqgqgqp4vfwhhoreh_qxmo5aa.png"></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, por supuesto que ten√≠a: un controlador, una placa de pruebas, cables, cocodrilos, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En un art√≠culo anterior sobre Canny 3, realmente elogi√© al controlador, pero result√≥ que hay una mosca en la pomada. </font><font style="vertical-align: inherit;">La √∫ltima vez no us√© el paquete de cable incluido que viene con el kit, pero esta vez no podr√≠a prescindir de √©l. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como uso muy poco un soldador, quer√≠a reducir su uso al m√≠nimo vital. </font><font style="vertical-align: inherit;">Por lo tanto, al final, reun√≠ todos los circuitos en conexiones desmontables. </font><font style="vertical-align: inherit;">Us√© cables especiales (pap√°-pap√°, mam√°-mam√°, mam√°-pap√°), placas de prueba y pinzas de cocodrilo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y si los desarrolladores del controlador no tienen la culpa del hecho de que en el proceso de pelar el cable tuve un par de cortes, entonces los momentos en que toda mi estructura cay√≥ al suelo debido al hecho de que enganch√© el arn√©s "de madera", en parte a su conciencia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por un lado, un torniquete es algo bueno. Para instalar el controlador dentro del autom√≥vil, creo que el arn√©s de cables es el correcto. Los cables que contiene est√°n trenzados y si est√°n bien retorcidos, entonces encajan completamente en los conectores "madre", mis cables de "placa". Por otro lado, como no es conveniente hacer experimentos con el cable con la placa de prueba, incluso una hermosa foto con el controlador en toda su extensi√≥n fue dif√≠cil debido a los "cables de roble". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dije un poco m√°s alto que no quer√≠a usar un soldador, pero al menos una vez tendr√≠an que armarse.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para medir la se√±al del fotorresistor, necesitamos "insertarla" en el convertidor anal√≥gico a digital (ADC) del controlador. </font><font style="vertical-align: inherit;">Pero el hecho es que, a diferencia de, por ejemplo, mi viejo Craftduino. </font><font style="vertical-align: inherit;">En el caso de Canny, result√≥ necesario poner un jersey. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, no le√≠ cuidadosamente la documentaci√≥n y pens√© que las salidas 5 y 6 del controlador son las salidas de A5 y A6. </font><font style="vertical-align: inherit;">Incluso escrib√≠ un programa e intent√© durante mucho tiempo tomar lecturas. </font><font style="vertical-align: inherit;">Naturalmente, no tuve √©xito porque, por defecto, sin una preparaci√≥n preliminar, los canales 5 y 6 funcionan como una entrada discreta normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de leer la documentaci√≥n para el controlador con una "mente fresca", me di cuenta de que todav√≠a ten√≠a que soldar. </font><font style="vertical-align: inherit;">No tienes idea de c√≥mo ten√≠a miedo de "arruinar" todo.</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La √∫ltima vez que intent√© soldar algo en el circuito que hice por m√≠ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Logr√© completar todos los condensadores con soldadura cerca del lugar de la soldadura. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vez el proceso de soldadura fue simple. </font><font style="vertical-align: inherit;">Fue suficiente poner con mucho cuidado una gota de soldadura en la pista. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El aspecto de mi puente de soldadura se puede ver en la foto a continuaci√≥n:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/r9/vd/pvr9vdryjakzmbjalenhh6wrn9a.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
He conectado solo la sexta salida al canal A6, no me atrev√≠ a soldar el quinto canal, para no llenar accidentalmente ambos puentes con soldadura. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Te√≥ricamente, era posible prescindir de un soldador conectando el orificio y el terminal No. 6 con un cable. </font><font style="vertical-align: inherit;">Pero eso ser√≠a terriblemente inconveniente. </font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La foto a continuaci√≥n muestra la conexi√≥n del pin No. 5 y el pin ADC No. A5 con un cable de padre a padre: lo </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/l6/hb/qul6hbndz9lv1jwj8rq-m34sipe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√∫ltimo a lo que debe prestar atenci√≥n antes de ponerse a trabajar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Atenci√≥n!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No repita uno a uno, lo que describir√© m√°s adelante en el texto. </font><font style="vertical-align: inherit;">No sea flojo para reemplazar las conexiones enchufables con soldadura, recoja cables m√°s gruesos, lea la documentaci√≥n. </font><font style="vertical-align: inherit;">No soy un experto en estos asuntos, as√≠ que puse todo junto "lo mejor que pude". </font><font style="vertical-align: inherit;">Tambi√©n le aconsejo que vigile cuidadosamente el peligro de incendio y que no deje el equipo desatendido. </font><font style="vertical-align: inherit;">Me las arregl√© para oler algunos cables ardientes un par de veces. </font><font style="vertical-align: inherit;">Bueno, incluso en la fuente de alimentaci√≥n hab√≠a protecci√≥n contra cortocircuitos (tambi√©n lo arregl√©). </font><font style="vertical-align: inherit;">Por lo tanto, tenga cuidado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, no olvide que a pesar del hecho de que los voltajes y las corrientes que tenemos son peque√±os, a√∫n tocar las partes vivas bajo voltaje puede ser doloroso </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(especialmente si las golpea con una parte herida del cuerpo)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parte III: C√≥mo escribir datos en el puerto COM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para calibrar de alguna manera nuestro sensor de luz ambiental, necesitamos comprender qu√© valores env√≠a al controlador dependiendo del nivel de luz. Para hacer esto, necesitamos enviar datos desde el ADC al monitor. Al trabajar con Arduino y sus clones para resolver tales problemas, utilic√© un monitor de puerto COM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el caso de Canny 3 tiny, el proceso de lectura de datos desde un puerto COM virtual no es mucho m√°s complicado que para Arduino. Pero hay una diferencia clave. El entorno de desarrollo CannyLab no tiene su propio monitor de puerto COM. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sol√≠a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hterm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> porque es multiplataforma, ligero y no requiere instalaci√≥n. Pero puedes usar cualquier otro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dir√© a√∫n m√°s, nada nos impedir√° usar el monitor de puerto COM Arduino IDE.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo sali√≥ de la caja en mi sistema Windows 10 y no tuve que instalar los controladores para el puerto COM virtual por separado. Pero por si acaso, dir√© que el controlador parece estar incluido con el entorno de desarrollo CannyLab (est√° en la carpeta drv \ canny3tiny_vcp). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para no explicar m√°s c√≥mo funcionan los bloques de gr√°ficos asociados con el env√≠o de datos al puerto COM virtual USB, dar√© un ejemplo simple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoy, como entrenamiento, enviaremos el mensaje "HABR" utilizando el controlador. Primero debe descargar el IDE CannyLab. Se puede encontrar f√°cilmente en el sitio web oficial del desarrollador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, us√© CannyLab v 1.42, pero creo que en versiones anteriores no habr√° problemas con el rendimiento de los diagramas.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El proceso de escribir software en el nuevo controlador y los principios b√°sicos para trabajar con Cannylab que describ√≠ en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cap√≠tulo 3 del √∫ltimo art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cree un nuevo gr√°fico, seleccione Canny 3 peque√±o en el cuadro de di√°logo. Y transferimos bloques, constantes y registros al diagrama, como en la siguiente captura de pantalla. Por supuesto, no es necesario transferir etiquetas de texto; nada depende de ellas durante la ejecuci√≥n del diagrama. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/st/g9/rzstg9zmltxsf2ekndo4orydcnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no tiene ganas de mover bloques usted mismo, puede descargar los diagramas de este art√≠culo usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cabe se√±alar que enviar un mensaje al puerto COM funciona un poco extra√±o y tiene que escribir letras en un par de caracteres en un espejo, pero puede acostumbrarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo explicar√© en partes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el bloque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Configuraci√≥n de par√°metros"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuramos la configuraci√≥n del controlador USB VCP. Primero, habilite el modo de transferencia en el puerto COM virtual y luego establezca la longitud del mensaje transmitido. En nuestro caso, 6 caracteres, incluido el avance de l√≠nea. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el bloque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Texto del mensaje",</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> escribimos el texto del mensaje en constantes (no olvide cambiar al modo "chr") y transferimos estas constantes a los registros de controladores correspondientes. Una vez m√°s, llamo su atenci√≥n sobre el hecho de que escribimos el mensaje en el orden inverso, tanto en los pares de s√≠mbolos como en los registros del conductor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√öltimo bloque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Transferencia de mensajes"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Env√≠a con una frecuencia especificada nuestro mensaje al puerto COM. Para esto usamos un bloque PWM. No lo confunda con el RF PWM, que usaremos al conectar la l√°mpara. En este caso, el bloque genera la mitad del tiempo "0" y la segunda mitad "1". Puede "jugar" con el tama√±o del per√≠odo y llenar para aumentar o disminuir la frecuencia de env√≠o de mensajes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es necesario conectar un LED verde a este bloque PWM para verificar el funcionamiento del controlador. Si todo est√° en orden, el LED parpadear√° con la frecuencia de enviar un mensaje. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√≥mo escribir un programa en el controlador, ya lo dije </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en un art√≠culo anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sin embargo, en el pasado he aprendido otro truco genial.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando conectamos el controlador a la computadora, ingresa al modo de grabaci√≥n del programa. Anteriormente, para pasar al modo de tiempo de ejecuci√≥n, quit√© el controlador de la computadora y puse la carga USB en √©l. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Result√≥ que hay una manera m√°s f√°cil. Despu√©s de conectar el controlador al puerto USB de la computadora y hacer clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Conectar"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en CannyLab </font><font style="vertical-align: inherit;">, vaya al </font><font style="vertical-align: inherit;">men√∫ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Dispositivo"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y seleccione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ejecutar"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b-/dt/bv/b-dtbvog9sirji-opbj-ehor-hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El controlador comienza a ejecutar el programa grabado, recibiendo energ√≠a del puerto USB. Adem√°s, despu√©s de eso, el controlador estar√° disponible en el monitor del puerto COM. Es cierto que para volver al modo de grabaci√≥n del programa, ser√° necesario quitar el controlador y volver a insertarlo en el puerto USB de la computadora.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aqu√≠ est√° nuestro "HABR" en el monitor de puerto COM Hterm. </font><font style="vertical-align: inherit;">Presta atenci√≥n a la velocidad de transferencia de datos y otras configuraciones. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/lh/yu/lslhyucpy7cxrmexfqnn3l5swgi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y este es el monitor del puerto COM Arduino IDE: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/zd/vl/abzdvlqwpn6jaw0q0uuzx06ltzo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la foto muestra c√≥mo funciona el controlador despu√©s de grabar el diagrama: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/4n/zu/qv4nzuowx6saogj5xskvkn7dt3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el LED rojo indica que se est√° recibiendo energ√≠a a trav√©s del puerto USB de la computadora y el verde "parpadea" al ritmo de los mensajes transmitidos a trav√©s del puerto USB COM virtual.</font></font><br>
<br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte IV: conectamos y programamos una l√°mpara de autom√≥vil y un fotorresistor.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar, consideraremos la opci√≥n m√°s simple. Simplemente conecte la l√°mpara al terminal No. 1 del controlador y la fotorresistencia al terminal No. 6 (ADC). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo es bastante simple, pero por si acaso, dibuj√© un diagrama: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/un/pm/svunpmu3hc-n4agrotbzy2rquea.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero aqu√≠ se ve en vivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ap/az/z8/apazz8ybxdpnfnaxf9y3c-daabc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"-" y "+" de la fuente de alimentaci√≥n que conectamos a los terminales correspondientes de Canny 3 peque√±o, el pin No. 1 est√° conectado a la carcasa de la l√°mpara, y la "cola" de la l√°mpara con un plus en el tablero del tablero. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con un fotorresistor, tambi√©n, todo es simple. Adem√°s, llevamos la placa desde el bus a la placa, y el signo negativo va al pin No. 6 del controlador, que previamente conectamos con el puente al ADC. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya escrib√≠ anteriormente que toda mi estructura se cay√≥ un par de veces de la mesa. Por lo tanto, m√°s adelante en las fotos puede haber ligeras diferencias en cuanto a los colores de los conductores y los puntos de su entrada en el tablero.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora escribiremos un programa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n1/7s/l8/n17sl8exoem1_jl54mqgb-bapeg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere el nuevo d√≠a que nosotros bloqueamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos con el bloque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Obtener el valor del ADC y convertirlo en suites"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este bloque, traducimos los valores que el ADC (0 a 1023) nos puede dar en iluminaci√≥n (lux). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos hacer una medici√≥n de iluminaci√≥n cuando es ligera y una medici√≥n en condiciones m√°s oscuras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consecuencia, en el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"valor de"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> grab√© la lectura m√≠nima de ADC "0", y en el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"resultado de" el</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> valor cero del nivel de iluminaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"valor de"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> grab√© las lecturas de ADC = 20, y la iluminaci√≥n correspondiente igual a 300 lux, ingres√© el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"resultado de"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No tengo una descripci√≥n detallada de los par√°metros de la fotorresistencia, pero sospecho que no tiene una caracter√≠stica completamente lineal, pero esto es suficiente para nosotros ahora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verifique previamente c√≥mo se realiza el diagrama en el simulador. En m√°s detalle sobre el trabajo en el simulador CannyLab que escrib√≠ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es lo que termin√© con: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/yw/no/mpywnolxlvzxyaqqkeyy3oh2m-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que la fotorresistencia pasa un valor de 10 al ADC. El bloque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pantalla (MAP)"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto es esencialmente una escala lineal. Diez es exactamente la mitad de la escala de nuestra escala, lo que significa que la salida ser√° la mitad del rango de 0 a 300, es decir 150. Esto est√° por debajo del nivel especificado de 300 lux. Por lo tanto, uno se env√≠a al registro de canal No. 1 (salida No. 1) y la l√°mpara se encender√° . Pero no se encender√° de inmediato, pero solo si est√° oscuro durante al menos un segundo (1000 milisegundos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprender qu√© mensaje recibiremos en el puerto COM, cambi√© la visualizaci√≥n de los valores en el simulador a formato hexadecimal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mq/nr/rk/mqnrrkxyzudcput-yez77oke13a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"registro de configuraci√≥n de mensajes VCP D1: D0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , recibe el valor 3130. Como recordamos, este es un par de caracteres, cada parte del cual representa un c√≥digo de caracteres hexadecimales. Resulta que 31h es el c√≥digo de caracteres "1" en ASCII, 30 es el c√≥digo cero en ASCII.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">registro de instalaci√≥n de mensajes "VCP D3: D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tendremos los caracteres" 0 "y" 5 ". Recopilamos los valores de los pares de caracteres en el orden de D0 a D3 que obtenemos: "0", "1", "5", "0". As√≠ que obtuvimos nuestro 0150 lux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero como dicen "ni un solo simulador ...". Veamos qu√© pasa en la pr√°ctica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Medici√≥n bajo la luz de la l√°mpara y la luz natural (iluminaci√≥n combinada): las </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/ze/ps/ofzepsndi0bepg1hwoxzursk7my.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lecturas del medidor de luz de f√°brica y nuestro medidor casero coinciden casi perfectamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Medici√≥n a la luz del d√≠a: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w_/kz/aq/w_kzaqulbnhvr-pq2tsdcy7pqu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
extremadamente peor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto probablemente se deba a la no linealidad de las caracter√≠sticas del fotorresistor, y tambi√©n porque establecemos el l√≠mite de escala inferior en cero, pero no complicaremos el diagrama para aumentar la precisi√≥n de la medici√≥n; para nuestro ejemplo, lo principal fue comprender el principio general de obtener valores de iluminaci√≥n. </font><font style="vertical-align: inherit;">Y el aumento de la precisi√≥n se puede retrasar hasta la implementaci√≥n de estos proyectos en el autom√≥vil o en el hogar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificamos el funcionamiento del circuito, cerramos el sensor con un dedo y luego retiramos el dedo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4f/nh/qd/4fnhqd-jpxmvsbj5wtvwnokgybg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora hay una opci√≥n cuando est√° oscuro en la habitaci√≥n: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5r/d7/lc/5rd7lcy5_cdx339o6z6c39r3y5i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la l√°mpara est√° encendida. </font><font style="vertical-align: inherit;">Todo funciona como deberia.</font></font><br>
<br>
<a name="V"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parte V: Intentando reducir el brillo de la l√°mpara usando PWM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos a complicar un poco el esquema cambiando el brillo de la l√°mpara. Para hacer esto, necesitamos un PWM de alta frecuencia (RF PWM), en Canny 3 tiny se implementa en las salidas No. 3 y No. 4. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Decid√≠ usar la salida No. 4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El esquema de conexi√≥n permanecer√° pr√°cticamente sin cambios. Simplemente, en lugar de la salida No. 1, conectamos la salida No. 4 a la l√°mpara, </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qp/bg/b-/qpbgb-a7whds1vugbizqoyr3its.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
as√≠ es como se ve en el ensamblaje. La diferencia es que, en lugar de un cable blanco, el marco ahora es azul. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/z3/nl/2tz3nldjplnly2tzmo7ttrb0he0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El diagrama tampoco ha cambiado mucho. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/fx/wl/orfxwlbv1adspw_c0fv2ouenqhy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pintar√© el diagrama en detalle. Los principales cambios en la configuraci√≥n de la salida 4, que utilizamos para PWM. En esta secci√≥n, debemos establecer el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Registro de configuraci√≥n de relleno"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toma valores de 2 a 255 microsegundos, decid√≠ no arriesgarme y eleg√≠ 254. Tenga en cuenta que est√° instalado para dos canales a la vez (No. 3 y No. 4). Luego escribimos "1" en el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Registro de habilitaci√≥n de canal PWM No. 4"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , incluyendo el PWM de nuestra bombilla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el bloque </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúEncender la l√°mpara en modo PWM (con bajo brillo)‚Äù, lo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nuevo para nosotros es solo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúRegistrarse para configurar el canal de llenado No. 4, Œºs‚Äù</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Escribiremos el valor ‚Äú10‚Äù en √©l, siempre que el nivel de iluminaci√≥n sobre el fotosensor sea inferior a 250 lux, en dentro de 1 segundo </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La foto a continuaci√≥n muestra que la l√°mpara se enciende, pero brilla tenuemente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/pp/_t/ompp_teo-f76yagfthj5qylheus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea que la l√°mpara brille m√°s, solo necesita cambiar el valor de la constante "10" a cualquier n√∫mero mayor. Por ejemplo, puede tomar el n√∫mero 127, en nuestro caso es la mitad del tiempo que lleva completar el per√≠odo RF PWM, lo que significa aproximadamente la mitad del brillo de la l√°mpara. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lx/ni/3t/lxni3tbt3zw1y6lyqthoqqufc1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cabe se√±alar que el RF PWM con esta l√°mpara funciona de manera bastante notable. Aqu√≠ hay tres fotos: en la primera, establecemos el </font><font style="vertical-align: inherit;">valor </font><font style="vertical-align: inherit;">en el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Registro para llenar el n√∫mero de canal 4"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a 10 Œºs, en la segunda - 110 Œºs, a la derecha - 210 Œºs. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/os/_w/udos_wpczlgn2m1naf4nc5053da.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En principio, la l√°mpara autom√°tica de nuestro ejemplo, seg√∫n tengo entendido, se usa en se√±ales de posici√≥n y, a veces, en faros antiniebla de autom√≥viles.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creo que si refinamos el esquema y el diagrama, entonces ser√≠a posible implementar la inclusi√≥n de la retroiluminaci√≥n con poca luz en m√°quinas m√°s antiguas. </font><font style="vertical-align: inherit;">Es cierto que debe considerar el efecto de la iluminaci√≥n artificial por la noche. </font><font style="vertical-align: inherit;">De modo que en las carreteras, en los t√∫neles y desde los faros de los autos que se aproximan, la l√°mpara no se apag√≥. </font><font style="vertical-align: inherit;">O ser√≠a posible controlar la l√°mpara en el compartimento de pasajeros para que, por ejemplo, las l√°mparas en las puertas del Zhiguli o Niva no siempre se enciendan cuando se abren.</font></font><br>
<br>
<a name="VI"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parte VI: Conclusi√≥n </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el proceso de escribir este art√≠culo, experiment√© una fuerte sensaci√≥n de nostalgia. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras estudiaba en el instituto, mi amigo y compa√±ero de clase Seryoga ten√≠a un elegante sed√°n azul de la marca VAZ 2107. Lo que no hizo con √©l: conectar√° alg√∫n tipo de manguera (para aumentar el impulso), instalar√° un ventilador en el compartimento de pasajeros para que se encienda con un bot√≥n separado, luego har√° que el autom√≥vil arranque con solo presionar un bot√≥n (solo con la llave girada encendido). En general, √©l simplemente no "sintoniz√≥" su "golondrina". Han pasado muchos a√±os desde entonces, mi amigo se mud√≥ a un autom√≥vil m√°s s√≥lido, pero tengo miedo de imaginar qu√© har√≠a con su Zhiguli si obtuviera este controlador hace 10 a√±os.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias a este art√≠culo, tambi√©n record√© mi Destino. Despu√©s de todo, estudi√© durante muchos a√±os como ingeniero de automatizaci√≥n, pero no trabaj√© un d√≠a exclusivamente en mi especialidad. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta que es genial sumergirse en el mundo del bricolaje. En el proceso de ensamblar los circuitos m√°s de una vez "atascados", enciende y apaga la bombilla y el LED con un bot√≥n. Es una sensaci√≥n agradable cuando algo funciona seg√∫n lo previsto. Tambi√©n me di cuenta de que programar un controlador usando diagramas es una tarea m√°s meditativa que escribir c√≥digo en el IDE de Arduino. Una percepci√≥n completamente diferente del programa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras escrib√≠a este art√≠culo, me ped√≠ una versi√≥n de Canny 3 tiny sin mazo de cables. Ahora descansar√© un poco y escribir√© un art√≠culo sobre la instalaci√≥n de este controlador en una placa de pruebas, y por s√≠ mismo analizaremos algunos ejemplos m√°s de automatizaci√≥n de iluminaci√≥n con su ayuda.</font></font><br>
<br>
<i>   ,  ,    . </i><br>
<br>
<i>UPD:<br>
,       ,            :</i><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´, ,  ‚Äì  !¬ª       CANNY 3 tiny</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´  ...¬ª         (CANNY  Arduino)  Raspberry PI</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´ ?¬ª     bluetooth      Xamarin (Android)</a>.<br>
</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es489754/index.html">20 sistemas de gesti√≥n de proyectos, resumen de 100 chips</a></li>
<li><a href="../es489756/index.html">Crea un efecto de l√°piz en SVG</a></li>
<li><a href="../es489758/index.html">Angular: un ejemplo de uso de NGRX</a></li>
<li><a href="../es489760/index.html">Conciencia y existencia. Mec√°nica cu√°ntica sin paradojas.</a></li>
<li><a href="../es489762/index.html">Un ejemplo simple de an√°lisis y an√°lisis de datos para World of Tanks</a></li>
<li><a href="../es489768/index.html">C√≥mo combina los bloques colisionantes y un algoritmo de b√∫squeda cu√°ntica</a></li>
<li><a href="../es489770/index.html">Video de MinskJS mitap: mi informe sobre las extensiones del navegador</a></li>
<li><a href="../es489772/index.html">Hackathon en Simferopol, Yandex. Di√°logos y leyes de la tecnolog√≠a chat-bot</a></li>
<li><a href="../es489774/index.html">La historia de c√≥mo automatic√© el apartamento usando Node-RED. Parte II</a></li>
<li><a href="../es489776/index.html">The Ember Times - N√∫mero 136</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>