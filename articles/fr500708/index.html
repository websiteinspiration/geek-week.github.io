<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí´ üí∞ üìú S√©curit√© et SGBD: ce dont vous devez vous souvenir lors du choix des outils de protection üë®üèø‚Äçüîß üñï üí¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je m'appelle Denis Rozhkov, je suis responsable du d√©veloppement logiciel chez Gazinformservice, dans l' √©quipe produit Jatoba . La l√©gislation et la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>S√©curit√© et SGBD: ce dont vous devez vous souvenir lors du choix des outils de protection</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/500708/"><h1><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e1/315/3ed/1e13153edc98d4ac4b2de6858a7ea48c.png"></div></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'appelle Denis Rozhkov, je suis responsable du d√©veloppement logiciel chez Gazinformservice, dans l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©quipe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> produit </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Jatoba</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La l√©gislation et la r√©glementation des entreprises imposent certaines exigences en mati√®re de s√©curit√© du stockage des donn√©es. </font><font style="vertical-align: inherit;">Personne ne veut que des tiers aient acc√®s √† des informations confidentielles.Par cons√©quent, les questions suivantes sont importantes pour tout projet: identification et authentification, gestion de l'acc√®s aux donn√©es, garantie de l'int√©grit√© des informations dans le syst√®me, enregistrement des √©v√©nements de s√©curit√©. </font><font style="vertical-align: inherit;">Par cons√©quent, je veux parler de quelques points int√©ressants concernant la s√©curit√© du SGBD.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet article a √©t√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">@Databases Meetup,</font></a><font style="vertical-align: inherit;"> h√©berg√© par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si vous ne voulez pas lire, vous pouvez voir:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/n-54j9FHaMU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'article comportera trois parties:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment prot√©ger les connexions.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qu'un audit des actions et comment enregistrer ce qui se passe sur la partie de la base de donn√©es et s'y connecter.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment prot√©ger les donn√©es dans la base de donn√©es elle-m√™me et quelles technologies existent pour cela.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a7d/19f/d89/a7d19fd894a9ea6e3f0ff7a0ad42db36.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les trois composants de la s√©curit√© du SGBD: protection des connexions, audit d'activit√© et protection des donn√©es</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protection de connexion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez vous connecter √† la base de donn√©es directement ou indirectement via des applications Web. </font><font style="vertical-align: inherit;">En r√®gle g√©n√©rale, l'utilisateur du c√¥t√© de l'entreprise, c'est-√†-dire la personne qui travaille avec le SGBD, n'interagit pas directement avec lui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de parler de la s√©curisation des connexions, vous devez r√©pondre √† des questions importantes qui d√©pendent de la fa√ßon dont les mesures de s√©curit√© seront construites:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si un utilisateur professionnel est √©quivalent √† un utilisateur SGBD;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'acc√®s aux donn√©es du SGBD est-il fourni uniquement via l'API que vous contr√¥lez, ou y a-t-il un acc√®s direct aux tables;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si le SGBD est allou√© dans un segment prot√©g√© distinct, qui interagit avec lui et comment;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si le pooling / proxy et le middleware sont utilis√©s, ce qui peut modifier les informations sur la fa√ßon dont la connexion est √©tablie et qui utilise la base de donn√©es.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant quels outils peuvent √™tre utilis√©s pour prot√©ger les connexions:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez des solutions de classe de pare-feu de base de donn√©es. </font><font style="vertical-align: inherit;">Une couche de protection suppl√©mentaire, au moins, augmentera la transparence de ce qui se passe dans le SGBD, au maximum - vous pouvez fournir une protection suppl√©mentaire des donn√©es.</font></font></li>
<li>  .     ,    .    ‚Äî      -,    ,   .    ,  ,      .<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>,    MS SQL Vulnerability Assessmen   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>.&nbsp;</li>
<li>    .   ,   ,       ,         , ,    .      .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez SSL, si vous n'avez pas de s√©paration r√©seau du SGBD des utilisateurs finaux, il ne se trouve pas dans un VLAN distinct. </font><font style="vertical-align: inherit;">Dans de tels cas, il est n√©cessaire de prot√©ger le canal entre le consommateur et le SGBD lui-m√™me. </font><font style="vertical-align: inherit;">Les outils de protection sont parmi l'open source.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment cela affectera-t-il les performances du SGBD?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons un exemple PostgreSQL, comment SSL affecte la charge CPU, augmentant les d√©lais et diminuant TPS, si trop de ressources disparaissent si vous l'activez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous chargeons PostgreSQL en utilisant pgbench - c'est un programme simple pour ex√©cuter des tests de performances. </font><font style="vertical-align: inherit;">Il ex√©cute √† plusieurs reprises une s√©quence de commandes, √©ventuellement dans des sessions de base de donn√©es parall√®les, puis calcule la vitesse de transaction moyenne. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 1 sans SSL et en utilisant SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - une connexion est √©tablie avec chaque transaction:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require&nbsp;<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contre</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 2 sans SSL et en utilisant SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - toutes les transactions sont effectu√©es en une seule connexion:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contre</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autres param√®tres</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">scaling factor: 1<font></font>
query mode: simple<font></font>
number of clients: 10<font></font>
number of threads: 1<font></font>
number of transactions per client: 5000<font></font>
number of transactions actually processed: 50000/50000</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©sultats des tests</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAS DE SSL</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL</font></font></strong></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La connexion est √©tablie √† chaque transaction</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">latence moyenne</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">171,915 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">187,695 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps, y compris les connexions √©tablissant</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.168112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53.278062</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps hors connexion √©tablissement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64.084546</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.725846</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toutes les transactions sont effectu√©es en une seule connexion.</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">latence moyenne</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6,722 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6,342 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps, y compris les connexions √©tablissant</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1587.657278</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1576.792883</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps hors connexion √©tablissement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1588.380574</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1577.694766</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aux charges l√©g√®res, l'effet de SSL est comparable √† l'erreur de mesure. Si la quantit√© de donn√©es transf√©r√©es est tr√®s importante, la situation peut √™tre diff√©rente. Si nous √©tablissons une connexion pour chaque transaction (c'est rare, g√©n√©ralement la connexion est partag√©e entre les utilisateurs), vous avez un grand nombre de connexions / d√©connexions, l'effet peut √™tre un peu plus. Autrement dit, il peut y avoir des risques de d√©gradation des performances, cependant, la diff√©rence n'est pas assez grande pour ne pas utiliser la protection. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter qu'il existe une forte diff√©rence lors de la comparaison des modes de fonctionnement: au sein d'une m√™me session, vous travaillez ou diff√©rent. Cela est compr√©hensible: des ressources sont consacr√©es √† la cr√©ation de chaque connexion.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons eu un cas lorsque nous avons connect√© Zabbix en mode de confiance, c'est-√†-dire que nous n'avons pas v√©rifi√© md5, il n'y avait pas besoin d'authentification. Le client a ensuite demand√© d'activer le mode d'authentification md5. Cela a donn√© une grande charge sur le CPU, les performances ont baiss√©. Ils ont commenc√© √† chercher des moyens d'optimiser. L'une des solutions possibles au probl√®me consiste √† impl√©menter une restriction de r√©seau, √† cr√©er des VLAN distincts pour le SGBD, √† ajouter des param√®tres de sorte qu'il soit clair qui se connecte d'o√π et √† supprimer l'authentification. Vous pouvez √©galement optimiser les param√®tres d'authentification pour r√©duire les co√ªts d'activation de l'authentification, mais en g√©n√©ral, en utilisant diverses m√©thodes l'authentification affecte les performances et n√©cessite que ces facteurs soient pris en compte lors de la conception de la puissance de calcul des serveurs (mat√©riel) pour un SGBD.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusion: dans un certain nombre de solutions, m√™me de petites nuances d'authentification peuvent affecter consid√©rablement le projet et elles sont mauvaises lorsqu'elles deviennent claires uniquement lorsqu'elles sont impl√©ment√©es dans un produit.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Audit des actions</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un audit peut √™tre non seulement un SGBD. </font><font style="vertical-align: inherit;">L'audit est la r√©ception d'informations sur ce qui se passe sur diff√©rents segments. </font><font style="vertical-align: inherit;">Il peut s'agir √† la fois d'un pare-feu de base de donn√©es et du syst√®me d'exploitation sur lequel le SGBD est construit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les SGBD d'entreprise avec audit, tout va bien, en open source - pas toujours. </font><font style="vertical-align: inherit;">Voici ce que PostgreSQL a:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">journal par d√©faut - journalisation int√©gr√©e;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensions: pgaudit - si vous n'avez pas suffisamment de journalisation par d√©faut, vous pouvez utiliser des param√®tres distincts qui r√©solvent certains des probl√®mes.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout au rapport dans la vid√©o:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬´L'enregistrement de base des op√©rateurs peut √™tre fourni avec une fonction d'enregistrement standard avec log_statement = all. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci est acceptable pour la surveillance et d'autres utilisations, mais ne fournit pas le niveau de d√©tail g√©n√©ralement n√©cessaire pour un audit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne suffit pas d'avoir une liste de toutes les op√©rations effectu√©es avec la base de donn√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il devrait √©galement √™tre possible de trouver des d√©clarations sp√©cifiques qui int√©ressent l'auditeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'outil de journalisation standard montre ce que l'utilisateur a demand√©, tandis que pgAudit se concentre sur les d√©tails de ce qui s'est pass√© lorsque la base de donn√©es a fait la demande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, l'auditeur peut vouloir s'assurer qu'une table sp√©cifique a √©t√© cr√©√©e dans une fen√™tre de maintenance document√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela peut sembler une t√¢che simple pour l'audit de base et grep, mais que se passe-t-il si vous rencontrez quelque chose comme √ßa (intentionnellement d√©routant) exemple: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La journalisation standard vous donnera ceci: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LOG: instruction: DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble que la recherche d'une table d'int√©r√™t puisse n√©cessiter une certaine connaissance du code dans les cas o√π les tables sont cr√©√©es dynamiquement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas id√©al, car il serait pr√©f√©rable de simplement rechercher par nom de table. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est l√† que pgAudit sera utile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la m√™me entr√©e, il affichera cette sortie dans le journal:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIT: SESSION, 33.1, FUNCTION, DO ,,, ‚ÄúDO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || </font><font style="vertical-align: inherit;">'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; " </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIT: SESSION, 33,2, DDL, CREATE TABLE, TABLE, public.important_table, CREATE TABLE important_table (id INT) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non seulement le bloc DO est enregistr√©, mais √©galement le texte int√©gral CREATE TABLE avec le type d'op√©rateur, le type d'objet et nom complet, ce qui facilite la recherche. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans la conduite du magazine des op√©rateurs SELECT et DML, pgAudit peut √™tre configur√© pour enregistrer une entr√©e distincte pour chaque relation, qui est r√©f√©renc√©e dans l'instruction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'est pas n√©cessaire d'analyser pour trouver toutes les instructions qui se rapportent √† une table sp√©cifique ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) " .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment cela affectera-t-il les performances du SGBD?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutons les tests avec un audit complet activ√© et voyons ce qui se passe avec les performances de PostgreSQL. </font><font style="vertical-align: inherit;">Nous permettons la journalisation maximale de la base de donn√©es √† tous √©gards. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ne changeons presque rien dans le fichier de configuration, de l'important - activez le mode debug5 pour obtenir le maximum d'informations. </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postgresql.conf</font></font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log_destination = 'stderr' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
logging_collector = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_truncate_on_rotation = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_age = 1d </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_size = 10 Mo </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_min_messages = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_error_statement = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_duration_statement = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_parse =</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug_print_rewritten = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_plan = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_pretty_print = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_checkpoints = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_connections = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_disconnections = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_duration = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_hostname = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_lock_waits = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_replication_commands = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_temp_files = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_timezone =</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le SGBD PostgreSQL avec les param√®tres 1 CPU, 2,8 GHz, 2 Go de RAM, 40 Go de disque dur, nous effectuons trois tests de charge √† l'aide des commandes suivantes:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ pgbench -p 3389 -U postgres -i -s 150 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 50 -j 2 -P 60 -T 600 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 150 -j 2 -P 60 -T 600 benchmark</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©sultats de test:</font></font></strong><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sans enregistrement</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec enregistrement</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temps total de remplissage de la base de donn√©es</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43,74 s</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53,23 s</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">91%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 1 (50 connexions)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre de transactions en 10 minutes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">74169</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32445</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaction / s</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retard moyen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">405 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">925 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test 2 (150 connexions √† 100 possibles)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre de transactions en 10 minutes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">81727</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31429</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaction / s</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">136</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">52</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retard moyen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">550 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1432 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos des tailles</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taille DB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2251 Mo</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2262 Mo</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taille du journal de la base de donn√©es</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 Mo</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4587 Mo</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusion: un audit complet n'est pas tr√®s bon. </font><font style="vertical-align: inherit;">Les donn√©es de l'audit se r√©v√©leront en volume, comme les donn√©es de la base de donn√©es elle-m√™me, voire plus. </font><font style="vertical-align: inherit;">La quantit√© de journalisation g√©n√©r√©e lors de l'utilisation du SGBD est un probl√®me courant sur le produit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous regardons d'autres param√®tres:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La vitesse ne change pas beaucoup: sans enregistrement - 43,74 secondes, avec enregistrement - 53,23 s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les performances sur la RAM et le CPU diminueront, car vous devez cr√©er un fichier avec l'audit. </font><font style="vertical-align: inherit;">Il est √©galement perceptible sur le productif.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec une augmentation du nombre de connexions, bien s√ªr, les performances vont l√©g√®rement se d√©t√©riorer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les entreprises avec audit, c'est encore plus difficile:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il y a beaucoup de donn√©es;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'audit est n√©cessaire non seulement via syslog dans SIEM, mais aussi dans les fichiers: tout √† coup, quelque chose se passe avec syslog, le fichier dans lequel les donn√©es sont enregistr√©es doit √™tre proche de la base de donn√©es;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'audit n√©cessite une √©tag√®re s√©par√©e, afin de ne pas couler sur les disques d'E / S, car il prend beaucoup de place;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il arrive que les employ√©s du SI aient besoin de GOST partout, ils ont besoin d'une identification des invit√©s.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restriction d'acc√®s aux donn√©es</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons les technologies utilis√©es pour prot√©ger les donn√©es et y acc√©der dans les SGBD commerciaux et open source. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui peut √™tre utilis√© dans son ensemble:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cryptage et obscurcissement des proc√©dures et des fonctions (Wrapping) - c'est-√†-dire des outils et des utilitaires s√©par√©s qui rendent le code illisible du code lisible. </font><font style="vertical-align: inherit;">Certes, il ne peut √™tre ni modifi√© ni refactoris√©. </font><font style="vertical-align: inherit;">Une telle approche est parfois requise au moins du c√¥t√© du SGBD - la logique des restrictions de licence ou la logique d'autorisation est chiffr√©e pr√©cis√©ment au niveau de la proc√©dure et de la fonction.</font></font></li>
<li>     (RLS) ‚Äî       ,      ,   - -     .</li>
<li>   (Masking) ‚Äî          ,   ,    -    .  ,        .</li>
<li>  Security DBA/Application DBA/DBA ‚Äî , ,      ,        database-  application-.  open source   ,     .  ,        .</li>
<li>       .   ,    ,         .</li>
<li>     ‚Äî    .</li>
<li>End-to-end encryption   ‚Äî  client-side       .</li>
<li> . ,   ‚Äî    ,     .</li>
</ol><br>
<h3>     ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons un exemple de chiffrement de colonne dans PostgreSQL. </font><font style="vertical-align: inherit;">Il existe un module pgcrypto, il vous permet de stocker les champs s√©lectionn√©s sous forme crypt√©e. </font><font style="vertical-align: inherit;">Ceci est utile lorsque seules certaines donn√©es sont pr√©cieuses. </font><font style="vertical-align: inherit;">Pour lire les champs chiffr√©s, le client transmet la cl√© de d√©chiffrement, le serveur d√©chiffre les donn√©es et les transmet au client. </font><font style="vertical-align: inherit;">Sans cl√© avec vos donn√©es, personne ne peut rien faire. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essayons avec pgcrypto</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cr√©ez une table avec des donn√©es chiffr√©es et des donn√©es r√©guli√®res. </font><font style="vertical-align: inherit;">Ci-dessous se trouve la commande pour cr√©er des tables, dans la toute premi√®re ligne une commande utile cr√©e l'extension elle-m√™me avec l'enregistrement du SGBD:</font></font><br>
<br>
<pre><code class="plaintext hljs">CREATE EXTENSION pgcrypto;<font></font>
CREATE TABLE t1 (id integer, text1 text, text2 text);<font></font>
CREATE TABLE t2 (id integer, text1 bytea, text2 bytea);<font></font>
INSERT INTO t1 (id, text1, text2)<font></font>
VALUES (generate_series(1,10000000), generate_series(1,10000000)::text, generate_series(1,10000000)::text);<font></font>
INSERT INTO t2 (id, text1, text2) VALUES (<font></font>
generate_series(1,10000000),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous essaierons de faire un √©chantillonnage de donn√©es √† partir de chaque table et de regarder les d√©lais d'ex√©cution. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©lection dans le tableau sans fonction de cryptage</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select * from t1 limit 1000;" "host=192.168.220.129 dbname=taskdb<font></font>
user=postgres sslmode=disable" &gt; 1.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le chronom√®tre est activ√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">text1 | </font><font style="vertical-align: inherit;">text2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
------ + ------- + ------- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 | </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
997 | </font><font style="vertical-align: inherit;">997 | </font><font style="vertical-align: inherit;">997 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
998 | </font><font style="vertical-align: inherit;">998 | </font><font style="vertical-align: inherit;">998,999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">999 | </font><font style="vertical-align: inherit;">999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">1000 | </font><font style="vertical-align: inherit;">1000 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 lignes) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temps: 1,386 ms. </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âchantillonnage √† partir d'une table avec fonction de cryptage:</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select id, decrypt(text1, 'key'::bytea, 'bf'),<font></font>
decrypt(text2, 'key'::bytea, 'bf') from t2 limit 1000;"<font></font>
"host=192.168.220.129 dbname=taskdb user=postgres sslmode=disable" &gt; 2.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le chronom√®tre est activ√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">d√©crypter | </font><font style="vertical-align: inherit;">d√©crypter </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
----- + -------------- + ------------ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">\ x31 | </font><font style="vertical-align: inherit;">\ x31 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 | </font><font style="vertical-align: inherit;">\ x32 | </font><font style="vertical-align: inherit;">\ x32 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">\ x33 | </font><font style="vertical-align: inherit;">\ x33 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
999 | </font><font style="vertical-align: inherit;">\ x393939 | </font><font style="vertical-align: inherit;">\ x393939 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">\ x31303030 | </font><font style="vertical-align: inherit;">\ x31303030 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 lignes) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dur√©e: 50,203 ms </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©sultats du test</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pas de cryptage</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pgcrypto (d√©crypter)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©cup√©ration de 1000 lignes</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,386 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50,203 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td>&nbsp;</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 5%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le chiffrement a un impact important sur les performances. </font><font style="vertical-align: inherit;">On peut voir que le timing a augment√©, car les op√©rations de d√©cryptage des donn√©es crypt√©es (et le d√©cryptage est g√©n√©ralement toujours encapsul√© dans votre logique) n√©cessitent des ressources importantes. </font><font style="vertical-align: inherit;">Autrement dit, l'id√©e de chiffrer toutes les colonnes contenant une sorte de donn√©es est lourde de performances r√©duites. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, le cryptage n'est pas une solution miracle qui r√©sout tous les probl√®mes. </font><font style="vertical-align: inherit;">Les donn√©es d√©chiffr√©es et la cl√© de d√©chiffrement en cours de d√©chiffrement et de transfert de donn√©es se trouvent sur le serveur. </font><font style="vertical-align: inherit;">Par cons√©quent, les cl√©s peuvent √™tre intercept√©es par ceux qui ont un acc√®s complet au serveur de base de donn√©es, par exemple, un administrateur syst√®me.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque la colonne enti√®re pour tous les utilisateurs a une cl√© (m√™me si ce n'est pas pour tous, mais pour un ensemble limit√© de clients), ce n'est pas toujours bon et juste. </font><font style="vertical-align: inherit;">C'est pourquoi ils ont commenc√© √† effectuer un chiffrement de bout en bout, le SGBD a commenc√© √† envisager des options pour crypter les donn√©es du client et du serveur, les m√™mes r√©f√©rentiels de coffre de cl√©s sont apparus - des produits distincts qui assurent la gestion des cl√©s du c√¥t√© du SGBD.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a97/d2d/cb2/a97d2dcb29c95253ff37b99f2bf1be40.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un exemple d'un tel chiffrement dans MongoDB</font></font></i></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctions de s√©curit√© dans les SGBD commerciaux et open source</font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les fonctions</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un type</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique de mot de passe</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Audit</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protection du code source pour les proc√©dures et les fonctions</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RLS</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chiffrement</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Msql</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jatoba</font></font></strong></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensions</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gratuit</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensions</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensions</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensions</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mongodb</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gratuit</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disponible dans MongoDB Enterprise uniquement</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le tableau est loin d'√™tre complet, mais la situation est la suivante: dans les produits commerciaux, les probl√®mes de s√©curit√© sont r√©solus depuis longtemps, en open source, en r√®gle g√©n√©rale, certains modules compl√©mentaires sont utilis√©s pour la s√©curit√©, de nombreuses fonctions ne suffisent pas, parfois vous devez ajouter quelque chose. Par exemple, les politiques de mot de passe - dans PostgreSQL, il existe de nombreuses extensions diff√©rentes ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) qui mettent en ≈ìuvre des politiques de mot de passe, mais, √† mon avis, aucune ne couvre tous les besoins du segment national des entreprises. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que faire si nul n'est n√©cessaire</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Par exemple, je veux utiliser un SGBD sp√©cifique, dans lequel il n'y a aucune fonction dont le client a besoin.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez ensuite utiliser des solutions tierces qui fonctionnent avec diff√©rents SGBD, par exemple, "Crypto DB" ou "Garda DB". Si nous parlons de solutions du segment domestique, ils connaissent mieux les GOST que dans l'open source. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me option consiste √† √©crire vous-m√™me ce dont vous avez besoin, √† impl√©menter l'acc√®s aux donn√©es et le chiffrement dans l'application au niveau de la proc√©dure. Certes, avec GOST, ce sera plus difficile. Mais en g√©n√©ral - vous pouvez masquer les donn√©es selon vos besoins, les placer dans le SGBD, puis les r√©cup√©rer et les d√©crypter comme il se doit, directement au niveau de l'application. En m√™me temps, r√©fl√©chissez imm√©diatement √† la fa√ßon dont vous prot√©gerez ces algorithmes lors de l'application. √Ä notre avis, cela devrait √™tre fait au niveau du SGBD, car cela fonctionnera plus rapidement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette conf√©rence a √©t√© faite pour la premi√®re fois au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Databases Meetup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par Mail.ru Cloud Solutions. Regardez la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/redirect%3Fq%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d' autres apparitions et inscrivez - </font><font style="vertical-align: inherit;">vous pour les </font><font style="vertical-align: inherit;">annonces d'√©v√©nements T√©l√©gramme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autour Kubernetes √† Mail.ru Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quoi d'autre √† lire sur le sujet</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus que Ceph: MCS Block Cloud Storage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment choisir une base de donn√©es pour le projet, afin de ne pas s√©lectionner √† nouveau</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500696/index.html">Comment les chaussures de course tentent de s'adapter au pied f√©minin</a></li>
<li><a href="../fr500698/index.html">Evgeny Katyshev: ¬´OpenStreetMap ne convient √† aucune information¬ª</a></li>
<li><a href="../fr500700/index.html">Prise en charge de TLS1.3 et extension de votre compte personnel: ce qui a √©t√© fait pour le premier trimestre 2020</a></li>
<li><a href="../fr500704/index.html">Les licornes (Airbnb, Uber, Lyft, Careem) licencient des milliers d'employ√©s en raison de probl√®mes lors de la pand√©mie de coronavirus</a></li>
<li><a href="../fr500706/index.html">Mise √† niveau de MySQL (Percona Server) de 5.7 √† 8.0</a></li>
<li><a href="../fr500712/index.html">Coronavirus num√©rique - une combinaison de ransomware et d'infostealer</a></li>
<li><a href="../fr500718/index.html">EPAM en mode distant: comment cela fonctionne</a></li>
<li><a href="../fr500720/index.html">Nouvelles normes de s√©curit√© de l'information: rendre la vie plus difficile aux attaquants</a></li>
<li><a href="../fr500722/index.html">"Cuire jusqu'√† ce que pr√™t": qui enregistre des enregistrements sur bande rares d'une mani√®re si inhabituelle</a></li>
<li><a href="../fr500724/index.html">Comment les autorit√©s financi√®res am√©ricaines limitent l'impact n√©gatif du jeu sur la baisse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>