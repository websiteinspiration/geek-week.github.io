<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ฝ ๐ ๐ฉ๐ฝโ๐ฌ ุชุฑููุฉ MySQL (ุฎุงุฏู ุจูุฑูููุง) ูู 5.7 ุฅูู 8.0 ๐งฆ ๐ฉ๐ปโโ๏ธ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุชูุฏู ูุง ููู ุณุงููุง ุ ูุฐูู ุชุฒุฏุงุฏ ุฃูููุฉ ุงูุชุฑููุฉ ุฅูู ุฃุญุฏุซ ุฅุตุฏุงุฑุงุช MySQL. ููุฐ ููุช ููุณ ุจุจุนูุฏ ุ ูู ุฃุญุฏ ูุดุงุฑูุนูุง ุ ุญุงู ุงูููุช ูุชุฑููุฉ ูุฌููุนุงุช Percona Server 5...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุชุฑููุฉ MySQL (ุฎุงุฏู ุจูุฑูููุง) ูู 5.7 ุฅูู 8.0</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/500706/"><img src="https://habrastorage.org/webt/gr/ty/r9/grtyr9g5ysbgx9woi8ldfpn91ac.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชูุฏู ูุง ููู ุณุงููุง ุ ูุฐูู ุชุฒุฏุงุฏ ุฃูููุฉ ุงูุชุฑููุฉ ุฅูู ุฃุญุฏุซ ุฅุตุฏุงุฑุงุช MySQL. </font><font style="vertical-align: inherit;">ููุฐ ููุช ููุณ ุจุจุนูุฏ ุ ูู ุฃุญุฏ ูุดุงุฑูุนูุง ุ ุญุงู ุงูููุช ูุชุฑููุฉ ูุฌููุนุงุช Percona Server 5.7 ุงููุฑูุญุฉ ุฅูู ุงูุฅุตุฏุงุฑ 8. </font><font style="vertical-align: inherit;">ุญุฏุซ ูู ูุฐุง ุนูู ููุตุฉ Ubuntu Linux 16.04. </font><font style="vertical-align: inherit;">ููููุฉ ุฅุฌุฑุงุก ุนูููุฉ ููุงุซูุฉ ุจุฃูู ููุช ููุชุนุทู ูุงููุดููุงุช ุงูุชู ูุงุฌููุงูุง ุฃุซูุงุก ุงูุชุฑููุฉ - ุงูุฑุฃ ูุฐู ุงูููุงูุฉ.</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฏุฑูุจ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุฑุฌุญ ุฃู ูููู ุฃู ุชุญุฏูุซ ูุฎุงุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฑุชุจุทูุง ุจุชุฑุญูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: ุงูุชุบููุฑุงุช ูู ูุชุทูุจุงุช ุงูุญุฏูุฏ ุนูู ููุงุฑุฏ ุงููุธุงู ูุชุตุญูุญ ุชููููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุงูุชู ูุฌุจ ูุญููุง ูู ุงูุชูุฌููุงุช ุงููุฏููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุงูุชุญุฏูุซ ุ ุณููุชูู ุจุงูุชุฃููุฏ ุฅูู ุงููุซุงุฆู ุงูุฑุณููุฉ:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุงุช ุฅุตุฏุงุฑ MySQL 8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏููู ุงูุชุฑููุฉ ูู MySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏููู ุงูุชุฑููุฉ ูู ุจูุฑูููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฑูุงูุฌ MySQL ุงูุชุนูููู ุญูู ุชุญุฏูุซ ุงููุณุฎ ุงููุชูุงุซูุฉ ูุงููุนุงูุฌุงุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุถุน ุฎุทุฉ ุนูู:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุตูุงุญ ูููุงุช ุงูุชูููู ุนู ุทุฑูู ุฅุฒุงูุฉ ุงูุชูุฌููุงุช ุงููุฏููุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญูู ูู ุงูุชูุงูู ูุน ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุซ ููุงุนุฏ ุจูุงูุงุช ุงูุฑููู ุนู ุทุฑูู ุชุซุจูุช ุงูุญุฒูุฉ </font></font><code>percona-server-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุจุชุญุฏูุซ ุงููุนุงูุฌ ุจูุถุน ููุณ ุงูุญุฒูุฉ.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ุจุชุญููู ูู ุนูุตุฑ ูู ุงูุฎุทุฉ ููุฑู ูุง ูููู ุฃู ูุญุฏุซ ุจุดูู ุฎุงุทุฆ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู ุฅุฌุฑุงุก ุชุฑููุฉ ูุชูุฉ MySQL ุงููุณุชูุฏุฉ ุฅูู Galera ุนูู ุงูุชูุงุตูู ุงูุฏูููุฉ ุงูุฎุงุตุฉ ุจู ุงูุชู ูู ูุชู ูุตููุง ูู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูุง ูุฌุจ ุงุณุชุฎุฏุงู ูุฐู ุงูุชุนูููุงุช ูู ูุฐู ุงูุญุงูุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 1: ุงูุชุญูู ูู Configs</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฅุตุฏุงุฑ 8 ุ ุชูุช ุฅุฒุงูุฉ MySQL </font></font><code>query_cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุชู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุนูุงู ุนู ุฃูู ุนูุง ุนููู ุงูุฒูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูุฅุตุฏุงุฑ 5.7 ุ ูููู ุงูุขู ุชู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐูู ุจุงููุงูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ูู ุงูุถุฑูุฑู ุฅุฒุงูุฉ ุงูุชูุฌููุงุช ุฐุงุช ุงูุตูุฉ. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุชุฎุฒูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุคูุช ููุงุณุชุนูุงูุงุช ุ ููููู ุงูุขู ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุฎุงุฑุฌูุฉ - ุนูู ุณุจูู ุงููุซุงู ุ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ProxySQL</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุงูุนุซูุฑ ุฃูุถูุง ุนูู ุชูุฌููุงุช ุงุญุชุฑุงููุฉ ูุฏููุฉ ูู ุงูุชููุฆุฉ </font></font><code>innodb_file_format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูู ุงููููู ูู MySQL 5.7 ุชุญุฏูุฏ ุชูุณูู InnoDB ุ ูุฅู ุงูุฅุตุฏุงุฑ ุงูุซุงูู ูุนูู ุจุงููุนู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุท ูุน ุชูุณูู Barracuda</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุฌุชูุง ูู ุฅุฒุงูุฉ ุงูุชูุฌููุงุช ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li> <code>query_cache_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>query_cache_limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>query_cache_size</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li> <code>innodb_file_format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>innodb_file_format_max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุญูู ุณูุณุชุฎุฏู ุตูุฑุฉ Docker ูุฎุงุฏู Percona. </font><font style="vertical-align: inherit;">ุณูุถุน ุชูููู ุงูุฎุงุฏู ูู ุงูุฏููู </font></font><code>mysql_config_test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ููุดุฆ ุฃุฏูุฉ ููุจูุงูุงุช ูุงูุณุฌูุงุช. </font><font style="vertical-align: inherit;">ูุซุงู ุนูู ุงุฎุชุจุงุฑ ุชููุฆุฉ ุฎุงุฏู ุจูุฑูููุง:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p {mysql_config_test,mysql_data,mysql_logs}<font></font>
cp -r /etc/mysql/conf.d/* mysql_config_test/<font></font>
docker run  --name some-percona -v $(<span class="hljs-built_in">pwd</span>)/mysql_config_test:/etc/my.cnf.d/  -v $(<span class="hljs-built_in">pwd</span>)/mysql_data/:/var/lib/mysql/ -v $(<span class="hljs-built_in">pwd</span>)/mysql_logs/:/var/<span class="hljs-built_in">log</span>/mysql/ -e MYSQL_ROOT_PASSWORD=<span class="hljs-variable">${MYSQL_PASSWORD}</span> -d percona:8-centos</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุชูุฌุฉ: ุฅูุง ูู ุณุฌูุงุช Docker ุ ุฃู ูู ุงูุฏููู ุงูุฐู ูุญุชูู ุนูู ุงูุณุฌูุงุช - ุงุนุชูุงุฏูุง ุนูู ุงูุชููููุงุช ุงูุฎุงุตุฉ ุจู - ุณูุธูุฑ ููู ุณูุชู ููู ูุตู ุชูุฌููุงุช ุงููุดููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅููู ูุง ูุงู ูุฏููุง:</font></font><br>
<br>
<pre><code class="plaintext hljs">2020-04-03T12:44:19.670831Z 0 [Warning] [MY-011068] [Server] The syntax 'expire-logs-days' is deprecated and will be removed in a future release. Please use binlog_expire_logs_seconds instead.<font></font>
2020-04-03T12:44:19.671678Z 0 [Warning] [MY-013242] [Server] --character-set-server: 'utf8' is currently an alias for the character set UTF8MB3, but will be an alias for UTF8MB4 in a future release. Please consider using UTF8MB4 in order to be unambiguous.<font></font>
2020-04-03T12:44:19.671682Z 0 [Warning] [MY-013244] [Server] --collation-server: 'utf8_general_ci' is a collation of the deprecated character set UTF8MB3. Please consider using UTF8MB4 with an appropriate collation instead.</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุงูุชุงูู ุ ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ุงูุชุนุงูู ูุน ุงูุชุฑููุฒุงุช ูุงุณุชุจุฏุงู ุงูุชูุฌูู ุงููุฏูู </font></font><code>expire-logs-days</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 2: ุงูุชุญูู ูู ุนูููุงุช ุงูุชุซุจูุช ุงูุฌุงุฑูุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ูุณุงุนุฏุชุงู ูู ูุซุงุฆู ุงูุชุญุฏูุซ ููุชุญูู ูู ุชูุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ูุณุงุนุฏ ุงุณุชุฎุฏุงููุง ุงููุณุคูู ุนูู ุงูุชุญูู ูู ุชูุงูู ุจููุฉ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุจุฏุฃ ูุน ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ mysqlcheck ุงูููุงุณูููุฉ. </font><font style="vertical-align: inherit;">ุจุจุณุงุทุฉ ูู ุจุชุดุบูู:</font></font><br>
<br>
<pre><code class="bash hljs">mysqlcheck -u root -p --all-databases --check-upgrade</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูู ูุชู ุงููุดู ุนู ุฃู ูุดุงูู ุ ุณูุชู ุฅููุงุก ุงูุฃุฏุงุฉ ุจุฑูุฒ 0: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xc/f-/yk/xcf-yknfyh2puesxjqupkstv_qo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุชููุฑ ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql-shell</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูุฅุตุฏุงุฑุงุช ุงูุญุฏูุซุฉ ูู MySQL </font><font style="vertical-align: inherit;">(ูู ุญุงูุฉ Percona ุ ูุฐู ุญุฒูุฉ </font></font><code>percona-mysql-shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). ููู ุจุฏูู ูุนููู mysql ุงูููุงุณููู ููุฌูุน ุจูู ูุธุงุฆู ุงูุนููู ููุญุฑุฑ SQL ูุฃุฏูุงุช ุฅุฏุงุฑุฉ MySQL. ููุชุญูู ูู ุงูุฎุงุฏู ูุจู ุงูุชุญุฏูุซ ุ ููููู ุชุดุบูู ุงูุฃูุงูุฑ ุงูุชุงููุฉ ูู ุฎูุงูู:</font></font><br>
<br>
<pre><code class="bash hljs">mysqlsh -- util check-for-server-upgrade { --user=root --host=1.1.1.1 --port=3306 } --config-path=/etc/mysql/my.cnf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅููู ุงูุชุนูููุงุช ุงูุชู ุชููููุงูุง: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o_/nd/r5/o_ndr55tsfxrr0gbbu7zgala-vu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุนุงู ุ ูุง ุดูุก ููู - ูุฌุฑุฏ ุชุญุฐูุฑุงุช ุญูู ุงูุชุฑููุฒุงุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุงูุธุฑ ุฃุฏูุงู)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงููุชูุฌุฉ ุงูุฅุฌูุงููุฉ ููุชูููุฐ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/uy/xc/afuyxccks5gfu2w2bl1pgruvv-8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฑูุง ุฃู ุงูุชุญุฏูุซ ูุฌุจ ุฃู ููุฑ ุฏูู ูุดุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุญุธุฉ ุนูู ุงูุชุญุฐูุฑุงุช ุฃุนูุงู ุชุดูุฑ ุฅูู ูุดุงูู ุงูุชุฑููุฒ. </font><font style="vertical-align: inherit;">ูุงูุญูููุฉ ูู ุฃู UTF-8 ูู MySQL ุญุชู ููุช ูุฑูุจ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู UTF-8 "ุญูููููุง"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ ุชู ุชุฎุฒูู 3 ุจุงูุช ููุท ุจุฏูุงู ูู 4. ูู MySQL 8 ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฑูุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุฎูุฑูุง </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุฅุตูุงุญู</font></a><font style="vertical-align: inherit;"> : </font></font><code>utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุคุฏู </font><font style="vertical-align: inherit;">ุงูุงุณู ุงููุณุชุนุงุฑ </font><font style="vertical-align: inherit;">ูุฑูุจูุง ุฅูู ุงูุชุดููุฑ </font></font><code>utf8mb4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุฃุฎุฑู ุงููุฏููุฉ ุณุชุตุจุญ ุงูุฃุนูุฏุฉ ูู ุงูุฌุฏุงูู </font></font><code>utf8mb3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงููุณุชูุจู ุ </font></font><code>utf8mb3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุญุฐู </font><font style="vertical-align: inherit;">ุงูุชุฑููุฒ </font><font style="vertical-align: inherit;">ุ ูููู ููุณ ูู ูุฐุง ุงูุฅุตุฏุงุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฑุฑูุง ุฅุตูุงุญ ุงูุชุฑููุฒุงุช ุจุงููุนู ุนูู ุชุซุจูุช ุนูู ููุธุงู DBMS ุ ุจุนุฏ ุชุญุฏูุซู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 3: ุชุญุฏูุซุงุช ุงูุฎุงุฏู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุงูุฐู ูููู ุฃู ูุญุฏุซ ุจุดูู ุฎุงุทุฆ ุนูุฏ ูุฌูุฏ ูุซู ูุฐู ุงูุฎุทุฉ ุงูุฃูููุฉุ .. ูุฏุฑู ุฌูุฏูุง ุฃู ุงููุฑูู ุงูุฏูููุฉ ุชุญุฏุซ ุฏุงุฆููุง ุ ููุฏ ุฃุฌุฑููุง ุฃูู ุชุฌุฑุจุฉ ุนูู ูุฌููุนุฉ ุชุทููุฑ MySQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุฐูุฑูุง ูู ูุจู ุ ูุฅู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุซุงุฆู ุงูุฑุณููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุณูุท ุงูุถูุก ุนูู ูุณุฃูุฉ ุชุญุฏูุซ ุฎูุงุฏู MySQL ูุน ุงููุณุฎ ุงููุชูุงุซูุฉ. ุฎูุงุตุฉ ุงูููู ูู ุฃู ุงูุฃูุฑ ูุณุชุญู ูู ุงูุจุฏุงูุฉ ุชุญุฏูุซ ุฌููุน ุงููุณุฎ ุงููุชูุงุซูุฉ (ุงูุนุจูุฏ) ุ ุญูุซ ูููู ูู MySQL 8 ุงููุณุฎ ุงููุชูุงุซู ูู ูุนุงูุฌ ุงูุฅุตุฏุงุฑ 5.7. ุชููู ุจุนุถ ุงูุตุนูุจุงุช ูู ุญูููุฉ ุฃููุง ูุณุชุฎุฏู ุงููุถุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุฆูุณู &lt;-&gt; ุงูุฑุฆูุณู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏูุง ูููู ุงูุฑุฆูุณู ุงูุจุนูุฏ ูู ูุถุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุกุฉ ููุท</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฐุง ุ ูู ุงููุงูุน ุ ุชุฏุฎู ุญุฑูุฉ ุงููุฑูุฑ ุฅูู ูุฑูุฒ ุจูุงูุงุช ูุงุญุฏ ุ ูุงูุซุงูู ูู ุงููุณุฎ ุงูุงุญุชูุงุทู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุทุจูููุฌูุง ููุง ููู: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uw/kx/j0/uwkxj0bwhbtjxd27brnug5iosaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุจ ุฃู ุชุจุฏุฃ ุงูุชุฑููุฉ ูุน </font><i><font style="vertical-align: inherit;">ุงููุณุฎ ุงููุชูุงุซูุฉ ุงูุฎููุฉ 2</font></i><font style="vertical-align: inherit;"> ูุณุฎุฉ ูุชูุงุซูุฉ</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mysql master dc 2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><code>mysql replica dc 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููุชูู ุงูุฃูุฑ ุจุฎุงุฏู mysql master dc 1. ูู ุฃุฌู ููุซูููุฉ ุฃูุถู ุ ุฃููููุง ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุ ููููุง ุจุนูู ููุทุงุช ููุง ุ ูุฃููููุง ุงููุณุฎ ุงููุชูุงุซู ุจุงูุฃูุฑ ูุจู ุงูุชุญุฏูุซ ูุจุงุดุฑุฉ </font></font><code>STOP SLAVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุจุฏู ุจุงูู ุงูุชุญุฏูุซ ููุง ููู:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุนุงุฏุฉ ุชุดุบูู ูู ูุณุฎุฉ ูุชูุงุซูุฉ ุ ูุน ุฅุถุงูุฉ ุฎูุงุฑ ุงูุชูููู 3: </font></font><code>skip-networking</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>skip-slave-start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>skip-log-bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงูุญูููุฉ ูู ุฃู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุฏ ุณุฌูุงุช ุซูุงุฆูุฉ ูุน ุชุญุฏูุซ ุฌุฏุงูู ุงููุธุงู. </font><font style="vertical-align: inherit;">ุชุถูู ูุฐู ุงูุชูุฌููุงุช ุฃูู ูู ุชููู ููุงู ุชุบููุฑุงุช ุนูู ุจูุงูุงุช ุงูุชุทุจูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ููู ุชุฏุฎู ุงููุนูููุงุช ุงููุชุนููุฉ ุจุชุญุฏูุซ ุฌุฏุงูู ุงููุธุงู ูู ุงูุณุฌูุงุช ุงูุซูุงุฆูุฉ. </font><font style="vertical-align: inherit;">ุณูุคุฏู ูุฐุง ุฅูู ุชุฌูุจ ุงููุดุงูู ุนูุฏ ุงุณุชุฆูุงู ุงููุณุฎ ุงููุชูุงุซู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุซุจูุช ุงูุญุฒูุฉ </font></font><code>percona-server-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงูููู ููุงุญุธุฉ ุฃูู ูู MySQL 8 ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุชุงุฌ ุฅูู ุชุดุบูู ุงูุฃูุฑ </font></font><code>mysqlupgrade</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุชุญุฏูุซ ุงูุฎุงุฏู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุจุฏุงูุฉ ูุงุฌุญุฉ ุ ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู ูุฑุฉ ุฃุฎุฑู - ุจุงููุนู ุจุฏูู ุงููุนููุงุช ุงูุชู ุชูุช ุฅุถุงูุชูุง ูู ุงูููุฑุฉ ุงูุฃููู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฃูุฏ ูู ุนูู ุงููุณุฎ ุงููุชูุงุซู ุจูุฌุงุญ: ูุชุญูู </font></font><code>SHOW SLAVE STATUS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑู ุฃูู ูุชู ุชุญุฏูุซ ุงูุฌุฏุงูู ุฐุงุช ุงูุนุฏุงุฏุงุช ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุชุทุจูู.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ูู ูุฐุง ุจุณูุทูุง ููุบุงูุฉ: ูุงู ุชุญุฏูุซ ูุทูุฑ ุงูุจุฑุงูุฌ ูุงุฌุญูุง. </font><font style="vertical-align: inherit;">ุญุณููุง ุ ููููู ุงูุชุฎุทูุท ุจุฃูุงู ูุชุฑููุฉ ุงูุฅูุชุงุฌ ูููุงู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููู ููุงู ุญุฒู - ูููุง ุจุชุญุฏูุซ ููุฒ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูู ููู ููู ุชุฌุฑุจุฉ ุงูุชุทููุฑ ุงููุงุฌุญุฉ ุฅูู ุงูุฅูุชุงุฌ ุฎุงูููุง ูู ุงูููุงุฌุขุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณู ุงูุญุธ ุ ุชุจุฏุฃ ุนูููุฉ ุงูุชุญุฏูุซ ููุณูุง ุจุงููุณุฎ ุงููุชูุงุซูุฉ ุ ูุฐูู ุ ุจุนุฏ ุฃู ูุงุฌููุง ุตุนูุจุงุช ุ ุฃููููุง ุงูุนูู ูุงุณุชุนุฏูุง ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ูู ุงูููุทุฉ. ุชู ุฅุนุงุฏุฉ ุฌุฏููุฉ ุฏุฑุงุณุฉ ุงููุดููุฉ ูู ุตุจุงุญ ุงูููู ุงูุชุงูู. ุธูุฑุช ุงูุฅุฏุฎุงูุงุช ุงูุชุงููุฉ ูู ุงูุณุฌูุงุช:</font></font><br>
<br>
<pre><code class="plaintext hljs">2020-01-14T21:43:21.500563Z 2 [ERROR] [MY-012069] [InnoDB] table: t1 has 19 columns but InnoDB dictionary has 20 columns<font></font>
2020-01-14T21:43:21.500722Z 2 [ERROR] [MY-010767] [Server] Error in fixing SE data for db1.t1<font></font>
2020-01-14T21:43:24.208365Z 0 [ERROR] [MY-010022] [Server] Failed to Populate DD tables.<font></font>
2020-01-14T21:43:24.208658Z 0 [ERROR] [MY-010119] [Server] Aborting</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฏุช ุฏุฑุงุณุฉ ุฃุฑุดููุงุช ุงูููุงุฆู ุงูุจุฑูุฏูุฉ ุงููุฎุชููุฉ ุนูู Google ุฅูู ุฅุฏุฑุงู ุฃู ูุฐู ุงููุดููุฉ ุชูุดุฃ ุจุณุจุจ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃ MySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุนูู ุงูุฑุบู ูู ุฃูู ุญุชู ุฎุทุฃ ูุงุฆุฏุฉ </font></font><code>mysqlcheck</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>mysqlsh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุชุถุญ ุฃู MySQL ุบูุฑุช ุทุฑููุฉ ุชูุฏูู ุงูุจูุงูุงุช ููุญููู ุงูุนุดุฑูุฉ (int ุ tinyint ุ ุฅูุฎ) ุ ูุฐูู ูุชู ุงุณุชุฎุฏุงู ุทุฑููุฉ ุฃุฎุฑู ูุชุฎุฒูููุง ุฏุงุฎู ุฎุงุฏู mysql. ุฅุฐุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู </font><font style="vertical-align: inherit;">ูู </font><b><font style="vertical-align: inherit;">ุงูุฃุตู</font></b><font style="vertical-align: inherit;"> ูู ุงูุฅุตุฏุงุฑ 5.5 ุฃู 5.1 ุ ุซู ููุช ุจุงูุชุฑููุฉ ุฅูู 5.7 ุ ููุฏ ุชุญุชุงุฌ ุฅูู ุฅูุชุงุฌ </font></font><code>OPTIMIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุถ ุงูุฌุฏุงูู. ุซู ูููู MySQL ุจุชุญุฏูุซ ูููุงุช ุงูุจูุงูุงุช ูููููุง ุฅูู ุชูุณูู ุงูุชุฎุฒูู ุงูุญุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุฃูุถูุง ุงูุชุญูู ูู ุฐูู ุจุงุณุชุฎุฏุงู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ </font></font><code>mysqlfrm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">mysqlfrm --diagnostic -vv /var/lib/mysql/db/table.frm<font></font>
...<font></font>
 <span class="hljs-string">'field_length'</span>: 8,
  <span class="hljs-string">'field_type'</span>: 246, <span class="hljs-comment">#  </span>
  <span class="hljs-string">'field_type_name'</span>: <span class="hljs-string">'decimal'</span>,
  <span class="hljs-string">'flags'</span>: 3,
  <span class="hljs-string">'flags_extra'</span>: 67,
  <span class="hljs-string">'interval_nr'</span>: 0,
 <span class="hljs-string">'name'</span>: <span class="hljs-string">'you_deciaml_column'</span>,<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู </font></font><code>field_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏูู 0 ุ ูุณูุชู ุงุณุชุฎุฏุงู ุงูููุน ุงููุฏูู ูู ุงูุฌุฏูู - ูุฌุจ ุงูููุงู ุจู </font></font><code>OPTIMIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุน ุฐูู ุ ุฅุฐุง ูุงูุช ุงููููุฉ 246 ุ ููุฏูู ุจุงููุนู ููุน ุฌุฏูุฏ. ูููู ุงูุนุซูุฑ ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงูุฃููุงุน ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุงูุฉ ุนูู ุฐูู ุ </font><font style="vertical-align: inherit;">ูุนุชุจุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุงูุฎุทุฃ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุณุจุจ ุงููุญุชูู ุงูุซุงูู ุงูุฐู ุชุฌุงูุฒูุง - ุนุฏู ูุฌูุฏ ุฌุฏุงูู InnoDB ูู ุฌุฏูู ุงููุธุงู </font></font><code>INNODB_SYS_TABLESPACES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุฅุฐุง ุชู ุฅูุดุงุคูุง ุ ุงูุฌุฏุงูู ุ ูู ุงูุฅุตุฏุงุฑ 5.1. ูุชุฌูุจ ุงููุดุงูู ุฃุซูุงุก ุงูุชุฑููุฉ ุ ููููู ุงุณุชุฎุฏุงู ุจุฑูุงูุฌ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL ุงููุตู ุงููุฑูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุฐุง ูู ููู ูุฏููุง ูุซู ูุฐู ุงููุดุงูู ูู ุฏููุ ูุชู ูุณุฎ ุงููุงุนุฏุฉ ุจุดูู ุฏูุฑู ููุงู ูู ุงูุฅูุชุงุฌ - ูุจุงูุชุงูู ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุฌุฏุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูู ูุงุนุฏุฉ ุจูุงูุงุช ูุจูุฑุฉ ุชุนูู ุญููุง ุ ูู ุชุนูู ููุท ูุฃุฎุฐ ูุฃุฏุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ูู ููุงู </font></font><code>OPTIMIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณุชุณุงุนุฏ ุฃุฏุงุฉ Percona-toolkit ููุง: ุชุนุชุจุฑ ุฃุฏุงุฉ pt-online-schema-change ุฃุฏุงุฉ ููุชุงุฒุฉ ูุชุดุบูู OPTIMIZE ุนุจุฑ ุงูุฅูุชุฑูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุช ุงูุฎุทุฉ ุงููุญุฏุซุฉ ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุณูู ุฌููุน ุงูุฌุฏุงูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุจุฅุฌุฑุงุก ุชุฑููุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุญูู ูู ุฐูู ููู ููุณ ุงูููุช ููุนุฑูุฉ ููุช ุงูุชุญุฏูุซ ุ ูููุง ุจุชุนุทูู ุฅุญุฏู ุงููุณุฎ ุงููุชูุงุซูุฉ ุ ูุจุงููุณุจุฉ ูุฌููุน ุงูุฌุฏุงูู ุ ูููุง ุจุชุดุบูู ุงูุฃูุฑ ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="bash hljs">pt-online-schema-change --critical-load Threads_running=150 --alter <span class="hljs-string">"ENGINE=InnoDB"</span> --execute --chunk-size 100 --quiet --alter-foreign-keys-method auto h=127.0.0.1,u=root,p=<span class="hljs-variable">${MYSQL_PASSWORD}</span>,D=db1,t=t1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุญุฏูุซ ุงูุฌุฏุงูู ุจุฏูู ุฃููุงู ุทูููุฉ ูุธุฑูุง ูุฃู ุงูุฃุฏุงุฉ ุชููู ุจุฅูุดุงุก ุฌุฏูู ูุคูุช ุฌุฏูุฏ ุชููู ุจูุณุฎ ุงูุจูุงูุงุช ูู ุงูุฌุฏูู ุงูุฑุฆูุณู. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุฐู ูููู ููู ููุง ุงูุฌุฏูููู ูุชุทุงุจููู ุ ูุชู ุชุฃููู ุงูุฌุฏูู ุงูุฃุตูู ูุงุณุชุจุฏุงูู ุจุขุฎุฑ ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ุฃุธูุฑ ุงูุชุดุบูู ุงูุชุฌุฑูุจู ุฃู ุชุญุฏูุซ ุฌููุน ุงูุฌุฏุงูู ุณูุณุชุบุฑู ุญูุงูู ููู ุ ูููู ูุณุฎ ุงูุจูุงูุงุช ุชุณุจุจ ูู ุชุญููู ุงููุซูุฑ ุนูู ุงูุฃูุฑุงุต. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุฌูุจ ุฐูู ุ ุฃุถููุง ูุณูุทุฉ </font></font><code>--sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูููุฉ 10 </font><font style="vertical-align: inherit;">ุฅูู ุงูุฃูุฑ ุนูุฏ ุงูุฅูุชุงุฌ </font><font style="vertical-align: inherit;">- ุชุชุญูู ูุฐู ุงููุนููุฉ ูู ุทูู ุงูุงูุชุธุงุฑ ุจุนุฏ ููู ุญุฒูุฉ ุจูุงูุงุช ุฅูู ุฌุฏูู ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ุจูุฐู ุงูุทุฑููุฉ ููููู ุชูููู ุงูุญูู ุฅุฐุง ูุงู ุงูุชุทุจูู ุงูุฐู ูุนูู ุจุงููุนู ูุทุงูุจ ุจููุช ุงูุงุณุชุฌุงุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฅุฌุฑุงุก ุงูุชุญุณูู ุ ูุงู ุงูุชุญุฏูุซ ูุงุฌุญูุง.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... ููู ููุณ ุจุงููุงูู!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ูุตู ุณุงุนุฉ ูู ุงูุชุญุฏูุซ ุ ูุงุฌู ุงูุนููู ูุดููุฉ. </font><font style="vertical-align: inherit;">ุนููุช ุงููุงุนุฏุฉ ุจุดูู ุบุฑูุจ ููุบุงูุฉ: ุจุดูู ุฏูุฑู ุ ุจุฏุฃุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุฑุงุช ุงูุงุชุตุงู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅููู ูุง ุจุฏุง ุนููู ูู ุงููุฑุงูุจุฉ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/gn/7v/hugn7vq8clkacetlzfb-gli1bcw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธูุฑ ุงูุฑุณู ุงูุจูุงูู ุงูููุดุงุฑ ูู ููุทุฉ ุงูุดุงุดุฉ ุ ููุฑุฌุน ุฐูู ุฅูู ุญูููุฉ ุฃู ุฌุฒุกูุง ูู ุณูุงุณู ุฎุงุฏู MySQL ูุฏ ุณูุท ุจุดูู ุฏูุฑู ูุน ูุฌูุฏ ุฎุทุฃ. </font><font style="vertical-align: inherit;">ุธูุฑุช ุฃุฎุทุงุก ูู ุงูุชุทุจูู:</font></font><br>
<br>
<pre><code class="plaintext hljs">[PDOException] SQLSTATE[HY000] [2002] Connection refused</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุดู ูุญุต ุณุฑูุน ููุณุฌูุงุช ุฃู ุงูุจุฑูุงูุฌ ุงูุฎูู ูู ูุณุชุทุน ุงูุญุตูู ุนูู ุงูููุงุฑุฏ ุงููุทููุจุฉ ูู ูุธุงู ุงูุชุดุบูู. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุซูุงุก ุงูุชุนุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ุงูุฃุฎุทุงุก ุ ูุฌุฏูุง ูู ูุธุงู </font><b><font style="vertical-align: inherit;">ูููุงุช</font></b><font style="vertical-align: inherit;"> ุงููุธุงู </font><b><font style="vertical-align: inherit;">"ุงููุชูู"</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># dpkg -S /etc/apparmor.d/cache/usr.sbin.mysqld</span><font></font>
dpkg-query: no path found matching pattern /etc/apparmor.d/cache/usr.sbin.mysqld<font></font>
<span class="hljs-comment"># dpkg -S /etc/apparmor.d/local/usr.sbin.mysqld</span>
dpkg-query: no path found matching pattern /etc/apparmor.d/<span class="hljs-built_in">local</span>/usr.sbin.mysqld
<span class="hljs-comment"># dpkg -S /etc/apparmor.d/usr.sbin.mysqld</span><font></font>
mysql-server-5.7: /etc/apparmor.d/usr.sbin.mysqld<font></font>
<span class="hljs-comment"># dpkg -l mysql-server-5.7</span>
rc  mysql-server-5.7 5.7.23-0ubuntu0.16.04.1      amd64</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุชุดููู ูุฐู ุงููููุงุช ุฃุซูุงุก ุงูุชุฑููุฉ ุฅูู MySQL 5.7 ูุจู ุจุถุน ุณููุงุช ูุชูุชูู ุฅูู ุงูุญุฒูุฉ ุงูุจุนูุฏุฉ. </font><font style="vertical-align: inherit;">ุญุฐู ุงููููุงุช ูุฅุนุงุฏุฉ ุชุดุบูู ุฎุฏูุฉ apparmor ุญู ุงููุดููุฉ:</font></font><br>
<br>
<pre><code class="bash hljs">systemctl stop apparmor<font></font>
rm /etc/apparmor.d/cache/usr.sbin.mysqld<font></font>
rm /etc/apparmor.d/<span class="hljs-built_in">local</span>/usr.sbin.mysqld<font></font>
rm /etc/apparmor.d/usr.sbin.mysqld<font></font>
systemctl start apparmor</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑุง</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ุ ุญุชู ุฃุจุณุท ุนูููุฉ ุ ูููู ุฃู ูุคุฏู ุฅูู ูุดุงูู ุบูุฑ ูุชููุนุฉ. </font><font style="vertical-align: inherit;">ูุญุชู ูุฌูุฏ ุฎุทุฉ ูุฏุฑูุณุฉ ุฌูุฏูุง ูุง ูุถูู ุฏุงุฆููุง ุงููุชูุฌุฉ ุงููุชููุนุฉ. </font><font style="vertical-align: inherit;">ุงูุขู ุ ูู ุฃู ุฎุทุท ุชุญุฏูุซ ุ ูุชุถูู ูุฑูููุง ุฃูุถูุง ุงูุชูุธูู ุงูุฅูุฒุงูู ูููููุงุช ุงูุฅุถุงููุฉ ุงูุชู ูููู ุฃู ุชุธูุฑ ูุชูุฌุฉ ุงูุฅุฌุฑุงุกุงุช ุงูุฃุฎูุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ูุฐุง ุงูุนูู ุงูุฑุณููู ุบูุฑ ุงููุญุชุฑู ุ ุฃูุฏ ุฃู ุฃุดูุฑ ุจูุฑูููุง ุนูู ููุชุฌุงุชูุง ุงูุฑุงุฆุนุฉ!</font></font><br>
<br>
<img height="75" width="75" src="https://habrastorage.org/webt/b1/af/mg/b1afmgyaozxjh0dqcbr3jrkdlk4.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฑุฃ ุฃูุถุง ูู ูุฏููุชูุง:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุนุฏ ุงูุจูุงูุงุช ู Kubernetes (ูุฑุงุฌุนุฉ ูุชูุฑูุฑ ููุฏูู)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตุงุฆุญ ูุญูู Kubernetes: ุชุณุฑูุน ุนูููุฉ ุงูุชูููุฏ ูููุงุนุฏ ุงูุจูุงูุงุช ุงููุจูุฑุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 ูุตุต ุนูููุฉ ูู ุญูุงุชูุง ุงูููููุฉ SRE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุ</font></font></li>
<li> ยซ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    Redis  K8s  -      </a>ยป;</li>
<li> ยซ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  MongoDB  Kubernetes</a>ยป.</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar500694/index.html">68 ูุตูุญุฉ ุบูุฑ ูุฑุบูุจ ูููุง</a></li>
<li><a href="../ar500696/index.html">ููู ุชุญุงูู ุฃุญุฐูุฉ ุงูุฌุฑู ุงูุชุฃููู ูุน ูุฏู ุงูุฃูุซู</a></li>
<li><a href="../ar500698/index.html">ุฅููุฌููู ูุงุชูุดูู: "OpenStreetMap ุบูุฑ ููุงุณุจุฉ ูุฃูุฉ ูุนูููุงุช"</a></li>
<li><a href="../ar500700/index.html">ุฏุนู TLS1.3 ูุชูุณูุน ุญุณุงุจู ุงูุดุฎุตู: ูุง ุชู ุงูููุงู ุจู ููุฑุจุน ุงูุฃูู ูู ุนุงู 2020</a></li>
<li><a href="../ar500704/index.html">Unicorns (Airbnb ู Uber ู Lyft ู Careem) ุชุณุฑูุญ ุงูุขูุงู ูู ุงูููุธููู ูุณุท ูุดุงูู ุฎูุงู ุฌุงุฆุญุฉ ููุฑูุณ ููุฑููุง</a></li>
<li><a href="../ar500708/index.html">ุงูุฃูุงู ู DBMS: ูุง ุชุญุชุงุฌ ุฅูู ุชุฐูุฑู ุนูุฏ ุงุฎุชูุงุฑ ุฃุฏูุงุช ุงูุญูุงูุฉ</a></li>
<li><a href="../ar500712/index.html">ุงูููุฑูุณ ุงูุชุงุฌู ุงูุฑููู - ูุฒูุฌ ูู ุจุฑุงูุฌ ุงููุฏูุฉ ู Infostealer</a></li>
<li><a href="../ar500718/index.html">EPAM ูู ุงููุถุน ุงูุจุนูุฏ: ููู ูุนูู</a></li>
<li><a href="../ar500720/index.html">ูุนุงููุฑ ุฌุฏูุฏุฉ ูุฃูู ุงููุนูููุงุช: ุชุฌุนู ุงูุญูุงุฉ ุฃูุซุฑ ุตุนูุจุฉ ููููุงุฌููู</a></li>
<li><a href="../ar500722/index.html">"ุงุฎุจุฒ ุญุชู ุชุตุจุญ ุฌุงูุฒุฉ": ูู ูุญูุธ ุชุณุฌููุงุช ุงูุดุฑูุท ุงููุงุฏุฑุฉ ุจุทุฑููุฉ ุบูุฑ ูุนุชุงุฏุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>