<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ»â€ğŸ³ ğŸ•µğŸ¿ ğŸ—ï¸ æœåŠ¡å®šä½å™¨-æ¶ˆé™¤ç¥è¯ ğŸ‘ ğŸ‘¨ğŸ¿ ğŸ‘¨ğŸ»â€ğŸŒ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªå¹³å°çš„æ‹¥æŠ¤è€…é˜µè¥ä¸­å±•ç¤ºäº†ä¸€ä¸ªå¹³å°è¡¨ç°å‡ºè‰¯å¥½æ€§èƒ½å’Œå¯ç”¨æ€§çš„å®è·µã€‚æœåŠ¡å®šä½å™¨ï¼ˆService Locatorï¼‰æ¨¡å¼å……åˆ†æ„Ÿå—åˆ°äº†è¿™ç§å‘½è¿ï¼Œè¯¥æ¨¡å¼åœ¨.Netä¸­éå¸¸æµè¡Œï¼Œåœ¨iOSä¸­å£°èª‰ä¸ä½³ã€‚
 
 åœ¨æŸäº›æ–‡ç« ä¸­ï¼ŒServiceLocatorè¢«å¿½ç•¥ï¼Œç§°å…¶ä¸ºâ€œè‡ªè¡Œè½¦â€ã€‚å…¶ä»–äººåˆ™è®¤ä¸ºè¿™æ˜¯åæ¨¡å¼ã€‚...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æœåŠ¡å®šä½å™¨-æ¶ˆé™¤ç¥è¯</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498194/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/q0/yb/tf/q0ybtf5xhq0ygzxuevhduuup9k0.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªå¹³å°çš„æ‹¥æŠ¤è€…é˜µè¥ä¸­å±•ç¤ºäº†ä¸€ä¸ªå¹³å°è¡¨ç°å‡ºè‰¯å¥½æ€§èƒ½å’Œå¯ç”¨æ€§çš„å®è·µã€‚</font><font style="vertical-align: inherit;">æœåŠ¡å®šä½å™¨ï¼ˆService Locatorï¼‰æ¨¡å¼å……åˆ†æ„Ÿå—åˆ°äº†è¿™ç§å‘½è¿ï¼Œè¯¥æ¨¡å¼åœ¨.Netä¸­éå¸¸æµè¡Œï¼Œåœ¨iOSä¸­å£°èª‰ä¸ä½³ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æŸäº›æ–‡ç« ä¸­ï¼ŒServiceLocatorè¢«å¿½ç•¥ï¼Œç§°å…¶ä¸ºâ€œè‡ªè¡Œè½¦â€ã€‚</font><font style="vertical-align: inherit;">å…¶ä»–äººåˆ™è®¤ä¸ºè¿™æ˜¯åæ¨¡å¼ã€‚</font><font style="vertical-align: inherit;">æœ‰äº›äººè¯•å›¾é€šè¿‡æè¿°å®šä½å™¨çš„æ­£åä¸¤é¢æ¥ä¿æŒä¸­ç«‹ã€‚</font><font style="vertical-align: inherit;">Habrahabrè‡ªå·±åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¸ºè¿™äº›è¿«å®³åšå‡ºäº†è´¡çŒ®ï¼Œå…¶ä¸­åŒ…å«å‡ ç¯‡ç±»ä¼¼çš„å‚è€ƒæ–‡çŒ®ã€‚</font><font style="vertical-align: inherit;">æ¯ä¸ªé‡åˆ°å®æ–½Latitudeçš„æ–°å¼€å‘äººå‘˜å‡ ä¹éƒ½ä¼šç«‹å³è¢«ç–å¿½æ‰€æ„ŸæŸ“-å¥½å§ï¼Œè®¸å¤šå¼€å‘äººå‘˜åœ¨æ²¡æœ‰å®¢è§‚åŸå› çš„æƒ…å†µä¸‹ä¹Ÿæ— æ³•æ‰¹è¯„åŒä¸€ä»¶äº‹ã€‚</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ç« </font></font></b>
                        <div class="spoiler_text"><ul>
<li>2010: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">https://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern</a>/</li>
<li>2015 :<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> https://habr.com/ru/company/rambler-co/blog/258325/</a></li>
<li>2015: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://habr.com/ru/post/270005/</a></li>
<li>2016: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://habr.com/ru/company/jugru/blog/300886/</a></li>
<li>2017: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://habr.com/ru/company/badoo/blog/344506/</a></li>
<li>2018: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://habr.com/ru/company/redmadrobot/blog/352088</a></li>
</ul><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çœŸçš„å—ï¼Ÿç”¨ä¸€ä¸ªè‘—åäººç‰©çš„è¯è¯´ï¼šâ€œä½ ä¸å–œæ¬¢çŒ«å—ï¼Ÿæ˜¯çš„ï¼Œä½ åªæ˜¯æ²¡æœ‰å®ƒä»¬ï¼â€å®é™…ä¸Šï¼Œæ‚¨æ˜¯å¦å°è¯•è¿‡åƒæ— ç›çš„è‚‰ï¼Ÿå’Œç”Ÿç”Ÿï¼Ÿæ‚¨ä¸å¿…è´¹åŠ›æ‰¾å‡ºåƒä»€ä¹ˆçŒªè‚‰æ˜¯ä¸å¥½çš„ï¼Œå°¤å…¶æ˜¯åœ¨æ˜ŸæœŸäº”æ™šä¸Šã€‚å› æ­¤ï¼Œä½¿ç”¨æœåŠ¡å®šä½å™¨æ¨¡å¼-åŸå§‹ä¿¡æ¯çš„æ™®åŠç‡è¶Šé«˜-å¯¹å…¶çš„åè§å°±è¶Šå¤§ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c-/gf/0d/c-gf0dpfbeujk8--liho9lp_wwm.jpeg" align="left" width="300"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³°ç‰¹æ–¯Â·å¢å…‹ä¿®è’‚æ–¯Â·å¡å°”ï¼ˆTitus Lucretius Carï¼‰æ˜¯å¤ä»£æœ€ä¼Ÿå¤§çš„æ€æƒ³å®¶ä¹‹ä¸€ï¼Œå°½ç®¡ä»–çš„ä¹¦ã€Šè®ºäº‹ç‰©çš„æœ¬è´¨ã€‹çš„å…¶ä½™éƒ¨åˆ†ä¸å…¬å…ƒå‰ä¸€ä¸–çºªæœ‰å…³ï¼Œä½†å¤ªé˜³ä»ç„¶å›´ç»•åœ°çƒæ—‹è½¬ã€‚ä»é‡åŠ›åˆ°æ ¸ç‰©ç†ï¼Œå·²ç»åšå‡ºäº†è®¸å¤šå‡†ç¡®çš„ç§‘å­¦é¢„æµ‹ã€‚åœ¨ä¸è´¨ç–‘æƒå¨åŠ›é‡çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¡¨æ˜ï¼Œä½¿ç”¨é€‚å½“é•¿åº¦çš„æ æ†å¯ä»¥è½»æ¾åœ°æ¶ˆé™¤æŸäº›åè§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œå›é¡¾ä¸€ä¸‹æœåŠ¡å®šä½ç¬¦æ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¯ä»¥ç”¨äºä»€ä¹ˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœåŠ¡æ˜¯ä¸€ä¸ªè‡ªæ²»å¯¹è±¡ï¼Œåœ¨å…¶å†…éƒ¨å°è£…äº†ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶ä¸”å¯ä»¥å…·æœ‰æŒ‡å‘å…¶ä»–å¯¹è±¡çš„é“¾æ¥ã€‚å®é™…ä¸Šï¼Œä»»ä½•ç±»çš„å®ä¾‹éƒ½å¯ä»¥å……å½“æœåŠ¡ã€‚å¾ˆå¤šæ—¶å€™ï¼Œä»£æ›¿æœåŠ¡çš„æ¦‚å¿µï¼Œè€Œæ˜¯ä½¿ç”¨â€œç»ç†â€çš„æ¦‚å¿µã€‚ä½†æ˜¯ï¼Œå¸¸è§çš„æƒ…å†µæ˜¯é™æ€ç±»å……å½“ç®¡ç†å™¨ï¼Œè¯¥ç®¡ç†å™¨æ“ä½œå­˜å‚¨åº“æ•°æ®ã€‚æœåŠ¡çš„å®è´¨æ˜¯å®ƒæ˜¯è¯¥ç±»çš„å®ä¾‹ï¼Œå¹¶å…·æœ‰éšä¹‹è€Œæ¥çš„æ‰€æœ‰åæœã€‚è¿™æ„å‘³ç€å®ƒä¸èƒ½åœ¨çœŸç©ºä¸­å­˜åœ¨-åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¿…é¡»å…·æœ‰ä¸å…¶è¿æ¥çš„è½½ä½“ã€‚è¿™æ ·çš„è½½ä½“æ˜¯æœåŠ¡å®šä½å™¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”¨æˆ·ï¼ˆåº”ç”¨ç¨‹åºæˆ–å¼€å‘äººå‘˜ï¼‰ä»æœåŠ¡å®šä½å™¨è¯·æ±‚æŒ‡å®šç±»å‹çš„æœåŠ¡ï¼Œå¹¶æ¥æ”¶å‡†å¤‡ä½¿ç”¨çš„å®ä¾‹ã€‚ä¸æŠ½è±¡å·¥å‚éå¸¸ç›¸ä¼¼ï¼Œå¯¹å—ï¼Ÿä¸åŒä¹‹å¤„åœ¨äºï¼Œæ¯æ¬¡æ‚¨ä»æœåŠ¡å®šä½å™¨è¯·æ±‚æŒ‡å®šç±»å‹çš„å®ä¾‹æ—¶ï¼Œéƒ½ä¼šä¸€æ¬¡åˆä¸€æ¬¡æ”¶åˆ°ç›¸åŒçš„å®ä¾‹ï¼Œè¯¥å®ä¾‹å­˜å‚¨å·²ä½¿ç”¨çš„æ•°æ®ã€‚æœåŠ¡çœ‹èµ·æ¥åƒä¸€ä¸ªå…¸å‹çš„å•ä¾‹ï¼Œä½†æ˜¯äº‹å®å¹¶éå¦‚æ­¤ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºä»»æ„æ•°é‡çš„æœåŠ¡å®ä¾‹ï¼Œå¹¶è‡ªè¡Œå†³å®šä½¿ç”¨å®ƒä»¬ã€‚åŒæ—¶ï¼Œå®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªéƒ½å°†å°è£…æ‚¨ä¸€ç”Ÿä¸­å‘å¸ƒåœ¨å…¶ä¸­çš„æ•°æ®ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e0/yp/wf/e0ypwfrqeyyykocycqh6lz8gtjy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºä»€ä¹ˆè¿™æœ‰å¿…è¦ï¼Ÿæœ€æ˜æ˜¾å’Œæœ€å—æ¬¢è¿çš„ç¤ºä¾‹æ˜¯ç”¨æˆ·ä¸ªäººèµ„æ–™ã€‚å¦‚æœæ‚¨ä¸ä½¿ç”¨UserSettingsæˆ–CoreDataå½¢å¼çš„ä»»ä½•å­˜å‚¨ï¼Œåˆ™åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå­˜æœŸå†…ï¼Œæ‚¨å°†å¿…é¡»ä¿ç•™æŒ‡å‘UserProfileç±»å®ä¾‹çš„é“¾æ¥çš„æŸä¸ªä½ç½®ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºçš„å„ä¸ªå±å¹•ä¸Šä½¿ç”¨å®ƒã€‚æ­¤å¤–ï¼Œå¦‚æœè¿™æ ·çš„å®ä¾‹ä¸æ˜¯å•ä¾‹ï¼Œåˆ™å¿…é¡»å°†å…¶ä»ä¸€ç§å½¢å¼è½¬ç§»åˆ°å¦ä¸€ç§å½¢å¼ã€‚å½“æ‚¨åœ¨åº”ç”¨ç¨‹åºçš„æŸä¸ªå¼€å‘å‘¨æœŸä¸­å¿…é¡»åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç”¨æˆ·æˆ–ä¸€ä¸ªç‹¬ç«‹çš„å…¶ä»–ç”¨æˆ·æ—¶ï¼Œä¸å¯é¿å…åœ°ä¼šå‡ºç°å›°éš¾ã€‚ Singtonç«‹å³æˆä¸ºç“¶é¢ˆã€‚è€Œä¸”ï¼Œç‹¬ç«‹å®ä¾‹å¼€å§‹ä½¿åº”ç”¨ç¨‹åºé€»è¾‘è¿‡è½½ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„å¯¹å®ä¾‹æ„Ÿå…´è¶£çš„æ§åˆ¶å™¨çš„åŠ å…¥ï¼Œå…¶å¤æ‚åº¦å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hk/pm/yf/hkpmyf9gnih2yltehozvkdqdbew.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœåŠ¡å®šä½å™¨å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼šå¦‚æœæ‚¨æœ‰ä¸€ä¸ªæŠ½è±¡çš„UserProfileç±»ï¼Œå¹¶ä¸”ä»ç±»ç»§æ‰¿äº†ç‰¹å®šçš„ç±»DefaultUserPrifileå’ŒTemporatyUserProfileï¼ˆä½¿ç”¨ä¸€ä¸ªå®Œå…¨ç©ºçš„å®ç°ï¼Œå®é™…ä¸Šæ˜¯ç›¸åŒçš„ï¼‰ï¼Œé‚£ä¹ˆè®¿é—®æœåŠ¡å®šä½å™¨å°†è¿”å›ä¸¤ä¸ªç›¸åŒçš„ç‹¬ç«‹å¯¹è±¡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®šä½å™¨çš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯é€šè¿‡ä¸€ç³»åˆ—æ§åˆ¶å™¨ä¼ è¾“æ•°æ®å®ä¾‹ï¼šåœ¨ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨ä¸Šï¼Œåˆ›å»ºï¼ˆæ¥æ”¶ï¼‰å¯¹è±¡å¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œæœ€åï¼Œä½¿ç”¨åœ¨ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸Šè¾“å…¥çš„æ•°æ®ã€‚å¦‚æœæ§åˆ¶å™¨çš„æ•°é‡å¾ˆå¤§å¹¶ä¸”ä½äºå †æ ˆä¸Šï¼Œé‚£ä¹ˆä½¿ç”¨å§”æ‰˜æ¥å®ç°è¿™äº›ç›®çš„å°†éå¸¸å›°éš¾ã€‚åŒæ ·ï¼Œé€šå¸¸åœ¨å †æ ˆçš„æ ¹éƒ¨éœ€è¦æ˜¾ç¤ºæœ€å°åŒ–å †æ ˆåç«‹å³åœ¨å…¶é¡¶éƒ¨æ›´æ”¹çš„ä¿¡æ¯ï¼ˆæˆ‘ä»¬è®°ä½ï¼Œå †æ ˆå–œæ¬¢åˆ é™¤åœ¨å…¶å‰¯æœ¬ä¸­åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹ï¼‰ã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨å †æ ˆçš„é¡¶éƒ¨è·å¾—äº†æœåŠ¡å¹¶å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œç„¶åå¯åŠ¨äº†å †æ ˆçš„æŠ˜å ï¼Œåˆ™å½“æ ¹æ§åˆ¶å™¨å¯¹ç”¨æˆ·å¯ç”¨æ—¶ï¼Œä¿®æ”¹åçš„æ•°æ®å°†è¢«ä¿å­˜å¹¶å¯ä¾›æ˜¾ç¤ºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ‚¨ä½¿ç”¨â€œ Coordinatorâ€æ¨¡å¼ï¼ˆå¦‚å¤§å¤šæ•°æ•™ç¨‹ä¸­æ‰€è¿°ï¼‰ï¼ˆä¾‹å¦‚ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">here</font></a><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œåˆ™éœ€è¦å°†å…¶ç±»çš„å®ä¾‹æ”¾ç½®åœ¨AppDelegateä¸­æˆ–å°†æŒ‡å‘åè°ƒå™¨çš„é“¾æ¥ä¼ é€’ç»™æ‰€æœ‰å°†ä½¿ç”¨å®ƒã€‚å¿…è¦ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e0/yp/wf/e0ypwfrqeyyykocycqh6lz8gtjy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘æ›´å–œæ¬¢AppDelegateä¿æŒæ•´æ´ã€‚</font><font style="vertical-align: inherit;">ä»ICoordinatableç»§æ‰¿å¹¶è®¾ç½®åè°ƒå™¨å­—æ®µ-ä¸ä»…èŠ±è´¹æ—¶é—´ï¼ˆä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™ç›¸å½“äºé‡‘é’±ï¼‰ï¼Œè€Œä¸”è¿˜å‰¥å¤ºäº†é€šè¿‡æ•…äº‹æ¿è¿›è¡Œäººä¸ºå£°æ˜å¼ç¼–ç¨‹çš„å¯èƒ½æ€§ã€‚</font><font style="vertical-align: inherit;">ä¸ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬çš„æ–¹æ³•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¼˜é›…åœ°åˆ›å»ºåè°ƒå™¨å³æœåŠ¡ä¼šå¸¦æ¥ä»¥ä¸‹ä¼˜ç‚¹ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨æ— éœ€å…³å¿ƒç»´æŠ¤åè°ƒå™¨çš„å®Œæ•´æ€§ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åè°ƒå™¨åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­éƒ½å¯ç”¨ï¼Œå³ä½¿åœ¨é‚£äº›ä¸æ˜¯ä»ICoordinatableç»§æ‰¿çš„æ§åˆ¶å™¨ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»…åœ¨éœ€è¦æ—¶æ‰å¯åŠ¨åè°ƒå™¨ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¯ä»¥æŒ‰ä»»ä½•é¡ºåºå°†åè°ƒå™¨ä¸æƒ…èŠ‚æè¦ä¸€èµ·ä½¿ç”¨ï¼ˆæ–¹ä¾¿æ‚¨ä½¿ç”¨ï¼‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†åè°ƒå™¨ä¸æƒ…èŠ‚æè¦ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åˆ›å»ºä¸æ˜æ˜¾ä½†æœ‰æ•ˆçš„å¯¼èˆªæœºåˆ¶ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯åè°ƒå™¨åªæ˜¯â€œå¯¼èˆªå™¨â€æ¨¡å¼çš„ä¸€åŠï¼ˆä½¿ç”¨è·¯ç”±å™¨é€šè¿‡è®¡ç®—å‡ºçš„è·¯å¾„åœ¨åº”ç”¨ç¨‹åºä¸­ç§»åŠ¨çš„æœºåˆ¶ï¼‰ã€‚</font><font style="vertical-align: inherit;">å½“å®æ–½æ—¶ï¼Œå¤æ‚åº¦å¢åŠ äº†ä¸€ä¸ªæ•°é‡çº§ã€‚</font><font style="vertical-align: inherit;">å¯¼èˆªå™¨ä¸æœåŠ¡å®šä½å™¨ç»“åˆä½¿ç”¨çš„åŠŸèƒ½-è¿™æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä¸»é¢˜ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬å›åˆ°å®šä½å™¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¼è‡´æœåŠ¡å®šä½å™¨æŸåçš„åŸå› çš„å®¢è§‚åŸå› åŒ…æ‹¬å…¶ç»´æŠ¤ç‰¹å®šæœåŠ¡çš„å¤æ‚æ€§ä»¥åŠæ— æ³•æ§åˆ¶å®šä½å™¨çš„å†…å­˜çŠ¶æ€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºæœåŠ¡çš„ä¼ ç»Ÿæœºåˆ¶æ˜¯ä»¥ä¸‹ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="swift hljs">...
 <span class="hljs-type">ServiceLocator</span>.shared.addService(<span class="hljs-type">CurrentUserProvider</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">CurrentUserProviding</span>)<font></font>
...<font></font>
<span class="hljs-keyword">let</span> userProvider: <span class="hljs-type">UserProviding?</span> =  <span class="hljs-type">ServiceLocator</span>.shared.getService()
<span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> provider =  userProvider <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
<span class="hljs-keyword">self</span>.user = provider.currentUser()
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ–åƒè¿™æ ·ï¼š</font></font><br>
<br>
<pre><code class="swift hljs">&nbsp;<span class="hljs-keyword">if</span> let_:<span class="hljs-type">ProfileService</span> = <span class="hljs-type">ServiceLocator</span>.service() {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.addService(<span class="hljs-type">ProfileService</span>())<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp;<span class="hljs-keyword">let</span> service:<span class="hljs-type">ProfileService</span> = <span class="hljs-type">ServiceLocator</span>.service()!<font></font>
&nbsp; service.update(name: <span class="hljs-string">"MyName"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»–å¯æ€•å—ï¼Ÿ</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæ‚¨éœ€è¦æ³¨å†ŒæœåŠ¡ï¼Œç„¶åè§£å‹ç¼©å®ƒæ‰èƒ½ä½¿ç”¨å®ƒã€‚</font><font style="vertical-align: inherit;">åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¿è¯å®ƒåœ¨è¢«è¯·æ±‚æ—¶å°†å­˜åœ¨ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ç¬¬äºŒä¸ªå¹¶æ²¡æœ‰åœ¨éœ€è¦ä¹‹å‰åˆ›å»ºæœåŠ¡ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨éœ€è¦åœ¨è®¸å¤šåœ°æ–¹æ‹‰æœåŠ¡ï¼Œé‚£ä¹ˆé€‰æ‹©çš„æ›¿ä»£æ–¹æ³•ä¼šè®©æ‚¨å‘ç–¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯å°†æ‰€æœ‰è¿™äº›è½¬æ¢æˆè¿™æ ·çš„ä»£ç å¾ˆå®¹æ˜“ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ProfileService</span>.service.update(name: <span class="hljs-string">"MyName"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™é‡Œä¿è¯æœåŠ¡å®ä¾‹å­˜åœ¨ï¼Œå› ä¸ºå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç”±æœåŠ¡æœ¬èº«åˆ›å»ºã€‚</font><font style="vertical-align: inherit;">æ²¡ä»€ä¹ˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹è¯¥å®šä½å™¨çš„ç¬¬äºŒä¸ªè¦æ±‚æ˜¾ç„¶æ˜¯ç”±äºä»¥ä¸‹äº‹å®ï¼šä½¿ç”¨Cï¼ƒè¿›è¡Œæ¨¡å¼è·Ÿè¸ªçš„å¼€å‘äººå‘˜ä¼šå¿˜è®°åƒåœ¾æ”¶é›†å™¨çš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ä¼šè´¹å¿ƒåœ°æä¾›ä»ä¸å¿…è¦çš„å®ä¾‹ä¸­æ¸…é™¤å®šä½å™¨çš„èƒ½åŠ›ï¼Œå°½ç®¡è¿™ä¸€ç‚¹éƒ½ä¸å›°éš¾ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ProfileService</span>.service.remove()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨ä¸è¿™æ ·åšï¼Œé‚£ä¹ˆå½“æ‚¨è½¬åˆ°ProfileService.serviceï¼ˆï¼‰æ—¶ï¼Œæˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºä¸­çš„ä»»æ„ä½ç½®è·å–ä¸€ä¸ªå…ˆå‰å·²ç»ä½¿ç”¨è¿‡çš„æœåŠ¡çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ç¡®å®è¦åˆ é™¤ï¼ˆï¼‰ï¼Œåˆ™åœ¨è®¿é—®æœåŠ¡æ—¶ï¼Œæ‚¨å°†è·å¾—å¹²å‡€çš„å‰¯æœ¬ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ¸…é™¤æ•°æ®çš„é¢„å®šä¹‰éƒ¨åˆ†å¹¶ç»§ç»­ä½¿ç”¨åŒä¸€å®ä¾‹æ¥ä½¿æ–¹æ³•æˆä¸ºclearï¼ˆï¼‰ï¼Œè€Œä¸æ˜¯removeï¼ˆï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥æµ‹è¯•åº”ç”¨ç¨‹åºæ¼”ç¤ºäº†ä¸¤ä¸ªæœåŠ¡çš„åè°ƒå·¥ä½œï¼šç”¨æˆ·é…ç½®æ–‡ä»¶å’Œåè°ƒå™¨ã€‚åè°ƒå‘˜ä¸æ˜¯æœ¬æ–‡çš„ç›®çš„ï¼Œè€Œåªæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„ç¤ºä¾‹ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/d3/n5/pi/d3n5pivlyhibh_g6b9yoqrmpvpu.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è§†é¢‘æ˜¾ç¤ºï¼Œåœ¨å­—æ®µä¸­è¾“å…¥çš„å€¼å°†ä¼ è¾“åˆ°åº”ç”¨ç¨‹åºçš„æ¯ä¸ªåç»­å±å¹•ã€‚</font><font style="vertical-align: inherit;">ç„¶ååœ¨æœ€åä¸€ä¸ªå±å¹•ä¸Šï¼Œè°ƒç”¨åè°ƒå™¨ï¼Œä»¥ä¾¿ä»ç¬¬ä¸€ä¸ªå±å¹•å¯åŠ¨åº”ç”¨ç¨‹åºã€‚</font><font style="vertical-align: inherit;">è¯·æ³¨æ„ï¼Œæ­¤å¤„ä¸ä¼šå‘ç”Ÿä¼ ç»Ÿçš„å¯¼èˆªå †æ ˆæŠ˜å -å°†å…¶å®Œå…¨ä»å†…å­˜ä¸­æ¨å‡ºï¼Œç„¶åä»å…¶ä½ç½®å¼€å§‹æ–°çš„å †æ ˆã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨æ³¨é‡Šæ‰åˆ é™¤ä¸ªäººèµ„æ–™æœåŠ¡çš„è¡Œï¼Œåˆ™ç”¨æˆ·åå°†è¢«è½¬ç§»åˆ°ç¬¬ä¸€ä¸ªå±å¹•ï¼Œå°±åƒæˆ‘ä»¬æœ€å°åŒ–äº†å¯¼èˆªå †æ ˆä¸€æ ·ã€‚</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ProfileService</span>.service.remove()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ•´ä¸ªåº”ç”¨ç¨‹åºç”±ä¸¤ä¸ªè§†å›¾æ§åˆ¶å™¨ç»„æˆï¼Œå¹¶è¿›è¡Œæœ€å°‘çš„å‡†å¤‡å·¥ä½œã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/no/k_/sd/nok_sdvjddqny_nnk-v5te7tkhm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StartViewControllerï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StartViewController</span>: <span class="hljs-title">UIViewController</span> </span>{<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> nameField: <span class="hljs-type">UITextField!</span><font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.viewDidLoad()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.nameField.text = <span class="hljs-type">ProfileService</span>.service.info.name<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBAction</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">startAction</span><span class="hljs-params">(<span class="hljs-number">_</span> sender: UIButton)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ProfileService</span>.service.update(name: <span class="hljs-keyword">self</span>.nameField.text ?? <span class="hljs-string">""</span>)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">CoordinatorService</span>.service.coordinator.startPageController()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PageViewControllerï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PageViewController</span>: <span class="hljs-title">UIViewController</span> </span>{<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> nameLabel: <span class="hljs-type">UILabel!</span><font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.viewDidLoad()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.nameLabel.text = <span class="hljs-type">ProfileService</span>.service.info.name<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBAction</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">finishAction</span><span class="hljs-params">(<span class="hljs-number">_</span> sender: UIButton)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ProfileService</span>.service.remove()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">CoordinatorService</span>.service.coordinator.start()<font></font>
&nbsp; &nbsp; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨ä¸­ï¼Œåœ¨viewDidLoadï¼ˆï¼‰æ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å®ä¾‹ï¼Œå¹¶å°†ç”¨æˆ·åä¿¡æ¯åŠ è½½åˆ°è¾“å…¥å­—æ®µä¸­ã€‚åœ¨å•å‡»â€œç™»å½•â€æŒ‰é’®åï¼ŒæœåŠ¡æ•°æ®å°†å†æ¬¡æ›´æ–°ã€‚ä¹‹åï¼Œå°†å¼ºåˆ¶è½¬æ¢åˆ°å‘å¯¼çš„ç¬¬ä¸€é¡µã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å‘å¯¼å†…éƒ¨ï¼Œæ•°æ®æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ä½†æ˜¯è¯¥äº‹ä»¶ä»…åœ¨æƒ…èŠ‚æè¦çš„æœ€åä¸€ä¸ªå±å¹•ä¸Šç»‘å®šåˆ°æŒ‰é’®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çœ‹èµ·æ¥å¯èƒ½å¾ˆå¤æ‚ï¼Ÿä½†æ˜¯åœ¨è¿‡å»çš„5å¹´ä¸­ï¼Œæˆ‘ä¸æ–­é‡åˆ°ä¸äº†è§£å…¶å…¨éƒ¨å·¥ä½œåŸç†çš„å¼€å‘äººå‘˜ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç„¶ï¼Œæ‰€æœ‰ä¸»è¦å·¥ä½œéƒ½åœ¨å®šä½å™¨å’ŒæœåŠ¡æœ¬èº«ä¸­è¿›è¡Œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®šä½å™¨ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IService</span> </span>{
&nbsp; &nbsp; <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> service: <span class="hljs-type">Self</span> {<span class="hljs-keyword">get</span>}<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span></span><font></font>
}<font></font>
<span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IServiceLocator</span> </span>{
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">service</span>&lt;T&gt;<span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">T?</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServiceLocator</span>: <span class="hljs-title">IServiceLocator</span> </span>{<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> instance = <span class="hljs-type">ServiceLocator</span>()
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-built_in">lazy</span> <span class="hljs-keyword">var</span> services: [<span class="hljs-type">String</span>: <span class="hljs-type">Any</span>] = [:]<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-comment">// MARK: - Public methods</span>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">service</span>&lt;<span class="hljs-title">T</span>&gt;() -&gt; <span class="hljs-title">T</span>? </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> instance.service()<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">addService</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-title">_</span> <span class="hljs-title">service</span>: <span class="hljs-title">T</span>) </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> instance.addService(service)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">clear</span>() </span>{<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; instance.services.removeAll()<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">removeService</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-title">_</span> <span class="hljs-title">service</span>: <span class="hljs-title">T</span>) </span>{<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; instance.removeService(service)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">service</span>&lt;T&gt;<span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">T?</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> key = typeName(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> services[key] <span class="hljs-keyword">as</span>? <span class="hljs-type">T</span><font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-comment">// MARK: - Private methods</span>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> fun caddService&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-number">_</span> service: <span class="hljs-type">T</span>) {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> key = typeName(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; services[key] = service<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">removeService</span>&lt;T&gt;<span class="hljs-params">(<span class="hljs-number">_</span> service: T)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> key = typeName(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; services.removeValue(forKey: key)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">typeName</span><span class="hljs-params">(<span class="hljs-number">_</span> some: <span class="hljs-keyword">Any</span>)</span></span> -&gt; <span class="hljs-type">String</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> (some isAny.<span class="hljs-type">Type</span>) ? <span class="hljs-string">"\(some)"</span> : <span class="hljs-string">"\(type(of: some))"</span><font></font>
&nbsp; &nbsp; }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœä»”ç»†è§‚å¯Ÿï¼Œæ‚¨ä¼šå‘ç°å¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œæ¸…é™¤æ•´ä¸ªå®šä½å™¨æ•°æ®åŒºåŸŸï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ServiceLocator.clearï¼ˆï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœåŠ¡é…ç½®æ–‡ä»¶å¹¶ä¸å¤æ‚ï¼š</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfileService</span>: <span class="hljs-title">IService</span> </span>{<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> (<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> info = <span class="hljs-type">ProfileInfo</span>()<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">var</span> <span class="hljs-title">service</span>: <span class="hljs-title">ProfileService</span> </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> service: <span class="hljs-type">ProfileService</span> = <span class="hljs-type">ServiceLocator</span>.service() {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> service = <span class="hljs-type">ProfileService</span>()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.addService(service)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.info = <span class="hljs-type">ProfileInfo</span>()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.removeService(<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(name: String)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.info.name = name<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ProfileInfo</span> </span>{<font></font>
&nbsp; &nbsp; varname = <span class="hljs-string">""</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡åœ¨æœåŠ¡æœ¬èº«å†…éƒ¨ç§»åŠ¨æ•°æ®åŒºåŸŸï¼Œå¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–æ­¤æ“ä½œã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ä»¥è¿™ç§å½¢å¼ï¼Œæ•°æ®æ¨¡å‹å’ŒæœåŠ¡çš„è´£ä»»èŒƒå›´å˜å¾—å¾ˆæ¸…æ¥šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºæœåŠ¡çš„å·¥ä½œï¼Œæ‚¨å¯èƒ½éœ€è¦æ‰§è¡Œä¸€äº›å‡†å¤‡æ“ä½œï¼Œå°±åƒåˆ›å»ºåè°ƒå™¨æœåŠ¡ä¸€æ ·ã€‚</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CoordinatorService</span>: <span class="hljs-title">IService</span> </span>{<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> (<span class="hljs-keyword">set</span>)<span class="hljs-keyword">var</span> coordinator: <span class="hljs-type">MainCoordinator!</span><font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">var</span> navController: <span class="hljs-type">UINavigationController</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.coordinator.navigationController<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">var</span> <span class="hljs-title">service</span>: <span class="hljs-title">CoordinatorService</span> </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> service: <span class="hljs-type">CoordinatorService</span> = <span class="hljs-type">ServiceLocator</span>.service() {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> service = <span class="hljs-type">CoordinatorService</span>()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; service.load()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.addService(service)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.removeService(<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-comment">// MARK - Private</span>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">load</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> nc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-type">UINavigationController</span>()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; nc.navigationBar.isHidden = <span class="hljs-literal">true</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.coordinator&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-type">MainCoordinator</span>(navigationController:nc)<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°åœ¨å°†æœåŠ¡æ”¾ç½®åœ¨å®šä½å™¨ä¸­çš„æ—¶åˆ»ï¼Œåˆ›å»ºäº†å¯¼èˆªå †æ ˆå¹¶å°†å…¶ä¼ é€’ç»™åè°ƒå™¨ç±»å®ä¾‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯iOS 13ï¼ˆæ˜¾ç„¶åœ¨ä¸Šé¢ï¼‰ï¼Œé‚£ä¹ˆè¯·ç¡®ä¿ä¿®æ”¹SceneDelegateç±»ã€‚</font><font style="vertical-align: inherit;">æœ‰å¿…è¦ç¡®ä¿æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="swift hljs">&nbsp;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(<span class="hljs-number">_</span> scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> scene = (scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: scene)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; window.rootViewController = <span class="hljs-type">CoordinatorService</span>.service.navController
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.window = window
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">CoordinatorService</span>.service.coordinator.start()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; window.makeKeyAndVisible()<font></font>
&nbsp; &nbsp; }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘ä»¬æå–é»˜è®¤å¯¼èˆªå †æ ˆå¹¶å°†å…¶ä¸ä¸»åº”ç”¨ç¨‹åºçª—å£å…³è”ï¼Œç„¶åä½¿ç”¨StartViewControlleræ§åˆ¶å™¨æ‰“å¼€åº”ç”¨ç¨‹åºå¯åŠ¨çª—å£ã€‚</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">æµ‹è¯•ç”¨ä¾‹</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
çš„æºä»£ç </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯åœ¨GitHubä¸Šæ‰¾åˆ°</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN498174/index.html">å¦‚ä½•åœæ­¢æ‹…å¿ƒå¹¶å¼€å§‹ç›¸ä¿¡A / Bæµ‹è¯•</a></li>
<li><a href="../zh-CN498178/index.html">æˆ‘ä»¬åœ¨å®¶å·¥ä½œï¼šç…§ç‰‡ä¼ æ’­</a></li>
<li><a href="../zh-CN498180/index.html">ä½¿ç”¨PVS-Studioé™æ€åˆ†æå™¨é‡æ–°æ£€æŸ¥ç‰›é¡¿æ¸¸æˆåŠ¨åŠ›å­¦</a></li>
<li><a href="../zh-CN498186/index.html">åŸºäºç¥ç»ç½‘ç»œçš„è®¾è®¡äººå‘˜æœåŠ¡</a></li>
<li><a href="../zh-CN498192/index.html">ç±»å›ºé†‡åŒ–å¦†å“è¢‹ï¼šXDè®¾è®¡åŸå¸‚è…°åŒ…å®¡æŸ¥</a></li>
<li><a href="../zh-CN498196/index.html">FunCorpæ­£åœ¨å¯»æ‰¾è´¨é‡æ£€æŸ¥å·¥ç¨‹å¸ˆï¼šæ¥å—é‡‡è®¿å¹¶åœ¨åŒä¸€å¤©æ”¶åˆ°æŠ¥ä»·</a></li>
<li><a href="../zh-CN498200/index.html">æ³•è§„æŠ¥å‘Šæ•°æ®å¹³å°</a></li>
<li><a href="../zh-CN498202/index.html">ç™»é™†æ–‡æ‘˜ã€‚ä¿¡æ¯å®‰å…¨ä¸“å‘˜</a></li>
<li><a href="../zh-CN498206/index.html">åœ¨Golangä¸Šåˆ›å»ºä¸€ä¸ªgraphqlåç«¯</a></li>
<li><a href="../zh-CN498208/index.html">å®‰å…¨å‘¨17ï¼šLinuxæœåŠ¡å™¨æ”»å‡»çš„å½±å“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>