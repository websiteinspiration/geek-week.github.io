<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí± üëÑ ü§üüèª A localiza√ß√£o de um c√≥digo QR √© uma tarefa importante, imerecida priva√ß√£o de aten√ß√£o üë©üèø‚Äçüíª ü§Ωüèº ü§ü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Temos certeza de que hoje n√£o existe um leitor Habr que n√£o esteja familiarizado com os c√≥digos QR. Esses c√≥digos de barras bidimensionais est√£o por t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A localiza√ß√£o de um c√≥digo QR √© uma tarefa importante, imerecida priva√ß√£o de aten√ß√£o</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smartengines/blog/496528/"><img src="https://habrastorage.org/webt/5g/mo/eg/5gmoegkwyn0bmh_t_kewswuiboc.png" width="250" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temos certeza de que hoje n√£o existe um leitor Habr que n√£o esteja familiarizado com os c√≥digos QR. Esses c√≥digos de barras bidimensionais est√£o por toda parte. √â l√≥gico que no mundo existem muitas ferramentas que permitem adicionar c√≥digos QR ao seu projeto com algum grau de efici√™ncia. O ponto principal √© que essa efici√™ncia mencionada depende diretamente da qualidade da ferramenta usada para reconhecer os c√≥digos QR. E aqui vem o plug cl√°ssico: voc√™ pode resolver o problema (muito) bem e (muito) caro, ou pode de gra√ßa e de alguma forma. √â poss√≠vel modificar o free para que ele resolva bem o problema? Se estiver interessado, olhe embaixo do gato.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O reconhecimento de um c√≥digo QR em uma fotografia √© uma tarefa bem posta de vis√£o de m√°quina. Primeiramente, na tarefa, um objeto √© investigado, que foi originalmente projetado especialmente para reconhecimento "conveniente". Em segundo lugar, a tarefa em si √© dividida em v√°rias subtarefas compreens√≠veis independentes: localiza√ß√£o do c√≥digo QR, orienta√ß√£o do c√≥digo QR e decodifica√ß√£o direta do c√≥digo QR. Acontece que o dom√≠nio p√∫blico tem boas bibliotecas que podem resolver os dois √∫ltimos problemas: orienta√ß√£o e decodifica√ß√£o de um c√≥digo QR. Um problema: para decodifica√ß√£o de alta qualidade, essas bibliotecas esperam que uma boa imagem bin√°ria diretamente do c√≥digo de barras seja inserida. Por outro lado, pouca aten√ß√£o √© dada √† tarefa de localiza√ß√£o do c√≥digo de barras na imagem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em nossa experi√™ncia, quanto mais preciso voc√™ localizar um objeto de reconhecimento, mais f√°cil ser√° escolher as ferramentas corretas de pr√©-processamento e, de fato, reconhec√™-lo. Portanto, se voc√™ deseja melhorar a qualidade do reconhecimento de c√≥digos QR em seu projeto, comece com a moderniza√ß√£o de m√©todos para localizar c√≥digos QR. De fato, mesmo que mais tarde voc√™ precise binarizar uma imagem, √© muito mais eficiente (do ponto de vista qualitativo e computacional) binarizar uma regi√£o com um c√≥digo de barras do que toda a imagem original. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, mostraremos como melhorar facilmente a qualidade da localiza√ß√£o de c√≥digos QR usando m√©todos cl√°ssicos de processamento de imagem, al√©m de fornecer caracter√≠sticas num√©ricas da efic√°cia do algoritmo proposto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Falaremos sobre a maneira original de localizar c√≥digos QR nas imagens, usando o m√©todo Viola e Jones modificado como base.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota informativa sobre o t√≥pico do artigo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta se√ß√£o, descrevemos os principais recursos do c√≥digo QR que s√£o usados ‚Äã‚Äãpara construir o m√©todo de localiza√ß√£o, bem como uma breve descri√ß√£o da vers√£o original do m√©todo Viola e Jones.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo QR</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo QR (abrevia√ß√£o de C√≥digo de Resposta R√°pida) √© um c√≥digo de barras bidimensional desenvolvido no Jap√£o em meados dos anos 90 para a ind√∫stria automotiva. </font><font style="vertical-align: inherit;">Devido √† capacidade de ler rapidamente e maior capacidade em compara√ß√£o com c√≥digos de barras lineares, o sistema de c√≥digo QR tornou-se popular em todo o mundo em v√°rias √°reas da vida.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao contr√°rio dos c√≥digos de barras lineares padr√£o, que geralmente s√£o digitalizados por hardware, um c√≥digo QR √© frequentemente digitalizado por uma c√¢mera. </font><font style="vertical-align: inherit;">A estrutura do c√≥digo QR est√° totalmente descrita na ISO / IEC 18004 (A norma ISO / IEC 18004). </font><font style="vertical-align: inherit;">Para criar um algoritmo de reconhecimento robusto para essas imagens, o c√≥digo QR possui alguns pontos de refer√™ncia que formam um padr√£o de fun√ß√£o: tr√™s quadrados nos cantos da imagem do c√≥digo de barras (chamados padr√µes de localiza√ß√£o) e quadrados menores de sincroniza√ß√£o em toda a imagem do c√≥digo de barras (chamados padr√µes de alinhamento) . </font><font style="vertical-align: inherit;">Esses pontos permitem normalizar o tamanho da imagem e sua orienta√ß√£o.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qp/ut/kn/qputknsphjra1c0nwyoxpfnwniy.png"><br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">Estrutura de c√≥digo QR</font></font></i></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora visualmente todos os c√≥digos QR sejam semelhantes entre si, c√≥pias diferentes de c√≥digos QR, dependendo da quantidade de dados codificados, podem ter um layout diferente de elementos internos. </font><font style="vertical-align: inherit;">Al√©m disso, os chamados c√≥digos QR de designer s√£o muito populares, nos quais, em vez da parte de informa√ß√µes adicionais que garantem o reconhecimento de alta qualidade do c√≥digo de barras, s√£o utilizados elementos gr√°ficos de terceiros (logotipos, emblemas, inscri√ß√µes etc.). </font><font style="vertical-align: inherit;">Todos esses recursos dos c√≥digos QR devem ser levados em considera√ß√£o ao criar m√©todos para localiza√ß√£o e reconhecimento de c√≥digos QR.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1k/f2/f0/1kf2f024blycs3yruzzsk3cnxr0.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">Diferentes op√ß√µes v√°lidas de c√≥digo QR</font></font></i></p><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo Viola e Jones</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas os pregui√ßosos de Habr√© ainda n√£o escreveram sobre o m√©todo de Viola e Jones. At√© n√≥s do nosso bloco fizemos isso v√°rias vezes (por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). E ainda assim, consideramos necess√°rio, muito brevemente, literalmente em dois par√°grafos, dizer o que √©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O m√©todo de detec√ß√£o de objetos Viola e Jones foi desenvolvido para procurar rostos em uma imagem em tempo real. Este m√©todo reduz o problema de detec√ß√£o ao problema de classifica√ß√£o bin√°ria em cada ponto da imagem, ou seja, para cada regi√£o retangular da imagem tirada com todos os tipos de mudan√ßas e escalas, a hip√≥tese da presen√ßa do objeto desejado na regi√£o √© verificada usando um classificador pr√©-treinado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como espa√ßo de recurso, o m√©todo Viola e Jones usa recursos retangulares de Haar, cujo valor √© calculado como a diferen√ßa entre as somas de brilho dos pixels das √°reas da imagem dentro de ret√¢ngulos adjacentes. Para calcular efetivamente o valor dos recursos de Haar, √© usada uma imagem integrada, tamb√©m conhecida na literatura sob o termo tabela de √°rea somada. Um bin√°rio ‚Äúfraco‚Äù classificador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ó</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Üí {-1, + 1}, geralmente apresentado como uma √°rvore de reconhecimento com um ramo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y7/ly/se/y7lyseencrhtwi3hefy1xsl3kya.png" width="237"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
onde </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- o valor limite do atributo e a paridade do classificador, respectivamente. </font><font style="vertical-align: inherit;">Em seguida, usando o m√©todo de aprendizado de m√°quina AdaBoost, um classificador "forte" √© constru√≠do como uma superposi√ß√£o linear dos classificadores "fracos" acima. </font><font style="vertical-align: inherit;">A alta velocidade do m√©todo Viola e Jones √© garantida pelo uso de uma cascata de classificadores "fortes", que permite localizar regi√µes de imagem "vazias" (sem objetos) para um pequeno n√∫mero de c√°lculos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmo de detec√ß√£o de c√≥digo QR</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao construir um m√©todo para localizar um c√≥digo QR, contamos com os seguintes recursos da tarefa. Primeiro, o m√©todo desenvolvido deve ter alto desempenho para uso em sistemas de reconhecimento que operam em tempo real. Em segundo lugar, o m√©todo deve ser resistente √† distor√ß√£o permitida do c√≥digo de barras na imagem. Em terceiro lugar, o m√©todo deve levar em considera√ß√£o toda a variabilidade existente dos c√≥digos QR. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como mencionado acima, escolhemos o m√©todo de Viola e Jones como o m√©todo fundamental. Esse m√©todo se comprovou em v√°rias tarefas de pesquisa de objetos r√≠gidos, enquanto o m√©todo fornece o desempenho necess√°rio. Mas na vers√£o original, o m√©todo Viola e Jones n√£o pode ser usado pelos seguintes motivos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no m√©todo cl√°ssico de Viola e Jones, uma fam√≠lia de atributos de Haar √© usada para "enfatizar" os recursos texturais do objeto e, no nosso caso, embora o c√≥digo QR seja composto por barras pretas e brancas, sua distribui√ß√£o √© muito diferente do c√≥digo de barras para o c√≥digo de barras;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o m√©todo cl√°ssico de Viola e Jones √© projetado para o mesmo tipo de detec√ß√£o de objetos em uma determinada orienta√ß√£o, o que tamb√©m n√£o √© observado em nossa tarefa.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o m√©todo Viola e Jones possa ser aplicado para resolver o problema, usamos a fam√≠lia original de recursos de limite e um classificador de alto n√≠vel na forma de uma √°rvore de decis√£o. </font><font style="vertical-align: inherit;">A primeira modifica√ß√£o permitir√° focar nas caracter√≠sticas de contorno do objeto estudado, e n√£o na textura. </font><font style="vertical-align: inherit;">A segunda modifica√ß√£o permitir√° criar um √∫nico classificador que pode detectar objetos vari√°veis. </font><font style="vertical-align: inherit;">A seguir, falaremos um pouco mais sobre cada modifica√ß√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sinais de gradiente de Haar.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para construir um detector eficaz de c√≥digos QR, usamos uma fam√≠lia especial de recursos de gradiente [1]. </font><font style="vertical-align: inherit;">Esses sinais s√£o sinais retangulares de Haar, calculados no topo do mapa de limites direcionados, o que pode melhorar significativamente seu poder generalizador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mapa de limites direcionais √© uma imagem do m√≥dulo de gradiente, que tamb√©m leva em conta a dire√ß√£o preferida do gradiente no ponto ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), definida como a discretiza√ß√£o do √¢ngulo da borda nas dire√ß√µes horizontal, vertical, + 45 ¬∞ e ‚Äì45 ¬∞. </font><font style="vertical-align: inherit;">Para construir um detector de c√≥digo QR, usamos dois tipos de mapa de fronteira direcional: um mapa de fronteira reta e um mapa de face diagonal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deixe a imagem original </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) Em seguida, pode-se calcular o valor aproximado do derivado ao longo das direc√ß√µes verticais e horizontais com o operador de Sobel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pf/yg/_p/pfyg_pwalnr_vdg6dm-fi_jnv9o.png" width="466"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, utilizando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g </font></font></i><sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g </font></font></i><sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , √© poss√≠vel calcular a direc√ß√£o da inclina√ß√£o em cada ponto da imagem: O </font></font><br>
<br>
<img src="https://habrastorage.org/webt/28/7w/w1/287ww1jnk9sr3fbrtgsr-q4ygoc.png" width="301"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mapa de bordas retas cont√©m fronteiras essencialmente horizontais e verticais e √© calculado como se segue: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/bj/ie/vibjieyjzpf4rmokqrwozdru7ba.png" width="328"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mapa bordas diagonais cont√™m principalmente bordas ao longo das diagonais e √© calculado da seguinte forma: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/zy/zy/kgzyzyc1owgaxci7skuiotoirw4.png" width="405"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No topo do mapa constru√≠do de bordas direcionadas (diagonal ou reta), s√£o calculados sinais retangulares de Haar. Diferentemente dos recursos cl√°ssicos de Haar, esses recursos de limite generalizam objetos de po√ßo que cont√™m um grande n√∫mero de limites.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mv/mo/fd/mvmofd__pwr9myrhvp4xxh9-_gi.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">Ilustra√ß√£o de um mapa de bordas direcionadas: (a) a imagem original de um c√≥digo QR, (b) um mapa de bordas retas, (c) uma imagem de um c√≥digo QR girado (d) um mapa das bordas diagonais de um c√≥digo QR girado</font></font></i></p><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A √°rvore decisiva dos classificadores fortes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √°rvore dos classificadores fortes [2] √© um tipo de √°rvore de decis√£o bin√°ria: o n√≥ da √°rvore √© um classificador forte, na extremidade direita da qual existem sub-janelas supostamente contendo o objeto e √† esquerda - aquelas que n√£o foram reconhecidas como objeto, respectivamente. </font><font style="vertical-align: inherit;">A resposta final √© dada apenas em folhas. </font><font style="vertical-align: inherit;">O classificador em cascata cl√°ssico descrito no trabalho original de Viola e Jones √©, de fato, um classificador em √°rvore contendo apenas um resultado "positivo" (folha) e muitos resultados "negativos".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em [2], √© mostrado que qualquer caminho da raiz at√© o n√≥ mais baixo do classificador em √°rvore pode ser representado como uma cascata na qual os classificadores fortes individuais entram com uma resposta invertida. </font><font style="vertical-align: inherit;">Gra√ßas a isso, √© poss√≠vel construir um algoritmo de aprendizado para o classificador em √°rvore, que usa o procedimento de treinamento do classificador em cascata cl√°ssico para ensinar caminhos individuais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O classificador em √°rvore permite treinar classificadores que s√£o mais eficazes em termos de integridade para objetos vari√°veis ‚Äã‚Äãem compara√ß√£o com classificadores em cascata cl√°ssicos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados experimentais</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como parte de um experimento para avaliar a efic√°cia do m√©todo de localiza√ß√£o de c√≥digo de barras proposto neste artigo, foi preparado um conjunto de imagens de c√≥digo de barras consistindo em 264 imagens. </font><font style="vertical-align: inherit;">O tamanho f√≠sico das imagens era de cerca de 1 MPix. </font><font style="vertical-align: inherit;">Cada imagem cont√©m apenas um c√≥digo QR em uma orienta√ß√£o arbitr√°ria, a √°rea do c√≥digo de barras era pelo menos 10% da √°rea total da imagem. </font><font style="vertical-align: inherit;">A figura abaixo mostra exemplos de imagens do conjunto montado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rb/vv/bd/rbvvbdyp8t7mffaqa38b4olv-_m.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">Exemplos de imagens do conjunto de imagens de c√≥digo de barras montado</font></font></i></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O conjunto de imagens preparado foi dividido em um conjunto de treinamento e um conjunto de teste. O tamanho da amostra de treinamento foi de 88 imagens, o tamanho da amostra de teste foi de 176 imagens. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O conjunto de treinamento foi usado tanto na prepara√ß√£o de exemplos positivos quanto na prepara√ß√£o de exemplos negativos. Como o n√∫mero inicial de exemplos positivos era pequeno, usamos a tecnologia de aumento de dados [3]. Em particular, aplicamos a rota√ß√£o ao redor do centro do c√≥digo de barras em incrementos de 15‚Å∞. Ap√≥s o aumento, o n√∫mero de exemplos positivos foi 2088 exemplos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando os mesmos exemplos positivos e negativos, treinamos tr√™s detectores de c√≥digo QR: um classificador em cascata cl√°ssico com recursos padr√£o do Haar, um classificador em cascata cl√°ssico com recursos de limite e um classificador em √°rvore com recursos de limite. </font><font style="vertical-align: inherit;">O primeiro classificador em cascata consistia em 12 n√≠veis e continha um total de 58 atributos. </font><font style="vertical-align: inherit;">O segundo classificador em cascata consistia em 8 n√≠veis e continha um total de 39 atributos. </font><font style="vertical-align: inherit;">O classificador de √°rvore treinado consistia em 39 v√©rtices, continha um total de 110 caracteres, e o caminho m√°ximo do topo para a folha era 9. Abaixo est√° um diagrama do classificador de √°rvore treinado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0e/pp/rx/0epprxrwsrqho130ykkanqj_cs8.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">Esquema do classificador de √°rvore treinado</font></font></i></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para avaliar a qualidade dos detectores constru√≠dos de c√≥digos QR, usamos o m√≥dulo de decodifica√ß√£o de c√≥digo de barras da biblioteca de vis√£o computacional de c√≥digo aberto OpenCV. </font><font style="vertical-align: inherit;">No conjunto de imagens de teste preparado (que, como mencionado acima, consistia em 176 imagens), lan√ßamos o m√≥dulo de decodifica√ß√£o sem nenhum pr√©-processamento especial, bem como ap√≥s uma pesquisa preliminar de c√≥digos QR usando detectores treinados. </font><font style="vertical-align: inherit;">Abaixo est√£o os resultados da decodifica√ß√£o do c√≥digo de barras:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T√≠tulo experimental</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contagem de imagens decodificadas</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualidade de decodifica√ß√£o</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Somente OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">104</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59,09%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VJ (Recursos em escala de cinza, classificador em cascata) + OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">105</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59,66%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VJ (Recursos de borda, Classificador em cascata) + OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">69,89%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VJ (Recursos de Borda, Classificador de √Årvores) + OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">136</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">77,27%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tabela mostra que a localiza√ß√£o preliminar do c√≥digo QR usando o m√©todo descrito pode melhorar significativamente a qualidade da decodifica√ß√£o de c√≥digo de barras (o n√∫mero de erros de decodifica√ß√£o diminuiu 44%). Al√©m disso, os resultados tamb√©m demonstram que a aplica√ß√£o do m√©todo original de Viola e Jones (com recursos cl√°ssicos de Haar e um classificador em cascata) n√£o √© eficaz na tarefa de localizar c√≥digos QR.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos ver com que precis√£o cada classificador localiza o c√≥digo de barras. </font><font style="vertical-align: inherit;">A figura da esquerda para a direita mostra os resultados da detec√ß√£o do mesmo c√≥digo de barras com um classificador em cascata cl√°ssico com recursos padr√£o do Haar, um classificador em cascata cl√°ssico com recursos de limite e um classificador em √°rvore com recursos de limite. </font><font style="vertical-align: inherit;">Pode-se observar que o classificador em √°rvore fornece a melhor precis√£o da localiza√ß√£o do c√≥digo de barras, levando em considera√ß√£o a variabilidade dos c√≥digos QR.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o-/um/wr/o-umwrnaxpniz5oziynxxm-bjja.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">Ilustra√ß√£o do trabalho de detectores treinados na mesma imagem</font></font></i></p><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje, os c√≥digos QR s√£o usados ‚Äã‚Äãem v√°rias √°reas da vida: no setor de publicidade para codifica√ß√£o de URLs, no segmento estadual como parte de servi√ßos eletr√¥nicos, etc. </font><font style="vertical-align: inherit;">Apesar da distribui√ß√£o extremamente alta desses c√≥digos de barras, as bibliotecas de c√≥digo aberto existentes se concentram no processo de decodifica√ß√£o, n√£o no problema de localiza√ß√£o. </font><font style="vertical-align: inherit;">Mas, para ser sincero, o verdadeiro objetivo deste artigo n√£o era tanto descrever um m√©todo eficaz de localiza√ß√£o de c√≥digos QR, mas sim tentar dizer a voc√™, caro leitor, como, usando o pensamento cient√≠fico e a an√°lise de sistemas, entendendo como usar as ferramentas cl√°ssicas de processamento de imagem digital, voc√™ pode liberar bibliotecas trazem para o n√≠vel industrial real. </font><font style="vertical-align: inherit;">Obrigado pela aten√ß√£o.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de fontes utilizadas</font></font></b><div class="spoiler_text">[1] A.A. Kotov, S.A. Usilin, S.A. Gladilin, and D.P. Nikolaev, ‚ÄúConstruction of robust features for detection and classification of objects without characteristic brightness contrasts,‚Äù Journal of information technologies and computing systems, 1, 53-60, (2014).<br>
[2] A. Minkina, D. Nikolaev, S. Usilin, and V. Kozyrev, ‚ÄúGeneralization of the Viola-Jones method as a decision tree of strong classifiers for real-time object recognition in video stream,‚Äù in Seventh International Conference on Machine Vision (ICMV 2014), 9445, International Society for Optics and Photonics, (2015), doi:10.1117/12.2180941.<br>
[3] D. P. Matalov, S. A. Usilin, and V. V. Arlazarov, ‚ÄúModification of the viola-jones approach for the detection of the government seal stamp of the russian federation,‚Äù in Eleventh International Conference on Machine Vision (ICMV 2018), 11041, International Society for Optics and Photonics, (2019), doi:10.1117/12.2522793.</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt496510/index.html">Como N√ÉO se tornar um Game Designer</a></li>
<li><a href="../pt496512/index.html"># 05 - E um byte inteiro n√£o √© suficiente ... | Animes</a></li>
<li><a href="../pt496514/index.html">IPIP IPsec VPN tunnel entre a m√°quina Linux e o Mikrotik por tr√°s do provedor NAT</a></li>
<li><a href="../pt496516/index.html">Bot de telegrama em python vs COVID-19</a></li>
<li><a href="../pt496518/index.html">Como chegamos ao controle remoto</a></li>
<li><a href="../pt496532/index.html">Verificamos a n√≥s mesmos: como implantar e como administrar 1C: Fluxo de documentos dentro da empresa 1C</a></li>
<li><a href="../pt496536/index.html">DeepCode: vista lateral</a></li>
<li><a href="../pt496538/index.html">Fractais em Python. Passo a passo</a></li>
<li><a href="../pt496542/index.html">O tr√°fego da Internet na Europa cresceu uma vez e meia. Fornecedores de backbone registram registros de carregamento</a></li>
<li><a href="../pt496544/index.html">Hackathon on-line de projetos para trabalhadores independentes: 500 mil rublos por suas id√©ias e apoio do Servi√ßo Fiscal Federal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>