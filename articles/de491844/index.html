<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎪 🐸 🛌🏼 Automatische Visualisierung der Testabdeckung 👿 👨🏾 👨🏼‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Moderne Berichterstattungsberichte sind in einigen Fällen eher nutzlos, und die Methoden zu ihrer Messung sind hauptsächlich nur für Entwickler geeign...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Automatische Visualisierung der Testabdeckung</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/491844/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moderne Berichterstattungsberichte sind in einigen Fällen eher nutzlos, und die Methoden zu ihrer Messung sind hauptsächlich nur für Entwickler geeignet. </font><font style="vertical-align: inherit;">Sie können jederzeit den Prozentsatz der Abdeckung ermitteln oder den Code anzeigen, der während der Tests nicht verwendet wurde. Was ist jedoch, wenn Sie Transparenz, Einfachheit und Automatisierung wünschen? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_r/ms/rr/_rmsrr9pfqqgiu7vvskxe93g2po.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter dem Schnitt - Video und Transkript eines Berichts von Artem Eroshenko von Qameta Software von der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heisenbug-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konferenz </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Er stellte mehrere entwickelte einfache und elegante Lösungen vor, mit denen das Yandex.Verticals-Team die Abdeckung von Tests bewerten kann, die von Testautomatisierungsingenieuren geschrieben wurden. </font><font style="vertical-align: inherit;">Artem zeigt Ihnen, wie Sie schnell herausfinden können, was abgedeckt ist, wie abgedeckt ist, welche Tests bestanden wurden, und sofort visuelle Berichte anzeigen können.</font></font><br>
<br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/N2k4LKPWuSw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich heiße Artyom Eroshenko </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eroshenkoam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich mache seit über 10 Jahren Testautomatisierung. </font><font style="vertical-align: inherit;">Ich war ein Testautomatisierungsmanager, ein Toolentwicklungsteammanager, ein Toolentwickler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Moment bin ich Berater auf dem Gebiet der Testautomatisierung und arbeite mit mehreren Unternehmen zusammen, mit denen wir Prozesse aufbauen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich bin auch der Entwickler und geheime Manager von Allure Report. </font><font style="vertical-align: inherit;">Wir haben kürzlich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine coole Sache behoben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Jetzt gibt es in JUnit 5 Fixtures.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atlas Framework</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meine Entwicklung ist das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atlas Framework</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn jemand 2012 mit der Automatisierung begann, als Java-Webtreiber gerade erst ihren Weg begannen, habe ich in diesem Moment eine Open-Source-Bibliothek namens </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML Elements erstellt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Html Elements hat seine Fortsetzung und sein Umdenken in der Atlas-Bibliothek, die auf Schnittstellen basiert: Es gibt keine Klassen als solche, keine Felder, eine sehr praktische, leichte und leicht erweiterbare Bibliothek. Wenn Sie es verstehen möchten, können Sie den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">oder den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bericht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein Bericht widmet sich dem Problem der Testautomatisierung und hauptsächlich Beschichtungen. Als Hintergrund möchte ich darauf verweisen, wie die Testprozesse in Yandex.Verticals organisiert sind.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie funktioniert die Automatisierung in Branchen?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Testautomatisierungsteam von Yandex.Verticals besteht nur aus vier Personen, die vier Services automatisieren: Yandex.Avto, Work, Real Estate und Parts. </font><font style="vertical-align: inherit;">Das heißt, dies ist ein kleines Team von Automaten, die viel tun. </font><font style="vertical-align: inherit;">Wir automatisieren die API, das Webinterface, mobile Anwendungen und so weiter. </font><font style="vertical-align: inherit;">Insgesamt haben wir ungefähr 15,5 Tausend Tests, die auf verschiedenen Ebenen durchgeführt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Stabilität der Tests im Team beträgt ungefähr 97%, obwohl einige meiner Kollegen ungefähr 99% sagen. Diese hohe Stabilität wird gerade durch kurze Tests mit sehr nativen Technologien erreicht. In der Regel dauern unsere Tests ungefähr 15 Minuten, was sehr umfangreich ist, und wir führen sie in ungefähr 800 Threads aus. Das heißt, wir haben 800 Browser, die gleichzeitig starten - ein solcher Stresstest unserer Tests. Als Eisen verwenden wir Selenoid (Aerokube). Weitere Informationen zum Testen der Automatisierung in Yandex.Verticals finden Sie in meinem Bericht von 2017, der immer noch relevant ist.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/gwXpYB6ZayE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiteres Merkmal unseres Teams ist, dass </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir alles automatisieren</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , einschließlich manueller Tester, die einen großen Beitrag zur Entwicklung der Testautomatisierung leisten. Für sie organisieren wir Schulen, bringen ihnen Tests bei, lehren, wie man Tests für die API und das Webinterface schreibt, und oft helfen sie dabei, die Tests zu begleiten. Somit können die Jungs, die selbst für die Veröffentlichung verantwortlich sind, den Test bei Bedarf sofort korrigieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Verticals schreiben Testentwickler Tests und sind so sehr an der Testentwicklung interessiert, dass sie mit uns konkurrieren. Weitere Informationen zu diesem Prozess finden Sie im Bericht </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Der vollständige Testzyklus von React-Anwendungen“.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wo Alexei Androsov und Natalya Stus darüber sprechen, wie sie parallel zu unseren Java-End-to-End-Tests Unit-Tests auf Puppeteer schreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testautomatisierungsingenieure schreiben auch Tests in unser Team. </font><font style="vertical-align: inherit;">Aber oft entwickeln wir neue Ansätze, um sie zu optimieren. </font><font style="vertical-align: inherit;">Zum Beispiel haben wir Screenshot-Tests implementiert, Tests durch Moki, Reduzierung der Tests. </font><font style="vertical-align: inherit;">Im Allgemeinen ist unser Bereich hauptsächlich Softwareentwickler im Test (SDET), wir beschäftigen uns mehr mit dem Schreiben von Tests, und die Testbasis wird teilweise von uns gefüllt und von manuellen Testern unterstützt.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwickler helfen uns auch, und das ist cool.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem, das bei diesen Prozessen auftritt, ist, dass wir nicht immer verstehen, was bereits abgedeckt ist und was nicht. </font><font style="vertical-align: inherit;">Bei 15.000 Tests ist nicht immer klar, was genau wir überprüfen. </font><font style="vertical-align: inherit;">Dies gilt insbesondere im Zusammenhang mit der Kommunikation mit Managern, die natürlich nicht testen, sondern überwachen und Fragen stellen. </font><font style="vertical-align: inherit;">Insbesondere wenn sich die Frage stellt, ob eine bestimmte Schaltfläche in der Benutzeroberfläche oder im Ablauf getestet wurde, ist die Beantwortung schwierig, da Sie zum Testcode gehen und diese Informationen anzeigen müssen.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was wird getestet und was nicht?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie viele Tests in verschiedenen Sprachen haben und von Personen mit unterschiedlichem Ausbildungsgrad geschrieben wurden, stellt sich früher oder später die Frage, ob sich diese Tests überhaupt nicht überschneiden. </font><font style="vertical-align: inherit;">Im Zusammenhang mit diesem Problem wird das Thema Berichterstattung besonders relevant. </font><font style="vertical-align: inherit;">Ich werde drei Schlüsselthemen skizzieren:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Möglichkeiten zur effektiven Messung der Abdeckung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abdeckung für API-Tests.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abdeckung für Webtests.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns zunächst feststellen, dass es zwei Möglichkeiten gibt, Anforderungen abzudecken: Anforderungen abdecken und Produktcode abdecken.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie die Anforderungsabdeckung gemessen wird</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie die Anforderungsabdeckung am Beispiel von auto.ru. Anstelle des auto.ru-Testers würde ich Folgendes tun. Erstens würde ich googeln und sofort eine Tabelle mit speziellen Anforderungen finden. Dies ist die Grundlage für die Anforderungsabdeckung. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nf/v6/fh/nfv6fhqm8ukolt_4bv6bxyycohm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Tabelle sind die Namen der Anforderungen links angegeben. In diesem Fall: Konto, Anzeigen, Überprüfung und Zahlung, dh Überprüfung der Ankündigung. Im Allgemeinen ist dies die Abdeckung. Das Detail des linken Teils hängt von der Stufe des Testers ab. Zum Beispiel haben Ingenieure von Google 49 Arten von Beschichtungen, die auf verschiedenen Ebenen getestet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die rechte Seite der Tabelle enthält die Anforderungsattribute. Wir können alles in Form von Attributen verwenden, zum Beispiel: Priorität, Abdeckung und Status. Dies kann das Datum der letzten Veröffentlichung sein.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ox/3a/kj/ox3akjf5fcmwxlmt_utf3uhnsas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher erscheinen einige Daten in der Tabelle. Sie können professionelle Tools verwenden, um eine Anforderungstabelle zu verwalten, z. B. TestRail. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der rechten Seite finden Sie Informationen zum Baum: Die Ordner geben an, welche Anforderungen wir haben und wie sie abgedeckt werden können. Es gibt Testfälle und so weiter. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wh/he/aj/whheajlxedwdqlmspx_iofg4wai.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Vertikalen sieht dieser Prozess folgendermaßen aus: Ein manueller Tester beschreibt die Anforderungen und Testfälle, übergibt sie dann an die Testautomatisierung, und das automatisierte Tool schreibt Code für diese Tests. Darüber hinaus erhielten wir früher detaillierte Testfälle, in denen der manuelle Tester die gesamte Struktur beschrieb. Dann machte jemand eine Verpflichtung auf dem Github, und der Test begann vorteilhaft zu sein.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was sind die Vor- und Nachteile dieses Ansatzes? Das Plus ist, dass dieser Ansatz unsere Fragen beantwortet. Wenn der Manager fragt, was wir behandelt haben, öffne ich das Tablet und zeige, welche Funktionen abgedeckt sind. Andererseits müssen diese Anforderungen immer auf dem neuesten Stand gehalten werden und sind sehr schnell veraltet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie 15.000 Tests haben, ist das Betrachten von TestRail wie das Betrachten eines Sterns im Weltraum: Er explodierte lange Zeit und das Licht hat Sie gerade erreicht. Sie sehen sich den aktuellen Testfall an, der schon lange und unwiderruflich veraltet ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Problem ist schwer zu lösen. </font><font style="vertical-align: inherit;">Für uns sind dies im Allgemeinen zwei verschiedene Welten: Es gibt eine Welt der Automatisierung, die sich nach ihren eigenen Gesetzen dreht, in der jeder fehlgeschlagene Test sofort behoben wird, und es gibt eine Welt manueller Tests und Anforderungskarten. </font><font style="vertical-align: inherit;">Die Wand zwischen ihnen ist undurchdringlich, es sei denn, Sie verwenden Allure Server. </font><font style="vertical-align: inherit;">Wir lösen dieses Problem jetzt nur für sie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der dritte Punkt der „Vor- und Nachteile“ ist die Notwendigkeit manueller Arbeit. </font><font style="vertical-align: inherit;">In einem neuen Projekt müssen Sie eine Anforderungszuordnung neu erstellen, alle Testfälle schreiben usw. </font><font style="vertical-align: inherit;">Es erfordert immer manuelle Arbeit und ist eigentlich sehr traurig.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie die Codeabdeckung gemessen wird</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Alternative zu diesem Ansatz ist die Codeabdeckung. </font><font style="vertical-align: inherit;">Dies scheint die Lösung für unser Problem zu sein. </font><font style="vertical-align: inherit;">So sieht die Abdeckung des Produktcodes aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/-c/oe/5o-coev_livsv-tudln9ztpau_e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie spiegelt die Abdeckung der Verpackung wider, oder vielmehr einen kleinen Teil dessen, was normalerweise im Produkt enthalten ist. </font><font style="vertical-align: inherit;">Das Paket ist auf der linken Seite geschrieben, wie zuvor beschrieben. </font><font style="vertical-align: inherit;">Das heißt, unsere Beschichtung wird schließlich an einigen greifbaren Dingen befestigt, in diesem Fall am Paket. </font><font style="vertical-align: inherit;">Die Attribute sind rechts geschrieben: Abdeckung nach Klasse, Abdeckung nach Methoden, Abdeckung nach Codeblöcken und Abdeckung nach Codezeilen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Sammeln der Abdeckung muss verstanden werden, welche Codezeile der Test bestanden hat und welche nicht. </font><font style="vertical-align: inherit;">Dies ist eine ziemlich einfache Aufgabe, aber in letzter Zeit sehr relevant.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die erste Erwähnung der Codeabdeckung erfolgte bereits 1963, doch erst jetzt sind ernsthafte Fortschritte in dieser Richtung zu verzeichnen.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben also einen Test, der mit dem System interagiert. Es spielt keine Rolle, wie er mit ihr interagiert: über das Front-End, die API oder direkt in das Back-End - wir gehen einfach davon aus, dass wir es haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann sollte die Instrumentierung erfolgen. Dies ist ein Prozess, mit dem Sie verstehen können, welche Codezeilen überprüft wurden und welche nicht. Sie müssen es nicht im Detail studieren, sondern müssen nur nach dem Namen Ihres Frameworks suchen, auf das Sie schreiben, z. B. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dann </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instrumentierung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berichterstattung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - diese drei Wörter helfen Ihnen zu verstehen, wie dies gemacht wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihre Tests überprüfen, welche Codezeile der Test getroffen hat und welche nicht, speichern sie Dateien mit Informationen darüber, welche Zeilen abgedeckt sind. Basierend auf diesen Informationen haben Sie Daten.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was sind die Vor- und Nachteile der Codeabdeckung?</font></font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code-Abdeckung würde ich sofort ein Minus nennen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie werden nicht zum Manager kommen, Sie werden dieses Schild nicht zeigen und Sie werden nicht sagen, dass jeder automatisiert hat, da diese Daten nicht gelesen werden können. Er wird Sie bitten, klare Daten zurückzugeben, die Sie schnell betrachten und alles verstehen können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Code-Coverage-Bericht näher an der Entwicklung. </font><font style="vertical-align: inherit;">Es kann nicht als normaler Ansatz zur Bereitstellung aller Daten für ein Team verwendet werden, wenn das gesamte Team in der Lage sein soll, diese zu überwachen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/kr/bw/jmkrbwezcyzyx90-qxgm4jrrlbm.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Vorteil dieses Ansatzes besteht darin, dass immer relevante Daten bereitgestellt werden. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie müssen nicht viel arbeiten, alles ist für Sie automatisiert. </font><font style="vertical-align: inherit;">Schließen Sie einfach die Bibliothek an, Ihre Cover beginnen sich zu entfernen - und es ist wirklich cool.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer Vorteil dieses Ansatzes besteht darin, dass nur Anpassungen erforderlich sind. Dort gibt es nichts Besonderes zu tun - kommen Sie einfach mit einer bestimmten Anweisung, passen Sie die Abdeckung an und es funktioniert automatisch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch die Erfassung von Anforderungen können Sie nicht erfüllte Anforderungen identifizieren, jedoch nicht die Vollständigkeit in Bezug auf den Code bewerten. Sie haben beispielsweise mit dem Schreiben einer neuen Funktion "Autorisierung" begonnen. Geben Sie einfach die "Funktion der Autorisierung" ein und beginnen Sie, Testfälle darauf zu werfen. Sie können diese Abdeckung nicht sofort im Code sehen, selbst wenn Sie eine neue Klasse schreiben, gibt es immer noch keine Informationen - es gibt eine Lücke. Auf der anderen Seite ist dies eine Autorisierungsanforderung, auch wenn sie bereits implementiert ist. Wenn Sie die Abdeckung darauf zählen, kann dieser Teil nicht relevant sein. Er muss manuell auf dem neuesten Stand gehalten werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deshalb hatten wir eine Idee: Was ist, wenn wir das Beste von allen nehmen? </font><font style="vertical-align: inherit;">Damit die Berichterstattung unsere Fragen beantwortete, war sie immer relevant und musste nur angepasst werden. </font><font style="vertical-align: inherit;">Wir müssen die Beschichtung nur aus einem anderen Blickwinkel betrachten, dh ein anderes System als Grundlage für die Beschichtung verwenden. </font><font style="vertical-align: inherit;">Stellen Sie gleichzeitig sicher, dass es vollständig automatisch erfasst wird und eine Reihe von Vorteilen bietet. </font><font style="vertical-align: inherit;">Und dafür werden wir uns mit den API-Tests befassen.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test Coverage API</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist die Basis der Deckung? </font><font style="vertical-align: inherit;">Dazu verwenden wir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dies ist die Dokumentations-API. </font><font style="vertical-align: inherit;">Jetzt kann ich mir meine Arbeit ohne Swagger nicht vorstellen, es ist ein Werkzeug, das ich ständig zum Testen benutze. </font><font style="vertical-align: inherit;">Wenn Sie Swagger nicht verwenden, empfehle ich dringend, die Website zu besuchen und sich mit ihr vertraut zu machen. </font><font style="vertical-align: inherit;">Dort sehen Sie sofort ein sehr intuitives und verständliches Anwendungsbeispiel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Tat ist Swagger die Dokumentation, die von Ihrem Service generiert wird. </font><font style="vertical-align: inherit;">Es beinhaltet:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste der Anfragen.</font></font><br>
 <img src="https://habrastorage.org/webt/in/nc/pe/inncpekmy4a699gk-eh0o4be_jy.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter anfordern: Es ist nicht erforderlich, den Entwickler zu ziehen und nach den Parametern zu fragen.</font></font><br>
<img src="https://habrastorage.org/webt/yz/48/yg/yz48yg1kw8nnqdb3wn7fdcq0g1o.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antwortcodes</font></font><br>
<img src="https://habrastorage.org/webt/zz/y2/ku/zzy2kucjpovwr2xxue4zvct543o.png"><br>
</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Funktionsprinzip von Swagger ist die Erzeugung. Es spielt keine Rolle, welches Framework Sie verwenden. </font><i><font style="vertical-align: inherit;">Angenommen</font></i><font style="vertical-align: inherit;"> , Spring oder Go Server, Sie verwenden die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger </font></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codegen-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Komponente </font><font style="vertical-align: inherit;">und generieren </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> . Dies ist eine Spezifikation, auf deren Grundlage dann eine schöne Benutzeroberfläche gezeichnet wird. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für uns ist es wichtig, dass </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json verwendet wird</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Die Unterstützung ist für alle weit verbreiteten Sprachen verfügbar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die Open API-Spezifikation </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es sieht so aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jn/hl/km/jnhlkmmo1pd-7vxllopdvjhbdr0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfragen sehen ungefähr so ​​aus: Zusammenfassung, Beschreibung, Antwortcodes und ein "Handle" (Pfad: / users). Es gibt auch Informationen über den Abfrageparameter: Alles ist strukturiert, es gibt einen Benutzer-ID-Parameter, es befindet sich in dem Pfad, in dem es erforderlich ist, eine solche Beschreibung und eine Typ-Ganzzahl.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3a/bs/7h/3abs7hrvpakohvaejel8utqdtc4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt Antwortcodes, die auch dokumentiert sind: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/so/3s/yq/so3syqf7mawlmlqomizvoqdj1-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und uns kam die Idee: Wir haben einen Service, den Swagger generiert, und wir wollten denselben Swagger in den Tests behalten, damit wir sie später vergleichen können. </font><font style="vertical-align: inherit;">Mit anderen Worten, wenn die Tests ausgeführt werden, erzeugen sie genau den gleichen Swagger. Wir werfen ihn auf den Swagger Diff. Wir verstehen, welche Parameter, Handles, Statuscodes wir überprüft haben und so weiter. </font><font style="vertical-align: inherit;">Dies ist die gleiche Instrumentierung, die gleiche Abdeckung, nur schließlich in den Anforderungen, die wir verstehen.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber was ist, wenn Sie ein Diff bauen?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben uns der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger Diff-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek zugewandt, die </font><font style="vertical-align: inherit;">wir dafür brauchen. Das Funktionsprinzip </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sieht ungefähr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> so aus </font><font style="vertical-align: inherit;">: Sie haben Version 1.0, mit API-Version 1.1 generieren beide </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> , dann werfen Sie sie auf Swagger diff und sehen das Ergebnis. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis sieht ungefähr so ​​aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qk/qn/ls/qkqnlsxnssknuv8p8t9cg5ckryu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben Informationen, dass es zum Beispiel einen neuen Stift gibt. Sie haben auch Informationen darüber, was gelöscht wird. Dies bedeutet, dass es Zeit ist, die Tests zu entfernen. Sie sind nicht mehr relevant. Mit dem Erscheinen von Informationen über Änderungen ändern sich auch die Parameter, sodass es offensichtlich ist, dass Ihre Tests in diesem Moment fallen werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Idee hat uns gefallen und wir haben begonnen, sie umzusetzen. Als wir uns dazu entschlossen haben: Wir haben einen "Referenz" -Swagger, der aus dem Entwicklercode generiert wird, wir haben auch API-Tests, die unseren Swagger generieren, und wir werden zwischen ihnen unterscheiden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir führen also Tests für den Dienst durch: Wir haben </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rest Assured</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das selbst auf die Dienste über die API zugreift. Und wir instrumentieren es. Es gibt einen Ansatz: Sie können Filter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erstellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die Anforderung wird an sie </font><i><font style="vertical-align: inherit;">gesendet</font></i><font style="vertical-align: inherit;"> - und die Informationen über die Anforderung werden in Form von </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> direkt für sich selbst </font><i><font style="vertical-align: inherit;">gespeichert</font></i><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der gesamte Code, den wir schreiben mussten, es gab 69-70 Zeilen - dies ist ein sehr einfacher Code.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6_/m6/ck/6_m6cka7jfewruree9d9561tayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Lustige ist, dass wir den nativen Client für Swagger verwendet haben, genau dort geschrieben. </font><font style="vertical-align: inherit;">Wir mussten nicht einmal unsere Binärdateien erstellen, sondern haben nur die Swagger-Spezifikation ausgefüllt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/rl/fw/lrrlfwuiqrgykrprpjnxr1fcfmq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben viele .json-Dateien, mit denen wir etwas tun mussten - sie haben einen Swagger-Aggregator geschrieben. </font><font style="vertical-align: inherit;">Dies ist ein sehr einfaches Programm, das nach folgendem Prinzip arbeitet:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie erfüllt eine neue Anfrage, wenn sie nicht in unserer Datenbank enthalten ist, fügt sie hinzu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie erfüllt die Anfrage, er hat einen neuen Parameter - fügt hinzu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gleiches gilt für Statuscodes.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf diese Weise erhalten wir Informationen zu allen von uns verwendeten Stiften, Parametern und Statuscodes. </font><font style="vertical-align: inherit;">Außerdem können Sie hier Daten erfassen, mit denen diese Anforderungen ausgeführt wurden: Benutzername, Anmeldungen usw. </font><font style="vertical-align: inherit;">Wir haben noch nicht herausgefunden, wie diese Informationen verwendet werden sollen, da alles bei uns generiert wird. Sie können jedoch nachvollziehen, mit welchen Parametern bestimmte Anforderungen aufgerufen wurden.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir waren also fast einen Steinwurf vom Sieg entfernt, aber als Ergebnis haben wir Swagger Diff abgelehnt, weil es in einem etwas anderen Konzept funktioniert - im Konzept des Differentials.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger Diff sagt, was sich geändert hat, nicht was abgedeckt ist, aber wir wollten das Ergebnis der Berichterstattung anzeigen. </font><font style="vertical-align: inherit;">Es gibt viele zusätzliche Daten, es werden Informationen zu Beschreibung, Zusammenfassung und anderen Metainformationen gespeichert, aber wir haben diese Informationen nicht. </font><font style="vertical-align: inherit;">Und wenn wir Diff machen, schreiben sie uns, dass "dieser Stift keine Beschreibung hat", aber nicht existiert.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigener Bericht</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben unsere Implementierung vorgenommen und sie funktioniert wie folgt: Wir haben viele Dateien, die aus Autotests stammen, wir haben die Swagger-Service-API und wir erstellen darauf basierend einen Bericht. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein einfacher Bericht sieht folgendermaßen aus: Oben sehen Sie Informationen darüber, wie viele Stifte (349) insgesamt vorhanden sind und welche Informationen vollständig abgedeckt sind (jeder Parameter, Statuscode usw.). Sie können Ihre eigenen Kriterien auswählen, z. B. mehrere Parameter abdecken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier gibt es auch Informationen, dass 40% teilweise abgedeckt sind - dies bedeutet, dass wir bereits Tests für diese Stifte haben, aber einige Dinge sind noch nicht abgedeckt, und Sie müssen dort genau hinschauen. Eine leere Abdeckung wird ebenfalls berücksichtigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/og/p5/pcogp5jnc8m88l8fylt2p2uc0eq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns die Registerkarten durchgehen. Dies ist eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vollständige Abdeckung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wir sehen alle Parameter, die wir haben, die abgedeckt sind, Statuscodes und so weiter.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/gl/2q/9ogl2q9tf_xb1xw9dl9j8sxsku0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann haben wir eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">teilweise Abdeckung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir sehen, dass im Login-Social-Handle ein Parameter behandelt wird und zwei nicht. </font><font style="vertical-align: inherit;">Und wir können es erweitern und sehen, welche spezifischen Parameter und Statuscodes abgedeckt sind. </font><font style="vertical-align: inherit;">Und in diesem Moment wird es für den Entwickler sehr praktisch: Die Versionen der Anwendung rollen sehr schnell, und wir können oft einige Parameter vergessen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/pf/sc/fopfscyojnuzokszhkw8ntgrqio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit diesem Tool können Sie immer in guter Form sein und verstehen, was wir teilweise behandelt haben, welcher Parameter vergessen wurde und so weiter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Last - Ruhm der Schande, wir müssen es noch tun. </font><font style="vertical-align: inherit;">Wenn Sie auf diese Seite schauen und dort leer sehen: 172 - Ihre Hände fallen, und dann beginnen Sie, Handprüfern das Schreiben von Autotests beizubringen, das ist der Punkt.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p8/2k/o5/p82ko5nzine_u6odc8dtl9bho5s.png"><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welchen Nutzen haben wir bei der Einführung unserer Lösung erzielt?</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst haben wir begonnen, Tests aussagekräftiger zu schreiben. </font><font style="vertical-align: inherit;">Wir verstehen, dass wir testen, und gleichzeitig haben wir zwei Strategien. </font><font style="vertical-align: inherit;">Erstens automatisieren wir etwas, das nicht vorhanden ist, wenn manuelle Tester kommen und sagen, dass es für einen bestimmten Dienst wichtig ist, dass eine Anforderung mindestens einmal ausgeführt wird, und öffnen Empty. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Option - wir vergessen nicht die Schwänze. </font><font style="vertical-align: inherit;">Wie gesagt, die APIs werden sehr schnell veröffentlicht, es kann einige Veröffentlichungen zwei- oder dreimal am Tag geben. </font><font style="vertical-align: inherit;">Dort werden ständig einige Parameter hinzugefügt: In fünftausend Tests ist es unmöglich zu verstehen, was überprüft wird und was nicht. </font><font style="vertical-align: inherit;">Daher ist dies die einzige Möglichkeit, eine Teststrategie bewusst zu wählen und zumindest etwas zu tun.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der dritte Gewinn ist ein vollautomatischer Prozess. </font><font style="vertical-align: inherit;">Wir haben den Ansatz ausgeliehen und die Automatisierung funktioniert: Wir müssen nichts tun, alles wird automatisch gesammelt.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklungsideen</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens möchte ich den zweiten Bericht wirklich nicht behalten, aber ich möchte ihn in die Swagger-Benutzeroberfläche integrieren. </font><font style="vertical-align: inherit;">Dies ist mein Lieblingsbericht zur „Photoshop Edition“: ein Chip, den ich in letzter Zeit entwickelt habe. </font><font style="vertical-align: inherit;">Hier gibt es sofort Informationen zu den Parametern, die wir getestet haben und die nicht. </font><font style="vertical-align: inherit;">Und es wäre cool, diese Informationen sofort mit Swagger zu geben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/ll/n8/v6lln82kyue5errknkoxj9mkq-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel kann das Front-End selbst sehen, welche Parameter nicht getestet wurden, Prioritäten setzen und entscheiden, dass sie zwar nicht in die Entwicklung einbezogen werden müssen, aber nicht bekannt ist, wie gut sie funktionieren. </font><font style="vertical-align: inherit;">Oder das Backend schreibt einen neuen Stift, sieht Rot und tritt Tester so, dass alles grün ist. </font><font style="vertical-align: inherit;">Das ist ganz einfach, wir gehen in diese Richtung.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Idee ist, andere Tools zu unterstützen. </font><font style="vertical-align: inherit;">Tatsächlich möchte ich keine Filter für bestimmte Implementierungen schreiben: für Java, Python und so weiter. </font><font style="vertical-align: inherit;">Es besteht die Idee, eine Art Proxy zu erstellen, der alle Anforderungen über sich selbst weiterleitet und Swagger-Informationen für sich selbst speichert. </font><font style="vertical-align: inherit;">Somit verfügen wir über eine universelle Bibliothek, die unabhängig von Ihrer Sprache verwendet werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die dritte Entwicklungsidee ist die Integration in Allure Report. </font><font style="vertical-align: inherit;">Ich sehe das so: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ym/b3/ad/ymb3adazpdly9uhljv8jjqpyg04.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der Parameter „getestet“ wird, sagt uns dies in der Regel nicht immer, wie er getestet wird. </font><font style="vertical-align: inherit;">Und ich möchte auf diesen Parameter zeigen und die spezifischen Schritte des Tests sehen.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web Testing Coverage</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der nächste Punkt, über den ich sprechen möchte, ist die Berichterstattung über Webtests. Die Abdeckung basiert auf der Site, die Sie testen, und schreibt Tests auf der Site. Sie können es jedoch zu einer Webschnittstelle für Ihre Berichterstattung machen. Zum Beispiel sieht es so aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/1k/tg/vq1ktgatdwq9v-v-fpzz1444hf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich Ihre Site ansehen, sind dies einige Elemente und Möglichkeiten, mit ihnen zu interagieren. Dies ist eine vollständige Beschreibung: "Ein Element ist eine Möglichkeit, mit ihm zu interagieren." Sie können auf den Link klicken, Sie können den Text kopieren, Sie können etwas in die Eingabe treiben. Die Site als Ganzes besteht aus Elementen und Arten ihrer Interaktion: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/07/z-/f307z-lt44swcsgdas_vsspvyrk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Tests ablaufen: Sie beginnen an einem bestimmten Punkt, füllen dann beispielsweise ein Formular aus, z. B. ein Autorisierungsformular, und verteilen sich dann auf andere Seiten, dann auf ein anderes und enden .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der Manager fragt, ob eine bestimmte Schaltfläche getestet wird, diese Frage jedoch schwer zu beantworten ist: Sie müssen den Code öffnen oder zu TestRail gehen, dann möchte ich diese Lösung für das Problem sehen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hh/7q/mv/hh7qmvkk8gefu94bigbkofhdgak.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich möchte auf dieses Element zeigen und alle Tests sehen, die wir haben zu diesem Artikel. Wenn es so ein Instrument gäbe, würde ich mich freuen. Als wir über diese Idee nachdachten, haben wir uns zuerst Yandex.Metrica angesehen. Sie haben ungefähr die gleiche Funktionalität wie eine Link Map. Gute Idee.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter dem Strich werden sie genau so hervorgehoben, als ob sie bereits die Informationen liefern, die wir benötigen. Sie sagen: "Hier haben wir diesen Link 14 Mal passiert", was in der Übersetzung in die Testsprache bedeutet: "14 Tests wurden in diesem Link getestet" und irgendwie durchlaufen. Aber dieser rote Link hat bis zu 120 Tests gemacht, was für interessante Tests! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können alle Arten von Trends zeichnen, Metainformationen hinzufügen, aber was passiert, wenn wir alles nehmen und aus der Sicht des Testens zeichnen? Wir haben also eine Aufgabe: auf ein Element zu zeigen und eine Notiz mit einer Liste von Tests zu erhalten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xa/hr/dj/xahrdjma8punc8jmujxg_vwtlvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dies zu implementieren, müssen Sie auf das Symbol klicken und dann eine Notiz schreiben. Dies ist unser ganzer Test. Wir verwenden Atlas bei uns, und die Integration ist bisher nur damit verbunden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlas sieht ungefähr so ​​aus:</font></font><br>
<br>
<pre><code class="java hljs">SearchPage.open ();<font></font>
SearchPage.offersList().should(hasSizeGreaterThan(<span class="hljs-number">0</span>));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir möchten, dass mindestens ein Ergebnis angezeigt wird, andernfalls werden wir es nicht testen. </font><font style="vertical-align: inherit;">Dann bewegen wir den Cursor auf das Element und klicken darauf.</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).moveCursor();<font></font>
searchPage.offer(FIRST).actionBar().note().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann speichern wir in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eingabe User_Text</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und senden es.</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).addNoteInput().sendKeys(USER_TEXT);<font></font>
searchPage.offer(FIRST).saveNote().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach überprüfen wir, ob der Text genau der ist, der hätte sein sollen.</font></font><br>
<br>
<pre><code class="java hljs"> searchPage.offer(FIRST).addNoteInput().should(hasValue(USER_TEXT));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tests werden im Browser ausgeführt. Atlas ist ein Proxy für diesen Test. Wir wenden hier den gleichen Ansatz an, den jeder beim Sammeln der Abdeckung verwendet: Erstellen wir einen Locator mit .json. Wir speichern dort Informationen über alle Seitenöffnungen, alle Iterationen mit Elementen, wer gesendet hat, wer den Schlüssel gesendet hat, wer geklickt hat, welche IDs usw. - wir führen ein vollständiges Protokoll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann haben wir dieses Protokoll zu Allure in Form von jedem Test befestigen, und wenn wir eine Menge haben </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">locators.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , erzeugen wir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meta.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Das Schema ist für alle Elemente gleich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben ein Plugin für Google Chrome. Wir wollten eine Entscheidung in Form eines Plugins treffen. Ich habe speziell einen Kurven-Screenshot gemacht, damit ein wichtiges Detail auf dem Folienpfad </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu locators.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sichtbar ist </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/kg/nz/rxkgnzghdmiw9syocwbkaqx27yy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie jetzt einen Bericht erstellt haben, gibt es für heute eine Abdeckungskarte. Wenn Sie den Bericht der letzten zwei Wochen hier einfügen, wird eine Abdeckungskarte für den Zeitraum vor zwei Wochen angezeigt. Du hast eine Zeitmaschine! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie dieses Plugin einstecken, wird jedoch eine nicht so benutzerfreundliche Oberfläche gezeichnet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mx/q4/vx/mxq4vxhpjqlrewxte3xn_o75upm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes Element wird von einer Reihe von Tests durchlaufen: Es ist klar, dass 40 Tests "Wohnung kaufen" durchlaufen, der Header einzeln getestet wird, es ist cool und die Option "Wohnung" wird ebenfalls angezeigt. Sie erhalten eine vollständige Abdeckungskarte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie mit der Maus über ein Element fahren, werden die Daten erfasst und Ihre tatsächlichen Tests von Ihrem tms, Allure Board usw. gedruckt. Das Ergebnis sind vollständige Informationen darüber, was wie getestet wird.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass Sie bei jedem Test direkt im Allure-Bericht fehlschlagen können. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/nw/iy/henwiyzy6if8o1ak2ky1i9v2s-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie etwas öffnen, werden neue Selektoren geladen: Wenn Sie Tests haben, die diese Selektoren durchlaufen, und Sie etwas mit der Site gemacht haben, wird das gesamte Bild verarbeitet und angezeigt.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist der Gewinn?</font></font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobald wir diesen einfachen Ansatz implementiert hatten, begannen wir hauptsächlich zu verstehen, was wir in Tests getestet hatten.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt kann jeder nach einem "Thread" suchen, der zum Skript führt. Sie gehen beispielsweise davon aus, dass Sie die Zahlung testen müssen. Die Zahlung erfolgt offensichtlich über die Zahlungsschaltfläche: Klicken Sie auf - alle Tests, die über die Zahlungsschaltfläche ausgeführt werden, werden angezeigt. Das ist wunderbar! Sie gehen in eines von ihnen und sehen sich das Skript an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Außerdem verstehen Sie, was zuvor getestet wurde. Wir generieren eine statische Datei, Sie können den Pfad dazu angeben und angeben, welche Tests vor zwei Wochen durchgeführt wurden. Wenn der Manager angibt, dass ein Fehler in der Produktion vorliegt, und fragt, ob wir diese oder jene Funktionalität vor einigen Wochen getestet haben, nehmen Sie den Allure-Bericht, z. B., dass Sie ihn nicht getestet haben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer Gewinn ist die Überprüfung nach dem Testen der Automatisierung. Vorher hatten wir eine Überprüfung vor dem Testen der Automatisierung. Jetzt können Sie Ihre Tests genau so durchführen, wie Sie sie sehen. Wenn Sie einen Test durchführen möchten - erledigt, einen Zweig genommen, Allure gestartet, den Link zum Plug-In zu einem manuellen Tester entfernt und nach den Tests gefragt haben. Dies ist genau der Prozess, mit dem Sie die Agile-Strategie stärken können: Der Teamleiter führt eine Codeüberprüfung durch, und manuelle Tester führen Ihre Tests (Skripte) durch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer Vorteil dieses Ansatzes sind die häufig verwendeten Elemente. Wenn wir diesen Block überschreiben, in dem es 87 Tests gibt, fallen alle. Sie beginnen zu verstehen, wie schwach Ihre Tests sind.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x3/jh/ye/x3jhyewo2z60_6-xi5iz6q-2rzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wenn der Block "Preis von" umgestürzt wird, ist es in Ordnung, ein Test wird fallen, eine Person wird ihn korrigieren. </font><font style="vertical-align: inherit;">Wenn Sie den Block mit 87 Tests ändern, sinkt die Abdeckung erheblich, da 87 Tests nicht bestanden werden und kein Ergebnis überprüft wird. </font><font style="vertical-align: inherit;">Dieser Block benötigt mehr Aufmerksamkeit. </font><font style="vertical-align: inherit;">Dann müssen Sie dem Entwickler mitteilen, dass dieser Block eine ID haben muss, denn wenn er verlässt, fällt alles auseinander.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie können Sie sich weiterentwickeln?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können beispielsweise den Weg verfolgen, Unterstützung für andere Tools zu entwickeln, z. B. für Selenide. Ich möchte sogar nicht ein bestimmtes Selenide unterstützen, sondern eine Treiberimplementierung, mit der Sie Locators unabhängig vom verwendeten Tool erfassen können. Dieser Proxy gibt Informationen aus und zeigt sie dann an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine andere Idee ist es, das aktuelle Testergebnis anzuzeigen. Zum Beispiel ist es praktisch, ein solches Bild sofort einem manuellen Tester zu übergeben: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/w-/q8/e4w-q8xjavk2dfern8u_fncyfu4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen nicht überlegen, welche Tests fehlgeschlagen sind, da Sie auf die Website gehen, auf den Test klicken und ihn von Hand bestehen können, ohne andere Tests zu überprüfen. Dies ist einfach. Sie können diese Informationen von Allure abrufen und hier zeichnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können auch die Gesamtpunktzahl hinzufügen, da jeder Grafiken liebt, weil ich mich mit doppelten Tests befassen möchte, die einander sehr ähnlich sind, deren zentraler Teil derselbe ist und deren Anfang und Ende sich etwas geändert haben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/lw/xq/oplwxqvq08hv-uaqs3c97owcuxy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich möchte auch sofort die Anzahl der doppelten Selektoren sehen. Wenn es hoch ist, müssen Sie auf dieser Seite Refactoring durchführen und Tests ausführen, da sie sonst in ein zu großes Bündel fallen. Gleiches gilt für die Anzahl der Elemente, mit denen wir interagiert haben. Dies ist ein häufiges Symptom. Sobald Sie jedoch mit der Seite interagieren, wird die Abbildung aufgrund neuer Elemente und der Gesamtzahl der Testfälle übersprungen. Sie müssen also eine Art Analyse hinzufügen. Dies ist nicht überflüssig.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können auch die Verteilung der Tests nach Ebenen hinzufügen, da Sie nicht nur sehen möchten, dass wir diese Tests haben, sondern auch alle Arten von Tests, die auf dieser Seite aufgeführt sind, möglicherweise sogar manuelle Tests. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es also Java-Tests und Tests auf Puppeteer gibt, die ein anderes Team schreibt, können wir uns eine bestimmte Seite ansehen und sofort sagen, wo sich unsere Tests überschneiden. Das heißt, wir werden mit ihnen dieselbe Sprache sprechen, und wir müssen diese Informationen nicht Stück für Stück sammeln. Wenn wir ein Tool haben, das alles in der Weboberfläche anzeigt, scheint die Aufgabe, Tests in Java und Puppeteer zu vergleichen, nicht mehr unlösbar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns abschließend über die allgemeine Strategie sprechen. </font><font style="vertical-align: inherit;">Wir haben bereits darüber gesprochen, welche Arten der Bedeckung zwei genannt werden, und haben eine dritte Art der Beschichtung entwickelt, die wir als Ergebnis verwendet haben. </font><font style="vertical-align: inherit;">Also haben wir dieses Problem einfach aus einem anderen Blickwinkel betrachtet.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einerseits gibt es eine Berichterstattung, die seit 1963 eingestellt wurde, andererseits gibt es manuelle Tester, die es gewohnt sind, in einer realeren Welt als Code zu leben. </font><font style="vertical-align: inherit;">Es bleibt nur, diese beiden Ansätze zu kombinieren.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interessenten können sich jederzeit unserer Community anschließen. </font><font style="vertical-align: inherit;">Hier sind zwei Repositories unserer Jungs, die sich mit dem Coverage-Problem befassen:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prahlerei-Abdeckung</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Locators-Hotspots-Chrome-Plugin</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de491826/index.html">Bitrix Do-it-yourself-Audit</a></li>
<li><a href="../de491828/index.html">DataMatrix oder wie man Schuhe richtig etikettiert</a></li>
<li><a href="../de491832/index.html">8 Pluspunkte von Flutter im Vergleich zu React Native</a></li>
<li><a href="../de491838/index.html">MIPT startet einen offenen Online-Kurs zum Thema Sportprogrammierung</a></li>
<li><a href="../de491840/index.html">Visualisierung der Arbeit von Servicemitarbeitern</a></li>
<li><a href="../de491846/index.html">Überprüfung des Isomorphismus zweier Graphen und Suche nach isomorphen Teilgraphen: Ein Ansatz, der auf der NB-Pfadanalyse basiert</a></li>
<li><a href="../de491848/index.html">Redux Toolkit wird nicht mehr benötigt?</a></li>
<li><a href="../de491852/index.html">Flask-DJ: Django (mvc) Struktur für ein Projekt auf Flask</a></li>
<li><a href="../de491854/index.html">Unternehmenstelefone für jeweils 31.000 Mitarbeiter</a></li>
<li><a href="../de491856/index.html">LinkedIn für Studenten und Absolventen: Erste Schritte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>