<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🍳 👩🏻‍🔬 👩🏼‍🔬 Web Audio API概念 📢 🏂🏻 🏒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="朋友们，美好的一天！
 
 本文从网络音频API（WAA）的音乐理论中解释了一些概念。了解了这些概念，您可以在设计应用程序中的音频时做出明智的决定。本文不会使您成为经验丰富的声音工程师，但可以帮助您了解WAA为何以这种方式工作。
 
 音频电路
 WAA的本质是在音频上下文中用声音执行某些操作。该A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Web Audio API概念</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495690/"><img src="https://habrastorage.org/webt/_r/j3/qd/_rj3qdi2rvk5vwbvfskmddp8yic.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
朋友们，美好的一天！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文从网络音频API（WAA）的音乐理论中解释了一些概念。</font><font style="vertical-align: inherit;">了解了这些概念，您可以在设计应用程序中的音频时做出明智的决定。</font><font style="vertical-align: inherit;">本文不会使您成为经验丰富的声音工程师，但可以帮助您了解WAA为何以这种方式工作。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音频电路</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAA的本质是在音频上下文中用声音执行某些操作。该API专为模块化路由而设计。声音的基本操作是音频节点，它们相互连接并形成一个路由图（音频路由图）。在单个上下文中处理具有不同类型的通道的多个源。这种模块化设计为创建具有动态效果的复杂功能提供了必要的灵活性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
音频节点通过输入和输出互连，形成一条链，该链从一个或多个源开始，经过一个或多个节点，然后在目的地终止。</font><font style="vertical-align: inherit;">原则上，例如，如果我们只想可视化一些音频数据，则可以没有目的地。</font><font style="vertical-align: inherit;">典型的网络音频工作流程如下所示：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建音频上下文</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上下文中，创建源-例如&lt;audio&gt;，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">振荡器（声音生成器）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或流</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建效果节点，例如</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混响</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，双二阶滤波器，声像或压缩器</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择音频的目的地，例如用户计算机上的扬声器</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过效果到目的地在源之间建立连接</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/76/wq/vv/76wqvvwgifik6zojizkg_dxxb9q.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">频道指定</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可用音频通道的数量通常以数字格式表示，例如2.0或5.1。</font><font style="vertical-align: inherit;">这称为通道指定。</font><font style="vertical-align: inherit;">第一位数字指示信号包括的整个频率范围。</font><font style="vertical-align: inherit;">第二位数字表示为低频效果输出- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低音炮</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保留的通道数</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个输入或输出均包含一个或多个根据特定音频电路构建的通道。</font><font style="vertical-align: inherit;">有各种离散的通道结构，例如单声道，立体声，四声道，5.1等。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7z/rn/xy/7zrnxy_vaeyntkb3o5hgvbvs_k4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
音频源可以通过多种方式获得。</font><font style="vertical-align: inherit;">声音可能是：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由JavaScript通过音频节点（例如振荡器）生成</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">PCM（脉冲代码调制）</font></a><font style="vertical-align: inherit;">从原始数据创建</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">派生自HTML媒体元素（例如&lt;video&gt;或&lt;audio&gt;）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源自WebRTC媒体流（例如网络摄像头或麦克风）</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音频数据：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">样本中的内容</font></font></a></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">采样</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是指将连续信号转换为离散（分频）（模拟到数字）信号。</font><font style="vertical-align: inherit;">换句话说，连续的声波（例如现场音乐会）被转换为样本序列，从而使计算机可以在单独的块中处理音频。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音频缓冲区：帧，样本和通道</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AudioBuffer接受通道数作为参数（单声道为1，立体声为2等），长度-缓冲区内的样本帧数，以及采样频率-每秒的帧数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
样本是一个简单的32位浮点值（float32），它是特定时间点和特定通道（左或右等）中音频流的值。样本帧或帧是在某个时间点重现的所有通道的一组值：在同一时间重现的所有通道的所有样本（两个用于立体声，六个用于5.1等）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
采样率是指采样（或帧，因为一帧中的所有采样都一次播放）的数量，以秒为单位播放，以赫兹（Hz）为单位。频率越高，声音质量越好。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们看一下以44100 Hz的频率重现的，每秒钟长的单声道和立体声缓冲器：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单声道缓冲区将具有44100个样本和44100个帧。</font><font style="vertical-align: inherit;">“长度”属性的值为44100</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">立体声缓冲器将具有88,200个样本，但也有44,100帧。</font><font style="vertical-align: inherit;">“ length”属性的值将为44100-长度等于帧数</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/uq/hp/pq/uqhppqfp_yz_k_hk_axza9j7qgm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当缓冲区的回放开始时，我们首先会听到样本的最左边的帧，然后是最近的右边的帧，依此类推。对于立体声，我们同时听到两个声道。样本帧与通道数无关，并为非常精确的音频处理提供了机会。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意：要从帧数获取时间（以秒为单位），必须将帧数除以采样率。要从样本数中获取帧数，​​请用样本数除以通道数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> context = <span class="hljs-keyword">new</span> AudioContext()
<span class="hljs-keyword">let</span> buffer = context.createBuffer(<span class="hljs-number">2</span>, <span class="hljs-number">22050</span>, <span class="hljs-number">44100</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意：在数字音频中，标准采样频率为44100 Hz或44.1 kHz。但是为什么是44.1 kHz？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，因为可听频率范围（人耳可分辨的频率）从20到20,000 Hz不等。根据Kotelnikov定理，采样频率应该是信号频谱中最高频率的两倍以上。因此，采样频率应大于40 kHz。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其次，必须使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">低通滤波器</font></a><font style="vertical-align: inherit;">对信号进行滤波</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在采样之前，否则频谱的“尾部”会重叠（频率交换，频率掩蔽，混叠），并且重构信号的形状将失真。理想情况下，低通滤波器应通过低于20 kHz的频率（无衰减）并降低高于20 kHz的频率。在实践中，需要一些过渡带（在通带和抑制带之间），在该过渡带中，频率会部分衰减。一种更简单，更经济的方法是使用防更换过滤器。对于44.1 kHz的采样频率，过渡带为2.05 kHz。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在上面的示例中，我们获得了具有两个通道的立体声缓冲器，该音频缓冲器在音频环境中以44100 Hz（标准）的频率进行再现，时长为0.5秒（22050帧/ 44100 Hz = 0.5 s）。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> context = <span class="hljs-keyword">new</span> AudioContext()
<span class="hljs-keyword">let</span> buffer = context.createBuffer(<span class="hljs-number">1</span>, <span class="hljs-number">22050</span>, <span class="hljs-number">22050</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，我们得到了一个通道的单声道缓冲器，它在音频环境中以44100 Hz的频率进行再现，它将过采样到44100 Hz（并将帧增加到44100），1秒长（44100帧/ 44100 Hz = 1 s）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意：音频重采样（“重采样”）与调整图像大小（“调整大小”）非常相似。</font><font style="vertical-align: inherit;">假设我们有一个16x16的图片，但是我们想用32x32的尺寸填充该区域。</font><font style="vertical-align: inherit;">我们会调整大小。</font><font style="vertical-align: inherit;">结果会降低质量（根据缩放算法可能会模糊或撕裂），但是可以正常工作。</font><font style="vertical-align: inherit;">重新采样的音频是一回事：我们可以节省空间，但实际上却不可能获得高质量的声音。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平面和条带缓冲区</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAA使用平面缓冲区格式。</font><font style="vertical-align: inherit;">左右声道交互如下：</font></font><br>
<br>
<pre><code class="javascript hljs">LLLLLLLLLLLLLLLLRRRRRRRRRRRRRRRR ( ,   <span class="hljs-number">16</span> )
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，每个通道都独立于其他通道工作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一种替代方法是使用备用格式：</font></font><br>
<br>
<pre><code class="javascript hljs">LRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLR ( ,   <span class="hljs-number">16</span> )
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此格式通常用于MP3解码。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAA仅使用平面格式，因为它更适合声音处理。</font><font style="vertical-align: inherit;">将数据发送到声卡进行播放时，平面格式将转换为交替格式。</font><font style="vertical-align: inherit;">解码MP3时，将进行逆转换。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音讯频道</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不同的缓冲区包含不同数量的声道：从简单的单声道（一个声道）和立体声（左声道和右声道）到更复杂的集合（例如，quad和5.1），每个声道中的采样数不同，从而提供了更丰富（更丰富）的声音。</font><font style="vertical-align: inherit;">频道通常用缩写表示：</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单核细胞增多症</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：M：单声道</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">立体声</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：左：左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1：右：右</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quadro</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：L：左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1：R：右</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3：SL：附加左（创建环境的左声道；环绕左）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4：SR：附加右（右环绕）</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：L：左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1：R：右</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2：C：中心</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3：LFE：低音炮</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4：SL：左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5：SR：右</font></font><br>
 </td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上混和下混</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当输入和输出的通道数不匹配时，向上或向下进行混合。</font><font style="vertical-align: inherit;">混合由AudioNode.channelInterpretation属性控制：</font></font><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入通道</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出通道</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混合规则</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准声道混合方案-为扬声器（扬声器）设置channelInterpretation属性时使用。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1（单声道）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2（立体声）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从单声道混音到立体声。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
输入通道M用于两个输出通道（L和R）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
输出L =输入</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M </font><font style="vertical-align: inherit;">输出</font><font style="vertical-align: inherit;">R =输入M</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1（单声道）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4（四倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从单声道混合到四声道。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
输入通道M用于主通道（L和R）。</font><font style="vertical-align: inherit;">其他频道已被屏蔽。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
输出L =输入</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M输出</font><font style="vertical-align: inherit;">R =输入</font><font style="vertical-align: inherit;">M输出</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SL = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
输出SR = 0</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1（单声道）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6（5.1）</font></font></td>
<td>     5.1.<br>
       ©.   (L, R, LFE, SL  SR) .<br>
output.L = 0<br>
output.R = 0<br>
output.C = input.M<br>
output.LFE = 0<br>
output.SL = 0<br>
output.SR = 0</td>
</tr>
<tr>
<td>2 ()</td>
<td>1 ()</td>
<td>     .<br>
   (L  R)     (M).<br>
output.M = 0.5 * (input.L + input.R)</td>
</tr>
<tr>
<td>2 ()</td>
<td>4 ()</td>
<td>     .<br>
  L  R      (L  R).   (SL  SR) .<br>
output.L = input.L<br>
output.R = input.R<br>
output.SL = 0<br>
output.SR = 0</td>
</tr>
<tr>
<td>2 ()</td>
<td>6 (5.1)</td>
<td>     5.1.<br>
  L  R      (L  R).    (SL  SR),   ©   (LFE) .<br>
output.L = input.L<br>
output.R = input.R<br>
output.C = 0<br>
output.LFE = 0<br>
output.SL = 0<br>
output.SR = 0</td>
</tr>
<tr>
<td>4 ()</td>
<td>1 ()</td>
<td>     .<br>
    (L, R, SL  SR)      (M).<br>
output.M = 0.25 * (input.L + input.R + input.SL + input.SR)</td>
</tr>
<tr>
<td>4 ()</td>
<td>2 ()</td>
<td>     .<br>
    (L  SL)       (L).   (R  SR) —   ®.<br>
output.L = 0.5 * (input.L + input.SL)<br>
output.R = 0.5 * (input.R + input.SR)</td>
</tr>
<tr>
<td>4 ()</td>
<td>6 (5.1)</td>
<td>     5.1.<br>
  L, R, SL  SR     .    ©   (LFE) .<br>
output.L = input.L<br>
output.R = input.R<br>
output.C = 0<br>
output.LFE = 0<br>
output.SL = input.SL<br>
output.SR = input.SR</td>
</tr>
<tr>
<td>6 (5.1)</td>
<td>1 ()</td>
<td>   5.1  .<br>
 (L  SL),  (R  SR)   ()     .   ,     ,       —      √2 / 2.  (LFE) .<br>
output.M = 0.7071 * (input.L + input.R) + input.C + 0.5 * (input.SL + input.SR)</td>
</tr>
<tr>
<td>6 (5.1)</td>
<td>2 ()</td>
<td>   5.1  .<br>
  ©       (SL  SR)         (L  R).             √2 / 2.  (LFE) .<br>
output.L = input.L + 0.7071 * (input.C + input.SL)<br>
output.R = input.R + 0.7071 * (input.C + input.SR)</td>
</tr>
<tr>
<td>6 (5.1)</td>
<td>4 ()</td>
<td>   5.1  .<br>
  ()      (L  R).           √2 / 2.     .  (LFE) .<br>
output.L = input.L + 0.7071 * input.C<br>
output.R = input.R + 0.7071 * input.C<br>
output.SL = input.SL<br>
output.SR = input.SR</td>
</tr>
<tr>
<td colspan="3">    — ,   channelInterpretation   discrete.</td>
</tr>
<tr>
<td> (x)</td>
<td> (y),  x&lt;y</td>
<td>  .<br>
        (   ). ,     , .</td>
</tr>
<tr>
<td> (x)</td>
<td> (y),  x&gt;y</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个输出通道都与其输入模拟量（具有相同的索引）组合在一起。</font><font style="vertical-align: inherit;">没有相应输出通道的通道将被丢弃。</font></font></td>
</tr>
</tbody>
</table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可视化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可视化基于对输出音频数据（例如，振幅或频率数据）的接收，以及使用任何图形技术对其进行的后续处理。</font><font style="vertical-align: inherit;">WAA的AnalyzerNode不会使通过它的信号失真。</font><font style="vertical-align: inherit;">同时，它能够从音频中提取数据并将其进一步传输到例如＆ltcanvas&gt;。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w3/03/tk/w303tkjj1p7imhxsaegp0vtabyu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以使用以下方法提取数据：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AnalyzerNode.getFloatByteFrequencyData（）-将当前频率数据复制到Float32Array</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AnalyzerNode.getByteFrequencyData（）-将当前频率数据复制到Uint8Array（无符号字节数组）</font></font></li>
<li>AnalyserNode.getFloatTimeDomainData() —            Float32Array</li>
<li>AnalyserNode.getByteTimeDomainData() —            Uint8Array</li>
</ul><br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
音频空间化（由PannerNode和AudioListener处理）使您可以模拟信号在空间中特定点的位置和方向，以及听众的位置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
摇摄器的位置使用右手笛卡尔坐标描述；</font><font style="vertical-align: inherit;">对于运动，使用创建</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多普勒效应</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所需的速度矢量</font><font style="vertical-align: inherit;">；对于方向，使用方向性圆锥。</font><font style="vertical-align: inherit;">在多向声源的情况下，此锥体可能会很大。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/mj/tz/rlmjtz9l-3elsukt6gdnd81xbe4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
收听者的位置描述如下：移动-使用速度矢量，收听者头部所在的方向-使用两个方向矢量，前部和顶部。</font><font style="vertical-align: inherit;">捕捉以正确的角度捕捉到听众的头部和鼻子的顶部。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7q/-w/hk/7q-whktcaasufh9jfy8z6cigrbc.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结点和分支</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
连接描述了一个过程，其中ChannelMergerNode接收几个输入单声道源并将它们组合成单个多通道输出信号。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vk/bv/qh/vkbvqhpvhnghgf55bx9umic_yhc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分支是相反的过程（通过ChannelSplitterNode实现）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6d/9c/y7/6d9cy7_hiinrgqscxxdsbe3x-zy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以找到使用WAA的示例</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">示例的源代码在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一篇有关其工作原理的文章。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
感谢您的关注。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN495678/index.html">比赛VK补餐。追踪ML。第四名 怎么样？</a></li>
<li><a href="../zh-CN495682/index.html">Android应用程序的API反向</a></li>
<li><a href="../zh-CN495684/index.html">与最终用户互动可改善代码的5个原因</a></li>
<li><a href="../zh-CN495686/index.html">个人拉斯维加斯或浏览器扩展程序中的游戏</a></li>
<li><a href="../zh-CN495688/index.html">基于Active Directory的Zimbra协作OSE用户同步</a></li>
<li><a href="../zh-CN495692/index.html">DIY和开源帮助医生</a></li>
<li><a href="../zh-CN495694/index.html">移动应用参考服务</a></li>
<li><a href="../zh-CN495696/index.html">波斯王子创作者如何克服Apple II的内存限制</a></li>
<li><a href="../zh-CN495698/index.html">图片中的客户端-服务器架构</a></li>
<li><a href="../zh-CN495700/index.html">厄运男孩ESP32</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>