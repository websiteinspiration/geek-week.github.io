<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§±üèº ü§ï üßìüèΩ Wie Gatsby Next.js umging üß° „ÄΩÔ∏è üë©üèº‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Autor des Artikels, dessen √úbersetzung wir heute ver√∂ffentlichen, arbeitet als Programmierer bei Antler. Dieses Unternehmen ist ein globaler Start...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wie Gatsby Next.js umging</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/500228/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Autor des Artikels, dessen √úbersetzung wir heute ver√∂ffentlichen, arbeitet als Programmierer bei Antler. </font><font style="vertical-align: inherit;">Dieses Unternehmen ist ein globaler Startup-Generator. </font><font style="vertical-align: inherit;">Bei Antler finden mehrmals im Jahr Demo-Tage statt, an denen viele Startup-Entwickler und Investoren aus der ganzen Welt zusammenkommen. </font><font style="vertical-align: inherit;">Die Situation um COVID-19 zwang Antler, seine Ereignisse in ein Online-Format zu √ºbersetzen.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/hq/r9/an/hqr9anmkfyicv4znlhi2ynk16rm.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Unternehmen wollte sicherstellen, dass Besucher ihrer virtuellen Veranstaltungen, ohne von irgendetwas abgelenkt zu werden und nirgendwo h√§ngen zu bleiben, das Wichtigste sehen. </font><font style="vertical-align: inherit;">Die Ideen von Startups, die der √ñffentlichkeit pr√§sentiert werden, werden als Inhalt von Webseiten ausgedr√ºckt. </font><font style="vertical-align: inherit;">Virtuelle Demonstrationstage k√∂nnen f√ºr ein ziemlich breites Publikum von Interesse sein. </font><font style="vertical-align: inherit;">Einige Mitglieder dieses Publikums nehmen m√∂glicherweise zum ersten Mal an so etwas teil. </font><font style="vertical-align: inherit;">Daher musste das Unternehmen alles auf die bestm√∂gliche Weise tun und das Hochladen von Seiten, die Startups darstellen, mit hoher Geschwindigkeit bereitstellen. </font><font style="vertical-align: inherit;">Sie entschieden, dass dies nur dann der Fall ist, wenn eine leistungsstarke progressive Webanwendung (PWA, Progressive Web App) n√ºtzlich sein kann. </font><font style="vertical-align: inherit;">Das Hauptproblem bestand darin, die richtige Technologie f√ºr die Entwicklung von PWA zu finden.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f54/6f9/1fa/f546f91fa52e40c139cc78fe26b1ad06.gif"></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server-Rendering oder statischer Site-Generator?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst m√∂chte ich Ihnen den Kurs ein wenig vorstellen. Alle unsere Projekte basieren auf React und der Material-UI-Bibliothek. Aus diesem Grund haben wir uns zun√§chst entschieden, nicht von diesem Technologie-Stack abzuweichen, um eine hohe Entwicklungsgeschwindigkeit zu gew√§hrleisten und das neue Projekt mit dem zu vereinbaren, was wir bereits haben. Der Hauptunterschied zwischen diesem neuen Projekt und unseren anderen React-Anwendungen bestand darin, dass die Datenbank f√ºr sie mit der Create-React-App erstellt wurde und dass sie vollst√§ndig auf dem Client gerendert wurden (CSR, Client-Side Rendering). Dies f√ºhrte insbesondere dazu, dass Benutzer beim erstmaligen Laden der Anwendung gezwungen waren, einen leeren wei√üen Bildschirm zu beobachten, w√§hrend der JavaScript-Code des Projekts geladen, verarbeitet und ausgef√ºhrt wurde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir brauchten ein kompromissloses Leistungsniveau. Aus diesem Grund haben wir uns Gedanken dar√ºber gemacht, entweder serverseitiges Rendering (SSR, serverseitiges Rendering) oder einen statischen Site-Generator (SSG, statischer Site-Generator) zu verwenden, damit das anf√§ngliche Laden von Anwendungen so schnell wie m√∂glich erfolgt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Daten werden im Cloud Firestore gespeichert und wir greifen mit Algolia darauf zu. Auf diese Weise k√∂nnen wir auf Datenbankfeldebene den √∂ffentlichen Zugriff auf Daten mit eingeschr√§nkten API-Schl√ºsseln steuern. Dies verbessert auch die Abfrageleistung. Aus Erfahrung wissen wir, dass Algolia-Abfragen schneller als normal sind und dass das komprimierte Firestore-JavaScript-SDK </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">86 KB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gro√ü ist </font><font style="vertical-align: inherit;">. Im Fall von Algolia sind dies </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7,5 Kb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus wollten wir die Daten, die wir unseren Kunden geben, so aktuell wie m√∂glich gestalten. Dies w√ºrde uns helfen, fehlerhafte Daten, die versehentlich ver√∂ffentlicht werden k√∂nnten, sehr schnell zu korrigieren. W√§hrend die Standardpraxis von SSG die Implementierung relevanter Datenanforderungen w√§hrend der Montage des Projekts vorsieht, haben wir erwartet, dass die Daten in unserer Datenbank ziemlich h√§ufig geschrieben werden. Insbesondere handelt es sich um Datenaufzeichnungen, die von Administratoren √ºber die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Firetable-</font></a><font style="vertical-align: inherit;"> Schnittstelle initiiert wurden</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und auf Initiative der Gr√ºnder der Projekte, die das Webportal nutzen. Dies f√ºhrt zu einer wettbewerbsf√§higen Montage des Projekts. Aufgrund der strukturellen Merkmale unserer Datenbank k√∂nnen geringf√ºgige √Ñnderungen zu neuen Projektmontagevorg√§ngen f√ºhren. Dies macht unsere CI / CD-Pipeline √§u√üerst ineffizient. Daher mussten die Anforderungen zum Empfangen von Daten aus dem Repository jedes Mal ausgef√ºhrt werden, wenn ein Benutzer das Laden einer Seite anfordert. Leider bedeutete dies, dass unsere L√∂sung kein Beispiel f√ºr ein ‚Äûsauberes‚Äú SSG-Projekt sein w√ºrde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Urspr√ºnglich wurde unsere Anwendung auf der Basis von Gatsby erstellt, da wir bereits auf Gatsby erstellte Zielseiten verwendet haben und auf einer davon bereits die Material-UI-Bibliothek verwendet wurde. </font><font style="vertical-align: inherit;">Die erste Version des Projekts bildete eine Seite, auf der w√§hrend des Ladens der Daten ein "Skelett" angezeigt wurde. </font><font style="vertical-align: inherit;">Gleichzeitig lag die erste inhaltliche Farbe (FCP) im Bereich von 1 Sekunde.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d75/578/718/d7557871834d0d244f8501327d68810d.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herunterladen des "Skeletts" der Seite mit anschlie√üendem Laden der Daten</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Die L√∂sung erwies sich als interessant, hatte jedoch ihre Nachteile, da die Daten f√ºr die Ausgabe der Seite auf Initiative des Kunden heruntergeladen wurden:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um den Inhalt der Seite zu sehen, m√ºssten Benutzer auf den Download dieser Seite selbst und der darin angezeigten Daten warten, die durch 4 Anfragen an Algolia erhalten wurden.</font></font></li>
<li>    JS-    .   ,  React   ¬´¬ª      .         DOM.</li>
<li>         .  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus diesem Grund habe ich mich am langen Wochenende entschlossen, mit der SSR-Version des mit Next.js erstellten Projekts zu experimentieren. Zum Gl√ºck hatte die Dokumentation f√ºr Material-UI ein Beispielprojekt f√ºr Next.js. Daher musste ich dieses Framework nicht von Grund auf neu lernen. Ich musste nur einige Teile des Tutorials und der Dokumentation durchsehen. Ich habe die Anwendung in ein Projekt konvertiert, das auf dem Server gerendert wurde. Wenn ein Benutzer das Laden einer Seite angefordert hat, hat der Server Datenanforderungen ausgef√ºhrt, die zum Ausf√ºllen der Seite erforderlich sind. Dieser Schritt erm√∂glichte es uns, alle drei oben genannten Probleme zu l√∂sen. Hier sind die Testergebnisse f√ºr zwei Anwendungsoptionen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b60/0da/cda/b600dacda702f25e97808ed9f762ff8c.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse der Recherche nach Anwendungen mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed ‚Äã‚ÄãInsights</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Links ist Gatsby (SSG), rechts ist Next.js (SSR) ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Originalbild</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der FCP f√ºr die Next.js-Version des Projekts war etwa dreimal h√∂her als f√ºr die auf Gatsby basierende Version. Die Gatsby-Version des Projekts hatte einen Geschwindigkeitsindex von 3,3 Sekunden, w√§hrend die Next.js-Version 6,2 Sekunden hatte. Die Zeit bis zum ersten Byte (TTFB, Time To First Byte) betrug 2,56 Sekunden bei Verwendung von Next.js und 10 bis 20 ms bei Verwendung von Gatsby.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass die Next.js-Version der Site f√ºr einen anderen Dienst bereitgestellt wurde (hier haben wir die Dienste ZEIT Now und Firebase Hosting verwendet - dies k√∂nnte sich auch auf die Erh√∂hung des TTFB auswirken). Trotzdem war klar, dass die √úbertragung von Daten-Upload-Vorg√§ngen auf den Server die Site langsamer erscheinen lie√ü, obwohl alle Seitenmaterialien ungef√§hr zur gleichen Zeit geladen wurden. Tatsache ist, dass der Benutzer in der Next.js-Version des Projekts f√ºr einige Zeit nur eine leere wei√üe Seite sieht.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e0/8a2/ab3/6e08a2ab3bcb4c06471cc92545848d8a.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Screenshot zeigt das Laden von zwei Versionen einer Anwendung. </font><font style="vertical-align: inherit;">Der Download wurde nicht gleichzeitig abgeschlossen. </font><font style="vertical-align: inherit;">Die Datens√§tze werden synchronisiert, sobald Sie die Eingabetaste dr√ºcken.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
All dies gibt uns eine wichtige Lehre aus dem Bereich der Webentwicklung: Sie m√ºssen den Benutzern visuelles Feedback geben. </font><font style="vertical-align: inherit;">Eine</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Studie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ergab, dass Anwendungen, die Skelettbildschirme verwenden, schneller geladen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus entspricht dieses Ergebnis nicht der Stimmung, die Sie m√∂glicherweise beim Lesen von Artikeln √ºber die Webentwicklung in den letzten Jahren hatten. </font><font style="vertical-align: inherit;">Wir sprechen n√§mlich von der Tatsache, dass die Verwendung der Ressourcen des Clients nichts auszusetzen hat und dass die SSR keine umfassende L√∂sung f√ºr Leistungsprobleme darstellt.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leistung bei der statischen Site-Generierung: Vergleich von Gatsby und Next.js.</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hrend die beiden betrachteten Frameworks Gatsby und Next.js f√ºr ihre F√§higkeit bekannt sind, statische Sites und Server-Rendering zu generieren, wurde die </font><font style="vertical-align: inherit;">Unterst√ºtzung f√ºr SSG </font><font style="vertical-align: inherit;">in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.js 9.3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verbessert, was es zu einem Konkurrenten von Gatsby macht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Zeitpunkt dieses Schreibens war die F√§higkeit von Next.js, statische Sites zu generieren, noch sehr neu. Sie war etwas mehr als einen Monat alt. Sie wird immer noch auf der ersten Seite des Projekts gemeldet. Jetzt gibt es nicht mehr viele Vergleiche der SSG-Funktionen von Gatsby und Next.js (oder vielleicht gibt es √ºberhaupt keine derartigen Vergleiche). Aus diesem Grund habe ich beschlossen, mein eigenes Experiment durchzuf√ºhren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe die Gatsby-Version des Projekts auf den Status zur√ºckgesetzt, als die Daten auf den Client heruntergeladen wurden, und sie so erstellt, dass beide Versionen der Anwendung genau die gleichen Funktionen haben. Ich musste n√§mlich entfernen, wof√ºr Gatsby-Plugins verantwortlich sind: SEO-Funktionen, Generieren von Favoriten, PWA-Manifest. Um ausschlie√ülich von Frameworks erstellte JavaScript-Bundles zu vergleichen, habe ich keine Bilder und andere Inhalte, die von externen Quellen heruntergeladen wurden, in die Projekte aufgenommen. Beide Versionen der Anwendung wurden auf der Firebase Hosting-Plattform bereitgestellt. Als Referenz wurden zwei Versionen der Anwendung basierend auf Gatsby 2.20.9 und Next.js 9.3.4 erstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe Lighthouse 6 Mal f√ºr jede Version auf meinem Computer ausgef√ºhrt. Die Ergebnisse zeigten einen leichten Vorteil f√ºr Gatsby.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82a/522/059/82a522059afba13a70e62df76144b6e6.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durchschnittswerte nach 6 Lighthouse-Starts f√ºr jedes Framework ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Originalbild</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In Bezug auf die Gesamtleistungsbewertung lag die Next.js-Version nur geringf√ºgig hinter der Gatsby-Version zur√ºck. Gleiches gilt f√ºr FCP und Speed ‚Äã‚ÄãIndex. Die n√§chste m√∂gliche Verz√∂gerung der ersten Eingabe f√ºr die Next.js-Version der Anwendung ist geringf√ºgig h√∂her als f√ºr die Gatsby-Version.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um besser zu verstehen, was passiert, habe ich die Registerkarte "Netzwerk" der Chrome-Entwicklertools aufgerufen. Wie sich herausstellte, ist in der Next.js-Version des Projekts die Anzahl der Fragmente, in die der JavaScript-Code aufgeteilt wird, 3 h√∂her als in der Gatsby-Version (ohne Manifestdateien), aber der komprimierte Code ist 20 KB kleiner. K√∂nnen die zus√§tzlichen Anforderungen, die zum Herunterladen dieser Dateien erforderlich sind, die Vorteile eines kleineren Bundles so stark √ºberwiegen, dass die Leistung beeintr√§chtigt wird?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27b/d84/d9a/27bd84d9aad10ae1f3421a0f829c3fa2.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der Gatsby-Version des Projekts werden 7 Anforderungen ausgef√ºhrt, um 379 KB Daten herunterzuladen. In der Next.js-Version des Projekts - 12 Anforderungen zum Herunterladen von 359 KB Daten ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Originalbild</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn Sie die JavaScript-Leistung analysieren, geben die Entwicklertools an, dass die Next.js-Version des Projekts zus√§tzliche 300 ms f√ºr das erste Rendern ben√∂tigt dass diese Version mehr Zeit f√ºr die Aufgabe "Skript auswerten" ben√∂tigt. In den Tools des Entwicklers wurde diese Aufgabe sogar als "lange Aufgabe" markiert.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24b/1be/11c/24b1be11c62fc6a1561a413555e53c0f.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyse der Leistung verschiedener Projektoptionen mithilfe der Registerkarte Leistung der Chrome-Entwicklertools ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Originalbild</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ich habe den Projektcode verglichen, um festzustellen, ob es Unterschiede in der Implementierung gibt, die die Leistung beeintr√§chtigen k√∂nnten. Mit Ausnahme des Entfernens von unn√∂tigem Code und Korrekturen, die mit fehlenden TypeScript-Typen verbunden sind, bestand der einzige Unterschied in der Implementierung eines reibungslosen Bildlaufs der Seite beim Verschieben zu ihren einzelnen Teilen. Diese Funktion wurde zuvor von einer Datei eingef√ºhrt</font></font><code>gatsby-browser.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und in eine</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dynamisch importierte Komponente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verschoben</font><font style="vertical-align: inherit;">. Infolgedessen w√ºrde dieser Code nur in einem Browser ausgef√ºhrt. (Wir haben das</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Smooth-Scroll-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paket npm verwendet</font><font style="vertical-align: inherit;">, und beim Importieren ben√∂tigt er ein Objekt</font></font><code>window</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.) Dieses Problem mag der Schuldige sein, aber ich wei√ü nicht, wie es in Next.js behandelt wird.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby ist aus Sicht des Entwicklers bequemer</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende habe ich mich f√ºr die Gatsby-Version des Projekts entschieden. Au√üerdem habe ich hier den sehr kleinen Leistungsvorteil, den Gatsby im Vergleich zum SSG-Mechanismus von Next.js gezeigt hat, nicht ber√ºcksichtigt (ich werde mich nicht ernsthaft an den Vorteil von 0,6 Sekunden halten?). Tatsache ist, dass in der Gatsby-Version des Projekts bereits viele PWA-Funktionen implementiert sind, und ich habe nicht den Sinn gesehen, sie in der Next.js-Version der Anwendung erneut zu implementieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ich gerade die erste Gatsby-Version des Projekts erstellte, konnte ich dem Projekt schnell einige n√ºtzliche PWA-Funktionen hinzuf√ºgen. Um beispielsweise jeder Seite meine eigenen Meta-Tags hinzuzuf√ºgen, die f√ºr SEO ben√∂tigt werden, musste ich nur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das Handbuch lesen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Um das Projekt mit einem PWA-Manifest auszustatten, musste ich nur das entsprechende </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin verwenden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Um das Projekt mit Favicons auszustatten, die alle verf√ºgbaren Plattformen unterst√ºtzen (und in diesem Fall gibt es immer noch ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schreckliches Durcheinander</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), musste ich nicht einmal etwas tun, da die Favicon-Unterst√ºtzung Teil des Plugins ist, das f√ºr das Manifest verantwortlich ist. Es ist sehr bequem!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Implementieren derselben Funktionen in der Next.js-Version der Anwendung w√ºrde mehr Arbeit erfordern. Ich m√ºsste nach Schulungshandb√ºchern suchen, nach allen m√∂glichen ‚ÄûBest Practices‚Äú. Und die Tatsache, dass ich sowieso Erfolg haben w√ºrde, w√ºrde mir keine Vorteile bringen. Immerhin unterscheidet sich die Next.js-Version des Projekts nicht in der h√∂heren Leistung als die Gatsby-Version. Dies war au√üerdem der Grund, warum ich beschlossen habe, die entsprechenden Funktionen der Gatsby-Version des Projekts einfach zu deaktivieren und mit der Next.js-Version zu vergleichen. Die Next.js-Dokumentation ist pr√§gnanter als die Gatsby-Dokumentation (m√∂glicherweise ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kleiner als </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Ich mag das gamifizierte Next.js.-Tutorial sehr </font><font style="vertical-align: inherit;">Die umfangreichere Gatsby-Dokumentation ist jedoch bei der tats√§chlichen Entwicklung von PWA wertvoller, obwohl sie auf den ersten Blick riesig aussieht.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/010/138/800/0101388008c84ce2dda5f6f8f522cf6d.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby-Dokumentation</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Richtig, ich kann nicht √ºber die St√§rken von Next.j schweigen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dank des Tutorials und der √ºbersichtlichen Dokumentation von Next.js scheint dieses Framework schneller zu erlernen als Gatsby.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das in Next.js verwendete Datenladesystem basiert auf asynchronen Funktionen und der Fetch-API. </font><font style="vertical-align: inherit;">Infolgedessen hat der Entwickler bei der Entwicklung von Next.js nicht das Gef√ºhl, dass er GraphQL lernen muss, um die Funktionen des Frameworks voll nutzen zu k√∂nnen.</font></font></li>
<li> Next.js    TypeScript,      Gatsby        ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   </a> (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>).     Next.js      ,     ,        ,        .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dank der Tatsache, dass Next.js die SSG-Unterst√ºtzung verbessert hat, ist dieses Framework zu einem leistungsstarken Tool geworden, mit dem auf der Ebene jeder einzelnen Seite die Arbeitsweise ausgew√§hlt werden kann. </font><font style="vertical-align: inherit;">Dies kann SSR, SSG oder CSR sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ich diese Anwendung in einer vollst√§ndig statischen Form generieren k√∂nnte, w√ºrde Next.js besser zu mir passen, da ich die Standard-JS-API von Algolia verwenden und den Code zum Laden von Daten </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in derselben Datei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wie halten k√∂nnte und Komponentencode. </font><font style="vertical-align: inherit;">Da Algolia keine integrierte GraphQL-API hat und es kein Gatsby-Plugin f√ºr Algolia gibt, m√ºsste f√ºr die Implementierung eines solchen Mechanismus in Gatsby dieser Code </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einer neuen Datei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hinzugef√ºgt </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">werden</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Und dies widerspricht der intuitiven deklarativen Beschreibung von Seiten.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informationen zu zus√§tzlichen M√∂glichkeiten zur Verbesserung der Projektleistung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir das Problem der Auswahl eines Frameworks gel√∂st haben, kann festgestellt werden, dass es zus√§tzliche M√∂glichkeiten zur Verbesserung der Projektleistung gibt, die nicht mit dem Framework zusammenh√§ngen. </font><font style="vertical-align: inherit;">Diese Verbesserungen k√∂nnen die Lighthouse-Projektbewertung auf 100 bringen.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mailingliste von March</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algolia wurde empfohlen, einen Hinweis hinzuzuf√ºgen </font></font><code>preconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um die Geschwindigkeit der Abfrageausf√ºhrung weiter zu erh√∂hen. </font><font style="vertical-align: inherit;">(Richtig, leider wird im Newsletter das falsche Codefragment angegeben. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> richtige Code.)</font></font></li>
<li>    .   JS-  CSS-,  webpack- Gatsby.   Gatsby  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>   .  ,       ,   Netlify  Amazon S3. ,  Firebase Hosting,  ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir verwenden JPEG- und PNG-Bilder, die von Startup-Erstellern in der Anwendung hochgeladen wurden. </font><font style="vertical-align: inherit;">Wir komprimieren und optimieren sie nicht. </font><font style="vertical-align: inherit;">Die Verbesserung dieses Aspekts unserer Anwendung ist eine ziemliche Herausforderung und geht √ºber den Rahmen dieses Projekts hinaus. </font><font style="vertical-align: inherit;">Dar√ºber hinaus w√§re es einfach gro√üartig, wenn alle diese Bilder in das WebP-Format konvertiert w√ºrden. </font><font style="vertical-align: inherit;">Infolgedessen m√ºssten wir Bilder nur in einem hocheffizienten Grafikformat speichern. </font><font style="vertical-align: inherit;">Leider macht das Safari WebKit-Entwicklungsteam wie bei vielen anderen PWA-Funktionen s√ºchtig nach WebP-Unterst√ºtzung. </font><font style="vertical-align: inherit;">Jetzt ist es der einzige gro√üe Browser, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dieses Format </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">nicht unterst√ºtzt</font></a><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir kurz zusammenfassen, wor√ºber wir hier gesprochen haben, k√∂nnen wir Folgendes sagen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Ausgabe der "Skelett" -Version der Seite w√§hrend des Ladens von Daten durch den Client erzeugt dem Benutzer das Gef√ºhl eines schnelleren Website-Betriebs als wenn der Benutzer eine leere Seite betrachtet, w√§hrend der Server Daten l√§dt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Gatsby-Version der Site war nur geringf√ºgig schneller als die Next.js-Version. </font><font style="vertical-align: inherit;">Das Gatsby-Plug-In-System und die hochwertige Projektdokumentation erh√∂hen jedoch die Benutzerfreundlichkeit dieses Frameworks f√ºr den Entwickler.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebe Leser! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie statische Site-Generatoren oder serverseitige Rendering-Systeme, um Ihre Projekte zu beschleunigen?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500216/index.html">Vergessen Sie das Anthropoz√§n: Wir sind in das synthetische Zeitalter eingetreten</a></li>
<li><a href="../de500218/index.html">Epidemiologisches Modell Covid-19</a></li>
<li><a href="../de500220/index.html">Schallplatten und Kassetten direkt in Ihrem Android</a></li>
<li><a href="../de500222/index.html">Schnurlostelefone von britischen Doppeldeckern aus dem Ersten Weltkrieg</a></li>
<li><a href="../de500224/index.html">DIY elektronische Nase</a></li>
<li><a href="../de500232/index.html">Akka.NET lernen: Server eines einfachen Online-Spiels</a></li>
<li><a href="../de500234/index.html">Warum ich ein pers√∂nliches Spesenabrechnungsprojekt f√ºr Git + JS gemacht habe</a></li>
<li><a href="../de500238/index.html">Sag mir, was dich st√∂rt</a></li>
<li><a href="../de500244/index.html">Au√üerhalb des Arrays</a></li>
<li><a href="../de500246/index.html">Sch√ºtzen und Hacken der Xbox 360 (Teil 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>