<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≥ üçä üèá 10 circuit design tips üìä üëø ‚úâÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, a friend of mine, who became interested in electronics and circuitry, asked me to give him some practical advice on the development of elect...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>10 circuit design tips</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505302/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recently, a friend of mine, who became interested in electronics and circuitry, asked me to give him some practical advice on the development of electronic devices. </font><font style="vertical-align: inherit;">At first, this question puzzled me a bit: it somehow happened that for myself I never singled out any lists of mandatory design rules, I had it all somewhere on the subconscious level. </font><font style="vertical-align: inherit;">But this question served as a good impetus in order to sit down and formulate at least a small list of such recommendations. </font><font style="vertical-align: inherit;">When everything was ready, I thought that it might be interesting to read to someone else, and this is how this article turned out.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/za/il/0n/zail0n0ydnv3kfbhrorw31sn7tk.png"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The article is a list of ten basic design rules that are relevant when developing a wide class of devices. </font><font style="vertical-align: inherit;">In this article, I deliberately do not touch on issues related to the design of printed circuit boards - this is a topic for another discussion. </font><font style="vertical-align: inherit;">The rules are given in random order without any sorting by alphabet, significance, frequency of use in practice, etc. This list of rules also does not claim to be any completeness and absolute truth, it contains my experience in developing electronic devices and nothing more.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Put capacitors on the power of microcircuits</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The presence of capacitors for power is a necessary condition for the normal operation of any chip. The fact is that they provide the pulse current that the microcircuit consumes when switching internal transistors. If there is no capacitor in the immediate vicinity of the microcircuit, then due to the inductance of the tracks of the printed circuit board, the current front may be blocked, and the necessary rate of rise will not be provided. It may well be that the chip will not work at all, such cases occur. Due to this feature, capacitors with low ESR and ESL (equivalent series resistance and equivalent series inductance) should be selected. In the vast majority of cases, ceramic capacitors show themselves well, and if suddenly a large capacity is required, tantalum capacitors.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The number of capacitors for each microcircuit must be not less than the number of power legs of this microcircuit. That is, if the microcircuit has 10 power pins, then at least 10 capacitors must be placed on only one of this microcircuit, and these capacitors must be located on the printed circuit board as close as possible to the power pins. Often, manufacturers recommend putting another additional capacitor of a higher nominal value common to all the power pins of the microcircuit. The figure below shows an example from the documentation for the super-popular STM32F103 microcontroller: as you can see, in addition to the 5 0.1 ŒºF capacitors at the VDD terminals, the manufacturer also recommends putting a common 4.7 ŒºF capacitor.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ah/n6/kz/ahn6kz8cut4zdr5i63hi5jeubty.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The choice of capacitor capacitance deserves special attention. </font><font style="vertical-align: inherit;">In most cases, you will not be mistaken if you choose a capacitance of 0.1 ŒºF. </font><font style="vertical-align: inherit;">However, do not be too lazy to look at this issue in the documentation for the chip: there may also be subtleties. </font><font style="vertical-align: inherit;">For example, RF circuits often require a smaller capacitor. </font><font style="vertical-align: inherit;">Below is a picture from the documentation for the LT5560 mixer chip. </font><font style="vertical-align: inherit;">As can be seen from the figure, the manufacturer advises the use of 1 ŒºF and 1 nF capacitors. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vw/vu/w8/vwvuw8vdm50fhk7n6qbve9gvhva.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There may be deviations in the other direction: for example, the WP7502 4G module requires a capacitor of as much as 1500 ŒºF installed next to the power leads: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1i/dz/a7/1idza7zrk_g5jrfibalqyj4tffm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, it is always best to check the values ‚Äã‚Äãof the required capacitors in the documentation for a particular microcircuit.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Observe component limits</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unfortunately, circuits are not uncommon, where a resistor in the 0402 housing is in a 220 V circuit or something similar. You can‚Äôt do this! Before installing any (absolutely any) component on the circuit, you must make sure that under no circumstances the maximum permissible parameters for current, voltage and power dissipation for this component are exceeded. All calculations must be performed for the worst operating conditions (in particular, for the maximum possible voltage on the circuit), and the limiting parameters should be found in the documentation for a specific component.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider a simple example with a resistor. Suppose we calculated the circuit and we need to provide a resistance of 25 kOhm, and the maximum allowable voltage in this circuit is 100 V. What resistor will we put in the circuit? We open the documentation for Bourns RC series resistors and see the main limit parameters: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/8s/35/vq8s35ntpb5t59fp_v7aqsmu5gq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CR0805 or CR1206 series resistors can work in 100 V circuits. CR0603 can not be put there. What about power dissipation? As the school physics course states, for a direct current circuit it is considered by the formula:</font></font><br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><msup><mi>U</mi><mn>2</mn></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>R</mi><mo>=</mo><msup><mn>100</mn><mn>2</mn></msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>25000</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>4</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x412;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x442;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.947ex" height="3.009ex" viewBox="0 -970.7 14616 1295.7" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-3D" x="1029" y="0"></use><g transform="translate(2085,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMATHI-55" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-32" x="1121" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-2F" x="3332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMATHI-52" x="3832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-3D" x="4869" y="0"></use><g transform="translate(5926,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-30" x="1001" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-32" x="2123" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-2F" x="7881" y="0"></use><g transform="translate(8382,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-30" x="2002" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-3D" x="11162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-30" x="12218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-2C" x="12719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/505302/&amp;usg=ALkJrhjuQsJhceVa1pkAuj4g36qct_9WrA#MJMAIN-34" x="13164" y="0"></use><g transform="translate(13664,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(53.819) matrix(1 0 0 -1 0 0)"></text></g><g transform="translate(14239,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(53.819) matrix(1 0 0 -1 0 0)"></text></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><msup><mi>U</mi><mn>2</mn></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>R</mi><mo>=</mo><msup><mn>100</mn><mn>2</mn></msup><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>25000</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>4</mn><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">P=U^2/R=100^2/25000=0,4 </script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
None of the presented resistors in the table can withstand such power, however, we can connect them several pieces in parallel: 4 pieces of CR0805 or 2 pieces of CR1206. Just do not forget that when the resistors are connected in parallel, their equivalent resistance decreases. For example, we can take 4 pcs. CR0805-JW-104ELF (100 kOhm): connecting them in parallel, we get just 25 kOhm. For critical applications, you can further reduce the load on each of the resistors by connecting in parallel not 4 pieces, but 6 pieces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The maximum allowable current for the RC series resistor is 2 A, and it will clearly not be exceeded here, this is easily checked according to Ohm's law. Moreover, this parameter is mainly relevant for resistors with a small resistance, for the rest you will sooner bump into excess power.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And how to choose capacitors? </font><font style="vertical-align: inherit;">After determining the type of capacitor used (ceramics, tantalum, film, electrolyte, etc.), it is necessary to ensure a voltage margin of at least 25-30%. </font><font style="vertical-align: inherit;">If possible, then for critical applications it is better to take the stock twice. </font><font style="vertical-align: inherit;">In some cases, in addition to voltage, it is also necessary to take into account the pulse current through the capacitor. </font><font style="vertical-align: inherit;">This parameter is often forgotten, although overloading the capacitor by current in the circuits of some switching power supply will not end in any good way. </font><font style="vertical-align: inherit;">Consider an example. </font><font style="vertical-align: inherit;">Suppose we calculated our switching power supply and determined that it:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It operates at a frequency of 100 kHz. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The voltage of the output circuit is 30 V. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A capacitor of at least 100 ŒºF is required. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A pulse current of 2 A will flow through it (effective value). </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The capacitance and voltage of the capacitor are quite large, so the use of an electrolytic capacitor will be justified. For example, Panasonic EEH-ZA capacitors are suitable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We open documentation on them: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r9/qu/xg/r9quxgeamkfxc7ktgvzlqer5u2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At first glance, it seems, 35 V is more than 30 V, and this capacitor should come up to us. However, in this case, the supply will be only 5 V, which is very small. The right decision would be to choose a 50 V capacitor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We look further: we have a 50 V capacitor with the required capacitance of 100 ŒºF. One could take it, but its maximum current is equal to our expected 2 A (for a frequency of 100 kHz), that is, again there will be no margin for this parameter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, it will be correct to take two capacitors at 68 uF 50 V and connect them in parallel. </font><font style="vertical-align: inherit;">Thus, we get a total capacitance of 132 ŒºF, a maximum voltage of 50 V and a maximum pulse current of 3.6 A. Such a system will be reliable and will work for a long time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chokes, transistors, and generally any other components are similarly selected. </font><font style="vertical-align: inherit;">You should always remember about their limit parameters and take components with a margin of at least 25-30%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The limiting parameters can also include temperature. </font><font style="vertical-align: inherit;">There are three main temperature groups:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commercial (0 ‚ÑÉ ... + 70 ‚ÑÉ)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Industrial (-40 ‚ÑÉ ... + 85 ‚ÑÉ)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Military (-55 ‚ÑÉ ... + 125 ‚ÑÉ)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This division is not absolute, there are also all sorts of extended subbands. </font><font style="vertical-align: inherit;">But one thing is important - all (absolutely all) components on your circuit should fall within the temperature range specified by the technical task. </font><font style="vertical-align: inherit;">That is, when designing a circuit, you always need to keep in mind the required range of operating temperatures and choose components in accordance with it. </font><font style="vertical-align: inherit;">Operating temperature ranges (as well as extreme temperature ranges) are always given in the documentation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is also worth noting that you probably will not be able to buy microcircuits in the Military range: they are not sold to everyone.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Protect yourself from static</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An electrostatic discharge can burn out the ports of a chip worth thousands of dollars in a split second. </font><font style="vertical-align: inherit;">For this reason, you should always remember about it and take measures to protect your devices. </font><font style="vertical-align: inherit;">In general, the topic of protection against static electricity is quite extensive and in itself deserves a separate article. </font><font style="vertical-align: inherit;">As part of this, we will only try to briefly consider the basic rules that I have developed for myself:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All interface connectors (USB, UART, RS-232, etc.), which the user will then contact, must clearly have protection against static electricity.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All buttons that the user clicks on must be protected against static, provided that they are wired to sensitive microcircuits.</font></font></li>
<li> ,         ,        ,     .     RS-232 SN65C3223,        . <br>
<img src="https://habrastorage.org/webt/1u/na/gc/1unagcne5vyhps3t_q0dcjrrjnm.jpeg"><br>
 ,       ,             .</li>
<li>      ‚Äì      .            ,       ‚Äì      .        .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following requirements apply to static protection elements:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They must withstand the specified electrostatic discharge energy. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They must be rated for the appropriate operating voltage. </font><font style="vertical-align: inherit;">It makes little sense to put a 15 V protective diode in a circuit with a maximum permissible voltage of 3.6 V.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They should have a small parasitic capacitance (for high-speed circuits - a few picofarads maximum). </font><font style="vertical-align: inherit;">If you put some powerful protective diode (which will almost certainly have a large capacity) in the USB 3.0 circuit, then just fill up the signal fronts and nothing will work.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They should have small leakage currents. </font><font style="vertical-align: inherit;">The typical value is units of nA.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the printed circuit board, they should be located in the immediate vicinity of the connector, and the path of the printed circuit board must go strictly "connector output -&gt; protection element-&gt; protected component". </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After the protective diode and in front of the microcircuit it will be superfluous to put a resistor in the units of tens of ohms, if this is permissible. </font><font style="vertical-align: inherit;">This resistor will help to dissipate a possible surge in the protective diode during a strong discharge.</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/m8/pd/5t/m8pd5t3r5bwquoptr34bl-45c5w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What exactly to use as protection against statics? </font><font style="vertical-align: inherit;">Now there is a fairly rich selection:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protective diodes with a fixed voltage level. </font><font style="vertical-align: inherit;">An example is the CDSOS323 diode. </font><font style="vertical-align: inherit;">There are both unidirectional and bidirectional options for such protective diodes:</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/di/aa/nl/diaanlpwjfld5nuh7g7wy8urxym.jpeg"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protective diodes with a voltage level determined by the power source. </font><font style="vertical-align: inherit;">An example is the TPD4E001 diode assembly: the operating voltage range Vcc is from 0.9 to 5.5 volts. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/1x/xg/rd/1xxgrd0qpxmozmldjtxlghqhulc.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Near such diodes, it is recommended to place a capacitor of small capacity, included in the power supply.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Varistors. </font><font style="vertical-align: inherit;">There are special types designed to protect against static. </font><font style="vertical-align: inherit;">An example is CG0402. </font><font style="vertical-align: inherit;">Due to their ultra small capacitance in hundredths of picofarads, they can be used in high-speed devices such as USB 3.0 or HDMI:</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/fp/ss/t_/fpsst_v5tygm7u1ytc4x0csyb5m.jpeg"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not use zener diodes to protect against static! </font><font style="vertical-align: inherit;">They are for the other.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In severe cases, the use of gas arresters may be required, but this is not entirely about statics :)</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Safety - Above All</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main rule of the doctor is do no harm. </font><font style="vertical-align: inherit;">The main rule of the developer should be "Create devices that are safe for others." </font><font style="vertical-align: inherit;">In this section, I will discuss some of the most common points that can be fraught with danger:</font></font><br>
<br>
<ul>
<li>       30  (       12 ),    ,     .</li>
<li>    220    .         .        .         ! </li>
<li>  ,   , ,      Y ,               .</li>
<li>           . </li>
<li>     ‚Äì   </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When organizing residual current circuits, do not rely on microcontrollers; they tend to freeze. </font><font style="vertical-align: inherit;">Always duplicate such important chains with some kind of oak logic.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provide discharge circuits for high voltage capacitors. </font><font style="vertical-align: inherit;">After turning off the appliance, they should discharge as quickly as possible.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medical technology is a separate story. </font><font style="vertical-align: inherit;">Do not start developing it without familiarizing yourself with all the safety requirements that apply to this type of equipment.</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
More detailed information on the topic of security can be obtained in GOSTs and other standards.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Examples</font></font></b>
                        <div class="spoiler_text"><ul>
<li> 12.2.091-2012     ,    </li>
<li> 27570.0-87      .     </li>
<li>  12.1.019-2009 .      </li>
</ul> <br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Put protection against the fool</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you think that the user will not confuse the pinout of your power connector or supply 27 V instead of 12 V, then you are mistaken, this will happen sooner or later. This can somehow be avoided if your equipment is powered through some standard connector, but in any other case I recommend protecting the input power circuits from user errors. Of course, little will be saved from a nuclear explosion or from a direct connection to a 10 kV substation, but there should be basic protection elements. In the framework of this article, I will very briefly consider two types of protection: against reverse polarity and from increased input voltage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are already quite a lot of schemes for protecting against reverse polarity, but in my practice I widely use two of them: using a diode and using a field effect transistor.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The protection circuit against polarity reversal using a diode is shown in the figure: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/1a/m1/7j1am1gcazyap0c9em_7rue6jgy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
advantage of this circuit is its extreme simplicity, but it has a big drawback: the VD1 diode can get very hot. The power allocated to it can be roughly estimated by multiplying 0.4 ... 0.8 (voltage drop on an open diode) by the current consumption of the circuit. For an accurate calculation, you can use the I-V characteristic of the diode, which is always in the documentation for it. But it‚Äôs already obvious that at a current of 1 A, several tenths of a watt will be allocated to the diode, which will not only be wasted, but, in the absence of a heat sink, they will most likely quickly kill the diode (especially if it is in a small case). Therefore, such a protection scheme can be applied only if the current consumption does not exceed several tens of milliamps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For more powerful circuits, it is better to apply a protection circuit on a field-effect transistor, it is shown in the figure: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gn/bv/ko/gnbvkow47cpsp_ogfhqy9fg8dpw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Within the framework of this article I will not talk about how this circuit works and how to count it, a lot has already been written about it, and the interested reader will not have problems with search for information. Therefore, we immediately turn to overvoltage protection schemes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To protect against overvoltage, there are at least two approaches: installing any electronic fuses (hotswaps, power controllers) at the input of the circuit, or installing voltage limiters. Of course, you can combine these two approaches in one scheme.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Electronic fuse microcircuits come with a variety of functionalities: they can be able to monitor overvoltage, undervoltage, provide protection for current, temperature, power, provide a smooth increase in current, and much more. An example of a good electronic fuse is the TPS1663 microcircuit, the typical circuit of which is shown below: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/se/zj/dq/sezjdqdn-rkpt_ob8loqvl292us.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This microcircuit provides overvoltage protection, but it itself has a maximum allowable voltage of 67 volts. How to protect yourself in this case? Unfortunately, the protection cannot be extended indefinitely, and in this case there is only one option left: to allow something cheap to burn in the circuit and to break the circuit, saving all the valuable stuffing of the circuit. And here we are smoothly moving to voltage limiters.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A voltage limiter can be a varistor, a protective diode (TVS), or a gas discharger in general. To talk about the pros and cons of each would be drawn to a separate article, therefore, this will not be considered. It makes sense to use voltage limiters in conjunction with a fuse: with this approach, a varistor or protective diode limits the voltage by passing a large current through it, which causes the fuse to burn and open the circuit. If the circumstances are not very successful, the limiter itself may also burn out, however, valuable microcircuits on the board must be saved and, which is also very important, a possible fire is prevented. The simplest protection scheme for a device using a varistor is shown below:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/je/qy/gg/jeqyggugwhdufqrzvkzqmkzbxoe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We examined the basic circuitry for protecting the board against power overload and overvoltage. </font><font style="vertical-align: inherit;">The developer must choose the best combination of protection schemes, based on the requirements for reliability, probability of user error, space on the printed circuit board and the cost of the product. </font><font style="vertical-align: inherit;">As a conclusion for this section, I will give a fragment of the input cascade circuit implemented in one of my last developments. </font><font style="vertical-align: inherit;">In this scheme, a full range of protections is presented: protection against overturning on a field effect transistor, protection against low and high voltage, as well as current protection on a TPS1663 chip, and to top it all off with a varistor and a fuse.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sg/mc/6_/sgmc6_l324hiw0rrl_v658t3h9w.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Practice a systematic approach to development</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A very common mistake of novice developers is to draw a circuit, part the board (maybe even make one), and only then think about the device‚Äôs case. And here the most interesting part begins: it seems that here, there is an excellent housing for the device on sale, it would practically fit ... if the board were two millimeters shorter. And the next size of the case is already one and a half times larger, but you have to take it, because the alternative - making the case to order is too expensive. As a result, we have an unreasonably large case in which a small printed circuit board dangles. But this could have been avoided if the issue of developing the equipment case had not been left for later, but solved simultaneously with the development of the printed circuit board.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When some complex device with a custom case is being developed, then, in principle, high-quality development cannot occur without the close collaboration of the designer, circuit designer, and topologist (sometimes, however, it is the same person :)). It is important to understand that this work takes place simultaneously: the circuit designer draws the circuit and passes it to the topologist, the designer at this time determines the dimensions of the printed circuit boards depending on the design of the product, and also gives all kinds of restrictions on the height of the components and restricted areas, the topologist makes a preliminary arrangement of the components on the printed the circuit board and passes it to the designer for integration into a common 3D model, the circuit technician coordinates everything and, if necessary, responds to suggestions such as ‚Äúhere, I‚Äôll pick a throttle a couple of millimeters lower‚Äù.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But an integrated approach to development is not limited only to design. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the product involves writing embedded software, it is necessary for the circuitry to interact with programmers at the stage of developing the structural diagram of the future device. </font><font style="vertical-align: inherit;">This is necessary both for planning development timelines and for determining the feasibility of software implementation of embedded circuitry solutions. </font><font style="vertical-align: inherit;">Unfortunately, due to the lack of knowledge among the circuit technician about the features of software development, some of the solutions embedded in the circuit may not be feasible in principle from the point of view of writing software, and this will become clear only after the manufacture of printed circuit boards. </font><font style="vertical-align: inherit;">Therefore, in order to avoid such a sad scenario, it is worthwhile to think over and coordinate all issues of fundamental importance from the point of view of software with those who then write this software.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, when talking about an integrated approach, one cannot fail to mention such an important point as the organization of future production. Already at the stage of drawing the circuit, you need to think about how then this board will be produced, how to debug, verify, test it. Already now you need to lay the control points for measuring the voltage of power supplies, think about jobs, about all kinds of cables and where to connect them, about the test procedure. It may very well be that you will need special equipment to test your motherboard in mass production - its development (at least in a draft form) must begin in parallel with the motherboard being tested, because these are two interconnected devices.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, as a brief summary of the current section - approach the development comprehensively. </font><font style="vertical-align: inherit;">Think about the design of the product, about the case, about the development of software, about how your devices will be manufactured and tested at the very beginning of the design, and not when most of the work has already been done, and any step to the side is accompanied by huge resources.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Use zero resistors</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôm sure that any developer is familiar with this situation: the circuit is developed, the board is wired, the components are soldered, and now the product gets debugged. Turn on - and does not work. We begin to look for the reason - this is bad luck, the UX has mixed up the RX and TX. Or D + and D- in USB. Or MOSI and MISO in SPI. Or ... yes, you can make a mistake anywhere, especially if this piece of the circuit is done for the first time. We have to take a scalpel, cut the tracks on the printed circuit board, strip out the mask and try to solder wires to these tracks. But what if the tracks in the inner layers of the circuit board? And the chips are in the BGA package? Yes, and using Via-In-Pad technology? That's where the real pain is. At such moments, you involuntarily begin to envy programmers who can solve the problem by recompiling the program,while here the prospect of a complete alteration of the printed circuit board looms without the ability to revive the current one. Is it possible to somehow avoid such a sad ending? Often yes. In the case when some piece of the circuit is done for the first time, and the topology of the printed circuit board does not favor experiments, it is better to connect the ‚Äúdoubtful‚Äù circuits not directly, but through a zero resistor (a resistor with a resistance of 0 Œ©).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g2/8d/ar/g28darpo8eu7d8zgmqvsavqdaak.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this case, even if you make a mistake in the scheme, the error will not be fatal. It will be enough to remove the sealed resistors and switch the circuit in the correct way. It will do without cutting tracks and, especially, without picking copper on the inner layers of the board. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The question may arise - is it not too wasteful to put resistors on a board like that, which are not really needed? Well, at the time of writing, the price of the DigiKey zero resistor in the 0402 package was about $ 2 per 1000 pieces. Let everyone decide for himself whether it is expensive or not. In addition, I note that zero resistors are needed only on prototypes, when there is still no confidence in the correctness of the circuit. At the start of mass production, when all the flaws of the circuit are eliminated, it is quite possible to eliminate them in the new board revision.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The choice of the type of zero resistor must be approached comprehensively. </font><font style="vertical-align: inherit;">At least the following parameters must be considered:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum allowable current through the resistor</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spurious Inductance and Resistor Capacitance</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type of housing and footprint on the printed circuit board</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, if you put wirewound resistors in high-speed circuits, then the circuit most likely will not work: their stray inductance is too large. For most digital circuits, SMD resistors are well suited. Usually I use the 0402 case - this is a kind of compromise on the occupied space on the printed circuit board and ease of installation. Zero resistors in the 0402 package do not significantly affect even relatively high-frequency circuits: High Speed ‚Äã‚ÄãUSB (480 Mb / s) and Gigabit Ethernet are stable. There were no problems even in the sub-gigahertz range of the radio paths: zero resistors happened to be used there as an element of coordination. But, of course, when designing a high-frequency circuit, it is always worth remembering about the parasitic parameters of zero resistors (and not only them) and, if necessary, perform modeling.</font></font><br>
<br>
<h3>8.     </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In practice, very often there are cases when on a printed circuit board there are simultaneously highly sensitive analog paths and noisy digital processors. Or powerful pulse converters and fault-prone digital control systems. In general, when in the neighborhood on one piece of PCB there is some source of interference and next to it are components sensitive to them. How then to be? Practice says that 90% of success in creating such devices is literally a diluted printed circuit board. With the correct layout of elements, with a competent stack and with the formation of land and food landfills according to certain rules. But the current article is not about printed circuit boards, and besides, you should not underestimate things like filtering power and dividing land, which we will talk about in this section.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main essence of the land separation process is that the return currents of the ‚Äúnoisy‚Äù digital or power parts of the circuit do not flow together with the return currents of the sensitive circuits: otherwise, the sensitive circuits can pick up noise voltage fluctuations at the ground polygons and interpret them as part of the useful signal, which will inevitably lead to errors in operation. To do this, two chains with different names are created in the project (for example, A_GND and D_GND). Sensitive ground circuits connect to A_GND, and noisy circuits connect to D_GND. But if digital and analog blocks communicate with each other (and this happens almost always), it is necessary to connect the circuits A_GND and D_GND to each other (otherwise there will be no place for return currents to flow). How to do it right? There are different opinions on this.I usually connect these circuits to each other with a zero resistor, placing it near the power source on the printed circuit board.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v1/rt/50/v1rt50eovsherddno36nta4rwhy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you work in Altium Designer, then for these purposes there is a special type of component called Net Tie, you can use it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sometimes it is recommended to use inductance to connect these earth circuits, motivating it by the fact that it blocks high-frequency noise well. But I categorically do not advise doing this: do not forget that through this inductance the return currents of the signals between the digital and analog parts of the circuit will also flow. This will lead to a strong distortion of the waveform and, possibly, to the complete inoperability of the circuit. Inductance is useful in power circuits to filter it, but this must also be done carefully. Let's look at this issue in more detail.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, you need to remember one simple rule: the filter inductance should always be paired with a capacitor. </font><font style="vertical-align: inherit;">A circuit without a capacitor will most likely not work at all. </font><font style="vertical-align: inherit;">Why? </font><font style="vertical-align: inherit;">See the first section of this article. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/77/qq/yq/77qqyqyurvbk0zzbsh53gnxcjc4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The type and rating of the inductance is selected based on the expected intensity of the interference in the power supply, the interference spectrum and the characteristics of your circuit. </font><font style="vertical-align: inherit;">Of course, the current margin must be observed. </font><font style="vertical-align: inherit;">In my practice, I often use Murata BLM series inductors for power filtering: they are designed specifically for filtering interference in various types of equipment. </font><font style="vertical-align: inherit;">A brief description of the inductors of the BLM series is shown in the figure.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zw/x1/hk/zwx1hkkjac9emq_9t96bdf6flg4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9. Consider transients</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transients - this is how the system behaves until the onset of a steady state. In particular, transient processes can be understood as moments of power-on, moments of connecting a load to a source, switching keys, and much more. In general, a detailed discussion of transients is a topic for a series of articles. In this article, we will consider in more detail the issue of power-up, as it occurs most often. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situation 1.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You connected a board with wires to a laboratory power source. Power up and find that your board, instead of starting, is in cyclic reboot mode. What is happening and what to do?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indeed, such situations can arise and the reason is in the transition process. </font><font style="vertical-align: inherit;">At the time of start, your board can consume several times more current than at the time of regular operation. </font><font style="vertical-align: inherit;">This is especially noticeable if there is any powerful processor on the board. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An increasing current pulse passes from the power source to the board through wires, which, alas, are not perfect at all: they have both stray resistance and stray inductance. </font><font style="vertical-align: inherit;">All this leads to a voltage drop on the board: the processor supervisor fulfills this failure and, as a result, we have a cyclic reboot. </font><font style="vertical-align: inherit;">The problem has several solutions: shorten the wires and increase their cross-sectional area, use laboratory power supplies with feedback, or even put a power converter on the board and apply a higher voltage to the board.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situation 2.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You supply power to your board and then notice that at the initial moment for some reason the LED winks slightly, which should be turned off. Or for a short moment some kind of power converter starts to work, which, like, should be locked in the processor software. Or randomly clicks the relay. What is the matter? Error in code? Everything can be both simpler and more complex at the same time. Perhaps you simply did not take into account the state of the processor I / O ports (or some other chip) at the time of reset and initial initialization. Meanwhile, this is an important parameter that should not be forgotten. Typically, such points are spelled out in the documentation. For example, STMicroelectronics in the documentation for its STM32F750 microcontroller explicitly writes that all legs, except those that are responsible for programming and debugging,during and immediately after the reset, they are configured as inputs that are not pulled to either power or ground.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ta/1-/zu/ta1-zustooozxlg3uxllj6lbta8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How does this threaten us? A track on a printed circuit board, where on both sides the high-impedance inputs are an excellent antenna for picking up all kinds of interference. And if it is connected, for example, to the EN input of a power source, or controls a relay, then at the time of initial loading this power source can randomly turn on and off, and the relay can be clicked at an insane speed literally by a wave of a hand. Fortunately, this problem is solved quite simply: it is enough to put pull-up resistors to GND or to VCC with a nominal value of 10 ... 100 kOhm on critical circuits. They will reliably fix the signal level at the moments of initialization and will not allow random switching of peripheral devices.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, it is worth remembering that the state of the microcircuit pins at the time of reset and initial initialization is very individual and depends on the particular microcircuit. And if everything is pretty simple and understandable in the same STM, then, for example, everything is much trickier in the Texas Instruments AM4376 processor: some of the GPIOs have a HIGH-Z state, some have PU braces, and others have PD: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/yn/nd/-cynndds9wuvnxg8y27mq5elcf4.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situation 3.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Have you completely de-energized your board, but does the LED on it continue to burn or do the microcircuits show some activity? What's the matter, is it a perpetual motion machine? Alas, everything is much simpler. Most likely, you have any USB-UART converter or other peripherals connected to the board that is powered on the side and has a high logical level on its outputs. The fact is that any microcircuit has two diodes at its inputs, connected between GND and VCC. Through these diodes, the voltage from the input of the microcircuit can penetrate the power output of the microcircuit and further spread throughout the board, as shown in the figure.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3z/ba/lw/3zbalwuipis4pduwvdwjx93ples.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, it is unlikely to fully power the entire board in this way. </font><font style="vertical-align: inherit;">However, some intermediate voltage level may form on the VCC circuit: less than the supply voltage of the microcircuit, but nevertheless sufficient to make the microcircuit in an ‚Äúincomprehensible‚Äù state. </font><font style="vertical-align: inherit;">Fortunately, most microcircuits are still not very sensitive to such voltage surges, however, this problem should not be forgotten, and if necessary, special isolation buffers should be put in critical circuits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, now we have the last paragraph of this article.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10. Read the documentation for the components used.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Carefully. </font><font style="vertical-align: inherit;">Is always. </font><font style="vertical-align: inherit;">It really contains answers to most of the questions, including the ones that we examined in this article. </font><font style="vertical-align: inherit;">Yes, sometimes this documentation contains tens, hundreds or even thousands of pages, but the time spent studying them at the design stage of the device will more than pay off in the process of starting the product and debugging. </font><font style="vertical-align: inherit;">Also study the circuit boards for the debug boards provided by the manufacturer, as well as look at examples of printed circuit board topology: usually no one will tell you better than the manufacturer how to tie the microcircuit correctly and lay the printed circuit board under it. </font><font style="vertical-align: inherit;">Do not forget about Errata, sometimes surprises lurk there. </font><font style="vertical-align: inherit;">Always try to understand what each leg does in the chip you use: a seemingly unremarkable conclusion that is not connected as it should, can ruin all the work.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, we examined ten basic rules for designing electrical circuits. </font><font style="vertical-align: inherit;">I hope this helps novice developers to avoid at least the simplest mistakes in designing circuits. </font><font style="vertical-align: inherit;">Well and most importantly - develop devices and don't be afraid of experiments, because practice, in the end, is still the best teacher.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en505286/index.html">20% of the population with PTSD (post-traumatic stress disorder) after self-isolation and quarantine?</a></li>
<li><a href="../en505292/index.html">DATA VAULT Data Showcases</a></li>
<li><a href="../en505296/index.html">Koyaaniskatsi processor unit: Difficult to pronounce, easier to program</a></li>
<li><a href="../en505298/index.html">Flight of Crew Dragon in photos and video</a></li>
<li><a href="../en505300/index.html">Oil industry for engineers, programmers, mathematicians and the masses of workers, part 1</a></li>
<li><a href="../en505306/index.html">From games to e-commerce projects. Changing the two-year program of Technopark</a></li>
<li><a href="../en505310/index.html">What distinguishes technologically advanced companies and how techlide can help your team grow</a></li>
<li><a href="../en505314/index.html">Linux time synchronization: NTP, Chrony, and systemd-timesyncd</a></li>
<li><a href="../en505322/index.html">Dispatcher of the future: how will his role in the service company change?</a></li>
<li><a href="../en505330/index.html">How to not create a cryptocurrency from scratch in 3 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>