<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèø üíÉüèæ üçÇ MultiSim redundancy - what it is and how it works üë®üèº‚Äçüöí üë§ üë®üèª‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 
 My name is Anton Datsenko and I am responsible for the development of corporate solutions and services in the Beeline Business division. To...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MultiSim redundancy - what it is and how it works</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/beeline/blog/498450/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My name is Anton Datsenko and I am responsible for the development of corporate solutions and services in the Beeline Business division. Today I will tell you how we use backup technologies and balancer in MultiSIM, for which clients such a product is more important than it seems at first glance, and a little about the network in general. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will make a reservation right away that in the post we will talk specifically about B2B clients. Because for an ordinary subscriber, communication reservation is a smartphone with two SIM cards.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> <img src="https://habrastorage.org/webt/dd/p_/aa/ddp_aa9qzozrh0hn8aeqj3lto-e.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But seriously, the approaches here are a bit similar. The importance of backup communication channel is worth talking about in the same plane as the important backup of data. You don‚Äôt have a backup - this is basically bad (but temporary). Do you have a backup - this is already much better. And if you not only make backups, but also check, just in case, how well everything is restored from them, it‚Äôs already very good. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A stable network for most enterprises, including even small and medium-sized businesses, is the key to normal work without jokes. Because a lot is tied to the network - the efficiency of online stores, and working with databases in offline stores, and the work of online cash desks and pinpads. In general, if there is no network, you will not be able to pay for the goods normally, you will not be able to get a check at the online cashier, and so on and so forth.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is a balancer and why is it needed</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The balancer (aka traffic aggregator) is an analogue of a router, in which it costs from 2 to 4 SIM cards (depends on the model that the customer needs). </font><font style="vertical-align: inherit;">With the help of partners, we install equipment at corporate clients and configure the connection. </font><font style="vertical-align: inherit;">This can be either a direct connection through a balancer over LTE networks, or through a redundant device. </font><font style="vertical-align: inherit;">There is still an option with a VPN tunnel, but I will talk about it separately in the next post. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/tm/os/edtmosr5wc4hugx4yohplon0uvg.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are two SIM cards</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So here. Each balancer adds up the channel bandwidths that are supplied from the SIM cards and works with the aggregation server. The server is in our network, at the junction of our network and the partner network, and we get a working channel. Visually, this is a router, most often Mikrotik (yes, yes), on which there is custom firmware, we took OpenWrt as a basis and rewrote it quite seriously. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f6/u1/nn/f6u1nn73fx9ckeswmmr6zpgd5ik.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And here already 4</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The need for such devices more than 10 years ago was thought by the US media companies. Television there is developed more seriously than ours, with special attention being paid to live broadcasts and live broadcasts from the scene. The quality of the picture and sound is important, this is also a component of the competitive advantage, therefore there are a number of companies that have special technology patents in terms of how to properly split a high-quality video frame into fragments, shove it all into the cellular network, on the side of the studio from these fragments again to collect a great picture, and not a pack of jackals, and show the viewer. And all this, which is important, with a minimum time delay. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So they use special devices, which immediately have on board a set of all kinds of SIM cards, allowing you to drive a high-quality video stream from the place of events to the studios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our television market itself is built a little differently, so this solution did not take root, because it turned out to be both expensive and not the most popular. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But for business, balancers for 2-4 SIM cards turned out just in time.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Who is useful</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, if your company has excellent network administrators, and everything is fine with the provider. But there are times when redundancy saves the usual working order. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Most of the customers who actively use our product are companies that have difficulties with a wired communication channel. There are many reasons for this - it may be a monopolist provider in a business center, this may be the location of the store not in the building in which there is a wired channel, but in a small extension to it, in which this channel is no longer there. Say a small indoor market within walking distance of residential buildings. And to draw a line from the main fiber optic link to such an extension is either difficult or disadvantageous.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are also clients with mobile offices or seasonal businesses, including event organizers. Our balancer (read - a router with SIM cards and special software) is a small box that you can quickly take with you, connect on the spot, and everything will work. Suppose there is an insurance company that needs to deploy its offices in new places a lot and often. While such a new customer service office is fully connected with all the documents to the network, a week can pass. If you use the MultiSIM balancer, it will be enough to drop it into the office with the first delivery of furniture and paper for printers, after which it will simply be turned on and immediately get a working network with secure access to corporate resources.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As soon as the office is connected to a full-fledged wired network, the balancer can simply be removed and postponed until the next such case, or left as a spare in case of an accident on the network. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banks The vast majority of ATMs are connected to the network precisely via mobile communication; inside such an ATM there is a whistle with a SIM card, which provides communication. This is usually enough with a margin, because the exchange of processing data in terms of traffic is actually a penny, and no one will download torrents from ATMs. If only for the sake of interest. In addition, connecting an ATM via a mobile network makes it a little more mobile: within the framework of a shopping center, let's say, it can be moved quickly enough from place to place, focusing only on the presence of an outlet nearby, and not on an Internet cable.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there are pluses, there will be minuses. The main thing is that there is only one SIM card in the whistle. Therefore, if this operator specifically has problems, the ATM temporarily fails and cannot contact the bank. Banks do not like this, firstly, because of the loss of money (every hour of downtime of an ATM is an unreasonable loss of funds), and secondly, such downtimes do not very well affect customer loyalty. You came to the ATM to the ATM urgently to withdraw money, but he is stupid.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We now understand that with a high probability this may be a problem with the network, but for the final person who expects crisp cash in a minute, the bank itself will always be the source of the problem. If the ATM of a particular bank does not work = stupid bank, that‚Äôs all with them. In which case, the balancer will switch the network to the second SIM card. The situation when two different operators simultaneously lay down simultaneously in a city is much less common than temporary breakdowns in one. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus, do not forget about the creation of situational centers and operational headquarters of emergency services and government agencies. It is critical for them to deploy a secure network in order to be able to fully work with all their internal databases from anywhere, whether in a field or a swamp. Now the process of deploying such a network looks like this:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emergency services arrive at the site and unload;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">install USB whistles with SIM operators;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">look for a fixed point of presence of operators (for this they have contacts of all operators in this case);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">upload a channel (or just to the Internet, or immediately to your network);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impose their special equipment on top of it all;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deploy the network.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It seems that there are not many points. </font><font style="vertical-align: inherit;">But the process can take a couple of days. </font><font style="vertical-align: inherit;">With the balancer, everything fits in 5 minutes. </font><font style="vertical-align: inherit;">I got it, turned it on, and that‚Äôs it. </font><font style="vertical-align: inherit;">We don‚Äôt need to think about the balance (for our part, we ourselves keep our finger on the pulse, regardless of which SIM cards the client uses), plus the device can not be kept in greenhouse conditions, but generally put a mobile car on the roof where it catches better - IP67 protection allows you to do this.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reservation Features</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The devices that provide redundancy, in general, work on a similar principle as the balancer, but with a couple of features. Firstly, there are always only two SIM cards. Secondly, they work in turn, that is, only one is always active, there is no gluing of channels here.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installation from the client‚Äôs side looks just as simple - a router is put in which a special Python script is uploaded and it works in LTE modem mode, switching from the first SIM card to the second one if necessary (the script does this automatically depending on the triggering of certain triggers ) An additional plus here is not only working as an LTE modem purely, but also working on a cable. That is, if you have access via a cable network, you can plug a cable into the router and work on it. If something goes wrong with the cable connection, the LTE channel will turn on. It turns out such a reservation of the cable signal if desired. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we did everything ourselves, without involving partners or third-party contractors.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A key characteristic of redundancy is VPN only. Yes, we are building the entire network through a VPN tunnel. All SIM cards installed in such devices are in a single VPN network, so if you remove it from the device for testing and insert it into your usual smartphone, it will not work. The backup device through the VPN network lays a tunnel to our gateway, where clients exit. In principle, there is no difference for the final client, except for the size of the final unfragmented packet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, we keep the same IP and the corresponding settings for a particular client. It works by cable, switches to SIM cards, I decided to move the device somewhere - IP will be the same. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are two more useful features for corporate clients.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, wifi. The device works as a limited network router, a kind of point between the operator and the client, while it can also work as a familiar client router according to a predetermined set of rules. Nothing prevents us from throwing Wi-Fi on top of it so that the corporate client can distribute fast Wi-Fi to its employees. I note that in this scenario we are talking about a corporate work network, and not public Wi-Fi with SMS authorization, like in a cafe and more.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secondly, there is a built-in SIP gateway. </font><font style="vertical-align: inherit;">The router has a small PBX that can work with our cloud-based PBX and give the client the opportunity to connect analog phones directly to the router. </font><font style="vertical-align: inherit;">At the end of this year, we plan to deploy a full-fledged service, multisim redundancy + Wi-Fi + cloud PBX, while all this is in test. </font><font style="vertical-align: inherit;">There is an idea to provide such a service in the format of two entities - either immediately from our PBX, or from a PBX that the client already has. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suppose a client has its own IP VPN network without Internet access and its own PBX on Asterisk, he gives us his settings, and we configure everything so that the client receives a router with two subscriber lines, Wi-Fi and IP VPN access.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to connect</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here on these pages. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reservation of Internet connection</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Association of mobile networks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the meantime, we are conducting active load testing. </font><font style="vertical-align: inherit;">I will also unsubscribe about the results separately. </font><font style="vertical-align: inherit;">If you have any questions about the operation of our MultiSIM - ask in the comments, I will answer.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en498438/index.html">8 easy questions for internship mentors</a></li>
<li><a href="../en498440/index.html">Threat Spotlight: Neshta File Virus</a></li>
<li><a href="../en498442/index.html">Comprehensive Static Analysis Using Polyspace Products</a></li>
<li><a href="../en498444/index.html">Monitoring in the data center: how we changed the old BMS to a new one. Part 2</a></li>
<li><a href="../en498446/index.html">Job Questions: Imaginary Stability, False Devotion and Positioning</a></li>
<li><a href="../en498452/index.html">Django: A Quick Guide to Internationalization</a></li>
<li><a href="../en498454/index.html">Tales of the developers of your favorite games about what they are proud of</a></li>
<li><a href="../en498456/index.html">CSS Scroll Snapping Practice</a></li>
<li><a href="../en498458/index.html">Video calls with virtual background and open source tools</a></li>
<li><a href="../en498462/index.html">Infinite scroll with banners, or How to do with three views</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>