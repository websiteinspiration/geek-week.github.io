<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛹🏼 🐄 🏆 Développer les colonnes imbriquées - listes utilisant le langage R (paquet tidyr et fonctions familiales unnest) 🐀 🕺 👩🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la plupart des cas, lorsque vous travaillez avec la réponse reçue de l'API ou avec toute autre donnée ayant une arborescence complexe, vous renco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Développer les colonnes imbriquées - listes utilisant le langage R (paquet tidyr et fonctions familiales unnest)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491726/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la plupart des cas, lorsque vous travaillez avec la réponse reçue de l'API ou avec toute autre donnée ayant une arborescence complexe, vous rencontrez des formats JSON et XML.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ces formats présentent de nombreux avantages: ils stockent les données de manière assez compacte et évitent la duplication inutile d'informations. </font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'inconvénient de ces formats est la complexité de leur traitement et de leur analyse. </font><font style="vertical-align: inherit;">Les données non structurées ne peuvent pas être utilisées dans les calculs et la visualisation ne peut pas être construite sur leur base.</font></font></p><br>
<p><img src="https://habrastorage.org/webt/7s/yf/gr/7syfgrnpyegv-ihhcguupzuwm9c.jpeg"><br>
</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cet article est une suite logique de la publication </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"R package tidyr et ses nouvelles fonctions pivot_longer et pivot_wider"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il vous aidera à apporter des constructions de données non structurées à une forme tabulaire familière et adaptée à l'analyse en utilisant le package </font></font><code>tidyr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inclus dans le noyau de la bibliothèque </font></font><code>tidyverse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et ses fonctions familiales </font></font><code>unnest_*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p><a name="habracut"></a><br>
<h1 id="soderzhanie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenu</font></font></h1><br>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous êtes intéressé par l'analyse des données, vous pouvez être intéressé par mon </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">télégramme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font><font style="vertical-align: inherit;">mes </font><font style="vertical-align: inherit;">chaînes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">youtube</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La plupart du contenu est dédié à R.</font></font></em></p><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisateurs GitHub</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dépôts Github</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personnages de Game Of Thrones</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   Google</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></li>
</ol><br>
<h1 id="vvedenie"></h1><br>
<p><strong>Rectangling</strong> <em>(. ,       ,     .)</em> —            ,       .  <code>tidyr</code>   ,      -     ,  :</p><br>
<ul>
<li><code>unnest_longer()</code>    -    .</li>
<li><code>unnest_wider()</code>    -    .</li>
<li><code>unnest_auto()</code>       <br>
<code>unnest_longer()</code>  <code>unnest_wider()</code>.</li>
<li><code>hoist()</code>   <code>unnest_wider()</code>            .</li>
</ul><br>
<p>                ,     dplyr.</p><br>
<p>   ,     <code>repurrrsive</code>,    ,  ,   -API.</p><br>
<pre><code class="plaintext hljs">library(tidyr)<font></font>
library(dplyr)<font></font>
library(repurrrsive)</code></pre><br>
<h1 id="polzovateli-github"> GitHub</h1><br>
<p>  <em>gh_users</em>, ,       GitHub.     <em>gh_users</em>  <em>tibble</em> .:</p><br>
<pre><code class="plaintext hljs">users &lt;-   tibble( user = gh_users ) </code></pre><br>
<p>   :    <em>gh_users</em>,     ?       :    ,       .</p><br>
<p>   <code>users</code>    ,      .</p><br>
<pre><code class="plaintext hljs">names(users$user[[1]])<font></font>
#&gt;  [1] "login"               "id"                  "avatar_url"         <font></font>
#&gt;  [4] "gravatar_id"         "url"                 "html_url"           <font></font>
#&gt;  [7] "followers_url"       "following_url"       "gists_url"          <font></font>
#&gt; [10] "starred_url"         "subscriptions_url"   "organizations_url"  <font></font>
#&gt; [13] "repos_url"           "events_url"          "received_events_url"<font></font>
#&gt; [16] "type"                "site_admin"          "name"               <font></font>
#&gt; [19] "company"             "blog"                "location"           <font></font>
#&gt; [22] "email"               "hireable"            "bio"                <font></font>
#&gt; [25] "public_repos"        "public_gists"        "followers"          <font></font>
#&gt; [28] "following"           "created_at"          "updated_at"</code></pre><br>
<p>       . <code>unnest_wider()</code>       :</p><br>
<pre><code class="plaintext hljs">users %&gt;% unnest_wider(user)<font></font>
#&gt; # A tibble: 6 x 30<font></font>
#&gt;   login     id avatar_url gravatar_id url   html_url followers_url<font></font>
#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;        <font></font>
#&gt; 1 gabo… 6.60e5 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; 2 jenn… 5.99e5 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; 3 jtle… 1.57e6 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; 4 juli… 1.25e7 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; 5 leep… 3.51e6 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; 6 masa… 8.36e6 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; # … with 23 more variables: following_url &lt;chr&gt;, gists_url &lt;chr&gt;,<font></font>
#&gt; #   starred_url &lt;chr&gt;, subscriptions_url &lt;chr&gt;, organizations_url &lt;chr&gt;,<font></font>
#&gt; #   repos_url &lt;chr&gt;, events_url &lt;chr&gt;, received_events_url &lt;chr&gt;,<font></font>
#&gt; #   type &lt;chr&gt;, site_admin &lt;lgl&gt;, name &lt;chr&gt;, company &lt;chr&gt;, blog &lt;chr&gt;,<font></font>
#&gt; #   location &lt;chr&gt;, email &lt;chr&gt;, public_repos &lt;int&gt;, public_gists &lt;int&gt;,<font></font>
#&gt; #   followers &lt;int&gt;, following &lt;int&gt;, created_at &lt;chr&gt;, updated_at &lt;chr&gt;,<font></font>
#&gt; #   bio &lt;chr&gt;, hireable &lt;lgl&gt;</code></pre><br>
<p>        30 ,       ,     <code>unnest_wider()</code>  <code>hoist()</code>. <code>hoist()</code>     ,    ,   <code>purrr::pluck()</code>:</p><br>
<pre><code class="plaintext hljs">users %&gt;% hoist(user, <font></font>
  followers = "followers", <font></font>
  login = "login", <font></font>
  url = "html_url"<font></font>
)<font></font>
#&gt; # A tibble: 6 x 4<font></font>
#&gt;   followers login       url                            user             <font></font>
#&gt;       &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                          &lt;list&gt;           <font></font>
#&gt; 1       303 gaborcsardi https://github.com/gaborcsardi &lt;named list [27]&gt;<font></font>
#&gt; 2       780 jennybc     https://github.com/jennybc     &lt;named list [27]&gt;<font></font>
#&gt; 3      3958 jtleek      https://github.com/jtleek      &lt;named list [27]&gt;<font></font>
#&gt; 4       115 juliasilge  https://github.com/juliasilge  &lt;named list [27]&gt;<font></font>
#&gt; 5       213 leeper      https://github.com/leeper      &lt;named list [27]&gt;<font></font>
#&gt; 6        34 masalmon    https://github.com/masalmon    &lt;named list [27]&gt;</code></pre><br>
<p><code>hoist()</code>      - <em>user</em>,     <code>hoist()</code>            .</p><br>
<h1 id="repozitorii-github"> Github</h1><br>
<p>  <code>gh_repos</code>   ,    <code>tibble</code>:</p><br>
<pre><code class="plaintext hljs">repos &lt;- tibble(repo = gh_repos)<font></font>
repos<font></font>
#&gt; # A tibble: 6 x 1<font></font>
#&gt;   repo       <font></font>
#&gt;   &lt;list&gt;     <font></font>
#&gt; 1 &lt;list [30]&gt;<font></font>
#&gt; 2 &lt;list [30]&gt;<font></font>
#&gt; 3 &lt;list [30]&gt;<font></font>
#&gt; 4 &lt;list [26]&gt;<font></font>
#&gt; 5 &lt;list [30]&gt;<font></font>
#&gt; 6 &lt;list [30]&gt;</code></pre><br>
<p>    <em>user</em>    ,   .     ,      <em>(. tidy data)</em>     ,       <code>unnest_longer()</code>   <code>unnest_wider()</code>:</p><br>
<pre><code class="plaintext hljs">repos &lt;- repos %&gt;% unnest_longer(repo)<font></font>
repos<font></font>
#&gt; # A tibble: 176 x 1<font></font>
#&gt;    repo             <font></font>
#&gt;    &lt;list&gt;           <font></font>
#&gt;  1 &lt;named list [68]&gt;<font></font>
#&gt;  2 &lt;named list [68]&gt;<font></font>
#&gt;  3 &lt;named list [68]&gt;<font></font>
#&gt;  4 &lt;named list [68]&gt;<font></font>
#&gt;  5 &lt;named list [68]&gt;<font></font>
#&gt;  6 &lt;named list [68]&gt;<font></font>
#&gt;  7 &lt;named list [68]&gt;<font></font>
#&gt;  8 &lt;named list [68]&gt;<font></font>
#&gt;  9 &lt;named list [68]&gt;<font></font>
#&gt; 10 &lt;named list [68]&gt;<font></font>
#&gt; # … with 166 more rows</code></pre><br>
<p>    <code>unnest_wider()</code>  <code>hoist()</code> :</p><br>
<pre><code class="plaintext hljs">repos %&gt;% hoist(repo, <font></font>
  login = c("owner", "login"), <font></font>
  name = "name",<font></font>
  homepage = "homepage",<font></font>
  watchers = "watchers_count"<font></font>
)<font></font>
#&gt; # A tibble: 176 x 5<font></font>
#&gt;    login       name        homepage watchers repo             <font></font>
#&gt;    &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;       &lt;int&gt; &lt;list&gt;           <font></font>
#&gt;  1 gaborcsardi after       &lt;NA&gt;            5 &lt;named list [65]&gt;<font></font>
#&gt;  2 gaborcsardi argufy      &lt;NA&gt;           19 &lt;named list [65]&gt;<font></font>
#&gt;  3 gaborcsardi ask         &lt;NA&gt;            5 &lt;named list [65]&gt;<font></font>
#&gt;  4 gaborcsardi baseimports &lt;NA&gt;            0 &lt;named list [65]&gt;<font></font>
#&gt;  5 gaborcsardi citest      &lt;NA&gt;            0 &lt;named list [65]&gt;<font></font>
#&gt;  6 gaborcsardi clisymbols  ""             18 &lt;named list [65]&gt;<font></font>
#&gt;  7 gaborcsardi cmaker      &lt;NA&gt;            0 &lt;named list [65]&gt;<font></font>
#&gt;  8 gaborcsardi cmark       &lt;NA&gt;            0 &lt;named list [65]&gt;<font></font>
#&gt;  9 gaborcsardi conditions  &lt;NA&gt;            0 &lt;named list [65]&gt;<font></font>
#&gt; 10 gaborcsardi crayon      &lt;NA&gt;           52 &lt;named list [65]&gt;<font></font>
#&gt; # … with 166 more rows</code></pre><br>
<p>    <code>c("owner", "login")</code>:           <code>owner</code>.     ,     <code>owner</code>      <code>unnest_wider()</code>      :</p><br>
<pre><code class="plaintext hljs">repos %&gt;% <font></font>
  hoist(repo, owner = "owner") %&gt;% <font></font>
  unnest_wider(owner)<font></font>
#&gt; # A tibble: 176 x 18<font></font>
#&gt;    login     id avatar_url gravatar_id url   html_url followers_url<font></font>
#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;        <font></font>
#&gt;  1 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  2 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  3 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  4 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  5 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  6 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  7 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  8 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt;  9 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; 10 gabo… 660288 https://a… ""          http… https:/… https://api.…<font></font>
#&gt; # … with 166 more rows, and 11 more variables: following_url &lt;chr&gt;,<font></font>
#&gt; #   gists_url &lt;chr&gt;, starred_url &lt;chr&gt;, subscriptions_url &lt;chr&gt;,<font></font>
#&gt; #   organizations_url &lt;chr&gt;, repos_url &lt;chr&gt;, events_url &lt;chr&gt;,<font></font>
#&gt; #   received_events_url &lt;chr&gt;, type &lt;chr&gt;, site_admin &lt;lgl&gt;, repo &lt;list&gt;</code></pre><br>
<p> ,        <code>unnest_longer()</code>  <code>unnest_wider()</code>    <code>unnest_auto()</code>.              ,      . </p><br>
<pre><code class="plaintext hljs">tibble(repo = gh_repos) %&gt;% <font></font>
  unnest_auto(repo) %&gt;% <font></font>
  unnest_auto(repo)<font></font>
#&gt; Using `unnest_longer(repo)`; no element has names<font></font>
#&gt; Using `unnest_wider(repo)`; elements have 68 names in common<font></font>
#&gt; # A tibble: 176 x 67<font></font>
#&gt;        id name  full_name owner private html_url description fork  url  <font></font>
#&gt;     &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     &lt;lis&gt; &lt;lgl&gt;   &lt;chr&gt;    &lt;chr&gt;       &lt;lgl&gt; &lt;chr&gt;<font></font>
#&gt;  1 6.12e7 after gaborcsa… &lt;nam… FALSE   https:/… Run Code i… FALSE http…<font></font>
#&gt;  2 4.05e7 argu… gaborcsa… &lt;nam… FALSE   https:/… Declarativ… FALSE http…<font></font>
#&gt;  3 3.64e7 ask   gaborcsa… &lt;nam… FALSE   https:/… Friendly C… FALSE http…<font></font>
#&gt;  4 3.49e7 base… gaborcsa… &lt;nam… FALSE   https:/… Do we get … FALSE http…<font></font>
#&gt;  5 6.16e7 cite… gaborcsa… &lt;nam… FALSE   https:/… Test R pac… TRUE  http…<font></font>
#&gt;  6 3.39e7 clis… gaborcsa… &lt;nam… FALSE   https:/… Unicode sy… FALSE http…<font></font>
#&gt;  7 3.72e7 cmak… gaborcsa… &lt;nam… FALSE   https:/… port of cm… TRUE  http…<font></font>
#&gt;  8 6.80e7 cmark gaborcsa… &lt;nam… FALSE   https:/… CommonMark… TRUE  http…<font></font>
#&gt;  9 6.32e7 cond… gaborcsa… &lt;nam… FALSE   https:/… &lt;NA&gt;        TRUE  http…<font></font>
#&gt; 10 2.43e7 cray… gaborcsa… &lt;nam… FALSE   https:/… R package … FALSE http…<font></font>
#&gt; # … with 166 more rows, and 58 more variables: forks_url &lt;chr&gt;,<font></font>
#&gt; #   keys_url &lt;chr&gt;, collaborators_url &lt;chr&gt;, teams_url &lt;chr&gt;,<font></font>
#&gt; #   hooks_url &lt;chr&gt;, issue_events_url &lt;chr&gt;, events_url &lt;chr&gt;,<font></font>
#&gt; #   assignees_url &lt;chr&gt;, branches_url &lt;chr&gt;, tags_url &lt;chr&gt;,<font></font>
#&gt; #   blobs_url &lt;chr&gt;, git_tags_url &lt;chr&gt;, git_refs_url &lt;chr&gt;,<font></font>
#&gt; #   trees_url &lt;chr&gt;, statuses_url &lt;chr&gt;, languages_url &lt;chr&gt;,<font></font>
#&gt; #   stargazers_url &lt;chr&gt;, contributors_url &lt;chr&gt;, subscribers_url &lt;chr&gt;,<font></font>
#&gt; #   subscription_url &lt;chr&gt;, commits_url &lt;chr&gt;, git_commits_url &lt;chr&gt;,<font></font>
#&gt; #   comments_url &lt;chr&gt;, issue_comment_url &lt;chr&gt;, contents_url &lt;chr&gt;,<font></font>
#&gt; #   compare_url &lt;chr&gt;, merges_url &lt;chr&gt;, archive_url &lt;chr&gt;,<font></font>
#&gt; #   downloads_url &lt;chr&gt;, issues_url &lt;chr&gt;, pulls_url &lt;chr&gt;,<font></font>
#&gt; #   milestones_url &lt;chr&gt;, notifications_url &lt;chr&gt;, labels_url &lt;chr&gt;,<font></font>
#&gt; #   releases_url &lt;chr&gt;, deployments_url &lt;chr&gt;, created_at &lt;chr&gt;,<font></font>
#&gt; #   updated_at &lt;chr&gt;, pushed_at &lt;chr&gt;, git_url &lt;chr&gt;, ssh_url &lt;chr&gt;,<font></font>
#&gt; #   clone_url &lt;chr&gt;, svn_url &lt;chr&gt;, size &lt;int&gt;, stargazers_count &lt;int&gt;,<font></font>
#&gt; #   watchers_count &lt;int&gt;, language &lt;chr&gt;, has_issues &lt;lgl&gt;,<font></font>
#&gt; #   has_downloads &lt;lgl&gt;, has_wiki &lt;lgl&gt;, has_pages &lt;lgl&gt;,<font></font>
#&gt; #   forks_count &lt;int&gt;, open_issues_count &lt;int&gt;, forks &lt;int&gt;,<font></font>
#&gt; #   open_issues &lt;int&gt;, watchers &lt;int&gt;, default_branch &lt;chr&gt;,<font></font>
#&gt; #   homepage &lt;chr&gt;</code></pre><br>
<h1 id="personazhi-igry-prestolov">  </h1><br>
<p><code>got_chars</code>     <code>gh_users</code>:    ,           .  <code>got_chars</code>         ,        ,        :</p><br>
<pre><code class="plaintext hljs">chars &lt;- tibble(char = got_chars)<font></font>
chars<font></font>
#&gt; # A tibble: 30 x 1<font></font>
#&gt;    char             <font></font>
#&gt;    &lt;list&gt;           <font></font>
#&gt;  1 &lt;named list [18]&gt;<font></font>
#&gt;  2 &lt;named list [18]&gt;<font></font>
#&gt;  3 &lt;named list [18]&gt;<font></font>
#&gt;  4 &lt;named list [18]&gt;<font></font>
#&gt;  5 &lt;named list [18]&gt;<font></font>
#&gt;  6 &lt;named list [18]&gt;<font></font>
#&gt;  7 &lt;named list [18]&gt;<font></font>
#&gt;  8 &lt;named list [18]&gt;<font></font>
#&gt;  9 &lt;named list [18]&gt;<font></font>
#&gt; 10 &lt;named list [18]&gt;<font></font>
#&gt; # … with 20 more rows<font></font>
<font></font>
chars2 &lt;- chars %&gt;% unnest_wider(char)<font></font>
chars2<font></font>
#&gt; # A tibble: 30 x 18<font></font>
#&gt;    url      id name  gender culture born  died  alive titles aliases father<font></font>
#&gt;    &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;list&gt; &lt;list&gt;  &lt;chr&gt; <font></font>
#&gt;  1 http…  1022 Theo… Male   Ironbo… In 2… ""    TRUE  &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  2 http…  1052 Tyri… Male   ""      In 2… ""    TRUE  &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  3 http…  1074 Vict… Male   Ironbo… In 2… ""    TRUE  &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  4 http…  1109 Will  Male   ""      ""    In 2… FALSE &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  5 http…  1166 Areo… Male   Norvos… In 2… ""    TRUE  &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  6 http…  1267 Chett Male   ""      At H… In 2… FALSE &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  7 http…  1295 Cres… Male   ""      In 2… In 2… FALSE &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  8 http…   130 Aria… Female Dornish In 2… ""    TRUE  &lt;chr … &lt;chr [… ""    <font></font>
#&gt;  9 http…  1303 Daen… Female Valyri… In 2… ""    TRUE  &lt;chr … &lt;chr [… ""    <font></font>
#&gt; 10 http…  1319 Davo… Male   Wester… In 2… ""    TRUE  &lt;chr … &lt;chr [… ""    <font></font>
#&gt; # … with 20 more rows, and 7 more variables: mother &lt;chr&gt;, spouse &lt;chr&gt;,<font></font>
#&gt; #   allegiances &lt;list&gt;, books &lt;list&gt;, povBooks &lt;list&gt;, tvSeries &lt;list&gt;,<font></font>
#&gt; #   playedBy &lt;list&gt;</code></pre><br>
<p> <code>got_chars</code>  ,  <code>gh_users</code>, ..    <code>char</code>     ,      — :</p><br>
<pre><code class="plaintext hljs">chars2 %&gt;% select_if(is.list)<font></font>
#&gt; # A tibble: 30 x 7<font></font>
#&gt;    titles    aliases    allegiances books     povBooks  tvSeries  playedBy <font></font>
#&gt;    &lt;list&gt;    &lt;list&gt;     &lt;list&gt;      &lt;list&gt;    &lt;list&gt;    &lt;list&gt;    &lt;list&gt;   <font></font>
#&gt;  1 &lt;chr [3]&gt; &lt;chr [4]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr [2]&gt; &lt;chr [6]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  2 &lt;chr [2]&gt; &lt;chr [11]&gt; &lt;chr [1]&gt;   &lt;chr [2]&gt; &lt;chr [4]&gt; &lt;chr [6]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  3 &lt;chr [2]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr [2]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  4 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;???&gt;       &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  5 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [3]&gt; &lt;chr [2]&gt; &lt;chr [2]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  6 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;???&gt;       &lt;chr [2]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  7 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;???&gt;       &lt;chr [2]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  8 &lt;chr [1]&gt; &lt;chr [1]&gt;  &lt;chr [1]&gt;   &lt;chr [4]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt; &lt;chr [1]&gt;<font></font>
#&gt;  9 &lt;chr [5]&gt; &lt;chr [11]&gt; &lt;chr [1]&gt;   &lt;chr [1]&gt; &lt;chr [4]&gt; &lt;chr [6]&gt; &lt;chr [1]&gt;<font></font>
#&gt; 10 &lt;chr [4]&gt; &lt;chr [5]&gt;  &lt;chr [2]&gt;   &lt;chr [1]&gt; &lt;chr [3]&gt; &lt;chr [5]&gt; &lt;chr [1]&gt;<font></font>
#&gt; # … with 20 more rows</code></pre><br>
<p>      . ,           ,    :</p><br>
<pre><code class="plaintext hljs">chars2 %&gt;% <font></font>
  select(name, books, tvSeries) %&gt;% <font></font>
  pivot_longer(c(books, tvSeries), names_to = "media", values_to = "value") %&gt;% <font></font>
  unnest_longer(value)<font></font>
#&gt; # A tibble: 180 x 3<font></font>
#&gt;    name             media    value            <font></font>
#&gt;    &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;            <font></font>
#&gt;  1 Theon Greyjoy    books    A Game of Thrones<font></font>
#&gt;  2 Theon Greyjoy    books    A Storm of Swords<font></font>
#&gt;  3 Theon Greyjoy    books    A Feast for Crows<font></font>
#&gt;  4 Theon Greyjoy    tvSeries Season 1         <font></font>
#&gt;  5 Theon Greyjoy    tvSeries Season 2         <font></font>
#&gt;  6 Theon Greyjoy    tvSeries Season 3         <font></font>
#&gt;  7 Theon Greyjoy    tvSeries Season 4         <font></font>
#&gt;  8 Theon Greyjoy    tvSeries Season 5         <font></font>
#&gt;  9 Theon Greyjoy    tvSeries Season 6         <font></font>
#&gt; 10 Tyrion Lannister books    A Feast for Crows<font></font>
#&gt; # … with 170 more rows</code></pre><br>
<p>,  ,    ,       :</p><br>
<pre><code class="plaintext hljs">chars2 %&gt;% <font></font>
  select(name, title = titles) %&gt;% <font></font>
  unnest_longer(title)<font></font>
#&gt; # A tibble: 60 x 2<font></font>
#&gt;    name              title                                               <font></font>
#&gt;    &lt;chr&gt;             &lt;chr&gt;                                               <font></font>
#&gt;  1 Theon Greyjoy     Prince of Winterfell                                <font></font>
#&gt;  2 Theon Greyjoy     Captain of Sea Bitch                                <font></font>
#&gt;  3 Theon Greyjoy     Lord of the Iron Islands (by law of the green lands)<font></font>
#&gt;  4 Tyrion Lannister  Acting Hand of the King (former)                    <font></font>
#&gt;  5 Tyrion Lannister  Master of Coin (former)                             <font></font>
#&gt;  6 Victarion Greyjoy Lord Captain of the Iron Fleet                      <font></font>
#&gt;  7 Victarion Greyjoy Master of the Iron Victory                          <font></font>
#&gt;  8 Will              ""                                                  <font></font>
#&gt;  9 Areo Hotah        Captain of the Guard at Sunspear                    <font></font>
#&gt; 10 Chett             ""                                                  <font></font>
#&gt; # … with 50 more rows</code></pre><br>
<p>( ,    <code>""</code>   <code>title</code>,          <code>got_chars</code>:               <code>title</code>     0,     1,   .)</p><br>
<p>        <code>unnest_auto()</code>.      ,      <code>unnest_auto()</code>     .   ,       <code>unnest_auto()</code>      ,     -    <code>unnest_longer()</code>,             <code>unnest_wider()</code>,            .</p><br>
<pre><code class="plaintext hljs">tibble(char = got_chars) %&gt;% <font></font>
  unnest_auto(char) %&gt;% <font></font>
  select(name, title = titles) %&gt;% <font></font>
  unnest_auto(title)<font></font>
#&gt; Using `unnest_wider(char)`; elements have 18 names in common<font></font>
#&gt; Using `unnest_longer(title)`; no element has names<font></font>
#&gt; # A tibble: 60 x 2<font></font>
#&gt;    name              title                                               <font></font>
#&gt;    &lt;chr&gt;             &lt;chr&gt;                                               <font></font>
#&gt;  1 Theon Greyjoy     Prince of Winterfell                                <font></font>
#&gt;  2 Theon Greyjoy     Captain of Sea Bitch                                <font></font>
#&gt;  3 Theon Greyjoy     Lord of the Iron Islands (by law of the green lands)<font></font>
#&gt;  4 Tyrion Lannister  Acting Hand of the King (former)                    <font></font>
#&gt;  5 Tyrion Lannister  Master of Coin (former)                             <font></font>
#&gt;  6 Victarion Greyjoy Lord Captain of the Iron Fleet                      <font></font>
#&gt;  7 Victarion Greyjoy Master of the Iron Victory                          <font></font>
#&gt;  8 Will              ""                                                  <font></font>
#&gt;  9 Areo Hotah        Captain of the Guard at Sunspear                    <font></font>
#&gt; 10 Chett             ""                                                  <font></font>
#&gt; # … with 50 more rows</code></pre><br>
<h1 id="geokodirovanie-s-pomoschyu-google">   Google</h1><br>
<p>      ,     Google.        API Google maps,        API.      API Google    ;             API Google Maps,         .</p><br>
<pre><code class="plaintext hljs">has_key &lt;- !identical(Sys.getenv("GOOGLE_MAPS_API_KEY"), "")<font></font>
if (!has_key) {<font></font>
  message("No Google Maps API key found; code chunks will not be run")<font></font>
}<font></font>
<font></font>
# https://developers.google.com/maps/documentation/geocoding<font></font>
geocode &lt;- function(address, api_key = Sys.getenv("GOOGLE_MAPS_API_KEY")) {<font></font>
  url &lt;- "https://maps.googleapis.com/maps/api/geocode/json"<font></font>
  url &lt;- paste0(url, "?address=", URLencode(address), "&amp;key=", api_key)<font></font>
<font></font>
  jsonlite::read_json(url)<font></font>
}</code></pre><br>
<p>,    ,  :</p><br>
<pre><code class="plaintext hljs">houston &lt;- geocode("Houston TX")<font></font>
str(houston)<font></font>
#&gt; List of 2<font></font>
#&gt;  $ results:List of 1<font></font>
#&gt;   ..$ :List of 5<font></font>
#&gt;   .. ..$ address_components:List of 4<font></font>
#&gt;   .. .. ..$ :List of 3<font></font>
#&gt;   .. .. .. ..$ long_name : chr "Houston"<font></font>
#&gt;   .. .. .. ..$ short_name: chr "Houston"<font></font>
#&gt;   .. .. .. ..$ types     :List of 2<font></font>
#&gt;   .. .. .. .. ..$ : chr "locality"<font></font>
#&gt;   .. .. .. .. ..$ : chr "political"<font></font>
#&gt;   .. .. ..$ :List of 3<font></font>
#&gt;   .. .. .. ..$ long_name : chr "Harris County"<font></font>
#&gt;   .. .. .. ..$ short_name: chr "Harris County"<font></font>
#&gt;   .. .. .. ..$ types     :List of 2<font></font>
#&gt;   .. .. .. .. ..$ : chr "administrative_area_level_2"<font></font>
#&gt;   .. .. .. .. ..$ : chr "political"<font></font>
#&gt;   .. .. ..$ :List of 3<font></font>
#&gt;   .. .. .. ..$ long_name : chr "Texas"<font></font>
#&gt;   .. .. .. ..$ short_name: chr "TX"<font></font>
#&gt;   .. .. .. ..$ types     :List of 2<font></font>
#&gt;   .. .. .. .. ..$ : chr "administrative_area_level_1"<font></font>
#&gt;   .. .. .. .. ..$ : chr "political"<font></font>
#&gt;   .. .. ..$ :List of 3<font></font>
#&gt;   .. .. .. ..$ long_name : chr "United States"<font></font>
#&gt;   .. .. .. ..$ short_name: chr "US"<font></font>
#&gt;   .. .. .. ..$ types     :List of 2<font></font>
#&gt;   .. .. .. .. ..$ : chr "country"<font></font>
#&gt;   .. .. .. .. ..$ : chr "political"<font></font>
#&gt;   .. ..$ formatted_address : chr "Houston, TX, USA"<font></font>
#&gt;   .. ..$ geometry          :List of 4<font></font>
#&gt;   .. .. ..$ bounds       :List of 2<font></font>
#&gt;   .. .. .. ..$ northeast:List of 2<font></font>
#&gt;   .. .. .. .. ..$ lat: num 30.1<font></font>
#&gt;   .. .. .. .. ..$ lng: num -95<font></font>
#&gt;   .. .. .. ..$ southwest:List of 2<font></font>
#&gt;   .. .. .. .. ..$ lat: num 29.5<font></font>
#&gt;   .. .. .. .. ..$ lng: num -95.8<font></font>
#&gt;   .. .. ..$ location     :List of 2<font></font>
#&gt;   .. .. .. ..$ lat: num 29.8<font></font>
#&gt;   .. .. .. ..$ lng: num -95.4<font></font>
#&gt;   .. .. ..$ location_type: chr "APPROXIMATE"<font></font>
#&gt;   .. .. ..$ viewport     :List of 2<font></font>
#&gt;   .. .. .. ..$ northeast:List of 2<font></font>
#&gt;   .. .. .. .. ..$ lat: num 30.1<font></font>
#&gt;   .. .. .. .. ..$ lng: num -95<font></font>
#&gt;   .. .. .. ..$ southwest:List of 2<font></font>
#&gt;   .. .. .. .. ..$ lat: num 29.5<font></font>
#&gt;   .. .. .. .. ..$ lng: num -95.8<font></font>
#&gt;   .. ..$ place_id          : chr "ChIJAYWNSLS4QIYROwVl894CDco"<font></font>
#&gt;   .. ..$ types             :List of 2<font></font>
#&gt;   .. .. ..$ : chr "locality"<font></font>
#&gt;   .. .. ..$ : chr "political"<font></font>
#&gt;  $ status : chr "OK"</code></pre><br>
<p> ,               <code>tidyr</code>.       ,      :</p><br>
<pre><code class="plaintext hljs">  city &lt;-   c ( "Houston" , "LA" , "New York" , "Chicago" , "Springfield" )  city_geo &lt;-   purrr::map (city, geocode) </code></pre><br>
<p>     <code>tibble</code>,        . </p><br>
<pre><code class="plaintext hljs">loc &lt;- tibble(city = city, json = city_geo)<font></font>
loc<font></font>
#&gt; # A tibble: 5 x 2<font></font>
#&gt;   city        json            <font></font>
#&gt;   &lt;chr&gt;       &lt;list&gt;          <font></font>
#&gt; 1 Houston     &lt;named list [2]&gt;<font></font>
#&gt; 2 LA          &lt;named list [2]&gt;<font></font>
#&gt; 3 New York    &lt;named list [2]&gt;<font></font>
#&gt; 4 Chicago     &lt;named list [2]&gt;<font></font>
#&gt; 5 Springfield &lt;named list [2]&gt;</code></pre><br>
<p>    <code>status</code>  <code>result</code>,       <code>unnest_wider()</code> :</p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  unnest_wider(json)<font></font>
#&gt; # A tibble: 5 x 3<font></font>
#&gt;   city        results    status<font></font>
#&gt;   &lt;chr&gt;       &lt;list&gt;     &lt;chr&gt; <font></font>
#&gt; 1 Houston     &lt;list [1]&gt; OK    <font></font>
#&gt; 2 LA          &lt;list [1]&gt; OK    <font></font>
#&gt; 3 New York    &lt;list [1]&gt; OK    <font></font>
#&gt; 4 Chicago     &lt;list [1]&gt; OK    <font></font>
#&gt; 5 Springfield &lt;list [1]&gt; OK</code></pre><br>
<p> ,  <code>results</code>   .     1  (  ,  API ),     .          <code>unnest_longer()</code> :</p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  unnest_wider(json) %&gt;% <font></font>
  unnest_longer(results)<font></font>
#&gt; # A tibble: 5 x 3<font></font>
#&gt;   city        results          status<font></font>
#&gt;   &lt;chr&gt;       &lt;list&gt;           &lt;chr&gt; <font></font>
#&gt; 1 Houston     &lt;named list [5]&gt; OK    <font></font>
#&gt; 2 LA          &lt;named list [5]&gt; OK    <font></font>
#&gt; 3 New York    &lt;named list [5]&gt; OK    <font></font>
#&gt; 4 Chicago     &lt;named list [5]&gt; OK    <font></font>
#&gt; 5 Springfield &lt;named list [5]&gt; OK</code></pre><br>
<p>     ,       <code>unnest_wider()</code>:</p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  unnest_wider(json) %&gt;% <font></font>
  unnest_longer(results) %&gt;% <font></font>
  unnest_wider(results)<font></font>
#&gt; # A tibble: 5 x 7<font></font>
#&gt;   city   address_componen… formatted_addre… geometry place_id  types status<font></font>
#&gt;   &lt;chr&gt;  &lt;list&gt;            &lt;chr&gt;            &lt;list&gt;   &lt;chr&gt;     &lt;lis&gt; &lt;chr&gt; <font></font>
#&gt; 1 Houst… &lt;list [4]&gt;        Houston, TX, USA &lt;named … ChIJAYWN… &lt;lis… OK    <font></font>
#&gt; 2 LA     &lt;list [4]&gt;        Los Angeles, CA… &lt;named … ChIJE9on… &lt;lis… OK    <font></font>
#&gt; 3 New Y… &lt;list [3]&gt;        New York, NY, U… &lt;named … ChIJOwg_… &lt;lis… OK    <font></font>
#&gt; 4 Chica… &lt;list [4]&gt;        Chicago, IL, USA &lt;named … ChIJ7cv0… &lt;lis… OK    <font></font>
#&gt; 5 Sprin… &lt;list [5]&gt;        Springfield, MO… &lt;named … ChIJP5jI… &lt;lis… OK</code></pre><br>
<p>           <code>geometry</code>:</p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  unnest_wider(json) %&gt;% <font></font>
  unnest_longer(results) %&gt;% <font></font>
  unnest_wider(results) %&gt;% <font></font>
  unnest_wider(geometry)<font></font>
#&gt; # A tibble: 5 x 10<font></font>
#&gt;   city  address_compone… formatted_addre… bounds location location_type<font></font>
#&gt;   &lt;chr&gt; &lt;list&gt;           &lt;chr&gt;            &lt;list&gt; &lt;list&gt;   &lt;chr&gt;        <font></font>
#&gt; 1 Hous… &lt;list [4]&gt;       Houston, TX, USA &lt;name… &lt;named … APPROXIMATE  <font></font>
#&gt; 2 LA    &lt;list [4]&gt;       Los Angeles, CA… &lt;name… &lt;named … APPROXIMATE  <font></font>
#&gt; 3 New … &lt;list [3]&gt;       New York, NY, U… &lt;name… &lt;named … APPROXIMATE  <font></font>
#&gt; 4 Chic… &lt;list [4]&gt;       Chicago, IL, USA &lt;name… &lt;named … APPROXIMATE  <font></font>
#&gt; 5 Spri… &lt;list [5]&gt;       Springfield, MO… &lt;name… &lt;named … APPROXIMATE  <font></font>
#&gt; # … with 4 more variables: viewport &lt;list&gt;, place_id &lt;chr&gt;, types &lt;list&gt;,<font></font>
#&gt; #   status &lt;chr&gt;</code></pre><br>
<p>  ,     <code>location</code>:</p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  unnest_wider(json) %&gt;%<font></font>
  unnest_longer(results) %&gt;%<font></font>
  unnest_wider(results) %&gt;%<font></font>
  unnest_wider(geometry) %&gt;%<font></font>
  unnest_wider(location)<font></font>
#&gt; # A tibble: 5 x 11<font></font>
#&gt;   city  address_compone… formatted_addre… bounds   lat    lng location_type<font></font>
#&gt;   &lt;chr&gt; &lt;list&gt;           &lt;chr&gt;            &lt;list&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        <font></font>
#&gt; 1 Hous… &lt;list [4]&gt;       Houston, TX, USA &lt;name…  29.8  -95.4 APPROXIMATE  <font></font>
#&gt; 2 LA    &lt;list [4]&gt;       Los Angeles, CA… &lt;name…  34.1 -118.  APPROXIMATE  <font></font>
#&gt; 3 New … &lt;list [3]&gt;       New York, NY, U… &lt;name…  40.7  -74.0 APPROXIMATE  <font></font>
#&gt; 4 Chic… &lt;list [4]&gt;       Chicago, IL, USA &lt;name…  41.9  -87.6 APPROXIMATE  <font></font>
#&gt; 5 Spri… &lt;list [5]&gt;       Springfield, MO… &lt;name…  37.2  -93.3 APPROXIMATE  <font></font>
#&gt; # … with 4 more variables: viewport &lt;list&gt;, place_id &lt;chr&gt;, types &lt;list&gt;,<font></font>
#&gt; #   status &lt;chr&gt;</code></pre><br>
<p> , <code>unnest_auto()</code>      ,        :</p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  unnest_auto(json) %&gt;%<font></font>
  unnest_auto(results) %&gt;%<font></font>
  unnest_auto(results) %&gt;%<font></font>
  unnest_auto(geometry) %&gt;%<font></font>
  unnest_auto(location)<font></font>
#&gt; Using `unnest_wider(json)`; elements have 2 names in common<font></font>
#&gt; Using `unnest_longer(results)`; no element has names<font></font>
#&gt; Using `unnest_wider(results)`; elements have 5 names in common<font></font>
#&gt; Using `unnest_wider(geometry)`; elements have 4 names in common<font></font>
#&gt; Using `unnest_wider(location)`; elements have 2 names in common<font></font>
#&gt; # A tibble: 5 x 11<font></font>
#&gt;   city  address_compone… formatted_addre… bounds   lat    lng location_type<font></font>
#&gt;   &lt;chr&gt; &lt;list&gt;           &lt;chr&gt;            &lt;list&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        <font></font>
#&gt; 1 Hous… &lt;list [4]&gt;       Houston, TX, USA &lt;name…  29.8  -95.4 APPROXIMATE  <font></font>
#&gt; 2 LA    &lt;list [4]&gt;       Los Angeles, CA… &lt;name…  34.1 -118.  APPROXIMATE  <font></font>
#&gt; 3 New … &lt;list [3]&gt;       New York, NY, U… &lt;name…  40.7  -74.0 APPROXIMATE  <font></font>
#&gt; 4 Chic… &lt;list [4]&gt;       Chicago, IL, USA &lt;name…  41.9  -87.6 APPROXIMATE  <font></font>
#&gt; 5 Spri… &lt;list [5]&gt;       Springfield, MO… &lt;name…  37.2  -93.3 APPROXIMATE  <font></font>
#&gt; # … with 4 more variables: viewport &lt;list&gt;, place_id &lt;chr&gt;, types &lt;list&gt;,<font></font>
#&gt; #   status &lt;chr&gt;</code></pre><br>
<p>          :</p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  unnest_wider(json) %&gt;%<font></font>
  hoist(results, first_result = 1) %&gt;%<font></font>
  unnest_wider(first_result) %&gt;%<font></font>
  unnest_wider(geometry) %&gt;%<font></font>
  unnest_wider(location)<font></font>
#&gt; # A tibble: 5 x 11<font></font>
#&gt;   city  address_compone… formatted_addre… bounds   lat    lng location_type<font></font>
#&gt;   &lt;chr&gt; &lt;list&gt;           &lt;chr&gt;            &lt;list&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        <font></font>
#&gt; 1 Hous… &lt;list [4]&gt;       Houston, TX, USA &lt;name…  29.8  -95.4 APPROXIMATE  <font></font>
#&gt; 2 LA    &lt;list [4]&gt;       Los Angeles, CA… &lt;name…  34.1 -118.  APPROXIMATE  <font></font>
#&gt; 3 New … &lt;list [3]&gt;       New York, NY, U… &lt;name…  40.7  -74.0 APPROXIMATE  <font></font>
#&gt; 4 Chic… &lt;list [4]&gt;       Chicago, IL, USA &lt;name…  41.9  -87.6 APPROXIMATE  <font></font>
#&gt; 5 Spri… &lt;list [5]&gt;       Springfield, MO… &lt;name…  37.2  -93.3 APPROXIMATE  <font></font>
#&gt; # … with 4 more variables: viewport &lt;list&gt;, place_id &lt;chr&gt;, types &lt;list&gt;,<font></font>
#&gt; #   status &lt;chr&gt;</code></pre><br>
<p>  <code>hoist()</code>   ,     <code>lat</code>  <code>lng</code>. </p><br>
<pre><code class="plaintext hljs">loc %&gt;%<font></font>
  hoist(json,<font></font>
    lat = list("results", 1, "geometry", "location", "lat"),<font></font>
    lng = list("results", 1, "geometry", "location", "lng")<font></font>
  )<font></font>
#&gt; # A tibble: 5 x 4<font></font>
#&gt;   city          lat    lng json            <font></font>
#&gt;   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;list&gt;          <font></font>
#&gt; 1 Houston      29.8  -95.4 &lt;named list [2]&gt;<font></font>
#&gt; 2 LA           34.1 -118.  &lt;named list [2]&gt;<font></font>
#&gt; 3 New York     40.7  -74.0 &lt;named list [2]&gt;<font></font>
#&gt; 4 Chicago      41.9  -87.6 &lt;named list [2]&gt;<font></font>
#&gt; 5 Springfield  37.2  -93.3 &lt;named list [2]&gt;</code></pre><br>
<h1 id="diskografiya-sharly-gelfand">  </h1><br>
<p>       —   .      ,           ,    ,      .     <code>date_added</code>        R.</p><br>
<pre><code class="plaintext hljs">discs &lt;- tibble(disc = discog) %&gt;% <font></font>
  unnest_wider(disc) %&gt;% <font></font>
  mutate(date_added = as.POSIXct(strptime(date_added, "%Y-%m-%dT%H:%M:%S"))) <font></font>
discs<font></font>
#&gt; # A tibble: 155 x 5<font></font>
#&gt;    instance_id date_added          basic_information       id rating<font></font>
#&gt;          &lt;int&gt; &lt;dttm&gt;              &lt;list&gt;               &lt;int&gt;  &lt;int&gt;<font></font>
#&gt;  1   354823933 2019-02-16 17:48:59 &lt;named list [11]&gt;  7496378      0<font></font>
#&gt;  2   354092601 2019-02-13 14:13:11 &lt;named list [11]&gt;  4490852      0<font></font>
#&gt;  3   354091476 2019-02-13 14:07:23 &lt;named list [11]&gt;  9827276      0<font></font>
#&gt;  4   351244906 2019-02-02 11:39:58 &lt;named list [11]&gt;  9769203      0<font></font>
#&gt;  5   351244801 2019-02-02 11:39:37 &lt;named list [11]&gt;  7237138      0<font></font>
#&gt;  6   351052065 2019-02-01 20:40:53 &lt;named list [11]&gt; 13117042      0<font></font>
#&gt;  7   350315345 2019-01-29 15:48:37 &lt;named list [11]&gt;  7113575      0<font></font>
#&gt;  8   350315103 2019-01-29 15:47:22 &lt;named list [11]&gt; 10540713      0<font></font>
#&gt;  9   350314507 2019-01-29 15:44:08 &lt;named list [11]&gt; 11260950      0<font></font>
#&gt; 10   350314047 2019-01-29 15:41:35 &lt;named list [11]&gt; 11726853      0<font></font>
#&gt; # … with 145 more rows</code></pre><br>
<p>       ,        ,          .       <code>basic_information</code>:</p><br>
<pre><code class="plaintext hljs">discs %&gt;% unnest_wider(basic_information)<font></font>
#&gt; Column name `id` must not be duplicated.<font></font>
#&gt; Use .name_repair to specify repair.</code></pre><br>
<p>    , ..   <code>basic_information</code>    <code>basic_information</code>.    ,  ,         <code>names_repair = "unique"</code>:</p><br>
<pre><code class="plaintext hljs">discs %&gt;% unnest_wider(basic_information, names_repair = "unique")<font></font>
#&gt; New names:<font></font>
#&gt; * id -&gt; id...6<font></font>
#&gt; * id -&gt; id...14<font></font>
#&gt; # A tibble: 155 x 15<font></font>
#&gt;    instance_id date_added          labels  year artists id...6 thumb title<font></font>
#&gt;          &lt;int&gt; &lt;dttm&gt;              &lt;list&gt; &lt;int&gt; &lt;list&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;<font></font>
#&gt;  1   354823933 2019-02-16 17:48:59 &lt;list…  2015 &lt;list … 7.50e6 http… Demo <font></font>
#&gt;  2   354092601 2019-02-13 14:13:11 &lt;list…  2013 &lt;list … 4.49e6 http… Obse…<font></font>
#&gt;  3   354091476 2019-02-13 14:07:23 &lt;list…  2017 &lt;list … 9.83e6 http… I    <font></font>
#&gt;  4   351244906 2019-02-02 11:39:58 &lt;list…  2017 &lt;list … 9.77e6 http… Oído…<font></font>
#&gt;  5   351244801 2019-02-02 11:39:37 &lt;list…  2015 &lt;list … 7.24e6 http… A Ca…<font></font>
#&gt;  6   351052065 2019-02-01 20:40:53 &lt;list…  2019 &lt;list … 1.31e7 http… Tash…<font></font>
#&gt;  7   350315345 2019-01-29 15:48:37 &lt;list…  2014 &lt;list … 7.11e6 http… Demo <font></font>
#&gt;  8   350315103 2019-01-29 15:47:22 &lt;list…  2015 &lt;list … 1.05e7 http… Let …<font></font>
#&gt;  9   350314507 2019-01-29 15:44:08 &lt;list…  2017 &lt;list … 1.13e7 ""    Sub …<font></font>
#&gt; 10   350314047 2019-01-29 15:41:35 &lt;list…  2017 &lt;list … 1.17e7 http… Demo <font></font>
#&gt; # … with 145 more rows, and 7 more variables: formats &lt;list&gt;,<font></font>
#&gt; #   cover_image &lt;chr&gt;, resource_url &lt;chr&gt;, master_id &lt;int&gt;,<font></font>
#&gt; #   master_url &lt;chr&gt;, id...14 &lt;int&gt;, rating &lt;int&gt;</code></pre><br>
<p>  ,  <code>basic_information</code>   id      ,      :</p><br>
<pre><code class="plaintext hljs">discs %&gt;% <font></font>
  select(-id) %&gt;% <font></font>
  unnest_wider(basic_information)<font></font>
#&gt; # A tibble: 155 x 14<font></font>
#&gt;    instance_id date_added          labels  year artists     id thumb title<font></font>
#&gt;          &lt;int&gt; &lt;dttm&gt;              &lt;list&gt; &lt;int&gt; &lt;list&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;<font></font>
#&gt;  1   354823933 2019-02-16 17:48:59 &lt;list…  2015 &lt;list … 7.50e6 http… Demo <font></font>
#&gt;  2   354092601 2019-02-13 14:13:11 &lt;list…  2013 &lt;list … 4.49e6 http… Obse…<font></font>
#&gt;  3   354091476 2019-02-13 14:07:23 &lt;list…  2017 &lt;list … 9.83e6 http… I    <font></font>
#&gt;  4   351244906 2019-02-02 11:39:58 &lt;list…  2017 &lt;list … 9.77e6 http… Oído…<font></font>
#&gt;  5   351244801 2019-02-02 11:39:37 &lt;list…  2015 &lt;list … 7.24e6 http… A Ca…<font></font>
#&gt;  6   351052065 2019-02-01 20:40:53 &lt;list…  2019 &lt;list … 1.31e7 http… Tash…<font></font>
#&gt;  7   350315345 2019-01-29 15:48:37 &lt;list…  2014 &lt;list … 7.11e6 http… Demo <font></font>
#&gt;  8   350315103 2019-01-29 15:47:22 &lt;list…  2015 &lt;list … 1.05e7 http… Let …<font></font>
#&gt;  9   350314507 2019-01-29 15:44:08 &lt;list…  2017 &lt;list … 1.13e7 ""    Sub …<font></font>
#&gt; 10   350314047 2019-01-29 15:41:35 &lt;list…  2017 &lt;list … 1.17e7 http… Demo <font></font>
#&gt; # … with 145 more rows, and 6 more variables: formats &lt;list&gt;,<font></font>
#&gt; #   cover_image &lt;chr&gt;, resource_url &lt;chr&gt;, master_id &lt;int&gt;,<font></font>
#&gt; #   master_url &lt;chr&gt;, rating &lt;int&gt;</code></pre><br>
<p>  ,     <code>hoist()</code>:</p><br>
<pre><code class="plaintext hljs">discs %&gt;% <font></font>
  hoist(basic_information,<font></font>
    title = "title",<font></font>
    year = "year",<font></font>
    label = list("labels", 1, "name"),<font></font>
    artist = list("artists", 1, "name")<font></font>
  )<font></font>
#&gt; # A tibble: 155 x 9<font></font>
#&gt;    instance_id date_added          title  year label artist<font></font>
#&gt;          &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; <font></font>
#&gt;  1   354823933 2019-02-16 17:48:59 Demo   2015 Tobi… Mollot<font></font>
#&gt;  2   354092601 2019-02-13 14:13:11 Obse…  2013 La V… Una B…<font></font>
#&gt;  3   354091476 2019-02-13 14:07:23 I      2017 La V… S.H.I…<font></font>
#&gt;  4   351244906 2019-02-02 11:39:58 Oído…  2017 La V… Rata …<font></font>
#&gt;  5   351244801 2019-02-02 11:39:37 A Ca…  2015 Kato… Ivy (…<font></font>
#&gt;  6   351052065 2019-02-01 20:40:53 Tash…  2019 High… Tashme<font></font>
#&gt;  7   350315345 2019-01-29 15:48:37 Demo   2014 Mind… Desgr…<font></font>
#&gt;  8   350315103 2019-01-29 15:47:22 Let …  2015 Not … Phant…<font></font>
#&gt;  9   350314507 2019-01-29 15:44:08 Sub …  2017 Not … Sub S…<font></font>
#&gt; 10   350314047 2019-01-29 15:41:35 Demo   2017 Pres… Small…<font></font>
#&gt; # … with 145 more rows, and 3 more variables: basic_information &lt;list&gt;,<font></font>
#&gt; #   id &lt;int&gt;, rating &lt;int&gt;</code></pre><br>
<p>          ,    .</p><br>
<p>           :</p><br>
<pre><code class="plaintext hljs">discs %&gt;% <font></font>
  hoist(basic_information, artist = "artists") %&gt;% <font></font>
  select(disc_id = id, artist) %&gt;% <font></font>
  unnest_longer(artist) %&gt;% <font></font>
  unnest_wider(artist)<font></font>
#&gt; # A tibble: 167 x 8<font></font>
#&gt;     disc_id join  name        anv   tracks role  resource_url            id<font></font>
#&gt;       &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;                &lt;int&gt;<font></font>
#&gt;  1  7496378 ""    Mollot      ""    ""     ""    https://api.discog… 4.62e6<font></font>
#&gt;  2  4490852 ""    Una Bèstia… ""    ""     ""    https://api.discog… 3.19e6<font></font>
#&gt;  3  9827276 ""    S.H.I.T. (… ""    ""     ""    https://api.discog… 2.77e6<font></font>
#&gt;  4  9769203 ""    Rata Negra  ""    ""     ""    https://api.discog… 4.28e6<font></font>
#&gt;  5  7237138 ""    Ivy (18)    ""    ""     ""    https://api.discog… 3.60e6<font></font>
#&gt;  6 13117042 ""    Tashme      ""    ""     ""    https://api.discog… 5.21e6<font></font>
#&gt;  7  7113575 ""    Desgraciad… ""    ""     ""    https://api.discog… 4.45e6<font></font>
#&gt;  8 10540713 ""    Phantom He… ""    ""     ""    https://api.discog… 4.27e6<font></font>
#&gt;  9 11260950 ""    Sub Space … ""    ""     ""    https://api.discog… 5.69e6<font></font>
#&gt; 10 11726853 ""    Small Man … ""    ""     ""    https://api.discog… 6.37e6<font></font>
#&gt; # … with 157 more rows<font></font>
<font></font>
discs %&gt;% <font></font>
  hoist(basic_information, format = "formats") %&gt;% <font></font>
  select(disc_id = id, format) %&gt;% <font></font>
  unnest_longer(format) %&gt;% <font></font>
  unnest_wider(format) %&gt;% <font></font>
  unnest_longer(descriptions)<font></font>
#&gt; # A tibble: 280 x 5<font></font>
#&gt;     disc_id descriptions text  name     qty  <font></font>
#&gt;       &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;<font></font>
#&gt;  1  7496378 Numbered     Black Cassette 1    <font></font>
#&gt;  2  4490852 LP           &lt;NA&gt;  Vinyl    1    <font></font>
#&gt;  3  9827276 "7\""        &lt;NA&gt;  Vinyl    1    <font></font>
#&gt;  4  9827276 45 RPM       &lt;NA&gt;  Vinyl    1    <font></font>
#&gt;  5  9827276 EP           &lt;NA&gt;  Vinyl    1    <font></font>
#&gt;  6  9769203 LP           &lt;NA&gt;  Vinyl    1    <font></font>
#&gt;  7  9769203 Album        &lt;NA&gt;  Vinyl    1    <font></font>
#&gt;  8  7237138 "7\""        &lt;NA&gt;  Vinyl    1    <font></font>
#&gt;  9  7237138 45 RPM       &lt;NA&gt;  Vinyl    1    <font></font>
#&gt; 10 13117042 "7\""        &lt;NA&gt;  Vinyl    1    <font></font>
#&gt; # … with 270 more rows</code></pre><br>
<p>            .</p><br>
<h1 id="zaklyuchenie"></h1><br>
<p>   <code>tidyverse</code>         . </p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet article, nous avons analysé une famille de fonctions </font></font><code>unnest_*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visant à extraire des éléments de listes imbriquées. </font><font style="vertical-align: inherit;">Ce package contient de nombreuses autres fonctionnalités utiles qui simplifient la conversion des données selon le concept de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidy Data</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr491714/index.html">Comment j'ai créé puis ruiné mon entreprise</a></li>
<li><a href="../fr491718/index.html">Contenu de niche: comment 10% des articles génèrent 61% des conversions de blog</a></li>
<li><a href="../fr491720/index.html">Prévisions pour 2020 dans le domaine de l'IA, du machine learning et de l'automatisation robotique</a></li>
<li><a href="../fr491722/index.html">Historique de compatibilité descendante PS1 sur Sony Playstation 2</a></li>
<li><a href="../fr491724/index.html">Le livre "Laravel. Guide complet. 2e édition</a></li>
<li><a href="../fr491728/index.html">Principe SEC avec Laravel</a></li>
<li><a href="../fr491732/index.html">Y a-t-il une vie après Scratch, ou comment initier un enfant à Python</a></li>
<li><a href="../fr491736/index.html">TMS1000: le premier microcontrôleur disponible dans le commerce</a></li>
<li><a href="../fr491740/index.html">L'Internet des objets dans Yandex.Cloud: comment les services Yandex IoT Core et Yandex Cloud Functions sont organisés</a></li>
<li><a href="../fr491742/index.html">Sherbet: clavier de jeu ergonomique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>