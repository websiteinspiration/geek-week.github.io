<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§πüèΩ ‚ôèÔ∏è üë®üèø Gab es ein Leben vor einer Audio-CD? PCM-Software-Decoder üåü üë®üèø‚Äçüíª üßëüèæ‚Äçü§ù‚ÄçüßëüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im letzten Artikel haben wir √ºber dynamische QR-Codes gesprochen, die auf VHS-B√§ndern aufgezeichnet wurden. Die PCM-Epidemie hat mich auch erwischt, a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Gab es ein Leben vor einer Audio-CD? PCM-Software-Decoder</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497946/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">letzten Artikel haben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir √ºber dynamische QR-Codes gesprochen, die auf VHS-B√§ndern aufgezeichnet wurden. </font><font style="vertical-align: inherit;">Die PCM-Epidemie hat mich auch erwischt, also ist es Zeit, dieses Format aufzugreifen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5q/yw/xq/5qywxqy8gm11ivsraheotf1t5lq.png" alt="Mit einem PCM-Prozessor aufnehmen"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der ersten Phase werden wir versuchen, einen Software-Decoder zu implementieren. Dies ist nicht der letzte Artikel zu diesem Thema, da bei japanischen Auktionen die Prozessoren m√∂glicherweise enden und PCM in jedem Haus sein sollte! </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Finden eines Videoplayers ist kein Problem.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Zum Arbeiten ben√∂tigen Sie eine Datei mit der Aufzeichnung derselben QR-Codes. Sie k√∂nnen es mit der Videoaufnahmekarte erhalten. Nun, die Signalquelle nat√ºrlich. Sie k√∂nnen die Prozessorausgabe direkt erfassen oder auf einem Kassettenrekorder aufnehmen. Arbeiten Sie im Idealfall sofort mit dem Erfassungsger√§t zusammen, um das Signal in Echtzeit zu decodieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede Sprache reicht aus. Ich habe mit Python angefangen. Aber es stellte sich heraus, dass es auf meinem Laptop ziemlich langsam war, weshalb ich zu C ++ wechselte. √úbrigens entwickelt unsere kleine Community (fast) unabh√§ngig voneinander drei Decoderprojekte: auf OpenCV (C ++), auf Qt (C ++) und auf LabView. Der erste wird diskutiert. OpenCV wurde aufgrund der einfachen Arbeit mit Aufnahmeger√§ten und aufgezeichneten Videos ausgew√§hlt. Au√üerdem sind alle Manipulationen mit dem Bild dort stark optimiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste Problem, auf das Sie sto√üen, sind Datenverlust. In jedem Fall werden und k√∂nnen sie ohne ‚Äûspezielle‚Äú Ausr√ºstung in keiner Weise vermieden werden. PCM verwendet mehr Linien als in den sichtbaren Bereich des Rahmens passen. Im Fall der NTSC-Region betr√§gt diese Zahl 492 Zeilen pro Frame mit einem sichtbaren Bereich von 480. Im Fall von PAL ist alles viel trauriger.</font></font><br>
<blockquote>  1. PCM    NTSC    44,056 kHz,   PAL   44,1 kHz.</blockquote> <blockquote>  2.           VHS   .       (   ).      ,      . ,            .  ,        .  .</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr dieses Problem gibt es zwei L√∂sungen. Arbeiten Sie auf schwierige Weise mit der Capture-Karte, indem Sie den Treiber umgehen und Daten vom ADC abrufen. Anschlie√üend k√∂nnen sie in einen vollst√§ndigen PCM-Frame konvertiert oder auf fehlende Zeilen geh√§mmert werden. Die zweite Option klingt etwas wild, aber das Datenspeicherformat erm√∂glicht es Ihnen, einen Teil der Daten wiederherzustellen. Im Fall der NTSC-Region stellt sich heraus, dass sie die Einschr√§nkungen des Fehlerkorrektursystems erf√ºllt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aufgrund der Verwendung von Serviceleitungen k√∂nnen Sie keine Grafikkarte mit Composite-Ausgang nehmen und den PCM-Prozessor abspielen lassen. Iron ignoriert den gesamten Frame, wenn der Titel in einer bestimmten Zeile nicht gefunden wird. Es gibt ein paar Gedanken zu diesem Thema, aber dar√ºber irgendwie sp√§ter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst wird das Videosignal verschachtelt. Jeder Frame enth√§lt sozusagen zwei, bestehend aus ungeraden und geraden Linien. Sie werden Felder genannt. Mit den Feldern arbeitet der PCM-Prozessor. Daher m√ºssen wir auch den urspr√ºnglichen Stream teilen. Kurz zuvor w√§re es sch√∂n, ein Schwarzwei√übild (Graustufenbild) in ein Bin√§rbild umzuwandeln, damit es einfacher zu arbeiten w√§re. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An dieser Stelle sto√üen wir auf drei Schwierigkeiten, die mit den Funktionen von Videoaufnahmeger√§ten verbunden sind. Sie k√∂nnen keinen statischen Schwellenwert zum Bin√§risieren eines Bildes verwenden. Aber OpenCV selbst l√∂st dieses Problem, mit dessen Hilfe wir mit einer magischen Linie ein recht anst√§ndiges Ergebnis erzielen.</font></font><br>
<br>
<pre><code class="cpp hljs">threshold(greyFrame, fullFrame, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, THRESH_BINARY + THRESH_OTSU);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das zweite Problem ist pl√∂tzlich die Farbe. PCM-Prozessoren verwenden nicht die Farbkomponente des Videosignals, aber Capture-Karten versuchen m√∂glicherweise, es aus dem Rauschen zu extrahieren. Dies macht sich insbesondere beim g√ºnstigsten EasyCAP bemerkbar. Dies kann das Ergebnis der Binarisierung etwas beeintr√§chtigen. Daher m√ºssen Sie das Bild zuerst in Graustufen konvertieren.</font></font><br>
<br>
<pre><code class="cpp hljs">cvtColor(srcFrame, greyFrame, CV_BGR2GRAY);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus gelingt es EasyCAP, die Felder stellenweise zu verwirren. Genauer gesagt wird die erste Zeile √ºbersprungen, wodurch nicht alle anderen Zeilen vorhanden sind. F√ºr die Aufnahme einer Matinee aus dem Kindergarten ist dies nicht sehr wichtig, aber hier wird es bereits zum Problem. Das Anordnen von Zeilen in der richtigen Reihenfolge ist einfach genug. Am Ende jedes Frames befindet sich ein Bereich ohne Daten. Wenn wir die Zeilen mit dem Nutzsignal bis zum Stopp verschieben, kehren die Felder garantiert an ihren Platz zur√ºck. W√§hrend des Studiums habe ich versucht, drei Aufnahmeger√§te aus verschiedenen Preisklassen zu verwenden, aber das n√ºtzlichste erwies sich am Ende als das billigste, da es eine Reihe von Problemen aufzeigte. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yy/rg/rg/yyrgrgxhp3qrb1lho4kpmor3hti.png" alt="EasyCAP-Aufnahme von der Videokassette"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen Farbflecken im Bild und eine h√∂here Helligkeit der Datenbits im Vergleich zur ersten Abbildung eines Artikels beobachten, der mit Magewell Pro Capture AIO aufgenommen wurde.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist Zeit, sich daran zu erinnern, worauf das Signal gespeichert ist. VHS-Tonbandger√§te unterscheiden sich nicht in der besonderen Qualit√§t, da dies ein Haushaltsformat ist. Frame- und Line-Sync-Impulse allein reichen f√ºr einen stabilen Betrieb nicht aus. Daher werden dem Videosignal zus√§tzliche Synchronisationsmarkierungen hinzugef√ºgt. In jeder Zeile am Anfang gibt es eine Abfolge von zwei wei√üen und zwei schwarzen ‚ÄûPixeln‚Äú, und am Ende der Zeile befindet sich ein kleiner Bereich mit maximaler Helligkeit, der die AGC anpasst. Die Datenbits selbst haben eine Helligkeit von 60% des Maximums f√ºr 1 und weniger als 20% f√ºr 0. Hier ein Beispiel, warum diese Beschriftungen erforderlich sind: Inversion des Bildes von den Kassetten am Anfang und Ende des Rahmens. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/nb/fe/ennbfefb-kuattynm437n8a7lh8.png" alt="Drehungen am Anfang des Rahmens"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entsprechend den Synchronisationsmarkierungen gibt es in jeder Zeile einen Datenbereich. Als n√§chstes m√ºssen Sie die Bitbreite bestimmen (nur 128 Bit pro Zeile) und die Bildzeile auf 16 Byte verkleinern.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns das Datenformat genauer an. Die Zeile besteht aus 8 Bl√∂cken mit jeweils 14 Bits, die Werte f√ºr die Ausgabe an den DAC (Abtastwerte) und Fehlerkorrekturcodes enthalten, sowie einem Block mit einer Pr√ºfsumme (CRC-16 / CCITT-FALSE). Durch Pr√ºfsummen werden die verworfenen Zeilen ermittelt, die Daten, in denen das Ger√§t versucht, sie wiederherzustellen. Jede Zeile enth√§lt drei Abtastwerte f√ºr den linken und rechten Kanal, einen Parit√§tsblock P (xoder aller Abtastwerte) und ein mysteri√∂ses Q. Die Reihenfolge ist wie folgt: L0, R0, L1, R1, L2, R2, P, Q. Heute ist eine Q-Korrektur nicht m√∂glich Wir werden es tun, da dieses Material noch nicht vollst√§ndig verstanden ist und die Implementierung ein Debugging erfordert.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u_/eq/sz/u_eqsz0ffb6x1qckzle0q9c99aw.png" alt="Datenreihenfolge in Zeilen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie "wie besehen" verwenden, bedeutet eine gestrichelte Linie den Verlust von drei Proben gleichzeitig, was f√ºr das Ohr an einem Metallring erkennbar ist. Aber dida war schlauer und beschloss, Daten mit Leitern aufzuzeichnen. Aus einer Zeile wird nur ein Block entnommen. Der n√§chste wird mit einem leichten Versatz aufgenommen. Die Treppe dauert 16 Zeilen. Block L0 wird aus 1 Zeile entnommen. Block R0 mit Zeile 17 ... Mit dem Parit√§tsblock k√∂nnen Sie also Daten aus 16 Zeilen wiederherstellen, die in einer Zeile verloren gegangen sind. Aber nur, wenn es einen Fehler in der Leiter gibt. Mit Block Q k√∂nnen Sie zwei Fehler beheben, wodurch bis zu 32 verlorene Zeilen wiederhergestellt werden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fs/4g/ok/fs4goklri5veci8g_38cx2sawce.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie ein einfaches Beispiel. Es gibt ein Fragment eines PCM-Rahmens, in dem mehrere Zeilen unterbrochen sind (rot hervorgehoben). Die ersten 4 Leitern werden normal bearbeitet. Der f√ºnfte erfasst die gestrichelte Linie. Der Q-Block geht zuerst verloren, aber da er zur Korrektur von Fehlern dient und die Samples selbst nicht besch√§digt sind, k√∂nnen Sie weiter gehen. Mit der sechsten Leiter machen wir dasselbe. Andererseits gibt es unbesch√§digte Leitern bis 21. Block P leidet darunter. Er dient auch zur Wiederherstellung von Daten. Du kannst √ºberspringen. Also gehen wir zu 37 Stufen, wo die Probe des rechten Kanals besch√§digt wird. Um es wiederherzustellen, m√ºssen Sie XOR f√ºr den Parit√§tsblock und alle anderen Beispiele ausf√ºhren:</font></font><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>2</mn><mo>&amp;#x2295;</mo><mi>P</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="36.061ex" height="2.134ex" viewBox="0 -755.5 15526.3 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-32" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-3D" x="1537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMATHI-4C" x="2594" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-30" x="3275" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-2295" x="3998" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMATHI-52" x="4999" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-30" x="5758" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-2295" x="6481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMATHI-4C" x="7481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-31" x="8163" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-2295" x="8886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMATHI-52" x="9886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-31" x="10646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-2295" x="11369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMATHI-4C" x="12369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-32" x="13051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMAIN-2295" x="13774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhiS-wHZ0owDFMaZMZJmw3eNio5RXQ#MJMATHI-50" x="14774" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>‚äï</mo><mi>R</mi><mn>0</mn><mo>‚äï</mo><mi>L</mi><mn>1</mn><mo>‚äï</mo><mi>R</mi><mn>1</mn><mo>‚äï</mo><mi>L</mi><mn>2</mn><mo>‚äï</mo><mi>P</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">R2=L0\oplus R0\oplus L1\oplus R1\oplus L2\oplus P</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis erhalten wir den Anfangswert. </font><font style="vertical-align: inherit;">Wenn zwei Fehler vorliegen, wird versucht, sie mithilfe des Q-Blocks wiederherzustellen. Wenn mehr davon vorhanden sind, ist nichts anderes zu tun, als die Werte der geschlagenen Proben zu interpolieren oder zur√ºckzusetzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Prozess des Durchlaufens des Feldes kann auf einer kleinen GIF-Animation beobachtet werden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/a1/9o/hga19ot290hpakcghkmrw2ycyz8.gif" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und so gehen wir, bis die letzte Stufe der Leiter am Ende des Feldes anliegt. </font><font style="vertical-align: inherit;">Hardware-PCM verf√ºgt √ºber einen Ringpuffer. </font><font style="vertical-align: inherit;">Sobald die Zeile verarbeitet wurde, kann sie mit neuen Daten gef√ºllt werden. </font><font style="vertical-align: inherit;">Somit springt der letzte Schritt nach oben, ohne die Wiedergabe zu unterbrechen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe ein etwas anderes Arbeitsprinzip gew√§hlt. Jetzt gibt es keine solche Speicherbeschr√§nkung mehr, sodass der Puffer eine etwas gr√∂√üere Gr√∂√üe hat: Feldh√∂he plus Schritth√∂he. Sobald die Leiter das Ende des Puffers erreicht, werden die letzten 111 Zeilen an den Anfang √ºbertragen, und das F√ºllen mit neuen Daten erfolgt bereits aus 112 Zeilen. Nat√ºrlich d√ºrfen wir nicht vergessen, dass wir bei der Arbeit mit der Capture-Karte einige Zeilen verlieren. F√ºllen Sie daher die fehlenden Zeilen unbedingt mit Nullen aus, um sie f√ºr die weitere Wiederherstellung durch CRC-Fehler zu markieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PCM war urspr√ºnglich 14-Bit. Im Laufe der Zeit, als VHS-Videorecorder die Bildqualit√§t verbesserten, stellten die Hersteller auf 16 Bit um, ohne die Abw√§rtskompatibilit√§t zu vergessen.</font></font><br>
<blockquote>  3.   14- PCM   12  .             (    ).</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im 16-Bit-PCM gibt es √ºberhaupt keinen Q-Block, daher gibt es eine spezielle Markierung in der Feld√ºberschrift ‚ÄûQ-Korrektur ist nicht m√∂glich‚Äú. Stattdessen wurden 2 fehlende Bits von Proben und P gesammelt. In diesem Fall betr√§gt die H√∂he der Leiter nicht 8 Schritte, sondern nur 7, da die fehlenden Bits des Blocks in einer eigenen Zeile und nicht separat gespeichert werden. Am Beispiel der Erfassung eines M√§anders mit einer Frequenz von 100 Hz und maximaler Amplitude ist es recht einfach zu verstehen, wie ein 16-Bit-PCM funktioniert. Alles passt sofort zusammen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ck/xr/ex/ckxrexdsdif_1dqeueylnokj-kw.png" alt="Vergleich von 14-Bit- und 16-Bit-PCM"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt ist es Zeit, das Ergebnis in einer WAV-Datei zu speichern. Die libsndfile-Bibliothek hilft dabei. PCM speichert zwar keine Dateien, spielt sie aber sofort ab. Hier k√∂nnen Sie sich an so eine coole Sache erinnern, wie Pfeife. Wenn die Ausgabe eines Programms in ein anderes eingegeben wird. Wir geben einfach stdout als Ziel an und leiten den Stream zum ffplay-Programm um.</font></font><br>
<br>
<pre><code class="bash hljs">./ggg -i easycap.avi -o - | ffplay -</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt k√∂nnen Sie die Tropfen genie√üen und den Code weiter debuggen, um sie loszuwerden ...</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Das ist alles f√ºr heute. </font><font style="vertical-align: inherit;">Sie k√∂nnen die Decoderquelle von der Seite auf GitHub herunterladen: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/walhi/pcm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es gibt auch einen Generator. </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eines Tages werde ich es als Plugin f√ºr foobar entwerfen ... Es wird</font></font></s><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
aktiv daran gearbeitet, die Wiederherstellung des Q-Blocks abzuschlie√üen. F√ºr mehr oder weniger korrekte Arbeit m√ºssen Sie also √ºber die Commits springen. </font><font style="vertical-align: inherit;">Aber das sind Kleinigkeiten. </font><font style="vertical-align: inherit;">Wer spielen m√∂chte, kann </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Capture- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Beispiel herunterladen</font></a><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497932/index.html">Wir untersuchen die Mediastreamer2 VoIP-Engine. Teil 10</a></li>
<li><a href="../de497934/index.html">COVID-19: Was sie zu behandeln versuchen, was behandelt werden kann und einige Verschw√∂rungstheorien</a></li>
<li><a href="../de497938/index.html">Das Erwachen eines schlafenden Instituts: Wie wir Python Walker aus REAPER entfernen</a></li>
<li><a href="../de497940/index.html">Entwicklerherz: Sega Saturn Devkits</a></li>
<li><a href="../de497944/index.html">Verwenden von NAT Traversal zum passiven Verbinden von Benutzern</a></li>
<li><a href="../de497950/index.html">21 Lektionen in 21 Jahren Programmierung</a></li>
<li><a href="../de497952/index.html">Englische Abk√ºrzungen und IT-Titel, die wir falsch aussprechen</a></li>
<li><a href="../de497956/index.html">Sars wunderbar? Genealogie von Wuhan Coronavirus</a></li>
<li><a href="../de497958/index.html">Sie geh√∂ren zu uns: Erkundung von Schwachstellen und b√∂sartigem Code in Zoom f√ºr Windows</a></li>
<li><a href="../de497960/index.html">Linux-Netzwerkinstallation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>