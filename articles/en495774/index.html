<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍪 🍴 🚠 How to choose equipment for a game Persian in Python 🤰 🚋 🖕🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We learn to find the best for our robber with the help of programming. We also figure out if the program is driving us “by the nose”.
 
 
 
 Purpose: ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to choose equipment for a game Persian in Python</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495774/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We learn to find the best for our robber with the help of programming. </font><font style="vertical-align: inherit;">We also figure out if the program is driving us “by the nose”.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w7/x1/va/w7x1vaurpxvsovlu61g5smq7mzc.png" alt="image"><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Purpose: to</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> learn to stage-by-stage simulate the necessary part of the game mechanics in a “test tube”, obtain the necessary data and draw conclusions from them. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What you need:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Python 3, the environment for working with code (I have PyCharm). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In games, many people want to squeeze the most out of their characters, and for this you need to choose the most optimal combination of equipment, which is often a lot. </font><font style="vertical-align: inherit;">Let's try to write our own algorithm for testing various combinations of equipment and collecting data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, I was inspired by the game “World of Warcraft: Classic” (I took the icons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from there</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), but in the process I made some simplifications. </font><font style="vertical-align: inherit;">Link to the entire project at the end of the article.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STEP 1 - evaluate the search area</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suppose we have a character in the Rogue class. </font><font style="vertical-align: inherit;">It is necessary to pick up equipment for him in which he will inflict maximum damage to the enemy. </font><font style="vertical-align: inherit;">We are interested in things for the slots “weapons in the right hand” (4 pcs.), “Weapons in the left hand” (4 pcs.), “Gloves” (2 pcs.), “Head” (3 pcs.), “Chest” (3 pcs.), “Legs” (3 pcs.), “Feet” (2 pcs.). </font><font style="vertical-align: inherit;">We will put on their various combinations on the character and simulate the battle. </font><font style="vertical-align: inherit;">And if you apply the idea of ​​exhaustive search (with which we will begin), to evaluate all the combinations you will have to spend at least 4 * 4 * 2 * 3 * 3 * 3 * 2 = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1728</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fights. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a more accurate assessment of the best combinations, you will need to conduct additional battles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, already at this stage we can present the project scheme as follows:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/nj/qd/y5njqdx3sswkgaadzfqzxr2x8-4.png" alt="image"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STEP 2 - analyze game mechanics</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with the character. </font><font style="vertical-align: inherit;">He has such characteristics that affect the damage done and on each other:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attack power</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - it is converted directly to the damage caused by a normal blow (1 to 1). </font><font style="vertical-align: inherit;">Calculated by the formula: points of attack power + points of strength + points of dexterity</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strength</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - +1 to attack power and all (what to do, this is the game design)</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dexterity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - +1 to attack power, and also every 20 units of agility add 1% critical chance</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crete. </font><font style="vertical-align: inherit;">chance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the chance of causing double damage if the strike is not sliding and miss</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accuracy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - increased chance to hit an opponent</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mastery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - each unit of mastery reduces the probability of a sliding strike by 4% (which is initially equal to 40%, which means that 10 units of mastery completely exclude the possibility of sliding impact)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The diagram below shows the basic values ​​for our robber and how putting on an item of equipment changes them: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b_/uk/ln/b_uklnhezlo6c095bo9scextmzm.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, it's time to start writing code. </font><font style="vertical-align: inherit;">We describe what we already know in the Rogue class. </font><font style="vertical-align: inherit;">The </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_stats_without_equip</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">will restore the state of the character without equipment, which is useful when changing collections. </font><font style="vertical-align: inherit;">The methods </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculate_critical_percent</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculate_glancing_percent</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the future will be called only if necessary, updating the values ​​of specific characteristics.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first lines of class</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rogue</span>:</span>
    <span class="hljs-string">"""    ."""</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
<font></font>
        <span class="hljs-comment">#    ( -     ):</span>
        self.basic_stat_agility = <span class="hljs-number">50</span>
        self.basic_stat_power = <span class="hljs-number">40</span>
        self.basic_stat_hit = <span class="hljs-number">80</span>
        self.basic_stat_crit = <span class="hljs-number">20</span>
        self.basic_stat_mastery = <span class="hljs-number">0</span><font></font>
<font></font>
        <span class="hljs-comment">#     :</span><font></font>
        self.set_stats_without_equip()<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#       :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_stats_without_equip</span>(<span class="hljs-params">self</span>):</span><font></font>
        self.stat_agility = self.basic_stat_agility<font></font>
        self.stat_power = self.basic_stat_power<font></font>
        self.stat_attackpower = self.stat_agility + self.stat_power<font></font>
        self.stat_hit = self.basic_stat_hit<font></font>
        self.direct_crit_bonus = <span class="hljs-number">0</span><font></font>
        self.calculate_critical_percent()<font></font>
        self.stat_mastery = self.basic_stat_mastery<font></font>
        self.calculate_glancing_percent()<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#      :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calculate_critical_percent</span>(<span class="hljs-params">self</span>):</span>
        self.stat_crit = self.basic_stat_crit + self.direct_crit_bonus + self.stat_agility // <span class="hljs-number">20</span><font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#      :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calculate_glancing_percent</span>(<span class="hljs-params">self</span>):</span>
        self.stat_glancing_percent = <span class="hljs-number">40</span> - self.stat_mastery * <span class="hljs-number">4</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you need to deal with the equipment. </font><font style="vertical-align: inherit;">In order to conveniently sort through all things, creating their combinations, I decided to create a separate dictionary for each type of equipment: RIGHT_HANDS, LEFT_HANDS, GLOVES, HEADS, CHESTS, PANTS, BOOTS. </font><font style="vertical-align: inherit;">The following tuples are stored as values ​​in the dictionaries: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/1r/3z/wk1r3zdn1_ovtwrtlxzttyc1tb4.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Create a separate file for dictionaries with equipment. </font><font style="vertical-align: inherit;">I have several such files with different sets.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abstract test equipment</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#    ,     :</span>
<span class="hljs-comment"># 0 - , 1 - , 2 - , 3 - , 4 - , 5 - , 6 - </span><font></font>
<font></font>
EQUIPMENT_COLLECTION = <span class="hljs-string">'custom'</span><font></font>
<font></font>
RIGHT_HANDS = dict()<font></font>
RIGHT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">50</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">22</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">4</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>)<font></font>
<font></font>
LEFT_HANDS = dict()<font></font>
LEFT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">35</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">22</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">4</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>)<font></font>
<font></font>
GLOVES = dict()<font></font>
GLOVES[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
GLOVES[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
HEADS = dict()<font></font>
HEADS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">22</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
CHESTS = dict()<font></font>
CHESTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">30</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
PANTS = dict()<font></font>
PANTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
PANTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<font></font>
PANTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
BOOTS = dict()<font></font>
BOOTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">14</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
BOOTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">World of Warcraft outfit</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#    ,     :</span>
<span class="hljs-comment"># 0 - , 1 - , 2 - , 3 - , 4 - , 5 - , 6 - </span><font></font>
<font></font>
EQUIPMENT_COLLECTION = <span class="hljs-string">"wow_classic_preraid"</span><font></font>
<font></font>
RIGHT_HANDS = dict()<font></font>
RIGHT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  \''</span>, <span class="hljs-number">81</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">49</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">57</span>, <span class="hljs-number">9</span>, <span class="hljs-number">9</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
LEFT_HANDS = dict()<font></font>
LEFT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  \''</span>, <span class="hljs-number">52</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">49</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">57</span>, <span class="hljs-number">9</span>, <span class="hljs-number">9</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
GLOVES = dict()<font></font>
GLOVES[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">28</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
GLOVES[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
HEADS = dict()<font></font>
HEADS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">13</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">4</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">19</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
CHESTS = dict()<font></font>
CHESTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">60</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">50</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">11</span>, <span class="hljs-number">18</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
PANTS = dict()<font></font>
PANTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">46</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
PANTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
BOOTS = dict()<font></font>
BOOTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">21</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
BOOTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
BOOTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">23</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">add the equipype string to the constructor of the Rogue class</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#    ,    id  :</span>
    <span class="hljs-comment"># 0 -  , 1 -  , 2 - , 3 - , 4 - , 5 - , 6 - </span>
    self.equipment_slots = [<span class="hljs-number">0</span>] * <span class="hljs-number">7</span><font></font>
<font></font>
    <span class="hljs-comment">#    ,      :</span>
    self.equipment_names = [<span class="hljs-string">''</span>] * <span class="hljs-number">7</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also add to our class the </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wear_item</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (calculation of characteristics when putting on things) and </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unwear_all methods</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (remove all things).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class methods responsible for working with equipment</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#   "  ":</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unwear_all</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-comment">#  id      :</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, len(self.equipment_slots) ):<font></font>
            self.equipment_slots[i] = <span class="hljs-number">0</span>
            self.equipment_names[i] = <span class="hljs-string">''</span><font></font>
<font></font>
        self.set_stats_without_equip()<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#    :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">wear_item</span>(<span class="hljs-params">self, slot, item_id, items_list</span>):</span><font></font>
<font></font>
        <span class="hljs-comment">#      ,        ,   :</span>
        <span class="hljs-keyword">if</span> self.equipment_slots[slot] == <span class="hljs-number">0</span>:<font></font>
            self.equipment_slots[slot] = item_id<font></font>
            self.equipment_names[slot] = items_list[item_id][<span class="hljs-number">0</span>]<font></font>
            self.stat_agility += items_list[item_id][<span class="hljs-number">2</span>]<font></font>
            self.stat_power += items_list[item_id][<span class="hljs-number">3</span>]
            <span class="hljs-comment">#  ,            :</span>
            self.stat_attackpower += items_list[item_id][<span class="hljs-number">1</span>] + items_list[item_id][<span class="hljs-number">2</span>] + items_list[item_id][<span class="hljs-number">3</span>]<font></font>
            self.stat_hit += items_list[item_id][<span class="hljs-number">4</span>]<font></font>
            self.direct_crit_bonus += items_list[item_id][<span class="hljs-number">5</span>]<font></font>
            self.stat_mastery += items_list[item_id][<span class="hljs-number">6</span>]<font></font>
<font></font>
            <span class="hljs-comment">#         . ,   . :</span>
            <span class="hljs-keyword">if</span> items_list[item_id][<span class="hljs-number">2</span>] != <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> items_list[item_id][<span class="hljs-number">5</span>] != <span class="hljs-number">0</span>:<font></font>
                self.calculate_critical_percent()<font></font>
<font></font>
            <span class="hljs-comment">#    ,    :</span>
            <span class="hljs-keyword">if</span> items_list[item_id][<span class="hljs-number">6</span>] != <span class="hljs-number">0</span>:<font></font>
                self.calculate_glancing_percent()<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, the fact of combining some things gives additional bonuses (in “World of Warcraft” this is known as a “set bonus”). </font><font style="vertical-align: inherit;">In my abstract set, such a bonus is given from putting on the right-handed Guard of the Forests and the Left-Handed Guard of the Forests at the same time. </font><font style="vertical-align: inherit;">Add this to the code of the </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wear_item</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set bonuses in the wear_item method</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#      "custom":</span>
            <span class="hljs-keyword">if</span> EQUIPMENT_COLLECTION == <span class="hljs-string">'custom'</span>:
                <span class="hljs-comment">#      "  " (id 1   " "),     "  " (id 1   " "),   2  . :</span>
                <span class="hljs-keyword">if</span> slot == <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">if</span> self.equipment_slots[<span class="hljs-number">1</span>] == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> self.equipment_slots[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:<font></font>
                        self.direct_crit_bonus += <span class="hljs-number">2</span><font></font>
                        self.calculate_critical_percent()<font></font>
                        print(<span class="hljs-string">'  ...'</span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now our robber needs to be taught how to fight. </font><font style="vertical-align: inherit;">We will consider a fight a series of 1000 attacks on an opponent who is standing with his back to us and is busy with something else (a typical situation for World of Warcraft). </font><font style="vertical-align: inherit;">Each strike, regardless of the previous ones, may be:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - standard damage, in our model equivalent to character’s “attack power”</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moving</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 70% damage from normal</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">critical</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - double damage from normal</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">miss</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 0 damage</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This will be determined by a series of checks according to this scheme: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7m/tr/bg/7mtrbgwb8yoi5loosr9fwn8eqny.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And for a robber with basic values, this scheme takes the form: </font><i><b><font style="vertical-align: inherit;">Let's program</font></b></i></font><br>
<br>
<img src="https://habrastorage.org/webt/-q/ha/dr/-qhadrqxtuy5bom3dkhkvvh3lta.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
this mechanics by adding the </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do_attack</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method </font><font style="vertical-align: inherit;">to the code of our class. </font><font style="vertical-align: inherit;">It will return a tuple of two numbers: (outcome of the attack, damage done).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attack code</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#    :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_attack</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-comment">#   :</span>
        event_hit = randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)<font></font>
<font></font>
        <span class="hljs-comment">#  :</span>
        <span class="hljs-keyword">if</span> event_hit &gt; self.stat_hit:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-number">0</span><font></font>
<font></font>
        <span class="hljs-comment">#  :</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment">#   :</span>
            event_glancing = randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)<font></font>
<font></font>
            <span class="hljs-comment">#    ,    ,</span>
            <span class="hljs-comment">#      10  "",  stat_glancing_percent   0,</span>
            <span class="hljs-comment">#      </span>
            <span class="hljs-keyword">if</span> event_glancing &lt;= self.stat_glancing_percent:<font></font>
                damage = floor(self.stat_attackpower * <span class="hljs-number">0.7</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>, damage<font></font>
<font></font>
            <span class="hljs-comment">#    :</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment">#   :</span>
                event_crit = randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)<font></font>
<font></font>
                <span class="hljs-comment">#    :</span>
                <span class="hljs-keyword">if</span> event_crit &gt; self.stat_crit:<font></font>
                    damage = self.stat_attackpower<font></font>
                    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>, damage<font></font>
<font></font>
                <span class="hljs-comment">#   :</span>
                <span class="hljs-keyword">else</span>:<font></font>
                    damage = self.stat_attackpower * <span class="hljs-number">2</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>, damage
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will achieve a convenient display of the current state of the robber, so that at any time you can check what happens to him:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redefine the __str__ magic method</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#  " "     :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><font></font>
<font></font>
        <span class="hljs-comment">#      :</span>
        using_equipment_names = <span class="hljs-string">''</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, len(self.equipment_names) - <span class="hljs-number">1</span> ):<font></font>
            using_equipment_names += self.equipment_names[i] + <span class="hljs-string">'", "'</span>
        using_equipment_names = <span class="hljs-string">'"'</span> + using_equipment_names + self.equipment_names[<span class="hljs-number">-1</span>] + <span class="hljs-string">'"'</span><font></font>
<font></font>
        <span class="hljs-comment">#  :</span>
        description = <span class="hljs-string">' 60 \n'</span>
        description += using_equipment_names + <span class="hljs-string">'\n'</span>
        description += <span class="hljs-string">' : '</span> + str(self.stat_attackpower) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_agility) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_power) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_hit) + <span class="hljs-string">'%\n'</span>
        description += <span class="hljs-string">'. : '</span> + str(self.stat_crit) + <span class="hljs-string">'%\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_mastery) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">' . .: '</span> + str(self.stat_glancing_percent) + <span class="hljs-string">'%\n'</span>
        <span class="hljs-keyword">return</span> description
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STEP 3 - Preparing to Launch</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now it's time to write a code that will provide fights for all possible sets of equipment. </font><font style="vertical-align: inherit;">To do this, I sequentially call functions according to this scheme:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s2/vu/to/s2vutoqapwumtqcjqgzmiryezma.png" alt="image"><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">run_session</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nested loops are implemented here, sorting through all the required dictionaries with things and calling the following function for each combination; </font><font style="vertical-align: inherit;">at the end the report text will be generated and saved in the session log</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test_combination</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - all previously worn items are reset and the wear_item method is called over and over, dressing the character in a new “outfit”, after which the next function is called</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simulate_fight</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the same do_attack method is called 1000 times, the received data are kept, if necessary, a detailed log is kept for each battle</font></font></li>
</ol><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">functions run_session, test_combination, simulate_fight</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#     :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_session</span>(<span class="hljs-params">SESSION_LOG</span>):</span><font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    fight_number = <span class="hljs-number">1</span><font></font>
<font></font>
    <span class="hljs-comment">#    :</span>
    all_fight_data = <span class="hljs-string">''</span><font></font>
<font></font>
    <span class="hljs-comment">#      :</span>
    <span class="hljs-keyword">for</span> new_righthand_id <span class="hljs-keyword">in</span> RIGHT_HANDS:
        <span class="hljs-comment">#      :</span>
        <span class="hljs-keyword">for</span> new_lefthand_id <span class="hljs-keyword">in</span> LEFT_HANDS:
            <span class="hljs-comment">#   :</span>
            <span class="hljs-keyword">for</span> new_gloves_id <span class="hljs-keyword">in</span> GLOVES:
                <span class="hljs-comment">#   :</span>
                <span class="hljs-keyword">for</span> new_head_id <span class="hljs-keyword">in</span> HEADS:
                    <span class="hljs-comment">#   :</span>
                    <span class="hljs-keyword">for</span> new_chest_id <span class="hljs-keyword">in</span> CHESTS:
                        <span class="hljs-comment">#   :</span>
                        <span class="hljs-keyword">for</span> new_pants_id <span class="hljs-keyword">in</span> PANTS:
                            <span class="hljs-comment">#   :</span>
                            <span class="hljs-keyword">for</span> new_boots_id <span class="hljs-keyword">in</span> BOOTS:<font></font>
<font></font>
                                new_fight_data = test_combination(fight_number,<font></font>
                                                                  new_righthand_id,<font></font>
                                                                  new_lefthand_id,<font></font>
                                                                  new_gloves_id,<font></font>
                                                                  new_head_id,<font></font>
                                                                  new_chest_id,<font></font>
                                                                  new_pants_id,<font></font>
                                                                  new_boots_id<font></font>
                                                                  )<font></font>
<font></font>
                                all_fight_data += new_fight_data<font></font>
                                fight_number += <span class="hljs-number">1</span><font></font>
<font></font>
    <span class="hljs-comment">#       :</span><font></font>
    save_data_to_file(SESSION_LOG, all_fight_data)<font></font>
<font></font>
<span class="hljs-comment">#       :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_combination</span>(<span class="hljs-params">fight_number, righthand_id, lefthand_id, gloves_id, head_id, chest_id, pants_id, boots_id</span>):</span><font></font>
<font></font>
    <span class="hljs-comment">#   :</span><font></font>
    my_rogue.unwear_all()<font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    my_rogue.wear_item(<span class="hljs-number">0</span>, righthand_id, RIGHT_HANDS)<font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    my_rogue.wear_item(<span class="hljs-number">1</span>, lefthand_id, LEFT_HANDS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">2</span>, gloves_id, GLOVES)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">3</span>, head_id, HEADS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">4</span>, chest_id, CHESTS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">5</span>, pants_id, PANTS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">6</span>, boots_id, BOOTS)<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#    "" :</span>
    equipment_profile = str(righthand_id) + <span class="hljs-string">','</span> + str(lefthand_id) + <span class="hljs-string">','</span> + str(gloves_id) + \
                            <span class="hljs-string">','</span> + str(head_id) + <span class="hljs-string">','</span> + str(chest_id) + <span class="hljs-string">','</span> + str(pants_id) + \
                            <span class="hljs-string">','</span> + str(boots_id)<font></font>
<font></font>
    print(my_rogue)<font></font>
    print(<span class="hljs-string">'equipment_profile ='</span>, equipment_profile)<font></font>
<font></font>
    <span class="hljs-comment">#        :</span>
    <span class="hljs-keyword">return</span> simulate_fight(equipment_profile, fight_number)<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#  ,    attacks_total   :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">simulate_fight</span>(<span class="hljs-params">equipment_profile, fight_number</span>):</span>
    <span class="hljs-keyword">global</span> LOG_EVERY_FIGHT<font></font>
<font></font>
    <span class="hljs-comment">#   :</span>
    sum_of_attack_types = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]<font></font>
    sum_of_damage = <span class="hljs-number">0</span><font></font>
<font></font>
    <span class="hljs-comment">#  ,     :</span>
    <span class="hljs-keyword">if</span> LOG_EVERY_FIGHT:<font></font>
        fight_log = <span class="hljs-string">''</span><font></font>
        verdicts = {<font></font>
            <span class="hljs-number">0</span>: <span class="hljs-string">'.'</span>,
            <span class="hljs-number">1</span>: <span class="hljs-string">'.'</span>,
            <span class="hljs-number">2</span>: <span class="hljs-string">'.'</span>,
            <span class="hljs-number">3</span>: <span class="hljs-string">'.'</span><font></font>
        }<font></font>
<font></font>
    attacks = <span class="hljs-number">0</span>
    <span class="hljs-keyword">global</span> ATTACKS_IN_FIGHT<font></font>
<font></font>
    <span class="hljs-comment">#  ,      :</span>
    <span class="hljs-keyword">while</span> attacks &lt; ATTACKS_IN_FIGHT:
        <span class="hljs-comment">#  - :</span><font></font>
        damage_info = my_rogue.do_attack()<font></font>
<font></font>
        <span class="hljs-comment">#   :</span>
        sum_of_damage += damage_info[<span class="hljs-number">1</span>]<font></font>
<font></font>
        <span class="hljs-comment">#   :</span>
        sum_of_attack_types[ damage_info[<span class="hljs-number">0</span>] ] += <span class="hljs-number">1</span><font></font>
<font></font>
        attacks += <span class="hljs-number">1</span><font></font>
<font></font>
        <span class="hljs-comment">#  ,   :</span>
        <span class="hljs-keyword">if</span> LOG_EVERY_FIGHT:<font></font>
            fight_log += verdicts[ damage_info[<span class="hljs-number">0</span>] ] + <span class="hljs-string">' '</span> + str(damage_info[<span class="hljs-number">1</span>]) + <span class="hljs-string">' '</span> + str(sum_of_damage) + <span class="hljs-string">'\n'</span><font></font>
<font></font>
    <span class="hljs-comment">#  ,  :</span>
    <span class="hljs-keyword">if</span> LOG_EVERY_FIGHT:
        <span class="hljs-comment">#  :</span>
        filename = <span class="hljs-string">'fight_logs/log '</span> + str(fight_number) + <span class="hljs-string">'.txt'</span><font></font>
        save_data_to_file(filename, fight_log)<font></font>
<font></font>
    <span class="hljs-comment">#       :</span>
    attacks_statistic = <span class="hljs-string">','</span>.join(map(str, sum_of_attack_types))<font></font>
    fight_data = <span class="hljs-string">'#'</span> + str(fight_number) + <span class="hljs-string">'/'</span> + equipment_profile + <span class="hljs-string">'/'</span> + str(sum_of_damage) + <span class="hljs-string">','</span> + attacks_statistic + <span class="hljs-string">'\n'</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> fight_data
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To save the logs, I use two simple functions:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">functions save_data, add_data</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#     :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">save_data_to_file</span>(<span class="hljs-params">filename, data</span>):</span>
    <span class="hljs-keyword">with</span> open(filename, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf8'</span>) <span class="hljs-keyword">as</span> f:<font></font>
        print(data, file=f)<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#     :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append_data_to_file</span>(<span class="hljs-params">filename, data</span>):</span>
    <span class="hljs-keyword">with</span> open(filename, <span class="hljs-string">'a+'</span>, encoding=<span class="hljs-string">'utf8'</span>) <span class="hljs-keyword">as</span> f:<font></font>
        print(data, file=f)<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, now it remains to write a few lines to start the session and save its results. </font><font style="vertical-align: inherit;">We also import the necessary standard Python modules. </font><font style="vertical-align: inherit;">This is where you can determine which set of equipment will be tested. </font><font style="vertical-align: inherit;">For fans of World of Warcraft, I picked up equipment from there, but remember that this project is just an approximate reconstruction of the mechanic from there.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">program code</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#     :</span>
<span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint<font></font>
<font></font>
<span class="hljs-comment">#     :</span>
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> floor<font></font>
<font></font>
<span class="hljs-comment">#    :</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> time<font></font>
<font></font>
<span class="hljs-comment">#    :</span>
<span class="hljs-keyword">from</span> operations_with_files <span class="hljs-keyword">import</span> *<font></font>
<font></font>
<span class="hljs-comment">#      :</span>
<span class="hljs-keyword">from</span> equipment_custom <span class="hljs-keyword">import</span> *
<span class="hljs-comment">#from equipment_wow_classic import *</span>
<span class="hljs-comment">#from equipment_obvious_strong import *</span>
<span class="hljs-comment">#from equipment_obvious_weak import *</span><font></font>
<font></font>
<font></font>
<span class="hljs-comment"># :</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    ATTACKS_IN_FIGHT = <span class="hljs-number">1000</span><font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    LOG_EVERY_FIGHT = <span class="hljs-literal">False</span><font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    SESSION_LOG = <span class="hljs-string">'session_logs/for '</span> + EQUIPMENT_COLLECTION + <span class="hljs-string">' results '</span> + datetime.strftime(datetime.now(), <span class="hljs-string">'%Y-%m-%d_%H-%M-%S'</span>) + <span class="hljs-string">'.txt'</span>
    print(<span class="hljs-string">'SESSION_LOG ='</span>, SESSION_LOG)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span><font></font>
    my_rogue = Rogue()<font></font>
<font></font>
    <span class="hljs-comment">#  :</span><font></font>
    time_begin = time()<font></font>
<font></font>
    <span class="hljs-comment">#   :</span><font></font>
    run_session(SESSION_LOG)<font></font>
<font></font>
    <span class="hljs-comment">#   :</span><font></font>
    time_session = time() - time_begin<font></font>
    duration_info = <span class="hljs-string">' : '</span> + str( round(time_session, <span class="hljs-number">2</span>) ) + <span class="hljs-string">' .'</span>
    print(<span class="hljs-string">'\n'</span> + duration_info)<font></font>
    append_data_to_file(SESSION_LOG, duration_info + <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
    <span class="hljs-comment">#  ,   5    :</span>
    top_sets_info = show_best_sets(SESSION_LOG, <span class="hljs-number">5</span>)<font></font>
<font></font>
    <span class="hljs-comment">#          :</span><font></font>
    append_data_to_file(SESSION_LOG, top_sets_info)<font></font>
<font></font>
<span class="hljs-keyword">else</span>:<font></font>
    print(<span class="hljs-string">'__name__ is not "__main__".'</span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A session of 1728 battles takes 5 seconds on my laptop. </font><font style="vertical-align: inherit;">If you set LOG_EVERY_FIGHT = True, then files with data for each fight will appear in the fight_logs folder, but the session will already take 9 seconds. </font><font style="vertical-align: inherit;">In any case, the session log will appear in the session_logs folder:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first 10 lines of the log</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">#1/1,1,1,1,1,1,1/256932,170,324,346,160<font></font>
#2/1,1,1,1,1,1,2/241339,186,350,331,133<font></font>
#3/1,1,1,1,1,2,1/221632,191,325,355,129<font></font>
#4/1,1,1,1,1,2,2/225359,183,320,361,136<font></font>
#5/1,1,1,1,1,3,1/243872,122,344,384,150<font></font>
#6/1,1,1,1,1,3,2/243398,114,348,394,144<font></font>
#7/1,1,1,1,2,1,1/225342,170,336,349,145<font></font>
#8/1,1,1,1,2,1,2/226414,173,346,322,159<font></font>
#9/1,1,1,1,2,2,1/207862,172,322,348,158<font></font>
#10/1,1,1,1,2,2,2/203492,186,335,319,160<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, just holding a session is not enough; you need to extract information from those hundreds of lines about those combinations of things that led to the best results. </font><font style="vertical-align: inherit;">To do this, we will write two more functions. </font><font style="vertical-align: inherit;">The general idea is to open the received log, create a list of damage amounts for each battle, sort it and, for example, write down the names of the things used for the 5 best situations.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">functions for determining top gear</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#       :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show_best_sets</span>(<span class="hljs-params">SESSION_LOG, number_of_sets</span>):</span><font></font>
<font></font>
    <span class="hljs-comment">#      :</span><font></font>
    list_log = list()<font></font>
<font></font>
    <span class="hljs-comment">#   ,      list_log ,</span>
    <span class="hljs-comment">#          :</span>
    <span class="hljs-keyword">with</span> open(SESSION_LOG, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf8'</span>) <span class="hljs-keyword">as</span> f:<font></font>
        lines = f.readlines()<font></font>
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:
            <span class="hljs-keyword">try</span>:<font></font>
                list_line = line.split(<span class="hljs-string">'/'</span>)<font></font>
                list_fight = list_line[<span class="hljs-number">2</span>].split(<span class="hljs-string">','</span>)<font></font>
                list_log.append( ( int(list_fight[<span class="hljs-number">0</span>]), list_line[<span class="hljs-number">1</span>].split(<span class="hljs-string">','</span>) ) )
            <span class="hljs-keyword">except</span> IndexError:
                <span class="hljs-keyword">break</span><font></font>
<font></font>
    <span class="hljs-comment">#  ,      :</span>
    list_log.sort(reverse=<span class="hljs-literal">True</span>)<font></font>
<font></font>
    <span class="hljs-comment">#   ,  number_of_sets     :</span>
    top_sets_info = <span class="hljs-string">''</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, number_of_sets):<font></font>
        current_case = list_log[i]<font></font>
<font></font>
        <span class="hljs-comment">#           :</span>
        clear_report = <span class="hljs-string">''</span>
        equipment_names = <span class="hljs-string">''</span>
        equip_group = <span class="hljs-number">1</span><font></font>
<font></font>
        <span class="hljs-keyword">for</span> equip_id <span class="hljs-keyword">in</span> current_case[<span class="hljs-number">1</span>]:<font></font>
            equipment_names += <span class="hljs-string">'\n'</span> + get_equip_name(equip_id, equip_group)<font></font>
            equip_group += <span class="hljs-number">1</span><font></font>
<font></font>
        line_for_clear_report = <span class="hljs-string">'\n#'</span> + str(i+<span class="hljs-number">1</span>) + <span class="hljs-string">' - '</span> + str(current_case[<span class="hljs-number">0</span>]) + <span class="hljs-string">'   :'</span> + equipment_names<font></font>
        clear_report += line_for_clear_report<font></font>
<font></font>
        print(<span class="hljs-string">'\n'</span>, clear_report)<font></font>
        top_sets_info += clear_report + <span class="hljs-string">'\r'</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> top_sets_info<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#     id:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_equip_name</span>(<span class="hljs-params">equip_id, equip_group</span>):</span><font></font>
    equip_id = int(equip_id)<font></font>
<font></font>
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> RIGHT_HANDS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">2</span>:
        <span class="hljs-keyword">return</span> LEFT_HANDS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">return</span> GLOVES[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">4</span>:
        <span class="hljs-keyword">return</span> HEADS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">5</span>:
        <span class="hljs-keyword">return</span> CHESTS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">6</span>:
        <span class="hljs-keyword">return</span> PANTS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">7</span>:
        <span class="hljs-keyword">return</span> BOOTS[equip_id][<span class="hljs-number">0</span>]
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now at the end of the log lines with 5 selections appear, showing the best result:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finally readable log lines</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"> : 4.89 .<font></font>
<font></font>
#1 - 293959   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#2 - 293102   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#3 - 290573   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#4 - 287592   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#5 - 284929   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STEP 4 - evaluate the sustainability of the results</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important to remember that there are elements of randomness in this project: when determining the type of stroke using the </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">randint</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> function </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Repeatedly conducting tests, I noticed that when repeating sessions with the same input data, the top 5 selections may vary. </font><font style="vertical-align: inherit;">This is not very happy, and took to solve the problem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First I made a test kit of the equipment “obvious_strong”, where even without tests it is obvious which collections of things are the best here:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">watch the obvious_strong set</font></font></b><div class="spoiler_text"><pre><code class="python hljs">EQUIPMENT_COLLECTION = <span class="hljs-string">'obvious_strong'</span><font></font>
<font></font>
RIGHT_HANDS = dict()<font></font>
RIGHT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">5000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">800</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
LEFT_HANDS = dict()<font></font>
LEFT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">4000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
GLOVES = dict()<font></font>
GLOVES[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
HEADS = dict()<font></font>
HEADS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
CHESTS = dict()<font></font>
CHESTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
PANTS = dict()<font></font>
PANTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
BOOTS = dict()<font></font>
BOOTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With this set there will be </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fights (3 swords * 2 daggers * 1 * 1 * 1 * 1 * 1). In the top 5, the battle where the worst sword and the worst dagger is taken should not be included. Well, of course, the first place should be a selection with two strongest blades. If you think about it, then for each collection it is obvious what place it will fall into. Conducted tests, expectations were met. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is a visualization of the outcome of one of the tests of this set: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zg/_i/zp/zg_izpaduytv7ypjflofdbm2tdg.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, I reduced to a minimum the gap in the amount of bonuses given by these blades </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5000, 800, 20 and 4000, 10 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5, 4, 3 and 2, 1, respectively (in the project this set is located in the file “equipment_obvious_weak.py”). And here, suddenly, the combination of the strongest sword and the worst dagger came out on top. Moreover, in one of the tests, the two best weapons suddenly came in last place: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ae/ql/t2/aeqlt2_rmff3kmd9gmotvibtine.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to understand this? The expectations in the obviously correct arrangement of the collections remained unchanged, but the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">degree of difference</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> between them was significantly </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduced</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . And now, accidents during the battles (the ratio of misses and hits, critical and non-critical hits, etc.) have acquired decisive importance.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's check how often the "duet of top blades" will fall not in first place. </font><font style="vertical-align: inherit;">I made 100 such launches (for this, I wrapped the “program launch lines” in a cycle of 100 iterations and started to keep a special log for this entire “super session”). </font><font style="vertical-align: inherit;">Here is the visualization of the results: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/oe/qu/nzoequlloochqmzvl6oybzepjay.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, the results in our program are not always stable (34% of the “right” outcomes versus 66% of the “wrong”). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The stability of the results is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directly proportional to the</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> difference in the bonuses of the tested items. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Given that the difference in the amount of bonuses of good things that it makes sense to test is weakly perceptible (as in "World of Warcraft"), the results of such tests will be relatively unstable (unstable, unstable, etc.).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STEP 5 - Increasing Resilience</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We try to think logically. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We outline the success criterion: the</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> “duet of top blades” should be in first place in 99% of cases. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Current situation:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 34% of such cases. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you do not change the accepted approach in principle (the transition from simulation of battles for all selections to a simple calculation of characteristics, for example), it remains to change some quantitative parameter of our model. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For instance:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to conduct not one battle for each collection, but several, then record the arithmetic mean in the log, discard the best and worst, etc.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conduct several test sessions in general, and then also take the “average”</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to extend the battle itself from 1000 hits to a certain value, which will be enough for the results to be fair for the collections that are very close in terms of the total bonus</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, it seemed to me a successful idea with a lengthening of the battle, because it is in this place that everything happens that caused the lengthening of this article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I </font><font style="vertical-align: inherit;">’ll test the </font><font style="vertical-align: inherit;">hypothesis that lengthening the battle from </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10,000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> strokes will increase the stability of the results (for this you need to set the constant ATTACKS_IN_FIGHT to 10000). And this is so: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iq/il/rc/iqilrc6kulybrfs1apchkyyleik.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then he decided to increase from </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10,000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100,000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shots, and this led to one hundred percent success. After that, using the binary search method, he began to select the number of hits that would give 99% of successes to get rid of excessive calculations. Stopped at 46 875.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qg/oz/gx/qgozgxod9pupmsmzlloagt3hs2g.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If my estimate of 99% reliability of a system with such a battle length is correct, then two tests in a row reduce the probability of error to 0.01 * 0.01 = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.0001</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And now, if you run a test with a battle of 46,875 strokes for a set of equipment for 1,728 battles, it will take 233 seconds and inspire confidence that the “Sword of the Master” rules:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the results of 1728 battles for 46 875 strikes</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"> : 233.89 .<font></font>
<font></font>
#1 - 13643508   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#2 - 13581310   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#3 - 13494544   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#4 - 13473820   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#5 - 13450956   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS And this is easy to explain: two “Swords of the Master” allow you to get 10 units of skill, which, according to the inherent mechanics, eliminates the possibility of sliding strokes, and this adds about 40% of strokes when X or 2X damage is applied instead of 0.7X. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The result of a similar test for WoW fans:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the results of 1296 battles of 46 875 hits (wow classic preraid)</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"> : 174.58 .<font></font>
<font></font>
<font></font>
#1 - 19950930   :<font></font>
  '<font></font>
  '<font></font>
  <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#2 - 19830324   :<font></font>
  '<font></font>
  '<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#3 - 19681971   :<font></font>
  '<font></font>
  '<font></font>
  <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#4 - 19614600   :<font></font>
  '<font></font>
  '<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#5 - 19474463   :<font></font>
  '<font></font>
  '<font></font>
  <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></h2><br>
<ol>
<li>    —  . ,        ,     4 * 4 * 3 * 3 * 3 * 3 * 2 = <b>2592</b>, ..  33% .       .</li>
<li>  :   ,             ,    ,         .</li>
<li>,    :        ,        ,  ,    .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I posted all the project code on the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dear community, I will be glad to receive feedback on this topic. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD from 04/08/2020: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thanks to the comments</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deerenaros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">knotri</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Griboks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I realized that instead of simulating thousands of battles, you can calculate the mathematical expectation for one hit and, on this basis, rank the equipment. </font><font style="vertical-align: inherit;">I threw everything related to fights out of the code, instead of the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simulate_fight</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> function I </font><font style="vertical-align: inherit;">did </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculate_expectation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">At the output, I get the same results. </font><font style="vertical-align: inherit;">Added the resulting </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to the repository </font><font style="vertical-align: inherit;">.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495764/index.html">CSI Linux: linux distribution for cyber investigations and OSINT</a></li>
<li><a href="../en495766/index.html">JSON Schema. To be or not to be?</a></li>
<li><a href="../en495768/index.html">Interface design for industrial controller</a></li>
<li><a href="../en495770/index.html">The digest of interesting materials for the mobile developer # 339 (March 30 - April 5)</a></li>
<li><a href="../en495772/index.html">Writing Pixel Art Maker in JavaScript</a></li>
<li><a href="../en495780/index.html">We study the Mediastreamer2 VoIP engine. Part 3</a></li>
<li><a href="../en495782/index.html">FOSS News No. 10 - review of free and open source news for March 30 - April 5, 2020</a></li>
<li><a href="../en495784/index.html">SamsPcbGuide, Part 14: Technology - Microdevelopment and Chip-On-Board Technology</a></li>
<li><a href="../en495786/index.html">Global nulling</a></li>
<li><a href="../en495788/index.html">A device from a coronavirus or another trolley from a loaf of bread?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>