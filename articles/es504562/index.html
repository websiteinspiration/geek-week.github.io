<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø ü¶à üíî Copia de seguridad incremental Proxmox VE con VBR üèÑ ü§µüèæ üëêüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En uno de los art√≠culos anteriores de la serie de hipervisores Proxmox VE, ya hablamos sobre c√≥mo hacer una copia de seguridad utilizando herramientas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Copia de seguridad incremental Proxmox VE con VBR</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/504562/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/6u/nl/ol/6unlolfmjashv0lotsjhjbgc1gg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En uno de los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culos anteriores</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la serie de hipervisores Proxmox VE, ya hablamos sobre c√≥mo hacer una copia de seguridad utilizando herramientas normales. </font><font style="vertical-align: inherit;">Hoy mostramos c√≥mo usar la excelente herramienta Veeam¬Æ Backup &amp; Replication ‚Ñ¢ 10 para el mismo prop√≥sito. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúLas copias de seguridad tienen una esencia cu√°ntica expl√≠cita. </font><font style="vertical-align: inherit;">Hasta que haya intentado recuperarse de la copia de seguridad, est√° en superposici√≥n. </font><font style="vertical-align: inherit;">√âl es exitoso y no tanto ". </font><font style="vertical-align: inherit;">(encontrado en Internet)</font></font></i><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargo de responsabilidad:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
No, no estoy diciendo que esta sea la manera perfecta de hacer una copia de seguridad. No, no se puede recomendar para producci√≥n. No, no garantizo la integridad perfecta de las copias de seguridad realizadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, todo esto funciona y es bastante adecuado para muchos usuarios y administradores de sistemas novatos que dan los primeros pasos en el estudio de los sistemas de virtualizaci√≥n y copia de seguridad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La copia de seguridad es quiz√°s uno de los procesos m√°s importantes de los que depende el trabajo de cualquier empresa. No hay nada m√°s caro que los datos almacenados en los sistemas de informaci√≥n corporativos, y no hay nada peor que la falta de la capacidad de recuperarlos en caso de falla.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo sucede que debe pensar en la necesidad de una copia de seguridad y elegir una herramienta solo despu√©s de una emergencia que ya ha ocurrido, asociada con la p√©rdida de datos cr√≠ticos. </font><font style="vertical-align: inherit;">A medida que se desarrollaban las tecnolog√≠as de virtualizaci√≥n, las aplicaciones de respaldo comenzaron a centrarse en la interacci√≥n cercana con los hipervisores. </font><font style="vertical-align: inherit;">Veeam¬Æ Backup &amp; Replication ‚Ñ¢ no es una excepci√≥n, con amplias opciones de respaldo en entornos virtualizados. </font><font style="vertical-align: inherit;">Hoy le mostraremos c√≥mo configurarlo para que funcione con Proxmox VE.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n del hipervisor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilizaremos la versi√≥n actual de Proxmox en el momento de la escritura: 6.2-1. </font><font style="vertical-align: inherit;">Esta versi√≥n fue lanzada el 12 de mayo de 2020 y contiene muchos cambios √∫tiles, que discutiremos en uno de los siguientes art√≠culos. </font><font style="vertical-align: inherit;">Por ahora, comencemos a preparar el hipervisor. </font><font style="vertical-align: inherit;">La tarea principal es instalar Veeam¬Æ Agent para Linux en un host redundante con Proxmox. </font><font style="vertical-align: inherit;">Pero antes de eso tomamos algunos pasos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preparaci√≥n del sistema</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalamos la </font><font style="vertical-align: inherit;">
utilidad </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que est√° ausente en el sistema si Proxmox no se instal√≥ en un sistema Linux existente, sino como un sistema operativo independiente de una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen oficial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tambi√©n necesitaremos los encabezados pve del kernel. </font><font style="vertical-align: inherit;">Accedemos al servidor a trav√©s de SSH y agregamos un repositorio que funciona sin una suscripci√≥n de soporte (oficialmente no se recomienda para la producci√≥n, pero contiene los paquetes que necesitamos):</font></font><br>
<br>
<pre><code class="plaintext hljs">echo "deb http://download.proxmox.com/debian/pve buster pve-no-subscription" &gt;&gt; /etc/apt/sources.list</code></pre><br>
<pre><code class="plaintext hljs">apt update</code></pre><br>
<pre><code class="plaintext hljs">apt install sudo pve-headers</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de este procedimiento, aseg√∫rese de reiniciar el servidor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar Veeam¬Æ Agent</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> paquete de Deb de Veeam¬Æ Agent para Linux del sitio web oficial (se requiere una cuenta), arme con un cliente SFTP y cargue el paquete de Deb recibido en el servidor. </font><font style="vertical-align: inherit;">Instale el paquete y actualice la lista de programas en los repositorios que agrega este paquete:</font></font><br>
<br>
<pre><code class="plaintext hljs">dpkg -i veeam-release-deb_1.x.x_amd64.deb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actualizaci√≥n de los repositorios nuevamente:</font></font><br>
<br>
<pre><code class="plaintext hljs">apt update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale el propio agente:</font></font><br>
<br>
<pre><code class="plaintext hljs">apt install veeam</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificamos que todo est√© instalado correctamente:</font></font><br>
<br>
<pre><code class="plaintext hljs">dkms status</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La respuesta ser√≠a algo como esto:</font></font><br>
<br>
<pre><code class="plaintext hljs">veeamsnap, 4.0.0.1961, 5.4.41-1-pve, x86_64: installed</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n de Veeam¬Æ Backup &amp; Replication ‚Ñ¢</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar un repositorio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, tambi√©n puede almacenar copias de seguridad directamente en el servidor con Veeam¬Æ Backup &amp; Replication ‚Ñ¢ implementado, pero es m√°s conveniente usar almacenamiento externo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vaya a la secci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INFRAESTRUCTURA DE RESPALDO</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/n0/do/z9/n0doz9jyudpcf-hayqu6njcstng.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccione el elemento Repositorios de respaldo, haga clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar repositorio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y seleccione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almacenamiento conectado a la red</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la ventana que aparece </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/le/ew/dsleewxwyfrbxi64ibhnkgbl3hm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, hagamos una prueba de almacenamiento SMB, tengo este es el QNAP habitual:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wn/2v/75/wn2v75pnyilvwfm2wdnez0gff3e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Complete el nombre y la descripci√≥n, luego haga clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/lu/c1/aeluc1vlc3rjv8yfjkkegksfqak.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ingrese la direcci√≥n del almacenamiento SMB y, si requiere autorizaci√≥n, haga clic en Agregar para agregar detalles de acceso:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ku/5g/5n/ku5g5nrjheqx_loj6dicmfylzmm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Complete el nombre de usuario y la contrase√±a para acceder al almacenamiento SMB, y luego haga </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clic</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en </font><b><font style="vertical-align: inherit;">Aceptar</font></b><font style="vertical-align: inherit;"> y regrese a la ventana anterior, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/z5/ty/dqz5tyipy4tpabxyce7azqvwbos.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo se hace sin errores, el programa se conectar√° al repositorio, solicitar√° informaci√≥n sobre el espacio disponible en el disco y mostrar√° el siguiente cuadro de di√°logo. </font><font style="vertical-align: inherit;">En √©l, establezca par√°metros adicionales (si es necesario) y haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ed/gd/mk/edgdmktah8gzp2ficmybhka_qio.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la siguiente ventana, puede dejar todas las configuraciones predeterminadas y tambi√©n hacer clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/-5/xh/ob-5xhmenemijzrsdka1lonr4a4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificamos que los componentes necesarios est√©n instalados y que el estado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ya exista</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y </font><font style="vertical-align: inherit;">hacemos </font><font style="vertical-align: inherit;">clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0a/gv/ix/0agvixnl2-ev6qlpi1dssnj3esy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este punto, Veeam¬Æ Backup &amp; Replication ‚Ñ¢ se conectar√° nuevamente al repositorio, determinar√° los par√°metros necesarios y crear√° un repositorio. </font><font style="vertical-align: inherit;">Haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9x/sv/79/9xsv79akohraqucyp83uh6syqo8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificamos la informaci√≥n total sobre el repositorio agregado y hacemos clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalizar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/e6/2g/zoe62g6kxg07rl5_qo95l7y1m9y.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El programa ofrecer√° autom√°ticamente guardar sus archivos de configuraci√≥n en un nuevo repositorio. </font><font style="vertical-align: inherit;">No necesitamos esto, por lo que respondemos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tp/vs/9-/tpvs9-do-0wpdyqhf_fzr0sg7nk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repositorio agregado con √©xito:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/cy/qy/fpcyqy80-k4ktz59aqchgkg2-9y.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear un trabajo de respaldo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la ventana principal de Veeam¬Æ Backup &amp; Replication ‚Ñ¢, haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backup Job</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computadora Linux</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Elija el tipo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servidor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y el modo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Administrado por servidor de respaldo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1s/oi/wz/1soiwz1snio9rt2aa8lsuz7xnou.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le damos un nombre a la tarea y opcionalmente agregamos una descripci√≥n. </font><font style="vertical-align: inherit;">Luego haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hi/ji/fy/hijifygvb4srir_ecso7zii2tvk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, necesitamos hacer todos los servidores con Proxmox de los que haremos una copia de seguridad. Para hacer esto, haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computadora individual</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ingrese el nombre de host o la direcci√≥n IP del servidor y los detalles de acceso. Por lo tanto, formamos la lista de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">computadoras protegidas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font><font style="vertical-align: inherit;">hacemos </font><font style="vertical-align: inherit;">clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/d_/wp/kp/d_wpkp2p_szef1vyd5bwde6blg0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora un punto muy importante, es decir, la elecci√≥n de los datos que se agregar√°n a la copia de seguridad. Todo depender√° de d√≥nde se encuentren exactamente sus m√°quinas virtuales. Si desea agregar solo un volumen l√≥gico, necesita el modo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copia de seguridad de nivel de volumen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y elegir la ruta al volumen l√≥gico o dispositivo, por ejemplo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ dev / pve</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Todas las dem√°s acciones son id√©nticas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para este art√≠culo, mostraremos c√≥mo funciona el modo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copia de seguridad a nivel de archivo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/6b/5p/wq6b5psnc7jay48_xbrj2_ureee.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la siguiente ventana, creamos una lista de directorios para la copia de seguridad. Haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y prescriba los directorios donde se almacenan los archivos de configuraci√≥n de la m√°quina virtual. Por defecto, este es el directorio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / pve / nodo / pve / qemu-server /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si usa no solo m√°quinas virtuales, sino tambi√©n contenedores LXC, agregue el directorio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / pve / nodo / pve / lxc /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En mi caso, tambi√©n es el directorio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habiendo formado la lista de directorios de esta manera, haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_k/_d/yd/_k_dydc6dnhx4mngj4cuuisokqu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la lista desplegable de repositorios, seleccione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almacenamiento</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creado anteriormente. </font><font style="vertical-align: inherit;">Determinamos la longitud de la cadena para la copia de seguridad incremental. </font><font style="vertical-align: inherit;">Cuantos m√°s puntos haya en la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pol√≠tica de retenci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , m√°s espacio ahorrar√°. </font><font style="vertical-align: inherit;">Pero junto con esto, la confiabilidad de la copia de seguridad disminuir√°. </font><font style="vertical-align: inherit;">La fiabilidad es m√°s importante para m√≠ que la cantidad de espacio de almacenamiento, por lo que pongo 4 puntos. </font><font style="vertical-align: inherit;">Puede tomar el valor est√°ndar de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Continuamos configurando la tarea haciendo clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siguiente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/ae/v5/wkaev5az-3ruj4n-gjuv43oz9vo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ dejamos los par√°metros sin cambios, solo ve a la siguiente ventana:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/4p/b-/tt4pb-cw4quxwulze1xcjjohx_4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuramos el planificador. </font><font style="vertical-align: inherit;">Esta es una de las mejores caracter√≠sticas para facilitar la vida del administrador del sistema. </font><font style="vertical-align: inherit;">En el ejemplo, eleg√≠ iniciar autom√°ticamente la copia de seguridad todos los d√≠as a las 2 a.m. </font><font style="vertical-align: inherit;">Otra gran caracter√≠stica es la capacidad de interrumpir la tarea de respaldo si vamos m√°s all√° del l√≠mite de tiempo de la "ventana de respaldo" asignada. </font><font style="vertical-align: inherit;">Su horario exacto se configura a trav√©s del bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ventana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e-/7j/7h/e-7j7hfdz5fdru4lft7cul74fr0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuevamente, por ejemplo, supongamos que realizamos copias de seguridad solo durante las horas no laborables de lunes a viernes, y los fines de semana generalmente no estamos limitados en el tiempo. </font><font style="vertical-align: inherit;">Formamos una tabla tan hermosa, volvemos a la ventana anterior y hacemos clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7g/ob/ii/7gobiidnihb8a9jsrbsdt8yp9c8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo queda verificar la informaci√≥n de resumen sobre la tarea y hacer clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalizar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2s/mk/6m/2smk6mspmnfayuhhxxi1yjezj3k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto completa la creaci√≥n del trabajo de copia de seguridad.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apoyo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo es elemental aqu√≠. </font><font style="vertical-align: inherit;">En la ventana principal del programa, seleccione la tarea creada y haga clic en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El sistema se conectar√° autom√°ticamente a nuestro servidor (o varios servidores), verificar√° la disponibilidad del almacenamiento y reservar√° la cantidad necesaria de espacio en disco. </font><font style="vertical-align: inherit;">Luego, de hecho, comenzar√° el proceso de copia de seguridad y, una vez finalizado, recibiremos informaci√≥n completa sobre el proceso.</font></font><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si se </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produce</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> un problema con el formulario </font><b><font style="vertical-align: inherit;">Error al cargar el m√≥dulo [veeamsnap] con los par√°metros [zerosnapdata = 1 debuglogging = 0]</font></b><font style="vertical-align: inherit;"> durante el proceso de inicio de la copia de seguridad </font><font style="vertical-align: inherit;">, debe reconstruir el m√≥dulo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeamsnap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de acuerdo con las </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrucciones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></blockquote><div style="text-align:center;"><img src="https://habrastorage.org/webt/ts/do/cm/tsdocmchujzdj5nxvujwmrroffs.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que es especialmente interesante es que en el servidor mismo podemos ver no solo una lista de todas las tareas de copia de seguridad completadas, sino tambi√©n ver el comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeam</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en tiempo real </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/li/lp/tk/lilptkhpxrygvey6krcgbltfvvm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al predecir la pregunta de por qu√© la consola se ve tan extra√±a, dir√© de inmediato: realmente me gusta c√≥mo se ve la consola en la pantalla de un monitor de tubo CRT c√°lido. </font><font style="vertical-align: inherit;">Esto se hace utilizando el emulador de terminal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cool-retro-term</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recuperaci√≥n de datos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora la pregunta m√°s importante. </font><font style="vertical-align: inherit;">Pero, ¬øc√≥mo recuperar datos si sucede algo irreparable? </font><font style="vertical-align: inherit;">Por ejemplo, eliminaron accidentalmente la m√°quina virtual incorrecta. </font><font style="vertical-align: inherit;">En la GUI de Proxmox, desapareci√≥ por completo; no qued√≥ nada en el almacenamiento en el sitio de la m√°quina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de recuperaci√≥n es simple. </font><font style="vertical-align: inherit;">Vamos a la consola Proxmox e ingresamos el comando:</font></font><br>
<br>
<pre><code class="plaintext hljs">veeam</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veremos una lista de copias de seguridad completadas. </font><font style="vertical-align: inherit;">Seleccione la flecha con las flechas y pulse el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> clave </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Luego, seleccione un punto de recuperaci√≥n y presione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lt/du/j8/ltduj8hywtb1zwrmauzoeplnw4c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de un par de segundos, el punto de recuperaci√≥n se montar√° en el directorio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ mnt / backup</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo lo que queda es copiar las unidades virtuales y los archivos de configuraci√≥n de las m√°quinas virtuales en sus lugares, despu√©s de lo cual la m√°quina "muerta" aparecer√° autom√°ticamente en la GUI de Proxmox VE. </font><font style="vertical-align: inherit;">Puede ejecutarlo de la manera habitual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para desmontar el punto de recuperaci√≥n, no debe hacerlo manualmente, pero debe presionar la tecla </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la utilidad </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeam</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Que la fuerza est√© con usted! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Art√≠culos anteriores sobre el hipervisor Proxmox VE:</font></font></i><br>
<br>
<ul>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> :    Proxmox VE</a></i></li>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   Proxmox VE</a></i></li>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  Proxmox VE</a></i></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es504524/index.html">Modelo t√≠pico de desarrollo de epidemias de COVID-19</a></li>
<li><a href="../es504554/index.html">Unity Terrane y Mesh Blending</a></li>
<li><a href="../es504556/index.html">Gesti√≥n de gestos: manejo de conflictos de gestos. Parte 3</a></li>
<li><a href="../es504558/index.html">¬øLa vacunaci√≥n es obligatoria una nueva realidad?</a></li>
<li><a href="../es504560/index.html">Discutamos la cara del crowdfunding dom√©stico</a></li>
<li><a href="../es504564/index.html">IoT en mi vida. C√≥mo crear una oficina inteligente, as√≠ como rastrear el crecimiento de papas en su apartamento gracias a IoT</a></li>
<li><a href="../es504566/index.html">Tabla en Confluencia de Atlassian basada en datos de una solicitud REST</a></li>
<li><a href="../es504568/index.html">Isaac Asimov: ¬øDe d√≥nde obtienen las personas nuevas ideas?</a></li>
<li><a href="../es504572/index.html">Habla como Winston Churchill: ¬øqui√©n necesita vender su alma para comunicarse en ingl√©s? SO</a></li>
<li><a href="../es504576/index.html">C√≥mo se desarroll√≥ el audio dom√©stico: desde noches de canciones hasta los primeros reproductores mec√°nicos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>