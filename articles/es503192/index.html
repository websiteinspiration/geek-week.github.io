<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛀🏽 👧🏾 🏀 oVirt en 2 horas. Parte 4. Operaciones básicas 🔢 🚓 🍘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy analizamos una serie de operaciones básicas que el administrador del entorno de virtualización necesitará realizar regularmente. El artículo es un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>oVirt en 2 horas. Parte 4. Operaciones básicas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503192/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hoy analizamos una serie de operaciones básicas que el administrador del entorno de virtualización necesitará realizar regularmente. </font><font style="vertical-align: inherit;">El artículo es una continuación de la serie oVirt: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parte 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parte 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parte 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenido</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear una VM y plantilla</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migración de VM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (migración en vivo);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migración de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> almacenamiento (migración de almacenamiento);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renombrar VM y disco</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualizar oVirt-Host</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (hipervisor);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualización de oVirt-Engine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (gerente);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar VM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestión de tareas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artículos</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducción</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalación del gestor (ovirt-engine) e hipervisores (hosts) </font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajustes adicionales</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operaciones básicas: estamos aquí</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tradicionalmente, para detalles sobre tareas administrativas, bienvenido a la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al ingresar a oVirt verá 2 portales:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portal de administración</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portal de VM</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primero está destinado a las tareas administrativas y administrativas, el segundo, para clientes de máquinas, pero también puede ser utilizado por el administrador, algunas funciones son aún más convenientes allí. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la parte superior de la ventana de cada colección de objetos oVirt hay un potente cuadro de búsqueda, con indicaciones contextuales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ejemplo, seleccionar hosts problemáticos en el panel de control en realidad causa un filtro:</font></font><br>
<br>
<pre><code class="plaintext hljs">status = unassigned or status = maintenance or status = installing or status = reboot or status = preparingformaintenance or status = pendingapproval or status = connecting or status = installingos or status = kdumping</code></pre><br>
<a name="vm-pool"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear VM y plantilla</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creo que ya creó una máquina virtual simple en la Parte 2, ahora conoceremos otras entidades virtuales que están directamente relacionadas con las máquinas virtuales: máquinas virtuales, plantillas y grupos. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una plantilla</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una copia de una máquina (generalmente preparada previamente) diseñada para crear máquinas idénticas (clonación). La plantilla puede tener una versión, es conveniente, porque no es necesario hacer una nueva plantilla separada después de cada actualización de la máquina de referencia. Más detalles en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un grupo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un grupo de máquinas idénticas generadas a partir de una sola plantilla. Conveniente para VDI (infraestructura de escritorio virtual), cuando docenas o cientos de usuarios necesitan proporcionar un entorno de trabajo idéntico y esto se hace literalmente en un abrir y cerrar de ojos. Lea más sobre los grupos en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creemos una plantilla para la que podamos clonar una máquina creada anteriormente, pero para la demostración, haremos lo contrario: importe una plantilla de la colección externa Glance Images: Storage -&gt; Domains -&gt; ovirt-image-repository (1), Import (2): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/gg/lt/fxggltgss5p9llxyplgghxmpbsg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1 - Importación de la imagen Fedora 32.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Marcamos “Importar como plantilla” (3, Importar como plantilla), le damos un nombre a la plantilla (4). Se recomienda encarecidamente que el disco tenga un nombre descriptivo (5, alias de disco). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El progreso de las tareas se monitorea convenientemente en la sección </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tareas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/p6/co/cjp6cor50gw2euzkgnf_vl-lc24.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 2 - Progreso en completar tareas en oVirt.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Después de una carga exitosa, la plantilla se agrega a la lista. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_n/o3/cg_no3kzfukaodkzouox0q2bt3q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 3 - Plantillas.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Según la plantilla cargada, cree un grupo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fn/qk/aj/fnqkajhsx4hrbzr_wc8jozs9zua.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4 - Crear un grupo.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vaya a Compute -&gt; Pools (1), New (2), seleccione la plantilla Fedora32 (3), versión - latests (4), asigne el nombre "myPoolA- ??" (5) Todavía no tocamos los campos Número de VM y VM prearrancada, volveremos a ellos en el siguiente paso. A continuación, active la configuración avanzada (6) y continúe con la configuración de la ejecución inicial. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/m5/dj/zxm5djt-ud05hne1hyahor2nluo.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 4 - Configurar el inicio inicial.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Porque de Glance Images hemos descargado Cloud Image, necesitamos configurar la autenticación. Compruebe que "Usar Cloud-Init / Sysprep" (1) esté habilitado, abra Autenticación (2), especifique el nombre de usuario, por ejemplo, root o usuario (3). Para crear una contraseña única para el grupo, deshabilite "Usar contraseña ya configurada" (4) e ingrese su contraseña (5). Haga clic en "Aceptar": se crea el grupo, aparecieron máquinas idénticas en Compute -&gt; Virtual Machines (preste atención a su icono, es diferente de una máquina que funciona por separado). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nota sobre el nombre del grupo. Como notaron, al final es "- ??". Esto incluye la numeración "normalizada" de máquinas (complementada con ceros: 01, 02, ..., 09, 10, etc.) De lo contrario, la numeración será números naturales sin alineación (1, 2, ..., 9, 10, ...)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de continuar, regresemos a la configuración del grupo. </font><font style="vertical-align: inherit;">Observe que el campo "Número de máquinas virtuales" ha cambiado a "Aumentar el número de máquinas virtuales en el grupo". </font><font style="vertical-align: inherit;">Especificamos 31 aquí y el número de máquinas en el grupo se convierte casi instantáneamente en 32. Ahora, en el campo “VM prearrancada”, ingresamos 16; esto obligará a oVirt a mantener el número especificado de máquinas preiniciadas y listas para conectar a los usuarios. </font><font style="vertical-align: inherit;">Aquí es donde terminaremos sobre máquinas, plantillas y grupos y pasaremos a la migración. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iconos clave de VM:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unidad de rack - servidor;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitor - escritorio;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 torres: servidor de la piscina;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 monitores - escritorio de la piscina;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rebobinar (rebobinar): sin estado (la máquina restablece su estado a su estado original después del apagado; todos los cambios se revierten);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">triángulo en el monitor naranja: el cambio de configuración solicitado requiere un reinicio.</font></font></li>
</ul><br>
<a name="live-migration"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migración de VM (migración en vivo)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La migración del estado de la máquina encendida es simple: haga clic con el botón derecho en una máquina o grupo de máquinas. </font><font style="vertical-align: inherit;">El procedimiento es similar al de vMotion en vSphere. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/ne/dz/zmnedzcid6vyhsgubvv95u6cnsy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. </font><font style="vertical-align: inherit;">5 - Comienza la migración. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calcular -&gt; Máquina virtual, seleccione una o más máquinas, Migrar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8v/bp/9h/8vbp9hslgmoa_n_v3ltlmuxfknw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. </font><font style="vertical-align: inherit;">6 - El proceso de migración se puede observar en hosts (Compute -&gt; Hosts). </font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al mismo tiempo, no se mueven más de 2 autos.</font></font><br>
<a name="storage-migration"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migración de almacenamiento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero este procedimiento puede parecer inusual para el usuario de VMware vSphere, porque </font><font style="vertical-align: inherit;">Los enfoques para almacenar imágenes de disco y configuraciones de máquina en sistemas difieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para transferir el almacenamiento de VM, vaya a discos (Almacenamiento -&gt; Discos) o dominios (Almacenamiento -&gt; Dominios -&gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{Nombre de dominio}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -&gt; Discos). </font><font style="vertical-align: inherit;">Seleccione la (s) unidad (es) y presione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mover</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Eso es todo, las unidades se envían a otro almacenamiento. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: debido a la organización interna, existen restricciones para migrar el almacén y el grupo de plantillas. </font><font style="vertical-align: inherit;">La mejor forma de familiarizarse con la migración del almacenamiento es en una máquina separada, fuera del grupo. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La copia del disco se realiza en los mismos menús que la carga / descarga manual.</font></font><br>
<a name="rename"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renombrar VM y disco</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cambiar el nombre de una máquina o plantilla es muy simple: edite e ingrese un nuevo nombre. </font><font style="vertical-align: inherit;">Cambiar el nombre de un grupo requiere eliminar sus máquinas y volver a crearlo, porque </font><font style="vertical-align: inherit;">basado en él, las máquinas virtuales se generan con los nombres y la configuración correspondientes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También es posible cambiar el nombre de un disco, pero la ruta es más larga que </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e: Compute -&gt; Virtual Machine -&gt; {VM Name} -&gt; Disks -&gt; {VM Disk Alias} -&gt; Edit, Alias. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los identificadores de objetos internos están construidos en UUID. </font><font style="vertical-align: inherit;">Al cambiar el nombre, en realidad cambiamos los alias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sección trata sobre la actualización, que es actualización (menor), no actualización (mayor), cuando cambia el número de versión (este es un procedimiento más complicado y no forma parte de las tareas diarias).</font></font><br>
<a name="update-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualizar oVirt-Host (hipervisor)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las actualizaciones de host son más simples que en vSphere, el administrador de actualizaciones en oVirt está integrado orgánicamente en la plataforma y no requiere ninguna configuración. Oficial </font><font style="vertical-align: inherit;">actualización de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/we/j1/fjwej1ph06a03bqpfx2ye6ijeny.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 7 - Si hay actualizaciones, el administrador las informará con un icono de CD. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ww/vw/rn/wwvwrnz9q9hizaqo3mfndfihp_m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 8 - Antes de comenzar la actualización, debe habilitar el modo de mantenimiento (Administración -&gt; Mantenimiento), iniciará automáticamente la migración de VM a otros hosts (ver Figura 6) y se preparará para la actualización. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ol/ry/fw/olryfwdduor2j39tr47n8zlnpew.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 9 - El icono de llave inglesa indica que el host está listo para el servicio. </font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/ov/rt/ta/ovrttawkmmi6fkfp-wic5_mpy00.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 10 - Instalación -&gt; Actualización inicia el procedimiento de actualización. </font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/8z/ch/7s/8zch7sdgo_plq5suw8yevk8nzz8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. 11 - Podemos pedirle al administrador que le dé al host un comando para reiniciar después de que se complete la actualización, para que surta efecto.</font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/ze/dg/kb/zedgkbmmuxxm7kvy6qoxhh-bvza.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. </font><font style="vertical-align: inherit;">12 - Después del reinicio, sacamos el hipervisor del modo fuera de servicio (Administración -&gt; Activar). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revisamos todos los hosts y los actualizamos.</font></font><br>
<a name="update-engine"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualizar oVirt-Engine (administrador)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, esto puede ser confuso, pero la actualización del administrador se realiza utilizando la configuración del motor, con pasos adicionales, como se describe en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si es posible, haga un archivo o una instantánea de la máquina, asegúrese de que la última copia de seguridad programada se realizó correctamente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verificamos y actualizamos los paquetes de instalación:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-upgrade-check<font></font>
$ sudo update ovirt\*setup\*</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La parte principal de la actualización la realiza el programa de configuración del motor. </font><font style="vertical-align: inherit;">Ella hará una serie de preguntas de configuración, luego detendrá el servicio ovirt-engine, descargará e instalará paquetes actualizados, creará un archivo y actualizará la base de datos, aplicará la configuración actualizada e iniciará el servicio ovirt-engine.</font></font><br>
 <br>
<pre><code class="bash hljs">$ sudo engine-setup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Tras una actualización exitosa, recibiremos el mensaje:</font></font><br>
 <br>
<pre><code class="plaintext hljs">Execution of setup completed successfully</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de salida del script de configuración del motor</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs">$ sudo engine-setup</code></pre><br>
<pre><code class="plaintext hljs">[ INFO  ] Stage: Initializing<font></font>
[ INFO  ] Stage: Environment setup<font></font>
          Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf', '/etc/ovirt-engine-setup.conf.d/10-packaging.conf', '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf']<font></font>
          Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20200522232449-o97vyx.log<font></font>
          Version: otopi-1.8.2 (otopi-1.8.2-1.el7)<font></font>
[ INFO  ] Stage: Environment packages setup<font></font>
[ INFO  ] Stage: Programs detection<font></font>
[ INFO  ] Stage: Environment setup (late)<font></font>
[ INFO  ] Stage: Environment customization<font></font>
         <font></font>
          --== PRODUCT OPTIONS ==--<font></font>
         <font></font>
         <font></font>
          --== PACKAGES ==--<font></font>
         <font></font>
[ INFO  ] Checking for product updates...<font></font>
          Setup needs to install or update the following packages:<font></font>
          [updated] ovirt-engine-4.3.5.5-1.el7.noarch will be updated<font></font>
...<font></font>
          [update] ovirt-engine-wildfly-overlay-17.0.1-1.el7.noarch is an update<font></font>
          Replying "No" will abort Setup. You can pass the option "--offline" to prevent installing or updating packages.<font></font>
          Do you wish to update them now? (Yes, No) [Yes]: <font></font>
[ INFO  ] Checking for an update for Setup...<font></font>
         <font></font>
          --== NETWORK CONFIGURATION ==--<font></font>
         <font></font>
          Setup can automatically configure the firewall on this system.<font></font>
          Note: automatic configuration of the firewall may overwrite current settings.<font></font>
          NOTICE: iptables is deprecated and will be removed in future releases<font></font>
          Do you want Setup to configure the firewall? (Yes, No) [Yes]: <font></font>
[ INFO  ] firewalld will be configured as firewall manager.<font></font>
         <font></font>
          --== DATABASE CONFIGURATION ==--<font></font>
         <font></font>
          The detected DWH database size is 439 MB.<font></font>
          Setup can backup the existing database. The time and space required for the database backup depend on its size. This process takes time, and in some cases (for instance, when the size is few GBs) may take several hours to complete.<font></font>
          If you choose to not back up the database, and Setup later fails for some reason, it will not be able to restore the database and all DWH data will be lost.<font></font>
          Would you like to backup the existing database before upgrading it? (Yes, No) [Yes]: <font></font>
          Perform full vacuum on the oVirt engine history<font></font>
          database ovirt_engine_history@localhost?<font></font>
          This operation may take a while depending on this setup health and the<font></font>
          configuration of the db vacuum process.<font></font>
          See https://www.postgresql.org/docs/10/sql-vacuum.html<font></font>
          (Yes, No) [No]: <font></font>
         <font></font>
          --== OVIRT ENGINE CONFIGURATION ==--<font></font>
         <font></font>
          Perform full vacuum on the engine database engine@localhost?<font></font>
          This operation may take a while depending on this setup health and the<font></font>
          configuration of the db vacuum process.<font></font>
          See https://www.postgresql.org/docs/10/sql-vacuum.html<font></font>
          (Yes, No) [No]: <font></font>
         <font></font>
          --== STORAGE CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== PKI CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== APACHE CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== SYSTEM CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== MISC CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== END OF CONFIGURATION ==--<font></font>
         <font></font>
[ INFO  ] Stage: Setup validation<font></font>
          During execution engine service will be stopped (OK, Cancel) [OK]: <font></font>
[ INFO  ] Cleaning stale zombie tasks and commands<font></font>
         <font></font>
          --== CONFIGURATION PREVIEW ==--<font></font>
         <font></font>
          Default SAN wipe after delete           : False<font></font>
          Firewall manager                        : firewalld<font></font>
          Update Firewall                         : True<font></font>
          Host FQDN                               : ovirt.example.com<font></font>
          Upgrade packages                        : True<font></font>
          Set up Cinderlib integration            : False<font></font>
          Engine database secured connection      : False<font></font>
          Engine database user name               : engine<font></font>
          Engine database name                    : engine<font></font>
          Engine database host                    : localhost<font></font>
          Engine database port                    : 5432<font></font>
          Engine database host name validation    : False<font></font>
          Engine installation                     : True<font></font>
          PKI organization                        : JSC Open Lab<font></font>
          Set up ovirt-provider-ovn               : False<font></font>
          Configure WebSocket Proxy               : True<font></font>
          DWH installation                        : True<font></font>
          DWH database secured connection         : False<font></font>
          DWH database host                       : localhost<font></font>
          DWH database user name                  : ovirt_engine_history<font></font>
          DWH database name                       : ovirt_engine_history<font></font>
          Backup DWH database                     : True<font></font>
          DWH database port                       : 5432<font></font>
          DWH database host name validation       : False<font></font>
          Configure Image I/O Proxy               : True<font></font>
          Configure VMConsole Proxy               : True<font></font>
         <font></font>
          Please confirm installation settings (OK, Cancel) [OK]: <font></font>
[ INFO  ] Cleaning async tasks and compensations<font></font>
[ INFO  ] Unlocking existing entities<font></font>
[ INFO  ] Checking the Engine database consistency<font></font>
[ INFO  ] Stage: Transaction setup<font></font>
[ INFO  ] Stopping engine service<font></font>
[ INFO  ] Stopping ovirt-fence-kdump-listener service<font></font>
[ INFO  ] Stopping dwh service<font></font>
[ INFO  ] Stopping Image I/O Proxy service<font></font>
[ INFO  ] Stopping vmconsole-proxy service<font></font>
[ INFO  ] Stopping websocket-proxy service<font></font>
[ INFO  ] Stage: Misc configuration (early)<font></font>
[ INFO  ] Stage: Package installation<font></font>
[ INFO  ] Yum Status: Downloading Packages<font></font>
...<font></font>
[ INFO  ] Stage: Misc configuration<font></font>
[ INFO  ] Upgrading CA<font></font>
[ INFO  ] Not rewriting /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf because it was changed manually. You might want to compare it with /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf.new and edit as needed.<font></font>
[ INFO  ] Backing up database localhost:ovirt_engine_history to '/var/lib/ovirt-engine-dwh/backups/dwh-20200522233531.6LDItj.dump'.<font></font>
[ INFO  ] Creating/refreshing DWH database schema<font></font>
[ INFO  ] Configuring Image I/O Proxy<font></font>
[ INFO  ] Configuring WebSocket Proxy<font></font>
[ INFO  ] Backing up database localhost:engine to '/var/lib/ovirt-engine/backups/engine-20200522233538.LZCwME.dump'.<font></font>
[ INFO  ] Creating/refreshing Engine database schema<font></font>
[ INFO  ] Creating/refreshing Engine 'internal' domain database schema<font></font>
          Unregistering existing client registration info.<font></font>
[ INFO  ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf'<font></font>
[ INFO  ] Stage: Transaction commit<font></font>
[ INFO  ] Stage: Closing up<font></font>
[ INFO  ] Starting engine service<font></font>
[ INFO  ] Starting dwh service<font></font>
[ INFO  ] Restarting ovirt-vmconsole proxy service<font></font>
         <font></font>
          --== SUMMARY ==--<font></font>
         <font></font>
[ INFO  ] Restarting httpd<font></font>
          Web access is enabled at:<font></font>
              http://ovirt.example.com:80/ovirt-engine<font></font>
              https://ovirt.example.com:443/ovirt-engine<font></font>
          SSH fingerprint: SHA256:JvilhbwRuMjBCJEjQVPlFQgk0aLaKz7Od0WzsZtx4j4<font></font>
          Did not update /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf because it was changed manually. You might want to compare it with /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf.new and edit as needed.<font></font>
         <font></font>
          --== END OF SUMMARY ==--<font></font>
         <font></font>
[ INFO  ] Stage: Clean up<font></font>
          Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20200522232449-o97vyx.log<font></font>
[ INFO  ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20200522233608-setup.conf'<font></font>
[ INFO  ] Stage: Pre-termination<font></font>
[ INFO  ] Stage: Termination<font></font>
[ INFO  ] Execution of setup completed successfully</code></pre></div>
                    </div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualizamos el sistema operativo y otros paquetes adicionales:</font></font><br>
 <pre><code class="bash hljs">$ sudo yum update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Si es necesario (actualizando el núcleo o sus componentes) reiniciamos la máquina.</font></font></li>
</ol><br>
<a name="import-vm"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar VM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede importar desde VMware, Exportar dominio (una entidad especial para intercambiar imágenes entre el Centro de datos), Dispositivo virtual (OVA), XEN, KVM. </font><font style="vertical-align: inherit;">Todas las opciones admitidas oficialmente:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar VM desde VMware ESXi / VSPHERE se ejecuta en el host + autenticación al host donde se ejecuta ESXi / VSPHERE en</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar KVM / Xen VM desde Libvirt: el usuario especifica la URL + autenticación al host donde se ejecuta Libvirt</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar KVM / Xen VM desde una ruta determinada: el usuario especifica la ruta nfs / posix a la configuración y discos de la VM</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar VM que se exportó desde VMware: el usuario especifica la ruta nfs / posix al archivo ova</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subir KVM / Xen VM: el usuario especifica los archivos de la configuración y los discos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subir VM que se exportó desde VMware: el usuario especifica el archivo ova</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar VM desde carpeta: el usuario especifica la ruta a la carpeta que contiene VM KVM / Xen o VM exportada desde VMware</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideremos 2 opciones: importar desde vSphere y una máquina independiente con KVM. </font><font style="vertical-align: inherit;">Para iniciar la importación de material en Compute -&gt; Virtual Machines, haga clic en el botón para elementos de menú adicionales (3 puntos verticales, consulte la Fig. 13). </font><font style="vertical-align: inherit;">La máquina fuente debe estar apagada.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar máquinas desde vCenter</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el mago:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuente de datos: VMware;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proveedor externo: en Administración -&gt; Proveedores puede configurar una plantilla para operaciones frecuentes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vCenter: nombre o dirección del servidor vCenter;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESXi: de qué hipervisor recogeremos el automóvil;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceter de datos: ruta completa al clúster;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clúster: que contiene un clúster de hipervisor;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre de usuario / contraseña: nombre de usuario y contraseña para conectarse a vCenter;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verifique el certificado SSL del servidor: cuando use certificados autofirmados, deberá deshabilitar su verificación.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/g9/0i/4b/g90i4btxfdhaz_ji-bntbutlaei.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higo. </font><font style="vertical-align: inherit;">13 - Importar máquinas virtuales de VMware vSphere.</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar máquinas de KVM</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Detalles sobre la importación desde KVM en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, debe habilitar la conexión al KVM desde el exterior, si esto no se ha configurado antes.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permiso para exportar máquinas a KVM</font></font></b>
                        <div class="spoiler_text">        ,      .       ! ,      ,        ,       .     , .,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">ArchLinux</a>.<br>
<br>
 ,   libvirtd<br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/sysconfig/libvirtd</code></pre><br>
 <br>
<br>
<pre><code class="plaintext hljs">LIBVIRTD_ARGS="--listen"</code></pre><br>
      <br>
<br>
<pre><code class="bash hljs">$ sudo cp /etc/libvirt/libvirtd.conf /etc/libvirt/libvirtd.conf.`date +%F`<font></font>
$ sudo vim /etc/libvirt/libvirtd.conf</code></pre><br>
  :<br>
<br>
<pre><code class="plaintext hljs">listen_tls = 0<font></font>
listen_tcp = 1<font></font>
listen_addr = "0.0.0.0"<font></font>
auth_tcp = "none"</code></pre><br>
     <br>
<br>
<pre><code class="plaintext hljs">log_outputs="3:syslog:libvirtd"</code></pre><br>
    libvirtd.    ,    libvirtd &gt; 0.6 (  libvirtd --version),   .<br>
<br>
<pre><code class="bash hljs">$ sudo service libvirtd restart</code></pre><br>
     tcp:16509.<br>
<br>
 CentOS 7     (  permanent):<br>
<br>
<pre><code class="bash hljs">$ sudo firewall-cmd --add-rich-rule=<span class="hljs-string">'rule family="ipv4" source address="172.17.71.32/30" port port="16509" protocol="tcp" accept'</span></code></pre><br>
 :<br>
<br>
<pre><code class="bash hljs">$ virsh -r -c <span class="hljs-string">'qemu+tcp://mgmt@kvm46.example.com/system'</span> list --all</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, la importación en sí es muy simple: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calcular -&gt; Máquinas virtuales -&gt;: (menú adicional, 3 puntos verticales) -&gt; Importar -&gt; Fuente (KVM a través de libvirt) -&gt; URI (qemu + tcp: //kvm46.example.com / system) -&gt; Requerir autenticación (Desactivar) -&gt; Cargar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Marcamos las máquinas necesarias, seleccionamos la política de asignación (Política de asignación). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Política de asignación: se prefiere la asignación previa para volúmenes de almacenamiento con detección cero de hardware, para volúmenes con alta E / S, volúmenes con alta ocupación, etc. En cualquier caso, miramos la situación y la analizamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La marca "Clone" marca, pero no copia el automóvil. Por ejemplo, se asignará una nueva dirección MAC para la interfaz de red.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la pestaña General, es importante especificar el tipo de sistema operativo correcto, y en la pestaña Interfaces de red, puede especificar la red deseada. </font><font style="vertical-align: inherit;">A continuación, "importar" y, dependiendo de la velocidad del equipo, obtenemos la máquina importada. </font><font style="vertical-align: inherit;">Después de importar (o antes) no olvide instalar ovirt-guest-agent.</font></font><br>
<br>
<a name="task-mgmt"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Administración de tareas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando las tareas se congelan, comienzan los "bailes" difíciles, algunos de los cuales trataré de mencionar. </font><font style="vertical-align: inherit;">Con un comportamiento regular, uno puede observarlos en la Fig. </font><font style="vertical-align: inherit;">2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la tarea se realiza más o menos normalmente, las herramientas regulares son suficientes. </font><font style="vertical-align: inherit;">Con pimers y fotos puedes ver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las tareas se realizan en oVirt-host.</font></font><br>
<br>
<pre><code class="plaintext hljs">[mgmt@ovirt-nodeNN] $ sudo vdsm-client Host getAllTasksInfo<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task getStatus taskID=&lt;TASKID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task stop taskID=&lt;TaskID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task clear taskID=&lt;TaskID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Host getAllTasksInfo</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, vdsm-client puede intentar revertir la tarea, todos los métodos admitidos:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo vdsm-client Task -h</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Métodos de tarea: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 método [arg = valor] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 getStatus Obtener información del estado de la tarea. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 revierta una tarea para restaurar el estado anterior del sistema. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 clear Descarta información sobre una tarea finalizada. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 getInfo Obtener información sobre una tarea. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 stop Detiene una tarea actualmente en ejecución. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, los movimientos se vuelven más complicados si la tarea no se puede detener utilizando métodos estándar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oficialmente, la herramienta Taskcleaner se utiliza para esto:</font></font><br>
<br>
<pre><code class="bash hljs">[mgmt@ovirt-engine] $ sudo /usr/share/ovirt-engine/setup/dbutils/taskcleaner.sh --<span class="hljs-built_in">help</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para casos aún más severos, se requiere la edición directa de la base de datos. </font><font style="vertical-align: inherit;">Este método debe recurrirse solo como último recurso, con archivos nuevos de oVirt y las máquinas afectadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, conectamos la colección de software</font></font><br>
<br>
<pre><code class="bash hljs">[mgmt@ovirt-engine] $ sudo scl <span class="hljs-built_in">enable</span> rh-postgresql10 <span class="hljs-string">"psql -d engine -U postgres"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, conéctese a la base de datos</font></font><br>
<br>
<pre><code class="plaintext hljs">su postgres<font></font>
psql -d engine -U postgres<font></font>
select * from job order by start_time desc;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y eliminación directa: ejecutar el procedimiento DeleteJob para la tarea problemática:</font></font><br>
<br>
<pre><code class="plaintext hljs">select DeleteJob('UUID_HERE');</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo:</font></font><br>
<br>
<pre><code class="plaintext hljs">select DeleteJob('ed0127c7-b052-4ec2-a67c-8b3a65d55e19');</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Eso es todo por hoy, y espero que nunca necesites editar manualmente una base de datos!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es503172/index.html">C #: Introducción de generadores de código fuente</a></li>
<li><a href="../es503176/index.html">Implementación de un algoritmo para determinar el ancho de un objeto utilizando un telémetro ultrasónico y codificadores en lenguaje RobotC</a></li>
<li><a href="../es503178/index.html">Apple Mac y dispositivos sofisticados. LTO, SAS, Fibre Channel, eSATA</a></li>
<li><a href="../es503182/index.html">"Soy el primer desarrollador ciego de mi empresa". Parte 1</a></li>
<li><a href="../es503184/index.html">Te invitamos a la reunión en línea Zabbix</a></li>
<li><a href="../es503194/index.html">ISA no perdona errores</a></li>
<li><a href="../es503196/index.html">450 cursos gratuitos de la Ivy League</a></li>
<li><a href="../es503200/index.html">YOLOv4: la red neuronal en tiempo real más precisa en el conjunto de datos COCO de Microsoft</a></li>
<li><a href="../es503204/index.html">Cómo flashear Xiaomi Redmi 4 Prime / Pro / Premium en Android 10</a></li>
<li><a href="../es503208/index.html">¿Cuándo es el mejor momento para invertir?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>