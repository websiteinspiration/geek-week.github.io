<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìò üå∑ üéø Visualiza√ß√£o de cobertura de teste autom√°tico üìÇ ü§û ‚öìÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os relat√≥rios de cobertura modernos s√£o, em alguns casos, bastante in√∫teis, e os m√©todos para medi-los s√£o principalmente adequados apenas para desenv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Visualiza√ß√£o de cobertura de teste autom√°tico</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/491844/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os relat√≥rios de cobertura modernos s√£o, em alguns casos, bastante in√∫teis, e os m√©todos para medi-los s√£o principalmente adequados apenas para desenvolvedores. </font><font style="vertical-align: inherit;">Voc√™ sempre pode descobrir a porcentagem de cobertura ou visualizar o c√≥digo que n√£o foi usado durante os testes, mas e se voc√™ deseja visibilidade, simplicidade e automa√ß√£o? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_r/ms/rr/_rmsrr9pfqqgiu7vvskxe93g2po.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sob o corte - v√≠deo e transcri√ß√£o de um relat√≥rio de Artem Eroshenko da Qameta Software da confer√™ncia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heisenbug</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ele apresentou v√°rias solu√ß√µes simples e elegantes desenvolvidas que ajudam a equipe da Yandex.Verticals a avaliar a cobertura dos testes escritos por engenheiros de automa√ß√£o de testes. </font><font style="vertical-align: inherit;">O Artem lhe dir√° como descobrir rapidamente o que √© coberto, como coberto, quais testes foram aprovados e ver instantaneamente relat√≥rios visuais.</font></font><br>
<br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/N2k4LKPWuSw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu nome √© Artyom Eroshenko </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eroshenkoam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Fa√ßo automa√ß√£o de testes h√° mais de 10 anos. </font><font style="vertical-align: inherit;">Eu era gerente de automa√ß√£o de testes, gerente de equipe de desenvolvimento de ferramentas, desenvolvedor de ferramentas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No momento em que sou consultor na √°rea de automa√ß√£o de testes, trabalho com v√°rias empresas com as quais constru√≠mos processos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m sou desenvolvedor e gerente secreto do Allure Report. </font><font style="vertical-align: inherit;">Recentemente, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corrigimos uma coisa legal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : agora no JUnit 5 existem equipamentos.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atlas Framework</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu desenvolvimento √© o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atlas Framework</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Se algu√©m come√ßou a automatizar em 2012, quando os drivers da Web Java estavam apenas come√ßando, naquele momento eu criei uma biblioteca de c√≥digo aberto chamada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML Elements</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Html Elements tem sua continua√ß√£o e repensagem na biblioteca Atlas, que √© constru√≠da sobre interfaces: n√£o h√° classes como tais, nem campos, uma biblioteca muito conveniente, leve e facilmente extens√≠vel. Se voc√™ deseja entend√™-lo, pode ler o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou ver o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">relat√≥rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu relat√≥rio √© dedicado ao problema da automa√ß√£o de testes e principalmente aos revestimentos. Como pano de fundo, gostaria de me referir a como os processos de teste s√£o organizados no Yandex.Verticals.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como a automa√ß√£o funciona nas verticais?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem apenas quatro pessoas na equipe de automa√ß√£o de testes da Yandex.Verticals que automatizam quatro servi√ßos: Yandex.Avto, Trabalho, Im√≥veis e Pe√ßas. </font><font style="vertical-align: inherit;">Ou seja, esta √© uma pequena equipe de montadoras que faz muito. </font><font style="vertical-align: inherit;">Automatizamos a API, interface da Web, aplicativos m√≥veis e assim por diante. </font><font style="vertical-align: inherit;">No total, temos cerca de 15,5 mil testes realizados em diferentes n√≠veis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A estabilidade dos testes na equipe √© de cerca de 97%, embora alguns de meus colegas digam cerca de 99%. Essa alta estabilidade √© alcan√ßada precisamente gra√ßas a testes curtos em tecnologias muito nativas. Como regra, nossos testes levam cerca de 15 minutos, o que √© muito amplo, e os executamos em aproximadamente 800 threads. Ou seja, temos 800 navegadores come√ßando ao mesmo tempo - um teste de estresse dos nossos testes. Como ferro, usamos Selenoid (Aerokube). Voc√™ pode aprender mais sobre a automa√ß√£o de testes no Yandex.Verticals assistindo ao meu relat√≥rio de 2017, que ainda √© relevante.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/gwXpYB6ZayE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra caracter√≠stica da nossa equipe √© que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">automatizamos tudo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , incluindo testadores manuais, que d√£o uma grande contribui√ß√£o ao desenvolvimento da automa√ß√£o de testes. Para eles, organizamos escolas, ensinamos a eles testes, ensinamos como escrever testes para a API, a interface da Web e, muitas vezes, ajudam a acompanhar os testes. Assim, os respons√°veis ‚Äã‚Äãpela libera√ß√£o podem corrigir o teste imediatamente, se necess√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na Verticals, os desenvolvedores de testes escrevem testes e est√£o t√£o interessados ‚Äã‚Äãno desenvolvimento de testes que competem conosco. Voc√™ pode aprender mais sobre esse processo no relat√≥rio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"O ciclo completo de teste dos aplicativos React"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, onde Alexei Androsov e Natalya Stus falam sobre como eles escrevem testes de unidade no Puppeteer em paralelo com nossos testes de ponta a ponta em Java. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os engenheiros de automa√ß√£o de testes tamb√©m escrevem testes em nossa equipe. </font><font style="vertical-align: inherit;">Mas frequentemente estamos desenvolvendo novas abordagens para otimiz√°-las. </font><font style="vertical-align: inherit;">Por exemplo, implementamos testes de captura de tela, testes atrav√©s do moki, redu√ß√£o de testes. </font><font style="vertical-align: inherit;">Em geral, nossa √°rea √© principalmente desenvolvedora de software em teste (SDET), abordamos mais como escrever testes e a base de testes √© parcialmente preenchida por n√≥s e √© suportada por testadores manuais.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os desenvolvedores tamb√©m nos ajudam, e isso √© legal.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema que surge dentro desses processos √© que nem sempre entendemos o que j√° est√° coberto e o que n√£o est√°. </font><font style="vertical-align: inherit;">Analisando 15 mil testes, nem sempre √© claro o que exatamente verificamos. </font><font style="vertical-align: inherit;">Isso √© especialmente verdade no contexto da comunica√ß√£o com os gerentes, que, √© claro, n√£o testam, mas monitoram e fazem perguntas. </font><font style="vertical-align: inherit;">Em particular, se surgir a quest√£o de saber se um bot√£o espec√≠fico foi testado na interface ou no fluxo, √© dif√≠cil responder, porque voc√™ precisa acessar o c√≥digo de teste e examinar essas informa√ß√µes.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que √© testado e o que n√£o √©?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ tem muitos testes em idiomas diferentes e √© escrito por pessoas com diferentes graus de treinamento, mais cedo ou mais tarde surge a pergunta: esses testes n√£o s√£o interceptados? </font><font style="vertical-align: inherit;">No contexto desse problema, a quest√£o da cobertura est√° se tornando particularmente relevante. </font><font style="vertical-align: inherit;">Vou descrever tr√™s t√≥picos principais:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maneiras de medir efetivamente a cobertura.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobertura para testes de API.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobertura para testes na web.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de tudo, vamos determinar que existem duas maneiras de cobrir: cobrindo requisitos e cobrindo o c√≥digo do produto.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como a cobertura dos requisitos √© medida</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere a cobertura dos requisitos usando o auto.ru como exemplo. No lugar do testador auto.ru, eu faria o seguinte. Em primeiro lugar, eu pesquisaria no Google e encontraria imediatamente uma tabela de requisitos especiais. Essa √© a base da cobertura dos requisitos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nf/v6/fh/nfv6fhqm8ukolt_4bv6bxyycohm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta tabela, os nomes dos requisitos est√£o escritos √† esquerda. Nesse caso: conta, an√∫ncios, verifica√ß√£o e pagamento, ou seja, verifica√ß√£o do an√∫ncio. Em geral, esta √© a cobertura. Os detalhes da parte esquerda dependem do n√≠vel do testador. Por exemplo, os engenheiros do Google t√™m 49 tipos de revestimentos testados em diferentes n√≠veis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O lado direito da tabela s√£o os atributos dos requisitos. Podemos usar qualquer coisa na forma de atributos, por exemplo: prioridade, cobertura e estado. Essa pode ser a data do √∫ltimo lan√ßamento.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ox/3a/kj/ox3akjf5fcmwxlmt_utf3uhnsas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, alguns dados aparecem na tabela. Voc√™ pode usar ferramentas profissionais para manter uma tabela de requisitos, por exemplo, TestRail. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° informa√ß√µes sobre a √°rvore √† direita: as pastas indicam quais requisitos temos, como podem ser atendidos. Existem casos de teste e assim por diante. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wh/he/aj/whheajlxedwdqlmspx_iofg4wai.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas verticais, esse processo se parece com o seguinte: um testador manual descreve os requisitos e os casos de teste, depois os passa para a automa√ß√£o de teste, e a ferramenta automatizada grava o c√≥digo para esses testes. Al√©m disso, anteriormente recebemos casos de teste detalhados nos quais o testador manual descreveu toda a estrutura. Ent√£o algu√©m fez um commit no github e o teste come√ßou a ser ben√©fico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quais s√£o os pr√≥s e os contras dessa abordagem? A vantagem √© que essa abordagem responde √†s nossas perguntas. Se o gerente perguntar o que abordamos, vou abrir o tablet e mostrar quais recursos s√£o abordados. Por outro lado, esses requisitos devem sempre ser atualizados e se tornam obsoletos muito rapidamente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ tem 15 mil testes, olhar para o TestRail √© como olhar para uma estrela no espa√ßo: ela explodiu por um longo tempo e a luz chegou at√© voc√™ agora. Voc√™ olha para o caso de teste atual e ele j√° est√° desatualizado h√° muito tempo e irrevogavelmente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este problema √© dif√≠cil de resolver. </font><font style="vertical-align: inherit;">Para n√≥s, esses geralmente s√£o dois mundos diferentes: existe um mundo de automa√ß√£o que gira de acordo com suas pr√≥prias leis, onde todo teste que falha √© imediatamente corrigido e h√° um mundo de testes manuais e cart√µes de requisitos. </font><font style="vertical-align: inherit;">A parede entre eles √© impenetr√°vel, a menos que voc√™ use o Allure Server. </font><font style="vertical-align: inherit;">Agora apenas resolvemos esse problema para eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O terceiro ponto dos "pr√≥s e contras" √© a necessidade de trabalho manual. </font><font style="vertical-align: inherit;">Em um novo projeto, voc√™ precisa recriar um mapa de requisitos, gravar todos os casos de teste e assim por diante. </font><font style="vertical-align: inherit;">Sempre requer trabalho manual e √© realmente muito triste.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como a cobertura do c√≥digo √© medida</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma alternativa para essa abordagem √© a cobertura do c√≥digo. </font><font style="vertical-align: inherit;">Esta parece ser a solu√ß√£o para o nosso problema. </font><font style="vertical-align: inherit;">√â assim que a cobertura do c√≥digo do produto √© exibida: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/-c/oe/5o-coev_livsv-tudln9ztpau_e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
reflete a cobertura do pacote, ou melhor, uma pequena parte do que realmente √© geralmente no produto. </font><font style="vertical-align: inherit;">O pacote est√° escrito √† esquerda, como os recursos foram escritos anteriormente. </font><font style="vertical-align: inherit;">Ou seja, nosso revestimento est√° finalmente ligado a algumas coisas tang√≠veis, neste caso - Pacote. </font><font style="vertical-align: inherit;">Os atributos est√£o escritos √† direita: cobertura por classe, cobertura por m√©todos, cobertura por blocos de c√≥digo e cobertura por linhas de c√≥digo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O processo de coleta da cobertura √© entender qual linha de c√≥digo o teste passou e quais n√£o foram. </font><font style="vertical-align: inherit;">Essa √© uma tarefa bastante simples, mas recentemente muito relevante.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primeira men√ß√£o √† cobertura de c√≥digo foi em 1963, mas um progresso s√©rio nessa dire√ß√£o aparece apenas agora.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, temos um teste que interage com o sistema. N√£o importa como ele interage com ela: atrav√©s do front-end, API ou rasteja diretamente para o back-end - apenas assumiremos que o temos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A instrumenta√ß√£o deve ser feita. Este √© um processo que permite entender quais linhas de c√≥digo foram verificadas e quais n√£o foram. Voc√™ n√£o precisa estud√°-lo em detalhes, basta procurar o nome da sua estrutura, na qual voc√™ escreve, digamos, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , depois </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrumenta√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cobertura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - com essas tr√™s palavras, voc√™ entender√° como isso √© feito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando seus testes verificam qual linha de c√≥digo o resultado do teste e quais n√£o foram atingidos, eles salvam arquivos com informa√ß√µes sobre quais linhas s√£o cobertas. Com base nessas informa√ß√µes, voc√™ tem dados.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quais s√£o os pr√≥s e os contras da cobertura de c√≥digo?</font></font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobertura de c√≥digo que eu chamaria imediatamente de menos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Voc√™ n√£o vir√° ao gerente, n√£o mostrar√° esta placa e n√£o dir√° que todo mundo automatizou, porque esses dados n√£o podem ser lidos, ele solicitar√° que voc√™ retorne dados claros que possam ser vistos e compreendidos rapidamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Relat√≥rio de cobertura de c√≥digo mais pr√≥ximo do desenvolvimento. </font><font style="vertical-align: inherit;">Ele n√£o pode ser usado como uma abordagem normal para fornecer todos os dados a uma equipe se queremos que toda a equipe possa assistir. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/kr/bw/jmkrbwezcyzyx90-qxgm4jrrlbm.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A vantagem dessa abordagem √© que ela sempre fornece dados relevantes. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ n√£o precisa fazer muito trabalho, tudo √© automatizado para voc√™. </font><font style="vertical-align: inherit;">Basta conectar a biblioteca, suas capas come√ßam a decolar - e √© muito legal.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra vantagem dessa abordagem √© que ela requer apenas personaliza√ß√£o. N√£o h√° nada de especial para fazer l√° - basta vir com uma instru√ß√£o espec√≠fica, ajustar a cobertura e ela funciona automaticamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A cobertura dos requisitos revela requisitos n√£o cumpridos, mas n√£o permite avaliar a integridade em rela√ß√£o ao c√≥digo. Por exemplo, voc√™ come√ßou a escrever um novo recurso "autoriza√ß√£o", basta inserir o "recurso de autoriza√ß√£o" e come√ßar a lan√ßar casos de teste nele. Voc√™ n√£o pode ver imediatamente essa cobertura no c√≥digo, mesmo se voc√™ escrever alguma nova classe, ainda n√£o haver√° informa√ß√µes - h√° uma lacuna. Por outro lado, isso √© um requisito de autoriza√ß√£o, mesmo quando j√° estiver implementado, quando voc√™ contar a cobertura, essa parte n√£o pode ser relevante, deve ser atualizada manualmente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, tivemos uma ideia: e se tirarmos o melhor de todos? </font><font style="vertical-align: inherit;">Para que a cobertura respondesse √†s nossas perguntas, era sempre relevante e exigia apenas personaliza√ß√£o. </font><font style="vertical-align: inherit;">S√≥ precisamos olhar para o revestimento de um √¢ngulo diferente, ou seja, usar outro sistema como base do revestimento. </font><font style="vertical-align: inherit;">Ao mesmo tempo, verifique se ele √© coletado completamente automaticamente e traz v√°rios benef√≠cios. </font><font style="vertical-align: inherit;">E, para isso, abordaremos os testes da API.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de cobertura de teste</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qual √© a base da cobertura? </font><font style="vertical-align: inherit;">Para fazer isso, usamos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - esta √© a API de documenta√ß√£o. </font><font style="vertical-align: inherit;">Agora n√£o consigo imaginar meu trabalho sem o Swagger, √© uma ferramenta que uso constantemente para testar. </font><font style="vertical-align: inherit;">Se voc√™ n√£o usa o Swagger, eu recomendo visitar o site e se familiarizar. </font><font style="vertical-align: inherit;">L√° voc√™ ver√° imediatamente um exemplo de uso muito intuitivo e compreens√≠vel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, o Swagger √© a documenta√ß√£o gerada pelo seu servi√ßo. </font><font style="vertical-align: inherit;">Cont√©m:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de pedidos.</font></font><br>
 <img src="https://habrastorage.org/webt/in/nc/pe/inncpekmy4a699gk-eh0o4be_jy.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√¢metros de solicita√ß√£o: n√£o h√° necessidade de puxar o desenvolvedor e perguntar quais s√£o os par√¢metros.</font></font><br>
<img src="https://habrastorage.org/webt/yz/48/yg/yz48yg1kw8nnqdb3wn7fdcq0g1o.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digos de resposta</font></font><br>
<img src="https://habrastorage.org/webt/zz/y2/ku/zzy2kucjpovwr2xxue4zvct543o.png"><br>
</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O princ√≠pio de opera√ß√£o do Swagger √© gera√ß√£o. N√£o importa qual estrutura voc√™ usa. Digamos Spring ou Go Server, voc√™ usa o componente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger </font></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codegen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e gera </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> . Esta √© uma especifica√ß√£o, com base na qual uma linda interface do usu√°rio √© desenhada. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â importante para n√≥s que o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seja </font><i><font style="vertical-align: inherit;">usado</font></i><font style="vertical-align: inherit;"> : seu suporte est√° dispon√≠vel para todos os idiomas amplamente usados. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos a especifica√ß√£o Open API </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . √â assim: As </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jn/hl/km/jnhlkmmo1pd-7vxllopdvjhbdr0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
solicita√ß√µes s√£o mais ou menos assim: resumo, descri√ß√£o, c√≥digos de resposta e um "identificador" (caminho: / users). Tamb√©m h√° informa√ß√µes sobre o par√¢metro de consulta: tudo est√° estruturado, existe um par√¢metro de ID do usu√°rio, est√° no caminho em que √© necess√°rio, como descri√ß√£o e tipo - n√∫mero inteiro.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3a/bs/7h/3abs7hrvpakohvaejel8utqdtc4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem c√≥digos de resposta, eles tamb√©m est√£o documentados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/so/3s/yq/so3syqf7mawlmlqomizvoqdj1-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E a id√©ia veio √† nossa mente: temos um servi√ßo que o Swagger gera e quer√≠amos manter o mesmo Swagger nos testes, para poder compar√°-los mais tarde. </font><font style="vertical-align: inherit;">Em outras palavras, quando os testes s√£o executados, eles geram exatamente o mesmo Swagger, jogamos no Swagger Diff, entendemos quais par√¢metros, manipuladores, c√≥digos de status verificamos e assim por diante. </font><font style="vertical-align: inherit;">√â a mesma instrumenta√ß√£o, a mesma cobertura, apenas finalmente nos requisitos que entendemos.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas e se voc√™ criar um diff?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s nos voltamos para a biblioteca de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diferen√ßas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Swagger</font></a><font style="vertical-align: inherit;"> , que √© o que precisamos para isso. Seu princ√≠pio de opera√ß√£o √© mais ou menos assim: voc√™ tem a vers√£o 1.0, com a API 1.1, ambos geram </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , depois os lan√ßa no diff Swagger e v√™ o resultado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado √© mais ou menos assim: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qk/qn/ls/qkqnlsxnssknuv8p8t9cg5ckryu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voc√™ tem informa√ß√µes de que h√°, por exemplo, uma nova caneta. Voc√™ tamb√©m tem informa√ß√µes sobre o que √© exclu√≠do. Isso significa que √© hora de remover os testes, eles n√£o s√£o mais relevantes. Com o aparecimento de informa√ß√µes sobre mudan√ßas, os par√¢metros tamb√©m mudam, portanto, √© √≥bvio que seus testes cair√£o nesse momento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gostamos dessa ideia e come√ßamos a implementar. Como decidimos fazer: temos um Swagger de "refer√™ncia" que gera a partir do c√≥digo do desenvolvedor, tamb√©m temos testes de API que geram o nosso Swagger e diferimos entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, executamos testes para o servi√ßo: temos a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garantia de Garantia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que acessa os servi√ßos na API. E n√≥s a instrumentamos. Existe uma abordagem: voc√™ pode criar filtros, a solicita√ß√£o vai para ele - e salva as informa√ß√µes sobre a solicita√ß√£o na forma de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diretamente para si. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° todo o c√≥digo que precis√°vamos escrever, havia 69-70 linhas - este √© um c√≥digo muito simples.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6_/m6/ck/6_m6cka7jfewruree9d9561tayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O engra√ßado √© que usamos o cliente nativo do Swagger, que foi escrito ali. </font><font style="vertical-align: inherit;">Nem precis√°vamos criar nossos bin√°rios, apenas preenchemos a especifica√ß√£o Swagger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/rl/fw/lrrlfwuiqrgykrprpjnxr1fcfmq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos muitos arquivos .json com os quais tivemos que fazer algo - eles escreveram um agregador Swagger. </font><font style="vertical-align: inherit;">Este √© um programa muito simples que funciona de acordo com o seguinte princ√≠pio:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ela atende a uma nova solicita√ß√£o, se n√£o estiver em nosso banco de dados, acrescenta ela.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ela atende √† solicita√ß√£o, ele tem um novo par√¢metro - acrescenta.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A mesma coisa com os c√≥digos de status.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, obtemos informa√ß√µes sobre todas as canetas, par√¢metros e c√≥digos de status que usamos. </font><font style="vertical-align: inherit;">Al√©m disso, aqui voc√™ pode coletar dados com os quais essas solicita√ß√µes foram executadas: nome de usu√°rio, logins etc. </font><font style="vertical-align: inherit;">Ainda n√£o descobrimos como usar essas informa√ß√µes, porque tudo √© gerado conosco, mas voc√™ pode entender com quais par√¢metros determinados pedidos foram chamados.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ent√£o, est√°vamos quase a um passo da vit√≥ria, mas, como resultado, recusamos o Swagger Diff, porque funciona em um conceito um pouco diferente - no conceito de diferencial.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger Diff diz o que mudou, n√£o o que √© coberto, mas quer√≠amos mostrar o resultado da cobertura. </font><font style="vertical-align: inherit;">H√° muitos dados extras, ele armazena informa√ß√µes sobre descri√ß√£o, resumo e outras meta-informa√ß√µes, mas n√£o temos essas informa√ß√µes. </font><font style="vertical-align: inherit;">E quando fazemos Diff, eles nos escrevem que "esta caneta n√£o tem uma descri√ß√£o", mas n√£o existia.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relat√≥rio pr√≥prio</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fizemos nossa implementa√ß√£o e funciona da seguinte maneira: temos muitos arquivos provenientes de autotestes, temos a API do servi√ßo Swagger e geramos um relat√≥rio baseado nela. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um relat√≥rio simples √© assim: acima, voc√™ pode ver informa√ß√µes sobre quantas canetas (349) no total, informa√ß√µes sobre as quais s√£o totalmente cobertas (cada par√¢metro, c√≥digo de status etc.). Voc√™ pode escolher seus pr√≥prios crit√©rios, por exemplo, abranger v√°rios par√¢metros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m h√° informa√ß√µes aqui de que 40% s√£o parcialmente cobertos - isso significa que j√° temos testes para essas canetas, mas algumas coisas ainda n√£o foram cobertas e voc√™ precisa procurar com aten√ß√£o l√°. A cobertura vazia tamb√©m √© refletida. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/og/p5/pcogp5jnc8m88l8fylt2p2uc0eq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos percorrer as guias. Esta √© uma </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cobertura completa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vemos todos os par√¢metros que temos, que s√£o cobertos, c√≥digos de status e assim por diante.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/gl/2q/9ogl2q9tf_xb1xw9dl9j8sxsku0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o temos uma </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cobertura parcial</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vemos que no identificador social de login um par√¢metro √© coberto e dois n√£o. </font><font style="vertical-align: inherit;">E podemos expandi-lo e ver quais par√¢metros e c√≥digos de status espec√≠ficos s√£o abordados. </font><font style="vertical-align: inherit;">E, neste momento, torna-se muito conveniente para o desenvolvedor: as vers√µes do aplicativo rolam muito rapidamente e muitas vezes podemos esquecer alguns par√¢metros. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/pf/sc/fopfscyojnuzokszhkw8ntgrqio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa ferramenta permite que voc√™ esteja sempre em boa forma e entenda o que abordamos parcialmente, qual par√¢metro √© esquecido e assim por diante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Last - Gl√≥ria da vergonha, ainda temos que faz√™-lo. </font><font style="vertical-align: inherit;">Quando voc√™ olha para esta p√°gina e v√™ Vazio l√°: 172 - suas m√£os caem, e ent√£o voc√™ come√ßa a ensinar aos testadores de m√£os como escrever autotestes, esse √© o ponto.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p8/2k/o5/p82ko5nzine_u6odc8dtl9bho5s.png"><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que benef√≠cio tivemos quando lan√ßamos nossa solu√ß√£o?</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, come√ßamos a escrever testes com mais significado. </font><font style="vertical-align: inherit;">Entendemos que estamos testando e, ao mesmo tempo, temos duas estrat√©gias. </font><font style="vertical-align: inherit;">Primeiro, automatizamos algo que n√£o existe quando os testadores manuais chegam e dizemos que, para um servi√ßo espec√≠fico, √© fundamental que uma solicita√ß√£o seja executada pelo menos uma vez e abrimos o Empty. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda op√ß√£o - n√£o esquecemos as caudas. </font><font style="vertical-align: inherit;">Como eu disse, as APIs ser√£o lan√ßadas muito rapidamente, pode haver alguns lan√ßamentos duas ou tr√™s vezes por dia. </font><font style="vertical-align: inherit;">Alguns par√¢metros s√£o constantemente adicionados: em cinco mil testes, √© imposs√≠vel entender o que √© verificado e o que n√£o √©. </font><font style="vertical-align: inherit;">Portanto, esta √© a √∫nica maneira de escolher conscientemente uma estrat√©gia de teste e, pelo menos, fazer alguma coisa.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O terceiro lucro √© um processo totalmente autom√°tico. </font><font style="vertical-align: inherit;">Emprestamos a abordagem, e a automa√ß√£o funciona: n√£o precisamos fazer nada, tudo √© coletado automaticamente.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id√©ias de desenvolvimento</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, eu realmente n√£o quero manter o segundo relat√≥rio, mas quero integr√°-lo √† interface do usu√°rio do Swagger. </font><font style="vertical-align: inherit;">Este √© o meu "relat√≥rio Photoshop Edition" favorito: um chip que tenho desenvolvido ultimamente. </font><font style="vertical-align: inherit;">Aqui, imediatamente, h√° informa√ß√µes sobre os par√¢metros que testamos e quais n√£o s√£o. </font><font style="vertical-align: inherit;">E seria legal fornecer essas informa√ß√µes imediatamente com o Swagger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/ll/n8/v6lln82kyue5errknkoxj9mkq-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, o front-end pode ver por si mesmo quais par√¢metros n√£o foram testados, priorizar e decidir que, embora n√£o precisem ser levados ao desenvolvimento, n√£o se sabe o quanto eles funcionam. </font><font style="vertical-align: inherit;">Ou o back-end escreve uma caneta nova, v√™ o vermelho e chuta os testadores para que tudo fique verde. </font><font style="vertical-align: inherit;">Isso √© muito f√°cil de fazer, estamos indo nessa dire√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda id√©ia √© apoiar outras ferramentas. </font><font style="vertical-align: inherit;">Na verdade, n√£o quero escrever filtros para implementa√ß√µes espec√≠ficas: para Java, Python e assim por diante. </font><font style="vertical-align: inherit;">Existe uma id√©ia para criar um tipo de proxy que repasse todas as solicita√ß√µes por si mesmo e salve as informa√ß√µes do Swagger para si. </font><font style="vertical-align: inherit;">Assim, teremos uma biblioteca universal que pode ser usada, independentemente do idioma que voc√™ possui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A terceira ideia de desenvolvimento √© a integra√ß√£o com o Allure Report. </font><font style="vertical-align: inherit;">Eu vejo assim: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ym/b3/ad/ymb3adazpdly9uhljv8jjqpyg04.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como regra, quando o par√¢metro √© "testado", isso nem sempre nos diz como √© testado. </font><font style="vertical-align: inherit;">E quero apontar para este par√¢metro e ver as etapas espec√≠ficas do teste.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cobertura de Testes na Web</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pr√≥ximo ponto sobre o qual quero falar √© a cobertura para testes na Web. A cobertura √© baseada no site que voc√™ est√° testando, escrevendo testes no site. Mas voc√™ pode torn√°-lo uma interface da web para sua cobertura. Por exemplo, ficar√° assim: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/1k/tg/vq1ktgatdwq9v-v-fpzz1444hf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ olhar para o seu site - este √© um conjunto de elementos e maneiras de interagir com eles. Esta √© uma descri√ß√£o completa: "um elemento √© uma maneira de interagir com ele". Voc√™ pode clicar no link, copiar o texto, inserir algo na entrada. O site como um todo consiste em elementos e formas de intera√ß√£o: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/07/z-/f307z-lt44swcsgdas_vsspvyrk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como os testes s√£o executados: eles come√ßam em algum momento e, por exemplo, preenchem algum formul√°rio, digamos, um formul√°rio de autoriza√ß√£o, depois se espalham para outras p√°ginas, depois para outro e para o final .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o gerente perguntar se um bot√£o espec√≠fico est√° sendo testado, mas √© dif√≠cil responder a essa pergunta: voc√™ precisa abrir o c√≥digo ou acessar o TestRail, desejo ver esta solu√ß√£o para o problema: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hh/7q/mv/hh7qmvkk8gefu94bigbkofhdgak.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quero apontar para esse elemento e ver todos os testes que temos neste item. Se houvesse esse instrumento, eu ficaria feliz. Quando come√ßamos a pensar nessa id√©ia, vimos primeiro o Yandex.Metrica. Na verdade, eles t√™m aproximadamente a mesma funcionalidade que um mapa de links. Uma boa ideia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ponto principal √© que eles s√£o destacados exatamente como se j√° tivessem as informa√ß√µes de que precisamos. Eles dizem: ‚ÄúAqui passamos por este link 14 vezes‚Äù, o que na tradu√ß√£o para a linguagem de teste significa: ‚Äú14 testes foram testados neste link‚Äù e de alguma forma passaram por ele. Mas esse link vermelho levou at√© 120 testes, que testes interessantes! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode desenhar todos os tipos de tend√™ncias, adicionar meta-informa√ß√µes, mas o que acontece se pegarmos tudo e desenharmos do ponto de vista dos testes? Portanto, temos uma tarefa: apontar para algum elemento e fazer uma anota√ß√£o com uma lista de testes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xa/hr/dj/xahrdjma8punc8jmujxg_vwtlvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar isso, voc√™ precisa clicar no √≠cone e escrever uma nota, e este √© todo o nosso teste. Usamos o Atlas em nosso lugar, e a integra√ß√£o at√© agora √© apenas com ele. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlas se parece com isso:</font></font><br>
<br>
<pre><code class="java hljs">SearchPage.open ();<font></font>
SearchPage.offersList().should(hasSizeGreaterThan(<span class="hljs-number">0</span>));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queremos que pelo menos um resultado seja exibido, caso contr√°rio n√£o iremos test√°-lo. </font><font style="vertical-align: inherit;">Em seguida, movemos o cursor para o elemento e depois clicamos nele.</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).moveCursor();<font></font>
searchPage.offer(FIRST).actionBar().note().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, salvamos na </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entrada User_Text</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e a </font><i><font style="vertical-align: inherit;">enviamos</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).addNoteInput().sendKeys(USER_TEXT);<font></font>
searchPage.offer(FIRST).saveNote().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, verificamos se o texto √© exatamente o que deveria ter sido.</font></font><br>
<br>
<pre><code class="java hljs"> searchPage.offer(FIRST).addNoteInput().should(hasValue(USER_TEXT));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os testes s√£o executados em um navegador, o Atlas √© um proxy para este teste, aplicamos a mesma abordagem aqui que todos usam ao coletar a cobertura: faremos um localizador com .json. Salvaremos as informa√ß√µes sobre todas as aberturas de p√°ginas, todas as itera√ß√µes com elementos, quem enviou, quem enviou a chave, quem clicou, em quais IDs e assim por diante - manteremos um registro completo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, anexamos esse log ao Allure na forma de cada teste e, quando temos muitos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">locators.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , geramos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meta.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O esquema √© o mesmo para todos os elementos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos um plugin para o Google Chrome. Quer√≠amos tomar uma decis√£o na forma de um plugin. Eu fiz especialmente uma captura de tela de curva para que um detalhe importante fosse vis√≠vel no </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caminho</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do slide </font><i><font style="vertical-align: inherit;">para locators.json</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/kg/nz/rxkgnzghdmiw9syocwbkaqx27yy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ gerou um relat√≥rio agora, existe um mapa de cobertura para hoje. Se voc√™ pegar o relat√≥rio das duas semanas anteriores e col√°-lo aqui, um mapa de cobertura para o per√≠odo de duas semanas atr√°s ser√° exibido. Voc√™ tem uma m√°quina do tempo! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, quando voc√™ conecta este plug-in, ele desenha uma interface n√£o muito amig√°vel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mx/q4/vx/mxq4vxhpjqlrewxte3xn_o75upm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada elemento possui v√°rios testes que passam por ele: √© claro que 40 testes passam por "compre um apartamento", o cabe√ßalho √© testado um teste de cada vez, √© legal, e a op√ß√£o "apartamento" tamb√©m √© exibida. Voc√™ obt√©m um mapa de cobertura completo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ passar o mouse sobre algum elemento, ele pegar√° os dados e imprimir√° seus testes reais a partir do seu tms, Allure Board e assim por diante. O resultado s√£o informa√ß√µes completas sobre o que est√° sendo testado e como.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que em cada teste voc√™ pode falhar diretamente no relat√≥rio Allure. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/nw/iy/henwiyzy6if8o1ak2ky1i9v2s-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ abre alguma coisa, ele carrega novos seletores: se voc√™ tiver algum teste que passe por esses seletores e fez alguma coisa com o site, ele processar√° e exibir√° a imagem inteira.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual √© o lucro?</font></font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim que implementamos essa abordagem simples, principalmente, come√ßamos a entender o que testamos nos testes.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora qualquer um pode entrar e encontrar qualquer "thread" que leve ao script. Por exemplo, voc√™ assume que precisa testar o pagamento. O pagamento, obviamente, leva pelo bot√£o de pagamento: clique - todos os testes que passam pelo bot√£o de pagamento s√£o exibidos. Isso √© bom! Voc√™ entra em qualquer um deles e v√™ o script. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, voc√™ entende o que foi testado antes. Geramos um arquivo est√°tico, voc√™ pode especificar o caminho para ele e indicar quais testes foram realizados h√° duas semanas. Se o gerente disser que h√° um erro na produ√ß√£o e perguntar se testamos essa ou aquela funcionalidade h√° algumas semanas, voc√™ aceita o relat√≥rio Allure, por exemplo, por exemplo, que n√£o o testou.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro lucro √© a revis√£o ap√≥s testar a automa√ß√£o. Antes disso, fizemos uma revis√£o antes de testar a automa√ß√£o, agora voc√™ pode fazer seus testes exatamente como os v√™. Se voc√™ queria fazer um teste - feito, fez uma ramifica√ß√£o, lan√ßou o Allure, soltou o link do plug-in em um testador manual e pediu para ver os testes. Esse √© exatamente o processo que permitir√° fortalecer a estrat√©gia Agile: o l√≠der da equipe faz a revis√£o do c√≥digo e os testadores manuais fazem seus testes (scripts). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra vantagem dessa abordagem s√£o os elementos usados ‚Äã‚Äãcom frequ√™ncia. Se substituirmos esse bloco, no qual existem 87 testes, todos eles cair√£o. Voc√™ come√ßa a entender o qu√£o flack seus testes s√£o.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x3/jh/ye/x3jhyewo2z60_6-xi5iz6q-2rzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E se o bloco "pre√ßo de" for revertido, tudo bem, um teste cair√°, uma pessoa o corrigir√°. </font><font style="vertical-align: inherit;">Se voc√™ alterar o bloco com 87 testes, a cobertura diminuir√° consideravelmente, porque 87 testes n√£o ser√£o aprovados e n√£o verificar√£o nenhum resultado. </font><font style="vertical-align: inherit;">Esse bloco precisa de mais aten√ß√£o. </font><font style="vertical-align: inherit;">Ent√£o voc√™ precisa informar ao desenvolvedor que esse bloco deve estar com um ID, porque, se ele sair, tudo desmoronar√°.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como voc√™ pode se desenvolver ainda mais?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, voc√™ pode seguir o caminho de desenvolvimento de suporte para outras ferramentas, por exemplo, para o Selenide. Eu gostaria mesmo de apoiar n√£o um Selenide espec√≠fico, mas uma implementa√ß√£o de driver que permita coletar localizadores, independentemente da ferramenta usada. Esse proxy despeja informa√ß√µes e as exibe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra id√©ia √© exibir o resultado do teste atual. Por exemplo, √© conveniente exibir imediatamente essa imagem para um testador manual: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/w-/q8/e4w-q8xjavk2dfern8u_fncyfu4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voc√™ n√£o precisa pensar em quais testes foram interrompidos, pois pode ir ao site, clicar no teste e pass√°-lo manualmente sem verificar outros testes. Isso √© f√°cil, voc√™ pode pegar essas informa√ß√µes da Allure e desenh√°-las aqui.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode adicionar a Pontua√ß√£o total, porque todo mundo adora gr√°ficos, porque eu quero lidar com testes duplicados muito parecidos entre si, cuja parte central √© a mesma, e o come√ßo e a cauda mudaram um pouco. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/lw/xq/oplwxqvq08hv-uaqs3c97owcuxy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tamb√©m gostaria de ver imediatamente o n√∫mero de seletores duplicados. Se estiver alto, nesta p√°gina voc√™ precisar√° refatorar e executar testes, caso contr√°rio, eles cair√£o em um pacote muito grande. O mesmo vale para o n√∫mero de elementos com os quais interagimos. Este √© um sintoma comum. No entanto, assim que voc√™ interagir com a p√°gina, a figura ser√° ignorada devido a novos elementos e ao n√∫mero total de casos de teste; portanto, voc√™ precisar√° adicionar algum tipo de an√°lise, que n√£o ser√° sup√©rflua.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode adicionar a distribui√ß√£o de testes por camadas, porque deseja ver n√£o apenas que temos esses testes, mas todos os tipos de testes que est√£o nesta p√°gina, possivelmente at√© testes manuais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, se houver testes e testes Java no Puppeteer que outra equipe escreve, podemos olhar para uma p√°gina espec√≠fica e dizer imediatamente onde nossos testes se cruzam. Ou seja, falaremos o mesmo idioma com eles e n√£o precisaremos coletar essas informa√ß√µes pouco a pouco. Se tivermos uma ferramenta que mostra tudo na interface da Web, a tarefa de comparar testes em Java e Puppeteer n√£o parece mais insol√∫vel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, vamos falar sobre a estrat√©gia geral. </font><font style="vertical-align: inherit;">J√° falamos sobre quais tipos de cobertura, denominados dois, criaram um terceiro tipo de revestimento, que usamos como resultado. </font><font style="vertical-align: inherit;">Ent√£o, apenas analisamos esse problema de um √¢ngulo diferente.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por um lado, h√° uma cobertura que foi chutada desde 1963; por outro lado, h√° testadores manuais que est√£o acostumados a viver em um mundo mais real que o c√≥digo. </font><font style="vertical-align: inherit;">Resta apenas combinar essas duas abordagens.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os interessados ‚Äã‚Äãsempre podem se juntar √† nossa comunidade. </font><font style="vertical-align: inherit;">Aqui est√£o dois reposit√≥rios de nossa equipe que lidam com o problema de cobertura:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cobertura de arrog√¢ncia</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localizadores-hotspots-chrome-plugin</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt491826/index.html">Bitrix Auditoria do tipo fa√ßa voc√™ mesmo</a></li>
<li><a href="../pt491828/index.html">DataMatrix ou como rotular sapatos corretamente</a></li>
<li><a href="../pt491832/index.html">8 vantagens do Flutter em compara√ß√£o com o React Native</a></li>
<li><a href="../pt491838/index.html">MIPT lan√ßa um curso online aberto sobre programa√ß√£o esportiva</a></li>
<li><a href="../pt491840/index.html">Visualiza√ß√£o do trabalho dos trabalhadores de servi√ßo</a></li>
<li><a href="../pt491846/index.html">Verificando o isomorfismo de dois gr√°ficos e localizando subgr√°ficos isom√≥rficos: uma abordagem baseada na an√°lise de caminhos NB</a></li>
<li><a href="../pt491848/index.html">Redux Toolkit n√£o √© mais necess√°rio?</a></li>
<li><a href="../pt491852/index.html">Flask-DJ: estrutura do Django (mvc) para um projeto no flask</a></li>
<li><a href="../pt491854/index.html">Telefones corporativos para cada um dos 31 mil funcion√°rios</a></li>
<li><a href="../pt491856/index.html">LinkedIn para estudantes e graduados: primeiros passos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>