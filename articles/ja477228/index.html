<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚨 🙅🏻 ♨️ Vue 3はより高速になります 👩‍❤️‍👨 👩🏿‍⚖️ 🌲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今年のフロントエンドの世界で最も印象的なイベントの1つは、VueJSの第3バージョンの機能の一部であるVue nextリポジトリーの公開でした。この記事では、VueJSの新しいキラー機能の概要を説明します。記事の公開時点では、リポジトリはプレアルファステータスでした。リリース計画はロードマップで見る...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Vue 3はより高速になります</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477228/"><img src="https://habrastorage.org/getpro/habr/post_images/06f/124/556/06f124556abe1bec9eb55bccae58e759.png" alt="スクリーンショットhot-1"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今年のフロントエンドの世界で最も印象的なイベントの1つは、</font><font style="vertical-align: inherit;">VueJSの第3バージョンの機能の一部である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue next</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リポジトリーの公開でした</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この記事では、VueJSの新しいキラー機能の概要を説明します。</font><font style="vertical-align: inherit;">記事の公開時点では、リポジトリは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレアルファ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステータス</font><font style="vertical-align: inherit;">でした。</font><font style="vertical-align: inherit;">リリース計画は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ロードマップ</font></a><font style="vertical-align: inherit;">で見ることができます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックグラウンド</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2018年2月、Vue.jsの作成者であるEvan You </font><font style="vertical-align: inherit;">は、人気のあるフレームワークのバージョン3に関する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計画</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">共有しました</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能をパッケージに分割してスコープを分離する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeScriptがコードベースに表示されます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue 3はバージョン2と下位互換性があります（つまり、古いコードを壊しません）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン3.0のオブザーバーはプロキシに基づいているため、レンダリング速度が向上し、課せられていた多くの制限がなくなります </font></font><code>Object.defineProperty</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいフック</font></font><code>renderTracked</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用してデビューする機会があり</font><font style="vertical-align: inherit;">、</font></font><code>renderTriggered</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツリーシェーキングの導入のおかげで（ビルドから未使用のディレクティブを除外）、フレームワークのサイズは圧縮形式で10kb未満になります</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スロットの最適化</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue 3のパフォーマンスは100％向上します</font></font></li>
</ul><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込みコンポーネントやディレクティブランタイムヘルパー（vモデル）などの機能がオンデマンドでインポートされ、ツリーをシェイクできる</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Evan You</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイラーはディレクティブの存在を追跡し、コンパイル段階でビルドに組み込みます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vue 3での作業の過程で、エヴァンはコンポーネントをクラスに書き直すことを拒否し、代わりに機能的なAPIを実装しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいバージョンではIEでサポートされていないプロキシを使用するため、EvanはIE11用に別のビルドを作成する予定です。</font><font style="vertical-align: inherit;">合計で、4つのフェーズが約束します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルファ段階-コンパイラとssrレンダリングの最終段階</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベータ段階-メインライブラリの最終段階（Vueルーター、Vuex、Vue CLI、Vue DevTools）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RCフェーズ-Vue 2.0を含むプレリリースステージ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IE11ビルド</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最終リリース</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Evanは2019年の最終リリースを計画していますが、プロジェクトはまだプレアルファ段階です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue 3はより高速になります</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの革新のおかげで、Vue 3は以前のバージョンより2倍速くなります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロキシベースの観察と反応性</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主要な革新の1つは、Object.definePropertyのゲッターおよびセッターからプロキシへのオブジェクトの監視メカニズムの変更でした。</font><font style="vertical-align: inherit;">Vueは、Vue.setとVue.deleteを使用せずに、リアクティブオブジェクトのプロパティの削除と追加を追跡できるようになりました。</font><font style="vertical-align: inherit;">革新により、レンダリングとスクリプティングの速度が向上し、メモリ消費量が2倍に削減されました </font><font style="vertical-align: inherit;">Vue 2とVue 3 </font><i><font style="vertical-align: inherit;">のパフォーマンスを比較するには</font></i></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Ilya Klimovリポジトリをダウンロードします。Vue2 </font></font></a><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（左）とVue 3（プレアルファステージ、右）のパフォーマンスの比較</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
プロキシのおかげで、Vue 2で追跡されていないオブジェクト操作を変更しても、反応性は失われません。</font><font style="vertical-align: inherit;">これで、Vueはオブジェクトのプロパティを再帰的に走査して変更を計算しなくなります。</font><font style="vertical-align: inherit;">
約束から成っているもの：</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/951/84a/318/95184a318fbf8d76a644ef2f23fdb206.png" alt="スクリーンショットhot-1"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子孫と親は独立して再描画されます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue 3のサイズが圧縮形式で20kbから10kbに減少</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeScriptが追加されました</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その他の最適化：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue 3は静的コンテンツを記憶し、動的データのみにパッチを適用します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的小道具が範囲を拡大</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発を容易にするために、Vue 3コードはモジュールパッケージに分割されています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランタイムコアパッケージはクロスプラットフォームに作られています</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの代わりに、Evanはセットアップ関数とフックを追加して、コードをクリーンで整理し、再利用可能にしました*</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムスライス*。</font><font style="vertical-align: inherit;">JSコードの実行は、アプリケーションとのユーザーの対話をブロックすることなく、断片に分割されます</font></font></li>
</ul><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アスタリスクは実験的なAPIを示します</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更新：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その後、エヴァンは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間スライシング</font></font></i></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">を放棄することを決め</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
、HOCに触発されて、Reactエヴァンは再利用されたロジックとカスタムフックを使用してセットアップ関数を実装しました。</font><font style="vertical-align: inherit;">ミックスインとは異なり、ライフサイクルフックは互いに上書きしません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張VDomパッチ</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的コンテンツの結合</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
テンプレートをコンパイルすると、静的コンテンツはVDomパッチの外に移動します。</font><font style="vertical-align: inherit;">これに対して、VueチームはSvelteに触発されました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9cb/415/c75/9cb415c752e339ffec2664b23cf31ad2.png" alt="スクリーンショットhot-2"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello, {{name}}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更された</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクト</font><font style="vertical-align: inherit;">とコンテキスト</font><font style="vertical-align: inherit;">が渡され</font><font style="vertical-align: inherit;">ます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にリアクティブ変数</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">含まれている</font><font style="vertical-align: inherit;">場合</font><font style="vertical-align: inherit;">、コンテキストで更新されます。</font></font><br>
<br>
<pre><code class="javascript hljs">p(changed, ctx) {
    <span class="hljs-keyword">if</span>(changed.name) {<font></font>
        set_data(t1, ctx.name);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前の実装では、Vueコンパイラーは静的ノードを含むすべてのノードを通過しました。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">const</span> children = [];
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {<font></font>
        children.push(h(<span class="hljs-string">'p'</span>, {
            <span class="hljs-attr">class</span>: <span class="hljs-string">'text'</span>
        }, i === <span class="hljs-number">2</span> ? <span class="hljs-keyword">this</span>.message : <span class="hljs-string">'Lorem upsum'</span>))<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> h(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'content'</span> }, children)<font></font>
}<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいテンプレートのコンパイル戦略</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいバージョンでは、テンプレートはブロックに分割されています：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c0f/a65/25e/c0fa6525eca7377713ef1f6fae4bdb79.png" alt="セレクション002"></a><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレートはブロックに分かれています</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各ブロック内のノードの構造は完全に静的です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロック内の動的な値を追跡するには、それらが配置されているフラットアレイが1つだけ必要です</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい戦略では、パフォーマンスはテンプレートのサイズではなく、動的コンテンツの量に直接依存します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue 3は大規模なプロジェクトによりよく適応されます</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大規模なプロジェクトでは、Vueを使用するときに次の問題に直面します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完璧なTypeScriptサポートではない </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">巨大でサポートが難しいコンポーネント</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードを再利用するための単純なパターンがない</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当初、TSをサポートするクラスを追加する予定でした。</font><font style="vertical-align: inherit;">しかし、Vueチームは問題に遭遇しました：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と小道具や他の属性を混ぜる</font><i><font style="vertical-align: inherit;">ことは</font></i><font style="vertical-align: inherit;">問題</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">あります</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TC39のES6クラスのデコレーターは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不安定です</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EvanのチームはTC39の専門家に助けを求め、同様の実装がさまざまな小道具と属性をVueコンテキストに混在させるプラグインと競合する可能性があることを発見しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
潜在的に、これらの問題はデコレータによって解決できる可能性がありますが、開発中です。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポジションAPI</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VueチームはReactフックに触発され、同様のAPIを作成することを決定しました。これはオプションであり、開発および議論中であるため、一部の名前は変更される可能性があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この変更の主な概念は、コンポーネントコードをより論理的に整理し、セマンティックブロックに分割することです。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成APIの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細については</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧</font><font style="vertical-align: inherit;">ください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vue 3の使用例。コンポーネントは論理関数に分割されており、その内部で反応性フックとライフサイクルフックを使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポジションAPIから新しいフックをインポートします。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { reactive, computed, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/composition-api'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
  setup() {<font></font>
    <span class="hljs-keyword">const</span> { state } = countAnimal(<span class="hljs-string">"rabbit"</span>)
    <span class="hljs-keyword">const</span> { getType, anotherState } = anotherCount()
    <span class="hljs-keyword">return</span> {<font></font>
      state,<font></font>
      getType,<font></font>
      anotherState<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">countAnimal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
関数に</font><font style="vertical-align: inherit;">は、反応プロパティ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">count、animal、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">increment</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> methodがあり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">奇妙なカウン​​ターで、動物の名前が変わります。</font><font style="vertical-align: inherit;">コンポーネントがマウントされると、カウンターが開始します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">countAnimal</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">const</span> state = reactive({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">animal</span>: computed(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> state.count % <span class="hljs-number">2</span> ? name : <span class="hljs-string">'bear'</span>)<font></font>
  })<font></font>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span>(<span class="hljs-params"></span>) </span>{<font></font>
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
      state.count++;<font></font>
      increment()<font></font>
    }, <span class="hljs-number">1000</span>)<font></font>
  }<font></font>
  onMounted(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
    increment()<font></font>
  })<font></font>
  <span class="hljs-keyword">return</span> {<font></font>
    state<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の関数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anotherCount</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を作成します</font><font style="vertical-align: inherit;">。これには</font><font style="vertical-align: inherit;">、カウンターと動物の名前を</font><font style="vertical-align: inherit;">含む</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インクリメント</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドも含まれてい</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getType</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">は、テンプレートから動物の名前を渡します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">anotherCount</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> anotherState = reactive({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">animal</span>: <span class="hljs-string">'fox'</span><font></font>
  })<font></font>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getType</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">return</span> name == <span class="hljs-string">'bear'</span> ? <span class="hljs-string">'slow'</span> : <span class="hljs-string">'fast'</span><font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span>(<span class="hljs-params"></span>) </span>{<font></font>
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
      anotherState.count+=<span class="hljs-number">10</span>;<font></font>
      increment()<font></font>
    }, <span class="hljs-number">1000</span>)<font></font>
  }<font></font>
  onMounted(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
    increment()<font></font>
  })<font></font>
  <span class="hljs-keyword">return</span> {<font></font>
    getType,<font></font>
    anotherState<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンプレートには、2つのカウンターと2つの動物の名前が表示されます。</font><font style="vertical-align: inherit;">走行の種類は、動物の名前によって異なります。</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count {{state.animal}}: {{ state.count }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{state.animal}} runs {{getType(state.animal)}}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Another:<font></font>
    Count {{anotherState.animal}}: {{ anotherState.count }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいフックが内で使用される</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セットアップA</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">壊すことなく、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">古いAPIを。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onMounted</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は単一コンポーネントのライフサイクルフックを指すことに</font><font style="vertical-align: inherit;">注意してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPIにはいくつかの利点があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライフサイクルフックは互いにこすり合わない</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティの明確なソース</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加のコンポーネントインスタンスは作成されません</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vue 3の最も重要な変更は上記にリストされていますが、ほとんどの改善はコンパイラーによって生成されたコードのフードの下に隠されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主な改善：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成されたコードはJSコンパイラに最適です</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成されたバンドルがより簡単に</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッチアルゴリズムの改善により、親/子コンポーネントが再描画されます</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vueは、最速かつ最適なフレームワークの1つとしての地位を確立しました。</font><font style="vertical-align: inherit;">新しいバージョンはさらに速く簡単になります。</font><font style="vertical-align: inherit;">Vue 3は、今日のモバイルおよびパフォーマンス指向のWebに最適です。</font><font style="vertical-align: inherit;">将来の変更に関するコメントは、公式</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（コメントの要求）に</font><font style="vertical-align: inherit;">残すことができます</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PSタイプミスを修正していただきありがとうございます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja477214/index.html">Angularのアプリケーション構成。ベストプラクティス</a></li>
<li><a href="../ja477220/index.html">世界で最も効果的なインテリジェンスサービスのインテリジェンスに不可欠なアシスタント（パート1）</a></li>
<li><a href="../ja477222/index.html">数式と遅延コンビネーター</a></li>
<li><a href="../ja477224/index.html">「ノイズキル」：騒音公害について知っておくべきこと</a></li>
<li><a href="../ja477226/index.html">簡単か正しいかの選択</a></li>
<li><a href="../ja477230/index.html">教育ソフトウェアの歴史：学生向けの最初のパソコン、教育ゲーム、ソフトウェア</a></li>
<li><a href="../ja477234/index.html">Мышь, поставившая крест на проводных собратьях</a></li>
<li><a href="../ja477236/index.html">米国の裁判所、州がネットワークの中立性を取り戻すことを許可</a></li>
<li><a href="../ja477238/index.html">カルマに加えて：スタックオーバーフローが批判される理由と、コミュニティの毒性について多くの人が不満を言う理由</a></li>
<li><a href="../ja477242/index.html">ServiceDeskの選択方法。パート3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>