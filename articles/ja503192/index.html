<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💘 🏑 🦊 2時間で仮想化。パート4.基本的な操作 🦋 🐸 🧒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今日は、仮想化環境の管理者が定期的に実行する必要があるいくつかの基本的な操作について説明します。この記事はoVirtシリーズのパート1、パート2、パート3の続きです。
 
 コンテンツ
 

- VMとテンプレートの作成。
- VMの移行（ライブ移行）;
- ストレージの移行（ストレージの移行）;
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>2時間で仮想化。パート4.基本的な操作</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503192/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日は、仮想化環境の管理者が定期的に実行する必要があるいくつかの基本的な操作について説明します。</font><font style="vertical-align: inherit;">この記事はoVirtシリーズの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート3の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">続きです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMとテンプレートの作成</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMの移行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ライブ移行）;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレージの移行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ストレージの移行）;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMとディスクの名前を変更します</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oVirt-Host</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ハイパーバイザー）を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">更新します</font></a><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oVirt-Engine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（マネージャー）を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">更新します</font></a><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMをインポートします</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスク管理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マネージャー（ovirt-engine）とハイパーバイザー（ホスト）のインストール </font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加の設定</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本操作-私たちはここにいます</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
従来、管理タスクの詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">へようこそ</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oVirtに入ると、2つのポータルが表示されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理ポータル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMポータル</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つ目は管理者と管理タスクを対象としており、2つ目はマシンの顧客向けですが、管理者が使用することもできます。そのためには、いくつかの機能がさらに便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oVirtオブジェクトの各コレクションのウィンドウの上部には、状況に応じたプロンプトを備えた強力な検索ボックスがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例として、コントロールパネルで問題のあるホストを選択すると、実際にはフィルターが発生します。</font></font><br>
<br>
<pre><code class="plaintext hljs">status = unassigned or status = maintenance or status = installing or status = reboot or status = preparingformaintenance or status = pendingapproval or status = connecting or status = installingos or status = kdumping</code></pre><br>
<a name="vm-pool"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMとテンプレートを作成する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでにパート2で簡単なVMを作成したと思います。ここで、仮想マシンに直接関連する他のoVirtエンティティ（仮想マシン自体、テンプレート、プール）について学びます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレート</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、同一のマシン（クローン）を作成するために設計されたマシン（通常は事前に準備された）のコピーです。テンプレートにはバージョンがある場合があり、便利です。参照マシンを更新するたびに、新しい個別のテンプレートを作成する必要はありません。詳細は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プール</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、単一のテンプレートから生成された同一のマシンのグループです。 VDI（仮想デスクトップインフラストラクチャ）に便利です。数十または数百のユーザーが同一の作業環境を提供する必要があり、これは文字通り瞬く間に行われます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プールの詳細をご覧ください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前に作成したマシンのクローンを作成できるテンプレートを作成してみましょう。ただし、デモンストレーションのために別の方法を実行します。外部コレクションからテンプレートをインポートします。GlanceImages：&gt; Domains-&gt; ovirt-image-repository（1）、Import（2）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/gg/lt/fxggltgss5p9llxyplgghxmpbsg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図1-Fedora 32イメージの</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
インポート「テンプレートとしてインポート」（3、テンプレートとしてインポート）をマークし、テンプレートに名前を付けます（4）。ディスクにはわかりやすい名前を付けることを強くお勧めします（5、ディスクエイリアス）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクの進行状況は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[タスク]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セクションで簡単に監視できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/p6/co/cjp6cor50gw2euzkgnf_vl-lc24.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 2-oVirtでのタスク完了の進捗状況。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
アップロードが成功すると、テンプレートがリストに追加されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_n/o3/cg_no3kzfukaodkzouox0q2bt3q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 3-テンプレート。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ロードされたテンプレートに基づいて、プールを作成します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fn/qk/aj/fnqkajhsx4hrbzr_wc8jozs9zua.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 4-プールの作成。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compute-&gt; Pools（1）、New（2）に移動し、Fedora32（3）テンプレート、バージョン-latests（4）を選択し、「myPoolA- ??」という名前を割り当てます。 （5）。 「VMの数」フィールドと「事前開始されたVM」フィールドにはまだ触れていません。次のステップでそれらに戻ります。次に、詳細設定（6）をオンにして、初期実行の設定に進みます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/m5/dj/zxm5djt-ud05hne1hyahor2nluo.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 4-初期起動を構成します。</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜならCloud ImageをダウンロードしたGlance Imagesから、認証を構成する必要があります。 「Use Cloud-Init / Sysprep」が有効になっていることを確認し（1）、認証を開き（2）、ユーザー名を指定します（例：rootまたはuser（3））。プールに一意のパスワードを作成するには、「すでに設定されているパスワードを使用する」（4）を無効にし、パスワードを入力します（5）。 [OK]をクリックします。プールが作成され、同じマシンが[コンピューティング]-&gt; [仮想マシン]に表示されます（アイコンに注意してください。個別に動作するマシンとは異なります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プールの名前に注意してください。お気づきのように、最後は「-??」です。これには、マシンの「正規化された」番号付け（0で補完された01、02、...、09、10など）が含まれます。それ以外の場合、番号付けはアライメントのない自然数になります（1、2、...、9、10）。 ...）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
続行する前に、プール設定に戻りましょう。</font><font style="vertical-align: inherit;">[VMの数]フィールドが[プール内のVMの数を増やす]に変更されていることに注意してください。</font><font style="vertical-align: inherit;">ここでは31を指定し、プール内のマシンの数はほぼ瞬時に32になります。「Prestarted VM」フィールドに16を入力します。これにより、oVirtは指定された数のマシンを事前起動してユーザーに接続できるようにします。</font><font style="vertical-align: inherit;">ここで、マシン、テンプレート、プールについて終了し、移行に移ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主要なVMアイコン：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラックユニット-サーバー;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モニター-デスクトップ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3タワー-プールのサーバー。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3台のモニター-プールからのデスクトップ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rewind（rewind）-ステートレス（シャットダウン後、マシンは状態を元の状態にリセットします。すべての変更はロールバックされます）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オレンジ色のモニターの三角形-要求された構成の変更には再起動が必要です。</font></font></li>
</ul><br>
<a name="live-migration"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMの移行（ライブ移行）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチがオンになっているマシンの状態の移行は簡単です。マシンまたはマシンのグループを右クリックします。</font><font style="vertical-align: inherit;">手順は、vSphereのvMotionの手順と似ています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/ne/dz/zmnedzcid6vyhsgubvv95u6cnsy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">5-移行を開始します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューティング-&gt;仮想マシン、1つ以上のマシンを選択、移行。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8v/bp/9h/8vbp9hslgmoa_n_v3ltlmuxfknw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">6-移行プロセスはホストで監視できます（コンピューティング-&gt;ホスト）。</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一度に2台以下の車が動いているだけです。</font></font><br>
<a name="storage-migration"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレージの移行</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、この手順はVMware vSphereユーザーにとっては異常に見えるかもしれません。</font><font style="vertical-align: inherit;">システムにディスクイメージとマシン構成の両方を保存する方法は異なります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VMストレージを転送するには、ディスク（ストレージ-&gt;ディスク）またはドメイン（ストレージ-&gt;ドメイン-&gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{ドメイン名}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -&gt;ディスク）に移動します。</font><font style="vertical-align: inherit;">ドライブを選択し、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を押し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">以上で、ドライブは別のストレージに送信されます。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注：内部組織のため、テンプレートストアとプールの移行には制限があります。</font><font style="vertical-align: inherit;">ストレージの移行に慣れるには、プール外の別のマシンで行うのが最適です。</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディスクのコピーは、手動のロード/アンロードと同じメニューで実行されます。</font></font><br>
<a name="rename"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMとディスクの名前を変更する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マシンまたはテンプレートの名前の変更は非常に簡単です。新しい名前を編集して入力します。</font><font style="vertical-align: inherit;">プールの名前を変更するには、そのマシンを削除して再作成する必要があります。</font><font style="vertical-align: inherit;">これに基づいて、VMは対応する名前と構成で生成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディスクの名前を変更することも可能ですが、パスは</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e </font><font style="vertical-align: inherit;">よりも長くなります</font><font style="vertical-align: inherit;">。コンピュート-&gt;仮想マシン-&gt; {VM名}-&gt;ディスク-&gt; {VMディスクエイリアス}-&gt;編集、エイリアス。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部オブジェクト識別子はUUIDに基づいて構築されています。</font><font style="vertical-align: inherit;">名前を変更すると、実際にエイリアスが変更されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションでは、バージョン番号が変更された場合の更新（マイナー）ではなく、更新（マイナー）について説明します（これはより複雑な手順であり、日常的なタスクの一部ではありません）。</font></font><br>
<a name="update-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oVirt-Host（ハイパーバイザー）の更新</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ホストの更新はvSphereの場合よりも簡単です。oVirtの更新マネージャーはプラットフォームに有機的に統合されており、設定は必要ありません。公式</font><font style="vertical-align: inherit;">アップデート</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/we/j1/fjwej1ph06a03bqpfx2ye6ijeny.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 7-アップデートがある場合、マネージャーはそれらをCDアイコンで報告します。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ww/vw/rn/wwvwrnz9q9hizaqo3mfndfihp_m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 8-更新を開始する前に、メンテナンスモードを有効にする必要があります（管理-&gt;メンテナンス）。他のホストへのVMの移行が自動的に開始され（図6を参照）、更新の準備ができます。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ol/ry/fw/olryfwdduor2j39tr47n8zlnpew.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 9-レンチアイコンは、ホストがサービスの準備ができていることを示します。</font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/ov/rt/ta/ovrttawkmmi6fkfp-wic5_mpy00.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 10-インストール-&gt;アップグレードは、アップグレード手順を開始します。</font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/8z/ch/7s/8zch7sdgo_plq5suw8yevk8nzz8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。 11-アップデートを有効にするには、アップデートの完了後にホストに再起動するコマンドをマネージャーに要求することができます。</font></font><br>
</i><br>
<img src="https://habrastorage.org/webt/ze/dg/kb/zedgkbmmuxxm7kvy6qoxhh-bvza.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">12-再起動後、ハイパーバイザーをサービスモードから外します（管理-&gt;アクティブ化）。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのホストを確認して更新します。</font></font><br>
<a name="update-engine"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oVirt-Engine（マネージャー）の更新</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は混乱するかもしれませんが、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明されているように、追加の手順を含むengine-setupを使用してマネージャーの更新を実行し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能であれば、マシンのアーカイブまたはスナップショットを作成し、最後にスケジュールされたバックアップが成功したことを確認してください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストールパッケージをチェックして更新します。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-upgrade-check<font></font>
$ sudo update ovirt\*setup\*</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アップデートの主要部分は、engine-setupプログラムによって実行されます。</font><font style="vertical-align: inherit;">彼女はいくつかの構成の質問をしてから、ovirt-engineサービスを停止し、更新されたパッケージをダウンロードしてインストールし、アーカイブを作成してデータベースを更新し、更新された構成を適用して、ovirt-engineサービスを開始します。</font></font><br>
 <br>
<pre><code class="bash hljs">$ sudo engine-setup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 更新が成功すると、次のメッセージを受け取ります。</font></font><br>
 <br>
<pre><code class="plaintext hljs">Execution of setup completed successfully</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">engine-setupスクリプトからの出力例</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs">$ sudo engine-setup</code></pre><br>
<pre><code class="plaintext hljs">[ INFO  ] Stage: Initializing<font></font>
[ INFO  ] Stage: Environment setup<font></font>
          Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf', '/etc/ovirt-engine-setup.conf.d/10-packaging.conf', '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf']<font></font>
          Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20200522232449-o97vyx.log<font></font>
          Version: otopi-1.8.2 (otopi-1.8.2-1.el7)<font></font>
[ INFO  ] Stage: Environment packages setup<font></font>
[ INFO  ] Stage: Programs detection<font></font>
[ INFO  ] Stage: Environment setup (late)<font></font>
[ INFO  ] Stage: Environment customization<font></font>
         <font></font>
          --== PRODUCT OPTIONS ==--<font></font>
         <font></font>
         <font></font>
          --== PACKAGES ==--<font></font>
         <font></font>
[ INFO  ] Checking for product updates...<font></font>
          Setup needs to install or update the following packages:<font></font>
          [updated] ovirt-engine-4.3.5.5-1.el7.noarch will be updated<font></font>
...<font></font>
          [update] ovirt-engine-wildfly-overlay-17.0.1-1.el7.noarch is an update<font></font>
          Replying "No" will abort Setup. You can pass the option "--offline" to prevent installing or updating packages.<font></font>
          Do you wish to update them now? (Yes, No) [Yes]: <font></font>
[ INFO  ] Checking for an update for Setup...<font></font>
         <font></font>
          --== NETWORK CONFIGURATION ==--<font></font>
         <font></font>
          Setup can automatically configure the firewall on this system.<font></font>
          Note: automatic configuration of the firewall may overwrite current settings.<font></font>
          NOTICE: iptables is deprecated and will be removed in future releases<font></font>
          Do you want Setup to configure the firewall? (Yes, No) [Yes]: <font></font>
[ INFO  ] firewalld will be configured as firewall manager.<font></font>
         <font></font>
          --== DATABASE CONFIGURATION ==--<font></font>
         <font></font>
          The detected DWH database size is 439 MB.<font></font>
          Setup can backup the existing database. The time and space required for the database backup depend on its size. This process takes time, and in some cases (for instance, when the size is few GBs) may take several hours to complete.<font></font>
          If you choose to not back up the database, and Setup later fails for some reason, it will not be able to restore the database and all DWH data will be lost.<font></font>
          Would you like to backup the existing database before upgrading it? (Yes, No) [Yes]: <font></font>
          Perform full vacuum on the oVirt engine history<font></font>
          database ovirt_engine_history@localhost?<font></font>
          This operation may take a while depending on this setup health and the<font></font>
          configuration of the db vacuum process.<font></font>
          See https://www.postgresql.org/docs/10/sql-vacuum.html<font></font>
          (Yes, No) [No]: <font></font>
         <font></font>
          --== OVIRT ENGINE CONFIGURATION ==--<font></font>
         <font></font>
          Perform full vacuum on the engine database engine@localhost?<font></font>
          This operation may take a while depending on this setup health and the<font></font>
          configuration of the db vacuum process.<font></font>
          See https://www.postgresql.org/docs/10/sql-vacuum.html<font></font>
          (Yes, No) [No]: <font></font>
         <font></font>
          --== STORAGE CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== PKI CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== APACHE CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== SYSTEM CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== MISC CONFIGURATION ==--<font></font>
         <font></font>
         <font></font>
          --== END OF CONFIGURATION ==--<font></font>
         <font></font>
[ INFO  ] Stage: Setup validation<font></font>
          During execution engine service will be stopped (OK, Cancel) [OK]: <font></font>
[ INFO  ] Cleaning stale zombie tasks and commands<font></font>
         <font></font>
          --== CONFIGURATION PREVIEW ==--<font></font>
         <font></font>
          Default SAN wipe after delete           : False<font></font>
          Firewall manager                        : firewalld<font></font>
          Update Firewall                         : True<font></font>
          Host FQDN                               : ovirt.example.com<font></font>
          Upgrade packages                        : True<font></font>
          Set up Cinderlib integration            : False<font></font>
          Engine database secured connection      : False<font></font>
          Engine database user name               : engine<font></font>
          Engine database name                    : engine<font></font>
          Engine database host                    : localhost<font></font>
          Engine database port                    : 5432<font></font>
          Engine database host name validation    : False<font></font>
          Engine installation                     : True<font></font>
          PKI organization                        : JSC Open Lab<font></font>
          Set up ovirt-provider-ovn               : False<font></font>
          Configure WebSocket Proxy               : True<font></font>
          DWH installation                        : True<font></font>
          DWH database secured connection         : False<font></font>
          DWH database host                       : localhost<font></font>
          DWH database user name                  : ovirt_engine_history<font></font>
          DWH database name                       : ovirt_engine_history<font></font>
          Backup DWH database                     : True<font></font>
          DWH database port                       : 5432<font></font>
          DWH database host name validation       : False<font></font>
          Configure Image I/O Proxy               : True<font></font>
          Configure VMConsole Proxy               : True<font></font>
         <font></font>
          Please confirm installation settings (OK, Cancel) [OK]: <font></font>
[ INFO  ] Cleaning async tasks and compensations<font></font>
[ INFO  ] Unlocking existing entities<font></font>
[ INFO  ] Checking the Engine database consistency<font></font>
[ INFO  ] Stage: Transaction setup<font></font>
[ INFO  ] Stopping engine service<font></font>
[ INFO  ] Stopping ovirt-fence-kdump-listener service<font></font>
[ INFO  ] Stopping dwh service<font></font>
[ INFO  ] Stopping Image I/O Proxy service<font></font>
[ INFO  ] Stopping vmconsole-proxy service<font></font>
[ INFO  ] Stopping websocket-proxy service<font></font>
[ INFO  ] Stage: Misc configuration (early)<font></font>
[ INFO  ] Stage: Package installation<font></font>
[ INFO  ] Yum Status: Downloading Packages<font></font>
...<font></font>
[ INFO  ] Stage: Misc configuration<font></font>
[ INFO  ] Upgrading CA<font></font>
[ INFO  ] Not rewriting /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf because it was changed manually. You might want to compare it with /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf.new and edit as needed.<font></font>
[ INFO  ] Backing up database localhost:ovirt_engine_history to '/var/lib/ovirt-engine-dwh/backups/dwh-20200522233531.6LDItj.dump'.<font></font>
[ INFO  ] Creating/refreshing DWH database schema<font></font>
[ INFO  ] Configuring Image I/O Proxy<font></font>
[ INFO  ] Configuring WebSocket Proxy<font></font>
[ INFO  ] Backing up database localhost:engine to '/var/lib/ovirt-engine/backups/engine-20200522233538.LZCwME.dump'.<font></font>
[ INFO  ] Creating/refreshing Engine database schema<font></font>
[ INFO  ] Creating/refreshing Engine 'internal' domain database schema<font></font>
          Unregistering existing client registration info.<font></font>
[ INFO  ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf'<font></font>
[ INFO  ] Stage: Transaction commit<font></font>
[ INFO  ] Stage: Closing up<font></font>
[ INFO  ] Starting engine service<font></font>
[ INFO  ] Starting dwh service<font></font>
[ INFO  ] Restarting ovirt-vmconsole proxy service<font></font>
         <font></font>
          --== SUMMARY ==--<font></font>
         <font></font>
[ INFO  ] Restarting httpd<font></font>
          Web access is enabled at:<font></font>
              http://ovirt.example.com:80/ovirt-engine<font></font>
              https://ovirt.example.com:443/ovirt-engine<font></font>
          SSH fingerprint: SHA256:JvilhbwRuMjBCJEjQVPlFQgk0aLaKz7Od0WzsZtx4j4<font></font>
          Did not update /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf because it was changed manually. You might want to compare it with /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf.new and edit as needed.<font></font>
         <font></font>
          --== END OF SUMMARY ==--<font></font>
         <font></font>
[ INFO  ] Stage: Clean up<font></font>
          Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20200522232449-o97vyx.log<font></font>
[ INFO  ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20200522233608-setup.conf'<font></font>
[ INFO  ] Stage: Pre-termination<font></font>
[ INFO  ] Stage: Termination<font></font>
[ INFO  ] Execution of setup completed successfully</code></pre></div>
                    </div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSおよびその他の追加パッケージを更新します。</font></font><br>
 <pre><code class="bash hljs">$ sudo yum update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 必要に応じて（カーネルまたはそのコンポーネントを更新）、マシンを再起動します。</font></font></li>
</ol><br>
<a name="import-vm"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMをインポート</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VMware、ドメインのエクスポート（データセンター間でイメージを交換するための特別なエンティティoVirt）、仮想アプライアンス（OVA）、XEN、KVMからインポートできます。</font><font style="vertical-align: inherit;">公式にサポートされているすべてのオプション：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMware ESXiからVMをインポート/ VSPHEREはホストで実行され、ESXi / VSPHEREが実行されるホストへの認証</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LibvirtからKVM / Xen VMをインポート：ユーザーは、Libvirtが実行されているホストへのURL +認証を指定します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定されたパスからKVM / Xen VMをインポートします。ユーザーはVM構成とディスクへのnfs / posixパスを指定します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMwareからエクスポートされたVMをインポートする：ユーザーはovaファイルへのnfs / posixパスを指定します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KVM / Xen VMのアップロード：ユーザーは構成とディスクのファイルを指定します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMwareからエクスポートされたVMをアップロード：ユーザーがovaファイルを指定</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォルダからVMをインポート：ユーザーは、KVM / Xen VMまたはVMwareからエクスポートされたVMを含むフォルダへのパスを指定します</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つのオプションについて詳しく説明します。vSphereからインポートするか、KVMを使用するスタンドアロンマシンです。</font><font style="vertical-align: inherit;">[コンピューティング]-&gt; [仮想マシン]でインポートデータを開始するには、追加メニュー項目のボタンをクリックします（3つの垂直ポイント、図13を参照）。</font><font style="vertical-align: inherit;">ソースマシンをオフにする必要があります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vCenterからマシンをインポートする</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ウィザードで：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データソース：VMware;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部プロバイダー：[管理]-&gt; [プロバイダー]で、頻繁な操作用のテンプレートを構成できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vCenter：vCenterサーバーの名前またはアドレス。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESXi：ハイパーバイザーから車をピックアップします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Ceter：クラスターへのフルパス。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスター：ハイパーバイザークラスターを含む;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー名/パスワード：vCenterに接続するためのユーザー名とパスワード。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーのSSL証明書を確認します。自己署名証明書を使用する場合は、その検証を無効にする必要があります。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/g9/0i/4b/g90i4btxfdhaz_ji-bntbutlaei.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">13-VMware vSphereからVMをインポートします。</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KVMからマシンをインポートする</font></font></h4><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
KVMからのインポートの詳細</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、これがまだ構成されていない場合は、外部からKVMへの接続を有効にする必要があります。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マシンをKVMにエクスポートする権限</font></font></b>
                        <div class="spoiler_text">        ,      .       ! ,      ,        ,       .     , .,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">ArchLinux</a>.<br>
<br>
 ,   libvirtd<br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/sysconfig/libvirtd</code></pre><br>
 <br>
<br>
<pre><code class="plaintext hljs">LIBVIRTD_ARGS="--listen"</code></pre><br>
      <br>
<br>
<pre><code class="bash hljs">$ sudo cp /etc/libvirt/libvirtd.conf /etc/libvirt/libvirtd.conf.`date +%F`<font></font>
$ sudo vim /etc/libvirt/libvirtd.conf</code></pre><br>
  :<br>
<br>
<pre><code class="plaintext hljs">listen_tls = 0<font></font>
listen_tcp = 1<font></font>
listen_addr = "0.0.0.0"<font></font>
auth_tcp = "none"</code></pre><br>
     <br>
<br>
<pre><code class="plaintext hljs">log_outputs="3:syslog:libvirtd"</code></pre><br>
    libvirtd.    ,    libvirtd &gt; 0.6 (  libvirtd --version),   .<br>
<br>
<pre><code class="bash hljs">$ sudo service libvirtd restart</code></pre><br>
     tcp:16509.<br>
<br>
 CentOS 7     (  permanent):<br>
<br>
<pre><code class="bash hljs">$ sudo firewall-cmd --add-rich-rule=<span class="hljs-string">'rule family="ipv4" source address="172.17.71.32/30" port port="16509" protocol="tcp" accept'</span></code></pre><br>
 :<br>
<br>
<pre><code class="bash hljs">$ virsh -r -c <span class="hljs-string">'qemu+tcp://mgmt@kvm46.example.com/system'</span> list --all</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、インポート自体は非常にシンプルです：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計算-&gt;仮想マシン-&gt;：（追加メニュー、3つの垂直ポイント）-&gt;インポート-&gt;ソース（libvirt経由のKVM）-&gt; URI（qemu + tcp：//kvm46.example.com /システム）-&gt;認証が必要（無効）-&gt;ロード。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なマシンにマークを付け、割り当てポリシー（割り当てポリシー）を選択します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
割り当てポリシー-事前割り当ては、ハードウェアゼロ検出を備えたストレージボリューム、I / Oが高いボリューム、占有率が高いボリュームなどに適しています。それ以外の場合は、シンプロビジョニングが可能です。いずれにせよ、状況を見て分析します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックされた「クローン」はティックしますが、車はコピーしません。たとえば、ネットワークインターフェイスの新しいMACアドレスが割り当てられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[全般]タブで、適切な種類のOSを指定することが重要です。[ネットワークインターフェイス]タブで、目的のネットワークを指定できます。</font><font style="vertical-align: inherit;">次に、「インポート」、および装置の速度に応じて、インポートされたマシンを取得します。</font><font style="vertical-align: inherit;">インポート後（またはその前）にovirt-guest-agentをインストールすることを忘れないでください。</font></font><br>
<br>
<a name="task-mgmt"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスク管理</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクがフリーズすると、難しい「ダンス」が始まります。そのうちのいくつかは触れようとします。</font><font style="vertical-align: inherit;">通常の振る舞いで、図1でそれらを観察できます。</font><font style="vertical-align: inherit;">2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクが多かれ少なかれ正常に実行される場合は、通常のツールで十分です。</font><font style="vertical-align: inherit;">パイマーと写真で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示さ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">れます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクはoVirt-hostで実行されます。</font></font><br>
<br>
<pre><code class="plaintext hljs">[mgmt@ovirt-nodeNN] $ sudo vdsm-client Host getAllTasksInfo<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task getStatus taskID=&lt;TASKID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task stop taskID=&lt;TaskID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Task clear taskID=&lt;TaskID&gt;<font></font>
[mgmt@ovirt-nodeNN] $ sudo vdsm-client Host getAllTasksInfo</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、vdsm-clientは、サポートされているすべてのメソッドであるタスクをロールバックしようとする場合があります。</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo vdsm-client Task -h</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクメソッド：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 method [arg = value] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 getStatusタスクのステータス情報を取得します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 タスクをロールバックして以前のシステム状態を復元します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 終了したタスクに関する情報を破棄するをクリアします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 getInfoタスクに関する情報を取得します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 stop現在実行中のタスクを停止します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、標準的な方法を使用してタスクを停止できない場合、移動はより複雑になります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公式には、このためにtaskcleanerツールが使用されます。</font></font><br>
<br>
<pre><code class="bash hljs">[mgmt@ovirt-engine] $ sudo /usr/share/ovirt-engine/setup/dbutils/taskcleaner.sh --<span class="hljs-built_in">help</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに深刻なケースでは、データベースを直接編集する必要があります。</font><font style="vertical-align: inherit;">この方法は、oVirtと影響を受けるマシンの新しいアーカイブを保持する最後の手段としてのみ使用する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、ソフトウェアコレクションを接続します</font></font><br>
<br>
<pre><code class="bash hljs">[mgmt@ovirt-engine] $ sudo scl <span class="hljs-built_in">enable</span> rh-postgresql10 <span class="hljs-string">"psql -d engine -U postgres"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、データベースに接続します</font></font><br>
<br>
<pre><code class="plaintext hljs">su postgres<font></font>
psql -d engine -U postgres<font></font>
select * from job order by start_time desc;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして直接削除-問題のあるタスクのDeleteJobプロシージャを実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">select DeleteJob('UUID_HERE');</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例：</font></font><br>
<br>
<pre><code class="plaintext hljs">select DeleteJob('ed0127c7-b052-4ec2-a67c-8b3a65d55e19');</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日はこれですべてです。データベースを手動で編集する必要がないことを願っています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja503178/index.html">Apple Macと豪華なデバイス。LTO、SAS、ファイバーチャネル、eSATA</a></li>
<li><a href="../ja503180/index.html">危機管理と危機管理。違いはなんですか？</a></li>
<li><a href="../ja503182/index.html">「私は私の会社の最初のブラインド開発者です。」パート1</a></li>
<li><a href="../ja503184/index.html">オンライン会議Zabbixに招待します</a></li>
<li><a href="../ja503186/index.html">マイクロソフトの初心者向けの10の無料コース</a></li>
<li><a href="../ja503194/index.html">ISAは間違いを許しません</a></li>
<li><a href="../ja503196/index.html">アイビーリーグの450の無料コース</a></li>
<li><a href="../ja503198/index.html">Minecraft RTXベータフレームレンダリング分析</a></li>
<li><a href="../ja503200/index.html">YOLOv4-Microsoft COCOデータセットで最も正確なリアルタイムニューラルネットワーク</a></li>
<li><a href="../ja503202/index.html">CCTVシステム：ロシアの8つの主なトレンドとその機能</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>