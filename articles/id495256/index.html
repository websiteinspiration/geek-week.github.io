<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✋🏼 🙁 🔁 Tentang port dan enkripsi di server mail 🌻 🛵 🧓🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saat mengkonfigurasi server surat keluar pada klien surat, Anda melihat 3 opsi untuk enkripsi - tanpa enkripsi, SMTPS dan STARTTLS, serta 3 kemungkina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tentang port dan enkripsi di server mail</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495256/"><img src="https://habrastorage.org/webt/pj/a_/os/pja_osqbo80fknqvjnkwxjfdqma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat mengkonfigurasi server surat keluar pada klien surat, Anda melihat 3 opsi untuk enkripsi - tanpa enkripsi, SMTPS dan STARTTLS, serta 3 kemungkinan port - 25, 465, 587. Apa yang harus dipilih dan untuk apa - mari kita pahami.</font></font><br>
 <a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/GvyQvKyrEaI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelumnya &lt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode Operasi Server Mail</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Selanjutnya&gt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data DNS untuk Server Mail</font></font></a><br>
<img src="https://habrastorage.org/webt/xd/iz/0b/xdiz0b5aiuipl9f9oylqxannogi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ketika Anda mengirim pesan ke seseorang, klien email Anda menggunakan ESMTP untuk mengirim pesan ini, dan kemudian server email Anda menggunakan protokol yang sama jika perlu mengirim pesan ini ke yang lain server. </font><font style="vertical-align: inherit;">Dan sementara semua orang berbicara dan menulis SMTP, biasanya tentang ESMTP - SMTP yang sama, tetapi dengan serangkaian ekstensi, seperti otorisasi dan enkripsi. </font><font style="vertical-align: inherit;">Ya, sekali SMTP bahkan tidak mendukung otorisasi.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q8/zz/xc/q8zzxcz0tpk86ealobs3ghe6hd4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang sedikit tentang SMTPS. </font><font style="vertical-align: inherit;">Dulu Internet sangat sederhana sehingga semua isinya ditransmisikan dalam teks yang jelas. </font><font style="vertical-align: inherit;">Kemudian datang protokol enkripsi kriptografi, SSL yang sama. </font><font style="vertical-align: inherit;">Dan layanan yang sebelumnya mengirimkan informasi dalam bentuk terbuka, mulai membungkus lalu lintas di SSL.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/ly/sg/vilysgbdveruivjlnd6bx00uk2o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi itu tidak mudah untuk melakukan ini pada port standar yang sama - klien dan server harus menyetujui metode enkripsi, dan untuk layanan pada satu port bekerja secara bersamaan untuk beberapa dengan enkripsi, dan untuk yang lain tanpa - itu akan memerlukan perubahan dalam protokol. Dan agar tidak menyulitkan semuanya, mereka mulai membuat porta terpisah untuk koneksi terenkripsi - ini adalah bagaimana 443 untuk HTTPS dan 465 untuk SMTPS muncul. Tapi kami menyadarinya sekarang - ada beberapa port khusus, jumlah layanan tumbuh, dan jika masing-masing dari mereka akan menggunakan beberapa port dengan enkripsi dan tanpa enkripsi untuk keperluan mereka - masalah.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/se/qs/ku/seqskuovnrhned_eis83hcbf9x0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan pada akhirnya, mereka memutuskan untuk memodifikasi protokol sedikit. Dalam beberapa kasus, ini tidak berhasil dengan baik, misalnya, untuk HTTP, dan dalam kasus SMTP, itu ternyata menjadi pilihan yang sangat cocok. Untuk ini, ekstensi STARTTLS telah ditambahkan ke SMTP. Secara umum, ekstensi STARTTLS tidak hanya digunakan untuk SMTP, secara umum itu adalah perintah untuk memulai negosiasi enkripsi. Tidak seperti SMTPS, yang menggunakan port khusus 465 dan segera mengenkripsi koneksi, STARTTLS hanyalah ekstensi untuk SMTP, yang berarti bahwa sesi tersebut dimulai sebagai sesi SMTP biasa. Server mail saling menyapa, dan kemudian menawarkan untuk mulai mengenkripsi dan memilih protokol kriptografi yang tersedia.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3-/md/bw/3-mdbw0y7amg4gvwt2vh6e_csdy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, dengan munculnya STARTTLS dari standar, mereka memutuskan untuk menghapus SMTPS pada port 465 sebagai layanan terpisah. Mereka menghapusnya dari standar, tetapi layanan tetap, dan masih digunakan. Mengenai enkripsi, saya masih akan membuat topik terpisah, tetapi untuk sekarang mari kita bicara tentang STARTTLS.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bv/-v/pi/bv-vpiqh-9bsozbp7cu7ajr1vfq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya katakan sebelumnya bahwa dengan STARTTLS, server mail atau klien / server membuka koneksi tanpa enkripsi, dan kemudian menyetujui enkripsi. Mereka menggunakan SSL / TLS yang sama untuk enkripsi. Tetapi bagaimana jika mereka tidak setuju? Ternyata mereka akan berkomunikasi dalam bentuk tidak terenkripsi? Di internet? Sementara itu, mereka setuju tanpa enkripsi apa pun, sehingga dengan mudah menipu server atau klien dengan kurangnya metode enkripsi yang tersedia. Dan pada suatu waktu mereka menangkap salah satu penyedia dalam serangan semacam itu. Dan kemudian Anda membutuhkan enkripsi seperti itu, Anda bertanya. Tidak semuanya sia-sia. Bahkan, administrator dapat menonaktifkan kemampuan untuk mengirim email jika tidak mungkin menyetujui enkripsi, dan klien email diharuskan untuk memperingatkan bahwa server tidak mendukung enkripsi.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jk/jd/yr/jkjdyrfzt3wgtv8rq35xchtqa3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kami menemukan bahwa ada SMTP yang berfungsi pada port 25, ada SMTPS yang bekerja pada 465, tetapi ada port lain - 587, yang juga digunakan oleh server mail.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qw/di/er/qwdiersbgizdugoml737dpbiihq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda perhatikan, klien email terhubung ke server melalui SMTP. Dan server surat terhubung satu sama lain melalui SMTP juga. Saya juga mengatakan pada bagian terakhir bahwa ada server - server relay yang meneruskan surat. Untuk alasan tertentu, kebanyakan manusia, ada host relay di Internet yang memungkinkan pengguna yang tidak sah untuk mengarahkan pesan dari alamat apa pun. Dan host ini muncul setiap kali ketika admin lalai memunculkan server mail, dan ini sering terjadi. Akibatnya, penjahat dunia maya meningkatkan server sementara atau menginfeksi komputer pengguna yang mengirim spam melalui host relay ini tanpa izin. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/im/ml/ftimml9dpl0jriux1qzfyk4vxkm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, beberapa penyedia Internet memblokir koneksi pengguna apa pun ke port 25.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f2/zd/w9/f2zdw98_ws_lxyyldagtxnhuaf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Port ini terbuka antara server di Internet, tetapi mereka membuat layanan terpisah untuk pengguna - MSA (agen pengiriman pesan - agen pengirim), sehingga memisahkan koneksi pengguna dari koneksi server yang masih berkomunikasi melalui MTA. Secara umum, MSA bahkan bekerja pada port 25, tetapi port resmi untuknya adalah 587. Jadi apa yang mencegah spammer menggunakan port ini? Fakta bahwa MSA, sebagai suatu peraturan, membutuhkan otorisasi pengguna. Ini bukan satu-satunya alasan keberadaan MSA - karena MSA berfungsi dengan klien email, lebih baik dioptimalkan untuk pekerjaan klien - segera memperingatkan setiap kesalahan dalam pesan, misalnya, tidak adanya alamat domain penerima.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nk/in/xg/nkinxgm7k5y9--jpyllipbfbej4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan akhirnya, mari ikuti proses pengiriman pesan email. </font><font style="vertical-align: inherit;">Untuk melakukan ini, gunakan wireshark, klien email dan akun gmail. </font><font style="vertical-align: inherit;">Semuanya dimulai dengan handshake TCP standar, setelah sesi SMTP dimulai. </font><font style="vertical-align: inherit;">Dalam sesi tersebut, klien surat dan server saling menyapa, setelah klien surat menawarkan untuk mengenkripsi sesi, server setuju, setelah itu kunci dipertukarkan dan sesi TLSv1.3 dimulai, setelah itu klien login dienkripsi dan mengirim pesan yang tidak terlihat untuk pencegat lalu lintas.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id495242/index.html">5NO - NodeJS ORM untuk Postgres</a></li>
<li><a href="../id495246/index.html">Spesialis SAP: Siapa dan Bagaimana Menjadi Satu</a></li>
<li><a href="../id495248/index.html">Peran isolasi diri dan mencuci tangan</a></li>
<li><a href="../id495250/index.html">Apakah gamepad memiliki masa depan?</a></li>
<li><a href="../id495254/index.html">Simulasi serangan cyber yang ditargetkan, Tim Merah, Pentest, pemindaian kerentanan. Pro dan kontra dari berbagai metode</a></li>
<li><a href="../id495258/index.html">Bagaimana Zoom menjadi perusahaan terpenting di era coronavirus</a></li>
<li><a href="../id495262/index.html">Praktik peningkatan versi PostgreSQL. Andrey Salnikov</a></li>
<li><a href="../id495266/index.html">E-learning Renaissance. Mengapa 2020 akan menunjukkan semua keunggulan pembelajaran jarak jauh</a></li>
<li><a href="../id495268/index.html">Kasus UI / UX: otomatisasi parkir bandara</a></li>
<li><a href="../id495272/index.html">Emulator SNES hanya berjarak beberapa piksel dari kesempurnaan absolut</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>