<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚐 🎅🏿 🏙️ Schemaanimation in SCADA ♾ 🌏 🕵🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bei der Erstellung von HMI besteht die Aufgabe häufig darin, eine Abbildung einer komplexen Schaltung verwandter Elemente zu erstellen. Dies können ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Schemaanimation in SCADA</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487738/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei der Erstellung von HMI besteht die Aufgabe häufig darin, eine Abbildung einer komplexen Schaltung verwandter Elemente zu erstellen. </font><font style="vertical-align: inherit;">Dies können verzweigte Pipelinesysteme, Elektrizität usw. sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können sich natürlich auf die Anzeige von Schlüsselelementen (Absperrschieber, Leistungsschalter) beschränken. Je größer der Stromkreis, desto schwieriger ist es, ein vollständiges Bild zu erstellen und die korrekten Aktionen des Bedieners sicherzustellen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/js/86/tr/js86trkeud1o6qilw9cdjckia8s.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Artikel beschreibt das Färben von Elementen solcher Schemata, beschreibt die Lösungsmethode für Simatic WinCC v7 und deren Implementierung in Simargl SCADA. </font><font style="vertical-align: inherit;">Wenn Sie nicht mit WinCC arbeiten müssen, können Sie direkt am Ende des Artikels nachsehen - es gibt ein merkwürdiges Video.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für eine visuellere Darstellung, warum all dies notwendig ist, nehmen wir ein kleines einfaches Schema.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zm/7-/rm/zm7-rmshnfpa9zuahdxt6m_mdfo.png" alt="Bild"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich nun vor, was passieren wird, wenn eine Operation vorliegt. </font><font style="vertical-align: inherit;">Wie lange dauert es, den Weg eines Produkts durch ein Pipelinesystem zu verfolgen? </font><font style="vertical-align: inherit;">Wir bewaffnen uns mit einer Stoppuhr.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bereit? </font><font style="vertical-align: inherit;">Gehen!</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/iq/l8/jt/iql8jtcvyifvukrjviudd-s4mxu.png" alt="image"></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach meinen Beobachtungen dauert es 10 - 15 Sekunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und erinnern Sie sich jetzt daran, dass (plötzlich) mehrere Operationen gleichzeitig ausgeführt werden können. </font><font style="vertical-align: inherit;">Dies „kompliziert“ die Aufgabe. </font><font style="vertical-align: inherit;">Bist du bereit, dich erneut zu testen?</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gehen!</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/zl/oh/-dzloh6cxb2zcwpqzpdiwlolmm0.png" alt="image"></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Worte meines Kollegen in eine anständige Sprache übersetzen: „Das ist eine Gelegenheit! Während Sie die zweite Route verfolgen, werden Sie die erste sehr vergessen. Was für ein wunderbares und praktisches Schema! “ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber das Schema ist wirklich einfach - es gibt nicht einmal Lesungen von Instrumenten und verschiedenen Signaturen (ein besonderes Hallo an die Fans, um "dreidimensionale" Pfeifen zu zeichnen). In der Praxis kann es schlimmer sein. Ich habe deutlich größere Schemata getroffen (mehr als 400 Ventile). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was kann ein Bediener mit einer solchen Nachahmung tun? Öffnen Sie im besten Fall langsam die Absperrschieber entlang der Strecke und hoffen Sie, dass er sich nicht geirrt hat. Was aber, wenn das Umschalten schnell erfolgen muss und die Kosten des Fehlers hoch sind?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Ausweg aus dieser Situation ist offensichtlich - es ist notwendig, die Linien entlang der Route zu färben, und es ist ratsam, dies vor der Kontrollaktion zu tun. </font><font style="vertical-align: inherit;">Seltsamerweise sah ich selbst bei teuren SCADA-Paketen keine sofort einsatzbereite Lösung. </font><font style="vertical-align: inherit;">Ein Versuch, jede Zeile manuell zu tönen, droht das Setup fast bis unendlich zu verzögern.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lösung für WinCC v7</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe ein solches Problem basierend auf WinCC v7 gelöst. Leider habe ich gemäß den Vertragsbedingungen kein Recht, eine fertige Lösung vorzulegen, aber ich kann eine mögliche Lösung beschreiben. Plötzlich wird jemand hilfreich sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde sofort feststellen, dass es sich um die WinCC Version 7-Produktfamilie handelt, da die Möglichkeit besteht, VBA zu verwenden. Es ist zu warnen, alles, was unten beschrieben wird, ist eher ein Hack, wird aus Hoffnungslosigkeit verwendet und ist nicht in allen Fällen geeignet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde die Diskussion in Bezug auf Rohre und Ventile fortsetzen, obwohl natürlich bei Stromversorgungssystemen alles gleich sein wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teilen Sie das Schema mental in Abschnitte ein, sodass auf jeder Seite nur eine Eingabe / Ausgabe vorhanden ist. Jene. Wenn ein Auslass in das Rohr geschnitten wird, müssen drei Abschnitte hergestellt werden: vor dem Zweig, dann der Zweig selbst.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ein Diagramm zu erstellen, müssen Sie zwei Arten von Standardgrafikobjekten verwenden: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Connector (zum Zeichnen von Linien) und Circle (zum Erstellen von Kontrollpunkten des Diagramms). Der Anschluss ist erforderlich, da Sie damit bestimmen können, welche Objekte in der Schaltung im Gegensatz zur üblichen Leitung verbunden sind. Der Standardkreis sollte in CustomObject überarbeitet werden. Dies vermeidet Verwirrung beim Sortieren von Elementen des Mnemonikschemas und gibt den Eigenschaften bequeme Namen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Teil der Kontrollpunkte entspricht den Verbindungsstellen der Rohrleitungen und ein Teil den Absperrschieber. Für letztere wählen wir eine nicht verwendete Eigenschaft aus und weisen eine VBS-Aktion zu, wobei wir eine Konstante erstellen und ihr einen Zeichenfolgenwert mit dem Namen des Ventils zuweisen:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4a/4a/6s/4a4a6sqjj2s_tn7vq-o87itgkhk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Nächstes schreiben wir ein Skript in VBA, das alle Bildschirmelemente durchläuft und für jeden Connector eine Liste indirekt verbundener Latches erstellt, sodass Sie letztendlich VBS-Text für die BorderColor-Eigenschaft erstellen können. Dies kann durch die Tatsache erreicht werden, dass Connector zwei Eigenschaften hat - TopConnectedObjectName und BottomConnectedObjectName, die in VBA verfügbar sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis dieses Skripts sieht ungefähr so ​​aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2j/sg/io/2jsgiom-vpl8c5vahyyd3nsutro.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D1 und D2 - Arrays mit den Namen der Ventile; TubeColor - eine Funktion, die je nach Zustand der Ventile die Farbe und den Linienstil zurückgibt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein wichtiger Punkt: Wenn Sie ein VBS-Skript in ein Element schreiben, müssen Sie auch die Trigger ändern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der TubeColor-Funktion müssen je nach technologischer Situation alle Farbregeln festgelegt werden. Natürlich muss TubeColor im globalen Skript gerendert werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann beginnt der Kampf um Leistung, Optimierung von VBS usw., da WinCC kaum große Mnemonikdiagramme übertragen kann. </font><font style="vertical-align: inherit;">Aber wir müssen den Kollegen von Siemens Tribut zollen. Die Geschwindigkeit von VBS hat sich, wenn ich mich nicht irre, gegenüber Version 7.3 erheblich erhöht, was das Leben der Entwickler von angewandten Projekten erheblich vereinfacht hat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung der Implementierung in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simargl SCADA</font></font></a></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Zeichnen animierter Schemata enthält Simargl SCADA zwei Widgets: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SPipeScene - eine Szene zum Zeichnen von Linien und Festlegen von Farbregeln; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SPipe - um Knotenpunkte anzugeben und Änderungen im Zustand der Feldausrüstung anzuzeigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Wesentlichen läuft der Prozess darauf hinaus, einfach die Knotenpunkte der Schaltung zu platzieren, Eigenschaften an Tag-Werte zu binden und Widgets über der Szene zu platzieren, die den Status des Geräts anzeigen. </font><font style="vertical-align: inherit;">Es sieht alles ungefähr so ​​aus:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist merkwürdig, dass zum Erstellen der eigentlichen Schaltung überhaupt kein Code geschrieben werden musste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Demoversion von Simargl SCADA, die Dokumentation und die Projektquellen finden Sie im Video auf der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Facebook-Seite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487720/index.html">Zum Wettbewerbskorutinismus (am Beispiel der reaktiven Programmierung)</a></li>
<li><a href="../de487724/index.html">BlazingPizza: Blazor App von Anfang bis Ende. Teil 2. Fügen Sie eine Komponente hinzu</a></li>
<li><a href="../de487728/index.html">@ Pythonetc-Zusammenstellung, Januar 2020</a></li>
<li><a href="../de487730/index.html">Verarbeitung natürlicher Sprache. Ergebnisse 2019 und Trends für 2020</a></li>
<li><a href="../de487734/index.html">Beschleunigung des Entity Framework-Kerns</a></li>
<li><a href="../de487740/index.html">Zusammenbau eines tragbaren Magnetometers</a></li>
<li><a href="../de487742/index.html">Arbitrage-Handel (Bellman-Ford-Algorithmus)</a></li>
<li><a href="../de487744/index.html">FARO stellt den FOCUS S 70 Laser 3D Scanner vor</a></li>
<li><a href="../de487746/index.html">Ewig</a></li>
<li><a href="../de487748/index.html">$ 3 Hardware-Verschlüsselungsschlüssel - ist das möglich?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>