<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦖 🤙🏿 🧑🏼‍🤝‍🧑🏻 Naskah: perilaku tidak sehat atau indulgensi keandalan 🙂 🖲️ 👩‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tujuannya adalah untuk menunjukkan di mana TS memberikan ilusi keamanan, yang memungkinkan Anda untuk mendapatkan kesalahan saat program sedang berjal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Naskah: perilaku tidak sehat atau indulgensi keandalan</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492106/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tujuannya adalah untuk menunjukkan di mana TS memberikan ilusi keamanan, yang memungkinkan Anda untuk mendapatkan kesalahan saat program sedang berjalan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak akan membicarakan bug, di TS ada cukup </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.500 bug terbuka dan 6.000 ditutup ('is: masalah adalah: label terbuka: Bug'). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua contoh akan dipertimbangkan dengan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode ketat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TS </font><font style="vertical-align: inherit;">aktif (menulis artikel sambil memahami)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanpa "any": "as any", "Objects", "Function", {[key: string]: tidak diketahui}</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanpa "apa pun" tersirat: (noImplicitAny): impor yang tidak diketik (file JS murni), inferensi jenis yang salah</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanpa tebakan salah tentang jenis: respons dari server, mengetik pustaka pihak ketiga</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Kandungan: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipe nominal, tipe khusus - ketika semuanya tampak sama, tetapi sangat berbeda</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians, tipe tepat - tentang hubungan antar jenis</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembatalan penyempurnaan - bicara tentang kepercayaan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengecualian - apakah layak untuk mengakuinya ketika dikacaukan?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi yang tidak aman - kepercayaan diri tidak selalu baik</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasing Bonus - Pengecekan Jenis pada Tahap Tinjauan PR</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></li>
</ul><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah sulit untuk menulis fungsi untuk menambahkan dua angka dalam JS? </font><font style="vertical-align: inherit;">Ambil implementasi yang naif</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sum</span>(<span class="hljs-params">a, b</span>) </span>{
	<span class="hljs-keyword">return</span> a + b;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita periksa implementasi `sum (2, 2) === 4` kami, apakah semuanya berjalan dengan baik? </font><font style="vertical-align: inherit;">Tidak juga, ketika kita mendeskripsikan suatu fungsi, kita harus memikirkan semua jenis nilai input, serta fungsi yang dapat dikembalikan</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">1.1</span> + <span class="hljs-number">2.7</span>   <span class="hljs-comment">// 3.8000000000000003</span>
<span class="hljs-literal">NaN</span> + <span class="hljs-number">2</span>     <span class="hljs-comment">// NaN</span>
<span class="hljs-number">99999999999999992</span> + <span class="hljs-number">99999999999999992</span> <span class="hljs-comment">// 200000000000000000</span>
<span class="hljs-number">2n</span> + <span class="hljs-number">2</span>      <span class="hljs-comment">// Uncaught TypeError: </span>
            <span class="hljs-comment">// Cannot mix BigInt and other types, use explicit conversions.</span>
{} + <span class="hljs-literal">true</span>   <span class="hljs-comment">// 1</span>
<span class="hljs-number">2</span> + <span class="hljs-string">'2'</span>     <span class="hljs-comment">// '22'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tingkat kesehatan adalah kemampuan penganalisa untuk membuktikan bahwa tidak ada kesalahan saat program sedang berjalan. Jika program diterima oleh penganalisa, maka dijamin aman. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program aman adalah program yang dapat bekerja selamanya tanpa kesalahan. Itu program tidak akan crash atau melempar kesalahan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program yang benar - program yang melakukan apa yang seharusnya dan tidak melakukan apa yang seharusnya tidak. Kebenaran tergantung pada pelaksanaan logika bisnis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jenis dapat membuktikan bahwa program secara keseluruhan aman, dan menguji bahwa program tersebut aman dan benar hanya dalam data uji (cakupan 100%, tidak adanya "mutan" dari stryker, lulus tes berbasis properti dan sebagainya tidak dapat membuktikan apa pun, dan lisensi mengurangi risiko). Ada legenda yang membuktikan teorema dapat membuktikan kebenaran program.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penting untuk memahami filosofi TS, untuk memahami apa yang coba dipecahkan oleh alat dan, yang penting, apa yang tidak coba dipecahkan. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan tentang Soundness</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
TS melompati beberapa operasi yang tidak yakin pada tahap kompilasi. </font><font style="vertical-align: inherit;">Tempat-tempat dengan perilaku tidak sehat dipikirkan dengan cermat. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tujuan desain</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bukan tujuan untuk TS - Untuk membuat sistem tipe dengan jaminan keamanan, alih-alih fokus pada keseimbangan antara keselamatan dan produktivitas </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh struktur: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalahnya adalah perilaku yang tidak aman, daftar mungkin tidak lengkap, ini yang saya temukan di artikel, laporan, Masalah TS git. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proposal adalah masalah TS terbuka 3-4 tahun yang lalu, dengan banyak komentar dan penjelasan menarik oleh penulis </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
.Tip - IMHO penulis, apa yang penulis anggap praktik yang baik</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengetikan struktural vs Nominal</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengetikan Struktural vs Nominal 1. Masalah</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengetik struktural</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ketika membandingkan jenis tidak memperhitungkan nama mereka atau di mana mereka dinyatakan, dan jenis dibandingkan menurut "struktur". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami ingin mengirim surat `sendEmail` ke alamat yang benar` ValidatedEmail`, ada fungsi untuk memeriksa alamat` validateEmail` yang mengembalikan alamat yang benar` ValidatedEmail`. </font><font style="vertical-align: inherit;">Sayangnya TS memungkinkan Anda untuk mengirim string apa pun ke `sendEmail`, karena </font><font style="vertical-align: inherit;">`ValidatedEmail` untuk TS tidak berbeda dengan` string`</font></font><br>
<br>
<pre><code class="javascript hljs">type ValidatedEmail = string;<font></font>
declare <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateEmail</span>(<span class="hljs-params">email: string</span>): <span class="hljs-title">ValidatedEmail</span>;

<span class="hljs-title">declare</span> <span class="hljs-title">function</span> <span class="hljs-title">sendEmail</span>(<span class="hljs-params">mail: ValidatedEmail</span>): <span class="hljs-title">void</span>;
<span class="hljs-title">sendEmail</span>(<span class="hljs-params">validateEmail(<span class="hljs-string">"asdf@gmail.com"</span></span>));

// <span class="hljs-title">Should</span> <span class="hljs-title">be</span> <span class="hljs-title">error</span>!
<span class="hljs-title">sendEmail</span>(<span class="hljs-params"><span class="hljs-string">"asdf@gmail.com"</span></span>);</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengetikan Struktural vs Nominal 1. Penawaran</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/issues/202</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Masukkan kata kunci `nominal` sehingga jenisnya diperiksa secara nominal. </font><font style="vertical-align: inherit;">Sekarang kita bisa melarang lewat `string` di mana` ValidatedEmail` diharapkan</font></font><br>
<br>
<pre><code class="javascript hljs">nominal type ValidatedEmail = string;<font></font>
declare <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateEmail</span>(<span class="hljs-params">email: string</span>): <span class="hljs-title">ValidatedEmail</span>;

<span class="hljs-title">declare</span> <span class="hljs-title">function</span> <span class="hljs-title">sendEmail</span>(<span class="hljs-params">mail: ValidatedEmail</span>): <span class="hljs-title">void</span>;
<span class="hljs-title">sendEmail</span>(<span class="hljs-params">validateEmail(<span class="hljs-string">'asdf@gmail.com'</span></span>));

// <span class="hljs-title">Error</span>!
<span class="hljs-title">sendEmail</span>(<span class="hljs-params"><span class="hljs-string">'asdf@gmail.com'</span></span>);</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengetikan Struktural vs Nominal 1. Tip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita dapat membuat tipe `Buram`, yang akan mengambil sebagian` T` dan memberinya keunikan dengan menggabungkannya dengan tipe yang dibuat dari `K` yang dilewati. </font><font style="vertical-align: inherit;">`K` dapat berupa simbol unik (` simbol unik`) atau string (maka akan diperlukan untuk memastikan bahwa string ini unik).</font></font><br>
<br>
<pre><code class="javascript hljs">type Opaque&lt;K extends symbol | string, T&gt; <font></font>
	= T &amp; { [X <span class="hljs-keyword">in</span> K]: never };<font></font>
<font></font>
declare <span class="hljs-keyword">const</span> validatedEmailK: unique symbol;<font></font>
type ValidatedEmail = Opaque&lt;<span class="hljs-keyword">typeof</span> validatedEmailK, string&gt;;
<span class="hljs-comment">// type ValidatedEmail = Opaque&lt;'ValidatedEmail', string&gt;;</span><font></font>
<font></font>
declare <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateEmail</span>(<span class="hljs-params">email: string</span>): <span class="hljs-title">ValidatedEmail</span>;

<span class="hljs-title">declare</span> <span class="hljs-title">function</span> <span class="hljs-title">sendEmail</span>(<span class="hljs-params">mail: ValidatedEmail</span>): <span class="hljs-title">void</span>;
<span class="hljs-title">sendEmail</span>(<span class="hljs-params">validateEmail(<span class="hljs-string">'asdf@gmail.com'</span></span>));

// <span class="hljs-title">Argument</span> <span class="hljs-title">of</span> <span class="hljs-title">type</span> '"<span class="hljs-title">asdf</span>@<span class="hljs-title">gmail</span>.<span class="hljs-title">com</span>"' <span class="hljs-title">is</span> <span class="hljs-title">not</span> <span class="hljs-title">assignable</span>
//  <span class="hljs-title">to</span> <span class="hljs-title">parameter</span> <span class="hljs-title">of</span> <span class="hljs-title">type</span> '<span class="hljs-title">Opaque</span>&lt;<span class="hljs-title">unique</span> <span class="hljs-title">symbol</span>, <span class="hljs-title">string</span>&gt;'.
<span class="hljs-title">sendEmail</span>(<span class="hljs-params"><span class="hljs-string">'asdf@gmail.com'</span></span>);</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengetikan Struktural vs Nominal 2. Masalah</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki kelas Dolar dan Euro, masing-masing kelas memiliki metode menambahkan untuk menambahkan Dolar ke Dolar dan Euro ke Euro. </font><font style="vertical-align: inherit;">Untuk TS, kelas-kelas ini secara struktural sama dan kita dapat menambahkan Dolar ke Euro.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dollar</span> </span>{
  <span class="hljs-attr">value</span>: number;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(value: number) {
    <span class="hljs-keyword">this</span>.value = value;<font></font>
  }<font></font>
<font></font>
  add(dollar: Dollar): Dollar {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Dollar(dollar.value + <span class="hljs-keyword">this</span>.value);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Euro</span> </span>{
  <span class="hljs-attr">value</span>: number;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(value: number) {
    <span class="hljs-keyword">this</span>.value = value;<font></font>
  }<font></font>
<font></font>
  add(euro: Euro): Euro {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Euro(euro.value + <span class="hljs-keyword">this</span>.value);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> dollars100 = <span class="hljs-keyword">new</span> Dollar(<span class="hljs-number">100</span>);
<span class="hljs-keyword">const</span> euro100 = <span class="hljs-keyword">new</span> Euro(<span class="hljs-number">100</span>);<font></font>
<font></font>
<span class="hljs-comment">// Correct</span><font></font>
dollars100.add(dollars100);<font></font>
euro100.add(euro100);<font></font>
<font></font>
<span class="hljs-comment">// Should be error!</span>
dollars100.add(euro100);</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengetikan Struktural vs. Nominal 2. Penawaran</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/issues/202</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kalimatnya sama, dengan `nominal`, tetapi karena </font><font style="vertical-align: inherit;">Karena kelas secara ajaib dapat menjadi Nominal (lebih lanjut tentang itu nanti), kemungkinan membuat transformasi seperti itu dengan cara yang lebih eksplisit dipertimbangkan.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengetikan Struktural vs Nominal 1. Tip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kelas memiliki bidang pribadi (asli dengan `#` atau dari TS c `private`), maka kelas secara ajaib menjadi Nominal, nama dan nilai dapat berupa apa saja. </font><font style="vertical-align: inherit;">`!` (Penentuan penugasan pasti) digunakan untuk mencegah TS bersumpah pada bidang yang tidak diinisialisasi (strictNullChecks, flag strictPropertyInitialization diaktifkan).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dollar</span> </span>{
  <span class="hljs-comment">// #desc!: never;</span><font></font>
  private desc!: never;<font></font>
  value: number;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(value: number) {
    <span class="hljs-keyword">this</span>.value = value;<font></font>
  }<font></font>
<font></font>
  add(dollar: Dollar) {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Dollar(dollar.value + <span class="hljs-keyword">this</span>.value);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Euro</span> </span>{
  <span class="hljs-comment">// #desc!: never;</span><font></font>
  private desc!: never;<font></font>
  value: number;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(value: number) {
    <span class="hljs-keyword">this</span>.value = value;<font></font>
  }<font></font>
<font></font>
  add(euro: Euro) {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Euro(euro.value + <span class="hljs-keyword">this</span>.value);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> dollars100 = <span class="hljs-keyword">new</span> Dollar(<span class="hljs-number">100</span>);
<span class="hljs-keyword">const</span> euro100 = <span class="hljs-keyword">new</span> Euro(<span class="hljs-number">100</span>);<font></font>
<font></font>
<span class="hljs-comment">// Correct</span><font></font>
dollars100.add(dollars100);<font></font>
euro100.add(euro100);<font></font>
<font></font>
<span class="hljs-comment">// Error: Argument of type 'Euro' is not assignable to parameter of type 'Dollar</span><font></font>
dollars100.add(euro100);<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians 1. Masalah</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opsi pemrograman, singkatnya, adalah kemampuan untuk melewati Supertype / Subtype di sana, di mana Type diharapkan. </font><font style="vertical-align: inherit;">Misalnya, ada hirarki Shape -&gt; Circle -&gt; Rectangle, apakah mungkin untuk mentransfer atau mengembalikan Shape / Rectangle jika Circle diharapkan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Varian dalam pemrograman </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita bisa meneruskan tipe dengan bidang di mana angka terletak pada fungsi yang mengharapkan bidang sebagai string atau angka, dan memutasi objek yang ditransmisikan dalam tubuh, mengubah bidang menjadi string. </font><font style="vertical-align: inherit;">Itu </font><font style="vertical-align: inherit;">`{status: number} sebagai {status: number | </font><font style="vertical-align: inherit;">string} as {status: string} `di sini ada trik seperti mengubah angka menjadi string, menyebabkan </font><font style="vertical-align: inherit;">kesalahan </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kejutan</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeStatus</span>(<span class="hljs-params">arg: { status: number | string }</span>) </span>{<font></font>
  arg.status = <span class="hljs-string">"NotFound"</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> error: { <span class="hljs-attr">status</span>: number } = { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> };<font></font>
changeStatus(error);<font></font>
<font></font>
<span class="hljs-comment">// Error: toFixed is not a function</span>
<span class="hljs-built_in">console</span>.log(error.status.toFixed());</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians 1. Penawaran</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Microsoft/TypeScript/issues/10717</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Disarankan untuk memperkenalkan `masuk / keluar` untuk secara eksplisit membatasi kovarians / contravariance untuk obat generik.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeStatus</span>&lt;
  <span class="hljs-title">out</span> <span class="hljs-title">T</span> <span class="hljs-title">extends</span> </span>{
    <span class="hljs-attr">status</span>: number | string;<font></font>
  }<font></font>
&gt;(arg: T) {<font></font>
  arg.status = <span class="hljs-string">"NotFound"</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> error: { <span class="hljs-attr">status</span>: number } = { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> };
<span class="hljs-comment">// Error!</span><font></font>
changeStatus(error);<font></font>
<font></font>
<span class="hljs-built_in">console</span>.log(error.status.toFixed());</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians 1. Tip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kami bekerja dengan struktur yang tidak dapat diubah, maka tidak akan ada kesalahan seperti itu (kami telah mengaktifkan flag strictFunctionTypes).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeStatus</span>(<span class="hljs-params">arg: Readonly&lt;{ status: number | string }&gt;</span>) </span>{
  <span class="hljs-comment">// Error: Cannot assign, status is not writable</span>
  arg.status = <span class="hljs-string">"NotFound"</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> error: Readonly&lt;{ <span class="hljs-attr">status</span>: number }&gt; = { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> };<font></font>
changeStatus(error);<font></font>
<font></font>
<span class="hljs-built_in">console</span>.log(error.status.toFixed());</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians 1. Bonus</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Readonly dapat dialihkan ke </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Microsoft/TypeScript/issues/13347 </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/pull/6532#issuecomment-174356151</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
, tetapi jika kita membuat tipe Readonly, TS tidak akan melarang untuk beralih ke fungsi di mana tidak diharapkan Readonly `Readonly &lt;{status readonly: number}&gt; sebagai {status: number | </font><font style="vertical-align: inherit;">string} sebagai {status: string} `</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeStatus</span>(<span class="hljs-params">arg: { status: number | string }</span>) </span>{<font></font>
  arg.status = <span class="hljs-string">"NotFound"</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> error: Readonly&lt;{ readonly status: number }&gt; <font></font>
  = { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> };<font></font>
changeStatus(error);<font></font>
<font></font>
<span class="hljs-comment">// Error: toFixed is not a function</span>
<span class="hljs-built_in">console</span>.log(error.status.toFixed());</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians 2. Masalah</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Objek dapat berisi bidang tambahan yang jenisnya tidak memiliki: `{message: string; </font><font style="vertical-align: inherit;">status: string} as {message: string} `. </font><font style="vertical-align: inherit;">Karena itu beberapa operasi mungkin tidak aman</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> error: { <span class="hljs-attr">message</span>: string; status: string } = {
  <span class="hljs-attr">message</span>: <span class="hljs-string">"No data"</span>,
  <span class="hljs-attr">status</span>: <span class="hljs-string">"NotFound"</span><font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateError</span>(<span class="hljs-params">arg: { message: string }</span>) </span>{
  <span class="hljs-keyword">const</span> defaultError = { <span class="hljs-attr">message</span>: <span class="hljs-string">"Not found"</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> };
  <span class="hljs-keyword">const</span> newError: { <span class="hljs-attr">message</span>: string; status: number }<font></font>
    = { ...defaultError, ...arg };<font></font>
  <font></font>
  <span class="hljs-comment">// Error: toFixed is not a function</span>
  <span class="hljs-built_in">console</span>.log(newError.status.toFixed());<font></font>
}<font></font>
<font></font>
updateError(error);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TS berpikir bahwa sebagai hasil dari penggabungan, status `{... {message: string, status: number}, ... {message: string}}` akan berupa angka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada kenyataannya, `{... {message:" Not found ", status: 404}, ... {message:" No data ", status:" NotFound "},}` status - string.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians 2. Penawaran</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/issues/12936</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Memperkenalkan tipe `Exact` atau sintaksis serupa untuk mengatakan bahwa suatu tipe tidak dapat berisi bidang tambahan.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> error: Exact&lt;{ <span class="hljs-attr">message</span>: string; }&gt; = {
  <span class="hljs-attr">message</span>: <span class="hljs-string">"No data"</span>,<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateError</span>(<span class="hljs-params">arg: Exact&lt;{ message: string }&gt;</span>) </span>{
  <span class="hljs-keyword">const</span> defaultError = {  <span class="hljs-attr">message</span>: <span class="hljs-string">"Not found"</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">404</span>, };
  <span class="hljs-comment">// Can spread only Exact type!</span>
  <span class="hljs-keyword">const</span> newError = { ...defaultError, ...arg };
  <span class="hljs-built_in">console</span>.log(newError.status.toFixed());<font></font>
}<font></font>
<font></font>
updateError(error);</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik varians 2. Tip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gabungkan objek dengan mendaftarkan bidang secara eksplisit atau memfilter bidang yang tidak dikenal.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> error: { <span class="hljs-attr">message</span>: string; status: string } = {
  <span class="hljs-attr">message</span>: <span class="hljs-string">"No data"</span>,
  <span class="hljs-attr">status</span>: <span class="hljs-string">"NotFound"</span><font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateError</span>(<span class="hljs-params">arg: { message: string }</span>) </span>{
  <span class="hljs-keyword">const</span> defaultError = { <span class="hljs-attr">message</span>: <span class="hljs-string">"Not found"</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> };
  <span class="hljs-comment">// Merge explicitly or filter unknown fields</span>
  <span class="hljs-keyword">const</span> newError = { ...defaultError, <span class="hljs-attr">message</span>: arg.message };
  <span class="hljs-built_in">console</span>.log(newError.status.toFixed());<font></font>
}<font></font>
<font></font>
updateError(error);</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyempurnaan penyempurnaan. </font><font style="vertical-align: inherit;">Masalah</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah kami membuktikan sesuatu tentang keadaan eksternal, fungsi panggilan tidak aman, karena </font><font style="vertical-align: inherit;">Tidak ada jaminan bahwa fungsi tidak mengubah keadaan eksternal ini:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logAge</span>(<span class="hljs-params">name: string, age: number</span>) </span>{
  <span class="hljs-comment">// 2nd call -  Error: toFixed is not a function</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${name}</span> will lose <span class="hljs-subst">${age.toFixed()}</span>`</span>);<font></font>
  person.age = <span class="hljs-string">"PLACEHOLDER"</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> person: { <span class="hljs-attr">name</span>: string; age: number | string } = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Person"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">42</span><font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> person.age === <span class="hljs-string">"number"</span>) {<font></font>
  logAge(person.name, person.age);<font></font>
  <span class="hljs-comment">// refinement should be invalidated</span><font></font>
  logAge(person.name, person.age);<font></font>
}<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyempurnaan penyempurnaan. </font><font style="vertical-align: inherit;">Kalimat</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/issues/7770#issuecomment-334919251</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tambahkan pengubah `murni` untuk fungsi, ini setidaknya akan memungkinkan Anda untuk mempercayai fungsi tersebut</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyempurnaan penyempurnaan. </font><font style="vertical-align: inherit;">Tip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gunakan struktur data yang tidak berubah, maka pemanggilan fungsi akan menjadi apriori aman untuk pemeriksaan sebelumnya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jenis aliran sangat kuat sehingga tidak memiliki semua masalah yang tercantum di atas, tetapi sangat berjalan sehingga saya tidak akan merekomendasikan menggunakannya.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengecualian. </font><font style="vertical-align: inherit;">Masalah</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TS tidak membantu untuk bekerja dengan Pengecualian dengan cara apa pun, tidak ada yang jelas pada tanda tangan fungsi.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { JokeError } <span class="hljs-keyword">from</span> <span class="hljs-string">"../helpers"</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJoke</span>(<span class="hljs-params">isFunny: boolean</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">if</span> (isFunny) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> JokeError(<span class="hljs-string">"No funny joke"</span>);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-string">"Duh"</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> joke: string = getJoke(<span class="hljs-literal">true</span>);
<span class="hljs-built_in">console</span>.log(joke);
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengecualian. </font><font style="vertical-align: inherit;">Kalimat</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/issues/13219</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Disarankan untuk memperkenalkan sintaksis yang memungkinkan secara eksplisit menjelaskan Pengecualian dalam tanda tangan fungsi</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { JokeError } <span class="hljs-keyword">from</span> <span class="hljs-string">'../helpers'</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJoke</span>(<span class="hljs-params">isFunny: boolean</span>): <span class="hljs-title">string</span> | <span class="hljs-title">throws</span> <span class="hljs-title">JokeError</span> </span>{
  <span class="hljs-comment">/*...*/</span>}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJokeSafe</span>(<span class="hljs-params">isFunny: boolean</span>): <span class="hljs-title">string</span> </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> getJoke(isFunny);<font></font>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> JokeError) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// Should infer error correctly, should cast to never</span>
      <span class="hljs-keyword">return</span> error <span class="hljs-keyword">as</span> never;<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-built_in">console</span>.log(getJokeSafe(<span class="hljs-literal">true</span>));</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengecualian. </font><font style="vertical-align: inherit;">Bonus</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/issues/6283</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Untuk beberapa alasan, dalam TS, definisi tipe untuk Janji mengabaikan jenis kesalahan</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> promise1: <span class="hljs-built_in">Promise</span>&lt;number&gt; = <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-number">42</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> promise: <span class="hljs-built_in">Promise</span>&lt;never&gt; = <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>());<font></font>
<font></font>
<span class="hljs-comment">// typescript/lib</span><font></font>
interface PromiseConstructor {<font></font>
  <span class="hljs-keyword">new</span> &lt;T&gt;(<font></font>
    executor: (<font></font>
      resolve: <span class="hljs-function">(<span class="hljs-params">value?: T | PromiseLike&lt;T&gt;</span>) =&gt;</span> <span class="hljs-keyword">void</span>,
      <span class="hljs-attr">reject</span>: <span class="hljs-function">(<span class="hljs-params">reason?: any</span>) =&gt;</span> <span class="hljs-keyword">void</span>
    ) =&gt; <span class="hljs-keyword">void</span>
  ): <span class="hljs-built_in">Promise</span>&lt;T&gt;;<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengecualian. </font><font style="vertical-align: inherit;">Tip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ambil salah satu wadah seperti Janji, dengan hanya mengetik yang terbaik. </font><font style="vertical-align: inherit;">( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entah contoh implementasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { Either, exhaustiveCheck, JokeError } <span class="hljs-keyword">from</span> <span class="hljs-string">"../helpers"</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getJoke</span>(<span class="hljs-params">isFunny: boolean</span>): <span class="hljs-title">Either</span>&lt;<span class="hljs-title">JokeError</span>, <span class="hljs-title">string</span>&gt; </span>{
  <span class="hljs-keyword">if</span> (isFunny) {
    <span class="hljs-keyword">return</span> Either.left(<span class="hljs-keyword">new</span> JokeError(<span class="hljs-string">"No funny joke"</span>));<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> Either.right(<span class="hljs-string">"Duh"</span>);<font></font>
}<font></font>
<font></font>
getJoke(<span class="hljs-literal">true</span>)
  <span class="hljs-comment">// (parameter) error: JokeError</span>
  .mapLeft(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> JokeError) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"JokeError"</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      exhaustiveCheck(error);<font></font>
    }<font></font>
  })<font></font>
  <span class="hljs-comment">// (parameter) joke: string</span>
  .mapRight(<span class="hljs-function"><span class="hljs-params">joke</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(joke));
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi tidak aman. </font><font style="vertical-align: inherit;">Masalah</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kami memiliki tupel dengan ukuran tetap, maka TS dapat menjamin bahwa ada sesuatu pada indeks yang diminta. </font><font style="vertical-align: inherit;">Ini tidak akan berfungsi untuk array dan TS akan mempercayai kami</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// ReadOnly fixed size tuple</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> constNumbers: readonly [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] <font></font>
  = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;<font></font>
<font></font>
<span class="hljs-comment">// Error: Object is possibly 'undefined'.</span>
<span class="hljs-built_in">console</span>.log(constNumbers[<span class="hljs-number">100</span>].toFixed());<font></font>
<font></font>
<span class="hljs-keyword">const</span> dynamicNumbers: number[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-built_in">console</span>.log(dynamicNumbers[<span class="hljs-number">100</span>].toFixed());
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi tidak aman. </font><font style="vertical-align: inherit;">Kalimat</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/microsoft/TypeScript/issues/13778</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Disarankan untuk menambahkan `tidak terdefinisi` ke tipe pengembalian` T` untuk akses indeks ke array. </font><font style="vertical-align: inherit;">Tetapi dalam kasus ini, ketika mengakses pada indeks apa pun, Anda harus menggunakan `?` Atau melakukan pemeriksaan eksplisit.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// interface Array&lt;T&gt; {</span>
<span class="hljs-comment">//   [n: number]: T | undefined;</span>
<span class="hljs-comment">// }</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> dynamicNumbers: number[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-comment">// Error: Object is possibly 'undefined'.</span>
<span class="hljs-built_in">console</span>.log(dynamicNumbers[<span class="hljs-number">100</span>].toFixed());<font></font>
<font></font>
<span class="hljs-comment">// Optional chaining `?`</span>
<span class="hljs-built_in">console</span>.log(dynamicNumbers[<span class="hljs-number">100</span>]?.toFixed());<font></font>
<font></font>
<span class="hljs-comment">// type refinement</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> dynamicNumbers[<span class="hljs-number">100</span>] === <span class="hljs-string">'number'</span>) {
  <span class="hljs-built_in">console</span>.log(dynamicNumbers[<span class="hljs-number">100</span>].toFixed());<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi tidak aman. </font><font style="vertical-align: inherit;">Tip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar tidak menghasilkan entitas di luar kebutuhan, kami mengambil wadah yang sebelumnya dikenal `Either` dan menulis fungsi aman untuk bekerja dengan indeks, yang akan kembali` Entah &lt;null, T&gt;`.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { Either } <span class="hljs-keyword">from</span> <span class="hljs-string">"../helpers"</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safeIndex</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">
  array: T[],
  index: number,
</span>): <span class="hljs-title">Either</span>&lt;<span class="hljs-title">null</span>, <span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-keyword">if</span> (index <span class="hljs-keyword">in</span> array) {
    <span class="hljs-keyword">return</span> Either.right(array[index]);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> Either.left(<span class="hljs-literal">null</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> dynamicNumbers: number[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<font></font>
<font></font>
safeIndex(dynamicNumbers, <span class="hljs-number">100</span>)<font></font>
  .mapLeft(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Nothing"</span>))<font></font>
  .mapRight(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> el + <span class="hljs-number">2</span>)<font></font>
  .mapRight(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(el.toFixed()));
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus </font><font style="vertical-align: inherit;">Reload fungsi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kita ingin mengatakan bahwa suatu fungsi mengambil beberapa baris dan mengembalikan string atau mengambil beberapa angka dan mengembalikan angka, maka dalam implementasi tanda tangan ini akan berdekatan, dan programmer harus menjamin kebenarannya, tetapi pada TS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS melihat alternatif melalui tipe generik dan kondisional:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a: string, b: string</span>): <span class="hljs-title">string</span>;
<span class="hljs-title">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a: number, b: number</span>): <span class="hljs-title">number</span>;
<span class="hljs-title">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a: string | number,
             b: string | number,
</span>): <span class="hljs-title">string</span> | <span class="hljs-title">number</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${a}</span> + <span class="hljs-subst">${b}</span>`</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> sum: number = add(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>);
<span class="hljs-comment">// Error: toFixed is not a function</span>
sum.toFixed();</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus </font><font style="vertical-align: inherit;">Ketik penjaga</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TS mempercayai programmer bahwa `isSuperUser` dengan benar menentukan siapa` SuperUser` dan jika `Vasya` ditambahkan, tidak akan ada konfirmasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS layak untuk dipikirkan tentang bagaimana kita akan membedakan tipe yang sudah pada tahap union-tagged union mereka</font></font><br>
<br>
<pre><code class="javascript hljs">type SimpleUser = { <span class="hljs-attr">name</span>: string };<font></font>
type SuperUser = { <font></font>
  <span class="hljs-attr">name</span>: string; <font></font>
  isAdmin: <span class="hljs-literal">true</span>; <font></font>
  permissions: string[] <font></font>
};<font></font>
type Vasya = { <span class="hljs-attr">name</span>: string; isAdmin: <span class="hljs-literal">true</span>; isGod: <span class="hljs-literal">true</span> };<font></font>
type User = SimpleUser | SuperUser | Vasya;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSuperUser</span>(<span class="hljs-params">user: User</span>): <span class="hljs-title">user</span> <span class="hljs-title">is</span> <span class="hljs-title">SuperUser</span> </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">"isAdmin"</span> <span class="hljs-keyword">in</span> user &amp;&amp; user.isAdmin;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doSomethings</span>(<span class="hljs-params">user: User</span>) </span>{
  <span class="hljs-comment">// Error: Cannot read property 'join' of undefined</span>
  <span class="hljs-keyword">if</span> (isSuperUser(user)) {
    <span class="hljs-built_in">console</span>.log(user.permissions.join(<span class="hljs-string">","</span>));<font></font>
  }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulannya ada pada tipsnya</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Jenis nominal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Jenis buram, bidang pribadi </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Jenis varians</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Jenis yang tepat, Jenis DeepReadonly </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Pengecualian</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Salah satu monad </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Penyangkalan penyempurnaan </font><font style="vertical-align: inherit;">: Fungsi murni </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Operasi tidak aman (akses indeks)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Either / Mungkin monad </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data tidak dapat diubah, fungsi murni, mon ... Selamat , kami membuktikan bahwa FP itu keren!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temuan</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TS ingin mencapai keseimbangan antara kebenaran dan produktivitas</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes dapat membuktikan keamanan dan kebenaran hanya untuk data uji.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis dapat membuktikan keamanan keseluruhan program.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mutasi - buruk, oke?</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti DZ akan merekomendasikan untuk bermain dengan Flow setelah memperbaiki kesalahan sederhana:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// https://flow.org/try/</span>
declare <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params">arg: { name: string, surname?: string }</span>): <span class="hljs-title">void</span>;
<span class="hljs-title">const</span> <span class="hljs-title">person</span>: </span>{ name: string } =  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Negasi'</span> };
<span class="hljs-comment">// Error</span>
log(person);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh kode, solusi dan analisis masalah, tautan yang bermanfaat di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositori</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id492078/index.html">Materi yang paling penting dan berguna pada coronavirus COVID-19</a></li>
<li><a href="../id492082/index.html">Cara menyederhanakan pengelolaan perangkat rumah dan mengamankannya (berbagi ide tentang Rumah Pintar Kauri)</a></li>
<li><a href="../id492086/index.html">Coronavirus vs Rusia IT-bisnis: apakah perusahaan siap untuk memindahkan karyawan ke lokasi yang jauh?</a></li>
<li><a href="../id492088/index.html">Menguji mesin game Amazon Lumberyard. Pendekatan dan Alat</a></li>
<li><a href="../id492102/index.html">Pembuatan VK chatbot berdasarkan VkBotCore C #</a></li>
<li><a href="../id492108/index.html">Bagaimana menuju ke Silicon Valley: 7 cara untuk itu-startup</a></li>
<li><a href="../id492110/index.html">Menggunakan token cloud dengan dukungan untuk kriptografi Rusia di platform Android</a></li>
<li><a href="../id492112/index.html">Alexander Plyushchev tentang politisasi Internet, digitalisasi kekuasaan dan robot yang akan menggantikan jurnalis (tetapi ini tidak akurat)</a></li>
<li><a href="../id492116/index.html">Mencoba menangani perbedaan yang mencolok dalam kematian akibat coronavirus di Italia dan Korea Selatan</a></li>
<li><a href="../id492118/index.html">5 mitos tentang UPS, penolakan mereka dan situasi nyata</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>