<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚂 😄 😑 Est-il possible d'utiliser Linux Desktop dans une infrastructure Windows? 👦🏽 🆕 🤹🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous! On Habré a soulevé à plusieurs reprises des questions sur la façon de préparer une distribution Linux pour l'entrée dans Active Direct...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Est-il possible d'utiliser Linux Desktop dans une infrastructure Windows?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503566/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour à tous! On Habré a soulevé à plusieurs reprises des questions sur la façon de préparer une distribution Linux pour l'entrée dans Active Directory, ainsi que pour l'intégration avec d'autres serveurs Windows. Dans le même temps, aucun article n'a encore été écrit sur la question de savoir si cela vaut la peine de le faire et si le résultat final vaudra le temps et les efforts consacrés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi cette question s'est-elle posée? On m'a demandé de configurer Linux pour les gars qui sont fatigués des mises à jour et de la gourmandise de Windows 10 (particulièrement rempli de politiques GPO). De plus, l'un des avantages incontestables de Linux (et même ses ardents adversaires le reconnaissent) est son </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ouverture</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gratuite. C'est également un argument important.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un utilisateur régulier dans une entreprise moyenne, l'ordinateur utilise pour Word et Excel, un navigateur, et dans de rares cas, il fonctionne avec une application distante, par exemple via RDP. Un utilisateur inhabituel, comme un programmeur entier, sans difficultés importantes peut demander aux administrateurs de trouver l'IDE requis, Jenkins, git, et de quoi d'autre les programmeurs ont-ils besoin? Messagers, dont l'absence dans Linux dans le prochain article se plaignent, Linux est dans toutes les abondances possibles. Skype, Viber, ICQ, même un client bloqué en Fédération de Russie, entièrement disponible sur les sites officiels, sont parfaitement pris en charge et entièrement identiques dans l'interface utilisateur avec les clients conçus pour Windows.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, vous regardez les exigences des utilisateurs pour le système, les comparez avec les capacités de Linux et vous pensez que les avantages solides, ainsi que les économies sont clairement visibles. Pourquoi, alors, y a-t-il des objections à une si belle idée que de transférer un utilisateur de Windows vers Linux? Juste de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mauvaises</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> habitudes?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne suis pas du tout un utilisateur cool de systèmes d'exploitation ouverts, mais je veux partager une expérience pratique minimale que j'ai acquise (lors du transfert d'utilisateurs de Windows vers Linux). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je souhaite sincèrement que les </font><font style="vertical-align: inherit;">utilisateurs expérimentés Habra </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nada main</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que </font><font style="vertical-align: inherit;">dites-moi où mes actions pourraient être améliorées, et où, peut-être, recommencer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après tout, il se pourrait bien que je ne vois aucun piège connu des camarades plus âgés et plus expérimentés, je serais sincèrement reconnaissant si un utilisateur ordinaire me signalait de tels problèmes. </font><font style="vertical-align: inherit;">J'espère sincèrement que les informations que je présente sont reproductibles.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Préparation d'un référentiel local</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linux (au moins Ubuntu), comme Windows, prend entièrement en charge l'installation réseau / locale. Il serait possible d'omettre cette étape, car linux est également parfaitement installé depuis Internet. Mais étant donné que l'installation du système, la tâche est souvent répétée, nous essaierons de l'automatiser, et afin d'éviter des problèmes inutiles avec un référentiel externe que nous ne contrôlons pas, nous préparerons une machine virtuelle avec un référentiel local sur lequel les fichiers d'installation du système, le fichier de réponses, (et en même temps, tous les logiciels dont nous avons besoin, ainsi que les futures mises à jour). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fichiers d'installation et tous les logiciels supplémentaires, pour la version LTS d'Ubuntu 20.04 Focal Fossa, occupent environ 80 Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant qu'OS pour une machine virtuelle - j'ai utilisé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu Server 20.04</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il s'agit d'une version stable qui sera entièrement prise en charge jusqu'en 2025. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois l'installation terminée, définissez un nom convivial pour notre ordinateur</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /etc/hostname  
<span class="hljs-comment">#      ,</span>
<span class="hljs-comment">#   </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installer le package pour le clonage du référentiel</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt install apt-mirror </code></pre><br>
<pre><code class="bash hljs">sudo nano /etc/apt/mirror.list 
<span class="hljs-comment">#   </span></code></pre> <br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/apt/mirror.list</font></font></b>
                        <div class="spoiler_text"> <br>
<pre><code class="bash hljs">
<span class="hljs-comment">############# config ##################</span>
<span class="hljs-built_in">set</span> base_path    /repo  
<span class="hljs-built_in">set</span> mirror_path  <span class="hljs-variable">$base_path</span>/mirror
<span class="hljs-built_in">set</span> skel_path    <span class="hljs-variable">$base_path</span>/skel
<span class="hljs-built_in">set</span> var_path     <span class="hljs-variable">$base_path</span>/var
<span class="hljs-built_in">set</span> cleanscript <span class="hljs-variable">$var_path</span>/clean.sh
<span class="hljs-built_in">set</span> postmirror_script <span class="hljs-variable">$var_path</span>/postmirror.sh
<span class="hljs-built_in">set</span> run_postmirror 0
<span class="hljs-built_in">set</span> limit_rate 2000000
<span class="hljs-built_in">set</span> nthreads   20
<span class="hljs-built_in">set</span> _tilde 0
<span class="hljs-comment">############# end config ##############</span>
<span class="hljs-comment">#------------------------------------------------------------------------------#</span>
<span class="hljs-comment">#                            OFFICIAL UBUNTU REPOS                               #</span>
<span class="hljs-comment">#------------------------------------------------------------------------------#</span>
<span class="hljs-comment">###### Ubuntu Main Repos</span>
<span class="hljs-comment"># 18.04 mirroring</span><font></font>
deb http://archive.ubuntu.com/ubuntu focal main main/debian-installer restricted universe multiverse<font></font>
deb http://archive.ubuntu.com/ubuntu focal-updates main main/debian-installer restricted universe multiverse<font></font>
deb http://archive.ubuntu.com/ubuntu focal-proposed main restricted universe multiverse<font></font>
deb http://archive.ubuntu.com/ubuntu focal-backports main restricted universe multiverse<font></font>
deb http://archive.ubuntu.com/ubuntu focal-security main main/debian-installer restricted universe multiverse<font></font>
<font></font>
clean http://archive.ubuntu.com/ubuntu<font></font>
<font></font>
<span class="hljs-comment">#------------------------------------------------------------------------------#</span>
<span class="hljs-comment">#                           UNOFFICIAL UBUNTU REPOS                            #</span>
<span class="hljs-comment">#------------------------------------------------------------------------------#</span>
<span class="hljs-comment">###### 3rd Party Binary Repos</span><font></font>
deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main<font></font>
</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je tiens à noter que dans cette configuration, la capacité de contrôler le nombre de flux et la vitesse de téléchargement des fichiers lors du clonage d'un référentiel est affichée, ainsi que la possibilité de cloner des référentiels externes qui n'appartiennent pas à Canonical est démontré. </font><font style="vertical-align: inherit;">Par exemple, Google Chrome. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, il est à noter qu'en plus de la configuration, il est nécessaire d'enregistrer la branche principale / debian-installer, bien qu'elle soit une enfant de la branche principale. Ce n'était pas évident pour moi, je ne l'ai pas trouvée écrite plus tôt, et au début je ne pouvais pas comprendre quel est le problème.</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-mirror 
<span class="hljs-comment">#   (,   &gt;= 80 Gb) </span>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez exécuter la commande sudo apt-mirror, par exemple, chaque semaine, pour mettre à jour notre référentiel - le «serveur» pour la mise à jour des ordinateurs clients. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple de configuration de la mise à jour automatique d'un référentiel avec un enregistrement des journaux de mise à jour</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /etc/crontab<font></font>
30 02     * * 0   admin      /usr/bin/apt-mirror &gt; /path/to/your.log<font></font>
<span class="hljs-comment">#   02:30</span>
<span class="hljs-comment">#        #https://crontab.guru/examples.html</span>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer un serveur web (pour distribuer des fichiers à nos futurs clients)</font></font></h4><br>
<pre><code class="bash hljs">sudo apt install apache2  <font></font>
ln –s /repo/mirror/archive.ubuntu.com/ /var/www/html/ubuntu <font></font>
<span class="hljs-comment">#(       )</span><font></font>
sudo systemctl restart apache2 <font></font>
<span class="hljs-comment"># ( -).</span></code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour vérifier que tout s'est déroulé comme prévu, vous devez essayer de vous connecter à notre ip via un navigateur. </font><font style="vertical-align: inherit;">En conséquence, nous devrions voir les fichiers du référentiel.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installer tftpd pour installer Ubuntu sur un réseau </font></font></h4><br>
<pre><code class="bash hljs">sudo apt install tftpd-hpa  <font></font>
sudo nano /etc/default/tftpd-hpa </code></pre><br>
<pre><code class="bash hljs">
<span class="hljs-comment"># /etc/default/tftpd-hpa</span>
TFTP_USERNAME=<span class="hljs-string">"tftp"</span>   
TFTP_DIRECTORY=<span class="hljs-string">"/tftpboot"</span>
TFTP_ADDRESS=<span class="hljs-string">"0.0.0.0:69"</span>
TFTP_OPTIONS=<span class="hljs-string">"--secure -l -v -m /etc/tftpd.remap"</span></code></pre><br>
<pre><code class="bash hljs">
<span class="hljs-comment">#   /etc/tftpd.remap    </span>
rg \\/</code></pre><br>
<pre><code class="bash hljs">sudo mkdir /tftpboot  
<span class="hljs-comment">#(   )</span><font></font>
sudo chmod -R 755 /tftpboot<font></font>
<span class="hljs-built_in">cd</span> /tftpboot</code></pre><br>
<pre><code class="bash hljs">
<span class="hljs-comment">#  syslinux</span>
wget https://www.kernel.org/pub/linux/utils/boot/syslinux/4.xx/syslinux-4.07.tar.gz </code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Décompressez et copiez récursivement </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tous les </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichiers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><font style="vertical-align: inherit;">bibliothèque </font><b><font style="vertical-align: inherit;">.c32</font></b><font style="vertical-align: inherit;"> trouvés </font><font style="vertical-align: inherit;">de syslinux vers / tftpboot de la manière qui vous convient, et créez également des dossiers pxelinux.cfg et un dossier linux dans / tftpboot </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/tftpboot/pxelinux.cfg, il y aura un menu du chargeur de démarrage (fichier nommé par défaut)</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">défaut</font></font></b>
                        <div class="spoiler_text"> <pre><code class="bash hljs"><font></font>
ui vesamenu.c32<font></font>
ALLOWOPTIONS 0 <font></font>
PROMPT 0<font></font>
menu title Microsoft SCCM Enterprice Endpoint :-)<font></font>
MENU WIDTH 77<font></font>
MENU MARGIN 10<font></font>
MENU PASSWORDMARGIN 3<font></font>
MENU ROWS 12<font></font>
MENU TABMSGROW 18<font></font>
MENU CMDLINEROW 18<font></font>
MENU ENDROW 24<font></font>
MENU PASSWORDROW 11<font></font>
MENU TIMEOUTROW 60<font></font>
NOESCAPE 0<font></font>
MENU COLOR SCREEN 44;30 <span class="hljs-comment">#00FFFFFF #00000000</span>
MENU COLOR BORDER 44;30 <span class="hljs-comment">#FFFFFFFF #FF000000</span>
MENU COLOR TITLE 1;44;30 <span class="hljs-comment">#FFFFFFFF #FF000000</span><font></font>
MENU COLOR SCROLLBAR 44;30<font></font>
MENU COLOR HOTKEY 44;30 <span class="hljs-comment">#FFFFFF00 #FF000000</span>
MENU COLOR UNSEL 44;30 <span class="hljs-comment">#FFFFFFFF #FF000000</span>
MENU COLOR HOTSEL 1;30 <span class="hljs-comment">#FFFFFFFF #FF333333</span>
MENU COLOR SEL 7;44;30 <span class="hljs-comment">#FFFFFF00 #FF333333</span><font></font>
MENU COLOR CMDMARK 44;30<font></font>
MENU COLOR CMDLINE 44;30<font></font>
MENU COLOR TABMSG 44;30<font></font>
MENU COLOR DISABLED 44;30<font></font>
MENU COLOR HELP 44;30<font></font>
MENU COLOR PWDBORDER 44;30 <span class="hljs-comment">#FF187CCA #FFFFFFFF</span>
MENU COLOR PWDHEADER 1;44;30 <span class="hljs-comment">#FF187CCA #FFFFFFFF</span>
MENU COLOR PWDENTRY 5;44;30 <span class="hljs-comment">#FF187CCA #FFFFFFFF</span><font></font>
TIMEOUT 120<font></font>
LABEL HDD<font></font>
MENU LABEL Boot from first HDD<font></font>
KERNEL chain.c32<font></font>
APPEND hd0 0<font></font>
ENDTEXT<font></font>
LABEL TEST<font></font>
MENU LABEL Install Ubuntu 20.04<font></font>
KERNEL linux/linux<font></font>
IPAPPEND 1<font></font>
APPEND initrd=linux/initrd.gz url=http://server.local/preseed/ubuntu2.cfg auto=<span class="hljs-literal">true</span> priority=critical debian-installer/locale=en_US keyboard-configuration/layoutcode=us languagechooser/language-name=en_US countrychooser/shortlist=US localechooser/supported-locales multiselect en_US splash noprompt noshell ---<font></font>
ENDTEXT</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fichiers suivants doivent se trouver dans / tftpboot / linux: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fichier de réponse ubuntu2.cfg, chargeur initrd.gz, fichier de noyau linux </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de fichier prédéfini (fichier de réponse). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il peut être complété indéfiniment, mais avec le réglage proposé, sans une seule touche, le système est installé automatiquement. </font><font style="vertical-align: inherit;">(Vrai, je dois admettre que l'utilisateur et son mot de passe sont prévus dans le fichier de réponses, donc le système sera installé protégé par mot de passe</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ubuntu2.cfg</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/ubuntu2.cfg<font></font>
</code></pre> </div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le noyau et le chargeur de démarrage ont été obtenus à cette adresse: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archive.ubuntu.com/ubuntu/dists/focal/main/installer-amd64/20101020ubuntu614/legacy-images/netboot/ubuntu-installer/amd64</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le fichier de réponses vous permet de sélectionner automatiquement la langue du système, la langue d'installation système, définissez la partition et le formatage requis du disque, et même définissez les hachages de mot de passe pour le chargeur de démarrage et l'administrateur local (au moment de l'installation - le seul utilisateur du PC). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec DHCP pré-configuré (options 66 et 67) qui inclut le fichier de démarrage et l'adresse IP du serveur tftp après le téléchargement et la sélection de la ligne «Installer Ubuntu 20.04», tout le reste se fera sans notre intervention. (Le système va installer environ 25-30 minutes).</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir entré le login et le mot de passe, dans la grande majorité des cas, le système sera complètement prêt à fonctionner avec des documents, des images, des fichiers audio et vidéo, Internet, sans aucune difficulté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'installation prend environ 25-30 minutes. et fonctionne complètement automatiquement. C'est suffisant pour l'utilisateur moyen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais nous parlons du travail d'Ubuntu dans un environnement d'entreprise, ce qui signifie que nous parlerons de l'intégration avec Active Directory, Exchange, DFS, etc. Peut-être que quelque part dans la manière de trouver une interaction avec ces services, il y aura des problèmes? Peut-être que quelque chose de ce qui précède est déjà mal fait à ce stade? Dans la prochaine partie de l'article, j'écrirai sur ma façon d'intégrer un système Linux dans une infrastructure Windows d'entreprise.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour gérer et configurer des ordinateurs distants, il est nécessaire d'installer un système de gestion de configuration Ansible sur un «serveur» avec un référentiel</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installer et configurer Ansible (pour l'installation et l'administration automatiques d'Ubuntu)</font></font></h3><br>
<pre><code class="bash hljs">sudo apt install ansible<font></font>
sudo nano /etc/ansible/hosts <font></font>
<span class="hljs-comment">#  ,       ,   hostname.   IP</span>
<span class="hljs-comment"># ,     ,   ,    hostname  IP .</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir rempli le fichier d'inventaire, nous devons connecter la machine cliente au serveur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ssh-keyhen (créer une paire de clés privée / publique sur le serveur)</font></font><br>
<br>
<pre><code class="bash hljs">d /home/localadm/.ssh/<font></font>
ssh-copy-id localadm@192.168.*.*<font></font>
<span class="hljs-comment">#        (,   #    </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour vérifier le succès des paramètres, entrez la commande.</font></font><br>
<br>
<pre><code class="bash hljs">ansible  all –m ping   </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous voyons une réponse du PC client, nos paramètres sont corrects. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir vérifié avec succès les paramètres, vous devez exécuter le script pour réinstaller les packages nécessaires et entrer le PC dans le domaine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les rôles sont généralement créés dans Ansible pour contrôler le comportement d'un ordinateur, mais comme nous avons une tâche triviale pour simplement installer, désinstaller, configurer et entrer un ordinateur Ubuntu dans un domaine, nous utiliserons un script simple (dans la terminologie du playbook Ansible). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de commencer un playbook, il est extrêmement important de crypter le login et le mot de passe sous lesquels nous entrerons l'ordinateur dans le domaine, idéalement ce devrait être un compte de service, et il devrait être crypté avec l'ensemble.</font></font><br>
<br>
<pre><code class="bash hljs">ansible-vault encrypt playbook3.yaml
<span class="hljs-comment">#(   ).</span></code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour exécuter le script après l'avoir mis en forme de travail:</font></font><br>
<br>
<pre><code class="bash hljs">1. ansible-playbook playbook3.yaml –ask-vault-pass<font></font>
2.      <font></font>
3.    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous exécutez le script, l'ordinateur doit être redémarré plusieurs fois. </font><font style="vertical-align: inherit;">Après avoir redémarré le script manuellement depuis le serveur, après avoir redémarré le client, le script continuera son exécution à partir du moment où il s'est arrêté (après l'indexation des étapes précédentes). </font><font style="vertical-align: inherit;">L'action de script (avec les redémarrages) ne prendra pas plus de 10 minutes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le script:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">playbook3.yaml</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/playbook3.yaml<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le script ansible fait référence à plusieurs scripts supplémentaires configurant kerberos, sssd, samba et certains autres fichiers importants</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">krb5.conf.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/commits/master/krb5.conf<font></font>
</code></pre> </div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sssd.conf.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/sssd.conf.j2<font></font>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samba.conf.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/samba.conf.j2<font></font>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nsswitch.conf.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs">  <font></font>
https://github.com/drumit/ubuntu_config/blob/master/nsswitch.conf.j2<font></font>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">common-auth.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/common-auth.j2<font></font>
</code></pre> </div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">common-account.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/common-account.j2<font></font>
</code></pre> </div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">common-password.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/common-password.j2<font></font>
</code></pre> </div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">common-session.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/common-session.j2<font></font>
</code></pre> </div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">common-session-noninteractive.j2</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><font></font>
https://github.com/drumit/ubuntu_config/blob/master/common-session-noninteractive.j2<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS J'ai raté l'occasion d'écrire ci-dessus sur le merveilleux produit Evolution qui, avec le plug-in Evolution-ews, interagit avec succès via le protocole EWS avec le serveur Excgange, "donnant" non seulement du courrier, mais aussi une interaction parfaite avec le calendrier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Séparément, je note que tous les réglages mentionnés ci-dessus sont effectués 1 fois. </font><font style="vertical-align: inherit;">Ensuite, l'installation et la configuration complètes du système ne prennent pas plus d'une heure. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors pourquoi Linux est-il mauvais et convient-il à l'utilisateur moyen? </font><font style="vertical-align: inherit;">Et pour l'utilisateur dans un environnement d'entreprise?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503546/index.html">Un exemple simple d'une analyse groupée des préférences en matière d'alcool par pays pour R</a></li>
<li><a href="../fr503552/index.html">DIT Moscou lors de la vérification du laissez-passer reçoit la permission d'envoyer de la publicité pour les 10 prochaines années</a></li>
<li><a href="../fr503556/index.html">Tout ce que vous devez savoir sur std :: any</a></li>
<li><a href="../fr503560/index.html">Apprendre Scala: Partie 1 - Le jeu du serpent</a></li>
<li><a href="../fr503562/index.html">Le condensé de matériaux intéressants pour le développeur mobile # 345 (18 - 24 mai)</a></li>
<li><a href="../fr503570/index.html">Xiaomi Gateway 2 ne peut pas être soudé</a></li>
<li><a href="../fr503572/index.html">Udalenka. une autre histoire de déploiement VPN d'auto-isolation</a></li>
<li><a href="../fr503574/index.html">Analyse du contenu des codes QR dans les documents du gouvernement électronique de la République du Kazakhstan dans le frontend</a></li>
<li><a href="../fr503576/index.html">"Passed by": sujets que vous avez oublié de discuter sur les sites russophones des startups et des technologies</a></li>
<li><a href="../fr503578/index.html">Les bons programmeurs copient, les grands programmeurs volent</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>