<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç∑ üéØ üë©üèº‚Äçü§ù‚Äçüë®üèø [„Éë„Éº„Éà2/2] FFmpeg„Å®SDL„ÅÆ„Ç¨„Ç§„Éâ„ÄÅ„Åæ„Åü„ÅØ1000Ë°åÊú™Ê∫Ä„Åß„Éì„Éá„Ç™„Éó„É¨„Éº„É§„Éº„Çí‰ΩúÊàê„Åô„ÇãÊñπÊ≥ï üöõ ü§ûüèæ üëµüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="„Åì„ÅÆ„Éû„Éã„É•„Ç¢„É´„ÅÆÊÆã„Çä„ÅÆ„É≠„Ç∑„Ç¢Ë™ûÁøªË®≥„ÅØ„ÄÅÂ∞ë„ÅóÂè§„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅÂ¶•ÂΩìÊÄß„ÅØÂ§±„Çè„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇFFmpeg„Åä„Çà„Å≥SDL„É©„Ç§„Éñ„É©„É™„Çí‰ΩøÁî®„Åó„Å¶„Éì„Éá„Ç™„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åô„Çã„Äå„Ç≠„ÉÉ„ÉÅ„É≥„Äç„ÇíÁêÜËß£„Åô„Çã„ÅÆ„Å´ÂΩπÁ´ã„Å§„Åü„ÇÅ„Åß„Åô„ÄÇ
 
 „Åù„Åó„Å¶„ÄÅË©¶„Åø„Åæ„Åó„Åü„Åå„ÄÅ„Åù„ÅÆ„Çà„ÅÜ„Å™ËÜ®Â§ß„Å™„ÉÜ„Ç≠„Çπ„Éà„Åß„ÅØÁøªË®≥„ÅÆÈõ£„Åó„Åï„ÅåÈÅø„Åë„Çâ„Çå„Åæ„Åõ„Çì„ÄÇ„Éê„Ç∞„Çí...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>[„Éë„Éº„Éà2/2] FFmpeg„Å®SDL„ÅÆ„Ç¨„Ç§„Éâ„ÄÅ„Åæ„Åü„ÅØ1000Ë°åÊú™Ê∫Ä„Åß„Éì„Éá„Ç™„Éó„É¨„Éº„É§„Éº„Çí‰ΩúÊàê„Åô„ÇãÊñπÊ≥ï</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/502844/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img width="780" height="325" src="https://habrastorage.org/webt/yx/qh/nq/yxqhnqwvdlvzfw22erhmpfzpfba.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆ„Éû„Éã„É•„Ç¢„É´„ÅÆÊÆã„Çä„ÅÆ„É≠„Ç∑„Ç¢Ë™ûÁøªË®≥„ÅØ„ÄÅÂ∞ë„ÅóÂè§„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅÂ¶•ÂΩìÊÄß„ÅØÂ§±„Çè„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇFFmpeg„Åä„Çà„Å≥SDL„É©„Ç§„Éñ„É©„É™„Çí‰ΩøÁî®„Åó„Å¶„Éì„Éá„Ç™„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åô„Çã„Äå„Ç≠„ÉÉ„ÉÅ„É≥„Äç„ÇíÁêÜËß£„Åô„Çã„ÅÆ„Å´ÂΩπÁ´ã„Å§„Åü„ÇÅ„Åß„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„Åó„Å¶„ÄÅË©¶„Åø„Åæ„Åó„Åü„Åå„ÄÅ„Åù„ÅÆ„Çà„ÅÜ„Å™ËÜ®Â§ß„Å™„ÉÜ„Ç≠„Çπ„Éà„Åß</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅØÁøªË®≥„ÅÆÈõ£„Åó„Åï„Åå</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÈÅø„Åë„Çâ„Çå„Åæ„Åõ„Çì</font><font style="vertical-align: inherit;">„ÄÇ</font><font style="vertical-align: inherit;">„Éê„Ç∞„ÇíÂ†±Âëä„Åô„ÇãÔºà„Åß„Åç„Çå„Å∞„Éó„É©„Ç§„Éô„Éº„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÅßÔºâ-‰∏ÄÁ∑í„Å´ÊîπÂñÑ„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</font></font><a name="menu"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÁõÆÊ¨°</font></font></h3><div class="scrollable-table"><table>
<tbody><tr>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éë„Éº„Éà1</font></font></th>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éë„Éº„Éà2</font></font></th>
</tr>
<tr>
<td align="left"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â∫èÊñá</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¨„ÉÉ„Çπ„É≥1Ôºö„Çπ„ÇØ„É™„Éº„É≥„Ç≠„É£„ÉÉ„Éó„ÅÆ‰ΩúÊàê</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¨„ÉÉ„Çπ„É≥2Ôºö„É¨„ÉÉ„Çπ„É≥„ÅÆË°®Á§∫</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3Ôºö„Çµ„Ç¶„É≥„Éâ„ÅÆÂÜçÁîü</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¨„ÉÉ„Çπ„É≥4Ôºö„Éû„É´„ÉÅ„Çπ„É¨„ÉÉ„Éâ</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¨„ÉÉ„Çπ„É≥5Ôºö„Éì„Éá„Ç™„ÅÆÂêåÊúü</font></font></a><br>
</td>
<td align="left"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¨„ÉÉ„Çπ„É≥6Ôºö„Ç™„Éº„Éá„Ç£„Ç™„ÅÆÂêåÊúü</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¨„ÉÉ„Çπ„É≥7Ôºö</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅÇ„Å®„Åå„Åç„ÅÆ</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Ê§úÁ¥¢</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‰ªòÈå≤1.Èñ¢Êï∞„ÅÆ„É™„Çπ„Éà</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‰ªòÈå≤2.„Éá„Éº„ÇøÊßãÈÄ†</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É™„É≥„ÇØ</font></font></a></td>
</tr>
</tbody></table></div><a name="habracut"></a><br>
<a name="audio"></a><blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="EDISON„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢-„Ç¶„Çß„ÉñÈñãÁô∫"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="EDISON„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢-„Ç¶„Çß„ÉñÈñãÁô∫"></a><br clear="right">
     EDISON.<br>
<br>
    ,      .<br>
<br>
,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Axxon Next  SureView Immix</a>.<br>
<br>
      ! ;-)</blockquote><br>
<h2> 6:   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="„É¨„ÉÉ„Çπ„É≥5Ôºö„Éì„Éá„Ç™ÂêåÊúü">‚Üê</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="ÁõÆÊ¨°„Å∏">‚áë</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="„É¨„ÉÉ„Çπ„É≥7ÔºöÊ§úÁ¥¢">‚Üí</a></h2><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">  tutorial06.c</b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">// tutorial05.c</span>
<span class="hljs-comment">// A pedagogical video player that really works!</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Code based on FFplay, Copyright (c) 2003 Fabrice Bellard, </span>
<span class="hljs-comment">// and a tutorial by Martin Bohme (boehme@inb.uni-luebeckREMOVETHIS.de)</span>
<span class="hljs-comment">// Tested on Gentoo, CVS version 5/01/07 compiled with GCC 4.1.1</span>
<span class="hljs-comment">// With updates from https://github.com/chelyaev/ffmpeg-tutorial</span>
<span class="hljs-comment">// Updates tested on:</span>
<span class="hljs-comment">// LAVC 54.59.100, LAVF 54.29.104, LSWS 2.1.101, SDL 1.2.15</span>
<span class="hljs-comment">// on GCC 4.7.2 in Debian February 2015</span>
<span class="hljs-comment">// Use</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// gcc -o tutorial05 tutorial05.c -lavformat -lavcodec -lswscale -lz -lm `sdl-config --cflags --libs`</span>
<span class="hljs-comment">// to build (assuming libavformat and libavcodec are correctly installed, </span>
<span class="hljs-comment">// and assuming you have sdl-config. Please refer to SDL docs for your installation.)</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Run using</span>
<span class="hljs-comment">// tutorial04 myvideofile.mpg</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// to play the video stream on your screen.</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavcodec/avcodec.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavformat/avformat.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libswscale/swscale.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL_thread.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> __MINGW32__</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">undef</span> main <span class="hljs-comment">/* Prevents SDL from overriding main() */</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;assert.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;math.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">// compatibility with newer API</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> LIBAVCODEC_VERSION_INT &lt; AV_VERSION_INT(55,28,1)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_alloc avcodec_alloc_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_free avcodec_free_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SDL_AUDIO_BUFFER_SIZE 1024</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIO_FRAME_SIZE 192000</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIOQ_SIZE (5 * 16 * 1024)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_VIDEOQ_SIZE (5 * 256 * 1024)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_SYNC_THRESHOLD 0.01</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_NOSYNC_THRESHOLD 10.0</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SAMPLE_CORRECTION_PERCENT_MAX 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AUDIO_DIFF_AVG_NB 20</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_REFRESH_EVENT (SDL_USEREVENT)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_QUIT_EVENT (SDL_USEREVENT + 1)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> VIDEO_PICTURE_QUEUE_SIZE 1</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_AV_SYNC_TYPE AV_SYNC_VIDEO_MASTER</span><font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PacketQueue</span> {</span><font></font>
  AVPacketList *first_pkt, *last_pkt;<font></font>
  <span class="hljs-keyword">int</span> nb_packets;
  <span class="hljs-keyword">int</span> size;<font></font>
  SDL_mutex *mutex;<font></font>
  SDL_cond *cond;<font></font>
} PacketQueue;<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoPicture</span> {</span><font></font>
  SDL_Overlay *bmp;<font></font>
  <span class="hljs-keyword">int</span> width, height; <span class="hljs-comment">/* source height &amp; width */</span>
  <span class="hljs-keyword">int</span> allocated;
  <span class="hljs-keyword">double</span> pts;<font></font>
} VideoPicture;<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoState</span> {</span><font></font>
<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  <span class="hljs-keyword">int</span>             videoStream, audioStream;<font></font>
<font></font>
  <span class="hljs-keyword">int</span>             av_sync_type;
  <span class="hljs-keyword">double</span>          external_clock; <span class="hljs-comment">/* external clock base */</span>
  <span class="hljs-keyword">int64_t</span>         external_clock_time;<font></font>
<font></font>
  <span class="hljs-keyword">double</span>          audio_clock;<font></font>
  AVStream        *audio_st;<font></font>
  AVCodecContext  *audio_ctx;<font></font>
  PacketQueue     audioq;<font></font>
  <span class="hljs-keyword">uint8_t</span>         audio_buf[(AVCODEC_MAX_AUDIO_FRAME_SIZE * <span class="hljs-number">3</span>) / <span class="hljs-number">2</span>];
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_size;
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_index;<font></font>
  AVFrame         audio_frame;<font></font>
  AVPacket        audio_pkt;<font></font>
  <span class="hljs-keyword">uint8_t</span>         *audio_pkt_data;
  <span class="hljs-keyword">int</span>             audio_pkt_size;
  <span class="hljs-keyword">int</span>             audio_hw_buf_size;
  <span class="hljs-keyword">double</span>          audio_diff_cum; <span class="hljs-comment">/* used for AV difference average computation */</span>
  <span class="hljs-keyword">double</span>          audio_diff_avg_coef;
  <span class="hljs-keyword">double</span>          audio_diff_threshold;
  <span class="hljs-keyword">int</span>             audio_diff_avg_count;
  <span class="hljs-keyword">double</span>          frame_timer;
  <span class="hljs-keyword">double</span>          frame_last_pts;
  <span class="hljs-keyword">double</span>          frame_last_delay;
  <span class="hljs-keyword">double</span>          video_clock; <span class="hljs-comment">///&lt;pts of last decoded frame / predicted pts of next decoded frame</span>
  <span class="hljs-keyword">double</span>          video_current_pts; <span class="hljs-comment">///&lt;current displayed pts (different from video_clock if frame fifos are used)</span>
  <span class="hljs-keyword">int64_t</span>         video_current_pts_time;  <span class="hljs-comment">///&lt;time (av_gettime) at which we updated video_current_pts - used to have running video pts</span><font></font>
  AVStream        *video_st;<font></font>
  AVCodecContext  *video_ctx;<font></font>
  PacketQueue     videoq;<font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SwsContext</span> *<span class="hljs-title">sws_ctx</span>;</span><font></font>
<font></font>
  VideoPicture    pictq[VIDEO_PICTURE_QUEUE_SIZE];<font></font>
  <span class="hljs-keyword">int</span>             pictq_size, pictq_rindex, pictq_windex;<font></font>
  SDL_mutex       *pictq_mutex;<font></font>
  SDL_cond        *pictq_cond;<font></font>
  <font></font>
  SDL_Thread      *parse_tid;<font></font>
  SDL_Thread      *video_tid;<font></font>
<font></font>
  <span class="hljs-keyword">char</span>            filename[<span class="hljs-number">1024</span>];
  <span class="hljs-keyword">int</span>             quit;<font></font>
} VideoState;<font></font>
<font></font>
<span class="hljs-keyword">enum</span> {<font></font>
  AV_SYNC_AUDIO_MASTER,<font></font>
  AV_SYNC_VIDEO_MASTER,<font></font>
  AV_SYNC_EXTERNAL_MASTER,<font></font>
};<font></font>
<font></font>
SDL_Surface     *screen;<font></font>
SDL_mutex       *screen_mutex;<font></font>
<font></font>
<span class="hljs-comment">/* Since we only have one decoding thread, the Big Struct
   can be global in case we need it. */</span><font></font>
VideoState *global_video_state;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_init</span><span class="hljs-params">(PacketQueue *q)</span> </span>{
  <span class="hljs-built_in">memset</span>(q, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(PacketQueue));<font></font>
  q-&gt;mutex = SDL_CreateMutex();<font></font>
  q-&gt;cond = SDL_CreateCond();<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_put</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt)</span> </span>{<font></font>
<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">if</span>(av_dup_packet(pkt) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
  pkt1 = av_malloc(<span class="hljs-keyword">sizeof</span>(AVPacketList));
  <span class="hljs-keyword">if</span> (!pkt1)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  pkt1-&gt;pkt = *pkt;<font></font>
  pkt1-&gt;next = <span class="hljs-literal">NULL</span>;<font></font>
  <font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (!q-&gt;last_pkt)<font></font>
    q-&gt;first_pkt = pkt1;<font></font>
  <span class="hljs-keyword">else</span><font></font>
    q-&gt;last_pkt-&gt;next = pkt1;<font></font>
  q-&gt;last_pkt = pkt1;<font></font>
  q-&gt;nb_packets++;<font></font>
  q-&gt;size += pkt1-&gt;pkt.size;<font></font>
  SDL_CondSignal(q-&gt;cond);<font></font>
  <font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_get</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt, <span class="hljs-keyword">int</span> block)</span>
</span>{<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">int</span> ret;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <font></font>
  <span class="hljs-keyword">for</span>(;;) {<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(global_video_state-&gt;quit) {<font></font>
      ret = <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    pkt1 = q-&gt;first_pkt;<font></font>
    <span class="hljs-keyword">if</span> (pkt1) {<font></font>
      q-&gt;first_pkt = pkt1-&gt;next;<font></font>
      <span class="hljs-keyword">if</span> (!q-&gt;first_pkt)<font></font>
	q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
      q-&gt;nb_packets--;<font></font>
      q-&gt;size -= pkt1-&gt;pkt.size;<font></font>
      *pkt = pkt1-&gt;pkt;<font></font>
      av_free(pkt1);<font></font>
      ret = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!block) {<font></font>
      ret = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      SDL_CondWait(q-&gt;cond, q-&gt;mutex);<font></font>
    }<font></font>
  }<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> ret;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_audio_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> hw_buf_size, bytes_per_sec, n;<font></font>
  <font></font>
  pts = is-&gt;audio_clock; <span class="hljs-comment">/* maintained in the audio thread */</span><font></font>
  hw_buf_size = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
  bytes_per_sec = <span class="hljs-number">0</span>;<font></font>
  n = is-&gt;audio_ctx-&gt;channels * <span class="hljs-number">2</span>;
  <span class="hljs-keyword">if</span>(is-&gt;audio_st) {<font></font>
    bytes_per_sec = is-&gt;audio_ctx-&gt;sample_rate * n;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(bytes_per_sec) {<font></font>
    pts -= (<span class="hljs-keyword">double</span>)hw_buf_size / bytes_per_sec;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_video_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> delta;<font></font>
<font></font>
  delta = (av_gettime() - is-&gt;video_current_pts_time) / <span class="hljs-number">1000000.0</span>;
  <span class="hljs-keyword">return</span> is-&gt;video_current_pts + delta;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_external_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">return</span> av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_master_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_VIDEO_MASTER) {
    <span class="hljs-keyword">return</span> get_video_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">return</span> get_audio_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> get_external_clock(is);<font></font>
  }<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">/* Add or subtract samples to get a better sync, return new
   audio buffer size */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">synchronize_audio</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">short</span> *samples,
		      <span class="hljs-keyword">int</span> samples_size, <span class="hljs-keyword">double</span> pts)</span> </span>{
  <span class="hljs-keyword">int</span> n;
  <span class="hljs-keyword">double</span> ref_clock;<font></font>
<font></font>
  n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">double</span> diff, avg_diff;
    <span class="hljs-keyword">int</span> wanted_size, min_size, max_size <span class="hljs-comment">/*, nb_samples */</span>;<font></font>
    <font></font>
    ref_clock = get_master_clock(is);<font></font>
    diff = get_audio_clock(is) - ref_clock;<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(diff &lt; AV_NOSYNC_THRESHOLD) {
      <span class="hljs-comment">// accumulate the diffs</span><font></font>
      is-&gt;audio_diff_cum = diff + is-&gt;audio_diff_avg_coef<font></font>
	* is-&gt;audio_diff_cum;<font></font>
      <span class="hljs-keyword">if</span>(is-&gt;audio_diff_avg_count &lt; AUDIO_DIFF_AVG_NB) {<font></font>
	is-&gt;audio_diff_avg_count++;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	avg_diff = is-&gt;audio_diff_cum * (<span class="hljs-number">1.0</span> - is-&gt;audio_diff_avg_coef);
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(avg_diff) &gt;= is-&gt;audio_diff_threshold) {<font></font>
	  wanted_size = samples_size + ((<span class="hljs-keyword">int</span>)(diff * is-&gt;audio_ctx-&gt;sample_rate) * n);<font></font>
	  min_size = samples_size * ((<span class="hljs-number">100</span> - SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);<font></font>
	  max_size = samples_size * ((<span class="hljs-number">100</span> + SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);
	  <span class="hljs-keyword">if</span>(wanted_size &lt; min_size) {<font></font>
	    wanted_size = min_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (wanted_size &gt; max_size) {<font></font>
	    wanted_size = max_size;<font></font>
	  }<font></font>
	  <span class="hljs-keyword">if</span>(wanted_size &lt; samples_size) {
	    <span class="hljs-comment">/* remove samples */</span><font></font>
	    samples_size = wanted_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(wanted_size &gt; samples_size) {
	    <span class="hljs-keyword">uint8_t</span> *samples_end, *q;
	    <span class="hljs-keyword">int</span> nb;<font></font>
<font></font>
	    <span class="hljs-comment">/* add samples by copying final sample*/</span><font></font>
	    nb = (samples_size - wanted_size);<font></font>
	    samples_end = (<span class="hljs-keyword">uint8_t</span> *)samples + samples_size - n;<font></font>
	    q = samples_end + n;<font></font>
	    <span class="hljs-keyword">while</span>(nb &gt; <span class="hljs-number">0</span>) {
	      <span class="hljs-built_in">memcpy</span>(q, samples_end, n);<font></font>
	      q += n;<font></font>
	      nb -= n;<font></font>
	    }<font></font>
	    samples_size = wanted_size;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* difference is TOO big; reset diff stuff */</span>
      is-&gt;audio_diff_avg_count = <span class="hljs-number">0</span>;<font></font>
      is-&gt;audio_diff_cum = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> samples_size;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">audio_decode_frame</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">uint8_t</span> *audio_buf, <span class="hljs-keyword">int</span> buf_size, <span class="hljs-keyword">double</span> *pts_ptr)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">int</span> len1, data_size = <span class="hljs-number">0</span>;<font></font>
  AVPacket *pkt = &amp;is-&gt;audio_pkt;<font></font>
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> n;<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">while</span>(is-&gt;audio_pkt_size &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">int</span> got_frame = <span class="hljs-number">0</span>;<font></font>
      len1 = avcodec_decode_audio4(is-&gt;audio_ctx, &amp;is-&gt;audio_frame, &amp;got_frame, pkt);<font></font>
      <span class="hljs-keyword">if</span>(len1 &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* if error, skip frame */</span>
	is-&gt;audio_pkt_size = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      data_size = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span>(got_frame) {<font></font>
	data_size = av_samples_get_buffer_size(<span class="hljs-literal">NULL</span>, <font></font>
					       is-&gt;audio_ctx-&gt;channels,<font></font>
					       is-&gt;audio_frame.nb_samples,<font></font>
					       is-&gt;audio_ctx-&gt;sample_fmt,<font></font>
					       <span class="hljs-number">1</span>);<font></font>
	assert(data_size &lt;= buf_size);<font></font>
	<span class="hljs-built_in">memcpy</span>(audio_buf, is-&gt;audio_frame.data[<span class="hljs-number">0</span>], data_size);<font></font>
      }<font></font>
      is-&gt;audio_pkt_data += len1;<font></font>
      is-&gt;audio_pkt_size -= len1;<font></font>
      <span class="hljs-keyword">if</span>(data_size &lt;= <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* No data yet, get more frames */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      }<font></font>
      pts = is-&gt;audio_clock;<font></font>
      *pts_ptr = pts;<font></font>
      n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
      is-&gt;audio_clock += (<span class="hljs-keyword">double</span>)data_size /<font></font>
	(<span class="hljs-keyword">double</span>)(n * is-&gt;audio_ctx-&gt;sample_rate);
      <span class="hljs-comment">/* We have data, return it and come back for more later */</span>
      <span class="hljs-keyword">return</span> data_size;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data)<font></font>
      av_free_packet(pkt);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">/* next packet */</span>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;audioq, pkt, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    is-&gt;audio_pkt_data = pkt-&gt;data;<font></font>
    is-&gt;audio_pkt_size = pkt-&gt;size;<font></font>
    <span class="hljs-comment">/* if update, update the audio clock w/pts */</span>
    <span class="hljs-keyword">if</span>(pkt-&gt;pts != AV_NOPTS_VALUE) {<font></font>
      is-&gt;audio_clock = av_q2d(is-&gt;audio_st-&gt;time_base)*pkt-&gt;pts;<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">audio_callback</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata, Uint8 *stream, <span class="hljs-keyword">int</span> len)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  <span class="hljs-keyword">int</span> len1, audio_size;
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  <span class="hljs-keyword">while</span>(len &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span>(is-&gt;audio_buf_index &gt;= is-&gt;audio_buf_size) {
      <span class="hljs-comment">/* We have already sent all our data; get more */</span>
      audio_size = audio_decode_frame(is, is-&gt;audio_buf, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_buf), &amp;pts);
      <span class="hljs-keyword">if</span>(audio_size &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* If error, output silence */</span>
	is-&gt;audio_buf_size = <span class="hljs-number">1024</span>;
	<span class="hljs-built_in">memset</span>(is-&gt;audio_buf, <span class="hljs-number">0</span>, is-&gt;audio_buf_size);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	audio_size = synchronize_audio(is, (<span class="hljs-keyword">int16_t</span> *)is-&gt;audio_buf,<font></font>
				       audio_size, pts);<font></font>
	is-&gt;audio_buf_size = audio_size;<font></font>
      }<font></font>
      is-&gt;audio_buf_index = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    len1 = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
    <span class="hljs-keyword">if</span>(len1 &gt; len)<font></font>
      len1 = len;<font></font>
    <span class="hljs-built_in">memcpy</span>(stream, (<span class="hljs-keyword">uint8_t</span> *)is-&gt;audio_buf + is-&gt;audio_buf_index, len1);<font></font>
    len -= len1;<font></font>
    stream += len1;<font></font>
    is-&gt;audio_buf_index += len1;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> Uint32 <span class="hljs-title">sdl_refresh_timer_cb</span><span class="hljs-params">(Uint32 interval, <span class="hljs-keyword">void</span> *opaque)</span> </span>{<font></font>
  SDL_Event event;<font></font>
  event.type = FF_REFRESH_EVENT;<font></font>
  event.user.data1 = opaque;<font></font>
  SDL_PushEvent(&amp;event);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/* 0 means stop timer */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* schedule a video refresh in 'delay' ms */</span>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">schedule_refresh</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> delay)</span> </span>{<font></font>
  SDL_AddTimer(delay, sdl_refresh_timer_cb, is);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_display</span><span class="hljs-params">(VideoState *is)</span> </span>{<font></font>
<font></font>
  SDL_Rect rect;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">float</span> aspect_ratio;
  <span class="hljs-keyword">int</span> w, h, x, y;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-keyword">if</span>(is-&gt;video_ctx-&gt;sample_aspect_ratio.num == <span class="hljs-number">0</span>) {<font></font>
      aspect_ratio = <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      aspect_ratio = av_q2d(is-&gt;video_ctx-&gt;sample_aspect_ratio) *<font></font>
	is-&gt;video_ctx-&gt;width / is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(aspect_ratio &lt;= <span class="hljs-number">0.0</span>) {<font></font>
      aspect_ratio = (<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;width /<font></font>
	(<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    h = screen-&gt;h;<font></font>
    w = ((<span class="hljs-keyword">int</span>)rint(h * aspect_ratio)) &amp; <span class="hljs-number">-3</span>;
    <span class="hljs-keyword">if</span>(w &gt; screen-&gt;w) {<font></font>
      w = screen-&gt;w;<font></font>
      h = ((<span class="hljs-keyword">int</span>)rint(w / aspect_ratio)) &amp; <span class="hljs-number">-3</span>;<font></font>
    }<font></font>
    x = (screen-&gt;w - w) / <span class="hljs-number">2</span>;<font></font>
    y = (screen-&gt;h - h) / <span class="hljs-number">2</span>;<font></font>
    <font></font>
    rect.x = x;<font></font>
    rect.y = y;<font></font>
    rect.w = w;<font></font>
    rect.h = h;<font></font>
    SDL_LockMutex(screen_mutex);<font></font>
    SDL_DisplayYUVOverlay(vp-&gt;bmp, &amp;rect);<font></font>
    SDL_UnlockMutex(screen_mutex);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_refresh_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">double</span> actual_delay, delay, sync_threshold, ref_clock, diff;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;video_st) {
    <span class="hljs-keyword">if</span>(is-&gt;pictq_size == <span class="hljs-number">0</span>) {<font></font>
      schedule_refresh(is, <span class="hljs-number">1</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
      <font></font>
      is-&gt;video_current_pts = vp-&gt;pts;<font></font>
      is-&gt;video_current_pts_time = av_gettime();<font></font>
      delay = vp-&gt;pts - is-&gt;frame_last_pts; <span class="hljs-comment">/* the pts from last time */</span>
      <span class="hljs-keyword">if</span>(delay &lt;= <span class="hljs-number">0</span> || delay &gt;= <span class="hljs-number">1.0</span>) {
	<span class="hljs-comment">/* if incorrect delay, use previous one */</span><font></font>
	delay = is-&gt;frame_last_delay;<font></font>
      }<font></font>
      <span class="hljs-comment">/* save for next time */</span><font></font>
      is-&gt;frame_last_delay = delay;<font></font>
      is-&gt;frame_last_pts = vp-&gt;pts;<font></font>
<font></font>
<font></font>
<font></font>
      <span class="hljs-comment">/* update delay to sync to audio if not master source */</span>
      <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_VIDEO_MASTER) {<font></font>
	ref_clock = get_master_clock(is);<font></font>
	diff = vp-&gt;pts - ref_clock;<font></font>
	<font></font>
	<span class="hljs-comment">/* Skip or repeat the frame. Take delay into account
	   FFPlay still doesn't "know if this is the best guess." */</span><font></font>
	sync_threshold = (delay &gt; AV_SYNC_THRESHOLD) ? delay : AV_SYNC_THRESHOLD;<font></font>
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(diff) &lt; AV_NOSYNC_THRESHOLD) {
	  <span class="hljs-keyword">if</span>(diff &lt;= -sync_threshold) {<font></font>
	    delay = <span class="hljs-number">0</span>;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(diff &gt;= sync_threshold) {<font></font>
	    delay = <span class="hljs-number">2</span> * delay;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
      is-&gt;frame_timer += delay;<font></font>
      <span class="hljs-comment">/* computer the REAL delay */</span>
      actual_delay = is-&gt;frame_timer - (av_gettime() / <span class="hljs-number">1000000.0</span>);
      <span class="hljs-keyword">if</span>(actual_delay &lt; <span class="hljs-number">0.010</span>) {
	<span class="hljs-comment">/* Really it should skip the picture instead */</span>
	actual_delay = <span class="hljs-number">0.010</span>;<font></font>
      }<font></font>
      schedule_refresh(is, (<span class="hljs-keyword">int</span>)(actual_delay * <span class="hljs-number">1000</span> + <span class="hljs-number">0.5</span>));<font></font>
      <font></font>
      <span class="hljs-comment">/* show the picture! */</span><font></font>
      video_display(is);<font></font>
      <font></font>
      <span class="hljs-comment">/* update queue for next picture! */</span>
      <span class="hljs-keyword">if</span>(++is-&gt;pictq_rindex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
	is-&gt;pictq_rindex = <span class="hljs-number">0</span>;<font></font>
      }<font></font>
      SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
      is-&gt;pictq_size--;<font></font>
      SDL_CondSignal(is-&gt;pictq_cond);<font></font>
      SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
    }<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    schedule_refresh(is, <span class="hljs-number">100</span>);<font></font>
  }<font></font>
}<font></font>
      <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">alloc_picture</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-comment">// we already have one make another, bigger/smaller</span><font></font>
    SDL_FreeYUVOverlay(vp-&gt;bmp);<font></font>
  }<font></font>
  <span class="hljs-comment">// Allocate a place to put our YUV image on that screen</span><font></font>
  SDL_LockMutex(screen_mutex);<font></font>
  vp-&gt;bmp = SDL_CreateYUVOverlay(is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height,<font></font>
				 SDL_YV12_OVERLAY,<font></font>
				 screen);<font></font>
  SDL_UnlockMutex(screen_mutex);<font></font>
<font></font>
  vp-&gt;width = is-&gt;video_ctx-&gt;width;<font></font>
  vp-&gt;height = is-&gt;video_ctx-&gt;height;<font></font>
  vp-&gt;allocated = <span class="hljs-number">1</span>;<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">queue_picture</span><span class="hljs-params">(VideoState *is, AVFrame *pFrame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">int</span> dst_pix_fmt;<font></font>
  AVPicture pict;<font></font>
<font></font>
  <span class="hljs-comment">/* wait until we have space for a new pic */</span><font></font>
  SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
  <span class="hljs-keyword">while</span>(is-&gt;pictq_size &gt;= VIDEO_PICTURE_QUEUE_SIZE &amp;&amp;<font></font>
	!is-&gt;quit) {<font></font>
    SDL_CondWait(is-&gt;pictq_cond, is-&gt;pictq_mutex);<font></font>
  }<font></font>
  SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;quit)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
<font></font>
  <span class="hljs-comment">// windex is set to 0 initially</span><font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
<font></font>
  <span class="hljs-comment">/* allocate or resize the buffer! */</span>
  <span class="hljs-keyword">if</span>(!vp-&gt;bmp ||<font></font>
     vp-&gt;width != is-&gt;video_ctx-&gt;width ||<font></font>
     vp-&gt;height != is-&gt;video_ctx-&gt;height) {<font></font>
    SDL_Event event;<font></font>
<font></font>
    vp-&gt;allocated = <span class="hljs-number">0</span>;<font></font>
    alloc_picture(is);<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">/* We have a place to put our picture on the queue */</span><font></font>
<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {<font></font>
<font></font>
    SDL_LockYUVOverlay(vp-&gt;bmp);<font></font>
    vp-&gt;pts = pts;<font></font>
    <font></font>
    dst_pix_fmt = PIX_FMT_YUV420P;<font></font>
    <span class="hljs-comment">/* point pict at the queue */</span><font></font>
<font></font>
    pict.data[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">0</span>];<font></font>
    pict.data[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">2</span>];<font></font>
    pict.data[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    pict.linesize[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">0</span>];<font></font>
    pict.linesize[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">2</span>];<font></font>
    pict.linesize[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    <span class="hljs-comment">// Convert the image into YUV format that SDL uses</span>
    sws_scale(is-&gt;sws_ctx, (<span class="hljs-keyword">uint8_t</span> <span class="hljs-keyword">const</span> * <span class="hljs-keyword">const</span> *)pFrame-&gt;data,<font></font>
	      pFrame-&gt;linesize, <span class="hljs-number">0</span>, is-&gt;video_ctx-&gt;height,<font></font>
	      pict.data, pict.linesize);<font></font>
    <font></font>
    SDL_UnlockYUVOverlay(vp-&gt;bmp);<font></font>
    <span class="hljs-comment">/* now we inform our display thread that we have a pic ready */</span>
    <span class="hljs-keyword">if</span>(++is-&gt;pictq_windex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
      is-&gt;pictq_windex = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
    is-&gt;pictq_size++;<font></font>
    SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">synchronize_video</span><span class="hljs-params">(VideoState *is, AVFrame *src_frame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">double</span> frame_delay;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(pts != <span class="hljs-number">0</span>) {
    <span class="hljs-comment">/* if we have pts, set video clock to it */</span><font></font>
    is-&gt;video_clock = pts;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">/* if we aren't given a pts, set it to the clock */</span><font></font>
    pts = is-&gt;video_clock;<font></font>
  }<font></font>
  <span class="hljs-comment">/* update the video clock */</span><font></font>
  frame_delay = av_q2d(is-&gt;video_ctx-&gt;time_base);<font></font>
  <span class="hljs-comment">/* if we are repeating a frame, adjust clock accordingly */</span>
  frame_delay += src_frame-&gt;repeat_pict * (frame_delay * <span class="hljs-number">0.5</span>);<font></font>
  is-&gt;video_clock += frame_delay;<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">video_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
  <span class="hljs-keyword">int</span> frameFinished;<font></font>
  AVFrame *pFrame;<font></font>
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  pFrame = av_frame_alloc();<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    pts = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-comment">// Decode video frame</span><font></font>
    avcodec_decode_video2(is-&gt;video_ctx, pFrame, &amp;frameFinished, packet);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>((pts = av_frame_get_best_effort_timestamp(pFrame)) == AV_NOPTS_VALUE) {<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      pts = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    pts *= av_q2d(is-&gt;video_st-&gt;time_base);<font></font>
<font></font>
    <span class="hljs-comment">// Did we get a video frame?</span>
    <span class="hljs-keyword">if</span>(frameFinished) {<font></font>
      pts = synchronize_video(is, pFrame, pts);<font></font>
      <span class="hljs-keyword">if</span>(queue_picture(is, pFrame, pts) &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    av_free_packet(packet);<font></font>
  }<font></font>
  av_frame_free(&amp;pFrame);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">stream_component_open</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> stream_index)</span> </span>{<font></font>
<font></font>
  AVFormatContext *pFormatCtx = is-&gt;pFormatCtx;<font></font>
  AVCodecContext *codecCtx = <span class="hljs-literal">NULL</span>;<font></font>
  AVCodec *codec = <span class="hljs-literal">NULL</span>;<font></font>
  SDL_AudioSpec wanted_spec, spec;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(stream_index &lt; <span class="hljs-number">0</span> || stream_index &gt;= pFormatCtx-&gt;nb_streams) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codec = avcodec_find_decoder(pFormatCtx-&gt;streams[stream_index]-&gt;codec-&gt;codec_id);<font></font>
  <span class="hljs-keyword">if</span>(!codec) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codecCtx = avcodec_alloc_context3(codec);<font></font>
  <span class="hljs-keyword">if</span>(avcodec_copy_context(codecCtx, pFormatCtx-&gt;streams[stream_index]-&gt;codec) != <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Couldn't copy codec context"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Error copying codec context</span><font></font>
  }<font></font>
<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(codecCtx-&gt;codec_type == AVMEDIA_TYPE_AUDIO) {
    <span class="hljs-comment">// Set audio settings from codec info</span><font></font>
    wanted_spec.freq = codecCtx-&gt;sample_rate;<font></font>
    wanted_spec.format = AUDIO_S16SYS;<font></font>
    wanted_spec.channels = codecCtx-&gt;channels;<font></font>
    wanted_spec.silence = <span class="hljs-number">0</span>;<font></font>
    wanted_spec.samples = SDL_AUDIO_BUFFER_SIZE;<font></font>
    wanted_spec.callback = audio_callback;<font></font>
    wanted_spec.userdata = is;<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(SDL_OpenAudio(&amp;wanted_spec, &amp;spec) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL_OpenAudio: %s\n"</span>, SDL_GetError());
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    is-&gt;audio_hw_buf_size = spec.size;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(avcodec_open2(codecCtx, codec, <span class="hljs-literal">NULL</span>) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">switch</span>(codecCtx-&gt;codec_type) {
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_AUDIO:<font></font>
    is-&gt;audioStream = stream_index;<font></font>
    is-&gt;audio_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;audio_ctx = codecCtx;<font></font>
    is-&gt;audio_buf_size = <span class="hljs-number">0</span>;<font></font>
    is-&gt;audio_buf_index = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">memset</span>(&amp;is-&gt;audio_pkt, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_pkt));<font></font>
    packet_queue_init(&amp;is-&gt;audioq);<font></font>
    SDL_PauseAudio(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_VIDEO:<font></font>
    is-&gt;videoStream = stream_index;<font></font>
    is-&gt;video_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;video_ctx = codecCtx;<font></font>
<font></font>
    is-&gt;frame_timer = (<span class="hljs-keyword">double</span>)av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
    is-&gt;frame_last_delay = <span class="hljs-number">40e-3</span>;<font></font>
    is-&gt;video_current_pts_time = av_gettime();<font></font>
<font></font>
    packet_queue_init(&amp;is-&gt;videoq);<font></font>
    is-&gt;video_tid = SDL_CreateThread(video_thread, is);<font></font>
    is-&gt;sws_ctx = sws_getContext(is-&gt;video_ctx-&gt;width, is-&gt;video_ctx-&gt;height,<font></font>
				 is-&gt;video_ctx-&gt;pix_fmt, is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height, PIX_FMT_YUV420P,<font></font>
				 SWS_BILINEAR, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span><font></font>
				 );<font></font>
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">default</span>:
    <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">decode_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
<font></font>
  <span class="hljs-keyword">int</span> video_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> audio_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  is-&gt;videoStream=<span class="hljs-number">-1</span>;<font></font>
  is-&gt;audioStream=<span class="hljs-number">-1</span>;<font></font>
<font></font>
  global_video_state = is;<font></font>
<font></font>
  <span class="hljs-comment">// Open video file</span>
  <span class="hljs-keyword">if</span>(avformat_open_input(&amp;pFormatCtx, is-&gt;filename, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>)!=<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't open file</span><font></font>
<font></font>
  is-&gt;pFormatCtx = pFormatCtx;<font></font>
  <font></font>
  <span class="hljs-comment">// Retrieve stream information</span>
  <span class="hljs-keyword">if</span>(avformat_find_stream_info(pFormatCtx, <span class="hljs-literal">NULL</span>)&lt;<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't find stream information</span><font></font>
  <font></font>
  <span class="hljs-comment">// Dump information about file onto standard error</span>
  av_dump_format(pFormatCtx, <span class="hljs-number">0</span>, is-&gt;filename, <span class="hljs-number">0</span>);<font></font>
  <font></font>
  <span class="hljs-comment">// Find the first video stream</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;pFormatCtx-&gt;nb_streams; i++) {
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_VIDEO &amp;&amp;<font></font>
       video_index &lt; <span class="hljs-number">0</span>) {<font></font>
      video_index=i;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_AUDIO &amp;&amp;<font></font>
       audio_index &lt; <span class="hljs-number">0</span>) {<font></font>
      audio_index=i;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(audio_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, audio_index);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(video_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, video_index);<font></font>
  }   <font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;videoStream &lt; <span class="hljs-number">0</span> || is-&gt;audioStream &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: could not open codecs\n"</span>, is-&gt;filename);
    <span class="hljs-keyword">goto</span> fail;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// main decode loop</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">// seek stuff goes here</span>
    <span class="hljs-keyword">if</span>(is-&gt;audioq.size &gt; MAX_AUDIOQ_SIZE ||<font></font>
       is-&gt;videoq.size &gt; MAX_VIDEOQ_SIZE) {<font></font>
      SDL_Delay(<span class="hljs-number">10</span>);
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(av_read_frame(is-&gt;pFormatCtx, packet) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span>(is-&gt;pFormatCtx-&gt;pb-&gt;error == <span class="hljs-number">0</span>) {<font></font>
	SDL_Delay(<span class="hljs-number">100</span>); <span class="hljs-comment">/* no error; wait for user input */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      } <span class="hljs-keyword">else</span> {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-comment">// Is this a packet from the video stream?</span>
    <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;videoStream) {<font></font>
      packet_queue_put(&amp;is-&gt;videoq, packet);<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;audioStream) {<font></font>
      packet_queue_put(&amp;is-&gt;audioq, packet);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      av_free_packet(packet);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-comment">/* all done - wait for it */</span>
  <span class="hljs-keyword">while</span>(!is-&gt;quit) {<font></font>
    SDL_Delay(<span class="hljs-number">100</span>);<font></font>
  }<font></font>
<font></font>
 fail:<font></font>
  <span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>){<font></font>
    SDL_Event event;<font></font>
    event.type = FF_QUIT_EVENT;<font></font>
    event.user.data1 = is;<font></font>
    SDL_PushEvent(&amp;event);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> </span>{<font></font>
<font></font>
  SDL_Event       event;<font></font>
<font></font>
  VideoState      *is;<font></font>
<font></font>
  is = av_mallocz(<span class="hljs-keyword">sizeof</span>(VideoState));<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(argc &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Usage: test &lt;file&gt;\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
  <span class="hljs-comment">// Register all formats and codecs</span><font></font>
  av_register_all();<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER)) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Could not initialize SDL - %s\n"</span>, SDL_GetError());
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// Make a screen to put our video</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> __DARWIN__</span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
  <span class="hljs-keyword">if</span>(!screen) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL: could not set video mode - exiting\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  screen_mutex = SDL_CreateMutex();<font></font>
<font></font>
  av_strlcpy(is-&gt;filename, argv[<span class="hljs-number">1</span>], <span class="hljs-keyword">sizeof</span>(is-&gt;filename));<font></font>
<font></font>
  is-&gt;pictq_mutex = SDL_CreateMutex();<font></font>
  is-&gt;pictq_cond = SDL_CreateCond();<font></font>
<font></font>
  schedule_refresh(is, <span class="hljs-number">40</span>);<font></font>
<font></font>
  is-&gt;av_sync_type = DEFAULT_AV_SYNC_TYPE;<font></font>
  is-&gt;parse_tid = SDL_CreateThread(decode_thread, is);<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;parse_tid) {<font></font>
    av_free(is);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">for</span>(;;) {<font></font>
<font></font>
    SDL_WaitEvent(&amp;event);<font></font>
    <span class="hljs-keyword">switch</span>(event.type) {
    <span class="hljs-keyword">case</span> FF_QUIT_EVENT:
    <span class="hljs-keyword">case</span> SDL_QUIT:<font></font>
      is-&gt;quit = <span class="hljs-number">1</span>;<font></font>
      SDL_Quit();<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> FF_REFRESH_EVENT:<font></font>
      video_refresh_timer(event.user.data1);<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre></div>
                    </div><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Êò†Áîª„ÇíË¶ã„Çã„Åì„Å®„Åå„Åß„Åç„ÇãÂ§ö„Åã„ÇåÂ∞ë„Å™„Åã„Çå„Åç„Å°„Çì„Å®„Åó„Åü„Éó„É¨„Éº„É§„Éº„Åå„Åß„Åç„Åü„ÅÆ„Åß„ÄÅ‰ªäÂ∫¶„ÅØÂèéÁõä„Çí‰∏ä„Åí„Åæ„Åó„Çá„ÅÜ„ÄÇ</font><font style="vertical-align: inherit;">ÂâçÂõû„ÅØ„ÄÅÂêåÊúü„ÄÅ„Å§„Åæ„ÇäÈü≥Â£∞„Å®„Éì„Éá„Ç™„ÅÆÂêåÊúü„Çí„Åì„ÅÆÈ†ÜÂ∫è„ÅßÂ∞ë„ÅóËß¶„Çå„Åæ„Åó„Åü„Åå„ÄÅ„Åù„ÅÆÈÄÜ„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">„Åì„Çå„Çí„Éì„Éá„Ç™„Å®Âêå„Åò„É¨„Ç§„Ç¢„Ç¶„Éà„Å´„Åó„Åæ„Åô„ÄÇÂÜÖÈÉ®„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„Çí‰ΩúÊàê„Åó„Å¶„ÄÅ„Éì„Éá„Ç™„Çπ„Éà„É™„Éº„É†„ÅÆË∑ùÈõ¢„ÇíËøΩË∑°„Åó„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Å®ÂêåÊúü„Åï„Åõ„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">Âæå„Åß„Åï„Çâ„Å´‰∏ÄËà¨Âåñ„Åó„Åæ„Åô-„Ç™„Éº„Éá„Ç£„Ç™„Å®„Éì„Éá„Ç™„ÇíÂ§ñÈÉ®„ÇØ„É≠„ÉÉ„ÇØ„Å®ÂêåÊúü„Åï„Åõ„Åæ„Åô„ÄÇ</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„ÅÆÂÆüË£Ö</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„Å´„ÄÅÂâçÂõûÊåÅ„Å£„Å¶„ÅÑ„Åü„Ç™„Éº„Éá„Ç£„Ç™„ÇØ„É≠„ÉÉ„ÇØ„Å´‰ºº„Åü„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇÁèæÂú®ÂÜçÁîü‰∏≠„ÅÆ„Éì„Éá„Ç™„ÅÆÁèæÂú®„ÅÆÊôÇÈñì„Ç™„Éï„Çª„ÉÉ„Éà„ÇíËøî„ÅôÂÜÖÈÉ®ÂÄ§„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">Ë°®Á§∫„Åï„Çå„ÇãÊúÄÂæå„ÅÆ„Éï„É¨„Éº„É†„ÅÆ</font><font style="vertical-align: inherit;">ÁèæÂú®„ÅÆ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTS„Åß</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çø„Ç§„Éû„Éº„ÇíÊõ¥Êñ∞„Åô„Çã„ÅÆ„Å®Âêå„Åò„Åè„Çâ„ÅÑÁ∞°Âçò„Å†„Å®ÊÄù„ÅÜ„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì</font><font style="vertical-align: inherit;">„ÄÇ„Åü„Å†„Åó„ÄÅ„Éü„É™Áßí„É¨„Éô„É´„Å´ËêΩ„Å®„Åô„Å®„ÄÅ„Éì„Éá„Ç™„Éï„É¨„Éº„É†Èñì„ÅÆÊôÇÈñì„ÅåÈï∑„Åô„Åé„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Åì„Å®„ÇíÂøò„Çå„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅËß£Ê±∫Á≠ñ„ÅØÂà•„ÅÆÂÄ§„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Å§„Åæ„Çä</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÊúÄÂæå„ÅÆ„Éï„É¨„Éº„É†„ÅÆ</font><b><font style="vertical-align: inherit;">PTS„Åß</font></b><font style="vertical-align: inherit;">„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„ÇíË®≠ÂÆö„Åó„ÅüÊôÇÈñì„ÇíËøΩË∑°„Åô„Çã„Åì„Å®„Åß„Åô</font><font style="vertical-align: inherit;">„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅ„Éì„Éá„Ç™</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÇØ„É≠„ÉÉ„ÇØ„ÅÆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÁèæÂú®„ÅÆÂÄ§„ÅØ„ÄÅ</font><b><font style="vertical-align: inherit;">PTS_of_last_frame</font></b><font style="vertical-align: inherit;"> +Ôºà</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">current_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_elapsed_since_PTS_value_was_set</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºâ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„ÇΩ„É™„É•„Éº„Ç∑„Éß„É≥„ÅØ„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_audio_clock„Åß</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ë°å„Å£„Åü„ÇÇ„ÅÆ„Å®ÈùûÂ∏∏„Å´„Çà„Åè‰ºº„Å¶„ÅÑ</font><font style="vertical-align: inherit;">„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åó„Åü„Åå„Å£„Å¶„ÄÅÊú¨Ê†ºÁöÑ„Å™ÊßãÈÄ†„Åß„ÅØ„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">double video_current_pts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Å®</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t video_current_pts_time„ÇíÈÖçÁΩÆ„Åó</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„ÇØ„É≠„ÉÉ„ÇØ„ÅØ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video_refresh_timer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞„ÅßÊõ¥Êñ∞„Åï„Çå„Åæ„Åô</font><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_refresh_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">/* ... */</span><font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;video_st) {
    <span class="hljs-keyword">if</span>(is-&gt;pictq_size == <span class="hljs-number">0</span>) {<font></font>
      schedule_refresh(is, <span class="hljs-number">1</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
<font></font>
      is-&gt;video_current_pts = vp-&gt;pts;<font></font>
      is-&gt;video_current_pts_time = av_gettime();</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_component_open„Åß</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ÂàùÊúüÂåñ„Åô„Çã„Åì„Å®„ÇíÂøò„Çå„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ</font><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs">is-&gt;video_current_pts_time = av_gettime();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„Åó„Å¶‰ªäÂøÖË¶Å„Å™„ÅÆ„ÅØ„ÄÅÊÉÖÂ†±„ÇíÂèñÂæó„Åô„ÇãÊñπÊ≥ï„Åß„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_video_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> delta;<font></font>
<font></font>
  delta = (av_gettime() - is-&gt;video_current_pts_time) / <span class="hljs-number">1000000.0</span>;
  <span class="hljs-keyword">return</span> is-&gt;video_current_pts + delta;<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÊôÇË®à„Åã„ÇâÊäΩË±°Âåñ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åó„Åã„Åó„ÄÅ„Å™„Åú„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„ÅÆ„Åß„Åó„Çá„ÅÜ„Åã„ÄÇ</font><font style="vertical-align: inherit;">„Åï„Çâ„Å´ÈÄ≤„Çì„Åß„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Å®„Éì„Éá„Ç™„Åå‰∫í„ÅÑ„Å´ÂêåÊúü„Åó„Çà„ÅÜ„Å®„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´„Éì„Éá„Ç™ÂêåÊúü„Ç≥„Éº„Éâ„ÇíÂ§âÊõ¥„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">FFplay„ÅÆ„Çà„ÅÜ„Å´„ÄÅ„Ç≥„Éû„É≥„Éâ„É©„Ç§„É≥„Ç™„Éó„Ç∑„Éß„É≥„Åß„Åì„Çå„ÇíË°å„Åä„ÅÜ„Å®„Åô„Çã„Å®„ÄÅ„Å©„ÅÜ„Å™„Çã„ÅãÊÉ≥ÂÉè„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font><font style="vertical-align: inherit;">„Åó„Åü„Åå„Å£„Å¶„ÄÅÊäΩË±°Âåñ„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ</font><font style="vertical-align: inherit;">Â§âÊï∞</font><b><font style="vertical-align: inherit;">av_sync_type</font></b><font style="vertical-align: inherit;">„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„Åã„Çâ</font><b><font style="vertical-align: inherit;">get_audio_clock</font></b><font style="vertical-align: inherit;">„ÄÅ</font><b><font style="vertical-align: inherit;">get_video_clock„ÄÅ</font></b><font style="vertical-align: inherit;">„Åæ„Åü„ÅØ„Åù„Çå„Çí‰ΩøÁî®„Åß„Åç„Çã‰ªñ„ÅÆ„ÇØ„É≠„ÉÉ„ÇØ„Çí</font><font style="vertical-align: inherit;">Âëº„Å≥Âá∫„Åô</font><font style="vertical-align: inherit;">Êñ∞„Åó„ÅÑ„É©„ÉÉ„Éë„ÉºÈñ¢Êï∞</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_master_clock</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çí‰ΩúÊàê„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font><b><font style="vertical-align: inherit;">get_external_clock</font></b><font style="vertical-align: inherit;">„Å®Âëº„Å∞„Çå„Çã„Ç≥„É≥„Éî„É•„Éº„Çø„Éº„ÇØ„É≠„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> {<font></font>
  AV_SYNC_AUDIO_MASTER,<font></font>
  AV_SYNC_VIDEO_MASTER,<font></font>
  AV_SYNC_EXTERNAL_MASTER,<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_AV_SYNC_TYPE AV_SYNC_VIDEO_MASTER</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_master_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_VIDEO_MASTER) {
    <span class="hljs-keyword">return</span> get_video_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">return</span> get_audio_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> get_external_clock(is);<font></font>
  }<font></font>
}<font></font>
main() {<font></font>
...<font></font>
  is-&gt;av_sync_type = DEFAULT_AV_SYNC_TYPE;<font></font>
...<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç™„Éº„Éá„Ç£„Ç™ÂêåÊúü</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„Åì„ÅßÊúÄ„ÇÇÈõ£„Åó„ÅÑÈÉ®ÂàÜ„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Å®„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„ÅÆÂêåÊúü„Åß„Åô„ÄÇÁßÅ„Åü„Å°„ÅÆÊà¶Áï•„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Åå„Å©„Åì„Å´„ÅÇ„Çã„Åã„ÇíÊ∏¨ÂÆö„Åó„ÄÅ„Åù„Çå„Çí„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„Å®ÊØîËºÉ„Åó„Å¶„ÄÅË™øÊï¥„Åô„ÇãÂøÖË¶Å„ÅÆ„ÅÇ„Çã„Çµ„É≥„Éó„É´„ÅÆÊï∞„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„Çª„ÉÉ„Éà„ÇíÈÅ©Âàá„Å´ÂâäÊ∏õ„Åæ„Åü„ÅØÂ¢óÂä†„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÂèñÂæó„Åó„Åü„Ç™„Éº„Éá„Ç£„Ç™„Çµ„É≥„Éó„É´„ÅÆÂêÑ„Çª„ÉÉ„Éà„ÇíÂá¶ÁêÜ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åô„Çã</font><font style="vertical-align: inherit;">„Åü„Å≥„Å´</font><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchronize_audio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞„ÇíÂÆüË°å</font><font style="vertical-align: inherit;">„Åó„Åæ„Åô„ÄÇ„Åü„Å†„Åó„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™Âá¶ÁêÜ„ÅØ„Éì„Éá„Ç™„Éë„Ç±„ÉÉ„Éà„ÅÆÂá¶ÁêÜ„Çà„Çä„ÇÇ„ÅØ„Çã„Åã„Å´È†ªÁπÅ„Å´Áô∫Áîü„Åô„Çã„Åü„ÇÅ„ÄÅÂ∏∏„Å´ÂêåÊúü„Åô„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„ÄÅ</font><b><font style="vertical-align: inherit;">synchronize_audio</font></b><font style="vertical-align: inherit;">Èñ¢Êï∞„ÅÆÈÄ£Á∂öÂëº„Å≥Âá∫„Åó„ÅÆÊúÄÂ∞èÊï∞„ÇíË®≠ÂÆö„Åó„Åæ„Åô</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‰Ωï„ÇÇ„Åô„ÇãÂâç„Å´„ÄÅÈùûÂêåÊúü„Å®Ë¶ã„Å™„Åï„Çå„Åæ„Åô„ÄÇ„ÇÇ„Å°„Çç„Çì„ÄÅÂâçÂõû„Å®ÂêåÊßò„Å´„ÄÅ„ÄåÈùûÂêåÊúü„Äç„Å®„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„ÇØ„É≠„ÉÉ„ÇØ„Å®„Éì„Éá„Ç™„ÇØ„É≠„ÉÉ„ÇØ„ÅåÂêåÊúü„Åó„Åç„ÅÑÂÄ§„Çà„Çä„ÇÇÂ§ß„Åç„ÅèÁï∞„Å™„Çã„Åì„Å®„ÇíÊÑèÂë≥„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åó„Åü„Åå„Å£„Å¶„ÄÅÂàÜÊï∞‰øÇÊï∞„ÄÅ„Åü„Å®„Åà„Å∞</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çí‰ΩøÁî®„Åó„ÄÅ</font><font style="vertical-align: inherit;">‰ªä„ÄÅ</font><b><font style="vertical-align: inherit;">N</font></b><font style="vertical-align: inherit;">„ÇíÂæó„Åü„Å®„Åó„Åæ„Åó„Çá„ÅÜ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂêåÊúü„Åó„Å¶„ÅÑ„Å™„ÅÑ„Ç™„Éº„Éá„Ç£„Ç™„Çµ„É≥„Éó„É´„ÅÆ„Çª„ÉÉ„Éà„ÄÇÂêåÊúü„Åó„Å™„ÅÑ„Çµ„É≥„Éó„É´„ÅÆÊï∞„ÇÇÂ§ß„Åç„ÅèÁï∞„Å™„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅ„Åù„Çå„Åû„Çå„ÅåÂêåÊúü„Åó„Å¶„ÅÑ„Å™„ÅÑ„Çµ„É≥„Éó„É´„ÅÆÂπ≥ÂùáÂÄ§„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ„Åü„Å®„Åà„Å∞„ÄÅÊúÄÂàù„ÅÆÂëº„Å≥Âá∫„Åó„ÅØ„ÄÅ40„Éü„É™ÁßíÂêåÊúü„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Åì„Å®„ÇíÁ§∫„Åó„ÄÅÊ¨°„ÅÆÂëº„Å≥Âá∫„Åó„ÅØ50„Éü„É™ÁßíÂêåÊúü„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Åì„Å®„ÇíÁ§∫„Åó„Åæ„Åô„ÄÇ„Åü„Å†„Åó„ÄÅÊúÄÊñ∞„ÅÆÂÄ§„Åå„Åù„Çå„Çâ„ÅÆÂâç„Å´Êù•„ÇãÂÄ§„Çà„Çä„ÇÇÈáçË¶Å„Åß„ÅÇ„Çã„Åü„ÇÅ„ÄÅÂçòÁ¥î„Å™ÊâãÊÆµ„ÇíÂèñ„Çã„Å§„ÇÇ„Çä„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅÂàÜÊï∞‰øÇÊï∞„ÄÅ„Åü„Å®„Åà„Å∞</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ</font><font style="vertical-align: inherit;">Ê¨°„ÅÆ„Çà„ÅÜ„Å´ÈÅï„ÅÑ„ÇíË¶ÅÁ¥Ñ„Åó„Åæ„ÅôÔºö</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_sum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new_diff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_sum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇÂπ≥ÂùáÂ∑Æ„ÇíË¶ã„Å§„Åë„ÇãÊ∫ñÂÇô„Åå„Åß„Åç„Åü„Çâ„ÄÅÂçòÁ¥î„Å´</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avg_diff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> =„Çí</font><font style="vertical-align: inherit;">Ë®àÁÆó„Åó</font><b><font style="vertical-align: inherit;">„Åæ„Åô„ÄÇ</font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff_sum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> *Ôºà1- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºâ„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„Åì„Åß‰Ωï„ÅåËµ∑„Åì„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åß„Åô„ÅãÔºü</font><font style="vertical-align: inherit;">ÊñπÁ®ãÂºè„ÅØ„ÅÇ„ÇãÁ®Æ„ÅÆÈ≠îÊ≥ï„ÅÆ„Çà„ÅÜ„Å´Ë¶ã„Åà„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åæ„ÅÇ„ÄÅ„Åì„Çå„ÅØÂü∫Êú¨ÁöÑ„Å´„ÅØ„ÄÅÂπæ‰ΩïÁ≥ªÂàó„ÇíÈáç„Åø„Å®„Åó„Å¶‰ΩøÁî®„Åó„ÅüÂä†ÈáçÂπ≥Âùá„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„Çå„Å´ÂêçÂâç„Åå„ÅÇ„Çã„Åã„Å©„ÅÜ„Åã„ÅØ„Çè„Åã„Çä„Åæ„Åõ„Çì„ÅåÔºàWikipedia„Åß„ÇÇÁ¢∫Ë™ç„Åó„Åæ„Åó„ÅüÔºÅÔºâ„ÄÅË©≥Á¥∞„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„Åì„Åì„Åß</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ë™¨Êòé„Åó„Åæ„Åô</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºà„Åæ„Åü„ÅØ„Åì„ÅìÔºö</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">weightedmean.txt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºâ„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Èñ¢Êï∞„ÅØÊ¨°„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* Add or subtract samples to get a better sync, return new
   audio buffer size */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">synchronize_audio</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">short</span> *samples,
		      <span class="hljs-keyword">int</span> samples_size, <span class="hljs-keyword">double</span> pts)</span> </span>{
  <span class="hljs-keyword">int</span> n;
  <span class="hljs-keyword">double</span> ref_clock;<font></font>
  <font></font>
  n = <span class="hljs-number">2</span> * is-&gt;audio_st-&gt;codec-&gt;channels;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">double</span> diff, avg_diff;
    <span class="hljs-keyword">int</span> wanted_size, min_size, max_size, nb_samples;<font></font>
    <font></font>
    ref_clock = get_master_clock(is);<font></font>
    diff = get_audio_clock(is) - ref_clock;<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(diff &lt; AV_NOSYNC_THRESHOLD) {
      <span class="hljs-comment">// accumulate the diffs</span><font></font>
      is-&gt;audio_diff_cum = diff + is-&gt;audio_diff_avg_coef<font></font>
	* is-&gt;audio_diff_cum;<font></font>
      <span class="hljs-keyword">if</span>(is-&gt;audio_diff_avg_count &lt; AUDIO_DIFF_AVG_NB) {<font></font>
	is-&gt;audio_diff_avg_count++;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	avg_diff = is-&gt;audio_diff_cum * (<span class="hljs-number">1.0</span> - is-&gt;audio_diff_avg_coef);<font></font>
<font></font>
       <span class="hljs-comment">/* Shrinking/expanding buffer code.... */</span><font></font>
<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* difference is TOO big; reset diff stuff */</span>
      is-&gt;audio_diff_avg_count = <span class="hljs-number">0</span>;<font></font>
      is-&gt;audio_diff_cum = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> samples_size;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åó„Åü„Åå„Å£„Å¶„ÄÅ„Åô„Åπ„Å¶„Åå„ÅÜ„Åæ„Åè„ÅÑ„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Çµ„Ç¶„É≥„Éâ„Åå„Éì„Éá„Ç™„ÇÑÊôÇË®à„Å®„Åó„Å¶‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„Å®„Å©„ÅÆÁ®ãÂ∫¶‰∏ÄËá¥„Åó„Å¶„ÅÑ„Å™„ÅÑ„Åã„ÄÅ„Åä„Åä„Çà„Åù„Çè„Åã„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åù„Çå„Åß„ÅØ„ÄÅ„Åì„ÅÆ„Ç≥„Éº„Éâ„Çí„Äå„Éê„ÉÉ„Éï„Ç°„Ç≥„Éº„Éâ„ÅÆÂâäÊ∏õ/Êã°Âºµ„Äç„Çª„ÇØ„Ç∑„Éß„É≥„Å´ÈÖçÁΩÆ„Åó„Å¶„ÄÅËøΩÂä†„Åæ„Åü„ÅØÁ†¥Ê£Ñ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„Çµ„É≥„Éó„É´„ÅÆÊï∞„ÇíË®àÁÆó„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(avg_diff) &gt;= is-&gt;audio_diff_threshold) {<font></font>
  wanted_size = samples_size + <font></font>
  ((<span class="hljs-keyword">int</span>)(diff * is-&gt;audio_st-&gt;codec-&gt;sample_rate) * n);<font></font>
  min_size = samples_size * ((<span class="hljs-number">100</span> - SAMPLE_CORRECTION_PERCENT_MAX)<font></font>
                             / <span class="hljs-number">100</span>);<font></font>
  max_size = samples_size * ((<span class="hljs-number">100</span> + SAMPLE_CORRECTION_PERCENT_MAX) <font></font>
                             / <span class="hljs-number">100</span>);
  <span class="hljs-keyword">if</span>(wanted_size &lt; min_size) {<font></font>
    wanted_size = min_size;<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (wanted_size &gt; max_size) {<font></font>
    wanted_size = max_size;<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„Çå„ÇíÂøò„Çå„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">audio_length„Çí</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> *Ôºà</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> *ÔºÉ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÉÅ„É£„Éç„É´„ÅÆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * 2Ôºâ„ÅÆ„Çµ„É≥„Éó„É´Êï∞„Åß„ÅÇ„Çã</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">audio_length„ÅÆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç™„Éº„Éá„Ç£„Ç™„ÅÆÁßí„ÄÇ</font><font style="vertical-align: inherit;">„Åó„Åü„Åå„Å£„Å¶„ÄÅÂøÖË¶Å„Å™„Çµ„É≥„Éó„É´„ÅÆÊï∞„ÅØ„ÄÅÊó¢„Å´ÊåÅ„Å£„Å¶„ÅÑ„Çã„Çµ„É≥„Éó„É´„ÅÆÊï∞„Å´„ÄÅ„Çµ„Ç¶„É≥„Éâ„ÅåÂÜçÁîü„Åï„Çå„ÅüÊôÇÈñì„Å´ÂØæÂøú„Åô„Çã„Çµ„É≥„Éó„É´„ÅÆÊï∞„Çí„Éó„É©„Çπ„Åæ„Åü„ÅØ„Éû„Ç§„Éä„Çπ„Åó„ÅüÊï∞„Å®Á≠â„Åó„Åè„Å™„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åæ„Åü„ÄÅ‰øÆÊ≠£„ÅÆÂ§ß„Åç„Åï„ÅÆÂà∂Èôê„ÇÇË®≠ÂÆö„Åó„Åæ„Åô„ÄÇ„Éê„ÉÉ„Éï„Ç°„ÇíÂ§âÊõ¥„Åó„Åô„Åé„Çã„Å®„ÄÅ„É¶„Éº„Ç∂„Éº„Å´„Å®„Å£„Å¶ÁÖ©„Çè„Åó„Åô„Åé„Çã„Åã„Çâ„Åß„Åô„ÄÇ</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çµ„É≥„Éó„É´Êï∞„ÅÆ‰øÆÊ≠£</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„Å´„ÄÅ„Çµ„Ç¶„É≥„Éâ„Çí‰øÆÊ≠£„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÁöÜ„Åï„Çì„ÅØ„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchronize_audio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞</font><font style="vertical-align: inherit;">„Åå„Çµ„É≥„Éó„É´„Çµ„Ç§„Ç∫„ÇíËøî„Åó„ÄÅ„Çπ„Éà„É™„Éº„É†„Å´ÈÄÅ‰ø°„Åô„Çã„Éê„Ç§„ÉàÊï∞„ÇíÈÄöÁü•</font><font style="vertical-align: inherit;">„Åô„Çã„Åì„Å®„Å´Ê∞ó‰ªò„ÅÑ„Åü„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì</font><font style="vertical-align: inherit;">„ÄÇ</font><font style="vertical-align: inherit;">„Åó„Åü„Åå„Å£„Å¶„ÄÅ„Çµ„É≥„Éó„É´„Çµ„Ç§„Ç∫„ÇíÁõÆÁöÑ„ÅÆÂÄ§„Å´Ë™øÊï¥„Åô„Çã„Å†„Åë„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„Çå„Å´„Çà„Çä„ÄÅ„Çµ„É≥„Éó„É´„Çµ„Ç§„Ç∫„ÅåÂ∞è„Åï„Åè„Å™„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åü„Å†„Åó„ÄÅ„Éê„ÉÉ„Éï„Ç°„ÇíÂ¢ó„ÇÑ„ÅôÂøÖË¶Å„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Éê„ÉÉ„Éï„Ç°„Å´„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Çµ„É≥„Éó„É´„Çµ„Ç§„Ç∫„ÇíÂ¢ó„ÇÑ„Åô„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">„Åó„Åü„Åå„Å£„Å¶„ÄÅÂ∞ë„ÅóËøΩÂä†„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åó„Åã„Åó„ÄÅÊ≠£Á¢∫„Å´„ÅØ‰Ωï„ÇíËøΩÂä†„Åô„Çã„ÅÆ„Åß„Åó„Çá„ÅÜ„ÅãÔºü</font><font style="vertical-align: inherit;">„Ç™„Éº„Éá„Ç£„Ç™„ÇíÂ§ñÊåø„Åó„Çà„ÅÜ„Å®„Åô„Çã„ÅÆ„ÅØ„Å∞„Åã„Åí„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅ„Åô„Åß„Å´ÊåÅ„Å£„Å¶„ÅÑ„Çã„Ç™„Éº„Éá„Ç£„Ç™„Çí‰ΩøÁî®„Åó„Å¶„ÄÅÊúÄÂæå„ÅÆ„Çµ„É≥„Éó„É´„ÅÆÂÄ§„Çí„Éê„ÉÉ„Éï„Ç°„Éº„Å´ËøΩÂä†„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(wanted_size &lt; samples_size) {
  <span class="hljs-comment">/* remove samples */</span><font></font>
  samples_size = wanted_size;<font></font>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(wanted_size &gt; samples_size) {
  <span class="hljs-keyword">uint8_t</span> *samples_end, *q;
  <span class="hljs-keyword">int</span> nb;<font></font>
<font></font>
  <span class="hljs-comment">/* add samples by copying final samples */</span><font></font>
  nb = (samples_size - wanted_size);<font></font>
  samples_end = (<span class="hljs-keyword">uint8_t</span> *)samples + samples_size - n;<font></font>
  q = samples_end + n;<font></font>
  <span class="hljs-keyword">while</span>(nb &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">memcpy</span>(q, samples_end, n);<font></font>
    q += n;<font></font>
    nb -= n;<font></font>
  }<font></font>
  samples_size = wanted_size;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„Çå„Åß„Çµ„É≥„Éó„É´„Çµ„Ç§„Ç∫„ÅåËøî„Åï„Çå„ÄÅ„Åì„ÅÆÈñ¢Êï∞„ÅØÁµÇ‰∫Ü„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„Çå„Åã„ÇâË°å„ÅÜÂøÖË¶Å„Åå„ÅÇ„Çã„ÅÆ„ÅØ„ÄÅ„Åì„Çå„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®„Å†„Åë„Åß„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">audio_callback</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata, Uint8 *stream, <span class="hljs-keyword">int</span> len)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  <span class="hljs-keyword">int</span> len1, audio_size;
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  <span class="hljs-keyword">while</span>(len &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span>(is-&gt;audio_buf_index &gt;= is-&gt;audio_buf_size) {
      <span class="hljs-comment">/* We have already sent all our data; get more */</span>
      audio_size = audio_decode_frame(is, is-&gt;audio_buf, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_buf), &amp;pts);
      <span class="hljs-keyword">if</span>(audio_size &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* If error, output silence */</span>
	is-&gt;audio_buf_size = <span class="hljs-number">1024</span>;
	<span class="hljs-built_in">memset</span>(is-&gt;audio_buf, <span class="hljs-number">0</span>, is-&gt;audio_buf_size);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	audio_size = synchronize_audio(is, (<span class="hljs-keyword">int16_t</span> *)is-&gt;audio_buf,<font></font>
				       audio_size, pts);<font></font>
	is-&gt;audio_buf_size = audio_size;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÂÆüË°å„Åó„Åü„ÅÆ„ÅØ„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchronize_audio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Âëº„Å≥Âá∫„Åó„ÇíÊåøÂÖ•„Åô„Çã„Åì„Å®„Å†„Åë</font><font style="vertical-align: inherit;">„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">Ôºà„Åæ„Åü„ÄÅ„ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅÁßÅ„ÅåÂÆöÁæ©„Åó„Å™„Åã„Å£„ÅüÂ§âÊï∞„ÇíÂàùÊúüÂåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÔºâ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊúÄÂæå„Å´„ÄÅÁµÇ‰∫Ü„Åô„ÇãÂâç„Å´„ÄÅ„Äåif„ÄçÊù°‰ª∂„ÇíËøΩÂä†„Åó„Å¶„ÄÅ„Éì„Éá„Ç™„Åå„É°„Ç§„É≥„ÇØ„É≠„ÉÉ„ÇØ„ÅÆÂ†¥Âêà„Å´„Éì„Éá„Ç™„ÇíÂêåÊúü„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_VIDEO_MASTER) {<font></font>
  ref_clock = get_master_clock(is);<font></font>
  diff = vp-&gt;pts - ref_clock;<font></font>
<font></font>
  <span class="hljs-comment">/* Skip or repeat the frame. Take delay into account
     FFPlay still doesn't "know if this is the best guess." */</span><font></font>
  sync_threshold = (delay &gt; AV_SYNC_THRESHOLD) ? delay :<font></font>
                    AV_SYNC_THRESHOLD;<font></font>
  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(diff) &lt; AV_NOSYNC_THRESHOLD) {
    <span class="hljs-keyword">if</span>(diff &lt;= -sync_threshold) {<font></font>
      delay = <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(diff &gt;= sync_threshold) {<font></font>
      delay = <span class="hljs-number">2</span> * delay;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„Åó„Å¶„Åù„Çå„ÅØ„ÅÜ„Åæ„Åè„ÅÑ„Åç„Åæ„ÅôÔºÅ</font><font style="vertical-align: inherit;">„ÇΩ„Éº„Çπ„Éï„Ç°„Ç§„É´„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„ÄÅÁßÅ„ÅåÂÆöÁæ©„Åó„Åü„ÇäÂàùÊúüÂåñ„Åó„Åü„Çä„Åó„Å™„Åã„Å£„ÅüÂ§âÊï∞„ÇíÂàùÊúüÂåñ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font><font style="vertical-align: inherit;">Ê¨°„Å´„Ç≥„É≥„Éë„Ç§„É´„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="bash hljs">gcc -o tutorial06 tutorial06.c -lavutil -lavformat -lavcodec -lswscale -lz -lm \<font></font>
`sdl-config --cflags --libs`</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„Åó„Å¶È£õË°å„ÅØÊ≠£Â∏∏„Åß„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊúÄÂæå„ÅÆ„É¨„ÉÉ„Çπ„É≥„Åß„ÅØÂ∑ª„ÅçÊàª„Åó„Åæ„Åô„ÄÇ</font></font><a name="seeking"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¨„ÉÉ„Çπ„É≥7ÔºöÊ§úÁ¥¢</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="„É¨„ÉÉ„Çπ„É≥6Ôºö„Ç™„Éº„Éá„Ç£„Ç™ÂêåÊúü"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üê </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="ÁõÆÊ¨°„Å∏"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚áë </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="„ÅÇ„Å®„Åå„Åç"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üí</font></font></a></h2><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂÆåÂÖ®„Å™„É™„Çπ„Éàtutorial07.c</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">// tutorial05.c</span>
<span class="hljs-comment">// A pedagogical video player that really works!</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Code based on FFplay, Copyright (c) 2003 Fabrice Bellard, </span>
<span class="hljs-comment">// and a tutorial by Martin Bohme (boehme@inb.uni-luebeckREMOVETHIS.de)</span>
<span class="hljs-comment">// Tested on Gentoo, CVS version 5/01/07 compiled with GCC 4.1.1</span>
<span class="hljs-comment">// With updates from https://github.com/chelyaev/ffmpeg-tutorial</span>
<span class="hljs-comment">// Updates tested on:</span>
<span class="hljs-comment">// LAVC 54.59.100, LAVF 54.29.104, LSWS 2.1.101, SDL 1.2.15</span>
<span class="hljs-comment">// on GCC 4.7.2 in Debian February 2015</span>
<span class="hljs-comment">// Use</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// gcc -o tutorial05 tutorial05.c -lavformat -lavcodec -lswscale -lz -lm `sdl-config --cflags --libs`</span>
<span class="hljs-comment">// to build (assuming libavformat and libavcodec are correctly installed, </span>
<span class="hljs-comment">// and assuming you have sdl-config. Please refer to SDL docs for your installation.)</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Run using</span>
<span class="hljs-comment">// tutorial04 myvideofile.mpg</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// to play the video stream on your screen.</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavcodec/avcodec.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libavformat/avformat.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;libswscale/swscale.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;SDL_thread.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> __MINGW32__</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">undef</span> main <span class="hljs-comment">/* Prevents SDL from overriding main() */</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;assert.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;math.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-comment">// compatibility with newer API</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> LIBAVCODEC_VERSION_INT &lt; AV_VERSION_INT(55,28,1)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_alloc avcodec_alloc_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> av_frame_free avcodec_free_frame</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SDL_AUDIO_BUFFER_SIZE 1024</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIO_FRAME_SIZE 192000</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_AUDIOQ_SIZE (5 * 16 * 1024)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAX_VIDEOQ_SIZE (5 * 256 * 1024)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_SYNC_THRESHOLD 0.01</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AV_NOSYNC_THRESHOLD 10.0</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SAMPLE_CORRECTION_PERCENT_MAX 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> AUDIO_DIFF_AVG_NB 20</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_REFRESH_EVENT (SDL_USEREVENT)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FF_QUIT_EVENT (SDL_USEREVENT + 1)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> VIDEO_PICTURE_QUEUE_SIZE 1</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_AV_SYNC_TYPE AV_SYNC_VIDEO_MASTER</span><font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PacketQueue</span> {</span><font></font>
  AVPacketList *first_pkt, *last_pkt;<font></font>
  <span class="hljs-keyword">int</span> nb_packets;
  <span class="hljs-keyword">int</span> size;<font></font>
  SDL_mutex *mutex;<font></font>
  SDL_cond *cond;<font></font>
} PacketQueue;<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoPicture</span> {</span><font></font>
  SDL_Overlay *bmp;<font></font>
  <span class="hljs-keyword">int</span> width, height; <span class="hljs-comment">/* source height &amp; width */</span>
  <span class="hljs-keyword">int</span> allocated;
  <span class="hljs-keyword">double</span> pts;<font></font>
} VideoPicture;<font></font>
<font></font>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">VideoState</span> {</span><font></font>
<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  <span class="hljs-keyword">int</span>             videoStream, audioStream;<font></font>
<font></font>
  <span class="hljs-keyword">int</span>             av_sync_type;
  <span class="hljs-keyword">double</span>          external_clock; <span class="hljs-comment">/* external clock base */</span>
  <span class="hljs-keyword">int64_t</span>         external_clock_time;
  <span class="hljs-keyword">int</span>             seek_req;
  <span class="hljs-keyword">int</span>             seek_flags;
  <span class="hljs-keyword">int64_t</span>         seek_pos;<font></font>
<font></font>
  <span class="hljs-keyword">double</span>          audio_clock;<font></font>
  AVStream        *audio_st;<font></font>
  AVCodecContext  *audio_ctx;<font></font>
  PacketQueue     audioq;<font></font>
  <span class="hljs-keyword">uint8_t</span>         audio_buf[(AVCODEC_MAX_AUDIO_FRAME_SIZE * <span class="hljs-number">3</span>) / <span class="hljs-number">2</span>];
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_size;
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>    audio_buf_index;<font></font>
  AVFrame         audio_frame;<font></font>
  AVPacket        audio_pkt;<font></font>
  <span class="hljs-keyword">uint8_t</span>         *audio_pkt_data;
  <span class="hljs-keyword">int</span>             audio_pkt_size;
  <span class="hljs-keyword">int</span>             audio_hw_buf_size;
  <span class="hljs-keyword">double</span>          audio_diff_cum; <span class="hljs-comment">/* used for AV difference average computation */</span>
  <span class="hljs-keyword">double</span>          audio_diff_avg_coef;
  <span class="hljs-keyword">double</span>          audio_diff_threshold;
  <span class="hljs-keyword">int</span>             audio_diff_avg_count;
  <span class="hljs-keyword">double</span>          frame_timer;
  <span class="hljs-keyword">double</span>          frame_last_pts;
  <span class="hljs-keyword">double</span>          frame_last_delay;
  <span class="hljs-keyword">double</span>          video_clock; <span class="hljs-comment">///&lt;pts of last decoded frame / predicted pts of next decoded frame</span>
  <span class="hljs-keyword">double</span>          video_current_pts; <span class="hljs-comment">///&lt;current displayed pts (different from video_clock if frame fifos are used)</span>
  <span class="hljs-keyword">int64_t</span>         video_current_pts_time;  <span class="hljs-comment">///&lt;time (av_gettime) at which we updated video_current_pts - used to have running video pts</span><font></font>
  AVStream        *video_st;<font></font>
  AVCodecContext  *video_ctx;<font></font>
  PacketQueue     videoq;<font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SwsContext</span> *<span class="hljs-title">sws_ctx</span>;</span><font></font>
<font></font>
  VideoPicture    pictq[VIDEO_PICTURE_QUEUE_SIZE];<font></font>
  <span class="hljs-keyword">int</span>             pictq_size, pictq_rindex, pictq_windex;<font></font>
  SDL_mutex       *pictq_mutex;<font></font>
  SDL_cond        *pictq_cond;<font></font>
  <font></font>
  SDL_Thread      *parse_tid;<font></font>
  SDL_Thread      *video_tid;<font></font>
<font></font>
  <span class="hljs-keyword">char</span>            filename[<span class="hljs-number">1024</span>];
  <span class="hljs-keyword">int</span>             quit;<font></font>
} VideoState;<font></font>
<font></font>
<span class="hljs-keyword">enum</span> {<font></font>
  AV_SYNC_AUDIO_MASTER,<font></font>
  AV_SYNC_VIDEO_MASTER,<font></font>
  AV_SYNC_EXTERNAL_MASTER,<font></font>
};<font></font>
<font></font>
SDL_Surface     *screen;<font></font>
SDL_mutex       *screen_mutex;<font></font>
<font></font>
<span class="hljs-comment">/* Since we only have one decoding thread, the Big Struct
   can be global in case we need it. */</span><font></font>
VideoState *global_video_state;<font></font>
AVPacket flush_pkt;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_init</span><span class="hljs-params">(PacketQueue *q)</span> </span>{
  <span class="hljs-built_in">memset</span>(q, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(PacketQueue));<font></font>
  q-&gt;mutex = SDL_CreateMutex();<font></font>
  q-&gt;cond = SDL_CreateCond();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_put</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt)</span> </span>{<font></font>
<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">if</span>(pkt != &amp;flush_pkt &amp;&amp; av_dup_packet(pkt) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
  pkt1 = av_malloc(<span class="hljs-keyword">sizeof</span>(AVPacketList));
  <span class="hljs-keyword">if</span> (!pkt1)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  pkt1-&gt;pkt = *pkt;<font></font>
  pkt1-&gt;next = <span class="hljs-literal">NULL</span>;<font></font>
  <font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (!q-&gt;last_pkt)<font></font>
    q-&gt;first_pkt = pkt1;<font></font>
  <span class="hljs-keyword">else</span><font></font>
    q-&gt;last_pkt-&gt;next = pkt1;<font></font>
  q-&gt;last_pkt = pkt1;<font></font>
  q-&gt;nb_packets++;<font></font>
  q-&gt;size += pkt1-&gt;pkt.size;<font></font>
  SDL_CondSignal(q-&gt;cond);<font></font>
  <font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_get</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt, <span class="hljs-keyword">int</span> block)</span>
</span>{<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">int</span> ret;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <font></font>
  <span class="hljs-keyword">for</span>(;;) {<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(global_video_state-&gt;quit) {<font></font>
      ret = <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    pkt1 = q-&gt;first_pkt;<font></font>
    <span class="hljs-keyword">if</span> (pkt1) {<font></font>
      q-&gt;first_pkt = pkt1-&gt;next;<font></font>
      <span class="hljs-keyword">if</span> (!q-&gt;first_pkt)<font></font>
	q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
      q-&gt;nb_packets--;<font></font>
      q-&gt;size -= pkt1-&gt;pkt.size;<font></font>
      *pkt = pkt1-&gt;pkt;<font></font>
      av_free(pkt1);<font></font>
      ret = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!block) {<font></font>
      ret = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      SDL_CondWait(q-&gt;cond, q-&gt;mutex);<font></font>
    }<font></font>
  }<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">return</span> ret;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_flush</span><span class="hljs-params">(PacketQueue *q)</span> </span>{<font></font>
  AVPacketList *pkt, *pkt1;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">for</span>(pkt = q-&gt;first_pkt; pkt != <span class="hljs-literal">NULL</span>; pkt = pkt1) {<font></font>
    pkt1 = pkt-&gt;next;<font></font>
    av_free_packet(&amp;pkt-&gt;pkt);<font></font>
    av_freep(&amp;pkt);<font></font>
  }<font></font>
  q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;first_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;nb_packets = <span class="hljs-number">0</span>;<font></font>
  q-&gt;size = <span class="hljs-number">0</span>;<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_audio_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> hw_buf_size, bytes_per_sec, n;<font></font>
  <font></font>
  pts = is-&gt;audio_clock; <span class="hljs-comment">/* maintained in the audio thread */</span><font></font>
  hw_buf_size = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
  bytes_per_sec = <span class="hljs-number">0</span>;<font></font>
  n = is-&gt;audio_ctx-&gt;channels * <span class="hljs-number">2</span>;
  <span class="hljs-keyword">if</span>(is-&gt;audio_st) {<font></font>
    bytes_per_sec = is-&gt;audio_ctx-&gt;sample_rate * n;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(bytes_per_sec) {<font></font>
    pts -= (<span class="hljs-keyword">double</span>)hw_buf_size / bytes_per_sec;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_video_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">double</span> delta;<font></font>
<font></font>
  delta = (av_gettime() - is-&gt;video_current_pts_time) / <span class="hljs-number">1000000.0</span>;
  <span class="hljs-keyword">return</span> is-&gt;video_current_pts + delta;<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_external_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">return</span> av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_master_clock</span><span class="hljs-params">(VideoState *is)</span> </span>{
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_VIDEO_MASTER) {
    <span class="hljs-keyword">return</span> get_video_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;av_sync_type == AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">return</span> get_audio_clock(is);<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> get_external_clock(is);<font></font>
  }<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">/* Add or subtract samples to get a better sync, return new
   audio buffer size */</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">synchronize_audio</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">short</span> *samples,
		      <span class="hljs-keyword">int</span> samples_size, <span class="hljs-keyword">double</span> pts)</span> </span>{
  <span class="hljs-keyword">int</span> n;
  <span class="hljs-keyword">double</span> ref_clock;<font></font>
<font></font>
  n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_AUDIO_MASTER) {
    <span class="hljs-keyword">double</span> diff, avg_diff;
    <span class="hljs-keyword">int</span> wanted_size, min_size, max_size <span class="hljs-comment">/*, nb_samples */</span>;<font></font>
    <font></font>
    ref_clock = get_master_clock(is);<font></font>
    diff = get_audio_clock(is) - ref_clock;<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(diff &lt; AV_NOSYNC_THRESHOLD) {
      <span class="hljs-comment">// accumulate the diffs</span><font></font>
      is-&gt;audio_diff_cum = diff + is-&gt;audio_diff_avg_coef<font></font>
	* is-&gt;audio_diff_cum;<font></font>
      <span class="hljs-keyword">if</span>(is-&gt;audio_diff_avg_count &lt; AUDIO_DIFF_AVG_NB) {<font></font>
	is-&gt;audio_diff_avg_count++;<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	avg_diff = is-&gt;audio_diff_cum * (<span class="hljs-number">1.0</span> - is-&gt;audio_diff_avg_coef);
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(avg_diff) &gt;= is-&gt;audio_diff_threshold) {<font></font>
	  wanted_size = samples_size + ((<span class="hljs-keyword">int</span>)(diff * is-&gt;audio_ctx-&gt;sample_rate) * n);<font></font>
	  min_size = samples_size * ((<span class="hljs-number">100</span> - SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);<font></font>
	  max_size = samples_size * ((<span class="hljs-number">100</span> + SAMPLE_CORRECTION_PERCENT_MAX) / <span class="hljs-number">100</span>);
	  <span class="hljs-keyword">if</span>(wanted_size &lt; min_size) {<font></font>
	    wanted_size = min_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (wanted_size &gt; max_size) {<font></font>
	    wanted_size = max_size;<font></font>
	  }<font></font>
	  <span class="hljs-keyword">if</span>(wanted_size &lt; samples_size) {
	    <span class="hljs-comment">/* remove samples */</span><font></font>
	    samples_size = wanted_size;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(wanted_size &gt; samples_size) {
	    <span class="hljs-keyword">uint8_t</span> *samples_end, *q;
	    <span class="hljs-keyword">int</span> nb;<font></font>
<font></font>
	    <span class="hljs-comment">/* add samples by copying final sample*/</span><font></font>
	    nb = (samples_size - wanted_size);<font></font>
	    samples_end = (<span class="hljs-keyword">uint8_t</span> *)samples + samples_size - n;<font></font>
	    q = samples_end + n;<font></font>
	    <span class="hljs-keyword">while</span>(nb &gt; <span class="hljs-number">0</span>) {
	      <span class="hljs-built_in">memcpy</span>(q, samples_end, n);<font></font>
	      q += n;<font></font>
	      nb -= n;<font></font>
	    }<font></font>
	    samples_size = wanted_size;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/* difference is TOO big; reset diff stuff */</span>
      is-&gt;audio_diff_avg_count = <span class="hljs-number">0</span>;<font></font>
      is-&gt;audio_diff_cum = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> samples_size;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">audio_decode_frame</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">uint8_t</span> *audio_buf, <span class="hljs-keyword">int</span> buf_size, <span class="hljs-keyword">double</span> *pts_ptr)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">int</span> len1, data_size = <span class="hljs-number">0</span>;<font></font>
  AVPacket *pkt = &amp;is-&gt;audio_pkt;<font></font>
  <span class="hljs-keyword">double</span> pts;
  <span class="hljs-keyword">int</span> n;<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">while</span>(is-&gt;audio_pkt_size &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">int</span> got_frame = <span class="hljs-number">0</span>;<font></font>
      len1 = avcodec_decode_audio4(is-&gt;audio_ctx, &amp;is-&gt;audio_frame, &amp;got_frame, pkt);<font></font>
      <span class="hljs-keyword">if</span>(len1 &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* if error, skip frame */</span>
	is-&gt;audio_pkt_size = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      data_size = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span>(got_frame) {<font></font>
	data_size = av_samples_get_buffer_size(<span class="hljs-literal">NULL</span>, <font></font>
					       is-&gt;audio_ctx-&gt;channels,<font></font>
					       is-&gt;audio_frame.nb_samples,<font></font>
					       is-&gt;audio_ctx-&gt;sample_fmt,<font></font>
					       <span class="hljs-number">1</span>);<font></font>
	assert(data_size &lt;= buf_size);<font></font>
	<span class="hljs-built_in">memcpy</span>(audio_buf, is-&gt;audio_frame.data[<span class="hljs-number">0</span>], data_size);<font></font>
      }<font></font>
      is-&gt;audio_pkt_data += len1;<font></font>
      is-&gt;audio_pkt_size -= len1;<font></font>
      <span class="hljs-keyword">if</span>(data_size &lt;= <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* No data yet, get more frames */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      }<font></font>
      pts = is-&gt;audio_clock;<font></font>
      *pts_ptr = pts;<font></font>
      n = <span class="hljs-number">2</span> * is-&gt;audio_ctx-&gt;channels;<font></font>
      is-&gt;audio_clock += (<span class="hljs-keyword">double</span>)data_size /<font></font>
	(<span class="hljs-keyword">double</span>)(n * is-&gt;audio_ctx-&gt;sample_rate);
      <span class="hljs-comment">/* We have data, return it and come back for more later */</span>
      <span class="hljs-keyword">return</span> data_size;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data)<font></font>
      av_free_packet(pkt);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">/* next packet */</span>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;audioq, pkt, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data == flush_pkt.data) {<font></font>
      avcodec_flush_buffers(is-&gt;audio_ctx);<font></font>
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
    is-&gt;audio_pkt_data = pkt-&gt;data;<font></font>
    is-&gt;audio_pkt_size = pkt-&gt;size;<font></font>
    <span class="hljs-comment">/* if update, update the audio clock w/pts */</span>
    <span class="hljs-keyword">if</span>(pkt-&gt;pts != AV_NOPTS_VALUE) {<font></font>
      is-&gt;audio_clock = av_q2d(is-&gt;audio_st-&gt;time_base)*pkt-&gt;pts;<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">audio_callback</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata, Uint8 *stream, <span class="hljs-keyword">int</span> len)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  <span class="hljs-keyword">int</span> len1, audio_size;
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  <span class="hljs-keyword">while</span>(len &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span>(is-&gt;audio_buf_index &gt;= is-&gt;audio_buf_size) {
      <span class="hljs-comment">/* We have already sent all our data; get more */</span>
      audio_size = audio_decode_frame(is, is-&gt;audio_buf, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_buf), &amp;pts);
      <span class="hljs-keyword">if</span>(audio_size &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-comment">/* If error, output silence */</span>
	is-&gt;audio_buf_size = <span class="hljs-number">1024</span>;
	<span class="hljs-built_in">memset</span>(is-&gt;audio_buf, <span class="hljs-number">0</span>, is-&gt;audio_buf_size);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
	audio_size = synchronize_audio(is, (<span class="hljs-keyword">int16_t</span> *)is-&gt;audio_buf,<font></font>
				       audio_size, pts);<font></font>
	is-&gt;audio_buf_size = audio_size;<font></font>
      }<font></font>
      is-&gt;audio_buf_index = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    len1 = is-&gt;audio_buf_size - is-&gt;audio_buf_index;<font></font>
    <span class="hljs-keyword">if</span>(len1 &gt; len)<font></font>
      len1 = len;<font></font>
    <span class="hljs-built_in">memcpy</span>(stream, (<span class="hljs-keyword">uint8_t</span> *)is-&gt;audio_buf + is-&gt;audio_buf_index, len1);<font></font>
    len -= len1;<font></font>
    stream += len1;<font></font>
    is-&gt;audio_buf_index += len1;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> Uint32 <span class="hljs-title">sdl_refresh_timer_cb</span><span class="hljs-params">(Uint32 interval, <span class="hljs-keyword">void</span> *opaque)</span> </span>{<font></font>
  SDL_Event event;<font></font>
  event.type = FF_REFRESH_EVENT;<font></font>
  event.user.data1 = opaque;<font></font>
  SDL_PushEvent(&amp;event);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">/* 0 means stop timer */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* schedule a video refresh in 'delay' ms */</span>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">schedule_refresh</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> delay)</span> </span>{<font></font>
  SDL_AddTimer(delay, sdl_refresh_timer_cb, is);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_display</span><span class="hljs-params">(VideoState *is)</span> </span>{<font></font>
<font></font>
  SDL_Rect rect;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">float</span> aspect_ratio;
  <span class="hljs-keyword">int</span> w, h, x, y;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-keyword">if</span>(is-&gt;video_ctx-&gt;sample_aspect_ratio.num == <span class="hljs-number">0</span>) {<font></font>
      aspect_ratio = <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      aspect_ratio = av_q2d(is-&gt;video_ctx-&gt;sample_aspect_ratio) *<font></font>
	is-&gt;video_ctx-&gt;width / is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(aspect_ratio &lt;= <span class="hljs-number">0.0</span>) {<font></font>
      aspect_ratio = (<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;width /<font></font>
	(<span class="hljs-keyword">float</span>)is-&gt;video_ctx-&gt;height;<font></font>
    }<font></font>
    h = screen-&gt;h;<font></font>
    w = ((<span class="hljs-keyword">int</span>)rint(h * aspect_ratio)) &amp; <span class="hljs-number">-3</span>;
    <span class="hljs-keyword">if</span>(w &gt; screen-&gt;w) {<font></font>
      w = screen-&gt;w;<font></font>
      h = ((<span class="hljs-keyword">int</span>)rint(w / aspect_ratio)) &amp; <span class="hljs-number">-3</span>;<font></font>
    }<font></font>
    x = (screen-&gt;w - w) / <span class="hljs-number">2</span>;<font></font>
    y = (screen-&gt;h - h) / <span class="hljs-number">2</span>;<font></font>
    <font></font>
    rect.x = x;<font></font>
    rect.y = y;<font></font>
    rect.w = w;<font></font>
    rect.h = h;<font></font>
    SDL_LockMutex(screen_mutex);<font></font>
    SDL_DisplayYUVOverlay(vp-&gt;bmp, &amp;rect);<font></font>
    SDL_UnlockMutex(screen_mutex);<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">video_refresh_timer</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">double</span> actual_delay, delay, sync_threshold, ref_clock, diff;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(is-&gt;video_st) {
    <span class="hljs-keyword">if</span>(is-&gt;pictq_size == <span class="hljs-number">0</span>) {<font></font>
      schedule_refresh(is, <span class="hljs-number">1</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      vp = &amp;is-&gt;pictq[is-&gt;pictq_rindex];<font></font>
      <font></font>
      is-&gt;video_current_pts = vp-&gt;pts;<font></font>
      is-&gt;video_current_pts_time = av_gettime();<font></font>
      delay = vp-&gt;pts - is-&gt;frame_last_pts; <span class="hljs-comment">/* the pts from last time */</span>
      <span class="hljs-keyword">if</span>(delay &lt;= <span class="hljs-number">0</span> || delay &gt;= <span class="hljs-number">1.0</span>) {
	<span class="hljs-comment">/* if incorrect delay, use previous one */</span><font></font>
	delay = is-&gt;frame_last_delay;<font></font>
      }<font></font>
      <span class="hljs-comment">/* save for next time */</span><font></font>
      is-&gt;frame_last_delay = delay;<font></font>
      is-&gt;frame_last_pts = vp-&gt;pts;<font></font>
<font></font>
<font></font>
<font></font>
      <span class="hljs-comment">/* update delay to sync to audio if not master source */</span>
      <span class="hljs-keyword">if</span>(is-&gt;av_sync_type != AV_SYNC_VIDEO_MASTER) {<font></font>
	ref_clock = get_master_clock(is);<font></font>
	diff = vp-&gt;pts - ref_clock;<font></font>
	<font></font>
	<span class="hljs-comment">/* Skip or repeat the frame. Take delay into account
	   FFPlay still doesn't "know if this is the best guess." */</span><font></font>
	sync_threshold = (delay &gt; AV_SYNC_THRESHOLD) ? delay : AV_SYNC_THRESHOLD;<font></font>
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(diff) &lt; AV_NOSYNC_THRESHOLD) {
	  <span class="hljs-keyword">if</span>(diff &lt;= -sync_threshold) {<font></font>
	    delay = <span class="hljs-number">0</span>;<font></font>
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(diff &gt;= sync_threshold) {<font></font>
	    delay = <span class="hljs-number">2</span> * delay;<font></font>
	  }<font></font>
	}<font></font>
      }<font></font>
      is-&gt;frame_timer += delay;<font></font>
      <span class="hljs-comment">/* computer the REAL delay */</span>
      actual_delay = is-&gt;frame_timer - (av_gettime() / <span class="hljs-number">1000000.0</span>);
      <span class="hljs-keyword">if</span>(actual_delay &lt; <span class="hljs-number">0.010</span>) {
	<span class="hljs-comment">/* Really it should skip the picture instead */</span>
	actual_delay = <span class="hljs-number">0.010</span>;<font></font>
      }<font></font>
      schedule_refresh(is, (<span class="hljs-keyword">int</span>)(actual_delay * <span class="hljs-number">1000</span> + <span class="hljs-number">0.5</span>));<font></font>
      <font></font>
      <span class="hljs-comment">/* show the picture! */</span><font></font>
      video_display(is);<font></font>
      <font></font>
      <span class="hljs-comment">/* update queue for next picture! */</span>
      <span class="hljs-keyword">if</span>(++is-&gt;pictq_rindex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
	is-&gt;pictq_rindex = <span class="hljs-number">0</span>;<font></font>
      }<font></font>
      SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
      is-&gt;pictq_size--;<font></font>
      SDL_CondSignal(is-&gt;pictq_cond);<font></font>
      SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
    }<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    schedule_refresh(is, <span class="hljs-number">100</span>);<font></font>
  }<font></font>
}<font></font>
      <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">alloc_picture</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *userdata)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)userdata;<font></font>
  VideoPicture *vp;<font></font>
<font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {
    <span class="hljs-comment">// we already have one make another, bigger/smaller</span><font></font>
    SDL_FreeYUVOverlay(vp-&gt;bmp);<font></font>
  }<font></font>
  <span class="hljs-comment">// Allocate a place to put our YUV image on that screen</span><font></font>
  SDL_LockMutex(screen_mutex);<font></font>
  vp-&gt;bmp = SDL_CreateYUVOverlay(is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height,<font></font>
				 SDL_YV12_OVERLAY,<font></font>
				 screen);<font></font>
  SDL_UnlockMutex(screen_mutex);<font></font>
<font></font>
  vp-&gt;width = is-&gt;video_ctx-&gt;width;<font></font>
  vp-&gt;height = is-&gt;video_ctx-&gt;height;<font></font>
  vp-&gt;allocated = <span class="hljs-number">1</span>;<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">queue_picture</span><span class="hljs-params">(VideoState *is, AVFrame *pFrame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  VideoPicture *vp;<font></font>
  <span class="hljs-keyword">int</span> dst_pix_fmt;<font></font>
  AVPicture pict;<font></font>
<font></font>
  <span class="hljs-comment">/* wait until we have space for a new pic */</span><font></font>
  SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
  <span class="hljs-keyword">while</span>(is-&gt;pictq_size &gt;= VIDEO_PICTURE_QUEUE_SIZE &amp;&amp;<font></font>
	!is-&gt;quit) {<font></font>
    SDL_CondWait(is-&gt;pictq_cond, is-&gt;pictq_mutex);<font></font>
  }<font></font>
  SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;quit)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
<font></font>
  <span class="hljs-comment">// windex is set to 0 initially</span><font></font>
  vp = &amp;is-&gt;pictq[is-&gt;pictq_windex];<font></font>
<font></font>
  <span class="hljs-comment">/* allocate or resize the buffer! */</span>
  <span class="hljs-keyword">if</span>(!vp-&gt;bmp ||<font></font>
     vp-&gt;width != is-&gt;video_ctx-&gt;width ||<font></font>
     vp-&gt;height != is-&gt;video_ctx-&gt;height) {<font></font>
    SDL_Event event;<font></font>
<font></font>
    vp-&gt;allocated = <span class="hljs-number">0</span>;<font></font>
    alloc_picture(is);<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-comment">/* We have a place to put our picture on the queue */</span><font></font>
<font></font>
  <span class="hljs-keyword">if</span>(vp-&gt;bmp) {<font></font>
<font></font>
    SDL_LockYUVOverlay(vp-&gt;bmp);<font></font>
    vp-&gt;pts = pts;<font></font>
    <font></font>
    dst_pix_fmt = PIX_FMT_YUV420P;<font></font>
    <span class="hljs-comment">/* point pict at the queue */</span><font></font>
<font></font>
    pict.data[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">0</span>];<font></font>
    pict.data[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">2</span>];<font></font>
    pict.data[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pixels[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    pict.linesize[<span class="hljs-number">0</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">0</span>];<font></font>
    pict.linesize[<span class="hljs-number">1</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">2</span>];<font></font>
    pict.linesize[<span class="hljs-number">2</span>] = vp-&gt;bmp-&gt;pitches[<span class="hljs-number">1</span>];<font></font>
    <font></font>
    <span class="hljs-comment">// Convert the image into YUV format that SDL uses</span>
    sws_scale(is-&gt;sws_ctx, (<span class="hljs-keyword">uint8_t</span> <span class="hljs-keyword">const</span> * <span class="hljs-keyword">const</span> *)pFrame-&gt;data,<font></font>
	      pFrame-&gt;linesize, <span class="hljs-number">0</span>, is-&gt;video_ctx-&gt;height,<font></font>
	      pict.data, pict.linesize);<font></font>
    <font></font>
    SDL_UnlockYUVOverlay(vp-&gt;bmp);<font></font>
    <span class="hljs-comment">/* now we inform our display thread that we have a pic ready */</span>
    <span class="hljs-keyword">if</span>(++is-&gt;pictq_windex == VIDEO_PICTURE_QUEUE_SIZE) {<font></font>
      is-&gt;pictq_windex = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    SDL_LockMutex(is-&gt;pictq_mutex);<font></font>
    is-&gt;pictq_size++;<font></font>
    SDL_UnlockMutex(is-&gt;pictq_mutex);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">synchronize_video</span><span class="hljs-params">(VideoState *is, AVFrame *src_frame, <span class="hljs-keyword">double</span> pts)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">double</span> frame_delay;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(pts != <span class="hljs-number">0</span>) {
    <span class="hljs-comment">/* if we have pts, set video clock to it */</span><font></font>
    is-&gt;video_clock = pts;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">/* if we aren't given a pts, set it to the clock */</span><font></font>
    pts = is-&gt;video_clock;<font></font>
  }<font></font>
  <span class="hljs-comment">/* update the video clock */</span><font></font>
  frame_delay = av_q2d(is-&gt;video_ctx-&gt;time_base);<font></font>
  <span class="hljs-comment">/* if we are repeating a frame, adjust clock accordingly */</span>
  frame_delay += src_frame-&gt;repeat_pict * (frame_delay * <span class="hljs-number">0.5</span>);<font></font>
  is-&gt;video_clock += frame_delay;<font></font>
  <span class="hljs-keyword">return</span> pts;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">video_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
  <span class="hljs-keyword">int</span> frameFinished;<font></font>
  AVFrame *pFrame;<font></font>
  <span class="hljs-keyword">double</span> pts;<font></font>
<font></font>
  pFrame = av_frame_alloc();<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;videoq, packet, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// means we quit getting packets</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    pts = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-comment">// Decode video frame</span><font></font>
    avcodec_decode_video2(is-&gt;video_ctx, pFrame, &amp;frameFinished, packet);<font></font>
<font></font>
    <span class="hljs-keyword">if</span>((pts = av_frame_get_best_effort_timestamp(pFrame)) == AV_NOPTS_VALUE) {<font></font>
      pts = av_frame_get_best_effort_timestamp(pFrame);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      pts = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    pts *= av_q2d(is-&gt;video_st-&gt;time_base);<font></font>
<font></font>
    <span class="hljs-comment">// Did we get a video frame?</span>
    <span class="hljs-keyword">if</span>(frameFinished) {<font></font>
      pts = synchronize_video(is, pFrame, pts);<font></font>
      <span class="hljs-keyword">if</span>(queue_picture(is, pFrame, pts) &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    av_free_packet(packet);<font></font>
  }<font></font>
  av_frame_free(&amp;pFrame);<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">stream_component_open</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int</span> stream_index)</span> </span>{<font></font>
<font></font>
  AVFormatContext *pFormatCtx = is-&gt;pFormatCtx;<font></font>
  AVCodecContext *codecCtx = <span class="hljs-literal">NULL</span>;<font></font>
  AVCodec *codec = <span class="hljs-literal">NULL</span>;<font></font>
  SDL_AudioSpec wanted_spec, spec;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(stream_index &lt; <span class="hljs-number">0</span> || stream_index &gt;= pFormatCtx-&gt;nb_streams) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codec = avcodec_find_decoder(pFormatCtx-&gt;streams[stream_index]-&gt;codec-&gt;codec_id);<font></font>
  <span class="hljs-keyword">if</span>(!codec) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  codecCtx = avcodec_alloc_context3(codec);<font></font>
  <span class="hljs-keyword">if</span>(avcodec_copy_context(codecCtx, pFormatCtx-&gt;streams[stream_index]-&gt;codec) != <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Couldn't copy codec context"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Error copying codec context</span><font></font>
  }<font></font>
<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(codecCtx-&gt;codec_type == AVMEDIA_TYPE_AUDIO) {
    <span class="hljs-comment">// Set audio settings from codec info</span><font></font>
    wanted_spec.freq = codecCtx-&gt;sample_rate;<font></font>
    wanted_spec.format = AUDIO_S16SYS;<font></font>
    wanted_spec.channels = codecCtx-&gt;channels;<font></font>
    wanted_spec.silence = <span class="hljs-number">0</span>;<font></font>
    wanted_spec.samples = SDL_AUDIO_BUFFER_SIZE;<font></font>
    wanted_spec.callback = audio_callback;<font></font>
    wanted_spec.userdata = is;<font></font>
    <font></font>
    <span class="hljs-keyword">if</span>(SDL_OpenAudio(&amp;wanted_spec, &amp;spec) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL_OpenAudio: %s\n"</span>, SDL_GetError());
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    is-&gt;audio_hw_buf_size = spec.size;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(avcodec_open2(codecCtx, codec, <span class="hljs-literal">NULL</span>) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Unsupported codec!\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">switch</span>(codecCtx-&gt;codec_type) {
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_AUDIO:<font></font>
    is-&gt;audioStream = stream_index;<font></font>
    is-&gt;audio_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;audio_ctx = codecCtx;<font></font>
    is-&gt;audio_buf_size = <span class="hljs-number">0</span>;<font></font>
    is-&gt;audio_buf_index = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">memset</span>(&amp;is-&gt;audio_pkt, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(is-&gt;audio_pkt));<font></font>
    packet_queue_init(&amp;is-&gt;audioq);<font></font>
    SDL_PauseAudio(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">case</span> AVMEDIA_TYPE_VIDEO:<font></font>
    is-&gt;videoStream = stream_index;<font></font>
    is-&gt;video_st = pFormatCtx-&gt;streams[stream_index];<font></font>
    is-&gt;video_ctx = codecCtx;<font></font>
<font></font>
    is-&gt;frame_timer = (<span class="hljs-keyword">double</span>)av_gettime() / <span class="hljs-number">1000000.0</span>;<font></font>
    is-&gt;frame_last_delay = <span class="hljs-number">40e-3</span>;<font></font>
    is-&gt;video_current_pts_time = av_gettime();<font></font>
<font></font>
    packet_queue_init(&amp;is-&gt;videoq);<font></font>
    is-&gt;video_tid = SDL_CreateThread(video_thread, is);<font></font>
    is-&gt;sws_ctx = sws_getContext(is-&gt;video_ctx-&gt;width, is-&gt;video_ctx-&gt;height,<font></font>
				 is-&gt;video_ctx-&gt;pix_fmt, is-&gt;video_ctx-&gt;width,<font></font>
				 is-&gt;video_ctx-&gt;height, PIX_FMT_YUV420P,<font></font>
				 SWS_BILINEAR, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span><font></font>
				 );<font></font>
    <span class="hljs-keyword">break</span>;
  <span class="hljs-keyword">default</span>:
    <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">decode_thread</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{<font></font>
<font></font>
  VideoState *is = (VideoState *)arg;<font></font>
  AVFormatContext *pFormatCtx;<font></font>
  AVPacket pkt1, *packet = &amp;pkt1;<font></font>
<font></font>
  <span class="hljs-keyword">int</span> video_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> audio_index = <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  is-&gt;videoStream=<span class="hljs-number">-1</span>;<font></font>
  is-&gt;audioStream=<span class="hljs-number">-1</span>;<font></font>
<font></font>
  global_video_state = is;<font></font>
<font></font>
  <span class="hljs-comment">// Open video file</span>
  <span class="hljs-keyword">if</span>(avformat_open_input(&amp;pFormatCtx, is-&gt;filename, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>)!=<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't open file</span><font></font>
<font></font>
  is-&gt;pFormatCtx = pFormatCtx;<font></font>
  <font></font>
  <span class="hljs-comment">// Retrieve stream information</span>
  <span class="hljs-keyword">if</span>(avformat_find_stream_info(pFormatCtx, <span class="hljs-literal">NULL</span>)&lt;<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// Couldn't find stream information</span><font></font>
  <font></font>
  <span class="hljs-comment">// Dump information about file onto standard error</span>
  av_dump_format(pFormatCtx, <span class="hljs-number">0</span>, is-&gt;filename, <span class="hljs-number">0</span>);<font></font>
  <font></font>
  <span class="hljs-comment">// Find the first video stream</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;pFormatCtx-&gt;nb_streams; i++) {
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_VIDEO &amp;&amp;<font></font>
       video_index &lt; <span class="hljs-number">0</span>) {<font></font>
      video_index=i;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_AUDIO &amp;&amp;<font></font>
       audio_index &lt; <span class="hljs-number">0</span>) {<font></font>
      audio_index=i;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(audio_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, audio_index);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(video_index &gt;= <span class="hljs-number">0</span>) {<font></font>
    stream_component_open(is, video_index);<font></font>
  }   <font></font>
<font></font>
  <span class="hljs-keyword">if</span>(is-&gt;videoStream &lt; <span class="hljs-number">0</span> || is-&gt;audioStream &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: could not open codecs\n"</span>, is-&gt;filename);
    <span class="hljs-keyword">goto</span> fail;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// main decode loop</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">if</span>(is-&gt;quit) {
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
    <span class="hljs-comment">// seek stuff goes here</span>
    <span class="hljs-keyword">if</span>(is-&gt;seek_req) {
      <span class="hljs-keyword">int</span> stream_index= <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">int64_t</span> seek_target = is-&gt;seek_pos;<font></font>
<font></font>
      <span class="hljs-keyword">if</span>     (is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;videoStream;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;audioStream;<font></font>
<font></font>
      <span class="hljs-keyword">if</span>(stream_index&gt;=<span class="hljs-number">0</span>){<font></font>
	seek_target= av_rescale_q(seek_target, AV_TIME_BASE_Q,<font></font>
				  pFormatCtx-&gt;streams[stream_index]-&gt;time_base);<font></font>
      }<font></font>
      <span class="hljs-keyword">if</span>(av_seek_frame(is-&gt;pFormatCtx, stream_index, <font></font>
		       seek_target, is-&gt;seek_flags) &lt; <span class="hljs-number">0</span>) {
	<span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: error while seeking\n"</span>,<font></font>
		is-&gt;pFormatCtx-&gt;filename);<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
<font></font>
	<span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) {<font></font>
	  packet_queue_flush(&amp;is-&gt;audioq);<font></font>
	  packet_queue_put(&amp;is-&gt;audioq, &amp;flush_pkt);<font></font>
	}<font></font>
	<span class="hljs-keyword">if</span>(is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) {<font></font>
	  packet_queue_flush(&amp;is-&gt;videoq);<font></font>
	  packet_queue_put(&amp;is-&gt;videoq, &amp;flush_pkt);<font></font>
	}<font></font>
      }<font></font>
      is-&gt;seek_req = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;audioq.size &gt; MAX_AUDIOQ_SIZE ||<font></font>
       is-&gt;videoq.size &gt; MAX_VIDEOQ_SIZE) {<font></font>
      SDL_Delay(<span class="hljs-number">10</span>);
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(av_read_frame(is-&gt;pFormatCtx, packet) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span>(is-&gt;pFormatCtx-&gt;pb-&gt;error == <span class="hljs-number">0</span>) {<font></font>
	SDL_Delay(<span class="hljs-number">100</span>); <span class="hljs-comment">/* no error; wait for user input */</span>
	<span class="hljs-keyword">continue</span>;<font></font>
      } <span class="hljs-keyword">else</span> {
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-comment">// Is this a packet from the video stream?</span>
    <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;videoStream) {<font></font>
      packet_queue_put(&amp;is-&gt;videoq, packet);<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(packet-&gt;stream_index == is-&gt;audioStream) {<font></font>
      packet_queue_put(&amp;is-&gt;audioq, packet);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      av_free_packet(packet);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-comment">/* all done - wait for it */</span>
  <span class="hljs-keyword">while</span>(!is-&gt;quit) {<font></font>
    SDL_Delay(<span class="hljs-number">100</span>);<font></font>
  }<font></font>
<font></font>
 fail:<font></font>
  <span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>){<font></font>
    SDL_Event event;<font></font>
    event.type = FF_QUIT_EVENT;<font></font>
    event.user.data1 = is;<font></font>
    SDL_PushEvent(&amp;event);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stream_seek</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int64_t</span> pos, <span class="hljs-keyword">int</span> rel)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;seek_req) {<font></font>
    is-&gt;seek_pos = pos;<font></font>
    is-&gt;seek_flags = rel &lt; <span class="hljs-number">0</span> ? AVSEEK_FLAG_BACKWARD : <span class="hljs-number">0</span>;<font></font>
    is-&gt;seek_req = <span class="hljs-number">1</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> </span>{<font></font>
<font></font>
  SDL_Event       event;<font></font>
<font></font>
  VideoState      *is;<font></font>
<font></font>
  is = av_mallocz(<span class="hljs-keyword">sizeof</span>(VideoState));<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(argc &lt; <span class="hljs-number">2</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Usage: test &lt;file&gt;\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
  <span class="hljs-comment">// Register all formats and codecs</span><font></font>
  av_register_all();<font></font>
  <font></font>
  <span class="hljs-keyword">if</span>(SDL_Init(SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER)) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"Could not initialize SDL - %s\n"</span>, SDL_GetError());
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// Make a screen to put our video</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> __DARWIN__</span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
        screen = SDL_SetVideoMode(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>);
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
  <span class="hljs-keyword">if</span>(!screen) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"SDL: could not set video mode - exiting\n"</span>);
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<font></font>
  }<font></font>
<font></font>
  screen_mutex = SDL_CreateMutex();<font></font>
<font></font>
  av_strlcpy(is-&gt;filename, argv[<span class="hljs-number">1</span>], <span class="hljs-keyword">sizeof</span>(is-&gt;filename));<font></font>
<font></font>
  is-&gt;pictq_mutex = SDL_CreateMutex();<font></font>
  is-&gt;pictq_cond = SDL_CreateCond();<font></font>
<font></font>
  schedule_refresh(is, <span class="hljs-number">40</span>);<font></font>
<font></font>
  is-&gt;av_sync_type = DEFAULT_AV_SYNC_TYPE;<font></font>
  is-&gt;parse_tid = SDL_CreateThread(decode_thread, is);<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;parse_tid) {<font></font>
    av_free(is);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }<font></font>
<font></font>
  av_init_packet(&amp;flush_pkt);<font></font>
  flush_pkt.data = <span class="hljs-string">"FLUSH"</span>;<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">double</span> incr, pos;<font></font>
    SDL_WaitEvent(&amp;event);<font></font>
    <span class="hljs-keyword">switch</span>(event.type) {
    <span class="hljs-keyword">case</span> SDL_KEYDOWN:
      <span class="hljs-keyword">switch</span>(event.key.keysym.sym) {
      <span class="hljs-keyword">case</span> SDLK_LEFT:<font></font>
	incr = <span class="hljs-number">-10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_RIGHT:<font></font>
	incr = <span class="hljs-number">10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_UP:<font></font>
	incr = <span class="hljs-number">60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_DOWN:<font></font>
	incr = <span class="hljs-number">-60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;<font></font>
      do_seek:<font></font>
	<span class="hljs-keyword">if</span>(global_video_state) {<font></font>
	  pos = get_master_clock(global_video_state);<font></font>
	  pos += incr;<font></font>
	  stream_seek(global_video_state, (<span class="hljs-keyword">int64_t</span>)(pos * AV_TIME_BASE), incr);<font></font>
	}<font></font>
	<span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> FF_QUIT_EVENT:
    <span class="hljs-keyword">case</span> SDL_QUIT:<font></font>
      is-&gt;quit = <span class="hljs-number">1</span>;
      <span class="hljs-comment">/*
       * If the video has finished playing, then both the picture and
       * audio queues are waiting for more data.  Make them stop
       * waiting and terminate normally.
       */</span><font></font>
      SDL_CondSignal(is-&gt;audioq.cond);<font></font>
      SDL_CondSignal(is-&gt;videoq.cond);<font></font>
      SDL_Quit();<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> FF_REFRESH_EVENT:<font></font>
      video_refresh_timer(event.user.data1);<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
<font></font>
}<font></font>
</code></pre></div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ê§úÁ¥¢„Ç≥„Éû„É≥„ÉâÂá¶ÁêÜ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„Å´„ÄÅ„Éó„É¨„Éº„É§„Éº„Å´Ê§úÁ¥¢Ê©üËÉΩ„Çí„ÅÑ„Åè„Å§„ÅãËøΩÂä†„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„ÄÅ„É†„Éº„Éì„Éº„ÇíÂ∑ª„ÅçÊàª„Åõ„Å™„ÅÑÂ†¥Âêà„Å´ÈùûÂ∏∏„Å´ÁÖ©„Çè„Åó„ÅÑ„Åü„ÇÅ„Åß„Åô„ÄÇ„Åï„Çâ„Å´„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞„Çí‰ΩøÁî®„Åô„Çã„ÅÆ„Åå„ÅÑ„Åã„Å´Á∞°Âçò„Åã„Åå„Çè„Åã„Çä„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç≠„Éº„Éú„Éº„Éâ„ÅÆÁü¢Âç∞„Çí„ÄåÂ∑¶„Äç„Åä„Çà„Å≥„ÄåÂè≥„Äç„Å´„Åó„Å¶„ÄÅ„Éï„Ç£„É´„É†„ÇíÂ∞ë„ÅóÂâçÂæå„Å´„Çπ„ÇØ„É≠„Éº„É´„Åï„Åõ„Åæ„Åô„ÄÇ„Äå‰∏ä„Äç„Åä„Çà„Å≥„Äå‰∏ã„Äç„ÅÆÁü¢Âç∞„ÅØ„Åô„Åß„Å´„Çà„ÇäÈáçË¶Å„Åß„Åô„ÄÇ „ÄåÂ∞ë„Åó„Äç-10Áßí„ÄÅ„Äå„Åü„Åè„Åï„Çì„Äç-„Åô„Åπ„Å¶60„Åß„Åô„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅ„Ç≠„Éº„Çπ„Éà„É≠„Éº„ÇØ„Ç§„Éô„É≥„Éà„Çí„Ç§„É≥„Çø„Éº„Çª„Éó„Éà„Åô„Çã„Çà„ÅÜ„Å´„É°„Ç§„É≥„É´„Éº„Éó„ÇíÊßãÊàê„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åó„Åã„Åó„ÄÅÂÆüÈöõ„Å´„ÅØ„ÄÅ„Ç≠„Éº„Çπ„Éà„É≠„Éº„ÇØ„ÇíÂèñÂæó„Åó„Åü„Å®„Åç„Å´„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame„Çí</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Áõ¥Êé•</font><font style="vertical-align: inherit;">Âëº„Å≥Âá∫„Åô„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì</font><font style="vertical-align: inherit;">„ÄÇ„Åì„Çå„ÅØ„ÄÅ„É°„Ç§„É≥„ÅÆ„Éá„Ç≥„Éº„Éâ„É´„Éº„Éó„Åß„ÅÇ„Çã</font><b><font style="vertical-align: inherit;">decode_thread</font></b><font style="vertical-align: inherit;">„É´„Éº„Éó„ÅßË°å„ÅÜÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ</font><font style="vertical-align: inherit;">„Åó„Åü„Åå„Å£„Å¶„ÄÅ‰ª£„Çè„Çä„Å´„ÄÅ„ÅÑ„Åè„Å§„Åã„ÅÆÂÄ§„Çí„É°„Ç§„É≥ÊßãÈÄ†„Å´ËøΩÂä†„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Å´„ÅØ„ÄÅÊ§úÁ¥¢„ÅÆÊñ∞„Åó„ÅÑ‰ΩçÁΩÆ„Å®„ÅÑ„Åè„Å§„Åã„ÅÆÊ§úÁ¥¢„Éï„É©„Ç∞„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-keyword">int</span>             seek_req;
  <span class="hljs-keyword">int</span>             seek_flags;
  <span class="hljs-keyword">int64_t</span>         seek_pos;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„Å´„ÄÅ„Ç≠„Éº„Çπ„Éà„É≠„Éº„ÇØ„Çí„Ç≠„É£„ÉÉ„ÉÅ„Åô„Çã„É°„Ç§„É≥„É´„Éº„Éó„ÇíÊßãÊàê„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-keyword">double</span> incr, pos;<font></font>
<font></font>
    SDL_WaitEvent(&amp;event);<font></font>
    <span class="hljs-keyword">switch</span>(event.type) {
    <span class="hljs-keyword">case</span> SDL_KEYDOWN:
      <span class="hljs-keyword">switch</span>(event.key.keysym.sym) {
      <span class="hljs-keyword">case</span> SDLK_LEFT:<font></font>
	incr = <span class="hljs-number">-10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_RIGHT:<font></font>
	incr = <span class="hljs-number">10.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_UP:<font></font>
	incr = <span class="hljs-number">60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;
      <span class="hljs-keyword">case</span> SDLK_DOWN:<font></font>
	incr = <span class="hljs-number">-60.0</span>;
	<span class="hljs-keyword">goto</span> do_seek;<font></font>
      do_seek:<font></font>
	<span class="hljs-keyword">if</span>(global_video_state) {<font></font>
	  pos = get_master_clock(global_video_state);<font></font>
	  pos += incr;<font></font>
	  stream_seek(global_video_state, <font></font>
                      (<span class="hljs-keyword">int64_t</span>)(pos * AV_TIME_BASE), incr);<font></font>
	}<font></font>
	<span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
	<span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">break</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç≠„Éº„Çπ„Éà„É≠„Éº„ÇØ„Çí„Ç≠„É£„ÉÉ„ÉÅ„Åô„Çã„Å´„ÅØ„ÄÅ„Åæ„Åö</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_KEYDOWN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç§„Éô„É≥„Éà</font><b><font style="vertical-align: inherit;">„ÅåÁô∫Áîü</font></b><font style="vertical-align: inherit;">„Åó„Åü„Åã„Å©„ÅÜ„Åã„ÇíË™ø„Åπ„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇÊ¨°„Å´„ÄÅ</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.key.keysym.sym</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çí‰ΩøÁî®„Åó„Å¶„ÄÅÂèó‰ø°„Åó„Åü„Ç≠„Éº„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇÊé¢„Åó„Å¶„ÅÑ„ÇãÊñπÂêë„Åå„Çè„Åã„Çã„Å®„Åô„Åê„Å´„ÄÅÊñ∞„Åó„ÅÑÊôÇÈñì„ÇíË®àÁÆó„Åó„ÄÅÊñ∞„Åó„ÅÑ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_master_clock</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞„ÅÆÂÄ§„Å´Â¢óÂàÜ„ÇíËøΩÂä†„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇÊ¨°„Å´„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_seek</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seek_pos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂÄ§</font><font style="vertical-align: inherit;">„Å™„Å©</font><font style="vertical-align: inherit;">„ÇíË®≠ÂÆö„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇÊñ∞„Åó„ÅÑÊôÇÈñì„Çí</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂÜÖÈÉ®„Çø„Ç§„É†„Çπ„Çø„É≥„Éó</font><b><font style="vertical-align: inherit;">Âçò‰Ωç„Å´</font></b><font style="vertical-align: inherit;">Â§âÊèõ„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ„Çπ„Éà„É™„Éº„É†„ÅÆ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÅØ„ÄÅÊ¨°„ÅÆÂºè„Çí‰ΩøÁî®„Åó„Å¶ÁßíÂçò‰Ωç„Åß„ÅØ„Å™„Åè„Éï„É¨„Éº„É†Âçò‰Ωç„ÅßÊ∏¨ÂÆö„Åï„Çå„Çã„Åì„Å®„ÇíÊÄù„ÅÑÂá∫„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Áßí</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éï„É¨„Éº„É†</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºà</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fps</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºâ„ÄÇ</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éá„Éï„Ç©„É´„Éà„Åß„ÅØ„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec„ÅØ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1,000,000„Éï„É¨„Éº„É†/Áßí„Å´Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ</font><font style="vertical-align: inherit;">„Åæ„Åô</font><font style="vertical-align: inherit;">Ôºà„Åó„Åü„Åå„Å£„Å¶„ÄÅ2Áßí„ÅÆ‰ΩçÁΩÆ„Å´„ÅØ2,000,000„ÅÆ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó</font><b><font style="vertical-align: inherit;">„Åå</font></b><font style="vertical-align: inherit;">Ë®≠ÂÆö„Åï„Çå</font><font style="vertical-align: inherit;">„Åæ„Åô</font><font style="vertical-align: inherit;">Ôºâ„ÄÇ„Å™„Åú„Åì„ÅÆÂÄ§„ÇíÂ§âÊèõ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„ÅÆ„Åß„Åô„Åã-Âæå„ÅßÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„Çå„Åå</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_seek</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞</font><font style="vertical-align: inherit;">„Åß„Åô„ÄÇÊàª„ÇãÂ†¥Âêà„ÅØ„Éï„É©„Ç∞„ÇíË®≠ÂÆö„Åô„Çã„Åì„Å®„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stream_seek</span><span class="hljs-params">(VideoState *is, <span class="hljs-keyword">int64_t</span> pos, <span class="hljs-keyword">int</span> rel)</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(!is-&gt;seek_req) {<font></font>
    is-&gt;seek_pos = pos;<font></font>
    is-&gt;seek_flags = rel &lt; <span class="hljs-number">0</span> ? AVSEEK_FLAG_BACKWARD : <span class="hljs-number">0</span>;<font></font>
    is-&gt;seek_req = <span class="hljs-number">1</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„Å´„ÄÅ</font><font style="vertical-align: inherit;">ÂÆüÈöõ„Å´Ê§úÁ¥¢„ÇíÂÆüË°å„Åô„Çã</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decode_thread„Å´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Áßª„Çä„Åæ„Åó„Çá„ÅÜ</font><font style="vertical-align: inherit;">„ÄÇ„ÇΩ„Éº„Çπ„Éï„Ç°„Ç§„É´„Åß„ÄÅ„ÄåÊ§úÁ¥¢„ÅåÈÄ≤Ë°å‰∏≠„Äç„ÅÆÈ†òÂüü„Çí„Éû„Éº„ÇØ„Åó„Åü„Åì„Å®„Åå„Çè„Åã„Çä„Åæ„Åô„ÄÇ„Åï„Å¶„ÄÅ‰ªä„Åù„Åì„Å´ÈÖçÁΩÆ„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê§úÁ¥¢„ÅØ„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞„Çí‰∏≠ÂøÉ„Å´</font><b><font style="vertical-align: inherit;">Ë°å„Çè„Çå</font></b><font style="vertical-align: inherit;">„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ„Åì„ÅÆÈñ¢Êï∞„ÅØ„ÄÅ„Éï„Ç©„Éº„Éû„ÉÉ„Éà„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÄÅ„Çπ„Éà„É™„Éº„É†„ÄÅ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÄÅ„Åä„Çà„Å≥„Éï„É©„Ç∞„Çª„ÉÉ„Éà„ÇíÂºïÊï∞„Å®„Åó„Å¶Âèó„ÅëÂèñ„Çä„Åæ„Åô„ÄÇÈñ¢Êï∞„ÅØ„ÄÅÊåáÂÆö„Åó„Åü„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÇíÊé¢„Åó„Åæ„Åô„ÄÇ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÅÆÂçò‰Ωç„ÅØ</font><font style="vertical-align: inherit;">„ÄÅÈñ¢Êï∞„Å´Ê∏°„Åô„Çπ„Éà„É™„Éº„É†</font><font style="vertical-align: inherit;">„ÅÆ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base„Åß„Åô</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ„Åü„Å†„Åó„ÄÅ„Åù„Çå„Çí„Çπ„Éà„É™„Éº„É†„Å´Ê∏°„ÅôÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„ÇìÔºàÂÄ§-1„ÇíÊ∏°„Åô„Åì„Å®„ÅßÁ§∫„Åï„Çå„Åæ„ÅôÔºâ„ÄÇ„Åì„Çå„ÇíË°å„ÅÜ„Å®„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅØ</font><b><font style="vertical-align: inherit;">avcodec</font></b><font style="vertical-align: inherit;">ÂÜÖÈÉ®ÊôÇÈñì</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Âçò‰Ωç„Å´„Å™„Çä„Åæ„Åô„ÄÇ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åæ„Åü„ÅØ1000000fps„ÄÇ„Åì„Çå„Åå„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seek_pos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÇíË®≠ÂÆö„Åô„Çã„Å®„Åç„Å´</font><font style="vertical-align: inherit;">‰ΩçÁΩÆ„Å´</font><b><font style="vertical-align: inherit;">AV_TIME_BASE</font></b><font style="vertical-align: inherit;">„ÇíÊéõ„Åë„ÅüÁêÜÁî±</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åß„Åô</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åü„Å†„Åó„ÄÅ</font><font style="vertical-align: inherit;">„Çπ„Éà„É™„Éº„É†„Å´</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çí</font><font style="vertical-align: inherit;">Ê∏°„Åô„Å®„ÄÅ‰∏ÄÈÉ®„ÅÆ„Éï„Ç°„Ç§„É´„ÅßÔºà„Åæ„Çå„Å´ÔºâÂïèÈ°å„ÅåÁô∫Áîü„Åô„ÇãÂ†¥Âêà„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅ„Éï„Ç°„Ç§„É´</font><font style="vertical-align: inherit;">„ÅÆÊúÄÂàù„ÅÆ„Çπ„Éà„É™„Éº„É†„ÇíÈÅ∏Êäû„Åó„Å¶</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_seek_frame„Å´Ê∏°„Åó</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åæ„Åô„ÄÇÊñ∞„Åó„ÅÑ„ÄåÂ∫ßÊ®ôÁ≥ª„Äç„Å´„Åô„Çã„Åü„ÇÅ„Å´„ÅØ„ÄÅ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÅÆ„Çπ„Ç±„Éº„É´„ÇíÂ§âÊõ¥„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„Åì„Å®„ÇíÂøò„Çå„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(is-&gt;seek_req) {
  <span class="hljs-keyword">int</span> stream_index= <span class="hljs-number">-1</span>;
  <span class="hljs-keyword">int64_t</span> seek_target = is-&gt;seek_pos;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>     (is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;videoStream;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) stream_index = is-&gt;audioStream;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(stream_index&gt;=<span class="hljs-number">0</span>){<font></font>
    seek_target= av_rescale_q(seek_target, AV_TIME_BASE_Q,<font></font>
                      pFormatCtx-&gt;streams[stream_index]-&gt;time_base);<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span>(av_seek_frame(is-&gt;pFormatCtx, stream_index, <font></font>
                    seek_target, is-&gt;seek_flags) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"%s: error while seeking\n"</span>,<font></font>
            is-&gt;pFormatCtx-&gt;filename);<font></font>
  } <span class="hljs-keyword">else</span> {
     <span class="hljs-comment">/* handle packet queues... more later... */</span>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_rescale_q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºà</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºâ„ÅØ„ÄÅ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„Çí„ÅÇ„Çã„Éô„Éº„Çπ„Åã„ÇâÂà•„ÅÆ„Éô„Éº„Çπ„Å´„Çπ„Ç±„Éº„É™„É≥„Ç∞„Åô„ÇãÈñ¢Êï∞„Åß„Åô„ÄÇÂü∫Êú¨ÁöÑ„Å´„ÅØ</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c„Çí</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ë®àÁÆó</font><nobr><b><font style="vertical-align: inherit;">„Åó</font></b></nobr><font style="vertical-align: inherit;">„Åæ„Åô„Åå„ÄÅ„Åì„ÅÆË®àÁÆó„ÅØ„Ç™„Éº„Éê„Éº„Éï„É≠„Éº„ÇíÂºï„ÅçËµ∑„Åì„Åô„Åì„Å®„Åå„ÅÇ„Çã„ÅÆ„Åß„ÄÅ„Åì„ÅÆÈñ¢Êï∞„ÅØ‰æøÂà©„Åß„Åô„ÄÇ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE_Q„ÅØ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅÆÁ´ØÊï∞„Éê„Éº„Ç∏„Éß„É≥„Åß„Åô</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ„Åù„Çå„Çâ„ÅØÂÆåÂÖ®„Å´Áï∞„Å™„Çä„Åæ„ÅôÔºö</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_in_seconds</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec_timestamp</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åä„Çà„Å≥</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE_Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec_timestamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_in_seconds</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºà„Åü„Å†„Åó„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AV_TIME_BASE_Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅØÂÆüÈöõ„Å´„ÅØ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRational</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà</font><font style="vertical-align: inherit;">„Åß„ÅÇ„Çã„Åü„ÇÅ„ÄÅ„Åù„Çå</font><font style="vertical-align: inherit;">„ÇíÂá¶ÁêÜ„Åô„Çã„Å´</font><font style="vertical-align: inherit;">„ÅØ</font><b><font style="vertical-align: inherit;">avcodec„Åß</font></b><font style="vertical-align: inherit;">ÁâπÂà•„Å™</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞„Çí‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô</font><font style="vertical-align: inherit;">Ôºâ„ÄÇ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éê„ÉÉ„Éï„Ç°„ÉºÊ¥óÊµÑ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„ÅÆ„Åü„ÇÅ„ÄÅÊ§úÁ¥¢„ÇíÊ≠£„Åó„ÅèË®≠ÂÆö„Åó„Åæ„Åó„Åü„Åå„ÄÅ„Åæ„Å†ÂÆå‰∫Ü„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ„Éë„Ç±„ÉÉ„Éà„ÇíËìÑÁ©ç„Åô„Çã„Çà„ÅÜ„Å´ÊßãÊàê„Åï„Çå„Åü„Ç≠„É•„Éº„Åå„ÅÇ„Çã„Åì„Å®„ÇíË¶ö„Åà„Å¶„Åä„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÂà•„ÅÆ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„Å´„ÅÑ„Çã„ÅÆ„Åß„ÄÅ„Åì„ÅÆ„Ç≠„É•„Éº„Çí„ÇØ„É™„Ç¢„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„ÅÜ„Åó„Å™„ÅÑ„Å®„ÄÅÊò†Áîª„ÅÆÊ§úÁ¥¢„ÅåÊ©üËÉΩ„Åó„Åæ„Åõ„Çì„ÄÇ„Åï„Çâ„Å´„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec„Å´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅØÁã¨Ëá™„ÅÆÂÜÖÈÉ®„Éê„ÉÉ„Éï„Ç°„Éº„Åå„ÅÇ„Çä„ÄÅ„Çπ„Éà„É™„Éº„É†„Åî„Å®„Å´„Éï„É©„ÉÉ„Ç∑„É•„Åô„ÇãÂøÖË¶Å„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„Çå„ÇíË°å„ÅÜ„Å´„ÅØ„ÄÅ„Åæ„Åö„ÄÅ„Éë„Ç±„ÉÉ„Éà„Ç≠„É•„Éº„Çí„ÇØ„É™„Ç¢„Åô„ÇãÈñ¢Êï∞„ÇíË®òËø∞„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊ¨°„Å´„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Å®„Éì„Éá„Ç™„ÅÆ„Çπ„Éà„É™„Éº„É†„Å´„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec„ÅÆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂÜÖÈÉ®„Éê„ÉÉ„Éï„Ç°„Çí„ÇØ„É™„Ç¢„Åó„Åü„Åì„Å®„Çí‰Ωï„Çâ„Åã„ÅÆÂΩ¢„Åß‰ºù„Åà„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó„Åó„ÅüÂæå„ÄÅ„Ç≠„É•„Éº„Å´ÁâπÂà•„Å™„Éë„Ç±„ÉÉ„Éà„ÇíÁΩÆ„Åè„Åì„Å®„Åß„Åì„Çå„ÇíË°å„ÅÜ„Åì„Å®„Åå„Åß„Åç„ÄÅÂΩº„ÇâÔºà„Çπ„É¨„ÉÉ„ÉâÔºâ„Åå„Åì„ÅÆÁâπÂà•„Å™„Éë„Ç±„ÉÉ„Éà„ÇíÁô∫Ë¶ã„Åó„Åü„Å®„Åç„ÄÅÂΩº„Çâ„ÅØÂçò„Å´„Éê„ÉÉ„Éï„Ç°„Çí„ÇØ„É™„Ç¢„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É™„Çª„ÉÉ„ÉàÊ©üËÉΩ„Åã„ÇâÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ</font><font style="vertical-align: inherit;">„Åù„Çå„ÅØÊú¨ÂΩì„Å´ÈùûÂ∏∏„Å´ÂçòÁ¥î„Å™„ÅÆ„Åß„ÄÅÁßÅ„ÅØ„ÅÇ„Å™„Åü„Å´„Ç≥„Éº„Éâ„ÇíÁ§∫„Åô„Å†„Åë„Åß„ÅôÔºö</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">packet_queue_flush</span><span class="hljs-params">(PacketQueue *q)</span> </span>{<font></font>
  AVPacketList *pkt, *pkt1;<font></font>
<font></font>
  SDL_LockMutex(q-&gt;mutex);<font></font>
  <span class="hljs-keyword">for</span>(pkt = q-&gt;first_pkt; pkt != <span class="hljs-literal">NULL</span>; pkt = pkt1) {<font></font>
    pkt1 = pkt-&gt;next;<font></font>
    av_free_packet(&amp;pkt-&gt;pkt);<font></font>
    av_freep(&amp;pkt);<font></font>
  }<font></font>
  q-&gt;last_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;first_pkt = <span class="hljs-literal">NULL</span>;<font></font>
  q-&gt;nb_packets = <span class="hljs-number">0</span>;<font></font>
  q-&gt;size = <span class="hljs-number">0</span>;<font></font>
  SDL_UnlockMutex(q-&gt;mutex);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç≠„É•„Éº„Åå„ÇØ„É™„Ç¢„Åï„Çå„Åü„ÅÆ„Åß„ÄÅ„Äå„ÇØ„É¨„É≥„Ç∏„É≥„Ç∞„Éë„Ç±„ÉÉ„Éà„Äç„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åó„Åã„Åó„ÄÅÊúÄÂàù„Å´„ÄÅ„Åù„Çå„ÇíÂÆöÁæ©„Åó„Å¶‰ΩúÊàê„Åô„Çã„Å®„Çà„ÅÑ„Åß„Åó„Çá„ÅÜ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">AVPacket flush_pkt;<font></font>
<font></font>
main() {<font></font>
  ...<font></font>
  av_init_packet(&amp;flush_pkt);<font></font>
  flush_pkt.data = <span class="hljs-string">"FLUSH"</span>;<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„Å´„ÄÅ„Åì„ÅÆ„Éë„ÉÉ„Ç±„Éº„Ç∏„Çí„Ç≠„É•„Éº„Å´ÂÖ•„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span>(is-&gt;audioStream &gt;= <span class="hljs-number">0</span>) {<font></font>
      packet_queue_flush(&amp;is-&gt;audioq);<font></font>
      packet_queue_put(&amp;is-&gt;audioq, &amp;flush_pkt);<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(is-&gt;videoStream &gt;= <span class="hljs-number">0</span>) {<font></font>
      packet_queue_flush(&amp;is-&gt;videoq);<font></font>
      packet_queue_put(&amp;is-&gt;videoq, &amp;flush_pkt);<font></font>
    }<font></font>
  }<font></font>
  is-&gt;seek_req = <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ôºà„Åì„ÅÆ„Ç≥„Éº„Éâ„Çπ„Éã„Éö„ÉÉ„Éà„ÅØ„ÄÅ‰∏äË®ò„ÅÆ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decode_thread„ÅÆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç≥„Éº„Éâ„Çπ„Éã„Éö„ÉÉ„Éà„ÅÆ</font><b><font style="vertical-align: inherit;">Á∂ö„Åç</font></b><font style="vertical-align: inherit;">„Åß„Åô„ÄÇÔºâ</font><font style="vertical-align: inherit;">„ÇØ„É™„Éº„Éã„É≥„Ç∞„ÅÆ„Åü„ÇÅ„ÅÆÁâπÂà•„Å™„Éë„ÉÉ„Ç±„Éº„Ç∏„ÇíË§áË£Ω„Åó„Å™„ÅÑ„Çà„ÅÜ„Å´„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packet_queue_put</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÇÇÂ§âÊõ¥„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä</font><font style="vertical-align: inherit;">„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">packet_queue_put</span><span class="hljs-params">(PacketQueue *q, AVPacket *pkt)</span> </span>{<font></font>
<font></font>
  AVPacketList *pkt1;<font></font>
  <span class="hljs-keyword">if</span>(pkt != &amp;flush_pkt &amp;&amp; av_dup_packet(pkt) &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„Åó„Å¶„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Å®„Éì„Éá„Ç™„ÅÆ„Çπ„Éà„É™„Éº„É†„Å´„ÄÅÁßÅ„Åü„Å°„ÅØ„Å´„ÅØ„ÄÅ„Åì„ÅÆ„Ç≥„Éº„É´„ÇíÂÖ•„Çå</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avcodec_flush_buffers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Áõ¥Âæå</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packet_queue_get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs">    <span class="hljs-keyword">if</span>(packet_queue_get(&amp;is-&gt;audioq, pkt, <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(pkt-&gt;data == flush_pkt.data) {<font></font>
      avcodec_flush_buffers(is-&gt;audio_st-&gt;codec);<font></font>
      <span class="hljs-keyword">continue</span>;<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‰∏äË®ò„ÅÆ„Ç≥„Éº„Éâ„Çπ„Éã„Éö„ÉÉ„Éà„ÅØ„Éì„Éá„Ç™„Çπ„Éà„É™„Éº„É†„Å®„Åæ„Å£„Åü„ÅèÂêå„Åò„Åß„Åô„Åå„ÄÅ„Äå„Ç™„Éº„Éá„Ç£„Ç™„Äç„Åå„Äå„Éì„Éá„Ç™„Äç„Å´ÁΩÆ„ÅçÊèõ„Åà„Çâ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„Çå„Å†„ÇàÔºÅ</font><font style="vertical-align: inherit;">„ÇÑ„Çä„Åæ„Åó„ÅüÔºÅ</font><font style="vertical-align: inherit;">„Éó„É¨„Éº„É§„Éº„Çí„Ç≥„É≥„Éë„Ç§„É´„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="bash hljs">gcc -o tutorial07 tutorial07.c -lavutil -lavformat -lavcodec -lswscale -lz -lm \<font></font>
`sdl-config --cflags --libs`</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000Ë°åÊú™Ê∫Ä„ÅÆC„Åß‰ΩúÊàê„Åï„Çå„Åü„É†„Éº„Éì„Éº„Éó„É¨„Éº„É§„Éº„Çí„ÅäÊ•Ω„Åó„Åø„Åè„Å†„Åï„ÅÑÔºÅ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„ÇÇ„Å°„Çç„Çì„ÄÅËøΩÂä†„Åæ„Åü„ÅØÊîπÂñÑ„Åß„Åç„Çã„Åì„Å®„ÅØ„Åü„Åè„Åï„Çì„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><a name="epilogue"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅÇ„Å®„Åå„Åç</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="„É¨„ÉÉ„Çπ„É≥7ÔºöÊ§úÁ¥¢"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üê </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="ÁõÆÊ¨°„Å∏"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚áë </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="‰ªòÈå≤1.Èñ¢Êï∞„ÅÆ„É™„Çπ„Éà"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üí</font></font></a></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åß„Åô„Åã„Çâ„ÄÅÂãï‰Ωú„Åô„Çã„Éó„É¨„Éº„É§„Éº„ÇíÂèñÂæó„Åó„Åæ„Åó„Åü„Åå„ÄÅ„ÇÇ„Å°„Çç„Çì„Åù„Çå„ÅØÂèØËÉΩ„Å™Èôê„ÇäËâØ„Åè„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">„Éï„Ç°„Ç§„É´„ÇíÂ§âÊõ¥„Åó„ÄÅÂ§ö„Åè„ÅÆ‰æøÂà©„Å™„ÇÇ„ÅÆ„ÇíËøΩÂä†„Åô„Çã„Åì„Å®„ÅåÂèØËÉΩ„Åß„ÅôÔºö</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åù„Çå„Å´Áõ¥Èù¢„Åó„Çà„ÅÜ„ÄÅ„Åì„ÅÆ„Éó„É¨„Éº„É§„Éº„ÅØÂ´å„Å†„ÄÇ</font><font style="vertical-align: inherit;">Âü∫„Å´„Å™„Å£„Å¶„ÅÑ„Çãffplay.c„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„ÅØÂÆåÂÖ®„Å´Âè§„Åè„Å™„Å£„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ„Åì„ÅÆ„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÅØÂÆåÂÖ®„Å´ÊîπË®Ç„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">FFmpeg„É©„Ç§„Éñ„É©„É™„Çí‰ΩøÁî®„Åó„Å¶„Çà„ÇäÊ∑±Âàª„Å™„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å´Ë°å„Åç„Åü„ÅÑÂ†¥Âêà„ÅØ„ÄÅÊ¨°„ÅÆ„Çø„Çπ„ÇØ„Å®„Åó„Å¶ffplay.c„ÅÆÊúÄÊñ∞„Éê„Éº„Ç∏„Éß„É≥„ÇíÁ¢∫Ë™ç„Åô„Çã„Åì„Å®„ÇíÂº∑„Åè„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÁßÅ„Åü„Å°„ÅÆ„Ç≥„Éº„Éâ„ÅÆ„Ç®„É©„ÉºÂá¶ÁêÜ„ÅØ„Å≤„Å©„ÅÑ„ÇÇ„ÅÆ„Åß„ÄÅ„ÅØ„Çã„Åã„Å´„Çà„ÅèÂÆüË£Ö„Åß„Åç„Åæ„Åô„ÄÇ</font></font></li>
<li>      ,  ,   ,     .   ,    <b>paused</b>    ,   ,    .   ,    ,      .     <b>av_read_play</b>.   -   ,     .  ,    ,       . : ,     ffplay.c.</li>
<li> .</li>
<li> .       ,    ,      ,    ,   <b>VOB-</b>.</li>
<li> .   ,        .</li>
<li> .       .</li>
<li>  ,   ,  ,      ,   <b>YUV</b>,             <b>time_base</b>.</li>
<li> .</li>
<li>--,    ;  ffplay.c      .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FFmpeg„Å´„Å§„ÅÑ„Å¶Ë©≥„Åó„ÅèÁü•„Çä„Åü„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Åì„Åì„Åß„ÅØ„Åô„Åπ„Å¶„Åã„ÇâÈÅ†„Åè„ÇíÊ§úË®é„Åó„Åæ„Åó„Åü„ÄÇÊ¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„ÅØ„ÄÅ„Éû„É´„ÉÅ„É°„Éá„Ç£„Ç¢„Ç≥„Éº„Éá„Ç£„É≥„Ç∞„ÅÆÁ†îÁ©∂„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">FFmpeg„Éá„Ç£„Çπ„Éà„É™„Éì„É•„Éº„Ç∑„Éß„É≥„Å´„ÅÇ„Çã</font><font style="vertical-align: inherit;">„Éï„Ç°„Ç§„É´</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output_example.c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åã„ÇâÂßã„ÇÅ„Çã„ÅÆ„ÅåÊúÄÂñÑ</font><font style="vertical-align: inherit;">„Åß„Åô„ÄÇ„Åì„ÅÆ„Éà„Éî„ÉÉ„ÇØ„Å´„Å§„ÅÑ„Å¶Âà•„ÅÆÊïôÁßëÊõ∏„ÇíÊõ∏„Åè„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„Åå„ÄÅ„Åì„ÅÆ„Ç¨„Ç§„Éâ„ÇíË∂Ö„Åà„Çã„Åì„Å®„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD„ÄÇ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åö„Å£„Å®Ââç„Å´ÁßÅ„ÅØ„Åì„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„ÇíÊõ¥Êñ∞„Åó„Åæ„Åõ„Çì„Åß„Åó„Åü„Åå„ÄÅ„Åù„ÅÆÈñì‰∏ñÁïå„ÅØÈùôÊ≠¢„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ„Åì„ÅÆ„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„Åß„ÅØ„ÄÅÂçòÁ¥î„Å™APIÊõ¥Êñ∞„ÅÆ„Åø„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÂü∫Êú¨ÁöÑ„Å™Ê¶ÇÂøµ„Å´Èñ¢„Åó„Å¶„ÅØ„Åª„Å®„Çì„Å©Â§âÊõ¥„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ„Åì„Çå„Çâ„ÅÆÊõ¥Êñ∞„ÅÆ„Åª„Å®„Çì„Å©„ÅØ„ÄÅÂÆüÈöõ„Å´„Ç≥„Éº„Éâ„ÇíÁ∞°Áï•Âåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åü„Å†„Åó„ÄÅ„Ç≥„Éº„ÉâÂÖ®‰Ωì„ÇíË™ø„Åπ„Å¶Êõ¥Êñ∞„Åó„Åæ„Åó„Åü„Åå„ÄÅFFplay„ÅØ„Åì„ÅÆ„Åä„ÇÇ„Å°„ÇÉ„ÅÆ„Éó„É¨„Éº„É§„Éº„Çà„Çä„ÇÇÂÑ™„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Çå„Çâ„ÅÆ„É¨„ÉÉ„Çπ„É≥„Åß„ÅØ„ÄÅ„Åã„Å™„Çä„ÅäÁ≤óÊú´„Å™Êò†Áîª„Éó„É¨„Éº„É§„Éº„Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅ‰ªäÊó•Ôºà„Åæ„Åü„ÅØÂ∞ÜÊù•Ôºâ„Åì„ÅÆ„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÇíÊîπÂñÑ„Åó„Åü„ÅÑÂ†¥Âêà„ÅØ„ÄÅFFplay„Çí„Çà„ÅèÁêÜËß£„Åó„ÄÅ‰∏çË∂≥„Åó„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ‰∏ª„Å´„Éì„Éá„Ç™Ê©üÂô®„ÅÆ‰ΩøÁî®„Å´Èñ¢‰øÇ„Åó„Å¶„ÅÑ„Çã„Å®ÊÄù„ÅÑ„Åæ„Åô„Åå„ÄÅ„Åä„Åù„Çâ„Åè‰ªñ„ÅÆÊòé„Çâ„Åã„Å™„ÇÇ„ÅÆ„Çí„ÅÑ„Åè„Å§„ÅãË¶ãÈÄÉ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åä„Åù„Çâ„Åè„ÄÅÁèæÂú®„ÅÆFFplay„Å®ÊØîËºÉ„Åô„Çã„Å®„ÄÅ„ÅÑ„Åè„Å§„Åã„ÅÆÊ†πÊú¨ÁöÑ„Å™Êõ∏„ÅçÁõ¥„Åó„ÅåÂøÖË¶Å„Å´„Å™„Çã„Åß„Åó„Çá„ÅÜ-ÁßÅ„ÅØ„Åæ„Å†„Åù„Çå„ÇíË¶ã„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åó„Åã„Åó„ÄÅ‰∫∫„ÄÖ„Åå‰ªñ„ÅÆÂ†¥ÊâÄ„Åß„Ç≥„Éº„Éâ„ÇíÈ†ªÁπÅ„Å´Ê§úÁ¥¢„Åô„Çã„Å®„ÅÑ„ÅÜ‰∫ãÂÆü„ÇíËÄÉÊÖÆ„Å´ÂÖ•„Çå„Å¶„ÇÇ„ÄÅÈï∑Âπ¥„Å´„Çè„Åü„Å£„Å¶ÁßÅ„ÅÆ‰ªï‰∫ã„ÅåÂ§ö„Åè„ÅÆ„Åì„Å®„ÇíÂä©„Åë„Å¶„Åè„Çå„Åü„Åì„Å®„ÇíÈùûÂ∏∏„Å´Ë™á„Çä„Å´ÊÄù„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÁßÅ„Åå</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÉÅ„Çß„É™„É£„Ç®„Éï</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Å´</font><font style="vertical-align: inherit;">ÈùûÂ∏∏„Å´ÊÑüË¨ù„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">„ÉÅ„Çß„É™„É£„Ç®„Éï„ÅØ</font></a><font style="vertical-align: inherit;">„ÄÅ„Åì„ÅÆ„É¢„Éé„Ç∞„É©„Éï„Çí8ÔºàÔºÅÔºâÂπ¥Ââç„Å´Êõ∏„ÅÑ„Å¶‰ª•Êù•„ÄÅÂè§„Åè„Å™„Å£„Å¶„ÅÑ„Çã„Åô„Åπ„Å¶„ÅÆÊ©üËÉΩ„ÇíÁΩÆ„ÅçÊèõ„Åà„Çã„É´„Éº„ÉÅ„É≥„ÇíËá™ÂàÜ„ÅßÂºï„ÅçÂèó„Åë„Åæ„Åó„Åü„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„Çå„Çâ„ÅÆ„É¨„ÉÉ„Çπ„É≥„ÅåÊúâÁî®„ÅßÈÄÄÂ±à„Åß„ÅØ„Å™„ÅÑ„Åì„Å®„ÅåÂà§Êòé„Åó„Åü„Åì„Å®„ÇíÈ°ò„Å£„Å¶Âñú„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„Ç¨„Ç§„Éâ„Å´Èñ¢„Åó„Å¶ÊèêÊ°à„ÄÅ„Ç®„É©„Éº„ÄÅËã¶ÊÉÖ„ÄÅÊÑüË¨ù„Å™„Å©„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅdranger dog gmail dot com„Åæ„Åß„ÅîÈÄ£Áµ°„Åè„Å†„Åï„ÅÑ„ÄÇ</font><font style="vertical-align: inherit;">„Åù„Åó„Å¶„ÄÅ„ÅØ„ÅÑ„ÄÅ„ÅÇ„Å™„Åü„ÅÆFFmpeg„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÊîØÊè¥„ÇíÁßÅ„Å´‰æùÈ†º„Åô„Çã„ÅÆ„ÅØÊÑèÂë≥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">È°û‰ºº„Åó„ÅüÊñáÂ≠ó„Åå</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â§ö„Åô„Åé</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åæ„Åô„ÄÇ</font></font><a name="functions"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‰ªòÈå≤1.Ê©üËÉΩ‰∏ÄË¶ß</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="„ÅÇ„Å®„Åå„Åç"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üê </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="ÁõÆÊ¨°„Å∏"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚áë </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="‰ªòÈå≤2.„Éá„Éº„ÇøÊßãÈÄ†"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üí</font></font></a></h2><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avformat_open_input</span><span class="hljs-params">(AVFormatContext **ptr, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * filename, AVInputFormat *fmt, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É°„Éá„Ç£„Ç¢„Éï„Ç°„Ç§„É´„ÅÆÂêçÂâç„ÇíÈñã„Åç„ÄÅ„Éï„Ç©„Éº„Éû„ÉÉ„Éà„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Çí</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ptr„Åß</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÊåáÂÆö„Åï„Çå„Åü„Ç¢„Éâ„É¨„Çπ„Å´‰øùÂ≠ò„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fmt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöNULL„Åß„Å™„ÅÑÂ†¥Âêà„ÄÅ„Éï„Ç°„Ç§„É´ÂΩ¢Âºè„ÇíË®≠ÂÆö„Åó„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buf_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éê„ÉÉ„Éï„Ç°„Çµ„Ç§„Ç∫Ôºà„Ç™„Éó„Ç∑„Éß„É≥Ôºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">options</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöAVDictionary„Å´„ÅØ„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVFormatContext</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åä„Çà„Å≥„Éá„Éû„É´„ÉÅ„Éó„É¨</font><b><font style="vertical-align: inherit;">„ÇØ„Çµ„Éº</font></b><font style="vertical-align: inherit;">„ÅÆ„Éë„É©„É°„Éº„Çø„Éº„ÅåË®≠ÂÆö„Åï„Çå„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">avformat_close_input</span><span class="hljs-params">(AVFormatContext **s)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É°„Éá„Ç£„Ç¢„Éï„Ç°„Ç§„É´„ÇíÈñâ„Åò„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åü„Å†„Åó„ÄÅ„Ç≥„Éº„Éá„ÉÉ„ÇØ„ÅØÈñâ„Åò„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">nt <span class="hljs-title">avio_open2</span> <span class="hljs-params">(AVIOContext **s, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *url, <span class="hljs-keyword">int</span> flags, <span class="hljs-keyword">const</span> AVIOInterruptCB *int_cb, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL„Åß</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ÊåáÂÆö„Åï„Çå„Åü„É™„ÇΩ„Éº„Çπ„Çí‰ΩøÁî®„Åô„Çã„Åü„ÇÅ„ÅÆI / O„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVIOContext</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åå‰ΩúÊàê„Åï„Çå„ÇãÂ†¥ÊâÄ„Å∏„ÅÆ„Éù„Ç§„É≥„Çø</font><font style="vertical-align: inherit;">„ÄÇÂ§±Êïó„Åó„ÅüÂ†¥Âêà„ÄÅÊåáÂÆö„Åï„Çå„ÅüÂÄ§„ÅØNULL„Å´Ë®≠ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„É™„ÇΩ„Éº„Çπ„ÅÆÂêçÂâç„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL„Åß</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÊåáÂÆö„Åï„Çå„Åü„É™„ÇΩ„Éº„Çπ„ÅÆÈñãÂßã„ÇíÂà∂Âæ°„Åó„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int_cb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éó„É≠„Éà„Ç≥„É´„É¨„Éô„É´„ÅÆ‰ΩøÁî®„ÅÆ„Åü„ÇÅ„ÅÆÂâ≤„ÇäËæº„Åø„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">options</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éó„É©„Ç§„Éô„Éº„Éà„Éó„É≠„Éà„Ç≥„É´„Éë„É©„É°„Éº„Çø„ÅåÂÖ•Âäõ„Åï„Çå„ÅüËæûÊõ∏„ÄÇÈñ¢Êï∞„ÅåÊàª„Çã„Å®„ÄÅ„Éë„É©„É°„Éº„Çø„Éº„ÅØÁ†¥Ê£Ñ„Åï„Çå„ÄÅË¶ã„Å§„Åã„Çâ„Å™„Åã„Å£„Åü„Ç™„Éó„Ç∑„Éß„É≥„ÇíÂê´„ÇÄËæûÊõ∏„Å´ÁΩÆ„ÅçÊèõ„Åà„Çâ„Çå„Åæ„Åô„ÄÇ NULL„ÅÆÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_dup_packet</span><span class="hljs-params">(AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„ÇÇ„Å°„Çç„Çì„ÄÅ„Åì„Çå„ÅØ„Éè„ÉÉ„ÇØ„Åß„Åô„ÄÇ„Åì„ÅÆ„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅåÂâ≤„ÇäÂΩì„Å¶„Çâ„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Åì„Åì„Å´ÊäïÁ®ø„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÇíËøî„Åó„ÄÅÂ§±Êïó„Åó„ÅüÂ†¥Âêà„ÅØAVERROR_NOMEM„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_find_stream_info</span><span class="hljs-params">(AVFormatContext *s, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÈñ¢Êï∞„ÅØ„ÄÅ„Éï„É¨„Éº„É†„É¨„Éº„Éà„Å™„Å©„ÅÆÊòéÁôΩ„Åß„Å™„ÅÑ„Çπ„Éà„É™„Éº„É†ÊÉÖÂ†±„ÇíÊ§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„Çå„ÅØ„ÄÅMPEG„Å™„Å©„ÅÆ„Éò„ÉÉ„ÉÄ„Éº„ÅÆ„Å™„ÅÑ„Éï„Ç°„Ç§„É´ÂΩ¢Âºè„Å´ÂΩπÁ´ã„Å°„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Éï„Ç°„Ç§„É´„ÇíÈñã„ÅÑ„ÅüÂæå„Å´Âëº„Å≥Âá∫„Åô„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">Êàª„ÇäÂÄ§&gt; =ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÄÅ„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØAVERROR_ *„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVFrame *<span class="hljs-title">avcodec_free_frame</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
av_frame_free„ÅÆÂè§„ÅÑÂêçÂâç„ÄÇ</font><font style="vertical-align: inherit;">lavc 55.28.1„ÅßÂ§âÊõ¥„Åï„Çå„Åæ„Åó„Åü„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_frame_free</span> <span class="hljs-params">(AVFrame **frame)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éï„É¨„Éº„É†„Å®„Åù„ÅÆ‰∏≠„Å´ÂãïÁöÑ„Å´Ââ≤„ÇäÂΩì„Å¶„Çâ„Çå„Åü„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÔºàextended_data„Å™„Å©Ôºâ„ÇíËß£Êîæ„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_free</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *ptr)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
av_mallocÔºàÔºâ„Åæ„Åü„ÅØav_reallocÔºàÔºâ„Çí‰ΩøÁî®„Åó„Å¶Ââ≤„ÇäÂΩì„Å¶„Çâ„Çå„Åü„É°„É¢„É™„ÇíËß£Êîæ„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆÈñ¢Êï∞„ÅØ„ÄÅptr == NULL„ÅßÂëº„Å≥Âá∫„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">‰ª£„Çè„Çä„Å´av_freepÔºàÔºâ„ÇíÂëº„Å≥Âá∫„Åô„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_freep</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *ptr)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É°„É¢„É™„ÇíËß£Êîæ„Åó„ÄÅ„Éù„Ç§„É≥„Çø„ÇíNULL„Å´Ë®≠ÂÆö„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÂÜÖÈÉ®„Åßav_freeÔºàÔºâ„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_free_packet</span><span class="hljs-params">(AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éë„ÉÉ„Ç±„Éº„Ç∏Á†¥Ê£Ñ„É°„ÇΩ„ÉÉ„Éâ„ÇíÂåÖ„ÅøËæº„Åø„Åæ„ÅôÔºàpkt-&gt; destructÔºâ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int64_t</span> <span class="hljs-title">av_gettime</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÁèæÂú®„ÅÆÊôÇÂàª„Çí„Éû„Ç§„ÇØ„É≠ÁßíÂçò‰Ωç„ÅßÂèñÂæó„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_init_packet</span><span class="hljs-params">(AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç™„Éó„Ç∑„Éß„É≥„ÅÆ„Éë„ÉÉ„Ç±„Éº„Ç∏„Éï„Ç£„Éº„É´„Éâ„ÇíÂàùÊúüÂåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">av_malloc</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> size)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åô„Åπ„Å¶„ÅÆ„É°„É¢„É™„Ç¢„ÇØ„Çª„ÇπÔºàCPU„ÅßÂà©Áî®ÂèØËÉΩ„Å™Â†¥Âêà„ÅØ„Éô„ÇØ„Éà„É´„ÇíÂê´„ÇÄÔºâ„Å´ÈÅ©„Åó„ÅüÈÖçÁΩÆ„ÇíÊåÅ„Å§„É°„É¢„É™Ââ≤„ÇäÂΩì„Å¶„Éê„Ç§„Éà„Çµ„Ç§„Ç∫„ÄÇ</font><font style="vertical-align: inherit;">av_mallocÔºà0Ôºâ„ÅØ„Çº„É≠‰ª•Â§ñ„ÅÆ„Éù„Ç§„É≥„Çø„ÇíËøî„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">av_mallocz</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> size)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
av_mallocÔºàÔºâ„Å®Âêå„Åò„Åß„Åô„Åå„ÄÅ„É°„É¢„É™„Çí„Çº„É≠„Å´ÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">av_q2d</span><span class="hljs-params">(AVRational a)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVRational„Çí2ÂÄç„Å´„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_read_frame</span><span class="hljs-params">(AVFormatContext *s, AVPacket *pkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„ÅÆ„Çπ„Éà„É™„Éº„É†„Éï„É¨„Éº„É†„ÇíËøî„Åó„Åæ„Åô„ÄÇÊÉÖÂ†±„ÅØ„Éë„ÉÉ„Ç±„Éº„Ç∏„Å®„Åó„Å¶pkt„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ëøî„Åï„Çå„Åü„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅØ„ÄÅÊ¨°„ÅÆav_read_frameÔºàÔºâ„Åæ„Åü„ÅØav_close_input_fileÔºàÔºâ„Åæ„ÅßÊúâÂäπ„Åß„ÅÇ„Çä„ÄÅav_free_packet„Çí‰ΩøÁî®„Åó„Å¶Ëß£Êîæ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Éì„Éá„Ç™„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅÆÂ†¥Âêà„ÄÅÊ≠£Á¢∫„Å´1„Å§„ÅÆ„Éï„É¨„Éº„É†„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ„Ç™„Éº„Éá„Ç£„Ç™„ÅÆÂ†¥Âêà„ÄÅÂêÑ„Éï„É¨„Éº„É†„ÅÆ„Çµ„Ç§„Ç∫„ÅåÊó¢Áü•„ÅÆÂõ∫ÂÆö„Çµ„Ç§„Ç∫ÔºàPCM„Åæ„Åü„ÅØADPCM„Éá„Éº„Çø„Å™„Å©Ôºâ„ÅÆÂ†¥Âêà„ÄÅÊï¥Êï∞„ÅÆ„Éï„É¨„Éº„É†„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ„Ç™„Éº„Éá„Ç£„Ç™„Éï„É¨„Éº„É†„ÅÆ„Çµ„Ç§„Ç∫„ÅåÂèØÂ§â„ÅÆÂ†¥ÂêàÔºà„Åü„Å®„Åà„Å∞„ÄÅMPEG„Ç™„Éº„Éá„Ç£„Ç™Ôºâ„ÄÅ1„Å§„ÅÆ„Éï„É¨„Éº„É†„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pkt-&gt; pts„ÄÅpkt-&gt; dts„ÄÅ„Åä„Çà„Å≥pkt-&gt; duration„ÅØ„ÄÅÂ∏∏„Å´AVStream.timebase„ÅÆÂçò‰Ωç„ÅßÊ≠£„Åó„ÅÑÂÄ§„Å´Ë®≠ÂÆö„Åï„Çå„Åæ„ÅôÔºà„Åù„Åó„Å¶„ÄÅ„Éï„Ç©„Éº„Éû„ÉÉ„Éà„Åå„Åù„Çå„Çâ„ÇíÊèê‰æõ„Åß„Åç„Å™„ÅÑ„Åì„Å®„ÅåÊÉ≥ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔºâ„ÄÇ„Éì„Éá„Ç™ÂΩ¢Âºè„Å´B„Éï„É¨„Éº„É†„Åå„ÅÇ„ÇãÂ†¥Âêà„ÄÅpkt-&gt; pts„ÅØAV_NOPTS_VALUE„Å´„Å™„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅ„Éö„Ç§„É≠„Éº„Éâ„Çí„Ç¢„É≥„Éë„ÉÉ„ÇØ„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅpkt-&gt; dts„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ëøî„Åï„Çå„ÇãÁµêÊûúÔºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åô„Åπ„Å¶Ê≠£Â∏∏„Åß„ÅÇ„ÇãÂ†¥Âêà„ÅØ0„ÄÅ„Ç®„É©„Éº„Åæ„Åü„ÅØ„Éï„Ç°„Ç§„É´„ÅÆÁµÇ„Çè„Çä„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ&lt;0„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">av_register_all</span><span class="hljs-params">()</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É©„Ç§„Éñ„É©„É™„Å´„Åô„Åπ„Å¶„ÅÆ„Ç≥„Éº„Éá„ÉÉ„ÇØ„ÇíÁôªÈå≤„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int64_t</span> <span class="hljs-title">av_rescale_q</span><span class="hljs-params">(<span class="hljs-keyword">int64_t</span> a, AVRational bq, AVRational cq)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Êàª„ÇäÂÄ§</font><font style="vertical-align: inherit;">* </font><b><font style="vertical-align: inherit;">BQ</font></b><font style="vertical-align: inherit;"> / </font><b><font style="vertical-align: inherit;">CQ</font></b><font style="vertical-align: inherit;">„ÄÇ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">av_seek_frame</span><span class="hljs-params">(AVFormatContext *s, <span class="hljs-keyword">int</span> stream_index, <span class="hljs-keyword">int64_t</span> timestamp, <span class="hljs-keyword">int</span> flags)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„Åß„Ç≠„Éº„Éï„É¨„Éº„É†„ÇíÊ§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream_index</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºöstream_index„Åå-1„ÅÆÂ†¥Âêà„ÄÅ„Éá„Éï„Ç©„É´„Éà„ÅÆ„Çπ„Éà„É™„Éº„É†„ÅåÈÅ∏Êäû„Åï„Çå„ÄÅ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÅåAV_TIME_BASE„É¶„Éã„ÉÉ„Éà„Åã„Çâ„Çπ„Éà„É™„Éº„É†Âõ∫Êúâ„ÅÆtime_base„Å´Ëá™ÂãïÁöÑ„Å´Â§âÊèõ„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timestamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöAVStream.time_base„ÅÆÂçò‰Ωç„ÅßÊ∏¨ÂÆö„Åï„Çå„Åü</font><b><font style="vertical-align: inherit;">„Çø„Ç§„É†„Çπ„Çø„É≥„Éó</font></b><font style="vertical-align: inherit;">„ÄÇ„Çπ„Éà„É™„Éº„É†„ÅåÊåáÂÆö„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅAV_TIME_BASE„ÅÆÂçò‰Ωç„ÅßÊ∏¨ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊñπÂêë„Å®Ê§úÁ¥¢„É¢„Éº„Éâ„Å´Èñ¢„Åô„Çã„Éë„É©„É°„Éº„Çø„ÇíË®≠ÂÆö„Åó„Åæ„ÅôÔºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVSEEK_FLAG_ANYÔºö„Ç≠„Éº„Éï„É¨„Éº„É†„Å†„Åë„Åß„Å™„Åè„ÄÅ‰ªªÊÑè„ÅÆ„Éï„É¨„Éº„É†„ÅßÊ§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVSEEK_FLAG_BACKWARDÔºöÈÄÜÊñπÂêë„Å´Ê§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVSEEK_FLAG_BYTEÔºö„Éê„Ç§„ÉàÂçò‰Ωç„ÅÆ‰ΩçÁΩÆ„Å´Âü∫„Å•„ÅÑ„Å¶Ê§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVFrame *<span class="hljs-title">avcodec_alloc_frame</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
av_frame_alloc„ÅÆÂè§„ÅÑÂêçÂâç„ÄÇ</font><font style="vertical-align: inherit;">lavc 55.28.1„ÅßÂ§âÊõ¥„Åï„Çå„Åæ„Åó„Åü„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVFrame *<span class="hljs-title">av_frame_alloc</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVFrame„ÇíÈÅ∏Êäû„Åó„Å¶ÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">av_frame_freeÔºàÔºâ„Çí‰ΩøÁî®„Åó„Å¶Ëß£Êîæ„Åß„Åç„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_decode_audio4</span><span class="hljs-params">(AVCodecContext *avctx, AVFrame *frame, <span class="hljs-keyword">int</span> *got_frame_ptr, <span class="hljs-keyword">const</span> AVPacket *avpkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç™„Éº„Éá„Ç£„Ç™„Éï„É¨„Éº„É†„Çíavpkt„Åã„Çâ„Éï„É¨„Éº„É†„Å´„Éá„Ç≥„Éº„Éâ„Åó„Åæ„Åô„ÄÇ avcodec_decode_audio4ÔºàÔºâÈñ¢Êï∞„ÅØ„ÄÅAVPacket„Åã„Çâ„Ç™„Éº„Éá„Ç£„Ç™„Éï„Ç°„Ç§„É´„Çí„Éá„Ç≥„Éº„Éâ„Åó„Åæ„Åô„ÄÇ„Éá„Ç≥„Éº„Éâ„Å´„ÅØ„ÄÅavcodec_open2ÔºàÔºâ„Çí‰ΩøÁî®„Åó„Å¶avctx„Å´Èñ¢ÈÄ£‰ªò„Åë„Çâ„Çå„Åü„Ç™„Éº„Éá„Ç£„Ç™„Ç≥„Éº„Éá„ÉÉ„ÇØ„Åå‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇÁµêÊûú„ÅÆ„Éá„Ç≥„Éº„Éâ„Åï„Çå„Åü„Éï„É¨„Éº„É†„ÅØ„ÄÅÊåáÂÆö„Åï„Çå„ÅüAVFrame„Å´Ê†ºÁ¥ç„Åï„Çå„Åæ„Åô„ÄÇ„Éï„É¨„Éº„É†„Åå„Ç¢„É≥„Éë„ÉÉ„ÇØ„Åï„Çå„Çã„Å®„ÄÅgot_frame_ptr„Åå1„Å´Ë®≠ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ë≠¶ÂëäÔºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‰∏ÄÈÉ®„ÅÆÊúÄÈÅ©Âåñ„Åï„Çå„Åü„Éì„ÉÉ„Éà„Çπ„Éà„É™„Éº„É†„É™„Éº„ÉÄ„Éº„ÅØ‰∏ÄÂ∫¶„Å´32„Éì„ÉÉ„Éà„Åæ„Åü„ÅØ64„Éì„ÉÉ„Éà„ÇíË™≠„ÅøÂèñ„Çä„ÄÅÊúÄÂ§ß„ÅßË™≠„ÅøÂèñ„Çä„ÅåÂèØËÉΩ„Å™„Åü„ÇÅ</font><b><font style="vertical-align: inherit;">„ÄÅ</font></b><font style="vertical-align: inherit;">ÂÖ•Âäõ„Éê„ÉÉ„Éï„Ç°„Éºavpkt-&gt;ÁµÇ„Çè„Çä„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avctx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç≥„Éº„Éá„ÉÉ„ÇØ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çø„Éº„Ç≤„ÉÉ„Éà„Éï„É¨„Éº„É†„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">got_frame_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çø„Éº„Ç≤„ÉÉ„Éàint„ÄÇ„Éï„É¨„Éº„É†„Åå„Ç¢„É≥„Éë„ÉÉ„ÇØ„Åï„Çå„ÅüÂ†¥Âêà„Å´Ë®≠ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPKT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éá„Ç£„Ç™„ÇíÂê´„ÇÄAVPacket„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ëøî„Åï„Çå„ÇãÁµêÊûúÔºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç®„É©„Éº„ÅåËøî„Åï„Çå„ÅüÂ†¥Âêà„ÅØË≤†„ÅÆÂÄ§„ÅåËøî„Åï„Çå„ÄÅ„Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÅØÂÖ•ÂäõAVPacket„Åã„Çâ‰ΩøÁî®„Åï„Çå„Åü„Éê„Ç§„ÉàÊï∞„ÅåËøî„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_decode_video2</span><span class="hljs-params">(AVCodecContext *avctx, AVFrame *picture, <span class="hljs-keyword">int</span> *frameFinished, <span class="hljs-keyword">const</span> AVPacket *avpkt)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éì„Éá„Ç™„Éï„É¨„Éº„É†„Çíbuf„Åã„ÇâÁîªÂÉè„Å´„Éá„Ç≥„Éº„Éâ„Åó„Åæ„Åô„ÄÇ avcodec_decode_video2ÔºàÔºâÈñ¢Êï∞„ÅØ„ÄÅ„Çµ„Ç§„Ç∫buf_size„ÅÆÂÖ•Âäõ„Éê„ÉÉ„Éï„Ç°„Éº„Åã„Çâ„Éì„Éá„Ç™„Éï„É¨„Éº„É†„Çí„Éá„Ç≥„Éº„Éâ„Åó„Åæ„Åô„ÄÇ„Éá„Ç≥„Éº„Éâ„Å´„ÅØ„ÄÅavcodec_open2ÔºàÔºâ„Çí‰ΩøÁî®„Åó„Å¶avctx„Å´Èñ¢ÈÄ£‰ªò„Åë„Çâ„Çå„Åü„Éì„Éá„Ç™„Ç≥„Éº„Éá„ÉÉ„ÇØ„Åå‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇÁµêÊûú„ÅÆ„Éá„Ç≥„Éº„Éâ„Åï„Çå„Åü„Éï„É¨„Éº„É†„ÅØ„ÄÅÁîªÂÉè„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ë≠¶ÂëäÔºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avcodec_decode_audio4„Å´ÂΩì„Å¶„ÅØ„Åæ„Çã‰ΩçÁΩÆÂêà„Çè„Åõ„ÅÆ‰æã„Å®„Éê„ÉÉ„Éï„Ç°„ÅÆÂïèÈ°å„ÅØ„ÄÅ„Åì„ÅÆÈñ¢Êï∞„Å´„ÇÇÂΩì„Å¶„ÅØ„Åæ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avctx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç≥„Éº„Éá„ÉÉ„ÇØ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">picture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éá„Ç≥„Éº„Éâ„Åï„Çå„Åü„Éì„Éá„Ç™„Åå‰øùÂ≠ò„Åï„Çå„ÇãAVFrame„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frameFinished</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöËß£Âáç„Åß„Åç„Çã„Éï„É¨„Éº„É†„Åå„Å™„ÅÑÂ†¥Âêà„ÅØ„Çº„É≠„ÄÅ„Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÅØ„Çº„É≠„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avpkt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂÖ•Âäõ„Éê„ÉÉ„Éï„Ç°„ÇíÂê´„ÇÄÂÖ•ÂäõAVPacket„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„Çà„ÅÜ„Å™„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅØav_init_packetÔºàÔºâ„Çí‰ΩøÁî®„Åó„Å¶‰ΩúÊàê„Åß„Åç„Åæ„Åô„ÄÇÊ¨°„Å´„ÄÅ„Éá„Éº„Çø„Å®„Çµ„Ç§„Ç∫„ÇíÊåáÂÆö„Åô„Çã„Å®„ÄÅ‰∏ÄÈÉ®„ÅÆ„Éá„Ç≥„Éº„ÉÄ„Éº„ÅØ„Éï„É©„Ç∞„ÇÑAV_PKT_FLAG_KEY„Å™„Å©„ÅÆ‰ªñ„ÅÆ„Éï„Ç£„Éº„É´„Éâ„Çí„Åï„Çâ„Å´ÂøÖË¶Å„Å®„Åô„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åô„Åπ„Å¶„ÅÆ„Éá„Ç≥„Éº„ÉÄ„Éº„ÅØ„ÄÅ„Åß„Åç„Çã„Å†„ÅëÂ∞ë„Å™„ÅÑ„Éï„Ç£„Éº„É´„Éâ„Çí‰ΩøÁî®„Åô„Çã„Çà„ÅÜ„Å´Ë®≠Ë®à„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ëøî„Åï„Çå„ÇãÁµêÊûúÔºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØË≤†„ÅÆÂÄ§„ÅåËøî„Åï„Çå„Åæ„Åô„ÄÇ„Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÅØ„Éê„Ç§„ÉàÊï∞„Åå‰ΩøÁî®„Åï„Çå„ÄÅ„Éï„É¨„Éº„É†„ÇíÂúßÁ∏ÆËß£Èô§„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅØ„Çº„É≠„ÅåËøî„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int64_t</span> <span class="hljs-title">av_frame_get_best_effort_timestamp</span> <span class="hljs-params">(<span class="hljs-keyword">const</span> AVFrame *frame)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVFrame„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Åã„Çâbest_effort_timestamp„ÇíÂèñÂæó„Åô„Çã„Åü„ÇÅ„ÅÆÂçòÁ¥î„Å™„Ç¢„ÇØ„Çª„Çπ„É°„ÇΩ„ÉÉ„Éâ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVCodec *<span class="hljs-title">avcodec_find_decoder</span><span class="hljs-params">(<span class="hljs-keyword">enum</span> CodecID id)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CodecID„Åß„Éá„Ç≥„Éº„ÉÄ„Éº„ÇíÊ§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØNULL„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">codecCtx-&gt; codec_id„Çí‰ΩøÁî®„Åó„Å¶„ÄÅAVFormatContext„ÅÆ„Çπ„Éà„É™„Éº„É†„Åã„ÇâÂøÖË¶Å„Å™AVCodecContext„ÇíÂèñÂæó„Åó„ÅüÂæå„Å´Âëº„Å≥Âá∫„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">avcodec_flush_buffers</span><span class="hljs-params">(AVCodecContetx *avctx)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éê„ÉÉ„Éï„Ç°„Éï„É©„ÉÉ„Ç∑„É•„ÄÇ</font><font style="vertical-align: inherit;">Âà•„ÅÆ„Çπ„Éà„É™„Éº„É†„ÇíÊ§úÁ¥¢„Åæ„Åü„ÅØÂàá„ÇäÊõø„Åà„Çã„Å®„Åç„Å´Âëº„Å≥Âá∫„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">AVCodecContext * <span class="hljs-title">avcodec_alloc_context3</span> <span class="hljs-params">(<span class="hljs-keyword">const</span> AVCodec *codec)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVCodecContext„ÇíÂâ≤„ÇäÂΩì„Å¶„ÄÅ„Åù„ÅÆ„Éï„Ç£„Éº„É´„Éâ„Çí„Éá„Éï„Ç©„É´„ÉàÂÄ§„Å´Ë®≠ÂÆö„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_copy_context</span> <span class="hljs-params">(AVCodecContext *dest, <span class="hljs-keyword">const</span> AVCodecContext *src)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„ÇΩ„Éº„ÇπAVCodecContext„ÅÆË®≠ÂÆö„Çí„Çø„Éº„Ç≤„ÉÉ„ÉàAVCodecContext„Å´„Ç≥„Éî„Éº„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÁµêÊûú„ÅÆÂÆõÂÖà„Ç≥„Éº„Éá„ÉÉ„ÇØ„ÅÆ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÅØÈñâ„Åò„Çâ„Çå„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆAVCodecContext„Çí‰ΩøÁî®„Åó„Å¶„Éì„Éá„Ç™/„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éº„Çø„Çí„Éá„Ç≥„Éº„Éâ/„Ç®„É≥„Ç≥„Éº„Éâ„Åô„ÇãÂâç„Å´„ÄÅavcodec_open2ÔºàÔºâ„ÇíÂëº„Å≥Âá∫„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dest</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºöavcodec_alloc_context3ÔºàNULLÔºâ„ÅßÂàùÊúüÂåñ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÅØÂàùÊúüÂåñ„Åï„Çå„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avcodec_open2</span><span class="hljs-params">(AVCodecContext *avctx, AVCodec *codec, AVDictionary **options)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÂàùÊúüÂåñ„ÅØ„ÅßÊåáÂÆö„Åï„Çå„Åü„Ç≥„Éº„Éá„ÉÉ„ÇØ„Çí‰ΩøÁî®„Åô„Çãavctx </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Ç≥„Éº„Éá„ÉÉ„ÇØ„Çí</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ</font><font style="vertical-align: inherit;">avcodec_find_decoder„ÅÆÂæå„Å´‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ„Çº„É≠„ÄÅ„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØË≤†„ÅÆÂÄ§„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avpicture_fill</span><span class="hljs-params">(AVPicture *picture, <span class="hljs-keyword">uint8_t</span> *ptr, <span class="hljs-keyword">int</span> pix_fmt, <span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÁîªÂÉè„ÅåÊåá„ÅôÊßãÈÄ†‰Ωì„Çí„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éê„ÉÉ„Éï„Ç°„Éº</font><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pix_fmt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂΩ¢Âºè</font><b><font style="vertical-align: inherit;">„ÄÅ</font></b><font style="vertical-align: inherit;">„Åä„Çà„Å≥ÊåáÂÆö„Åï„Çå„ÅüÂπÖ„Å®È´ò„Åï„ÅßË®≠ÂÆö„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÁîªÂÉè„Éá„Éº„Çø„ÅÆ„Çµ„Ç§„Ç∫„Çí„Éê„Ç§„ÉàÂçò‰Ωç„ÅßËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">avpicture_get_size</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pix_fmt, <span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊåáÂÆö„Åï„Çå„ÅüÂπÖ„ÄÅÈ´ò„Åï„ÄÅÁîªÂÉèÂΩ¢Âºè„ÅÆÁîªÂÉè„Å´ÂøÖË¶Å„Å™„Éê„Ç§„ÉàÊï∞„ÇíË®àÁÆó„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">struct SwsContext* <span class="hljs-title">sws_getContext</span><span class="hljs-params">(<span class="hljs-keyword">int</span> srcW, <span class="hljs-keyword">int</span> srcH, <span class="hljs-keyword">int</span> srcFormat, <span class="hljs-keyword">int</span> dstW, <span class="hljs-keyword">int</span> dstH, <span class="hljs-keyword">int</span> dstFormat, <span class="hljs-keyword">int</span> flags, SwsFilter *srcFilter, SwsFilter *dstFilter, <span class="hljs-keyword">double</span> *param)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sws_scale„Åß‰ΩøÁî®„Åô„ÇãSwsContext„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcW</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÁõÆÁöÑ„ÅÆ„Éî„ÇØ„Çª„É´„ÅÆÂπÖ„ÄÅÈ´ò„Åï„ÄÅ„Åä„Çà„Å≥„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstW</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊúÄÁµÇÁöÑ„Å™„Éî„ÇØ„Çª„É´„ÅÆÂπÖ„ÄÅÈ´ò„Åï„ÄÅ„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö‰ΩøÁî®„Åô„Çã„Çπ„Ç±„Éº„É™„É≥„Ç∞ÊñπÊ≥ï„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‰ΩøÁî®ÂèØËÉΩ„Å™„Ç™„Éó„Ç∑„Éß„É≥„ÅØ„ÄÅSWS_FAST_BILINEAR„ÄÅSWS_BILINEAR„ÄÅSWS_BICUBIC„ÄÅSWS_X„ÄÅSWS_POINT„ÄÅSWS_AREA„ÄÅSWS_BICUBLIN„ÄÅSWS_GAUSS„ÄÅSWS_SINC„ÄÅSWS_LANCZOS„ÄÅSWS_SPLINE„Åß„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„ÅÆ‰ªñ„ÅÆ„Éï„É©„Ç∞„Å´„ÅØ„ÄÅCPUÊ©üËÉΩ„Éï„É©„Ç∞ÔºàSWS_CPU_CAPS_MMX„ÄÅSWS_CPU_CAPS_MMX2„ÄÅSWS_CPU_CAPS_3DNOW„ÄÅSWS_CPU_CAPS_ALTIVECÔºâ„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åù„ÅÆ‰ªñ„ÅÆ„Éï„É©„Ç∞„Å´„ÅØÔºàÁèæÂú®„ÅØÂÆåÂÖ®„Å´ÂÆüË£Ö„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÔºâSWS_FULL_CHR_H_INT„ÄÅSWS_FULL_CHR_H_INP„ÄÅ„Åä„Çà„Å≥SWS_DIRECT_BGR„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊúÄÂæå„Å´„ÄÅSWS_ACCURATE_RND„Åå„ÅÇ„Çä„ÄÅ„Åä„Åù„Çâ„ÅèÂàùÂøÉËÄÖ„Å´ÊúÄ„ÇÇÂΩπÁ´ã„Å§SWS_PRINT_INFO„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÂΩº„Çâ„ÅÆ„Åª„Å®„Çì„Å©„Åå‰Ωï„Çí„Åó„Å¶„ÅÑ„Çã„ÅÆ„ÅãÁßÅ„Å´„ÅØ„Çè„Åã„Çä„Åæ„Åõ„Çì„ÄÇÂ§öÂàÜÁßÅ„Å´Êõ∏„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑÔºü</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcFilter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstFilter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„ÇΩ„Éº„Çπ„Å®ÂÆõÂÖà„ÅÆSwsFilter„ÄÇ SwsFilter„ÅØ„ÄÅËâ≤/ËºùÂ∫¶„ÅÆ„Éï„Ç£„É´„Çø„É™„É≥„Ç∞„ÇíÊúâÂäπ„Å´„Åó„Åæ„Åô„ÄÇ„Éá„Éï„Ç©„É´„ÉàÂÄ§„ÅØNULL„Åß„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö‰øÇÊï∞„ÇíÊåÅ„Å§int [2]„Éê„ÉÉ„Éï„Ç°„Å∏„ÅÆ„Éù„Ç§„É≥„Çø„Åß„ÅÇ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊñáÊõ∏Âåñ„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇÊ®ôÊ∫ñ„ÅÆ„Çπ„Ç±„Éº„É™„É≥„Ç∞„Ç¢„É´„Ç¥„É™„Ç∫„É†„Çí„Çè„Åö„Åã„Å´Â§âÊõ¥„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Å¶„ÅÑ„Çã„Çà„ÅÜ„Åß„Åô„ÄÇ„Éá„Éï„Ç©„É´„ÉàÂÄ§„ÅØNULL„Åß„Åô„ÄÇÂ∞ÇÈñÄÂÆ∂„ÅÆ„ÅøÔºÅ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sws_scale</span><span class="hljs-params">(SwsContext *c, <span class="hljs-keyword">uint8_t</span> *src, <span class="hljs-keyword">int</span> srcStride[], <span class="hljs-keyword">int</span> srcSliceY, <span class="hljs-keyword">int</span> srcSliceH, <span class="hljs-keyword">uint8_t</span> dst[], <span class="hljs-keyword">int</span> dstStride[]
sws_scale(sws_ctx, pFrame-&gt;data, pFrame-&gt;linesize, <span class="hljs-number">0</span>, is-&gt;video_st-&gt;codec-&gt;height, pict.data, pict.linesize);</span></span></code></pre><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">SwsContext * c„ÅÆ</font></b><font style="vertical-align: inherit;">Ë®≠ÂÆö„Å´Âæì„Å£„Å¶</font><font style="vertical-align: inherit;">
„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">src„ÅÆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éá„Éº„Çø„Çí</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çπ„Ç±„Éº„É™„É≥„Ç∞„Åó„Åæ„Åô</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srcStride</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Å®</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dstStride</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅØ„ÄÅ„ÇΩ„Éº„ÇπË°å„Å®ÂÆõ</font><b><font style="vertical-align: inherit;">ÂÖàË°å„ÅÆ</font></b><font style="vertical-align: inherit;">„Çµ„Ç§„Ç∫„Åß„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_TimerID <span class="hljs-title">SDL_AddTimer</span><span class="hljs-params">(Uint32 interval, SDL_NewTimerCallback callback, <span class="hljs-keyword">void</span> *param)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊåáÂÆö„Åï„Çå„Åü„Éü„É™ÁßíÂæå„Å´ÂÆüË°å„Åï„Çå„Çã„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„ÅØ„ÄÅSDL_AddTimerÂëº„Å≥Âá∫„Åó„Åã„Çâ„ÅÆÁèæÂú®„ÅÆ„Çø„Ç§„Éû„ÉºÈñìÈöî„Å®„É¶„Éº„Ç∂„ÉºÊåáÂÆö„ÅÆ„Éë„É©„É°„Éº„Çø„Éº„ÇíÊ∏°„Åó„ÄÅÊ¨°„ÅÆ„Çø„Ç§„Éû„ÉºÈñìÈöî„ÇíËøî„Åó„Åæ„Åô„ÄÇ Ôºà„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÅÆÊàª„ÇäÂÄ§„ÅåÊ∏°„Åï„Çå„ÅüÂÄ§„Å®‰∏ÄËá¥„Åô„ÇãÂ†¥Âêà„ÄÅ„Çø„Ç§„Éû„Éº„ÅØÂêå„ÅòÈÄüÂ∫¶„ÅßÂãï‰Ωú„ÅóÁ∂ö„Åë„Åæ„Åô„ÄÇÔºâ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÅÆÊàª„ÇäÂÄ§„Åå0„ÅÆÂ†¥Âêà„ÄÅ„Çø„Ç§„Éû„Éº„ÅØ„Ç≠„É£„É≥„Çª„É´„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÁèæÂú®„ÅÆ„Çø„Ç§„Éû„Éº„Çí„Ç≠„É£„É≥„Çª„É´„Åô„ÇãÂà•„ÅÆÊñπÊ≥ï„ÅØ„ÄÅ„Çø„Ç§„Éû„ÉºË≠òÂà•Â≠êÔºàSDL_AddTimer„Åã„ÇâËøî„Åï„Çå„ÅüÔºâ„Çí‰ΩøÁî®„Åó„Å¶SDL_RemoveTimer„ÇíÂëº„Å≥Âá∫„Åô„Åì„Å®„Åß„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Çø„Ç§„Éû„Éº„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„ÅØ„É°„Ç§„É≥„Éó„É≠„Ç∞„É©„É†„Å®„ÅØÁï∞„Å™„Çã„Çπ„É¨„ÉÉ„Éâ„ÅßÂÆüË°å„Åï„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅ„Åù„ÇåËá™‰Ωì„Åã„ÇâÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åô„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ„Åü„Å†„Åó„ÄÅ„ÅÑ„Å§„Åß„ÇÇSDL_PushEvent„ÇíÂëº„Å≥Âá∫„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Çø„Ç§„Éû„Éº„ÅÆË©≥Á¥∞Â∫¶„ÅØ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Å´„Çà„Å£„Å¶Áï∞„Å™„Çä„Åæ„Åô„Åå„ÄÅ„Åì„Çå„ÅØÊúÄ„ÇÇ‰∏ÄËà¨ÁöÑ„Å™ÂÄ§„Åß„ÅÇ„Çã„Åü„ÇÅ„ÄÅÂ∞ë„Å™„Åè„Å®„ÇÇ10„Éü„É™Áßí„Åß„ÅÇ„Çã„Åì„Å®„ÇíÊúüÂæÖ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Å§„Åæ„Çä„ÄÅ16„Éü„É™Áßí„ÅÆ„Çø„Ç§„Éû„Éº„ÇíË¶ÅÊ±Ç„Åô„Çã„Å®„ÄÅ„Ç¢„É≥„É≠„Éº„Éâ„Åï„Çå„Åü„Ç∑„Çπ„ÉÜ„É†„ÅßÁ¥Ñ20„Éü„É™ÁßíÂæå„Å´„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÅåÈñãÂßã„Åï„Çå„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÊØéÁßí30„Éï„É¨„Éº„É†Ôºà33„Éü„É™Áßí„Åî„Å®Ôºâ„ÅÆÈÄüÂ∫¶„Åß„Éï„É¨„Éº„É†„ÅÆÊõ¥Êñ∞„ÇíÈÄöÁü•„Åô„Çã„Éï„É©„Ç∞„ÇíË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Çø„Ç§„Éû„Éº„Çí30„Éü„É™Áßí„Å´Ë®≠ÂÆö„Åß„Åç„Åæ„ÅôÔºà‰ª•‰∏ã„ÅÆ‰æã„ÇíÂèÇÁÖßÔºâ„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆÈñ¢Êï∞„Çí‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅSDL_INIT_TIMER„ÇíSDL_Init„Å´Ê∏°„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ËøΩÂä†„Åï„Çå„Åü„Çø„Ç§„Éû„Éº„ÅÆË≠òÂà•Â≠ê„ÅÆÂÄ§„ÇíËøî„Åó„Åæ„Åô„ÄÇ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„ÅüÂ†¥Âêà„ÅØNULL„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÅÆÂΩ¢ÂºèÔºö</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-function">Uint32 <span class="hljs-title">callback</span> <span class="hljs-params">( Uint32, <span class="hljs-keyword">void</span> * param)</span></span></code></pre><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_CondSignal</span><span class="hljs-params">(SDL_cond *cond)</span></span></code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cond</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Êù°‰ª∂Â§âÊï∞„ÇíÂæÖÊ©ü„Åó„Å¶„ÅÑ„Çã„Çπ„É¨„ÉÉ„Éâ„ÅÆ1„Å§„ÇíÂÜç</font><b><font style="vertical-align: inherit;">Ëµ∑Âãï„Åó</font></b><font style="vertical-align: inherit;">„Åæ„Åô</font><font style="vertical-align: inherit;">„ÄÇ</font><font style="vertical-align: inherit;">ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÄÅ„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØ-1„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_CondWait</span><span class="hljs-params">(SDL_cond *cond, SDL_mutex *mut)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Êèê‰æõ„Åï„Çå„Åü„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„ÅÆ„É≠„ÉÉ„ÇØ„ÇíËß£Èô§„Åó„ÄÅÂà•„ÅÆ„Çπ„É¨„ÉÉ„Éâ„ÅåcondÊù°‰ª∂Â§âÊï∞„ÅÆSDL_CondSignal„Åæ„Åü„ÅØSDL_CondBroadcast„ÇíÂëº„Å≥Âá∫„Åô„ÅÆ„ÇíÂæÖ„Å£„Å¶„Åã„Çâ„ÄÅ„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„ÇíÂÜçÂ∫¶„É≠„ÉÉ„ÇØ„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆÈñ¢Êï∞„Å´ÂÖ•„ÇãÂâç„Å´„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„Çí„É≠„ÉÉ„ÇØ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç∑„Ç∞„Éä„É´„ÇíÂèó‰ø°„Åô„Çã„Å®0„ÇíËøî„Åó„ÄÅ„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØ-1„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_cond *<span class="hljs-title">SDL_CreateCond</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Êù°‰ª∂Â§âÊï∞„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_Thread *<span class="hljs-title">SDL_CreateThread</span><span class="hljs-params">(<span class="hljs-keyword">int</span> (*fn)(<span class="hljs-keyword">void</span> *), <span class="hljs-keyword">void</span> *data)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_CreateThread„ÅØ„ÄÅË¶™„ÅÆ„Ç∞„É≠„Éº„Éê„É´„É°„É¢„É™ÂÖ®‰Ωì„ÄÅ„Ç∑„Ç∞„Éä„É´„Éè„É≥„Éâ„É©„Éº„ÄÅ„Éï„Ç°„Ç§„É´Ë®òËø∞Â≠ê„Å™„Å©„ÇíÂÖ±Êúâ„Åô„ÇãÊñ∞„Åó„ÅÑÂÆüË°å„Çπ„É¨„ÉÉ„Éâ„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åù„Åó„Å¶„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fn</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Èñ¢Êï∞</font><font style="vertical-align: inherit;">„ÇíÂÆüË°å„Åó„Å¶void„Éù„Ç§„É≥„Çø„Éº„Éá„Éº„Çø„ÇíÊ∏°„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Çπ„É¨„ÉÉ„Éâ„ÅØ„ÄÅfn„ÅåÂÄ§„ÇíËøî„Åô„Å®ÁµÇ‰∫Ü„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_Delay</span> <span class="hljs-params">(Uint32 )</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊåáÂÆö„Åï„Çå„Åü„Éü„É™ÁßíÊï∞„ÅÆÈñìÂæÖÊ©ü„Åó„Åæ„Åô„ÄÇ SDL_Delay„ÅØÂ∞ë„Å™„Åè„Å®„ÇÇÊåáÂÆö„Åï„Çå„ÅüÊôÇÈñìÂæÖÊ©ü„Åó„Åæ„Åô„Åå„ÄÅOS„ÅÆË®àÁîª„Å´„Çà„Çä„ÄÅ„Åä„Åù„Çâ„ÅèÈï∑„ÅèÂæÖÊ©ü„Åó„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ê≥®Ôºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â∞ë„Å™„Åè„Å®„ÇÇ10„Éü„É™Áßí„ÅÆÈÅÖÂª∂Á≤íÂ∫¶„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ‰∏ÄÈÉ®„ÅÆ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Åß„ÅØÊ∏¨ÂÆöÂÄ§„ÅåÁü≠„Åè„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅ„Åì„Çå„ÅåÊúÄ„ÇÇ‰∏ÄËà¨ÁöÑ„Å™„Ç™„Éó„Ç∑„Éß„É≥„Åß„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_Overlay *<span class="hljs-title">SDL_CreateYUVOverlay</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height, Uint32 format, SDL_Surface *display)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_CreateYUVOverlay„ÅØ„ÄÅÊåáÂÆö„Åï„Çå„Åü„Éá„Ç£„Çπ„Éó„É¨„Ç§„Å´ÂØæ„Åó„Å¶„ÄÅÊåáÂÆö„Åï„Çå„ÅüÂπÖ„ÄÅÈ´ò„Åï„ÄÅ„Åä„Çà„Å≥„Éï„Ç©„Éº„Éû„ÉÉ„ÉàÔºà‰ΩøÁî®ÂèØËÉΩ„Å™„Éï„Ç©„Éº„Éû„ÉÉ„Éà„ÅÆ„É™„Çπ„Éà„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅSDL_Overlay„Éá„Éº„ÇøÊßãÈÄ†„ÇíÂèÇÁÖßÔºâ„ÅÆYUV„Ç™„Éº„Éê„Éº„É¨„Ç§„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">SDL_Overlay„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ë°®Á§∫</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅØÂÆüÈöõ„Å´„ÅØSDL_SetVideoMode„Åã„ÇâÊ¥æÁîü„Åó„Åü„Çµ„Éº„Éï„Çß„Çπ„Åß„ÅÇ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åù„ÅÜ„Åß„Å™„ÅÑÂ†¥Âêà„ÄÅ„Åì„ÅÆÈñ¢Êï∞„ÅØ„Éá„Éï„Ç©„É´„Éà„ÅßÊ©üËÉΩ„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Äå„Ç™„Éº„Éê„Éº„É¨„Ç§„Äç„Å®„ÅÑ„ÅÜÁî®Ë™û„ÅØÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Ç™„Éº„Éê„Éº„É¨„Ç§„Åå„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Åß‰ΩúÊàê„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÄÅ„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅåË°®Á§∫„Åï„Çå„Çã„Å®„Åç„Å´„ÄÅ„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅåË°®Á§∫„Åï„Çå„Å¶„ÅÑ„ÇãÈ†òÂüü„ÅÆ‰∏ã„ÅÆË°®Á§∫Èù¢„ÅÆÂÜÖÂÆπ„Åå‰∏äÊõ∏„Åç„Åï„Çå„Çã„Åü„ÇÅ„Åß„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_LockYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_LockYUVOverlay„ÅØ„ÄÅ„Éî„ÇØ„Çª„É´„Éá„Éº„Çø„Å´Áõ¥Êé•„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„Åü„ÇÅ„ÅÆ„Ç™„Éº„Éê„Éº„É¨„Ç§„Çí„Éñ„É≠„ÉÉ„ÇØ„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÄÅ„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØ-1„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_UnlockYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‰ª•Ââç„Å´„É≠„ÉÉ„ÇØ„Åï„Çå„Åü„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅÆ„É≠„ÉÉ„ÇØ„ÇíËß£Èô§„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç™„Éº„Éê„Éº„É¨„Ç§„ÇíË°®Á§∫„Åô„Çã„Å´„ÅØ„ÄÅ„É≠„ÉÉ„ÇØ„ÇíËß£Èô§„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_DisplayYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay, SDL_Rect *dstrect)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‰ΩúÊàêÊôÇ„Å´ÊåáÂÆö„Åï„Çå„Åü„Çµ„Éº„Éï„Çß„Çπ„Å´„Ç™„Éº„Éê„Éº„É¨„Ç§„ÇíÈÖçÁΩÆ„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">SDL_Rect dstrectÊßãÈÄ†‰Ωì„ÅØ„ÄÅÂÆõÂÖà„ÅÆ‰ΩçÁΩÆ„Å®„Çµ„Ç§„Ç∫„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">dstrect„ÅåÂ§ö„Åã„ÇåÂ∞ë„Å™„Åã„Çå„Ç™„Éº„Éê„Éº„É¨„Ç§„Åß„ÅÇ„ÇãÂ†¥Âêà„ÄÅ„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅØ„Çπ„Ç±„Éº„É™„É≥„Ç∞„Åï„Çå„ÄÅ„Åì„Çå„ÅØ2ÂÄç„ÅÆ„Çπ„Ç±„Éº„É™„É≥„Ç∞Áî®„Å´ÊúÄÈÅ©Âåñ„Åï„Çå„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_FreeYUVOverlay</span><span class="hljs-params">(SDL_Overlay *overlay)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_CreateYUVOverlay„Å´„Çà„Å£„Å¶‰ΩúÊàê„Åï„Çå„Åü„Ç™„Éº„Éê„Éº„É¨„Ç§„ÇíËß£Êîæ„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_Init</span><span class="hljs-params">(Uint32 flags)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„ÄÅ‰ªñ„ÅÆ„Åô„Åπ„Å¶„ÅÆSDLÈñ¢Êï∞„ÅÆÂâç„Å´Âëº„Å≥Âá∫„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éë„É©„É°„Éº„Çø</font><font style="vertical-align: inherit;">„ÅØ„ÄÅSDL„ÅÆ„Å©„ÅÆÈÉ®ÂàÜ„ÇíÂàùÊúüÂåñ</font><font style="vertical-align: inherit;">„Åô„Çã„Åã„Çí</font><font style="vertical-align: inherit;">ÊåáÂÆö„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_TIMER-„Çø„Ç§„Éû„Éº„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_AUDIO-„Ç™„Éº„Éá„Ç£„Ç™„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_VIDEO-„Éì„Éá„Ç™„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_CDROM-CD-ROM„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_JOYSTICK-„Ç∏„Éß„Ç§„Çπ„ÉÜ„Ç£„ÉÉ„ÇØ„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_EVERYTHING-‰∏äË®ò„ÅÆ„Åô„Åπ„Å¶„ÇíÂàùÊúüÂåñ„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_NOPARACHUTE-SDL„ÅåËá¥ÂëΩÁöÑ„Å™„Ç®„É©„Éº„Çí„Ç≠„É£„ÉÉ„ÉÅ„Åô„Çã„Åì„Å®„ÇíË®±ÂèØ„Åó„Åæ„Åõ„Çì„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_INIT_EVENTTHREAD-Âà•„ÅÆ„Çπ„É¨„ÉÉ„Éâ„Åß„Ç§„Éô„É≥„Éà„Éû„Éç„Éº„Ç∏„É£„ÇíËµ∑Âãï„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØ-1„ÄÅÊàêÂäü„ÅÆÂ†¥Âêà„ÅØ0„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">SDL_GetError„ÇíÂëº„Å≥Âá∫„Åô„Åì„Å®„Å´„Çà„Çä„ÄÅÊã°Âºµ„Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂèñÂæó„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç®„É©„Éº„ÅÆ‰∏ÄËà¨ÁöÑ„Å™ÂéüÂõ†„ÅØ„ÄÅ„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†„ÇíÈÅ©Âàá„Å´„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Å™„ÅÑÁâπÂÆö„ÅÆ„Éá„Ç£„Çπ„Éó„É¨„Ç§„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„Åì„Å®„Åß„Åô„ÄÇ„Åü„Å®„Åà„Å∞„ÄÅ„Éá„Éê„Ç§„Çπ„Åß„Éï„É¨„Éº„É†„Éê„ÉÉ„Éï„Ç°„Éº„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã„Å®„Åç„Å´„Éû„Ç¶„Çπ„Éâ„É©„Ç§„Éê„Éº„Åå„Å™„ÅÑ„Åì„Å®„ÅåÂéüÂõ†„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆÂ†¥Âêà„ÄÅ„Éû„Ç¶„Çπ„Çí‰Ωø„Çè„Åö„Å´SDL„Çí„Ç≥„É≥„Éë„Ç§„É´„Åô„Çã„Åã„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíËµ∑Âãï„Åô„ÇãÂâç„Å´Áí∞Â¢ÉÂ§âÊï∞„ÄåSDL_NOMOUSE = 1„Äç„ÇíË®≠ÂÆö„Åß„Åç„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_mutex *<span class="hljs-title">SDL_CreateMutex</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É≠„ÉÉ„ÇØ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÊñ∞„Åó„ÅÑmutex„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_LockMutex</span><span class="hljs-params">(SDL_mutex *mutex)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_LockMutex„ÅØSDL_mutexP„ÅÆ„Ç®„Ç§„É™„Ç¢„Çπ„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">‰ª•Ââç„Å´SDL_CreateMutex„Çí‰ΩøÁî®„Åó„Å¶‰ΩúÊàê„Åï„Çå„Åü„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„Çí„Éñ„É≠„ÉÉ„ÇØ„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">mutex„Åå„Åô„Åß„Å´Âà•„ÅÆ„Çπ„É¨„ÉÉ„Éâ„Å´„Çà„Å£„Å¶„Éñ„É≠„ÉÉ„ÇØ„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅSDL_mutexP„ÅØ„ÄÅ„Åù„Çå„Å´„Çà„Å£„Å¶„Éñ„É≠„ÉÉ„ÇØ„Åï„Çå„Åü„Çπ„É¨„ÉÉ„Éâ„ÅåÔºàSDL_mutexV„Çí‰ΩøÁî®„Åó„Å¶Ôºâ„É≠„ÉÉ„ÇØ„ÇíËß£Èô§„Åô„Çã„Åæ„ÅßÂÄ§„ÇíËøî„Åó„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„ÅåÂÜç„Å≥Âëº„Å≥Âá∫„Åï„Çå„Çã„Å®„Åç„ÄÅ„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„Çí„É≠„ÉÉ„ÇØËß£Èô§Áä∂ÊÖã„Å´Êàª„Åô„Å´„ÅØ„ÄÅSDL_mutexVÔºàÂà•ÂêçSDL_UnlockMutexÔºâ„ÇíÂêå„ÅòÂõûÊï∞Âëº„Å≥Âá∫„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÄÅ„Ç®„É©„Éº„ÅÆÂ†¥Âêà„ÅØ-1„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_UnlockMutex</span><span class="hljs-params">(SDL_Mutex *mutex)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„ÅÆ„É≠„ÉÉ„ÇØ„ÇíËß£Èô§„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_OpenAudio</span><span class="hljs-params">(SDL_AudioSpec *desired, SDL_AudioSpec *obtained)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÈñ¢Êï∞„ÅØ„ÄÅÂøÖÈ†à„ÅÆ„Éë„É©„É°„Éº„Çø„Éº„Åß„Ç™„Éº„Éá„Ç£„Ç™„É¶„Éã„ÉÉ„Éà„ÇíÈñã„Åç„ÄÅÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÇíËøî„Åó„ÄÅÂÆüÈöõ„Å´„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Éë„É©„É°„Éº„Çø„Éº„ÇíÊúÄÁµÇÁöÑ„Å´Êåá„ÅôÊßãÈÄ†„Å´ÈÖçÁΩÆ„Åó„Åæ„Åô„ÄÇ NULLÂÄ§„ÇíÂèó„ÅëÂèñ„Å£„ÅüÂ†¥Âêà„ÄÅ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„Å´Ê∏°„Åï„Çå„Çã„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éº„Çø„ÅØÂøÖË¶Å„Å™ÂΩ¢Âºè„Åß„ÅÇ„Çã„Åì„Å®„Åå‰øùË®º„Åï„Çå„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶„ÄÅ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Ç™„Éº„Éá„Ç£„Ç™ÂΩ¢Âºè„Å´Ëá™ÂãïÁöÑ„Å´Â§âÊèõ„Åï„Çå„Åæ„Åô„ÄÇ„Åì„ÅÆÈñ¢Êï∞„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éê„Ç§„Çπ„ÇíÈñã„Åë„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÄÅ„Åæ„Åü„ÅØ„Ç™„Éº„Éá„Ç£„Ç™„Çπ„Éà„É™„Éº„É†„ÇíÊßãÊàê„Åß„Åç„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÄÅ-1„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éê„Ç§„Çπ„ÇíÈñã„Åè„Å´„ÅØ„ÄÅÁõÆÁöÑ„ÅÆSDL_AudioSpec„Çí‰ΩúÊàê„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊ¨°„Å´„ÄÅ„Åì„ÅÆÊßãÈÄ†„Å´ÂøÖË¶Å„Å™„Ç™„Éº„Éá„Ç£„Ç™‰ªïÊßò„ÇíÂÖ•Âäõ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desired-&gt; freq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö1Áßí„ÅÇ„Åü„Çä„ÅÆ„Çµ„É≥„Éó„É´Êï∞„ÅßË°®„Åó„ÅüÂ∏åÊúõ„ÅÆÂë®Ê≥¢Êï∞„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desired-&gt; format</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂøÖË¶Å„Å™„Ç™„Éº„Éá„Ç£„Ç™ÂΩ¢ÂºèÔºàSDL_AudioSpec„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Êúõ„Åæ„Åó„ÅÑ-&gt;„ÉÅ„É£„Éç„É´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂøÖË¶Å„Å™„ÉÅ„É£„É≥„Éç„É´Ôºà„É¢„ÉéÁî®„Å´1„Å§„ÄÅ„Çπ„ÉÜ„É¨„Ç™Áî®„Å´2„Å§„ÄÅ„Çµ„É©„Ç¶„É≥„Éâ„Çµ„Ç¶„É≥„ÉâÁî®„Å´4„Å§„ÄÅ„Çª„É≥„Çø„É™„É≥„Ç∞„Å®LFE‰ªò„Åç„ÅÆ„Çµ„É©„Ç¶„É≥„Éâ„Çµ„Ç¶„É≥„ÉâÁî®„Å´6„Å§Ôºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desired-&gt; samples</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font><b><font style="vertical-align: inherit;">„Çµ„É≥„Éó„É´„ÅÆ</font></b><font style="vertical-align: inherit;">„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„Çµ„Ç§„Ç∫„ÄÇ„Åì„ÅÆÊï∞„ÅØ2„ÅÆÁ¥Ø‰πó„Åß„Å™„Åë„Çå„Å∞„Å™„Çâ„Åö„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éâ„É©„Ç§„Éê„Å´„Çà„Å£„Å¶„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Å´„Çà„ÇäÈÅ©„Åó„ÅüÂÄ§„Å´Ë™øÊï¥„Åß„Åç„Åæ„Åô„ÄÇÊúÄÈÅ©ÂÄ§„ÅØ„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Å®„Éó„É≠„Çª„ÉÉ„Çµ„ÉºÈÄüÂ∫¶„Å´Âøú„Åò„Å¶„ÄÅ512„Åã„Çâ8192„ÅÆÁØÑÂõ≤„Åß„Åô„ÄÇÂÄ§„ÅåÂ∞è„Åï„ÅÑ„Åª„Å©ÂøúÁ≠îÊôÇÈñì„ÅåÈÄü„Åè„Å™„Çä„Åæ„Åô„Åå„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅåÈáç„ÅÑÂá¶ÁêÜ„ÇíÂÆüË°å„Åó„ÄÅÊôÇÈñìÂÜÖ„Å´„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„ÇíÊ∫Ä„Åü„Åô„Åì„Å®„Åå„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Åå‰Ωé‰∏ã„Åô„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Çπ„ÉÜ„É¨„Ç™„Çµ„É≥„Éó„É´„ÅØ„ÄÅLRÈ†Ü„ÅÆÂè≥„ÉÅ„É£„Éç„É´„Å®Â∑¶„ÉÅ„É£„Éç„É´„ÅßÊßãÊàê„Åï„Çå„Åæ„Åô„ÄÇ„Çµ„É≥„Éó„É´Êï∞„ÅØ„ÄÅÊ¨°„ÅÆÂºè„Çí‰ΩøÁî®„Åó„Å¶ÊôÇÈñì„Å´Áõ¥Êé•Èñ¢ÈÄ£„Åó„Å¶„ÅÑ„Çã„Åì„Å®„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ms</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> =Ôºà</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çµ„É≥„Éó„É´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * 1000Ôºâ/ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">freq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desired-&gt; callback</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éá„Ç£„Ç™„É¶„Éã„ÉÉ„Éà„ÅåËøΩÂä†„ÅÆ„Éá„Éº„Çø„ÇíÂèó‰ø°„Åô„ÇãÊ∫ñÂÇô„Åå„Åß„Åç„Åü„Å®„Åç„Å´Âëº„Å≥Âá∫„Åï„Çå„ÇãÈñ¢Êï∞„Å´Ë®≠ÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÈü≥Â£∞„Éê„ÉÉ„Éï„Ç°„Å∏„ÅÆ„Éù„Ç§„É≥„Çø„Å®Èü≥Â£∞„Éê„ÉÉ„Éï„Ç°„ÅÆÈï∑„ÅïÔºà„Éê„Ç§„ÉàÂçò‰ΩçÔºâ„ÅåÈÄÅ‰ø°„Åï„Çå„Åæ„Åô„ÄÇ„Åì„ÅÆÈñ¢Êï∞„ÅØÈÄöÂ∏∏„ÄÅÂà•„ÅÆ„Çπ„É¨„ÉÉ„Éâ„ÅßÂÆüË°å„Åï„Çå„Çã„Åü„ÇÅ„ÄÅ„Ç≥„Éº„Éâ„ÅßSDL_LockAudio„Åä„Çà„Å≥SDL_UnlockAudio„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÄÅ„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„Éá„Éº„ÇøÊßãÈÄ†„Çí‰øùË≠∑„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ„ÅÆ„Éó„É≠„Éà„Çø„Ç§„Éó„ÅØ„ÄÅ</font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÁÑ°Âäπ„ÅÆ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºà</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÁÑ°Âäπ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¶„Éº„Ç∂„Éá„Éº„Çø</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UINT8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çπ„Éà„É™„Éº„É†</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûã„ÅÆLEN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºâ</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É¶„Éº„Ç∂„Éá„Éº„Çø</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -„É¶„Éº„Ç∂„Éá„Éº„Çø„Éï„Ç£„Éº„É´„ÉâSDL_AudioSpec„Å´Ê†ºÁ¥ç„Åï„Çå„Å¶„ÅÑ„Çã„Éù„Ç§„É≥„Çø„ÄÇ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çπ„Éà„É™„Éº„É†</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åô„Çã„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„Å∏„ÅÆ„Éù„Ç§„É≥„Çø„Éº„Åß„Åô</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇlen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„ÅÆÈï∑„ÅïÔºà„Éê„Ç§„ÉàÂçò‰ΩçÔºâ„Åß„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">required-&gt; userdata</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Åì„ÅÆ„Éù„Ç§„É≥„Çø„Éº„ÅØ„ÄÅÊúÄÂàù„ÅÆ„Éë„É©„É°„Éº„Çø„Éº„Å®„Åó„Å¶„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„Å´Ê∏°„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OpenAudio„ÅØ„ÄÅÈñ¢Êï∞„Å´Ê∏°„Åï„Çå„ÅüÁõÆÁöÑ„ÅÆSDL_AudioSpecÊßãÈÄ†„Åã„Çâ„Åì„Çå„Çâ„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÇíË™≠„ÅøÂèñ„Çä„ÄÅÁõÆÁöÑ„Å´‰∏ÄËá¥„Åô„Çã„Ç™„Éº„Éá„Ç£„Ç™ÊßãÊàê„ÇíË¶ã„Å§„Åë„Çà„ÅÜ„Å®„Åó„Åæ„Åô„ÄÇ‰∏äË®ò„ÅÆ„Çà„ÅÜ„Å´„ÄÅÁµêÊûú„ÅÆ„Éë„É©„É°„Éº„Çø„Éº„ÅåNULL„ÅÆÂ†¥Âêà„ÄÅSDL„ÅØÂÜçÁîü‰∏≠„Å´ÁõÆÁöÑ„ÅÆ„Çµ„Ç¶„É≥„ÉâË®≠ÂÆö„Åã„ÇâÊ©üÂô®Ë®≠ÂÆö„Å´Â§âÊèõ„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NULL„ÅåËøî„Åï„Çå„ÅüÂ†¥Âêà„ÄÅÂøÖË¶Å„Å™SDL_AudioSpec„ÅØÂÆüÈöõ„ÅÆ‰ªïÊßò„Åß„Åô„ÄÇ„Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÄÅÁµêÊûú„ÅÆSDL_AudioSpec„ÅØÂÆüÈöõ„ÅÆ‰ªïÊßò„Å´„Å™„Çä„ÄÅÁõÆÁöÑ„ÅÆ‰ªïÊßò„ÇíÂâäÈô§„Åß„Åç„Åæ„Åô„ÄÇ‰ΩúÊ•≠‰ªïÊßò„ÅÆ„Éá„Éº„Çø„ÅØ„ÄÅSDL_AudioCVT„Çí„Éì„É´„Éâ„Åó„Å¶„ÄÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åü„Éá„Éº„Çø„ÇíÊ©üÂô®„ÅÆÂΩ¢Âºè„Å´Â§âÊèõ„Åô„Çã„Å®„Åç„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OpenAudio„ÅØ„ÄÅÁõÆÁöÑ„ÅÆ‰ªïÊßò„Å®ÁµêÊûú„ÅÆ‰ªïÊßò„ÅÆ‰∏°Êñπ„ÅÆ„Çµ„Ç§„Ç∫„Å®Ê≤àÈªô„Éï„Ç£„Éº„É´„Éâ„ÇíË®àÁÆó„Åó„Åæ„Åô„ÄÇ„Çµ„Ç§„Ç∫„Éï„Ç£„Éº„É´„Éâ„Å´„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„ÅÆÂêàË®à„Çµ„Ç§„Ç∫„Åå„Éê„Ç§„ÉàÂçò‰Ωç„ÅßÊ†ºÁ¥ç„Åï„Çå„Åæ„Åô„Åå„ÄÅÁÑ°Èü≥„Å´„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„ÉºÂÜÖ„ÅÆÁÑ°Èü≥„ÇíË°®„Åô„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„ÇãÂÄ§„ÅåÊ†ºÁ¥ç„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Çµ„Ç¶„É≥„Éâ„Éá„Éê„Ç§„Çπ„ÅØ„ÄÅÈñã„ÅÑ„Å¶„ÅÑ„Çã„Å®„Åç„Å´ÁÑ°Èü≥„ÅÆÂÜçÁîü„ÇíÈñãÂßã„Åó„Åæ„Åô„ÄÇ„Ç™„Éº„Éá„Ç£„Ç™„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„ÅôÊ∫ñÂÇô„Åå„Åß„Åç„Åü„Çâ„ÄÅSDL_PauseAudioÔºà0Ôºâ„ÇíÂëº„Å≥Âá∫„Åó„Å¶ÂÜçÁîü„ÅÆ„Åü„ÇÅ„Å´„Ç™„É≥„Å´„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç™„Éº„Éá„Ç£„Ç™„Éâ„É©„Ç§„Éê„Éº„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„ÅÆË¶ÅÊ±Ç„Çµ„Ç§„Ç∫„ÇíÂ§âÊõ¥„Åß„Åç„Çã„Åü„ÇÅ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éê„Ç§„Çπ„ÇíÈñã„ÅÑ„ÅüÂæå„ÄÅ„É≠„Éº„Ç´„É´„ÅÆ„Éü„Ç≠„Ç∑„É≥„Ç∞„Éê„ÉÉ„Éï„Ç°„Éº„ÇíÈÅ∏Êäû„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_PauseAudio</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pause_on)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÈñ¢Êï∞„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÂá¶ÁêÜ„Çí‰∏ÄÊôÇÂÅúÊ≠¢„Åä„Çà„Å≥ÂÅúÊ≠¢„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Çµ„Ç¶„É≥„Éâ„ÅÆÂÜçÁîü„ÇíÈñãÂßã„Åô„Çã„Å´„ÅØ„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éê„Ç§„Çπ„ÇíÈñã„ÅÑ„ÅüÂæå„Å´pause_on = 0„ÅßÂëº„Å≥Âá∫„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„Çå„Å´„Çà„Çä„ÄÅ„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éê„Ç§„Çπ„ÇíÈñã„ÅÑ„ÅüÂæå„ÄÅ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„ÅÆ„Éá„Éº„Çø„ÇíÂÆâÂÖ®„Å´ÂàùÊúüÂåñ„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">Ê≤àÈªô„ÅØ„ÄÅ‰∏ÄÊôÇÂÅúÊ≠¢‰∏≠„Å´„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éê„Ç§„Çπ„Å´Ë®òÈå≤„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_PushEvent</span><span class="hljs-params">(SDL_Event *event)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÂèåÊñπÂêëÈÄö‰ø°„ÉÅ„É£„Éç„É´„Å®„Åó„Å¶ÂÆüÈöõ„Å´‰ΩøÁî®„Åï„Çå„Çã„Ç§„Éô„É≥„Éà„Ç≠„É•„Éº„ÄÇ</font><font style="vertical-align: inherit;">„Ç≠„É•„Éº„Åã„Çâ„Ç§„Éô„É≥„Éà„ÇíË™≠„ÅøÂèñ„Çã„Å†„Åë„Åß„Å™„Åè„ÄÅ„É¶„Éº„Ç∂„Éº„ÅØËá™ÂàÜ„ÅÆ„Ç§„Éô„É≥„Éà„Çí„Ç≠„É•„Éº„Å´ÂÖ•„Çå„Çã„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç§„Éô„É≥„Éà„ÅØ„ÄÅ„Ç≠„É•„Éº„Å´ÂÖ•„Çå„Åü„ÅÑ„Ç§„Éô„É≥„Éà„ÅÆÊßãÈÄ†„Å∏„ÅÆ„Éù„Ç§„É≥„Çø„Éº„Åß„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç§„Éô„É≥„Éà„ÅØ„Ç≠„É•„Éº„Å´„Ç≥„Éî„Éº„Åï„Çå„ÄÅÂëº„Å≥Âá∫„ÅóÂÖÉ„ÅØSDL_PushEvent„ÇíËøî„Åó„ÅüÂæå„Å´„Éù„Ç§„É≥„Éà„Åï„Çå„Åü„É°„É¢„É™„ÇíÁÆ°ÁêÜ„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆÈñ¢Êï∞„ÅØ„Çπ„É¨„ÉÉ„ÉâÊåáÂêë„Åß„ÅÇ„Çä„ÄÅ‰ªñ„ÅÆ„Çπ„É¨„ÉÉ„Éâ„Åã„ÇâÂÆâÂÖ®„Å´Âëº„Å≥Âá∫„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÇíËøî„Åó„ÄÅ„Ç§„Éô„É≥„Éà„Çí„Éá„Ç£„Çπ„Éë„ÉÉ„ÉÅ„Åß„Åç„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÅØ-1„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SDL_WaitEvent</span><span class="hljs-params">(SDL_Event *event)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç§„Éô„É≥„Éà„ÅÆÂæÖÊ©ü‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„ÅüÂ†¥Âêà„ÅØ0„ÇíËøî„Åó„ÄÅ„Åù„Çå‰ª•Â§ñ„ÅÆÂ†¥Âêà„ÅØ1„ÇíËøî„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Ç§„Éô„É≥„Éà„ÅåNULL„Åß„Å™„ÅÑÂ†¥Âêà„ÄÅÊ¨°„ÅÆ„Ç§„Éô„É≥„Éà„Åå„Ç≠„É•„Éº„Åã„ÇâÂâäÈô§„Åï„Çå„ÄÅ„Åì„ÅÆÈ†òÂüü„Å´Ê†ºÁ¥ç„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SDL_Quit</span><span class="hljs-params">()</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åô„Åπ„Å¶„ÅÆSDL„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†„ÇíÁÑ°Âäπ„Å´„Åó„ÄÅ„Åù„Çå„Å´Ââ≤„ÇäÂΩì„Å¶„Çâ„Çå„Åü„É™„ÇΩ„Éº„Çπ„ÇíËß£Êîæ„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„ÄÅÁµÇ‰∫Ü„Åô„ÇãÂâç„Å´ÂøÖ„ÅöÂëº„Å≥Âá∫„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">SDL_Surface *<span class="hljs-title">SDL_SetVideoMode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height, <span class="hljs-keyword">int</span> bitsperpixel, Uint32 flags)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊåáÂÆö„Åï„Çå„ÅüÂπÖ„ÄÅÈ´ò„Åï„ÄÅ„Éî„ÇØ„Çª„É´„Éì„ÉÉ„Éà„Åß„ÅÆ„Éì„Éá„Ç™„É¢„Éº„ÉâË®≠ÂÆö„ÄÇ SDL 1.2.10‰ª•Èôç„ÄÅÂπÖ„Å®È´ò„Åï„Åå0„ÅÆÂ†¥Âêà„ÄÅÁèæÂú®„ÅÆ„Éì„Éá„Ç™„É¢„Éº„ÉâÔºà„Åæ„Åü„ÅØ„É¢„Éº„Éâ„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅØ„Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„É¢„Éº„ÉâÔºâ„ÅÆÂπÖ„Å®È´ò„Åï„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bitsperpixel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åå0„ÅÆ</font><font style="vertical-align: inherit;">Â†¥Âêà</font><font style="vertical-align: inherit;">„ÄÅÁèæÂú®„ÅÆ„Éî„ÇØ„Çª„É´„ÅÇ„Åü„Çä„ÅÆË°®Á§∫„Éì„ÉÉ„Éà„Å®„Åó„Å¶Êâ±„Çè„Çå„Åæ„Åô„ÄÇ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éë„É©„É°„Éº„Çø</font><font style="vertical-align: inherit;">„ÅØ„ÄÅSDL_SurfaceÊßãÈÄ†‰Ωì„ÅÆflags„Éï„Ç£„Éº„É´„Éâ„Å®Âêå„Åò„Åß„Åô„ÄÇ„Åæ„Åü„ÅØ„ÄÅÊ¨°„ÅÆÂÄ§„ÅÆÁµÑ„ÅøÂêà„Çè„ÅõÔºö</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SWSURFACE-„Ç∑„Çπ„ÉÜ„É†„É°„É¢„É™„Å´„Éì„Éá„Ç™„Çµ„Éº„Éï„Çß„Çπ„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWSURFACE-„Éì„Éá„Ç™„É°„É¢„É™„Å´„Éì„Éá„Ç™„Çµ„Éº„Éï„Çß„Çπ„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ASYNCBLIT-Ë°®Á§∫Èù¢„Å∏„ÅÆÈùûÂêåÊúüÊõ¥Êñ∞„ÅÆ‰ΩøÁî®„ÇíÊúâÂäπ„Å´„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØÈÄöÂ∏∏„ÄÅ„Ç∑„É≥„Ç∞„É´„Éó„É≠„Çª„ÉÉ„Çµ„Ç≥„É≥„Éî„É•„Éº„Çø„Åß„ÅÆ‰ΩúÊ•≠„ÇíÈÅÖ„Åè„Åó„Åæ„Åô„Åå„ÄÅSMP„Ç∑„Çπ„ÉÜ„É†„Åß„ÅØÈÄüÂ∫¶„Çí‰∏ä„Åí„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ANYFORMAT-ÈÄöÂ∏∏„ÄÅË¶ÅÊ±Ç„Åï„Çå„Åü„Éî„ÇØ„Çª„É´„ÅÇ„Åü„Çä„ÅÆ„Éì„ÉÉ„ÉàÊï∞Ôºàbpp-„Éî„ÇØ„Çª„É´„ÅÇ„Åü„Çä„ÅÆ„Éì„ÉÉ„ÉàÊï∞Ôºâ„ÅÆ„Éì„Éá„Ç™„Çµ„Éº„Éï„Çß„Çπ„Åå‰ΩøÁî®„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÄÅSDL„ÅØ„Ç∑„Çß„Éº„Éá„Ç£„É≥„Ç∞„Åï„Çå„Åü„Çµ„Éº„Éï„Çß„Çπ„Åß„Éì„Éá„Ç™„Çí„Ç®„Éü„É•„É¨„Éº„Éà„Åó„Åæ„Åô„ÄÇ SDL_ANYFORMAT„ÇíÊ∏°„Åô„Å®„ÄÅ„Åì„Çå„ÅåÈò≤Ê≠¢„Åï„Çå„ÄÅ„Éî„ÇØ„Çª„É´Âçò‰Ωç„ÅÆÊ∑±Â∫¶„Å´Èñ¢‰øÇ„Å™„Åè„ÄÅSDL„ÅØ„Éì„Éá„Ç™„ÅÆË°®Èù¢„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWPALETTE-SDL„Å´„Éë„É¨„ÉÉ„Éà„Å∏„ÅÆÊéí‰ªñÁöÑ„Ç¢„ÇØ„Çª„Çπ„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆ„Éï„É©„Ç∞„Åå„Å™„ÅÑ„Å®„ÄÅSDL_SetColors„Åæ„Åü„ÅØSDL_SetPalette„Çí‰ΩøÁî®„Åó„Å¶Ë¶ÅÊ±Ç„Åó„ÅüËâ≤„ÇíÂ∏∏„Å´ÂèñÂæó„Åß„Åç„Çã„Å®„ÅØÈôê„Çä„Åæ„Åõ„Çì„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_DOUBLEBUF-„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„ÅÆ„ÉÄ„Éñ„É´„Éê„ÉÉ„Éï„Ç°„É™„É≥„Ç∞„ÇíÊúâÂäπ„Å´„Åó„Åæ„Åô„ÄÇ SDL_HWSURFACE„Åß„ÅÆ„ÅøÊúâÂäπ„Åß„Åô„ÄÇ SDL_Flip„ÇíÂëº„Å≥Âá∫„Åô„Å®„ÄÅ„Éê„ÉÉ„Éï„Ç°„ÅåÂèçËª¢„Åó„ÄÅÁîªÈù¢„ÅåÊõ¥Êñ∞„Åï„Çå„Åæ„Åô„ÄÇ„Åô„Åπ„Å¶„ÅÆÊèèÁîª„ÅØ„ÄÅÁèæÂú®Ë°®Á§∫„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Çµ„Éº„Éï„Çß„Çπ‰∏ä„ÅßË°å„Çè„Çå„Åæ„Åô„ÄÇ„ÉÄ„Éñ„É´„Éê„ÉÉ„Éï„Ç°„É™„É≥„Ç∞„ÇíÊúâÂäπ„Å´„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÄÅSDL_Flip„ÅØÂçò„Å´SDL_UpdateRectÂÖ®ÁîªÈù¢„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_FULLSCREEN SDL-ÂÖ®ÁîªÈù¢„É¢„Éº„Éâ„Çí‰ΩøÁî®„Åó„Å¶„Åø„Åæ„Åô„ÄÇ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„ÅÆËß£ÂÉèÂ∫¶„ÇíÂ§âÊõ¥„Åß„Åç„Å™„ÅÑÂ†¥ÂêàÔºà‰Ωï„Çâ„Åã„ÅÆÁêÜÁî±„ÅßÔºâ„ÄÅÊ¨°„Å´È´ò„ÅÑËß£ÂÉèÂ∫¶„Åå‰ΩøÁî®„Åï„Çå„ÄÅË°®Á§∫„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅØÈªí„ÅÑËÉåÊôØ„ÅÆ‰∏≠Â§Æ„Å´ÈÖçÁΩÆ„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGL-OpenGL„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ SDL_GL_SetAttribute„ÇíÊåÅ„Å§OpenGL„Éì„Éá„Ç™Â±ûÊÄß„ÅØ‰∫ãÂâç„Å´Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Çã„Å®ÊÉ≥ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGLBLIT-‰∏äË®ò„ÅÆ„Çà„ÅÜ„Å´OpenGL„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åô„Åå„ÄÅÈÄöÂ∏∏„ÅÆ„Éñ„É™„ÉÉ„ÉÜ„Ç£„É≥„Ç∞Êìç‰Ωú„ÇíË®±ÂèØ„Åó„Åæ„Åô„ÄÇ„Çπ„ÇØ„É™„Éº„É≥„Çµ„Éº„Éï„Çß„ÇπÔºà2DÔºâ„ÅØ„Ç¢„É´„Éï„Ç°„ÉÅ„É£„Éç„É´„ÇíÊåÅ„Å§„Åì„Å®„Åå„Åß„Åç„ÄÅ„Çπ„ÇØ„É™„Éº„É≥„Çµ„Éº„Éï„Çß„Çπ„ÅÆÂ§âÊõ¥„ÇíÊõ¥Êñ∞„Åô„Çã„Å´„ÅØSDL_UpdateRects„Çí‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊ≥®ÊÑè„ÄÇ„Åì„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÅØ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅ„Å´„ÅÆ„Åø‰øùÂ≠ò„Åï„Çå„ÄÅÂ∞ÜÊù•„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„Åß„ÅØÂâäÈô§„Åï„Çå„Çã‰∫àÂÆö„Åß„Åô„ÄÇÊñ∞„Åó„ÅÑ„Ç≥„Éº„Éâ„Åß„ÅÆ‰ΩøÁî®„ÅØÊé®Â•®„Åï„Çå„Åæ„Åõ„Çì„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_RESIZABL-„Çµ„Ç§„Ç∫Â§âÊõ¥ÂèØËÉΩ„Å™„Ç¶„Ç£„É≥„Éâ„Ç¶„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ„É¶„Éº„Ç∂„Éº„Åå„Ç¶„Ç£„É≥„Éâ„Ç¶„Çµ„Ç§„Ç∫„ÇíÂ§âÊõ¥„Åô„Çã„Å®„ÄÅSDL_VIDEORESIZE„Ç§„Éô„É≥„Éà„ÅåÁîüÊàê„Åï„Çå„ÄÅÊñ∞„Åó„ÅÑ„Çµ„Ç§„Ç∫„ÅßSDL_SetVideoMode„ÇíÂÜçÂ∫¶Âëº„Å≥Âá∫„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_NOFRAMEÂèØËÉΩ„Åß„ÅÇ„Çå„Å∞„ÄÅSDL_NOFRAME„ÅØSDL„Å´„Çø„Ç§„Éà„É´„ÇÑ„Éï„É¨„Éº„É†„Å™„Åó„ÅÆ„Ç¶„Ç£„É≥„Éâ„Ç¶„Çí‰ΩúÊàê„Åï„Åõ„Åæ„Åô„ÄÇ„Åì„ÅÆ„Éï„É©„Ç∞„ÅØÂÖ®ÁîªÈù¢„É¢„Éº„Éâ„ÅßËá™ÂãïÁöÑ„Å´Ë®≠ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê≥®ÊÑè„ÄÇ„Å©„ÅÆSDL_SetVideoMode„Éï„É©„Ç∞„ÅåÊ∫Ä„Åü„Åô„Åì„Å®„Åå„Åß„Åç„Çã„Åã„Å´Èñ¢‰øÇ„Å™„Åè„ÄÅËøî„Åï„Çå„Çã„Çµ„Éº„Éï„Çß„Çπ„ÅÆflagsË¶ÅÁ¥†„Å´Ë®≠ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê≥®ÊÑè„ÄÇ„Éì„ÉÉ„Éà„Éî„ÇØ„Çª„É´24„ÅØ„ÄÅ„Éî„ÇØ„Çª„É´„ÅÇ„Åü„Çä3„Éê„Ç§„Éà„ÅÆ„Éë„ÉÉ„ÇØË°®Áèæ„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ„Çà„Çä‰∏ÄËà¨ÁöÑ„Å™4„Éê„Ç§„Éà/„Éî„ÇØ„Çª„É´„É¢„Éº„Éâ„ÅÆÂ†¥Âêà„ÅØ„ÄÅ32„Éì„ÉÉ„Éà„Éî„ÇØ„Çª„É´„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇÂ•áÂ¶ô„Å™„Åì„Å®„Å´„ÄÅ15„Å®16„ÅÆ‰∏°Êñπ„Åå„Éî„ÇØ„Çª„É´„ÅÇ„Åü„Çä2„Éê„Ç§„Éà„É¢„Éº„Éâ„ÇíË¶ÅÊ±Ç„Åó„Åæ„Åô„Åå„ÄÅ„Éî„ÇØ„Çª„É´ÂΩ¢Âºè„ÅåÁï∞„Å™„Çä„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê≥®ÊÑè„ÄÇÂÄãÂà•„ÅÆ„Éî„ÇØ„Çª„É´Êìç‰Ωú„ÇíÂÆüË°å„Åô„Çã„Åã„ÄÅ„Ç¢„É´„Éï„Ç°„ÉÅ„É£„Éç„É´„Çí‰ΩøÁî®„Åó„Å¶„Çµ„Éº„Éï„Çß„Çπ„Çí„Éâ„É©„ÉÉ„Ç∞„Åô„Çã‰∫àÂÆö„Åß„ÄÅÈ´ò„ÅÑ„Éï„É¨„Éº„É†„É¨„Éº„Éà„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅØ„ÄÅSDL_SWSURFACE„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Çµ„Éº„Éï„Çß„ÇπÔºàSDL_HWSURFACEÔºâ„Çí‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„ÄÅSDL„ÅØ„ÄÅ„É≠„ÉÉ„ÇØ„Åô„Çã„Å®„Çµ„Éº„Éï„Çß„Çπ„Çí„Éì„Éá„Ç™„É°„É¢„É™„Åã„Çâ„Ç∑„Çπ„ÉÜ„É†„É°„É¢„É™„Å´„Ç≥„Éî„Éº„Åó„ÄÅ„É≠„ÉÉ„ÇØËß£Èô§„Åô„Çã„Å®„Åù„ÅÆÈÄÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÅåÂ§ßÂπÖ„Å´‰Ωé‰∏ã„Åô„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ Ôºà„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Çµ„Éº„Éï„Çß„Çπ„Å´ÂØæ„Åó„Å¶„ÇØ„Ç®„É™„ÇíÂÆüË°å„Åó„Å¶„ÇÇ„ÄÅ„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢„Çµ„Éº„Éï„Çß„Çπ„ÇíÂèñÂæó„Åß„Åç„Çã„Åì„Å®„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÂ§ö„Åè„ÅÆ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„ÅØ„ÄÅSDL_FULLSCREEN„Çí‰ΩøÁî®„Åô„ÇãÂ†¥Âêà„Å´„ÅÆ„Åø„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Çµ„Éº„Éï„Çß„Çπ„ÇíÊèê‰æõ„Åß„Åç„Åæ„Åô„ÄÇÔºâSDL_HWSURFACE„ÅØ„ÄÅ„Éñ„É≠„ÉÉ„ÉÜ„Ç£„É≥„Ç∞„Åô„Çã„Çµ„Éº„Éï„Çß„Çπ„ÇÇ„Éì„Éá„Ç™„É°„É¢„É™„Å´Ê†ºÁ¥ç„Åß„Åç„ÇãÂ†¥Âêà„Å´ÊúÄÈÅ©„Åß„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê≥®ÊÑè„ÄÇ</font><font style="vertical-align: inherit;">„Ç¶„Ç£„É≥„Éâ„Ç¶„Çµ„Éº„Éï„Çß„Çπ„ÅÆ‰ΩúÊàêÊôÇ„Å´ÁîªÈù¢‰∏ä„ÅÆ‰ΩçÁΩÆ„ÇíÂà∂Âæ°„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅÁí∞Â¢ÉÂ§âÊï∞„ÄåSDL_VIDEO_CENTERED = center„Äç„Åæ„Åü„ÅØ„ÄåSDL_VIDEO_WINDOW_POS = x„ÄÅy„Äç„ÇíË®≠ÂÆö„Åô„Çã„Åì„Å®„Åß„Åì„Çå„ÇíË°å„ÅÜ„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">SDL_putenvÁµåÁî±„Åß„Ç§„É≥„Çπ„Éà„Éº„É´„Åß„Åç„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Êàª„ÇäÂÄ§Ôºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éï„É¨„Éº„É†„Éê„ÉÉ„Éï„Ç°„Çµ„Éº„Éï„Çß„Çπ„ÄÅ„Åæ„Åü„ÅØÂ§±Êïó„Åó„ÅüÂ†¥Âêà„ÅØNULL„ÄÇ</font><font style="vertical-align: inherit;">Ëøî„Åï„Çå„Åü„Çµ„Éº„Éï„Çß„Çπ„ÅØSDL_Quit„Å´„Çà„Å£„Å¶Ëß£Êîæ„Åï„Çå„ÄÅÂëº„Å≥Âá∫„ÅóÂÖÉ„Å´„Çà„Å£„Å¶Ëß£Êîæ„Åï„Çå„Å¶„ÅØ„Å™„Çä„Åæ„Åõ„Çì„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê≥®ÊÑè„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„É´„Éº„É´„Å´„ÅØ„ÄÅSDL_SetVideoMode„ÅÆÈÄ£Á∂öÂëº„Å≥Âá∫„ÅóÔºà„Å§„Åæ„Çä„ÄÅ„Çµ„Ç§„Ç∫Â§âÊõ¥Ôºâ„ÅåÂê´„Åæ„Çå„Åæ„Åô-Êó¢Â≠ò„ÅÆ„Çµ„Éº„Éï„Çß„Çπ„ÅØËá™ÂãïÁöÑ„Å´Ëß£Êîæ„Åï„Çå„Åæ„Åô„ÄÇ</font></font><a name="data"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‰ªòÈå≤2.„Éá„Éº„ÇøÊßãÈÄ†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="‰ªòÈå≤1.Èñ¢Êï∞„ÅÆ„É™„Çπ„Éà"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üê </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="ÁõÆÊ¨°„Å∏"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚áë </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="ÂèÇËÄÉÊñáÁåÆ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üí</font></font></a></h2><br>
<br>
<pre><code class="cpp hljs">AVCodecContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVStream-&gt;„Ç≥„Éº„Éá„ÉÉ„ÇØ„Åã„Çâ„ÅÆ„Çπ„Éà„É™„Éº„É†„Åã„Çâ„ÅÆ„Ç≥„Éº„Éá„ÉÉ„ÇØ„Å´Èñ¢„Åô„Çã„Åô„Åπ„Å¶„ÅÆÊÉÖÂ†±„ÄÇ„ÅÑ„Åè„Å§„Åã„ÅÆÈáçË¶Å„Å™Â±ûÊÄßÔºö</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRational </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö1Áßí„ÅÇ„Åü„Çä„ÅÆ„Éï„É¨„Éº„É†Êï∞</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö1Áßí„ÅÇ„Åü„Çä„ÅÆ„Çµ„É≥„Éó„É´</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÉÅ„É£„Éç„É´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font><b><font style="vertical-align: inherit;">„ÉÅ„É£„Éç„É´</font></b><font style="vertical-align: inherit;">Êï∞</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÂÆåÂÖ®„Å™„É™„Çπ„ÉàÔºàÈùûÂ∏∏„Å´Âç∞Ë±°ÁöÑÔºâ„ÅØ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=http://web.archive.org/web/20090410064257/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åì„Å°„Çâ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºà</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web„Ç¢„Éº„Ç´„Ç§„Éñ„ÄÅÂÖÉ„ÅÆ„É™„É≥„ÇØ„ÅåÊó¢„Å´Â≠òÂú®„Åó„Å™„ÅÑ„Åü„ÇÅ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºâ„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÂ§ö„Åè„ÅÆ„Éë„É©„É°„Éº„Çø„ÅØ‰∏ª„Å´„Ç®„É≥„Ç≥„Éº„Éâ„Å´‰ΩøÁî®„Åï„Çå„ÄÅ„Éá„Ç≥„Éº„Éâ„Å´„ÅØ‰ΩøÁî®„Åï„Çå„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">AVFormatContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éá„Éº„Çø„Éï„Ç£„Éº„É´„ÉâÔºö</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
const </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVClass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">av_class </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVInputFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iformat </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVOutputFormat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oformat </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">priv_data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ByteIOContext </font></font></b> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pb</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö‰Ωé„É¨„Éô„É´„ÅÆ„Éï„Ç°„Ç§„É´Êìç‰Ωú„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned int nb_streams</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éï„Ç°„Ç§„É´ÂÜÖ„ÅÆ„Çπ„É¨„ÉÉ„Éâ„ÅÆÊï∞„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVStream *„Çπ„Éà„É™„Éº„É†[MAX_STREAMS]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂêÑ„Çπ„Éà„É™„Éº„É†„ÅÆ„Éá„Éº„Çø„ÅØ„Åì„Åì„Å´Ê†ºÁ¥ç„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char filename [1024]Ôºö</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åó„Åã„Åó„ÄÅ„Åù„Çå„Å™„Åó„Åß„ÅØ„Å©„ÅÜ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Åß„Åô„Åã</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºà„Ç™„É™„Ç∏„Éä„É´„Åß„ÅØ</font><i><font style="vertical-align: inherit;">-duh</font></i><font style="vertical-align: inherit;">Ôºâ„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éï„Ç°„Ç§„É´ÊÉÖÂ†±Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int64_t </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çø„Ç§„É†„Çπ„Çø„É≥„Éó</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
char </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çø„Ç§„Éà„É´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
char </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">author</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
char </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copyright</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
char </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comment</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
char </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">album</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [512]Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">year</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">track</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
char </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">genre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [32]Ôºö</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ctx_flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊåáÂÆö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÂèØËÉΩ„Å™ÂÄ§„ÅØ„ÄÅAVFMT_NOFILE„ÄÅAVFMT_NEEDNUMBER„ÄÅAVFMT_SHOW_IDS„ÄÅAVFMT_RAWPICTURE„ÄÅ AVFMT_GLOBALHEADER„ÄÅAVFMT_NOTIMESTAMPS„ÄÅAVFMT_GENERIC_INDEX </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacketList</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">packet_buffer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Åì„ÅÆ„Éê„ÉÉ„Éï„Ç°„ÅØ„ÄÅ„Éë„Ç±„ÉÉ„Éà„Åå„Åô„Åß„Å´„Éê„ÉÉ„Éï„Ç°„Åï„Çå„Å¶„ÅÑ„Çã„Åå„Éá„Ç≥„Éº„Éâ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„Å´„ÅÆ„ÅøÂøÖË¶Å„Åß„Åô„ÄÇ„Åü„Å®„Åà„Å∞„ÄÅmpeg„Çπ„Éà„É™„Éº„É†„Åß„Ç≥„Éº„Éá„ÉÉ„ÇØ„Éë„É©„É°„Éº„Çø„ÇíÂèó‰ø°„Åô„ÇãÂ†¥Âêà„Å™„Å©„Åß„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
int64_t</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éá„Ç≥„Éº„ÉâÊôÇÔºö„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÊúÄÂàù„ÅÆ„Éï„É¨„Éº„É†„ÅÆ‰ΩçÁΩÆ„ÄÇÁßí„ÅÆÁ´ØÊï∞„Åß„ÅÇ„ÇãAV_TIME_BASE„ÄÇ„Åì„ÅÆÂÄ§„ÇíÁõ¥Êé•Ë®≠ÂÆö„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇAVStream„ÅÆÂÄ§„Åã„ÇâÊé®Ê∏¨„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_tÊúüÈñìÔºö„Éá„Ç≥„Éº„Éâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çπ„Éà„É™„Éº„É†„ÅÆÊúüÈñìÔºàAV_TIME_BASE„ÅÆÂàÜÊï∞Ôºâ„ÄÇ„Åì„ÅÆÂÄ§„ÇíÁõ¥Êé•Ë®≠ÂÆö„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇAVStream„ÅÆÂÄ§„Åã„ÇâÊé®Ê∏¨„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t file_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂêàË®à„Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫„ÄÇ‰∏çÊòé„Å™Â†¥Âêà„ÅØ0„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int bit_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éá„Ç≥„Éº„ÉâÔºö„Çπ„Éà„É™„Éº„É†„ÅÆ„Éì„ÉÉ„Éà/ÁßíÂçò‰Ωç„ÅÆÂêàË®à„Éì„ÉÉ„Éà„É¨„Éº„Éà„ÄÇ‰ΩøÁî®„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅØ0„ÄÇ file_size„Å®ffmpeg„ÅßÊó¢Áü•„ÅÆÁ∂ôÁ∂öÊôÇÈñì„ÅåËá™ÂãïÁöÑ„Å´Ë®àÁÆó„Åß„Åç„ÇãÂ†¥Âêà„ÅØ„ÄÅÁõ¥Êé•Ë®≠ÂÆö„Åó„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVStream * cur_st </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const uint8_t * cur_ptr </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int cur_len </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacket cur_pkt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t data_offset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int index_built</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊúÄÂàù„ÅÆ„Éë„Ç±„ÉÉ„Éà„ÅÆ„Ç™„Éï„Çª„ÉÉ„Éà„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int mux_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int packet_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int preload</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_delay</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int loop_output</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„ÇãÂΩ¢Âºè„ÅÆÂá∫Âäõ„Çµ„Ç§„ÇØ„É´Êï∞„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int„Éï„É©„Ç∞</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int loop_input</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Á¨¶Âè∑„Å™„Åóint probesize</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éá„Ç≥„Éº„ÉâÔºö„Çµ„É≥„Éó„É´„Éá„Éº„Çø„Çµ„Ç§„Ç∫;„Ç≥„Éº„Éá„Ç£„É≥„Ç∞„Åß„ÅØ‰ΩøÁî®„Åï„Çå„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_analyze_duration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂÖ•Âäõ„Éá„Éº„Çø„Çíav_find_stream_infoÔºàÔºâ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const uint8_t * key</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> keylen„ÅßÂàÜÊûê„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãAV_TIME_BASE„ÅÆÂçò‰Ωç„Åß„ÅÆÊúÄÂ§ßÊúüÈñì</font><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">AVIOContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É™„ÇΩ„Éº„Çπ„Å´„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„Åü„ÇÅ„ÅÆI / O„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const AVClass * av_class</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éó„É©„Ç§„Éô„Éº„ÉàË®≠ÂÆö„ÅÆ„ÇØ„É©„Çπ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * buffer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font><b><font style="vertical-align: inherit;">„Éê„ÉÉ„Éï„Ç°„Éº„ÅÆ</font></b><font style="vertical-align: inherit;">ÈñãÂßã„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int buffer_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊúÄÂ§ß„Éê„ÉÉ„Éï„Ç°„Çµ„Ç§„Ç∫„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * buf_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éê„ÉÉ„Éï„Ç°ÂÜÖ„ÅÆÁèæÂú®„ÅÆ‰ΩçÁΩÆ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * buf_end</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Åü„Å®„Åà„Å∞„ÄÅË™≠„ÅøÂèñ„ÇäÈñ¢Êï∞„ÅåË¶ÅÊ±Ç„Åï„Çå„Åü„Çà„Çä„ÇÇÂ∞ë„Å™„ÅÑ„Éá„Éº„Çø„ÇíËøî„Åó„ÅüÂ†¥Âêà„ÄÅ„Éá„Éº„Çø„ÅØbuffer + buffer_size„Çà„Çä„ÇÇÂ∞è„Åï„Åè„Å™„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * opaque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºöread / write / search / ... </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÔºà* read_packetÔºâ„Å´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ê∏°„Åï„Çå„Çã„Éó„É©„Ç§„Éô„Éº„Éà„Éù„Ç§„É≥„Çø„Éº</font><b><font style="vertical-align: inherit;">Ôºàvoid * opaque„ÄÅuint8_t * buf„ÄÅint buf_sizeÔºâ</font></b><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÔºà* write_packetÔºâÔºàvoid * opaque„ÄÅuint8_t * buf„ÄÅint buf_size Ôºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_tÔºà* seekÔºâÔºàvoid * opaque„ÄÅint64_t offset„ÄÅint whenceÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÁèæÂú®„ÅÆ„Éê„ÉÉ„Éï„Ç°„ÅÆ„Éï„Ç°„Ç§„É´ÂÜÖ„ÅÆ‰ΩçÁΩÆ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int must_flush</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊ¨°„ÅÆÊ§úÁ¥¢„Çí„É™„Çª„ÉÉ„Éà„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØtrue„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int eof_reached</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éï„Ç°„Ç§„É´„ÅÆÁµÇ„Çè„Çä„Å´ÈÅî„Åó„ÅüÂ†¥Âêà„ÅØtrue„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int write_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊõ∏„ÅçËæº„ÅøÁî®„Å´Èñã„ÅÑ„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØtrue„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_packet_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned long checksum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * checksum_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned longÔºà* update_checksumÔºâÔºàunsigned long checksum„ÄÅconst uint8_t * unsigned int sizeÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int error</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç®„É©„Éº„Ç≥„Éº„Éâ„ÅåÂê´„Åæ„Çå„Çã„Åã„ÄÅ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÅØ0„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÔºà* read_pauseÔºâÔºàvoid * opaque„ÄÅint pauseÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Åü„Å®„Åà„Å∞„ÄÅ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Çπ„Éà„É™„Éº„Éü„É≥„Ç∞„Éó„É≠„Éà„Ç≥„É´„ÅÆÂÜçÁîü„Çí‰∏ÄÊôÇÂÅúÊ≠¢„Åæ„Åü„ÅØÂÜçÈñã„Åó„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_tÔºà* read_seekÔºâÔºàvoid * opaque„ÄÅint stream_index„ÄÅint64_t timestamp„ÄÅint flagsÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊåáÂÆö„Åï„Çå„Åüstream_index„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÇíÊåÅ„Å§„Çπ„Éà„É™„Éº„É†ÂÜÖ„ÅÆÊåáÂÆö„Åï„Çå„Åü„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÇíÊ§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seekableÔºö„Çπ„Éà„É™„Éº„É†„ÅåÊ§úÁ¥¢„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅÆAVIO_SEEKABLE_„Åæ„Åü„ÅØ0„Éï„É©„Ç∞„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t maxsize</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÈÅ∏Êäû„ÇíÂà∂Èôê„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„ÇãÊúÄÂ§ß„Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫„ÄÇ„Åì„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÅØlibavformat„ÅÆÂÜÖÈÉ®„Å´„ÅÇ„Çä„ÄÅÂ§ñÈÉ®„Åã„Çâ„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÅØÁ¶ÅÊ≠¢„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int direct</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºöavio_read„Å®avio_write„ÅØÂèØËÉΩ„Å™Èôê„ÇäÁõ¥Êé•ÂÆüË°å„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„ÄÅ„Éê„ÉÉ„Éï„Ç°„Éº„ÇíÈÄöÈÅé„Åï„Åõ„Å™„ÅÑ„Åß„Åè„Å†„Åï„ÅÑ„ÄÇavio_seek„ÅØÂ∏∏„Å´„É°„Ç§„É≥„ÅÆÊ§úÁ¥¢Èñ¢Êï∞„ÇíÁõ¥Êé•Âëº„Å≥Âá∫„Åó„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t bytes_read</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éê„Ç§„ÉàË™≠„ÅøÂèñ„ÇäÁµ±Ë®à„Åì„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÅØlibavformat„ÅÆÂÜÖÈÉ®„Å´„ÅÇ„Çä„ÄÅÂ§ñÈÉ®„Ç¢„ÇØ„Çª„Çπ„ÅØÊãíÂê¶„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int seek_count</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÁµ±Ë®à„ÇíÊ§úÁ¥¢„Åó„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÅØlibavformat„ÅÆÂÜÖÈÉ®„Å´„ÅÇ„Çä„ÄÅÂ§ñÈÉ®„Åã„Çâ„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÅØÁ¶ÅÊ≠¢„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int writeout_count</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÁµ±Ë®à„ÇíÊõ∏„ÅçËæº„Åø„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÅØlibavformat„ÅÆÂÜÖÈÉ®„Å´„ÅÇ„Çä„ÄÅÂ§ñÈÉ®„Åã„Çâ„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÅØÁ¶ÅÊ≠¢„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int orig_buffer_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éê„ÉÉ„Éï„Ç°„Éº„Çµ„Ç§„Ç∫„Çí„É™„Çª„ÉÉ„Éà„Åô„Çã„Åü„ÇÅ„ÅÆÊàª„ÇäÂÄ§„ÇíÁ¢∫Ë™ç„Åä„Çà„Å≥Êèê‰æõ„Åó„ÅüÂæå„ÅßÂÜÖÈÉ®ÁöÑ„Å´‰ΩøÁî®„Åï„Çå„ÇãÂÖÉ„ÅÆ„Éê„ÉÉ„Éï„Ç°„Éº„Çµ„Ç§„Ç∫„ÄÇ</font><font style="vertical-align: inherit;">„Åì„ÅÆ„Éï„Ç£„Éº„É´„Éâ„ÅØlibavformat„ÅÆÂÜÖÈÉ®„Å´„ÅÇ„Çä„ÄÅÂ§ñÈÉ®„Åã„Çâ„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÅØÁ¶ÅÊ≠¢„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">AVDictionary</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ffmpeg„Å´„Éë„É©„É°„Éº„Çø„Éº„ÇíÊ∏°„Åô„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int count</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVDictionaryEntry * elems</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs">AVDictionaryEntry</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AVDictionary„Å´ËæûÊõ∏„Ç®„É≥„Éà„É™„ÇíÊ†ºÁ¥ç„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char * ket</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *ÂÄ§</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs">AVFrame</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÊßãÈÄ†„ÅØ„Ç≥„Éº„Éá„ÉÉ„ÇØ„ÅÆ„Çø„Ç§„Éó„Å´‰æùÂ≠ò„Åô„Çã„Åü„ÇÅ„ÄÅÂãïÁöÑ„Å´Ê±∫ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ„Åü„Å†„Åó„ÄÅ„Åì„ÅÆÊßãÈÄ†„Å´„ÅØÂÖ±ÈÄö„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£„Å®„É°„ÇΩ„ÉÉ„Éâ„Åå„ÅÇ„Çä„Åæ„ÅôÔºö</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * data [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int linesize [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊÉÖÂ†±„Çπ„Éà„É©„Ç§„Éâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * base [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int key_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int pict_type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Åì„Çå„Çâ„ÅØ„ÄÅ„Éá„Ç≥„Éº„ÉâÊôÇ„Å´ÊúüÂæÖ„Åï„Çå„Çãpts„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int coded_picture_number</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int display_picture_number</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int quality</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int age</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int reference</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int8_t * qscale_table</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int qstride</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * mbskip_table</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int16_tÔºà* motion_val [2]Ôºâ[2]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint32_t * mb_type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t motion_subsample_log2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * opaque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint64_t„Ç®„É©„Éº[4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int„Çø„Ç§„Éó</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int repeat_pict</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÁîªÂÉè„ÇíÊåáÂÆö„Åï„Çå„ÅüÂõûÊï∞Áπ∞„ÇäËøî„Åô„Çà„ÅÜ„Å´ÊåáÁ§∫„Åó„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INT qscale_type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûãinterlaced_frame</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûãtop_field_first</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPanScan * pan_scan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INT palette_has_changed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûãbuffer_hints</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Áü≠„ÅÑ* dct_coeff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int8_t * ref_index [2] </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs">AVPacket</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Áîü„Éë„Ç±„ÉÉ„Éà„Éá„Éº„Çø„ÅåÊ†ºÁ¥ç„Åï„Çå„ÇãÊßãÈÄ†„ÄÇ„Éï„É¨„Éº„É†„ÇíÂèó‰ø°„Åô„Çã„Å´„ÅØ„ÄÅ„Åì„ÅÆ„Éá„Éº„Çø„Çíavcodec_decode_audio2„Åæ„Åü„ÅØavcodec_decode_video„Å´Ëª¢ÈÄÅ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºötime_baseÂçò‰Ωç„ÅÆ„Éó„É¨„Çº„É≥„ÉÜ„Éº„Ç∑„Éß„É≥„Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t dts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö‰º∏Èï∑„ÅÆ„Çø„Ç§„É†„Çπ„Çø„É≥„ÉóÔºàtime_baseÂçò‰ΩçÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÁîü„Éá„Éº„Çø„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éá„Éº„Çø„Çµ„Ç§„Ç∫„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int stream_index</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöAVFormatContext„ÅÆÊï∞Èáè„Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅAVPacket„ÅÆÈÄÅ‰ø°ÂÖÉ„ÅÆ„Çπ„Éà„É™„Éº„É†„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int„Éï„É©„Ç∞</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éë„Ç±„ÉÉ„Éà„Åå„Ç≠„Éº„Éï„É¨„Éº„É†„ÅÆÂ†¥Âêà„ÄÅPKT_FLAG_KEY„ÅåË®≠ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int duration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éó„É¨„Çº„É≥„ÉÜ„Éº„Ç∑„Éß„É≥„ÅÆÊúüÈñìÔºàtime_base„ÅÆÂçò‰ΩçÔºâÔºà‰ΩøÁî®„Åß„Åç„Å™„ÅÑÂ†¥Âêà„ÅØ0Ôºâ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voidÔºà* destructÔºâÔºàstruct AVPacket *Ôºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Åì„ÅÆ„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅÆ„É™„ÇΩ„Éº„ÇπËß£ÊîæÈñ¢Êï∞Ôºà„Éá„Éï„Ç©„É´„Éà„Åß„ÅØ„ÄÅav_destruct_packetÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * priv</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çπ„Éà„É™„Éº„É†ÂÜÖ„ÅÆ„Éê„Ç§„Éà‰ΩçÁΩÆ„ÄÇ‰∏çÊòé„Å™Â†¥Âêà„ÅØ-1„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">AVPacketList</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅÆÂçòÁ¥î„Å™„É™„É≥„ÇØ„É™„Çπ„Éà„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacket pkt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVPacketList *Ê¨°„ÅÆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs">AVPicture</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÊßãÈÄ†„ÅØÊúÄÂàù„ÅÆ2„Å§„ÅÆAVFrame„Éá„Éº„ÇøË¶ÅÁ¥†„Å®„Åæ„Å£„Åü„ÅèÂêå„Åò„Åß„ÅÇ„Çã„Åü„ÇÅ„ÄÅÁ†¥Ê£Ñ„Åï„Çå„Çã„Åì„Å®„Åå„Çà„Åè„ÅÇ„Çä„Åæ„Åô„ÄÇ</font><font style="vertical-align: inherit;">SWSÈñ¢Êï∞„Åß‰∏ÄËà¨ÁöÑ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uint8_t * data [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int linesize [4]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊñáÂ≠óÂàó„ÅÆ„Éê„Ç§„ÉàÊï∞„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">AVRational</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊúâÁêÜÊï∞„ÇíË°®„Åô„Åü„ÇÅ„ÅÆÂçòÁ¥î„Å™ÊßãÈÄ†„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int num</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂàÜÂ≠ê„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int den</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂàÜÊØç„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">AVStream</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Çπ„Éà„É™„Éº„É†„ÅÆÊßãÈÄ†„ÄÇ„Åì„ÅÆÊÉÖÂ†±„ÅØ„ÄÅ„Ç≥„Éº„Éá„ÉÉ„ÇØ„ÅßÊúÄ„ÇÇÈ†ªÁπÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûã„ÅÆ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INT ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVCodecContext *„Ç≥„Éº„Éá„ÉÉ„ÇØ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRational r_frame_rate</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void *Âûãpriv_data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t„ÅÆcodec_info_duration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INT codec_info_nb_frames</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVFrac PTS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRational time_base</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûãpts_wrap_bits</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûãstream_copy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂàóÊåôAVDiscardÁ†¥Ê£Ñ„ÅØ„Åï„Çå„Å¶„ÅÑ„Çã</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„ÇìÈÄÜÂ§öÈáçÂåñ„Åß„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éï„É≠„Éº„Éà„ÅÆÂìÅË≥™</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t start_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t duration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÉÅ„É£„ÉºË®ÄË™û[4] </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int„ÅØneed_pa‚Äã‚Äãrsing</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö1 - &gt;ÂÆåÂÖ®„Å™Ëß£Êûê„ÇíÂøÖË¶Å„Å®„Åô„Çã„ÄÅ2 - &gt;Ëß£Êûê„Éò„ÉÉ„ÉÄ„Éº„ÅÆ„Åø„ÄÅÂÜçÊ¢±ÂåÖ„Åô„Çã„Åì„Å®„Å™„Åè</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVCodecParserContext„Çí*„Éë„Éº„Çµ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t„ÅÆcur_dts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INT last_IP_duration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t„ÅÆlast_IP_pts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVIndexEntry * index_entries</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÂûãnb_index_entries</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned intÂûã„ÅÆindex_entries_allocated_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t nb_frames</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Åì„ÅÆ„Çπ„Éà„É™„Éº„É†„ÅÆ„Éï„É¨„Éº„É†Êï∞ÔºàÊó¢Áü•„ÅÆÂ†¥ÂêàÔºâ„Åæ„Åü„ÅØ0 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int64_t pts_buffer [MAX_REORDER_DELAY + 1]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<br>
<pre><code class="cpp hljs">ByteIOContext</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„É†„Éº„Éì„Éº„Éï„Ç°„Ç§„É´„Å´Èñ¢„Åô„Çã‰Ωé„É¨„Éô„É´„ÅÆÊÉÖÂ†±„ÇíÊ†ºÁ¥ç„Åô„ÇãÊßãÈÄ†„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * buffer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int buffer_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * buf_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * buf_end</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * opaque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÔºà* read_packetÔºâÔºàvoid * opaque„ÄÅuint8_t * buf„ÄÅint buf_sizeÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intÔºà* write_packetÔºâÔºàvoid * opaque„ÄÅ uint8_t * buf„ÄÅint buf_sizeÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offset_tÔºà* seekÔºâÔºàvoid * opaque„ÄÅoffset_t offset„ÄÅint whenceÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offset_t pos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int must_flush</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int eof_reached</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int write_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int is_streamed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int max_packet_size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned long checksum</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned char * checksum_ptr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsigned longÔºà* update_checksumÔºâÔºàunsigned long checksumÔºö</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
const uint8_t * buf„ÄÅunsigned int sizeÔºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int error</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç®„É©„Éº„Ç≥„Éº„Éâ„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÅØ0„Å´„Å™„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_AudioSpec</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‰∏ÄÈÉ®„ÅÆ„Ç™„Éº„Éá„Ç£„Ç™„Éá„Éº„Çø„ÅÆÂΩ¢Âºè„ÇíË™¨Êòé„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">freq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çµ„É≥„Éó„É´/Áßí„ÅÆÈü≥„ÅÆÂë®Ê≥¢Êï∞„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÈü≥Â£∞„Éá„Éº„ÇøÂΩ¢Âºè„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÉÅ„É£„É≥„Éç„É´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font><b><font style="vertical-align: inherit;">„ÉÅ„É£„É≥„Éç„É´</font></b><font style="vertical-align: inherit;">Êï∞Ôºö1-„É¢„Éé„ÄÅ2-„Çπ„ÉÜ„É¨„Ç™„ÄÅ4„Çµ„É©„Ç¶„É≥„Éâ„ÄÅ6„Çµ„É©„Ç¶„É≥„Éâ„ÄÅ„Çª„É≥„Çø„É™„É≥„Ç∞„Åä„Çà„Å≥LFE </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Çµ„Ç§„É¨„É≥„Çπ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çµ„Ç¶„É≥„Éâ„Éê„ÉÉ„Éï„Ç°„Éº„ÅÆ</font><b><font style="vertical-align: inherit;">„Çµ„Ç§„É¨„É≥„Çπ</font></b><font style="vertical-align: inherit;">ÂÄ§ÔºàË®àÁÆóÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö</font><b><font style="vertical-align: inherit;">„Çµ„É≥„Éó„É´„ÅÆ</font></b><font style="vertical-align: inherit;">„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„Çµ„Ç§„Ç∫„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„ÅÆ„Çµ„Ç§„Ç∫Ôºà„Éê„Ç§„ÉàÂçò‰ΩçÔºâÔºàË®àÁÆóÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">callbackÔºà..Ôºâ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éá„Ç£„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„ÇíÊ∫Ä„Åü„Åô„Åü„ÇÅ„ÅÆ„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">userdata</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç≥„Éº„É´„Éê„ÉÉ„ÇØÈñ¢Êï∞„Å´Ê∏°„Åï„Çå„Çã„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„Å∏„ÅÆ„Éù„Ç§„É≥„Çø„Éº„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ê¨°„ÅÆ„Éï„Ç©„Éº„Éû„ÉÉ„ÉàÂÄ§„Åå</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÊúâÂäπ„Åß„Åô</font><font style="vertical-align: inherit;">Ôºö</font><font style="vertical-align: inherit;">AUDIO_U8-8„Éì„ÉÉ„Éà„ÅÆÁ¨¶Âè∑„Å™„Åó„Çµ„É≥„Éó„É´„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S8-Á¨¶Âè∑‰ªò„Åç8„Éì„ÉÉ„Éà„Çµ„É≥„Éó„É´„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_U16„Åæ„Åü„ÅØAUDIO_U16LSB-„Åô„Åπ„Å¶„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Åß„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Çè„Åë„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„ÇìÔºàÁ¨¶Âè∑„Å™„Åó16„Éì„ÉÉ„Éà‰∏ã‰Ωç„Éê„Ç§„ÉàÈ†ÜÔºâ„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S16„Åæ„Åü„ÅØAUDIO_S16LS-„Åô„Åπ„Å¶„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Åß„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÔºàÂè§„ÅÑ„Éê„Ç§„ÉàÈ†Ü„ÅÆ16„Éì„ÉÉ„ÉàÔºâ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_U16MSB-„Åô„Åπ„Å¶„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Åß„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÔºàÁ¨¶Âè∑„Å™„Åó16„Éì„ÉÉ„Éà„Éì„ÉÉ„Ç∞„Ç®„É≥„Éá„Ç£„Ç¢„É≥Ôºâ„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S16MS-„Åô„Åπ„Å¶„ÅÆ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Åß„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Çè„Åë„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„ÇìÔºà‰∏ä‰Ωç„Éê„Ç§„ÉàÈ†Ü„ÅÆ16„Éì„ÉÉ„ÉàÔºâ„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_U16SYSÔºöAUDIO_U16LSB„Åæ„Åü„ÅØAUDIO_U16MSB-„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Éó„É≠„Çª„ÉÉ„Çµ„Å´„Çà„Å£„Å¶Áï∞„Å™„Çä„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIO_S16SYSÔºöAUDIO_S16LSB„Åæ„Åü„ÅØAUDIO_S16MSB-„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Éó„É≠„Çª„ÉÉ„Çµ„Å´„Çà„Å£„Å¶Áï∞„Å™„Çä„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Event</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç§„Éô„É≥„Éà„ÅÆÂü∫Êú¨ÊßãÈÄ†„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç§„Éô„É≥„Éà„ÅÆ„Çø„Ç§„Éó„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">active</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç¢„ÇØ„ÉÜ„Ç£„Éô„Éº„Ç∑„Éß„É≥„Ç§„Éô„É≥„ÉàÔºàSDL_ActiveEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">key</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç≠„Éº„Éú„Éº„Éâ„Ç§„Éô„É≥„ÉàÔºàSDL_KeyboardEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">motion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éû„Ç¶„ÇπÁßªÂãï„Ç§„Éô„É≥„ÉàÔºàSDL_MouseMotionEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">button</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Éû„Ç¶„Çπ„ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„ÉàÔºàSDL_MouseButtonEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jaxis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç∏„Éß„Ç§„Çπ„ÉÜ„Ç£„ÉÉ„ÇØËª∏ÁßªÂãï„Ç§„Éô„É≥„ÉàÔºàSDL_JoyAxisEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jball</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç∏„Éß„Ç§„Çπ„ÉÜ„Ç£„ÉÉ„ÇØ„Éà„É©„ÉÉ„ÇØ„Éú„Éº„É´ÁßªÂãï„Ç§„Éô„É≥„ÉàÔºàSDL_JoyBallEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jhat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç∏„Éß„Ç§„Çπ„ÉÜ„Ç£„ÉÉ„ÇØ„Éò„ÉÉ„ÉÄ„ÉºÁßªÂãï„Ç§„Éô„É≥„ÉàÔºàSDL_JoyHatEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jbutton</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç∏„Éß„Ç§„Çπ„ÉÜ„Ç£„ÉÉ„ÇØ„Éú„Çø„É≥„ÇíÊäº„Åô„Ç§„Éô„É≥„ÉàÔºàSDL_JoyButtonEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É™„Çµ„Ç§„Ç∫</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅÆ„Çµ„Ç§„Ç∫Â§âÊõ¥„Ç§„Éô„É≥„ÉàÔºàSDL_ResizeEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÂÖ¨Èñã</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Ç¶„Ç£„É≥„Éâ„Ç¶„ÅÆ„Ç™„Éº„Éó„É≥„Ç§„Éô„É≥„ÉàÔºàSDL_ExposeEvent„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÁµÇ‰∫ÜË¶ÅÊ±Ç„Ç§„Éô„É≥„ÉàÔºàSDL_QuitEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„É¶„Éº„Ç∂„Éº„Ç§„Éô„É≥„ÉàÔºàSDL_UserEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syswm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÊú™ÂÆöÁæ©„ÅÆ„Ç¶„Ç£„É≥„Éâ„Ç¶„Éû„Éç„Éº„Ç∏„É£„Éº„Ç§„Éô„É≥„ÉàÔºàSDL_SysWMEvent„ÇíÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Ç§„Éô„É≥„Éà„ÅÆÁ®ÆÈ°û„ÅØÊ¨°„ÅÆ„Å®„Åä„Çä„Åß„Åô„ÄÇË©≥Á¥∞„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅSDL„ÅÆ„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ:. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ACTIVEEVENT SDL_ActiveEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_KEYDOWN / UP SDL_KeyboardEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_MOUSEMOTION SDL_MouseMotionEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_MOUSEBUTTONDOWN / UP SDL_MouseButtonEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JOYAXISMOTION SDL_JoyAxisEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JOYBALLMOTION SDL_JoyBallEvent„Çí</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JoyHatEvent SDL_JOYHATMOTION </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_JOYBUTTONDOWN / UP SDL_JoyButtonEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_VIDEORESIZE SDL_ResizeEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_VIDEOEXPOSE SDL_ExposeEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_Quit SDL_QuitEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_USEREVENT SDL_UserEvent </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SYSWMEVENT SDL_SysWMEvent</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Overlay</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YUV„Ç™„Éº„Éê„Éº„É¨„Ç§„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éê„Éº„É¨„Ç§ÂΩ¢ÂºèÔºà‰∏ãË®òÂèÇÁÖßÔºâ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w„ÄÅh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅÆÂπÖ/È´ò„Åï„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Âπ≥Èù¢</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éê„Éº„É¨„Ç§„Åô„Çã„Éó„É©„É≥„ÅÆÊï∞„ÄÇÈÄöÂ∏∏„ÅØ1„Åæ„Åü„ÅØ3„ÅÆ„ÅÑ„Åö„Çå„Åã„Åß„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éî„ÉÉ„ÉÅ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç§„É≥„Éá„É≥„Éà„ÅÆÈÖçÂàó„Åß„ÄÅÂêÑ„Éó„É©„É≥„Å´1„Å§„Åß„Åô„ÄÇ„Ç§„É≥„Éá„É≥„Éà„ÅØ„ÄÅ„Éê„Ç§„ÉàÂçò‰Ωç„ÅÆÊñáÂ≠óÂàó„ÅÆÈï∑„Åï„Åß„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Éî„ÇØ„Çª„É´</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂêÑ„Éó„É©„É≥„ÅÆ„Éá„Éº„Çø„Éù„Ç§„É≥„Çø„Éº„ÅÆÈÖçÂàó„ÄÇ„Åì„Çå„Çâ„ÅÆ„Éù„Ç§„É≥„Çø„Çí‰ΩøÁî®„Åô„ÇãÂâç„Å´„ÄÅ„Ç™„Éº„Éê„Éº„É¨„Ç§„Çí„É≠„ÉÉ„ÇØ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hw_overlay</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Ç™„Éº„Éê„Éº„É¨„Ç§„Åå„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Ç¢„ÇØ„Çª„É©„É¨„Éº„Ç∑„Éß„É≥„ÅÆÂ†¥Âêà„ÅØ1„Å´Ë®≠ÂÆö„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Rect</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Èï∑ÊñπÂΩ¢„ÅÆÈ†òÂüü„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sint16 x„ÄÅy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÈï∑ÊñπÂΩ¢„ÅÆÂ∑¶‰∏äÈöÖ„ÅÆ‰ΩçÁΩÆ„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uint16 w„ÄÅh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÈï∑ÊñπÂΩ¢„ÅÆÂπÖ„Å®È´ò„Åï„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_Rect„ÅØ„ÄÅ„Éî„ÇØ„Çª„É´„ÅÆÈï∑ÊñπÂΩ¢„ÅÆÈ†òÂüü„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÅØSDL_BlitSurface„Å´„Çà„Å£„Å¶‰ΩøÁî®„Åï„Çå„ÄÅ„Éñ„É™„ÉÉ„Éà„ÅÆÈ†òÂüü„Å®‰ªñ„ÅÆ„ÅÑ„Åè„Å§„Åã„ÅÆ„Éì„Éá„Ç™Ê©üËÉΩ„ÇíË≠òÂà•„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Surface</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Â§ñÂÅ¥ÔºàË°®Èù¢Ôºâ„ÅÆ„Ç∞„É©„Éï„Ç£„ÉÉ„ÇØÊßãÈÄ†„ÄÇ</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uint32„Éï„É©„Ç∞</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂ§ñÈÉ®„Çπ„Éà„Éà„É≠„É≥„ÅÆ„Éï„É©„Ç∞„ÄÇË™≠Êõ∏„ÅÆ„Åø„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_PixelFormat * format</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöË™≠„ÅøÂèñ„ÇäÂ∞ÇÁî®„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int w„ÄÅh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂπÖ„Å®È´ò„Åï„ÄÇË™≠Êõ∏„ÅÆ„Åø„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uint16„Éî„ÉÉ„ÉÅ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„Çπ„ÉÜ„ÉÉ„Éó„ÄÇË™≠Êõ∏„ÅÆ„Åø„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void * pixels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÔºöÂÆüÈöõ„ÅÆ„Éî„ÇØ„Çª„É´„Éá„Éº„Çø„Å∏„ÅÆ„Éù„Ç§„É≥„Çø„Éº„ÄÇË®òÈå≤„ÅÆ„Åø„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL_Rect clip_rect</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„ÇØ„É™„ÉÉ„Éó„ÅÆÂ§ñÂÅ¥„ÅÆÈï∑ÊñπÂΩ¢„ÄÇË™≠Êõ∏„ÅÆ„Åø„ÄÇ</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int refcount</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ôºö„É°„É¢„É™„ÅÆÂâ≤„ÇäÂΩì„Å¶„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ‰∏ª„Å´Ë™≠Êõ∏„ÅÆ„Åü„ÇÅ„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÊßãÈÄ†„Å´„ÅØ„ÄÅ„Åì„Åì„Å´Á§∫„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Éó„É©„Ç§„Éô„Éº„Éà„Éï„Ç£„Éº„É´„Éâ„ÇÇÂê´„Åæ„Çå„Åæ„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_Surface„ÅØ„ÄÅÊèèÁîªÂèØËÉΩ„Å™„Äå„Ç∞„É©„Éï„Ç£„ÉÉ„ÇØ„Äç„É°„É¢„É™„ÅÆÈ†òÂüü„ÇíË°®„Åó„Åæ„Åô„ÄÇ„Éì„Éá„Ç™„Éê„ÉÉ„Éï„Ç°„Éº„Éï„É¨„Éº„É†„ÅØ„ÄÅSDL_SetVideoMode„Åä„Çà„Å≥SDL_GetVideoSurface„Çí‰ΩøÁî®„Åó„Å¶SDL_Surface„Å®„Åó„Å¶Ëøî„Åï„Çå„Åæ„Åô„ÄÇ„Éï„Ç£„Éº„É´„Éâw„Å®h„ÅØ„ÄÅ„Éî„ÇØ„Çª„É´Âçò‰Ωç„ÅßË°®Èù¢„ÅÆÂπÖ„Å®È´ò„Åï„ÇíË°®„ÅôÂÄ§„Åß„Åô„ÄÇ„Éî„ÇØ„Çª„É´„Éï„Ç£„Éº„É´„Éâ„ÅØ„ÄÅÂÆüÈöõ„ÅÆ„Éî„ÇØ„Çª„É´„Éá„Éº„Çø„Å∏„ÅÆ„Éù„Ç§„É≥„Çø„Åß„Åô„ÄÇÊ≥®Ôºö„Åì„ÅÆ„Éï„Ç£„Éº„É´„Éâ„Å´„Ç¢„ÇØ„Çª„Çπ„Åô„ÇãÂâç„Å´„ÄÅÔºàSDL_LockSurface„Çí‰ªã„Åó„Å¶Ôºâ„Çµ„Éº„Éï„Çß„Çπ„Çí„É≠„ÉÉ„ÇØ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ clip_rect„Éï„Ç£„Éº„É´„Éâ„ÅØ„ÄÅSDL_SetClipRect„Å´„Çà„Å£„Å¶Ë®≠ÂÆö„Åï„Çå„Çã„ÇØ„É™„ÉÉ„Éó„Åï„Çå„ÅüÂõõËßíÂΩ¢„Åß„Åô„ÄÇ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Éï„É©„Ç∞„Éï„Ç£„Éº„É´„Éâ„ÅØÊ¨°„ÅÆORÂÄ§„Çí„Çµ„Éù„Éº„Éà„Åó„Åæ„Åô</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„ÄÇSDL_SWSURFACE-Â§ñÈÉ®„ÅØ„Ç∑„Çπ„ÉÜ„É†„É°„É¢„É™„Å´Ê†ºÁ¥ç„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWSURFACE-Â§ñÈÉ®ÂÅ¥„ÅØ„Éì„Éá„Ç™„É°„É¢„É™„Å´Ê†ºÁ¥ç„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ASYNCBLIT-ÂèØËÉΩ„Å™Â†¥Âêà„ÄÅÂ§ñÈÉ®„ÅØÈùûÂêåÊúü„Ç∞„É¨„Ç¢„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_ANYFORMAT-‰ªªÊÑè„ÅÆ„Éî„ÇØ„Çª„É´ÂΩ¢ÂºèÔºàË°®Á§∫Èù¢Ôºâ„ÅåË®±ÂèØ„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWPALETTE-„Çµ„Éº„Éï„Çß„Çπ„Å´„ÅØÂ∞ÇÁî®„ÅÆ„Éë„É¨„ÉÉ„Éà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_DOUBLEBUF-„ÉÄ„Éñ„É´„Éê„ÉÉ„Éï„Ç°„Çµ„Éº„Éï„Çß„ÇπÔºà„Éá„Ç£„Çπ„Éó„É¨„Ç§„Çµ„Éº„Éï„Çß„ÇπÔºâ„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_FULLSCREEN-ÂÖ®ÁîªÈù¢Ë°®Á§∫ÔºàË°®Á§∫Èù¢Ôºâ„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGL-„Çµ„Éº„Éï„Çß„Çπ„Å´„ÅØOpenGL„Ç≥„É≥„ÉÜ„Ç≠„Çπ„ÉàÔºàË°®Á§∫„Çµ„Éº„Éï„Çß„ÇπÔºâ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_OPENGLBLIT-„Çµ„Éº„Éï„Çß„Çπ„ÅØOpenGLÔºà„Éá„Ç£„Çπ„Éó„É¨„Ç§„Çµ„Éº„Éï„Çß„ÇπÔºâ„ÅÆÂ¢ÉÁïå„Çí„Çµ„Éù„Éº„Éà„Åó„Åæ„Åô„ÄÇÊ≥®ÊÑè„ÄÇ„Åì„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÅØ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅ„Å†„Åë„Å´„ÅÇ„Çä„ÄÅÊñ∞„Åó„ÅÑ„Ç≥„Éº„Éâ„Å´„ÅØÊé®Â•®„Åï„Çå„Åæ„Åõ„Çì„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_RESIZABLE-„Çµ„Éº„Éï„Çß„ÇπÔºà„Éá„Ç£„Çπ„Éó„É¨„Ç§„Çµ„Éº„Éï„Çß„ÇπÔºâ„ÅÆ„Çµ„Ç§„Ç∫Â§âÊõ¥„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_HWACCEL-„Çµ„Éº„Éï„Çß„Çπ„Éñ„É™„ÉÉ„Éà„ÅØ„Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Ç¢„ÇØ„Çª„É©„É¨„Éº„Ç∑„Éß„É≥„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SRCCOLORKEY-Ë°®Èù¢ÊÄß„ÅØ„Ç´„É©„Éº„Éñ„É™„ÉÉ„ÉÜ„Ç£„É≥„Ç∞„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_RLEACCEL-RLE„Çí‰ΩøÁî®„Åó„Å¶„Ç´„É©„Éº„Éñ„É™„ÉÉ„ÉÜ„Ç£„É≥„Ç∞„ÅåÈ´òÈÄüÂåñ„Åï„Çå„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_SRCALPHA-Surface Blyth„ÅØ„Ç¢„É´„Éï„Ç°„Éñ„É¨„É≥„Éá„Ç£„É≥„Ç∞„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDL_PREALLOC-„Çµ„Éº„Éï„Çß„Çπ„ÅØ‰∫ãÂâç„Å´Ââ≤„ÇäÂΩì„Å¶„Çâ„Çå„Åü„É°„É¢„É™„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_Thread</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÊßãÈÄ†„ÅØ„Ç∑„Çπ„ÉÜ„É†„Å´‰æùÂ≠ò„Åó„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Åä„Åù„Çâ„Åè‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">Ë©≥Á¥∞„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ„ÅÆsrc / thread / sdl_thread_c.h„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_cond</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÊßãÈÄ†„ÅØ„Ç∑„Çπ„ÉÜ„É†„Å´‰æùÂ≠ò„Åó„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Åä„Åù„Çâ„Åè‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">Ë©≥Á¥∞„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ„ÅÆsrc / thread / &lt;system&gt; /SDL_syscond.c„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><br>
<br>
<pre><code class="cpp hljs">SDL_mutex</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„Åì„ÅÆÊßãÈÄ†„ÅØ„Ç∑„Çπ„ÉÜ„É†„Å´‰æùÂ≠ò„Åó„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Åä„Åù„Çâ„Åè‰ΩøÁî®„Åô„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</font><font style="vertical-align: inherit;">Ë©≥Á¥∞„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅ„ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ„ÅÆsrc / thread / &lt;system&gt; /SDL_sysmutex.c„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font><a name="links"></a><br>
<br>
<hr><hr><hr><hr><hr><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„É™„É≥„ÇØ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="‰ªòÈå≤2.„Éá„Éº„ÇøÊßãÈÄ†"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Üê </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" title="ÁõÆÊ¨°„Å∏"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚áë</font></font></a></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img width="122" height="30" src="https://habrastorage.org/webt/ts/cs/ro/tscsrofdmymu7o1rbml2evolway.png"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg„Å®SDL„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„ÄÅ„Åæ„Åü„ÅØ„Éì„Éá„Ç™„Éó„É¨„Éº„É§„Éº„Çí1000Ë°åÊú™Ê∫Ä„ÅßË®òËø∞„Åô„ÇãÊñπÊ≥ï</font></font></a><br>
<br>
<img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„ÄÅ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">FFmpeg„Éõ„Éº„É†„Éö„Éº„Ç∏</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">SDL„Éõ„Éº„É†„Éö„Éº„Ç∏</font></a></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img width="122" height="30" src="https://habrastorage.org/webt/z0/e1/6o/z0e16ozcekig9i8jdthljdqpgga.png"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img width="60" height="30" src="https://habrastorage.org/webt/js/4n/23/js4n231ba7glkow_nud5i3dsveq.png"> </a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<br>
<hr><hr><hr><hr><hr><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img align="right" width="420" height="125" src="https://habrastorage.org/webt/co/i3/m0/coi3m0tliby9r5uxtiydjoeaqkm.png"></a><br clear="left">
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EDISONÁ§æ„ÅÆ„Éñ„É≠„Ç∞„ÇÇ„ÅîË¶ß„Åè„Å†„Åï„ÅÑ„ÄÇ</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg libav„Éû„Éã„É•„Ç¢„É´</font></font></b></a><br></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja502834/index.html">6„ÅãÊúà‰ª•‰∏ä„ÅßDevOps„Ç®„É≥„Ç∏„Éã„Ç¢„Å´„Å™„ÇãÊñπÊ≥ï „Éë„Éº„Éà5.„Éá„Éó„É≠„Ç§„É°„É≥„Éà</a></li>
<li><a href="../ja502836/index.html">Unity„Ç®„Éá„Ç£„Çø„Éº„Ç¢„Éâ„Éô„É≥„ÉÅ„É£„ÉºÔºö„Ç∑„É™„Ç¢„É´Âåñ„Åï„Çå„Åü„Éû„Éà„É™„Éß„Éº„Ç∑„Ç´</a></li>
<li><a href="../ja502838/index.html">IT„Å®„Éá„Ç∏„Çø„É´„ÅÆÂ∞ÇÈñÄËÅ∑„ÅÆÈÅï„ÅÑ„ÅØ‰Ωï„Åß„Åô„ÅãÔºö„Éá„Ç∏„Çø„É´„ÅÆÂ§âÈù©„Å®Â∞ÇÈñÄÂÆ∂„ÅÆÊÑèË¶ã</a></li>
<li><a href="../ja502840/index.html">Ëºù„Åè3D EinScan Pro 2X Plus 3D„Çπ„Ç≠„É£„Éä„Éº„É¨„Éì„É•„Éº</a></li>
<li><a href="../ja502842/index.html">„É¶„Éº„Ç∂„Éº„ÅÆÁîü‰ΩìË™çË®º„Éá„Éº„Çø„Çí‰∏çÊ≠£‰ΩøÁî®„Åã„Çâ‰øùË≠∑„Åô„ÇãÊñπÊ≥ï</a></li>
<li><a href="../ja502846/index.html">„Ç∂„ÉÉ„Ç´„Éº„Éê„Éº„Ç∞„ÅØ„Ç∑„Éß„ÉÉ„Éó„ÇíÁ´ã„Å°‰∏ä„Åí„Åü„ÄÇ„Ç§„É≥„Çπ„Çø„Ç∞„É©„É†„Å®„Éï„Çß„Ç§„Çπ„Éñ„ÉÉ„ÇØ„ÅØÂæê„ÄÖ„Å´Â∫ó„Å´„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ</a></li>
<li><a href="../ja502852/index.html">„Å™„Åú‰∫∫„ÄÖ„ÅØÂ§âÂåñ„Å´ÊäµÊäó„Åó„ÄÅÂÜçÂª∫„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´ÊîØÊè¥„Åß„Åç„Çã„ÅÆ„Åã</a></li>
<li><a href="../ja502854/index.html">ERPÂÆüË£Ö„ÅåÂ§±Êïó„Åô„Çã„ÅÆ„ÅØ„Å™„Åú„Åß„Åô„ÅãÔºü</a></li>
<li><a href="../ja502860/index.html">5Êúà20Êó•„ÅÆËº∏ÈÄÅÔºöËà™Á©∫„ÅÆÊÄ•ÈÄü„Å™ÂõûÂæ©„ÅåË¶ã„Åà„Çã</a></li>
<li><a href="../ja502862/index.html">LabVIEW NXG-„Éï„É≠„É≥„Éà„Éë„Éç„É´„ÅÆÂü∫Êú¨-„Ç≥„É≥„Éà„É≠„Éº„É´„Å®„Ç§„É≥„Ç∏„Ç±„Éº„Çø</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>