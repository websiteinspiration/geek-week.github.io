<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñ≤Ô∏è üë®‚Äçüè≠ ü§± Revision of the Webasyst admin panel üöØ üïù üë®üèº‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to tell you how to easily make your life a little easier by filling out the website using the WebAsyst engine, going straight t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Revision of the Webasyst admin panel</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486768/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this article I want to tell you how to easily make your life a little easier by filling out the website using the WebAsyst engine, going straight to editing products and having the ability to remove all the checkboxes on the page. </font><font style="vertical-align: inherit;">And also potentially save 500 rubles on the purchase of a plugin that fixes one of these problems.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foreword</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I work in the field of creating and promoting websites, and for online stores we mainly resort to the Webasyst engine. </font><font style="vertical-align: inherit;">I can‚Äôt say anything bad about him, but in a year of filling out sites on it, I realized that 2 things annoy me, which I will talk about later. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And once I decided to look in the code of the admin panel itself and try to fix what I do not like.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Switching to product editing by clicking on it in the admin panel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is what the list of goods looks like: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gf/9d/o0/gf9do01zggbynyrtierao2amic0.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The fact is that if you simply click on the name in the list of goods, then such an intermediate window opens: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4l/mt/qv/4lmtqv9cxs6mj5-3i_ojgl9y_fk.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In it you can go to edit photos or change the name ... And when you click on the "edit" button, the transition directly for editing. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/2o/4r/bc2o4rqql7otuvgaywvy7ygdj0c.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maybe someone is comfortable. </font><font style="vertical-align: inherit;">Someone but not me.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exploring</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you look at the link, it becomes clear that the intermediate page has an address </font></font><br>
<br>
<pre><code class="bash hljs">https:///webasyst/shop/?action=products<span class="hljs-comment">#/product/id</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the editing page is the same + </font></font><code>/edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at the end.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We correct</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was not difficult to find the template for the product listing display page, it is located at:</font></font><br>
<br>
<pre><code class="bash hljs">//wa-apps/shop/templates/actions/products/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are 3 files, the name of which begins with </font></font><code>product_list_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">All of them draw the admin panel in 3 variations: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d8/uf/en/d8ufennx7rqi39cu3y6wo9vqupi.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Display of goods in the form of a table, icons and a table with articles. </font><font style="vertical-align: inherit;">I only use the table view, so my choice is the file</font></font><br>
<br>
<pre><code class="bash hljs">product_list_table.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Having opened the browser page inspector in the admin panel, I found out that product links look something like this: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/6037"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>.  <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Found the line in the above file: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/{%#p.id%}/"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{%#p.name%}<span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
and added at the end of edit, it turned out like this:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/{%#p.id%}/edit"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{%#p.name%}<span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And it worked. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, I saw on the expanses of the Installer a plug-in that is needed for the same task, but it costs 500 rubles.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Checkboxes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the site, which most often has to be filled, various additional components for doors implemented using the "Services". </font><font style="vertical-align: inherit;">Each product (door) is associated with its category, and since it is impossible to assign a service to a category, all products are still sorted into different types of goods, which usually duplicate categories. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That is, everything that is inside the category ‚Äúone‚Äù belongs to the type of product ‚Äúone‚Äù. </font><font style="vertical-align: inherit;">But there are exceptions when the price of components in one category differs depending on the color of the door, etc. </font><font style="vertical-align: inherit;">Then the product types ‚Äúone.1‚Äù, ‚Äúone.2‚Äù, etc. are created </font><font style="vertical-align: inherit;">And for each type you need to create your own services with their own prices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
View in admin panel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/4a/k7/xl4ak7jmqpwyjbjczh_lwms4xli.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
View on site:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ov/o1/uc/ovo1ucvxwrga45h4xtwth_dob6w.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was required to create a lot of such services, and it was necessary to mark from 1 to 5 checkboxes, and by default, when creating a new ‚Äúservice‚Äù, all checkboxes in the list of product types were already marked. </font><font style="vertical-align: inherit;">At first, I removed everything manually, leaving it necessary, but of course, it took a lot of time to remove about a hundred checkboxes and I started writing the code in the console each time I created a ‚Äúservice‚Äù:</font></font><br>
<br>
<pre><code class="javascript hljs">$(<span class="hljs-string">'body input:checkbox'</span>).prop(<span class="hljs-string">'checked'</span>, <span class="hljs-literal">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This code removes all checked checkboxes on the page. </font><font style="vertical-align: inherit;">It worked, but it was still not very convenient. </font><font style="vertical-align: inherit;">Therefore, I saw 2 options: edit the code so that when creating the service the checkboxes would appear in the unchecked state, and not in the marked one or add the ‚Äúremove all checkboxes‚Äù button to the admin interface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My knowledge in JS is extremely small, so I chose the second method. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Found a render file for the service editing interface:</font></font><br>
<br>
<pre><code class="bash hljs">//wa-apps/shop/templates/actions/services/Services.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And in it is the button code for the ‚ÄúDelete Service‚Äù:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"s-delete-service"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon16 delete"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><font></font>
        [`Delete this service`]<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Without thinking twice, I added a button right next to the current lonely ‚Äúdelete‚Äù by placing the code below: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"  "</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">"$('body input:checkbox').prop('checked', false);"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When clicked, the above JS code is executed and everything works. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before clicking: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/4d/w8/oe4dw8cwr238w6qub5_7fk7z2xu.jpeg" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After pressing: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7n/du/44/7ndu44vigzremn1175tmek7q_su.jpeg" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhaps all this could be solved easier, but I decided as best I could. </font><font style="vertical-align: inherit;">I hope someone will find this helpful.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en486756/index.html">Python for the tester: how small c pandas scripts help test large datasets</a></li>
<li><a href="../en486760/index.html">Security Week 06: advertising trackers in mobile applications</a></li>
<li><a href="../en486762/index.html">Bedside hosting: the creepy practice of home hosting</a></li>
<li><a href="../en486764/index.html">Do-it-yourself Schema.org: customizing micro-layout without a programmer</a></li>
<li><a href="../en486766/index.html">How to transfer all transactions online in the archaic factoring market? Experience of Sberbank Factoring</a></li>
<li><a href="../en486772/index.html">Burn, but not burn - burn to shine</a></li>
<li><a href="../en486776/index.html">Code completion and type checking for boto3</a></li>
<li><a href="../en486778/index.html">SSO on microservice architecture. We use Keycloak. Part number 1</a></li>
<li><a href="../en486780/index.html">Frontend development in the company: what it is and how to make it effective</a></li>
<li><a href="../en486782/index.html">UI / UX - design. Trends and forecasts for 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>