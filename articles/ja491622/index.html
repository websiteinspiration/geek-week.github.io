<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©ğŸ½ ğŸšˆ Pythonã§é‡‘èå±æ©Ÿã‚’äºˆæ¸¬ã™ã‚‹ ğŸ° ğŸ–ï¸ ğŸ‘¨ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2020å¹´3æœˆ9æ—¥ç¾åœ¨ã€ç±³å›½å¸‚å ´ã¯æ€¥æ¿€ã«æ¸›å°‘ã—ã¦ãŠã‚Šã€2020å¹´2æœˆ20æ—¥ã®æ­´å²çš„ãªé«˜å€¤ã‹ã‚‰å§‹ã¾ã‚Šã€ç¾åœ¨ã¯ç´„-16ï¼…ã§ã™ã€‚ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹ã«ã‚ˆã‚‹å·®ã—è¿«ã£ãŸä¸æ³ã«ã¤ã„ã¦ã®è¦‹å‡ºã—ã§ã„ã£ã±ã„ã§ã—ãŸã€ãƒ­ã‚·ã‚¢ã¯Opec +å–å¼•ã‹ã‚‰æ’¤é€€ã—ã¾ã—ãŸã€ãã—ã¦ãã‚Œã¯åŸæ²¹ä¾¡æ ¼ï¼ˆ1æ—¥ã‚ãŸã‚Š-20ï¼…ï¼‰ã¨æ˜æ—¥ï¼ˆ2020...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pythonã§é‡‘èå±æ©Ÿã‚’äºˆæ¸¬ã™ã‚‹</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491622/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020å¹´3æœˆ9æ—¥ç¾åœ¨ã€ç±³å›½å¸‚å ´ã¯æ€¥æ¿€ã«æ¸›å°‘ã—ã¦ãŠã‚Šã€2020å¹´2æœˆ20æ—¥ã®æ­´å²çš„ãªé«˜å€¤ã‹ã‚‰å§‹ã¾ã‚Šã€ç¾åœ¨ã¯ç´„-16ï¼…ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹ã«ã‚ˆã‚‹å·®ã—è¿«ã£ãŸä¸æ³ã«ã¤ã„ã¦ã®è¦‹å‡ºã—ã§ã„ã£ã±ã„ã§ã—ãŸã€ãƒ­ã‚·ã‚¢ã¯Opec +å–å¼•ã‹ã‚‰æ’¤é€€ã—ã¾ã—ãŸã€ãã—ã¦ãã‚Œã¯åŸæ²¹ä¾¡æ ¼ï¼ˆ1æ—¥ã‚ãŸã‚Š-20ï¼…ï¼‰ã¨æ˜æ—¥ï¼ˆ2020å¹´3æœˆ10æ—¥ï¼‰ã«ãƒ’ãƒƒãƒˆã—ã¾ã—ãŸã€MICEXå¸‚å ´ã‚‚20ï¼…ä¸‹è½ã™ã‚‹ã¨äºˆæƒ³ã•ã‚Œã€è¥¿å´å¸‚å ´ã«ãŠã‘ã‚‹å½“ç¤¾ã®æ ªå¼ã®ç›¸å ´ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bi/7e/fx/bi7efxdyajb37dmvxce8kmq2zl8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸–ç•Œçš„ãªä¸æ³ã¯ç§ãŸã¡ã‚’å¾…ã£ã¦ã„ã¾ã™ã‹ï¼Ÿã“ã®è¨˜äº‹ã§ã¯ã€Pythonã‚’ä½¿ç”¨ã—ã¦æ™¯æ°—å¾Œé€€ã®å§‹ã¾ã‚Šã®ã‚·ã‚°ãƒŠãƒ«ã‚’äº‹å‰ã«ç¢ºèªã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è³ªå•ã«ç­”ãˆã‚‹ãŸã‚ã«ã€å‚µåˆ¸ã€æ ªå¼ã€ãŠã‚ˆã³ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã®åˆ©å›ã‚Šã‚’ä½¿ç”¨ã—ã¦ã¿ã¾ã™ã€‚ä¸–ç•Œåˆã®æœ€å¤§ã®æ ªå¼å¸‚å ´ã¨ã—ã¦ã€ç±³å›½ã®é‡‘èå¸‚å ´ã®éå»ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚å®Ÿéš›ã€ç±³å›½ã§æ™¯æ°—å¾Œé€€ãŒå§‹ã¾ã‚‹ã¨ã€ãã‚Œã¯ä¸–ç•Œä¸­ã§å§‹ã¾ã‚Šã¾ã™ï¼ˆ2008å¹´ã«èµ·ã“ã£ãŸã‚ˆã†ã«ï¼‰ã€‚ã¾ãŸã€ç±³å›½å¸‚å ´ã«ã¯æ•°åå¹´åˆ†ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã€ã‹ãªã‚Šã®æ­´å²çš„æœŸé–“ã«ã‚ãŸã£ã¦åˆ†æã§ãã‚‹ã®ã§ä¾¿åˆ©ã§ã™ã€‚</font><font style="vertical-align: inherit;">Fedã‚µã‚¤ãƒˆã‹ã‚‰ã€</font><i><font style="vertical-align: inherit;">yfinance</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦Yahoo Financeã‹ã‚‰å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><i><font style="vertical-align: inherit;">fredapi</font></i><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã€</font><i><font style="vertical-align: inherit;">pandas_datareader</font></i><font style="vertical-align: inherit;">ã‚’ä»‹ã—ãŸã•ã¾ã–ã¾ãªè²¡å‹™æƒ…å ±ã‚’</font><i><font style="vertical-align: inherit;">å«ã‚€</font></i><font style="vertical-align: inherit;"> Quandlã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‹ã‚‰ã®ç±³å›½</font><i><font style="vertical-align: inherit;">ç•™ä¿</font></i></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">FedãŠã‚ˆã³Quandlã®å ´åˆã€APIã‚­ãƒ¼ã‚’å—ã‘å–ã‚‹ã«ã¯ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆã“ã‚Œã¯ç„¡æ–™ã§ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç±³å›½ã®ã™ã¹ã¦ã®é‡‘èå±æ©Ÿã¯ã€ãƒãƒ£ãƒ¼ãƒˆã®ç°è‰²ã®é ˜åŸŸã«ç›´æ¥ãƒãƒ¼ã‚¯ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> fredapi <span class="hljs-keyword">import</span> Fred
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> pandas_datareader.data <span class="hljs-keyword">as</span> web
<span class="hljs-keyword">import</span> pandas_datareader <span class="hljs-keyword">as</span> pdr<font></font>
%matplotlib inline<font></font>
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date
<span class="hljs-keyword">import</span> yfinance
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<font></font>
<font></font>
api = <span class="hljs-string">'YOUR API HERE'</span>
os.environ[<span class="hljs-string">"QUANDL_API_KEY"</span>] = <span class="hljs-string">'YOUR API HERE'</span>
os.environ[<span class="hljs-string">"TIINGO_API_KEY"</span>] = <span class="hljs-string">'YOUR API HERE'</span><font></font>
<font></font>
fred = Fred(api_key=api)<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yahooã§ã®Sï¼†P500ã€FREDã§ã®å‚µåˆ¸åˆ©å›ã‚Šã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã€ãŠã‚ˆã³FREDã§ã®å‚µåˆ¸ã®ç´¯ç©åˆ©å›ã‚ŠæŒ‡æ•°ã®å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs">GSPC_h = yfinance.download(<span class="hljs-string">"^GSPC"</span>, start=<span class="hljs-string">"1962-01-01"</span>, end=<span class="hljs-string">"2020-03-09"</span>) <span class="hljs-comment">#SNP500</span>
T10YFF = fred.get_series(<span class="hljs-string">'T10YFF'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>) <span class="hljs-comment">#10YB-FFR</span>
T10Y2Y = fred.get_series(<span class="hljs-string">'T10Y2Y'</span>, observation_start=<span class="hljs-string">'1976-06-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>) <span class="hljs-comment">#10YB-2YB</span>
<span class="hljs-comment"># ICE BofA US Corp 10-15yr Total Return Index Value</span>
BAMLCC7A01015YTRIV = fred.get_series(<span class="hljs-string">'BAMLCC7A01015YTRIV'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>)
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã¯ã€ãƒªã‚¹ã‚¯ã®å¢—åŠ ã‚’æƒ³å®šã™ã‚‹ã“ã¨ã§æŠ•è³‡å®¶ãŒå—ã‘å–ã‚‹è¿½åŠ ã®åç›Šæ€§ã‚’åæ˜ ã™ã‚‹æŒ‡æ¨™ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚ŒãŒé‡‘èå¸‚å ´ã®ä»•çµ„ã¿ã§ã™ã€‚æŠ•è³‡åç›Šç‡ãŒé«˜ã„ã»ã©ã€ãƒªã‚¹ã‚¯ã‚‚é«˜ããªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã«ã¯ã€ãƒªã‚¹ã‚¯ã®ã‚ã‚‹è³‡ç”£ã®æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ã‹ã‚‰ãƒªã‚¹ã‚¯ãƒ•ãƒªãƒ¼ãƒªã‚¿ãƒ¼ãƒ³ç‡ã‚’å·®ã—å¼•ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç±³å›½å¸‚å ´ã®å ´åˆã€ãƒªã‚¹ã‚¯ã®ãªã„åç›Šç‡ã¯ç±³å›½é€£é‚¦æº–å‚™åˆ¶åº¦ç‡ï¼ˆå½“ç¤¾ã®ä¸»è¦é‡‘åˆ©ã®é¡ä¼¼ç‰©ï¼‰-FEDã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ªå¼ã¨å‚µåˆ¸ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã¯ç•°ãªã‚‹æ–¹æ³•ã§è€ƒæ…®ã•ã‚Œã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‚µåˆ¸ã®å ´åˆï¼šå‚µåˆ¸åˆ©å›ã‚Šï¼ˆåˆ©å›ã‚Šï¼‰-FEDã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ªå¼ã®å ´åˆï¼šåˆ©ç›Š/ä¾¡æ ¼ï¼ˆE / Pï¼‰ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰FEDã‚’å¼•ã„ãŸã‚‚ã®</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€‚åˆ©ç›Šã¯ãã®å¹´ã®ä¼šç¤¾ã®åˆ©ç›Šã§ã‚ã‚Šã€ä¾¡æ ¼ã¯ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãŒè¨ˆç®—ã•ã‚ŒãŸæ™‚ç‚¹ã®æ ªä¾¡ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é…å½“ã¯ä¼šç¤¾ãŒæ ªä¸»ã«æ”¯æ‰•ã†åˆ©ç›Šã®ä¸€éƒ¨ã«ã™ããªã„ãŸã‚ã€1æ ªã®åç›Šæ€§ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã«ã€é…å½“é‡‘ã‚’åç›Šæ€§ã¨ã—ã¦ã§ã¯ãªãã€ä¼šç¤¾ãŒå—ã‘å–ã£ãŸåˆ©ç›Šã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ ªå¼ã®è³¼å…¥ã‚’é€šã˜ã¦ä¼šç¤¾ã®æ‰€æœ‰è€…ã«ãªã‚‹ã“ã¨ã¯ã€å®Ÿéš›ã«ã¯ã€ç§ãŸã¡ã®æœ€çµ‚çš„ãªåå…¥ã¯ã€ä¼šç¤¾ã®æ¸…ç®—æ™‚ã«å®Œå…¨ã«æ ªä¸»ã«åˆ†é…ã•ã‚Œã‚‹åˆ©ç›Šã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sï¼†P500ï¼ˆSP500_EARNINGS_YIELD_MONTHï¼‰ã€ç„¡ãƒªã‚¹ã‚¯ãƒ¬ãƒ¼ãƒˆï¼ˆFEDãƒ•ã‚¡ãƒ³ãƒ‰ãƒ¬ãƒ¼ãƒˆï¼‰ã€ãŠã‚ˆã³å¹…åºƒã„å¸‚å ´ã®ç¤¾å‚µåˆ©å›ã‚Šï¼ˆãƒãƒ¼ãƒœãƒ³ãƒ‰ã‚¤ãƒ¼ãƒ«ãƒ‰ï¼‰ã®E / Pã‚’å–å¾—ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># E/P</span>
symbol = <span class="hljs-string">'MULTPL/SP500_EARNINGS_YIELD_MONTH'</span>
SP500_EARNINGS_YIELD_MONTH = web.DataReader(symbol, <span class="hljs-string">'quandl'</span>, <span class="hljs-string">'1962-01-01'</span>, <span class="hljs-string">'2020-03-09'</span>)
<span class="hljs-comment"># FED Funds Rate</span>
FEDFUNDS = fred.get_series(<span class="hljs-string">'FEDFUNDS'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>)
<span class="hljs-comment"># Baa Bonds Yield</span>
BAA = fred.get_series(<span class="hljs-string">'BAA'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã¯ã€åˆ©ç›Šã‹ã‚‰ãƒªã‚¹ã‚¯ãƒ•ãƒªãƒ¼ãƒ¬ãƒ¼ãƒˆã‚’å·®ã—å¼•ã„ã¦è¨ˆç®—ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#     </span>
risk_premium = pd.concat([SP500_EARNINGS_YIELD_MONTH, FEDFUNDS],axis=<span class="hljs-number">1</span>).fillna(method=<span class="hljs-string">'bfill'</span>)<font></font>
risk_premium[<span class="hljs-string">'premium'</span>] = risk_premium[<span class="hljs-string">'Value'</span>] - risk_premium[<span class="hljs-number">0</span>]<font></font>
<font></font>
<span class="hljs-comment">#     </span>
risk_premium_b = pd.concat([BAA, FEDFUNDS],axis=<span class="hljs-number">1</span>).fillna(method=<span class="hljs-string">'bfill'</span>)<font></font>
risk_premium_b.columns = [<span class="hljs-string">'BAA'</span>, <span class="hljs-string">'FEDFUNDS'</span>]<font></font>
risk_premium_b[<span class="hljs-string">'premium_b'</span>] = risk_premium_b[<span class="hljs-string">'BAA'</span>] - risk_premium_b[<span class="hljs-string">'FEDFUNDS'</span>]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã®ã¯åˆ¥ã«æ ªå¼ã‚„å‚µåˆ¸ã®ãŸã‚ã«ä½•ãŒèµ·ã“ã£ãŸã®ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ªå¼ã«ã¤ã„ã¦ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ©ãƒ•ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
<font></font>
line1, = ax.plot(risk_premium[<span class="hljs-string">'premium'</span>],linewidth=<span class="hljs-number">1</span>)<font></font>
line1.set_label(<span class="hljs-string">'risk_premium_stocks'</span>)<font></font>
<font></font>
line2, = ax.plot(SP500_EARNINGS_YIELD_MONTH,linewidth=<span class="hljs-number">1</span>)<font></font>
line2.set_label(<span class="hljs-string">'SP500_EARNINGS_YIELD_MONTH'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
<font></font>
par1 = ax.twinx()<font></font>
line3, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line3.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'upper left'</span>, bbox_to_anchor=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.88</span>))<font></font>
<font></font>
plt.xlim(left=date(<span class="hljs-number">1962</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/k2/fr/j_/k2frj_8irme_zhcwanphjqr3vem.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‚µåˆ¸ã®å ´åˆï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ©ãƒ•ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
<font></font>
line1, = ax.plot(risk_premium_b[<span class="hljs-string">'premium_b'</span>][date(<span class="hljs-number">1987</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>):],linewidth=<span class="hljs-number">1</span>, color=<span class="hljs-string">'k'</span>)<font></font>
line1.set_label(<span class="hljs-string">'risk_premium_bonds'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>, bbox_to_anchor=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.95</span>))<font></font>
<font></font>
par1 = ax.twinx()<font></font>
line2, = par1.plot(np.log(BAMLCC7A01015YTRIV),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'green'</span>)<font></font>
line2.set_label(<span class="hljs-string">'Log ICE BofA US Corp 10-15yr Total Return Index Value'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
plt.xlim(left=date(<span class="hljs-number">1987</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
<font></font>
ax.axhline(y=<span class="hljs-number">1.5</span>, linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'red'</span>, ls=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  BofA'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/o8/et/i1/o8eti1vu7hyaglz63-uhfdjuljk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã”è¦§ã®ã‚ˆã†ã«ã€å±æ©Ÿå‰ã®æœŸé–“ã¯ã€æ ªå¼ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãŒãƒã‚¤ãƒŠã‚¹ã§ã€å‚µåˆ¸ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãŒä½ä¸‹ã—ã¦ã„ã‚‹é ˜åŸŸã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ™‚ã«ã€å‚µåˆ¸ã«ã¤ã„ã¦ã¯ã€ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã®ä½ä¸‹ãŒå‚µåˆ¸å¸‚å ´ã®å±æ©Ÿã®å…†å€™ã§ã‚ã‚‹ã¨ã¯é™ã‚‰ãªã„ï¼ˆãƒœãƒ•ã‚©æŒ‡æ•°ã¯2008å¹´ã«ã®ã¿ä½ä¸‹ã—ãŸï¼‰ãŒã€æ ªå¼å¸‚å ´ã§ã®ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã®ä½ä¸‹ã¯ã»ã¨ã‚“ã©å¸¸ã«ï¼ˆ1980å¹´ä»£åˆé ­ã®å±æ©Ÿå¾Œã®æœŸé–“ã‚’é™¤ã„ã¦ï¼‰è² ã®ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãŒé•·æœŸé–“ä¿æŒã•ã‚ŒãŸï¼‰æ ªå¼ã®ä¾¡å€¤ã®æ¸›å°‘ã«ã¤ãªãŒã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è² ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã¯æ ªå¼ã«ã¨ã£ã¦ä½•ã‚’æ„å‘³ã—ã¾ã™ã‹ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ªå¼ã‚’è³¼å…¥ã™ã‚‹ã¨ã€å¸‚å ´ã§ã®ãƒªã‚¹ã‚¯ãƒ•ãƒªãƒ¼ãƒ¬ãƒ¼ãƒˆã‚’ä¸‹å›ã‚‹ãƒªã‚¿ãƒ¼ãƒ³ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚åŒæ™‚ã«ã€æ ªä¾¡ã®å¤‰å‹•ã‚„æ½œåœ¨çš„ãªæå¤±ã®ãƒªã‚¹ã‚¯ã«ã¤ã„ã¦å…¨è²¬ä»»ã‚’è² ã„ã¾ã™ã€‚ã“ã‚Œã¯æ¨™æº–çš„ãªçŠ¶æ³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠ•è³‡å®¶ã¯ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã‚‹ã“ã¨ã¯ãªã„ã“ã¨ã‚’ç†è§£ã—ã¦ã„ã¾ã™ã€‚ãã®çµæœã€å¸‚å ´ã¯æ ªå¼ã®ç¾åœ¨ã®å€¤ãŒé«˜ã™ãã€è²©å£²ãŒå§‹ã¾ã£ã¦ã„ã‚‹ã“ã¨ã«æ°—ä»˜ãã¾ã—ãŸã€‚å¹…åºƒã„æŠ•è³‡å®¶ï¼ˆæ©Ÿé–¢æŠ•è³‡å®¶ã§ã¯ãªãæ™®é€šã®äººã€…ï¼‰ãŒãƒ‘ãƒ‹ãƒƒã‚¯ã«é™¥ã‚Šã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚’å£²å´ã—ã¦ç§‹ã‚’æ‚ªåŒ–ã•ã›ãŸå¾Œã€ä¸‹è½ã¯æ¿€åŒ–ã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€å¸‚å ´ã®åå¿œã¯é€Ÿãã¦å¼·ã„ã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¸‚å ´ã®ä¸‹è½ãŒä»¥å‰ã®ãƒ¬ãƒ™ãƒ«ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã«åŠã°ãªã„ãŒã€å¸¸ã«ã¯ã‚‹ã‹ã«å¼·ãç™ºç”Ÿã™ã‚‹ã“ã¨ã¯æ³¨ç›®ã«å€¤ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãŒå¤§å¹…ã«å¢—åŠ ã—ã€æŠ•è³‡å®¶ã«ã¨ã£ã¦ã®è¨¼åˆ¸ã®é­…åŠ›ãŒå†ã³é«˜ã¾ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€1ã¤ã®ãƒãƒ£ãƒ¼ãƒˆã§æ ªå¼ã¨å‚µåˆ¸ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚’è¦‹ã‚‹ã¨ã€å‚µåˆ¸ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã¯ä¼çµ±çš„ã«æ ªå¼ã®ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚ˆã‚Šã‚‚é«˜ããªã£ã¦ã„ã¾ã™ãŒã€éå»5å¹´é–“ã§ãã‚Œã‚‰ã¯åŒæœŸã—ã¦ãŠã‚Šã€ä¸¡æ–¹ãŒå¾ã€…ã«ã‚¼ãƒ­ã«ãªã‚‹å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ©ãƒ•ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
<font></font>
line1, = ax.plot(risk_premium[<span class="hljs-string">'premium'</span>],linewidth=<span class="hljs-number">1</span>)<font></font>
line1.set_label(<span class="hljs-string">'risk_premium_stocks'</span>)<font></font>
<font></font>
par1 = ax.twinx()<font></font>
line3, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line3.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'upper left'</span>, bbox_to_anchor=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.88</span>))<font></font>
<font></font>
line2, = ax.plot(risk_premium_b[<span class="hljs-string">'premium_b'</span>],linewidth=<span class="hljs-number">1</span>, color=<span class="hljs-string">'k'</span>)<font></font>
line2.set_label(<span class="hljs-string">'risk_premium_bonds'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
plt.xlim(left=date(<span class="hljs-number">1968</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/2i/xb/xe/2ixbxehawqshzbeznt-cseobsom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2020å¹´3æœˆ9æ—¥ã®æ™‚ç‚¹ã§ã€ç±³å›½ã®æ ªå¼å¸‚å ´ã¯æ€¥æ¿€ã‹ã¤å¤§å¹…ã«ä¸‹è½ã—ã¾ã—ãŸãŒã€æ ªä¾¡ã®ãƒªã‚¿ãƒ¼ãƒ³ã¯ä¾ç„¶ã¨ã—ã¦ãƒã‚¬ãƒ†ã‚£ãƒ–ã‚¾ãƒ¼ãƒ³ã‹ã‚‰ã‹ã‘é›¢ã‚Œã¦ãŠã‚Šã€æœ‰æœ›ãªå…†å€™ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è²¡å‹™çœè¨¼åˆ¸ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å±æ©Ÿå‰ã®å¸‚å ´çŠ¶æ³ã®ä»£æ›¿æŒ‡æ¨™ã¯ã€é•·æœŸå›½å‚µã¨çŸ­æœŸå›½å‚µã®åˆ©å›ã‚Šã®é•ã„ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€ã‚‚ãƒã‚¤ã‚ºãŒå°‘ãªãã€æœ€ã‚‚å®Ÿç”¨çš„ãªã®ã¯ã€10å¹´å›½å‚µã¨2å¹´å›½å‚µã®åˆ©å›ã‚Šã®é•ã„ã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ©ãƒ•ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
par1 = ax.twinx()<font></font>
line, = ax.plot(pd.DataFrame(T10Y2Y),linewidth=<span class="hljs-number">0.4</span>)<font></font>
line.set_label(<span class="hljs-string">'10YB-2YB'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.1</span>))<font></font>
<font></font>
line1, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line1.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.18</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1976</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
plt.ylim(bottom=<span class="hljs-number">4</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2019</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2007</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2000</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1998</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1989</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.8</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1981</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1978</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/na/vx/ph/navxphciegx_cu6-jy23x3djvnw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æŒ‡æ¨™ã¯ã€æ­´å²çš„ãªè¦³ç‚¹ã‹ã‚‰æœ€ã‚‚çœŸå®Ÿã§ã‚ã‚Šã€éå»7å›ã®é‡‘èå±æ©Ÿã‚’äºˆæ¸¬ã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®å ´åˆã®å‚µåˆ¸åˆ©å›ã‚Šã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã¯æŠ•è³‡å®¶ã®æ°—åˆ†ã‚’åæ˜ ã—ã¦ã„ã¾ã™-çµŒæ¸ˆãŒã™ãã«æ‚ªåŒ–ã™ã‚‹ã¨ä¿¡ã˜ã¦ã„ã‚‹å ´åˆã€å½¼ã‚‰ã¯çŸ­æœŸå‚µåˆ¸ï¼ˆæº€æœŸ2å¹´ï¼‰ã‹ã‚‰é•·æœŸå‚µåˆ¸ï¼ˆæº€æœŸ10å¹´ï¼‰ã«å›ºå®šåˆ©å›ã‚Šã§é€é‡‘ã—å§‹ã‚ã¾ã™æœ€ã‚‚ä¿¡é ¼ã§ãã‚‹ç™ºè¡Œè€…ã¯ç±³å›½è²¡å‹™çœã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›¸å½“é‡ã®ç¾é‡‘ã§å‚µåˆ¸ã‚’è³¼å…¥ã™ã‚‹ã¨ã€å‚µåˆ¸ã®ã‚³ã‚¹ãƒˆãŒå¢—åŠ ã™ã‚‹ãŸã‚ã€é•·æœŸå‚µã®è³¼å…¥ã¯åˆ©å›ã‚Šã«å½±éŸ¿ã—ã¾ã™ã€‚ã‚¯ãƒ¼ãƒãƒ³ãŒå›ºå®šå€¤ã®å ´åˆã€å‚µåˆ¸æœ¬ä½“ã®è©•ä¾¡ã¯åˆ©å›ã‚Šã®ä½ä¸‹ã«ã¤ãªãŒã‚Šã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®å ´åˆã«è²©å£²ã•ã‚Œã‚‹çŸ­æœŸå‚µã«ã¤ã„ã¦ã¯ã€çŠ¶æ³ã¯é€†ã§ã™-æœ¬ä½“ã¯ãã‚Œãã‚Œå›ºå®šã‚¯ãƒ¼ãƒãƒ³ã§å®‰ããªã‚Šå§‹ã‚ã€åˆ©å›ã‚Šã¯æˆé•·ã—å§‹ã‚ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã ã—ã€FREDã¯ã“ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã«é–¢ã™ã‚‹1976å¹´ä»¥é™ã®æƒ…å ±ã‚’æä¾›ã—ã¦ã„ã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦ã€ä¾‹è¨¼ã®ç›®çš„ã§ã€10å¹´å›½å‚µã®åˆ©å›ã‚Šã‹ã‚‰FEDãƒ¬ãƒ¼ãƒˆã‚’å·®ã—å¼•ã„ã¦ï¼ˆçŸ­æœŸ2å¹´å‚µã®ä»£ã‚ã‚Šã«ï¼‰ã€1962å¹´ä»¥é™ã«ä½•ãŒèµ·ã“ã£ã¦ã•ã‚‰ã«2ã¤ã®å±æ©Ÿã‚’ã‚«ãƒãƒ¼ã—ãŸã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚ ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ©ãƒ•ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
par1 = ax.twinx()<font></font>
line, = ax.plot(pd.DataFrame(T10YFF),linewidth=<span class="hljs-number">0.4</span>)<font></font>
line.set_label(<span class="hljs-string">'10-Year Treasury Constant Maturity Minus Federal Funds Rate'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.1</span>))<font></font>
<font></font>
line1, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line1.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.18</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1962</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
plt.ylim(bottom=<span class="hljs-number">4</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2019</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.7</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2007</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.7</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2000</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.7</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1998</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1989</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.4</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1973</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1981</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.3</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1979</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1969</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1967</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/an/z3/az/anz3azvwzxftytsp9lu0eyp8lkk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã®ä¸€èˆ¬çš„ãªé¨’ãŒã—ã•ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšï¼ˆ10å¹´-2å¹´ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã¨æ¯”è¼ƒã—ã¦ï¼‰ã€73ã¨69ã®å±æ©Ÿã¯ã€ãƒã‚¬ãƒ†ã‚£ãƒ–ã‚¾ãƒ¼ãƒ³ã¸ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚’æ¸›ã‚‰ã™ã“ã¨ã«ã‚ˆã£ã¦ã‚‚å®Ÿç¾ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾æ™‚ç‚¹ã§ã¯ã©ã†ã§ã™ã‹ï¼Ÿ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç‰©äº‹ã¯ãã‚Œã»ã©ã§ã¯ã‚ã‚Šã¾ã›ã‚“-æŒ‡æ¨™ã¯ã™ã§ã«2019å¹´ã«ãƒã‚¤ãƒŠã‚¹ã‚¾ãƒ¼ãƒ³ã‚’ç¤ºã—ã¾ã—ãŸã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ©Ÿé–¢æŠ•è³‡å®¶ã¯è¿‘ã„å°†æ¥ã€æ·±åˆ»ãªã‚·ãƒ§ãƒƒã‚¯ãŒå¾…ã¡å—ã‘ã¦ã„ã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ãŠã‚Šã€ãã®ãŸã‚é•·æœŸã®å‚µåˆ¸ã«ã‚·ãƒ•ãƒˆã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å±æ©Ÿã®å‰ã«ã©ã‚Œã ã‘æ®‹ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ãƒãƒ£ãƒ¼ãƒˆã‹ã‚‰ã‚ã‹ã‚‹ã‚ˆã†ã«ã€é€†åˆ©å›ã‚Šã¯1ã€œ2å¹´ã®å±æ©Ÿã‚’äºˆæƒ³ã—ã¦ã„ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2019å¹´æœ«ã«é€†è»¢ãŒèµ·ã“ã‚Šã€COVID-19ã‚¦ã‚¤ãƒ«ã‚¹ã«ã‚ˆã‚‹å°†æ¥ã®ä¸æ³ã®äºˆæƒ³ã«ã‚ˆã‚Šç±³å›½å¸‚å ´ã¯ã™ã§ã«ä¸‹è½ã—å§‹ã‚ã¦ã„ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€å±æ©Ÿã¯ä»Šã¾ã•ã«è¿«ã£ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2020å¹´3æœˆ9æ—¥ã®æ™‚ç‚¹ã§ã€10å¹´ç‰©ç±³å›½å‚µã®åˆ©å›ã‚Šã¯0.318ï¼…ã«ä¸‹ãŒã‚Šã€ã“ã‚Œã¾ã§ã§æœ€ã‚‚ä½ã„å€¤ã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½•ã‹å¤§ããªã‚‚ã®ãŒå¾…ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã€ã™ã§ã«å§‹ã¾ã£ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨å€¤T10YFFï¼š-0.17 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾åœ¨å€¤T10Y2Yï¼š0.25</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éå»ã®ä¾¡æ ¼ã¯å±æ©Ÿã‚’äºˆæ¸¬ã—ãªã„</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®å•é¡Œã«ãŠã‘ã‚‹ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã®ç„¡åŠ›ã•ã®ä¾‹ã¨ã—ã¦ã€RSIæŒ‡æ¨™ã‚’å–ã‚Šä¸Šã’ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSI-ç†è«–ä¸Šã®ç›¸å¯¾å¼·åº¦æŒ‡æ•°ã¯ã€ã€Œè²·ã‚ã‚Œéãã€ãŠã‚ˆã³ã€Œå£²ã‚‰ã‚Œéãã€ã®å¸‚å ´ã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è²·ã‚ã‚Œéãå¸‚å ´-ã“ã‚Œã¯ä¾¡æ ¼ãŒèª¿æ•´ã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„çŠ¶æ…‹ã€ã¤ã¾ã‚Šæ ªå¼å¸‚å ´ã®å±æ©Ÿã§ã™ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ãƒ‡ã‚£ã‚±ãƒ¼ã‚¿ã®èª¬æ˜ãŒè¨˜è¼‰ã•ã‚ŒãŸWikiã¸ã®ãƒªãƒ³ã‚¯</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pythonã‚’ä½¿ç”¨ã—ã¦ã“ã®ã‚¤ãƒ³ãƒ‡ã‚£ã‚±ãƒ¼ã‚¿ã‚’è¨ˆç®—ã§ãã¾ã™ã€‚è¨ˆç®—ã«ã¯ã€æœŸé–“-244ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆ1æš¦å¹´ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs">SP500_returns = GSPC_h[<span class="hljs-string">'Close'</span>].pct_change()<font></font>
delta = GSPC_h[<span class="hljs-string">'Close'</span>].diff()<font></font>
window_length = <span class="hljs-number">500</span><font></font>
<font></font>
<span class="hljs-comment"># Make the positive gains (up) and negative gains (down) Series</span><font></font>
up, down = delta.copy(), delta.copy()<font></font>
up[up &lt; <span class="hljs-number">0</span>] = <span class="hljs-number">0</span>
down[down &gt; <span class="hljs-number">0</span>] = <span class="hljs-number">0</span><font></font>
<font></font>
<span class="hljs-comment"># Calculate the EWMA</span><font></font>
roll_up1 = up.ewm(span=window_length).mean()<font></font>
roll_down1 = down.abs().ewm(span=window_length).mean()<font></font>
<font></font>
<span class="hljs-comment"># Calculate the RSI based on EWMA</span><font></font>
RS1 = roll_up1 / roll_down1<font></font>
RSI1 = <span class="hljs-number">100.0</span> - (<span class="hljs-number">100.0</span> / (<span class="hljs-number">1.0</span> + RS1))
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚°ãƒ©ãƒ•ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Compare graphically</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">20</span>,<span class="hljs-number">4</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1968</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
line, = ax.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
<font></font>
line.set_label(<span class="hljs-string">'SNP500'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
<font></font>
fig1, ax1 = plt.subplots(figsize=(<span class="hljs-number">20</span>,<span class="hljs-number">4</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1968</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
line1, = ax1.plot(RSI1[<span class="hljs-number">80</span>:],linewidth=<span class="hljs-number">1</span>)<font></font>
<font></font>
line1.set_label(<span class="hljs-string">'RSI (1Y)'</span>)<font></font>
ax1.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axhline(y=<span class="hljs-number">57</span>, linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax1.axhline(y=<span class="hljs-number">45</span>, linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax1.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax1.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax1.set_ylabel(<span class="hljs-string">' RSI'</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/en/zh/v_/enzhv_y7bwccnqp9qib3lb6gqls.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSIãƒãƒ£ãƒ¼ãƒˆã«ã¯ä½•ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã‹ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œè²·ã‚ã‚Œã™ãã€ã®å¤šãã®ã‚¾ãƒ¼ãƒ³ã€‚ã“ã‚Œã¯å¸‚å ´ãŒå¤šã™ãã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€èª¿æ•´ã™ã‚‹æ™‚æœŸãŒæ¥ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ãã‚Œã¯ä¸Šæ˜‡ã—ç¶šã‘ã¾ã—ãŸï¼ˆãŸã¨ãˆã°ã€1995å¹´ä»¥é™ã®é•·ã„æœŸé–“ã€æŒ‡æ¨™ã¯ã€Œè²·ã‚ã‚Œã™ãã€ã‚’ç¤ºã—ã¦ã„ã¾ã™ãŒã€2001å¹´ã®å±æ©Ÿä»¥å‰ã¯ã€é€šå¸¸ã®ã‚¾ãƒ¼ãƒ³ã«æˆ»ã‚Šã€ã€Œè²·ã‚ã‚Œã™ãã€ã«ã¤ã„ã¦ã¯ä¿¡å·ã‚’é€ã£ã¦ã„ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¨€ã„æ›ãˆã‚Œã°ã€å±æ©Ÿã‚’äºˆæ¸¬ã™ã‚‹ãŸã‚ã«ç™ºæŒ¯å™¨ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯éå¸¸ã«ç‰©è­°ã‚’é†¸ã—ã¦ã„ã‚‹æ¼”ç¿’ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å±æ©Ÿã®å‰ã¯ã€å¸‚å ´ã¯ã‚¹ãƒ ãƒ¼ã‚ºã«æˆé•·ã—ã¾ã™ã€‚ä¸‹è½ã¨ã¯ç•°ãªã‚Šã€ä¸Šå‘ãã®ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã¯é«˜ãã‚ã‚Šã¾ã›ã‚“ã€‚å¸¸ã«é‹­ãã¦è¿…é€Ÿã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€ç™ºæŒ¯å™¨ã®ä¸‹ã®å¢ƒç•Œã®ã™ãè¿‘ãã«ã‚ã‚Šã¾ã™ã€‚ãã®äº¤å·®ç‚¹ã¯ã€ã»ã¨ã‚“ã©ã®å ´åˆã€å±æ©ŸãŒæ¥ã¦ã€è½ä¸‹ã®åº•ãŒè¿‘ããªã£ãŸã¨ãã«æ­£ç¢ºã«ç¤ºã•ã‚Œã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã‚·ã‚°ãƒŠãƒ«ã‚’è³¼å…¥ã—ã¾ã™ã‹ï¼Ÿ</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èª¿æŸ»çµæœ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¾æ™‚ç‚¹ã§ã¯ã€çŠ¶æ³ã¯æ†‚æ…®ã™ã¹ãã‚‚ã®ã«è¦‹ãˆã¾ã™ã€‚æ™¯æ°—å¾Œé€€ã®å¯èƒ½æ€§ã‚’ç¤ºã™ç›´æ¥çš„ãªæŒ‡æ¨™ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚ŒãŸã‚‚ã®ã«åŠ ãˆã¦ã€é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°ã‚‚ã‚ã‚Šã¾ã™ï¼ˆçµŒæ¸ˆå±æ©Ÿï¼ˆé‡‘èå±æ©Ÿã§ã¯ãªã„ï¼ï¼‰ã®å±æ©Ÿã‚’ãƒªãƒ¼ãƒ‰ã—ã¦ã„ã¾ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ãƒã‚¯ãƒ­çµŒæ¸ˆçµ±è¨ˆã‚’è©³ã—ãèª¿ã¹ã¦ã€å›½éš›åæ”¯ã‚„GDPãªã©ã‚’åˆ†æã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€æ©Ÿé–¢æŠ•è³‡å®¶ã¯ã™ã§ã«ã“ã‚Œã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ãã®åå¿œã¯ã€é•·æœŸå‚µã¨çŸ­æœŸå‚µã®åˆ©å›ã‚Šã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã«åæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">é‡‘èæŠ•è³‡ãŒãªã„å ´åˆã¯ã€ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦ã‚·ãƒ§ãƒ¼ã‚’è¦–è´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã‚‚ã—ã‚ã‚‹ãªã‚‰ã°-ã‚ãªãŸã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã®å¯èƒ½ãªãƒ˜ãƒƒã‚¸ã«ã¤ã„ã¦è€ƒãˆã‚‹ã‹ã€ã‚ˆã‚Šè‰¯ã„æ™‚ã¾ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«è¡Œããªã•ã„ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja491612/index.html">Sberbankã®å„ªå…ˆæ ªã¨æ™®é€šæ ªã®ä¾‹ã‚’ä½¿ç”¨ã—ãŸPythonã§ã®2ã¤ã®æ ªã®ç›¸å ´ã®ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ã®æ¯”è¼ƒ</a></li>
<li><a href="../ja491614/index.html">MasterhostãŒé‹å‘½ä»˜ã‘ã‚‰ã‚ŒãŸç†ç”±ï¼šå†…éƒ¨ã®â€‹â€‹æ§˜å­</a></li>
<li><a href="../ja491616/index.html">PCã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ä»‹ã—ã¦Arduinoã‚’ç®¡ç†ã™ã‚‹-åˆå¿ƒè€…å‘ã‘ã®ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹</a></li>
<li><a href="../ja491618/index.html">ãªãœã‚¨ã‚¹ãƒ‹ãƒƒã‚¯è¨€èªã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¯çµ¶æ»…ã—ã€ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ãã‚Œã‚‰ã‚’æ•‘ã†ã®ã«ã©ã®ã‚ˆã†ã«å½¹ç«‹ã¤ã®ã‹</a></li>
<li><a href="../ja491620/index.html">ã‚µã‚¤ãƒ—ãƒ¬ã‚¹ãŒã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆå¿ƒè€…ã«ã¨ã£ã¦å„ªã‚Œã¦ã„ã‚‹ç†ç”±ã¯ä½•ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja491624/index.html">Unity Universal Render Pipelineã§ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³åŠ¹æœã‚’ä½œæˆã™ã‚‹</a></li>
<li><a href="../ja491628/index.html">è‰¯ã„ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ã®ä¾‹ã¨ã—ã¦ã®Spelunky</a></li>
<li><a href="../ja491630/index.html">Firefoxãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µã‚¢ãƒ—ãƒªï¼ˆWebExtensionsï¼‰</a></li>
<li><a href="../ja491632/index.html">ãƒ‡ã‚¸ã‚¿ãƒ«ä¸æ­»-åŒæœŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ</a></li>
<li><a href="../ja491634/index.html">Xbox 360ã®ä¿è­·ã¨ãƒãƒƒã‚­ãƒ³ã‚°ï¼ˆãƒ‘ãƒ¼ãƒˆ1ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>