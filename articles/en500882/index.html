<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äç‚öïÔ∏è üë∞üèª üë• As I wrote the Japanese crossword puzzle in 4 hours üöù üçû üèÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I lazily look through the list of courses held by schoolchildren recently laid out by colleagues from Sirius ... So, what is this? ‚ÄúSearch for combina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>As I wrote the Japanese crossword puzzle in 4 hours</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500882/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I lazily look through the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">list of courses held by schoolchildren recently laid out by colleagues from Sirius</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... So, what is this? ‚ÄúSearch for combinatorial objects using SAT-solvers‚Äù? "We made a sudoku solver, Japanese crosswords and more?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The thought pops up that the exhaustive NP-problems are reducible to one another, and in particular, are reducible to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">search for the feasibility of a Boolean formula</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . One of the authors of Habr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expressed</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> this idea </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">here</font></a><font style="vertical-align: inherit;"> , and frankly, for me it is like magic. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, as a person who has completed a course in discrete mathematics and the complexity of algorithms, I theoretically know that tasks are reducible to one another. But it‚Äôs usually difficult to do this, and I‚Äôd better take my word for the professors and other smart people.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But then it is offered to ... SCHOOLCHILDREN! Inside, the </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awl began to</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> stir </font><s><font style="vertical-align: inherit;">in p ...</font></s><font style="vertical-align: inherit;"> creativity and said: ‚ÄúWell, it‚Äôs probably not difficult to fasten it down, once the students are offered. Can't I figure it out ?? Look, they promise that they will use the Python library, but I generally know the python ... ‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the time was about 9 pm, which somewhat dulled my critical look at the complexity of the problem ... (actually, further chronicles of 4-hour programming)</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21:02</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The first stage of the quest - I'm trying to install the library in Python. From experience with neural networks, I already know that, in fact, code sometimes takes less time than configuring packets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using the classic </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pip install pycosat is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> not installed, it produces an error in the spirit of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Visual C ++ 14.0 is required</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We climb to look for the source of the problem, we get to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stackoverflow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where we find a small link to the required </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visual C ++ 2015 Build Tools</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , apparently including the C ++ compiler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Download, trying to install ... wow, it requires 4 GB! I actually only need a compiler, but oh well.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
While this thing is being downloaded and installed, we follow the links in the program posted from Sirius ... Yes, not a lot - examples of Python projects, and a list of possible tasks for the course. No presentations, no videos to quickly understand how to work with the library. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Okay, let's start by parsing the examples. We go to queens_pycosat.py ... Wow, along the way this is the solution to the familiar problem of placing queens on a chessboard (the task is to arrange 8 queens so that they do not beat each other). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21: 10-21: 30 We</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> understand and try to start. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The general logic begins to be traced:</font></font><br>
<blockquote>SAT-      () (1, 2, 3),(-1, 2  ..),     (True/False).<br>
<br>
,       ,     . <br>
<br>
           ( ,   ); , , 8x8 = 64  ,     .<br>
<br>
     (1  2  3‚Ä¶  8) ‚Äî     1    .       ‚Äî [1,2,3...8]<br>
    ‚Äî (9‚Ä¶ 16)  ..<br>
<br>
  ‚Äî        1 !<br>
     [ 1   2] (    ‚Äî     ).       [-1,-2],[-1,-3]   . <br>
<br>
     ,   ,  . ,    .<br>
<br>
         (  ) ‚Äî (1  2‚Ä¶ 8)  ( 1   2)  (...).     ,  ‚Äî .<br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yes, I wasn‚Äôt so smart right away, now that I‚Äôve figured it out ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, we copy the teaching code to ourselves. To make sure that we understand something, turn off the check for diagonals - then the task turns into a task about rooks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We start, we receive: </font><font style="vertical-align: inherit;">
It works! </font><b><font style="vertical-align: inherit;">21:35</font></b><font style="vertical-align: inherit;"> Having got a little acquainted with the </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">library documentation,</font></a><font style="vertical-align: inherit;"> we find out that there are challenges for finding one solution or all solutions. </font><font style="vertical-align: inherit;">
Tell me, my dear friend, how many rook arrangements are there on an 8x8 board? Will you find everything? </font><font style="vertical-align: inherit;">
The machine thought for a while, and I began to google the factorial table. </font><font style="vertical-align: inherit;">
A minute later, the solver replied - "40320 solutions were found." Check - really 8!, Everything is correct.</font></font><br>
<br>
<code>| | | | | | | |x|<br>
| | | | | | |x| |<br>
| | | | | |x| | |<br>
| | | | |x| | | |<br>
| | | |x| | | | |<br>
| | |x| | | | | |<br>
| |x| | | | | | |<br>
|x| | | | | | | |</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I removed the condition that the rooks do not hit each other vertically ... but how much will it be now? </font><font style="vertical-align: inherit;">Must be 8 ^ 8 = 16777216. </font><font style="vertical-align: inherit;">Then it dawned on me that he would take a long time to count - we interrupt the process. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also found a quick way to derive 4 solutions without calculating everything - from everything in the same library. </font><font style="vertical-align: inherit;">This is done - we find a solution, after which we add it to the exceptions of the Boolean formula ...</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to deduce several solutions in python</font></font></b>
                        <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">for</span> cnter <span class="hljs-keyword">in</span> range(<span class="hljs-number">4</span>):<font></font>
  sol = pycosat.solve(clauses)<font></font>
  <span class="hljs-keyword">if</span> isinstance(sol, list):<font></font>
    print(sol)<font></font>
    clauses.append([-x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> sol]) <span class="hljs-comment">#   -      </span>
  <span class="hljs-keyword">else</span>: <span class="hljs-comment">#    - </span>
    <span class="hljs-keyword">return</span>
<span class="hljs-comment">#     ,    ,   .</span>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, we get a few more solutions to the ‚Äúrook problem‚Äù: </font><b><font style="vertical-align: inherit;">21:45</font></b><font style="vertical-align: inherit;"> 
I: In general, everything is clear, if anything, now I can fasten it. I‚Äôm going to read a book and spa ... </font><font style="vertical-align: inherit;">
CREATIVE START: Well, you understand how everything works. And let's write a simple little crossword puzzle of Japanese crosswords! Take the simplest case - on each row and column there will be no more than one digit (and, accordingly, one block). You simply search through the possible options for the row / column, it‚Äôs quick here, and then load it into the solver. Let's do it, huh? </font><font style="vertical-align: inherit;">
Me: ( </font><i><font style="vertical-align: inherit;">without feeling an ambush</font></i><font style="vertical-align: inherit;"> ) Well, come on ... it seems the truth is not for long ... </font><font style="vertical-align: inherit;">
For simplicity, we only take NxN square crosswords - at the same time, you can take the output code ready and think where the horizontal and vertical are not needed ...</font></font><br>
<br>
<code>| | | | | | | |x|<br>
| | | | | | |x| |<br>
| | | | | |x| | |<br>
| | | | |x| | | |<br>
| | | |x| | | | |<br>
| |x| | | | | | |<br>
| | |x| | | | | |<br>
|x| | | | | | | |</code><br>
<br>
<b><font style="vertical-align: inherit;"></font></b> <br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22:10</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It doesn‚Äôt work: (( </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We try for the 3x3 crossword puzzle, in the 1-0-1 format (so far only blocks are horizontal, we don‚Äôt take verticals into account). It gives out all empty cells, infection, doesn‚Äôt even take into account the filled blocks ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Okay, in detail We delve into the format of data transfer to the solver, and then something, to put it mildly, unexpected is revealed ...</font></font><br>
<br>
<blockquote>,    ¬´-¬ª   ? <br>
<br>
  /            /,     ‚Äî  .      ,    . <br>
<br>
  [1]  3     ,  :<br>
[X__],[_X_],[__X]<br>
,   ,<br>
[1,-2,-3],[-1,2,-3],[-1,-2,3]<br>
<br>
   ,     ‚Ä¶<br>
 :<br>
[1  -2  -3]  [-1, 2...]  [...]<br>
<br>
 ,  .       ,  .      ‚Äî ,   ! <br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ambush. Actually, there are two options - either to come up with the conditions for a crossword puzzle in KNF, or to come up with how to convert DNF to KNF (well, someone should have thought about this, especially since both are Boolean formulas!) </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22:50 I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> finished the snack. I did not think of how to make conditions for KNF (later I found that </font><font style="vertical-align: inherit;">they were described </font><font style="vertical-align: inherit;">in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but it was a long time to program them, and, frankly, unsportsmanlike). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So we are looking for a converter of DNF to CNF. Formal descriptions of transformations in the academic style are scattered on the Internet ... why do I need them? I‚Äôm definitely not going to stick into them now, I would solve the problem. So, we see the only (!) Python library with the appropriate name and functions. Now we will connect ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23:10</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It works funny - it makes additional variables, and through them it brings DNF to CNF. </font><font style="vertical-align: inherit;">Apparently, honestly making KNF is quite difficult ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, it also does not work! </font><font style="vertical-align: inherit;">What's the matter?</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We submit the test input of DNF: lstall = [[1,2,3]]. </font><font style="vertical-align: inherit;">That is, we expect that only [1,2,3] (corresponds to the full line [XXX]) will be a valid solution. The </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
library gives KNF: cnf = [[-1, -2, -3, 4], [1 , -4], [2, -4], [3, -4]] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is not clear, but very interesting. </font><font style="vertical-align: inherit;">Well, let's say I believe you ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We ask pycosat to find all the solutions for cnf: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[1, 2, 3, 4] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[1, 2, -3, -4] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[1, -2, -3, -4] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[1 , -2, 3, -4] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[-1, -2, -3, -4] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[-1, -2, 3, -4] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[-1, 2, -3, -4] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[-1, 2, 3, -4] </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instead of the expected one, there are eight of them! </font><font style="vertical-align: inherit;">What to do?</font></font><br>
<br>
   ,      ,    4   True.         ?<br>
<br>
    : cnf2 = [[-1, -2, -3, 4], [1, -4], [2, -4], [3, -4], [4]]<br>
 pycosat     cnf2:<br>
  1: [1, 2, 3, 4]<br>
<br>
, ,  !    , ,   .<br>
    ‚Äî  !<br>
</blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
23:10 She decides! Here is a 1-3-1 crossword vertically and horizontally: </font><font style="vertical-align: inherit;">
Here is a double solution of a 1-0-1 crossword vertically and horizontally: </font><font style="vertical-align: inherit;">
Me: So, everything works for me, I'm done. Wow, it's already 11 p.m. Spa ... </font><font style="vertical-align: inherit;">
CREATIVE START: Do you understand that you have very little left to solve any Japanese crosswords? It‚Äôs only necessary to write one recursive procedure, which will produce all variants of the string, not for one block, but for N ... </font><font style="vertical-align: inherit;">
Me: Well ... it seems to be easy, yes ... </font><b><font style="vertical-align: inherit;">00:00</font></b><font style="vertical-align: inherit;"> At midnight, the head </font><s><font style="vertical-align: inherit;">tupit</font></s><font style="vertical-align: inherit;"> is cooking not so well, but I continue to debug recursion. </font><font style="vertical-align: inherit;">
Terms of the Japanese crossword - between the blocks there must be at least one space, but there may be more than one.</font></font><br>
<br>
<code>| |x| |<br>
|x|x|x|<br>
| |x| |</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>1<br>
| | |x|<br>
| | | |<br>
|x| | |<br>
2<br>
|x| | |<br>
| | | |<br>
| | |x|</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><s><font style="vertical-align: inherit;"></font></s><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So under the condition [1,2,1] for 6 cells, the program should generate the only option </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[X_XX_X], </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
and for 7 cells there are already 4 options: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[X_XX_X_], </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[X_XX__X], </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[X__XX_X], </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[_X_XX_X], </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All the time in I‚Äôm mistakenly calculating the location of cells by one, and to hell with it - it‚Äôs easier to start and fix than to think ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">00:30</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Does it work? </font><font style="vertical-align: inherit;">
What else to check? </font><font style="vertical-align: inherit;">
So, where to get a machine-oriented description of crosswords ... On this site, no, on this - no ... Okay, to hell with it, I will interrupt the pens. </font><b><font style="vertical-align: inherit;">00:50</font></b><font style="vertical-align: inherit;"> It really works O_O </font><font style="vertical-align: inherit;">
Here's a crab with </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">jcrosswords.ru/crossword/65</font></a></font><br>
<br>
<code>3x3<br>
rows = [[1,1],[0],[1,1]]<br>
cols = [[1,1],[0],[1,1]]<br>
<br>
 :<br>
|X| |X|<br>
| | | |<br>
|X| |X|<br>
<br>
4x4<br>
rows = [[1,1],[0],[0],[1,1]]<br>
cols = [[1],[1],[1],[1]]<br>
<br>
 :<br>
1<br>
| |X| |X|<br>
| | | | |<br>
| | | | |<br>
|X| |X| |<br>
2<br>
|X| |X| |<br>
| | | | |<br>
| | | | |<br>
| |X| |X|</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">decided by my solver. The maximum size tested is 10x10, now I‚Äôm very lazy to interrupt more crosswords into the program ... </font><font style="vertical-align: inherit;">
 - Me: Wow, it's already one in the morning! Wait, it took only 4 hours from the moment when I did not know anything about the SAT-solver? So, how was it at all? </font><font style="vertical-align: inherit;">
(quick notes are written about what happened ...)</font></font><br>
<br>
<code>|x|_|x|_|_|_|_|x|_|x|<br>
|x|x|x|_|_|_|_|x|x|x|<br>
|_|x|_|_|_|_|_|_|x|_|<br>
|_|x|_|x|_|_|x|_|x|_|<br>
|_|x|x|x|x|x|x|x|x|_|<br>
|_|_|x|x|x|x|x|x|_|_|<br>
|x|x|x|x|x|x|x|x|x|x|<br>
|_|_|x|x|x|x|x|x|_|_|<br>
|x|x|_|x|x|x|x|_|x|x|<br>
|x|_|_|_|_|_|_|_|_|x|</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afterword. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Morning</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . On Habr the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article about a solver on Rust is found</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Downloading from crossword puzzle sites does not work, but after going to the Github article specified in the article, we find on the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webpbn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> crossword puzzle </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">site a</font></a><font style="vertical-align: inherit;"> hidden link to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">export crosswords in a machine-readable format</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The option ‚ÄúFormat for version 1 of Kyle Keen's Python solver‚Äù is suitable for us, it is the same as ours. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When you don‚Äôt need to interrupt crosswords with pens, things go faster. It quickly becomes clear that the maximum that a solver is able to solve is crosswords in the region of 30x30. The main problem is the very generation of variants of individual lines, in the case of a heap of blocks of these conditions, VERY much and everything starts to slow down:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Firstly, string options take a long time to generate. </font><font style="vertical-align: inherit;">Generating only all the options for the string [2,1,3,1,4] of length 60 takes already about half a minute ... (there are only 2118760, if anyone is interested) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Also the DNF-&gt; CNF conversion creates too many conditions and additional variables ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But if there are few blocks, then even large crosswords can be solved in a meaningful time.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cat - everything is ok</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> 20x20</a><br>
<code>51511 clauses...<br>
2851 last var number<br>
--- 0.05186057090759277 seconds for clauses gen ---<br>
1<br>
| | |X|X| | | | | | | | | | | | | | | | |<br>
| |X|X| | | | | | | | | | | | | | | | | |<br>
| |X| | | | | | | | | | | | | | | | | | |<br>
| |X| | | | | | | | | | | | | | | | | | |<br>
| |X| | | | | |X|X|X| | | | | | | | | | |<br>
|X|X| | | | |X|X|X|X|X| | | | | | | | | |<br>
|X| | | | |X|X|X|X|X|X|X| | | |X| | | |X|<br>
|X| | | | |X|X|X|X|X|X|X|X| | |X|X| |X|X|<br>
|X| | | |X|X|X|X|X|X|X|X|X| | |X|X|X|X|X|<br>
|X|X| | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|<br>
| |X| |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|<br>
| |X|X|X|X|X|X|X| |X|X|X|X|X|X|X|X|X|X|X|<br>
| | |X|X|X|X|X| | | |X|X|X|X|X| |X|X|X| |<br>
| | |X|X|X|X|X| | | |X|X|X|X| | | | | | |<br>
| | | |X|X|X| | | | | |X|X|X| | | | | | |<br>
| | | |X|X| | | | | | |X|X| | | | | | | |<br>
| | |X|X| | | | | | | | |X| | | | | | | |<br>
| | |X| | | | | | | | | |X| | | | | | | |<br>
| | |X|X| | | | | | | | |X|X| | | | | | |<br>
| | |X|X| | | | | | | | |X|X| | | | | | |<br>
--- 0.02073383331298828 seconds for solve ---</code><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In a desire to test more crosswords, he quickly made alignment - any crossword is reduced to a square when we fill the remaining lines with zeros. </font><font style="vertical-align: inherit;">Yes, it‚Äôs not optimal, but now I‚Äôm reluctant to redo the code ...</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horse - 30x38</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> 22</a><br>
<code>13622799 clauses... -   <br>
350737 last var number<br>
--- 14.18206787109375 seconds for clauses gen ---<br>
1<br>
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |X|X|X| | | | | |<br>
| | | | | | | | | | | | | | | | | | | | | | | | | | | |X|X|X|X|X|X|X| | | | |<br>
| | | | | | | | | | | | | | | | | | | | | | | | | | | | |X|X|X|X|X|X|X| | | |<br>
| | | | | | | | | | | | | | | | | | | | | | | | | |X|X|X|X|X|X|X|X| |X|X| | |<br>
| | | | | | | | | | | | | | | | | | | | | | | | | | |X|X|X|X|X|X|X|X|X|X|X| |<br>
| | | | | | | | | | | | | | | | | | | | | | | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|<br>
| | | | | | | | | | | | | | | | | | | | | | | | |X|X|X|X|X|X|X|X| |X|X|X|X|X|<br>
| | | | | | | | | | | | | | | | | | | | | | | | |X|X|X|X|X|X|X| | | | | |X| |<br>
| | | | | | | | | | |X|X|X|X| | | | | | | | | |X|X|X|X|X|X|X|X| | | | | | | |<br>
| | | | | | | | |X|X|X|X|X|X|X|X|X| | | |X|X|X|X|X|X|X|X|X|X| | | | | | | | |<br>
| | | | | | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X| | | | | | | | |<br>
| | | | | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X| | | | | | | | | |<br>
| | | | |X|X|X| |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X| | | | | | | | | |<br>
| | | |X|X|X| | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X| | | | | | | | | |<br>
| | |X|X|X| | | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X| | | | |<br>
| |X|X|X| | | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X| | | |<br>
|X|X|X|X| | | |X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X|X| | | |X|X| | | |<br>
| |X|X| | | |X|X|X|X|X| | | | |X|X|X|X|X|X|X|X|X|X|X|X| | | | | | |X|X| | | |<br>
| | |X| | | |X|X|X|X| |X| | | | | | |X|X|X|X|X|X| | | |X| | | | | |X|X| | | |<br>
| | | | | |X|X|X|X| |X|X| | | | | | | | | | | | | |X|X|X| | | | | |X|X| | | |<br>
| | | | |X|X|X|X| |X|X| | | | | | | | | | | | | | |X|X|X| | | | | |X|X| | | |<br>
| | | | |X|X|X| | |X|X| | | | | | | | | | | | | | | |X|X| | | | | |X|X| | | |<br>
| | | | |X|X| | | |X|X| | | | | | | | | | | | | | | |X|X| | | | |X|X|X| | | |<br>
| | | |X|X|X| | | | |X|X| | | | | | | | | | | | | | |X|X| | | | |X|X| | | | |<br>
| | | |X|X| | | | | |X|X| | | | | | | | | | | | | | |X|X| | | | |X| | | | | |<br>
| | | |X|X| | | | | |X|X| | | | | | | | | | | | | | |X|X| | | | | | | | | | |<br>
| | | |X|X| | | | | | |X|X| | | | | | | | | | | | | |X|X| | | | | | | | | | |<br>
| | | |X|X| | | | | | |X|X| | | | | | | | | | | | | |X|X| | | | | | | | | | |<br>
| | | | |X|X| | | | | | |X|X| | | | | | | | | | | | | |X|X| | | | | | | | | |<br>
| | | | |X|X|X| | | | | |X|X|X| | | | | | | | | | | | |X|X|X| | | | | | | | |<br>
 <br>
--- 17.535892963409424 seconds for solve ---<br>
<br>
</code><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original publication on the SAT-solver</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , conditions and variables are more honestly generated - therefore, there the solution is faster and probably takes less memory. When deciding a horse, it takes me about 2.7 GB of RAM, and it takes up some complicated things to all 12 installed, and then they start frantically swapping to disk ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
More from the conclusions: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. It dawned on me why most quickly googled pycosat examples are Sudoku solutions. Sudoku rules are much easier to put on the solver, because you do not need to describe the complex relationship between blocks and cells, basically only the conditions "each digit in each row" and "only one digit in one row". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But I love sudoku much less, so I do not regret the decision I have chosen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. I liked how you can mix DNF and CNF. </font><font style="vertical-align: inherit;">If you don‚Äôt want to write the right conditions - don‚Äôt; just generate all the options. </font><font style="vertical-align: inherit;">Of course, this is not optimal, but it works. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, I did not set records for the speed of solving crosswords, but I had a good time. </font><font style="vertical-align: inherit;">The most important thing is I can do it! </font><font style="vertical-align: inherit;">:) What I wish you too!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500864/index.html">When Information and Functional Security Meets</a></li>
<li><a href="../en500866/index.html">Cloud Infrastructure Vulnerabilities</a></li>
<li><a href="../en500870/index.html">Adequate MVC for beginners and more</a></li>
<li><a href="../en500872/index.html">Cheap dirty trick that gave color graphics to the first home computers</a></li>
<li><a href="../en500874/index.html">Translation of Andrew Un's book, Passion for Machine Learning, Chapters 44 - 46</a></li>
<li><a href="../en500884/index.html">Using VueJS with Django</a></li>
<li><a href="../en500886/index.html">Book Python: Artificial Intelligence, Big Data, and Cloud Computing</a></li>
<li><a href="../en500888/index.html">Control cash transactions: how to avoid fraud</a></li>
<li><a href="../en500890/index.html">Top 100 fastest growing and falling quarantined items</a></li>
<li><a href="../en500892/index.html">py-to-js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>