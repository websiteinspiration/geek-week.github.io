<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍💻 🦅 👨🏿‍🔧 Node.jsロギングガイド 🎞️ 🔯 📿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="JavaScriptでプログラミングを開始する開発者が最も頻繁に直面する最初のタスクは、メソッドを使用してコンソールログにイベントを記録する方法console.logです。 JavaScriptコードのデバッグに関する情報を探すと、何百ものブログ記事と、メソッドを介してコンソールにデータを「単純に」...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Node.jsロギングガイド</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/461881/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/o7/dd/qs/o7ddqsvqk7dz2uljo7mz4e-ox2o.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptでプログラミングを開始する開発者が最も頻繁に直面する最初のタスクは、メソッドを使用してコンソールログにイベントを記録する方法</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。 JavaScriptコードのデバッグに関する情報を探すと、何百ものブログ記事と、メソッドを介してコンソールにデータを「単純に」出力するようにアドバイスするStackOverflowの指示が見つかります</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは非常に一般的な方法であるため、コードの品質を制御するためのルールを導入</font></font><code>no-console</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する必要がありました。しかし、追加情報を提供するためにイベントを具体的に登録する必要がある場合はどうでしょうか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、ログを維持する必要があるさまざまな状況について説明します。メソッド</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">との</font><font style="vertical-align: inherit;">違い</font></font><code>console.error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Node.jsで、ユーザーコンソールをオーバーロードせずにロギング関数をライブラリに渡す方法を示します。</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/fl/st/fl/flstflpirz79u4y-4nc0ot6yroe.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.jsの使用に関する理論的基礎</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッド</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>console.error </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ブラウザとNode.jsの両方で使用できます。ただし、Node.jsを使用する場合は、留意すべき重要なことが1つあります。あなたが呼ばれるファイルを使用して、Node.jsの中で、次のコードを作成した場合</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9d/f8/fr/9df8fr10y-luiwbcqp6kizl8-ce.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
および次いで、端末でそれを実行</font></font><code>node index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、コマンドの結果は、互いに上下に配置されます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rf/n_/wi/rfn_wioub6pircw7tcrgvmt8g4w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らは似ているようだという事実にもかかわらず、システムが異なり、それらを処理します。あなたが仕事上のセクションを見れば</font></font><code>console</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のNode.jsのドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それがあることが判明し</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て結果を表示し</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、かつ</font></font><code>console.error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通過</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各プロセスには、3つのストリーム（で動作することがあり</font></font><code>stream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、デフォルトでは）</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。フロー</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボタン入力や出力のリダイレクトなど、プロセスの入力を処理します（これについては以下で詳しく説明します）。標準出力ストリーム</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アプリケーションデータを出力するためのものです。最後に、標準エラーストリームは</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーメッセージを表示するように設計されています。それが何のために意図され</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、どのような場合にそれを使用</font><font style="vertical-align: inherit;">するかを理解する必要がある場合は</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読んで</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、リダイレクト（</font></font><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）およびパイプライン（</font></font><code>|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">演算子を使用して</font><font style="vertical-align: inherit;">、アプリケーションの実際の結果とは別にエラーや診断情報を処理するために使用できます。オペレーター</font></font><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がコマンドの結果の出力をファイルに</font></font><code>2&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リダイレクトできる場合は</font><font style="vertical-align: inherit;">、オペレーター</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">てエラーストリームの出力をリダイレクトできます。</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルへ。</font><font style="vertical-align: inherit;">たとえば、このコマンドは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をファイルに</font><font style="vertical-align: inherit;">送信し</font></font><code>hello.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bye bye</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">ファイルに</font><font style="vertical-align: inherit;">送信</font><font style="vertical-align: inherit;">します</font></font><code>error.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cf/xm/se/cfxmsetuf_6ohz4zqoeg_oqsojw.png"><br>
<br>
<img src="https://habrastorage.org/webt/ve/ji/i0/vejii0f6_q4zhetko-f9bg1pozy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イベントをログに書き込む必要があるのはいつですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロギングの基礎となる技術的な側面を確認したので、イベントを記録する必要があるさまざまなシナリオに移りましょう。</font><font style="vertical-align: inherit;">通常、これらのシナリオはいくつかのカテゴリのいずれかに分類されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発中に予期しない動作が発生した場合の迅速なデバッグ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析と診断のためのブラウザベースのロギング。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーアプリケーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ログに記録して、</font></a><font style="vertical-align: inherit;">着信要求と考えられるエラーを登録</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">します</font></a><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーが問題を解決できるように</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、ライブラリの追加のデバッグログを維持し</font></a><font style="vertical-align: inherit;">ます。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドラインインターフェースの出力をログに記録し、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作の進行状況、確認、エラーに関するメッセージをコンソールに表示します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、Node.jsに基づく最後の3つのシナリオについてのみ説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーアプリケーションのログ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーで発生するイベントをログに記録する理由はいくつかあります。たとえば、着信リクエストをログに記録すると、ユーザーが404エラーに遭遇する頻度、その理由、またはどのクライアントアプリケーションが</font></font><code>User-Agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用され</font><font style="vertical-align: inherit;">ているかに関する統計を取得できます</font><font style="vertical-align: inherit;">。エラーが発生した時刻とその原因も確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事のこの部分で提供されている資料を試すには、プロジェクトの新しいディレクトリを作成する必要があります。プロジェクトディレクトリで、使用</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">するコードを</font><font style="vertical-align: inherit;">作成</font><font style="vertical-align: inherit;">し、次のコマンドを実行してプロジェクトを起動してインストール</font><font style="vertical-align: inherit;">
します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">メソッドを使用してコンソールに各リクエストを登録するクロスプラットフォームソフトウェアでサーバー</font></font><code>express</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ma/sw/qo/maswqo4k3lr9my_vnkcmrksqxme.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成します</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。次の行をファイルに入れます</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pr/y5/js/pry5js_udhlcqeurmmwyld57zky.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは</font></font><code>console.log('%O', req)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、オブジェクト全体をログに登録する</font><font style="vertical-align: inherit;">ために使用</font><font style="vertical-align: inherit;">されます。内部構造の観点から、このメソッド</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>util.forma</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tを</font><font style="vertical-align: inherit;">使用し</font></font><code>%O</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは</font><font style="vertical-align: inherit;">、他のプレースホルダー</font><font style="vertical-align: inherit;">も</font><font style="vertical-align: inherit;">サポートします。それらに関する情報は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.jsのドキュメントにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">サーバーを起動</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
する</font></font><code>node index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ために</font><font style="vertical-align: inherit;">実行</font><font style="vertical-align: inherit;">して</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：3000に</font><font style="vertical-align: inherit;">切り替えると</font><font style="vertical-align: inherit;">、コンソールに多くの不要な情報が表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/c1/ta/qyc1ta1h1em_xkl0f9683zvesfe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
代わり</font></font><code>console.log('%s', req)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">それを使用して</font><font style="vertical-align: inherit;">オブジェクト全体を表示しないと、多くの情報を取得できません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ru/ew/kz/ruewkz1ihxicigymk_oqta9s9gc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なデータのみを表示する独自のロギング関数を作成できますが、最初に必要な情報を決定する必要があります。</font><font style="vertical-align: inherit;">通常はメッセージの内容に重点が置かれているという事実にもかかわらず、実際には、次のような追加情報を取得する必要があることがよくあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムスタンプ-イベントがいつ発生したかを知る。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピューター/サーバー名-分散システムが実行されている場合。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセス識別子-複数のノードプロセスが、たとえばを使用して実行されている場合</font></font><code>pm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メッセージ-いくつかのコンテンツを含む実際のメッセージ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタックトレース-エラーが記録された場合。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加の変数/情報。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、いずれの場合でも、すべてがストリーム</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">出力さ</font><font style="vertical-align: inherit;">れるため、ジャーナルをさまざまなレベルに維持し、レベルに応じてジャーナルエントリを構成およびフィルタリングする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、プロセスのさまざまな部分にアクセスし</font></font><code>process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、JavaScriptで数行のコードを記述することで実現できます。</font><font style="vertical-align: inherit;">ただし、Node.jsは、エコシステム</font></font><code>npm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とこれらの目的で使用できるいくつかのライブラリーを</font><font style="vertical-align: inherit;">すでに持っているという点で注目に値し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これらには以下が含まれます：</font></font><br>
<br>
<ul>
<li><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><code>winston</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">轟音</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bunyan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（このライブラリーは2年間更新されていません）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高速で独自のエコシステムを備えているため</font><font style="vertical-align: inherit;">、優先され</font><font style="vertical-align: inherit;">ます。それ</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がロギングに</font><font style="vertical-align: inherit;">どのように</font><font style="vertical-align: inherit;">役立つ</font><font style="vertical-align: inherit;">か見てみましょう</font><font style="vertical-align: inherit;">。このライブラリのもう1つの利点は、</font></font><code>express-pino-logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストを登録できる</font><font style="vertical-align: inherit;">パッケージ</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストール</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>express-pino-logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nq/j_/jq/nqj_jqvxgyqqdmfgydf9740la-y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、ファイルを更新して</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、イベントロガーとミドルウェアを使用</font><font style="vertical-align: inherit;">します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qw/ge/sq/qwgesqqth2bnxd447led_m35ud8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。このフラグメントでは、イベントロガーのインスタンスを作成</font></font><code>logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て渡し、</font></font><code>express-pino-logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出し可能なイベントを記録するための新しいミドルウェアを作成し</font></font><code>app.use</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。さらに、</font></font><code>console.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">起動時にサーバー</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">置き換え、</font><font style="vertical-align: inherit;">ルートに</font></font><code>logger.info</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加</font></font><code>logger.debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してさまざまなレベルのログを表示しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーを再実行してサーバーを再起動する</font></font><code>node index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、出力に異なる結果が表示され、各行/行がJSON形式で出力されます。もう一度、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：3000に</font><font style="vertical-align: inherit;">移動して</font><font style="vertical-align: inherit;">、JSON形式の別の新しい行を表示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tr/mh/0v/trmh0vi7-h9khu3355byqn5s-pg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSON形式のデータの中には、前述のタイムスタンプなどの情報があります。また、メッセージが</font></font><code>logger.debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示されなかった</font><font style="vertical-align: inherit;">ことにも注意してください</font><font style="vertical-align: inherit;">。これを表示するには、デフォルトのログレベルを変更する必要があります。イベントログインスタンスを作成した後</font></font><code>logger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、値が設定されました</font></font><code>process.env.LOG_LEVEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。つまり、値を変更するか、</font></font><code>info</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルト</font><font style="vertical-align: inherit;">値を受け入れることができます</font><font style="vertical-align: inherit;">。から</font></font><code>LOG_LEVEL=debug node index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ログのレベルを変更します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行う前に、出力形式の問題を解決する必要がありますが、現時点では認識にはあまり適していません。この手順は意図的に行われます。哲学</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">よれば</font><font style="vertical-align: inherit;">、パフォーマンスの目的で、ジャーナルエントリの処理を別のプロセスに転送し、（演算子を使用して</font></font><code>|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">出力を渡す必要があります</font><font style="vertical-align: inherit;">。このプロセスでは、出力を人間が認識しやすい形式に変換するか、クラウドにアップロードします。このタスクは、と呼ばれる転送ツールによって実行されます</font></font><code>transports</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ドキュメントを</font></a><font style="vertical-align: inherit;">確認し、</font></font><code>transports</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーがで</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示されない</font><font style="vertical-align: inherit;">理由を</font><font style="vertical-align: inherit;">確認してください</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マガジンの読みやすいバージョンを表示するには、ツールを使用します</font></font><code>pino-pretty</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ターミナルで実行：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yi/-b/v6/yi-bv6ct4r1zozscacob9xp5urc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジャーナルのすべてのエントリは、オペレーターの助けを借り</font></font><code>|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て廃棄</font></font><code>pino-pretty</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に転送されます。これにより、出力データがクリアされ、異なる色で表示される重要な情報のみが含まれます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：3000を</font><font style="vertical-align: inherit;">再度クエリする</font><font style="vertical-align: inherit;">と、デバッグメッセージが表示され</font></font><code>debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_p/lb/w1/_plbw1wcxgonrmw4lsyt5ls7cka.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジャーナルエントリを読みやすくしたり、変換したりするために、多くの送信ツールがあります。絵文字を使用して表示することもできます</font></font><code>pino-colada</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これらのツールは、ローカル開発に役立ちます。サーバーが稼働中の場合は</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別のツール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してログデータを転送し</font><font style="vertical-align: inherit;">、それを使用してディスクに書き込む</font><font style="vertical-align: inherit;">必要がある場合があります。</font></font><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえば、特定のコマンドを使用して、さらに処理したり、2つの操作を同時に実行したりします</font></font><code>tee</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ログファイルのローテーション、フィルタリング、および他のファイルへのログデータの書き込みについても</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">説明してい</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリジャーナリング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーアプリケーションのログを効率的に整理する方法を探ることで、独自のライブラリに同じテクノロジを使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題は、ライブラリの場合、クライアントアプリケーションをロードせずにデバッグ目的でログを保持する必要がある場合があることです。逆に、デバッグが必要な場合、クライアントはログをアクティブ化できる必要があります。デフォルトでは、ライブラリは出力を記録するべきではなく、ユーザーにこの権利を与えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この良い例がフレームワーク</font></font><code>express</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><code>express</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くのプロセスが</font><font style="vertical-align: inherit;">フレームワークの内部構造で</font><font style="vertical-align: inherit;">行われるため、アプリケーションのデバッグ中の詳細な調査に関心が生じる可能性があります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレームワーク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ドキュメントに</font></a></font><code>express </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、コマンドの先頭に追加できると</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">記載され</font></a><font style="vertical-align: inherit;">ています</font></font><code>DEBUG=express:* </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のように</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ts/ht/a9/tshta9wjl_atyr3wrm11i11fuzu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存のアプリケーションには、このコマンドを適用する場合は、デバッグに役立つ追加の出力の多くを見ることができます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tn/ea/pl/tneaplymuzok_eenshb-zv50oiq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバッグログが有効化されていない場合は、この情報を見ることができません。このパッケージがあります</font></font><code>debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これを使用すると、「名前空間」にメッセージを書き込むことができ、ライブラリユーザーがこの名前空間または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">環境変数に</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致するワイルドカードを含める</font></font><code>DEBUG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、メッセージが表示されます。まず、ライブラリをインストールする必要があります</font></font><code>debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gi/4h/mp/gi4hmppeawcqdpwsncu3g5rqlzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と呼ばれる新しいファイルを作成し</font></font><code>random-id.j</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ライブラリをシミュレートし、その中に以下のコードを置くのを：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/le/fq/cn/lefqcnt7-3nft1klqsjuugnkupa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果として、新しいイベントロガー</font></font><code>debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前空間を持つが</font><font style="vertical-align: inherit;">作成されます。</font></font><code>mylib:randomid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、2つのメッセージが登録されます。</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前のセクションで</font><font style="vertical-align: inherit;">それを使用し</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bb/cj/ja/bbcjjan7ygf-9z26w8etpccfx8o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。サーバーを再起動して今回を追加する</font></font><code>DEBUG=mylib:randomid node index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、「ライブラリ」のデバッグログエントリが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fg/3c/8t/fg3c8tejhceciqntzcb-a1n2xd4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライブラリユーザーがデバッグ情報をログエントリに入れたい場合は</font><font style="vertical-align: inherit;">、コマンドで</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出さ</font></font><code>pino-debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れた</font><font style="vertical-align: inherit;">ライブラリを使用できます。</font></font><code>pino</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのレコードを正しくフォーマットします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライブラリをインストールします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wg/dh/y1/wgdhy11xkqt-e8csfhcrjcctkl8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に使用する前に、</font></font><code>debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化する必要があります</font></font><code>pino-debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これを行う最も簡単な方法は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグ</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用する</font></font><code>-r</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か、</font></font></a><code>--require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトを実行する前にモジュールをリクエストします。</font><font style="vertical-align: inherit;">次のコマンドを使用してサーバーを再起動します（インストールされている場合</font></font><code>pino-colada</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l-/ug/yn/l-ugyn16-kzn1hhye_zus2adfkk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバッグログを書き込んだ結果、ライブラリはアプリケーションログと同じように表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-y/n8/7e/-yn87ertfjgensbyew95aaz8f7y.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドラインインターフェース（CLI）出力</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事で説明する最後のケースは、コマンドラインインターフェースのロギングです。好ましくは、プログラムロジックに関連するイベントを記録するログは、コマンドラインインターフェースデータを登録するためのログとは別に保持される。プログラムのロジックに関連するイベントを記録するには、などの特定のライブラリを使用する必要があります</font></font><code>debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この場合、コマンドラインインターフェイスを使用して1つのシナリオに制限されることなく、プログラムロジックを再利用できます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.jsを使用してコマンドラインインターフェースを作成することにより、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまな色、可変値ブロック、またはフォーマットツールを追加して、インターフェースを視覚的に魅力的な外観にすることができます。ただし、いくつかのシナリオに留意する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらの1つによれば、インターフェイスは継続的インテグレーションシステム（CI）のコンテキストで使用できます。その場合、色の書式設定と結果の視覚的な過負荷表示を放棄することをお勧めします。一部の継続的インテグレーションシステムでは、フラグが設定され</font></font><code>CI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><code>is-ci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのシステムのいくつかをサポート</font><font style="vertical-align: inherit;">するパッケージ</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して、継続的インテグレーションシステムにいることを確認でき</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば</font></font><code>chalk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">一部のライブラリは、</font><font style="vertical-align: inherit;">継続的インテグレーションシステムを定義し、コンソールへのカラーテキストの出力をキャンセルします。それがどのように機能するか見てみましょう。</font><font style="vertical-align: inherit;">npmコマンド</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を</font></font><code>chalk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">インストール</font><font style="vertical-align: inherit;">し、</font></font><code>install chalk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">というファイルを作成します</font></font><code>cli.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ファイルに次の行を追加します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6c/oa/u-/6coau-msy3lievszm36fvfaeffi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今、このスクリプトを実行すると</font></font><code>node cli.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、結果は異なる色を使用して表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nn/zf/rl/nnzfrlbh5jqiyoqfn-m2b3j2ff8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、でスクリプトを実行する</font></font><code>CI=true node cli.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、テキストの色の書式がキャンセルされます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iz/fg/cs/izfgcsne498gjwybmd_3f7p9ap0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
覚えておく価値のある別のスクリプトでは</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ターミナルモードで起動されます。端末にデータが出力されます。この場合、結果はを使用してうまく表示できます</font></font><code>boxen</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そうでない場合、出力はファイルまたは別の場所にリダイレクトされる可能性が高いです。</font><font style="vertical-align: inherit;">対応するスレッドの</font><font style="vertical-align: inherit;">属性を</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
調べることにより、スレッドの動作</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>stderr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ターミナルモードで</font><font style="vertical-align: inherit;">の動作を確認でき</font></font><code>isTTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。例えば</font></font><code>process.stdout.isTTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>TTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「テレタイプライター」を意味し、この場合は端末専用に設計されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node.jsプロセスがどのように開始されたかに応じて、3つのスレッドのそれぞれで値が異なる場合があります。この詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.jsのドキュメントの「プロセスの入出力」セクションを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">さまざまな状況で</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
意味がどのように</font></font><code>process.stdout.isTTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変化する</font><font style="vertical-align: inherit;">かを見てみましょう</font><font style="vertical-align: inherit;">。ファイルを更新し</font></font><code>cli.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て確認します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ha/qh/gl/haqhglnf6rs38hn6gxl2_ihnntw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font><code>node cli.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ターミナルで</font><font style="vertical-align: inherit;">起動</font><font style="vertical-align: inherit;">し、という単語</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i8/z2/gx/i8z2gxbba0zk1cm5cnk4gxzkqbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後</font><font style="vertical-align: inherit;">、メッセージがカラーフォントで表示されます。</font><font style="vertical-align: inherit;">その後、コマンドを再実行しますが、出力をファイルにリダイレクトして内容を表示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sb/8b/sf/sb8bsftkufhbufqrmj_a2fkg4jk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回は、単語がターミナル</font></font><code>undefined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に表示され、続いてフローのリダイレクトなので、無色のフォントのメッセージが続きます。</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼をターミナルモードから外しました。</font><font style="vertical-align: inherit;">これは、</font></font><code>chalk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール使用し</font></font><code>supports-color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、内部構造の観点から、チェックは、</font></font><code>isTTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フローに対応します。</font><font style="vertical-align: inherit;">これらの</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2n/8j/bs/2n8jbshyf2a9qdqpt7ihez8hcsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ようなツールは、</font></font><code>chalk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのアクションを独自に実行します。</font><font style="vertical-align: inherit;">ただし、コマンドラインインターフェイスを開発するときは、インターフェイスが継続的インテグレーションシステムで動作するか、出力がリダイレクトされる状況について常に覚えておく必要があります。</font><font style="vertical-align: inherit;">これらのツールは、コマンドラインインターフェイスをより高いレベルで使用するのに役立ちます。</font><font style="vertical-align: inherit;">たとえば、ターミナル内のデータをより構造化された方法で整理し、必要に応じ</font></font><code>isTTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て</font></font><code>undefined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、より簡単な分析方法に切り替えることができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptを使い始め、コンソールログの最初の行を</font></font><code>console.log </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常に単純な方法で入力します。</font><font style="vertical-align: inherit;">ただし、コードを本番環境にデプロイする前に、ログの使用に関するいくつかの側面を考慮する必要があります。</font><font style="vertical-align: inherit;">この記事は、イベントログの整理に使用されるさまざまな方法とソリューションの紹介にすぎません。</font><font style="vertical-align: inherit;">あなたが知る必要があるすべてが含まれていません。</font><font style="vertical-align: inherit;">したがって、成功したオープンソースプロジェクトに注意を払い、それらがロギングの問題をどのように解決したか、どのツールが使用されているかを監視することをお勧めします。</font><font style="vertical-align: inherit;">次に、コンソールにデータを出力せずに、自分でログを記録してみます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://s3.amazonaws.com/com.twilio.prod.twilio-docs/original_images/mDf8ceyn8JviZCtuUmtELF8nB0-JFgfvtuRqE6kGRq_9OBdN54bcmQNMKDJ_YdFPOuqO5T_pSHHKV4"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
言及する価値のある他のツールを知っている場合は、コメントにそれらについて書いてください。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja461871/index.html">優れたプログラマー（および人間）になるための101のヒント</a></li>
<li><a href="../ja461873/index.html">ViewPager 2-古いラッパーの新機能</a></li>
<li><a href="../ja461875/index.html">5 nmと3 nm</a></li>
<li><a href="../ja461877/index.html">JavaとKotlin for Android：開発者の意見</a></li>
<li><a href="../ja461879/index.html">本「Linux in action」</a></li>
<li><a href="../ja461885/index.html">EDSは別のタイプの詐欺です</a></li>
<li><a href="../ja461887/index.html">Aeronetエピソード2の開始：Homing Drone</a></li>
<li><a href="../ja461891/index.html">ManageIQを使用して銀行インフラストラクチャで友達を作る方法</a></li>
<li><a href="../ja461895/index.html">Learn While Travel-ヨーロッパ初のビジネス分析デーでの運転方法</a></li>
<li><a href="../ja461897/index.html">Lamodaアプリケーションの安定性を維持する方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>