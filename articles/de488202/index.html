<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧦 🙋🏽 🥦 PVS-Studio ist jetzt in Chocolatey: Chocolatey von Azure DevOps überprüfen 👶🏽 ▶️ 🤳🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir machen die Verwendung von PVS-Studio weiterhin komfortabler. Unser Analysegerät ist jetzt in Chocolatey, dem Paketmanager für Windows, verfügbar. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio ist jetzt in Chocolatey: Chocolatey von Azure DevOps überprüfen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/488202/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ag/me/sd/agmesd-888bigj7hx1kuw3w_hn8.png" alt="Figur 4"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir machen die Verwendung von PVS-Studio weiterhin komfortabler. </font><font style="vertical-align: inherit;">Unser Analysegerät ist jetzt in Chocolatey, dem Paketmanager für Windows, verfügbar. </font><font style="vertical-align: inherit;">Wir glauben, dass dies die Bereitstellung von PVS-Studio insbesondere in Cloud-Diensten erleichtern wird. </font><font style="vertical-align: inherit;">Um nicht weit zu kommen, überprüfen Sie den Quellcode des gleichen Chocolatey. </font><font style="vertical-align: inherit;">Das CI-System ist Azure DevOps.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine Liste unserer anderen Artikel zur Cloud-Integration:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio geht in die Cloud: Azure DevOps</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio geht in die Wolken: Travis CI</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio geht in die Wolken: CircleCI</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio geht in die Cloud: GitLab CI / CD</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich empfehle Ihnen, den ersten Artikel über die Integration in Azure DevOps zu lesen, da in diesem Fall einige Punkte weggelassen werden, um nicht dupliziert zu werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Helden dieses Artikels: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein statisches Code-Analyse-Tool, mit dem Fehler und potenzielle Schwachstellen in Programmen erkannt werden können, die in C, C ++, C # und Java geschrieben wurden. Es funktioniert auf 64-Bit-Systemen unter Windows, Linux und macOS und kann Code analysieren, der für 32-Bit-, 64-Bit- und eingebettete ARM-Plattformen entwickelt wurde. Wenn Sie zum ersten Mal eine statische Code-Analyse durchführen, um Ihre Projekte zu überprüfen, empfehlen wir Ihnen, den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu </font><font style="vertical-align: inherit;">lesen, in dem </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">erläutert wird,</font></a><font style="vertical-align: inherit;"> wie Sie die interessantesten PVS-Studio-Warnungen schnell anzeigen und die Funktionen dieses Tools bewerten können. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure DevOps</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Eine Reihe von Cloud-Diensten, die gemeinsam den gesamten Entwicklungsprozess abdecken. </font><font style="vertical-align: inherit;">Die Plattform enthält Tools wie Azure-Pipelines, Azure-Boards, Azure-Artefakte, Azure-Repos und Azure-Testpläne, die den Prozess der Softwareerstellung beschleunigen und deren Qualität verbessern. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chocolatey</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein Open Source-Paketmanager für Windows. </font><font style="vertical-align: inherit;">Ziel des Projekts ist es, den gesamten Software-Lebenszyklus von der Installation bis zur Aktualisierung und Deinstallation unter Windows-Betriebssystemen zu automatisieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Über die Verwendung von Chocolatey</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Über diesen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> können Sie sehen, wie Sie den Paketmanager installieren </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die vollständige Dokumentation zur Installation des Analysegeräts finden Sie unter dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Abschnitt „Installation mit dem Chocolatey-Paketmanager“. </font><font style="vertical-align: inherit;">Ich werde einige Punkte von dort kurz wiederholen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Befehl zum Installieren der neuesten Analyseversion:</font></font><br>
<br>
<pre><code class="cs hljs">choco install pvs-studio</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl zum Installieren einer bestimmten Version des PVS-Studio-Pakets:</font></font><br>
<br>
<pre><code class="cs hljs">choco install pvs-studio --version=<span class="hljs-number">7.05</span><span class="hljs-number">.35617</span><span class="hljs-number">.2075</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig ist nur der Analysatorkern installiert - die Kernkomponente. </font><font style="vertical-align: inherit;">Alle anderen Flags (Standalone, JavaCore, IDEA, MSVS2010, MSVS2012, MSVS2013, MSVS2015, MSVS2017, MSVS2019) können mit --package-Parametern übergeben werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel für einen Befehl, mit dem der Analysator mit einem Plug-In für Visual Studio 2019 installiert wird:</font></font><br>
<br>
<pre><code class="cs hljs">choco install pvs-studio --package-parameters=<span class="hljs-string">"'/MSVS2019'"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns nun ein Beispiel für die bequeme Verwendung des Analysators unter Azure DevOps an.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anpassung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich erinnere Sie daran, dass es einen separaten </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu Themen wie dem Registrieren eines Kontos, dem Erstellen einer Build-Pipeline und dem Synchronisieren eines Kontos mit einem Projekt im Repository auf GitHub gibt </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Unser Setup beginnt sofort mit dem Schreiben einer Konfigurationsdatei. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurieren Sie </font><font style="vertical-align: inherit;">zunächst den Trigger Trigger, was </font><font style="vertical-align: inherit;">darauf hinweist , </font><font style="vertical-align: inherit;">dass wir nur für Änderungen im Laufe </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Master</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zweig:</font></font><br>
<br>
<pre><code class="cs hljs">trigger:<font></font>
- master</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes müssen wir eine virtuelle Maschine auswählen. </font><font style="vertical-align: inherit;">Derzeit handelt es sich um einen von Microsoft gehosteten Agenten mit Windows Server 2019 und Visual Studio 2019:</font></font><br>
<br>
<pre><code class="cs hljs">pool:<font></font>
  vmImage: <span class="hljs-string">'windows-latest'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir mit dem Hauptteil der Konfigurationsdatei fort ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schrittblock</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Trotz der Tatsache, dass keine beliebige Software in einer virtuellen Maschine installiert werden kann, habe ich keinen Docker-Container hinzugefügt. </font><font style="vertical-align: inherit;">Wir können Chocolatey als Erweiterung für Azure DevOps hinzufügen. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klicken Sie dazu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf den </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Link</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Klicken Sie auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get it free</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wenn Sie bereits autorisiert sind, wählen Sie einfach Ihr Konto aus. Wenn nicht, machen Sie dasselbe nach der Autorisierung.</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ho/u1/so/hou1somlw--e1ebrr-govyknys4.png" alt="Figur 2"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier müssen Sie auswählen, wo wir die Erweiterung hinzufügen möchten, und auf die Schaltfläche </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> klicken </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/9-/ne/n-/9-nen-nk0ukvnbt409qcl6a-b9m.png" alt="Abbildung 5"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie nach einer erfolgreichen Installation auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zur Organisation fortfahren</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/-i/y9/li/-iy9liwz1_-ejyuljlzwlsfu_zm.png" alt="Abbildung 9"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können Sie die Vorlage für die Chocolatey-Aufgabe im </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufgabenfenster</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sehen, </font><font style="vertical-align: inherit;">wenn Sie die Konfigurationsdatei </font><i><font style="vertical-align: inherit;">azure-pipelines.yml</font></i><font style="vertical-align: inherit;"> bearbeiten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></i><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/56/bo/av/56boavtaqcqgdhhrfapzr0s2v0u.png" alt="Abbildung 6"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie auf Chocolatey und sehen Sie eine Liste der Felder:</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/-5/4h/tt/-54httufkdzewsrygpswweggukk.png" alt="Abbildung 7"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier müssen wir </font><font style="vertical-align: inherit;">im Befehlsfeld </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installieren</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auswählen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuspec Dateiname,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geben Sie </font><font style="vertical-align: inherit;">den Namen des gewünschten Paket - PVS-Studio. </font><font style="vertical-align: inherit;">Wenn Sie keine Version angeben, wird diese installiert, was für uns völlig passend ist. </font><font style="vertical-align: inherit;">Klicken Sie auf die Schaltfläche </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinzufügen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und sehen Sie die gebildete Aufgabe in der Konfigurationsdatei.</font></font><br>
<br>
<pre><code class="cs hljs">steps:<font></font>
- task: ChocolateyCommand@<span class="hljs-number">0</span><font></font>
  inputs:<font></font>
    command: <span class="hljs-string">'install'</span>
    installPackageId: <span class="hljs-string">'pvs-studio'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes gehen wir zum Hauptteil unserer Datei über:</font></font><br>
<br>
<pre><code class="cs hljs">- task: CmdLine@<span class="hljs-number">2</span><font></font>
  inputs:<font></font>
    script: </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen wir eine Datei mit der Analysatorlizenz erstellen. </font><font style="vertical-align: inherit;">Hier sind </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVSNAME</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVSKEY</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Namen der Variablen, deren Werte wir in den Einstellungen angeben. </font><font style="vertical-align: inherit;">Sie speichern den PVS-Studio-Login und den Lizenzschlüssel. </font><font style="vertical-align: inherit;">Öffnen Sie zum Einstellen der Werte das Menü </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variablen-&gt; Neue Variable</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Erstellen Sie die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVSNAME-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Variablen </font><font style="vertical-align: inherit;">für die Anmeldung und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVSKEY</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für den Analysatorschlüssel. </font><font style="vertical-align: inherit;">Denken </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> daran, das Kontrollkästchen </font><i><font style="vertical-align: inherit;">Diesen Wert geheim halten</font></i><font style="vertical-align: inherit;"> für </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVSKEY</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu </font><i><font style="vertical-align: inherit;">aktivieren</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Teamcode:</font></font><br>
<br>
<pre><code class="cs hljs">all <span class="hljs-string">"C:\Program Files (x86)\PVS-Studio\PVS-Studio_Cmd.exe"</span> credentials <font></font>
–u $(PVSNAME) –n $(PVSKEY)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns das Projekt mit der im Repository liegenden bat-Datei erstellen:</font></font><br>
<br>
<pre><code class="cs hljs">all build.bat</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie einen Ordner, in dem die Dateien mit den Ergebnissen der Analysatorarbeit liegen:</font></font><br>
<br>
<pre><code class="cs hljs">all mkdir PVSTestResults</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Führen Sie die Projektanalyse aus:</font></font><br>
<br>
<pre><code class="cs hljs">all <span class="hljs-string">"C:\Program Files (x86)\PVS-Studio\PVS-Studio_Cmd.exe"</span> 
–t .\src\chocolatey.sln –o .\PVSTestResults\Choco.plog </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir konvertieren unseren Bericht mit dem Dienstprogramm Plogonverter in das HTML-Format:</font></font><br>
<br>
<pre><code class="cs hljs">all <span class="hljs-string">"C:\Program Files (x86)\PVS-Studio\PlogConverter.exe"</span> 
–t html –o \PVSTestResults\ .\PVSTestResults\Choco.plog</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen Sie eine Aufgabe erstellen, damit Sie den Bericht hochladen können.</font></font><br>
<br>
<pre><code class="cs hljs">- task: PublishBuildArtifacts@<span class="hljs-number">1</span><font></font>
  inputs:<font></font>
    pathToPublish: PVSTestResults<font></font>
    artifactName: PVSTestResults<font></font>
    condition: always()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die vollständige Konfigurationsdatei sieht folgendermaßen aus:</font></font><br>
<br>
<pre><code class="cs hljs">trigger:<font></font>
- master<font></font>
<font></font>
pool:<font></font>
  vmImage: <span class="hljs-string">'windows-latest'</span><font></font>
<font></font>
steps:<font></font>
- task: ChocolateyCommand@<span class="hljs-number">0</span><font></font>
  inputs:<font></font>
    command: <span class="hljs-string">'install'</span>
    installPackageId: <span class="hljs-string">'pvs-studio'</span><font></font>
<font></font>
- task: CmdLine@<span class="hljs-number">2</span><font></font>
  inputs:<font></font>
    script: |<font></font>
      call <span class="hljs-string">"C:\Program Files (x86)\PVS-Studio\PVS-Studio_Cmd.exe"</span> <font></font>
      credentials –u $(PVSNAME) –n $(PVSKEY)<font></font>
      call build.bat<font></font>
      call mkdir PVSTestResults<font></font>
      call <span class="hljs-string">"C:\Program Files (x86)\PVS-Studio\PVS-Studio_Cmd.exe"</span> <font></font>
      –t .\src\chocolatey.sln –o .\PVSTestResults\Choco.plog<font></font>
      call <span class="hljs-string">"C:\Program Files (x86)\PVS-Studio\PlogConverter.exe"</span> <font></font>
      –t html –o .\PVSTestResults\ .\PVSTestResults\Choco.plog<font></font>
<font></font>
- task: PublishBuildArtifacts@<span class="hljs-number">1</span><font></font>
  inputs:<font></font>
    pathToPublish: PVSTestResults<font></font>
    artifactName: PVSTestResults<font></font>
    condition: always()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speichern-&gt; Speichern-&gt; Ausführen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um die Aufgabe zu starten. </font><font style="vertical-align: inherit;">Entladen Sie den Bericht, indem Sie zur Registerkarte Aufgabe wechseln.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/xz/3s/js/xz3sjspuglhptsra5w-gwk917bs.png" alt="Abbildung 8"></a></div><p></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Chocolatey-Projekt enthält insgesamt 37.615 Zeilen C # -Code. </font><font style="vertical-align: inherit;">Betrachten Sie einige der gefundenen Fehler.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Validierungsergebnisse</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N1</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3005</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Variable 'Provider' wird sich selbst zugewiesen. </font><font style="vertical-align: inherit;">CrytpoHashProviderSpecs.cs 38</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CrytpoHashProviderSpecsBase</span> : <span class="hljs-title">TinySpec</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">protected</span> CryptoHashProvider Provider;<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Context</span>(<span class="hljs-params"></span>)</span><font></font>
  {<font></font>
    Provider = Provider = <span class="hljs-keyword">new</span> CryptoHashProvider(FileSystem.Object);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Analysator hat die Zuordnung einer Variablen zu sich selbst gefunden, was nicht sinnvoll ist. Am wahrscheinlichsten sollte anstelle einer dieser Variablen eine andere sein. Nun, oder dies ist ein Tippfehler, und unnötige Zuweisungen können einfach gelöscht werden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N2</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3093</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-480] Der Operator '&amp;' wertet beide Operanden aus. Möglicherweise sollte stattdessen ein Kurzschlussoperator "&amp;&amp;" verwendet werden. Platform.cs 64</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PlatformType <span class="hljs-title">get_platform</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">switch</span> (Environment.OSVersion.Platform)<font></font>
  {<font></font>
    <span class="hljs-keyword">case</span> PlatformID.MacOSX:<font></font>
    {<font></font>
      ....<font></font>
    }<font></font>
    <span class="hljs-keyword">case</span> PlatformID.Unix:
    <span class="hljs-keyword">if</span>(file_system.directory_exists(<span class="hljs-string">"/Applications"</span>)<font></font>
      &amp; file_system.directory_exists(<span class="hljs-string">"/System"</span>)<font></font>
      &amp; file_system.directory_exists(<span class="hljs-string">"/Users"</span>)<font></font>
      &amp; file_system.directory_exists(<span class="hljs-string">"/Volumes"</span>))<font></font>
      {<font></font>
        <span class="hljs-keyword">return</span> PlatformType.Mac;<font></font>
      }<font></font>
        <span class="hljs-keyword">else</span>
          <span class="hljs-keyword">return</span> PlatformType.Linux;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">return</span> PlatformType.Windows;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Unterschied zwischen dem </font><font style="vertical-align: inherit;">Operator </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und dem Operator </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;&amp;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> besteht darin, dass, wenn die linke Seite des Ausdrucks </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falsch ist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die rechte Seite trotzdem berechnet wird, was in diesem Fall zusätzliche Aufrufe der Methode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system.directory_exists</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> impliziert </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fragment ist dies ein kleiner Fehler. Ja, diese Bedingung kann optimiert werden, indem der Operator &amp; durch den Operator &amp;&amp; ersetzt wird. Aus praktischer Sicht hat dies jedoch keine Auswirkungen. In anderen Fällen kann eine Verwechslung zwischen &amp; und &amp;&amp; jedoch zu ernsthaften Problemen führen, wenn die rechte Seite des Ausdrucks mit falschen / ungültigen Werten arbeitet. In unserer Sammlung von Fehlern, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die von der V3093-Diagnose erkannt wurden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , gibt es beispielsweise einen solchen Fall:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> ((k &lt; nct) &amp; (s[k] != <span class="hljs-number">0.0</span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selbst wenn der Index </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> falsch ist, wird er verwendet, um auf das Array-Element zuzugreifen. Infolgedessen wird eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexOutOfRangeException ausgelöst</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnungen N3, N4</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-571] Der Ausdruck 'shortPrompt' ist immer wahr. InteractivePrompt.cs 101 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-571] Der Ausdruck 'shortPrompt' ist immer wahr. InteractivePrompt.cs 105</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> 
<span class="hljs-title">prompt_for_confirmation</span>(<span class="hljs-params">.... <span class="hljs-keyword">bool</span> shortPrompt = <span class="hljs-literal">false</span>, ....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (shortPrompt)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> choicePrompt = choice.is_equal_to(defaultChoice) <span class="hljs-comment">//1</span><font></font>
    ?<font></font>
    shortPrompt <span class="hljs-comment">//2</span><font></font>
    ?<font></font>
    <span class="hljs-string">"[[{0}]{1}]"</span>.format_with(choice.Substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).ToUpperInvariant(), <span class="hljs-comment">//3</span>
    choice.Substring(<span class="hljs-number">1</span>,choice.Length - <span class="hljs-number">1</span>))<font></font>
    :<font></font>
    <span class="hljs-string">"[{0}]"</span>.format_with(choice.ToUpperInvariant()) <span class="hljs-comment">//0</span><font></font>
    : <font></font>
    shortPrompt <span class="hljs-comment">//4</span><font></font>
    ? <font></font>
    <span class="hljs-string">"[{0}]{1}"</span>.format_with(choice.Substring(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>).ToUpperInvariant(), <span class="hljs-comment">//5</span>
    choice.Substring(<span class="hljs-number">1</span>,choice.Length - <span class="hljs-number">1</span>)) <font></font>
    :<font></font>
    choice; <span class="hljs-comment">//0</span><font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall gibt es eine seltsame Logik des ternären Operators. Schauen wir uns das genauer an: Wenn die mit Nummer 1 gekennzeichnete Bedingung erfüllt ist, gehen wir zu Bedingung 2, die immer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wahr ist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , was bedeutet, dass Zeile 3 erfüllt ist. Wenn sich herausstellt, dass Bedingung 1 falsch ist, gehen wir zu der mit Nummer 4 gekennzeichneten Bedingung, in der auch Immer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wahr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , was bedeutet, dass Zeile 5 ausgeführt wird. Somit werden die mit Kommentar 0 gekennzeichneten Bedingungen niemals erfüllt, was möglicherweise nicht genau der Logik der Arbeit entspricht, die der Programmierer erwartet hat. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N5</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3123</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[CWE-783] Vielleicht arbeitet der Operator '?:' Anders als erwartet. </font><font style="vertical-align: inherit;">Seine Priorität ist niedriger als die Priorität anderer Betreiber in seinem Zustand. </font><font style="vertical-align: inherit;">Options.cs 1019</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> <span class="hljs-title">GetArgumentName</span> (<span class="hljs-params">...., <span class="hljs-keyword">string</span> description</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">string</span>[] nameStart;
  <span class="hljs-keyword">if</span> (maxIndex == <span class="hljs-number">1</span>)<font></font>
  {<font></font>
    nameStart = <span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>[]{<span class="hljs-string">"{0:"</span>, <span class="hljs-string">"{"</span>};<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    nameStart = <span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>[]{<span class="hljs-string">"{"</span> + index + <span class="hljs-string">":"</span>};<font></font>
  }<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; nameStart.Length; ++i) <font></font>
  {<font></font>
    <span class="hljs-keyword">int</span> start, j = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">do</span> <font></font>
    {<font></font>
      start = description.IndexOf (nameStart [i], j);<font></font>
    } <font></font>
    <span class="hljs-keyword">while</span> (start &gt;= <span class="hljs-number">0</span> &amp;&amp; j != <span class="hljs-number">0</span> ? description [j++ - <span class="hljs-number">1</span>] == <span class="hljs-string">'{'</span> : <span class="hljs-literal">false</span>);<font></font>
    ....<font></font>
    <span class="hljs-keyword">return</span> maxIndex == <span class="hljs-number">1</span> ? <span class="hljs-string">"VALUE"</span> : <span class="hljs-string">"VALUE"</span> + (index + <span class="hljs-number">1</span>);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Diagnose arbeitete an einer Linie:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">while</span> (start &gt;= <span class="hljs-number">0</span> &amp;&amp; j != <span class="hljs-number">0</span> ? description [j++ - <span class="hljs-number">1</span>] == <span class="hljs-string">'{'</span> : <span class="hljs-literal">false</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da die Variable </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mehrere Zeilen oben auf Null initialisiert </font><i><font style="vertical-align: inherit;">ist</font></i><font style="vertical-align: inherit;"> , gibt der ternäre Operator </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false zurück</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Aufgrund dieser Bedingung wird der Schleifenkörper nur einmal ausgeführt. </font><font style="vertical-align: inherit;">Es scheint mir, dass dieser Code überhaupt nicht so funktioniert, wie es der Programmierer beabsichtigt hat. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N6</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-571] Der Ausdruck 'installedPackageVersions.Count! = 1' ist immer wahr. </font><font style="vertical-align: inherit;">NugetService.cs 1405</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove_nuget_cache_for_package</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (!config.AllVersions &amp;&amp; installedPackageVersions.Count &gt; <span class="hljs-number">1</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">string</span> allVersionsChoice = <span class="hljs-string">"All versions"</span>;
    <span class="hljs-keyword">if</span> (installedPackageVersions.Count != <span class="hljs-number">1</span>)<font></font>
    {<font></font>
      choices.Add(allVersionsChoice);<font></font>
    }<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine seltsame verschachtelte Bedingung: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installiertePackageVersions.Count! = 1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die immer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wahr sein wird</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Oft weist eine solche Warnung auf einen logischen Fehler im Code und in anderen Fällen lediglich auf eine redundante Prüfung hin. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N7</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Links und rechts vom '||' befinden sich identische Unterausdrücke 'commandArguments.contains ("- apikey")'. </font><font style="vertical-align: inherit;">Operator. </font><font style="vertical-align: inherit;">ArgumentsUtility.cs 42</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">arguments_contain_sensitive_information</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>
 commandArguments</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">return</span> commandArguments.contains(<span class="hljs-string">"-install-arguments-sensitive"</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-package-parameters-sensitive"</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"apikey "</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"config "</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"push "</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-p "</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-p="</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-password"</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-cp "</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-cp="</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-certpassword"</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-k "</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-k="</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-key "</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-key="</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-apikey"</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-api-key"</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-apikey"</span>)<font></font>
  || commandArguments.contains(<span class="hljs-string">"-api-key"</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Programmierer, der diesen Code geschrieben hat, hat die letzten beiden Zeilen kopiert und vergessen, sie zu bearbeiten. </font><font style="vertical-align: inherit;">Aus diesem Grund haben Chocolatey-Benutzer die Möglichkeit verloren, den </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apikey-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Parameter </font><i><font style="vertical-align: inherit;">auf</font></i><font style="vertical-align: inherit;"> einige weitere Arten </font><font style="vertical-align: inherit;">anzuwenden </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ähnlich wie bei den obigen Parametern kann ich folgende Optionen anbieten:</font></font><br>
<br>
<pre><code class="cs hljs">commandArguments.contains(<span class="hljs-string">"-apikey="</span>);<font></font>
commandArguments.contains(<span class="hljs-string">"-api-key="</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fehler beim Kopieren und Einfügen können früher oder später in jedem Projekt mit viel Quellcode auftreten. Eine der besten Möglichkeiten, mit ihnen umzugehen, ist die statische Analyse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Und wie immer tritt dieser Fehler am Ende einer mehrzeiligen Bedingung auf :). Siehe die Veröffentlichung „ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Wirkung der letzten Zeile</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> “. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung N8</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Analyzer Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3095</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-476] Das Objekt 'installiertes </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Paket</font></a><font style="vertical-align: inherit;"> ' wurde verwendet, bevor es gegen null verifiziert wurde. Überprüfen Sie die Zeilen: 910, 917. NugetService.cs 910</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> ConcurrentDictionary&lt;<span class="hljs-keyword">string</span>, PackageResult&gt; <span class="hljs-title">get_outdated</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">var</span> pinnedPackageResult = outdatedPackages.GetOrAdd(<font></font>
    packageName, <font></font>
    <span class="hljs-keyword">new</span> PackageResult(installedPackage, <font></font>
                      _fileSystem.combine_paths(<font></font>
                        ApplicationParameters.PackagesLocation, <font></font>
                        installedPackage.Id)));<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (   installedPackage != <span class="hljs-literal">null</span>
      &amp;&amp; !<span class="hljs-keyword">string</span>.IsNullOrWhiteSpace(installedPackage.Version.SpecialVersion) <font></font>
      &amp;&amp; !config.UpgradeCommand.ExcludePrerelease)<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klassischer Fehler: Zuerst wird das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installierte</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paketobjekt </font><font style="vertical-align: inherit;">verwendet und dann auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geprüft </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Diese Diagnose zeigt uns eines von zwei Problemen im Programm: Entweder ist </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installiertes </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> niemals </font><i><font style="vertical-align: inherit;">null</font></i><font style="vertical-align: inherit;"> , was zweifelhaft ist, und dann ist die Überprüfung redundant, oder wir können möglicherweise einen schwerwiegenden Fehler im Code erhalten - einen Versuch, über eine Null-Verbindung darauf zuzugreifen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also haben wir einen weiteren kleinen Schritt getan - jetzt ist die Verwendung von PVS-Studio noch einfacher und bequemer geworden. </font><font style="vertical-align: inherit;">Ich möchte auch sagen, dass Chocolatey ein guter Paketmanager mit einer kleinen Anzahl von Fehlern im Code ist, die bei Verwendung von PVS-Studio noch geringer werden können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir laden Sie ein, </font><font style="vertical-align: inherit;">PVS-Studio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">herunterzuladen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und auszuprobieren. </font><font style="vertical-align: inherit;">Die regelmäßige Verwendung eines statischen Analysators verbessert die Qualität und Zuverlässigkeit des von Ihrem Team entwickelten Codes und hilft, viele </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zero-Day-Schwachstellen zu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vermeiden </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor der Veröffentlichung haben wir den Artikel an die Chocolatey-Entwickler gesendet und sie haben ihn gut angenommen. </font><font style="vertical-align: inherit;">Wir fanden nichts Kritisches, aber sie mochten zum Beispiel den Fehler, den wir im Zusammenhang mit dem API-Schlüssel gefunden haben.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png"></a></div><p></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie diesen Artikel einem englischsprachigen Publikum zugänglich machen möchten, verwenden Sie bitte den Link zur Übersetzung: Vladislav Stolyarov. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio ist jetzt in Chocolatey: Chocolatey unter Azure DevOps prüfen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488190/index.html">Noch einmal über emotionales Burnout</a></li>
<li><a href="../de488194/index.html">Warum schreiben wir Programme von so schlechter Qualität?</a></li>
<li><a href="../de488196/index.html">Android-Insets: Umgang mit Ängsten und Vorbereitung auf Android Q.</a></li>
<li><a href="../de488198/index.html">Wovor haben die Timlids Angst und warum sollten sie damit aufhören?</a></li>
<li><a href="../de488200/index.html">Die Debatte um die erste Programmiersprache: die endgültige Entscheidung</a></li>
<li><a href="../de488208/index.html">Jubiläum DUMP2020 - 4 Tage, die Sie nicht vergessen werden</a></li>
<li><a href="../de488210/index.html">Erkennen von Objekten auf Android mit TensorFlow: von der Datenaufbereitung bis zum Start auf dem Gerät</a></li>
<li><a href="../de488212/index.html">DORA State of DevOps 2019 Bericht, jetzt auch in russischer Sprache</a></li>
<li><a href="../de488214/index.html">Materialien von Kazan Go-mitap: XML-Analyse, gopls, drone.io und Arbeiten mit Migrationen</a></li>
<li><a href="../de488218/index.html">Bekenntnis eines IT-Spezialisten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>