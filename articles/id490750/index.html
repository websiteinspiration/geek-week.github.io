<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍵 🚄 🤛🏿 Mikhail Salosin. Meetup Golang. Menggunakan Go di backend aplikasi Watch + 📇 🏼 ☝🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mikhail Salosin (selanjutnya - MS): - Halo semuanya! Nama saya adalah Michael. Saya bekerja sebagai pengembang backend di MC2 Software, dan saya akan ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mikhail Salosin. Meetup Golang. Menggunakan Go di backend aplikasi Watch +</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/490750/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikhail Salosin (selanjutnya - MS):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Halo semuanya! </font><font style="vertical-align: inherit;">Nama saya adalah Michael. </font><font style="vertical-align: inherit;">Saya bekerja sebagai pengembang backend di MC2 Software, dan saya akan berbicara tentang menggunakan Go di backend aplikasi seluler Watch +. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tf/pc/yj/tfpcyjrufa8t1o-_ilgh2iqqb1w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adakah yang hadir seperti hoki? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/g7/l_/tdg7l_zyrrg7vw1shoc3fdxywda.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maka aplikasi ini adalah untuk Anda. </font><font style="vertical-align: inherit;">Ini untuk Android dan iOS, digunakan untuk menonton siaran berbagai acara olahraga online dan dalam rekaman. </font><font style="vertical-align: inherit;">Juga dalam aplikasi terdapat berbagai statistik, siaran teks, tabel untuk konferensi, turnamen, dan informasi lain yang berguna bagi penggemar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ps/cn/fa/pscnfash29d-yqq6ldluvigihoq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga dalam aplikasi ada hal-hal seperti momen video, yaitu, Anda dapat melihat momen akut pertandingan (gol, perkelahian, baku tembak, dll.). </font><font style="vertical-align: inherit;">Jika Anda tidak ingin menonton seluruh siaran, Anda hanya dapat menonton yang paling menarik.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang digunakan dalam pengembangan?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Badan utama ditulis dalam Go. API yang dikomunikasikan dengan klien seluler ditulis dalam Go. Juga, sebuah layanan ditulis di Go untuk mengirim pemberitahuan push ke ponsel. Kami juga harus menulis ORM kami sendiri, yang suatu hari nanti dapat kami bicarakan. Nah, beberapa layanan kecil ditulis di Go: mengubah ukuran dan memuat gambar untuk editor ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menggunakan Postgres (PostgreSQL) sebagai basis data. Antarmuka untuk editor ditulis dalam Ruby on Rails menggunakan permata ActiveAdmin. Impor statistik dari penyedia statistik juga ditulis di Ruby.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk pengujian API sistem, kami menggunakan Python unittest (Python). </font><font style="vertical-align: inherit;">Memcached digunakan untuk membatasi permintaan pembayaran API, Chef untuk mengontrol konfigurasi, Zabbix untuk mengumpulkan dan memantau statistik sistem internal. </font><font style="vertical-align: inherit;">Graylog2 - untuk mengumpulkan log, Slate adalah dokumentasi API untuk klien.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n5/v_/tc/n5v_tcwffefrpa-fxomv5jc_moc.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemilihan protokol</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah pertama yang kami temui: kami harus memilih protokol untuk interaksi backend dengan klien seluler, berdasarkan poin berikut ...</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persyaratan paling penting: data klien harus diperbarui secara real time. </font><font style="vertical-align: inherit;">Artinya, setiap orang yang sedang menonton siaran harus menerima pembaruan hampir secara instan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk kesederhanaan, kami menerima bahwa data yang disinkronkan dengan klien tidak dihapus, tetapi disembunyikan menggunakan bendera khusus.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua jenis permintaan langka (seperti statistik, lineup, statistik tim) diterima oleh permintaan GET biasa.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus, sistem itu seharusnya menahan 100.000 pengguna pada saat yang sama.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berdasarkan ini, kami memiliki dua opsi protokol:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soket web. </font><font style="vertical-align: inherit;">Tetapi kami tidak membutuhkan saluran dari klien ke server. </font><font style="vertical-align: inherit;">Kami hanya perlu mengirim pembaruan dari server ke klien, jadi soket web adalah opsi yang berlebihan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server-Sent Events (SSE) muncul tepat! </font><font style="vertical-align: inherit;">Ini cukup sederhana dan pada dasarnya memuaskan semua yang kita butuhkan.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acara yang Dikirim Server</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa kata tentang bagaimana hal ini </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
bekerja </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">Ini berfungsi di atas koneksi http. </font><font style="vertical-align: inherit;">Klien mengirim permintaan, server merespons dengan Content-Type: text / event-stream dan tidak menutup koneksi dengan klien, tetapi terus menulis data ke koneksi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0s/qp/5j/0sqp5jdkevts9970rrbpwa0bm9i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data dapat dikirim dalam format yang disepakati dengan klien. </font><font style="vertical-align: inherit;">Dalam kasus kami, kami mengirimkan formulir ini: di bidang acara, nama struktur yang diubah (orang, pemain) dikirim, dan di bidang data - JSON dengan bidang yang baru dan diubah untuk pemain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang tentang bagaimana interaksi itu sendiri bekerja.</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertama-tama, klien menentukan kapan sinkronisasi terakhir dibuat dengan layanan: itu melihat database lokalnya dan menentukan tanggal perubahan terakhir yang dicatat darinya.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dia mengirim permintaan dengan tanggal ini.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai tanggapan, kami mengirimkan kepadanya semua pembaruan yang terjadi pada tanggal ini.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah itu, ia membuat koneksi ke saluran langsung dan tidak menutup sampai ia membutuhkan pembaruan ini:</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/_v/t9/t1/_vt9t1r7nq_--sskm6vc_-0qydw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengirimkan kepadanya daftar perubahan: jika seseorang mencetak gol - kami mengubah skor pertandingan, cedera - juga mengirimnya dalam waktu nyata. </font><font style="vertical-align: inherit;">Dengan demikian, dalam arus pertandingan, pelanggan langsung menerima data yang relevan. </font><font style="vertical-align: inherit;">Secara berkala, sehingga klien memahami bahwa server belum mati, bahwa tidak ada yang terjadi padanya, kami mengirim stempel waktu setiap 15 detik - sehingga ia tahu bahwa semuanya beres dan tidak perlu tersambung kembali.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana koneksi langsung dilayani?</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertama-tama, kami membuat saluran tempat pembaruan dengan buffer akan datang.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah itu, kami berlangganan saluran ini untuk menerima pembaruan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atur tajuk yang benar sehingga klien tahu bahwa semuanya baik-baik saja.</font></font></li>
<li>  ping.    timestamp .</li>
<li>         ,     .       timestamp,  ,       .</li>
</ul><br>
<img src="https://habrastorage.org/webt/rf/hl/s9/rfhls98e0zi4dogfbjpptkb-feg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah pertama yang kami temui adalah sebagai berikut: untuk setiap koneksi yang dibuka dengan klien, kami membuat timer yang berdetak setiap 15 detik - ternyata jika kami memiliki 6.000 koneksi dengan satu mesin (dengan satu server API), 6 ribu timer dibuat. </font><font style="vertical-align: inherit;">Ini mengarah pada fakta bahwa mesin tidak menahan beban yang diperlukan. </font><font style="vertical-align: inherit;">Masalahnya tidak begitu jelas bagi kami, tetapi mereka sedikit membantu kami, dan kami menghilangkannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, sekarang kami memiliki ping yang berasal dari saluran yang sama dari mana pembaruan datang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, hanya ada satu timer yang berdetak setiap 15 detik sekali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah beberapa fungsi pembantu - mengirim header, ping, dan struktur itu sendiri. </font><font style="vertical-align: inherit;">Yaitu, nama tabel (orang, pertandingan, musim) dan informasi tentang catatan ini dikirimkan di sini:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/g2/rh/qug2rhecowmxbnqmqz7zk5p-_7g.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mekanisme untuk mengirim pembaruan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang sedikit tentang dari mana perubahan itu berasal. </font><font style="vertical-align: inherit;">Kami memiliki beberapa orang, editor, yang menonton siaran secara langsung. </font><font style="vertical-align: inherit;">Mereka menciptakan semua peristiwa: seseorang telah dihapus, seseorang terluka, semacam penggantian ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan bantuan CMS, data masuk ke dalam basis data. </font><font style="vertical-align: inherit;">Setelah itu, database yang menggunakan mekanisme Listen / Notify memberi tahu server API tentang ini. </font><font style="vertical-align: inherit;">Server API sudah mengirimkan informasi ini ke klien. </font><font style="vertical-align: inherit;">Jadi, pada kenyataannya, kami hanya memiliki beberapa server yang terhubung ke database dan tidak ada beban khusus pada database, karena klien tidak berinteraksi langsung dengan database dengan cara apa pun:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/wp/ei/azwpei0ysoe2uspec2ybfe9mdag.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL: Dengar / Beritahu</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mekanisme Listen / Notify di Postgres memungkinkan Anda untuk memberi tahu pelanggan tentang peristiwa yang beberapa peristiwa telah ubah - semacam catatan telah dibuat dalam database. Untuk melakukan ini, kami menulis pemicu dan fungsi sederhana: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/i_/ms/hji_msz1f-kwrtijbes4flcctr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat menyisipkan atau mengubah catatan, kami memanggil fungsi notifikasi pada saluran data_updates, mentransfer nama tabel dan pengidentifikasi catatan yang diubah atau disisipkan di sana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk semua tabel yang harus disinkronkan dengan klien, kami menetapkan pemicu bahwa, setelah mengubah / memperbarui catatan, memanggil fungsi yang ditunjukkan pada slide di bawah ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana API berlangganan perubahan ini? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mekanisme Fanout dibuat - mengirimkan pesan ke klien. Dia mengumpulkan semua saluran pelanggan dan mengirimkan pembaruan yang dia terima melalui saluran ini:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kx/op/vl/kxopvlizual_4yyz48t79flo8w8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini pq pustaka standar, yang terhubung ke database dan mengatakan bahwa ia ingin mendengarkan saluran (data_updates), memeriksa apakah koneksi terbuka dan semuanya baik-baik saja. </font><font style="vertical-align: inherit;">Saya menghilangkan pemeriksaan kesalahan untuk menghemat ruang (jangan centang penuh). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami mengatur Ticker secara tidak sinkron, yang akan mengirim ping setiap 15 detik, dan mulai mendengarkan saluran tempat kami berlangganan. </font><font style="vertical-align: inherit;">Jika kami mendapat ping, kami menerbitkan ping ini. </font><font style="vertical-align: inherit;">Jika kami menerima catatan, maka kami menerbitkan catatan ini untuk semua pelanggan Fanout ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara kerja fan-out?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam bahasa Rusia, ini diterjemahkan sebagai "pembagi". Kami memiliki satu objek yang mendaftarkan pelanggan yang ingin menerima pembaruan apa pun. Dan segera setelah pembaruan untuk objek ini tiba, menyebar pembaruan ini ke semua pelanggan yang dimilikinya. Cukup sederhana: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/je/tw/76/jetw76q3dzqifpq22yo9dc3j4ha.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana ini diterapkan pada Go: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/gl/o8/nzglo8wnz5iwzrtjfc39zlqqxa8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada struktur, disinkronkan menggunakan Mutex. Ia memiliki bidang yang menyimpan status koneksi Fanout ke basis data, yaitu, saat ini ia mendengarkan dan akan menerima pembaruan, serta daftar semua saluran yang tersedia - peta, yang kuncinya adalah saluran dan struct dalam bentuk nilai (pada kenyataannya, itu tidak digunakan dengan cara apa pun).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dua metode - Tersambung dan Terputus - memungkinkan Anda memberi tahu Fanout bahwa kami memiliki koneksi ke pangkalan, muncul dan bahwa koneksi ke pangkalan terputus. Dalam kasus kedua, Anda perlu memutuskan semua klien dan memberi tahu mereka bahwa mereka tidak dapat lagi mendengarkan apa pun dan bahwa mereka terhubung kembali, karena koneksi dengan mereka telah ditutup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada juga metode Berlangganan yang menambahkan saluran ke pendengar: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i1/hu/rh/i1hurht2d0x5mmdikeem_gpmm3i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada metode Berhenti Berlangganan yang menghapus saluran dari pendengar jika klien terputus, serta metode Terbitkan yang memungkinkan Anda mengirim pesan ke semua pelanggan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertanyaan:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Apa yang ditransmisikan melalui saluran ini? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sebuah model ditransmisikan yang telah berubah atau ping (pada dasarnya hanya angka, integer). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Anda dapat mengirim apa pun, menerbitkan struktur apa pun, hanya berubah menjadi JSON dan hanya itu. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Kami mendapat notifikasi dari Postgres - ini berisi nama tabel dan pengenal. </font><font style="vertical-align: inherit;">Dengan nama tabel yang kita dapatkan dan pengidentifikasi kita mendapatkan catatan yang kita butuhkan, dan sudah struktur ini dikirim untuk publikasi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infrastruktur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti apa infrastrukturnya? Kami memiliki 7 server besi: salah satunya sepenuhnya didedikasikan untuk pangkalan, komputer virtual berputar pada enam sisanya. Ada 6 salinan API: setiap mesin virtual dengan API berjalan pada server besi yang terpisah - ini untuk keandalan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/2_/4e/hu2_4eyv8ko_you4ygxuowle6m4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki dua frontend di mana Keepalived diinstal untuk meningkatkan aksesibilitas, sehingga jika satu frontend dapat menggantikan yang lainnya. Dua salinan CMS lainnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada juga importir statistik. Ada Slave DB dari mana cadangan dibuat secara berkala. Ada Pigeon Pusher - aplikasi yang mengirimkan pushies kepada pelanggan, serta hal-hal infrastruktur: Zabbix, Graylog2 dan Chef.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faktanya, infrastruktur ini berlebihan, karena 100 ribu dapat dilayani dengan server yang lebih sedikit. </font><font style="vertical-align: inherit;">Tapi ada besi - kami menggunakannya (kami diberitahu bahwa itu mungkin - mengapa tidak).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pros of Go</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah kami mengerjakan aplikasi ini, keuntungan yang jelas dari Go terungkap.</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pustaka http keren. </font><font style="vertical-align: inherit;">Dengan menggunakannya, Anda dapat membuat cukup banyak di luar kotak.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus, saluran yang memungkinkan kami menerapkan mekanisme pengiriman pemberitahuan ke pelanggan dengan sangat mudah.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detektor Ras yang luar biasa memungkinkan kami untuk menghilangkan beberapa bug kritis (staging-infrastruktur). </font><font style="vertical-align: inherit;">Segala sesuatu yang bekerja pada pementasan sedang berjalan, dikompilasi dengan kunci Race; </font><font style="vertical-align: inherit;">dan, karenanya, kita dapat melihat potensi masalah apa yang kita miliki pada infrastruktur pementasan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minimalisme dan kesederhanaan bahasa.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/eb/lc/mo/eblcmow1odoou6z22y2rady3n6k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mencari pengembang! </font><font style="vertical-align: inherit;">Jika seseorang ingin - tolong.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertanyaan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertanyaan dari hadirin (selanjutnya - B): - Sepertinya saya bahwa Anda melewatkan satu poin penting tentang Penggeledahan. Saya mengerti benar bahwa ketika Anda mengirim respons ke klien, Anda diblokir jika klien tidak ingin membaca? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tidak, kami tidak menghalangi. Pertama, kami memiliki semuanya di belakang nginx, yaitu, tidak ada masalah dengan klien yang lambat. Kedua, klien memiliki saluran dengan buffer - pada kenyataannya, kita dapat memasang hingga seratus pembaruan di sana ... Jika kita tidak dapat menulis ke saluran, maka itu menghapusnya. Jika kami melihat bahwa saluran tersebut diblokir, maka kami tutup saja salurannya, dan itu saja - klien akan menyambung kembali jika ada masalah. Karena itu, pada prinsipnya, pemblokiran tidak terjadi di sini. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Bisakah Anda segera mengirim untuk Mendengarkan / Memberitahu catatan, bukan tabel pengenal? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dengar / Beritahu memiliki batas 8 ribu byte per preload, yang dikirimkannya. Pada prinsipnya, akan mungkin untuk mengirim jika kami berurusan dengan sejumlah kecil data, tetapi menurut saya cara [seperti yang kita lakukan] lebih dapat diandalkan. Keterbatasan ada di Postgres itu sendiri. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Apakah pelanggan menerima pembaruan pada pertandingan yang tidak mereka minati? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Secara umum, ya. Sebagai aturan, ada 2-3 pertandingan secara paralel, dan kemudian sangat jarang. Jika klien menonton sesuatu, maka biasanya dia menonton pertandingan yang sedang berlangsung. Kemudian, pada klien ada basis data lokal di mana semua pembaruan ini ditambahkan, dan bahkan tanpa koneksi Internet, klien dapat melihat semua kecocokan sebelumnya di mana ia memiliki pembaruan. Faktanya, kami menyinkronkan basis data kami di server dengan basis data lokal klien sehingga dapat bekerja offline. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mengapa Anda membuat ORM Anda? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexey (salah satu pengembang "Watch +"):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Pada waktu itu (setahun yang lalu) ORM kurang dari sekarang, ketika ada cukup banyak dari mereka. Dari sebagian besar ORM yang ada, yang paling saya sukai adalah kebanyakan dari mereka bekerja pada antarmuka kosong. Yaitu, metode yang dalam </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORM </font><font style="vertical-align: inherit;">ini siap untuk melakukan apa saja: struktur, penunjuk struktur, angka, sesuatu yang tidak relevan sama sekali ... </font><font style="vertical-align: inherit;">ORM kami menghasilkan struktur berdasarkan model data. Diri. Dan karena itu, semua metode konkret, tidak menggunakan refleksi, dll. Mereka menerima struktur dan berharap untuk menggunakan struktur yang datang. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Berapa banyak orang yang berpartisipasi? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pada tahap awal, dua orang berpartisipasi. Di suatu tempat di bulan Juni kami mulai, pada bulan Agustus bagian utama sudah siap (versi pertama). Pada bulan September ada rilis. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DI:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Di mana Anda menggambarkan SSE, Anda tidak menggunakan batas waktu. Mengapa demikian? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sejujurnya, SSE masih merupakan protokol html5: standar SSE dirancang untuk berkomunikasi dengan browser, seperti yang saya mengerti. Ini memiliki fitur tambahan sehingga browser dapat terhubung kembali (dan sebagainya), tetapi kami tidak membutuhkannya, karena kami memiliki klien yang dapat menerapkan logika apa pun untuk menghubungkan dan menerima informasi. Kami lebih cenderung tidak SSE, tetapi sesuatu yang mirip dengan SSE. Ini bukan protokol itu sendiri. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak perlu. Sejauh yang saya mengerti, klien menerapkan mekanisme koneksi dari awal. Pada prinsipnya mereka tidak peduli. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Utilitas tambahan apa yang Anda gunakan? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Yang paling aktif kami menggunakan govet dan golint, sehingga gaya itu disatukan, serta gofmt. Mereka tidak menggunakan yang lain. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dengan apa yang Anda debug? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pada umumnya, debugging dilakukan menggunakan tes. Tidak ada debugger, GOP yang tidak kami gunakan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dapatkah Anda mengembalikan slide di mana fungsi Publikasikan diterapkan? Nama variabel satu huruf tidak mengganggu Anda? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tidak. Mereka memiliki ruang lingkup yang cukup "sempit". Mereka tidak digunakan di tempat lain (kecuali di sini) (kecuali untuk bagian dalam kelas ini), dan sangat kompak - hanya membutuhkan 7 baris. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Entah bagaimana itu masih tidak intuitif ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Tidak, tidak, ini kode nyata! Ini bukan tentang gaya. Itu hanya utilitarian, kelas yang sangat kecil - hanya ada 3 bidang di dalam kelas ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/vb/a8/yxvba8lbupf_3aw2halepbbmlce.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Secara umum, semua data yang disinkronkan dengan pelanggan (pertandingan musiman, pemain) tidak berubah. Secara kasar, jika kita akan melakukan beberapa olahraga lain di mana akan diperlukan untuk mengubah pertandingan, kami hanya akan mempertimbangkan segala sesuatu dalam versi baru dari klien, dan versi lama dari klien akan dilarang. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Apakah ada paket pihak ketiga untuk manajemen ketergantungan? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Kami dulu pakai dep. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ada sesuatu tentang video dalam subjek laporan, tetapi tidak ada tentang video dalam laporan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tidak, saya tidak punya topik tentang video. Ini disebut "Lihat +" - ini adalah nama aplikasi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DI:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Anda mengatakan bahwa Anda streaming ke pelanggan? .. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Kami tidak melakukan streaming video. </font><font style="vertical-align: inherit;">Ini sepenuhnya dilakukan oleh Megaphone. </font><font style="vertical-align: inherit;">Ya, saya tidak mengatakan bahwa aplikasi tersebut adalah megafon. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pergi - untuk mengirim semua data - berdasarkan skor, pertandingan, statistik ... Go - ini adalah backend keseluruhan untuk aplikasi. </font><font style="vertical-align: inherit;">Klien harus mencari tahu dari suatu tempat tautan mana yang digunakan untuk pemain sehingga pengguna dapat menonton pertandingan. </font><font style="vertical-align: inherit;">Kami memiliki tautan ke video dan streaming yang disiapkan.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Kq0cWRBd1MU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit iklan :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih untuk tetap bersama kami. Apakah Anda suka artikel kami? Ingin melihat materi yang lebih menarik? Dukung kami dengan melakukan pemesanan atau merekomendasikan kepada teman Anda </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS berbasis cloud untuk pengembang mulai $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analog unik dari server entry-level yang diciptakan oleh kami untuk Anda: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seluruh kebenaran tentang VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps mulai dari $ 19 atau cara membagi server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (opsi tersedia dengan RAID1 dan RAID10, hingga 24 core dan hingga 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 kali lebih murah di pusat data Equinix Tier IV di Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hanya kami yang memiliki </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV dari $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di Belanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - mulai dari $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca tentang</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cara Membangun Infrastruktur Bldg. </font><font style="vertical-align: inherit;">kelas c menggunakan server Dell R730xd E5-2650 v4 seharga 9.000 euro untuk satu sen?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id490738/index.html">Prinsip substitusi yang cepat</a></li>
<li><a href="../id490740/index.html">Kerusakan seksual bukan hanya pengacakan</a></li>
<li><a href="../id490742/index.html">Era baru dalam robotika telah dimulai</a></li>
<li><a href="../id490746/index.html">Peringkat di Yandex.Taxi: posting pendek tentang topik serius</a></li>
<li><a href="../id490748/index.html">Tugas untuk pengembang, atau cara kami memindai pemindai tangan tanpa vendor</a></li>
<li><a href="../id490754/index.html">Editor Kode Kode Visual Studio. Panduan paling terperinci untuk menyiapkan dan memasang plugin untuk pemula</a></li>
<li><a href="../id490756/index.html">Menyebarkan Jenkins sebagai kode</a></li>
<li><a href="../id490758/index.html">Matematikawan telah membuktikan hukum turbulensi universal</a></li>
<li><a href="../id490760/index.html">Ray Casting Visual Search (RCVS). Algoritma sederhana dan cepat untuk menemukan model 3D yang serupa dalam geometri</a></li>
<li><a href="../id490762/index.html">Bagaimana cara meramalkan tiket pesawat?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>