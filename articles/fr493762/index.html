<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😵 🐵 🤴🏿 Comment organiser le backend d'une application mobile? 💅🏻 🧖🏿 👨🏿‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qu'est-ce que nous faisons? Service d'enregistrement et d'autorisation des utilisateurs pour une application mobile
 
 Dans les projets pour animaux d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment organiser le backend d'une application mobile?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493762/"><img src="https://habrastorage.org/webt/cx/ck/zj/cxckzjwahn-3ez4gx8w1tlrzspq.jpeg" alt="image"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que nous faisons? Service d'enregistrement et d'autorisation des utilisateurs pour une application mobile</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dans les projets pour animaux de compagnie de chaque développeur mobile, tôt ou tard, il arrive un moment où vous devez rapidement et sans trop de maux de tête créer un serveur pour votre application. Peu importe la fonction que le serveur doit effectuer: qu'il s'agisse de stockage de données ou d'enregistrement / autorisation d'utilisateur. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En règle générale, au début, tout le monde suit (enfin, ou presque) le chemin de la moindre résistance.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nous recherchons une solution clé en main et voyons à quelle vitesse elle peut s'adapter à nos besoins.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, la première chose que vous pouvez «google» est les services Firebase, dont les limites gratuites sont plus que suffisantes pour organiser le backend d'une petite application mobile. </font><font style="vertical-align: inherit;">Mais dans ce cas, compte tenu exactement du développeur russe, nous risquons de marcher sur le rake de notre législation - le transfert de données transfrontalier et le stockage des données personnelles de l'utilisateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Loi fédérale 152 sur les données personnelles, article 12, chapitre 2) La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tentation d'utiliser Firebase est grande, mais si nous voulons nous assurer contre les tracas inutiles avec diverses agences de surveillance, nous commençons à chercher des options alternatives.</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'étape suivante est l'utilisation d'un serveur VDS avec une sorte de solution open source ou freemium, où le «service en tant que service» prêt à l'emploi ou une solution permettant de déployer des fonctionnalités similaires est pris comme base.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a plusieurs années, sur Habré, j'ai déjà écrit un guide de configuration détaillé de BaasBox (l'article a été retiré du public en raison d'informations obsolètes) sur un serveur loué et a donné un exemple d'utilisation de divers appels dans l'application iOS pour le langage Objective C.Mais BaasBox est vraiment «lourd» et dicte votre minimum pour un serveur loué. Ayant joué un peu avec lui, il a été décidé d'utiliser une solution différente. À cette époque, le serveur Parse n'était soumis que récemment au développement open source par Facebook, il ne disposait pas d'autant d'adaptateurs qu'il l'est actuellement, mais ses capacités étaient plus que suffisantes pour les projets personnels et les applications de clients privés (de nombreux projets sont encore existent et fonctionnent de manière stable).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En toute honnêteté, il convient de noter que le serveur d'analyse a beaucoup mûri et se développe activement. À l'heure actuelle, presque toutes les fonctionnalités disponibles dans un ancêtre commercial ont été recréées. Vous pouvez écrire vos propres hooks, des notifications push localisées, un gestionnaire de processus, et il y a même un abonnement pour changer des objets en fonction des sockets (ParseLiveQuery - si c'est intéressant, j'écrirai un article séparé sur la configuration de ParseLiveQuery).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le serveur d'analyse a cessé d'être intéressant précisément au moment où il était nécessaire de mettre en œuvre un type de données non standard, ce qui est difficile à travailler sur la base de types définis dans le système. Cela interfère également avec le fait que, n'étant pas un développeur de serveur spécialisé, je n'attachais auparavant pas d'importance à un déploiement plus efficace de l'environnement et de nombreux fichiers de configuration ont été créés à la main, tandis que les actions étaient constamment répétées sur chaque nouveau serveur. C'est à ce moment que la compréhension vient qu'une solution en boîte n'est pas une solution à tous les problèmes, et vous devez passer à l'étape suivante de l'organisation de votre serveur pour une application mobile. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Récemment, mon principal langage de développement est Swift.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est donc lui qui m'intéresse principalement dans l'écriture de code côté serveur. </font><font style="vertical-align: inherit;">Swift lui-même est facile à installer sur un système Unix, mais il ne donnera aucun avantage évident. </font><font style="vertical-align: inherit;">À la base, il ressemblera au développement d'une application console avec une logique complexe. </font><font style="vertical-align: inherit;">Il faudra beaucoup de temps pour recréer les méthodes de base requises sur le serveur. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme dans de nombreuses autres langues, swift côté serveur a ses propres cadres et communautés impliqués dans le développement de ces solutions. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'heure actuelle, il existe trois solutions les plus importantes pour développer Swift côté serveur:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parfait</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vapeur </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kitura</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe d'autres options, mais elles ne méritent pas d'être mentionnées en raison de leur développement interrompu depuis longtemps et de leur mort. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En termes de documentation et de support, j'aime plus Vapor, mais c'est une question de goût. D'autres solutions seront proches de quelqu'un. D'une manière ou d'une autre, dans de nombreux moments, ils sont similaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturellement, plus loin dans le cycle d'articles dans mes exemples, j'utiliserai Vapor. Sur cette base, nous mettons en œuvre le service d'enregistrement / autorisation des utilisateurs, l'envoi et la confirmation des e-mails, la possibilité de réinitialiser et de changer le mot de passe. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vw/cb/al/vwcbalyvknowex3y_gfdmut4gzg.png" alt="image"><img src="https://habrastorage.org/webt/3p/vg/os/3pvgos4ozvoxeqhby2co5gd53b8.png" alt="image"><br>
<img src="https://habrastorage.org/webt/tj/r3/qb/tjr3qbenlq1jqhmuwfasf4mduqq.png" alt="image"><img src="https://habrastorage.org/webt/hj/kb/vy/hjkbvy9ei-pojewwbv4z6ywnu84.png" alt="image"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vaut-il la peine de faire une implémentation sans bénéfice pratique?</font></font></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Probablement pas! Par conséquent, nous ferons le service le plus adulte que vous puissiez prendre et utiliser pour organiser la logique de stockage des données utilisateur sur votre serveur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la décision est adulte, elle implique le recours à des décisions délibérées. </font><font style="vertical-align: inherit;">Nous devons simplifier la mise à l'échelle, implémenter la validation des données et prévoir le stockage de la session utilisateur, afin de ne pas l'obliger à saisir à chaque fois son identifiant et son mot de passe. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De quoi avons-nous besoin pour cela?</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VAPOR 4 (oui, toujours en version bêta, mais la sortie arrive bientôt, comme promis par les développeurs)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL (il existe un excellent adaptateur pour travailler avec cette base de données)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL (fermez toutes nos demandes du client au serveur à l'aide d'un certificat)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Localhost (pensez à la méthode de développement localement, afin de ne pas vous attacher au réseau et travailler sur la route sans aucun problème)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, nous </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emballerons tout cela dans Docker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour garantir le même travail, indépendamment de l'environnement d'exécution actuel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Honnêtement, j'étais sceptique à l'égard du docker à un moment donné, mais j'aurais dû regarder de plus près cette technologie. Le but de l'article n'est pas d'expliquer son travail et d'apprendre à travailler avec lui (je soupçonne que je dois moi-même encore apprendre de nombreuses fonctionnalités intéressantes du docker). Mais ceux qui ne savent pas ce que c'est et comment travailler avec lui peuvent se familiariser indépendamment avec Docker via le lien officiel: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.docker.com Pour l'</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
avenir, je vais laisser un lien utile vers l'application Kitematic, qui est conçue pour simplifier le travail avec les conteneurs </font><font style="vertical-align: inherit;">Docker </font><font style="vertical-align: inherit;">: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kitematic.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (indispensable pour ceux qui n'aiment pas utiliser le terminal).</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commençons donc par installer Docker sur un ordinateur Mac: </font></font></b><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">suivez le</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
lien </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub.docker.com/editions/community/docker-ce-desktop-mac</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et téléchargez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get Docker Desktop For Mac (Stable).</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/-2/kn/cl/-2knclw93ax6stjjuiijrsr02fq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ouvrez l'image résultante et n'installez rien diffère de la copie standard de l'application dans le répertoire du programme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/0o/t1/ea0ot1fxqjce-px54lvazivob7q.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, lancez simplement l'application et attendez que le service soit complètement initialisé. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tc/fp/pc/tcfppc1iaj4q8ozy5cpgfziywfo.png" alt="image"><img src="https://habrastorage.org/webt/yp/_h/1s/yp_h1sn62l0sbk0fugzerwpqyhe.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il n'y a pas encore d'ID Docker, alors il doit être créé sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub.docker.com.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Et si c'est le cas, connectez-vous simplement à l'application. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wy/xv/iq/wyxviqdri5ynenssj2-oayiy5mi.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout, la préparation à l'utilisation de Docker est terminée. Il ne reste plus qu'à vérifier la version actuelle et les informations sur l'environnement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&gt; version </font></font><br>
<img src="https://habrastorage.org/webt/8g/yb/_k/8gyb_kqje0p5rsbelsf9wpzf9fm.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
docker&gt; info docker</font></font><br>
<img src="https://habrastorage.org/webt/oc/g5/x1/ocg5x1slt4bmqm4srhm7adobq2i.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci termine la préparation du développement du service d'autorisation. </font><font style="vertical-align: inherit;">Dans la partie suivante, nous verrons comment vous pouvez utiliser des conteneurs de divers services, nous traiterons de docker-compose pour automatiser l'assemblage de notre environnement et commencer à écrire du code. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS: Un petit conseil d'expérience personnelle. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque nous développons des services sur notre machine locale, Docker alloue des ressources par défaut à notre usage. </font><font style="vertical-align: inherit;">Si nous voulons visualiser le comportement attendu du service sur un serveur distant, nous devons nous occuper des ressources sur la machine locale, au plus près des caractéristiques du serveur. </font><font style="vertical-align: inherit;">Vous pouvez le faire dans les paramètres de l'application Docker Desktop, que nous avons téléchargée: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hs/h9/ds/hsh9dspn18hwwbsqywrj-hjjuds.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auteur de l'article: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vitaly Podolsky, professeur HackerU</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr493748/index.html">Intérêt pour le coronavirus COVID-19 sur Internet. Que recherchent-ils, combien, où et comment? Voyons voir Yandex.Wordstat et Google.</a></li>
<li><a href="../fr493752/index.html">CAPTCHA pour codeigniter 4</a></li>
<li><a href="../fr493756/index.html">Comment lancer une startup sur les marchés étrangers en quarantaine: Reddit, Product Hunt, ressources en Amérique latine</a></li>
<li><a href="../fr493758/index.html">L'intelligence artificielle créera d'abord un corpus d'anciens manuscrits slaves</a></li>
<li><a href="../fr493760/index.html">Technologie Li-Ion: le coût unitaire diminue plus rapidement que prévu</a></li>
<li><a href="../fr493768/index.html">React Native Listing</a></li>
<li><a href="../fr493772/index.html">Les 10 meilleurs trucs et astuces de Kubernetes</a></li>
<li><a href="../fr493796/index.html">4 meilleurs modèles de conception pour les tests automatisés (et 86 autres)</a></li>
<li><a href="../fr493798/index.html">Il n'y a pas de conception dans 1C UX / UI</a></li>
<li><a href="../fr493800/index.html">Probabilité empirique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>