<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪🏾 🖋️ 🤽🏼 Web3を使用してJPMorgan Quorumブロックチェーンでパブリックおよびプライベートトランザクションを実行する 🤸 ☝🏼 🔌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quorumは、JPMorganによって開発されたEthereumベースのブロックチェーンであり、最近ではMicrosoft Azureが提供する最初の分散レジストリプラットフォームとなっています。
 

Quorumは、プライベートトランザクションとパブリックトランザクションをサポートし、多くの商...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Web3を使用してJPMorgan Quorumブロックチェーンでパブリックおよびプライベートトランザクションを実行する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456368/"><p> <img src="https://habrastorage.org/webt/dn/2r/f3/dn2rf3fmls1j424_o0ejhkjcxxe.jpeg"><br>
</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quorum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、JPMorganによって開発されたEthereumベースのブロックチェーンであり、最近ではMicrosoft Azureが提供する最初の分散レジストリプラットフォームとなっています。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quorumは、プライベートトランザクションとパブリックトランザクションをサポートし、多くの商用ユースケースがあります。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事では、これらのシナリオの1つを分析します-倉庫の温度に関する関連情報を提供するための、スーパーマーケットと倉庫所有者間の分散レジストリネットワークの配置。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このガイドで使用されているコードは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">リポジトリにあります</font></a><font style="vertical-align: inherit;">。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事の内容：</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマート契約の作成;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用して、ネットワークの展開クォーラム</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chainstackを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クォーラム公開トランザクション</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クォーラムプライベートトランザクション。</font></font></li>
</ul><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これを説明するために、物事のインターネット（IoT）の一部として、クォーラムネットワーク参加者の保管室での温度監視のシナリオを使用します。</font></font></p><a name="habracut"></a><br>
<h2 id="kontekst"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">環境</font></font></h2><br>
<p>              .      Quorum.       :     .</p><br>
<p>       ,   .     ,          .        .</p><br>
<p>       .           ,      .</p><br>
<p>           .</p><br>
<h2 id="smart-kontrakt">-</h2><br>
<p>   -,    .      <code>temperature</code>,     <code>set</code>    <code>get</code>.</p><br>
<pre><code class="javascript hljs">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.25</span>;<font></font>
contract TemperatureMonitor {<font></font>
  int8 public temperature;<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set</span>(<span class="hljs-params">int8 temp</span>) <span class="hljs-title">public</span> </span>{<font></font>
    temperature = temp;<font></font>
  }<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params"></span>) <span class="hljs-title">view</span> <span class="hljs-title">public</span> <span class="hljs-title">returns</span> (<span class="hljs-params">int8</span>) </span>{
    <span class="hljs-keyword">return</span> temperature;<font></font>
  }<font></font>
}</code></pre><br>
<p> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">web3.js</a>,      ABI  .   <code>formatContract</code>,  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">solc-js</a>.</p><br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatContract</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> path = <span class="hljs-string">'./contracts/temperatureMonitor.sol'</span>;
  <span class="hljs-keyword">const</span> source = fs.readFileSync(path,<span class="hljs-string">'UTF8'</span>);
<span class="hljs-keyword">return</span> solc.compile(source, <span class="hljs-number">1</span>).contracts[<span class="hljs-string">':TemperatureMonitor'</span>];<font></font>
}</code></pre><br>
<p>    :</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// interface</span><font></font>
[ <font></font>
  { <font></font>
    <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">inputs</span>: [],
    <span class="hljs-attr">name</span>: ‘get’,
    <span class="hljs-attr">outputs</span>: [<span class="hljs-built_in">Array</span>],
    <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">stateMutability</span>: ‘view’,
    <span class="hljs-attr">type</span>: ‘<span class="hljs-function"><span class="hljs-keyword">function</span>’ 
  },
  </span>{ 
    <span class="hljs-attr">constant</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">inputs</span>: [],
    <span class="hljs-attr">name</span>: ‘temperature’,
    <span class="hljs-attr">outputs</span>: [<span class="hljs-built_in">Array</span>],
    <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">stateMutability</span>: ‘view’,
    <span class="hljs-attr">type</span>: ‘<span class="hljs-function"><span class="hljs-keyword">function</span>’ 
  },
  </span>{
    <span class="hljs-attr">constant</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">inputs</span>: [<span class="hljs-built_in">Array</span>],
    <span class="hljs-attr">name</span>: ‘set’,
    <span class="hljs-attr">outputs</span>: [],
    <span class="hljs-attr">payable</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">stateMutability</span>: ‘nonpayable’,
    <span class="hljs-attr">type</span>: ‘<span class="hljs-function"><span class="hljs-keyword">function</span>’ 
  }
]</span></code></pre><br>
<pre><code class="plaintext hljs">// bytecode<font></font>
0x608060405234801561001057600080fd5b50610104806100206000396000f30060806040526004361060525763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416636d4ce63c81146057578063adccea12146082578063faee13b9146094575b600080fd5b348015606257600080fd5b50606960ae565b60408051600092830b90920b8252519081900360200190f35b348015608d57600080fd5b50606960b7565b348015609f57600080fd5b5060ac60043560000b60c0565b005b60008054900b90565b60008054900b81565b6000805491810b60ff1660ff199092169190911790555600a165627a7a72305820af0086d55a9a4e6d52cb6b3967afd764ca89df91b2f42d7bf3b30098d222e5c50029</code></pre><br>
<p>,   ,      .</p><br>
<h2 id="razvertyvanie-nod"> </h2><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/4e5/8d2/0d2/4e58d20d27bfa4aa8b4da4bbf990ac53.jpg" alt="画像"></p><br>
<p>             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Chainstack</a>.</p><br>
<p>     Quorum   Raft   .</p><br>
<p>       Quorum Project:</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/193/316/b8e/193316b8ef875ed68e491804b5a7ff7d.gif" alt="画像"></p><br>
<p>  Quorum   Raft  Google Cloud Platform:</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/2f3/650/f1e/2f3650f1e98174694c46f6cd31040d4c.gif" alt="画像"></p><br>
<p>         :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/cb5/77b/5f7/cb577b5f7516664e64951f6404711eaa.gif" alt="画像"></p><br>
<p>  :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/243/c4d/056/243c4d0569c5d6b3accb3d1166e2b2f6.png" alt="画像"></p><br>
<p>    RPC endpoint,    . .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/a35/61a/29a/a3561a29a5f38d410ed92c99a645b2c1.png" alt="画像"></p><br>
<p> .    -      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">web3.js</a>.</p><br>
<h2 id="publichnye-tranzakcii"> </h2><br>
<h3 id="kontekst-1"></h3><br>
<p>        ,   ,      .</p><br>
<p>                  ,      .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/03e/028/5ca/03e0285ca0b59b6b96351d5b99d95408.png" alt="画像"></p><br>
<p>   ,   :</p><br>
<ol>
<li><p>   <b>Node 1</b>:</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> contractAddress = <span class="hljs-keyword">await</span> deployContract(raft1Node);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Contract address after deployment: <span class="hljs-subst">${contractAddress}</span>`</span>);</code></pre><br>
</li>
<li><p>   <b>Node 2</b>  3 :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> status = <span class="hljs-keyword">await</span> setTemperature(raft2Node, contractAddress, <span class="hljs-number">3</span>);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Transaction status: <span class="hljs-subst">${status}</span>`</span>);</code></pre><br>
</li>
<li><p><b>Node 3</b>    -.    3 :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> temp = <span class="hljs-keyword">await</span> getTemperature(raft3Node, contractAddress);
<span class="hljs-built_in">console</span>.log(‘Retrieved contract Temperature’, temp);</code></pre><br>
<p>        Quorum   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">web3.js</a>.</p><br>
</li>
</ol><br>
<p>   RPC   :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> raft1Node = <span class="hljs-keyword">new</span> Web3(
 <span class="hljs-keyword">new</span> Web3.providers.HttpProvider(process.env.RPC1), <span class="hljs-literal">null</span>, {
   <span class="hljs-attr">transactionConfirmationBlocks</span>: <span class="hljs-number">1</span>,<font></font>
 },<font></font>
);<font></font>
<span class="hljs-keyword">const</span> raft2Node = <span class="hljs-keyword">new</span> Web3(
 <span class="hljs-keyword">new</span> Web3.providers.HttpProvider(process.env.RPC2), <span class="hljs-literal">null</span>, {
   <span class="hljs-attr">transactionConfirmationBlocks</span>: <span class="hljs-number">1</span>,<font></font>
 },<font></font>
);<font></font>
<span class="hljs-keyword">const</span> raft3Node = <span class="hljs-keyword">new</span> Web3(
 <span class="hljs-keyword">new</span> Web3.providers.HttpProvider(process.env.RPC3), <span class="hljs-literal">null</span>, {
   <span class="hljs-attr">transactionConfirmationBlocks</span>: <span class="hljs-number">1</span>,<font></font>
 },<font></font>
);</code></pre><br>
<p> -:</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// returns the default account from the Web3 instance initiated previously</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAddress</span>(<span class="hljs-params">web3</span>) </span>{
  <span class="hljs-keyword">return</span> web3.eth.getAccounts().then(<span class="hljs-function"><span class="hljs-params">accounts</span> =&gt;</span> accounts[<span class="hljs-number">0</span>]);<font></font>
}<font></font>
<span class="hljs-comment">// Deploys the contract using contract's interface and node's default address</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deployContract</span>(<span class="hljs-params">web3</span>) </span>{
  <span class="hljs-keyword">const</span> address = <span class="hljs-keyword">await</span> getAddress(web3);
<span class="hljs-comment">// initiate contract with contract's interface</span>
  <span class="hljs-keyword">const</span> contract = <span class="hljs-keyword">new</span> web3.eth.Contract(<font></font>
    temperatureMonitor.interface<font></font>
  );<font></font>
<span class="hljs-keyword">return</span> contract.deploy({
    <span class="hljs-comment">// deploy contract with contract's bytecode</span>
    <span class="hljs-attr">data</span>: temperatureMonitor.bytecode,<font></font>
  })<font></font>
  .send({<font></font>
    <span class="hljs-attr">from</span>: address,
    <span class="hljs-attr">gas</span>: <span class="hljs-string">'0x2CD29C0'</span>,<font></font>
  })<font></font>
  .on(<span class="hljs-string">'error'</span>, <span class="hljs-built_in">console</span>.error)<font></font>
  .then(<span class="hljs-function">(<span class="hljs-params">newContractInstance</span>) =&gt;</span> {
    <span class="hljs-comment">// returns deployed contract address</span>
    <span class="hljs-keyword">return</span> newContractInstance.options.address;<font></font>
  });<font></font>
}</code></pre><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">web3.js</a>       : <code>call</code>  <code>send</code>.</p><br>
<p>    <code>set</code>   web3 <code>send</code>.</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// get contract deployed previously</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContract</span>(<span class="hljs-params">web3, contractAddress</span>) </span>{
  <span class="hljs-keyword">const</span> address = <span class="hljs-keyword">await</span> getAddress(web3);
<span class="hljs-keyword">return</span> web3.eth.Contract(<font></font>
    temperatureMonitor.interface,<font></font>
    contractAddress, {<font></font>
      <span class="hljs-attr">defaultAccount</span>: address,<font></font>
    }<font></font>
  );<font></font>
}<font></font>
<span class="hljs-comment">// calls contract set method to update contract's temperature</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setTemperature</span>(<span class="hljs-params">web3, contractAddress, temp</span>) </span>{
  <span class="hljs-keyword">const</span> myContract = <span class="hljs-keyword">await</span> getContract(web3, contractAddress);
<span class="hljs-keyword">return</span> myContract.methods.set(temp).send({}).then(<span class="hljs-function">(<span class="hljs-params">receipt</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> receipt.status;<font></font>
  });<font></font>
}</code></pre><br>
<p>   web3 <code>call</code>    .  ,   <code>call</code>           .</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// calls contract get method to retrieve contract's temperature</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTemperature</span>(<span class="hljs-params">web3, contractAddress</span>) </span>{
  <span class="hljs-keyword">const</span> myContract = <span class="hljs-keyword">await</span> getContract(web3, contractAddress);
<span class="hljs-keyword">return</span> myContract.methods.get().call().then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> result);<font></font>
}</code></pre><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">public.js</a>    :</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Execute public script</span><font></font>
node public.js<font></font>
Contract address after deployment: <span class="hljs-number">0xf46141Ac7D6D6E986eFb2321756b5d1e8a25008F</span>
Transaction status: <span class="hljs-literal">true</span>
Retrieved contract Temperature <span class="hljs-number">3</span></code></pre><br>
<p>       Quorum   Chainstack,   .</p><br>
<p>      :</p><br>
<ol>
<li>   .</li>
<li>      3 .</li>
<li>     ,    .</li>
</ol><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/6fb/104/097/6fb10409705859a6672a53d76356a55c.png" alt="画像"></p><br>
<h2 id="privatnye-tranzakcii"> </h2><br>
<h3 id="kontekst-2"></h3><br>
<p>     .     ,   <i>C</i>         <i></i>:</p><br>
<ul>
<li><i></i>   IoT-     30     <i>C</i>;</li>
<li>      <i></i>  <i></i>,    .</li>
</ul><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/deb/3b1/a51/deb3b1a51e681fe664bc49b2d6eb8307.png" alt="画像"></p><br>
<p>   ,    .</p><br>
<ul>
<li>           :</li>
<li><i></i>  -,     <i></i>  <i></i>.</li>
<li><i> </i>      -.</li>
</ul><br>
<p>   <code>get</code>  <code>set</code>   <i></i>  <i></i>     Quorum.</p><br>
<ol>
<li><p>     <i></i>  <i></i>   <i></i>:</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> contractAddress = <span class="hljs-keyword">await</span> deployContract(<font></font>
raft1Node,<font></font>
process.env.PK2,<font></font>
);<font></font>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Contract address after deployment: <span class="hljs-subst">${contractAddress}</span>`</span>);</code></pre><br>
</li>
<li><p>   <i> </i> ( )    :</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Attempts to set Contract temperature to 10, this will not mutate contract's temperature</span>
<span class="hljs-keyword">await</span> setTemperature(<font></font>
raft3Node,<font></font>
contractAddress,<font></font>
process.env.PK1,<font></font>
<span class="hljs-number">10</span>,<font></font>
);<font></font>
<span class="hljs-comment">// This returns null</span>
<span class="hljs-keyword">const</span> temp = <span class="hljs-keyword">await</span> getTemperature(raft3Node, contractAddress);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[Node3] temp retrieved after updating contract from external nodes: <span class="hljs-subst">${temp}</span>`</span>);</code></pre><br>
</li>
<li><p>   <i></i> ( )    :</p><br>
<p>       -  12.  ,  <i></i>      -.</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Updated Contract temperature to 12 degrees</span>
<span class="hljs-keyword">await</span> setTemperature(<font></font>
raft2Node,<font></font>
contractAddress,<font></font>
process.env.PK1,<font></font>
<span class="hljs-number">12</span>,<font></font>
);<font></font>
<span class="hljs-comment">// This returns 12</span>
<span class="hljs-keyword">const</span> temp2 = <span class="hljs-keyword">await</span> getTemperature(raft2Node, contractAddress);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[Node2] temp retrieved after updating contract from internal nodes: <span class="hljs-subst">${temp2}</span>`</span>);</code></pre><br>
</li>
<li><p>   <i> </i> ( ):</p><br>
<p>  3      12,  <i> </i>     -.      null.</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// This returns null</span>
<span class="hljs-keyword">const</span> temp3 = <span class="hljs-keyword">await</span> getTemperature(raft3Node, contractAddress);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[Node3] temp retrieved from external nodes after update <span class="hljs-subst">${temp}</span>`</span>);</code></pre><br>
<p>         Quorum  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">web3.js</a>.        ,    ,     .</p><br>
</li>
</ol><br>
<p> ,  ,   ,  ,     (permissioned)             ,   .</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deployContract</span>(<span class="hljs-params">web3, publicKey</span>) </span>{
  <span class="hljs-keyword">const</span> address = <span class="hljs-keyword">await</span> getAddress(web3);
  <span class="hljs-keyword">const</span> contract = <span class="hljs-keyword">new</span> web3.eth.Contract(<font></font>
    temperatureMonitor.interface,<font></font>
  );<font></font>
<span class="hljs-keyword">return</span> contract.deploy({
    <span class="hljs-attr">data</span>: temperatureMonitor.bytecode,<font></font>
  })<font></font>
  .send({<font></font>
    <span class="hljs-attr">from</span>: address,
    <span class="hljs-attr">gas</span>: ‘<span class="hljs-number">0x2CD29C0</span>’, 
    <span class="hljs-comment">// Grant Permission to Contract by including nodes public keys</span>
    <span class="hljs-attr">privateFor</span>: [publicKey],<font></font>
  })<font></font>
  .then(<span class="hljs-function">(<span class="hljs-params">contract</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> contract.options.address;<font></font>
  });<font></font>
}</code></pre><br>
<p>      —        .</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setTemperature</span>(<span class="hljs-params">web3, contractAddress, publicKey, temp</span>) </span>{
  <span class="hljs-keyword">const</span> address = <span class="hljs-keyword">await</span> getAddress(web3);
  <span class="hljs-keyword">const</span> myContract = <span class="hljs-keyword">await</span> getContract(web3, contractAddress);
<span class="hljs-keyword">return</span> myContract.methods.set(temp).send({
    <span class="hljs-attr">from</span>: address,
    <span class="hljs-comment">// Grant Permission by including nodes public  keys</span>
    <span class="hljs-attr">privateFor</span>: [publicKey],<font></font>
  }).then(<span class="hljs-function">(<span class="hljs-params">receipt</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> receipt.status;<font></font>
  });<font></font>
}</code></pre><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">private.js</a>   :</p><br>
<pre><code class="bash hljs">node private.js<font></font>
Contract address after deployment: 0x85dBF88B4dfa47e73608b33454E4e3BA2812B21D<font></font>
[Node3] temp retrieved after updating contract from external nodes: null<font></font>
[Node2] temp retrieved after updating contract from internal nodes: 12<font></font>
[Node3] temp retrieved from external nodes after update null</code></pre><br>
<p> Quorum  Chainstack  :</p><br>
<ul>
<li>    <i></i>;</li>
<li> <code>SetTemperature</code>  <i> </i>;</li>
<li> <code>SetTemperature</code>   <i></i>.</li>
</ul><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/e14/6d2/660/e146d2660771f328fda7087facaec1e7.png" alt="画像"></p><br>
<p> ,   ,      <i></i>    .  ,    ,         .</p><br>
<h2 id="zaklyuchenie"></h2><br>
<p>     Quorum                —    .</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは、公共および民間の取引を通じて、関連する気温情報を維持する方法を示しました。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くのアプリケーションシナリオが存在する可能性があり、ご覧のとおり、これはまったく難しくありません。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実験して、スクリプトをデプロイしてみてください。</font><font style="vertical-align: inherit;">さらに、ブロックチェーン技術産業</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は2024年までにほぼ10倍に成長する可能性があり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja456352/index.html">無線オブジェクト通信モジュールWISE-4000</a></li>
<li><a href="../ja456354/index.html">テレビボックスの回収方法</a></li>
<li><a href="../ja456358/index.html">昨年の最も不規則な記事の13</a></li>
<li><a href="../ja456362/index.html">レベル6デザイナー：デザイナーの意欲と開発の仕方</a></li>
<li><a href="../ja456366/index.html">LEDハートボックスの設計方法</a></li>
<li><a href="../ja456370/index.html">QsanストレージにQoSを実装する</a></li>
<li><a href="../ja456372/index.html">SimbirSoftはITプロフェッショナルを集中的な夏2019に招待します</a></li>
<li><a href="../ja456374/index.html">プラズマキャッシュブロックチェーンの状態データ構造</a></li>
<li><a href="../ja456376/index.html">1つの春のブーツではない：代替案の概要</a></li>
<li><a href="../ja456380/index.html">ネットロジーのプログラミング学部のオープンデー</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>