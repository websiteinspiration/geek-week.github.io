<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äç‚öñÔ∏è üèÜ üï∫üèº Juste un autre outil: apprendre √† conna√Ætre la configuration du service avec la configuration de l'√©tat souhait√©¬† üï¥üèª üïò üßòüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La configuration de l'√©tat souhait√© (DSC) est un outil de gestion de la configuration du serveur. Avec lui, vous pouvez configurer le serveur (apporte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Juste un autre outil: apprendre √† conna√Ætre la configuration du service avec la configuration de l'√©tat souhait√©¬†</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/503072/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La configuration de l'√©tat souhait√© (DSC) est un outil de gestion de la configuration du serveur. Avec lui, vous pouvez configurer le serveur (apporter des modifications au registre, copier des fichiers, installer et supprimer des composants), surveiller l'√©tat actuel des param√®tres et revenir rapidement aux param√®tres de base. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSC est int√©ressant pour ceux qui suivent l'approche DevOps. Cet outil s'int√®gre bien √† l'infrastructure en tant que paradigme de code: les d√©veloppeurs peuvent ajouter leurs exigences √† la configuration et l'inclure dans le syst√®me de contr√¥le de version, et les √©quipes peuvent d√©ployer le code sans utiliser de processus ¬´manuels¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stanislav Buldakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raiffeisenbank</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons combin√© notre exp√©rience avec le moteur DSC et l'avons divis√© en 2 articles. </font><font style="vertical-align: inherit;">Dans la premi√®re, nous analyserons les principes de base du travail et nous familiariserons avec les caract√©ristiques d'utilisation sur des exemples pratiques:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´D√©ballez la bo√Æte¬ª avec le moteur DSC, voyez quelles sont les ressources par d√©faut et montrez o√π trouver des ressources suppl√©mentaires;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voyons comment d√©crire la configuration dans DSC;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous apprendrons comment l'agent int√©gr√© Local Configuration Manager applique les configurations sur le serveur, montrerons comment il est configur√© √† l'aide de m√©ta-configurations;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passons √† des cas de configuration plus complexes: configurations partielles et configurations de stub.</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/webt/6p/cb/my/6pcbmyoaiunjv7xpcgcckapk4ok.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSC est un moteur l√©ger et rapide. </font><font style="vertical-align: inherit;">Par exemple, en l'utilisant, vous pouvez installer le .NET Framework 3.5 sur des machines virtuelles beaucoup plus rapidement. </font><font style="vertical-align: inherit;">Voici ce qui l'aide √† acc√©l√©rer le processus de configuration du service:</font></font><br>
<br>
<ul>
<li><b> ¬´ ¬ª   Windows   PowerShell.&nbsp;</b><br>
DSC     PowerShell      Windows Management Framework.  Linux  .  ,     PowerShell.&nbsp;</li>
<li><b>,       .&nbsp;</b><br>
 ,     ,   ,     .         DSC.&nbsp;</li>
<li><b>,            .</b> <br>
DSC          ,     .           .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les configurations sont toujours effectu√©es de mani√®re s√©quentielle, sans conditions ni branchement. </font><font style="vertical-align: inherit;">Par cons√©quent, bri√®vement, l'algorithme d'op√©ration DSC ressemble √† ceci:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le gestionnaire de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> configuration </font><b><font style="vertical-align: inherit;">local (LCM)</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il s'agit de l'agent int√©gr√© charg√© d'appliquer les configurations au serveur. </font><font style="vertical-align: inherit;">Nous lui disons comment les configurations d√©clar√©es devraient fonctionner et dans quel ordre.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si des ressources suppl√©mentaires sont n√©cessaires, installez-les et connectez-les √† l'avance.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sous une forme d√©clarative, nous √©crivons l'ordre de configuration.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous diffusons la configuration au format du fichier MOF.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous envoyons la configuration au serveur fra√Æchement d√©ploy√© ou existant cible.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCM re√ßoit la configuration (fichier MOF) ainsi que les instructions de configuration du LCM lui-m√™me.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La configuration est imm√©diatement appliqu√©e par notre √©quipe.</font></font><br>
</li>
</ol><br>
<img src="https://habrastorage.org/webt/xi/-k/br/xi-kbrc_in9acfygcdn5a_o9fly.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un sch√©ma simplifi√© de l'architecture DSC. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons commencer notre connaissance du moteur en √©tudiant les ressources pr√©d√©finies. </font><font style="vertical-align: inherit;">Ensuite, essayez d'√©crire la configuration.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ressources DSC&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ressources DSC sont une sorte d'analogue des modules PowerShell. </font><font style="vertical-align: inherit;">Tout serveur Windows poss√®de d√©j√† un ensemble pr√©d√©fini de ressources DSC; elles se trouvent dans le m√™me r√©pertoire que les modules PowerShell. </font><font style="vertical-align: inherit;">La liste peut √™tre obtenue via l'applet de commande Get-DscResourse. </font><font style="vertical-align: inherit;">Voici √† quoi ressemble cette liste sur Windows 10 1809:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; Get-DscResource | Sort-Object -Property Name | ft ImplementedAs, Name -a<font></font>
&nbsp;<font></font>
ImplementedAs Name<font></font>
------------- ----<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Archive<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Environment<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary File<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Group<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite GroupSet<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary Log<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Package<font></font>
&nbsp;&nbsp;&nbsp;PowerShell PackageManagement<font></font>
&nbsp;&nbsp;&nbsp;PowerShell PackageManagementSource<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite ProcessSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Registry<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Script<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Service<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite ServiceSet<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary SignatureValidation<font></font>
&nbsp;&nbsp;&nbsp;PowerShell User<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForAll<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForAny<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForSome<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsFeature<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite WindowsFeatureSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsOptionalFeature<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite WindowsOptionalFeatureSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsPackageCab<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsProcess</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les noms des ressources permettent de comprendre avec quoi elles travaillent:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archive - avec des archives d'emballage et de d√©ballage;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Environnement - avec variables d'environnement;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier - avec fichiers;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Groupe - avec des groupes d'utilisateurs locaux;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journal - avec journaux;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Package ‚Äî‚Äì avec packages logiciels;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registre ‚Äî‚Äì avec les cl√©s de registre et leur statut;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service - avec les services et leur statut;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisateur - avec des comptes d'utilisateurs locaux;</font></font><br>
</li>
<li>WindowsFeature ‚Äî   Windows Server;<br>
</li>
<li>WindowsProcess ‚Äî   Windows;<br>
</li>
<li>Script ‚Äî&nbsp;   PowerShell-   .  3  : SetScript ‚Äî  -, TestScript ‚Äî ,      , GetScript ‚Äî    .<br>
</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le plus souvent, les ressources DSC pr√™tes √† l'emploi ne sont pas suffisantes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans ce cas, vous pouvez √©crire vos propres scripts pour tout ce qui va au-del√† du module standard. Afin de ne pas r√©inventer la roue, vous pouvez utiliser des ressources DSC √©crites par d'autres d√©veloppeurs. Par exemple, √† partir d'ici </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/PowerShell/DscResources</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSGallery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp; </font></font><br>
&nbsp;<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment installer des ressources suppl√©mentaires</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous utilisons l'applet de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commande Install-Module</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . L'installation de ressources consiste simplement √† copier des fichiers de ressources le long d'un des chemins de la variable d'environnement </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ env: PSModulePath</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Les ressources install√©es ne sont pas automatiquement connect√©es lors de la compilation, donc plus tard nous les connecterons √©galement dans la configuration elle-m√™me.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour utiliser une ressource, vous devez l'installer localement et sur le serveur cible. </font><font style="vertical-align: inherit;">Dans les infrastructures sur site, une politique de s√©curit√© interdit g√©n√©ralement l'acc√®s Internet aux serveurs. </font><font style="vertical-align: inherit;">Dans ce cas, le serveur DSC ne pourra pas charger de ressources suppl√©mentaires √† partir de sources externes. </font><font style="vertical-align: inherit;">Pour publier des archives avec des modules, nous d√©ployons un r√©f√©rentiel NuGet local ou un serveur Web classique. </font><font style="vertical-align: inherit;">Vous pouvez installer des ressources suppl√©mentaires pour le serveur Web en d√©compressant le module dans le r√©pertoire C: \ Program Files \ WindowsPowerShell \ Modules \. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est exactement ce que fait l'applet de commande Install-Module. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le deuxi√®me article, nous examinerons de plus pr√®s la diff√©rence entre le r√©glage des modes Push et Pull.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyse de configuration simple</font></font></h2><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La configuration</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une description simple et coh√©rente de ce qui doit √™tre fait sur le serveur. </font><font style="vertical-align: inherit;">Voici √† quoi ressemble une configuration DSC simple:&nbsp;</font></font><br>
<br>
<pre><code class="powershell hljs">Configuration EnvironmentVariable_Path<font></font>
{<font></font>
<span class="hljs-keyword">param</span> ()
<span class="hljs-built_in">Import-DscResource</span> <span class="hljs-literal">-ModuleName</span> <span class="hljs-string">'PSDscResources'</span><font></font>
Node localhost<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; Environment CreatePathEnvironmentVariable<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name = <span class="hljs-string">'TestPathEnvironmentVariable'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value = <span class="hljs-string">'TestValue'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ensure = <span class="hljs-string">'Present'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Path = <span class="hljs-variable">$true</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Target = <span class="hljs-selector-tag">@</span>(<span class="hljs-string">'Process'</span>, <span class="hljs-string">'Machine'</span>)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
EnvironmentVariable_Path <span class="hljs-literal">-OutputPath</span>:<span class="hljs-string">"C:\EnvironmentVariable_Path"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour son exemple, voyons en quoi consiste la configuration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le bloc de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un type sp√©cial de fonction PowerShell qui d√©crit ce que nous voulons obtenir.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä l'int√©rieur du bloc contient:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec param√®tres utilisables en interne;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloquer avec des appels PowerShell suppl√©mentaires. </font><font style="vertical-align: inherit;">Ici, au d√©but de la configuration, nous ex√©cutons toujours </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import-Resource</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour connecter des ressources suppl√©mentaires;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blocs avec des param√®tres pour des serveurs </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ servername </font><font style="vertical-align: inherit;">sp√©cifiques </font><font style="vertical-align: inherit;">.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä l'int√©rieur du bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">nous indiquons quelles ressources sur un serveur particulier nous allons configurer. </font><font style="vertical-align: inherit;">Dans l'exemple ci-dessus, cela cr√©e une variable d'environnement √† l'aide d'une ressource d'environnement standard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons un peu plus en profondeur et examinons la syntaxe d'une ressource sp√©cifique via la commande Get-DscResource -Name Environment -Syntax:</font></font><br>
&nbsp;<br>
<pre><code class="powershell hljs">
<span class="hljs-built_in">PS</span> C:\windows\system32&gt; <span class="hljs-built_in">Get-DscResource</span> <span class="hljs-literal">-Name</span> Environment <span class="hljs-literal">-Syntax</span>
Environment [<span class="hljs-built_in">String</span>] <span class="hljs-comment">#ResourceName</span><font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Name = [<span class="hljs-built_in">string</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">DependsOn</span> = [<span class="hljs-built_in">string</span>[]]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Ensure</span> = [<span class="hljs-built_in">string</span>]{ <span class="hljs-type">Absent</span> | <span class="hljs-type">Present</span> }]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Path</span> = [<span class="hljs-built_in">bool</span>]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">PsDscRunAsCredential</span> = [<span class="hljs-type">PSCredential</span>]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Value</span> = [<span class="hljs-built_in">string</span>]]<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet exemple:&nbsp;</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - le nom de la variable d'environnement.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DependsOn, nous sp√©cifions</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la d√©pendance √† d'autres ressources. </font><font style="vertical-align: inherit;">Il est important de se rappeler que l'op√©ration ne sera pas effectu√©e tant que la ressource sp√©cifi√©e ici n'est pas termin√©e.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensure,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous sp√©cifions les conditions de configuration. </font><font style="vertical-align: inherit;">Si une telle variable est absente, nous la cr√©erons; </font><font style="vertical-align: inherit;">s'il est pr√©sent, cette ressource ne sera pas configur√©e.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin d'acc√®s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sp√©cifie si la variable d'environnement contient un chemin d'acc√®s.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PsDscRunAsCredential, les</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> informations d'identification sp√©cifi√©es.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valeur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la valeur de la variable d'environnement.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cible</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut √™tre indiqu√©e pour laquelle la configuration est appliqu√©e.</font></font><br>
</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment d√©marrer la compilation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous appelons simplement la configuration par son nom avec les param√®tres n√©cessaires. </font><font style="vertical-align: inherit;">Le r√©sultat sera un fichier mof, qui est ensuite utilis√© par le moteur DSC pour configurer un serveur sp√©cifique:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; EnvironmentVariable_Path -OutputPath:"C:\EnvironmentVariable_Path"<font></font>
&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Directory: C:\EnvironmentVariable_Path<font></font>
&nbsp;<font></font>
Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LastWriteTime &nbsp; &nbsp; &nbsp; &nbsp; Length Name<font></font>
----&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------------- &nbsp; &nbsp; &nbsp; &nbsp; ------ ----<font></font>
-a---- &nbsp; &nbsp; &nbsp; 25.02.2020 &nbsp; &nbsp; 14:05 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2172 localhost.mof</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer le gestionnaire de configuration local</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le gestionnaire de configuration local est responsable de l'application des configurations que nous avons compil√©es dans les fichiers mof. </font><font style="vertical-align: inherit;">C'est lui qui contr√¥le la pr√©servation de l'√©tat d√©fini dans la configuration. </font><font style="vertical-align: inherit;">Si le syst√®me quitte cet √©tat, LCM appelle le code dans les ressources pour restaurer l'√©tat sp√©cifi√©.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons les param√®tres du gestionnaire de configuration local via Get-DscLocalConfigurationManager:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; Get-DscLocalConfigurationManager<font></font>
&nbsp;<font></font>
ActionAfterReboot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ContinueConfiguration<font></font>
AgentId&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 1FB3A2EE-57C9-11EA-A204-58A023EF3A48<font></font>
AllowModuleOverWrite &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : False<font></font>
CertificateID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
ConfigurationDownloadManagers&nbsp; : {}<font></font>
ConfigurationID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
ConfigurationMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ApplyAndMonitor<font></font>
ConfigurationModeFrequencyMins : 15<font></font>
Credential &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
DebugMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {NONE}<font></font>
DownloadManagerCustomData&nbsp; &nbsp; &nbsp; :<font></font>
DownloadManagerName&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
LCMCompatibleVersions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {1.0, 2.0}<font></font>
LCMState &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : Idle<font></font>
LCMStateDetail &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
LCMVersion &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 2.0<font></font>
StatusRetentionTimeInDays&nbsp; &nbsp; &nbsp; : 10<font></font>
SignatureValidationPolicy&nbsp; &nbsp; &nbsp; : NONE<font></font>
SignatureValidations &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
MaximumDownloadSizeMB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 500<font></font>
PartialConfigurations&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
RebootNodeIfNeeded &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : False<font></font>
RefreshFrequencyMins &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 30<font></font>
RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : PUSH<font></font>
ReportManagers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
ResourceModuleManagers &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
PSComputerName &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
</code></pre><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RefreshMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contient le mode de fonctionnement LCM - Push ou Pull. </font><font style="vertical-align: inherit;">Nous parlerons davantage des modes dans le deuxi√®me article.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> affiche le mode d'application de configuration actuel. </font><font style="vertical-align: inherit;">Dans notre cas, c'est ApplyAndMonitor - appliquer et suivre les modifications. </font><font style="vertical-align: inherit;">Les modes ApplyOnly sont √©galement disponibles (LCM ne suivra pas les changements de configuration) et les modes ApplyAndAutocorrect (LCM suivra non seulement les changements, mais les ram√®nera √©galement √† la configuration de base).</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RebootNodeIfNeeded</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - peut red√©marrer le serveur une fois la configuration termin√©e, si n√©cessaire pour appliquer les param√®tres.&nbsp;</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationModeFrequencyMins</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Fixe la fr√©quence √† laquelle LCM v√©rifiera les changements de configuration.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modifiez les param√®tres LCM dans la m√©ta-configuration. </font><font style="vertical-align: inherit;">Voici son exemple:</font></font><br>
&nbsp;<br>
<pre><code class="powershell hljs"><font></font>
Configuration LCMConfiguration<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;Node Localhost<font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LocalConfigurationManager<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeeded = <span class="hljs-variable">$True</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
LCMConfiguration</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idem pour la derni√®re version de WMF avec commentaires:</font></font><br>
<br>
<pre><code class="powershell hljs"><font></font>
&nbsp;<font></font>
[<span class="hljs-type">DSCLocalConfigurationManager</span>()]<font></font>
Configuration LCMConfiguration<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>[]]<span class="hljs-variable">$Server</span> = <span class="hljs-string">"localhost"</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  LCM:</span>
<span class="hljs-comment">#  ,  </span>
<span class="hljs-comment"># : PUSH</span>
<span class="hljs-comment">#    30 </span>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeded = <span class="hljs-variable">$True</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">'Push'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshFrequencyMins = <span class="hljs-number">30</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#   </span>
LCMConfiguration <span class="hljs-literal">-Server</span> <span class="hljs-string">"localhost"</span> <span class="hljs-literal">-OutputPath</span> <span class="hljs-string">"C:\DSC\MetaConfigurations\EnvironmentVariable_Path\"</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caract√©ristiques m√©taconfiguration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lors de l'√©criture d'une m√©taconfiguration, nous utilisons les m√™mes blocs que pour une configuration DSC standard. </font><font style="vertical-align: inherit;">L'exception est le bloc interne LocalConfigurationManager (v4) ou l'attribut DSCLocalConfigurationManager (v5) pour un serveur sp√©cifique. </font><font style="vertical-align: inherit;">Ils d√©crivent tous les param√®tres n√©cessaires.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©taconfiguration est √©galement compil√©e dans un fichier mof, mais pour l'utiliser, la cmdlet Set-DSCLocalConfigurationManager est utilis√©e, et non Start-DSCConfiguration.</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; LCMConfiguration -OutputPath C:\EnvironmentVariable_Path\<font></font>
&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Directory: C:\EnvironmentVariable_Path<font></font>
&nbsp;<font></font>
Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LastWriteTime &nbsp; &nbsp; &nbsp; &nbsp; Length Name<font></font>
----&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------------- &nbsp; &nbsp; &nbsp; &nbsp; ------ ----<font></font>
-a---- &nbsp; &nbsp; &nbsp; 26.02.2020 &nbsp; &nbsp; 20:05 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1016 Localhost.meta.mof<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
PS C:\windows\system32&gt; Set-DscLocalConfigurationManager -Path C:\EnvironmentVariable_Path\<font></font>
PS C:\windows\system32&gt; Get-DscLocalConfigurationManager<font></font>
&nbsp;<font></font>
‚Ä¶<font></font>
RebootNodeIfNeeded &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : True<font></font>
‚Ä¶</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Th√©oriquement, rien ne nous emp√™che de combiner la configuration de LCM et les ressources conventionnelles au sein d'une m√™me configuration. </font><font style="vertical-align: inherit;">Mais pour simplifier, il est recommand√© de s√©parer l'orthographe et l'application de la configuration et de la m√©taconfiguration.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurations partielles&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurations partielles - plusieurs configurations qui sont ex√©cut√©es s√©quentiellement les unes apr√®s les autres. </font><font style="vertical-align: inherit;">Ils sont utiles lorsque plusieurs √©quipes travaillent sur le service. </font><font style="vertical-align: inherit;">Chacune des commandes indique les param√®tres de sa partie du service, et la configuration partielle applique ensuite tous les param√®tres de mani√®re s√©quentielle. </font><font style="vertical-align: inherit;">Dans les param√®tres LCM, nous </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp√©cifions</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les configurations partielles dans </font><b><font style="vertical-align: inherit;">PartialConfigurations</font></b><font style="vertical-align: inherit;"> .&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les configurations partielles, nous devons consid√©rer la logique DSC simple. </font><font style="vertical-align: inherit;">Le moteur ne permet pas de branchement, des ressources suppl√©mentaires sont donc n√©cessaires pour remplir diverses conditions. </font><font style="vertical-align: inherit;">Nous analyserons cela avec quelques exemples.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que nous voulons livrer la configuration au serveur de mani√®re garantie et proc√©der selon l'algorithme suivant:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout d'abord, v√©rifiez que les modules n√©cessaires sont install√©s sur le serveur.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous effectuons la configuration, ce qui am√®nera le serveur √† l'√©tat souhait√©.</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici √† quoi ressemble une m√©taconfiguration avec plusieurs configurations cons√©cutives √† l'int√©rieur:</font></font><br>
<br>
<pre><code class="powershell hljs">
<span class="hljs-comment">#   </span>
[<span class="hljs-type">DSCLocalConfigurationManager</span>()]<font></font>
configuration MetaPushConfig<font></font>
{<font></font>
<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">ValidateNotNullOrEmpty</span>()]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>] <span class="hljs-variable">$NodeName</span> = <span class="hljs-string">'localhost'</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$NodeName</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;	<font></font>
 <span class="hljs-comment">#      LCM,    </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PartialConfiguration ModulesDownloadConfig<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description = <span class="hljs-string">'Download and install modules'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode = <span class="hljs-string">'Push'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#        </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PartialConfiguration ServerOSConfig<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[PartialConfiguration]ModulesDownloadConfig"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description = <span class="hljs-string">'Configuration'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode = <span class="hljs-string">'Push'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#   LCM</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">'Push'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshFrequencyMins = <span class="hljs-number">30</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeded = <span class="hljs-variable">$true</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
&nbsp;<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  </span>
MetaPushConfig <span class="hljs-literal">-NodeName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-OutputPath</span> c:\DSC\MetaConfigurations<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#      </span>
<span class="hljs-variable">$cred</span> = (<span class="hljs-built_in">Get-Credential</span> <span class="hljs-literal">-UserName</span> Administrator <span class="hljs-literal">-Message</span> <span class="hljs-string">"Enter admin credentials"</span>)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  LCM   </span>
<span class="hljs-built_in">Set-DscLocalConfigurationManager</span> <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">"c:\DSC\MetaConfigurations"</span> <span class="hljs-literal">-Verbose</span> <span class="hljs-literal">-Force</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  </span>
<span class="hljs-built_in">Publish-DscConfiguration</span> c:\DSC\Configurations\ModulesDownloadConfig <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span>
<span class="hljs-built_in">Publish-DscConfiguration</span> c:\DSC\Configurations\ServerOSConfig <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#    </span>
<span class="hljs-built_in">Start-DscConfiguration</span> <span class="hljs-literal">-UseExisting</span> <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span> <span class="hljs-literal">-Verbose</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re partie de la configuration indique </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T√©l√©charger et installer les modules</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : t√©l√©chargez et installez les ressources n√©cessaires. </font><font style="vertical-align: inherit;">La deuxi√®me partie de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerOSConfig</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> am√®ne le serveur √† l'√©tat souhait√©. </font><font style="vertical-align: inherit;">Quelles sont les nuances avec la simplicit√© de DSC ici:&nbsp;</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si la premi√®re partie de la configuration a initialement renvoy√© FALSE et s'est termin√©e compl√®tement, LCM ne passera pas √† la deuxi√®me configuration. </font><font style="vertical-align: inherit;">Selon la logique DSC, vous devez d'abord amener le serveur au premier √©tat d√©crit.&nbsp;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment traiter: ex√©cutez la configuration deux fois ou automatisez l'ensemble du processus dans un script.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si le serveur apr√®s l'installation d'un composant n√©cessite un red√©marrage, la configuration n'ira pas plus loin jusqu'√† ce que nous red√©marrions nous-m√™mes le serveur. </font><font style="vertical-align: inherit;">M√™me si nous disons √† LCM que RebootNodeIfNeeeded = $ True, l'agent attendra notre solution pendant la configuration. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment traiter: la ressource </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xPendingReboot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vient √† la </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">rescousse</font></a><font style="vertical-align: inherit;"> , qui contr√¥le la cl√© de registre au red√©marrage. </font><font style="vertical-align: inherit;">Cette ressource red√©marre le serveur pour nous.</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de configuration pour t√©l√©charger et installer des ressources dans le sc√©nario ¬´Entreprise sanglante¬ª, lorsque le serveur n'a pas acc√®s √† Internet. </font><font style="vertical-align: inherit;">Il suppose la pr√©sence d'un serveur Web, o√π les ressources pr√©-t√©l√©charg√©es sont disponibles pour tout le monde via le protocole http.</font></font><br>
<br>
<pre><code class="powershell hljs"><font></font>
Configuration ModulesDownloadConfig<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>[]]<span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#   </span>
&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Import-DscResource</span> <span class="hljs-literal">-ModuleName</span> <span class="hljs-string">"PSDesiredStateConfiguration"</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#  </span>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#  IE Security</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registry DisableIEESC<span class="hljs-literal">-Admin</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key = <span class="hljs-string">"HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueName = <span class="hljs-string">"IsInstalled"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueData = <span class="hljs-number">0</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueType = <span class="hljs-string">"DWORD"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registry DisableIEESC<span class="hljs-literal">-User</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key = <span class="hljs-string">"HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A8-37EF-4b3f-8CFC-4F3A74704073}"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueName = <span class="hljs-string">"IsInstalled"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueData = <span class="hljs-string">"0"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueType = <span class="hljs-string">"DWORD"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#    ,    </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File CreateDistribDir {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">"present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DestinationPath = <span class="hljs-string">"C:\Install\PSModules"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Type</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">"Directory"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   NetworkingDsc (&lt;a href="https://www.powershellgallery.com/packages/NetworkingDsc/8.0.0-preview0004"&gt;https://www.powershellgallery.com/packages/NetworkingDsc/8.0.0-preview0004&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script NetworkingDscDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/NetworkingDsc.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\NetworkingDsc"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;<span class="hljs-comment">#   NetworkingDsc  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackNetworkingDsc {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]NetworkingDscDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;<span class="hljs-comment">#   ComputerManagementDsc (&lt;a href="https://www.powershellgallery.com/packages/ComputerManagementDsc/8.2.1-preview0001"&gt;https://www.powershellgallery.com/packages/ComputerManagementDsc/8.2.1-preview0001&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script ComputerManagementDscDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/ComputerManagementDsc.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\ComputerManagementDsc"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   ComputerManagementDsc  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackComputerManagementDsc {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]ComputerManagementDscDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   xPendingReboot (&lt;a href="https://www.powershellgallery.com/packages/xPendingReboot/0.4.0.0"&gt;https://www.powershellgallery.com/packages/xPendingReboot/0.4.0.0&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script xPendingRebootDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/xPendingReboot.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\xPendingReboot"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   xPendingReboot  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackxPendingReboot {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]xPendingRebootDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos de la s√©curit√©</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le gros inconv√©nient de DSC sur le terrain est le manque de comptes d'identification. </font><font style="vertical-align: inherit;">Ce m√©canisme stocke en toute s√©curit√© les comptes sous forme de nom d'utilisateur + "hachage du mot de passe" et les paie au service, qui est responsable de l'authentification. </font><font style="vertical-align: inherit;">Sans cela, DSC ne peut pas g√©rer les comptes pour le compte d'un autre service. </font><font style="vertical-align: inherit;">Et si nous devons nous authentifier sous un compte avec des privil√®ges sp√©ciaux, le processus d'automatisation est tr√®s compliqu√©. </font><font style="vertical-align: inherit;">Ce sera par exemple le cas lors de l'entr√©e du serveur dans le domaine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout √† notre disposition:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les informations d'identification sont stock√©es en texte brut,</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les informations d'identification crypt√©es ne fonctionnent que sur le PC o√π elles ont √©t√© g√©n√©r√©es.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pratique, il existe plusieurs solutions.&nbsp;</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Azure Automation Run As Accounts</a>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Azure Automation State Configuration</a>.                     ¬´ ¬ª  Azure. ,  Run As   On-Premise    .    ¬´ ¬ª   ,   .<br>
</li>
<li>   DSC  -,          .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les "stubs" sont bons lorsque la pr√©visibilit√© du comportement du serveur doit √™tre assur√©e. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous faisons un ¬´stub¬ª apr√®s la configuration du serveur dans plusieurs cas, si nous avons utilis√©:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">red√©marrage (ressource xPendingReboot)&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transfert d'informations d'identification&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d'autres ressources susceptibles d'affecter les performances du serveur concernant les red√©marrages impr√©vus ou la s√©curit√©.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, cr√©ez et republiez des configurations SANS blocs contenant la ressource xPendingReboot et des configurations avec des informations d'identification. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche s'applique uniquement au sc√©nario Push, car Pull est assez simple et n'implique pas de changement de configuration √† la vol√©e. </font><font style="vertical-align: inherit;">Dans le prochain article de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buldakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous examinerons de plus pr√®s les param√®tres et les fonctionnalit√©s du travail dans les modes Push et Pull. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et venez √©galement discuter des nuances de la technologie DSC et des limites de son application le 28 mai √† 18h00 lors de la premi√®re r√©union en ligne de la communaut√© Raiffeisenbank DGTL Communications. </font><font style="vertical-align: inherit;">Lors de la r√©union, nous parlerons √©galement de la fa√ßon de se faire des amis ELK et Exchange et de ce que Microsoft Endpoint Manager peut faire dans la gestion des appareils. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici l'inscription pour le mitap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503056/index.html">Pub en ligne du 23 mai: Holivarim sur les nuages, le JS et les t√©l√©phones portables</a></li>
<li><a href="../fr503062/index.html">Le co√ªt r√©el de la vie dans la Silicon Valley pour le d√©veloppeur</a></li>
<li><a href="../fr503064/index.html">IoT o√π vous n'avez pas attendu (partie 3). Construire un mod√®le de simulation</a></li>
<li><a href="../fr503068/index.html">Au carrefour de la technologie et des affaires: les leaders informatiques ouvrent une nouvelle universit√© en Suisse</a></li>
<li><a href="../fr503070/index.html">Mug √©lectrique. Construire un scooter √©lectrique / v√©lo √©lectrique fou</a></li>
<li><a href="../fr503074/index.html">D√©tails sur le package de fournisseur pour Flutter</a></li>
<li><a href="../fr503082/index.html">T√©l√©gramme en tant que NAS / FTP</a></li>
<li><a href="../fr503084/index.html">Revue des cours de l'Acad√©mie Lightbend - Architecture r√©active</a></li>
<li><a href="../fr503086/index.html">Les services de transcription en ligne sont-ils s√©curis√©s et confidentiels?</a></li>
<li><a href="../fr503088/index.html">Comment nous avons s√©lectionn√© le fret pour les transporteurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>