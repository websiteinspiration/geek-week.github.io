<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è¨ üßôüèª ü¶à Laravel + Docker + Gitlab. Wo soll ich anfangen? üë®‚Äçüåæ üç¶ üëç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Normalerweise habe ich immer auf einen Docker verzichtet und dachte, dass ein Docker nur f√ºr gro√üe Projekte in gro√üen Unternehmen ben√∂tigt wird. Aber ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Laravel + Docker + Gitlab. Wo soll ich anfangen?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normalerweise habe ich immer auf einen Docker verzichtet und dachte, dass ein Docker nur f√ºr gro√üe Projekte in gro√üen Unternehmen ben√∂tigt wird. </font><font style="vertical-align: inherit;">Aber eines Tages sah ich, wie ein Docker zusammen mit dem Gitlab eines Freundes arbeitet, und erkannte, dass ich es noch studieren sollte. </font><font style="vertical-align: inherit;">Wie gew√∂hnlich habe ich jedoch keinen geeigneten Artikel gefunden - sie waren entweder zu komplex oder unvollst√§ndig oder implizierten, dass Sie alle von sich aus wissen. </font><font style="vertical-align: inherit;">Ich musste lange nach verschiedenen Quellen suchen, alles zusammenstellen und am Ende schaffte ich es, ein einfaches Projekt und CI / CD daf√ºr zu erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Arbeiten k√∂nnen in drei Teile unterteilt werden: auf dem lokalen Computer, auf dem Hitlab und auf dem Server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr die Implementierung des Projekts ben√∂tigen wir daher ein Gitlab-Konto und einen Remote-Server mit KVM- oder XEN-Virtualisierung.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil 1. Lokale Maschine</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dem lokalen Computer m√ºssen Sie Docker installieren. </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kommentar</font></font></b><div class="spoiler_text">  . Docker     Linux  ( Ubuntu, ),    Windows  MacOS.   macos     ,     Windows      .   - ,        linux .   - ,           .       VirtualBox.          Ubuntu     <br>
</div></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um in einer Linux-Umgebung zu installieren, m√ºssen Sie die folgenden Befehle ausf√ºhren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alte Container l√∂schen:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get remove docker docker-engine docker.io containerd runc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update apt:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie die folgenden Pakete, damit Sie Docker √ºber https aus dem Repository herunterladen k√∂nnen:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install \<font></font>
    apt-transport-https \<font></font>
    ca-certificates \<font></font>
    curl \<font></font>
    gnupg-agent \<font></font>
    software-properties-common</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie den offiziellen GPG-Docker-Schl√ºssel hinzu:</font></font><br>
<br>
<pre><code class="bash hljs">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sicher, dass der Druck korrekt ist:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-key fingerprint 0EBFCD88</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antworten:</font></font><br>
<br>
<pre><code class="bash hljs">pub   rsa4096 2017-02-22 [SCEA]<font></font>
      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88<font></font>
uid           [ unknown] Docker Release (CE deb) &lt;docker@docker.com&gt;<font></font>
sub   rsa4096 2017-02-22 [S]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laden Sie die stabile Version herunter:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository \
   <span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   <span class="hljs-subst">$(lsb_release -cs)</span> \
   stable"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update apt erneut:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren Sie die neueste Docker-Engine:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install docker-ce docker-ce-cli containerd.io</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√úberpr√ºfen Sie die Docker-Funktion:</font></font><br>
<br>
<pre><code class="bash hljs">sudo docker run hello-world</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn alles korrekt ist, beginnt der Download des Hello World-Bildes. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vollst√§ndige Anweisungen in der offiziellen Dokumentation des Dockers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√ºssen auch Docker-Compose installieren. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die offizielle Anweisung ist hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie zum Installieren die Befehle im Terminal aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus dem Repository herunterladen:</font></font><br>
<br>
<pre><code class="bash hljs">sudo curl -L <span class="hljs-string">"https://github.com/docker/compose/releases/download/1.25.4/docker-compose-<span class="hljs-subst">$(uname -s)</span>-<span class="hljs-subst">$(uname -m)</span>"</span> -o /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hinzuf√ºgen eines √úbungsrechts:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versionspr√ºfung:</font></font><br>
<br>
<pre><code class="bash hljs">sudo docker-compose --version</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben den Docker installiert, jetzt ist es notwendig, das Image zu sammeln. </font><font style="vertical-align: inherit;">Zu diesem Zweck habe ich den Artikel von der Digitalocean-Website verwendet: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.digitalocean.com/community/tutorials/how-to-set-up-laravel-nginx-and-mysql-with-docker-compose-ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es wird einen Nachdruck dieses Artikels geben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herunterladen von Laravel und Installieren von Abh√§ngigkeiten</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Im ersten Schritt laden wir die neueste Version von Laravel herunter und installieren die Projektabh√§ngigkeiten, einschlie√ülich Composer, dem PHP-Paketmanager auf Anwendungsebene. </font><font style="vertical-align: inherit;">Wir werden diese Abh√§ngigkeiten mit Docker installieren, um keine globale Installation von Composer durchzuf√ºhren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen Sie zu Ihrem Home-Verzeichnis und klonen Sie die neueste Version von Laravel in ein Verzeichnis namens laravel-app:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~<font></font>
git <span class="hljs-built_in">clone</span> https://github.com/laravel/laravel.git laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehe zum Laravel-App-Verzeichnis:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~/laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√§ngen Sie dann das Composer-Image von Docker in die Verzeichnisse ein, die Sie f√ºr Ihr Laravel-Projekt ben√∂tigen, um den Aufwand f√ºr die globale Installation von Composer zu vermeiden:</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -v $(<span class="hljs-built_in">pwd</span>):/app composer install</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Flags -v und --rm des Docker-Befehls run erstellen einen virtuellen Container, der bis zum L√∂schen an das aktuelle Verzeichnis gebunden wird. </font><font style="vertical-align: inherit;">Der Inhalt Ihres Verzeichnisses ~ / laravel-app wird in den Container kopiert, und der Inhalt des Composer, der im Container des Herstellerordners erstellt wurde, wird in das aktuelle Verzeichnis kopiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Legen Sie abschlie√üend die Berechtigungsstufe im Projektverzeichnis so fest, dass sie einem Benutzer ohne Root-Rechte geh√∂rt:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chown -R <span class="hljs-variable">$USER</span>:<span class="hljs-variable">$USER</span> ~/laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist wichtig, wenn Sie die Docker-Datei f√ºr das Image Ihrer Anwendung schreiben, da Sie damit mit dem Anwendungscode arbeiten und Prozesse im Container ohne Root-Rechte starten k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben Sie den Anwendungscode platziert und k√∂nnen mit Docker Compose mit der Definition von Diensten fortfahren. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen einer Docker Compose-Datei Erstellen von</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Anwendungen mit Docker Compose vereinfacht den Konfigurations- und Versionsprozess in Ihrer Infrastruktur. Um unsere Laravel-Anwendung anzupassen, erstellen wir eine Docker-Compose-Datei mit der Definition von Webserverdiensten, Datenbank und Anwendung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ñffne die Datei:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/docker-compose.yml</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Docker-Compose-Datei sind drei Dienste definiert: App, Webserver und Datenbank. </font><font style="vertical-align: inherit;">F√ºgen Sie der Datei den folgenden Code hinzu, w√§hrend Sie das Root-Passwort f√ºr MYSQL_ROOT_PASSWORD, das als Umgebungsvariable des DB-Dienstes definiert ist, durch ein Passwort Ihrer Wahl ersetzen:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">version: '3'<font></font>
services:<font></font>
<font></font>
  #PHP Service<font></font>
  app:<font></font>
    build:<font></font>
      context: .<font></font>
      dockerfile: Dockerfile<font></font>
    image: digitalocean.com/php<font></font>
    container_name: app<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    environment:<font></font>
      SERVICE_NAME: app<font></font>
      SERVICE_TAGS: dev<font></font>
    working_dir: /var/www<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  #Nginx Service<font></font>
  webserver:<font></font>
    image: nginx:alpine<font></font>
    container_name: webserver<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    ports:<font></font>
      - "80:80"<font></font>
      - "443:443"<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  #MySQL Service<font></font>
  db:<font></font>
    image: mysql:5.7.22<font></font>
    container_name: db<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    ports:<font></font>
      - "3306:3306"<font></font>
    environment:<font></font>
      MYSQL_DATABASE: laravel<font></font>
      MYSQL_ROOT_PASSWORD: your_mysql_root_password<font></font>
      SERVICE_TAGS: dev<font></font>
      SERVICE_NAME: mysql<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
#Docker Networks<font></font>
networks:<font></font>
  app-network:<font></font>
    driver: bridge</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgende Leistungen sind hier enthalten:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App: Diese Service-Definition enth√§lt die Laravel-Anwendung und startet das personalisierte Docker-Image digitalocean.com/php. </font><font style="vertical-align: inherit;">Au√üerdem wird der Parameter working_dir im Container auf / var / www gesetzt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webserver: Diese Dienstdefinition √ºbernimmt das nginx: alpine-Image von Docker und √∂ffnet die Ports 80 und 443.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">db: Diese Dienstdefinition ruft das mysql: 5.7.22-Image von Docker ab und definiert neue Umgebungsvariablen, einschlie√ülich der Laravel-Datenbank f√ºr Ihre Anwendung und des Root-Kennworts f√ºr die Datenbank. </font><font style="vertical-align: inherit;">Sie k√∂nnen einen beliebigen Datenbanknamen verwenden. Sie sollten auch Ihr_mysql_root_password durch Ihr eigenes sicheres Passwort ersetzen. </font><font style="vertical-align: inherit;">Diese Dienstdefinition ordnet auch den Host-Port 3306 dem Container-Port 3306 zu.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede Eigenschaft container_name definiert einen Containernamen, der dem Dienstnamen entspricht. </font><font style="vertical-align: inherit;">Wenn Sie diese Eigenschaft nicht definieren, gibt Docker jedem Container Namen, die aus dem Namen einer historischen Person und einem zuf√§lligen Wort bestehen und durch einen Unterstrich getrennt sind.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Interaktion zwischen Containern zu vereinfachen, stellen Dienste eine Verbindung zum Verbindungsnetzwerk her, das als App-Netzwerk bezeichnet wird. Das Verbindungsnetzwerk verwendet eine Softwarebr√ºcke, √ºber die mit diesem Netzwerk verbundene Container miteinander kommunizieren k√∂nnen. Der Br√ºckentreiber legt automatisch Hostregeln fest, sodass Container in verschiedenen Verbindungsnetzwerken nicht direkt miteinander kommunizieren k√∂nnen. Dies verbessert die Anwendungssicherheit, da nur verwandte Dienste miteinander kommunizieren k√∂nnen. Dies bedeutet auch, dass Sie verschiedene Netzwerke und Dienste angeben k√∂nnen, die eine Verbindung zu verwandten Funktionen herstellen: Beispielsweise k√∂nnen Clientanwendungsdienste das Frontend-Netzwerk und Serverdienste das Backend-Netzwerk verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns nun sehen, wie Sie Volumes hinzuf√ºgen und gemountete Images an Dienstdefinitionen binden, um Anwendungsdaten dauerhaft zu speichern. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persistente Datenspeicherung</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Docker verf√ºgt √ºber leistungsstarke und bequeme Mittel zur persistenten Datenspeicherung. </font><font style="vertical-align: inherit;">In unserer Anwendung verwenden wir Volumes und gemountete Images, um Datenbankdateien, Anwendungen und Konfigurationen dauerhaft zu speichern. </font><font style="vertical-align: inherit;">Volumes bieten Flexibilit√§t und Beibehaltung der Sicherung nach Beendigung des Lebenszyklus des Containers. Bereitstellbare bereitstellbare Images vereinfachen Code√§nderungen w√§hrend der Entwicklung, indem sie √Ñnderungen an Hostdateien oder Verzeichnissen in Containern sofort widerspiegeln. </font><font style="vertical-align: inherit;">Wir verwenden beide Optionen.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung!</font></font></b><div class="spoiler_text">             ,   ,        .      ,       Docker   .       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Definieren Sie das Volume mit dem Namen dbdata in der Docker-Compose-Datei in der Datenbankdienstdefinition, um die MySQL-Datenbank beizubehalten:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#MySQL Service<font></font>
db:<font></font>
  ...<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql<font></font>
    networks:<font></font>
      - app-network<font></font>
  ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Volume mit dem Namen dbdata wird verwendet, um den Inhalt des Ordners / var / lib / mysql dauerhaft im Container zu speichern. </font><font style="vertical-align: inherit;">Auf diese Weise k√∂nnen Sie den Datenbankdienst stoppen und neu starten, ohne Daten zu verlieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie am Ende der Datei eine Definition des DBData-Volumes hinzu:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#Volumes<font></font>
volumes:<font></font>
  dbdata:<font></font>
    driver: local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dieser Definition k√∂nnen Sie dieses Volume f√ºr verschiedene Dienste verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie dann die Mount-Image-Bindung zum Datenbankdienst f√ºr die MySQL-Konfigurationsdateien hinzu:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#MySQL Service<font></font>
db:<font></font>
  ...<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql<font></font>
      - ./mysql/my.cnf:/etc/mysql/my.cnf<font></font>
  ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses gemountete Image bindet die Datei ~ / laravel-app / mysql / my.cnf an das Verzeichnis /etc/mysql/my.cnf im Container. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie dann die bereitgestellten Images zum Webserverdienst hinzu. </font><font style="vertical-align: inherit;">Es gibt zwei: eine f√ºr den Anwendungscode und die andere f√ºr die Bestimmung der Nginx-Konfiguration</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">#Nginx Service<font></font>
webserver:<font></font>
  ...<font></font>
  volumes:<font></font>
      - ./:/var/www<font></font>
      - ./nginx/conf.d/:/etc/nginx/conf.d/<font></font>
  networks:<font></font>
      - app-network</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste gemountete Image bindet den Anwendungscode im Verzeichnis ~ / laravel-app an das Verzeichnis / var / www im Container. Die Konfigurationsdatei, die zu ~ / laravel-app / nginx / conf.d / hinzugef√ºgt wurde, wird auch in /etc/nginx/conf.d/ im Container bereitgestellt, sodass Sie den Inhalt des Konfigurationsverzeichnisses nach Bedarf hinzuf√ºgen und √§ndern k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie abschlie√üend dem App-Service die folgenden Bereitstellungen von gemounteten Images f√ºr Anwendungscode und Konfigurationsdateien hinzu:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">#PHP Service<font></font>
app:<font></font>
  ...<font></font>
  volumes:<font></font>
       - ./:/var/www<font></font>
       - ./php/local.ini:/usr/local/etc/php/conf.d/local.ini<font></font>
  networks:<font></font>
      - app-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der App-Dienst bindet das gemountete Image des Ordners ~ / laravel-app, der den Anwendungscode enth√§lt, an den Ordner / var / www. Dies beschleunigt den Entwicklungsprozess, da alle √Ñnderungen im lokalen Anwendungsverzeichnis sofort im Container angezeigt werden. Sie verkn√ºpfen auch die PHP-Konfigurationsdatei ~ / laravel-app / php / local.ini mit der Datei /usr/local/etc/php/conf.d/local.ini im Container. Sp√§ter erstellen Sie eine lokale PHP-Konfigurationsdatei. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ihre Docker-Compose-Datei sieht nun folgenderma√üen aus:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="bash hljs">version: <span class="hljs-string">'3'</span><font></font>
services:<font></font>
<font></font>
  <span class="hljs-comment">#PHP Service</span><font></font>
  app:<font></font>
    build:<font></font>
      context: .<font></font>
      dockerfile: Dockerfile<font></font>
    image: digitalocean.com/php<font></font>
    container_name: app<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    environment:<font></font>
      SERVICE_NAME: app<font></font>
      SERVICE_TAGS: dev<font></font>
    working_dir: /var/www<font></font>
    volumes:<font></font>
      - ./:/var/www<font></font>
      - ./php/local.ini:/usr/<span class="hljs-built_in">local</span>/etc/php/conf.d/local.ini<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  <span class="hljs-comment">#Nginx Service</span><font></font>
  webserver:<font></font>
    image: nginx:alpine<font></font>
    container_name: webserver<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    ports:<font></font>
      - <span class="hljs-string">"80:80"</span>
      - <span class="hljs-string">"443:443"</span><font></font>
    volumes:<font></font>
      - ./:/var/www<font></font>
      - ./nginx/conf.d/:/etc/nginx/conf.d/<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  <span class="hljs-comment">#MySQL Service</span><font></font>
  db:<font></font>
    image: mysql:5.7.22<font></font>
    container_name: db<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    ports:<font></font>
      - <span class="hljs-string">"3306:3306"</span><font></font>
    environment:<font></font>
      MYSQL_DATABASE: laravel<font></font>
      MYSQL_ROOT_PASSWORD: your_mysql_root_password<font></font>
      SERVICE_TAGS: dev<font></font>
      SERVICE_NAME: mysql<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql/<font></font>
      - ./mysql/my.cnf:/etc/mysql/my.cnf<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
<span class="hljs-comment">#Docker Networks</span><font></font>
networks:<font></font>
  app-network:<font></font>
    driver: bridge<font></font>
<span class="hljs-comment">#Volumes</span><font></font>
volumes:<font></font>
  dbdata:<font></font>
    driver: <span class="hljs-built_in">local</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen einer</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Docker- </font><b><font style="vertical-align: inherit;">Datei Mit</font></b><font style="vertical-align: inherit;"> Docker k√∂nnen Sie die Umgebung in einzelnen Containern mithilfe einer Docker-Datei definieren. </font><font style="vertical-align: inherit;">Mit Dockerfile k√∂nnen Sie personalisierte Bilder erstellen. </font><font style="vertical-align: inherit;">Hiermit k√∂nnen Sie die erforderliche Anwendungssoftware installieren und die Einstellungen nach Bedarf √§ndern. </font><font style="vertical-align: inherit;">Sie k√∂nnen erstellte Bilder an den Docker Hub oder eine beliebige private Registrierung √ºbertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Docker-Datei befindet sich im Verzeichnis ~ / laravel-app. </font><font style="vertical-align: inherit;">Erstellen Sie eine Datei:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/Dockerfile</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Docker-Datei gibt das Basis-Image sowie die erforderlichen Befehle und Anweisungen zum Erstellen des Laravel-Anwendungs-Images an. </font><font style="vertical-align: inherit;">F√ºgen Sie der Datei den folgenden Code hinzu:</font></font><br>
<br>
<code>~/laravel-app/php/Dockerfile</code><br>
<br>
<pre><code class="xml hljs">FROM php:7.2-fpm<font></font>
<font></font>
# Copy composer.lock and composer.json<font></font>
COPY composer.lock composer.json /var/www/<font></font>
<font></font>
# Set working directory<font></font>
WORKDIR /var/www<font></font>
<font></font>
# Install dependencies<font></font>
RUN apt-get update &amp;&amp; apt-get install -y \<font></font>
    build-essential \<font></font>
    mysql-client \<font></font>
    libpng-dev \<font></font>
    libjpeg62-turbo-dev \<font></font>
    libfreetype6-dev \<font></font>
    locales \<font></font>
    zip \<font></font>
    jpegoptim optipng pngquant gifsicle \<font></font>
    vim \<font></font>
    unzip \<font></font>
    git \<font></font>
    curl<font></font>
<font></font>
# Clear cache<font></font>
RUN apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*<font></font>
<font></font>
# Install extensions<font></font>
RUN docker-php-ext-install pdo_mysql mbstring zip exif pcntl<font></font>
RUN docker-php-ext-configure gd --with-gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ --with-png-dir=/usr/include/<font></font>
RUN docker-php-ext-install gd<font></font>
<font></font>
# Install composer<font></font>
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer<font></font>
<font></font>
# Add user for laravel application<font></font>
RUN groupadd -g 1000 www<font></font>
RUN useradd -u 1000 -ms /bin/bash -g www www<font></font>
<font></font>
# Copy existing application directory contents<font></font>
COPY . /var/www<font></font>
<font></font>
# Copy existing application directory permissions<font></font>
COPY --chown=www:www . /var/www<font></font>
<font></font>
# Change current user to www<font></font>
USER www<font></font>
<font></font>
# Expose port 9000 and start php-fpm server<font></font>
EXPOSE 9000<font></font>
CMD ["php-fpm"]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst erstellt die Docker-Datei das Bild √ºber dem PHP: 7.2-fpm Docker-Bild. Dies ist ein Image, das auf einer installierten Instanz von PHP FastCGI PHP-FPM basiert. Diese Datei installiert auch die erforderlichen Pakete f√ºr Laravel: mcrypt, pdo_mysql, mbstring und imagick with composer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die RUN-Direktive gibt Befehle zum Aktualisieren, Installieren und Konfigurieren von Parametern in einem Container an, einschlie√ülich eines dedizierten Benutzers und einer Gruppe mit dem Namen www. Die Anweisung WORKDIR legt das Verzeichnis / var / www als Arbeitsverzeichnis der Anwendung fest.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch das Erstellen eines separaten Benutzers und einer Gruppe mit eingeschr√§nkten Zugriffsrechten wird die Sicherheitsanf√§lligkeit beim Starten von Docker-Containern verringert, die standardm√§√üig mit Root-Rechten ausgef√ºhrt werden. Anstatt diesen Container mit Root-Rechten auszuf√ºhren, haben wir mit dem Befehl COPY und dem Flag --chown einen WWW-Benutzer mit Lese- und Schreibberechtigungen f√ºr den Ordner / var / www erstellt, um die Berechtigungen des Anwendungsordners zu kopieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl EXPOSE √∂ffnet Port 9000 im Container f√ºr den php-fpm-Server. CMD gibt den Befehl an, der ausgef√ºhrt werden soll, nachdem der Container erstellt wurde. Hier gibt CMD den Befehl php-fpm an, mit dem der Server gestartet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie mit den √Ñnderungen fertig sind, speichern Sie die Datei und schlie√üen Sie den Editor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen Sie mit der Definition Ihrer PHP-Konfiguration fortfahren. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP-Setup</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben die Infrastruktur in der Docker-Compose-Datei definiert und k√∂nnen jetzt den PHP-Dienst so konfigurieren, dass er als PHP-Prozessor f√ºr eingehende Nginx-Anforderungen fungiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um PHP zu konfigurieren, erstellen Sie eine local.ini-Datei im PHP-Ordner. </font><font style="vertical-align: inherit;">Dies ist die Datei, die Sie mit der Datei /usr/local/etc/php/conf.d/local.ini im obigen Container verkn√ºpft haben. </font><font style="vertical-align: inherit;">Wenn Sie diese Datei erstellen, k√∂nnen Sie die Standarddatei php.ini ignorieren, die PHP beim Start liest. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie ein PHP-Verzeichnis:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir ~/laravel-app/php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ñffnen Sie dann die Datei local.ini:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/php/local.ini</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um das PHP-Setup zu demonstrieren, f√ºgen wir den folgenden Code hinzu, um die Gr√∂√üenbeschr√§nkungen f√ºr das Hochladen von Dateien festzulegen:</font></font><br>
<br>
<code>~/laravel-app/php/local.ini</code><br>
<br>
<pre><code class="xml hljs">upload_max_filesize=40M<font></font>
post_max_size=40M</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anweisungen upload_max_filesize und post_max_size legen die maximal zul√§ssige Gr√∂√üe der hochgeladenen Dateien fest und zeigen, wie die Konfigurationen von php.ini aus der Datei local.ini festgelegt werden. Sie k√∂nnen jeden PHP-Konfigurationsparameter, den Sie ignorieren m√∂chten, in die Datei local.ini einf√ºgen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurieren von Nginx</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn Sie den PHP-Dienst konfigurieren, k√∂nnen Sie den Nginx-Dienst so √§ndern, dass PHP-FPM als FastCGI-Server f√ºr die Bereitstellung dynamischer Inhalte verwendet wird. Der FastCGI-Server basiert auf einem Bin√§rprotokoll f√ºr die Interaktion interaktiver Programme mit einem Webserver. Weitere Informationen finden Sie im Artikel ‚ÄûGrundlegendes zu und Implementieren von FastCGI-Proxies in Nginx‚Äú. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Nginx zu konfigurieren, erstellen Sie eine app.conf-Datei mit der Dienstkonfiguration im Ordner ~ / laravel-app / nginx / conf.d /. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie zuerst das Verzeichnis nginx / conf.d /:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p ~/laravel-app/nginx/conf.d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie dann die Konfigurationsdatei app.conf:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/nginx/conf.d/app.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie der Datei den folgenden Code hinzu, um Nginx zu konfigurieren:</font></font><br>
<br>
<code>~/laravel-app/nginx/conf.d/app.conf</code><br>
<br>
<pre><code class="xml hljs">server {<font></font>
    listen 80;<font></font>
    index index.php index.html;<font></font>
    error_log  /var/log/nginx/error.log;<font></font>
    access_log /var/log/nginx/access.log;<font></font>
    root /var/www/public;<font></font>
    location ~ \.php$ {<font></font>
        try_files $uri =404;<font></font>
        fastcgi_split_path_info ^(.+\.php)(/.+)$;<font></font>
        fastcgi_pass app:9000;<font></font>
        fastcgi_index index.php;<font></font>
        include fastcgi_params;<font></font>
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;<font></font>
        fastcgi_param PATH_INFO $fastcgi_path_info;<font></font>
    }<font></font>
    location / {<font></font>
        try_files $uri $uri/ /index.php?$query_string;<font></font>
        gzip_static on;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Serverblock konfiguriert den Nginx-Webserver mithilfe der folgenden Anweisungen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">listen: Diese Anweisung definiert den Port, den der Server auf eingehende Anforderungen √ºberwacht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">error_log und access_log: Diese Anweisungen definieren Dateien f√ºr die Protokollierung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">root: Diese Anweisung legt den Pfad zum Stammordner fest und bildet den vollst√§ndigen Pfad f√ºr jede angeforderte Datei im lokalen Dateisystem.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im PHP-Speicherortblock zeigt die Anweisung fastcgi_pass an, dass der App-Dienst einen TCP-Socket an Port 9000 √ºberwacht. Damit √ºberwacht der PHP-FPM-Server das Netzwerk und nicht den Unix-Socket. Obwohl der Unix-Socket einen leichten Geschwindigkeitsvorteil gegen√ºber dem TCP-Socket bietet, verf√ºgt er nicht √ºber ein Netzwerkprotokoll und √ºberspringt den Netzwerkstapel. In F√§llen, in denen sich Hosts auf demselben System befinden, kann die Verwendung eines Unix-Sockets sinnvoll sein. Wenn die Dienste jedoch auf verschiedenen Hosts ausgef√ºhrt werden, bietet der TCP-Socket einen Vorteil, da Sie eine Verbindung zu verteilten Diensten herstellen k√∂nnen. Da unsere App- und Webserver-Container auf verschiedenen Hosts ausgef√ºhrt werden, ist es effizienter, in unserer Konfiguration einen TCP-Socket zu verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie mit den √Ñnderungen fertig sind, speichern Sie die Datei und schlie√üen Sie den Editor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dank der zuvor erstellten Bindung werden alle √Ñnderungen im Ordner nginx / conf.d / direkt im Webserver-Container angezeigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns nun die MySQL-Parameter an. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einrichten von MySQL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nach dem Einrichten von PHP und Nginx k√∂nnen Sie MySQL als Datenbank f√ºr Ihre Anwendung aktivieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um MySQL zu konfigurieren, m√ºssen Sie die Datei my.cnf im Ordner mysql erstellen. </font><font style="vertical-align: inherit;">Dies ist die Datei, die Sie w√§hrend des Datenbankkonfigurationsschritts an die Datei /etc/mysql/my.cnf im Container angeh√§ngt haben. </font><font style="vertical-align: inherit;">Durch das Mounten des gemounteten Images k√∂nnen Sie bei Bedarf alle my.cnf-Optionen ignorieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um zu demonstrieren, wie dies funktioniert, f√ºgen wir my.cnf Einstellungen hinzu, die das allgemeine Anforderungsprotokoll enthalten, und legen die Protokolldatei fest. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie ein MySQL-Verzeichnis:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir ~/laravel-app/mysql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie die Datei my.cnf:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/mysql/my.cnf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie der Datei den folgenden Code hinzu, um das Abfrageprotokoll zu aktivieren und den Speicherort der Protokolldatei festzulegen:</font></font><br>
<br>
<code>~/laravel-app/mysql/my.cnf</code><br>
<br>
<pre><code class="xml hljs">[mysqld]<font></font>
general_log = 1<font></font>
general_log_file = /var/lib/mysql/general.log</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Datei my.cnf unterst√ºtzt Protokolle, indem der Parameter general_log auf 1 gesetzt wird, wodurch allgemeine Protokolle aktiviert werden. </font><font style="vertical-align: inherit;">Der Parameter general_log_file gibt an, wo die Protokolle gespeichert werden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Container starten und Umgebungseinstellungen √§ndern</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sie haben alle Dienste in der Docker-Compose-Datei definiert und Konfigurationsdateien f√ºr diese Dienste erstellt. </font><font style="vertical-align: inherit;">Jetzt k√∂nnen Sie Container ausf√ºhren. </font><font style="vertical-align: inherit;">Abschlie√üend erstellen wir eine Kopie der .env.example-Datei, die Laravel standardm√§√üig enth√§lt, und nennen sie .env, da Laravel eine solche Datei verwendet, um die Umgebung zu bestimmen:</font></font><br>
<br>
<pre><code class="bash hljs">cp .env.example .env</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Starten der Container konfigurieren wir bestimmte Installationsparameter in dieser Datei. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt sind alle Ihre Dienste in der Docker-Compose-Datei definiert, und Sie m√ºssen nur noch einen Befehl ausf√ºhren, um alle Container zu starten, Volumes zu erstellen und Netzwerke zu konfigurieren und zu verbinden:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose up -d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Docker-Compose zum ersten Mal starten, werden alle erforderlichen Docker-Images heruntergeladen. Dies kann einige Zeit dauern. </font><font style="vertical-align: inherit;">Nachdem Sie die Bilder heruntergeladen und auf dem lokalen Computer gespeichert haben, erstellt Compose Ihre Container. </font><font style="vertical-align: inherit;">Das Flag -d konvertiert den Prozess in einen Daemon, mit dem Container im Hintergrund ausgef√ºhrt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie nach Abschluss des Vorgangs den folgenden Befehl, um alle laufenden Container aufzulisten:</font></font><br>
<pre><code class="bash hljs">docker ps</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie sehen die folgenden Ergebnisse mit Daten auf den App-, Webserver- und Datenbankcontainern:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
CONTAINER ID        NAMES               IMAGE                             STATUS              PORTS<font></font>
c31b7b3251e0        db                  mysql:5.7.22                      Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp<font></font>
ed5a69704580        app                 digitalocean.com/php              Up 2 seconds        9000/tcp<font></font>
5ce4ee31d7c0        webserver           nginx:alpine                      Up 2 seconds        0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesen Ergebnissen ist die CONTAINER-ID eine eindeutige Kennung f√ºr jeden Container, und NAMES listet die Dienstnamen f√ºr jeden Container auf. </font><font style="vertical-align: inherit;">Sie k√∂nnen beide Bezeichner verwenden, um auf Container zuzugreifen. </font><font style="vertical-align: inherit;">IMAGE definiert den Bildnamen jedes Containers und STATUS bietet Informationen zum Status des Containers: gestartet, neu gestartet oder gestoppt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen Sie die ENV-Datei im App-Container √§ndern, um Ihrem System bestimmte Parameter hinzuzuf√ºgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ñffnen Sie die Datei mit Docker-Compose Exec, mit der Sie bestimmte Befehle in Containern ausf√ºhren k√∂nnen. </font><font style="vertical-align: inherit;">In diesem Fall √∂ffnen Sie die Datei zur Bearbeitung:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app nano .env</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suchen Sie den Block, in dem DB_CONNECTION angegeben ist, und aktualisieren Sie ihn entsprechend Ihrer Systemkonfiguration. </font><font style="vertical-align: inherit;">Sie werden die folgenden Felder √§ndern:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_HOST ist Ihr Datenbankdatenbankcontainer.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_DATABASE ist die Laravel-Datenbank.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_USERNAME ist der Benutzername f√ºr Ihre Datenbank. </font><font style="vertical-align: inherit;">In diesem Fall verwenden wir Laraveluser.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_PASSWORD ist ein Passwort, das f√ºr dieses Benutzerkonto gesch√ºtzt ist.</font></font></li>
</ol><br>
<code>/var/www/.env</code><br>
<br>
<pre><code class="xml hljs">DB_CONNECTION=mysql<font></font>
DB_HOST=db<font></font>
DB_PORT=3306<font></font>
DB_DATABASE=laravel<font></font>
DB_USERNAME=laraveluser<font></font>
DB_PASSWORD=your_laravel_db_password</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist auch erforderlich, dieselben Variablen in der .env.example-Datei zu korrigieren, da sie sp√§ter bei der Bereitstellung auf dem Server verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurieren Sie dann den Anwendungsschl√ºssel f√ºr Laravel mit dem Befehl php artisan key: generate. </font><font style="vertical-align: inherit;">Dieser Befehl generiert einen Schl√ºssel und kopiert ihn in die ENV-Datei, wodurch Benutzersitzungen und verschl√ºsselte Daten gesch√ºtzt werden:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan key:generate</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben Sie alle erforderlichen Umgebungseinstellungen, um die Anwendung auszuf√ºhren. </font><font style="vertical-align: inherit;">F√ºhren Sie den folgenden Befehl aus, um diese Einstellungen in einer Datei zwischenzuspeichern, die das Laden von Anwendungen beschleunigt.</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan config:cache</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Konfigurationseinstellungen werden in die Datei /var/www/bootstrap/cache/config.php im Container geladen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ñffnen Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abschlie√üend</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">localhost-</font></a><font style="vertical-align: inherit;"> Site in Ihrem Browser </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die Hauptseite der Laravel-Anwendung wird ge√∂ffnet. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen eines MySQL-Benutzers</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bei der Installation von MySQL wird standardm√§√üig nur ein administratives Stammkonto mit unbegrenzten Berechtigungen f√ºr den Zugriff auf den Datenbankserver erstellt. </font><font style="vertical-align: inherit;">Wenn Sie mit einer Datenbank arbeiten, ist es normalerweise am besten, die Verwendung eines administrativen Stammkontos zu vermeiden. </font><font style="vertical-align: inherit;">Stattdessen erstellen wir einen speziellen Datenbankbenutzer f√ºr die Laravel-Datenbank unserer Anwendung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um einen neuen Benutzer zu erstellen, starten Sie die interaktive Bash-Shell im Datenbankcontainer mit dem Befehl docker-compose exec:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> db bash</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Melden Sie sich im Container beim MySQL-Root-Administratorkonto an:</font></font><br>
<br>
<pre><code class="sql hljs">mysql -u root -p</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Installation in der Docker-Compose-Datei werden Sie aufgefordert, das f√ºr das MySQL-Root-Konto angegebene Kennwort einzugeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√úberpr√ºfen Sie zun√§chst die in der Docker-Compose-Datei definierte Laravel-Datenbank. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie den Befehl show database aus, um vorhandene Datenbanken zu √ºberpr√ºfen:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">show</span> <span class="hljs-keyword">databases</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Ergebnissen sollte die Laravel-Datenbank angezeigt werden:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
+--------------------+<font></font>
| Database           |<font></font>
+--------------------+<font></font>
| information_schema |<font></font>
| laravel            |<font></font>
| mysql              |<font></font>
| performance_schema |<font></font>
| sys                |<font></font>
+--------------------+<font></font>
5 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie dann ein Benutzerkonto, das Zugriff auf diese Datenbank gew√§hrt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verwenden den Laraveluser-Benutzernamen, aber Sie k√∂nnen ihn durch einen beliebigen bevorzugten Namen ersetzen. </font><font style="vertical-align: inherit;">Stellen Sie einfach sicher, dass der Benutzername und das Kennwort mit denen in der ENV-Datei im vorherigen Schritt √ºbereinstimmen:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">ON</span> laravel.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'laraveluser'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'your_laravel_db_password'</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktualisieren Sie die Berechtigungen, um den MySQL-Server √ºber √Ñnderungen zu informieren:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schlie√üen Sie MySQL:</font></font><br>
<br>
<pre><code class="sql hljs">EXIT;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verlasse den Container:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">exit</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen Sie die Migration durchf√ºhren, um die Datenbank zu testen:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan migrate</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Ergebnisse der Migrationsbest√§tigung lauten wie folgt:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
<font></font>
Migration table created successfully.<font></font>
Migrating: 2014_10_12_000000_create_users_table<font></font>
Migrated:  2014_10_12_000000_create_users_table<font></font>
Migrating: 2014_10_12_100000_create_password_resets_table<font></font>
Migrated:  2014_10_12_100000_create_password_resets_table</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil 2. Gitlab</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Hitlab m√ºssen Sie ein neues Projekt erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen wir das Projekt im Hitlab-Repository speichern. </font><font style="vertical-align: inherit;">Rufen Sie dazu die folgenden Befehle aus dem Projektordner auf dem lokalen Computer auf:</font></font><br>
<br>
<pre><code class="bash hljs">git init<font></font>
git remote add origin git@gitlab.com:&lt;&gt;/&lt;&gt;  <font></font>
git remote add origin https://gitlab.com/&lt;&gt;/&lt;&gt;      SSH<font></font>
git add .<font></font>
git commit -m <span class="hljs-string">"Initial commit"</span>
git push -u origin master</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Projekt sollte unter Projekt√ºbersicht -&gt; Details angezeigt werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit die fertige Umgebung sofort abgerufen werden kann, speichern wir das Docker-Image der Umgebung im Hitlistenregister. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dazu m√ºssen Sie Folgendes tun:</font></font><br>
<br>
<pre><code class="bash hljs">docker login registry.gitlab.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wirf das Bild auf gitlab:</font></font><br>
<br>
<pre><code class="bash hljs">docker build -t registry.gitlab.com/&lt;&gt;/&lt;&gt; .<font></font>
docker push registry.gitlab.com/&lt;&gt;/&lt;&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Bild befindet sich in Packages-&gt; Container Registry. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Abschluss von gitlab erhalten wir sofort den Schl√ºssel zu gitlab-running. </font><font style="vertical-align: inherit;">Gehen Sie dazu zu Einstellung-&gt; CI / CD-&gt; Runner. </font><font style="vertical-align: inherit;">Der Schl√ºssel befindet sich in Schritt 3 im Abschnitt Manuelle Konfiguration (Manuelles Einrichten eines bestimmten L√§ufers).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil 3. Serverkonfiguration</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der VPS-Server muss mit dem Virtualisierungstyp KVM oder XEN belegt sein. </font><font style="vertical-align: inherit;">Virtualisierung wie OpenVZ teilt den Kern des Systems zwischen allen Benutzern, sodass die Kernelparameter nicht ge√§ndert werden k√∂nnen. </font><font style="vertical-align: inherit;">F√ºr den Test habe ich den KVM-Server mit vorinstalliertem Docker verwendet. </font><font style="vertical-align: inherit;">M√∂glicherweise befindet sich jedoch kein Docker auf dem Server. </font><font style="vertical-align: inherit;">In diesem Fall m√ºssen Sie es manuell installieren. </font><font style="vertical-align: inherit;">Der Algorithmus ist der gleiche wie bei der Installation auf dem lokalen Computer. </font><font style="vertical-align: inherit;">Es ist auch notwendig, die PHP-Version zu √ºberpr√ºfen. </font><font style="vertical-align: inherit;">F√ºr Laravel ben√∂tigen Sie mindestens 7.2. </font><font style="vertical-align: inherit;">Ich musste auch die Erweiterung f√ºr PHP ext-mbstring separat installieren (in meinem Fall f√ºr PHP 7.3):</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update<font></font>
sudo apt-get install php7.3-mbstring<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes m√ºssen wir Gitlab-Runner installieren. </font><font style="vertical-align: inherit;">Runner ist ein Dienst, der beim Empfang einer neuen Version einen Webhook von einem Hitlab akzeptiert und alles auf unserem Server bereitstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um gitlab-running zu installieren, m√ºssen Sie Folgendes tun:</font></font><br>
<br>
<pre><code class="bash hljs">curl -L --output /usr/<span class="hljs-built_in">local</span>/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Legen Sie nach dem Herunterladen die Berechtigung zum Ausf√ºhren fest:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/gitlab-runner
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie als N√§chstes den Gitlab-Runner-Benutzer und f√ºhren Sie den Gitlab-Runner-Dienst aus:</font></font><br>
<br>
<pre><code class="bash hljs">sudo useradd --comment <span class="hljs-string">'GitLab Runner'</span> --create-home gitlab-runner --shell /bin/bash<font></font>
sudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner<font></font>
sudo gitlab-runner start</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L√§ufer registrieren. </font><font style="vertical-align: inherit;">Dazu ben√∂tigen wir das Token aus Teil 2 dieses Artikels:</font></font><br>
<br>
<pre><code class="bash hljs">sudo gitlab-runner register</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Antwort werden Sie nach der Adresse Ihres Hitlab gefragt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gitlab.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )<font></font>
https://gitlab.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes m√ºssen Sie den Token eingeben. </font><font style="vertical-align: inherit;">Geben Sie den Token aus Teil 2 ein.</font></font><br>
<br>
<pre><code class="bash hljs">Please enter the gitlab-ci token <span class="hljs-keyword">for</span> this runner<font></font>
xxx<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie als N√§chstes eine durch Kommas getrennte Beschreibung und Tags an. </font><font style="vertical-align: inherit;">Dann wird uns angeboten, einen Testamentsvollstrecker auszuw√§hlen. </font><font style="vertical-align: inherit;">Hier m√ºssen Sie eine Shell ausw√§hlen:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
Please enter the executor:<font></font>
shell</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach meinem Verst√§ndnis ist der Executor eine Umgebung, in der der Code aus der Datei .gitlab-ci.yml ausgef√ºhrt wird. </font><font style="vertical-align: inherit;">Es stehen Bash, SSH, Docker, Parallelen, Virtualbox und Kubernets zur Auswahl. </font><font style="vertical-align: inherit;">In der Dokumentation wird empfohlen, bash zu verwenden, wenn Sie nicht wissen, was Sie verwenden sollen. </font><font style="vertical-align: inherit;">Dies ist eine universelle Option, die in der Befehlszeile Ihres Servers ausgef√ºhrt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann m√ºssen wir den Gitlab-Runner-Benutzer zur Docker-Benutzergruppe hinzuf√ºgen.</font></font><br>
<br>
<pre><code class="bash hljs">sudo usermod -aG docker gitlab-runner</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie sudoers hinzu, um Zugriffsfehler zu vermeiden</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /etc/sudoers</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linie </font></font><br>
<br>
<pre><code class="bash hljs">gitlab-runner ALL=(ALL) NOPASSWD: ALL</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen wir die Datei .gitlab-ci.yml erstellen. </font><font style="vertical-align: inherit;">F√ºr die Ausf√ºhrung der sogenannten Pipeline ist Folgendes erforderlich: eine Folge von Befehlen zum Bereitstellen eines Projekts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen Sie dazu zum Projekt-Repository in der Trefferliste und klicken Sie auf Neue Datei erstellen. </font><font style="vertical-align: inherit;">Gitlab selbst bietet Dateivorlagen an, unter denen Sie .gitlab-ci.yml ausw√§hlen m√ºssen. </font><font style="vertical-align: inherit;">Nach dem Erstellen einer Datei in gitlab k√∂nnen Sie eine Vorlage f√ºr den Inhalt der Datei ausw√§hlen. </font><font style="vertical-align: inherit;">Ich habe mich f√ºr Laravel entschieden und es ein wenig f√ºr mich √ºberarbeitet:</font></font><br>
<br>
<pre><code class="xml hljs"><font></font>
# This file is a template, and might need editing before it works on your project.<font></font>
# Official framework image. Look for the different tagged releases at:<font></font>
# https://hub.docker.com/r/library/php<font></font>
# .    ,        <font></font>
image: registry.gitlab.com/<span class="hljs-tag">&lt;<span class="hljs-name"></span>&gt;</span>/<span class="hljs-tag">&lt;<span class="hljs-name"></span>&gt;</span>:latest<font></font>
<font></font>
# Pick zero or more services to be used on all builds.<font></font>
# Only needed when using a docker container to run your tests in.<font></font>
# Check out: http://docs.gitlab.com/ce/ci/docker/using_docker_images.html#what-is-a-service<font></font>
services:<font></font>
  - mysql:latest<font></font>
#    <font></font>
variables:<font></font>
  MYSQL_DATABASE: laravel<font></font>
  MYSQL_ROOT_PASSWORD: ***********<font></font>
<font></font>
# This folder is cached between builds<font></font>
# ,      <font></font>
# http://docs.gitlab.com/ce/ci/yaml/README.html#cache<font></font>
cache:<font></font>
  paths:<font></font>
    - vendor/<font></font>
    - node_modules/<font></font>
<font></font>
# This is a basic example for a gem or script which doesn't use<font></font>
# services such as redis or postgres<font></font>
#     <font></font>
before_script:<font></font>
  #   <font></font>
  - sudo apt-get update -yqq<font></font>
  #    nodejs<font></font>
  - sudo apt-get install gnupg -yqq<font></font>
  #  Node   12<font></font>
  - curl -sL https://deb.nodesource.com/setup_12.x | sudo bash -<font></font>
  #  <font></font>
  - sudo apt-get install git nodejs libcurl4-gnutls-dev libicu-dev libmcrypt-dev libvpx-dev libjpeg-dev libpng-dev libxpm-dev zlib1g-dev libfreetype6-dev libxml2-dev libexpat1-dev libbz2-dev libgmp3-dev libldap2-dev unixodbc-dev libpq-dev libsqlite3-dev libaspell-dev libsnmp-dev libpcre3-dev libtidy-dev -yqq<font></font>
  #  composer<font></font>
  - curl -sS https://getcomposer.org/installer | php<font></font>
  - php composer.phar install<font></font>
  - composer install<font></font>
  #   Node<font></font>
  - npm install<font></font>
  # Copy over testing configuration.<font></font>
  # Don't forget to set the database config in .env.testing correctly<font></font>
  - DB_HOST=mysql<font></font>
  - DB_DATABASE=laravel<font></font>
  - DB_USERNAME=root<font></font>
  - DB_PASSWORD=*********<font></font>
  #  .env.example    .env<font></font>
  - cp .env.example .env<font></font>
  #  npm build<font></font>
  - npm run dev<font></font>
  #       laravel<font></font>
  - php artisan key:generate<font></font>
  - php artisan config:cache<font></font>
  - php artisan route:clear<font></font>
  - php artisan config:clear<font></font>
  - php artisan cache:clear<font></font>
  #  .<font></font>
  - docker-compose exec app php artisan migrate<font></font>
  #   <font></font>
  #- docker-compose exec app php artisan db:seed<font></font>
<font></font>
#<font></font>
test:<font></font>
  script:<font></font>
    #  <font></font>
    - php vendor/bin/phpunit --coverage-text --colors=never<font></font>
    #  npm<font></font>
    - npm test<font></font>
<font></font>
#       <font></font>
deploying:<font></font>
  stage: deploy<font></font>
  script:<font></font>
    - echo "Deployed"<font></font>
    - docker-compose stop<font></font>
    - docker-compose up -d<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie die Pipeline (CI / CD-&gt; Pipelines) erfolgreich an der IP-Adresse Ihres Servers ausgef√ºhrt haben, sollte Ihre Laravel-Seite angezeigt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um CI / CD zu konfigurieren, habe ich Anweisungen von Sean Bradley verwendet:</font></font><br>
<br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://youtu.be/RV0845KmsNI</font></font></a></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medium.com/@sean_bradley/auto-devops-with-gitlab-ci-and-docker-compose-f931233f080f</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de491520/index.html">Konvertieren Sie xls in xlsx und xml in C #</a></li>
<li><a href="../de491522/index.html">Warum leben Frauen l√§nger?</a></li>
<li><a href="../de491524/index.html">Stas Afanasyev. Juno. Pipelines basierend auf io.Reader / io.Writer. Teil 2</a></li>
<li><a href="../de491528/index.html">Meine Erfahrung ist die Durchf√ºhrung von 1000 Interviews. Zusammenfassung des Berichts von Yegor Bugaenko</a></li>
<li><a href="../de491530/index.html">Nochmals ca. 433 MHz Sender und Empf√§nger</a></li>
<li><a href="../de491534/index.html">Eine kurze Anleitung zur Verwendung von GDB</a></li>
<li><a href="../de491536/index.html">YouTube - Fehler. Bitte versuchen Sie es sp√§ter noch einmal. Wiedergabe-ID: <...></a></li>
<li><a href="../de491538/index.html">Sprawl Lemmas f√ºr regul√§re und kontextfreie Sprachen</a></li>
<li><a href="../de491540/index.html">Netzwerke f√ºr einen unerfahrenen IT-Spezialisten. Obligatorische Basis</a></li>
<li><a href="../de491542/index.html">Farbtransformation: Suche nach Ausd√ºnnungstabellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>