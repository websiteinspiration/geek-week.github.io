<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🤝‍👨🏻 🏛️ 🐛 Comme si nous n'avions pas de blockchain 📮 🌆 🕡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comment avons-nous utilisé le smart-contract pour construire un système de sélection des meilleurs projets technologiques en IT MTS? Et dans quels «pi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comme si nous n'avions pas de blockchain</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/504058/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment avons-nous utilisé le smart-contract pour construire un système de sélection des meilleurs projets technologiques en IT MTS? </font><font style="vertical-align: inherit;">Et dans quels «pièges» nous sommes tombés, mais nous avons pu en sortir, prouvant au final qu'il est possible de maintenir un registre distribué sur les appareils mobiles!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3b/1v/ze/3b1vzeubkfgosjf5aiumj_xfre0.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi un système basé sur la blockchain était-il nécessaire?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par le tout début. </font><font style="vertical-align: inherit;">MTS a une longue tradition - choisir le meilleur projet technologique réalisé en un an et récompenser son équipe. </font><font style="vertical-align: inherit;">L'équipe reçoit des prix, du respect et de la renommée. </font><font style="vertical-align: inherit;">Au fil des ans, divers projets sont devenus gagnants: des systèmes de télécommunications très chargés aux systèmes d'intelligence artificielle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sélection du meilleur projet s'est toujours déroulée en plusieurs étapes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les équipes postulent </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le vote d'experts techniques respectés a lieu </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après experts, les projets sont sélectionnés par les managers </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À la fin de toutes les étapes, le grand patron choisit le meilleur projet. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons décidé que ce schéma n'était pas suffisamment transparent pour les participants et nous avons pensé: pourquoi ne pas donner à tous les experts de l'entreprise la possibilité de choisir le meilleur projet technologique?   </font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous mettons en œuvre cette opportunité directement par téléphone, nous verrons la notation actuelle des projets et qui votera pour qui - cela garantira une transparence totale du processus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons lu plusieurs articles sur la blockchain et l'idée de construire un système de registre distribué fermement ancré dans nos têtes. </font><font style="vertical-align: inherit;">Mais que se passe-t-il si nous appliquons le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smart-contract ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons été attirés par les propriétés suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ouverture - il n'y a pas de serveur unique où vous pouvez manipuler les informations;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les informations placées dans un registre distribué y restent pour toujours;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'information ne peut pas être truquée (enfin ... pratiquement) </font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pas de blockchain </font></font></h2><br>
<img src="https://habrastorage.org/webt/sl/7o/g9/sl7og9sx7arxqn4m70nh4icfsja.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La blockchain elle-même ne devrait pas être utilisée pour de telles élections. </font><font style="vertical-align: inherit;">Mais que se passe-t-il si nous prenons les protocoles pour construire un consensus dans les systèmes distribués et les appliquons à la construction d'un consensus dans les relations humaines? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que nous devrons travailler dans un réseau ouvert, nous devons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> protéger des </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">attaques non byzantines</font></a><font style="vertical-align: inherit;"> et de la substitution d'informations sur les appareils des utilisateurs.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelles sont les alternatives </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le protocole le plus célèbre est PAXOS. Il manque un leader explicite et tous les changements passent par un commit en deux phases. Au début de chaque changement, Proposer se produit. S'il a réussi, alors Accepter est envoyé.   </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une caractéristique de l'algorithme peut être appelée le fait qu'il utilise des temporisateurs globaux pour déterminer quelle requête est générée plus tôt et que le nœud effectuant les modifications doit communiquer avec tous les nœuds du réseau. En savoir plus sur l'algorithme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'algorithme est utilisé à de nombreux endroits, par exemple dans le SGBD Cassandra. Nous n'avons pas aimé ce protocole en termes de complexité de sa mise en œuvre pour la tâche. Mais la deuxième option nous est venue - c'est RAFT. En fait, il s'agit d'une évolution du protocole PAXOS avec un leader clair. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le protocole simplifié peut être décrit comme suit:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· Un réseau d'appareils est en cours de construction qui se connaissent les uns les autres; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· Les appareils choisissent entre eux un leader qui prend des «décisions importantes» (par exemple, ajouter une entrée au registre ou changer la composition du réseau); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· L'appareil leader est responsable de la diffusion des informations à travers le réseau afin que partout elles soient identiques; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
· Dès que le leader cesse de s'acquitter de ses fonctions - choisissez un nouveau leader. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lisez le protocole </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre implémentation </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que faisons-nous et pourquoi le monde est-il un autre vélo?   </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presque tous les utilisateurs de notre registre ont des appareils mobiles qui sont presque toujours allumés et presque toujours en ligne, et les utilisent en fait presque toujours, nous avons donc décidé d'exécuter l'algorithme de registre de distribution sur les appareils mobiles, et non sur l'infrastructure du serveur, comme d'autres implémentations bien connues . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voyons dans quels «pièges» nous sommes entrés, mais nous avons réussi à en sortir…</font></font></b><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piège numéro 1: "Mon adresse n'est pas la maison et pas la rue"</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Tout à coup», il s'est avéré que pour construire un réseau P2P qui implémente un registre distribué utilisant le protocole RAFT pour la réplication des données, chaque appareil peut communiquer entre eux, ce qui signifie qu'il est à la fois un client et un serveur. Par conséquent, nous avons besoin d'une adresse IP publique «blanche» pour chaque téléphone mobile (ce n'est peut-être pas le cas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le nombre de véritables IPv4 est très limité, donc les opérateurs de télécommunications utilisent la technologie NAT (Network Address Translation) en mode PAT (Port Address Translation), traduisant plusieurs adresses IP du réseau interne (qui sont distribuées aux abonnés) en une seule adresse IP publique externe. Ainsi, la possibilité d'accepter les connexions entrantes à partir d'Internet est exclue. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La bonne nouvelle, c'est qu'il y a beaucoup d'IPv6!   </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un support IPv6 inclus dans le package de base. </font><font style="vertical-align: inherit;">De plus, tous les téléphones modernes prennent en charge IPv6 et l'opérateur attribue à l'abonné une adresse v6 «blanche» publique. </font><font style="vertical-align: inherit;">Notre choix est IPv6.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piège numéro 2: tout le monde s'est endormi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrairement aux serveurs, les téléphones mobiles s'éteignent parfois encore. Nous l'avons trouvé lors du test du premier prototype. De plus, l'adresse IPv6 fournie par l'opérateur est publique, mais pas statique, chaque nouvelle session de communication est une nouvelle adresse. L'adresse de l'appareil mobile peut changer à tout moment. Et s'il n'y a pas un seul téléphone avec l'adresse que nous connaissons sur le réseau, il cesse tout simplement d'exister (il n'y a rien à se connecter pour «l'augmenter»). Par conséquent, nous avons dû violer notre règle «pas de serveur» dans une certaine mesure. Nous avons créé un nœud spécial dans le cloud avec une adresse statique connue. Sa tâche consiste à mémoriser / mettre à jour la composition du réseau et à ne pas l'éteindre. C'est-à-dire que c'est un site ordinaire, personne ne vote que de lui, et en y tournant, vous pouvez toujours obtenir la liste actuelle des adresses de tous les participants du réseau.</font></font><br>
<br>
<h2>  3:     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il était nécessaire de résoudre le problème d'une manière ou d'une autre, afin que tout le monde ne puisse voter pour des projets, mais ceux qui en avaient besoin. La première idée était la suivante: maintenir une base de données de numéros de téléphone d'experts. Mais ils l'ont refusé, car ils ne voulaient pas donner à l'application le droit d'accéder à ces informations. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, ils ont rendu tout simple: ils ont décidé de fournir à chaque voix, chaque entrée de registre une signature numérique sur des courbes elliptiques à la mode, qui détermineront l'authenticité de l'enregistrement. Un service WEB a été placé sur le réseau de l'entreprise, qui, par autorisation de domaine, a déterminé l'expert et a généré pour lui un QR code unique avec les clés de chiffrement publiques et privées (bien sûr, côté client). L'expert a scanné le code de l'application et s'est connecté. Après cela, la version actuelle actuelle du registre a «roulé» sur son téléphone et la possibilité de voter est apparue.</font></font><br>
<br>
<h2>  4:  Android     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au cours des tests, il a été presque «soudainement» révélé que certains utilisateurs étaient propriétaires de modèles bien connus d'appareils mobiles exécutant le système d'exploitation iOS. Et il est devenu clair que notre logiciel de registre devrait fonctionner sur différentes plateformes. Nous nous sommes tournés vers le langage de programmation Kotlin, qui est non seulement «branché, élégant, jeune», mais également </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">multi-plateforme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le concept de multi-plateforme dans Kotlin implique qu'il existe une partie du code commun et spécifique à la plate-forme, mais comme les ressources de notre équipe sont limitées, nous nous sommes fixé la tâche odieuse d'utiliser une seule version du code source pour toutes les plates-formes! Bien entendu, le module exécutable doit être natif pour chaque plateforme. Kotlin était </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capable de cela</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À peine dit que c'était fait! </font><font style="vertical-align: inherit;">Nous avons un seul SourceSet avec le code source, à partir duquel nous collectons des binaires pour toutes les plates-formes (!), En utilisant le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fitOn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> «dépend» </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cool? </font><font style="vertical-align: inherit;">Très cool!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piège numéro 5: le trafic mobile n'est pas gratuit  </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment mettre en œuvre le plus efficacement possible l'interaction entre les nœuds du réseau afin de ne pas dépenser tout le trafic de l'abonné et de ne pas vider la batterie de l'appareil mobile? Nous supposons que le réseau peut comprendre 1000 appareils ou plus! L'option la plus évidente consiste à utiliser UDP au lieu de TCP, par exemple, dans la procédure de sélection «leader» ou lors de l'envoi de Heartbeats sans données. UDP est plus économique car il utilise un modèle de transfert de données simple, sans «poignée de main» et sans confirmations. Bien! Quoi d'autre? Bien sûr, les E / S asynchrones! </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous lisons attentivement la documentation de Kotlin Native.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pour toutes les cibles basées sur Unix ou Windows (y compris Android et iPhone), nous fournissons la plate-forme posix lib. Il contient des liaisons à l'implémentation de la plate-forme de la norme POSIX.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous lisons également attentivement la documentation standard POSIX et trouvons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une fonction étonnante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui nous permet de traiter les événements de socket en mode non bloquant! </font><font style="vertical-align: inherit;">Après avoir plongé tête baissée dans le monde merveilleux de la coroutine, des prises et du C Interop, nous avons pu réaliser un transport très efficace. </font><font style="vertical-align: inherit;">Super! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et sous quelle forme envoyer des données?    </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR! </font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un format de données binaires compact, qui, par chance, est implémenté dans la bibliothèque multi-plateforme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kotlinx.serialization</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tout simplement génial!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piège numéro 6: sérialisation  </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette fois, il s'est avéré que kotlinx.serialization n'est pas sous androidNative (sous androidJvm, bien sûr, il y en a un). </font><font style="vertical-align: inherit;">Chers collègues de JetBrains ont confirmé qu'ils ne sont pas en train de construire une bibliothèque pour androidNative, et avant la sortie de Kotlin 1.4, il n'y a plus de place pour cette tâche dans la feuille de route.   </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que faire? </font><font style="vertical-align: inherit;">Si la montagne ne va pas à Mohammed, Mohammed va à la montagne! </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons nous-mêmes compilé kotlinx.serialization pour toutes les plateformes, y compris androidNative! </font><font style="vertical-align: inherit;">Le plus étonnant, c'est que ça a marché!   </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piège numéro 7: où stocker le journal?   </font></font></h2>  <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De toute évidence, dans le stockage de valeurs-clés intégré, mais dans lequel? </font><font style="vertical-align: inherit;">Nous avons choisi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lmdbx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour la compacité du code, la vitesse, la multiplateforme et l'absence de fichier WAL. </font><font style="vertical-align: inherit;">Cette bibliothèque est développée par les gars de Positive Techlologies et provient de la légendaire bibliothèque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LMDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de l'un des auteurs d'OpenLDAP Howard Chu. </font><font style="vertical-align: inherit;">Et cela, à son tour, est enraciné dans la mise en œuvre de l'arbre B + de Martin Hedenfalk. </font><font style="vertical-align: inherit;">Soit dit en passant, prête à l'emploi, la bibliothèque n'a pas été conçue pour androidNative. </font><font style="vertical-align: inherit;">Nous avons soigneusement collecté toutes les erreurs, et les auteurs ont rapidement fourni des correctifs - pour lesquels un merci spécial à eux!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piège numéro 8: C Interop  </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mettre tout cela ensemble s'est avéré être une tâche très simple. En plus des sockets lmdbx et posix, nous avons intégré des bibliothèques pour générer / valider des signatures numériques sur des courbes elliptiques et calculer SHA256 en utilisant l'incroyable mécanisme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C Interop</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En termes simples - à partir d'une application native sur Kotlin, vous pouvez appeler la fonction de bibliothèque C, y compris avec des pointeurs vers des pointeurs et d'autres magie, tout cela semble un peu étrange. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, appeler getaddrinfo pour obtenir sockaddr. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vg/ej/pc/vgejpcyxkdvbkk8exlpafiml_e0.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment tu trouves Ilon Mask?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lier la bibliothèque C à l'exécutable natif de Kotlin est une quête distincte, que nous avons également réussi à traverser, mais pas sans béquilles. </font><font style="vertical-align: inherit;">Nous formons dynamiquement le fichier def directement dans le script de construction pour indiquer le chemin correct vers les bibliothèques par rapport au répertoire racine du projet, puis substituons son descripteur (fichier def) dans la section cinterops. </font><font style="vertical-align: inherit;">Dans le fichier def lui-même, seul le chemin absolu est déterminé, qui peut non seulement avoir un format différent si l'assemblage est effectué sous un système d'exploitation différent, mais en fait sur les machines locales des développeurs, bien sûr, peut également différer, ce qui conduit évidemment à une erreur lors du lien.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À propos de l'élection</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les principales élections que nous avons tenues dans la journée. </font><font style="vertical-align: inherit;">Un peu plus de 20 experts ont participé aux tests sur notre réseau. </font><font style="vertical-align: inherit;">21 projets ont été évalués dans 5 catégories, soit plus de 100 entrées avec votes pour des projets ont été ajoutées au registre.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grâce à ce petit projet de recherche, nous avons pu prouver que le maintien d'un registre distribué sur les appareils mobiles est possible! </font><font style="vertical-align: inherit;">Cela ouvre de nombreuses possibilités d'utilisation de cette technologie sur les appareils IoT pour organiser l'informatique Edge-computing. </font><font style="vertical-align: inherit;">Nous attendons toujours des tests de charge, une vulnérabilité aux attaques et une tolérance aux pannes. </font><font style="vertical-align: inherit;">Mais nous pensons que nous réussirons! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auteurs de l'article: architectes et développeurs du Centre R&amp;D de MTS Dmitry Dzyuba, Alexey Vasilenko et Semen Nevrev</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504044/index.html">Gérez des clusters PostgreSQL hautement disponibles à l'aide de Patroni. A. Klyukin, A. Kukushkin</a></li>
<li><a href="../fr504048/index.html">Levez la main ou roulette de traduction russe</a></li>
<li><a href="../fr504050/index.html">Ce qui est bon et ce qui est mauvais. La carrière de développeur à travers les yeux de son leader</a></li>
<li><a href="../fr504054/index.html">Nous fabriquons une machine d'arcade avec un accepteur de billets et un accepteur de pièces</a></li>
<li><a href="../fr504056/index.html">À propos de regarder un film en anglais avec des sous-titres, le simplifier avec des sous-titres bilingues et sous-titreur bilingue</a></li>
<li><a href="../fr504060/index.html">"Masque du jour d'Ilona." Premier vol des astronautes de la NASA sur le Crew Dragon de SpaceX</a></li>
<li><a href="../fr504064/index.html">Comment nous avons abandonné l'utilisation du Styled-System pour créer des composants et inventé notre propre vélo</a></li>
<li><a href="../fr504066/index.html">Comment Amazon va regagner des clients</a></li>
<li><a href="../fr504068/index.html">Un étudiant diplômé a résolu le problème du «nœud Conway», sur lequel ils se sont battus pendant des décennies</a></li>
<li><a href="../fr504070/index.html">Un étudiant diplômé a résolu un problème topologique il y a un demi-siècle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>