<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∏üèæ üòå üëäüèª Serializa√ß√£o Java: velocidade m√°xima sem uma estrutura de dados r√≠gida üßëüèæ üéôÔ∏è üå¶Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nossa equipe do Sberbank est√° desenvolvendo um servi√ßo de dados de sess√£o que organiza o interc√¢mbio de um √∫nico contexto de sess√£o Java entre aplicat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Serializa√ß√£o Java: velocidade m√°xima sem uma estrutura de dados r√≠gida</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/488612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nossa equipe do Sberbank est√° desenvolvendo um servi√ßo de dados de sess√£o que organiza o interc√¢mbio de um √∫nico contexto de sess√£o Java entre aplicativos distribu√≠dos. Nosso servi√ßo precisa urgentemente de serializa√ß√£o muito r√°pida de objetos Java, pois isso faz parte de nossa tarefa de miss√£o cr√≠tica. Inicialmente, eles vieram √† nossa mente: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buffers de Protocolo do Google</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Thrift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Avro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As tr√™s primeiras bibliotecas requerem serializa√ß√£o de objetos para descrever o esquema de seus dados. </font><font style="vertical-align: inherit;">O CBOR √© t√£o baixo que s√≥ pode serializar valores escalares e seus conjuntos. </font><font style="vertical-align: inherit;">O que precis√°vamos era de uma biblioteca de serializa√ß√£o Java que "n√£o fizesse muitas perguntas" e n√£o for√ßasse a classifica√ß√£o manual de objetos serializ√°veis ‚Äã‚Äã"em √°tomos". </font><font style="vertical-align: inherit;">Quer√≠amos serializar objetos Java arbitr√°rios sem saber praticamente nada sobre eles, e quer√≠amos fazer isso o mais r√°pido poss√≠vel. </font><font style="vertical-align: inherit;">Portanto, organizamos uma competi√ß√£o pelas solu√ß√µes Open Source dispon√≠veis para o problema de serializa√ß√£o do Java.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/52/0t/82/520t82yicq9kayb7s3bovbktf04.png" alt="KDPV"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concorrentes</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a competi√ß√£o, selecionamos as bibliotecas de serializa√ß√£o Java mais populares, principalmente usando o formato bin√°rio, bem como as bibliotecas que funcionaram bem em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outras </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revis√µes de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> serializa√ß√£o Java.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Padr√£o Java</font></font></i></td>
<td> Java- ¬´ ¬ª,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>2</td>
<td><i>Jackson JSON</i></td>
<td> &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FasterXML/jackson-databind</a>,  Java-   JSON-.<br>
</td>
</tr>
<tr>
<td>3</td>
<td><i>Jackson JSON (with types)</i></td>
<td>  ,   ,    ,      full qualified  Java-.        JSON- (,  )  .<br>
<div class="spoiler"><b class="spoiler_title">,    JSON...</b><div class="spoiler_text"><pre><code class="javascript hljs">[
  <span class="hljs-string">"ru.sbrf.ufs.dto.PersonDto"</span>,<font></font>
  {<font></font>
    <span class="hljs-string">"firstName"</span>:<span class="hljs-string">"Ivan"</span>,
    <span class="hljs-string">"lastName"</span>:<span class="hljs-string">"Ivanov"</span><font></font>
  }<font></font>
]<font></font>
</code></pre></div></div><div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper();<font></font>
}<font></font>
</code></pre>:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper()<font></font>
            .enable(<font></font>
                    ACCEPT_SINGLE_VALUE_AS_ARRAY,<font></font>
                    ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,<font></font>
                    ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT,<font></font>
                    READ_UNKNOWN_ENUM_VALUES_AS_NULL,<font></font>
                    UNWRAP_SINGLE_VALUE_ARRAYS<font></font>
            )<font></font>
            .disable(<font></font>
                    FAIL_ON_INVALID_SUBTYPE,<font></font>
                    FAIL_ON_NULL_FOR_PRIMITIVES,<font></font>
                    FAIL_ON_IGNORED_PROPERTIES,<font></font>
                    FAIL_ON_UNKNOWN_PROPERTIES,<font></font>
                    FAIL_ON_NUMBERS_FOR_ENUMS,<font></font>
                    FAIL_ON_UNRESOLVED_OBJECT_IDS,<font></font>
                    WRAP_EXCEPTIONS<font></font>
            )<font></font>
            .enable(ALLOW_SINGLE_QUOTES)<font></font>
            .disable(FAIL_ON_EMPTY_BEANS)<font></font>
            .enable(MapperFeature.PROPAGATE_TRANSIENT_MARKER)<font></font>
            .setVisibility(FIELD, ANY)<font></font>
            .setVisibility(ALL, NONE)<font></font>
            .enableDefaultTyping(NON_FINAL);  <span class="hljs-comment">// !</span><font></font>
}<font></font>
</code></pre></div></div></td>
</tr>
<tr>
<td>4</td>
<td><i>Jackson Smile</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FasterXML/jackson-dataformats-binary/smile</a>,   Jackson-,  Java-    JSON- ‚Äì Smile.<br>
</td>
</tr>
<tr>
<td>5</td>
<td><i>Jackson Smile (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>6</td>
<td><i>Bson4Jackson</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">michel-kraemer/bson4jackson</a>,   Jackson-,  Java-    JSON- ‚Äì BSON.<br>
</td>
</tr>
<tr>
<td>7</td>
<td><i>Bson4Jackson (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>8</td>
<td><i>BSON MongoDb</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mongodb/mongo-java-driver/bson</a>,&nbsp;&nbsp; Java-  BSON-.<br>
</td>
</tr>
<tr>
<td>9</td>
<td><i>Kryo</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">EsotericSoftware/kryo</a>,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>10</td>
<td><i>Kryo (unsafe)</i></td>
<td>  ,   ,      sun.misc.Unsafe   /.<br>
<div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text"> :<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.Input<font></font>
com.esotericsoftware.kryo.io.Output<font></font>
</code></pre>:<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.UnsafeInput<font></font>
com.esotericsoftware.kryo.io.UnsafeOutput</code></pre></div></div></td>
</tr>
<tr>
<td>11</td>
<td><i>FST</i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A biblioteca&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuedigerMoeller / serializa√ß√£o r√°pida</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que converte objetos Java em seu pr√≥prio formato bin√°rio.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (inseguro)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A mesma biblioteca acima, mas configurada para usar a classe sun.misc.Unsafe para acelerar a serializa√ß√£o / desserializa√ß√£o.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos das configura√ß√µes da biblioteca ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs">FSTConfiguration fst = FSTConfiguration.createDefaultConfiguration();
</code></pre>:<pre><code class="plaintext hljs">FSTConfiguration fst = FSTConfiguration.createUnsafeBinaryConfiguration();</code></pre></div></div></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">treze</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um nio</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca odnoklassniki / one-nio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que converte objetos Java em seu pr√≥prio formato bin√°rio.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Nio (para persistir)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A mesma biblioteca acima, mas configurada de forma a incluir meta informa√ß√µes detalhadas sobre a classe do objeto Java serializ√°vel no resultado da serializa√ß√£o. </font><font style="vertical-align: inherit;">Isso pode estar em demanda durante o armazenamento de longo prazo </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(por exemplo, no banco de dados) antes da desserializa√ß√£o. </font><font style="vertical-align: inherit;">Ou seja, o objetivo perseguido √© o mesmo de Jackson JSON (com tipos).</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos das configura√ß√µes da biblioteca ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithoutSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
SerializeStream out = <span class="hljs-keyword">new</span> SerializeStream( bufWithoutSerializers );<font></font>
out.writeObject(object);<font></font>
<span class="hljs-comment">// bufWithoutSerializers is the result</span>
</code></pre>:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
PersistStream out = <span class="hljs-keyword">new</span> PersistStream( bufWithSerializers );<font></font>
out.writeObject(object);<font></font>
bufWithSerializers = out.toByteArray();<font></font>
<span class="hljs-comment">// bufWithSerializers is the result</span>
</code></pre><br>
   <code>object</code>-  <code>result</code>&nbsp;  -:<br>
1) full qualified    <code>object</code>,<br>
2)     ,<br>
3) full qualified     ,<br>
4)        .<br>
  -  ,  One Nio   ,        .</div></div></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui vamos n√≥s!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corrida</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A velocidade √© o principal crit√©rio para avaliar as bibliotecas de serializa√ß√£o Java participantes de nossa competi√ß√£o improvisada. </font><font style="vertical-align: inherit;">Para avaliar objetivamente qual das bibliotecas de serializa√ß√£o √© mais r√°pida, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extra√≠mos dados reais dos logs de nosso sistema e compusemos dados de sess√£o sint√©ticos com diferentes comprimentos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : de 0 a 1 MB. </font><font style="vertical-align: inherit;">O formato dos dados foram cadeias de caracteres e matrizes de bytes.</font></font><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Olhando para o futuro, deve-se dizer que vencedores e perdedores j√° apareceram no tamanho de objetos serializ√°veis ‚Äã‚Äãde 0 a 10 KB. </font><font style="vertical-align: inherit;">Um aumento adicional no tamanho dos objetos para 1 MB n√£o mudou o resultado da competi√ß√£o. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse sentido, para melhor clareza, os gr√°ficos a seguir do desempenho dos serializadores Java s√£o limitados pelo tamanho dos objetos de 10 KB.</font></font></blockquote><i> ,    :</i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td>Intel<sup>R</sup>&nbsp;Core<sup>TM</sup> i7-6700 CPU, 3.4GHz, 8 cores</td>
</tr>
<tr>
<td></td>
<td>16 GB</td>
</tr>
<tr>
<td> </td>
<td>Microsoft Windows&nbsp;10&nbsp;(64-bit)</td>
</tr>
<tr>
<td>JRE</td>
<td>IBM J9 VM 1.7.0</td>
</tr>
</tbody></table></div><blockquote><strong>:</strong>   ,  IBM JRE    One Nio (   13  14).     <code>sun.reflect.MagicAccessorImpl</code>    <code>private</code>  <code>final</code> ( )  ,    . , IBM JRE      &nbsp;<code>sun.reflect.MagicAccessorImpl</code>,   ,     runtime .<br>
<br>
           (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Serialization-FAQ</a>,  One Nio   ),    fork  ,    &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  .   &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  fork-   <code>sun.misc.Unsafe</code>     .<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, em nossa bifurca√ß√£o, a serializa√ß√£o de cadeias foi otimizada - as cadeias come√ßaram a ser serializadas 30 a 40% mais rapidamente ao trabalhar no IBM JRE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse sentido, nesta publica√ß√£o, todos os resultados da biblioteca One Nio foram obtidos em nosso pr√≥prio fork, e n√£o na biblioteca original.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A medi√ß√£o direta da velocidade de serializa√ß√£o / desserializa√ß√£o foi realizada usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Microbenchmark Harness</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (JMH) - uma ferramenta do OpenJDK para constru√ß√£o e execu√ß√£o de benchmark-s. </font><font style="vertical-align: inherit;">Para cada medi√ß√£o (um ponto no gr√°fico), foram utilizados 5 segundos para ‚Äúaquecer‚Äù a JVM e outros 5 segundos para as pr√≥prias medi√ß√µes de tempo, seguidos da m√©dia. </font></font><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></b></i><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo de refer√™ncia JMH sem alguns detalhes</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializationPerformanceBenchmark</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@State( Scope.Benchmark )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parameters</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Param( {
            "Java standard",
            "Jackson default",
            "Jackson system",
            "JacksonSmile default",
            "JacksonSmile system",
            "Bson4Jackson default",
            "Bson4Jackson system",
            "Bson MongoDb",
            "Kryo default",
            "Kryo unsafe",
            "FST default",
            "FST unsafe",
            "One-Nio default",
            "One-Nio for persist"
        } )</span>
        <span class="hljs-keyword">public</span> String serializer;
        <span class="hljs-keyword">public</span> Serializer serializerInstance;<font></font>
<font></font>
        <span class="hljs-meta">@Param( { "0", "100", "200", "300", /*... */ "1000000" } )</span>  <span class="hljs-comment">// Toward 1 MB</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> sizeOfDto;
        <span class="hljs-keyword">public</span> Object dtoInstance;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serializedDto;<font></font>
<font></font>
        <span class="hljs-meta">@Setup( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
            serializerInstance = Serializers.getMap().get( serializer );<font></font>
            dtoInstance = DtoFactory.createWorkflowDto( sizeOfDto );<font></font>
            serializedDto = serializerInstance.serialize( dtoInstance );<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@TearDown( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
            serializerInstance = <span class="hljs-keyword">null</span>;<font></font>
            dtoInstance = <span class="hljs-keyword">null</span>;<font></font>
            serializedDto = <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serialization( Parameters parameters ) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> parameters.serializerInstance.serialize(<font></font>
                parameters.dtoInstance );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">unserialization</span><span class="hljs-params">( Parameters parameters )</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
        <span class="hljs-keyword">return</span> parameters.serializerInstance.deserialize(<font></font>
                parameters.serializedDto,<font></font>
                parameters.dtoInstance.getClass() );<font></font>
    }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eis o que aconteceu: </font><font style="vertical-align: inherit;">
Primeiro, observamos que as op√ß√µes de biblioteca que adicionam metadados adicionais ao resultado da serializa√ß√£o s√£o mais lentas que as configura√ß√µes padr√£o das mesmas bibliotecas (consulte as configura√ß√µes ‚Äúcom tipos‚Äù e ‚Äúpara persistir‚Äù). </font><font style="vertical-align: inherit;">
Em geral, independentemente da configura√ß√£o, </font><i><font style="vertical-align: inherit;">Jackson JSON e Bson4Jackson, que est√£o fora da corrida,</font></i><font style="vertical-align: inherit;"> tornam-se estranhos de acordo com os resultados da serializa√ß√£o </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Al√©m disso, o </font><i><font style="vertical-align: inherit;">Java Standard sai da corrida com</font></i><font style="vertical-align: inherit;"> base nos resultados de desserializa√ß√£o </font><font style="vertical-align: inherit;">, como para qualquer tamanho de dados serializ√°veis, a desserializa√ß√£o √© muito mais lenta que a dos concorrentes. </font><font style="vertical-align: inherit;">
D√™ uma olhada nos participantes restantes: de </font><font style="vertical-align: inherit;">
acordo com os resultados da serializa√ß√£o, a biblioteca do </font><i><font style="vertical-align: inherit;">FST</font></i><font style="vertical-align: inherit;"> est√° em l√≠deres confiantes</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/un/cl/x7/unclx7kgnmniixupznbhmuigcwi.png" alt="Corrida - todos os participantes"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/ct/fm/cg/ctfmcgtlh9wo66vctatdvwujhzy.png" alt="Corrida - exceto para forasteiros"></a><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, e com um aumento no tamanho dos objetos, o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "pisa nos calcanhares" </font><font style="vertical-align: inherit;">. Observe que, para o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a op√ß√£o "para persistir" √© muito mais lenta que a configura√ß√£o padr√£o para a velocidade de serializa√ß√£o. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ observar a desserializa√ß√£o, vemos que o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conseguiu superar o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com o aumento do tamanho dos dados </font><font style="vertical-align: inherit;">. Neste √∫ltimo, pelo contr√°rio, a configura√ß√£o n√£o padr√£o ‚Äúinsegura‚Äù realiza a desserializa√ß√£o muito mais rapidamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para colocar todos os pontos acima de E, vamos ver o resultado total da serializa√ß√£o e desserializa√ß√£o: </font><font style="vertical-align: inherit;">
ficou √≥bvio que existem </font><u><font style="vertical-align: inherit;">dois l√≠deres inequ√≠vocos: </font></u><u><i><font style="vertical-align: inherit;">FST (inseguro)</font></i></u><u><font style="vertical-align: inherit;"> e </font></u><u><i><font style="vertical-align: inherit;">One Nio</font></i></u><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Se em objetos pequenos </font><i><font style="vertical-align: inherit;">FST (inseguro)</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/zp/qq/mw/zpqqmwuxdlsb_gvl3orjyd1pyda.png" alt="Corrida - exceto para forasteiros (classifica√ß√£o geral)"></a><br>
<br><font style="vertical-align: inherit;"></font><u><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i></u><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;lidera com confian√ßa e, em seguida, com o aumento do tamanho dos objetos serializ√°veis, ele come√ßa a conceder e, finalmente, inferior a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A terceira posi√ß√£o com o aumento no tamanho dos objetos serializ√°veis ‚Äã‚Äã√© assumida com confian√ßa pelo </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , embora esteja quase duas vezes </font><u><i><font style="vertical-align: inherit;">√† frente</font></i></u><font style="vertical-align: inherit;"> dos l√≠deres.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pesagem</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tamanho do resultado da serializa√ß√£o √© o segundo crit√©rio mais importante para avaliar as bibliotecas de serializa√ß√£o Java. De certa forma, a velocidade da serializa√ß√£o / desserializa√ß√£o depende do tamanho do resultado: √© mais r√°pido formar e processar um resultado compacto do que o volume. Para "ponderar" os resultados da serializa√ß√£o, todos os mesmos objetos Java foram usados, formados a partir de dados reais extra√≠dos dos logs do sistema (cadeias de caracteres e matrizes de bytes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, uma propriedade importante do resultado da serializa√ß√£o tamb√©m √© o tamanho da compacta√ß√£o (por exemplo, para salv√°-la no banco de dados ou em outros armazenamentos). Em nossa competi√ß√£o, usamos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritmo de</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> compacta√ß√£o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;">Deflate</font></i></a><font style="vertical-align: inherit;"> , que √© a base para ZIP e gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados da "pesagem" foram os seguintes:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/pb/ek/h-/pbekh-hfdtstyzpd2ttgtkfhb88.png" alt="Pesagem"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espera-se que os resultados mais compactos tenham sido serializados por um dos l√≠deres da corrida: </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um Nio</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo lugar no compacto foi para o </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(que ficou em terceiro lugar na corrida). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em terceiro lugar, em termos de compacidade, a biblioteca </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "escapou" </font><font style="vertical-align: inherit;">, que antes n√£o havia se provado na corrida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados de serializa√ß√£o desses tr√™s l√≠deres de "pesagem" tamb√©m s√£o perfeitamente compactados (quase dois). </font><font style="vertical-align: inherit;">Acabou sendo o mais descompact√°vel: o equivalente bin√°rio do JSON √© o Smile e o pr√≥prio JSON. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um fato curioso - todos os vencedores da "pesagem" durante a serializa√ß√£o adicionam a mesma quantidade de dados de servi√ßo a objetos serializ√°veis ‚Äã‚Äãpequenos e grandes.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flexibilidade</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de tomar uma decis√£o respons√°vel sobre a escolha de um vencedor, decidimos verificar minuciosamente a flexibilidade de cada serializador e sua usabilidade. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para isso, compilamos 20 crit√©rios para avaliar nossos serializadores participantes da competi√ß√£o, de modo que ‚Äúnem um √∫nico mouse escapasse‚Äù de nossos olhos.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/zd/t4/it/zdt4itoudhnnpfo7e2l9jdscwdo.png" alt="Flexibilidade"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas de rodap√© com explica√ß√µes</font></font></b><div class="spoiler_text"><sup>1</sup>&nbsp; &nbsp; <i> <code>LinkedHashMap</code>.</i><br>
<sup>2</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>3</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>4</sup>&nbsp; &nbsp;<i>  <code>sun.reflect.MagicAccessorImpl</code> ‚Äî : boxing/unboxing,   <code>BigInteger/BigDecimal/String</code>.   <code>MagicAccessorImpl</code>&nbsp;(  ' fork One Nio) ‚Äî .</i><br>
<sup>5</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>.</i><br>
<sup>6</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>  <code>HashSet</code>      .</i><br>
<sup>7</sup>&nbsp; &nbsp;<i> <code>HashMap</code>.</i><br>
<sup>8</sup>&nbsp; &nbsp;<i>        ‚Äî ,     ,   /Map-,   (   <code>HashMap</code>).</i><br>
<sup>9</sup>&nbsp; &nbsp;<i>   -.</i><br>
<sup>10</sup>&nbsp;<i>   One Nio ‚Äî ,    ' fork- ‚Äî .</i><br>
<sup>11</sup> <i>     .</i><br>
</div></div><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> De acordo com o 13¬∫ crit√©rio, um Nio (para persistir) recebeu outro ponto (19).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esse meticuloso "exame dos candidatos" foi talvez o est√°gio mais demorado do nosso "casting". Mas esses resultados de compara√ß√£o abrem bem a conveni√™ncia de usar bibliotecas de serializa√ß√£o. Como conseq√º√™ncia, voc√™ pode usar esses resultados como refer√™ncia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foi uma pena perceber, mas nossos l√≠deres de acordo com os resultados de corridas e pesagem -</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FST (inseguro)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- acabamos sendo estranhos em termos de flexibilidade ... No entanto, est√°vamos interessados ‚Äã‚Äãem um fato curioso: um Nio na configura√ß√£o "para persistir" (n√£o o mais r√°pido nem o mais compacto) obteve o maior n√∫mero de pontos em termos de flexibilidade - 19/20. A oportunidade de fazer com que a configura√ß√£o padr√£o do One Nio (r√°pida e compacta) funcionasse com flexibilidade tamb√©m parecia muito atraente - e havia uma maneira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No in√≠cio, quando apresentamos os participantes √† competi√ß√£o, foi dito que o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (para persistir)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inclu√≠a no resultado da serializa√ß√£o </font><i><font style="vertical-align: inherit;">meta-informa√ß√µes</font></i><font style="vertical-align: inherit;"> detalhadas </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre a classe do objeto Java serializ√°vel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(*) </font><font style="vertical-align: inherit;">Usando essas metainforma√ß√µes para desserializa√ß√£o, a biblioteca do One Nio sabe exatamente como era a classe do objeto serializ√°vel no momento da serializa√ß√£o. </font><font style="vertical-align: inherit;">√â com base nesse conhecimento que o algoritmo de desserializa√ß√£o do One Nio √© t√£o flex√≠vel que fornece a compatibilidade m√°xima resultante da serializa√ß√£o </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descobriu-se que as meta-informa√ß√µes (*) podem ser obtidas separadamente para a classe especificada, serializadas&nbsp; </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;e enviadas para o lado onde os objetos Java dessa classe ser√£o desserializados:</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com o c√≥digo nas etapas ...</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">//  ‚Ññ1:  -   SomeDto</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = Repository.get( SomeDto.class );<font></font>
<span class="hljs-keyword">byte</span>[] dtoMeta = serializeByDefaultOneNioAlgorithm( dtoSerializerWithMeta );<font></font>
//  ‚Ññ<span class="hljs-number">1</span>:  dtoMeta  ‚Ññ<span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:  -    SomeDto      One Nio</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = deserializeByOneNio( dtoMeta );<font></font>
Repository.provideSerializer( dtoSerializerWithMeta );<font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ1:    SomeDto</span>
<span class="hljs-keyword">byte</span>[] bytes1 = serializeByDefaultOneNioAlgorithm( object1 );
<span class="hljs-keyword">byte</span>[] bytes2 = serializeByDefaultOneNioAlgorithm( object2 );<font></font>
...<font></font>
<span class="hljs-comment">//  ‚Ññ1:    ‚Ññ2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:      SomeDto</span><font></font>
SomeDto object1 = deserializeByOneNio( bytes1 );<font></font>
SomeDto object2 = deserializeByOneNio( bytes2 );<font></font>
...<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ executar esse procedimento expl√≠cito para a troca de meta-informa√ß√µes sobre classes entre servi√ßos distribu√≠dos, esses servi√ßos poder√£o enviar objetos Java serializados entre si usando a configura√ß√£o padr√£o do One Nio (r√°pida e compacta). Afinal, enquanto os servi√ßos est√£o em execu√ß√£o, as vers√µes das classes est√£o inalteradas, o que significa que n√£o h√° raz√£o para "arrastar para frente e para tr√°s" as metainforma√ß√µes constantes em cada resultado de serializa√ß√£o durante cada intera√ß√£o. Assim, tendo feito um pouco mais de a√ß√£o no come√ßo, voc√™ pode usar a velocidade e a compacta√ß√£o do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simultaneamente com a flexibilidade do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (para persistir)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Exatamente o que √© necess√°rio! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, para transferir objetos Java entre servi√ßos distribu√≠dos em formato serializado (foi para isso que organizamos essa competi√ß√£o)&nbsp;</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Nio foi o vencedor em flexibilidade</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(19/20). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre os serializadores Java que se distinguiram anteriormente nas corridas e pesagens, n√£o foi demonstrada uma flexibilidade ruim:</font></font><br>
<br>
<ul>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(14,5 / 20),</font></font></li>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (13/20).</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedestal</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembre-se dos resultados de competi√ß√µes anteriores de serializa√ß√£o Java:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nas corridas, as duas primeiras linhas da classifica√ß√£o foram divididas por </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (inseguro)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ficou em terceiro lugar </font><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> venceu a pesagem </font><font style="vertical-align: inherit;">, seguido por </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em termos de flexibilidade, apenas para nossa tarefa de trocar o contexto da sess√£o entre aplicativos distribu√≠dos, o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voltou a ser o primeiro&nbsp; </font><font style="vertical-align: inherit;">, e o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo se destacaram</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, em termos da totalidade dos resultados alcan√ßados, o pedestal obtido √© o seguinte:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Nio</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Na competi√ß√£o principal - as corridas - dividiram o primeiro lugar com o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (inseguro)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas pesaram significativamente o concorrente na flexibilidade de pesagem e teste.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (insegura)</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tamb√©m uma biblioteca de serializa√ß√£o Java muito r√°pida, no entanto, carece da compatibilidade direta e reversa das matrizes de bytes resultantes da serializa√ß√£o.</font></font></li>
<li><strong>BSON MongoDB&nbsp;+&nbsp;Kryo</strong><br>
 2   3-      Java-,     .       2-   ,          .        <code>Collection</code>  <code>Map</code>,   <i>BSON MongoDB</i>     custom-  / (<code>Externalizable</code>  ..).</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Sberbank, em nosso servi√ßo de dados de sess√£o, usamos a biblioteca </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que conquistou o primeiro lugar em nossa competi√ß√£o. Usando esta biblioteca, os dados do contexto da sess√£o Java foram serializados e transferidos entre aplicativos. Gra√ßas a esta revis√£o, a velocidade do transporte da sess√£o acelerou v√°rias vezes. O teste de carga mostrou que, em cen√°rios pr√≥ximos ao comportamento real do usu√°rio no Sberbank Online, a acelera√ß√£o de at√© 40% foi obtida apenas devido apenas a essa melhoria. Tal resultado significa uma redu√ß√£o no tempo de resposta do sistema √†s a√ß√µes do usu√°rio, o que aumenta o grau de satisfa√ß√£o de nossos clientes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pr√≥ximo artigo, tentarei demonstrar em a√ß√£o a acelera√ß√£o adicional do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">derivada do uso da classe </font></font><code>sun.reflect.MagicAccessorImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Infelizmente, o IBM JRE n√£o suporta as propriedades mais importantes dessa classe, o que significa que o potencial total do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nesta vers√£o do JRE ainda n√£o foi revelado. </font><font style="vertical-align: inherit;">Continua.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt488602/index.html">iOS MEETUP # 2 da FUNCORP e como manter um desenvolvedor atualizado</a></li>
<li><a href="../pt488604/index.html">O resumo de materiais frescos do mundo da interface da √∫ltima semana n¬∫ 402 (10 a 16 de fevereiro de 2020)</a></li>
<li><a href="../pt488606/index.html">–ü–æ–¥–ª–∏–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å —è—â–µ—Ä–æ–ª—é–¥–µ–π</a></li>
<li><a href="../pt488608/index.html">"GL√ìRIA ZHPSS!" ou lembre-se do GPSS World</a></li>
<li><a href="../pt488610/index.html">A hist√≥ria de uma pessoa sens√≠vel √† radia√ß√£o eletromagn√©tica, ou como sentimos a beira de um precip√≠cio ... UPD: + FAQ</a></li>
<li><a href="../pt488614/index.html">Bobina 3.0.0 - revis√£o de melhorias</a></li>
<li><a href="../pt488616/index.html">Problema nulo em Ci√™ncia de Dados e Machine Learning</a></li>
<li><a href="../pt488618/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel # 333 (10 a 16 de fevereiro)</a></li>
<li><a href="../pt488622/index.html">As listas de verifica√ß√£o substituem os regulamentos?</a></li>
<li><a href="../pt488624/index.html">Economia m√∫tua</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>