<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖖🏾 👩🏻‍🤝‍👨🏼 🤽🏿 Tiba-tiba, sistem pengumpulan sampah saja tidak cukup 🏪 🌆 👩🏿‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Berikut adalah cerita pendek tentang kegagalan server misterius yang saya harus debug setahun yang lalu (artikel bertanggal 05 Desember 2018, kira-kir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tiba-tiba, sistem pengumpulan sampah saja tidak cukup</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487038/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berikut adalah cerita pendek tentang kegagalan server misterius yang saya harus debug setahun yang lalu (artikel bertanggal 05 Desember 2018, kira-kira). </font><font style="vertical-align: inherit;">Server berfungsi dengan baik untuk sementara waktu, dan kemudian di beberapa titik mulai crash. </font><font style="vertical-align: inherit;">Setelah ini, upaya untuk menjalankan hampir semua program yang ada di server gagal dengan kesalahan "Tidak ada ruang pada perangkat", meskipun sistem file melaporkan hanya beberapa gigabyte yang diduduki pada disk ~ 20 GB.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata masalahnya disebabkan oleh sistem logging. Ini adalah aplikasi Ruby yang mengambil file log, mengirim data ke server jauh, dan menghapus file lama. Kesalahannya adalah bahwa file log terbuka tidak ditutup secara eksplisit. Sebagai gantinya, aplikasi tersebut memungkinkan pengumpul sampah otomatis Ruby untuk membersihkan objek File. Masalahnya adalah bahwa objek File tidak mengkonsumsi banyak memori, sehingga sistem logging secara teoritis dapat menjaga jutaan log terbuka sebelum pengumpulan sampah diperlukan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Sistem file Nix memisahkan nama file dan data dalam file. Data pada disk dapat memiliki beberapa nama file yang menunjuk ke mereka (mis. Tautan keras), dan data dihapus hanya ketika tautan terakhir dihapus. Deskriptor file terbuka dianggap sebagai tautan, jadi jika file tersebut dihapus saat program sedang membaca, nama file menghilang dari direktori, tetapi data file tetap hidup sampai program menutupnya. Inilah yang terjadi pada penebang. Perintah du ("penggunaan disk") mencari file menggunakan daftar direktori, sehingga tidak melihat gigabytes data file untuk ribuan file log yang masih terbuka. File-file ini ditemukan hanya setelah menjalankan lsof ("daftar buka file").</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, kesalahan serupa terjadi dalam kasus serupa lainnya. Beberapa bulan yang lalu, saya harus menjalankan aplikasi Java yang mogok setelah beberapa hari karena kebocoran koneksi jaringan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya biasa menulis sebagian besar kode saya di C, dan kemudian di C ++. Pada masa itu, saya pikir manajemen sumber daya manual sudah cukup. Betapa rumitnya itu? Setiap malloc () membutuhkan fungsi gratis (), dan setiap open () perlu close (). Secara sederhana. Kecuali bahwa tidak semua program sederhana, sehingga manajemen sumber daya manual dari waktu ke waktu telah menjadi jaket pengikat. Lalu suatu hari saya menemukan penghitungan tautan dan pengumpulan sampah. Saya pikir itu menyelesaikan semua masalah saya, dan benar-benar berhenti memperhatikan manajemen sumber daya. Sekali lagi, untuk program sederhana, ini normal, tetapi tidak semua program sederhana.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda tidak dapat mengandalkan pengumpulan sampah karena hanya menyelesaikan masalah manajemen memori, dan program yang kompleks harus berurusan dengan lebih dari sekadar memori. Ada meme populer yang menjawab ini dengan fakta bahwa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memori adalah 95% dari masalah sumber daya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Anda bahkan bisa mengatakan bahwa semua sumber daya adalah 0% dari masalah Anda - sampai Anda kehabisan salah satunya. Maka sumber daya ini menjadi 100% dari masalah Anda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi pemikiran seperti itu masih menganggap sumber daya sebagai kasus khusus. Masalah yang lebih dalam adalah bahwa ketika program menjadi lebih kompleks, semuanya cenderung menjadi sumber daya. Misalnya, ambil program kalender. Program kalender canggih memungkinkan banyak pengguna untuk mengelola beberapa kalender bersama, dan dengan acara yang dapat dibagikan di banyak kalender. Setiap bagian dari data pada akhirnya akan mempengaruhi beberapa bagian dari program, dan harus relevan dan benar. Karena itu, untuk semua data dinamis, Anda memerlukan pemilik, dan bukan hanya untuk manajemen memori. Ketika fitur baru ditambahkan, semakin banyak bagian dari program yang perlu diperbarui. Jika Anda waras, Anda hanya akan memperbolehkan Anda memperbarui data dari satu bagian program sekaligus,sehingga hak dan tanggung jawab untuk memperbarui data menjadi sumber daya yang terbatas. Pemodelan data yang bermutasi menggunakan struktur yang tidak dapat diubah tidak mengarah pada hilangnya masalah ini, tetapi hanya menerjemahkannya ke dalam paradigma lain.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merencanakan kepemilikan dan sumber daya seumur hidup adalah bagian tak terhindarkan dari desain perangkat lunak yang kompleks. Ini lebih mudah jika Anda menggunakan beberapa pola umum. Salah satu polanya adalah sumber daya yang dapat dipertukarkan. Contohnya adalah string "foo" yang tidak berubah, yang secara semantik sama dengan "foo" yang tidak berubah lainnya. Jenis sumber daya ini tidak memerlukan masa hidup atau kepemilikan yang telah ditentukan sebelumnya. Bahkan, untuk membuat sistem sesederhana mungkin, lebih baik tidak memiliki seumur hidup atau kepemilikan yang telah ditentukan (hi Rust, kira-kira). Pola lainnya adalah sumber daya yang tidak dapat dipertukarkan, tetapi memiliki rentang hidup yang ditentukan. Ini termasuk koneksi jaringan, serta konsep yang lebih abstrak, seperti hak untuk mengontrol bagian dari data.Hal yang paling masuk akal adalah memastikan umur hal-hal seperti itu ketika menyandikan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatikan bahwa pengumpulan sampah otomatis sangat baik untuk menerapkan pola pertama, tetapi tidak yang kedua, sementara teknik manajemen sumber daya manual (seperti RAII) bagus untuk menerapkan pola kedua, tetapi buruk untuk yang pertama. </font><font style="vertical-align: inherit;">Kedua pendekatan ini menjadi pelengkap dalam program yang kompleks.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id487038/">https://habr.com/ru/post/id487038/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id487012/index.html">Sergey Zaichenko: "Jika Anda tidak tahu di mana mendapatkan data, dapatkan dari OSM"</a></li>
<li><a href="../id487014/index.html">Nothing At Stake: kompromi dengan hati nurani</a></li>
<li><a href="../id487020/index.html">Ok Google, terima kasih untuk mobil baru</a></li>
<li><a href="../id487028/index.html">Contoh kami: Cara mendaur ulang elektronik. Photoreport</a></li>
<li><a href="../id487032/index.html">Pencari biarkan dia menemukan</a></li>
<li><a href="../id487040/index.html">Pratinjau Firefox Nightly untuk Android mendapat dukungan untuk uBlock Origin</a></li>
<li><a href="../id487042/index.html">64-core Ryzen Threadripper 3990X mengalahkan semua prosesor Intel dalam pengujian, termasuk Xeon $ 20.000</a></li>
<li><a href="../id487044/index.html">Pribadi? Tidak, tidak terdengar</a></li>
<li><a href="../id487046/index.html">Cara membangun perpustakaan asli untuk Android</a></li>
<li><a href="../id487052/index.html">Kaboom: pencari ranjau yang tidak biasa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>