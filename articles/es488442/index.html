<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß• üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø ‚öæÔ∏è C√≥digo moderno para realizar solicitudes HTTP en Swift 5 usando Combine y us√°ndolas en SwiftUI. Parte 1 üë©üèª‚Äçüöí „äóÔ∏è üíî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La consulta HTTPes una de las habilidades m√°s importantes que debe adquirir al desarrollar iOSaplicaciones. En versiones anteriores Swift(antes de la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>C√≥digo moderno para realizar solicitudes HTTP en Swift 5 usando Combine y us√°ndolas en SwiftUI. Parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488442/"><img src="https://habrastorage.org/webt/uk/tq/y4/uktqy4xvl1cqefjbmvzdzydqj-g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La consulta </font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es una de las habilidades m√°s importantes que debe adquirir al desarrollar </font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicaciones. En versiones anteriores </font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(antes de la versi√≥n 5), independientemente de si gener√≥ estas solicitudes desde cero o si utiliz√≥ el conocido marco de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alamofire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , termin√≥ con un c√≥digo complejo y confuso del </font></font><code>callback </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tipo&nbsp; </font></font><code>completionHandler: @escaping(Result&lt;T, APIError&gt;) -&gt; Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La aparici√≥n en </font></font><code>Swift 5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el nuevo marco de la programaci√≥n reactiva funcional </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en conjunto con la existente </font></font><code>URLSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y le </font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proporciona todas las herramientas necesarias para la escritura independiente de c√≥digo muy compacto para obtener datos de Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este art√≠culo, de acuerdo con el concepto, </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crearemos "editores"</font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para seleccionar datos de Internet, a los que podemos "suscribirnos" f√°cilmente en el futuro y utilizarlos al dise√±ar </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con&nbsp; </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y con ayuda&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parece m√°s conciso y m√°s efectivo, porque la acci√≥n de los "editores"&nbsp; </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no se limita solo a datos de muestra, y se extiende a√∫n m√°s hasta el control de la interfaz de usuario ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). El hecho es que </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la separaci√≥n de datos se&nbsp; </font></font><code>View </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lleva a cabo utilizando </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clases con </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades, cuyos cambios se&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitorean AUTOM√ÅTICAMENTE y se redibujan completamente </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En estas&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clases, puede simplemente poner una cierta l√≥gica comercial de la aplicaci√≥n, si alguna de estas</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;propiedades son el resultado de s√≠ncronos y / o as√≠ncronos de transformaci√≥n otras </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;propiedades que se pueden cambiar directamente tales elementos "activos" de la interfaz de usuario ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) como cuadros de texto </font></font><code>TextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Stepper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Toggle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etc.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aclarar lo que est√° en juego, dar√© ejemplos espec√≠ficos. Ahora, muchos servicios como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ofrecen </font><font style="vertical-align: inherit;">agregadores de noticias para&nbsp; </font><font style="vertical-align: inherit;">ofrecer a los usuarios elegir diferentes conjuntos de art√≠culos seg√∫n lo que les interese. En el caso del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agregador de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> noticias&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org,</font></a><font style="vertical-align: inherit;"> pueden ser las √∫ltimas noticias o noticias en alguna categor√≠a: "deporte", "salud", "ciencia", "tecnolog√≠a", "negocios" o noticias de una fuente de informaci√≥n espec√≠fica "CNN" , ABC news, Bloomberg, etc. El usuario generalmente "expresa" sus deseos de servicios en la forma </font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que le sea necesaria </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, usando el marco&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, puedes</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clases que utilizan un c√≥digo muy compacto (en la mayor√≠a de los casos, no m√°s de 10-12 l√≠neas) una vez para formar una dependencia s√≠ncrona y / o as√≠ncrona de la lista de art√≠culos&nbsp; </font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en forma de "suscripci√≥n" de </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades </font><font style="vertical-align: inherit;">"pasivas" a </font><font style="vertical-align: inherit;">propiedades "activas" </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esta "suscripci√≥n" ser√° v√°lida durante todo el "ciclo de vida" de la instancia de&nbsp; </font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clase. Y luego </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;, le dar√° al usuario la capacidad de administrar solo las </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades </font><font style="vertical-align: inherit;">"activas" </font><font style="vertical-align: inherit;">en el formulario </font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, QU√â quiere ver: si ser√°n art√≠culos con las √∫ltimas noticias o art√≠culos en la secci√≥n "salud". La aparici√≥n de los propios art√≠culos con las √∫ltimas noticias o art√≠culos en la secci√≥n "salud" </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ser√° proporcionada AUTOM√ÅTICAMENTE por estas&nbsp; </font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clases y sus propiedades "pasivas" publicadas. En codigo</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;nunca necesitar√° solicitar expl√≠citamente una selecci√≥n de art√≠culos, porque las </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clases que juegan un papel son </font><font style="vertical-align: inherit;">responsables de su visualizaci√≥n correcta y sincr√≥nica en la pantalla&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Te mostrar√© c√≥mo funciona esto con&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">datos de</font></a><font style="vertical-align: inherit;"> pel√≠culas </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">TMDb</font></a><font style="vertical-align: inherit;"> en una serie de art√≠culos. En los tres casos, funcionar√° aproximadamente el mismo patr√≥n de uso&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, porque en aplicaciones de este tipo siempre debe crear LISTAS de pel√≠culas o art√≠culos, elija las "IM√ÅGENES" (im√°genes) que las acompa√±an, BUSQUE en las bases de datos de las pel√≠culas o art√≠culos necesarios utilizando la barra de b√∫squeda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al acceder a dichos servicios, pueden producirse errores, por ejemplo, debido a que especific√≥ la clave incorrecta </font></font><code>API-key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o excedi√≥ el n√∫mero permitido de solicitudes u otra cosa. Debe manejar este tipo de error, de lo contrario corre el riesgo de dejar al usuario completamente perdido con una pantalla en blanco. Por lo tanto, debe poder no solo seleccionar </font></font><code>&nbsp;Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;datos de Internet </font><font style="vertical-align: inherit;">usando </font><font style="vertical-align: inherit;">, sino tambi√©n informar errores que pueden ocurrir durante el muestreo y controlar su apariencia en la pantalla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzaremos a desarrollar nuestra estrategia desarrollando una aplicaci√≥n que interact√∫e con el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agregador de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> noticias&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> . Debo decir que en esta aplicaci√≥n se </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilizar√° en un grado m√≠nimo sin adornos y √∫nicamente para mostrar c√≥mo </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con sus "editores"</font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y "suscripci√≥n" se </font></font><code>Subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ven afectados </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se recomienda que se registre en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> web </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> y reciba la clave </font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que se requiere para completar cualquier solicitud al servicio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Debe colocarlo en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la estructura </font></font><code>APIConstants</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de aplicaci√≥n para este art√≠culo est√° en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo de datos del servicio </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> y API</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El servicio&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permite seleccionar informaci√≥n sobre art√≠culos de noticias actuales </font></font><code> [Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y sus fuentes&nbsp; </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nuestro modelo de datos ser√° muy simple, se encuentra en el archivo&nbsp; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NewsResponse</span>: <span class="hljs-title">Codable</span> </span>{
    <span class="hljs-keyword">let</span> status: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> totalResults: <span class="hljs-type">Int?</span>
    <span class="hljs-keyword">let</span> articles: [<span class="hljs-type">Article</span>]<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Article</span>: <span class="hljs-title">Codable</span>, <span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id = <span class="hljs-type">UUID</span>()
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> description: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> author: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> urlToImage: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> publishedAt: <span class="hljs-type">Date?</span>
    <span class="hljs-keyword">let</span> source: <span class="hljs-type">Source</span><font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SourcesResponse</span>: <span class="hljs-title">Codable</span> </span>{
    <span class="hljs-keyword">let</span> status: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> sources: [<span class="hljs-type">Source</span>]<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Source</span>: <span class="hljs-title">Codable</span>,<span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> description: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> country: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> category: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">String?</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El art√≠culo </font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contendr√° el identificador </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, t√≠tulo </font></font><code> title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, descripci√≥n </font></font><code>&nbsp;description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, autor </font></font><code>author</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, URL de la "imagen" </font></font><code>urlToImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, fecha de publicaci√≥n </font></font><code>publishedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y fuente de publicaci√≥n </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Encima de los art√≠culos </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hay un complemento </font></font><code>NewsResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el que solo nos interesar√° la propiedad </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que es una variedad de art√≠culos. La estructura ra√≠z </font></font><code>NewsResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la estructura </font></font><code>&nbsp;Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son </font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, lo que nos permitir√° literalmente dos l√≠neas de c√≥digo que decodifican los </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datos en el Modelo. La estructura&nbsp; </font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;debe ser tambi√©n </font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, si queremos que sea m√°s f√°cil para nosotros para mostrar una gran variedad de art√≠culos </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como una lista&nbsp; </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;en </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. El protocolo </font></font><code>Identifiable </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requiere la presencia de una propiedad</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que le proporcionaremos un identificador √∫nico artificial </font></font><code>UUID()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fuente de informaci√≥n&nbsp; </font></font><code>Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contendr√° un identificador </font></font><code> id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nombre </font></font><code> name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, descripci√≥n&nbsp; </font></font><code>description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pa√≠s </font></font><code> country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, categor√≠a de fuente de publicaci√≥n </font></font><code>category</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, URL del sitio </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Encima de las fuentes de informaci√≥n&nbsp; </font></font><code>[Source] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hay un complemento&nbsp; </font></font><code>SourcesResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el que solo nos interesar√° una propiedad </font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que es una variedad de fuentes de informaci√≥n. La estructura ra√≠z </font></font><code>SourcesResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la estructura&nbsp; </font></font><code>Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son </font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, lo que nos permitir√° decodificar muy f√°cilmente los </font></font><code> JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datos en un modelo. La estructura&nbsp; </font></font><code>Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;tambi√©n deber√≠a ser </font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, si queremos facilitar la visualizaci√≥n de una serie de fuentes de informaci√≥n </font></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en forma de una lista </font></font><code>&nbsp;List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;en</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">El protocolo </font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requiere la presencia de la propiedad </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que ya tenemos, por lo que no se requerir√° ning√∫n esfuerzo adicional de nuestra parte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora considere lo que necesitamos&nbsp; </font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para el servicio&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y col√≥quelo en el archivo&nbsp; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La parte central de la nuestra </font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;es una clase </font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que presenta dos m√©todos para seleccionar datos del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agregador de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> noticias&nbsp;&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> : art√≠culos&nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y fuentes de informaci√≥n </font></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><code>fetchArticles (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp; - selecci√≥n de art√≠culos en&nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funci√≥n del par√°metro </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Una selecci√≥n de fuentes de informaci√≥n </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para un pa√≠s en particular </font></font><code> country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos m√©todos devuelven no solo una serie de art√≠culos&nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;o una variedad de fuentes de informaci√≥n </font></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sino los "editores" correspondientes del&nbsp; </font></font><code>Publisher </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuevo marco </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ambos editores no devuelven ning√∫n error, </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y si todav√≠a se produce un error de muestreo o codificaci√≥n, </font></font><code>[Article]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;se </font><font style="vertical-align: inherit;">devuelve una matriz vac√≠a de art√≠culos&nbsp; </font><font style="vertical-align: inherit;">o fuentes de informaci√≥n&nbsp; </font></font><code>[Source]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin ning√∫n mensaje de por qu√© estas matrices estaban vac√≠as.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu√© art√≠culos o fuentes de informaci√≥n queremos seleccionar del servidor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">indicaremos</font></a><font style="vertical-align: inherit;"> utilizando la enumeraci√≥n</font></font><code>enum Endpoint:</code><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Endpoint</span> </span>{
    <span class="hljs-keyword">case</span> topHeadLines
    <span class="hljs-keyword">case</span> articlesFromCategory(<span class="hljs-number">_</span> category: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> articlesFromSource(<span class="hljs-number">_</span> source: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> search (searchFilter: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> sources (country: <span class="hljs-type">String</span>)<font></font>
    <font></font>
    <span class="hljs-keyword">var</span> baseURL:<span class="hljs-type">URL</span> {<span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://newsapi.org/v2/"</span>)!}<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">path</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .topHeadLines, .articlesFromCategory:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"top-headlines"</span>
        <span class="hljs-keyword">case</span> .search,.articlesFromSource:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"everything"</span>
        <span class="hljs-keyword">case</span> .sources:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"sources"</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las √∫ltimas noticias&nbsp; </font></font><code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noticias de cierta categor√≠a (deportes, salud, ciencia, negocios, tecnolog√≠a)&nbsp; </font></font><code>.articlesFromCategory(_ category: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noticias de una fuente de informaci√≥n espec√≠fica (CNN, ABC News, Fox News, etc.) </font></font><code>&nbsp;.articlesFromSource(_ source: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cualquier noticia&nbsp; </font></font><code>.search (searchFilter: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que cumpla una determinada condici√≥n </font></font><code>searchFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fuentes de informaci√≥n </font></font><code>.sources (country:String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para un pa√≠s en particular </font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para facilitar la inicializaci√≥n de la opci√≥n que necesitamos, agregamos un </font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inicializador </font></font><code>init?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a la </font><font style="vertical-align: inherit;">enumeraci√≥n </font><font style="vertical-align: inherit;">para varias listas de art√≠culos y fuentes de informaci√≥n dependiendo del √≠ndice </font></font><code>index&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la cadena </font></font><code> text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que tiene diferentes significados para diferentes opciones de enumeraci√≥n:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">init</span>? (index: <span class="hljs-type">Int</span>, text: <span class="hljs-type">String</span> = <span class="hljs-string">"sports"</span>) {
        <span class="hljs-keyword">switch</span> index {
        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-keyword">self</span> = .topHeadLines
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">self</span> = .search(searchFilter: text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">self</span> = .articlesFromCategory(text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">self</span> = .articlesFromSource(text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <span class="hljs-keyword">self</span> = .sources (country: text)
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Volvamos a la clase </font></font><code> NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y consideremos con m√°s detalle el primer m√©todo&nbsp; </font></font><code>fetchArticles (from endpoint: Endpoint)-&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que selecciona art√≠culos </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">basados ‚Äã‚Äãen el par√°metro </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y no devuelve ning√∫n error </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticles</span><span class="hljs-params">(from endpoint: Endpoint)</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = endpoint.absoluteURL <span class="hljs-keyword">else</span> {              <span class="hljs-comment">// 0</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Article</span>]()).eraseToAnyPublisher()<font></font>
        }<font></font>
           <span class="hljs-keyword">return</span>
            <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>:url)        <span class="hljs-comment">// 1</span>
            .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.data}                                       <span class="hljs-comment">// 2</span>
            .decode(type: <span class="hljs-type">NewsResponse</span>.<span class="hljs-keyword">self</span>,                    <span class="hljs-comment">// 3</span>
                    decoder: <span class="hljs-type">APIConstants</span> .jsonDecoder)<font></font>
            .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.articles}                                   <span class="hljs-comment">// 4</span>
            .replaceError(with: [])                             <span class="hljs-comment">// 5</span>
            .receive(on: <span class="hljs-type">RunLoop</span>.main)                          <span class="hljs-comment">// 6</span>
            .eraseToAnyPublisher()                              <span class="hljs-comment">// 7</span>
    }</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre la base del </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;formulario </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para la solicitud, la lista de art√≠culos deseada </font></font><code>endpoint.absoluteURL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, si esto no se puede hacer, devuelva una matriz vac√≠a de art√≠culos</font></font><code>[Article]()</code></li>
<li> ¬´¬ª <code>dataTaskPublisher(for:)</code>,     <code>Output </code>  <code>(data: Data, response: URLResponse)</code>, &nbsp; <code>Failure</code>&nbsp;-&nbsp;<code>URLError</code>,</li>
<li>  <code>map { }</code>       <code>(data: Data, response: URLResponse)</code>  &nbsp;<code>data</code>,&nbsp;</li>
<li> <code>JSON </code>&nbsp;<code>data</code>   ,   &nbsp;<code>NewsResponse</code>,    <code>articles:&nbsp;[Atricle]</code></li>
<li>  <code>map { }&nbsp;</code>        -&nbsp;<code>articles</code>,&nbsp;</li>
<li>  -        <code>[ ]</code>,</li>
<li>   <code>main </code>,          <code>UI</code>,</li>
<li>¬´¬ª  ¬´¬ª   <code>eraseToAnyPublisher()</code>    <code>AnyPublisher</code>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tarea de seleccionar fuentes de informaci√≥n se asigna al segundo m√©todo, </font></font><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que es una copia sem√°ntica exacta del primer m√©todo, excepto que esta vez, en lugar de art√≠culos </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, elegiremos las fuentes de informaci√≥n </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchSources</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Source</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">Endpoint</span>.sources.absoluteURL <span class="hljs-keyword">else</span> {      <span class="hljs-comment">// 0</span>
                       <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Source</span>]()).eraseToAnyPublisher()<font></font>
           }<font></font>
              <span class="hljs-keyword">return</span>
               <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>:url)      <span class="hljs-comment">// 1</span>
               .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.data}                                     <span class="hljs-comment">// 2</span>
               .decode(type: <span class="hljs-type">SourcesResponse</span>.<span class="hljs-keyword">self</span>,               <span class="hljs-comment">// 3</span>
                       decoder: <span class="hljs-type">APIConstants</span> .jsonDecoder)<font></font>
               .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.sources}                                  <span class="hljs-comment">// 4</span>
               .replaceError(with: [])                           <span class="hljs-comment">// 5</span>
               .receive(on: <span class="hljs-type">RunLoop</span>.main)                        <span class="hljs-comment">// 6</span>
               .eraseToAnyPublisher()                            <span class="hljs-comment">// 7</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos devuelve el "editor" </font></font><code>AnyPublisher &lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con un valor en forma de una matriz de fuentes de informaci√≥n </font></font><code>[Source] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la ausencia de un error </font></font><code>&nbsp;Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;(en caso de errores, se devuelve una matriz vac√≠a de fuentes&nbsp; </font></font><code>[ ]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccionaremos la parte com√∫n de estos dos m√©todos, organ√≠cela como una </font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funci√≥n </font></font><code>fetch(_ url: URL) -&gt; AnyPublisher&lt;T, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que devuelve el&nbsp; </font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"editor" en </font></font><code>AnyPublisher&lt;T, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funci√≥n de </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//     URL</span>
     <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetch</span>&lt;T: Decodable&gt;<span class="hljs-params">(<span class="hljs-number">_</span> url: URL)</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;<span class="hljs-type">T</span>, <span class="hljs-type">Error</span>&gt; {
                   <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>: url)             <span class="hljs-comment">// 1</span>
                    .<span class="hljs-built_in">map</span> { $<span class="hljs-number">0</span>.data}                                          <span class="hljs-comment">// 2</span>
                    .decode(type: <span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>, decoder: <span class="hljs-type">APIConstants</span>.jsonDecoder) <span class="hljs-comment">// 3</span>
                    .receive(on: <span class="hljs-type">RunLoop</span>.main)                               <span class="hljs-comment">// 4</span>
                    .eraseToAnyPublisher()                                   <span class="hljs-comment">// 5</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto simplificar√° los dos m√©todos anteriores:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//   </span>
     <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticles</span><span class="hljs-params">(from endpoint: Endpoint)</span></span>
                                     -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">Never</span>&gt; {
         <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = endpoint.absoluteURL <span class="hljs-keyword">else</span> {
                     <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Article</span>]()).eraseToAnyPublisher() <span class="hljs-comment">// 0</span><font></font>
         }<font></font>
         <span class="hljs-keyword">return</span> fetch(url)                                          <span class="hljs-comment">// 1</span>
             .<span class="hljs-built_in">map</span> { (response: <span class="hljs-type">NewsResponse</span>) -&gt; [<span class="hljs-type">Article</span>] <span class="hljs-keyword">in</span>        <span class="hljs-comment">// 2</span>
                             <span class="hljs-keyword">return</span> response.articles }<font></font>
                .replaceError(with: [<span class="hljs-type">Article</span>]())                    <span class="hljs-comment">// 3</span>
                .eraseToAnyPublisher()                              <span class="hljs-comment">// 4</span><font></font>
     }<font></font>
    <font></font>
    <span class="hljs-comment">//    </span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchSources</span><span class="hljs-params">(<span class="hljs-keyword">for</span> country: String)</span></span>
                                       -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Source</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">Endpoint</span>.sources(country: country).absoluteURL
            <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Source</span>]()).eraseToAnyPublisher() <span class="hljs-comment">// 0</span><font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> fetch(url)                                         <span class="hljs-comment">// 1</span>
            .<span class="hljs-built_in">map</span> { (response: <span class="hljs-type">SourcesResponse</span>) -&gt; [<span class="hljs-type">Source</span>] <span class="hljs-keyword">in</span>     <span class="hljs-comment">// 2</span><font></font>
                            response.sources }<font></font>
               .replaceError(with: [<span class="hljs-type">Source</span>]())                    <span class="hljs-comment">// 3</span>
               .eraseToAnyPublisher()                             <span class="hljs-comment">// 4</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los "editores" as√≠ obtenidos no entregan nada hasta que alguien se "suscribe" a ellos. </font><font style="vertical-align: inherit;">Podemos hacer esto al dise√±ar </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Editores" </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como </font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code> SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Listado de art√≠culos.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora un poco sobre la l√≥gica del funcionamiento </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;√∫nica abstracci√≥n de los "cambios externos" a los que responden </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son los "editores" </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Por "cambios externos" puede comprender un temporizador </font></font><code> Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, una notificaci√≥n </font></font><code>NotificationCenter </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o su objeto Modelo, que mediante el protocolo </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede convertirse en una √∫nica "fuente de verdad" externa.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para los "editores" comunes, escriba </font></font><code>Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>NotificationCenter</code> <code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reaccione utilizando el m√©todo </font></font><code>onReceive (_: perform:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Un ejemplo del uso del "editor" </font></font><code>Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lo presentaremos m√°s adelante en el tercer art√≠culo sobre la creaci√≥n de una aplicaci√≥n para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este art√≠culo, nos centraremos en c√≥mo hacer nuestro modelo para&nbsp;</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"fuente de verdad" externa (fuente de verdad). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos primero c√≥mo </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deber√≠an funcionar los "editores" resultantes en un ejemplo espec√≠fico de visualizaci√≥n de varios tipos de art√≠culos: </font></font><br>
<br>
<code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- las √∫ltimas noticias,&nbsp; </font></font><code>.articlesFromCategory(_ category: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- noticias para una categor√≠a espec√≠fica, </font></font><code>&nbsp;.articlesFromSource(_ source: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- noticias para una fuente de informaci√≥n espec√≠fica, </font></font><code>.search (searchFilter: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- noticias seleccionadas por una determinada condici√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/ua/uv/zruauv9msu2nulm2ksuflhtxusi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg√∫n el </font></font><code> Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usuario </font><font style="vertical-align: inherit;">que </font><font style="vertical-align: inherit;">elija, necesitamos actualizar la lista de art√≠culos </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seleccionados de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para hacer esto, crearemos una clase muy simple </font></font><code>&nbsp;ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que implemente un protocolo </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;con tres&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades:</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/webt/ty/xj/cs/tyxjcsfctbxerl9oiyr6ljvda8c.png"><br>
<br>
<ul>
<li><code>@Published var indexEndpoint: Int</code> ‚Äî   <code>Endpoint</code> (    ¬´¬ª,        <code>View</code>),&nbsp;&nbsp;</li>
<li><code>@Published var searchString: String</code> ‚Äî  ,             &nbsp;&nbsp;(     ¬´¬ª,        <code>View</code>&nbsp;    <code>TextField</code>),</li>
<li><code>@Published var articles: [Article]</code>&nbsp;-    ( ¬´¬ª,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NewsAPI.org</a>,  ¬´¬ª).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tan pronto como nos propusimos&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;propiedades </font></font><code>indexEndpoint&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code> searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos empezar a usarlos tanto como propiedades simples&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y como "editores"&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En una clase&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no solo puede declarar las propiedades que nos interesan, sino tambi√©n prescribir la l√≥gica comercial de su interacci√≥n. Para este prop√≥sito, al inicializar una instancia de una clase&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;en, </font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podemos crear una "suscripci√≥n" que actuar√° durante todo el "ciclo de vida" de la instancia de la clase&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y reproducir√° la dependencia de la lista de art√≠culos </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el √≠ndice&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y la cadena de b√∫squeda </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer esto, </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ampliamos la cadena de "editores" </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y la </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salida "editor"</font></font><code>AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuyo valor es una lista de art√≠culos&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Luego nos "suscribimos" a √©l utilizando el operador </font></font><code>assign&nbsp;(to: \.articles, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y obtenemos la lista de art√≠culos que necesitamos </font></font><code>articles </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como una </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;propiedad de </font><font style="vertical-align: inherit;">"salida"&nbsp; </font><font style="vertical-align: inherit;">que define </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debemos extraer la cadena NO simplemente de las propiedades&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, de los "editores" </font></font><code> $indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que participan en la creaci√≥n </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con la ayuda de </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y los cambiaremos all√≠ utilizando los elementos de la interfaz de usuario&nbsp; </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>TextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øComo haremos esto? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya tenemos una funci√≥n en nuestro arsenal </font></font><code>fetchArticles (from: Endpoint)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que est√° en la clase&nbsp; </font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y devuelve un "editor" </font></font><code>AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, seg√∫n el valor</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y solo podemos de alguna manera usar los valores de los "publicadores"&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">convertirlos en un argumento para </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta funci√≥n.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, combine los "editores"&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para hacer esto, el </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operador existe </font></font><code>Publishers.CombineLatest </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/pg/wd/cipgwdfx2fxmlevrmkf8nnkc6u4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para crear un nuevo "editor" basado en los datos recibidos del "editor" anterior </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;, se utiliza el operador&nbsp; </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ln/s7/ur/lns7urzc9l64o8mswhliuggsyp4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
continuaci√≥n, nos "suscribimos" a este "editor" reci√©n recibido utilizando un "suscriptor" muy simple&nbsp; </font></font><code>assign (to: \.articles, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y asignamos lo recibido de " editor "valor para la&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;matriz&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/io/xi/suioxibgc3t31oewzgkbfaljina.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
acabamos de crear un </font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" editor "ASINCR√ìNICO y" suscrito "a √©l, como resultado de</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Suscripci√≥n" y esto es f√°cil de verificar si mantenemos nuestra "suscripci√≥n" en una constante </font></font><code>let subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/ig/ml/gwigml-zqpprclh76lzfnjhvzda.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la propiedad principal de una </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" es que tan pronto como abandona su alcance, la memoria ocupada se libera autom√°ticamente. Por lo tanto, tan pronto como se </font></font><code>init( ) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complete, esta "suscripci√≥n" se eliminar√° </font></font><code>ARC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sin tener tiempo para asignar la informaci√≥n asincr√≥nica recibida con un retraso de tiempo a la matriz </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. La informaci√≥n asincr√≥nica simplemente no tiene ning√∫n lugar para "aterrizar", en su sentido literal, "la tierra ha pasado de debajo de sus pies". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para guardar dicha "suscripci√≥n", es necesario crear una </font></font><code> init() </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable </font><font style="vertical-align: inherit;">M√ÅS ALL√Å del inicializador </font></font><code>var&nbsp;cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que guardar√° nuestra&nbsp; </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" en esta variable durante todo el "ciclo de vida" de la instancia de clase&nbsp;  </font></font><code>ArticlesViewMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, eliminamos la constante </font></font><code>let subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y recordamos nuestra </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" en la variable&nbsp; </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usando el operador </font></font><code>.store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/gt/xw/mygtxwz7uhcurfyfnblva9irfku.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Suscripci√≥n" al "editor" ASINCR√ìNICO que creamos </font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se conservar√° durante todo el "ciclo de vida" de la instancia de clase&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos cambiar arbitrariamente el significado de "editores"&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y / o&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y siempre gracias a la "suscripci√≥n" creada, tendremos una serie de art√≠culos correspondientes a los valores de estos dos editores&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin ning√∫n esfuerzo adicional. Esta&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clase generalmente se llama&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para reducir el n√∫mero de llamadas al servidor al escribir una cadena de b√∫squeda </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no debemos usar el "editor" de la cadena de b√∫squeda en s√≠&nbsp;</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y su versi√≥n modificada </font></font><code>validString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/ir/2z/khir2z1rrmou-hks2rtfuq31bnm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora que tenemos </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para nuestros art√≠culos, </font><font style="vertical-align: inherit;">comencemos a </font><font style="vertical-align: inherit;">crear la interfaz de usuario ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Para </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sincronizar </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con el </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;Modelo, </font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se </font><font style="vertical-align: inherit;">usa una </font><font style="vertical-align: inherit;">variable que se refiere a una instancia de la clase de este Modelo. Es este par, la&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;clase y la&nbsp; </font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable que hace referencia a la instancia de esta clase, que controlan el cambio en la interfaz de usuario ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) en&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregamos a la estructura una </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;instancia de la clase </font></font><code>ArticleViewModel </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en forma de variable </font></font><code>var articleViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la reemplazamos </font></font><code>Text ("Hello, World!")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con una lista de art√≠culos </font></font><code>ArticlesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la que colocamos los art√≠culos&nbsp; </font></font><code>articlesViewModel.articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obtenidos de nuestro&nbsp;</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Como resultado, obtenemos una lista de art√≠culos para un √≠ndice fijo y predeterminado&nbsp; </font></font><code>indexEndpoint = 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, para las </font></font><code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;√∫ltimas noticias: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/je/_f/j-/je_fj-0m2xews-ih7vptprkdpoy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
agregue un </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elemento a </font><font style="vertical-align: inherit;">nuestra pantalla&nbsp; </font><font style="vertical-align: inherit;">para controlar qu√© conjunto de art√≠culos queremos mostrar. Utilizaremos el&nbsp; </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cambio de √≠ndice </font></font><code>$articlesViewModel.indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. La presencia de un s√≠mbolo es&nbsp; </font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obligatoria, ya que esto significa un cambio en el valor suministrado por el&nbsp; </font></font><code>@Published&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"editor". La "suscripci√≥n" a este "editor" se activa de inmediato, que iniciamos en </font></font><code>init ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el " </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">editor" de </font><font style="vertical-align: inherit;">"salida"&nbsp; </font></font><code>&nbsp;articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;cambiar√° y veremos una lista diferente de art√≠culos en la pantalla: por lo </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/sd/pp/zxsdppfkp5y0nuk-j99uhovvmu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tanto, podemos recibir conjuntos de art√≠culos para las tres opciones: "topHeadLines", "buscar "Y" de la categor√≠a ":</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/yc/a_/jmyca_mvm0n2___cswvcamuuqqm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... pero para una cadena de b√∫squeda fija y predeterminada </font></font><code>searchString = "sports"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(donde se requiere): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zq/pi/tw/zqpitwdhh3fsnciz9p2scvn1sas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, para la opci√≥n,&nbsp; </font></font><code>"search"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;debe proporcionar al usuario un campo de texto </font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para ingresar la cadena de b√∫squeda: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/d1/uu/xkd1uu0tmepthmsjlkzu--wlwse.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, el usuario puede buscar cualquier noticia por la cadena de b√∫squeda escrita: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x4/ch/5a/x4ch5apliuwesqxjzeds58ab1t8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para la opci√≥n,&nbsp; </font></font><code>"from category"&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es necesario proporcionar al usuario la oportunidad de elegir una categor√≠a y que se inicia con la categor√≠a </font></font><code>science</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2i/8e/3v/2i8e3vvly1r_ipfuflxwbtepglq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
como resultado, el usuario puede buscar cualquier noticia de la categor√≠a elegida de noticias - </font></font><code>science</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code> health</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,&nbsp; </font></font><code>business</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>technology</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p_/pn/li/p_pnli0chxenoalmms3ltch-iwo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
podemos ver c√≥mo un simple&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;modelo que tiene dos controlados por el usuario </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caracter√≠sticas - </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- le permite seleccionar una amplia gama de informaci√≥n del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> web&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de fuentes de informaci√≥n.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos c√≥mo funcionar√° el </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;"editor" de las fuentes de informaci√≥n recibidas en la clase NewsAPI </font></font><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtendremos una lista de fuentes de informaci√≥n para diferentes pa√≠ses: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hr/oh/le/hrohle3hq8pkyhnjf6frali7yao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... y la capacidad de buscarlos por nombre: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/ea/ll/kgeallzwaxnkvekct18th7knkyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... as√≠ como informaci√≥n detallada sobre la fuente seleccionada: su nombre, categor√≠a, pa√≠s, breve descripci√≥n y enlace al sitio:&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/b7/9w/k_b79wirynz07feigtlhgdeyik4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si hace clic en el enlace, iremos al sitio web de este Fuente de informaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que todo esto funcione, necesita un </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo </font><font style="vertical-align: inherit;">extremadamente simple&nbsp; </font><font style="vertical-align: inherit;">que tenga solo dos </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades </font><font style="vertical-align: inherit;">controladas por el usuario </font><font style="vertical-align: inherit;">, </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y&nbsp; </font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/id/4b/rsid4bb5xmkjdkwuptkmwvhi-yc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y nuevamente, usamos el mismo esquema: al inicializar una instancia de una clase de una </font></font><code>SourcesViewModel </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clase en</font></font><code> init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">creamos una "suscripci√≥n" que operar√° durante todo el "ciclo de vida" de la instancia de clase </font></font><code>&nbsp;SourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y nos aseguraremos de que la lista de fuentes de informaci√≥n dependa&nbsp; </font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">del pa√≠s&nbsp; </font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la cadena de b√∫squeda </font></font><code>&nbsp;searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con la ayuda&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, extraemos la cadena de los "editores" </font></font><code>$searchString </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>$country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de la salida "editor" </font></font><code>AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cuyo valor es una lista de fuentes de informaci√≥n. Nos "suscribimos" a √©l utilizando el operador </font></font><code>assign&nbsp;(to: \.sources, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, obtenemos la lista de fuentes de informaci√≥n que necesitamos&nbsp; </font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. y recuerde la </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" </font><font style="vertical-align: inherit;">recibida&nbsp; </font><font style="vertical-align: inherit;">en una variable&nbsp; </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usando el operador </font></font><code>.store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que tenemos </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para nuestras fuentes de informaci√≥n, comencemos a crear </font></font><code> UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. B </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para sincronizar </font></font><code> View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;El modelo usa una </font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable que se refiere a una instancia de la clase de este modelo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregue la </font></font><code>ContentViewSources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;instancia de clase </font><font style="vertical-align: inherit;">a la estructura&nbsp; </font></font><code>SourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en forma de variable </font></font><code>var sourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, elimine&nbsp; </font></font><code>Text ("Hello, World!")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y coloque la suya propia </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para cada una de las 3&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades </font></font><code>&nbsp;sourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;:</font></font><br>
<br>
&nbsp;<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuadro de texto&nbsp; </font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para la barra de b√∫squeda&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li>&nbsp;<code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;para el pa√≠s </font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lista de&nbsp; </font></font><code>SourcesList&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fuentes de informaci√≥n</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/td/tk/kn/tdtkknev57l3b5avb8y0uheu7fa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, obtenemos lo que necesitamos </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jw/gg/ly/jwgglycniqr2e-jhpifypfzx4m8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en esta pantalla, solo administramos la cadena de b√∫squeda usando el cuadro de texto </font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y el "pa√≠s" con&nbsp; </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y el resto sucede AUTOM√ÅTICAMENTE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lista de fuentes de informaci√≥n </font></font><code>SourcesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contiene </font><font style="vertical-align: inherit;">informaci√≥n </font><font style="vertical-align: inherit;">m√≠nima sobre cada fuente: el nombre </font></font><code>source.name </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y una breve descripci√≥n </font></font><code>source.description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/zi/1z/sjzi1zh-7leadeujwarkuka_ii8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... pero le permite obtener informaci√≥n m√°s detallada sobre la fuente seleccionada utilizando el enlace </font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el que </font></font><code>destination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicamos&nbsp; </font></font><code>DetailSourceView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu√© datos de origen es la fuente de informaci√≥n&nbsp; </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la instancia deseada de la clase </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, lo que permite obtener una lista de sus art√≠culos </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ix/j_/uh/ixj_uheqhclwopwidsihztunn5e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vea cu√°n elegantemente obtenemos la lista de art√≠culos para la fuente seleccionada de fuente de informaci√≥n en la lista de fuentes&nbsp; </font></font><code>SourcesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nuestro viejo amigo nos ayuda: una clase&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para la que debemos establecer ambas </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades de </font><font style="vertical-align: inherit;">"entrada"&nbsp; </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√≠ndice&nbsp; </font></font><code>indexEndpoint = 3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, una opci√≥n&nbsp; </font></font><code>.articlesFromSource (_source:String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correspondiente a la selecci√≥n de art√≠culos para una fuente fija </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cadena&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;como la fuente misma (o m√°s bien su identificador) </font></font><code>source.id&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ia/xi/lr/iaxilr4rlcyippxuvkbd46kequ4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, si mira toda la aplicaci√≥n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsApp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , no ver√° en ning√∫n lado que solicitemos expl√≠citamente una selecci√≥n de art√≠culos o fuentes de informaci√≥n del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> web&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Solo gestionamos&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;datos, pero </font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hacemos nuestro trabajo: selecciona los art√≠culos y las fuentes de informaci√≥n que necesitamos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar imagen </font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para art√≠culo </font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El modelo del art√≠culo&nbsp; </font></font><code>Article&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contiene una </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen </font></font><code>urlToImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que lo </font><font style="vertical-align: inherit;">acompa√±a&nbsp; </font><font style="vertical-align: inherit;">: en </font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/ny/fv/omnyfvhlcegrhltunqvjvyaq6l4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
base a esto,&nbsp; </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el futuro debemos obtener las im√°genes </font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> web&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya estamos familiarizados con esta tarea. </font><font style="vertical-align: inherit;">En la clase </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, utilizando la funci√≥n, </font></font><code>fetchImage(for url: URL?) -&gt; AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cree un "editor"&nbsp;  </font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con el valor de la imagen&nbsp; </font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y sin errores&nbsp; </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(de hecho, si se producen errores, se devuelve la imagen </font></font><code> nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Puede "suscribirse" a este "editor" para recibir im√°genes&nbsp; </font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;al dise√±ar la interfaz de usuario ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">La fuente de datos para la funci√≥n </font></font><code>fetchImage(for url: URL?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que tenemos:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/do/a-/hg/doa-hg5idk0ukdghj0snu0-nubm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideremos en detalle c√≥mo se lleva a cabo la formaci√≥n con la ayuda del </font></font><code> Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"editor" </font></font><code>AnyPublisher &lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, si sabemos </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la igualdad </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el retorno </font></font><code>Just(nil)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en base a la </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forma de la "editor" </font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cuyo valor de salida </font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es una tupla </font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y un error </font></font><code>&nbsp;Failure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&nbsp; </font></font><code>URLError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tomamos </font><font style="vertical-align: inherit;">solo datos </font></font><code>map {}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de la tupla </font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para su posterior procesamiento&nbsp; </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y forma </font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si se produce el error de devoluci√≥n de los pasos anteriores </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entregamos el resultado a la </font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transmisi√≥n, ya que suponemos un mayor uso en el dise√±o </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Borre" el TIPO del "editor" y devuelva la copia </font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ver√° que el c√≥digo es bastante compacto y bien legible, no hay ninguno </font></font><code>callbacks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos a crear&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;para la imagen </font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esta es una clase </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que implementa el protocolo </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, con dos&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades:</font></font><br>
<br>
<ul>
<li><code>@Published url: URL?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;son </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im√°genes</font></font></li>
<li><code>@Published var image: UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;es la imagen misma de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/li/o6/kr/lio6krhn0v1eyeiwg_cgpwcigia.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y nuevamente, al inicializar una instancia de la clase,&nbsp; </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;debemos estirar la cadena desde el "editor" de entrada hasta el "editor"&nbsp; </font></font><code>$url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;de salida </font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, al cual nos </font><font style="vertical-align: inherit;">&nbsp;"suscribiremos" </font><font style="vertical-align: inherit;">m√°s tarde y obtendremos la imagen que necesitamos </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/gi/2s/bagi2swivajzz0pkgqzzsswudww.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
utilizamos el operador </font></font><code>&nbsp;flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y un "suscriptor" muy simple&nbsp; </font></font><code>assign (to: \image, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para asignarlo al recibido del "editor" "Valores de la propiedad </font></font><code>@Published image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eq/3k/4-/eq3k4-0pbruhk4qbcu8hmyinfmg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y nuevamente en la variable&nbsp; </font><font style="vertical-align: inherit;">" suscripci√≥n "se </font></font><code>cancellableSet </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">almacena </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilizando el operador&nbsp; </font></font><code>store(in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La l√≥gica de este "descargador de im√°genes" es que descargue una imagen de algo diferente a la que </font></font><code> nil URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">siempre que no se haya precargado, es decir</font></font><code>image == nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si durante el proceso de descarga se detecta alg√∫n error, la imagen estar√° ausente, es decir, </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permanecer√° igual </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mostramos la imagen con la ayuda </font></font><code>ArticleImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que una instancia de la </font></font><code>imageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;clase </font><font style="vertical-align: inherit;">utiliza para esto </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si la imagen de su imagen no es igual </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, entonces se muestra usando </font></font><code> Image (...)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero si es igual </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dependiendo de a qu√© es igual </font></font><code>url </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o no se muestra nada </font></font><code>EmptyView()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o </font><font style="vertical-align: inherit;">se muestra </font><font style="vertical-align: inherit;">un rect√°ngulo </font></font><code>Rectangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con texto rotativo T </font></font><code>ext("Loading...")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/nq/yi/mhnqyirurke0w6yibfxm86gap1i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
esta l√≥gica funciona bien para el caso cuando sabe con certeza que para&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, adem√°s de&nbsp; </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obtener una imagen </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como es el caso con la base de datos de pel√≠culas&nbsp;</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMDb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Con </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org, el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> agregador de noticias&nbsp; </font><font style="vertical-align: inherit;">&nbsp; es diferente. Los art√≠culos de algunas fuentes de informaci√≥n dan una diferente de la&nbsp; </font></font><code>nil&nbsp;URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen, pero el acceso a ella est√° cerrado y obtenemos un rect√°ngulo </font></font><code>Rectangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con texto giratorio </font></font><code>Text("Loading...")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que nunca ser√° reemplazado: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/tq/lp/shtqlpz4wx-iobt19-wv9j2pb7w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en esta situaci√≥n, si la </font></font><code>&nbsp;URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen es diferente de&nbsp; </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, entonces la igualdad de la&nbsp; </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagen&nbsp; </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede significar que la imagen se est√° cargando , y el hecho de que ocurri√≥ un error durante la carga y nunca obtendremos una imagen </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para distinguir entre estas dos situaciones, agregamos </font><font style="vertical-align: inherit;">una m√°s </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;a las dos </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades </font><font style="vertical-align: inherit;">existentes </font><font style="vertical-align: inherit;">en la clase&nbsp; </font><font style="vertical-align: inherit;">:&nbsp;</font></font><br>
<br>
<code>&nbsp;@Published var noData = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- este es un valor booleano con el que indicaremos la ausencia de datos de imagen debido a un error durante la selecci√≥n: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kp/jc/sq/kpjcsqugrsfzyghmefnge0unscy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
al crear una "suscripci√≥n", </font></font><code> init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detectamos todos los errores </font></font><code> Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que ocurren al cargar la imagen y acumulamos su presencia en la&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedad </font></font><code>self.noData = true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si la descarga fue exitosa, obtenemos la imagen </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Creamos el </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Editor"&nbsp; </font></font><code>AnyPublisher&lt;UIImage?, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;sobre la base de la&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;funci√≥n </font></font><code>fetchImageErr (for url: URL?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7f/ek/jf/7fekjfrbihaieypuxaovub1-op8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comenzamos a crear un m√©todo </font></font><code>fetchImageErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inicializando el "editor"&nbsp; </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que puede usarse para obtener de forma asincr√≥nica un √∫nico valor de TIPO </font></font><code>Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilizando un cierre. El cierre tiene un par√°metro, </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que es una funci√≥n de TYPE&nbsp; </font></font><code>(Result&lt;Output, Failure&gt;) ‚Üí Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">convertiremos el </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/ch/_u/iuch_uvhdkz42-mfyuiuq3jiosg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
resultado </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en</font></font><code>AnyPublisher &lt;UIImage?, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con la ayuda del operador "Erase TYPE" </font></font><code>eraseToAnyPublisher()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, se llevar√° a cabo los pasos siguientes, teniendo en cuenta todos los errores posibles (no vamos a identificar los errores, es simplemente importante para nosotros saber que hay un error): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0. cheque </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y&nbsp; </font></font><code>noData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: si es as√≠, a continuaci√≥n, devolver el error, si no, la transferencia </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√∫n m√°s por cadena, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. cree un "publicador" </font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuya entrada sea - </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y el valor de salida </font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sea ‚Äã‚Äãuna tupla </font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y un error&nbsp; </font></font><code>URLError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. analice usando la </font></font><code> tryMap { }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;tupla resultante </font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: si </font></font><code>response.statusCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√° en el rango </font></font><code>200...299</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, entonces para el procesamiento posterior tomamos solo los datos&nbsp; </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. De lo contrario, "arrojamos" un error (no importa qu√©),</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. </font></font><code>map { }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transformamos los datos </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. entregamos el resultado a la </font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secuencia, ya que suponemos que lo usaremos m√°s adelante en el </font><font style="vertical-align: inherit;">proceso de </font><font style="vertical-align: inherit;">dise√±o </font></font><code>UI</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - nos "suscribimos" al "editor" recibido usando </font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sus cierres </font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - 5. si </font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;encontramos un error </font><font style="vertical-align: inherit;">en el cierre&nbsp; </font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, informamos us√°ndolo </font></font><code>promise (.failure(error)))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - 6. en el cierre,&nbsp; </font></font><code>receiveValue </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informamos sobre la recepci√≥n exitosa de una serie de art√≠culos usando </font></font><code> promise (.success($0))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. recordamos la "suscripci√≥n" recibida en la variable&nbsp; </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para asegurar su viabilidad dentro de la "vida √∫til" de la instancia de clase </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8. "borramos" el TIPO "editor" y devolver la instancia </font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regresamos a </font></font><code>ArticleImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">donde usaremos la nueva&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable </font></font><code>noData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si no hay datos de imagen, entonces no mostraremos nada, es decir </font></font><code>EmptyView ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3k/wr/v_/3kwrv_cecjy2f8jea3rgnnpkzri.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agruparemos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> todas nuestras posibilidades de mostrar datos del </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">agregador de</font></a><font style="vertical-align: inherit;"> noticias </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> en </font></font><code>TabView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yq/xb/ra/yqxbraupq1d0tgeygy2lb05o4xo.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostrar errores al recuperar y decodificar datos JSON del servidor&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al acceder al servidor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,&nbsp; </font><font style="vertical-align: inherit;">pueden producirse </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">errores</font></a><font style="vertical-align: inherit;"> , por ejemplo, debido a que especific√≥ la clave incorrecta </font></font><code>API-key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o, al tener una tarifa de desarrollador que no cuesta nada, excedi√≥ el n√∫mero permitido de solicitudes u otra cosa. Al mismo tiempo, el servidor&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;proporciona el </font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo y el mensaje correspondiente: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_f/2n/zv/_f2nzv5bndlu8auo9cygjyk9fta.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
es necesario manejar este tipo de error del servidor. De lo contrario, el usuario de su aplicaci√≥n caer√° en una situaci√≥n en la que de repente, sin ninguna raz√≥n, el servidor&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;dejar√° de procesar cualquier solicitud, dejando al usuario completamente perdido con una pantalla en blanco. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta ahora, al seleccionar art√≠culos&nbsp; </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y fuentes de informaci√≥n&nbsp; </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">del servidor&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ignoramos todos los errores y, en caso de que aparecieran, devolvimos matrices vac√≠as </font></font><code>[Article]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y&nbsp; </font><font style="vertical-align: inherit;">como resultado&nbsp; </font></font><code>[Source]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzando con el manejo de errores, creemos </font><font style="vertical-align: inherit;">&nbsp;otro m√©todo </font></font><code>fetchArticles (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;en la clase </font><font style="vertical-align: inherit;">basado en el </font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©todo de </font><font style="vertical-align: inherit;">selecci√≥n de art√≠culos&nbsp; </font><font style="vertical-align: inherit;">existente </font></font><code>fetchArticlesErr (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que devolver√° no solo una serie de art√≠culos </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sino tambi√©n un posible error&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticlesErr</span><span class="hljs-params">(from endpoint: Endpoint)</span></span> -&gt;
                            <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">NewsError</span>&gt; {<font></font>
<font></font>
. . . . . . . .<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este m√©todo, as√≠ como el m√©todo </font></font><code>fetchArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, acepta </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y devuelve el "editor" </font><font style="vertical-align: inherit;">en la entrada </font><font style="vertical-align: inherit;">con un valor en forma de una matriz de art√≠culos </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero en lugar de la ausencia de un error </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos tener un error definido por la enumeraci√≥n </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/es/ey/x9eseyq8jbapjkmgdoj7aggc6f0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
comencemos a crear un nuevo m√©todo inicializando el "editor"&nbsp; </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que puede ser use para obtener asincr√≥nicamente un solo valor de TYPE </font></font><code>Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usando un cierre. </font><font style="vertical-align: inherit;">El cierre tiene un par√°metro, </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que es una funci√≥n de TYPE&nbsp; </font></font><code>(Result&lt;Output, Failure&gt;) -&gt; Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">convertiremos lo </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/bw/ct/3wbwctuso0qweiz3a8qk_h1aiom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
recibido </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el "editor" que necesitamos&nbsp; </font></font><code>AnyPublisher &lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usando el operador "TYPE Erase" </font></font><code>eraseToAnyPublisher()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s en el nuevo m√©todo, </font></font><code>fetchArticlesErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repetiremos todos los pasos que tomamos en el m√©todo&nbsp;</font></font><code>fetchArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero tendremos en cuenta todos los posibles errores:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pb/xz/i0/pbxzi0rn5-cuandt3rtu74ofj8s.png"><br>
<br>
<ul>
<li>0.   endpoint&nbsp; <code>URL endpoint.absoluteURL </code>    , <code> url </code> <code>nil</code>:  <code>nil</code>,    <code>.urlError</code>,   ‚Äî  <code>url</code>   ,</li>
<li>1.  ¬´¬ª <code>dataTaskPublisher(for:)</code>,     ‚Äî <code>url</code>,    <code>Output</code>   <code>(data: Data, response: URLResponse)</code>  &nbsp;<code>URLError</code>,</li>
<li>2.    <code>tryMap { }</code>&nbsp;  <code>(data: Data, response: URLResponse)</code>:  <code>response.statusCode</code>    <code>200...299</code>,       &nbsp;<code>data</code>.    ¬´¬ª  <code>.responseError</code>,  &nbsp;&nbsp;<code>data</code>,    <code>String</code>,    ,</li>
<li>3. <code> JSON</code>    ,   &nbsp;<code>NewsResponse</code>,</li>
<li>4.    <code>main</code> ,         <code>UI</code></li>
<li>¬´¬ª   ¬´¬ª   <code>sink</code>    <code>receiveCompletion</code>  <code>receiveValue</code>,<br>
 <ul>
<li>5.&nbsp; &nbsp;&nbsp;<code>receiveCompletion</code>&nbsp;  <code>error</code>,       <code>promise (.failure(...)))</code>,</li>
<li> 6.&nbsp;&nbsp;&nbsp;<code>receiveValue</code>         <code>promise (.success($0.articles))</code>,</li>
</ul>&nbsp;</li>
<li>7.&nbsp;  ¬´¬ª  &nbsp;<code>var subscriptions</code>,       ¬´ ¬ª   <code>NewsAPI</code>,</li>
<li>8. ¬´¬ª  ¬´¬ª    <code>AnyPublisher</code>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cabe se√±alar que el "editor"&nbsp; </font></font><code>dataTaskPublisher(for:)</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">difiere</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de su prototipo </font></font><code>dataTask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en que en caso de un error del servidor cuando </font></font><code>response.statusCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;NO </font><font style="vertical-align: inherit;">est√° </font><font style="vertical-align: inherit;">en el rango </font></font><code>200...299</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, a√∫n entrega el valor exitoso en forma de tupla </font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y no un error en el formulario </font></font><code>(Error, URLResponse?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En este caso, la informaci√≥n de error real del servidor est√° contenida en </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. El "editor" </font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;entrega un error&nbsp; </font></font><code>URLError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si ocurre un error en el lado del cliente (incapacidad para contactar al servidor, prohibici√≥n del sistema de seguridad </font></font><code>ATS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, etc.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si queremos mostrar errores </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, entonces necesitamos el correspondiente </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, al que llamaremos&nbsp; </font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/em/1o/qy/em1oqy5ob60o8xzmz_-kpdvzs4a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la clase </font></font><code>&nbsp;ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que implementa el protocolo </font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, esta vez tenemos CUATRO&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades:</font></font><br>
<br>
<ol>
<li><code>@Published var indexEndpoint: Int</code> ‚Äî   <code>Endpoint</code> (    ¬´¬ª,     <code> View</code>),&nbsp;</li>
<li><code>@Published var searchString: String</code> ‚Äî   ,    &nbsp;<code>Endpoint</code>:    ¬´¬ª ,       (      ¬´¬ª,        <code>View</code>),&nbsp;</li>
<li>&nbsp;<code>@Published var articles: [Article]</code>&nbsp;-    ( ¬´¬ª,        &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NewsAPI.org&nbsp;</a>)</li>
<li>&nbsp;&nbsp;<code>@Published var articlesError: NewsError?</code>&nbsp;-  ,      &nbsp;    &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NewsAPI.org&nbsp;</a>.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al inicializar una instancia de una clase </font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, de nuevo debemos extender una cadena de entrada "editores" </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la salida "editor"&nbsp; </font></font><code>AnyPublisher&lt;[Article],NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, a la que "firmado" con el "Suscriptor" </font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y obtener una gran cantidad de art√≠culos </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o de error&nbsp; </font></font><code>articlesError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestra clase, </font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ya hemos construido una funci√≥n&nbsp; </font></font><code>fetchArticlesErr (from endpoint: Endpoint)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que devuelve un "publicador"&nbsp; </font></font><code>AnyPublisher&lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dependiendo del valor </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y solo necesitamos de alguna manera usar los valores de los "publicadores"&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">convertirlos en un argumento para esta funci√≥n </font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para empezar, combinaremos los "editores"&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para hacer esto, </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hay un operador </font></font><code>Publishers.CombineLatest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5i/lz/zh/5ilzzh6h5_aity8uvzd6eladg7q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego debemos establecer el tipo de error TIPO "editor" igual al requerido&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/85/tt/oe85tthmperdfzf6yqiy5fmy2b4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, queremos usar la funci√≥n&nbsp; </font></font><code>fetchArticlesErr (from endpoint: Endpoint) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de nuestra clase </font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Como de costumbre, haremos esto con la ayuda de un operador&nbsp; </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que crea un nuevo "editor" sobre la base de los datos recibidos del "editor" anterior: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/bu/kx/bhbukxfbhg2q9otl4rp-ksponec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
luego "suscribimos" a este "editor" reci√©n recibido con la ayuda de un "suscriptor" </font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y usamos sus cierres </font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para recibir del "editor" el valor de una serie de art√≠culos&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o errores </font></font><code>articlesError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/x8/iy/cqx8iyvnwanwmv1vselki10ytv4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturalmente, es necesario recordar la "suscripci√≥n" resultante en alguna </font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable </font><font style="vertical-align: inherit;">externa </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. De lo contrario, no podremos obtener el valor de forma asincr√≥nica</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o un error </font></font><code>articlesError </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">despu√©s de la finalizaci√≥n </font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/wh/_a/khwh_ao98y7zy9cdpenc0nzvntq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para reducir el n√∫mero de llamadas al servidor al escribir una cadena de b√∫squeda </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no debemos usar el "editor" de la barra de b√∫squeda en s√≠&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sino su versi√≥n modificada </font></font><code>validString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/op/ss/flopssp-pjixvbtesqabmpp1h2s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Suscribirse" al "editor" ASINCR√ìNICO que creamos </font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√° persisten durante todo el "ciclo de vida" de la instancia de clase&nbsp; </font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nt/iw/k4/ntiwk4eju6aneam-1wlymjqyu9a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
procedemos a la correcci√≥n de la nuestra </font></font><code> UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para mostrar posibles errores de muestreo de datos en ella. En </font></font><code>SwiftU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I, en la estructura existente,&nbsp; </font></font><code>ContentVieArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;usamos otro, reci√©n obtenido&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, simplemente agregando las letras "Err" en el nombre. Esta es una instancia de la clase.&nbsp;&nbsp;</font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que "detecta" el error de seleccionar y / o decodificar los datos del art√≠culo del servidor&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/vy/uv/kwvyuvbthb08tcalkcdpnucqfbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y tambi√©n agregamos la visualizaci√≥n de un mensaje de emergencia&nbsp; </font></font><code>Alert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;en caso de error. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, si la clave API incorrecta es:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">APIConstants</span> </span>{
    <span class="hljs-comment">// News  API key url: https://newsapi.org</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> apiKey: <span class="hljs-type">String</span> = <span class="hljs-string">"API_KEY"</span> <font></font>
    <font></font>
   .  .  .  .  .  .  .  .  .  .  .  .  .<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... entonces recibiremos el siguiente mensaje: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nb/ws/si/nbwssihj8ldlqqtcbti4tjwcv7o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el l√≠mite de solicitudes se ha agotado, recibiremos el siguiente mensaje: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cz/de/ux/czdeuxquiscc-6qklciy5a0w3jm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Volviendo al m√©todo de selecci√≥n de art√≠culos&nbsp; </font></font><code>[Article] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con un posible error&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos simplificar su c√≥digo si usamos el&nbsp; </font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;"editor" </font></font><code>AnyPublisher&lt;T,NewsError&gt;,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que, seg√∫n el conjunto,&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recibe </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informaci√≥n de </font><font style="vertical-align: inherit;">forma asincr√≥nica </font><font style="vertical-align: inherit;">, la coloca directamente en el </font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;e informa un error&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lc/v7/m9/lcv7m9fmdbq20ih5phivj7hl1go.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sabemos, este c√≥digo es muy f√°cil de usar para obtener un "editor" espec√≠fico si la fuente de datos </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es un </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">agregador de</font></a></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> noticias&nbsp; </font><font style="vertical-align: inherit;">&nbsp;o pa√≠s&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fuente de informaci√≥n, y la salida requiere varios modelos, por ejemplo, una lista de art√≠culos o fuentes de informaci√≥n:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ig/ff/4q/igff4qjqmxcxloixsshjbc36uxy.png"><br>
<br>
<img src="https://habrastorage.org/webt/bh/o_/7n/bho_7nbyxpl5yxth1ihweasjbec.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aprendimos lo f√°cil que es cumplir </font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con las solicitudes con la ayuda de </font></font><code> Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">su </font></font><code>URLSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"editor" </font></font><code>dataTaskPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si no necesita realizar un seguimiento de los errores, obtiene un </font></font><code> Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo de 5 l√≠neas </font><font style="vertical-align: inherit;">muy simple </font><font style="vertical-align: inherit;">para el "editor" </font></font><code>AnyPublisher&lt;T, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que recibe </font></font><code>JSON </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informaci√≥n de </font><font style="vertical-align: inherit;">forma as√≠ncrona </font><font style="vertical-align: inherit;">y la coloca directamente en el </font></font><code>Codable </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo en </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;funci√≥n de lo dado&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2i/r_/6w/2ir_6wkuga1u9jcxsmqijle480e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este c√≥digo es muy f√°cil de usar para obtener un editor espec√≠fico, si los datos de origen </font></font><code>url </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son, por ejemplo </font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y la salida requiere varios modelos, por ejemplo, un conjunto de art√≠culos o una lista de fuentes de informaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si necesita tener en cuenta los errores, el c√≥digo para el&nbsp; </font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"editor" ser√° un poco m√°s complicado, pero a√∫n as√≠ ser√° un c√≥digo muy simple sin devoluciones de llamada:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fi/4d/ep/fi4depxf-hbngki4p5y3ktunbny.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando la tecnolog√≠a de ejecuci√≥n de </font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consultas </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ¬øpuede crear un "editor" </font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que seleccione datos asincr√≥nicamente y reciba una imagen UIImage? basado en </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Los </font></font><code>ImageLoade</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descargadores de </font><font style="vertical-align: inherit;">im√°genes </font><font style="vertical-align: inherit;">r se almacenan en memoria cach√© para evitar la recuperaci√≥n de datos asincr√≥nicos repetidos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo tipo de "publicadores" obtenidos se pueden "hacer funcionar" muy f√°cilmente en las clases de ObservableObject, que usan sus propiedades @Published para controlar su IU dise√±ada usando SwiftUI. Estas clases generalmente desempe√±an el papel del modelo de vista, ya que tienen las llamadas propiedades de "entrada" @Published que corresponden a los elementos activos de la interfaz de usuario (TextField, Stepper, cuadros de texto del selector, botones de radio de alternancia, etc.) y "output" @Published propiedades , que consiste principalmente en elementos de interfaz de usuario pasivos (textos de texto, im√°genes de im√°genes, formas geom√©tricas de c√≠rculo (), rect√°ngulo (), etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta idea impregna toda la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicaci√≥n de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> agregador de noticias </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> presentada en este art√≠culo. Result√≥ ser bastante universal y se us√≥ cuando</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desarrollando una aplicaci√≥n para la </font></font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base de datos de </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">pel√≠culas </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">TMDb</font></a><font style="vertical-align: inherit;"> y el agregador de noticias&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se discutir√° en futuros art√≠culos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de aplicaci√≥n para este art√≠culo est√° en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PD </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Quiero llamar su atenci√≥n sobre el hecho de que si usa el simulador para la aplicaci√≥n presentada en este art√≠culo, sepa que </font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el simulador funciona con un error. Puedes usar</font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el simulador solo 1 vez. </font><font style="vertical-align: inherit;">Aquellos. </font><font style="vertical-align: inherit;">usaste el enlace, volviste, haz clic en el mismo enlace y no pasa nada. </font><font style="vertical-align: inherit;">Hasta que use otro enlace, el primero no funcionar√°, pero el segundo ser√° inaccesible. </font><font style="vertical-align: inherit;">Pero esto solo se observa en el simulador, en un dispositivo real todo funciona bien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Algunas fuentes de informaci√≥n todav√≠a se utilizan </font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font><font style="vertical-align: inherit;">su </font><font style="vertical-align: inherit;">lugar </font></font><code>https</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para "im√°genes" de sus art√≠culos. </font><font style="vertical-align: inherit;">Si definitivamente desea ver estas "im√°genes", pero no puede controlar la fuente de su apariencia, debe configurar el sistema de seguridad </font></font><code>ATS ( App Transport Security)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para recibir estas </font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"im√°genes", pero esto, por supuesto, no es una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buena idea</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Puede usar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opciones m√°s seguras</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referencias</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    HTTP   Swift 5   Combine     SwiftUI.  1 .</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modern Networking in Swift 5 with URLSession, Combine and Codable.</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">URLSession.DataTaskPublisher‚Äôs failure type</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Combine: Asynchronous Programming with Swift</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬´SwiftUI &amp; Combine:  ¬ª</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Introducing Combine ‚Äî WWDC 2019 ‚Äî Videos ‚Äî Apple Developer. session 722</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">(  722 ¬´  Combine¬ª   )</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Combine in Practice ‚Äî WWDC 2019 ‚Äî Videos ‚Äî Apple Developer. session 721</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">(  721 ¬´  Combine¬ª   )</a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es488428/index.html">¬øC√≥mo predecimos el futuro en la b√∫squeda de Yandex: desde correcciones de errores hasta consultas de descubrimiento?</a></li>
<li><a href="../es488432/index.html">Snoop Project, una herramienta incre√≠ble para la inteligencia de Internet, que los usuarios de RuNet han estado esperando durante tanto tiempo, est√° disponible</a></li>
<li><a href="../es488436/index.html">Cree r√°pidamente m√∫sica de chiptune de c√≥digo abierto</a></li>
<li><a href="../es488438/index.html">La historia de los formatos de audio de pel√≠cula: la respuesta alemana a los casetes compactos: c√≥mo fue el destino del desarrollo</a></li>
<li><a href="../es488440/index.html">Lords of DOOM: c√≥mo dos chicos crearon un juego de disparos de culto y sacudieron la industria de los videojuegos</a></li>
<li><a href="../es488446/index.html">Instrumentaci√≥n rusa: convertimos su dise√±o en los dedos</a></li>
<li><a href="../es488448/index.html">D√© un paseo en la Universidad ITMO: nuestras clases magistrales, talleres, conferencias y competiciones estudiantiles</a></li>
<li><a href="../es488450/index.html">C√≥mo funciona una nueva generaci√≥n de banca en l√≠nea</a></li>
<li><a href="../es488456/index.html">Actividades del proyecto en las universidades y qu√© beneficios proporciona.</a></li>
<li><a href="../es488458/index.html">FunCode Backend Java / Kotlin Challenge: se anuncian los ganadores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>