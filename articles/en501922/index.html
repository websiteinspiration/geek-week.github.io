<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÅÔ∏è üòÅ üçô IoT where you did not wait. Development and testing (part 1) ‚úèÔ∏è üí≥ üë®üèΩ‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Using IoT in fitness trackers, speakers, vacuum cleaners will not surprise anyone. Did you think that various sensors can be installed in garbage cont...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>IoT where you did not wait. Development and testing (part 1)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/501922/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using IoT in fitness trackers, speakers, vacuum cleaners will not surprise anyone. </font><font style="vertical-align: inherit;">Did you think that various sensors can be installed in garbage containers and garbage trucks to control garbage collection? </font><font style="vertical-align: inherit;">It sounds strange and raises the question: ‚ÄúWhy?‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anatoly Korovin happened to work on a project that they did from scratch. </font><font style="vertical-align: inherit;">And in this article, the analysis of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">his report</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heisenbug</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conference </font><font style="vertical-align: inherit;">, where he described in detail why the Smart </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">Garbage Truck</font></a><font style="vertical-align: inherit;"> needed to be done, and how the development and testing of this project were conducted. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The general structure of the report is shown in the picture below. </font><font style="vertical-align: inherit;">In this article, we will only consider what is shaded in green on the diagram.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dh/fh/po/dhfhpoywrpxqbnzmgx9cqevapvg.png"><br>
<br>
<a name="habracut"></a><br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Industry challenges</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main characters:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">garbage containers (well, everything is clear here, we see garbage bins every day);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tenants of apartment buildings;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regional operator (organization responsible for solid municipal waste (MSW) in the region);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">companies carriers of garbage (transport companies, special equipment for the removal of MSW);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">landfills (these are dump pits, incinerators, and garbage processing plants).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When we pay for garbage collection, it is easiest to assess the quality of the service based on the fact of garbage removal from the yard. </font><font style="vertical-align: inherit;">But if you dive deeper into this issue and try to find out where the carrier is taking garbage (to the landfill or to the nearest ditch), then difficulties arise. </font><font style="vertical-align: inherit;">Therefore, one of the tasks of our system was to control the integrity of performers.</font></font><br>
<br>
<h3><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paper reporting</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In most of the regions we worked with, regional operators collected paper reports from carriers. </font><font style="vertical-align: inherit;">The report records the number of the carrier‚Äôs car, its route, tank loading time and the amount of garbage. </font><font style="vertical-align: inherit;">And they submit these reports once (or twice) a year, so you can imagine how much data it is.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e0/wr/0r/e0wr0rtymt4_sly202fwivi0cle.png"><br>
<br>
<h3><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hard to check</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Given that there is no mechanism to verify the reliability of these data, in many respects the report is accepted ‚Äúon faith‚Äù. To solve the problem, operators in some regions installed GPS trackers on the carrier‚Äôs cars and began to track the transport route. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Although the operators set the solution vector correctly, the whole problem was not solved - the reports all also represented a pile of papers on shelves in the operators office. It is difficult to imagine that someone will check everything with his hands. From this pile of paper you need to get some randomly, open the tracker program, compare the time in the report and on the tracker, the location of the machine. And too much data falls on the verifier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, there are unscrupulous carriers that exploit vulnerabilities in this system. They gradually realized what indicators they checked, and began to build a "gray" scheme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gs/lp/ue/gslpuehtndhu8lwlqjjduc0kx6g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, a carrier drives up to a garbage container in the yard, a driver gets out of the car, smokes for a couple of minutes and leaves without picking up the garbage. Then he arrives at the nearest construction site and loads himself with commercial garbage, the disposal of which must be paid separately, because this is a waste of production and other industrial enterprises. After that, the carrier gets to the landfill, where he confidently says that all this garbage was collected at the entrances of residential buildings. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In such a scenario, the route received from the GPS tracker will show the same points that appear in the carrier‚Äôs report, but no one has taken out the garbage.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And this is just one of many scenarios.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solving problems with IoT</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To cover the largest number of scenarios, an IoT system was built, including automation of garbage cans, carrier transport, and landfills.</font></font><br>
<br>
<h3><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smart trash cans</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To begin with, we equipped garbage containers with several types of sensors:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conventional ultrasonic sensor - determines the level of container fullness. </font><font style="vertical-align: inherit;">It made no sense to use expensive sophisticated systems, since such a device at the price of an iPhone cannot be put in the trash somewhere in a remote area, and someone will probably want to take it home.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temperature sensor - telemetry from it makes it clear whether the garbage is on; </font><font style="vertical-align: inherit;">accelerometer. </font><font style="vertical-align: inherit;">It determines the angle of inclination of the container, and this is how we record in history when the carrier arrived and unloaded the garbage. </font><font style="vertical-align: inherit;">And as a pleasant bonus, we can find out if the vandals turned the trash over.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFID tag. </font><font style="vertical-align: inherit;">With its help, you can clearly compare which car carrier unloads the container.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All data was transmitted via GSM / GPRS, so no wires were simply attached to the container wall, and the device measures the level of garbage in front of itself.</font></font><br>
<br>
<h3><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We follow the transport of the carrier</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To control the transport, we used:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPS trackers</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crane lift sensor to track valve movement;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFID reader to determine which container is attached to the machine;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">camera in case of any proceedings.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/w0/db/6_/w0db6_dcxazx3hdxsmdj9ssg2cw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What do you think was the most useless sensor? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yes, camera shots did not bring any benefit. </font><font style="vertical-align: inherit;">Of these, it‚Äôs not that you can‚Äôt put together a glamorous Instagram account, it‚Äôs not even clear what we‚Äôre looking at: It‚Äôs </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2k/_s/sw/2k_ssw2orhaa6x4irc7pabe4-xs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quite difficult to install the camera on a carrier‚Äôs special transport so that the photographs are clear. </font><font style="vertical-align: inherit;">As a result, the photo showed: a road, a barrier, puddles, etc., and occasionally container platforms from not the most successful angles. </font><font style="vertical-align: inherit;">Expected to see various violations of the transport of garbage, but in fact the garbage - the photos themselves.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pi/si/hs/pisihsuakhcgcebpbk_wultyhhu.gif"></div><br>
<h3><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controlling waste disposal</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The containers and transport were connected, it remains to receive telemetry from the end point - the landfill. </font><font style="vertical-align: inherit;">For this, a huge weight stand is installed at the entrance. </font><font style="vertical-align: inherit;">When the car enters, we recognize the car number and record the data in the database. </font><font style="vertical-align: inherit;">On the road, the transport goes through a similar procedure, and we work on the difference between these two values.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What did the introduction of the system give?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Carriers get quite a big profit from this system, because now every morning they know the optimal route. Cars can now go first to the points where the containers are full, and then move along the points in descending order of fullness. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m3/h1/th/m3h1thurvfwagsnfpenut0nwpxq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Such tracks are very different from regular carrier routes, since without telemetry it is quite difficult to predict the best option. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7w/ep/bs/7wepbsdgqcxfkec4-m95wchl-54.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This scenario also happens: most sites for garbage collection are arranged in a rather small area, but there is one point that is located at a considerable distance from others. Without telemetry, it is difficult to find out whether garbage should be collected from this site, and the driver will come to her, see that the containers are empty, and leave, spending time and fuel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AT</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the continuation of this article we</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will tell you how the backend of this project is arranged and what specific features IoT brought to testing approaches.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anatoly Korovin will speak at the upcoming </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heisenbug 2020 Piter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conference </font><font style="vertical-align: inherit;">, which will be held online June 15-18. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This summer it is possible to gain knowledge not only in the field of testing, but also in distributed computing, front-end, back-end, DevOps, mobile projects, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">by ticket-subscription</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501904/index.html">What will happen to your skin from constant wearing gloves</a></li>
<li><a href="../en501906/index.html">DINS QA EVENING (online): a case for testing a WebRTC-based service and ways to avoid running flaky tests</a></li>
<li><a href="../en501910/index.html">The user does not need all this! Stop Promoting Linux</a></li>
<li><a href="../en501914/index.html">Stream Modern Web Live 2020 - Best UX Practices in Indefinite Times</a></li>
<li><a href="../en501918/index.html">The book "Game Design. Recipes for the success of the best computer games from Super Mario and Doom to Assassin's Creed and on ¬ª</a></li>
<li><a href="../en501924/index.html">How to build a venn diagram with 50 circles? Visualization of sets and the history of my open source Python project</a></li>
<li><a href="../en501928/index.html">PM online mitap with speakers from Atlassian (Jira), Wrike and Productboard</a></li>
<li><a href="../en501930/index.html">What opportunities does Spring provide for customizing its behavior?</a></li>
<li><a href="../en501932/index.html">Accelerating the implementation of AI projects in the Segezha forest holding</a></li>
<li><a href="../en501934/index.html">Publish VKUI component design library in Figma</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>