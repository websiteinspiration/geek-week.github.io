<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏽‍🤝‍🧑🏼 ♑️ 👩🏼‍🎤 Metodologi penyebaran proyek yang digunakan oleh Slack 💃🏿 🔵 🕝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kesimpulan dari rilis proyek baru ke dalam produksi membutuhkan keseimbangan yang hati-hati antara kecepatan penyebaran dan keandalan solusi. Slack me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Metodologi penyebaran proyek yang digunakan oleh Slack</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/496838/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan dari rilis proyek baru ke dalam produksi membutuhkan keseimbangan yang hati-hati antara kecepatan penyebaran dan keandalan solusi. Slack menghargai iterasi cepat, loop umpan balik pendek, dan responsif terhadap permintaan pengguna. Selain itu, perusahaan ini memiliki ratusan programmer yang berjuang untuk produktivitas setinggi mungkin.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/t6/zj/yk/t6zjykbpoemnwblp_6vgyeuehiq.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para penulis materi, terjemahan yang kami terbitkan hari ini, mengatakan bahwa perusahaan yang berusaha untuk mematuhi nilai-nilai tersebut dan pada saat yang sama tumbuh harus terus meningkatkan sistem penyebaran proyeknya. </font><font style="vertical-align: inherit;">Perusahaan perlu berinvestasi dalam transparansi dan keandalan proses kerja, untuk memastikan bahwa proses ini sesuai dengan ruang lingkup proyek. </font><font style="vertical-align: inherit;">Di sini kita akan berbicara tentang proses kerja yang telah dikembangkan di Slack, dan tentang beberapa solusi yang membuat perusahaan menggunakan sistem penyebaran proyek yang ada saat ini.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana proses penyebaran proyek bekerja hari ini</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap PR (permintaan tarik) di Slack harus dikenai peninjauan kode dan harus lulus semua tes dengan sukses. Hanya setelah kondisi ini terpenuhi, seorang programmer dapat menggabungkan kodenya dengan cabang utama dari proyek. Namun, penyebaran kode semacam itu hanya dilakukan selama jam kerja menurut waktu Amerika Utara. Sebagai hasilnya, kami, karena fakta bahwa karyawan kami sedang bekerja, sepenuhnya siap untuk menyelesaikan masalah yang tidak terduga.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap hari kami menyelesaikan sekitar 12 penyebaran yang direncanakan. </font><font style="vertical-align: inherit;">Selama setiap penyebaran, programmer, yang ditugaskan sebagai penyebaran utama, bertanggung jawab untuk membawa perakitan baru ke produksi. </font><font style="vertical-align: inherit;">Ini adalah proses multi-langkah, yang memberikan kesimpulan yang mulus dari perakitan dalam mode kerja. </font><font style="vertical-align: inherit;">Berkat pendekatan ini, kami dapat mendeteksi kesalahan sebelum memengaruhi semua pengguna kami. </font><font style="vertical-align: inherit;">Jika ada terlalu banyak kesalahan, penyebaran majelis dapat dibatalkan. </font><font style="vertical-align: inherit;">Jika masalah tertentu terdeteksi setelah rilis, perbaikan dapat dengan mudah dirilis untuk itu.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2e7/8e5/b7a/2e78e5b7a21c45b4b8c11cb611b560eb.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antarmuka sistem Checkpoint yang digunakan oleh Slack untuk menyebarkan proyek.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Proses</font><i><font color="#999999"><font style="vertical-align: inherit;"> penempatan</font></font></i><font style="vertical-align: inherit;"> rilis baru dalam produksi dapat diwakili dalam empat langkah.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍1. </font><font style="vertical-align: inherit;">Membuat cabang rilis</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap rilis dimulai dengan cabang rilis baru, dari saat dalam sejarah Git kami. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk menetapkan tag ke rilis dan menyediakan tempat di mana Anda dapat melakukan koreksi operasional untuk kesalahan yang ditemukan dalam proses mempersiapkan rilis untuk rilis dalam produksi.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍2. </font><font style="vertical-align: inherit;">Penempatan menengah</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Langkah selanjutnya adalah memasang perakitan ke server panggung dan menjalankan tes otomatis untuk keseluruhan kinerja proyek (uji asap). </font><font style="vertical-align: inherit;">Lingkungan perantara adalah lingkungan produksi di mana lalu lintas eksternal tidak turun. </font><font style="vertical-align: inherit;">Dalam lingkungan ini, kami melakukan pengujian manual tambahan. </font><font style="vertical-align: inherit;">Ini memberi kami keyakinan tambahan bahwa proyek yang dimodifikasi bekerja dengan benar. </font><font style="vertical-align: inherit;">Tes otomatis saja tidak cukup untuk mendapatkan kepercayaan diri seperti itu.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍3. </font><font style="vertical-align: inherit;">Penempatan di lingkungan dogfood dan kenari</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penempatan dalam produksi dimulai dengan lingkungan dogfood yang diwakili oleh serangkaian host yang melayani ruang kerja Slack internal kami. </font><font style="vertical-align: inherit;">Karena kami adalah pengguna Slack yang sangat aktif, menggunakan pendekatan ini telah membantu mendeteksi banyak kesalahan pada tahap awal penerapan. </font><font style="vertical-align: inherit;">Setelah kami memastikan bahwa fungsionalitas dasar sistem tidak rusak, majelis ditempatkan di lingkungan kenari. </font><font style="vertical-align: inherit;">Ini adalah sistem yang menerima sekitar 2% dari lalu lintas produksi.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍4. </font><font style="vertical-align: inherit;">Kesimpulan Bertahap dalam Produksi</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika indikator pemantauan rilis baru berubah menjadi stabil, dan jika setelah menyebarkan proyek di lingkungan kenari kami belum menerima keluhan, kami melanjutkan transfer server produksi secara bertahap ke rilis baru. </font><font style="vertical-align: inherit;">Proses penyebaran dibagi menjadi beberapa tahapan berikut: 10%, 25%, 50%, 75% dan 100%. </font><font style="vertical-align: inherit;">Akibatnya, kami dapat secara perlahan mentransfer lalu lintas produksi ke rilis sistem baru. </font><font style="vertical-align: inherit;">Pada saat yang sama, kami punya waktu untuk menyelidiki situasi jika mengungkapkan beberapa anomali.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Bagaimana jika terjadi kesalahan selama pemasangan?</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Membuat modifikasi pada kode selalu berisiko. </font><font style="vertical-align: inherit;">Tetapi kita dapat mengatasi hal ini berkat “manajer penempatan” kami yang terlatih dengan baik yang mengelola proses memperkenalkan rilis baru ke dalam produksi, memantau kinerja pemantauan, dan mengoordinasikan pekerjaan programmer yang merilis kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika ada masalah, kami mencoba mendeteksi masalah sedini mungkin. </font><font style="vertical-align: inherit;">Kami menyelidiki masalah, menemukan PR yang menyebabkan kesalahan, memutar kembali, menganalisisnya dengan hati-hati, dan membuat perakitan baru. </font><font style="vertical-align: inherit;">Benar, kadang-kadang masalah tidak diperhatikan sebelum proyek dimasukkan ke dalam produksi. </font><font style="vertical-align: inherit;">Dalam situasi seperti itu, yang paling penting adalah mengembalikan layanan. </font><font style="vertical-align: inherit;">Karena itu, sebelum memulai investigasi masalah, kami segera kembali ke majelis kerja sebelumnya.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blok Bangunan Penempatan</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan teknologi yang mendasari sistem penyebaran proyek kami.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Pengiriman cepat</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alur kerja yang dijelaskan di atas mungkin tampak, dalam retrospeksi, menjadi sesuatu yang sangat jelas. </font><font style="vertical-align: inherit;">Tetapi sistem penyebaran kami tidak menjadi begitu jauh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika perusahaan secara signifikan lebih kecil, seluruh aplikasi kami dapat berjalan di 10 instance Amazon EC2. </font><font style="vertical-align: inherit;">Menyebarkan proyek dalam situasi ini berarti menggunakan rsync untuk menyinkronkan semua server dengan cepat. </font><font style="vertical-align: inherit;">Sebelumnya, kode baru dipisahkan dari produksi hanya dengan satu langkah, diwakili oleh lingkungan perantara. </font><font style="vertical-align: inherit;">Kebaktian diciptakan dan diuji dalam lingkungan seperti itu, dan kemudian langsung diproduksi. </font><font style="vertical-align: inherit;">Memahami sistem seperti itu sangat sederhana, memungkinkan setiap programmer untuk menyebarkan kode yang ditulisnya kapan saja.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi dengan bertambahnya jumlah pelanggan kami, begitu pula skala infrastruktur yang diperlukan untuk memastikan operasi proyek. Segera, mengingat pertumbuhan sistem yang konstan, model penyebaran kami, berdasarkan pengiriman kode baru ke server, berhenti menangani tugasnya. Yaitu, penambahan setiap server baru berarti peningkatan waktu yang dibutuhkan untuk menyelesaikan penyebaran. Bahkan strategi berdasarkan penggunaan paralel rsync memiliki keterbatasan tertentu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, kami memecahkan masalah ini dengan beralih ke sistem penempatan paralel sepenuhnya, yang tidak diatur seperti sistem lama. </font><font style="vertical-align: inherit;">Yaitu, sekarang kami tidak mengirim kode ke server menggunakan skrip sinkronisasi. </font><font style="vertical-align: inherit;">Sekarang masing-masing server secara independen mengunduh perakitan baru, mengetahui bahwa itu perlu dilakukan, berkat mengamati perubahan kunci Konsul. </font><font style="vertical-align: inherit;">Server mengunduh kode secara paralel. </font><font style="vertical-align: inherit;">Ini memungkinkan kami untuk mempertahankan kecepatan penyebaran tinggi bahkan dalam lingkungan pertumbuhan sistem yang konstan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c9e/e38/643/c9ee3864307cec2cf4d9927c1201909c.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Server produksi memantau kunci Konsul. </font><font style="vertical-align: inherit;">2. Kuncinya berubah, ini memberi tahu server bahwa mereka harus mulai mengunduh kode baru. </font><font style="vertical-align: inherit;">3. Server mengunggah file tarball dengan kode aplikasi</font></font></font></i><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DeployPenyebaran anatomi</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusi lain yang membantu kami mencapai sistem penempatan multi-level adalah penyebaran atom. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum menggunakan penyebaran atom, setiap penyebaran dapat menghasilkan sejumlah besar pesan kesalahan. Faktanya adalah bahwa proses menyalin file baru ke server produksi tidak bersifat atomik. Hal ini menyebabkan adanya rentang waktu singkat ketika kode di mana fungsi-fungsi baru dipanggil tersedia sebelum fungsi-fungsi itu sendiri tersedia. Ketika kode tersebut dipanggil, ia mengembalikan kesalahan internal. Ini dimanifestasikan dalam permintaan API yang gagal dan di halaman web yang rusak.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tim yang menangani masalah ini menyelesaikannya dengan memperkenalkan konsep direktori "panas" (panas) dan "dingin" (dingin). </font><font style="vertical-align: inherit;">Kode dalam direktori "hot" bertanggung jawab untuk memproses lalu lintas produksi. </font><font style="vertical-align: inherit;">Dan di direktori "dingin", kode, ketika sistem sedang berjalan, hanya bersiap-siap untuk digunakan. </font><font style="vertical-align: inherit;">Selama penyebaran, kode baru disalin ke direktori "dingin" yang tidak digunakan. </font><font style="vertical-align: inherit;">Kemudian, ketika tidak ada proses aktif di server, direktori akan beralih secara instan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b23/cf4/201/b23cf4201e703afc4716d9fe793b2b0d.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Buka kemasan kode aplikasi ke direktori "dingin". </font><font style="vertical-align: inherit;">2. Mengalihkan sistem ke direktori "dingin", yang menjadi "panas" (operasi atom)</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intinya: pergeseran penekanan pada keandalan</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada tahun 2018, proyek tersebut tumbuh sedemikian rupa sehingga penyebaran yang sangat cepat mulai merusak stabilitas produk. Kami memiliki sistem penyebaran yang sangat maju di mana kami menginvestasikan banyak waktu dan upaya. Kami hanya perlu merestrukturisasi dan meningkatkan proses organisasi penyebaran. Kami telah menjadi perusahaan yang cukup besar, yang perkembangannya digunakan di seluruh dunia untuk mengatur komunikasi yang tidak terputus dan untuk memecahkan masalah-masalah penting. Karena itu, fokus perhatian kami adalah keandalan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami perlu membuat proses penempatan rilis Slack baru lebih aman. Kebutuhan ini mendorong kami untuk meningkatkan sistem penempatan kami. Faktanya, di atas kami membahas sistem yang ditingkatkan ini. Dalam perut sistem, kami terus menggunakan teknologi penyebaran cepat dan atom. Mengubah bagaimana tepatnya penyebaran dilakukan. Sistem baru kami dirancang untuk secara bertahap menggunakan kode baru di tingkat yang berbeda, di lingkungan yang berbeda. Sekarang kami menggunakan lebih maju dari sebelumnya, alat bantu dan alat bantu untuk memantau sistem. Ini memberi kami kesempatan untuk menangkap dan menghilangkan kesalahan jauh sebelum mereka mendapatkan kesempatan untuk mencapai pengguna akhir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi kita tidak akan berhenti di situ. </font><font style="vertical-align: inherit;">Kami terus meningkatkan sistem ini menggunakan alat bantu yang lebih canggih dan alat otomatisasi. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembaca yang budiman! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana proses penggelaran rilis proyek baru di tempat Anda bekerja?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id496826/index.html">Juta sprite di 120+ fps</a></li>
<li><a href="../id496828/index.html">Di mana menemukan freelance yang menyenangkan? (Spoiler: tidak Upwork)</a></li>
<li><a href="../id496830/index.html">Apa itu Emergent Communication dan mengapa Anda perlu tahu</a></li>
<li><a href="../id496832/index.html">Tur foto: apa yang mereka lakukan di laboratorium nanofotonik hibrida dan optoelektronika dari Institut Fisika Baru ITMO</a></li>
<li><a href="../id496836/index.html">QSerializer: solusi untuk serialisasi JSON / XML sederhana</a></li>
<li><a href="../id496840/index.html">Musk percaya bahwa 12 ribu satelit tidak akan mengganggu para astronom. Pendapatnya tidak konsisten dengan model</a></li>
<li><a href="../id496842/index.html">Model epidemi sederhana dengan alat Python dasar</a></li>
<li><a href="../id496846/index.html">Mekanika bahasa tumpukan dan pointer</a></li>
<li><a href="../id496848/index.html">Intisari materi menarik untuk pengembang seluler # 340 (pada 6 - 12 April)</a></li>
<li><a href="../id496850/index.html">Plugin Maven untuk JPackage dari Java 14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>