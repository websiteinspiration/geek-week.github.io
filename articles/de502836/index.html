<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèûÔ∏è üë∏üèΩ üë®üèº‚ÄçüöÄ Unity Editor Adventures: Serialisierte Matroschka üö™ üíÆ ü§≥üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kurze Einf√ºhrung
 In der Regel empfiehlt uns die manuelle Therapie, die FindPropertyRelative () -Methode zu verwenden, in die der Variablenname geworf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Unity Editor Adventures: Serialisierte Matroschka</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502836/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurze Einf√ºhrung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Regel empfiehlt uns die manuelle Therapie, die FindPropertyRelative () -Methode zu verwenden, in die der Variablenname geworfen wird, um zum Feld einer serialisierten Eigenschaft zu gelangen, die uns interessiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus bestimmten Gr√ºnden ist dieser Ansatz nicht immer zweckm√§√üig. Die Gr√ºnde k√∂nnen sehr unterschiedlich sein. Zum Beispiel kann sich der Name einer Variablen √§ndern, wir ben√∂tigen Nasenbluten-Zugriff auf eine nicht serialisierte Eigenschaft, wir m√ºssen Zugriff auf Setter-Getter oder sogar Methoden eines serialisierten Objekts haben. Wir werden nicht die Fragen stellen: "Warum brauchen Sie das √ºberhaupt?" Und "Warum k√∂nnten Sie nicht ohne die traditionellen Methoden auskommen?". Angenommen, wir brauchen - und das ist es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns also herausfinden, wie Sie das Objekt, mit dem wir arbeiten, sowie alle √ºbergeordneten Objekte aus der serialisierten Eigenschaft abrufen und nicht auf der Serialisierungsstra√üe voller Fallstricke h√§ngen bleiben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachtung. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser Artikel impliziert, dass Sie bereits wissen, wie man mit UnityEditor arbeitet, mindestens einmal benutzerdefinierte PropertyDrawers geschrieben haben und zumindest allgemein verstehen, wie sich eine serialisierte Eigenschaft von einem serialisierten Objekt unterscheidet.</font></font><br>
<br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serialisierungspfad</font></font></h3><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setzen Sie zun√§chst </font><font style="vertical-align: inherit;">
alle Punkte √ºber O. </font><font style="vertical-align: inherit;">Im primitivsten Fall haben wir eine bestimmte Erbenklasse von MonoBehaviour, und es gibt ein bestimmtes Feld, das zu einer serialisierten Klasse geh√∂rt, offensichtlich kein Erbe der heiligen einheitlichen Kuh von A.K.A. </font><font style="vertical-align: inherit;">UnityEngine.Object.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExamplePulsar</span> : <span class="hljs-title">MonoBehaviour</span><font></font>
{<font></font>
...<font></font>
        [<span class="hljs-meta">Space</span>][Header(<span class="hljs-string">"Example Sandbox Inspector Field"</span>)]
        <span class="hljs-keyword">public</span> SandboxField sandboxField;<font></font>
...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im obigen Code ist SandboxField eine Klasse mit dem Attribut Serializable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Zugriff auf das MonoBehaviour des Besitzers ist kein Problem:</font></font><br>
<br>
<pre><code class="cs hljs">UnityEngine.Object serializationRoot = property.serializedObject.targetObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie m√∂chten, k√∂nnen Sie es als durchf√ºhren, aber jetzt brauchen wir es nicht. </font><font style="vertical-align: inherit;">Wir interessieren uns f√ºr das serialisierte Feld selbst, um es mit allen Blackjack wie in der folgenden Abbildung zu zeichnen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-w/3n/th/-w3nthkn0gmcdeuvpqlw2zctxhy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir k√∂nnen den Serialisierungspfad wie folgt verfolgen:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span> serializationPath = property.propertyPath;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall besteht der Serialisierungspfad aus einem unserer Felder und gibt "sandboxField" zur√ºck, von dem wir weder kalt noch hei√ü sind, da wir f√ºr die erste Verschachtelungsebene nur den Namen der Variablen kennen m√ºssen (die √ºbrigens an uns zur√ºckgegeben wurde). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte beachten Sie, dass kein Elternteil MonoBehaviour unterwegs ist. </font><font style="vertical-align: inherit;">Jetzt spielt es keine Rolle, aber es wird wichtig, wenn wir anfangen, eine russische Puppe zu zerlegen, die ungef√§hr so ‚Äã‚Äãaussieht:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nestedClassVariable.exampleSandboxesList.Array.data [0] .evenMoreNested.Array.data [0]</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um sp√§ter nicht erwischt zu werden, wenn die Eigenschaften verschachtelt sind, werden wir im Voraus Folgendes tun:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span>[] path = property.propertyPath.Split(<span class="hljs-string">'.'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir alle Knoten des Serialisierungspfads. </font><font style="vertical-align: inherit;">Im primitivsten Fall ben√∂tigen wir jedoch nur den Nullknoten. </font><font style="vertical-align: inherit;">Nimm es:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span> pathNode = path[<span class="hljs-number">0</span>];</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schalten Sie ein kleines Spiegelbild ein und holen Sie sich das Feld von hier:</font></font><br>
<br>
<pre><code class="cs hljs">Type objectType = serializationRoot.GetType();<font></font>
FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
<span class="hljs-keyword">object</span> field = objectFieldInfo.GetValue(serializationRoot);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir lassen die Frage nach der Geschwindigkeit dieses Unternehmens hinter den Kulissen. F√ºr eine kleine Anzahl solcher Felder und eine kleine Verschachtelung sind die Reflexionskosten erheblich geringer als f√ºr alles, was w√§hrend des Renderns unter der Haube von UnityEditor geschieht. Wenn Sie Beweise wollen - auf einem Github haben Unity-Entwickler eine so interessante Sache, UnityCsReference. Sehen Sie sich Ihre Freizeit an, wie beispielsweise das ObjectField-Rendering implementiert wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eigentlich </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist das nicht (ha ha)</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alles. Wir haben das Feld, wir sind gl√ºcklich, wir k√∂nnen damit machen, was wir wollen, und sogar versuchen, unser eigenes UnityEvent mit allen Schaltfl√§chen und wichtigen Aktionen zu schreiben, die nur unser Feld betreffen, egal an welchem ‚Äã‚ÄãObjekt es h√§ngt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zumindest, w√§hrend es an der Wurzel dieses Objekts h√§ngt, wird alles in Ordnung sein, aber dann ist es nicht mehr so ‚Äã‚Äãviel. </font><font style="vertical-align: inherit;">Auf dem Weg der Serialisierung warten wir auf Arrays und alle Arten von Listen, deren Hauptwunsch es ist, uns in Pantoffeln zu stecken und die Anzahl der Elemente rechtzeitig nach oben zu √§ndern. </font><font style="vertical-align: inherit;">Aber zum Teufel damit w√ºrden wir zuerst unter dem Array selbst graben.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unser Ziel ist der Widerstand gegen solche Puppen</font></font></b>
                        <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/l7/do/h3/l7doh3b9j_da24zsw9rc-7xefjs.png"></div></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir keine Arrays im Serialisierungspfad h√§tten, w√§re die Aufgabe trivial: Wir w√ºrden die Serialisierungsknoten durchlaufen, bis wir das Ende der Kette erreichen. </font><font style="vertical-align: inherit;">So etwas wie der folgende Code:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">object</span> currentObject = serializationRoot;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; directSearchDepth; i++)<font></font>
{<font></font>
       <span class="hljs-keyword">string</span> pathNode = path[i];<font></font>
       Type objectType = currentObject.GetType();<font></font>
       FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
       <span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);<font></font>
       currentObject = nextObject;<font></font>
}<font></font>
<span class="hljs-keyword">return</span> currentObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier warten wir auf zwei unangenehme Neuigkeiten gleichzeitig. </font><font style="vertical-align: inherit;">Ich werde mit dem zweiten beginnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Schritt von nextObject kann pl√∂tzlich null anstelle des erwarteten Objekts zur√ºckgeben. </font><font style="vertical-align: inherit;">Normalerweise geschieht dies, wenn wir das √ºbergeordnete Objekt zum ersten Mal im Inspektor erstellen und der Serialisierungspfad bereits vorhanden ist, das entsprechende Feld jedoch nicht (dies bringt uns noch mehr Annehmlichkeiten). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall w√§re es sch√∂n, den Exit der Methode sofort mit der R√ºckgabe null hinzuzuf√ºgen:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);
<span class="hljs-keyword">if</span> (nextObject == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
currentObject = nextObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Warte eine Minute! </font><font style="vertical-align: inherit;">- du sagst. </font><font style="vertical-align: inherit;">"Und was tun in OnGUI, wenn Null an uns zur√ºckgegeben wurde?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antwort: nichts. </font><font style="vertical-align: inherit;">Nichts buchst√§blich. </font><font style="vertical-align: inherit;">Machen Sie einfach eine R√ºckkehr und √ºberspringen Sie diesen Zeichenschritt, w√§hrend Sie darauf warten, dass das Feld erstellt wird. </font><font style="vertical-align: inherit;">Daraus wird nichts Schreckliches passieren.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params">Rect position, SerializedProperty property, GUIContent label</span>)</span><font></font>
{<font></font>
       SandboxField sandboxField = GetTarget&lt;T&gt;(property);<font></font>
       <span class="hljs-keyword">if</span> (sandboxField == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;<font></font>
‚Ä¶<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist GetTarget () die entsprechende Funktion, die das serialisierte Objekt aus der Eigenschaft entnimmt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√úbrigens rate ich Ihnen, das Interessensgebiet nicht hier, sondern in GetPropertyHeight zu nutzen. Dies ist erforderlich, wenn wir zusammenklappbare, erweiterbare Felder mit unterschiedlichen Gr√∂√üen je nach Inhalt schreiben. GetPropertyHeight () wird vor OnGUI () aufgerufen. Wenn wir also das Feld dort nehmen und in das Feld unseres PropertyDrawer schreiben, m√ºssen wir es nicht erneut in OnGUI √ºbernehmen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten Sie, dass eine Instanz des benutzerdefinierten PropertyDrawer alleine erstellt wird, um alle derzeit sichtbaren serialisierten Eigenschaften zu zeichnen, und dass neue Eigenschaften der Reihe nach von oben nach unten darauf geworfen werden. Dies sollte ber√ºcksichtigt werden, um die Berechnung der H√∂he der n√§chsten Eigenschaft nicht zu beeintr√§chtigen. Andernfalls kann es zu einer unangenehmen Situation kommen, wenn Sie auf Ausklappen klicken und das erwartete Feld erweitert wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au√üerdem sollten Sie alle Lametta, die f√ºr die Anzeige des Felds im Editor verantwortlich sind und die Sie serialisieren m√∂chten, auf der Seite der serialisierbaren Klasse und nicht von PropertyDrawer serialisieren und aus Gr√ºnden der Genauigkeit bedingte Kompilierungsklammern einschlie√üen, damit all diese spanische Schande nicht versucht, zum Build zu gelangen ::</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">Serializable</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SandboxField</span><font></font>
{<font></font>
‚Ä¶<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> editorFoldout;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
‚Ä¶<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine weitere Gefahr, die uns hier erwartet: Alle vom Editor erstellten Felder wollten auf den Klassenkonstruktor und die in der Klasse angegebenen Standardwerte spucken. </font><font style="vertical-align: inherit;">Wenn Sie dies beispielsweise so tun (Beispiel aus meinem Projekt, bei dem es sich um den Wert der Knoten der Wasseroberfl√§che handelte):</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> m_nodesPerUnit = <span class="hljs-number">5</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Wert wird ignoriert, sobald Sie der Liste ein neues Element hinzuf√ºgen. </font><font style="vertical-align: inherit;">Das Aufrufen des Konstruktors um Hilfe ist nicht weniger nutzlos: Alles, was Sie dort geschrieben haben, wird ignoriert. </font><font style="vertical-align: inherit;">Das neue Objekt ist ein Ziel wie ein Falke. Alle seine Werte sind wirklich die Standardwerte, aber nicht die, die Sie dort sehen m√∂chten, sondern alle m√∂glichen Arten von Null, Falsch, 0, Color.clear und anderen obsz√∂nen Dingen.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kr√ºcke in Fleisch</font></font></b>
                        <div class="spoiler_text">  .   NonUnitySerializableClass,       .      , DefaultEditorObject(),    . <br>
<br>
  - :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NonUnitySerializableClass</span><font></font>
{<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DefaultEditorObject</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-comment">// virtually do nothing</span><font></font>
        }<font></font>
<font></font>
        [<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> validated = <span class="hljs-literal">false</span>;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EditorCreated</span>(<span class="hljs-params"><span class="hljs-keyword">bool</span> force = <span class="hljs-literal">false</span></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (validated &amp;&amp; !force) <span class="hljs-keyword">return</span>;<font></font>
            DefaultEditorObject();<font></font>
            validated = <span class="hljs-literal">true</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NonUnitySerializableClass</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            EditorCreated(<span class="hljs-literal">true</span>);<font></font>
        }<font></font>
}</code></pre><br>
        DefaultEditorObject(),    ,   EditorCreated     .<br>
<br>
 :       .<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fg/dh/dr/fgdhdrfczfhhcki7dw6plxzj7vi.png"></div><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommen wir zur√ºck zu unseren Schafen oder besser zu den Arrays. </font><font style="vertical-align: inherit;">Ein weiteres Problem, das zu einem noch fr√ºheren Zeitpunkt auftreten kann, liegt in dieser Zeile:</font></font><br>
<br>
<pre><code class="cs hljs">FieldInfo objectFieldInfo = objectType.GetField(pathNode);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die rechte Seite kann uns Null zur√ºckgeben, wenn sie auf ein Array im Serialisierungspfad st√∂√üt (und jedes "IList" -Objekt das "Array" -Array ist). </font><font style="vertical-align: inherit;">Unangenehm. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was zu tun ist? </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versuchen Sie, nicht in solche Situationen zu geraten, indem Sie</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einen Handler schreiben:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; pathNode.Length; i++)<font></font>
{<font></font>
        <span class="hljs-keyword">string</span> pathNode = path[i];<font></font>
        Type objectType = currentObject.GetType();<font></font>
        FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (objectFieldInfo == <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
                <span class="hljs-keyword">if</span> (pathNode == <span class="hljs-string">"Array"</span>)<font></font>
                {<font></font>
                        i++;<font></font>
                        <span class="hljs-keyword">string</span> nextNode = path[i];
                        <span class="hljs-keyword">string</span> idxstr = nextNode.Substring(nextNode.IndexOf(<span class="hljs-string">"["</span>) + <span class="hljs-number">1</span>);<font></font>
                        idxstr = idxstr.Replace(<span class="hljs-string">"]"</span>, <span class="hljs-string">""</span>);
                        <span class="hljs-keyword">int</span> arrayNumber = Convert.ToInt32(idxstr);<font></font>
                        IList collection = currentObject <span class="hljs-keyword">as</span> IList;
                        <span class="hljs-keyword">if</span> (collection.Count &lt;= arrayNumber) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
                        currentObject = collection[arrayNumber];<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span><font></font>
                {<font></font>
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"   "</span>);<font></font>
                }<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-comment">//  ,     </span><font></font>
        {<font></font>
                <span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);
                <span class="hljs-keyword">if</span> (nextObject == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
                currentObject = nextObject;<font></font>
        }<font></font>
}<font></font>
<span class="hljs-keyword">return</span> currentObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ja, wir k√∂nnen hier sogar in eine unangenehme Situation geraten, wenn der Serialisierungspfad beispielsweise bereits das Element data [0] oder data [1] enth√§lt und das Array es noch nicht implementiert hat. </font><font style="vertical-align: inherit;">Zum Beispiel haben wir eine leere Liste erstellt. </font><font style="vertical-align: inherit;">Wir fragen ihn N Elemente - und ohne diese sch√∂ne Linie:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (collection.Count &lt;= arrayNumber) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... wir bekommen eine Reihe von Ausnahmen beim Schnurren. </font><font style="vertical-align: inherit;">Alles, was ben√∂tigt wurde, war, den Rendering-Schritt zu √ºberspringen, nachdem gewartet wurde, bis die f√ºr uns interessanten Felder erstellt wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich bin noch nicht auf andere F√§lle gesto√üen, in denen objectFieldInfo == null ist, aber gleichzeitig wird der Serialisierungsknoten nicht als Array bezeichnet. Wenn Sie also eine schreckliche Ausnahme in eine solche hypothetische Ausnahmesituation werfen, m√ºssen Sie sie anschlie√üend aufl√∂sen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen haben wir eine mehr oder weniger funktionierende Funktion, mit der wir ein Feld anhand seiner serialisierten Eigenschaft extrahieren k√∂nnen. </font><font style="vertical-align: inherit;">In Zukunft kann diese Funktion ge√§ndert werden, indem erzwungen wird, alle Objekte im Serialisierungspfad zu extrahieren und nach dem n√§chsten ‚Äû√ºbergeordneten Element‚Äú zu suchen, einschlie√ülich oder ohne Arrays entlang des Pfads.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Life Hack, um verschachtelte Eigenschaften zu zeichnen</font></font></b>
                        <div class="spoiler_text">      -  ,   Rect position  Rect indentedPosition = EditorGUI.IndentedRect(position).     ,         EditorGUI,      position ,       GUI ‚Äì    indentedPosition.   EditorGUILayout  OnGUI,       (   ,   ).<br>
<br>
    ,   MonoScript   (     -,   ),     static-,      AssetDatabase,        <i></i>         .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihre Aufmerksamkeit.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de502818/index.html">Y Messenger: Dezentraler Messenger in der Blockchain *</a></li>
<li><a href="../de502826/index.html">3D Creaform MetraSCAN 3D Scanner √úbersicht</a></li>
<li><a href="../de502830/index.html">Online Hackathon "New Reality" VirusHack. Wie war es</a></li>
<li><a href="../de502832/index.html">Online zur Verf√ºgung gestellte ISTQB-Zertifizierung: pers√∂nliche Erfahrung</a></li>
<li><a href="../de502834/index.html">So werden Sie in sechs Monaten oder noch schneller DevOps-Ingenieur. Teil 5. Bereitstellung</a></li>
<li><a href="../de502838/index.html">Was ist der Unterschied zwischen IT- und digitalen Berufen: digitale Transformation und Expertenmeinungen</a></li>
<li><a href="../de502840/index.html">Gl√§nzender 3D EinScan Pro 2X Plus 3D-Scanner Test</a></li>
<li><a href="../de502842/index.html">So sch√ºtzen Sie biometrische Benutzerdaten vor krimineller Verwendung</a></li>
<li><a href="../de502844/index.html">[Teil 2/2] Anleitung zu FFmpeg und SDL oder Schreiben eines Videoplayers in weniger als 1000 Zeilen</a></li>
<li><a href="../de502846/index.html">Zuckerberg startete Gesch√§fte. Instagram und Facebook werden nach und nach zu L√§den.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>