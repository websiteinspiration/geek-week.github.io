<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>▪️ 🔂 🧗🏻 貪欲なアプローチとスロットマシン。プログラミング選手権のMLトラックのタスクの分析 👍🏼 🎩 🤚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近のチャンピオンシップで提案されたタスクの分析を引き続き公開しています。次の行は、機械学習のスペシャリストの認定ラウンドからのタスクです。これは4つ（バックエンド、フロントエンド、ML、分析）のうち3番目のトラックです。参加者は、テキストのタイプミスを修正するためのモデルを作成し、スロットマシンで...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>貪欲なアプローチとスロットマシン。プログラミング選手権のMLトラックのタスクの分析</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/461273/"><img src="https://habrastorage.org/webt/sd/i7/yd/sdi7ydyv5yabtpudjamnnmm2dge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近のチャンピオンシップで提案されたタスクの分析を引き続き公開しています。</font><font style="vertical-align: inherit;">次の行は、機械学習のスペシャリストの認定ラウンドからのタスクです。</font><font style="vertical-align: inherit;">これは4つ（バックエンド、フロントエンド、ML、分析）のうち3番目のトラックです。</font><font style="vertical-align: inherit;">参加者は、テキストのタイプミスを修正するためのモデルを作成し、スロットマシンでプレイするための戦略を提案し、コンテンツの推奨システムを思い起こさせ、さらにいくつかのプログラムを作成する必要がありました。</font></font><br>
<br>
<a name="habracut"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A.タイプミス</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></h4><div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての言語</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python2.7 + numpy</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python3.5 + numpy</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制限時間</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5秒</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ制限</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64 MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">256 MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">256 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入る</font></font></td>
<td colspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準入力またはinput.txt</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></td>
<td colspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準出力またはoutput.txt</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（epigraph）（1つのフォーラムから）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-誰がこのナンセンスを構成しましたか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-天体物理学者。彼らも人々です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-「ジャーナリスト」という言葉に10の間違いをしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのユーザーは入力ミスを犯します。一部はキーを押すため、一部は読み書きができないためです。ユーザーが本当に入力した単語以外の単語を意味するかどうかを確認したいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より正式には、次のエラーモデルが発生したとします。ユーザーが書きたい単語で始まり、その後、その中でいくつかのエラーが発生します。</font><font style="vertical-align: inherit;">各エラーは、単語の一部の文字列を別の部分文字列に置き換えたものです。</font><font style="vertical-align: inherit;">1つのエラーは、1つの位置でのみ置換することに対応します（つまり、ユーザーが「abc」→「cba」というルールで1つのエラーを発生させたい場合、「abcabc」の行から「cbaabc」または「abccba」のいずれかを取得できます）。</font><font style="vertical-align: inherit;">エラーが発生するたびに、このプロセスが繰り返されます。</font><font style="vertical-align: inherit;">同じルールを異なるステップで複数回使用できます（たとえば、上記の例では、「cbacba」は2つのステップで取得できます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーが特定の単語を念頭に置いて別の単語を書いた場合に発生する可能性があるエラーの最小数を判別する必要があります。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I / Oフォーマットと例</font></font></b><div class="spoiler_text"><h4> </h4><br>
    , ,   ,     (        ,    20).<br>
<br>
    ,       (         ,    20).<br>
<br>
      N (N &lt; 50) —  ,   .<br>
<br>
  N       &amp;lt«»  &amp;gt&lt;&gt;&lt;«»  &gt;.      6 .<br>
<br>
<h4> </h4><br>
    —   ,    .     4        ,   –1.<br>
<br>
<h4></h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>mlax<br>
drum<br>
50<br>
l r<br>
mlax gtwt<br>
m d<br>
mlax ujoc<br>
ml pq<br>
m f<br>
ml bf<br>
mlax aruq<br>
mlax nqdd<br>
mlax fglm<br>
mlax bfit<br>
mlax mziq<br>
mla hlb<br>
a u<br>
mlax vmpa<br>
m w<br>
a w<br>
ax ok<br>
mla kqf<br>
m e<br>
x x<br>
ml if<br>
ml gk<br>
l e<br>
mla xrh<br>
m j<br>
a c<br>
a b<br>
m q<br>
ax fr<br>
ml sb<br>
mlax gxxx<br>
x m<br>
mlax hczx<br>
l q<br>
la sv<br>
l g<br>
ax eh<br>
lax mjh<br>
la ec<br>
la pv<br>
ml iq<br>
a q<br>
lax jrs<br>
la qn<br>
lax bjo<br>
l o<br>
a z<br>
l n<br>
a c</code></td>
<td><code>4</code></td>
</tr>
</tbody></table></div></div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正しいスペルから、4つ以下のエラーですべての可能な単語を生成してみましょう。</font><font style="vertical-align: inherit;">最悪の場合、O（（L﹒N）</font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">が存在する可能性があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">問題の制限では、これはかなり大きな数であるため、複雑さを軽減する方法を理解する必要があります。</font><font style="vertical-align: inherit;">代わりに、ミートインザミドルアルゴリズムを使用できます。2つ以下のエラーで単語を生成し、2つ以下のエラーでユーザー作成の単語を取得できる単語を生成します。</font><font style="vertical-align: inherit;">これらの各セットのサイズは10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6を</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超えないことに注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ユーザーが行ったエラーの数が4を超えない場合、これらのセットは交差します。</font><font style="vertical-align: inherit;">同様に、エラーの数が3、2、1を超えていないことを確認できます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FromTo</span> {</span>
	<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> from;
	<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> to;<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-built_in">std</span>::pair&lt;<span class="hljs-keyword">size_t</span>, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt; <span class="hljs-title">applyRule</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; word, <span class="hljs-keyword">const</span> FromTo &amp;fromTo, <span class="hljs-keyword">int</span> pos)</span> </span>{		
	<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) {
		<span class="hljs-keyword">int</span> from = word.find(fromTo.from, pos);
		<span class="hljs-keyword">if</span> (from == <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos) {
			<span class="hljs-keyword">return</span> {<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos, {}};<font></font>
		}<font></font>
		<span class="hljs-keyword">int</span> to = from + fromTo.from.size();
		<span class="hljs-keyword">auto</span> cpy = word;
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = from; i &lt; to; i++) {<font></font>
			cpy[i] = fromTo.to[i - from];<font></font>
		}<font></font>
		<span class="hljs-keyword">return</span> {from, <span class="hljs-built_in">std</span>::move(cpy)};<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">inverseRules</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;FromTo&gt; &amp;rules)</span> </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; rule: rules) {
		<span class="hljs-built_in">std</span>::swap(rule.from, rule.to);<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">solve</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; wordOrig, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; wordMissprinted, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;FromTo&gt;&amp; replaces)</span> </span>{
	<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>, <span class="hljs-keyword">int</span>&gt; mapping;
	<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt; mappingInverse;<font></font>
	<font></font>
	mapping.emplace(wordOrig, <span class="hljs-number">0</span>);<font></font>
	mappingInverse.emplace(<span class="hljs-number">0</span>, wordOrig);<font></font>
<font></font>
	mapping.emplace(wordMissprinted, <span class="hljs-number">1</span>);<font></font>
	mappingInverse.emplace(<span class="hljs-number">1</span>, wordMissprinted);<font></font>
<font></font>
	<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; edges;<font></font>
<font></font>
	<span class="hljs-keyword">auto</span> buildGraph = [&amp;edges, &amp;mapping, &amp;mappingInverse](<span class="hljs-keyword">int</span> startId, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;FromTo&gt;&amp; replaces, <span class="hljs-keyword">bool</span> dir) {
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-keyword">int</span>&gt; mappingLayer0;	<font></font>
		mappingLayer0 = {startId};<font></font>
<font></font>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++) {
			<span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-keyword">int</span>&gt; mappingLayer1;			
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; v: mappingLayer0) {
				<span class="hljs-keyword">auto</span>&amp; word = mappingInverse.at(v);
				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; fromTo: replaces) {			
					<span class="hljs-keyword">size_t</span> from = <span class="hljs-number">0</span>;
					<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
						<span class="hljs-keyword">auto</span> [tmp, wordCpy] = applyRule(word, fromTo, from);						
						<span class="hljs-keyword">if</span> (tmp == <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos) {
							<span class="hljs-keyword">break</span>;<font></font>
						}<font></font>
						from = tmp + <span class="hljs-number">1</span>;					<font></font>
						{<font></font>
							<span class="hljs-keyword">int</span> w = mapping.size();<font></font>
							mapping.emplace(wordCpy, w);<font></font>
							w = mapping.at(wordCpy);<font></font>
							mappingInverse.emplace(w, <span class="hljs-built_in">std</span>::move(wordCpy));
							<span class="hljs-keyword">if</span> (dir) {<font></font>
								edges[v].emplace(w);<font></font>
							} <span class="hljs-keyword">else</span> {<font></font>
								edges[w].emplace(v);<font></font>
							}<font></font>
							mappingLayer1.emplace(w);<font></font>
						}<font></font>
					}<font></font>
				}<font></font>
			}<font></font>
			mappingLayer0 = <span class="hljs-built_in">std</span>::move(mappingLayer1);<font></font>
		}<font></font>
	};<font></font>
<font></font>
	buildGraph(<span class="hljs-number">0</span>, replaces, <span class="hljs-literal">true</span>);<font></font>
	inverseRules(replaces);<font></font>
	buildGraph(<span class="hljs-number">1</span>, replaces, <span class="hljs-literal">false</span>);<font></font>
<font></font>
	{<font></font>
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">queue</span>&lt;<span class="hljs-built_in">std</span>::pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;&gt; q;<font></font>
		q.emplace(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
		<span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">bool</span>&gt; <span class="hljs-title">mask</span><span class="hljs-params">(mapping.size(), <span class="hljs-literal">false</span>)</span></span>;
		<span class="hljs-keyword">int</span> level{<span class="hljs-number">0</span>};<font></font>
<font></font>
		<span class="hljs-keyword">while</span> (q.size()) {
			<span class="hljs-keyword">auto</span> [w, level] = q.front();<font></font>
			q.pop();<font></font>
			<span class="hljs-keyword">if</span> (mask[w]) {
				<span class="hljs-keyword">continue</span>;<font></font>
			}<font></font>
			mask[w] = <span class="hljs-literal">true</span>;<font></font>
<font></font>
			<span class="hljs-keyword">if</span> (mappingInverse.at(w) == wordMissprinted) {
				<span class="hljs-keyword">return</span> level;<font></font>
			}<font></font>
<font></font>
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; v: edges[w]) {<font></font>
				q.emplace(v, level + <span class="hljs-number">1</span>);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B.多武装強盗</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></h4><div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制限時間</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2秒</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ制限</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入る</font></font></td>
<td> </td>
</tr>
<tr>
<td></td>
<td> </td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはインタラクティブなタスクです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなた自身はそれがどのようにして起こったのかはわかりませんが、トークンの袋全体を備えたスロットマシンのあるホールにいることがわかりました。</font><font style="vertical-align: inherit;">残念ながら、興行ではトークンの受け取りを拒否し、運を試すことにしました。</font><font style="vertical-align: inherit;">ホールにはプレイできるスロットマシンがたくさんあります。</font><font style="vertical-align: inherit;">スロットマシンでの1つのゲームでは、1つのトークンを使用します。</font><font style="vertical-align: inherit;">勝った場合、マシンは1ドルを提供し、負けた場合は何もしません。</font><font style="vertical-align: inherit;">各マシンの勝率は決まっていますが（あなたにはわかりません）、マシンごとに異なります。</font><font style="vertical-align: inherit;">これらのマシンの製造元のWebサイトを調べたところ、各マシンの勝率は</font><font style="vertical-align: inherit;">、特定のパラメーターを使用</font><font style="vertical-align: inherit;">した</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベータ分布</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から製造段階でランダムに選択されていることがわかりました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
予想される賞金を最大化したい。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I / Oフォーマットと例</font></font></b><div class="spoiler_text"><h4> </h4><br>
      .<br>
<br>
    ,          ,  :  N —     ,  M —     (N ≤ 10<sup>4</sup>, M ≤ min(N, 100)).        α  β (1 ≤ α, β ≤ 10) —  -  .<br>
<br>
     :    N .         ,      ( 1  M ).          «0»,  «1»,          .<br>
<br>
     N  M    .<br>
<br>
<h4> </h4><br>
   ,        .        ,    « ».<br>
<br>
,      ,   ,     « »   10<sup>–6</sup>.<br>
<br>
<h4></h4><br>
 :<br>
<br>
<pre><code class="cpp hljs">____________________
&nbsp;&nbsp;<span class="hljs-built_in">stdin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">stdout</span><font></font>
____________________<font></font>
____________________<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-number">5</span> <span class="hljs-number">2</span>	
&nbsp;&nbsp;&nbsp;<span class="hljs-number">2</span> <span class="hljs-number">2</span>	
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">2</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span>	
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">0</span>	
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span>	
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">2</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">2</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span></code></pre></div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題はよく知られており、さまざまな方法で解決できます。</font><font style="vertical-align: inherit;">陪審員の主な決定は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トンプソンサンプリング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">戦略を実装し</font><font style="vertical-align: inherit;">ましたが、プログラムの最初にステップ数がわかっていたため、より最適な戦略（UCB1など）があります。</font><font style="vertical-align: inherit;">さらに、イプシロン貪欲戦略でうまくいくこともできます：ある確率でεはランダムなマシンをプレイし、確率（1-ε）で最高の勝利統計を持つマシンをプレイします。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SolverFromStdIn</span>(<span class="hljs-params">object</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>
        self.regrets = [<span class="hljs-number">0.</span>]<font></font>
        self.total_win = [<span class="hljs-number">0.</span>]<font></font>
        self.moves = []<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThompsonSampling</span>(<span class="hljs-params">SolverFromStdIn</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, bandits_total, init_a=<span class="hljs-number">1</span>, init_b=<span class="hljs-number">1</span></span>):</span>
        <span class="hljs-string">"""
        init_a (int): initial value of a in Beta(a, b).
        init_b (int): initial value of b in Beta(a, b).
        """</span><font></font>
<font></font>
        SolverFromStdIn.__init__(self)<font></font>
        self.n = bandits_total<font></font>
<font></font>
        self.alpha = init_a<font></font>
        self.beta = init_b<font></font>
<font></font>
        self._as = [init_a] * self.n <span class="hljs-comment"># [random.betavariate(self.alpha, self.beta) for _ in range(self.n)]</span>
        self._bs = [init_b] * self.n <span class="hljs-comment"># [random.betavariate(self.alpha, self.beta) for _ in range(self.n)]</span>
        self.last_move = <span class="hljs-number">-1</span><font></font>
        random.seed(int(time.time()))<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move</span>(<span class="hljs-params">self</span>):</span>
        samples = [random.betavariate(self._as[x], self._bs[x]) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(self.n)]<font></font>
        self.last_move = max(range(self.n), key=<span class="hljs-keyword">lambda</span> x: samples[x])<font></font>
<font></font>
        self.moves.append(self.last_move)<font></font>
        <span class="hljs-keyword">return</span> self.last_move<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_reward</span>(<span class="hljs-params">self, reward</span>):</span><font></font>
        i = self.last_move<font></font>
        r = reward<font></font>
<font></font>
        self._as[i] += r<font></font>
        self._bs[i] += (<span class="hljs-number">1</span> - r)        <font></font>
<font></font>
        <span class="hljs-keyword">return</span> i, r<font></font>
<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
    n, m = map(int, sys.stdin.readline().split())<font></font>
<font></font>
    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> m == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">break</span><font></font>
        <font></font>
    alpha, beta = map(float, sys.stdin.readline().split())<font></font>
    solver = ThompsonSampling(m)<font></font>
<font></font>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(n):
        <span class="hljs-keyword">print</span> &gt;&gt; sys.stdout, solver.move() + <span class="hljs-number">1</span><font></font>
        sys.stdout.flush()<font></font>
        reward = int(sys.stdin.readline())<font></font>
        solver.set_reward(reward)</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C.文の整列</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></h4><div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制限時間</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2秒</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ制限</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入る</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準入力またはinput.txt</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準出力またはoutput.txt</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">優れた機械翻訳モデルをトレーニングするための最も重要なタスクの1つは、並列文の良い例です。通常、並列オファーのソースは並列ドキュメントです。多くの場合、並列文の特定のコーパスを構築するために、長さ以外は何も知る必要はありません。特に、ソース言語の文が長いほど、翻訳される可能性が高くなる可能性があります。いくつかの困難は、翻訳中にテキスト内の文の数が変化する可能性があるという事実にあります。翻訳の隣接する2つの文が1つに結合されたり、その逆の場合があります。1つの文が2つに分割される場合があります。まれに、翻訳で文章が完全に省略されたり、元の翻訳に含まれていない翻訳に翻訳が表示される場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より正式には、以下の並列エンクロージャーの生成モデルが当てはまると仮定します。各ステップで、次のいずれかのアクションを実行します</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。1. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停止</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
確率p </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hで、</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建物</font><sub><font style="vertical-align: inherit;">の</font></sub><font style="vertical-align: inherit;">生成が終了します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. [1-0] </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文をスキップする</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
確率p </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dで、</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1つの文を元のテキストに割り当てます。私たちは何も翻訳に帰しません。オファーの元の長さの言語では、L≥1は離散分布から選択されます</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bm/pe/t_/bmpet_y_ksvwgbohazpgctekbks.png" width="350"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">μ </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">σ </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sは</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分布パラメータであり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">α </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sは、</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのように選択された正規化係数です</font></font><img src="https://habrastorage.org/webt/fm/ae/ns/fmaensnvy1nauvywiluibhryr6s.png" width="100"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. [0-1]</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文を挿入</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
確率p</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iで</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、1つの文を翻訳に割り当てます。原作には一切責任を負いません。ターゲット言語での提供期間L≥1は、離散分布から選択されます</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/yn/kr/ylynkr3cs_t7dpedebtzqj3uryk.png" width="350"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> μ </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> σ </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分布パラメータであり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> α </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tは</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのように選択された正規化係数、です</font></font><img src="https://habrastorage.org/webt/bq/-k/p3/bq-kp37k-c-k5fpq9jrz4r8rkvy.png" width="100"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
確率（1 - P</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - P</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - P</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> H</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、我々は元の言語Lで文章の長さを取る</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ≥1分布Pから</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（切り上げ）。次は、L用の変換長の言語で提案生成</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ≥条件離散分布の1： </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ae/b6/mx/aeb6mx4cols1jplbs-di9emhxf8.png" width="500"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">α </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STは</font></font></sub></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正規化係数であり、残りのパラメータは、前の段落に記載されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、もう1つのステップがあります</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。1. [2-1]確率p </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">split s</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">により、</font><font style="vertical-align: inherit;">元の言語で生成された文は2つの空ではないものに分割されるため、単語の総数</font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は1だけ増加します</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。長さL </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sの</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文が長</font><font style="vertical-align: inherit;">さL </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とL </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2の</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分に分かれる</font><font style="vertical-align: inherit;">確率</font><font style="vertical-align: inherit;">（つまり、L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s）</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 1）は、P </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）⋅P </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">比例し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. [1-2]確率p </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">split t</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、ターゲット言語で生成された文は2つの空でない文に分割されるため、単語の総数は1つだけ増加します。</font><font style="vertical-align: inherit;">長さL </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tの</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文が長</font><font style="vertical-align: inherit;">さL1とL2の部分に分かれる</font><font style="vertical-align: inherit;">確率</font><font style="vertical-align: inherit;">（つまり、L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + 1）は、P </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）⋅P </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（L </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">比例し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. 3. [1-1]確率あり（1-p </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分割s</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -p </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分割t</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）生成された文のペアのいずれも分割されません。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I / O形式、例、および注意事項</font></font></b><div class="spoiler_text"><h4> </h4><br>
      : p<sub>h</sub>, p<sub>d</sub>, p<sub>i</sub>, p<sub>split s</sub>, p<sub>split t</sub>, μ<sub>s</sub>, σ<sub>s</sub>, μ<sub>t</sub>, σ<sub>t</sub>. 0,1 ≤ σ<sub>s</sub> &lt; σ<sub>t</sub> ≤ 3. 0 ≤ μ<sub>s</sub>, μ<sub>t</sub> ≤ 5.<br>
<br>
     N<sub>s</sub>  N<sub>t</sub> —             (1 ≤ N<sub>s</sub>, N<sub>t</sub> ≤ 1000).<br>
<br>
    N<sub>s</sub>   —     .     N<sub>t</sub>   —     .<br>
<br>
     : j  k (1 ≤ j ≤ N<sub>s</sub>, 1 ≤ k ≤ N<sub>t</sub>).<br>
<br>
<h4> </h4><br>
   ,     j  k      (                 ).<br>
<br>
   ,      10<sup>–4</sup>.<br>
<br>
<h4> 1</h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>0.05 0.08 0.07 0.15 0.1 1 0.3 3 0.5<br>
1 1<br>
4<br>
20<br>
1 1</code></td>
<td><code>0.975037457809</code></td>
</tr>
</tbody></table></div><h4> 2</h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>0.1 0.2 0.3 0.25 0.3 1 0.3 3 0.5<br>
2 1<br>
3 4<br>
20<br>
2 1</code></td>
<td><code>0.247705779810</code></td>
</tr>
</tbody></table></div><h4> 3</h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>0.2 0.2 0.2 0.3 0.3 3 0.3 1 1<br>
5 3<br>
16 35 24 19 23<br>
5 6 7<br>
2 1</code></td>
<td><code>0.200961101684</code></td>
</tr>
</tbody></table></div><h4></h4><br>
         :<br>
<br>
•    p<sub>d</sub>      ,    p<sub>i</sub>     ,    p<sub>h</sub>  .<br>
<br>
    P<sub>1</sub> = p<sub>d</sub> * P<sub>s</sub>(4) * p<sub>i</sub> * P<sub>t</sub>(20) * p<sub>h</sub>.<br>
<br>
•    p<sub>d</sub>      ,    p<sub>i</sub>     ,    p<sub>h</sub>  .<br>
<br>
    P<sub>2</sub> = p<sub>i</sub> * P<sub>t</sub>(20) * p<sub>d</sub> * P<sub>s</sub>(4) * p<sub>h</sub>.<br>
<br>
• C  (1 – p<sub>h</sub> – p<sub>d</sub> – p<sub>i</sub>)   ,    (1 – p<sub>split s</sub> – p<sub>split t</sub>)     (        ,  )      p<sub>h</sub>  .<br>
<br>
    <br>
<img src="https://habrastorage.org/webt/xw/ka/ys/xwkayskmtg4g3tkt9pb3n-ieyoa.png" width="550">.<br>
<br>
     <img src="https://habrastorage.org/webt/zm/tw/xk/zmtwxkdjhhctfrcbiqsc0tur6g0.png" width="100">.</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクは、隠れマルコフモデル（HMMアライメント）を使用したアライメントの特殊なケースです。</font><font style="vertical-align: inherit;">主な考え方は、このモデルと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォワードアルゴリズム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して特定のペアのドキュメントを生成する確率を計算できるということです</font><font style="vertical-align: inherit;">。この場合、状態はドキュメントのプレフィックスのペアです。</font><font style="vertical-align: inherit;">したがって、特定の対の並列文の整列に必要な確率は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前方後方</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴリズムによって計算できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iomanip&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cmath&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">double</span> p_h, p_d, p_i, p_tr, p_ss, p_st, mu_s, sigma_s, <span class="hljs-keyword">mu_t</span>, <span class="hljs-keyword">sigma_t</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">lognorm_cdf</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x, <span class="hljs-keyword">double</span> mu, <span class="hljs-keyword">double</span> sigma)</span> </span>{
    <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">1e-9</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">double</span> res = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(x) - mu;<font></font>
    res /= <span class="hljs-built_in">std</span>::<span class="hljs-built_in">sqrt</span>(<span class="hljs-number">2.0</span>) * sigma;<font></font>
    res = <span class="hljs-number">0.5</span> * (<span class="hljs-number">1</span> + <span class="hljs-built_in">std</span>::erf(res));
    <span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">length_probability</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">double</span> mu, <span class="hljs-keyword">double</span> sigma)</span> </span>{
    <span class="hljs-keyword">return</span> lognorm_cdf(l, mu, sigma) - lognorm_cdf(l - <span class="hljs-number">1</span>, mu, sigma);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">translation_probability</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ls, <span class="hljs-keyword">int</span> lt)</span> </span>{
    <span class="hljs-keyword">double</span> res = length_probability(ls, mu_s, sigma_s);
    <span class="hljs-keyword">double</span> mu = <span class="hljs-keyword">mu_t</span> - mu_s + <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(ls);
    <span class="hljs-keyword">double</span> sigma = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">sqrt</span>(<span class="hljs-keyword">sigma_t</span> * <span class="hljs-keyword">sigma_t</span> - sigma_s * sigma_s);<font></font>
    res *= length_probability(lt, mu, sigma);<font></font>
    <span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">split_probability</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l1, <span class="hljs-keyword">int</span> l2, <span class="hljs-keyword">double</span> mu, <span class="hljs-keyword">double</span> sigma)</span> </span>{
    <span class="hljs-keyword">int</span> l_sum = l1 + l2;
    <span class="hljs-keyword">double</span> total_prob = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; l_sum; ++i) {<font></font>
        total_prob += length_probability(i, mu, sigma) * length_probability(l_sum - i, mu, sigma);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> length_probability(l1, mu, sigma) * length_probability(l2, mu, sigma) / total_prob;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">log_prob10</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ls)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(p_d * length_probability(ls, mu_s, sigma_s));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">log_prob01</span><span class="hljs-params">(<span class="hljs-keyword">int</span> lt)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(p_i * length_probability(lt, <span class="hljs-keyword">mu_t</span>, <span class="hljs-keyword">sigma_t</span>));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">log_prob11</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ls, <span class="hljs-keyword">int</span> lt)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(p_tr * (<span class="hljs-number">1</span> - p_ss - p_st) * translation_probability(ls, lt));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">log_prob21</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ls1, <span class="hljs-keyword">int</span> ls2, <span class="hljs-keyword">int</span> lt)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(p_tr * p_ss * split_probability(ls1, ls2, mu_s, sigma_s) * translation_probability(ls1 + ls2 - <span class="hljs-number">1</span>, lt));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">log_prob12</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ls, <span class="hljs-keyword">int</span> lt1, <span class="hljs-keyword">int</span> lt2)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(p_tr * p_st * split_probability(lt1, lt2, <span class="hljs-keyword">mu_t</span>, <span class="hljs-keyword">sigma_t</span>) * translation_probability(ls, lt1 + lt2 - <span class="hljs-number">1</span>));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">logsum</span><span class="hljs-params">(<span class="hljs-keyword">double</span> v1, <span class="hljs-keyword">double</span> v2)</span> </span>{
    <span class="hljs-keyword">double</span> res = <span class="hljs-built_in">std</span>::max(v1, v2);<font></font>
    v1 -= res;<font></font>
    v2 -= res;<font></font>
    v1 = <span class="hljs-built_in">std</span>::min(v1, v2);
    <span class="hljs-keyword">if</span> (v1 &lt; <span class="hljs-number">-30</span>) {
        <span class="hljs-keyword">return</span> res;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> res + <span class="hljs-built_in">std</span>::<span class="hljs-built_in">log</span>(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">exp</span>(v1) + <span class="hljs-number">1.0</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">loginc</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* to, <span class="hljs-keyword">double</span> from)</span> </span>{<font></font>
    *to = logsum(*to, from);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">double</span> INF = <span class="hljs-number">1e25</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
    <span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>;
    <span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>;
    <span class="hljs-built_in">cin</span> &gt;&gt; p_h &gt;&gt; p_d &gt;&gt; p_i &gt;&gt; p_ss &gt;&gt; p_st &gt;&gt; mu_s &gt;&gt; sigma_s &gt;&gt; <span class="hljs-keyword">mu_t</span> &gt;&gt; <span class="hljs-keyword">sigma_t</span>;<font></font>
    p_tr = <span class="hljs-number">1.0</span> - p_h - p_d - p_i;
    <span class="hljs-keyword">int</span> Ns, Nt;
    <span class="hljs-built_in">cin</span> &gt;&gt; Ns &gt;&gt; Nt;<font></font>
<font></font>
    <span class="hljs-keyword">using</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>;
    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">ls</span><span class="hljs-params">(Ns)</span>, <span class="hljs-title">lt</span><span class="hljs-params">(Nt)</span></span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; Ns; ++i)
        <span class="hljs-built_in">cin</span> &gt;&gt; ls[i];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; Nt; ++i)
        <span class="hljs-built_in">cin</span> &gt;&gt; lt[i];<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt; <span class="hljs-built_in">vector</span>&lt; <span class="hljs-keyword">double</span>&gt; &gt; <span class="hljs-title">fwd</span><span class="hljs-params">(Ns + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">double</span>&gt;(Nt + <span class="hljs-number">1</span>, -INF))</span>, bwd </span>= fwd;<font></font>
    fwd[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<font></font>
    bwd[Ns][Nt] = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= Ns; ++i) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt;= Nt; ++j) {
            <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">1</span>) {<font></font>
                loginc(&amp;fwd[i][j], fwd[i - <span class="hljs-number">1</span>][j] + log_prob10(ls[i - <span class="hljs-number">1</span>]));<font></font>
                loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + <span class="hljs-number">1</span>][Nt - j] + log_prob10(ls[Ns - i]));<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (j &gt;= <span class="hljs-number">1</span>) {<font></font>
                loginc(&amp;fwd[i][j], fwd[i][j - <span class="hljs-number">1</span>] + log_prob01(lt[j - <span class="hljs-number">1</span>]));<font></font>
                loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i][Nt - j + <span class="hljs-number">1</span>] + log_prob01(lt[Nt - j]));<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">1</span> &amp;&amp; j &gt;= <span class="hljs-number">1</span>) {<font></font>
                loginc(&amp;fwd[i][j], fwd[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + log_prob11(ls[i - <span class="hljs-number">1</span>], lt[j - <span class="hljs-number">1</span>]));<font></font>
                loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + <span class="hljs-number">1</span>][Nt - j + <span class="hljs-number">1</span>] + log_prob11(ls[Ns - i], lt[Nt - j]));<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">2</span> &amp;&amp; j &gt;= <span class="hljs-number">1</span>) {<font></font>
                loginc(&amp;fwd[i][j], fwd[i - <span class="hljs-number">2</span>][j - <span class="hljs-number">1</span>] + log_prob21(ls[i - <span class="hljs-number">1</span>], ls[i - <span class="hljs-number">2</span>], lt[j - <span class="hljs-number">1</span>]));<font></font>
                loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + <span class="hljs-number">2</span>][Nt - j + <span class="hljs-number">1</span>] + log_prob21(ls[Ns - i], ls[Ns - i + <span class="hljs-number">1</span>], lt[Nt - j]));<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">1</span> &amp;&amp; j &gt;= <span class="hljs-number">2</span>) {<font></font>
                loginc(&amp;fwd[i][j], fwd[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">2</span>] + log_prob12(ls[i - <span class="hljs-number">1</span>], lt[j - <span class="hljs-number">1</span>], lt[j - <span class="hljs-number">2</span>]));<font></font>
                loginc(&amp;bwd[Ns - i][Nt - j], bwd[Ns - i + <span class="hljs-number">1</span>][Nt - j + <span class="hljs-number">2</span>] + log_prob12(ls[Ns - i], lt[Nt - j], lt[Nt - j + <span class="hljs-number">1</span>]));<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">int</span> j, k;
    <span class="hljs-built_in">cin</span> &gt;&gt; j &gt;&gt; k;
    <span class="hljs-keyword">double</span> rlog = fwd[j - <span class="hljs-number">1</span>][k - <span class="hljs-number">1</span>] + bwd[j][k] + log_prob11(ls[j - <span class="hljs-number">1</span>], lt[k - <span class="hljs-number">1</span>]) - bwd[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">std</span>::fixed &lt;&lt; <span class="hljs-built_in">std</span>::setprecision(<span class="hljs-number">12</span>) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">exp</span>(rlog) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;<font></font>
}</code></pre></div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D.推奨事項のテープ</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></h4><div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制限時間</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2秒</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ制限</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入る</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準入力またはinput.txt</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準出力またはoutput.txt</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">異種混合コンテンツの推奨フィードを検討してください。さまざまなタイプのオブジェクト（写真、ビデオ、ニュースなど）を混合します。これらのオブジェクトは通常、ユーザーとの関連性の高い順に並べられます。ユーザーにとってオブジェクトの関連性が高い（興味がある）ほど、推奨事項のリストの先頭に近くなります。ただし、このような順序付けでは、同じタイプの複数のオブジェクトが推奨事項のリストに表示される場合がよくあります。これは、外部のさまざまな推奨事項に大きな影響を与えるため、ユーザーはそれを好みません。推奨事項のリストに従って、この問題がなく、最も関連性の高い新しいリストを作成するアルゴリズムを実装する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
推奨事項の初期リストにa = [a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、...、a </font><sub><font style="vertical-align: inherit;">n-1を</font></sub><font style="vertical-align: inherit;">与える</font></font><sub><font style="vertical-align: inherit;"></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]長さnの&gt; 0オブジェクトiはタイプがB番号た番号</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ∈{0、...、M - 1}。さらに、番号iのオブジェクトは、関連性r（a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）= 2 </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-i</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。オブジェクトのサブセットを選択し、それらを再配置することによって最初のリストから取得したリストを考えます。</font><font style="vertical-align: inherit;">長さk（0≤k≤n）の</font><font style="vertical-align: inherit;">x = [a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></sub></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、...、a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k − 1</font></font></sub></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]。リスト内の2つの連続するオブジェクトのタイプが一致しない場合、リストは許容可能と呼ばれます。つまり、</font><font style="vertical-align: inherit;">すべてのj = 0、...、k − 2に対して</font><font style="vertical-align: inherit;">b </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></sub></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ≠b </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j + 1</font></font></sub></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。リストの関連性は次の式で計算されます</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></munderover><msub><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2212;</mo><mi>j</mi></mrow></msub><mi>r</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>i</mi><mi>j</mi></msub></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.912ex" height="3.759ex" viewBox="0 -1078.4 6420.2 1618.6" role="img" focusable="false" style="vertical-align: -1.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,477)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-2212" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-31" x="1300" y="0"></use></g><g transform="translate(1056,-287)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-3D" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-30" x="1191" y="0"></use></g><g transform="translate(2596,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMATHI-6A" x="778" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMATHI-72" x="4038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-28" x="4490" y="0"></use><g transform="translate(4879,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMATHI-6A" x="488" y="-213"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/company/yandex/blog/461273/&amp;usg=ALkJrhi1bsjTaHdgy7UQURxTAqLn8BpBwg#MJMAIN-29" x="6030" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mo>−</mo><mi>j</mi></mrow></msub><mi>r</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>i</mi><mi>j</mi></msub></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">\sum_{j=0}^{k-1} 2_{-j}r(a_{i_j})</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">すべての有効なものの中で最大の関連リストを見つける必要があります。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I / Oフォーマットと例</font></font></b><div class="spoiler_text"><h4> </h4><br>
       n  m (1 ≤ n ≤ 100000, 1 ≤ m ≤ n).   n    b<sub>i</sub>  i = 0,…, n − 1 (0 ≤ b<sub>i</sub> ≤ m − 1).<br>
<br>
<h4> </h4><br>
      : i<sub>0</sub>, i<sub>1</sub>,…, i<sub>k−1</sub>.<br>
<br>
<h4> 1</h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>1 1<br>
0</code></td>
<td><code>0</code></td>
</tr>
</tbody></table></div><h4> 2</h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>2 2<br>
1<br>
1</code></td>
<td><code>0</code></td>
</tr>
</tbody></table></div><h4> 3</h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>10 2<br>
1<br>
1<br>
1<br>
0<br>
0<br>
1<br>
0<br>
1<br>
1<br>
1</code></td>
<td><code>0 3 1 4 2 6 5</code></td>
</tr>
</tbody></table></div></div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単純な数学的計算を使用して、「貪欲な」アプローチによって問題を解決できることを示すことができます。つまり、推奨事項の最適なリストでは、リストの同じ先頭で有効なすべてのオブジェクトの中で最も関連性の高いオブジェクトが各ポジションにあります。</font><font style="vertical-align: inherit;">このアプローチの実装は単純です。オブジェクトを続けて取得し、可能であればそれらを回答に追加します。</font><font style="vertical-align: inherit;">無効なオブジェクトが検出されると（そのタイプは前のオブジェクトのタイプと一致します）、別のキューに置いて、できるだけ早く応答に挿入します。</font><font style="vertical-align: inherit;">常に、このキュー内のすべてのオブジェクトが一致するタイプを持つことに注意してください。</font><font style="vertical-align: inherit;">最後に、いくつかのオブジェクトがキューに残っている可能性があり、それらは応答に含まれなくなります。</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">blend</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> m, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; types)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; result;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">queue</span>&lt;<span class="hljs-keyword">int</span>&gt; repeated;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) {
        <span class="hljs-keyword">if</span> (result.empty() || types[result.back()] != types[i]) {<font></font>
            result.push_back(i);<font></font>
            <span class="hljs-keyword">if</span> (!repeated.empty() &amp;&amp; types[repeated.front()] != types[result.back()]) {<font></font>
                result.push_back(repeated.front());<font></font>
                repeated.pop();<font></font>
            }<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            repeated.push(i);<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> result;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D.文字シーケンスのクラスタリング</font></font></h2><div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての言語</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python2.7 + numpy</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python3.5 + numpy</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制限時間</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6秒</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ制限</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64 MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64 MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入る</font></font></td>
<td colspan="3">   input.txt</td>
</tr>
<tr>
<td></td>
<td colspan="3">   output.txt</td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある有限アルファベットA = { </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、...、</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K - 1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = S}、</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ∈{A、B、...は、Z}、Sはラインの終わりです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アルファベットAでランダムな文字列を生成する次の方法を考えてみ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。1.最初の文字x </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、分布P（x </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）= q </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iで</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あるランダム変数です</font><font style="vertical-align: inherit;">（q </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 0 </font><font style="vertical-align: inherit;">として知られてい</font><font style="vertical-align: inherit;">ます）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.次の各文字は、条件付き分布P（x </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> || x </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i-1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = a </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）= p </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jl</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に従って、前の文字に基づいて生成され</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. xの場合</font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = S、生成は停止し、結果はx </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... x </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i − 1</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
異なるパラメーターを持つ2つの記述されたモデルの混合から生成された一連の線が与えられます。</font><font style="vertical-align: inherit;">各行には、生成元のチェーンのインデックスを指定する必要があります。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I / Oフォーマット、例、メモ</font></font></b><div class="spoiler_text"><h4> </h4><br>
      1000 ≤ N ≤ 2000  3 ≤ K ≤ 27 —      .<br>
<br>
    ,   K−1     ,   K−1  .<br>
<br>
   N       .<br>
<br>
<h4> </h4><br>
N ,  i-     (0/1)    i+1-   .         80%.<br>
<br>
<h4></h4><div class="scrollable-table"><table>
<tbody><tr>
<td><b></b></td>
<td><b></b></td>
</tr>
<tr>
<td><code>100 3<br>
a<br>
a<br>
aa<br>
a<br>
aaa<br>
a<br>
aaaaaa<br>
aa<br>
a<br>
a<br>
a<br>
aaa<br>
a<br>
a<br>
aaa<br>
aa<br>
aaaa<br>
aaa<br>
a<br>
aaaaa<br>
aa<br>
a<br>
aaaa<br>
a<br>
a<br>
a<br>
a<br>
a<br>
a<br>
aa<br>
aaaa<br>
aaa<br>
a<br>
aa<br>
aaaa<br>
a<br>
a<br>
a<br>
a<br>
a<br>
a<br>
a<br>
a<br>
a<br>
a<br>
aa<br>
aaa<br>
aaa<br>
a<br>
a<br>
bbb<br>
bb<br>
bb<br>
bbbbbbb<br>
bb<br>
bbb<br>
b<br>
bbbbbbb<br>
bbbb<br>
bbb<br>
bb<br>
bbb<br>
bb<br>
bb<br>
bbb<br>
bbbbbb<br>
bbb<br>
b<br>
bbbbbb<br>
b<br>
bbbbb<br>
b<br>
b<br>
bb<br>
b<br>
bb<br>
bb<br>
b<br>
b<br>
b<br>
b<br>
bb<br>
bb<br>
bb<br>
b<br>
b<br>
b<br>
bb<br>
b<br>
bbb<br>
bb<br>
b<br>
bbbbbb<br>
b<br>
bb<br>
bb<br>
bb<br>
b<br>
bb<br>
bbb</code></td>
<td><code>0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
0<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1<br>
1</code></td>
</tr>
</tbody></table></div><h4></h4><br>
    :    50     <br>
P(x<sub>i</sub> = a | x<sub>i−1</sub> = a) = 0.5, P(x<sub>i</sub> = S | x<sub>i−1</sub> = a) = 0.5, P(x<sub>1</sub> = a) = 1;  50 —   <br>
P(x<sub>i</sub> = b | x<sub>i−1</sub> = b) = 0.5, P(x<sub>i</sub> = S | x<sub>i−1</sub> = b) = 0.5, P(x<sub>1</sub> = b) = 1.</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EMアルゴリズム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して解決</font><font style="vertical-align: inherit;">されます。提示されたサンプルは、反復中にパラメーターが復元される2つのマルコフチェーンの混合から生成されると想定されています。</font><font style="vertical-align: inherit;">両方のチェーンで確率が高い例によってソリューションの正確さが影響を受けないように、正解の80％の制限が行われます。</font><font style="vertical-align: inherit;">したがって、これらの例を適切に復元すると、生成された応答の点で正しくないチェーンに割り当てることができます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> math<font></font>
<font></font>
<font></font>
EPS = <span class="hljs-number">1e-9</span><font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty_row</span>(<span class="hljs-params">size</span>):</span>
    <span class="hljs-keyword">return</span> [<span class="hljs-number">0</span>] * size<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">empty_matrix</span>(<span class="hljs-params">rows, cols</span>):</span>
    <span class="hljs-keyword">return</span> [empty_row(cols) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(rows)]<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">normalized_row</span>(<span class="hljs-params">row</span>):</span><font></font>
    row_sum = sum(row) + EPS<font></font>
    <span class="hljs-keyword">return</span> [x / row_sum <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> row]<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">normalized_matrix</span>(<span class="hljs-params">mtx</span>):</span>
    <span class="hljs-keyword">return</span> [normalized_row(r) <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> mtx]<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">restore_params</span>(<span class="hljs-params">alphabet, string_samples</span>):</span><font></font>
    n_tokens = len(alphabet)<font></font>
    n_samples = len(string_samples)<font></font>
    samples = [tuple([alphabet.index(token) <span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> s] + [n_tokens - <span class="hljs-number">1</span>, n_tokens - <span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> string_samples]<font></font>
    probs = [random.random() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(n_samples)]<font></font>
<font></font>
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(<span class="hljs-number">200</span>):<font></font>
        old_probs = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> probs]<font></font>
<font></font>
        <span class="hljs-comment"># probs fixed   </span><font></font>
        p0, A = empty_row(n_tokens), empty_matrix(n_tokens, n_tokens)<font></font>
        q0, B = empty_row(n_tokens), empty_matrix(n_tokens, n_tokens)<font></font>
        <span class="hljs-keyword">for</span> prob, sample <span class="hljs-keyword">in</span> zip(probs, samples):<font></font>
            p0[sample[<span class="hljs-number">0</span>]] += prob<font></font>
            q0[sample[<span class="hljs-number">0</span>]] += <span class="hljs-number">1</span> - prob
            <span class="hljs-keyword">for</span> t1, t2 <span class="hljs-keyword">in</span> zip(sample[:<span class="hljs-number">-1</span>], sample[<span class="hljs-number">1</span>:]):<font></font>
                A[t1][t2] += prob<font></font>
                B[t1][t2] += <span class="hljs-number">1</span> - prob<font></font>
<font></font>
        A, p0 = normalized_matrix(A), normalized_row(p0)<font></font>
        B, q0 = normalized_matrix(B), normalized_row(q0)<font></font>
        <font></font>
        trans_log_diff = [<font></font>
            [math.log(b + EPS) - math.log(a + EPS) <span class="hljs-keyword">for</span> b, a <span class="hljs-keyword">in</span> zip(B_r, A_r)]
            <span class="hljs-keyword">for</span> B_r, A_r <span class="hljs-keyword">in</span> zip(B, A)<font></font>
        ]<font></font>
      <font></font>
        <span class="hljs-comment"># A, p0, B, q0 fixed</span><font></font>
        probs = empty_row(n_samples)<font></font>
        <span class="hljs-keyword">for</span> i, sample <span class="hljs-keyword">in</span> enumerate(samples):<font></font>
            value = math.log(q0[sample[<span class="hljs-number">0</span>]] + EPS) - math.log(p0[sample[<span class="hljs-number">0</span>]] + EPS)
            <span class="hljs-keyword">for</span> t1, t2 <span class="hljs-keyword">in</span> zip(sample[:<span class="hljs-number">-1</span>], sample[<span class="hljs-number">1</span>:]):<font></font>
                value += trans_log_diff[t1][t2]<font></font>
            probs[i] = <span class="hljs-number">1.0</span> / (<span class="hljs-number">1.0</span> + math.exp(value))<font></font>
        <font></font>
        <span class="hljs-keyword">if</span> max(abs(x - y) <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> zip(probs, old_probs)) &lt; <span class="hljs-number">1e-9</span>:
            <span class="hljs-keyword">break</span><font></font>
    <font></font>
    <span class="hljs-keyword">return</span> [int(x &gt; <span class="hljs-number">0.5</span>) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> probs]<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><font></font>
    N, K = list(map(int, input().split()))<font></font>
    string_samples = []<font></font>
    alphabet = list(input().strip()) + [<span class="hljs-string">''</span>]
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(N):<font></font>
        string_samples.append(input().rstrip())<font></font>
    result = restore_params(alphabet, string_samples)<font></font>
    <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> result:<font></font>
        print(r)<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:<font></font>
    main()</code></pre><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックエンド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フロント</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">エンドの</font></a><font style="vertical-align: inherit;">タスクの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">内訳です</font></a><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja461261/index.html">RRC製品に関する有用なRRC Webセミナーのチェックリスト</a></li>
<li><a href="../ja461265/index.html">マイクロコントローラー向けプロジェクトでのオペレーティングシステムの使用の乱用について</a></li>
<li><a href="../ja461267/index.html">チップパッケージング向けの新しいIntelテクノロジー</a></li>
<li><a href="../ja461269/index.html">pwnable.kr 08での問題解決は脚であり、10はシェルショックです。ARMアセンブラ。Bashの脆弱性</a></li>
<li><a href="../ja461271/index.html">2019年にモバイルアプリケーションを宣伝する方法：4つの実用的な方法+便利なツール</a></li>
<li><a href="../ja461277/index.html">無料のSQLIndexManagerツールの概要</a></li>
<li><a href="../ja461279/index.html">GolangとgRPCでシンプルなマイクロサービスを作成し、Dockerを使用してコンテナー化する方法</a></li>
<li><a href="../ja461281/index.html">Red Hat（RHEL / CentOS）7のchroot環境でBIND DNSサーバーをセットアップするためのチュートリアル</a></li>
<li><a href="../ja461283/index.html">ソフトウェアアーキテクチャとシステム設計：全体像とリソースガイド</a></li>
<li><a href="../ja461285/index.html">5つの主要なサンプリングアルゴリズム</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>