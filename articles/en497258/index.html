<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçüöí üèóÔ∏è üßëüèº‚Äçü§ù‚Äçüßëüèº Tcl / Tk. Alternative file explorer for Linux and Android platforms üçô üë®üèø‚Äçüéì ü§üüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The longer I write various programs on tcl / tk , the more I admire its capabilities and thoughtfulness. But there was one thing that did not give me ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tcl / Tk. Alternative file explorer for Linux and Android platforms</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497258/"><img src="https://habrastorage.org/webt/r1/up/bv/r1upbvlbm2fjavsgczqtpxj5liu.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The longer I write various programs on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tcl / tk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the more I admire its capabilities and thoughtfulness. But there was one thing that did not give me rest until recently. When developing a GUI, you often have to use the file explorer (tk_getSaveFile, tk_getOpenFile or tk_chooseDirectory). And if on Windows or OS X platforms, the native file explorer of these platforms is loaded, then on Linux platforms the explorer from tcl / tk is loaded (well, there is no native explorer in Linux):</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/xg/4n/ys/xg4nysqi9eqgyey0wmo5sltfnui.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What does not suit you in this explorer? This lack of elementary operations with folders / files in it - create, destroy, rename. No, don‚Äôt think in tcl itself all these mechanisms are, of course, implemented, they simply don‚Äôt exist in the Explorer GUI. But on Linux, this is not so noticeable. But on the Android platform, the conductor from Tcl / Tk causes a lot of inconvenience: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tt/-q/bj/tt-qbjpbrdtzrzmk8we8fjae_ry.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When we talk about the Android platform, we mean the development of applications on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Androwish</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And then </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">such times</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> have come, self-isolation, etc. As a result, a balalaika was born (also called / packages for tcl) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tkfe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tk file explorer).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When developing the tkfe package, we took into account not only that at least elementary operations with files / directories are necessary, but also the desire to have an explorer not only in a separate window, but also in a separate frame, which the user himself can place as he wishes in his GUI. The project has a comprehensive example of using the package. So, download the project, go to the ~ // TkFileExplorer / samples folder and run the example:</font></font><br>
<br>
<pre><code class="plaintext hljs">$wish tkfe_samplefull.tcl</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/mm/q8/btmmq8p2ktwttjdrecfzwj-tzf8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, the example clearly demonstrates all the features of the package. </font><font style="vertical-align: inherit;">For example, run Explorer to select a folder in a separate window: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uh/wl/rq/uhwlrqitkosfjnmw991xkr0bkgs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Explorer itself has an interface in two languages: Russian and English. </font><font style="vertical-align: inherit;">Translation is carried out on the fly when you click the button with the flag: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/bx/_s/k_bx_sdgpxsxmgkjtl2horlihti.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to the button with the flag, there is a button with tools (tools), when clicked, the context menu is displayed, what can be done in the current directory (create a directory / file) or with a selected file / folder ( delete / rename):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yf/4m/k3/yf4mk3cbnoh2hycyif16wko7lv4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Any of the functions of the file explorer returns the name (underlining - NAME) of the variable (see the tkfe_samplefull.tcl example), into which the path to the selected file or directory will be written, or which will be empty if the choice is refused. </font><font style="vertical-align: inherit;">After receiving the variable name, it remains to wait when any result is obtained, for example:</font></font><br>
<br>
<pre><code class="plaintext hljs"> . . .<font></font>
#   <font></font>
#   window -  ; frame -  <font></font>
set typew "window"<font></font>
#  <font></font>
 set msk "*.txt *.doc *.crt * .*"<font></font>
# <font></font>
set tekdir $env(HOME)<font></font>
#  <font></font>
 set vrr [FE::fe_getopenfile  $typew $w $tekdir $msk]<font></font>
# <font></font>
 vwait $vrr<font></font>
. . .</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you use the type of placement of the frame conductor, then you need to take care of its placement in your picture. Placement can be in any way (grid, pack or place). The preferred method is still the place method. You don‚Äôt have to worry about reformatting the image, since place, unlike grid and pack, allows you to overlay the frame on top of the existing image: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fq/yr/aw/fqyraw3k-aogscybc21eefie_we.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you carefully look at the image, you will notice that the right screenshot differs from the left by the appearance of hidden folders on it (names begin from the point). To show hidden buttons, you must enable the button with an eye-shaped icon. Folders and files can also be sorted alphabetically, and files by size:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sw/m0/rs/swm0rsrobmi2_1ljvopy4e2_3ks.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When the explorer is placed in the frame, you should also take care of blocking extraneous buttons (when the explorer is placed in the window, the tkfe balalaika takes care of this). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The tkfe package includes two functions that make widgets inaccessible (all_disable) or available (all_enable) within a given widget:</font></font><br>
<br>
<pre><code class="plaintext hljs">  proc all_disable {parent} {<font></font>
    set widgets [info commands $parent*]<font></font>
    foreach w $widgets {<font></font>
	catch {$w configure -state disabled}<font></font>
    }<font></font>
  }<font></font>
  proc all_enable {parent} {<font></font>
    set widgets [info commands $parent*]<font></font>
    foreach w $widgets {<font></font>
	catch {$w configure -state normal}<font></font>
    }<font></font>
  }<font></font>
  namespace export fe_getsavefile<font></font>
  namespace export fe_getopenfile<font></font>
  namespace export fe_choosedir<font></font>
  namespace export all_enable<font></font>
  namespace export all_disable</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, I prefer to use the tk busy features. This is clearly seen in the example: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8a/m7/92/8am792svnvujhw_hp4n5l8tjed4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is a theory. In practice, the tkfe package was used in cryptographic workstation based on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cryptoarmpkcs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> public key </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">standards</font></a><font style="vertical-align: inherit;"> . Now the use of the file explorer in this application for the Linux platform looks like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hh/pa/d-/hhpad-qjpcph54ma8x2zfksmncy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the explorer, located in the frame: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v0/27/eo/v027eoaash_x8njpe_op5b7f2uo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And, of course, it became very convenient to work with the explorer on the Android platform: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/n6/yw/cmn6ywtrymxafdz5jjp6b4coecm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Someone may ask: What about Windows or OS X? Yes, everything is great. But as always on Windows - this is the problem of Russification, in our case it is the use of the Cyrillic alphabet in naming files and folders, as well as the use of a backslash. Therefore, the following lines must be added to the code:</font></font><br>
<br>
<pre><code class="plaintext hljs">#    <font></font>
# MS Win    cp1251<font></font>
set tekdir [encoding convertfrom cp1251 $tekdir ]<font></font>
#       <font></font>
set tekdir [string map {"\\" "/"} $tekdir]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is what the tkfe explorer looks like on the Windows platform: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/om/yt/bpomyttxkuyi-n9aqqwddftqlvk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The package itself and examples of its use are </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497238/index.html">Making SQL Server and PerfMon Friends</a></li>
<li><a href="../en497240/index.html">Analysis of Baruch Sadogursky's report ‚ÄúDevOps for developers (or against them ?!)‚Äù</a></li>
<li><a href="../en497242/index.html">Homemade half mask respirator from improvised materials in 10 minutes</a></li>
<li><a href="../en497248/index.html">Microservices or modular systems? How can a customer choose an approach to the IT architecture of a product</a></li>
<li><a href="../en497254/index.html">Cisco HyperFlex: Launch, Configure, Cloud Integration - April 21-22</a></li>
<li><a href="../en497260/index.html">How Myst developers managed to fit the whole universe on one CD-ROM</a></li>
<li><a href="../en497264/index.html">Personalized interface. Part 2. Automatic navigation settings</a></li>
<li><a href="../en497268/index.html">The heading "Read articles for you." March 2020. Part 2</a></li>
<li><a href="../en497270/index.html">New reality. 2.5 million rubles online hackathon</a></li>
<li><a href="../en497272/index.html">Who is Seraphim? Or how to lose and win a hackathon at the same time</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>