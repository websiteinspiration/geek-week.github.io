<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö† üçô ü•£ Autenticaci√≥n en equipos de red a trav√©s de SSH usando claves p√∫blicas ‚õπÔ∏è ü§¶üèø üêõ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Por defecto, los ingenieros se conectan a los equipos de red utilizando un nombre de usuario y contrase√±a. A trav√©s de Telnet, las credenciales de los...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Autenticaci√≥n en equipos de red a trav√©s de SSH usando claves p√∫blicas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/490726/"><img src="https://habrastorage.org/webt/ss/yc/-o/ssyc-oz7kbnxgw-o4rmrcit6gsg.jpeg" alt="Mont√≥n de llaves"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por defecto, los ingenieros se conectan a los equipos de red utilizando un nombre de usuario y contrase√±a. </font><font style="vertical-align: inherit;">A trav√©s de Telnet, las credenciales de los usuarios se transmiten en texto claro y a trav√©s de SSH encriptadas. </font><font style="vertical-align: inherit;">Para no transmitir la parte secreta a trav√©s de la red, se utiliza la autenticaci√≥n de clave p√∫blica. </font><font style="vertical-align: inherit;">Con esta autenticaci√≥n, la clave p√∫blica del usuario se asigna previamente al usuario en el equipo. </font><font style="vertical-align: inherit;">La clave privada no se transmite a trav√©s de la red. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta gu√≠a lo ayudar√° a comenzar a usar r√°pidamente las claves p√∫blicas para la autenticaci√≥n al conectarse a equipos de red utilizando el protocolo SSH. </font><font style="vertical-align: inherit;">La gu√≠a es aplicable tanto para Windows como para Mac OS X. Trat√© de hacerlo lo m√°s simple e informativo posible. </font><font style="vertical-align: inherit;">No est√° sobrecargado, pero responde las preguntas b√°sicas:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øD√≥nde obtener la clave p√∫blica y c√≥mo usarla?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">         ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">           ?</a></li>
</ul><br>
<a name="habracut"></a><br>
<h2></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  RSA-</a><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> RSA-  SecureCRT</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> RSA-  PuTTYgen</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> RSA-   Putty Private Key (PuTTY)   OpenSSH (SecureCRT)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> RSA-   VanDyke Private Key (SecureCRT)   Putty Private Key (PuTTY)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    MAC OS X   </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cisco IOS XE, Catalyst (  15.1  ), IOS</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cisco ASA</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   Huawei</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Huawei USG (6000)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cisco Nexus 9.3</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">      SSH</a><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SecureCRT</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PuTTY</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MAC OS X</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">    SSH  MAC OS X:</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n examin√© los temas "doloridos":</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conversi√≥n de clave entre OpenSSH &lt;==&gt; SecureCRT &lt;==&gt; PuTTY.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uso de diferentes pares de claves p√∫blicas para diferentes equipos. </font><font style="vertical-align: inherit;">Una clave es buena, pero no aplicable en la realidad. </font><font style="vertical-align: inherit;">Los diferentes clientes o equipos requieren diferentes pares de claves p√∫blicas (algunas con contrase√±a y otras sin ella).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uso del MAC OS X nativo (nativo) para trabajar con claves p√∫blicas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La gu√≠a tambi√©n deber√≠a ayudar a usar Ansible con equipos de red, ya que Ansible usa OpenSSH con autenticaci√≥n de clave p√∫blica de forma predeterminada.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El 90% del material presentado se prueba en equipos reales.</font></font><br>
<br>
<a name="Introduction"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de la autenticaci√≥n de contrase√±a est√°ndar (contrase√±a / teclado) en el protocolo SSH, tambi√©n hay autenticaci√≥n de clave p√∫blica (RSA).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para referencia</font></font></b><div class="spoiler_text">RSA (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://ru.wikipedia.org/wiki/RSA</a>) ‚Äî     .     (public key)     (private key).        :            .         .         ,       ,        .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La autenticaci√≥n mediante claves RSA consta de varios pasos: </font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear un par de claves RSA.</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalaci√≥n de una clave p√∫blica en el equipo.</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexi√≥n al equipo y autenticaci√≥n mediante una clave RSA.</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© solo RSA? </font><font style="vertical-align: inherit;">¬øPor qu√© no un DSA? </font><font style="vertical-align: inherit;">Desafortunadamente, no encontr√© la respuesta a esta pregunta (y realmente no la busqu√©). </font><font style="vertical-align: inherit;">Pero oficialmente, solo RSA es compatible con los equipos de Cisco. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gu√≠a de configuraci√≥n de Secure Shell, Cisco IOS Release 15E:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secure Shell Configuration Guide, Cisco IOS Release 15E </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Restrictions for Secure Shell Version 2 Support </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rivest, Shamir y Adleman (RSA) Generaci√≥n de claves es un requisito del lado del servidor SSH. </font><font style="vertical-align: inherit;">Los dispositivos que act√∫an como clientes SSH no necesitan generar claves RSA.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intentando ingresar datos clave de DSA:</font></font><br>
<br>
<pre><code class="plaintext hljs">CSR-1(conf-ssh-pubkey-data)#exit<font></font>
%SSH: Only ssh-rsa type is supported<font></font>
CSR-1(conf-ssh-pubkey-user)#<font></font>
</code></pre><br>
<a name="CreatePublicKey"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear una clave RSA p√∫blica</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se pueden crear un par de claves RSA utilizando diversas utilidades: SecureCRT, PuTTYgen o cualquier otro software. </font><font style="vertical-align: inherit;">Al crear una clave, puede configurar Passphrase (protecci√≥n de contrase√±a con una clave).</font></font><br>
<br>
<a name="CreatePublicKeySecureCRT"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generaci√≥n de pares RSA en SecureCRT</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRT -&gt; Herramientas -&gt; Crear clave p√∫blica ...:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2m/xb/eb/2mxbeb3d8sc8thocdojacrzizn4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un poco de teor√≠a ‚Üí el bot√≥n "Siguiente&gt;":</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wv/ii/ze/wviize2n_5dkko4v4kpyxkkwzty.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipo de certificado RSA / DSA ‚Üí Seleccione RSA ‚Üí bot√≥n "Siguiente&gt;":</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rs/le/ni/rslenitclgxtobzvsz_ulj39q_c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrase√±a de cifrado para la clave secreta (opcional, puede dejarla en blanco y no cifrar) + Comentario ‚Üí bot√≥n "Siguiente&gt;":</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/q7/_q/5v/q7_q5vwtmmpbeszmxkizeuznul4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elija la longitud de la clave (en SecureCRT versi√≥n 6.1.0 la longitud m√°xima de la clave es 2048 bits, en la versi√≥n 8.5.4 - 16 384 bits):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/q5/qm/zg/q5qmzgg_hzzlyg_q0qvobcddkd4.png"></div><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generaci√≥n de </font><font style="vertical-align: inherit;">
teclas ‚Üí bot√≥n "Siguiente&gt;": </font><font style="vertical-align: inherit;">para generar n√∫meros aleatorios, debe mover el mouse dentro de la ventana.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wf/w8/dh/wfw8dhn0tsfuj8nkdfprxdsjpxk.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aw/yj/cs/awyjcsqvlbd_6tapahm4twq8kj4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Guardar un par de claves ‚Üí Seleccionar una ubicaci√≥n de almacenamiento ‚Üí Seleccionar un formato para una clave guardada (formato VanDuke Private, OpenSSH legacy, OpenSSH new) ‚Üí Bot√≥n ‚ÄúFinalizar‚Äù: </font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9n/ts/3s/9nts3s5p5bnfiz14nwmlo59eva4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kq/pw/dv/kqpwdvana4ytrh1wjrzbdtjegzu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRT pregunta si hacer que esta clave sea la clave predeterminada para SecureCRT:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zl/pa/iv/zlpaiv_a3gr6noc5hppfx-1vpoq.png"></div><br>
<a name="CreatePublicKeyPuttygen"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generaci√≥n de pares RSA en PuTTYgen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede descargar PuTTYgen aqu√≠: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lanzamiento de PuTTYgen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_l/wi/fo/_lwifoh8tblsbyjqqft_7ooyofu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccione los par√°metros (tipo de par: RSA; dimensi√≥n del bit de clave: 2048; opcionalmente, configure la frase de contrase√±a (protecci√≥n de contrase√±a con contrase√±a)) ‚Üí Generar:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/b3/dw/d0/b3dwd0xoppidkvcjqwzont-kxj0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para garantizar n√∫meros aleatorios, pide mover el mouse dentro de la ventana. </font><font style="vertical-align: inherit;">Esta es una protecci√≥n contra n√∫meros pseudoaleatorios.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/0a/vq/ee0avqbadgo1s4r8ir21kchtuoa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Guardar claves RSA ‚Üí bot√≥n "Guardar clave privada":</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/l-/qa/fpl-qavfk_rncnkpey7leotfaqe.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta: las claves RSA almacenadas en un formato privado en un software no pueden utilizarse en software de otro fabricante. </font><font style="vertical-align: inherit;">Es decir, un par de claves RSA creadas en PuTTYgen y guardadas en formato de clave privada Putty no es adecuado para su uso en SecureCRT, y viceversa. </font><font style="vertical-align: inherit;">PuTTY solo admite el formato Putty Private Key. </font><font style="vertical-align: inherit;">Una soluci√≥n universal para distribuir claves es convertir las claves al formato OpenSSH (Ver enlace 2: ‚ÄúConversi√≥n de Putty a SecureCRT con claves de autenticaci√≥n‚Äù). </font><font style="vertical-align: inherit;">Dado que SecureCRT funciona libremente con el formato OpenSSH. </font><font style="vertical-align: inherit;">Y el software PuTTYgen convierte el formato OpenSSH en el formato Putty Private Key.</font></font><br>
<br>
<a name="ConvertPPKtoOpenSSH"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conversi√≥n de una clave RSA del formato Putty Private Key (PuTTY) al formato OpenSSH (SecureCRT)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar claves RSA en SecureCRT que se generan en PuTTYgen y se guardan en formato de Clave privada de Putty (* .ppk), las exportamos usando PuTTYgen en el formato OpenSSH:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lanzamiento de PuTTYgen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cargamos la clave RSA existente en el formato Putty Private Key (* .ppk) ‚Üí El bot√≥n "Cargar".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guarde el archivo de clave p√∫blica ‚Üí "Guardar clave p√∫blica".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exportamos la clave secreta al formato OpenSSH: men√∫ PuTTYgen ‚Üí ‚ÄúConversiones‚Äù ‚Üí ‚ÄúExportar clave OpenSSH‚Äù.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usamos archivos OpenSSH en SecureCRT. </font><font style="vertical-align: inherit;">El archivo con la clave p√∫blica tiene la extensi√≥n .pub, el archivo con la clave privada no tiene extensi√≥n.</font></font></li>
</ol><br>
<a name="ConvertVanDykePrivateKeyToPPK"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conversi√≥n de una clave RSA del formato VanDyke Private Key (SecureCRT) al formato Putty Private Key (PuTTY)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar claves RSA en PuTTY que se generan en SecureCRT y se guardan en el formato de clave privada VanDyke (archivo de clave p√∫blica * .pub, archivo de clave secreta *. (Sin extensi√≥n)), exp√≥rtelos usando SecureCRT en formato OpenSSH y luego usando PuTTYgen exportamos al formato de clave privada de masilla (* .ppk):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicie SecureCRT.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Men√∫ "Herramientas" ‚Üí "Convertir clave privada a formato OpenSSH ..."</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seleccione el archivo fuente con las teclas VanDyke Private Key.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guardamos las claves OpenSSH con un nuevo nombre.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lanzamiento de PuTTYgen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cargamos la clave RSA existente en el formato OpenSSH (*.): Men√∫ PuTTYgen ‚Üí ‚ÄúConversiones‚Äù ‚Üí ‚ÄúImportar clave‚Äù.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guarde el archivo en formato Putty: "Guardar clave privada".</font></font></li>
</ol><br>
<a name="CreatePublicKeyMacOSX"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generando claves p√∫blicas en MAC OS X usando el sistema operativo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilizaremos la utilidad ssh-keygen incorporada (man ssh-keygen). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generamos una clave RSA con una longitud de 2048 bits con el nombre de la clave, la ruta a la carpeta con la ubicaci√≥n de almacenamiento de la clave:</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh-keygen -b 2048 -t rsa -c "Lab router R4" -f /Users/ArtemiySP/Documents/python/r4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tiempo de ejecuci√≥n, el programa solicitar√° una contrase√±a para proteger la clave RSA:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 2048 -t rsa -C "Lab router R4" -f /Users/ArtemiySP/Documents/python/r4<font></font>
Generating public/private rsa key pair.<font></font>
Enter passphrase (empty for no passphrase): <font></font>
Enter same passphrase again: <font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r4.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r4.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:WdT47SFvgGI7danxX94p8/cO3uyU12SB3ipkc7nHxzA Lab router R4<font></font>
The key's randomart image is:<font></font>
+---[RSA 2048]----+<font></font>
|          .o     |<font></font>
|         .. . .  |<font></font>
|          .o + . |<font></font>
|        oo+ B = .|<font></font>
|       .S+ O OEoo|<font></font>
|        o + + B*+|<font></font>
|         . . =.*O|<font></font>
|            .+o**|<font></font>
|              =+O|<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generamos una clave RSA con una longitud de 4096 bits para indicar el nombre de la clave, la ruta a la carpeta con la ubicaci√≥n de almacenamiento de claves, establecemos la contrase√±a expl√≠citamente en los par√°metros de generaci√≥n de claves (-N "cisco"):</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 4096 -t rsa -C "Lab router R5" -N "cisco" -f /Users/ArtemiySP/Documents/python/r5<font></font>
Generating public/private rsa key pair.<font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r5.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r5.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:NraLRMqB4qmA8qNjKdpBBt1JBw8Osf/3GfuB2k1R+zY Lab router R5<font></font>
The key's randomart image is:<font></font>
+---[RSA 4096]----+<font></font>
|  o.+..          |<font></font>
| . * =           |<font></font>
|. o + .       .  |<font></font>
| . o         . . |<font></font>
|. + o . S   . .  |<font></font>
|o+.. = o o . . . |<font></font>
|+oo o o o o o  Eo|<font></font>
|*=.. . o = * . ..|<font></font>
|Boo.  . o =.o    |<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par√°metros de generaci√≥n de claves que no se recomiendan: una clave poco confiable con una longitud de 1024 bits, que especifica el nombre de la clave, la ruta a la carpeta con la ubicaci√≥n de almacenamiento de claves, establecemos la contrase√±a expl√≠citamente en los par√°metros de generaci√≥n de claves (-N "" - sin contrase√±a):</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 1024 -t rsa -C "Lab router R6" -N "" -f /Users/ArtemiySP/Documents/python/r6<font></font>
Generating public/private rsa key pair.<font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r6.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r6.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:LEcfgN+58TYMDv4MpBA2FGCWc2aFiY+SxWBf7pRViWs Lab router R6<font></font>
The key's randomart image is:<font></font>
+---[RSA 1024]----+<font></font>
|.++=o*.o+..      |<font></font>
|.oB % +. o       |<font></font>
| o X * .o...     |<font></font>
|o . =  E+.=.     |<font></font>
| .   oo+So.*     |<font></font>
|      .oo o =    |<font></font>
|         + . .   |<font></font>
|          o      |<font></font>
|                 |<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, creamos tres claves con los nombres de las claves y la ubicaci√≥n de las claves (de forma predeterminada, todas las claves se almacenan en / Users / [Username 022 / .ssh). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De forma predeterminada, cuando se conecta a trav√©s de SSH con autenticaci√≥n con una clave p√∫blica, todas las claves p√∫blicas se almacenan en secuencia, que se almacenan en la carpeta /Users/[Username‚Ä†/.ssh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clave R6: cambie el nombre de la clave a "id_rsa" (de forma predeterminada, el nombre del archivo de clave generado es "id_rsa") y transfi√©rala a la carpeta con las claves SSH (~ / .ssh /) (es decir, realizaremos todos los pasos para que la clave R6 se utilice como principal clave de conexi√≥n SSH predeterminada): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Convierta la clave p√∫blica OpenSSH al formato RFC4716 (exportar a Cisco IOS):</font></font><br>
<br>
<pre><code class="plaintext hljs">https://serverfault.com/questions/706336/how-to-get-a-pem-file-from-ssh-key-pair<font></font>
ssh-keygen -f ~/Documents/python/r4.pub -e -m RFC4716<font></font>
ssh-keygen -f ~/Documents/python/r5.pub -e -m RFC4716<font></font>
ssh-keygen -f ~/.ssh/id_rsa.pub -e -m RFC4716<font></font>
</code></pre><br>
<a name="ConfigureKeyAtHardware"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usar una clave p√∫blica en el equipo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© hay de varios equipos para vincular una clave p√∫blica a un usuario? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de vincular una clave p√∫blica a un usuario no es est√°ndar y var√≠a de un equipo a otro, por lo tanto, se dan ejemplos para cada tipo de equipo que se usa con mayor frecuencia en la red.</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareCiscoIOS"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco IOS XE, Catalyst (desde la versi√≥n 15.1 y superior), IOS </font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya hay un usuario en el dispositivo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la configuraci√≥n de SSH (ip ssh pubkey-chain) para el usuario (nombre de usuario cisco), especifique la clave p√∫blica (key-string):</font></font><br>
<pre><code class="plaintext hljs">CSR-1#conf t<font></font>
Enter configuration commands, one per line.  End with CNTL/Z.<font></font>
CSR-1(config)#ip ssh pubkey-chain <font></font>
CSR-1(conf-ssh-pubkey)#username ssh-putty<font></font>
CSR-1(conf-ssh-pubkey-user)#key-string <font></font>
CSR-1(conf-ssh-pubkey-data)#$QAAAQEAnPbynT1+2rjlyqP4viSPdTVDFLSHzWjJnAwy     <font></font>
CSR-1(conf-ssh-pubkey-data)#$NCfaqvMTPruCgG5096q8lO0ntURmNgmfMEQPOgb8weF     <font></font>
CSR-1(conf-ssh-pubkey-data)#$AtMQYk7WFM+5iBnOQ32UAHNavCUA7YFEpAdOQO4W/qB     <font></font>
CSR-1(conf-ssh-pubkey-data)#$SlOLy+PQ47jDUINBnuUeHd8ZXyzXxWglzSvqtwMEXBW     <font></font>
CSR-1(conf-ssh-pubkey-data)#$VoUTBYbJ45DmFa93P50qf494ujaAsTbYyJ/GBzJUTK/     <font></font>
CSR-1(conf-ssh-pubkey-data)#$UADAkNGxQARfOfHZWiIYb3rif6h6hfwwVUZS/Tw==       <font></font>
CSR-1(conf-ssh-pubkey-data)#exit<font></font>
CSR-1(conf-ssh-pubkey-user)#exit<font></font>
CSR-1(conf-ssh-pubkey)#exit<font></font>
CSR-1(config)#exit<font></font>
CSR-1#exit<font></font>
<font></font>
CSR-1#show running-config | inc ssh<font></font>
username ssh-public-key secret 5 $1$ebjc$EYgwMFQXPPiywFVn6rl7t.<font></font>
username ssh-putty privilege 15 secret 5 $1$vIhh$nM8iCeBKmLyVK4hA6./h4.<font></font>
ip ssh pubkey-chain<font></font>
   key-hash ssh-rsa D4E9AD62F7F6265EAAB3FB8778477612<font></font>
  username ssh-public-key<font></font>
   key-hash ssh-rsa C331DEE821A84681A4A7B1862C100D16<font></font>
  username ssh-putty<font></font>
   key-hash ssh-rsa F32BEB60290EA75D151447C0D42D2A99<font></font>
   key-hash ssh-rsa 5432C275B363B646E02D3BA7E8D865B7<font></font>
CSR-1#<font></font>
</code></pre></li>
</ol><br>
<a name="ConfigureKeyAtHardwareCiscoASA"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco ASA</font></font></h3><br>
<pre><code class="plaintext hljs">LAB-ASA5516-X-01/pri/act# conf t<font></font>
LAB-ASA5516-X-01/pri/act(config)# username artemiy password artemiy privilege $<font></font>
LAB-ASA5516-X-01/pri/act(config)# username artemiy attributes <font></font>
LAB-ASA5516-X-01/pri/act(config-username)# ssh authentication publickey ?<font></font>
<font></font>
username mode commands/options:<font></font>
  WORD  Raw SSH-RSA public key<font></font>
LAB-ASA5516-X-01/pri/act(config-username)# ssh authentication publickey AAAAB3$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insertamos la clave completa en una l√≠nea (formato OpenSSH).</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareHuaweiRouter"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enrutadores y conmutadores Huawei</font></font></h3><br>
<pre><code class="plaintext hljs">[R1]rsa peer-public-key test-key1 encoding-type pem <font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
NOTE: The number of the bits of public key must be between 769 and 2048.<font></font>
[R1-rsa-public-key]public-key-code begin <font></font>
Enter "RSA key code" view, return last view with "public-key-code end".<font></font>
[R1-rsa-key-code]---- BEGIN SSH2 PUBLIC KEY ----<font></font>
[R1-rsa-key-code]Subject: Subject<font></font>
[R1-rsa-key-code]Comment: " Subject@Subject.local"<font></font>
[R1-rsa-key-code]ModBitSize: 2048<font></font>
[R1-rsa-key-code]AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
[R1-rsa-key-code]lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
[R1-rsa-key-code]63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
[R1-rsa-key-code]2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
[R1-rsa-key-code]yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
[R1-rsa-key-code]VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
[R1-rsa-key-code]---- END SSH2 PUBLIC KEY ----<font></font>
[R1-rsa-key-code]public-key-code end<font></font>
[R1-rsa-public-key]peer-public-key end <font></font>
[R1]display rsa peer-public-key <font></font>
<font></font>
=====================================<font></font>
    Key name: test-key1<font></font>
=====================================<font></font>
Key Code:<font></font>
---- BEGIN SSH2 PUBLIC KEY ----<font></font>
AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
---- END SSH2 PUBLIC KEY ----<font></font>
aaa<font></font>
local-user jet privilege level 15<font></font>
 local-user jet service-type telnet terminal ssh http<font></font>
ssh user jet assign rsa-key test-key1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipos de formatos de clave importados a Huawei: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"SecureCRT y PuTTY generan claves RSA en formato PEM".</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type pem</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"OpenSSH genera claves RSA en formato OpenSSH".</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type openssh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"El OpenSSL genera claves RSA en formato DER".</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type der</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El valor predeterminado es en hexadecimal:</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nota: El equipo Huawei no solo admite claves en formato RSA, sino tambi√©n otros formatos:</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh user user-name assign { rsa-key | dsa-key | ecc-key } key-name</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede establecer r√≠gidamente el tipo de autenticaci√≥n para el usuario a trav√©s de SSH:</font></font><br>
<br>
<pre><code class="plaintext hljs">[R1]ssh user jet authentication-type ?<font></font>
  all           All authentication, password,RSA or ECC<font></font>
  ecc           ECC authentication<font></font>
  password      Password authentication<font></font>
  password-ecc  Both password and ECC<font></font>
  password-rsa  Both password and RSA<font></font>
  rsa           RSA authentication<font></font>
[R1]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, permitimos el acceso mediante una contrase√±a, claves p√∫blicas y privadas, o ambas.</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareHuaweiUSG"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei USG (6000)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuraci√≥n es completamente similar a la configuraci√≥n del enrutador, pero tiene algunas caracter√≠sticas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De forma predeterminada, el nivel de privilegio despu√©s de iniciar sesi√≥n con certificados es 0 y no se puede elevar. </font><font style="vertical-align: inherit;">Por lo tanto, el nivel de prioridad se establece usando</font></font><br>
<br>
<pre><code class="plaintext hljs">user-interface vty 0 4 <font></font>
user privilege level 15<font></font>
user-interface vty 16 20:<font></font>
user privilege level 15<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo:</font></font><br>
<br>
<pre><code class="plaintext hljs">[USG-a]rsa peer-public-key test-key1 encoding-type pem <font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
[USG-a-rsa-public-key]public-key-code begin<font></font>
Enter "RSA key code" view, return last view with "public-key-code end".<font></font>
[USG-a-rsa-key-code]---- BEGIN SSH2 PUBLIC KEY ----<font></font>
[USG-a-rsa-key-code]Subject: subject<font></font>
[USG-a-rsa-key-code]Comment: " subject@subject.local"<font></font>
[USG-a-rsa-key-code]ModBitSize: 2048<font></font>
[USG-a-rsa-key-code]AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
[USG-a-rsa-key-code]lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
[USG-a-rsa-key-code]63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
[USG-a-rsa-key-code]2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
[USG-a-rsa-key-code]yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
[USG-a-rsa-key-code]VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
[USG-a-rsa-key-code]---- END SSH2 PUBLIC KEY ----<font></font>
[USG-a-rsa-key-code]public-key-code end<font></font>
[USG-a-rsa-public-key]peer-public-key end<font></font>
[USG-a]<font></font>
[USG-a]ssh user admin assign rsa-key test-key1<font></font>
! Out-of-band management interface:<font></font>
[USG-a-GigabitEthernet0/0/0]service-manage ssh permit<font></font>
! Grant user level 15 privillege:<font></font>
[USG-a]user-interface vty 0 4<font></font>
[USG-a-ui-vty0-4]user privilege level 15<font></font>
</code></pre><br>
<a name="ConfigureKeyAtHardwareCiscoNexus"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco Nexus 9.3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opci√≥n 1: preinstale el archivo de clave p√∫blica en el dispositivo y adjunte el archivo de clave p√∫blica al usuario.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copie el archivo de clave p√∫blica en el dispositivo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le indicamos al usuario que use el archivo de clave p√∫blica.</font></font></li>
</ul><br>
<pre><code class="plaintext hljs">switch# copy tftp://10.10.1.1/secsh_file.pub bootflash:secsh_file.pub<font></font>
username User1 sshkey file bootflash:secsh_file.pub<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opci√≥n 2: copie la clave p√∫blica al usuario:</font></font><br>
<br>
<pre><code class="plaintext hljs">username User1 sshkey<font></font>
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnxlTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZayI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTPVdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
</code></pre><br>
<a name="ConfigureSoftwareToUsePublicKey"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando una clave secreta para la conexi√≥n SSH</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta secci√≥n est√° dedicada a la configuraci√≥n de clientes SSH para la autenticaci√≥n utilizando claves RSA en el equipo de red (u otro equipo, siempre que el hardware y el software admitan la autenticaci√≥n de clave p√∫blica). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideraremos configurar el uso de la clave p√∫blica en los programas m√°s populares: SecureCRT y PuTTY.</font></font><br>
<br>
<a name="ConfigureSoftwareToUsePublicKeySecureCRT"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecureCRT</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay una lista de autenticaci√≥n en la ventana de configuraci√≥n de SSH. </font><font style="vertical-align: inherit;">En √©l, debe aumentar la prioridad de PublicKey a la m√°s alta: situarla en la parte superior de la lista.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l-/ke/z4/l-kez4rg6qpuyslsuv3nmt_dti4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/jh/ah/xijhahjlx-hq9m52ugqyih0qrwi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego vaya a las opciones de PublicKey y seleccione el archivo de clave privada. </font><font style="vertical-align: inherit;">El interruptor superior le permite usar la configuraci√≥n global de la clave secreta o la configuraci√≥n de la sesi√≥n (otra clave secreta (clave no predeterminada)) solo para esta conexi√≥n.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ub/js/xd/ubjsxdlmflzod5cfguosfwuqiqi.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/og/pv/ys/ogpvysr3cvrk7aliad5qxeg3jp0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configure la clave p√∫blica global: en el men√∫ Opciones ‚Üí Opciones globales ‚Üí Categor√≠a SSH2.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0m/yd/dg/0myddgh9flvk10qrh8pixuphke8.png"></div><br>
<a name="ConfigureSoftwareToUsePublicKeyPutty"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masilla</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la configuraci√≥n de SSH (Conexi√≥n ‚Üí SSH ‚Üí Auth) en el campo ‚ÄúArchivo de clave privada para autenticaci√≥n‚Äù, especifique el archivo Clave privada de masilla (* .ppk):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xm/wu/tp/xmwutpoyrfibggfiqssajegtyq0.png"></div><br>
<a name="ConfigureSoftwareToUsePublicKeyMacOSX"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAC OS X</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurar un cliente est√°ndar para usar claves p√∫blicas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexi√≥n con una clave no predeterminada especificada manualmente:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r4@10.31.73.29 -i ~/Documents/python/r4<font></font>
The authenticity of host '10.31.73.29 (10.31.73.29)' can't be established.<font></font>
RSA key fingerprint is SHA256:fxOLFKU6YGyIqisrIh2P0O52Rr6Wx/wsSAcHsTz8fo0.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.29' (RSA) to the list of known hosts.<font></font>
CSR-4#<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexi√≥n con una clave no predeterminada especificada manualmente:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r5@10.31.73.30 -i ~/Documents/python/r5<font></font>
The authenticity of host '10.31.73.30 (10.31.73.30)' can't be established.<font></font>
RSA key fingerprint is SHA256:4l67C4Il4pTaqYT4vrtWr0aY7rPmNWKsjRv2zlYtQIU.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.30' (RSA) to the list of known hosts.<font></font>
MGTU#exit<font></font>
Connection to 10.31.73.30 closed.<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Error de ejemplo</font></font></b><div class="spoiler_text">        ‚Äî      .     MAC OS X ‚Äî     .<br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexi√≥n con la clave predeterminada (clave predeterminada: el sistema mismo buscar√° y utilizar√° la clave p√∫blica predeterminada):</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r6@10.31.73.31<font></font>
The authenticity of host '10.31.73.31 (10.31.73.31)' can't be established.<font></font>
RSA key fingerprint is SHA256:2/ysACJQw48Q8S45ody4wna+6nJspcsEU558HiUN43Q.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.31' (RSA) to the list of known hosts.<font></font>
PR#exit<font></font>
Connection to 10.31.73.31 closed.<font></font>
artemiy-2:~ ArtemiySP$ <font></font>
</code></pre></li>
</ul><br>
<a name="MacOSXUseSSH"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥mo simplificar el trabajo con SSH en MAC OS X:</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear alias SSH.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En SSH Alias, configuramos inmediatamente a los usuarios.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registre inmediatamente la ubicaci√≥n de las claves.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La ubicaci√≥n de los alias y la configuraci√≥n SSH preconfigurada se especifican en el archivo ~ / .ssh / config (/Users/[Username‚Ä†/.ssh/config). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Llenado de esta manera:</font></font><br>
<br>
<pre><code class="plaintext hljs">host r4<font></font>
   Hostname 10.31.73.29<font></font>
   Port 22<font></font>
   User r4<font></font>
   IdentityFile ~/Documents/python/r4<font></font>
<font></font>
host r5<font></font>
   Hostname 10.31.73.30<font></font>
   Port 22<font></font>
   User r5<font></font>
   IdentityFile ~/Documents/python/r5<font></font>
<font></font>
host r6<font></font>
   Hostname 10.31.73.31<font></font>
   Port 22<font></font>
   User r6<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nota: mi conexi√≥n predeterminada est√° configurada incorrectamente (no s√© c√≥mo hacerlo correctamente), porque la conexi√≥n al host R6 (10.31.73.31) lleva mucho tiempo. </font><font style="vertical-align: inherit;">Se recomienda que especifique inmediatamente la ruta a la clave predeterminada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de una conexi√≥n ssh usando claves p√∫blicas y un archivo de configuraci√≥n:</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Documents ArtemiySP$ ssh r5<font></font>
MGTU#exit<font></font>
Connection to 10.31.73.30 closed by remote host.<font></font>
Connection to 10.31.73.30 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r4<font></font>
CSR-4#exit<font></font>
Connection to 10.31.73.29 closed by remote host.<font></font>
Connection to 10.31.73.29 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r6<font></font>
PR#exit<font></font>
Connection to 10.31.73.31 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r6<font></font>
PR#<font></font>
</code></pre><br>
<a name="finale"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las claves RSA se pueden usar para reemplazar la autenticaci√≥n de contrase√±a, pero no en todos los casos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La autenticaci√≥n de clave p√∫blica no es posible si la autenticaci√≥n de dominio est√° configurada (porque las solicitudes LDAP (kerberos) al servidor est√°n representadas para la autenticaci√≥n).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La autenticaci√≥n de clave p√∫blica en equipos de red antiguos no es posible (ejemplo: no se pudo configurar en Cisco Catalyst 2960 con firmware 12.2).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las claves p√∫blicas protegidas con contrase√±a se utilizan convenientemente en equipos de banco. Desventaja: es necesario enviar un mont√≥n de claves privadas y p√∫blicas a colegas y socios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En algunos equipos, varios pares de claves p√∫blicas pueden corresponder a un usuario, en otros equipos solo una clave p√∫blica corresponde a un usuario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n hay diferentes formatos en los que se almacena un par de claves p√∫blicas y privadas. Pero esta gu√≠a lo ayudar√° a exportar claves en diferentes formatos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoy en d√≠a, es √≥ptimo usar claves con una longitud de 2048 bits, pero para algunos equipos esta es la longitud m√°xima posible de la clave (tal vez esto se arregle en un nuevo firmware). Por ejemplo:</font></font><br>
<br>
<pre><code class="plaintext hljs">[R1]rsa peer-public-key test-key2 encoding-type pem<font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
NOTE: The number of the bits of public key must be between 769 and 2048.<font></font>
[R1-rsa-public-key]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se recomienda utilizar claves p√∫blicas para reemplazar las contrase√±as si se ingresan mediante scripts (por ejemplo: inicio de sesi√≥n autom√°tico en SecureCRT). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se recomienda que utilice claves p√∫blicas para protegerse contra la transmisi√≥n de contrase√±as a trav√©s de la red. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunos programas usan claves p√∫blicas de manera predeterminada para la autenticaci√≥n SSH en lugar de una contrase√±a (ejemplo: Ansible).</font></font><br>
<br>
<a name="ListOfSources"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de fuentes:</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia RSA</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conversi√≥n de Putty a SecureCRT con autenticaci√≥n. </font><font style="vertical-align: inherit;">llaves, foro SecureCRT</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gu√≠a de configuraci√≥n de Secure Shell, Cisco IOS Release 15E</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descargar PuTTYgen</font></font></a></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentaci√≥n oficial de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Huawei </font><font style="vertical-align: inherit;">: una descripci√≥n de los diversos formatos clave para importar a un enrutador Huawei</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei USG 6000, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n de autenticaci√≥n de clave p√∫blica</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (CLI: ejemplo para iniciar sesi√≥n en la CLI mediante STelnet (autenticaci√≥n RSA))</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Nexus 9000 Configuration guide SSH public key</a></li>
<li>man ssh-keygen ‚Äî      mac os x.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SSH config file  MAC OS X</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">       SSH</a> </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">       SSH config</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  openssh public key   RFC4716</a></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es490714/index.html">C√≥mo obtener 100 mil por c√≥digo. Gu√≠a completa para principiantes</a></li>
<li><a href="../es490716/index.html">¬øC√≥mo garantizar el funcionamiento de alta calidad de la red local de una peque√±a empresa?</a></li>
<li><a href="../es490718/index.html">¬øQu√© es el "c√≥digo limpio" en 2020?</a></li>
<li><a href="../es490720/index.html">¬°Motor! o ¬øQu√© es la f√≠sica del juego?</a></li>
<li><a href="../es490722/index.html">Vacaciones de g√©nero en TI. C√≥mo anotar</a></li>
<li><a href="../es490728/index.html">Semana de la Seguridad 10: Conferencia RSA y Conciencia de Ciberseguridad</a></li>
<li><a href="../es490730/index.html">Intel x86 Root of Trust: p√©rdida de confianza</a></li>
<li><a href="../es490732/index.html">Reconocimiento de voz: un curso introductorio muy corto</a></li>
<li><a href="../es490734/index.html">Huevos de Pascua en mapas topogr√°ficos de Suiza</a></li>
<li><a href="../es490736/index.html">9 herramientas claras para aprender y aprender vocabulario en ingl√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>