<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪🏽 ⏸️ 🤰🏿 Integrasi sederhana RabbitMQ dan Spring Boot 🐣 🧑🏿‍🤝‍🧑🏼 🏴󠁧󠁢󠁷󠁬󠁳󠁿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Terjemahan artikel disiapkan sebelum dimulainya kursus "Pengembang Kerangka Kerja Musim Semi" .
 
 
 
 Halo semuanya! 
 
 Saya ingin berbagi dengan An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Integrasi sederhana RabbitMQ dan Spring Boot</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/500936/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terjemahan artikel disiapkan sebelum dimulainya kursus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pengembang Kerangka Kerja Musim Semi"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/yc/3k/dp/yc3kdpwvkd25ltyl0y2e41jwvsk.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Halo semuanya! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya ingin berbagi dengan Anda </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pustaka sumber terbuka</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang memfasilitasi integrasi RabbitMQ dengan aplikasi di Spring Boot. </font><font style="vertical-align: inherit;">Selain itu, perpustakaan ini menawarkan konsep retries baru yang ditingkatkan (dibandingkan dengan pendekatan AMQP Musim Semi standar).</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disederhanakan? </font><font style="vertical-align: inherit;">Tapi bagaimana caranya?</font></font></blockquote><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasi otomatis</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan kita ingin menerapkan interaksi (misalnya, menggunakan SSL) dengan RabbitMQ menggunakan Spring AMQP. </font><font style="vertical-align: inherit;">Kita perlu membuat beberapa kacang-kacangan, seperti </font></font><code>ConnectionFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>RabbitAdmin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>RabbitTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>AbstractRabbitListenerContainerFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi bayangkan ada beberapa host virtual di RabbitMQ. </font><font style="vertical-align: inherit;">Secara default, di Spring AMQP, Anda perlu membuat ekosistem seperti itu untuk setiap host virtual dengan konfigurasi manual </font></font><code>RabbitTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>RabbitListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jl/zr/hs/jlzrhsbdrmwg9oqcmv-hc4hlbjg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, semua konfigurasi ini membutuhkan waktu dan dapat menjadi sakit kepala. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sadar akan masalah ini, perpustakaan yang diusulkan secara otomatis mengonfigurasi semua kacang ini untuk Anda. </font><font style="vertical-align: inherit;">Satu-satunya hal yang perlu Anda lakukan adalah menentukan konfigurasi </font></font><b><code>application.properties</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan sihir akan terjadi!</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wow, tapi seperti apa konfigurasi itu </font></font><code><b>application.properties</b></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya sangat sederhana. </font><font style="vertical-align: inherit;">Pertama, ada awalan untuk properti - ini </font></font><b><code>spring.rabbitmq.custom</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, Anda harus menentukan nama acara. </font><font style="vertical-align: inherit;">Ini adalah bagian yang sangat penting, karena semua pengaturan yang dibuat perpustakaan didasarkan pada nama ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah nama acara, Anda dapat menentukan properti dan nilainya. </font><font style="vertical-align: inherit;">Semua properti dijelaskan dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, templatnya adalah sebagai berikut: </font><font style="vertical-align: inherit;">
Di bawah ini adalah contoh konfigurasi untuk dua koneksi yang berbeda.</font></font><br>
<br>
<code><code>spring.rabbitmq.custom.&lt;</code>YOUR_EVENT&gt;.<code>&lt;</code>PROPERTY&gt;=<code>&lt;</code>VALUE&gt;<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="java hljs">spring.rabbitmq.custom.some-event.host=localhost<font></font>
spring.rabbitmq.custom.some-event.port=<span class="hljs-number">5672</span>
spring.rabbitmq.custom.some-event.ttlRetryMessage=<span class="hljs-number">5000</span>
spring.rabbitmq.custom.some-event.maxRetriesAttempts=<span class="hljs-number">5</span>
spring.rabbitmq.custom.some-event.ttlMultiply=<span class="hljs-number">2</span><font></font>
spring.rabbitmq.custom.some-event.queueRoutingKey=ROUTING.KEY.TEST<font></font>
spring.rabbitmq.custom.some-event.exchange=ex.custom.direct<font></font>
spring.rabbitmq.custom.some-event.exchangeType=direct<font></font>
spring.rabbitmq.custom.some-event.queue=queue.custom.test<font></font>
spring.rabbitmq.custom.some-event.autoCreate=<span class="hljs-keyword">true</span>
spring.rabbitmq.custom.some-event.concurrentConsumers=<span class="hljs-number">1</span>
spring.rabbitmq.custom.some-event.maxConcurrentConsumers=<span class="hljs-number">1</span><font></font>
spring.rabbitmq.custom.some-event.virtualHost=tradeshift<font></font>
spring.rabbitmq.custom.some-event.primary=<span class="hljs-keyword">true</span>
spring.rabbitmq.custom.some-event.sslConnection=<span class="hljs-keyword">true</span>
spring.rabbitmq.custom.some-event.tlsKeystoreLocation=file:<span class="hljs-comment">///etc/tradeshift/your-service/tls-keystore.pkcs12</span><font></font>
spring.rabbitmq.custom.some-event.tlsKeystorePassword=${RABBITMQ_PASS_CERT}<font></font>
<font></font>
spring.rabbitmq.custom.another-event.host=localhost<font></font>
spring.rabbitmq.custom.another-event.port=<span class="hljs-number">5672</span>
spring.rabbitmq.custom.another-event.ttlRetryMessage=<span class="hljs-number">5000</span>
spring.rabbitmq.custom.another-event.maxRetriesAttempts=<span class="hljs-number">5</span><font></font>
spring.rabbitmq.custom.another-event.queueRoutingKey=TEST.QUEUE<font></font>
spring.rabbitmq.custom.another-event.exchange=ex_test_1<font></font>
spring.rabbitmq.custom.another-event.exchangeType=direct<font></font>
spring.rabbitmq.custom.another-event.queue=queue_test_1<font></font>
spring.rabbitmq.custom.another-event.autoCreate=<span class="hljs-keyword">true</span>
spring.rabbitmq.custom.another-event.concurrentConsumers=<span class="hljs-number">1</span>
spring.rabbitmq.custom.another-event.maxConcurrentConsumers=<span class="hljs-number">1</span><font></font>
spring.rabbitmq.custom.another-event.username=guest<font></font>
spring.rabbitmq.custom.another-event.password=${RABBITMQ_PASS}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, kami belum menulis satu baris kode pun !!!</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagus, tetapi Anda mengatakan sesuatu tentang strategi replay baru, kan?</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya kata teman saya! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi sebelum menjelaskan strategi baru ini, mari kita lihat perilaku default RabbitMQ dan Spring AMQP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, RabbitMQ tidak menyediakan pemrosesan ulang yang akan memungkinkan Anda untuk mengontrol seluruh siklus hidup pesan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, sebelum </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RabbitMQ 3.8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , header pesan tidak memiliki properti untuk mengontrol jumlah percobaan yang dilakukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perilaku default RabbitMQ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda belum menentukan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">waktu-untuk-hidup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (TTL, seumur hidup), maka RabbitMQ akan terus mencoba untuk mengantri pesan Anda.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda mendefinisikan TTL tetapi tidak mendefinisikan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dlx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka setelah TTL pesan akan dihapus dari antrian dan Anda akan kehilangan itu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda telah menetapkan TTL dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dlx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka setelah TTL pesan akan dikirim ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exchanger yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> didefinisikan dalam dlx.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/pg/kb/bu/pgkbbu4_hvodxqc5oqtnjlxp5mo.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perilaku default RabbitMQ</font></font></i><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi bagaimana jika kita menginginkan TTL yang meningkat (misalnya, jika operasi tidak stabil) dan mengontrol jumlah percobaan ulang?</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertanyaan bagus! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saatnya untuk menjelaskan cara kerja pustaka Spring AQMP dan Spring Rabbit Tuning!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coba lagi strategi</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring AMQP secara default</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring AMQP secara default,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda dapat menentukan opsi coba lagi menggunakan properti di bawah ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun pendekatan ini memiliki masalah. </font><font style="vertical-align: inherit;">Secara default, Spring AMQP akan memblokir antrian Anda ketika Anda mencoba mengirim pesan lagi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah ini dapat diselesaikan dengan cara memutar: gunakan paralelisme. </font><font style="vertical-align: inherit;">Tetapi dengan cara ini kita memuat JVM, dan ini bukan pendekatan terbaik. </font><font style="vertical-align: inherit;">Jika Anda memiliki lima pesan bermasalah (seperti pada contoh), maka kemacetan akan muncul lagi, dan kami masih perlu menentukan kacang secara manual di </font></font><code>@Configuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nampan untuk setiap koneksi dan wadah.</font></font><br>
<br>
<pre><code class="java hljs">spring.rabbitmq.listener.simple.retry.enabled=<span class="hljs-keyword">true</span>
spring.rabbitmq.listener.simple.retry.initial-interval=<span class="hljs-number">2000</span>
spring.rabbitmq.listener.simple.retry.max-attempts=<span class="hljs-number">5</span>
spring.rabbitmq.listener.simple.retry.multiplier=<span class="hljs-number">2</span>
spring.rabbitmq.listener.simple.max-concurrency=<span class="hljs-number">5</span>
spring.rabbitmq.listener.simple.concurrency=<span class="hljs-number">5</span></code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring RabbitMQ Tuning</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perpustakaan ini mengambil pendekatan berbeda dengan antrian terpisah untuk mencoba lagi. </font><font style="vertical-align: inherit;">Dengan cara ini kita dapat mengontrol TTL menggunakan parameter pesan kedaluwarsa, dan parameter x-death untuk mengontrol jumlah coba lagi.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi bagaimana caranya?</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menggunakan konsep dlx dalam antrian coba lagi untuk mengirim ulang pesan ke antrian utama. </font><font style="vertical-align: inherit;">Dengan demikian, kita memiliki akses ke parameter x-death dan secara terprogram kita dapat menentukan umur pesan. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan. </font><font style="vertical-align: inherit;">Karena perpustakaan ini adalah perpanjangan dari Spring AMQP, Anda dapat menggunakan strategi coba lagi default, dan menggunakan perpustakaan ini hanya untuk konfigurasi otomatis kacang. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/2t/d7/n3/2td7n3ayuw29wlik_b6y4xi_num.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring RabbitMQ Mencoba Tuning</font></font></i><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bisakah saya menggunakan strategi coba lagi tanpa konfigurasi otomatis? </font><font style="vertical-align: inherit;">Saya sudah punya banyak kacang, dan saya tidak punya waktu untuk menulis ulang.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tahu bahwa dunia tidak sempurna, dan untuk situasi ini, kami memiliki tanda yang memungkinkan Anda untuk menonaktifkan konfigurasi otomatis dan hanya menggunakan pendekatan kami untuk pemrosesan berulang dan keuntungan lainnya, seperti manajemen tempat sampah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menonaktifkan konfigurasi otomatis menggunakan properti berikut:</font></font><br>
<br>
<pre><code class="java hljs">spring.rabbitmq.enable.custom.autoconfiguration=<span class="hljs-keyword">false</span></code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi saya memiliki dua koneksi yang berbeda, apa yang harus saya lakukan dalam kasus ini?</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda memiliki lebih dari satu koneksi dan Anda ingin menonaktifkan konfigurasi otomatis, maka Anda perlu menentukan nama bean </font></font><code>RabbitTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk setiap koneksi. </font><font style="vertical-align: inherit;">Ini dijelaskan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Anda masih dapat menggunakan kacang kami </font><font style="vertical-align: inherit;">untuk membuat bekerja dengan Spring AMQP lebih mudah.</font></font><br>
<br>
<code><code>spring.rabbitmq.custom.&lt;</code>YOUR_EVENT&gt;.rabbitTemplateBeanName= <code>&lt;</code>RABBITTEMPLATE_BEAN_NAME&gt;</code><br>
<br><font style="vertical-align: inherit;"></font><code>RabbitTemplateHandler</code><font style="vertical-align: inherit;"></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sangat baik! </font><font style="vertical-align: inherit;">Jadi, saya ingin menggunakan ini. </font><font style="vertical-align: inherit;">Bagaimana saya bisa melakukan ini? </font><font style="vertical-align: inherit;">Apakah Anda memiliki contoh atau dokumentasi?</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iya! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki contoh proyek di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositori ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , di mana Anda dapat melihat cara menggunakan perpustakaan ini untuk penerbit dan pelanggan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi itu sangat sederhana sehingga saya akan memberi contoh di sini!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penerbit</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada kelas di perpustakaan </font></font><code>RabbitTemplateHandler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan sangat mudah digunakan. </font><font style="vertical-align: inherit;">Anda perlu memanggil metode </font></font><code>getRabbitTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mengirimkan host virtual sebagai parameter untuk mendapatkan kacang </font></font><code>RabbitTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Setelah itu, Anda dapat memanggil metode convertAndSend dan meneruskannya dalam parameter kunci pertukaran dan perutean. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : kunci pertukaran dan perutean dapat diperoleh dengan menggunakan anotasi</font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nilai</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Value("${spring.rabbitmq.custom.some-event.exchange}")</span>
<span class="hljs-keyword">private</span> String exchangeSomeEvent;<font></font>
<font></font>
<span class="hljs-meta">@Value("${spring.rabbitmq.custom.some-event.queueRoutingKey}")</span>
<span class="hljs-keyword">private</span> String routingKeySomeEvent;<font></font>
<font></font>
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RabbitTemplateHandler rabbitTemplateHandler;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sendMessage</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String message)</span> </span>{<font></font>
   rabbitTemplateHandler.getRabbitTemplate(<span class="hljs-string">"some-event"</span>).convertAndSend(exchangeSomeEvent, routingKeySomeEvent, message);<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelanggan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelanggan juga sangat sederhana. </font><font style="vertical-align: inherit;">Satu-satunya hal yang perlu Anda lakukan adalah menambahkan anotasi ke metode </font></font><code>RabbitListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Spring AMQP annotation secara default) dan berikan nama </font></font><code>containerFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara mengetahui nama containerFactory yang benar untuk host virtual?</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda tidak perlu mengetahuinya, cukup berikan nama acara tersebut, dan perpustakaan akan melakukan semua keajaiban untuk Anda! </font><font style="vertical-align: inherit;">Perpustakaan ini juga memiliki kemampuan untuk memasukkan retries dan dlq, yang direkomendasikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menyalakannya sangat sederhana. </font><font style="vertical-align: inherit;">Anda perlu menambahkan anotasi ke metode </font></font><code>EnableRabbitRetryAndDlq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan meneruskan nama properti sebagai argumen. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Anda juga bisa menentukan pengecualian mana yang harus ditangani dengan percobaan ulang dan dlq. </font><font style="vertical-align: inherit;">Ini diproses secara default </font></font><code>Exception.class</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang berarti menangani semua pengecualian. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh:</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RabbitListener(containerFactory = "some-event", queues = "${spring.rabbitmq.custom.some-event.queue}")</span>
<span class="hljs-meta">@EnableRabbitRetryAndDlq(event = "some-event", exceptions = { IllegalArgumentException.class, RuntimeException.class })</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMessage</span><span class="hljs-params">(Message message)</span> </span>{<font></font>
   ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu semua! </font><font style="vertical-align: inherit;">Saya harap Anda menikmati perpustakaan ini sebanyak yang kami lakukan! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan, yang paling penting: jangan ragu untuk berkontribusi atau mengirim umpan balik!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima kasih khusus untuk</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andre Luis Gomes </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rogerio Bueno </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leonardo Ferreira</font></font></a><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendaftar untuk pelajaran gratis.</font></font></a><br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id500926/index.html">Mengetik dinamis bukan alat pengembangan. Ini omong kosong (buruk)</a></li>
<li><a href="../id500928/index.html">Digital Breakthrough Contest 2020 Meluncurkan Marathon TI Online</a></li>
<li><a href="../id500930/index.html">Rahasia kecil bagi para desainer game untuk membuat pemain sedikit membenci game Anda</a></li>
<li><a href="../id500932/index.html">Spam sebagai alat perlindungan</a></li>
<li><a href="../id500934/index.html">Winnum mengumumkan rilis baru platform andalan Winnum Platform 4.3</a></li>
<li><a href="../id500942/index.html">Ultraviolet: desinfeksi dan keamanan yang efektif</a></li>
<li><a href="../id500944/index.html">WexLang Reader - cara membaca buku dalam bahasa asing dengan senang hati (104 bahasa)</a></li>
<li><a href="../id500948/index.html">Rilis Rust 1.43.1: rilis penyesuaian</a></li>
<li><a href="../id500952/index.html">Keterampilan Pemrogram Kunci Python</a></li>
<li><a href="../id500956/index.html">Mobile ML: pembelajaran mesin di saku Anda. Bagian 1 - Setrika</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>