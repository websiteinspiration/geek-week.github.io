<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐚 👨‍🏫 👩‍💻 Architecture PHP pure. Comment le mesurer et le contrôler? 📒 💭 🦀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Préface
 Comme vous l'avez déjà compris par le nom, je vais ici parler de l'architecture la plus «haute» - Pure. Et l'impulsion pour le développement ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Architecture PHP pure. Comment le mesurer et le contrôler?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504590/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Préface</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous l'avez déjà compris par le nom, je vais ici parler de l'architecture la plus «haute» - Pure. Et l'impulsion pour le développement de toute cette histoire a été le livre de Robert Martin «Architecture pure». Si je ne l'ai pas encore lu, j'ose le recommander! L'auteur révèle de nombreux sujets importants, partage activement sa riche expérience de vie (dans un domaine professionnel, bien sûr) et les conclusions tirées sur cette base, tisse de manière épisodique dans des chapitres de l'histoire comment magistralement parlé (et pas seulement, bien sûr) nos pères et grands-pères dans les années 60, 70, 80 et même les années 90, comme les grains de céréales, les principes préférés de tout le monde de SOLID et leurs analogues dans le monde des composants ont été collectés et ce qu'ils ont appris au cours du dernier demi-siècle. Au cours de la lecture du livre, la ligne de développement de l'industrie du développement logiciel est bien tracée, des problèmes typiques auxquels les garçons ont dû faire face,et les méthodes pour les résoudre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ne pensez pas, relire le résumé du livre n'est pas le but de ce post. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous parlerons des idées qui m'ont poussé à développer un outil (je déterminerai le degré de son utilité pour vous, et j'attendrai avec beaucoup d'intérêt les retours, suggestions et critiques constructives). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il me semble que l'article sera utile à tous. Ceux qui connaissent déjà le livre pourront rafraîchir certains de ses moments dans leur mémoire, ou simplement sauter la première partie et commencer immédiatement à se familiariser avec l'outil. Ceux qui n'ont pas lu le livre auparavant trouveront peut-être quelque chose de nouveau dans la première partie.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour plus de commodité, l'article est divisé en 2 parties. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le premier, je parlerai des idées clés qui ont généré dans ma tête le désir d'automatiser tout cela, sommes-nous des programmeurs ou qui finalement? </font><font style="vertical-align: inherit;">Ici, je citerai beaucoup de l'auteur, ainsi que d'insérer activement des extraits et des illustrations de différents chapitres du livre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxième partie, presque entièrement, sera consacrée à la description de l'outil qui a fait son apparition, révélant ses capacités et ses conseils étape par étape. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous vous considérez comme une catégorie de personnes prenant tout trop près de votre cœur, je vous conseille de commencer la lecture de l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afterword</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenu</font></font></b>
                        <div class="spoiler_text"><ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  SOLID      ?</a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">     </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">REP: Reuse/Release Equivalence Principle</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CCP: Common Closure Principle</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CRP: Common Reuse Principle</a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">     </a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ADP: Acyclic Dependencies Principle</a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1. DIP (  )</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2.   </a></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  ,    </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SDP: Stable Dependencies Principle</a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    ?</a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SAP: Stable Abstractions Principle</a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    ?</a><br>
 </li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">     ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  (. )</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   .   .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> PHP Clean Architecture</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    </a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1.    </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  A/I ,   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">     </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2.    </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">3.     </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   / </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  -    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> - D   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Public/Private Class  PHP</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   ADP  SDP</a></li>
</ul><br>
 </li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   CI/CD</a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a></li>
</ul><br>
 </li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></li>
</ul><br>
</div>
                    </div><a name="1"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 1</font></font></h2><a name="2"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que l'architecture logicielle?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hélas, l'auteur du livre ne donne pas une seule définition. </font><font style="vertical-align: inherit;">Il existe un grand nombre de formulations différentes, et toutes sont correctes à leur manière. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, nous pouvons aller de l'autre côté ..</font></font><a name="3"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel est le but de l'architecture?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a qu'une seule réponse: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le but de l'architecture logicielle est de réduire le travail humain requis pour créer et maintenir un système. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une petite introduction ..</font></font><a name="4"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Où commencent de nombreux projets?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Nous pourrons rétablir l'ordre plus tard, nous n'entrerons que sur le marché!" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, l'ordre n'a pas été rétabli, car la pression de la concurrence sur le marché ne faiblit jamais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Le plus grand mensonge que de nombreux développeurs pensent est que le code sale les aidera à entrer rapidement sur le marché, mais en réalité, cela ralentira leur mouvement à long terme. </font><font style="vertical-align: inherit;">Les développeurs qui croient en ce mensonge montrent l’arrogance de Hare, pensant qu’à l’avenir ils pourront passer du désordre à la restauration de l’ordre, mais ils commettent une simple erreur. </font><font style="vertical-align: inherit;">Le fait est que la création du désordre est toujours plus lente que l'observation régulière de la propreté, quelle que soit l'échelle de temps choisie. "</font></font><a name="5"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deux valeurs des produits logiciels</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comportement (quelque chose d'urgence mais pas toujours important)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture (quelque chose d'important, mais pas toujours urgent)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup se noient souvent dans le premier et négligent complètement le second. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Type: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pourquoi perdre du temps à réfléchir à l'architecture, l'essentiel est qu'elle fonctionne correctement!"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais ils manquent un point important: «Si un programme fonctionnant correctement ne permet pas de le changer, il cessera de fonctionner correctement lorsque les exigences changeront, et ils ne pourront pas le faire fonctionner correctement. Autrement dit, le programme deviendra inutile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le programme ne fonctionne pas correctement, mais peut facilement être modifié, ils pourront le faire fonctionner correctement et maintenir ses performances à mesure que les exigences évolueront. Autrement dit, le programme restera toujours utile. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai aimé cette déclaration:</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Si vous pensez qu'une bonne architecture coûte cher, essayez une architecture médiocre.»</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Brian Foote et Joseph Yoder) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'avère </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'il est important</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de prêter l'attention voulue à la propreté du code et à l'architecture en général dès les toutes premières lignes. Mais, si tout est relativement clair avec la pureté du code (reniflez toutes sortes de mauvaises odeurs dans le code et corrigez-le, en plus les outils sont pleins d'IDE intelligents, d'analyseurs statiques et d'autres déchets sans aucun doute importants), alors avec l'architecture ce n'est pas tout à fait le cas (du moins moins moi).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment pouvez-vous contrôler quelque chose qui est si vague qu'il est difficile même d'être défini par un seul libellé qu'il a une idée très polyvalente et chaque seconde, bon sang, merde le voit et essaie de l'interpréter à sa manière, si vous n'êtes pas le petit-fils de Vanga, n'a pas gagné le spectacle "Intuition ”Et ne sont pas particulièrement sensibles cinquième point? </font><font style="vertical-align: inherit;">Ensuite, l'auteur du livre lance quelques réflexions précieuses pour la réflexion ... Disons le trier.</font></font><a name="6"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi avez-vous trouvé SOLID et pourquoi ne suffit-il pas seul?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous connaissons probablement tous les principes de SOLID. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leur objectif</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est de créer des structures logicielles de niveau intermédiaire qui:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tolérant au changement;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simple et compréhensible;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">constituent la base de composants pouvant être utilisés dans de nombreux systèmes logiciels.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais: «Tout comme de bonnes briques peuvent rendre un mur inutilisable, des composants de milieu de gamme bien conçus peuvent créer un système inutilisable.» </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, dans le monde des composants, il existe des analogues des principes SOLID, ainsi que des principes de haut niveau pour la création d'architectures. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais aborder ces sujets très superficiellement, plus de détails peuvent être trouvés dans le livre. </font><font style="vertical-align: inherit;">Allons-y!</font></font><a name="7"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connectivité des composants et ses principes déterminants</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«À quel composant appartient telle ou telle classe? </font><font style="vertical-align: inherit;">Cette décision importante doit être prise conformément aux principes de développement de logiciels établis. </font><font style="vertical-align: inherit;">Malheureusement, ces décisions sont de nature particulière et sont prises presque exclusivement sur la base du contexte. »</font></font><a name="8"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe d'équivalence de réutilisation / libération - Le principe d'équivalence de réutilisation et de libération.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En termes d'architecture et de design, ce principe signifie que les classes et modules qui composent un composant doivent appartenir à un groupe connecté. Un composant ne peut pas simplement inclure un mélange aléatoire de classes et de modules; Il devrait y avoir un thème ou un objectif commun à tous les modules. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les classes et modules combinés en un composant doivent être libérés ensemble.</font></font><a name="9"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CCP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Common Closure Principle - le principe d'un changement cohérent.</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
C'est le principe de la SRP (responsabilité unique) reformulé pour les composants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les classes qui changent pour les mêmes raisons et en même temps doivent être incluses dans un composant. Différents composants doivent inclure des classes qui changent à différents moments et pour diverses raisons.</font></font><a name="10"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Common Reuse Principle - Le principe de la réutilisation partagée.</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ce principe est similaire à l'ISP (interface segregation). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ne forcez pas les utilisateurs de composants à dépendre de ce dont ils n'ont pas besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principe indique que les classes qui ne sont pas étroitement liées ne doivent pas être incluses dans un composant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Vous avez peut-être déjà remarqué que les trois principes des composants connectés entrent en conflit les uns avec les autres. Les principes d'équivalence de réutilisation (REP) et de changement cohérent (CCP) sont inclusifs: tous deux s'efforcent de rendre les composants aussi grands que possible. Le principe de réutilisation (CRP) est exceptionnel, s'efforçant de rendre les composants aussi petits que possible. La tâche d'un bon architecte est de résoudre cette contradiction. »</font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/sk/yl/toskylulwgshxendjozwzjf9sly.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Dans le passé, nous avons examiné la connectivité plus facilement que les principes d'équivalence de réutilisation (REP), de changement cohérent (CCP) et de réutilisation partagée (CRP). Une fois que nous pensions que la connectivité n'est qu'un attribut, qu'un module remplit une et une seule fonction. Cependant, les trois principes de connectivité des composants décrivent une variété beaucoup plus complexe. Lors du choix des classes à inclure dans les composants, vous devez tenir compte des forces opposées associées à la facilité de réutilisation et de développement. Trouver un équilibre de ces forces en fonction des besoins de l'application n'est pas une tâche facile. De plus, l'équilibre est presque toujours constamment déplacé. Autrement dit, la partition considérée comme réussie aujourd'hui peut échouer après un an. Par conséquent,la composition des composants changera presque certainement avec le temps et l'objectif du projet passera de la facilité de développement à la facilité de réutilisation.</font></font><a name="11"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compatibilité des composants</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Les trois principes suivants définissent les règles de la relation entre les composants. </font><font style="vertical-align: inherit;">Et là encore, nous sommes confrontés à des contradictions entre facilité de développement et organisation logique. </font><font style="vertical-align: inherit;">Les forces qui affectent l'architecture de la structure des composants sont techniques, politiques et volatiles. »</font></font><a name="12"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe des dépendances acycliques - le principe de l'acyclicité des dépendances. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les boucles dans le graphique de dépendance des composants ne sont pas autorisées! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r0/od/sf/r0odsfch_htpxpurtonelpiy-em.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quel que soit le composant affiché sur le graphique, vous commencez à vous déplacer le long des flèches indiquant la direction de la dépendance, vous ne pourrez pas revenir au point d'origine. </font><font style="vertical-align: inherit;">Il s'agit d'un graphe orienté acyclique (DAG - Directed Acyclic Graph). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ib/wg/d8/ibwgd8xnihw0qilpi7i32rvaxkk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette image, nous avons une dépendance conduisant à l'apparition d'un cycle. </font><font style="vertical-align: inherit;">La dépendance cyclique qui en résulte peut toujours être rompue.</font></font><a name="13"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Méthodes pour briser les dépendances cycliques</font></font></h4><a name="14"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. En appliquant le DIP (principe d'inversion de dépendance)</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/dp/8b/oydp8bixvzlwccqadsmdnrqqtdi.png" alt="image"><a name="15"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Introduction du nouveau composant </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2e/51/ty/2e51tyj9bfrfimyiqxgzrqqc6ds.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«La deuxième solution implique la dépendance de la structure des composants à l'évolution des besoins. </font><font style="vertical-align: inherit;">En effet, au fur et à mesure que l'application grandit, la structure des dépendances des composants grandit et change. </font><font style="vertical-align: inherit;">Par conséquent, il doit être constamment vérifié pour les cycles. </font><font style="vertical-align: inherit;">Lorsque les cycles se forment, ils doivent être rompus d'une manière ou d'une autre. </font><font style="vertical-align: inherit;">Parfois, pour cela, il est nécessaire de créer de nouveaux composants, ce qui fait croître la structure des dépendances. »</font></font><a name="16"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conception descendante, ou plutôt son impraticabilité</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«La structure des composants ne peut pas être conçue de haut en bas. Cette conclusion n'est pas immédiatement atteinte dès qu'ils commencent à concevoir le système, mais cela se produit inévitablement avec la croissance et le changement du système. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En considérant un grand diagramme, comme la structure des dépendances des composants, nous pensons que les composants doivent en quelque sorte représenter les fonctions du système. Mais en réalité, ce n'est pas un attribut indispensable des diagrammes de dépendance des composants.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, les diagrammes de dépendances des composants reflètent faiblement les fonctions de l'application. Dans une plus large mesure, ils reflètent la commodité du montage et de la maintenance de l'application. C'est la principale raison pour laquelle ils ne sont pas conçus au début du développement du projet. Pendant cette période, aucun logiciel ne doit être collecté et entretenu, il n'est donc pas nécessaire d'établir une carte de construction et de maintenance. Mais avec l'avènement d'un nombre croissant de modules aux premiers stades de la mise en œuvre et de la conception, le besoin de gérer les dépendances augmente ... De plus, il y a un désir de limiter autant que possible l'impact des changements, nous commençons donc à prêter attention aux principes de responsabilité unique (SRP) et de changement coordonné (CCP) et à combiner les classes, qui va probablement changer ensemble.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'une des tâches principales d'une telle structure de dépendance est l'isolement de la variabilité. Nous n'avons pas besoin de composants qui changent souvent pour les moindres raisons et qui affectent d'autres composants qui autrement seraient complètement stables. Par exemple, les modifications cosmétiques de l'interface graphique ne doivent pas affecter les règles métier. L'ajout et la modification de rapports ne doivent pas affecter les stratégies de haut niveau. Par conséquent, un graphique de dépendance des composants est créé et créé par les architectes pour protéger les composants stables et précieux contre l'influence des composants volatils.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À mesure que l'application se développe, nous commençons à nous soucier de créer des articles réutilisables. À ce stade, le principe de réutilisation partagée (CRP) commence à influencer la composition des composants. Enfin, avec l'avènement des boucles, nous commençons à appliquer le principe de l'acyclicité des dépendances (ADP), en conséquence, le graphe de dépendance des composants commence à changer et à croître. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une tentative de conception de la structure de dépendance des composants plus tôt que n'importe quelle classe est susceptible d'échouer. À ce stade, nous ne savons presque rien de la réconciliation des changements, nous n'imaginons pas quels éléments peuvent être utilisés à plusieurs reprises, et nous allons presque certainement créer des composants qui forment des dépendances cycliques. Par conséquent, la structure des dépendances des composants devrait croître et se développer avec la conception logique du système. »</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hé, tu es toujours là? </font><font style="vertical-align: inherit;">Man, c'est important, vous devez dire bonjour au moins pour entrer le sens de la partie suivante, il y aura un tutoriel brut sur l'utilisation de tulza.</font></font><a name="17"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stable Dependencies Principle - le principe des dépendances stables. </font></font></i> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les dépendances doivent être orientées vers la stabilité! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Qu'entend-on par« durabilité »? </font><font style="vertical-align: inherit;">Imaginez une pièce se tenant sur un bord. </font><font style="vertical-align: inherit;">Sa position est-elle stable? </font><font style="vertical-align: inherit;">Vous répondrez très probablement «non». </font><font style="vertical-align: inherit;">Cependant, si vous le protégez des vibrations et des coups de vent, il peut rester dans cette position pendant une durée arbitraire. </font><font style="vertical-align: inherit;">Autrement dit, la durabilité n'est pas directement liée à la fréquence des changements. </font><font style="vertical-align: inherit;">La pièce ne change pas, mais presque personne ne dira que, debout sur le bord, elle est dans une position stable.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le dictionnaire explicatif dit que la durabilité est «la capacité de maintenir sa condition sous des influences extérieures». La durabilité est liée à la quantité de travail qui doit être fait pour changer d'état. D'une part, une pièce se tenant sur un bord est dans un état instable car il faut un petit effort pour la renverser. En revanche, la table est dans un état très stable, car elle nécessite un effort beaucoup plus important pour la faire basculer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que tout cela a à voir avec les logiciels? </font><font style="vertical-align: inherit;">De nombreux facteurs compliquent le changement d'un composant, tels que sa taille, sa complexité et sa clarté. </font><font style="vertical-align: inherit;">Mais nous allons laisser de côté tous ces facteurs et nous concentrer sur autre chose. </font><font style="vertical-align: inherit;">Il existe un moyen infaillible de rendre un composant logiciel difficile à modifier en créant de nombreux autres composants qui en dépendent. </font><font style="vertical-align: inherit;">Un composant avec de nombreuses dépendances entrantes est très stable, car la réconciliation des modifications avec tous les composants dépendants nécessite un effort considérable. "</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rp/pr/x8/rpprx8mwmw7dhsnchmfpiybhy_q.png" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/sk/1b/gz/sk1bgzciqhgtwbbf32tnhhp6nig.png" alt="image"><a name="18"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment évaluer la stabilité du composant? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'auteur suggère de calculer le nombre de ses dépendances entrantes et sortantes et de calculer sur leur base la mesure de sa stabilité.</font></font><br>
<br>
<ul>
<li><b>Fan-in ( ):</b>   .        ,      .</li>
<li><b>Fan-out ( ):</b>   .        ,      .</li>
<li><b>I:</b> : <i><b>I = Fan-out ÷ (Fan-in + Fan-out)</b></i>.       [0, 1]. I = 0    , I = 1 –  .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, ce principe dit que la métrique du composant I doit être supérieure aux métriques des composants I qui en dépendent. Autrement dit, les mesures que je devrais diminuer dans le sens de la dépendance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de noter que si tous les composants du système sont aussi stables que possible, un tel système ne pourra pas être modifié. Par conséquent, tous les composants ne doivent pas être stables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mec, ne t'endors pas, je suis près. Il ne reste qu'un peu!</font></font><a name="19"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stable Abstractions Principle - le principe de stabilité des abstractions.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La stabilité d'un composant est proportionnelle à son caractère abstrait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Certaines parties des systèmes logiciels devraient changer très rarement. Ces pièces représentent des décisions architecturales de haut niveau et d'autres décisions importantes. Personne ne veut que ces décisions soient volatiles. Par conséquent, les logiciels encapsulant des règles de haut niveau doivent résider dans des composants stables (I = 0). Volatile (I = 1) ne devrait contenir que du code mutable - un code qui pourrait être facilement et rapidement modifié.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si vous placez des règles de haut niveau dans des composants stables, cela compliquera la modification du code source qui les implémente. Cela peut rendre toute l'architecture rigide. Comment rendre un composant avec une stabilité maximale (I = 0) si flexible qu'il reste stable lors des changements? La réponse réside dans le principe d'ouverture / fermeture (OCP). Ce principe dit qu'il est possible et nécessaire de créer des classes suffisamment flexibles pour qu'elles puissent être héritées (étendues) sans changement. Quelles classes respectent ce principe? Abstrait.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SAP (le principe de la stabilité des abstractions) établit un lien entre la stabilité et l'abstraction. D'une part, il dit qu'un composant stable doit également être abstrait pour que sa stabilité n'entrave pas l'expansion, et d'autre part, il dit qu'un composant instable doit être concret, car l'instabilité facilite le changement de code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, un composant stable doit être composé d'interfaces et de classes abstraites afin de pouvoir être facilement étendu. Les composants résilients disponibles pour l'expansion sont suffisamment flexibles pour ne pas trop restreindre l'architecture.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les principes de stabilité des abstractions (SAP) et des dépendances stables (SDP) correspondent ensemble au principe de l'inversion de dépendance (DIP) pour les composants. Cela est vrai parce que le principe SDP exige que les dépendances soient dirigées vers la durabilité, et le principe SAP stipule que la durabilité implique l'abstraction. Autrement dit, les dépendances doivent être orientées vers l'abstrait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, le principe DIP est formulé pour les classes, et dans le cas des classes, il n'y a pas de tons moyens. La classe est abstraite ou non. Les principes de SDP et SAP s'appliquent aux composants et permettent une situation où un composant est partiellement abstrait ou partiellement stable. »</font></font><a name="20"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment mesurer l'abstraction d'un composant? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ici aussi, tout est très simple. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La valeur de la mesure de la composante abstraite est déterminée par le rapport du nombre de ses interfaces et classes abstraites au nombre total de classes.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nc: le</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nombre de classes dans le composant.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na: le</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nombre de classes abstraites et d'interfaces dans le composant.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abstrait. </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A = Na ÷ Nc</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La valeur de la métrique A varie dans la plage de 0 à 1. 0 signifie l'absence totale d'éléments abstraits dans le composant et 1 signifie que le composant ne contient que des classes et des interfaces abstraites. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dépendance entre I et A</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si vous tracez sur le graphique (Y - abstraction, X - instabilité) de «bons» composants des deux types: abstrait stable et concret instable, nous obtenons ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o9/ti/uu/o9tiuuubqfxevrke6rmxoi8xvt4.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, parce que les composants ont différents degrés d'abstraction et de stabilité, loin de tous tomber dans ces 2 points (0, 1) ou (1, 0), et comme il est impossible d'exiger que tous les composants soient en eux, nous devons supposer que sur le graphique A / Il y a quelques points qui déterminent les positions optimales pour les composants.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet ensemble peut être dérivé en définissant des zones où les composants ne doivent pas être situés - en d'autres termes, en définissant des zones d'exclusion.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1d/q0/6u/1dq06uddhrif323kzrg2ymdlgwa.png" alt="image"><a name="21"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zone de douleur</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Considérez les composants situés près du point (0, 0). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils sont très stables et spécifiques. De tels composants sont indésirables car sont trop durs. Ils ne peuvent pas être développés, car ils ne sont pas abstraits et il est très difficile de les changer en raison de leur grande stabilité. Plus nous modifions le composant qui pénètre dans la zone douloureuse, plus il apporte de douleur. Cela est dû à la complexité de son changement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les composants correctement conçus ne doivent généralement pas être proches du point (0, 0). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, en réalité, il existe des entités logicielles qui tombent dans cette zone. Par exemple, le schéma de base de données, il est aussi spécifique que possible et de nombreuses dépendances s'étendent vers lui. C'est l'une des raisons pour lesquelles les modifications de schéma de base de données sont généralement associées à une grande douleur.</font></font><a name="22"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zone inutile</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Considérez les composants situés près du point (1, 1). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De tels composants sont également indésirables, car ils sont aussi abstraits que possible et n'ont pas de dépendances. Ils sont tout simplement inutiles. Ce sont souvent des classes abstraites qui n'ont jamais été implémentées.</font></font><a name="23"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment éviter d'entrer dans les zones d'exclusion?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Placez les composants à proximité ou sur la séquence principale. De tels composants ne sont pas «trop abstraits» pour leur stabilité et pas «trop instables» pour leur caractère abstrait. Ils ne sont pas inutiles et ne causent pas beaucoup de douleur. D'autres composants en dépendent dans la mesure de leur caractère abstrait, et ils dépendent eux-mêmes d'autres dans la mesure de leur spécificité. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les positions les plus souhaitables pour les composants sont les extrémités de la séquence principale. Cependant, dans les grands systèmes, il y aura toujours plusieurs composants qui ne sont pas suffisamment abstraits et pas assez stables. Ces composants ont d'excellentes caractéristiques lorsqu'ils sont situés sur ou à proximité de la séquence principale.</font></font><a name="24"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La distance à la séquence principale</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Puisqu'il est souhaitable que le composant soit situé sur ou près de la séquence principale, il est possible de déterminer une métrique exprimant la distance du composant par rapport à l'idéal.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> distance. </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D = | A + I - 1 | </font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cette métrique prend des valeurs de la plage [0, 1]. </font><font style="vertical-align: inherit;">Une valeur de 0 indique que le composant est directement sur la séquence principale. </font><font style="vertical-align: inherit;">Une valeur de 1 indique que le composant est situé à la distance maximale de la séquence principale.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En adoptant cette métrique, vous pouvez explorer la conception entière à proximité de la séquence principale. </font><font style="vertical-align: inherit;">La métrique D peut être calculée pour n'importe quel composant. </font><font style="vertical-align: inherit;">Tout composant avec une valeur métrique D loin de zéro nécessite une révision et une restructuration.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/3n/a0/gw3na07fmc40y8-r72hoqro8wrq.png" alt="image"><a name="25"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion de l'auteur (Robert Martin)</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
«Les métriques de gestion des dépendances décrites dans ce chapitre vous aident à quantifier la cohérence de la structure de dépendance et de l'abstraction de conception avec ce que j'appelle une« bonne »conception. L'expérience montre qu'il existe de bonnes dépendances, il y en a de mauvaises. Cette note reflète cette expérience. Cependant, les métriques ne sont pas la vérité ultime; ce ne sont que des mesures basées sur une norme arbitraire. Ces mesures sont imparfaites - au mieux, mais j'espère que vous les trouverez utiles. »</font></font><a name="26"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mec, je suis content si tu es toujours avec moi. </font><font style="vertical-align: inherit;">C'est tout avec la première partie. </font><font style="vertical-align: inherit;">Bien qu'il y ait encore beaucoup de sujets, et les pensées détaillées de l'auteur sont restées inchangées. </font><font style="vertical-align: inherit;">Pourtant, le but principal de mon article n'est pas de relire le livre, sinon vous seriez certainement plus heureux de lire l'original. </font><font style="vertical-align: inherit;">Moi, je fais de la randonnée, et donc déjà spécifiquement allé trop loin avec la quantité de contenu, mais je serai bâtard, j'ai essayé de ne pas gonfler comme je le pouvais. </font><font style="vertical-align: inherit;">Rond!</font></font><a name="27"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deuxième jour. </font><font style="vertical-align: inherit;">Umm, c'est-à-dire </font><font style="vertical-align: inherit;">Partie 2</font></font></h2><a name="28"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que je frotte depuis si longtemps? "Ah, oui ... Nous sommes comme des architectes, ou nous voulons vraiment être eux, non?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'avons-nous? - Une sorte de projection misérable, ou peut-être un système monstrueux, PROJECT, sa mère, eh bien, ou finalement il n'y a pas encore de nifig, mais nous nous frottons les mains, regardons le calendrier et trouvons à quel point nous devrons parler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a pas de nous, je travaille seul! Ou peut-être que nous, avec un acolyte, dans le garage, allions remplir une nouvelle pomme, pourquoi pas? Eh bien, soit nous sommes une armée et nous faisons tous partie d'une entreprise lourde, nous travaillons dur, comme les Noirs des pauvres à la maison (c'est-à-dire, les Afro-Américains, bien sûr, vous comprenez), ou peut-être que nous donnons des coups de pied tranquillement pour ne pas être licenciés. Pour un gros salaire avec un bonus, des cookies et une vue de la ville de Moscou ou pour un enthousiasme dénudé, pour une idée et une mise dans une startup qui naturellement enfer quand elle décolle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, cela n'a pas d'importance. </font><font style="vertical-align: inherit;">Ce qui est important, c'est ceci: au final, nous voulons tous simplement que notre idée originale ne se plie pas prématurément, enfin, au moins avant notre départ, et il y a toutes les chances pour cela. </font><font style="vertical-align: inherit;">Oui, oui ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et que faire maintenant, demandez-vous? </font><font style="vertical-align: inherit;">Donc, si vous n'avez pas de grand frère au bureau, alors frère ne peut pas se passer d'un troisième œil.</font></font><a name="29"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Résumé de la première partie</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la dernière partie de l'article, nous avons parlé un </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peu</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des métriques qui permettent aux architectes </font><s><font style="vertical-align: inherit;">de mesurer leur</font></s><font style="vertical-align: inherit;"> nombre en chiffres pour refléter le degré de qualité de l'architecture de leur système. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - abstraction du composant </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - instabilité du composant </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - distance à la séquence principale sur le graphique </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A / I Des </font></font></b><font style="vertical-align: inherit;"><s><font style="vertical-align: inherit;">zones érogènes des zones de </font></s><i><font style="vertical-align: inherit;">douleur</font></i><font style="vertical-align: inherit;"> et de </font><i><font style="vertical-align: inherit;">futilité</font></i><font style="vertical-align: inherit;"> ont été </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
révélées </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Nous sommes arrivés à la conclusion que, idéalement, </font><b><font style="vertical-align: inherit;">A</font></b><font style="vertical-align: inherit;"> devrait augmenter et diminuer proportionnellement à une diminution et, par conséquent, une augmentation de </font><b><font style="vertical-align: inherit;">I</font></b></font><s><font style="vertical-align: inherit;"></font></s><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Les composants bien conçus doivent être sur ou au moins proches de la séquence principale, c'est-à-dire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> doit être aussi proche de zéro que possible et les dépendances entre les composants doivent être acycliques et orientées vers la stabilité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'espère également que tout le monde comprend que certains composants peuvent en connaître beaucoup d'autres, tandis que d'autres ne devraient rien savoir. Tout comme dans les États esclavagistes avant l'arrivée du bon oncle Abraham, au contraire, les nègres (au sens des Afro-Américains) n'étaient pas autorisés au nichrome (en termes de connaissances, et pas seulement), dans notre cas, les composants les plus importants du système devraient avoir un minimum de connaissances, ils devrait être autosuffisant et abstrait de différents détails. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et le troisième œil? </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture propre PHP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- un outil qui est apparu à la suite de la lecture d'un livre, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grâce à l'oncle Bob</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Robert Martin) pour ses pensées précieuses, et son désir fou de visualiser le tout, pour la commodité de l'analyse, et d'automatiser, pour la possibilité d'inclure diverses vérifications dans CI / CD (similaire à PHPStan, Phan et d'autres, uniquement pour identifier précisément les problèmes architecturaux).</font></font><a name="30"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outil et projet de test. </font><font style="vertical-align: inherit;">Introduction au sujet</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pouf, tout semble être comme une théorie ... Maintenant, vous pouvez même </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous salir les mains</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour plus de détails. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et donc pour moi maintenant je n'ai pas de chevaux abstraits dans le vide à frotter, et tu as la fin de la lecture c'était moins de raison de m'appeler mudiloy, à cause de laquelle tu as </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baisé</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> passé tellement de temps, je devais </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosrat</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> passer un peu de son, et préparer une démo projet, qui, sobstna, nous allons maintenant faire hara-kiri. Pour les mecs «super doués» qui seront sans aucun doute et voudront se détendre dans les commentaires, concernant ses détails, j'insiste - c'est </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un projet DEMO</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je l'ai coupé en une demi-journée environ, à peu près, sur les genoux de ma copine. Après tout, je ne peux pas donner au grand public les détails des projets de combat avec lesquels je dois travailler ... Les gars de l'épave ne comprendront pas, ils me montreront, mais en ai-je besoin? Eh bien, si vous êtes un simple garçon, pas l'un des "particulièrement remarquables", alors je suis moche pour une si longue introduction, je devais juste prendre les risques et réduire la menace potentielle de reproduction dans les commentaires des bazars à propos de rien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, le projet lui-même se trouve ici </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Chetkov/php-clean-architecture-example-project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'avenir, il pourrait devenir une boutique en ligne à part entière. Je suis certainement un perfectionniste féroce, mais vous devez être un </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non-sens complet</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mangeur de soleil et long foie, en plus de souffrir d'insomnie, afin de passer autant de temps sur le «lapin expérimental» et en confectionner des bonbons. Comme vous le comprenez, ce projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sera </font><b><font style="vertical-align: inherit;">jamais</font></b><font style="vertical-align: inherit;"> mené à son terme logique </font><font style="vertical-align: inherit;">, cependant, comme tous les autres, même des projets de combat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que ce ne soit pas si mal. À l'heure actuelle, il a: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilisateur, produit et commande</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ainsi que des scénarios: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enregistrement d'utilisateur, changement de mot de passe, ajout d'un produit et réservation d'une commande</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le projet fonctionne plus ou moins, vous pouvez le cloner vous-même et exécuter des scripts à partir du dossier sandbox, bien qu'en fait, je n'ai même pas pu le faire, car pour l'analyse de l'architecture, le projet ne nécessite pas d'opérabilité.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'avenir, je mettrai des liens vers des commits spécifiques afin de corriger immédiatement les points techniques décrits dans l'article. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etat initial,</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
je suppose que vous avez déjà réussi à vous familiariser avec la structure. </font><font style="vertical-align: inherit;">Nous pouvons donc continuer.</font></font><a name="31"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous </font><font style="vertical-align: inherit;">incluons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP Clean Architecture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<pre><code class="bash hljs">composer require v.chetkov/php-clean-architecture:0.0.3</code></pre><a name="32"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous créons et configurons le fichier de configuration</font></font></a><a name="33"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualisation pour analyse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous exécutons dans la console (à la racine du projet):</font></font><br>
<br>
<pre><code class="bash hljs">vendor/bin/phpca-build-reports</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><pre><code class="bash hljs">vendor/bin/phpca-build-reports /path/to/phpca-config.php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et en réponse, nous obtenons:</font></font><br>
<br>
<pre><code class="bash hljs">Report: /path/to/reports-dir/index.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le rapport se compose de 3 écrans:</font></font><a name="34"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Informations générales sur le système</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/pu/fx/qr/pufxqrtzh84_faltmuyavha60na.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cet écran affiche:</font></font><a name="35"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le même </font><font style="vertical-align: inherit;">graphique </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A / I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> montrant la dispersion des composants:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/ef/ba/omefbattpqlmig8toha6fkaiebo.png" alt="image"><a name="36"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Graphique montrant l'éloignement des composants de la séquence principale:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/wc/c4/1owcc49v0-3xpt2ty6tlake7iu4.png" alt="image"><a name="37"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et un graphique montrant les relations entre les composants: les </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i-/g5/gu/i-g5guwpecojz4hflw0v52pfsau.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flèches indiquent la direction des dépendances et les nombres sur elles indiquent la force de la connexion. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parce que Les IDE modernes fournissent un moyen facile de refactoriser (ils trouvent eux-mêmes et corrigent tous les domaines où la méthode ou la classe est explicitement appelée, par exemple, lors du changement de nom ou du transfert vers un autre espace de noms), j'ai pris le nombre d'éléments du module de dépendance utilisé par le module dépendant pour la force de communication. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple: les éléments du module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">services</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> connaissent environ 12 éléments du module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les éléments </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> connaissent 1 élément de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">services</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, ce qui est </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* non défini *</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Bro, la question attendue. </font><font style="vertical-align: inherit;">Il s'agit d'un module créé automatiquement pour tous les éléments qui, lors de l'analyse du système, n'ont pu être attribués à aucun des éléments connus (c'est-à-dire ceux répertoriés dans le fichier de configuration). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si, cependant, vous corrigez la configuration de cette manière: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/2i/e7/cm2ie7i06bwj3ygr6qur5hwsrqq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, dans le processus d'analyse du système, les paquets connectés via composer seront également pris en compte (ils ne seront pas eux-mêmes scannés, mais l'image deviendra beaucoup plus complète). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vendor_path,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous devez spécifier le chemin vers le répertoire du fournisseur et dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> chemins </font><b><font style="vertical-align: inherit;">exclus</font></b><font style="vertical-align: inherit;"> vers les répertoires des packages que nous voulons exclure (par exemple, si nous décrivons un package dans la configuration principale des modules à analyser). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir activé </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vendor_based_modules</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le graphique a changé, bien que nous n'ayons pas changé la configuration des modules eux-mêmes</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/ll/vn/-kllvnfj6fdxmxzofi3wnya1gkg.png" alt="image"><a name="38"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Informations détaillées sur le composant</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/t2/ha/tp/t2hatp-gycfkeb2ytwctj4gdgvs.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ici, nous voyons également:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphique des interconnexions</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais pas de l'ensemble du système, mais uniquement des composants impliqués</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphique A / I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> affichant uniquement le composant actuel</font></font><a name="39"></a></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caractéristiques du</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> module </font><b><font style="vertical-align: inherit;">clé</font></b></font><br>
<br>
<img src="https://habrastorage.org/webt/op/ma/rd/opmardxolzmxvfkk-qeefl43tba.png" alt="image"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et</font></font><a name="40"></a><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphique de dépendance sortante</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> montrant le nombre et la liste des fichiers dans le module actuel, en fonction des fichiers des autres modules.</font></font></li>
<li><img src="https://habrastorage.org/webt/tn/95/el/tn95elws4c7m-7umkpep_wgfcvo.png" alt="image"></li>
</ul><a name="41"></a><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">graphique des dépendances entrantes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , montrant le nombre et la liste des fichiers dans d'autres modules, selon le module actuel.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kc/f_/hf/kcf_hfe1kqsm1emfwvzfqrpwfp4.png" alt="image"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les 2 derniers graphiques, à mon avis, sont particulièrement intéressants, car </font><font style="vertical-align: inherit;">il est facile de trouver des dépendances indésirables sur eux, mais plus à ce sujet plus tard.</font></font><a name="42"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Informations détaillées sur l'élément composant</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/hl/mn/am/hlmnamudgfqzimh7ec9qscm56pc.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ici, vous pouvez voir:</font></font><a name="43"></a><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caractéristiques principales de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l'élément, tels que l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abstraction de type, l' </font><font style="vertical-align: inherit;">instabilité, primitif,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et à </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">laquelle le </font><font style="vertical-align: inherit;">composant appartient</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le modificateur d'accès</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Che, un modificateur d'accès aux classes en PHP?" </font><font style="vertical-align: inherit;">- vous dites, percer un trou dans la zone du temple avec votre doigt, non? </font><font style="vertical-align: inherit;">Prenez votre temps, je sais qu'il n'y a pas de cours privés sous la chaleur, mais ce serait cool s'ils l'étaient? </font><font style="vertical-align: inherit;">En général, plus à ce sujet plus tard.</font></font><a name="44"></a><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphique de dépendance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui reflète l'interaction de l'élément considéré avec d'autres éléments du système</font></font></li>
</ul><a name="45"></a><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tablettes avec dépendances sortantes et entrantes</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/w4/ay/lf/w4aylfkiqu9jxs4ik8ils0asgpw.png" alt="image"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois la description des écrans terminée, allez dans les configurations pour choisir et piquer comment il peut être configuré.</font></font><a name="46"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options de configuration</font></font></h4><a name="47"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limitation de la distance maximale autorisée par rapport à la séquence principale (pour tous les composants)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tout d'abord, essayons de définir tous les composants sur la distance maximale autorisée par rapport à la séquence principale. Il serait stupide de penser qu'ils se trouveront tous sur la diagonale principale, car le monde n'est pas parfait, alors soyons réalistes. Je fais </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.3</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/ky/cg/l7/kycgl7xitjnerrvsaw-duklidfy.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Redémarrez la commande de génération de rapport et voyez immédiatement la violation sur la page principale. Le composant du </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dépasse la distance autorisée de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,192</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/nq/1l/nk/nq1lnkttwkz2ukpybccin99sarg.png" alt="image"><a name="48"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limiter la distance maximale autorisée à la séquence principale (à un composant spécifique)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
C'est bien, mais supposons que c'est le composant de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui </font><font style="vertical-align: inherit;">peut violer cette restriction. Différentes choses se produisent ... Après tout, nous n'avons souvent pas déjà de systèmes idéaux avec lesquels nous devons travailler, les soutenir et les améliorer. Tout le monde comprend que personne ne pourra réduire rapidement cette distance, même probablement avec un dieu (j'espère qu'il me pardonnera). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À mon avis, l'essentiel est de réparer l'état actuel, de travailler à des améliorations et de contrôler la situation afin de ne pas aggraver. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, accédez à la configuration et définissez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max_allowable_distance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , uniquement pour un module spécifique. Je fixe sa valeur actuelle </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.492</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/cz/nh/3y/cznh3ykeuoalp65gflqjxg0tlag.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ZBS, maintenant tout redevient normal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-z/pq/2u/-zpq2um__xoxqtdyqy2sw81xa0m.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si, avec du ** ka Vasya, il fume à nouveau quelque chose et empire - </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coupez-lui les mains!</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Un CI / CD qui inclut l'exécution de la commande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpca-check</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (nous en parlerons plus tard) le gronde, peut-être même un langage grossier, et bien sûr, il mettra en évidence les erreurs.</font></font><a name="49"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrôle de la dépendance des composants</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Quoi d'autre serait bien d'avoir dans notre arsenal pour faire face à une mauvaise architecture? Bien sûr, le contrôle des dépendances. Qui peut savoir qui, ou vice versa, ne devrait pas savoir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que pensez-vous, la partie très centrale du système, disons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">domaine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , peut-elle permettre à DDDowski de savoir quelque chose sur une </font><font style="vertical-align: inherit;">infrastructure </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">malodorante</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr OUI, pour certains, c'est directement un attribut de réussite (enfin, je parle de ceux qui rendent le HTML mélangé à la logique métier). Mais finalement, comme ça, je ne devrais pas ... Je certes xs, mais toutes sortes de gars intelligents différents dans les livres disent que ce n'est pas patsansky. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors remuons comme ça ... Tout est au même endroit, dans la configuration des restrictions pour le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t9/d-/vq/t9d-vqmz0wzxd9axkfmlise2e1y.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hmm ... Jusqu'à présent, toutes les règles, parce que</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne sait vraiment rien ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien alors amusons-nous ... La stupidité est certainement rare, mais je n'ai rien trouvé de mieux. Krch, au moment de la création de l'utilisateur, nous «enverrons» des SMS et au moment de la création de la commande, «enverrons» les courriels. Et pour ce faire, grâce à des implémentations spécifiques de notifiants qui se trouvent dans l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Chetkov/php-clean-architecture-example-project/commit/6bad365176b30999035967319a9c07fae69fabf9</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Maintenant, nous examinons le rapport ... Comme nous pouvons le voir, les graphiques sur différentes pages du rapport mettent en évidence cette connexion comme illégitime. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accueil. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/ti/e_/k1tie_5t4puunp-vo9cemwfgcu8.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rapport de composant. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xw/r1/qv/xwr1qvfggdbhblauxmfekjbfnfs.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur les graphiques du </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle des</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> «dépendances sortantes» </font><font style="vertical-align: inherit;">et des «dépendances entrantes»</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous voyons immédiatement des éléments qui violent la règle introduite </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/lq/fm/yxlqfmhtpyx81pdmjjjggzered0.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les tableaux des «dépendances sortantes» des éléments du </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et des «dépendances entrantes» des éléments de l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , de la même manière. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPCAEP \ Model \ User \ User </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/_k/ka/du/_kkadurra4ab9onv9kazkypmr8s.png" alt="image"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPCAEP \ Infrastructure \ Notification \ Sms \ SmsNotifier</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/vw/ho/es/vwhoestwzf3m41hr5sbux7n5shs.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ainsi que sur le graphique des relations entre les éléments. Je pense que dans le futur, pour m'en débarrasser complètement, parce que il n'est pas très informatif (en particulier pour les classes activement utilisées, en raison de la longueur du nom des nœuds + leur nombre énorme) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tn/10/wn/tn10wnmnrwjup2vvdfzzghfhwyw.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des actions similaires peuvent être effectuées avec la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allowed_dependencies </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/8t/ki/lh8tkinfuyuzmfe-f4i2giq2p54.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat sera complètement opposé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est possible de composer une config indiquant pour le module et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interdite</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autorisé</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (s'il y a un désir, nous discuterons plus en détail dans les commentaires). Il </font><font style="vertical-align: inherit;">n'est pas encore possible de </font><font style="vertical-align: inherit;">spécifier un composant à la fois en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interdit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autorisé</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... On a pensé à introduire une configuration pour indiquer la priorité, mais jusqu'à présent je n'ai pas fait cela et je ne suis pas sûr de ce que je vais faire. Tout dépend de vos commentaires. Peut-être que tout cela est gaspillé?</font></font><a name="50"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classe publique / privée en PHP</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
D'accord, nous avons appris comment restreindre et contrôler la gamme de connaissances des composants. Déjà pas mal. Et après? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et puis un autre problème. L'ennemi ne dort pas, bien que dans la plupart des cas cet ennemi, nous le sommes nous-mêmes ou nos acolytes au bureau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela arrive après tout, vous avez rencontré une fille, parlé, découvert quelque chose à son sujet, peut-être même courtisé, mais bon sang, ça ne marche pas pour vous. Nous sommes amis et tout ça ... Elle peut vous embrasser quand elle vous rencontre, elle peut vous écouter et vous soutenir avec un mot aimable, mais elle </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne vous donne</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rien à </font><s><font style="vertical-align: inherit;">tuer</font></s><font style="vertical-align: inherit;"> . Alors de quoi je parle ... Ah, ici ... Tout est question d'accessibilité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais dans le code, en permanence ... Connectez un nouveau package, pas un jour ne s'est écoulé, mais il est déjà utilisé, mais directement </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à tous les endroits</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de tous les côtés. La moitié de votre base de code est déjà liée à ses différentes classes. Bref, il a un lien très intime avec les autres. Peut-être que dans certaines situations, c'est la norme, mais pas du tout, non? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Tout va bien, c'est timide. Comment résoudre le problème? " </font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moi: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ne laissez que les classes autorisées pour l'interaction et restreignez l'accès au reste." </font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Mais en PHP, il n'y a pas de modificateurs d'accès pour les classes." </font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moi: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Je suis d'accord, mais il y a une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">architecture PHP propre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ."</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Un exemple sera maintenant à nouveau des toxicomanes, mais que faire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les projets réels, bien sûr, les étuis sont pleins d'étuis, mais ils peuvent apporter une bouteille pour drainer les informations et leur demander de s'asseoir. C'est pourquoi vous devez composer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pour une raison quelconque, il n'y a que 2 classes que les autres sont autorisés à connaître ... Utilisateur et ordre, tout le reste doit être caché. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/e9/4x/qye94xgk0qilcsun6t2b7xcyjfa.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'avons-nous maintenant? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comptez sur le principal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5p/jh/89/5pjh89hoarwanv9cg5s4bnxftqa.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez immédiatement voir quels composants doivent être examinés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous montons pour voir ce qui ne va pas avec l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6e/os/a7/6eosa7uzvggaixprcwujm6zo7iw.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le graphique des «dépendances sortantes», nous voyons des éléments qui violent la règle: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ce/cv/kh/cecvkhbffs9w0zoedu5h19-bqde.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De la même manière, sur la page d'informations sur les éléments. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7b/08/-x/7b08-x0k64pug5ab97xzjeweggc.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtiendrons exactement le résultat opposé si nous </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spécifions private_elements</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans la config </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/bi/z7/eabiz7uuzgdvoer2hlcgrbquya4.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, nous interdisons à tout le monde de connaître Fio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant sur la </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1w/be/xw/1wbexwzh6qyeud-klfzf6ixd4uu.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
page </font><font style="vertical-align: inherit;">principale: </font><font style="vertical-align: inherit;">Sur la page d'informations sur les composants des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">services</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rq/k4/qt/rqk4qtsjvdt320d0nhm9mpgmv9c.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et sur la page d'informations sur l'élément </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPCAEP \ Model \ User \ Fio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/z1/fb/ypz1fbiu9tvqqawxcyxe7lj1rbk.png" alt="image"><a name="51"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surveillance des violations des principes de l'ADP et du SDP</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Néanmoins, nous devons peut-être souligner la possibilité d'inclure des contrôles:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour les violations du principe ADP, à savoir </font><font style="vertical-align: inherit;">pour l'existence de dépendances cycliques dans le graphique ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">check_acyclic_dependencies_principle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et pour les violations du principe SDP, à savoir </font><font style="vertical-align: inherit;">pour les dépendances dirigées de modules plus stables vers moins stables ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">check_stable_dependencies_principle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/wv/q-/4e/wvq-4e6g7ecklhsoiwhveftlvgm.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais cela ne fonctionne que dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpca-check</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jusqu'à présent </font><font style="vertical-align: inherit;">et n'est pas affiché dans le rapport. </font><font style="vertical-align: inherit;">À l'avenir, je pense que je vais le corriger.</font></font><a name="52"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrôle automatique en CI / CD</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant tout ce temps, j'ai parlé de la première partie - la visualisation. </font><font style="vertical-align: inherit;">Et l'analyse qui peut être effectuée sur sa base. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moment est </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">venu</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de faire </font><font style="vertical-align: inherit;">souffrir </font><font style="vertical-align: inherit;">nos </font><s><font style="vertical-align: inherit;">amis govnokodera</font></s><font style="vertical-align: inherit;"> collègues. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous lançons dans la console (à la racine du projet):</font></font><br>
<br>
<pre><code class="bash hljs">vendor/bin/phpca-check</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou </font></font><br>
<br>
<pre><code class="bash hljs">vendor/bin/phpca-check /path/to/phpca-config.php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est supposé que l'exécution de cette commande sera ajoutée au processus CI / CD de votre projet. </font><font style="vertical-align: inherit;">Dans ce cas, l'erreur bloquera tout autre assemblage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le script se termine avec une erreur et lance quelque chose comme ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/fk/yi/gwfkyinqrff76x6_ywh99mkzja0.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
je donne la dent, la liste sera beaucoup plus longue dans un vrai projet.</font></font><a name="53"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compte rendu</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Violation du principe de l'acyclicité des dépendances (ADP)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De même, mais le cycle est un peu plus court</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 éléments de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (répertoriés) dépendent de l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ce qui n'est pas autorisé par la configuration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Violation ADP à nouveau</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre cycle et violation ADP</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Violation SDP car </font><font style="vertical-align: inherit;">un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus durable </font><font style="vertical-align: inherit;">dépend d'une </font><b><font style="vertical-align: inherit;">infrastructure</font></b><font style="vertical-align: inherit;"> moins durable</font></font><b><font style="vertical-align: inherit;"></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encore une fois, la dépendance cyclique</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 élément de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">services</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (répertorié) dépend de Fio non public</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Environ ce résultat, nous avons grâce à nos efforts </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et govnokoding diligent</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, mettons tout dans le cul. </font><font style="vertical-align: inherit;">Eh bien, c'est-à-dire </font><font style="vertical-align: inherit;">pas tout à fait, je laisse les configs naturellement. </font><font style="vertical-align: inherit;">Je règle uniquement le code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, il est logique de corriger les fichiers qui enfreignent les règles pour les dépendances suivantes. </font><font style="vertical-align: inherit;">Dans ce projet, la plupart des cycles disparaîtront probablement d'eux-mêmes, mais dans les vrais, ils devront définitivement bricoler plus longtemps (bien que cela dépende du degré de négligence du système et des paramètres de la configuration).</font></font><a name="54"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dépannage</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ai supprimé une dépendance inventée précédemment. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Chetkov/php-clean-architecture-example-project/commit/f6bbbff1313bb4a22dfb6061f347ef007ba3b422f</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Redémarrez le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vendeur / bin / phpca-check</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/h8/4f/ww/h84fwwfjzezdnpbb4pfo9bafbso.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Eh bien, il n'y a qu'une configuration à modifier, car </font><font style="vertical-align: inherit;">un exemple a vraiment été inventé par un toxicomane. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/ak/t5/ddakt51werp2dhetkwxra8ejyn0.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vendeur / bin / phpca-check</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/pb/k7/tw/pbk7twux3ah-6novxv9adktsw4m.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Et le CI / CD a continué! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout.</font></font><a name="55"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Épilogue</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Attrapez un cinquième si vous le lisez à la fin, sinon, reniflez votre pied sur la route (de toute façon, vous ne l'avez pas vu). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais sérieusement, merci pour votre temps, peu importe si vous avez fusionné au milieu ou que vous l'avez lu, fouillé dans chaque ligne et analysé chaque écran ou parcouru les deux parties en diagonale. </font><font style="vertical-align: inherit;">Merci quand même. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'excuse encore si quelque chose n'allait pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peut-être, ma manière de présenter pourrait sembler à quelqu'un trop imposant ou irrespectueux, je voulais juste diluer légèrement l'article et en aucun cas je ne voulais offenser personne. </font><font style="vertical-align: inherit;">Je pense que sans cela, il se serait avéré trop sec et difficile à lire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis vraiment intéressé de connaître votre opinion et si vous avez des pensées, des idées, des suggestions ou des objections, discutons-en dans les commentaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Du code propre et une architecture flexible pour vous!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504572/index.html">Parlez comme Winston Churchill: qui a besoin de vendre son âme pour communiquer en anglais SO</a></li>
<li><a href="../fr504576/index.html">Comment le son à domicile s'est développé - des soirées chanson aux premiers lecteurs mécaniques</a></li>
<li><a href="../fr504578/index.html">Comment les Américains deviennent millionnaires: les principes du FEU</a></li>
<li><a href="../fr504582/index.html">HackTheBox. Procédure pas à pas Resolute. Pulvérisation par mot de passe. De DnsAdmin à SYSTEM</a></li>
<li><a href="../fr504586/index.html">Innovations ES2020 que j'aime beaucoup</a></li>
<li><a href="../fr504592/index.html">PuppetConf 2016. Kubernetes pour les administrateurs système. 3e partie</a></li>
<li><a href="../fr504598/index.html">Base de données des nombres premiers jusqu'à cent milliards sur le genou</a></li>
<li><a href="../fr504600/index.html">Ce qui attend la compagnie aérienne après la crise: l'avis de Warren Buffett</a></li>
<li><a href="../fr504602/index.html">Telemetría → mesures sans tension</a></li>
<li><a href="../fr504604/index.html">Que se passe-t-il sur le marché des services vidéo aujourd'hui?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>