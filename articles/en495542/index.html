<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüíª üå©Ô∏è üêå Simple homemade VGA graphics card ü§Ωüèæ üôÜüèº üëâüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As far as I know, quite a lot of people are interested in connecting the microcontroller to a regular monitor and trying to display something on the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Simple homemade VGA graphics card</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495542/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As far as I know, quite a lot of people are interested in connecting the microcontroller to a regular monitor and trying to display something on the screen. </font><font style="vertical-align: inherit;">This article will discuss the creation of the simplest VGA-video card based on the atmega168-20 microcontroller.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generally speaking, this project is a hundred years old at lunchtime. But once I promised to talk about this video card here too, but everything was laziness. Now it's time to fulfill the promise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This video card produces a picture with a resolution of 254x240 pixels with 256 colors. This whole thing works in the standard VGA mode 640x480 at 60 Hz sweep. I tested this video card with 6 monitors (1 CRT and 5 LCDs), while the card worked on all monitors, except for the Acer monitor. What he did not like the signal, I did not understand. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the mock-up version, the video card looks like this: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/wa/9f/flwa9fxyeihxhnrnhi0idbgdfbu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
video card consists of two modules: a memory module and a DAC module.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The memory module simply generates synchronization signals (HS, VS) and beam blanking (BL) and gives out a color code (D0 ... D7), which the DAC module converts to 0-0.7 V and sends it to the monitor. The microcontroller of the memory module simply goes over the addresses of the static RAM, and the data from the RAM is the color of the dots. Using an Atmega168 microcontroller with a frequency of 20 MHz, 2 clock cycles per point are required, therefore this part of the program is written in assembler and expanded into a repeating fragment for each point of the line. I will allow myself not to describe the time-dependent sweep of the VGA signal, especially since the Internet is full of information on this subject (although it often does not coincide with each other), and over the past years I have already forgotten quite a bit what time chart I implemented in this video card. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dv/tu/5s/dvtu5stjwwwm5wooomtknzce4c4.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scheme of the memory module (opening in a new window, you can increase).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The DAC module consists of three ordinary R-2R DACs with keys and an output emitter follower (due to which a range of colors is "cut" a little). If anyone comes up with how cheaply and angrily to fix this "stabbing" - you are welcome to comment. On a radio cat I was advised to replace the emitter repeater with a source one, but I still did not check this advice. As you can see from the diagram, I assigned 3 bits to red, 3 bits to green and 2 bits to blue. I took transistors KT-315. :) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9x/nf/xd/9xnfxdqsavvxbo_rtdxpfhhotb0.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DAC circuit.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What exactly the video card will display is determined by the control controller. </font><font style="vertical-align: inherit;">Its task is to set the address on the address bus (A0 ... A15), set the data on the data bus (D0 ... D7), set the signals WR (write to low level), OE (permission to output data at low level) and set A / B signal (switching memory to work with the control controller at a low level). </font><font style="vertical-align: inherit;">The control controller receives a beam blanking signal (BL) from the memory card, which can be used to synchronize recording to the video card's memory. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Such a video card works like this:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cDFSwHGo0lQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Printed circuit boards and firmware with their source. </font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good luck in the development of the project!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495530/index.html">Hardware Converter HDMI-RGB (18/24-bit)</a></li>
<li><a href="../en495532/index.html">How large IT companies transferred their staff to remote work</a></li>
<li><a href="../en495534/index.html">Zabbix Conference Russia 2020: conference rescheduled</a></li>
<li><a href="../en495538/index.html">The project "Glass". Part 2. Sugar, insulated walls and blow or not blow</a></li>
<li><a href="../en495540/index.html">How to escape from the news agenda and relax: podcasts, movies and music will help</a></li>
<li><a href="../en495544/index.html">Life hacks for parents. How to keep children quarantined</a></li>
<li><a href="../en495548/index.html">Notes on developing an MRI controller</a></li>
<li><a href="../en495550/index.html">The Most Wonderful Unix Programs</a></li>
<li><a href="../en495552/index.html">–ú–æ—è –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–¥–µ—Ä–∂–∞—Ç—å COVID-19 (–∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–π –∞–ø–ø–∞—Ä–∞—Ç)</a></li>
<li><a href="../en495554/index.html">Program for searching like-minded VKontakte [Open source]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>