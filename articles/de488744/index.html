<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋🏻 💂🏼 🛂 Anleitung zum Arbeiten mit OpenAL in C ++. Teil 1: Ton abspielen 🦄 🏇🏿 🚞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dein Spiel braucht Sound! Sie haben OpenGL wahrscheinlich bereits zum Zeichnen auf dem Bildschirm verwendet. Sie haben die API herausgefunden und sich...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Anleitung zum Arbeiten mit OpenAL in C ++. Teil 1: Ton abspielen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488744/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dein Spiel braucht Sound! </font><font style="vertical-align: inherit;">Sie haben OpenGL wahrscheinlich bereits zum Zeichnen auf dem Bildschirm verwendet. </font><font style="vertical-align: inherit;">Sie haben die API herausgefunden und sich an </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gewandt, </font><font style="vertical-align: inherit;">weil </font><font style="vertical-align: inherit;">Ihnen </font><font style="vertical-align: inherit;">der Name bekannt vorkommt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die gute Nachricht ist, dass OpenAL auch eine sehr vertraute API hat. </font><font style="vertical-align: inherit;">Es wurde ursprünglich entwickelt, um die OpenGL-Spezifikations-API zu simulieren. </font><font style="vertical-align: inherit;">Deshalb habe ich es unter den vielen Soundsystemen für Spiele ausgewählt; </font><font style="vertical-align: inherit;">Darüber hinaus ist es plattformübergreifend. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel werde ich ausführlich darüber sprechen, welcher Code für die Verwendung von OpenAL in einem in C ++ geschriebenen Spiel benötigt wird. </font><font style="vertical-align: inherit;">Wir werden Sounds, Musik und Soundpositionierung im 3D-Raum anhand von Codebeispielen diskutieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschichte von OpenAL</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde versuchen, mich kurz zu fassen. Wie oben erwähnt, wurde es absichtlich als Nachahmung der OpenGL-API entwickelt, und es gibt einen Grund dafür. Dies ist eine praktische API, die vielen bekannt ist. Wenn die Grafiken eine Seite der Spiel-Engine sind, sollte der Sound anders sein. Ursprünglich sollte OpenAL Open Source sein, aber dann passierte etwas ... Die </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leute interessieren sich nicht so sehr für Sound wie für Grafiken, also machte Creative OpenAL schließlich zu seinem Eigentum, und die </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referenzimplementierung ist</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jetzt proprietär und nicht kostenlos. Aber! </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenAL- </font><em><font style="vertical-align: inherit;">Spezifikation</font></em><font style="vertical-align: inherit;"> ist immer noch ein „offener“ Standard, dh sie wird </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veröffentlicht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von Zeit zu Zeit werden Spezifikationen geändert, aber nicht viele. Der Sound ändert sich nicht so schnell wie die Grafik, da dies nicht besonders erforderlich ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die offene Spezifikation ermöglichte es anderen Personen, eine Open-Source-Implementierung der Spezifikation zu erstellen. Eine solche Implementierung ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAL Soft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und ehrlich gesagt macht es keinen Sinn, nach anderen zu suchen. Dies ist die Implementierung, die ich verwenden werde, und ich empfehle, dass Sie sie auch verwenden.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie ist plattformübergreifend. </font><font style="vertical-align: inherit;">Es ist ziemlich merkwürdig implementiert - tatsächlich verwendet die Bibliothek andere Sound-APIs, die in Ihrem System vorhanden sind. </font><font style="vertical-align: inherit;">Unter Windows wird </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectSound</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , unter Unix </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSS verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dank dessen konnte sie plattformübergreifend werden; </font><font style="vertical-align: inherit;">Im Wesentlichen ist dies ein großer Name für die Wrapper-API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Möglicherweise sind Sie besorgt über die Geschwindigkeit dieser API. </font><font style="vertical-align: inherit;">Aber mach dir keine Sorgen. </font><font style="vertical-align: inherit;">Dies ist der gleiche Sound, und es wird keine große Last erstellt, sodass keine großen Optimierungen erforderlich sind, die für die Grafik-API erforderlich sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber genug Geschichte, gehen wir weiter zur Technologie.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was benötigen Sie, um Code in OpenAL zu schreiben?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen OpenAL Soft in der Toolchain Ihrer Wahl erstellen. Dies ist ein sehr einfacher Vorgang, den Sie gemäß den Anweisungen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Abschnitt Quellinstallation ausführen können</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ich hatte noch nie Probleme damit, aber wenn Sie irgendwelche Schwierigkeiten haben, schreiben Sie einen Kommentar unter den Originalartikel oder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schreiben Sie an die OpenAL Soft Mailingliste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes benötigen Sie einige Audiodateien und eine Möglichkeit, sie herunterzuladen. Das Laden von Audiodaten in Puffer und subtile Details verschiedener Audioformate fallen nicht in den Geltungsbereich dieses Artikels. Sie können jedoch Informationen zum </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herunterladen und Streamen von Ogg / Vorbis-Dateien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">. Das Herunterladen von WAV-Dateien ist sehr einfach. Es gibt bereits Hunderte von Artikeln im Internet darüber.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Aufgabe, Audiodateien zu finden, müssen Sie selbst entscheiden. </font><font style="vertical-align: inherit;">Es gibt viele Geräusche und Explosionen im Internet, die Sie herunterladen können. </font><font style="vertical-align: inherit;">Wenn Sie ein Gerücht haben, können Sie versuchen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Ihre eigene Chiptune-Musik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">schreiben</font></a><font style="vertical-align: inherit;"> [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übersetzung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf Habré]. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Halten Sie außerdem das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmierhandbuch von OpenALSoft bereit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Diese Dokumentation ist viel besser als PDF mit "offizieller" Spezialisierung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist in der Tat alles. </font><font style="vertical-align: inherit;">Wir gehen davon aus, dass Sie bereits wissen, wie man Code schreibt, die IDE und die Toolchain verwendet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAL API Übersicht</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie ich bereits mehrfach sagte, ähnelt es der OpenGL-API. Die Ähnlichkeit liegt in der Tatsache, dass es auf Zuständen basiert und Sie mit Deskriptoren / Bezeichnern interagieren und nicht direkt mit den Objekten selbst. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt Diskrepanzen zwischen den API-Konventionen in OpenGL und OpenAL, diese sind jedoch nicht signifikant. In OpenGL müssen Sie spezielle Betriebssystemaufrufe ausführen, um einen Renderkontext zu generieren. Diese Herausforderungen sind für verschiedene Betriebssysteme unterschiedlich und </font><font style="vertical-align: inherit;">nicht </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wirklich</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil der OpenGL-Spezifikation. In OpenAL ist alles anders - die Funktionen zur Kontexterstellung sind Teil der Spezifikation und unabhängig vom Betriebssystem gleich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Interaktion mit der API gibt es drei Haupttypen von Objekten, mit denen Sie interagieren. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zuhörer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">("Zuhörer") ist die Position der "Ohren" im 3D-Raum (es gibt immer nur einen Zuhörer). </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quellen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> („Quellen“) sind „Lautsprecher“, die wiederum im 3D-Raum Ton erzeugen. </font><font style="vertical-align: inherit;">Hörer und Quellen können im Raum bewegt werden und abhängig davon ändert sich das, was Sie über die Lautsprecher im Spiel hören. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die letzten Objekte sind </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puffer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie speichern Klangbeispiele, die Quellen für Hörer abspielen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt auch </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mit denen das Spiel die Art und Weise ändert, wie Audio über OpenAL verarbeitet wird.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quellen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie oben erwähnt, sind diese Objekte Schallquellen. </font><font style="vertical-align: inherit;">Sie können in Position und Richtung eingestellt werden und sind einem Puffer für die Wiedergabe von Audiodaten zugeordnet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hörer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der einzige Satz von "Ohren" im Spiel. </font><font style="vertical-align: inherit;">Was der Hörer hört, wird über die Lautsprecher des Computers wiedergegeben. </font><font style="vertical-align: inherit;">Er hat auch eine Position.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puffer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In OpenGL entspricht dies Texture2D. </font><font style="vertical-align: inherit;">Im Wesentlichen sind dies die Audiodaten, die von der Quelle reproduziert werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datentypen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um plattformübergreifenden Code unterstützen zu können, führt OpenAL eine bestimmte Abfolge von Aktionen aus und definiert einige Datentypen. </font><font style="vertical-align: inherit;">Tatsächlich folgt es OpenGL so genau, dass wir OpenAL-Typen sogar direkt in OpenGL-Typen konvertieren können. </font><font style="vertical-align: inherit;">In der folgenden Tabelle sind sie und ihre Entsprechungen aufgeführt.</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie openal ein</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie openalc ein</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geben Sie opengl ein</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ Typedef</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALboolean</code></td>
<td><code>ALCboolean</code></td>
<td><code>GLboolean</code></td>
<td><code>std::int8_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8-Bit-Boolescher Wert</font></font></td>
</tr>
<tr>
<td><code>ALbyte</code></td>
<td><code>ALCbyte</code></td>
<td><code>GLbyte</code></td>
<td><code>std::int8_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8-Bit-Ganzzahlwert des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zusätzlichen Codes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit einem Vorzeichen</font></font></td>
</tr>
<tr>
<td><code>ALubyte</code></td>
<td><code>ALCubyte</code></td>
<td><code>GLubyte</code></td>
<td><code>std::uint8_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8-Bit-Ganzzahlwert ohne Vorzeichen</font></font></td>
</tr>
<tr>
<td><code>ALchar</code></td>
<td><code>ALCchar</code></td>
<td><code>GLchar</code></td>
<td><code>char</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Symbol</font></font></td>
</tr>
<tr>
<td><code>ALshort</code></td>
<td><code>ALCshort</code></td>
<td><code>GLshort</code></td>
<td><code>std::int16_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16-Bit-Ganzzahlwert mit Vorzeichen</font></font></td>
</tr>
<tr>
<td><code>ALushort</code></td>
<td><code>ALCushort</code></td>
<td><code>GLushort</code></td>
<td><code>std::uint16_t</code></td>
<td>16-    </td>
</tr>
<tr>
<td><code>ALint</code></td>
<td><code>ALCint</code></td>
<td><code>GLint</code></td>
<td><code>std::int32_t</code></td>
<td>32-      </td>
</tr>
<tr>
<td><code>ALuint</code></td>
<td><code>ALCuint</code></td>
<td><code>GLuint</code></td>
<td><code>std::uint32_t</code></td>
<td>32-    </td>
</tr>
<tr>
<td><code>ALsizei</code></td>
<td><code>ALCsizei</code></td>
<td><code>GLsizei</code></td>
<td><code>std::int32_t</code></td>
<td> 32-   </td>
</tr>
<tr>
<td><code>ALenum</code></td>
<td><code>ALCenum</code></td>
<td><code>GLenum</code></td>
<td><code>std::uint32_t</code></td>
<td> 32- </td>
</tr>
<tr>
<td><code>ALfloat</code></td>
<td><code>ALCfloat</code></td>
<td><code>GLfloat</code></td>
<td><code>float</code></td>
<td>32-     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IEEE 754</a></td>
</tr>
<tr>
<td><code>ALdouble</code></td>
<td><code>ALCdouble</code></td>
<td><code>GLdouble</code></td>
<td><code>double</code></td>
<td>64-     IEEE 754</td>
</tr>
<tr>
<td><code>ALvoid</code></td>
<td><code>ALCvoid</code></td>
<td><code>GLvoid</code></td>
<td><code>void</code></td>
<td> </td>
</tr>
</tbody>
</table></div><br>
<h2>  OpenAL</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt einen Artikel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zur Vereinfachung der OpenAL-Fehlererkennung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der Vollständigkeit halber werde ich ihn hier wiederholen. Es gibt zwei </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arten</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von OpenAL-API-Aufrufen: reguläre und kontextbezogene. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kontextaufrufe, die mit beginnen, </font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ähneln OpenGL-Win32-Aufrufen, um den Renderkontext oder deren Gegenstücke unter Linux abzurufen. Sound ist so einfach, dass alle Betriebssysteme die gleichen Anrufe haben. Gewöhnliche Anrufe beginnen mit </font></font><code>al</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Um Fehler bei kontextbezogenen Aufrufen zu erhalten, rufen wir auf </font></font><code>alcGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Bei regelmäßigen Anrufen rufen wir an </font></font><code>alGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sie geben entweder einen Wert </font></font><code>ALCenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder einen Wert zurück </font></font><code>ALenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der einfach mögliche Fehler auflistet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden wir nur einen Fall betrachten, aber in allem anderen sind sie fast gleich. </font><font style="vertical-align: inherit;">Nehmen wir die üblichen Herausforderungen an </font></font><code>al</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Erstellen Sie zunächst ein Präprozessor-Makro, um die langweilige Aufgabe des Übergebens von Details zu erledigen:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> alCall(function, ...) alCallImpl(__FILE__, __LINE__, function, __VA_ARGS__)</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Theoretisch Compiler unterstützen können nicht </font></font><code>__FILE__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entweder </font></font><code>__LINE__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber, um ehrlich zu sein, würde ich überrascht sein , </font><font style="vertical-align: inherit;">wenn das so entpuppt. </font></font><code>__VA_ARGS__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bezeichnet eine variable Anzahl von Argumenten, die an dieses Makro übergeben werden können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Nächstes implementieren wir eine Funktion, die den zuletzt gemeldeten Fehler manuell empfängt und dem Standardfehlerstrom einen eindeutigen Wert anzeigt.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">check_al_errors</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; filename, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line)</span>
</span>{<font></font>
    ALenum error = alGetError();<font></font>
    <span class="hljs-keyword">if</span>(error != AL_NO_ERROR)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"***ERROR*** ("</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; line &lt;&lt; <span class="hljs-string">")\n"</span> ;
        <span class="hljs-keyword">switch</span>(error)<font></font>
        {<font></font>
        <span class="hljs-keyword">case</span> AL_INVALID_NAME:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_NAME: a bad name (ID) was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_INVALID_ENUM:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_ENUM: an invalid enum value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_INVALID_VALUE:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_VALUE: an invalid value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_INVALID_OPERATION:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_OPERATION: the requested operation is not valid"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_OUT_OF_MEMORY:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_OUT_OF_MEMORY: the requested operation resulted in OpenAL running out of memory"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"UNKNOWN AL ERROR: "</span> &lt;&lt; error;<font></font>
        }<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt nicht viele mögliche Fehler. </font><font style="vertical-align: inherit;">Die Erklärungen, die ich im Code geschrieben habe, sind die einzigen Informationen, die Sie über diese Fehler erhalten. Die Spezifikation erklärt jedoch, warum eine bestimmte Funktion möglicherweise einen bestimmten Fehler zurückgibt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anschließend implementieren wir zwei verschiedene Vorlagenfunktionen, die alle unsere OpenGL-Aufrufe umschließen.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alFunction, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename, 
                <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, 
                alFunction function, 
                Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;!<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;
</span>{
    <span class="hljs-keyword">auto</span> ret = function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);<font></font>
    check_al_errors(filename,line);<font></font>
    <span class="hljs-keyword">return</span> ret;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alcFunction, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alcCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename, 
                 <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, 
                 alcFunction function, 
                 ALCdevice* device, 
                 Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-keyword">bool</span>&gt;
</span>{<font></font>
    function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);
    <span class="hljs-keyword">return</span> check_alc_errors(filename,line,device);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei davon, da die erste für OpenAL-Funktionen verwendet wird, die zurückgeben </font></font><code>void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und die zweite verwendet wird, wenn die Funktion einen nicht leeren Wert zurückgibt. </font><font style="vertical-align: inherit;">Wenn Sie mit Metaprogrammiervorlagen in C ++ nicht sehr vertraut sind, schauen Sie sich die Teile des C-Codes an </font></font><code>std::enable_if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie bestimmen für jeden Funktionsaufruf, welche dieser Vorlagenfunktionen vom Compiler implementiert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt das gleiche für Anrufe </font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> alcCall(function, device, ...) alcCallImpl(__FILE__, __LINE__, function, device, __VA_ARGS__)</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">check_alc_errors</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; filename, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, ALCdevice* device)</span>
</span>{<font></font>
    ALCenum error = alcGetError(device);<font></font>
    <span class="hljs-keyword">if</span>(error != ALC_NO_ERROR)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"***ERROR*** ("</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; line &lt;&lt; <span class="hljs-string">")\n"</span> ;
        <span class="hljs-keyword">switch</span>(error)<font></font>
        {<font></font>
        <span class="hljs-keyword">case</span> ALC_INVALID_VALUE:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_VALUE: an invalid value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_INVALID_DEVICE:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_DEVICE: a bad device was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_INVALID_CONTEXT:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_CONTEXT: a bad context was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_INVALID_ENUM:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_ENUM: an unknown enum value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_OUT_OF_MEMORY:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_OUT_OF_MEMORY: an unknown enum value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"UNKNOWN ALC ERROR: "</span> &lt;&lt; error;<font></font>
        }<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alcFunction, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alcCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename, 
                 <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, 
                 alcFunction function, 
                 ALCdevice* device, 
                 Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-keyword">bool</span>&gt;
</span>{<font></font>
    function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);
    <span class="hljs-keyword">return</span> check_alc_errors(filename,line,device);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alcFunction, <span class="hljs-keyword">typename</span> ReturnType, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alcCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename,
                 <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line,
                 alcFunction function,
                 ReturnType&amp; returnValue,
                 ALCdevice* device, 
                 Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;!<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-keyword">bool</span>&gt;
</span>{<font></font>
    returnValue = function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);
    <span class="hljs-keyword">return</span> check_alc_errors(filename,line,device);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die größte Änderung ist die Einbeziehung </font></font><code>device</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die alle Aufrufe verwenden </font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sowie die entsprechende Verwendung von Stilfehlern </font></font><code>ALCenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>ALC_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie sehen sich sehr ähnlich und für eine sehr lange Zeit haben kleine Änderungen von </font></font><code>al</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu </font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meinen Code und mein Verständnis stark beschädigt, so dass ich einfach weiter darüber gelesen habe </font></font><code>c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles. </font><font style="vertical-align: inherit;">In der Regel sieht ein OpenAL-Aufruf in C ++ wie eine der folgenden Optionen aus:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* example #1 */</span>
alGenSources(<span class="hljs-number">1</span>, &amp;source);<font></font>
ALenum error = alGetError();<font></font>
<span class="hljs-keyword">if</span>(error != AL_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #2 */</span><font></font>
alcCaptureStart(&amp;device);<font></font>
ALCenum error = alcGetError();<font></font>
<span class="hljs-keyword">if</span>(error != ALC_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #3 */</span>
<span class="hljs-keyword">const</span> ALchar* sz = alGetString(param);<font></font>
ALenum error = alGetError();<font></font>
<span class="hljs-keyword">if</span>(error != AL_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #4 */</span>
<span class="hljs-keyword">const</span> ALCchar* sz = alcGetString(&amp;device, param);<font></font>
ALCenum error = alcGetError();<font></font>
<span class="hljs-keyword">if</span>(error != ALC_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber jetzt können wir es so machen:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* example #1 */</span>
<span class="hljs-keyword">if</span>(!alCall(alGenSources, <span class="hljs-number">1</span>, &amp;source))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #2 */</span>
<span class="hljs-keyword">if</span>(!alcCall(alcCaptureStart, &amp;device))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #3 */</span>
<span class="hljs-keyword">const</span> ALchar* sz;
<span class="hljs-keyword">if</span>(!alCall(alGetString, sz, param))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #4 */</span>
<span class="hljs-keyword">const</span> ALCchar* sz;
<span class="hljs-keyword">if</span>(!alcCall(alcGetString, sz, &amp;device, param))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es mag Ihnen seltsam erscheinen, aber es ist bequemer für mich. </font><font style="vertical-align: inherit;">Natürlich können Sie eine andere Struktur wählen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden Sie WAV-Dateien herunter</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können sie entweder selbst herunterladen oder die Bibliothek verwenden. </font><font style="vertical-align: inherit;">Hier ist eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open-Source-Implementierung zum Laden von WAV-Dateien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ich bin verrückt, also mache ich es selbst:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> <span class="hljs-title">convert_to_int</span><span class="hljs-params">(<span class="hljs-keyword">char</span>* buffer, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> len)</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> a = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::endian::native == <span class="hljs-built_in">std</span>::endian::little)
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">memcpy</span>(&amp;a, buffer, len);
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i)
            <span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">char</span>*&gt;(&amp;a)[<span class="hljs-number">3</span> - i] = buffer[i];
    <span class="hljs-keyword">return</span> a;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">load_wav_file_header</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::ifstream&amp; file,
                          <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; channels,
                          <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span>&amp; sampleRate,
                          <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; bitsPerSample,
                          ALsizei&amp; size)</span>
</span>{
    <span class="hljs-keyword">char</span> buffer[<span class="hljs-number">4</span>];
    <span class="hljs-keyword">if</span>(!file.is_open())
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
<font></font>
    <span class="hljs-comment">// the RIFF</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read RIFF"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">strncmp</span>(buffer, <span class="hljs-string">"RIFF"</span>, <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: file is not a valid WAVE file (header doesn't begin with RIFF)"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// the size of the file</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read size of file"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// the WAVE</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read WAVE"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">strncmp</span>(buffer, <span class="hljs-string">"WAVE"</span>, <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: file is not a valid WAVE file (header doesn't contain WAVE)"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// "fmt/0"</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read fmt/0"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// this is always 16, the size of the fmt data chunk</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read the 16"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// PCM should be 1?</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read PCM"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// the number of channels</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read number of channels"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    channels = convert_to_int(buffer, <span class="hljs-number">2</span>);<font></font>
<font></font>
    <span class="hljs-comment">// sample rate</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read sample rate"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    sampleRate = convert_to_int(buffer, <span class="hljs-number">4</span>);<font></font>
<font></font>
    <span class="hljs-comment">// (sampleRate * bitsPerSample * channels) / 8</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read (sampleRate * bitsPerSample * channels) / 8"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// ?? dafaq</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read dafaq"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// bitsPerSample</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read bits per sample"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    bitsPerSample = convert_to_int(buffer, <span class="hljs-number">2</span>);<font></font>
<font></font>
    <span class="hljs-comment">// data chunk header "data"</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read data chunk header"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">strncmp</span>(buffer, <span class="hljs-string">"data"</span>, <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: file is not a valid WAVE file (doesn't have 'data' tag)"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// size of data</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read data size"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    size = convert_to_int(buffer, <span class="hljs-number">4</span>);<font></font>
<font></font>
    <span class="hljs-comment">/* cannot be at the end of file */</span>
    <span class="hljs-keyword">if</span>(file.eof())<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: reached EOF on the file"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(file.fail())<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: fail state set on the file"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">char</span>* <span class="hljs-title">load_wav</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; filename,
               <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; channels,
               <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span>&amp; sampleRate,
               <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; bitsPerSample,
               ALsizei&amp; size)</span>
</span>{
    <span class="hljs-function"><span class="hljs-built_in">std</span>::ifstream <span class="hljs-title">in</span><span class="hljs-params">(filename, <span class="hljs-built_in">std</span>::ios::binary)</span></span>;
    <span class="hljs-keyword">if</span>(!in.is_open())<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not open \""</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">"\""</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(!load_wav_file_header(in, channels, sampleRate, bitsPerSample, size))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not load wav header of \""</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">"\""</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">char</span>* data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[size];<font></font>
<font></font>
    in.read(data, size);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> data;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde den Code nicht erklären, da dies nicht vollständig Gegenstand unseres Artikels ist. </font><font style="vertical-align: inherit;">Es ist jedoch sehr offensichtlich, wenn Sie es parallel zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spezifikation der WAV-Datei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialisierung und Zerstörung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst müssen wir OpenAL initialisieren und dann, wie jeder gute Programmierer, beenden, wenn wir mit der Arbeit fertig sind. </font><font style="vertical-align: inherit;">Es wird während der Initialisierung verwendet </font></font><code>ALCdevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(beachten Sie, dass dies </font><i><font style="vertical-align: inherit;">nicht</font></i><font style="vertical-align: inherit;"> der Fall </font></font><code>ALC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist </font><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Dies </font><font style="vertical-align: inherit;">stellt im </font><font style="vertical-align: inherit;">Wesentlichen etwas auf Ihrem Computer zum Abspielen von Hintergrundmusik dar und verwendet es </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ähnlich wie bei der Auswahl einer Grafikkarte. </font><font style="vertical-align: inherit;">auf dem Ihr OpenGL-Spiel gerendert wird. </font><font style="vertical-align: inherit;">Ähnlich dem Rendering-Kontext, den Sie für OpenGL erstellen möchten (einzigartig für das Betriebssystem).</font></font><i><font style="vertical-align: inherit;"></font></i> <code>AL</code><font style="vertical-align: inherit;"></font><code>ALCcontext</code><font style="vertical-align: inherit;"></font><br>
<br>
<code>ALCdevice</code><font style="vertical-align: inherit;"></font><code>ALCcontext</code><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alcdevice</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein OpenAL-Gerät ist das, worüber der Sound ausgegeben wird, egal ob es sich um eine Soundkarte oder einen Chip handelt, aber theoretisch kann es viele verschiedene Dinge sein. Ähnlich wie die Standardausgabe </font></font><code>iostream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein Drucker anstelle eines Bildschirms sein kann, kann ein Gerät eine Datei oder sogar ein Datenstrom sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Programmierung von Spielen handelt es sich jedoch um ein Soundgerät, und normalerweise möchten wir, dass es sich um ein Standard-Soundausgabegerät im System handelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine Liste der im System verfügbaren Geräte zu erhalten, können Sie diese mit folgender Funktion anfordern:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">get_available_devices</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;&amp; devicesVec, ALCdevice* device)</span>
</span>{
    <span class="hljs-keyword">const</span> ALCchar* devices;
    <span class="hljs-keyword">if</span>(!alcCall(alcGetString, devices, device, <span class="hljs-literal">nullptr</span>, ALC_DEVICE_SPECIFIER))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
<font></font>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* ptr = devices;<font></font>
<font></font>
    devicesVec.clear();<font></font>
<font></font>
    <span class="hljs-keyword">do</span><font></font>
    {<font></font>
        devicesVec.push_back(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>(ptr));<font></font>
        ptr += devicesVec.back().size() + <span class="hljs-number">1</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">while</span>(*(ptr + <span class="hljs-number">1</span>) != <span class="hljs-string">'\0'</span>);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist eigentlich nur ein Wrapper um einen Wrapper um einen Anruf </font></font><code>alcGetString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Der Rückgabewert ist ein Zeiger auf eine Liste von Zeichenfolgen, die durch einen Wert getrennt sind </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und mit zwei Werten enden </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Hier verwandelt der Wrapper ihn einfach in einen für uns geeigneten Vektor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Glück müssen wir das nicht tun! Im Allgemeinen können die meisten Spiele, wie ich vermute, standardmäßig einfach Sound auf das Gerät ausgeben, unabhängig davon, um was es sich handelt. Ich sehe selten die Optionen zum Ändern des Audiogeräts, über das Sie Ton ausgeben möchten. Um das OpenAL-Gerät zu initialisieren, verwenden wir daher einen Aufruf </font></font><code>alcOpenDevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dieser Aufruf unterscheidet sich geringfügig von allem anderen, da er nicht den Fehlerstatus angibt, über den er abgerufen werden kann. Daher nennen </font></font><code>alcGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir ihn wie eine normale Funktion:</font></font><br>
<br>
<pre><code class="cpp hljs">ALCdevice* openALDevice = alcOpenDevice(<span class="hljs-literal">nullptr</span>);
<span class="hljs-keyword">if</span>(!openALDevice)<font></font>
{<font></font>
    <span class="hljs-comment">/* fail */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie die Geräte wie oben gezeigt aufgelistet haben und der Benutzer eines davon auswählen soll, müssen Sie </font></font><code>alcOpenDevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stattdessen </font><font style="vertical-align: inherit;">dessen Namen übertragen </font></font><code>nullptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Senden von </font></font><code>nullptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befehlen </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum Öffnen des Geräts standardmäßig</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Der Rückgabewert ist entweder das entsprechende Gerät oder </font></font><code>nullptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wenn ein Fehler auftritt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je nachdem, ob Sie die Aufzählung abgeschlossen haben oder nicht, kann ein Fehler das Programm auf Spuren stoppen. Kein Gerät = kein OpenAL; kein OpenAL = kein Ton; kein Ton = kein Spiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Letzte, was wir beim Schließen eines Programms tun, ist, es korrekt zu beenden.</font></font><br>
<br>
<pre><code class="cpp hljs">ALCboolean closed;
<span class="hljs-keyword">if</span>(!alcCall(alcCloseDevice, closed, openALDevice, openALDevice))<font></font>
{<font></font>
    <span class="hljs-comment">/* do we care? */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn zu diesem Zeitpunkt eine Fertigstellung nicht möglich war, ist dies für uns nicht mehr wichtig. Bevor wir das Gerät schließen, müssen wir alle erstellten Kontexte schließen. Meiner Erfahrung nach vervollständigt dieser Aufruf jedoch auch den Kontext. Aber wir werden es richtig machen. Wenn Sie alles abschließen, bevor Sie einen Anruf tätigen </font></font><code>alcCloseDevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sollten keine Fehler auftreten. Wenn diese aus irgendeinem Grund aufgetreten sind, können Sie nichts dagegen tun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Möglicherweise haben Sie bemerkt, dass Anrufe von </font></font><code>alcCall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwei Kopien des Geräts senden. Dies geschah aufgrund der Funktionsweise der Vorlagenfunktion - eine wird für die Fehlerprüfung benötigt und die zweite wird als Funktionsparameter verwendet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Theoretisch kann ich die Vorlagenfunktion so verbessern, dass sie den ersten Parameter für die Fehlerprüfung übergibt und ihn dennoch an die Funktion sendet. </font><font style="vertical-align: inherit;">aber ich bin faul, es zu tun. </font><font style="vertical-align: inherit;">Ich werde dies als Ihre Hausaufgabe belassen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unser ALC-Kontext</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite Teil der Initialisierung ist der Kontext. </font><font style="vertical-align: inherit;">Nach wie vor ähnelt es dem Rendering-Kontext von OpenGL. </font><font style="vertical-align: inherit;">Es kann mehrere Kontexte in einem Programm geben und wir können zwischen ihnen wechseln, aber wir werden dies nicht brauchen. </font><font style="vertical-align: inherit;">Jeder Kontext hat seinen eigenen </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listener</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font><font style="vertical-align: inherit;">seine eigenen </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quellen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und sie können nicht zwischen Kontexten übertragen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht ist dies in Soundverarbeitungssoftware nützlich. </font><font style="vertical-align: inherit;">Für Spiele in 99,9% der Fälle reicht jedoch nur ein Kontext aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines neuen Kontexts ist sehr einfach:</font></font><br>
<br>
<pre><code class="cpp hljs">ALCcontext* openALContext;
<span class="hljs-keyword">if</span>(!alcCall(alcCreateContext, openALContext, openALDevice, openALDevice, <span class="hljs-literal">nullptr</span>) || !openALContext)<font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not create audio context"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-comment">/* probably exit program */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir müssen kommunizieren </font></font><code>ALCdevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um einen Kontext zu schaffen. </font><font style="vertical-align: inherit;">Wir können auch eine optionale Liste von Schlüsseln und Werten </font></font><code>ALCint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit </font><font style="vertical-align: inherit;">Nullende übergeben </font><font style="vertical-align: inherit;">, die Attribute sind, mit denen der Kontext erstellt werden soll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ehrlich gesagt weiß ich nicht einmal, in welcher Situation das Übergeben von Attributen nützlich ist. </font><font style="vertical-align: inherit;">Ihr Spiel läuft auf einem normalen Computer mit den üblichen Soundfunktionen. </font><font style="vertical-align: inherit;">Attribute haben je nach Computer Standardwerte, daher ist dies nicht besonders wichtig. </font><font style="vertical-align: inherit;">Aber falls Sie es noch brauchen:</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attributname</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALC_FREQUENCY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mischfrequenz zum Ausgangspuffer, gemessen in Hz</font></font></td>
</tr>
<tr>
<td><code>ALC_REFRESH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktualisierungsintervalle, gemessen in Hz</font></font></td>
</tr>
<tr>
<td><code>ALC_SYNC</code></td>
<td><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geben Sie an, ob es sich um einen synchronen oder asynchronen Kontext handeln soll</font></font></td>
</tr>
<tr>
<td><code>ALC_MONO_SOURCES</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Wert, mit dem Sie feststellen können, wie viele Quellen Sie verwenden müssen, um monaurale Audiodaten verarbeiten zu können. </font><font style="vertical-align: inherit;">Es begrenzt nicht die maximale Menge, es ermöglicht Ihnen nur, effektiver zu sein, wenn Sie dies im Voraus wissen.</font></font></td>
</tr>
<tr>
<td><code>ALC_STEREO_SOURCES</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das gleiche, aber für Stereodaten.</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Fehler erhalten, liegt dies höchstwahrscheinlich daran, dass die gewünschten Attribute nicht möglich sind oder Sie keinen anderen Kontext für das unterstützte Gerät erstellen können. </font><font style="vertical-align: inherit;">Dies führt zu einem Fehler </font></font><code>ALC_INVALID_VALUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn Sie ein ungültiges Gerät übergeben, wird eine Fehlermeldung angezeigt, </font></font><code>ALC_INVALID_DEVICE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aber wir überprüfen diesen Fehler natürlich bereits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines Kontexts reicht nicht aus. </font><font style="vertical-align: inherit;">Wir müssen es noch aktuell machen - es sieht aus wie ein Windows OpenGL-Rendering-Kontext, oder? </font><font style="vertical-align: inherit;">Es ist das Gleiche.</font></font><br>
<br>
<pre><code class="cpp hljs">ALCboolean contextMadeCurrent = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">if</span>(!alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, openALContext)<font></font>
   || contextMadeCurrent != ALC_TRUE)<font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not make audio context current"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-comment">/* probably exit or give up on having sound */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist notwendig, den Kontext für alle weiteren Operationen mit dem Kontext (oder mit Quellen und Listenern darin) aktuell zu machen. </font><font style="vertical-align: inherit;">Die Operation gibt zurück </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der einzig mögliche übertragene Fehlerwert </font></font><code>alcGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist der, </font></font><code>ALC_INVALID_CONTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der aus dem Namen hervorgeht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beenden mit Kontext, d.h. </font><font style="vertical-align: inherit;">Beim Beenden des Programms muss der Kontext nicht mehr aktuell sein und anschließend zerstört werden.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(!alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, <span class="hljs-literal">nullptr</span>))<font></font>
{<font></font>
    <span class="hljs-comment">/* what can you do? */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span>(!alcCall(alcDestroyContext, openALDevice, openALContext))<font></font>
{<font></font>
    <span class="hljs-comment">/* not much you can do */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der einzig mögliche Fehler von </font></font><code>alcDestroyContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist der gleiche wie der von </font></font><code>alcMakeContextCurrent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>ALC_INVALID_CONTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">Wenn Sie alles richtig machen, werden Sie es nicht bekommen, aber wenn Sie es tun, können Sie nichts dagegen tun.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum nach Fehlern suchen, mit denen nichts gemacht werden kann? </font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weil ich möchte, dass die Nachrichten darüber zumindest im Fehlerstrom erscheinen, was für uns der Fall ist. </font></font><code>alcCall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angenommen, es gibt uns nie Fehler, aber es ist nützlich zu wissen, dass ein solcher Fehler auf dem Computer eines anderen auftritt. </font><font style="vertical-align: inherit;">Dank dessen können wir das Problem untersuchen und möglicherweise </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einen Fehler den OpenAL Soft-Entwicklern melden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spielen Sie unseren ersten Sound</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, genug von all dem, lass uns den Sound spielen. </font><font style="vertical-align: inherit;">Zunächst benötigen wir natürlich eine Sounddatei. </font><font style="vertical-align: inherit;">Zum Beispiel dieses aus einem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spiel, das ich jemals beenden werde</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://indiegamedev.net/wp-content/uploads/2020/02/iamtheprotectorofthissystem.wav</font></font></a></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich bin der Beschützer dieses Systems!</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Öffnen Sie also die IDE und verwenden Sie den folgenden Code. Denken Sie daran, OpenAL Soft anzuschließen und den oben gezeigten Code zum Hochladen von Dateien und Fehlercode hinzuzufügen.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    ALCdevice* openALDevice = alcOpenDevice(<span class="hljs-literal">nullptr</span>);
    <span class="hljs-keyword">if</span>(!openALDevice)
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
<font></font>
    ALCcontext* openALContext;<font></font>
    <span class="hljs-keyword">if</span>(!alcCall(alcCreateContext, openALContext, openALDevice, openALDevice, <span class="hljs-literal">nullptr</span>) || !openALContext)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not create audio context"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    ALCboolean contextMadeCurrent = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span>(!alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, openALContext)<font></font>
       || contextMadeCurrent != ALC_TRUE)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not make audio context current"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> channels;
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> sampleRate;
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> bitsPerSample;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt; soundData;
    <span class="hljs-keyword">if</span>(!load_wav(<span class="hljs-string">"iamtheprotectorofthissystem.wav"</span>, channels, sampleRate, bitsPerSample, soundData))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not load wav"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    ALuint buffer;<font></font>
    alCall(alGenBuffers, <span class="hljs-number">1</span>, &amp;buffer);<font></font>
<font></font>
    ALenum format;<font></font>
    <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
        format = AL_FORMAT_MONO8;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
        format = AL_FORMAT_MONO16;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
        format = AL_FORMAT_STEREO8;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
        format = AL_FORMAT_STEREO16;<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span>
            &lt;&lt; <span class="hljs-string">"ERROR: unrecognised wave format: "</span>
            &lt;&lt; channels &lt;&lt; <span class="hljs-string">" channels, "</span>
            &lt;&lt; bitsPerSample &lt;&lt; <span class="hljs-string">" bps"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    alCall(alBufferData, buffer, format, soundData.data(), soundData.size(), sampleRate);<font></font>
    soundData.clear(); <span class="hljs-comment">// erase the sound in RAM</span><font></font>
<font></font>
    ALuint source;<font></font>
    alCall(alGenSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
    alCall(alSourcef, source, AL_PITCH, <span class="hljs-number">1</span>);<font></font>
    alCall(alSourcef, source, AL_GAIN, <span class="hljs-number">1.0f</span>);<font></font>
    alCall(alSource3f, source, AL_POSITION, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
    alCall(alSource3f, source, AL_VELOCITY, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
    alCall(alSourcei, source, AL_LOOPING, AL_FALSE);<font></font>
    alCall(alSourcei, source, AL_BUFFER, buffer);<font></font>
<font></font>
    alCall(alSourcePlay, source);<font></font>
<font></font>
    ALint state = AL_PLAYING;<font></font>
<font></font>
    <span class="hljs-keyword">while</span>(state == AL_PLAYING)<font></font>
    {<font></font>
        alCall(alGetSourcei, source, AL_SOURCE_STATE, &amp;state);<font></font>
    }<font></font>
<font></font>
    alCall(alDeleteSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
    alCall(alDeleteBuffers, <span class="hljs-number">1</span>, &amp;buffer);<font></font>
<font></font>
    alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, <span class="hljs-literal">nullptr</span>);<font></font>
    alcCall(alcDestroyContext, openALDevice, openALContext);<font></font>
<font></font>
    ALCboolean closed;<font></font>
    alcCall(alcCloseDevice, closed, openALDevice, openALDevice);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kompilieren! </font><font style="vertical-align: inherit;">Wir komponieren! </font><font style="vertical-align: inherit;">Starten! </font></font><em><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich bin der Vorreiter dieses Systems</font></font></strong></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wenn Sie den Ton nicht hören, überprüfen Sie alles erneut. </font><font style="vertical-align: inherit;">Wenn etwas in das Konsolenfenster geschrieben ist, sollte dies die Standardausgabe des Fehlerstroms sein, und dies ist wichtig. </font><font style="vertical-align: inherit;">Unsere Fehlerberichterstattungsfunktionen sollten uns die Quellcodezeile mitteilen, die den Fehler generiert hat. </font><font style="vertical-align: inherit;">Wenn Sie einen </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fehler finden, lesen Sie das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmierhandbuch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spezifikation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um die Bedingungen zu verstehen, unter denen dieser Fehler von einer Funktion generiert werden kann. </font><font style="vertical-align: inherit;">Dies wird Ihnen helfen, es herauszufinden. </font><font style="vertical-align: inherit;">Wenn dies nicht gelingt, hinterlassen Sie einen Kommentar unter dem Originalartikel, und ich werde versuchen, Ihnen zu helfen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden Sie die RIFF WAVE-Daten herunter</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> channels;
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> sampleRate;
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> bitsPerSample;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt; soundData;
<span class="hljs-keyword">if</span>(!load_wav(<span class="hljs-string">"iamtheprotectorofthissystem.wav"</span>, channels, sampleRate, bitsPerSample, soundData))<font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not load wav"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bezieht sich auf den Wave-Boot-Code. </font><font style="vertical-align: inherit;">Wichtig ist, dass wir Daten entweder als Zeiger empfangen oder in einem Vektor sammeln: die Anzahl der Kanäle, die Abtastrate und die Anzahl der Bits pro Abtastung.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puffererzeugung</font></font></h3><br>
<pre><code class="cpp hljs">ALuint buffer;<font></font>
alCall(alGenBuffers, <span class="hljs-number">1</span>, &amp;buffer);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es kommt Ihnen wahrscheinlich bekannt vor, wenn Sie jemals Texturdatenpuffer in OpenGL generiert haben. Im Wesentlichen generieren wir einen Puffer und geben vor, dass er nur in der Soundkarte vorhanden ist. Tatsächlich wird es höchstwahrscheinlich im normalen RAM gespeichert, aber die OpenAL-Spezifikation abstrahiert alle diese Operationen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Wert </font></font><code>ALuint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist also ein </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Handle für</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unseren Puffer. Denken Sie daran, dass der </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puffer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Wesentlichen Sounddaten im Speicher der Soundkarte sind. Wir haben keinen </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direkten Zugriff mehr</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf diese Daten, da wir sie aus dem Programm (aus dem normalen RAM) genommen und auf eine Soundkarte / einen Chip usw. verschoben haben. OpenGL funktioniert ähnlich und verschiebt Texturdaten vom RAM zum VRAM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskriptor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erzeugt </font></font><code>alGenBuffers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es gibt einige mögliche Fehlerwerte, von denen der wichtigste ist </font></font><code>AL_OUT_OF_MEMORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, was bedeutet, dass wir der Soundkarte keine Sounddaten mehr hinzufügen können. </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fehler </font><font style="vertical-align: inherit;">wird nicht </font><font style="vertical-align: inherit;">angezeigt, wenn Sie beispielsweise einen einzelnen Puffer verwenden. Sie müssen dies jedoch berücksichtigen, wenn Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine Engine erstellen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bestimmen Sie das Format der Audiodaten</font></font></h3><br>
<pre><code class="cpp hljs">ALenum format;<font></font>
<font></font>
<span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
    format = AL_FORMAT_MONO8;<font></font>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
    format = AL_FORMAT_MONO16;<font></font>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
    format = AL_FORMAT_STEREO8;<font></font>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
    format = AL_FORMAT_STEREO16;<font></font>
<span class="hljs-keyword">else</span><font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span>
        &lt;&lt; <span class="hljs-string">"ERROR: unrecognised wave format: "</span>
        &lt;&lt; channels &lt;&lt; <span class="hljs-string">" channels, "</span>
        &lt;&lt; bitsPerSample &lt;&lt; <span class="hljs-string">" bps"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sounddaten funktionieren folgendermaßen: Es gibt mehrere </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kanäle</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und es gibt eine </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bitgröße pro Sample</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Daten bestehen aus vielen </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proben</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Anzahl der </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Samples</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in den Audiodaten </font><font style="vertical-align: inherit;">zu bestimmen </font><font style="vertical-align: inherit;">, gehen wir wie folgt vor:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">int_fast32_t</span> numberOfSamples = dataSize / (numberOfChannels * (bitsPerSample / <span class="hljs-number">8</span>));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was kann bequem zur Berechnung der </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dauer von</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Audiodaten </font><font style="vertical-align: inherit;">konvertiert </font><font style="vertical-align: inherit;">werden:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> duration = numberOfSamples / sampleRate;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir müssen zwar weder wissen </font></font><code>numberOfSamples</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, noch </font></font><code>duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist es wichtig zu wissen, wie all diese Informationen verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zurück zu </font></font><code>format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wir müssen OpenAL das Audiodatenformat mitteilen. Das scheint offensichtlich, oder? Ähnlich wie wir den OpenGL-Texturpuffer füllen und sagen, dass sich die Daten in einer BGRA-Sequenz befinden und aus 8-Bit-Werten bestehen, müssen wir dasselbe in OpenAL tun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um OpenAL mitzuteilen, wie die Daten zu interpretieren sind, auf die der Zeiger zeigt, den wir später übergeben werden, müssen wir das Datenformat definieren. Unter dem </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> versteht man OpenAL. Es gibt nur vier mögliche Bedeutungen. Es gibt zwei mögliche Werte für die Anzahl der Kanäle: einen für Mono und zwei für Stereo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich zur Anzahl der Kanäle haben wir die Anzahl der Bits pro Abtastung. </font><font style="vertical-align: inherit;">Es ist gleich oder </font></font><code>8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, oder </font></font><code>16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und ist im Wesentlichen Klangqualität. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anhand der Werte der Kanäle und Bits pro Abtastung, über die uns die Wellenlastfunktion informiert hat, können wir bestimmen, welche </font></font><code>ALenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für den zukünftigen Parameter verwendet werden sollen </font></font><code>format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pufferfüllung</font></font></h3><br>
<pre><code class="cpp hljs">alCall(alBufferData, buffer, format, soundData.data(), soundData.size(), sampleRate);<font></font>
soundData.clear(); <span class="hljs-comment">// erase the sound in RAM</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit sollte alles einfach sein. </font><font style="vertical-align: inherit;">Wir laden in den OpenAL-Puffer, auf den der </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskriptor</font></font></em> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zeigt </font></font><code>buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">die Daten auf den ptr zeigt </font></font><code>soundData.data()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Größe </font></font><code>size</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des angegeben </font></font><code>sampleRate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir werden OpenAL auch das Format dieser Daten über den Parameter mitteilen </font></font><code>format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende löschen wir einfach die Daten, die der Wave Loader empfangen hat. </font><font style="vertical-align: inherit;">Warum? </font><font style="vertical-align: inherit;">Weil wir sie bereits auf die Soundkarte kopiert haben. </font><font style="vertical-align: inherit;">Wir müssen sie nicht an zwei Orten aufbewahren und wertvolle Ressourcen ausgeben. </font><font style="vertical-align: inherit;">Wenn die Soundkarte Daten verliert, laden wir sie einfach erneut von der Festplatte herunter und müssen sie nicht auf die CPU oder eine andere Person kopieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelleneinstellung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Denken Sie daran, dass OpenAL im Wesentlichen ein </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listener ist</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der Sounds von einer oder mehreren </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quellen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hört </font><font style="vertical-align: inherit;">. Nun ist es an der Zeit, eine Klangquelle zu erstellen.</font></font><br>
<br>
<pre><code class="cpp hljs">ALuint source;<font></font>
alCall(alGenSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
alCall(alSourcef, source, AL_PITCH, <span class="hljs-number">1</span>);<font></font>
alCall(alSourcef, source, AL_GAIN, <span class="hljs-number">1.0f</span>);<font></font>
alCall(alSource3f, source, AL_POSITION, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
alCall(alSource3f, source, AL_VELOCITY, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
alCall(alSourcei, source, AL_LOOPING, AL_FALSE);<font></font>
alCall(alSourcei, source, AL_BUFFER, buffer);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ehrlich gesagt ist es nicht erforderlich, einige dieser Parameter festzulegen, da die Standardwerte für uns durchaus geeignet sind. Dies zeigt uns jedoch einige Aspekte, mit denen Sie experimentieren und sehen können, was sie tun (Sie können sogar schlau handeln und sie im Laufe der Zeit ändern). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst generieren wir eine Quelle - denken Sie daran, dies ist wieder ein </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Handle</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für etwas in der OpenAL-API. Wir stellen die Tonhöhe (den Ton) so ein, dass sie sich nicht ändert. Die Verstärkung (Lautstärke) entspricht dem ursprünglichen Wert der Audiodaten. Position und Geschwindigkeit werden zurückgesetzt. Wir </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schleifen den</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sound nicht, da unser Programm sonst niemals endet und den Puffer anzeigt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Denken Sie daran, dass verschiedene Quellen denselben Puffer verwenden können. </font><font style="vertical-align: inherit;">Zum Beispiel können Feinde, die einen Spieler von verschiedenen Orten aus schießen, denselben Schusston abspielen, sodass wir nicht viele Kopien der Tondaten benötigen, sondern nur wenige Orte im 3D-Raum, von denen aus der Ton erzeugt wird.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ton abspielen</font></font></h3><br>
<pre><code class="cpp hljs">alCall(alSourcePlay, source);<font></font>
<font></font>
ALint state = AL_PLAYING;<font></font>
<font></font>
<span class="hljs-keyword">while</span>(state == AL_PLAYING)<font></font>
{<font></font>
    alCall(alGetSourcei, source, AL_SOURCE_STATE, &amp;state);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst müssen wir anfangen, Source zu spielen. </font><font style="vertical-align: inherit;">Einfach anrufen </font></font><code>alSourcePlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anschließend erstellen wir einen Wert, um den aktuellen Status der </font></font><code>AL_SOURCE_STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle </font><font style="vertical-align: inherit;">zu speichern </font><font style="vertical-align: inherit;">und endlos zu aktualisieren. </font><font style="vertical-align: inherit;">Wenn es nicht mehr gleich ist, können </font></font><code>AL_PLAYING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir weitermachen. </font><font style="vertical-align: inherit;">Sie können den Status ändern, </font></font><code>AL_STOPPED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wenn der Ton aus dem Puffer beendet ist (oder wenn ein Fehler auftritt). </font><font style="vertical-align: inherit;">Wenn Sie den Wert für das Looping festlegen </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wird der Sound für immer abgespielt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann können wir den Quellpuffer ändern und einen anderen Sound abspielen. </font><font style="vertical-align: inherit;">Oder spielen Sie den gleichen Sound usw. ab. </font><font style="vertical-align: inherit;">Stellen Sie einfach den Puffer ein, verwenden </font></font><code>alSourcePlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie ihn und </font></font><code>alSourceStop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ggf., falls erforderlich. </font><font style="vertical-align: inherit;">In den folgenden Artikeln werden wir dies genauer betrachten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reinigung</font></font></h3><br>
<pre><code class="cpp hljs">alCall(alDeleteSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
alCall(alDeleteBuffers, <span class="hljs-number">1</span>, &amp;buffer);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir die Audiodaten einfach einmal abspielen und beenden, löschen wir die zuvor erstellte Quelle und den Puffer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Rest des Codes ist ohne Erklärung verständlich.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wohin als nächstes?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie alles wissen, was in diesem Artikel beschrieben wird, können Sie bereits ein kleines Spiel erstellen! </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versuchen Sie, Pong</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein anderes klassisches Spiel </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">zu erstellen</font></a><font style="vertical-align: inherit;"> , für das mehr nicht erforderlich ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber erinnere dich! </font><font style="vertical-align: inherit;">Diese Puffer sind nur für kurze Töne geeignet, höchstwahrscheinlich für einige Sekunden. </font><font style="vertical-align: inherit;">Wenn Sie Musik oder Sprachausgabe benötigen, müssen Sie Audio an OpenAL streamen. </font><font style="vertical-align: inherit;">Wir werden darüber in einem der folgenden Teile einer Reihe von Tutorials sprechen.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488730/index.html">Neue russische Standards für das Internet der Dinge, Smart Manufacturing und Smart City</a></li>
<li><a href="../de488732/index.html">Talentierter Herr Simon: Wie einzigartige Fähigkeiten und 3D-Druck den Produktionsprozess verändern können</a></li>
<li><a href="../de488736/index.html">Fernarbeit gewinnt an Dynamik</a></li>
<li><a href="../de488740/index.html">Benutzerdefiniertes HTML-Tag-Handbuch für Google Tag Manager von Simo Ahava</a></li>
<li><a href="../de488742/index.html">Sehen Sie die Architektur? Und ich sehe nicht, aber sie ist</a></li>
<li><a href="../de488748/index.html">Erstellen Sie eine Todo-Anwendung mit Django. Teil 1</a></li>
<li><a href="../de488750/index.html">Dinosaur Walk: Zwei große Computer des 20. Jahrhunderts</a></li>
<li><a href="../de488752/index.html">Golang + Phaser3 = MMORPG - Wir bilden die Basis für die endlose Generation der Welt</a></li>
<li><a href="../de488754/index.html">Alles auf einmal: automatische Überprüfung der Bündelgröße</a></li>
<li><a href="../de488756/index.html">So arbeiten Sie mit der Google Sheets-API (Google Sheets API v4) in R mithilfe des neuen googlesheets4-Pakets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>