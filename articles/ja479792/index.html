<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🉑 ♐️ 👩‍🎓 Azure DataFactoryとIBM DataStageの機能の小さな比較 ✊🏻 🏽 🗾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="しばらくの間、Microsoft Azure DataFactoryをテストして、その機能（まだパフォーマンスではない）を既存のETLソリューションであるIBM Infosphere DataStage 11（YARNの下ですが、この場合は重要ではありません）と比較しました。この比較は、ETLプロセ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Azure DataFactoryとIBM DataStageの機能の小さな比較</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479792/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しばらくの間、Microsoft Azure DataFactoryをテストして、その機能（まだパフォーマンスではない）を既存のETLソリューションであるIBM Infosphere DataStage 11（YARNの下ですが、この場合は重要ではありません）と比較しました。</font><font style="vertical-align: inherit;">この比較は、ETLプロセス（ADFまたはDataStage）の中期的に使用するものをクライアントが選択できるようにすることを目的としています。</font><font style="vertical-align: inherit;">すべてのETLプロセスをADFエンジンに移行するクライアントの動機を理解していなかったので、このプロセスを防ぐために引数を見つけようとしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カットの下での私の小さな比較の結果。</font><font style="vertical-align: inherit;">顧客へのオファーを作成するときに、それはあなたにとっても役立つでしょう。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この比較は完全なものではなく、ETLプロセスを開発する上で私にとって個人的に重要と思われる側面のみをリストしています。 </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比較の優先順位について少し</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Azure DataFactoryは、コードの記述を必要としない（コードフリー）ETLツールとして位置付けられていると私は考えてみました。</font><font style="vertical-align: inherit;">それでも、遅かれ早かれ、</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">松葉杖の</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張</font><font style="vertical-align: inherit;">機能を備えたデータ処理プラットフォームの機能を強化する必要があることは誰もが知ってい</font><font style="vertical-align: inherit;">ます-外部モジュール、変換関数など。</font><font style="vertical-align: inherit;">そこで、自己記述型モジュールの導入が必要なレベルを推定してみました。</font><font style="vertical-align: inherit;">このレベルが高いほど、スペシャリストの入場しきい値が低くなります（高齢者の関与を必要としない）、プラットフォームがより柔軟になり、シンプルで中規模のデータ転送手順を開発するのが安価になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、私の目標は、IBM Information Serverスイートに含まれるすべての製品とすべてのAzureアプリケーション（データプロファイリング、データ品質管理、データガバナンスなど）を比較することではなく、ETLツールの機能のみに焦点を当てようとしました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、自分の偏見は隠していません。AzureDataFactoryよりもDataStageを使用した経験が多いので、結論に何か足りなかったのかもしれません。そこで私はコメントで議論の多い問題について議論することを提案します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、Azure DataFactoryはかなり新しい製品であり、進化を続けています。おそらく、提案されたリストの機能のいくつかは後で追加されるでしょう。おそらく、非常にありそうもないことですが、この記事はこれに貢献するでしょう。しかし、私は武器にもっと強力なETLツールを持ちたいと思っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各項目について、考えられるいくつかのアプリケーションシナリオと、特定された制限があればそれを回避するいくつかの方法を選択しようとしました。 </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.実行時にフィールドを操作する機能の欠如</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大まかに言えば、すべてのストリームメタデータは設計時に設定する必要があります。実行時に、どのフィールドでどのアクションを実行するかを動的に選択することはできません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような可能性の欠如は、開発者が一般的な変換規則を作成することを厳しく制限します。たとえば、ステージングエリアまたはランディングエリアにアップロードされたデータには、複雑な変換ルールが含まれていません。原則として、ロードの日付、ソースの識別子、おそらくデータの履歴化中のラインの現在のバージョンの番号など、いくつかの技術フィールドを追加する必要があります。データを含む他のすべてのフィールドは、名前や数量に関係なく、変更せずにプッシュする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DataStageでは、これはランタイム列伝搬（RCP）、OSHデータスキーム、および列のインポート/エクスポートステージ（ステージ）によって実現されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての受信テーブルについて、キーフィールドとデータフィールドのMD5ハッシュをそれぞれ含む2つの列KEY_HASHとDATA_HASHを作成します。もちろん、キーフィールドの数はテーブルごとに異なります。それらの名前も確定的ではありません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSでのソリューション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/an/-l/hx/an-lhxfypejoc6dhshuyd-q7_hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このテーブルのスキーマファイル（これらはテーブルメタデータの説明を含むファイル）に基づいて、ソーステーブルからすべての列を抽出するだけです。CE_KeyHashステージで、テーブルのすべてのキーフィールドを含むTECH_KEYテクニカルフィールドを生成し、CS_KEYでこのハッシュを計算しますフィールド、およびCS_DataHashの段階で、技術的なフィールドを除くすべてのフィールドのハッシュを計算します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADFの可能なソリューション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：Azure関数の使用。はい、これは方法です。しかし、我々はそれに戻ります。しかし、これはすでにコードフリーのパラダイムを超えています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場合によっては、Lookupステップを使用して各テーブルのメタデータをインポートし、それらに基づいて、必要な列の連結とハッシュ計算を含むSQLクエリを生成することができます。ただし、これが可能なのは、データソースがSQLをサポートしているか、Polybaseのファイルの上に外部テーブルを作成する必要がある場合のみです（Hive-外部テーブルなど）。さて、テーブルごとに個別のDataFlowまたはPipelineを作成します...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、ETLで非常に要求される機能です。</font><font style="vertical-align: inherit;">彼女はADFにひどく欠けています。</font><font style="vertical-align: inherit;">そしてそれなしでは、いくつかのソースに共通するデータ輸血手順を作成することは不可能です。</font><font style="vertical-align: inherit;">開発時間が増加し、ソリューションの保守性が低下しています。</font><font style="vertical-align: inherit;">Azure Functionsを使用すると、すぐにコストが上昇し、開発プロセスが複雑になります。</font><font style="vertical-align: inherit;">以降、開発者は関数の使用（呼び出しごとに支払われる）とプロジェクト予算の責任者との調整を行う必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.ライン間の相互作用の欠如</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、前のフィールドの値から入力ラインがどのように処理されるかを決定する状態を作成できないことを意味します（もちろん、これは、データが各パーティションでソートされるときに重要です）。また、1つの着信回線に対して複数の発信回線を生成することはできません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">古典的な例：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WordCount-ドキュメント内の各単語の出現をカウントします。 ETLでそれを解決する1つの方法は、Nワードの行を、これらの単語とこれらの単語のみを含むN行に変換することです。そして、-各単語の出現の集計とカウント。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ep/mq/hs/epmqhs7ukhmw-tdwzghjth2f-bg.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T_ExtractWordsトランスフォーマーの後の行数は、前の行数よりも多いことに注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準のADFツールでこの問題を解決する方法を考えることができませんでした。</font><font style="vertical-align: inherit;">これは、これが実行できないことを意味するものではありません。</font><font style="vertical-align: inherit;">ただし、繰り返しになりますが、このETLツールに供給する前に、データをさらに準備する必要があります。</font><font style="vertical-align: inherit;">ここでも、外部ユーティリティとプログラミング言語を引き付ける必要があります-Java、.Net、Spark ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. XMLサポートなし</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、すべてが簡単です。標準のツールを使用してXMLファイルを読み書きすることはできません。</font><font style="vertical-align: inherit;">これを行う方法を見つけることができなかったとき、彼は少し落胆しました。</font><font style="vertical-align: inherit;">おそらく、ADFの経験不足が影響していると思い、フォーラムやマイクロソフトのリソースを検索しようとしました。</font><font style="vertical-align: inherit;">この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">質問と回答</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を見つけました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">LogicAppを使用してXMLをDataFactoryに適した他の形式に変換するか、プログラムでXMLを読み取ることをお勧めします（コードフリーについてはどうですか？）。</font><font style="vertical-align: inherit;">もちろん、LogicAppは別途支払われます。</font><font style="vertical-align: inherit;">結局のところ、21世紀は庭にあります。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ミニバスからのジョーク</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/yc/d7/16/ycd716ggf6jdplshis4-79ircdo.png"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DataStageの階層ファイルフェーズの機能と比較してください。</font><font style="vertical-align: inherit;">また、罪がないわけではありません。大きなXMLに合わせて調整する必要がありますが、XMLファイルの構造を使用して直接変換を実行できる完全な組み合わせです。タグ間でデータを結合し、XSLTなしで構造を変換します（ただし、XSLTを使用しても可能です）、その他の操作を実行できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.一般的なプロセスを作成する方法はありません</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを定式化することは困難でした。明確にします。いくつかの異なるETLプロセスは共通の変換サイトを持つことができます。したがって、このセクションを個別に取り出して保存し、各プロセスでこのセクションへのリンクを作成することは不可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは重要な機会です。プロセスをサポートおよび編集するプロセスを最小限に抑えるため。このような機会があれば、各プロセスを編集する必要なく、この共通領域を一度だけ変更できます。これは、一般的なコードをライブラリに入れるようなものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DataStageでは、共有コンテナーを作成できます。これがまさに私が話していることです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例を挙げて説明します。これがコンテナの内容です。彼が行うのは、外部キーの存在を確認することだけです。その内容は次のとおりです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zp/p3/b-/zpp3b-aoc8xhzg37z6bvmncgto4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、それをプロセスの1つで（そして他のプロセスでも）使用できます。</font><font style="vertical-align: inherit;">チェックする必要があるキーとテーブルを決定するいくつかのパラメーターを指定するだけです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qh/dk/xu/qhdkxudwaszej02-buwbbdrc0py.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.ユーザー拡張とデータフローの分離</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに最初の段落で、サードパーティの資金を使用して機能を拡張する機会を使用する必要がありました。プログラミング言語またはユーティリティ。そのため、DataFlowで記述した関数を埋め込むことはできません。これはパイプラインでのみ可能です。それら。データソースを介したすべての変換（結合、ルックアップ、ウィンドウ変換など）は、DataFlowで実行でき、パイプラインでより複雑な処理を実行できます。これも少し残念です。それら。一時ストレージ（BlobStorageまたはデータベーステーブル）にデータを配置し、それらを読み取って独自の変換を適用する必要があります（たとえば、これは実行時にフィールドハッシュを計算する方法です）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この分離により、データ輸血プロセスのエンティティの数が増加します。</font><font style="vertical-align: inherit;">または、パイプラインと結合およびその他の操作のみを使用することを強制します。その場合、手動で実行する必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.メタデータを記述する能力が弱い、ゼロフィールドの管理が不十分</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Microsoftのアーキテクトが説明したように、ADF DataFlowの内部にはSparkがあります。</font><font style="vertical-align: inherit;">したがって、おそらく、メタデータを記述するための言語は非常に原始的です。</font><font style="vertical-align: inherit;">Sparkが操作する型に十分に近いフィールドのデータ型を指定できます：文字列、数値、タイムスタンプ。</font><font style="vertical-align: inherit;">文字列の最大長を指定したり、フィールドnullのフラグを指定したりすることはできません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、次のような問題が発生します。</font></font><br>
 <br>
<ul>
<li>       .      , , AS400  .. , ,  —      substring(data, start, len),       .</li>
<li>   Null  ,     . ,     Not Null         .        .</li>
</ul><br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
象とペンギンを比べてみたと思う人も多いだろう。しかし、多くの場合、企業はクラウドへの移行を決定するときに、すべてのアプリケーションを置き換える必要があると考えています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、この決定は軽率であり、コンサルタントにとって頭痛の種であり、ソリューションの開発とサポートのコストが増加します。ベンダーロックやその他の楽しみは言うまでもありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このわずかな比較で、Azureクラウドへの移行時にETLソリューションを選択するときに、急いで結論を下さないようにクライアントの管理を説得しようとしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事は草案でしたが、マイクロソフトのクラウドアーキテクトとミーティングを行ったので、彼は私の結論を確認または反論し、ロードマップに上記の章で説明されているタスクの解決を促進できる何かがあるかどうかを明確にすることができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行時のフィールドの操作を除くすべての項目が確認され、一部は製品の履歴の観点から説明されています。</font><font style="vertical-align: inherit;">ランタイムカラムの伝達については、アーキテクトは休憩を取ってこれを同僚と話し合いましたが、結論を返さなかったためです。</font><font style="vertical-align: inherit;">もう2ヶ月経ちました。</font><font style="vertical-align: inherit;">おそらく、結局のところ、そのようなデータ操作スキームを完全に実装することは不可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PSクライアントはETLにADFを使用することを拒否し、現在SparkとDataStageの間で考えています:-)</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja479774/index.html">周囲のナレーション、またはカットシーンが万能薬ではない理由</a></li>
<li><a href="../ja479776/index.html">職業旅行：スチュワーデスの生活</a></li>
<li><a href="../ja479778/index.html">＃メモ。ConcurrentHashMapでのアトミック操作の注意</a></li>
<li><a href="../ja479780/index.html">DevOpsモスクワMeetup 17/12：放送に参加</a></li>
<li><a href="../ja479790/index.html">3つのインキュベーターが最初の学生グループのプロトタイピングコースを開催</a></li>
<li><a href="../ja479794/index.html">「子供用」のマイクロコントローラーとボードゲームを組み合わせる</a></li>
<li><a href="../ja479796/index.html">キングストンのサノスレベルの脅威</a></li>
<li><a href="../ja479800/index.html">フロントエンドが簡単になるようにC＃で書いています</a></li>
<li><a href="../ja479802/index.html">C ++ vtables。パート1（基本+多重継承）</a></li>
<li><a href="../ja479810/index.html">Natureで科学記事を公開した方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>