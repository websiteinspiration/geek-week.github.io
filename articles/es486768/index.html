<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍤 😾 🎰 Revisión del panel de administración de Webasyst 🎦 🧚🏾 ⭕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este artículo, quiero decirle cómo hacer que su vida sea un poco más fácil completando el sitio web utilizando el motor WebAsyst, yendo directament...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Revisión del panel de administración de Webasyst</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486768/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En este artículo, quiero decirle cómo hacer que su vida sea un poco más fácil completando el sitio web utilizando el motor WebAsyst, yendo directamente a la edición de productos y teniendo la capacidad de eliminar todas las casillas de verificación en la página. </font><font style="vertical-align: inherit;">Y también potencialmente ahorrar 500 rublos en la compra de un complemento que soluciona uno de estos problemas.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prefacio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trabajo en el campo de la creación y promoción de sitios web, y para las tiendas en línea recurrimos principalmente al motor Webasyst. </font><font style="vertical-align: inherit;">No puedo decir nada malo sobre él, pero en un año de llenar sitios en él, me di cuenta de que hay dos cosas que me molestan, de lo que hablaré más adelante. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y una vez que decidí buscar en el código del panel de administración y tratar de arreglar lo que no me gusta.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambiar a la edición del producto haciendo clic en él en el panel de administración</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Así es la lista de productos: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gf/9d/o0/gf9do01zggbynyrtierao2amic0.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el hecho es que si simplemente hace clic en el nombre en la lista de productos, se abre una ventana intermedia de este tipo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4l/mt/qv/4lmtqv9cxs6mj5-3i_ojgl9y_fk.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en ella puede ir a editar fotos o cambiar el nombre ... Y cuando hace clic en el botón "editar", la transición directamente para editar </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/2o/4r/bc2o4rqql7otuvgaywvy7ygdj0c.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quizás alguien se sienta cómodo. </font><font style="vertical-align: inherit;">Alguien pero no yo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Explorador</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si mira el enlace, queda claro que la página intermedia tiene una dirección </font></font><br>
<br>
<pre><code class="bash hljs">https:///webasyst/shop/?action=products<span class="hljs-comment">#/product/id</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y la página de edición es la misma + </font></font><code>/edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">al final.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corregimos</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No fue difícil encontrar la plantilla para la página de visualización de la lista de productos, se encuentra en:</font></font><br>
<br>
<pre><code class="bash hljs">//wa-apps/shop/templates/actions/products/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay 3 archivos, cuyo nombre comienza con </font></font><code>product_list_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Todos ellos dibujan el panel de administración en 3 variaciones: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d8/uf/en/d8ufennx7rqi39cu3y6wo9vqupi.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
visualización de productos en forma de tabla, iconos y una tabla con artículos. </font><font style="vertical-align: inherit;">Solo uso la vista de tabla, así que mi elección es el archivo</font></font><br>
<br>
<pre><code class="bash hljs">product_list_table.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de abrir el inspector de la página del navegador en el panel de administración, descubrí que los enlaces de productos se ven así: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/6037"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>.  <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontró la línea en el archivo anterior: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/{%#p.id%}/"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{%#p.name%}<span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y agregado al final de la edición, resultó así:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-handle s-product-name"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#/product/{%#p.id%}/edit"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{%#p.name%}<span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"shortener"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y funcionó. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, vi en las extensiones del instalador un complemento que se necesita para la misma tarea, pero cuesta 500 rublos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Casillas de verificación</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el sitio, que debe llenarse con mayor frecuencia, se implementan varios componentes adicionales para puertas utilizando los "Servicios". </font><font style="vertical-align: inherit;">Cada producto (puerta) está asociado con su categoría, y dado que es imposible asignar un servicio a una categoría, todos los productos aún se clasifican en diferentes tipos de productos, que generalmente duplican categorías. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, todo lo que está dentro de la categoría "uno" pertenece al tipo de producto "uno". </font><font style="vertical-align: inherit;">Pero hay excepciones cuando el precio de los componentes en una categoría difiere según el color de la puerta, etc. </font><font style="vertical-align: inherit;">Luego se crean los tipos de producto "one.1", "one.2", etc. </font><font style="vertical-align: inherit;">Y para cada tipo necesita crear sus propios servicios con sus propios precios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ver en el panel de administración: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/4a/k7/xl4ak7jmqpwyjbjczh_lwms4xli.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ver en el sitio:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ov/o1/uc/ovo1ucvxwrga45h4xtwth_dob6w.jpeg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se requería crear muchos de estos servicios, y era necesario marcar de 1 a 5 casillas de verificación, y de manera predeterminada, al crear un nuevo "servicio", todas las casillas de verificación en la lista de tipos de productos ya estaban marcadas. </font><font style="vertical-align: inherit;">Al principio, eliminé todo manualmente, dejándolo necesario, pero por supuesto, me llevó mucho tiempo eliminar unas cien casillas de verificación y comencé a escribir el código en la consola cada vez que creaba un "servicio":</font></font><br>
<br>
<pre><code class="javascript hljs">$(<span class="hljs-string">'body input:checkbox'</span>).prop(<span class="hljs-string">'checked'</span>, <span class="hljs-literal">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este código elimina todas las casillas marcadas en la página. </font><font style="vertical-align: inherit;">Funcionó, pero todavía no era muy conveniente. </font><font style="vertical-align: inherit;">Por lo tanto, vi 2 opciones: editar el código para que al crear el servicio las casillas de verificación aparezcan en el estado desmarcado, y no en el marcado o agregue el botón "eliminar todas las casillas de verificación" a la interfaz de administración. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi conocimiento en JS es extremadamente pequeño, así que elegí el segundo método. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontró un archivo de render para la interfaz de edición de servicio:</font></font><br>
<br>
<pre><code class="bash hljs">//wa-apps/shop/templates/actions/services/Services.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y en él está el código del botón para el "Servicio de eliminación":</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"s-delete-service"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon16 delete"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><font></font>
        [`Delete this service`]<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin pensarlo dos veces, agregué un botón justo al lado de la "eliminación" solitaria actual colocando el código a continuación: </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"  "</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">"$('body input:checkbox').prop('checked', false);"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se hace clic, el código JS anterior se ejecuta y todo funciona. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de hacer clic: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/4d/w8/oe4dw8cwr238w6qub5_7fk7z2xu.jpeg" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de presionar: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7n/du/44/7ndu44vigzremn1175tmek7q_su.jpeg" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quizás todo esto podría resolverse más fácilmente, pero decidí lo mejor que pude. </font><font style="vertical-align: inherit;">Espero que alguien lo encuentre útil.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es486756/index.html">Python para el probador: cómo los pequeños scripts de c pandas ayudan a probar grandes conjuntos de datos</a></li>
<li><a href="../es486760/index.html">Semana de la seguridad 06: rastreadores publicitarios en aplicaciones móviles</a></li>
<li><a href="../es486762/index.html">Hospedaje de cabecera: la práctica espeluznante de hospedaje en el hogar</a></li>
<li><a href="../es486764/index.html">Hágalo usted mismo Schema.org: personalizando el micro diseño sin un programador</a></li>
<li><a href="../es486766/index.html">¿Cómo transferir todas las transacciones en línea en el mercado de factoraje arcaico? Experiencia de Factoring Sberbank</a></li>
<li><a href="../es486772/index.html">Arde, pero no arde, arde para brillar</a></li>
<li><a href="../es486776/index.html">Finalización de código y verificación de tipo para boto3</a></li>
<li><a href="../es486778/index.html">SSO en arquitectura de microservicios. Usamos Keycloak. Número de parte 1</a></li>
<li><a href="../es486780/index.html">Desarrollo frontend en la empresa: qué es y cómo hacerlo efectivo</a></li>
<li><a href="../es486782/index.html">UI / UX - diseño. Tendencias y pronósticos para 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>