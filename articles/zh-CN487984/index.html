<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🎤 😖 👩🏽‍🏭 我如何使用Node-RED自动化公寓的故事。第一部分 🎡 🤵🏽 Ⓜ️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在过去的一年中，我为繁忙的道路旁的一间小公寓组装并设置了自动化设备。在本文中，我将讨论气候系统，照明，多媒体和软件中使用的解决方案。
 
 
 
 我想做什么
 

1. 在紧急情况下自动关闭水源。
2. 着火时请关闭通风。
3. 报告紧急情况。
4. ( , , , ).
5. (, ).
6. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>我如何使用Node-RED自动化公寓的故事。第一部分</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/487984/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在过去的一年中，我为繁忙的道路旁的一间小公寓组装并设置了自动化设备。</font><font style="vertical-align: inherit;">在本文中，我将讨论气候系统，照明，多媒体和软件中使用的解决方案。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_k/1w/hi/_k1whiczimlsb9xmwy5vfgvpzua.png"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我想做什么</font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在紧急情况下自动关闭水源。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">着火时请关闭通风。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报告紧急情况。</font></font></li>
<li>     ( , ,  , ).</li>
<li>  (, ).</li>
<li> .</li>
<li>   (   ,  ,    «»     ).</li>
</ol><br>
<h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有几种用于管理家庭自动化的基本系统。有付费解决方案和免费解决方案-都取决于平台。它可以是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPGA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（可编程逻辑集成电路），路由器形式的控制器，也可以是软件。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，我将完成的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIBARO Home Center 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制器</font><font style="vertical-align: inherit;">视为主要集线器。尽管界面漂亮而且设置很多，但是硬件却很薄弱。根据评论判断，该固件有时会出现故障。其他类型的协议很难连接。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在免费选项中，我回顾了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenHUB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">家庭助理。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 OpenHUB似乎加载太重并且难以扩展：例如，如果新的Z-Wave模块不在OpenHUB配置中，则很难添加它。 Home Assistant易于扩展，但是在集成时，只能用YAML编写自动化程序，这很难调试和维护。在Home Assistant中与Z-Wave的集成引起了疑问。因此，我选择了另一个免费的类似物，稍后再讨论。</font><font style="vertical-align: inherit;">我选择</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node-RED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为后端解决方案，因为它提供了许多现成的，使用不同协议的集成，是免费的，并且允许您直接在浏览器中的JavaScript中编写自动化逻辑，而无需重新编译。有了它，就可以使用debug和inject调试脚本。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/xc/yo/pixcyowgftmafmmilsgrchnpri4.png" alt="Node-RED脚本编辑窗口"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node-RED脚本编辑窗口</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node-RED在后台使用NodeJS，因此其余的绑定也都写在它上面。</font><font style="vertical-align: inherit;">Node-RED只是各种协议的脚本编辑器和集成器。</font><font style="vertical-align: inherit;">控件的前部（例如在Home Assistant中）丢失了。</font><font style="vertical-align: inherit;">有几个插件可以通过浏览器控制设备，但是它们配置起来并不方便，并且还需要在浏览器中编写前端代码（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-dashboard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我系统中的每个流程都是自主的，并且不同流程之间的所有通信都是通过</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT总线进行的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我还可以将加载的Flow移到单独的服务器上进行分布式处理。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与终端设备的通信协议</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我的公寓不是很大，特别是没有地方可以放置交换单元，因此我决定使用无线模块。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
系统使用隐藏的控制继电器使物理按钮与插座保持在同一系列中。直接控制和中央控制器发生故障时都需要物理按钮。我在Z-Wave和ZigBee无线系统之间进行选择。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在系统集成时，Z-Wave技术拥有所需设备的最完整集合。在不同的国家/地区，Z-Wave使用不同的工作频率，在俄罗斯，您可以正式使用869 MHz的频率。自从我在俄罗斯购买了大多数传感器以来，我决定对整个系统使用官方频率。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除Z-Wave外，系统还使用BroadLink IR模块和Modbus TCP。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了将Z-Wave集成到Node-RED中，我选择了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenZWave</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C ++库</font><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-contrib-openzwave</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font color="#909090"><font style="vertical-align: inherit;">事件处理Z-Wave</font></font><font style="vertical-align: inherit;"> 
集成</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">Modbus</font></a><font style="vertical-align: inherit;">使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">node-red-contrib-modbus</font></a><font style="vertical-align: inherit;">，管理BroadLink- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">node-red-contrib-broadlink-control</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/a4/pg/z5/a4pgz5_fbdwsyckeftoa2nnkd5e.png" alt="Z-Wave事件处理"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据库</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我选择MongoDB作为主要数据库：传感器和终端设备的当前读数都写入那里，它还存储了空调和多媒体的IR代码。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
InfluxDB用作存储时间序列的基础。</font><font style="vertical-align: inherit;">根据这些数据，您可以看到湿度，温度的图表，并进行任何分组。</font><font color="#909090"><font style="vertical-align: inherit;">一个月的室外温度读数</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/0h/ij/vs/0hijvsflebsgvi_jhsteuwrno-e.png" alt="     "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前端</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我决定自己编写前一部分，以实现最大的系统灵活性。</font><font style="vertical-align: inherit;">使用仪表板时，使用两个辅助系统：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">伊蚊的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MQTT服务器</font><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">授权服务器。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
授权服务器通过登录名和密码或通过属于本地网络来发出JWT令牌，此后，MQTT服务器每次为前端系统发送或接收消息时都会检查该令牌。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前端是用ReactJS编写的，并且WebSockets上的MQTT（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT.JS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）被</font><font style="vertical-align: inherit;">用作服务器通信协议</font><font style="vertical-align: inherit;">。使用MobX作为状态。也使用TypeScript，并且所有这些都编译webpack。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该应用程序包含两个页面：</font><font color="#909090"><font style="vertical-align: inherit;">Z-Wave设备的“ </font></font></font><br>
<br>
<img src="https://habrastorage.org/webt/d-/im/v2/d-imv2wdmjvnia-chaycz14qhuy.png" alt="Dashboard"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪表板</font></font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/it/_9/piit_9wpnyzdhkr2j7dorwm2mps.png" alt="  Z-Wave-"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理”面板</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
在管理面板上，您可以添加和删除设备，配置其参数和关联。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mq/bj/_t/mqbj_ts0a5osdwnblvhh_u4pa08.png" alt="  FGD212"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FGD212调光器设置</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在“仪表板”页面上，您可以添加新页面并根据需要组合设备小部件。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从软件的角度来看，每个设备都是一个单独的模块，可通过接口（Typescript）输入到系统中。</font><font style="vertical-align: inherit;">这样可以很容易地扩展和在仪表板上轻松集成新设备。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设备</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为控制器，我使用</font><font style="vertical-align: inherit;">在其上部署了Ubuntu Server </font><font style="vertical-align: inherit;">的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel NUC NUC7PJYH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了与Z-Wave网络通信，我选择了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB记忆棒Z-Wave.Me</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为智能家居的主要遥控器，使用了Android平板电脑，我在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alibaba.com上</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">订购了该平板电脑</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">平板电脑是从工厂直接购得的：带有Vesa支架，PoE电源和电源插头（非USB）。</font><font style="vertical-align: inherit;">数位板由位于控制柜中DIN导轨上的12V电源供电。</font><font style="vertical-align: inherit;">数位板中没有电池，以免出现持续充电的问题。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我根据规格订购了平板电脑。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-4/af/sa/-4afsabw1da8l2bsf51zfwqtym8.jpeg" alt=" "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遥控</font></font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">气候系统</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了保持舒适的气候，系统使用：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在三个区域中进行电地暖。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">居住区的空调。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中央通风。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加湿器。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暖气。</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通风</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于房子位于繁忙的高速公路旁，我根本不想打开窗户，因此我使用通风系统。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ly/wi/wt/lywiwtj59f9rfwmbilvdibqrety.jpeg" alt="   ,     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窗户上的黑尘大约在三个月内累积，</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
研究了不打开窗户就解决通风问题的不同方法，我列出了三个选项的简短清单：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在每个房间安装通气孔。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装室外机并在外墙上布线。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中央通风系统。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
呼吸器被立即拒绝，因为必须将它们放在每个房间中，我认为它们对于正常的空气交换非常嘈杂。对我来说重要的条件之一是低噪音和快速通风的能力。使用通气孔时，带有过滤器和风扇的砖块直接悬挂在房间内的墙上，这会占用公寓中的额外空间。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
许多安装人员都提供安装外部通风装置或向阳台安装电源的功能。但是我没有阳台，墙上的外部设备看起来很笨重。鉴于已经有两个空调机组挂在墙上，这样的设计就不会通过批准。因此，我选择了中央通风系统。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于公寓的空间有限，并且不想降低整个公寓的天花板，因此流入量安装在降低天花板的走廊上，而输入则来自儿童房。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vr/vz/rr/vrvzrrj0g5z15t0df-7nfalpz3u.jpeg" alt=" "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通风输入</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
使用金刚石钻在外壁上钻一个直径为160毫米的孔，并用外部格栅镀锌。进水管用K-flex绝缘材料绝缘。然后，管道沿着厨房的墙壁穿过，进入主通风单元。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/wh/nx/jjwhnx9umnabl7bgkbie1pcscu8.jpeg" alt="  Breezart 550 lux     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breezart 550 lux通风装置和可选过滤器</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
装置通风装置由</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Breezart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font><font style="vertical-align: inherit;">。在选择时，我考虑了安装成本，尺寸以及连接到自动化系统的能力。该装置的最大容量为每小时550立方米：</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-f/2d/9z/-f2d9zrqe5bprzao5zpma2vgtio.png" alt=" "></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该系统具有一个10速静音风扇和一个电空气加热器。入口处安装有机电阀，当设备关闭时，该阀会关闭，以免冷空气在公寓内走动。在电子方面，该装置提供了三个Modbus端口，温度传感器和压力传感器，以确定过滤器是否脏污。安装中包括一个粗滤器G4。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cd/lg/oh/cdlgohth4-gnxy_raief3jysfpy.jpeg" alt="     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用六个月后</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
的粗过滤器使用一年后，粗过滤器堵塞了70％，但根据CO 2传感器判断，通风不再以低速运转。</font><font color="#909090"><font style="vertical-align: inherit;">直到12月20日-过滤器堵塞，12月20日之后-新的过滤器，速度相同</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/bs/qe/nn/bsqennprgexihmp5qlnppjhppye.png" alt=" 20  —  ,  20  —  ,    "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通风安装后，有一个细过滤器F7。对于我的情况，使用更精细的过滤器（例如HEPA），我认为这是不合适的：它们会迅速堵塞并且安装将无法推动它们。另外，制造商也不建议超过过滤器的压降，因为这会增加风扇的负载，并且过滤器上的污物可能会开始吹入房间。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/43/1a/9l/431a9lvm3xj9hbclnskkl-mknyq.png" alt="   "></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在细过滤器之后，安装了两个机械空气流量调节器，然后是通向房间的几条SONODEC柔性空气导管。选择这种类型的风管，以免放置笨重的消声器，同时又淹没了设备的噪音。关闭天花板后，只能以走廊8的速度（每小时440立方米）开始听到通风系统的声音。通风口处有两个方向可调的格栅。</font><font style="vertical-align: inherit;">
安装在</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/7k/im/zu7kimcgwkzo5aev9gox2zfujpy.jpeg" alt="   "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">天花板</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上的</font><font color="#909090"><font style="vertical-align: inherit;">通风系统通风</font></font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/uq/ya/ltuqya4yak7ydqqfwaelvorpsxg.jpeg" alt="     "><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出到其中一个房间</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该套件的遥控器连接到一个Modbus端口，一个Modbus TCP HF2211服务器连接到第二个。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/a2/_r/rda2_rztx4z181nfpl3fxapgwzs.jpeg" alt="Modbus RTU — Modbus TCP converter HF2211"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modbus RTU-Modbus TCP转换器HF2211</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该服务器一方面允许您通过Wi-Fi或以太网连接到内部网络，另一方面可以通过Modbus RTU设备连接。然后，可以在服务器上进行必要的设置，并已通过网络访问通风设备。每300毫秒轮询一次安装：检查错误和校验和，然后才允许将一些数据写入寄存器。与安装的通信通过</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-contrib-modbus插件进行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font color="#909090"><font style="vertical-align: inherit;">通过Modbus从通风装置</font></font><font color="#909090"><font style="vertical-align: inherit;">接收和发送参数的方案</font></font><font color="#909090"><font style="vertical-align: inherit;">通过Modbus从通风装置</font></font><font color="#909090"><font style="vertical-align: inherit;">接收和发送参数</font></font><font style="vertical-align: inherit;"> 
的厂商网站上有</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">Modbus寄存器</font></a><font style="vertical-align: inherit;">的详细</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">参考信息</font></a><font style="vertical-align: inherit;">和</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">一般说明</font></a></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/k7/2v/p_/k72vp_pyjxo8efdugktk6j8xbe0.png" alt="        modbus"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/v6/cr/yev6crajttwfavoo--xqpnhx9j4.png" alt="        modbus"><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行此安装，但是您需要检查控制器和固件的版本。通风装置由时间和CO 2 MH-Z19b传感器自动控制。</font><font color="#909090"><font style="vertical-align: inherit;">流量通风自动化</font></font><font color="#909090"><font style="vertical-align: inherit;">流量自动化通风</font></font><font style="vertical-align: inherit;"> 
CO 2传感器是便携式的，在MH-Z19b传感器，两节18650电池，ESP32和IRF520 mosfet的基础上组装而成（用于在控制器睡眠时断开传感器的电源）。</font><font color="#909090"><font style="vertical-align: inherit;">CO 2读数达到一个月的峰值，最高达到1800 PPM-来宾随后进行了更高转速的通风，</font></font><font style="vertical-align: inherit;"> 
根据安装速度，设定了舒适的进气温度，从而加热了空气加热器。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/py/-w/if/py-wifq8mla3iw9k6in1sn9_eek.png" alt="Flow  "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/b8/iw/gr/b8iwgr4ld9mrdjuuafbhas6dpna.png" alt="Flow  "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/0i/e_/7q/0ie_7q_6cc6f-eipfnui0jx-n6k.png" alt=" CO₂  ,   1800 PPM —         "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在较高的速度下，需要较高的温度-否则会感觉到冷空气流。</font><font style="vertical-align: inherit;">为了在冬天不消耗太多电，当温度在-7°C时较冷时，安装速度应限制在三档。</font><font style="vertical-align: inherit;">在晚上，安装被限制为第四速度。</font><font style="vertical-align: inherit;">如果没有人在家，系统将自动切换到第一速度。</font><font style="vertical-align: inherit;">在命令“ Vacation”上是完全关闭。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
休假后有预热模式，全速播放，并在计时器上转换为第一速度。</font><font style="vertical-align: inherit;">如果系统具有CO 2传感器，则可以根据全局限制进行附加速度控制。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调理</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该系统具有多个具有制冷和制热模式的空调。曾经有过放置中央空调的想法，但是所有系统都太大了，因此没有机会调节每个房间的温度。不幸的是，我的空调仅由IR控制。因此，我购买了Broadlink RM Mini3控制面板。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8j/iy/uj/8jiyujzojcsbgybjonzuctvefxo.jpeg" alt="Broadlink RM Mini3"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Broadlink RM Mini3</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
如果使用本机应用程序，则此远程服务器将连接到中文服务器，因此所有配置和管理命令均使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-red-contrib-broadlink-control</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模块直接从Node-RED传输</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我没有找到用于空调的清晰的IR代码，因此遥控器传输了整个状态（转速，模式，温度）-使用Broadlink将所有可能的加热和制冷状态从空调遥控器复制到数据库中。没有启用或禁用的干净命令。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是我发现了如何使用空调定时开关机。我将它们设置10秒钟，然后将其复制到数据库中。现在，当打开时，首先发送通过计时器打开的命令，然后发送设置模式以及温度的命令。</font><font color="#909090"><font style="vertical-align: inherit;">空调控制</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/am/is/tm/amistmp9wbyfvyap7bg-nvvvcte.png" alt=" "></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该脚本检查外部天气，如果值可以接受（超过-7°C），则根据一天中的时间和室温打开空调进行加热或冷却。</font><font style="vertical-align: inherit;">温度传感器每小时读取一次。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果所有人都离开了房屋，空调将关闭。</font><font style="vertical-align: inherit;">如果那里没有人，并且温度过高或过低，但加热电池尚未打开，则每小时进行15分钟的冷却或加热以保持室内气候。</font><font color="#909090"><font style="vertical-align: inherit;">空调管理方案</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/lr/oa/er/lroaerpssy1m9qyknb0c39hrfse.png" alt="空调管理方案"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地暖</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该系统具有三个用于地板电加热的电路。它们由</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三个HeatIt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Z-Wave温控器控制</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/ct/k-/svctk-3pmyypmjsvczxqehdvksm.jpeg" alt="恒温器HeatIt"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">温控器HeatIt</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
温控器允许您为不同类型的加热元件配置不同的电阻参数，具有儿童保护功能，两种保存的加热模式以及其他次要设置。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在寒冷季节，地面温度比夏季高1°C。当家里没有人时，甚至在晚上都没有人时，为了节省能源，应关闭地板，并在早晨或有人回家时打开地板。在浴室中，地板会升高温度，如果打开灯，门就会关上，直到门关上并且湿度急剧上升为止，一直运动。一个小时后，地板将进入先前的状态或关闭（如果夜幕降临时）。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/pg/uj/u-/pguju-x0pul9hmoam6xz4tgsvx8.png" alt="地板下控制方案"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加热地板</font></font></font><font style="vertical-align: inherit;"><font color="#909090"><font style="vertical-align: inherit;">管理脚本加热地板管理脚本</font></font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/2k/hm/zw/2khmzwkksrhsrejcjq9thylccck.png" alt="地板下控制方案"></a><br>
<font color="#909090"><font style="vertical-align: inherit;"></font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暖气</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于莫斯科并不总是根据车窗外的温度随时关闭或调节供暖时间，因此决定在每个电池上放置一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Danfoss Living Connect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">温控器</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/0q/aa/fx0qaaxnvyqupve_oujmgfo4aza.jpeg" alt="温控器Danfoss Living Connect"><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">温控器Danfoss Living Connect</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
该温控器使用Z-Wave协议由两根手指电池供电。</font><font style="vertical-align: inherit;">自安装以来已经过去了一年，但电池尚未用完。</font><font style="vertical-align: inherit;">最高设定温度为28°C。</font><font style="vertical-align: inherit;">由于传感器位于电池旁边，并且未连接遥控器，因此有时会说谎。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在夏季，温度调节器始终处于“打开”位置，每两周一次完全关闭，以免库存变酸。</font><font style="vertical-align: inherit;">当您在一周中第一次连接时，传感器已校准（由于电池定期关闭，这并没有真正令我的妻子满意），但此后一切正常。</font><font style="vertical-align: inherit;">在供暖季节开始之前，检查两周的室外平均温度，如果温度低于10°C，则恒温器进入供暖模式。</font><font style="vertical-align: inherit;">如果室内温度高于舒适温度，则恒温器会降低温度或完全关闭电池。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加湿器</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了加湿公寓中的空气，考虑使用中央加湿器。有两种主要类型：蒸汽和传统。蒸汽加湿器需要大量电力才能不断加热水。两种类型的加湿器都会将大量的水排入排水管，以免水溢出。有必要进行计算，以防止管道起霜和流动。还值得考虑的是中央加湿器价格昂贵并且占用大量空间。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我决定在每个房间使用超声波加湿器。它们会迅速提高湿度，但是需要纯净水，最好是在反渗透之后。湿度可以在加湿器上设置，也可以使用IR进行控制。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/33XXlI4m3vk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<font color="#909090"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口操作的示例</font></font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
在本文的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二部分中，</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我将讨论照明，多媒体系统和安全传感器，并总结该系统的长期使用。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN487966/index.html">TDD用于微控制器。第1部分：首飞</a></li>
<li><a href="../zh-CN487970/index.html">我们在Microsoft Teams中翻译公司门户</a></li>
<li><a href="../zh-CN487972/index.html">黑客的非正式采访</a></li>
<li><a href="../zh-CN487978/index.html">我的研究：“为什么要玩有竞争力的在线游戏？”</a></li>
<li><a href="../zh-CN487980/index.html">Spring Boot自动配置如何工作</a></li>
<li><a href="../zh-CN487990/index.html">网络威胁。2020年预测：人工智能，云层中的空白，量子计算</a></li>
<li><a href="../zh-CN487996/index.html">脚本驱动程序和服务器母亲如何接管IT</a></li>
<li><a href="../zh-CN488000/index.html">特斯拉格子。三电机驱动器布局的两个选项</a></li>
<li><a href="../zh-CN488002/index.html">一个怪胎的情况</a></li>
<li><a href="../zh-CN488006/index.html">在Moscow Python Conf ++上，与语言开发人员交谈</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>