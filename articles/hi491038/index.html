<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯУп ЁЯМ┤ ЁЯФм Yandex рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдЦреЛрд▓рддрд╛ рд╣реИ ЁЯСйтАНЁЯФз ЁЯзг ЁЯРТ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЖрдЬ рд╣рдо рдкрд░реАрдХреНрд╖рдг рдХреЛрдб рдХреЗ рд▓рд┐рдП рд╕реНрд░реЛрдд рдХреЛрдб рдЦреЛрд▓рддреЗ рд╣реИрдВ, HTTP рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд░реВрдкрд░реЗрдЦрд╛, рдЬрд┐рд╕реЗ Yandex.Taxi рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред GITHub рдкрд░...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Yandex рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдЦреЛрд▓рддрд╛ рд╣реИ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/491038/"><img src="https://habrastorage.org/webt/7y/cj/rl/7ycjrlfwig5ljtuiaypfuayyibc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЬ рд╣рдо рдкрд░реАрдХреНрд╖рдг рдХреЛрдб рдХреЗ рд▓рд┐рдП рд╕реНрд░реЛрдд рдХреЛрдб рдЦреЛрд▓рддреЗ рд╣реИрдВ, HTTP рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд░реВрдкрд░реЗрдЦрд╛, рдЬрд┐рд╕реЗ Yandex.Taxi рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GITHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ </font><font style="vertical-align: inherit;">MIT рд▓рд╛рдЗрд╕реЗрдВрд╕ рдХреЗ рддрд╣рдд </font><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testuite рдХреЗ рд╕рд╛рде, HTTP рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рддреИрдпрд╛рд░ рддрдВрддреНрд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:</font></font><br>
<br>
<ul>
<li>      HTTP API.</li>
<li>   HTTP-,      .</li>
<li>,          .</li>
<li>    ,      .</li>
</ul><a name="habracut"></a><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex.Taxi рдмреИрдХрдПрдВрдб рдореЗрдВ рд╕реИрдХрдбрд╝реЛрдВ рдорд╛рдЗрдХреНрд░реЛрд╕рд░реНрд╡рд┐рд╕реЗрдЬ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдирдП рд▓рдЧрд╛рддрд╛рд░ рджрд┐рдЦрд╛рдИ рджреЗ рд░рд╣реЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рдо рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдврд╛рдВрдЪреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ C ++ рдореЗрдВ рд╕рднреА рдЕрддреНрдпрдзрд┐рдХ рднрд░реА рд╣реБрдИ рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рд╡рд┐рдХрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдмрд╛рд░реЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдореЗрдВ Habr├й</font></a><font style="vertical-align: inherit;"> рд╕реЗ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдмрд╛рдд рдХреА рд╣реИ</font></a><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рд╣рдо рдкрд╛рдпрдерди рдореЗрдВ рдХрдо рдорд╛рдВрдЧ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛рдПрдВ рдФрд░ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдмрдирд╛рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╕реЗрд╡рд╛ рдЕрдкрдиреА рд╕рдорд╕реНрдпрд╛ рдХреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╣рд▓ рдХрд░рддреА рд╣реИ, рдЕрдиреНрдп рд╕реЗрд╡рд╛рдУрдВ рдФрд░ рдЕрдВрддрд┐рдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдПрдкреАрдЖрдИ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рдЗрд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдПрдХ рдмреНрд▓реИрдХ рдмреЙрдХреНрд╕ рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдкрд░ рдкрд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреЛрдИ рддреИрдпрд╛рд░ рдЙрдкрдХрд░рдг рдирд╣реАрдВ рд╣реИрдВ - рдЖрдкрдХреЛ рдкрд░реАрдХреНрд╖рдг рд╡рд╛рддрд╛рд╡рд░рдг рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ рд╣реЛрдЧрд╛:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдмрдврд╝рд╛рдПрдВ рдФрд░ рднрд░реЗрдВ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд╡рд░реЛрдзрди рдФрд░ рд╕реНрдкреВрдл HTTP рдЕрдиреБрд░реЛрдз;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдПрдХ рдкрд░реАрдХреНрд╖рдг рд╕реЗрд╡рд╛ рдЪрд▓рд╛рдПрдВред</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпреВрдирд┐рдЯ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдЪреМрдЦрдЯреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдХрд░рдирд╛ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рдФрд░ рдЧрд▓рдд рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЙрдирдХрд╛ рдХрд╛рд░реНрдп рдЕрд▓рдЧ рд╣реИ: рдЫреЛрдЯреЗ рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рдЗрдХрд╛рдЗрдпреЛрдВ рдХреЗ рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг - рдШрдЯрдХ, рд╡рд░реНрдЧ, рдХрд╛рд░реНрдпред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╛рдЗрдЯреЗрд╕реНрдЯ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдорд╛рдирдХ рдкрд╛рдпрдерди рдкрд░реАрдХреНрд╖рдг рдврд╛рдВрдЪреЗ </font><font style="vertical-align: inherit;">рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЗрд╕рд╕реЗ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рд╣рдо рдЬрд┐рд╕ рдорд╛рдЗрдХреНрд░реЛрд╕реЗрд╡реНрд╕ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВ рд╡рд╣ рдХрд┐рд╕ рднрд╛рд╖рд╛ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдм рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ GNU / Linux, macOS рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдЪрд▓рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдПрдХреАрдХрд░рдг рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдЕрд░реНрдерд╛рдд, рдХрдИ рд╕реЗрд╡рд╛рдУрдВ рдХреА рдмрд╛рддрдЪреАрдд (рдФрд░ рдпрджрд┐ рд╕реЗрд╡рд╛ рдкрд╛рдпрдерди рдореЗрдВ рд▓рд┐рдЦреА рдЧрдИ рд╣реИ, рддреЛ рдирд┐рдореНрди-рд╕реНрддрд░реАрдп рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП), рд╣рдо рдЗрди рдорд╛рдорд▓реЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд╕реЗрд╡рд╛ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗред</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╕реНрддрд╛рд░ рдХрд╛ рд╕реНрддрд░</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдг рдЙрдкрдХрд░рдг</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ / рд╕рдорд╛рд░реЛрд╣, рдХрдХреНрд╖рд╛, рдШрдЯрдХ, рдкреБрд╕реНрддрдХрд╛рд▓рдп</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдирдХ рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pytest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Googletest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдХрднреА-рдХрднреА рдЕрднреА рднреА рдкрд░реАрдХреНрд╖рдг рдХрд░рддрд╛ рд╣реИ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microservice</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдг рд╕реВрдЯ</font></font></i></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдЗрдХреНрд░реЛрд╕рд┐рд╕реНрдЯ рд╕реЗрд╡рд╛ рдкрд╣рдирд╛рд╡рд╛ (рдРрдк)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг (рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ)</font></font></td>
</tr>
</tbody></table></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдЪрд╛рд▓рди рд╕рд┐рджреНрдзрд╛рдВрдд</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдВрддрд┐рдо рд▓рдХреНрд╖реНрдп рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рд╣реИ рдХрд┐ рд╕реЗрд╡рд╛ HTTP рдХреЙрд▓ рдХрд╛ рд╕рд╣реА рдЙрддреНрддрд░ рджреЗрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо HTTP рдХреЙрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХрд┐рд╕реА рд╕реЗрд╡рд╛ рдХреЛ рд╢реБрд░реВ рдХрд░рдирд╛ / рд░реЛрдХрдирд╛ рдПрдХ рд░реВрдЯреАрди рдСрдкрд░реЗрд╢рди рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рд╣рдо рдЬрд╛рдБрдЪ рдХрд░рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реЗрд╡рд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж HTTP рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдмрд╛рд╣рд░реА рд╕реЗрд╡рд╛рдПрдБ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИрдВ рддреЛ рд╕реЗрд╡рд╛ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддреА рд╣реИред</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><img src="https://habrastorage.org/webt/as/fh/yy/asfhyyekxad2idetfx6eg6_mf04.png"><br>
</a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд░реАрдХреНрд╖рдг рд╕реВрдЯ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ (PostgreSQL, MongoDB ...) рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реИред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдкрд░реАрдХреНрд╖рдг рд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдкрд░реАрдХреНрд╖рдг рдбреЗрдЯрд╛ рд╕реЗ рднрд░ рджреЗрддрд╛ рд╣реИред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдЕрд▓рдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдП рдЧрдП microservice рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реИред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рд╡реЗрдм рд╕рд░реНрд╡рд░ (рдореЙрдХрд╕реЗрд╡рд░) рд▓реЙрдиреНрдЪ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдмрд╛рд╣рд░реА рд╡рд╛рддрд╛рд╡рд░рдг рдХреА рдирдХрд▓ рдХрд░рддрд╛ рд╣реИред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдг рдХрд░рддрд╛ рд╣реИред</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд░реАрдХреНрд╖рдг рдХреА рдЬрд╛рдБрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрдпрд╛ рд╕реЗрд╡рд╛ HTTP рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдВрднрд╛рд▓рддреА рд╣реИред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╕реЗрд╡рд╛ рд╕реАрдзреЗ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╛рд╣реНрдп рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ / рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ / рдЕрдиреБрдХреНрд░рдоред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реЗрд╡рд╛ рдХреА рдЖрдВрддрд░рд┐рдХ рд╕реНрдерд┐рддрд┐ рдЙрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬреЛ рд╡рд╣ рдЯреЗрд╕реНрдЯрдкреЙрдЗрдВрдЯ рдХреЛ рдкрд╛рд╕ рдХрд░рддреА рд╣реИред</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mockserver</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдПрдХ рдПрдХрд▓ рдорд╛рдЗрдХреНрд░реЛрд╕рд┐рд╕реНрдЯ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдмрд╛рд╣рд░реА рд╕реЗрд╡рд╛рдУрдВ рдХреЗ HTTP API рдХреА рдХреЙрд▓ рдХреЛ рдмреНрд░рд┐рдЬ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рдХрд╛рдо рдХреЗ рдЗрд╕ рднрд╛рдЧ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рдкреНрд▓рдЧ-рдЗрди </font></font><code>mockserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font><font style="vertical-align: inherit;">рдорд┐рд▓рддреЗ рд╣реИрдВ </font></font><code>mockserver_https</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">Mockserver рдЕрдиреБрд░реЛрдз рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд╕рд╛рде рдПрдХ HTTP рд╕рд░реНрд╡рд░ рд╣реИ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдкрд░реАрдХреНрд╖рдг рдФрд░ рдореЗрдореЛрд░реА рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдп рд╣реИ рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдиреБрд░реЛрдз рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдХреНрдпрд╛ рдбреЗрдЯрд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдкрд░реАрдХреНрд╖рдг рдХреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛рдмреЗрд╕ рддрдХ рд╕реАрдзреЗ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдкреВрд░реНрд╡ рд╢рд░реНрдд рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкрд░рд┐рдгрд╛рдо рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЖрдЙрдЯ рдСрдл рдж рдмреЙрдХреНрд╕ рд╕рдорд░реНрдерд┐рдд PostgreSQL, MongoDB, Redisред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдбреЗрд╡рд▓рдкрд░ рдХреЛ рдкрд╛рдпрдерди рдФрд░ рдорд╛рдирдХ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╛рдЗрд╕реНрдЯреЗрд╕реНрдЯ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлреНрд░реЗрдорд╡рд░реНрдХ рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪрд▓реЛ рдПрдХ рд╕рд░рд▓ рдЪреИрдЯ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдХрджрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЖрд╡реЗрджрди рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд╕реНрд░реЛрдд рдХреЛрдб </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рджрд┐рдП рдЧрдП рд╣реИрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ij/5n/si/ij5nsiwj-ztlizpalprnxhxhdzy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджреГрд╢реНрдпрдкрдЯрд▓ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chat.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рд╛рде рд╕реВрдЪрдирд╛ рдХрд╛ рдЖрджрд╛рди </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреИрдЯ-рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреИрд╕реЗ рд╕реЗрд╡рд╛рдПрдВ рд╕рд╣рднрд╛рдЧрд┐рддрд╛ рдХрд░рддреА рд╣реИрдВ, рдЪреИрдЯ-рдмреИрдХреЗрдВрдб рдкреНрд░рддрд┐рдирд┐рдзрд┐ рд╕рдВрджреЗрд╢ рдХреЛ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗрд╡рд╛ рдореЗрдВ рднреЗрдЬ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рджреЛ рддрд░рд╣ рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреИрдЯ-рд╕реНрдЯреЛрд░реЗрдЬ-рдореЛрдВрдЧреЛ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреИрдЯ-рд╕реНрдЯреЛрд░реЗрдЬ-рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреИрдЯ рдмреИрдХреЗрдВрдб</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪреИрдЯ-рдмреИрдХреЗрдВрдб рд╕реЗрд╡рд╛ рдлреНрд░рдВрдЯ-рдПрдВрдб рд╕реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рд╣реИред </font><font style="vertical-align: inherit;">рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕реВрдЪреА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднреЗрдЬрдиреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рдкрд╕</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд┐рд╕</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЕрдиреБрд░реЛрдз рд╣реИрдВрдбрд▓рд░ рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ </font></font><code>POST /messages/retrieve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд рдХреЛрдб</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@routes.post('/messages/retrieve')</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_list</span>(<span class="hljs-params">request</span>):</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
    <span class="hljs-comment">#     </span>
    response = <span class="hljs-keyword">await</span> session.post(<font></font>
        storage_service_url + <span class="hljs-string">'messages/retrieve'</span>,<font></font>
            timeout=HTTP_TIMEOUT,<font></font>
        )<font></font>
        response.raise_for_status()<font></font>
        response_body = <span class="hljs-keyword">await</span> response.json()<font></font>
<font></font>
        <span class="hljs-comment">#    ,      </span>
        messages = list(reversed(response_body[<span class="hljs-string">'messages'</span>]))<font></font>
        result = {<span class="hljs-string">'messages'</span>: messages}
        <span class="hljs-keyword">return</span> web.json_response(result)</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрд╕реНрдЯ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реЗрд╡рд╛ рдХреЗ рд▓реЙрдиреНрдЪ рдХреЗ рд▓рд┐рдП рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рддреИрдпрд╛рд░ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рд╣рдо рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╣рдо рд╕реЗрд╡рд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕реА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#      . </span>
<span class="hljs-comment">#       ( scope='session'),   </span>
<span class="hljs-meta">@pytest.fixture(scope='session')</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">service_daemon</span>(<span class="hljs-params">
        register_daemon_scope, service_spawner, mockserver_info,
</span>):</span>
    python_path = os.getenv(<span class="hljs-string">'PYTHON3'</span>, <span class="hljs-string">'python3'</span>)<font></font>
    service_path = pathlib.Path(__file__).parent.parent<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> register_daemon_scope(<font></font>
            name=<span class="hljs-string">'chat-backend'</span>,<font></font>
            spawn=service_spawner(<font></font>
                <span class="hljs-comment">#   .    тАФ  ,</span>
                <span class="hljs-comment">#    </span><font></font>
                [<font></font>
                    python_path,<font></font>
                    str(service_path.joinpath(<span class="hljs-string">'server.py'</span>)),
                    <span class="hljs-string">'--storage-service-url'</span>,
                    <span class="hljs-comment">#       mockserver,</span>
                    <span class="hljs-comment">#         mockserver   /storage</span>
                    mockserver_info.base_url + <span class="hljs-string">'storage/'</span>,<font></font>
                ],<font></font>
                <span class="hljs-comment">#  URL,      </span>
                check_url=SERVICE_BASEURL + <span class="hljs-string">'ping'</span>,<font></font>
            ),<font></font>
    ) <span class="hljs-keyword">as</span> scope:
        <span class="hljs-keyword">yield</span> scope</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реНрдерд┐рд░рддрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд░реАрдХреНрд╖рдг рд╕реЗрд╡рд╛ рдХреЛ рдПрдХ HTTP рдЕрдиреБрд░реЛрдз рднреЗрдЬрддрд╛ рд╣реИред </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@pytest.fixture</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">server_client</span>(<span class="hljs-params">
        service_daemon, <span class="hljs-comment"># HTTP-  == 204</span>
        service_client_options,
        ensure_daemon_started,
        <span class="hljs-comment">#   mockserver ,      ,</span>
        <span class="hljs-comment">#    ,    </span>
        mockserver,
</span>):</span>
    <span class="hljs-keyword">await</span> ensure_daemon_started(service_daemon)
    <span class="hljs-keyword">yield</span> service_client.Client(SERVICE_BASEURL, **service_client_options)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪрд╛ рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рдХреИрд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рдП </font></font><code>chat-backend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдХреИрд╕реЗ рдЙрд╕реЗ рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬрд╛ рдЬрд╛рдПред </font><font style="vertical-align: inherit;">рдпрд╣ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ </font></font><code>chat-backend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рднрдВрдбрд╛рд░рдг рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рди </font></font><code>chat-storage-mongo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реА </font><font style="vertical-align: inherit;">, рди </font><font style="vertical-align: inherit;">рд╣реА </font></font><code>chat-storage-postgres</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><code>chat-backend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдХреЙрд▓ </font><font style="vertical-align: inherit;">рдХреЛ </font><font style="vertical-align: inherit;">рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП </font><font style="vertical-align: inherit;">, рд╣рдордиреЗ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдкреАрдЖрдИ рдХреЛ рдЧреАрд▓рд╛ рдХрд░ рджрд┐рдпрд╛ рд╣реИ </font></font><code>mockserver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВ </font></font><code>POST messages/send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╣рдо рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд░реЛрдз рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд░реЛрдз рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╕рдордп, </font></font><code>chat-backend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдЧреНрд░рд╣рдг рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ </font></font><code>POST messages/send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_messages_send</span>(<span class="hljs-params">server_client, mockserver</span>):</span>
    <span class="hljs-comment">#    mockserver   POST messages/send</span>
<span class="hljs-meta">    @mockserver.handler('/storage/messages/send')    </span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_send</span>(<span class="hljs-params">request</span>):</span>
        <span class="hljs-comment"># ,       ,</span>
        <span class="hljs-comment">#     chat-backend</span>
        <span class="hljs-keyword">assert</span> request.json == {
            <span class="hljs-string">'username'</span>: <span class="hljs-string">'Bob'</span>,
            <span class="hljs-string">'text'</span>: <span class="hljs-string">'Hello, my name is Bob!'</span>,<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> mockserver.make_response(status=<span class="hljs-number">204</span>)<font></font>
<font></font>
    <span class="hljs-comment">#    chat-backend</span>
    response = <span class="hljs-keyword">await</span> server_client.post(
        <span class="hljs-string">'messages/send'</span>,<font></font>
        json={<span class="hljs-string">'username'</span>: <span class="hljs-string">'Bob'</span>, <span class="hljs-string">'text'</span>: <span class="hljs-string">'Hello, my name is Bob!'</span>},<font></font>
    )<font></font>
    <font></font>
    <span class="hljs-comment"># ,        HTTP-</span>
    <span class="hljs-keyword">assert</span> response.status == <span class="hljs-number">204</span><font></font>
<font></font>
    <span class="hljs-comment"># ,  chat-backend       POST messages/send</span>
    <span class="hljs-keyword">assert</span> handle_send.times_called == <span class="hljs-number">1</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВ </font></font><code>POST messages/retrieve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╣рдо рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд░реЛрдз рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд░реЛрдз рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╕рдордп, </font></font><code>chat-backend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдЧреНрд░рд╣рдг рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ </font></font><code>POST /messages/retrieve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><code>chat-backend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "рдлрд╝реНрд▓рд┐рдкреНрд╕" рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ рдкреНрд░рд╛рдкреНрдд рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕реВрдЪреА рддрд╛рдХрд┐ рдирд╡реАрдирддрдо рд╕рдВрджреЗрд╢ рд╕реВрдЪреА рдХреЗ рдЕрдВрдд рдореЗрдВ рд╣реЛрдВред</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_messages_retrieve</span>(<span class="hljs-params">server_client, mockserver</span>):</span><font></font>
    messages = [<font></font>
        {<font></font>
            <span class="hljs-string">'username'</span>: <span class="hljs-string">'Bob'</span>,
            <span class="hljs-string">'created'</span>: <span class="hljs-string">'2020-01-01T12:01:00.000'</span>,
            <span class="hljs-string">'text'</span>: <span class="hljs-string">'Hi, my name is Bob!'</span>,<font></font>
        },<font></font>
        {<font></font>
            <span class="hljs-string">'username'</span>: <span class="hljs-string">'Alice'</span>,
            <span class="hljs-string">'created'</span>: {<span class="hljs-string">'$date'</span>: <span class="hljs-string">'2020-01-01T12:02:00.000'</span>},
            <span class="hljs-string">'text'</span>: <span class="hljs-string">'Hi Bob!'</span>,<font></font>
        },<font></font>
    ]<font></font>
<font></font>
    <span class="hljs-comment">#    mockserver   POST messages/retrieve</span>
<span class="hljs-meta">    @mockserver.json_handler('/storage/messages/retrieve')</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_retrieve</span>(<span class="hljs-params">request</span>):</span>
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'messages'</span>: messages}<font></font>
<font></font>
    <span class="hljs-comment">#    chat-backend</span>
    response = <span class="hljs-keyword">await</span> server_client.post(<span class="hljs-string">'messages/retrieve'</span>)<font></font>
<font></font>
    <span class="hljs-comment"># ,        HTTP-</span>
    <span class="hljs-keyword">assert</span> response.status == <span class="hljs-number">200</span><font></font>
<font></font>
    body = response.json()<font></font>
    <font></font>
    <span class="hljs-comment"># ,    chat-backend    ,</span>
    <span class="hljs-comment">#   ,       </span>
    <span class="hljs-keyword">assert</span> body == {<span class="hljs-string">'messages'</span>: list(reversed(messages))}<font></font>
<font></font>
    <span class="hljs-comment"># ,  chat-backend       POST messages/retrieve</span>
    <span class="hljs-keyword">assert</span> handle_retrieve.times_called == <span class="hljs-number">1</span></code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреИрдЯ-рднрдВрдбрд╛рд░рдг-postgres</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реЗрд╡рд╛ </font></font><code>chat-storage-postgres</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдПрд╕рдХреНрдпреВрдПрд▓ рдбреЗрдЯрд╛рдмреЗрд╕ рдкрд░ рдЪреИрдЯ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд┐рд╕</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдХреИрд╕реЗ рд╡рд┐рдзрд┐ рдореЗрдВ PostgreSQL рд╕реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕реВрдЪреА рдкрдврд╝рддреЗ рд╣реИрдВ </font></font><code>POST /messages/retrieve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд рдХреЛрдб</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@routes.post('/messages/retrieve')</span>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span>(<span class="hljs-params">request</span>):</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> app[<span class="hljs-string">'pool'</span>].acquire() <span class="hljs-keyword">as</span> connection:<font></font>
            records = <span class="hljs-keyword">await</span> connection.fetch(
                <span class="hljs-string">'SELECT created, username, "text" FROM messages '</span>
                <span class="hljs-string">'ORDER BY created DESC LIMIT 20'</span>,<font></font>
            )<font></font>
        messages = [<font></font>
            {<font></font>
                <span class="hljs-string">'created'</span>: record[<span class="hljs-number">0</span>].isoformat(),
                <span class="hljs-string">'username'</span>: record[<span class="hljs-number">1</span>],
                <span class="hljs-string">'text'</span>: record[<span class="hljs-number">2</span>],<font></font>
            }<font></font>
            <span class="hljs-keyword">for</span> record <span class="hljs-keyword">in</span> records<font></font>
        ]<font></font>
        <span class="hljs-keyword">return</span> web.json_response({<span class="hljs-string">'messages'</span>: messages})
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрд╕реНрдЯ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдЬрд┐рд╕ рд╕реЗрд╡рд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВ рд╡рд╣ PostgreSQL рдбреЗрдЯрд╛рдмреЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИред </font><font style="vertical-align: inherit;">рд╕рдм рдХреБрдЫ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдпрд╣ рдмрддрд╛рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ рдХрд┐ рдЯреЗрдмрд▓ рд╕реНрдХреАрдорд╛ рдХреА рддрд▓рд╛рд╢ рдХреЗ рд▓рд┐рдП рдХреМрди рд╕реА рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рд╣реИред </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@pytest.fixture(scope='session')</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pgsql_local</span>(<span class="hljs-params">pgsql_local_create</span>):</span>
    <span class="hljs-comment"># ,     </span><font></font>
    tests_dir = pathlib.Path(__file__).parent<font></font>
    sqldata_path = tests_dir.joinpath(<span class="hljs-string">'../schemas/postgresql'</span>)<font></font>
    databases = discover.find_databases(<span class="hljs-string">'chat_storage_postgres'</span>, sqldata_path)
    <span class="hljs-keyword">return</span> pgsql_local_create(list(databases.values()))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмрд╛рдХреА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдВрдлрд╝реЗрд╕реНрдЯрд╕реНрдЯреЙрдХрд╣реЛрдо</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╕реЗрдЯрдЕрдк</font></a><font style="vertical-align: inherit;"> рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рд╕реЗрд╡рд╛ рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИ </font></font><code>chat-backend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪрд▓рд┐рдП рдкрд░реАрдХреНрд╖рдгреЛрдВ рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВ </font></font><code>POST messages/send</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдпрд╣ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рд╕рдВрджреЗрд╢ рдмрдЪрд╛рддрд╛ рд╣реИред </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_messages_send</span>(<span class="hljs-params">server_client, pgsql</span>):</span>
    <span class="hljs-comment">#   POST /messages/send</span>
    response = <span class="hljs-keyword">await</span> server_client.post(
        <span class="hljs-string">'/messages/send'</span>, json={<span class="hljs-string">'username'</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-string">'text'</span>: <span class="hljs-string">'bar'</span>},<font></font>
    )<font></font>
<font></font>
    <span class="hljs-comment"># ,    </span>
    <span class="hljs-keyword">assert</span> response.status_code == <span class="hljs-number">200</span><font></font>
<font></font>
    <span class="hljs-comment"># ,     JSON    </span><font></font>
    data = response.json()<font></font>
    <span class="hljs-keyword">assert</span> <span class="hljs-string">'id'</span> <span class="hljs-keyword">in</span> data<font></font>
<font></font>
    <span class="hljs-comment">#     PostgreSQL  </span>
    cursor = pgsql[<span class="hljs-string">'chat_messages'</span>].cursor()<font></font>
    cursor.execute(<font></font>
        <span class="hljs-string">'SELECT username, text FROM messages WHERE id = %s'</span>, (data[<span class="hljs-string">'id'</span>],),<font></font>
    )<font></font>
    record = cursor.fetchone()<font></font>
<font></font>
    <span class="hljs-comment"># ,          , </span>
    <span class="hljs-comment">#     HTTP-</span>
    <span class="hljs-keyword">assert</span> record == (<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рд╡рд┐рдзрд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВ </font></font><code>POST messages/retrieve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдпрд╣ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рд╕рдВрджреЗрд╢ рд▓реМрдЯрд╛рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рдПрдВ рдЬреЛ рд╣рдореЗрдВ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рд░рд┐рдХреЙрд░реНрдб рдЬреЛрдбрд╝рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЯреЗрд╕реНрдЯрд╕реБрдЗрдЯ рдкрд░реАрдХреНрд╖рдг рд╕реЗ рдкрд╣рд▓реЗ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдЧрд╛ред </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-comment">--  chat-storage-postgres/tests/static/test_service/pg_chat_messages.sql</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> messages(id, created, username, <span class="hljs-type">text</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-keyword">DEFAULT</span>, <span class="hljs-string">'2020-01-01 00:00:00.0+03'</span>, <span class="hljs-string">'foo'</span>, <span class="hljs-string">'hello, world!'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> messages(id, created, username, <span class="hljs-type">text</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-keyword">DEFAULT</span>, <span class="hljs-string">'2020-01-01 00:00:01.0+03'</span>, <span class="hljs-string">'bar'</span>, <span class="hljs-string">'happy ny'</span>);</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#  chat-storage-postgres/tests/test_service.py</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_messages_retrieve</span>(<span class="hljs-params">server_client, pgsql</span>):</span>
    <span class="hljs-comment">#     testsuite     </span>
    <span class="hljs-comment">#  pg_chat_messages.sql</span>
    response = <span class="hljs-keyword">await</span> server_client.post(<span class="hljs-string">'/messages/retrieve'</span>, json={})
    <span class="hljs-keyword">assert</span> response.json() == {
        <span class="hljs-string">'messages'</span>: [<font></font>
            {<font></font>
                <span class="hljs-string">'created'</span>: <span class="hljs-string">'2019-12-31T21:00:01+00:00'</span>,
                <span class="hljs-string">'text'</span>: <span class="hljs-string">'happy ny'</span>,
                <span class="hljs-string">'username'</span>: <span class="hljs-string">'bar'</span>,<font></font>
            },<font></font>
            {<font></font>
                <span class="hljs-string">'created'</span>: <span class="hljs-string">'2019-12-31T21:00:00+00:00'</span>,
                <span class="hljs-string">'text'</span>: <span class="hljs-string">'hello, world!'</span>,
                <span class="hljs-string">'username'</span>: <span class="hljs-string">'foo'</span>,<font></font>
            },<font></font>
        ],<font></font>
    }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдХреНрд╖реЗрдкрдг</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдбреЙрдХрдЯрд░ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рд░рдирд┐рдВрдЧ рдЙрджрд╛рд╣рд░рдг рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рд╣реИред </font><font style="vertical-align: inherit;">рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдорд╢реАрди рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдбреЙрдХрдЯрд░ рдФрд░ рдбреЙрдХрдЯрд░-рдХрдВрдкреЛрдЬрд╝ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рднреА рдЙрджрд╛рд╣рд░рдг </font><b><font style="vertical-align: inherit;">рдкреНрд░рд╛рд░рдВрдн рдЪреИрдЯ</font></b><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред</font></font><code>docs/examples</code><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#   MongoDB</span><font></font>
docs/examples$ make run-chat-mongo<font></font>
<font></font>
<span class="hljs-comment">#   PostgreSQL</span>
docs/examples$ make run-chat-postgres</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЙрдиреНрдЪ рдХреЗ рдмрд╛рдж, URL рдХрдВрд╕реЛрд▓ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрдЧрд╛, рдЬрд╣рд╛рдБ рдЖрдк рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЪреИрдЯ рдЦреЛрд▓ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="bash hljs">chat-postgres_1 | ======== Running on http://0.0.0.0:8081 ========<font></font>
chat-postgres_1 | (Press CTRL+C to quit)</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рдПрдВ</font></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#    </span>
docs/examples$ make docker-runtests</code></pre><br>
<pre><code class="bash hljs"><span class="hljs-comment">#    </span><font></font>
docs/examples$ make docker-runtests-mockserver-example<font></font>
docs/examples$ make docker-runtests-mongo-example<font></font>
docs/examples$ make docker-runtests-postgres-example</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд▓реЗрдЦрди</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд┐рд╕реНрддреГрдд рдкрд░реАрдХреНрд╖рдгрд╕реВрдЪрдирд╛ рдкреНрд░рд▓реЗрдЦрди </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдкрд▓рдмреНрдз </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╣реИ</font></a><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд░реНрджреЗрд╢</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкреНрд░рд╢реНрди рд╣реИрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/yandex/yandex-taxi-testsuite/issues</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рдПрдХ рдЯрд┐рдкреНрдкрдгреА рдЫреЛрдбрд╝ рджреЗрдВред</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi491028/index.html">╨Я╨╛╨▓╨╡╨╗╨╕╤В╨╡╨╗╤М ╨╝╤Г╤Е</a></li>
<li><a href="../hi491030/index.html">рдбреЗрдмрд┐рдпрди рдкрд░ рдореАрдбрд┐рдпрд╛рд╡рд┐рдХрд┐ рдХреА рддреИрдирд╛рддреА (рдпрд╣ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ)</a></li>
<li><a href="../hi491032/index.html">"RTFM, рдпрд╛рд░!", рдпрд╛ рдХреИрд╕реЗ рдореБрдХреНрдд рдкрдиреАрд░ рдореБрдЭреЗ $ 5 рд▓рд╛рдЧрддред рдФрд░ рдпрд╣ $ 80 + рдкрд░ рд╣реЛ рд╕рдХрддрд╛ рдерд╛</a></li>
<li><a href="../hi491034/index.html">рд╡рд╛рдпрд░рдЧрд╛рд░реНрдб - рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдореЗрдВ рддреЗрдЬ рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд╡реАрдкреАрдПрди</a></li>
<li><a href="../hi491036/index.html">рдЬрдм рдПрдХ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдврд╛рдВрдЪреЗ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ</a></li>
<li><a href="../hi491040/index.html">рдирд┐рд╣рдиреА рдореЗрдВ рдХреНрдпреВрдП рдореАрдЯрдЕрдк - рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдерд╛ рдФрд░ рдШрдЯрдирд╛ рд╕реЗ рд╕рд╛рдордЧреНрд░реА</a></li>
<li><a href="../hi491044/index.html">MySQL рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП HA рд╕рдорд╛рдзрд╛рди рдХреЗ рд░реВрдк рдореЗрдВ рдЖрд░реНрдХреЗрд╕реНрдЯреНрд░рд╛ рдФрд░ рд╡реАрдЖрдИрдкреА</a></li>
<li><a href="../hi491050/index.html">NeoQUEST-2020 рдХреЗ рд▓рд┐рдП рдкрдВрдЬреАрдХрд░рдг: рдПрдкреЛрдХреИрд▓рд┐рдХрдкреНрдЯрд┐рдХ рд╡рд░реНрд▓реНрдб рдУрдкрди</a></li>
<li><a href="../hi491052/index.html">рд╕реЗрдВрдЯ рдкреАрдЯрд░реНрд╕рдмрд░реНрдЧ рдПрдЪрдПрд╕рдИ рдореЗрдВ рдХреНрдпреВрд░реЗрдЯрд░ рдХреИрд╕реЗ рдФрд░ рдХреНрдпреЛрдВ рдирдП рд╕рд┐рд░реЗ рд╕реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреА рдорджрдж рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi491054/index.html">PKCS # 11 рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ GPG рдХреБрдВрдЬреА рдХреЗ рд╕рд╛рде рдИрдореЗрд▓ рдкрддреНрд░рд╛рдЪрд╛рд░ рдкрд░ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>