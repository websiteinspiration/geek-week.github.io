<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëü üë• ü•ö Escrevemos melhor a pesquisa por substring do que nos livros did√°ticos üîΩ üêÅ ‚è∫Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A vida de um engenheiro √© cheia de surpresas: especialmente quando voc√™ precisa lidar com a produtividade. Por exemplo, o que acontece se voc√™ tentar ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Escrevemos melhor a pesquisa por substring do que nos livros did√°ticos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/491750/"><img src="https://habrastorage.org/webt/ri/ei/to/rieitoeutxefbbjts6ag-carfqk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vida de um engenheiro √© cheia de surpresas: especialmente quando voc√™ precisa lidar com a produtividade. </font><font style="vertical-align: inherit;">Por exemplo, o que acontece se voc√™ tentar executar esse c√≥digo Java? </font><font style="vertical-align: inherit;">Parece bastante inocente:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">//   String.repeat  JDK 11  :</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">var</span> needle = <span class="hljs-string">"A"</span>.repeat(<span class="hljs-number">500000</span>) + <span class="hljs-string">"B"</span>;
<span class="hljs-keyword">final</span> <span class="hljs-keyword">var</span> haystack = <span class="hljs-string">"A"</span>.repeat(<span class="hljs-number">1000000</span>) + <span class="hljs-string">"B"</span>;<font></font>
System.out.println(haystack.indexOf(needle));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esperamos, esperamos, esperamos ... Pelo menos no meu laptop OpenJDK 13 de 2015, encontrar uma agulha no palheiro leva cerca de um minuto. </font><font style="vertical-align: inherit;">Nossa boa e velha JVM passou por d√©cadas de ajuste de desempenho, implementou efetivamente intr√≠nsecas </font></font><code>String.indexOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e assim por diante. </font><font style="vertical-align: inherit;">O que poderia ter dado errado?</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este √© o come√ßo de uma s√©rie de v√°rios artigos, cortesia de seu autor, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linas Med≈æi≈´nas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e publicado originalmente no blog </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WiX Engineering</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</blockquote><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√™ uma olhada no que √© inserido: os dados s√£o especialmente selecionados para obter desempenho quadr√°tico no pior dos casos ( </font></font><code>O(nm)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onde </font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© o comprimento </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>m</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o comprimento </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) para o algoritmo de busca de substring ing√™nuo. Corremos todos os caracteres </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e, se eles coincidirem com os primeiros </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, come√ßamos a correr </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no loop interno - e assim por diante at√© o primeiro caractere incompat√≠vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode argumentar que este exemplo √© in√∫til, porque esses dados de entrada foram projetados e arquivados especialmente, na pr√°tica, voc√™ n√£o encontrar√° isso. Pense duas vezes. E se voc√™ estiver trabalhando em um servi√ßo da Web cujos usu√°rios possam carregar seq√º√™ncias de caracteres arbitr√°rias e, em algum lugar na parte de tr√°s do servi√ßo, houver um c√≥digo executado</font></font><code>indexOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nessas linhas? Depois, apenas alguns pedidos maliciosos, como o descrito acima, colocam seu servi√ßo de joelhos. Vale a pena conhecer, pelo menos, os piores casos para os dados de entrada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, existem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritmos de pesquisa de substring</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com complexidade linear ( </font></font><code>O(n+m)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Eles n√£o t√™m problemas com os dados do exemplo acima. Por exemplo, o c√≥digo Scala a seguir faz a mesma coisa, mas √© executado em milissegundos no mesmo computador, na mesma JVM e usando exatamente o mesmo sob o cap√¥ </font></font><code>java.lang.String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="java hljs">val needle = <span class="hljs-string">"A"</span> * <span class="hljs-number">500000</span> + <span class="hljs-string">"B"</span>
val haystack = <span class="hljs-string">"A"</span> * <span class="hljs-number">1000000</span> + <span class="hljs-string">"B"</span>
println(haystack.indexOfSlice(needle))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segredo da enorme diferen√ßa est√° no m√©todo </font></font><code>indexOfSlice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que faz parte da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca padr√£o do Scala</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ele implementa o inteligente algoritmo linear de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Knut-Morris-Pratt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . E n√£o, n√£o estou dizendo que o idioma X seja melhor que o idioma Y. Infelizmente, tudo √© muito mais complicado aqui! Por exemplo, </font></font><code>indexOfSlice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no Scala, esse √© um m√©todo generalizado que funciona n√£o apenas com cadeias de caracteres, mas tamb√©m em outras cole√ß√µes seq√ºenciais, e pode comparar n√£o apenas caracteres, mas tamb√©m elementos de outros tipos. Deve ser muito mais lento do que</font></font><code>String.indexOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do Java no caso intermedi√°rio (falaremos sobre isso mais tarde). Portanto, temos um algoritmo eficiente com desempenho muito melhor no pior caso, mas, em m√©dia, √© mais lento porque possui uma parte constante muito maior. Dilemas como esse s√£o um problema t√≠pico no ajuste de desempenho. N√£o existe uma p√≠lula m√°gica que resolva todos os problemas - voc√™ precisa analisar cuidadosamente o problema e fazer os micro-benchmarks certos.</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ ainda est√° comigo Boa! Veja bem, isso √© apenas uma introdu√ß√£o. Eu queria motiv√°-lo a lidar com a complexidade te√≥rica e o desempenho pr√°tico dos algoritmos. No restante deste artigo, examinaremos algumas implementa√ß√µes de v√°rios algoritmos de pesquisa de substring e seus benchmarks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos explorar tr√™s algoritmos de pesquisa de substring. Todos eles trabalham em tempo linear e requerem pr√©-processamento, linearmente dependente do comprimento </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. O c√°lculo do mesmo </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© necess√°rio apenas uma vez e, em seguida, pode ser reutilizado em v√°rias tentativas de pesquisa. Isso √© razo√°vel, porque em muitos casos precisamos procurar a mesma linha repetidamente. E mesmo que n√£o fa√ßamos isso, a pr√©-computa√ß√£o n√£o √© uma opera√ß√£o particularmente cara. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os algoritmos abaixo ignoram cada um dos caracteres em</font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apenas uma vez em uma linha (sem acesso aleat√≥rio pelo √≠ndice), para que todos funcionem bem no modo de streaming. </font><font style="vertical-align: inherit;">Este artigo surgiu durante um trabalho real em um servidor proxy para produ√ß√£o com base na estrutura </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netty</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e isso influenciou algumas das decis√µes de design da API. </font><font style="vertical-align: inherit;">Al√©m disso, como precisamos fazer uma pesquisa em buffers de bytes, o c√≥digo funcionar√° com </font></font><code>Byte</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, n√£o com </font></font><code>Char</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<hr><br>
<h2><font color="#D93740"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Knut-Morris-Pratt (algoritmo KMP)</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um algoritmo de pesquisa de substring bem conhecido, que remonta aos anos 70 do s√©culo passado. </font><font style="vertical-align: inherit;">Est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bem descrito na literatura</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , portanto n√£o o descreverei aqui em detalhes. </font><font style="vertical-align: inherit;">O ILC √© baseado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√°quinas de estado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - durante a fase de c√°lculo preliminar, uma matriz de √≠ndices de link √© constru√≠da com base em </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Durante a pesquisa, a m√°quina aceita caracteres </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um a um </font><font style="vertical-align: inherit;">na entrada </font><font style="vertical-align: inherit;">e atualiza seu estado interno de acordo (e o estado em que h√° apenas um √≠ndice na tabela de rela√ß√µes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementa√ß√£o no Scala</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font color="#D93740"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmo de pesquisa de substring bin√°rio</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, tive que inventar independentemente o nome desse algoritmo: nunca vi nada parecido em nenhum lugar da literatura. Como resultado, vim para o nome "Shifting Bit Mask". Mais tarde, verificou-se que esse algoritmo e suas varia√ß√µes s√£o conhecidos desde 1964 sob v√°rios </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nomes em ingl√™s</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como "Bitap", "Shift-or", "Shift-and", "Baeza-Yates - Gonnet". Obrigado aos leitores que encontraram para mim. Este artigo foi escrito muito antes desta not√≠cia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse algoritmo √© baseado em uma id√©ia muito simples e funciona muito bem, j√° que quase n√£o h√° saltos, e √© baseado em v√°rias opera√ß√µes bin√°rias primitivas. Por isso, ele tem um limite no comprimento </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que vamos procurar: n√£o pode ter mais que 64 bytes. Esse n√∫mero foi obtido simplesmente pelo n√∫mero de bits em</font></font><code>Long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na JVM. </font><font style="vertical-align: inherit;">Essa limita√ß√£o √© generosa o suficiente para um grande n√∫mero de tarefas reais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde que eu mesmo desenvolvi esse algoritmo, tentarei falar sobre ele com mais detalhes. </font><font style="vertical-align: inherit;">Primeiro, pr√©-calculamos o contexto de pesquisa para o desejado </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="scala hljs">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">computeBitMasks</span></span>(needle: <span class="hljs-type">Array</span>[<span class="hljs-type">Byte</span>]): <span class="hljs-type">Array</span>[<span class="hljs-type">Long</span>] = {<font></font>
    require(needle.length &lt;= <span class="hljs-number">64</span>, <span class="hljs-string">"Maximum supported search pattern length is 64."</span>)
    <span class="hljs-keyword">val</span> bitMasks = <span class="hljs-type">Array</span>.ofDim[<span class="hljs-type">Long</span>](<span class="hljs-number">256</span>)
    <span class="hljs-keyword">var</span> bit = <span class="hljs-number">1</span>L
    <span class="hljs-keyword">for</span> (c &lt;- needle) {<font></font>
      bitMasks(toUnsignedInt(c)) |= bit<font></font>
      bit &lt;&lt;= <span class="hljs-number">1</span><font></font>
    }<font></font>
    bitMasks<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s pr√©-calculamos </font></font><code>bitMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(64 bits </font></font><code>Long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) para cada valor de byte poss√≠vel (256 pe√ßas </font></font><code>bitMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Para algum valor de byte </font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ele </font></font><code>bitmask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cont√©m unidades em todos os locais em que </font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√° </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Por exemplo, aqui est√° uma pequena m√°scara para a string "abracadabra": </font><font style="vertical-align: inherit;">
Al√©m disso, voc√™ precisa pr√©-calcular </font><font style="vertical-align: inherit;">, o que ajudar√° a entender que encontramos uma correspond√™ncia exata. </font><font style="vertical-align: inherit;">Parece um valor </font><font style="vertical-align: inherit;">, com um pouco </font><font style="vertical-align: inherit;">de posi√ß√£o </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<a rel="noopener noreferrer" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/099/0d9/f95/0990d9f9590612cce258139fb7c287bd.png"></a><br>
<br><font style="vertical-align: inherit;"></font><code>successBitMask</code><font style="vertical-align: inherit;"></font><code>Long</code><font style="vertical-align: inherit;"></font><code>1</code><font style="vertical-align: inherit;"></font><code>needle.length ‚Äî 1</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="scala hljs">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">computeSuccessBitMask</span></span>(needle: <span class="hljs-type">Array</span>[<span class="hljs-type">Byte</span>]): <span class="hljs-type">Long</span> = {
    <span class="hljs-number">1</span>L &lt;&lt; (needle.length - <span class="hljs-number">1</span>)<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, finalmente, voc√™ precisa fazer, de fato, uma pesquisa. O √∫nico estado mut√°vel que queremos armazenar √© </font></font><code>currentMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code>Long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Para cada byte in </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mudamos </font></font><code>currentMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pouco para a </font><font style="vertical-align: inherit;">esquerda </font><font style="vertical-align: inherit;">, definimos seu bit menos significativo </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e fazemos um bit a bit </font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entre o resultado e </font></font><code>bitMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculado para o valor atual do byte processado </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(isso </font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">limpa todos os bits nos locais </font></font><code>currentMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que n√£o correspondem ao byte processado atual). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, ap√≥s o processamento de cada byte, apenas os bits que est√£o em posi√ß√µes adequadas sobreviver√£o. E com cada byte processado, todos os bits s√£o deslocados para a esquerda em uma posi√ß√£o. Se o bit "sobreviver" durante o n√∫mero de itera√ß√µes igual ao comprimento</font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- encontramos uma correspond√™ncia! E podemos verificar isso com </font></font><code>successBitMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="scala hljs">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process</span></span>(value: <span class="hljs-type">Byte</span>): <span class="hljs-type">Boolean</span> = {<font></font>
    currentMask = ((currentMask &lt;&lt; <span class="hljs-number">1</span>) | <span class="hljs-number">1</span>) &amp; bitMasks(toUnsignedInt(value))<font></font>
    (currentMask &amp; successBitMask) == <span class="hljs-number">0</span>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nota: o m√©todo descrito acima retorna </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se algo for encontrado e parece contra-intuitivo. </font><font style="vertical-align: inherit;">Isso pode ser entendido para que o valor </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signifique a necessidade de continuar a pesquisa, mas a </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interrompe - isso se deve ao fato de que, como escrevi acima, a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API foi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> compat√≠vel com o Netty. </font><font style="vertical-align: inherit;">Se voc√™ est√° se perguntando como executar uma pesquisa, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° um exemplo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, toda a l√≥gica se resume a apenas algumas instru√ß√µes simples do processador. </font><font style="vertical-align: inherit;">Infelizmente, permanece uma verifica√ß√£o completamente in√∫til dos limites dos √≠ndices da matriz </font></font><code>bitMasks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que nenhum JDK pode remover (e eu observei o assembler gerado por v√°rios JDKs diferentes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementa√ß√£o completa do Scala</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font color="#D93740"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aho korasik</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© outro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritmo popular</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conhecido desde 1975. Seu recurso distintivo (e √†s vezes bastante √∫til) √© a capacidade de pesquisar v√°rios de uma </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√≥ </font><font style="vertical-align: inherit;">vez </font><font style="vertical-align: inherit;">ao mesmo tempo, enquanto todos os personagens de </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√£o ignorados exatamente uma vez (acho √≥timo!). A id√©ia de que tudo isso funciona √© uma extens√£o do algoritmo KMP, uma m√°quina de estados finitos usando uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√°rvore de prefixos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (que √© constru√≠da com base em v√°rias </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), contendo links para links (compare com uma matriz unidimensional do KMP). Com base nesses links, o estado interno do aut√¥mato √© alternado entre os n√≥s da √°rvore de prefixos ap√≥s cada s√≠mbolo processado e alguns dos n√≥s indicam um resultado de pesquisa positivo para um determinado</font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">A fase de pr√©-computa√ß√£o aqui √© bastante complicada, mas a fase de pesquisa √© inesperadamente muito simples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um link para uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementa√ß√£o de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trabalho </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">no Scala</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta era uma lista completamente incompleta de algoritmos de pesquisa de substring. </font><font style="vertical-align: inherit;">Tamb√©m tentamos o </font><font style="vertical-align: inherit;">algoritmo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rabin-Karp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boyer-Moore</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Desses dois, Boyer-Moore mostrou desempenho compar√°vel, mas ambos n√£o s√£o compat√≠veis com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streaming</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (usando acesso aleat√≥rio </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por √≠ndice) e, portanto, eu os removi desta investiga√ß√£o.</font></font><br>
<br>
<hr><br>
<h2><font color="#D93740"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benchmarks</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iremos comparar os tr√™s algoritmos descritos acima e, al√©m disso, examinar os resultados dos m√©todos </font></font><code>String.indexOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Java) e </font></font><code>indexOfSlice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Scala). Para ser honesto, essa n√£o √© uma compara√ß√£o completamente correta, porque </font></font><code>String.indexOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funciona com cadeias de caracteres e todos os outros m√©todos est√£o em matrizes de bytes. Mas isso n√£o parece invalidar os resultados dessa compara√ß√£o. Al√©m disso, tamb√©m inclu√≠ os resultados </font></font><code>Bytes.indexOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do Guava (v.28.1). Este m√©todo funciona em matrizes de bytes. E eles escreveram no Google - tudo o que escrevem l√° funciona super r√°pido, certo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escrever benchmarks √© sempre dif√≠cil, porque voc√™ pode enviar dados completamente diferentes para a entrada, alter√°-los de v√°rias maneiras diferentes - n√£o apenas em tamanho </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas tamb√©m pelo conte√∫do interno dessas linhas (o que pode afetar bastante alguns algoritmos). Na pr√°tica, sempre vale a pena verificar os dados de entrada mais semelhantes aos dados de suas tarefas reais (foi o que fizemos em nosso projeto). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para encurtar este artigo, usei apenas 2 tipos de entrada. Um deles visa refletir o caso real: </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aproximadamente 1,5 KB de tamanho (com texto leg√≠vel por humanos dentro) </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 9 bytes, e n√£o </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nesta sequ√™ncia (isso √© necess√°rio para for√ßar o algoritmo a executar uma varredura completa). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro tipo de entrada √© necess√°rio para obter o pior comportamento de um algoritmo quadr√°tico. √â muito mais curto do que os dados desde o in√≠cio deste artigo: caso contr√°rio, ter√≠amos que esperar um minuto inteiro, lembra-se? Matriz</font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© definido no formato </font></font><code>"AA...AAB"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(o mesmo tamanho do primeiro tipo de dados) e </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 64 bytes (especialmente para o algoritmo de pesquisa de substring bin√°rio para lidar com ele) uma matriz do mesmo tipo (a correspond√™ncia ocorre apenas no final </font></font><code>haystack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um benchmark escrito na estrutura JMH </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pode ser encontrado aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se voc√™ tiver outras id√©ias sobre o que e como medir aqui - voc√™ pode clonar este reposit√≥rio, alterar alguma coisa e postar coment√°rios.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por sugest√£o de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vladimir Sitnikov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , adicionei resultados de benchmark para </font></font><code>java.util.regex.Pattern</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ele usa o algoritmo de Boyer-Moore sob o cap√¥.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Nota do tradutor: a prop√≥sito, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vladimir Sitnikov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© membro de v√°rios comit√™s de programa do JUG Ru Group e faz relat√≥rios interessantes. Por exemplo, um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√≠deo de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seu relat√≥rio do JPoint 2019 intitulado "Java retarda: edi√ß√£o do CodeCache" </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">est√° dispon√≠vel no link</font></a><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h2><font color="#D93740"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados de refer√™ncia</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados s√£o apresentados em milissegundos, menos √© melhor: </font><font style="vertical-align: inherit;">
aqui tudo √© como o esperado:</font></font><br>
<br>
<code># JMH version: 1.21<br>
# VM version: JDK 13.0.1, OpenJDK 64-Bit Server VM, 13.0.1+9<br>
Benchmark (searchInput) Mode Cnt Score Error Units<br>
javaIndexOf REGULAR avgt 5 0.622 ¬± 0.002 us/op<br>
shiftingBitMask REGULAR avgt 5 1.982 ¬± 0.017 us/op<br>
regexPattern REGULAR avgt 5 2.184 ¬± 0.006 us/op<br>
kmp REGULAR avgt 5 2.635 ¬± 0.016 us/op<br>
scalaIndexOfSlice REGULAR avgt 5 3.202 ¬± 0.009 us/op<br>
guavaIndexOf REGULAR avgt 5 3.696 ¬± 0.095 us/op<br>
ahoCorasic REGULAR avgt 5 7.063 ¬± 0.040 us/op<br>
shiftingBitMask WORST_CASE avgt 5 1.986 ¬± 0.010 us/op<br>
kmp WORST_CASE avgt 5 5.120 ¬± 0.006 us/op<br>
ahoCorasic WORST_CASE avgt 5 6.892 ¬± 0.025 us/op<br>
scalaIndexOfSlice WORST_CASE avgt 5 8.765 ¬± 0.007 us/op<br>
regexPattern WORST_CASE avgt 5 11.566 ¬± 0.086 us/op<br>
javaIndexOf WORST_CASE avgt 5 23.029 ¬± 0.124 us/op<br>
guavaIndexOf WORST_CASE avgt 5 52.927 ¬± 0.275 us/op<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para dados comuns, ele domina </font></font><code>javaIndexOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, porque usa intr√≠nsecas de alto desempenho dentro, por causa das quais a parte constante √© pequena;</font></font></li>
<li>     ,  :     ,     (<code>O(nm)</code>)   <code>javaIndexOf</code>,           ‚Äî      ,  <code>shiftingBitMask</code> (  )   .</li>
<li><code>guavaIndexOf</code>      ,    <code>javaIndexOf</code>;  ,        2  ,    <code>shiftingBitMask</code>;</li>
<li><code>scalaIndexOfSlice</code>  -  ,  <code>knuthMorrisPratt</code>,   ,      ‚Äî   ,  ;</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o desempenho n√£o √© o recurso mais forte </font></font><code>ahoCorasic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ou pelo menos de sua implementa√ß√£o; devo admitir que realmente n√£o tentei fazer microoptimiza√ß√µes nele, porque o adicionei apenas por causa de seu recurso distintivo: a capacidade de pesquisar v√°rias linhas ao mesmo tempo, e isso semelhante ao t√≥pico de um artigo separado);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dados de entrada (e comprimento </font></font><code>needle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) n√£o afetaram o desempenho </font></font><code>shiftingBitMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>ahoCorasic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br>
<h2><font color="#D93740"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em diferentes casos, os benchmarks podem funcionar de maneiras diferentes. </font><font style="vertical-align: inherit;">Apesar de os resultados acima parecerem muito indicativos, voc√™ sempre deve fazer medi√ß√µes e dados que refletem suas tarefas reais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base nos dados apresentados, tirei as seguintes conclus√µes:</font></font><br>
<br>
<ul>
<li>    <code>String</code>-   ,           ,   <code>String.indexOf</code> ( <code>java.util.regex.Pattern</code> ‚Äî      );</li>
<li>,   <code>needle</code>   64 ,    ;</li>
<li> ,   --;</li>
<li>   Scala        - (     ),   <code>indexOfSlice</code>    ‚Äî    ;</li>
<li>    ,  -.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© tudo! </font><font style="vertical-align: inherit;">Se voc√™ gosta de ler sobre algoritmos, desempenho e similares (e tamb√©m sobre Scala, JVM e Java em geral), assine o autor deste artigo, Linas Medziunas ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medium</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O reposit√≥rio do github com todo o c√≥digo deste artigo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√° aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<hr><br>
<img src="https://habrastorage.org/webt/_f/ku/xn/_fkuxncdimo0rsaeealkeqpe8f0.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tradu√ß√µes de artigos s√£o publicadas com o apoio do JUG Ru Group e da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPoint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conference </font><font style="vertical-align: inherit;">.</font></font><br>
<br clear="all"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt491740/index.html">Internet das coisas no Yandex.Cloud: como os servi√ßos de fun√ß√µes do Yandex IoT Core e Yandex Cloud s√£o organizados</a></li>
<li><a href="../pt491742/index.html">Sherbet: teclado ergon√¥mico para jogos</a></li>
<li><a href="../pt491744/index.html">Hackers iranianos exploraram vulnerabilidades na VPN</a></li>
<li><a href="../pt491746/index.html">A hist√≥ria da s√≠ntese da fala: a era das solu√ß√µes el√©tricas</a></li>
<li><a href="../pt491748/index.html">Tecnologias que ajudam os cegos a aprender ingl√™s</a></li>
<li><a href="../pt491780/index.html">Lan√ßamento do GitLab 12.8 com o navegador de logs, o NuGet e o painel de conformidade</a></li>
<li><a href="../pt491792/index.html">HiFiMan sem fio como um est√°gio na evolu√ß√£o dos fones de ouvido isodin√¢micos</a></li>
<li><a href="../pt491800/index.html">Por que todos deveriam pensar nisso: respostas √†s perguntas mais prementes sobre o coronav√≠rus Covid-19</a></li>
<li><a href="../pt491806/index.html">Vitamina B12: como descobrir seu n√≠vel e onde est√° o envelhecimento cerebral</a></li>
<li><a href="../pt491810/index.html">VoiceOver no iOS: Resolvendo problemas comuns</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>