<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏾 ⛈️ 👨🏾‍⚕️ Auto-conducción Monster Truck GAZ66 1/16 👨🏼‍🔬 🚗 〽️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habr, hola! 
 
 Quiero contarles cómo lo hice e hice una máquina autogestionable :) 
 
 Podría decir de inmediato cómo hacerlo mediante la conexión en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Auto-conducción Monster Truck GAZ66 1/16</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489046/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habr, hola! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quiero contarles cómo lo hice e hice una máquina autogestionable :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podría decir de inmediato cómo hacerlo mediante la conexión en seco de circuitos y comandos bash, pero será muy aburrido. </font><font style="vertical-align: inherit;">Te ofrezco una historia interesante (espero) sobre cómo fui personalmente por este camino y por dónde vine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esos lugares donde había algo para tomar fotos con fotos. </font><font style="vertical-align: inherit;">¿Qué pasa con el software? Lo más probable es que no tenga una foto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Realmente será una historia en formato narrativo, como te diría con una taza de café. </font><font style="vertical-align: inherit;">No se trata de comandos bash, scripts de python, y eso es todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos con fotos y videos de lo que sucedió, y luego toda la historia debajo del corte.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/ws/eb/utwsebnltcbcoi7_0gxxrenuusq.jpeg"><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://player.vimeo.com/video/392912248" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La historia seguirá este escenario.</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Por qué lo quería?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cómo funciona una máquina autónoma (vista superior)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 1 - Gelendwagen del mundo infantil + cámara Raspberry Pi Zero W +</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 2 - Cámara GAZ66 + NVIDIA Jetson Nano + para RaspberryPi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 3 - Remo Hobby SMAX</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 4 - Conexión SMAX y GAZ66</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 años: componentes de montaje en un camión monstruo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 6: instalación de Donkey Car y sus alrededores</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 7 - Montaje de vías, viajes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 años: viajar con el joystick</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9 años - Entrenamiento neuronal</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 10 - ¡Todo funciona, finalmente!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Que sigue?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desafío de batalla</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comunidad</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La imagen de la tarjeta SD de mi máquina de escribir</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Vierte café, nos vamos!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Por qué lo quería?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo comenzó con el hecho de que estaba frustrado por el hecho de que en una gran empresa de TI en Rusia hacen drones muy geniales, esto es increíblemente genial, pero estoy sin trabajo :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No, bueno, es realmente genial: autos sin conductor) Una excelente aleación de mecánica y algoritmos :) La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
frustración continuó hasta que combiné en mi cabeza diferentes hechos sobre mí, a saber:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puedo escribir en python</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entiendo (aproximadamente) cómo funciona el aprendizaje automático</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sé trabajar con Linux en la consola.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pasé mi infancia con un soldador</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tengo una caja completa con componentes de bricolaje (raspberry pi, arduino, sensores, etc.)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando todo funcionó en mi cabeza, decidí: ¡un auto sin conductor (sdc)! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para empezar, decidí que vale la pena descubrir cómo funciona sdc, y esta será la siguiente sección.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cómo funciona una máquina autónoma (vista superior)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que el automóvil funcione solo, necesita cuatro componentes: un carrito, sensores, una computadora, un algoritmo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos a resolverlo</font></font></h4><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trolley</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Lo que realmente conducirá. Ruedas, motores, la batería que lo alimenta todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay dos cohortes condicionales de autos que llamé para mí: autos del mundo de los niños y autos para un pasatiempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ni siquiera intente coquetear con los autos del mundo de los niños, lo intenté, esto es un fracaso. Su desventaja es que tienen motores débiles sin retroalimentación. Esto significa que es probable que pueda detener cualquier alfombra doméstica, y que no puede girar con la precisión dada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los autos del mundo de los pasatiempos son lo que necesitas. Tienen motores potentes, buenas baterías, servos de ruedas delanteras para giros. Considere esto como un umbral de entrada. Lo más barato y normal que pude encontrar fue Remo Hobby SMAX. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/oq/yw/ljoqywagmai0u43w37v3h5dkxye.jpeg"><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensores</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recopila información sobre el mundo que lo rodea y la transfiere a una computadora para la toma de decisiones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Básicamente, un conjunto caballeroso para SDC es:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cámara. </font><font style="vertical-align: inherit;">Conceptos básicos de SDC. </font><font style="vertical-align: inherit;">Mira un espacio frente a él, transfiere la imagen a una computadora que reconoce lo que está sucediendo y decide qué hacer. </font><font style="vertical-align: inherit;">Parece que no he visto implementaciones SDC sin una cámara.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor IMU </font><font style="vertical-align: inherit;">Una pieza que muestra la aceleración y el ángulo de inclinación a lo largo de los ejes. </font><font style="vertical-align: inherit;">Ayuda a entender a dónde vamos realmente y cómo ha cambiado nuestra ubicación en relación con el punto de partida. </font><font style="vertical-align: inherit;">Utilizado en casi todos los helicópteros.</font></font></li>
<li>.      ,     ,    ,      .   ,    SDC,   ,     .  ,     75$,      SDC  Velodyne    4K$.      ,     3D ,          2D.</li>
<li>GPS.     ,         ,     ,     SDC  .</li>
<li> .        —    ,    .   3D   .</li>
</ul><br>
<img src="https://habrastorage.org/webt/iy/93/sd/iy93sdbvfijudiwjfaepopyxkkc.jpeg"><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computadora</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Lo que recibe los valores de los sensores analiza la situación, transferimos los comandos de control al carrito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el mundo de las computadoras para dispositivos electrónicos integrados, los procesadores ARM de bajo consumo (como en su teléfono) y las computadoras de una sola placa basadas en ellos, gobiernan la pelota. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoy existen dos de las opciones de placa única más populares: RaspberryPi y NVIDIA Jetson. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RaspberryPi tiene un precio más bajo, una amplia variedad de proyectos, una gran comunidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NVIDIA tiene un precio más alto, menos proyectos, pero más productividad en las tareas de aprendizaje automático. Tiene 128 núcleos CUDA integrados (como en su gran tarjeta gráfica NVIDIA), que se utilizan para acelerar los algoritmos de aprendizaje automático.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay tres piezas de Raspberry Pi (ZeroW, 3, 4) y NVIDIA Jetson Nano en mi colección. Decidí armar la máquina, por supuesto, en Jetson. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/97/6b/7s/976b7sfk9dpw6c2ih161squyvac.jpeg"><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmo</font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
que decide sobre acciones basadas en lecturas de sensores. Por lo general, se utiliza una combinación de visión por computadora y redes neuronales para esto. En la versión más básica, manejas tu máquina de escribir a lo largo de algunas marcas, grabas videos de tales viajes con seguimiento de gas / freno / giro, y luego entrenas en esta red neuronal para que descubras la dependencia de las señales del motor en las imágenes de la cámara. En pocas palabras, esta es la tarea de reconocer el marcado y tratar de permanecer en él. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea actualizar cómo funciona la red neuronal, le sugiero que vea este video:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RJCIYBAAiEI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí describí la opción más simple, donde solo hay una cámara y un paseo de marcado. </font><font style="vertical-align: inherit;">Pero hay opciones con más sensores y una lógica de trabajo diferente: habrá una publicación separada sobre esto aquí. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el nivel es muy alto, entonces eso es todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo queda:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ensamblar carro</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colgar sensores</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conectar la computadora</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dibujar marcado</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">montar en él</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entrenar una red neuronal</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ir</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que hemos descubierto de qué se trata un auto sin conductor, pasemos a la era de implementación que tenía específicamente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 1 - Gelendwagen del mundo infantil + cámara Raspberry Pi Zero W +</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sí, mi primer enfoque fue solo eso. Sucedió porque había un mundo infantil cerca de mi casa en el que entré, en el que me gustaba Gelik, y lo compré. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, pensé, hay una hélice, ahora necesito una computadora y un sensor. Pensamiento hecho. Pedí un RPi Zero W y una cámara para ella. Mientras esperaba la computadora y la cámara, entré y compré un banco de energía para este negocio. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, todo está en su lugar, es hora de recolectar. Encontré </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un proyecto así</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , decidí seguirlo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gelik desmontó, sacó sus cerebros nativos, los transfirió al controlador del motor, él, a su vez, los transfirió a RPi, conectó una cámara, alimentó todo con un banco de energía y quedó satisfecho.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de proceder al autogobierno, decidí pasar por la consola por diversión, persiguiendo a un gato, transmitiendo la imagen de la cámara a mi computadora portátil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fue entonces cuando un par de fracasos me esperaban. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, el Raspberry Pi Zero W es muy débil en términos de rendimiento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segundo: la pasabilidad del gelik del mundo de los niños es casi inexistente, se detuvo por casi cualquier obstáculo mínimo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya se hizo evidente que el proyecto aún no había nacido, pero por interés, traté de ensamblar la visión por computadora (OpenCV) para Raspberry Pi Zero directamente en él. </font><font style="vertical-align: inherit;">Tomó, sin bromas, más de un día, y fue el último clavo en la tapa del ataúd de esta implementación de SDC. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quedó claro que necesita cambiar tanto la computadora para un mayor rendimiento, como el carrito, para una mayor capacidad en todo el país.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resultó bastante divertido:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/bt/dg/vlbtdgde7-nhfcsowsypz6nrcay.jpeg"><br>
<br>
<h3> 2 — 66 + NVIDIA Jetson Nano +   RaspberryPi</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, en este punto, quedó claro que necesita un automóvil más transitable, y preferiblemente un camión, para colocar todos los componentes en la carrocería. Después de estudiar un servicio para la selección de productos, quedó claro que el modelo de nuestro GAZ66 nativo me conviene, también es un shishiga entre la gente. Bien, lo ordené, espera, es hora de pensar en la computadora. En este momento, NVIDIA estaba preparando el inicio de las ventas de su Jetson Nano, y realicé un pedido el primer día de ventas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Llegó un camión, seguí esperando a Jetson, monté impacientemente un shishiga por la casa, rodé los gatitos a los que dio a luz el gato mencionado anteriormente. No quiere decir que a los gatitos les haya gustado, tuvieron que parar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras tanto, Jetson todavía conducía, y pedí un LIDAR de vacío a China; no sabía cómo usarlo específicamente, pero entendí que quería hacerlo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un día, un mensajero de negocios apareció en la entrada de la oficina, me entregó una caja bastante grande de NVIDIA de un solo pagador, firmé en la factura y me sentí como un entusiasta de los desarrolladores: wow, me llegó un dispositivo comprado al comienzo de las ventas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Es hora de coleccionar! Pero primero, necesitas besarte, jajaja. Desmontó el shishigu, arrojó sus cerebros nativos, lubricado los mecanismos, comenzó a ensamblar ya sobre la base de una computadora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conecté la cámara, el controlador del motor, el motor rotativo, el motor de gas / freno, comencé las secuencias de comandos de Python para la prueba, ¡de nuevo un fastidio! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vez, la historia es esta: un shishigi usa un motor convencional para girar, no un servoaccionamiento. Entonces, no tiene comentarios. Por lo tanto, no puedo controlarlos con seguridad, lo que significa que no es adecuado para SDC.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, de nuevo, necesitas resolver esto de alguna manera, hacer algo. </font><font style="vertical-align: inherit;">Pasamos a la próxima era.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ib/86/uv/ib86uv8xom4zf9yxa44-r6ikopi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/97/6b/7s/976b7sfk9dpw6c2ih161squyvac.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 3 - Remo Hobby SMAX</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que en este momento estaba claro que la máquina no solo necesitaba componentes transitables, sino también mínimamente buenos, la elección recayó en los talleres para aquellos que tienen RC, este es un pasatiempo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin más preámbulos, llegué a una de esas tiendas, y sin esconderme me dijo lo que estaba haciendo y qué tipo de máquina necesitaba. </font><font style="vertical-align: inherit;">El vendedor, sea amable, me dijo qué máquina se ajusta a mis requisitos mínimos, y era una Remo Hobby SMAX. </font><font style="vertical-align: inherit;">Yo lo compré. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Llegué a casa, obtuve un shishigu, le quité todo, me senté para conectarme a SMAX. </font><font style="vertical-align: inherit;">¿Y, qué piensas? </font><font style="vertical-align: inherit;">Así es, ¡fracaso otra vez!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Básicamente, los autos RC están diseñados para que el motor se conecte al controlador del motor y, a su vez, se conecte al módulo de radio que se comunica con el control remoto. Y fue SMAX el que se diseñó para que allí se combinaran el controlador del motor y el módulo de radio. Literalmente no tuve la oportunidad de conectarme al controlador del motor en lugar del módulo de radio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale, tienes que hacer algo otra vez. Regreso al sitio de los autos RC, me subo a los componentes. Hurgando por allí y aplaudiendo, encuentro un controlador de motor que tiene un cable separado para el módulo de radio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ordeno, traigo, recojo todo de nuevo, funciona, pero solo gira. Pero no hay gas y viceversa! Por qué, maldición, creo, pero sigo escogiendo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vez no funcionó que, para que el motor SMAX se active, la consola debe enviarle un cierto valor (360) a través del módulo de radio. Pero no lo sabía, e ingresé los valores directamente para el gas de freno. Y el motor no reaccionó, partiendo de la lógica de que nadie le pidió que despertara. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En algún momento, me senté para clasificar literalmente todo en una fila, esperando que reaccionara al menos ante algo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio pasé más de 100 años. Luego 50 por. Y cuando llegué a la búsqueda de 10, escuché un chillido de bienvenida en 360 - ¡salud! ¡Trabajos! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probé gas / marcha atrás / izquierda / derecha desde la consola, todo funciona. Esto es fuego, aquí soy un programador =)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que es hora de ensamblar, pero hay un problema: no hay absolutamente ningún lugar para colocar los componentes. </font><font style="vertical-align: inherit;">Los autos RC están diseñados para que su parte superior sea algo muy condicional. </font><font style="vertical-align: inherit;">En primer lugar, la parte superior está hecha de plástico muy delgado y, en segundo lugar, es un jeep, y no hay ningún lugar para ponerlo todo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este momento decidí buscar y cómo, de hecho, otros lo hacen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontré el proyecto de coche de burro, que tiene todo sobre una base llave en mano para ensamblar su SDC, tanto ejemplos de hardware como marco de software. </font><font style="vertical-align: inherit;">Parecería genial, tómalo y úsalo, pero hay matices:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imprimen la parte superior del automóvil en una impresora 3D, y luego le recuerda al automóvil muy distante. </font><font style="vertical-align: inherit;">feo, en resumen, no estéticamente agradable</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sus modelos 3D son compatibles con máquinas que no vendemos.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, recuerda Donkey Car, entonces tomaremos su marco de software, pero por ahora tenemos que pensar en el hardware. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un día, volviendo la cabeza en mi apartamento, miré el shishigu desmontado, en SMAX sin la parte superior, y pensé: hmmm, y parecen ser de la misma escala (1/16). </font><font style="vertical-align: inherit;">Tomó un shishiga, tomó un SMAX, simplemente lo puso uno por uno sobre el otro, ¡y realmente lo hace! </font><font style="vertical-align: inherit;">¡Y se ve genial! </font><font style="vertical-align: inherit;">OK, tengo que hacerlo! </font><font style="vertical-align: inherit;">Pasamos a la próxima era.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/oq/yw/ljoqywagmai0u43w37v3h5dkxye.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5u/_9/xz/5u_9xz8-xext5xxw1gl_u61f_au.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/zp/f1/8v/zpf18v4bqoormzdbaqlvh5wg0ks.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 4 - Conexión SMAX y GAZ66</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, al comienzo de esta era, tengo un objetivo interno: conectar la parte superior de una máquina a la parte inferior de otra. Como mis colegas y yo tomamos un chip en una impresora 3D, y soy su copropietario (un inversor serio), se decidió establecer una conexión en un programa CAD, imprimir y así conectarlos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con esta idea, caminé durante unos 2 meses, pensando que estaba a punto de sentarme a comprender los sistemas CAD. Jaja, no. Después de admitir que no quiero entender los sistemas CAD, comencé a pensar en otras opciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regresé al mundo de los niños, decidí ver a los diseñadores, de repente me ayudaron de alguna manera. Compré un clásico constructor de metal, que estaba conmigo cuando estaba en la escuela (ceniza de la vieja escuela reunida).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo arrastró a su casa, colocó dos partes de la máquina una al lado de la otra y comenzó a aplicarles todo tipo de elementos de diseño. </font><font style="vertical-align: inherit;">Cuánto tiempo, brevemente, comenzó a aparecer algún tipo de comprensión, cómo, al menos en teoría, esto podría hacerse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzó a hacer. </font><font style="vertical-align: inherit;">Pasé más de un día con una llave para bebés, nueces y pensamiento espacial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras me conectaba, aprendí a perforar plástico con un destornillador, arrancar con cuidado las partes sobrantes para no dañar la carcasa, bloquear las tuercas con otras tuercas (pero de todos modos sin arandelas). </font><font style="vertical-align: inherit;">En general, mi Trudovik estaría orgulloso de mí. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de unas tres modificaciones y tres días, vi este camión monstruo frente a mí: el GAZ66 SMAX Edition de Beslan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, parece que la base de hardware está lista, pase a la próxima era.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ae/1e/uy/ae1euyqkwmcpa8g1kkfetnfafg0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3v/ve/_u/3vve_ujwex5gar6kpbo5zynlddc.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 años: componentes de montaje en un camión monstruo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tengo un carrito con buenos componentes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tengo una parte superior estética y espaciosa.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gas / freno / giros funcionan normalmente en este carro</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arriba y abajo incluso están conectados entre sí =)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hora de montar componentes en esta belleza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Armado con un destornillador como taladro para plástico y cinta de doble cara como soporte universal para todo, me puse manos a la obra. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hice un soporte para la cámara en la cabina, que le permite ajustar el ángulo de la cámara. </font><font style="vertical-align: inherit;">Lanzó un largo tren desde la cámara a Jetson, que, a su vez, se instaló en la parte de atrás. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además de Jetson, las siguientes personas se instalaron en la parte de atrás:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">powerbank para alimentar la computadora (donó su principal, genial, con entrega de energía usb para que jetson no falle en el poder)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCA9685 (controlador PWM) para control de motor</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batería para alimentar el motor de la máquina</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como el proyecto ya se consideraba a largo plazo en ese momento, decidí no meterme con el lidar todavía y hacer MVP al menos en la cámara y el software de Donkey Car. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por diversión, conecté mis faros nativos de GAZ66 para hacerlo más hermoso y más seguro en la oscuridad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, mi máquina se enciende, los motores responden a los comandos de la pitón, la cámara da una imagen, las luces están encendidas, todo está bien, es hora de instalar el software.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/6l/hn/vi6lhndoodzafm9jsbdkp36thkc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qj/bo/wz/qjbowztgjt1jocusuhducwkpxme.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 6: instalación de Donkey Car y sus alrededores</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, en las últimas etapas encontré el proyecto Donkey Car, y me hizo la vida mucho más fácil, me salvó de escribir todo yo mismo. </font><font style="vertical-align: inherit;">En pocas palabras, DonkeyCar es un marco que ya tiene todo lo que necesita para SDC. </font><font style="vertical-align: inherit;">E incluso tienen guías sobre cómo instalar software. </font><font style="vertical-align: inherit;">Pero, como suele ser el caso con OpenSource, las guías están desactualizadas y se contradicen en unos instantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acuerdo, tengo que resolverlo. </font><font style="vertical-align: inherit;">Para el funcionamiento normal del marco, se necesitan las siguientes bibliotecas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tensorflow-gpu (gpu es para jetson, porque hay un núcleo de cuda. ​​para rpi hay tensorflow-lite)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensorrt (biblioteca para acelerar la inferencia de neuronas)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y todo lo que se establece automáticamente en función de la lista de entorno</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos con OpenCV. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La guía DonkeyCar dice que necesitas construirlo desde la fuente misma, porque para ARM no hay OpenCV en pip. Incluso hice esto, compilé OpenCV, pero antes de instalarlo decidí comprobarlo, de repente el sistema tiene una versión antigua de OpenCV y necesita ser demolido. Llamé a python, importé cv2, pedí una versión, pero es bam y relevante. Rápidamente busqué y descubrí que en las últimas versiones de linux4tegra (que está en jetson), los chicos de NVIDIA comenzaron a instalar OpenCV. Genial, tengo menos que hacer. Bien hecho, que podría compilarme :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, tensorflow-gpu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La guía DonkeyCar indica, en primer lugar, una rama de versión desactualizada (1.xx) y, en segundo lugar, ni siquiera la última versión de versiones desactualizadas. Decidí no escucharlos y puse la última versión actual (2.0). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente paso es tensorrt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La guía para instalar tensrort en jetson está escrita en una página wiki separada, y deja en claro que el autor no leyó la guía principal =) Porque la guía tensorrt reasigna variables de entorno y OpenCV deja de funcionar. Lo torcí de un lado a otro, volví todo hacia atrás y decidí criticar el entorno y las variables de entorno, lo rodé directamente al entorno principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satisfecho consigo mismo, abrió la python, a su vez llamada cv2, tensorflow, tensorrt, y luego le preguntó a la python su versión: todos fueron importados, todos mostraron las últimas versiones. ¡Frio! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de instalación del coche de burro en sí es bastante simple, no lo describiré, sugiero leer su guía. Lo único que notaré ahora es que en la configuración del coche de burro puede aumentar la resolución de la imagen de 86x86 para RPi a 224x224 para Jetson (porque habrá más rendimiento y la precisión será mayor).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, todo está listo, ¡es hora de correr y probar! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi máquina realmente se enciende, inicia el servidor web en esa IP, a la cual el enrutador emitió la máquina. </font><font style="vertical-align: inherit;">Y realmente puede ir allí, y desde el navegador maneje el joystick, mirando la imagen de la cámara. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También tuve que calibrar los valores suministrados al PWM (PCA9685) para encontrar un giro máximo hacia adelante, hacia atrás y hacia los lados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí, por cierto, descubrí que mi motor estaba conectado incorrectamente, la máquina retrocedió mucho más enérgicamente que hacia adelante, encontré experimentalmente los cables y los tiré al revés. </font><font style="vertical-align: inherit;">Estaba tan dispuesto allí que todos los cables del motor son del mismo color, y no puedes recordar cómo era. </font><font style="vertical-align: inherit;">Pero lo conecté correctamente y puse un termorretráctil en cada cable, para poder distinguirlos más tarde.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Genial, es hora de pasar a preparar la pista!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 7 - Montaje de vías, viajes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El algoritmo Donkey Car está tan diseñado que hay una neurona entrenada por un maestro. </font><font style="vertical-align: inherit;">Y esto significa que la imagen de la cámara está rastreando, y aparece un archivo json junto a cada imagen en la que se escribe el nombre de la imagen, la aceleración, la rotación y la marca de tiempo. </font><font style="vertical-align: inherit;">Y para entrenar una neurona, tales pares de imagen + json necesitan al menos 5K. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se decidió montar la pista en casa, dicen que el apartamento es grande, hay dónde dar la vuelta. </font><font style="vertical-align: inherit;">Pero al comenzar a recolectar, quedó claro que no había un paseo por el apartamento: el piso es de diferentes colores, el contraste será diferente y el modelo no se puede sacar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, decidí ponerlo en una habitación. </font><font style="vertical-align: inherit;">Compré 4 rollos de cinta adhesiva y los pegué a la pista en el piso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entré en el automóvil, lo encendí, me fui y volví a fallar: resulta que una habitación es demasiado pequeña y mi automóvil es cursi y no está incluido en las curvas. Más precisamente, está incluido, pero a una velocidad tal que será una lástima entonces =) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, tenemos que hacer la segunda iteración, y necesitamos una gran sala. La elección recayó en la oficina: hay muchos lugares, los pisos son monofónicos, abiertos las 24 horas, los 7 días de la semana. El único problema es que los limpiadores trabajan de noche y será necesario quitar la pista. Es decir, debe hacer todo de una vez: conducir con las manos para ser un maestro, entrenar a la modelo, arrojarla de nuevo a la máquina de escribir y pasar sin control manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, el día X, después del evento sobre los experimentos A / B, se decidió quedarse en la oficina y seguir la pista. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se elige el lugar, la cinta está lista, el equipo de constructores de la pista en el juego. Solo una hora, y en el pasillo de la oficina hay una gran pista.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puse el auto, lo encendí, traté de conducir - hurra, entra en giros, y tuve que limitar la velocidad al 80%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/px/be/7t/pxbe7tj2qrtw7o0yekqk4lneiue.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 años: viajar con el joystick</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tengo una pista, tengo un automóvil y necesito 5K pares de imagen + json. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Empíricamente, descubrí que una vuelta de mi pista son 250 pares de fotos + json, lo que significa que necesito dejar al menos 20 vueltas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Preferiblemente en una fila. Puede, por supuesto, de forma intermitente, pero luego el modelo arroja el gas arrojado, y puede comenzar a disminuir, pero no quiero esto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencé a intentar correr en 20 vueltas sin descanso, y esto, debo decir, no es una tarea fácil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera dificultad surgió porque había una columna considerable en el centro de la ruta, y cuando la máquina conducía después, la conexión con la computadora portátil desde la que se controlaba se retrasó, y este pequeño retraso me dejó fuera de los límites de la ruta.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, entonces debes asegurarte de que la conexión sea del dispositivo con el que yo mismo voy a la máquina de escribir cuando conduzco. Y esto significa que debe conducir desde el navegador del teléfono. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero todavía hay un joystick, y lo sostengo con ambas manos, ¿dónde más puedo obtener el teléfono? Llevar una máquina de escribir no es una opción, la ralentizará y luego, sin un teléfono, irá más rápido y puede confundirse en las esquinas debido a una aceleración excesiva. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hmm, entonces necesitas combinar de alguna manera el teléfono y el joystick. De acuerdo, tengo un lector, es lo suficientemente grande, cabe tanto en un teléfono como en un joystick, funcionará. Tomó la cinta y pegó el teléfono al lector con cinta adhesiva, y justo debajo del joystick. Miré este milagro y pensé: ¿qué eres en general? :-)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero funcionó :) Con esto logré dejar 20 vueltas. </font><font style="vertical-align: inherit;">Pero en realidad, incluso 25, porque probé alrededor de 15 círculos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dachshund, listo, tengo un conjunto de datos para entrenar una neurona, ¡es hora de entrenar!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9 años - Entrenamiento neuronal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este momento tengo un automóvil, una pista, un conjunto de datos, sí, ¡estoy a un paso del resultado! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En casa, la PC giraba al ralentí, con la NVIDIA RTX 2070, en la que planeaba estudiar. Afortunadamente, para un hogar inteligente, tengo una IP externa, y solo tuve que obtener el puerto 22 de Internet a una PC. Es bueno que haya asistentes que hicieron esto por mí mientras estaba en la oficina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, voy en ssh a la computadora con ubuntu, monitorizo ​​la carpeta de inicio para sshfs, subo archivos. Parece que solo 40 megabytes, pero duró unos 30 minutos. Sucedió, según tengo entendido, porque había muchos de ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Archivos en su computadora, tensorflow-gpu instalado, software DonkeyCar instalado, es hora de entrenar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Llamo a un script de DonkeyCar para entrenar una neurona, lo señalo a las carpetas con el conjunto de datos: se ejecutó.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras la neurona se está ejecutando, nvtop (monitor de carga de la tarjeta de video) muestra una utilización del 1406%, htop normal muestra una carga de la CPU del 100% para los 16 núcleos, está encendido). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de unos 20 minutos, tengo un modelo entrenado para conducir un automóvil. </font><font style="vertical-align: inherit;">Parecería, tómalo, úsalo. </font><font style="vertical-align: inherit;">Pero no :) ¿ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recuerdas que escribí anteriormente sobre Tensorrt, que optimiza la inferencia de neuronas y las ejecuta en núcleos de Cuda? </font><font style="vertical-align: inherit;">Por supuesto, quiero revisarlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y eso significa lo que necesito:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">congelar el modelo (necesita empacar todo para el modelo en un archivo)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">convertir el resultado del friso al formato tensorrt</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estoy tratando de congelar el modelo, llamo al script de DonkeyCar, fallo. Y mientras tanto, es de noche, pronto los limpiadores están desmantelando mi pista, necesito hacerlo rápidamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La hipótesis nació de que esto se debe a que tomé el flujo de tensor incorrecto que tenía DonkeyCar. Bien, estoy tirando de tensorflow 2.0, configuro 1.15, lo intento de nuevo: ¡éxito, saludos! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora la conversión, y nuevamente el desglose: no se encontró el equipo. Bien, voy a buscar qué pasa. Resultó que NVIDIA marcó esta característica como obsoleta y le quitó el soporte. Ahora, dicen, necesitas convertir a mano. Afortunadamente, encontré el repositorio de git, donde había una solicitud similar, y el usuario encontró el lugar donde realmente se encuentra el script de python, que convierte los modelos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Llamo el guión desde ese lugar, y la verdad responde. Pero, dice, no hay terceros pitones para ti, vamos segundo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, estoy llamando a la segunda pitón. Él me dice: no tengo flujo de tensor. Bueno, le pido que ponga tensorflow-gpu 1.15, y me dice que no existe tal versión, solo hay 1.14. De acuerdo, estoy de acuerdo, arriesgémonos y coloquemos las diferentes versiones en diferentes entornos de Python. Ponga tensorflow en la segunda python, solicitó la conversión: ¡salud, funcionó! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acuerdo, tengo modelos para tensorrt y para tensorflow-gpu ordinario, lo dejo caer en la máquina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arranco la máquina con el modelo para tensorrt, un gran error de trackback, pulsaciones de tiempo - ok, probaré el modelo habitual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comienzo el error habitual nuevamente, pero esta vez es bastante claro: el tamaño de su imagen es 224X224, mientras que se espera 86X86. ¿Recuerdas que en algún lugar mucho más alto escribí que las reglas de configuración cambiaron la resolución de la imagen de la cámara?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, en la máquina de escribir lo corregí, pero no en la computadora host. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regreso a la computadora host, corrijo las configuraciones allí, vuelvo a entrenar, vuelvo a hacer el friso, vuelvo a convertir, vuelvo a tirar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/wn/uw/gawnuwyx7iobukme4h_zrqkgcvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comienzo la máquina con un modelo para tensorrt, y ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edad 10 - ¡Todo funciona, finalmente!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Hurra! </font><font style="vertical-align: inherit;">¡Mi auto se fue! </font><font style="vertical-align: inherit;">Sí, sin mí. </font><font style="vertical-align: inherit;">Muy genial. </font><font style="vertical-align: inherit;">Estoy increíblemente feliz)</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://player.vimeo.com/video/392912248" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante casi un año hice todo esto, y ahora)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Que sigue?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay varios planes para un mayor desarrollo; pasaré de lo simple a lo complejo.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregue un sensor IMU al modelo para posiblemente aumentar la precisión. </font><font style="vertical-align: inherit;">Por ejemplo, al conducir cuesta arriba, se necesita más esfuerzo en el motor.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convierta la lógica en viajes que no estén en la carretera, sino que simplemente evite obstáculos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregue lidar y tome lecturas de él</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desafío de batalla</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si usted, o con una compañía de amigos, siente que quiere competir, escríbame, organicemos las competencias =)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comunidad</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También armé una sala de chat de interés y estoy preparando un canal. </font><font style="vertical-align: inherit;">No estoy seguro de que, de acuerdo con las reglas de Habr, sea posible, así que lo enviaré al PM a solicitud.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La imagen de la tarjeta SD de mi máquina de escribir</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si lo solicita, también le enviaré una imagen img de mi automóvil, si desea hacerlo de manera similar, y no quiere bañarse con la configuración.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es489034/index.html">¿La nueva aplicación móvil UIS o salvación para aquellos que buscan contratación pública?</a></li>
<li><a href="../es489038/index.html">El libro "Concurrencia de Java en la práctica"</a></li>
<li><a href="../es489040/index.html">Contact Center AI: un tercero en conversación está bien</a></li>
<li><a href="../es489042/index.html">Gran reapertura de la tienda: cargando datos en Android usando corutina</a></li>
<li><a href="../es489044/index.html">Física del texto. Parte 1. Símbolos</a></li>
<li><a href="../es489048/index.html">El registro y el seguimiento de consultas son las mejores prácticas. Informe Yandex</a></li>
<li><a href="../es489050/index.html">Windows vs Sysmon</a></li>
<li><a href="../es489058/index.html">Conjuntos de redes neuronales con PyTorch y Sklearn</a></li>
<li><a href="../es489060/index.html">Análisis: ¿cuál es la diferencia entre las inversiones de alto riesgo y las de bajo riesgo?</a></li>
<li><a href="../es489062/index.html">Increíble rendimiento paralelo de Apache Parquet I / O en Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>