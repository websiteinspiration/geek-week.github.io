<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äç‚öñÔ∏è ü§∂üèæ üåø Methoden zum Umgang mit Legacy-Code am Beispiel von GitLab üò∞ üßõüèª üï≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sie k√∂nnen endlos betr√ºgen, ob GitLab ein gutes Produkt ist. Es ist besser, sich die Zahlen anzusehen: Laut den Ergebnissen der Investitionsrunde betr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Methoden zum Umgang mit Legacy-Code am Beispiel von GitLab</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/493000/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen endlos betr√ºgen, ob GitLab ein gutes Produkt ist. Es ist besser, sich die Zahlen anzusehen: Laut den Ergebnissen der Investitionsrunde betrug die GitLab-Bewertung 2,7 Milliarden US-Dollar, w√§hrend die vorherige Bewertung 1,1 Milliarden US-Dollar betrug. Dies bedeutet ein schnelles Wachstum und das Unternehmen wird immer mehr Front-End-Entwickler einstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist die Geschichte des Auftretens des Frontends in GitLab. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/uq/uh/cyuquhlxnzithh35ujtiswr5upy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist eine grafische Darstellung der Anzahl der Front-End-Anbieter in GitLab, beginnend im Jahr 2016, als sie √ºberhaupt nicht da waren, und endend im Jahr 2019, als es bereits einige Dutzend von ihnen gab. Aber GitLab selbst gibt es schon seit 7 Jahren. Bis 2017 wurde der Hauptcode im Frontend von Backend-Entwicklern geschrieben, schlimmer noch von den Backend-Entwicklern auf Ruby on Rails (auf keinen Fall m√∂chten wir jemanden beleidigen und unten erkl√§ren, wovon wir sprechen).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seit 7 Jahren ist jedes Projekt, ob Sie es m√∂gen oder nicht, veraltet. </font><font style="vertical-align: inherit;">Irgendwann kann das Refactoring nicht mehr verschoben werden. </font><font style="vertical-align: inherit;">Und die Reise beginnt voller Abenteuer, deren Endpunkt niemals erreicht wird. </font><font style="vertical-align: inherit;">Wie das in GitLab passiert, sagte Ilya Klimov.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3tdfBMRq34o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úber den Sprecher: Ilya Klimov (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xanf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Senior Frontend Engineer bei GitLab. </font><font style="vertical-align: inherit;">Zuvor war er in Startups und Outsourcing t√§tig und leitete ein kleines Outsourcing-Unternehmen. </font><font style="vertical-align: inherit;">Dann wurde mir klar, dass ich noch keine Zeit hatte, das Produkt auszuarbeiten, und ich kam zu GitLab. </font></font></em><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Artikel basiert auf einem Bericht von Ilya bei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FrontendConf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , daher strukturiert er die Informationen nicht so sehr, als dass er die Erfahrung des Sprechers widerspiegelt. </font><font style="vertical-align: inherit;">Es mag √ºberm√§√üig gespr√§chig erscheinen, ist aber unter dem Gesichtspunkt der Arbeit mit dem Erbe nicht weniger interessant. </font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In GitLab migrieren sie wie in vielen anderen Projekten allm√§hlich von alten Technologien zu etwas Relevanterem:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoffeeScript in JavaScript. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwickler von Ruby on Rails, als sie das Projekt starteten, konnten nicht anders, als auf CoffeeScript zu achten, das Ruby sehr √§hnlich sieht.</font></font></li>
<li><strong>JQuery  Vue. </strong>  ,        JQuery.   GitLab  SPA.  server-side rendering  progressive enhancement,        Vue-.  ,    :     Vue-,    .</li>
<li><strong>Karma  Jest. </strong>Jest  -     . Karma     , , .</li>
<li><strong>REST  GraphQL</strong> ,   , <strong>Vuex  Apollo</strong>.      Vuex,    Redux   Vue,  Apollo local state  ,     .    GraphQL    ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig erfolgt der Austausch in mehrere Richtungen gleichzeitig, im Projekt gibt es gleichzeitig einen Legacy-Code in verschiedenen Phasen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich nun vor, Sie kommen zu einem Projekt, das sich mitten in all diesen Migrationen befindet. Der Standard und Bezugspunkt f√ºr mich war die Situation, in der Sie die Bearbeitung eines Projekts √∂ffnen, auf die Schaltfl√§che Speichern klicken - und was kommt Ihrer Meinung nach? Wenn Sie dachten, dass wir so alte Phagen sind, dass HTML kommt, dann nein. JavaScript kommt ins Spiel, dass Sie sich "weiterentwickeln" m√ºssen, um ein Popup-Fenster anzuzeigen. Dies ist der tiefste Punkt in meinem Legacy-Bild. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weiter oben: selbstgeschriebene Klassen in jQuery, Vue-Komponenten und als h√∂chster Punkt neue moderne Funktionen, die mit Vuex, Apollo, Jest usw. geschrieben wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht mein Beitragsdiagramm auf GitLab aus.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ew/ml/io/ewmliousc_qzjvrr0pfshtqlrj0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darin - und das ist sehr wichtig f√ºr das Verst√§ndnis der Essenz der Geschichte und all meiner Schmerzen - k√∂nnen mehrere Segmente unterschieden werden:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onboarding</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im April-Bereich. </font><font style="vertical-align: inherit;">"Flitterwochen", als ich gerade bei GitLab angefangen habe. </font><font style="vertical-align: inherit;">Zu diesem Zeitpunkt erhalten Anf√§nger einfachere Aufgaben.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Von Ende April bis Mitte Mai gibt es nur wenige Verpflichtungen - eine Zeit der </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ablehnung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ‚ÄûNein, es kann nicht sein, dass alles so gemacht wird!‚Äú </font><font style="vertical-align: inherit;">Ich habe versucht zu verstehen, wo ich etwas nicht verstehe, daher gibt es so wenige Commits.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zweite Maih√§lfte ist </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wut</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : "Ich k√ºmmere mich nicht um alles - ich muss die Produktion verschieben, Features teilen, versuchen, etwas dagegen zu tun."</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anfang Juni (Zero Commits) ist eine </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depression</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies war kein Urlaub, ich sah und verstand, dass meine H√§nde fielen, ich wei√ü nicht, was ich damit machen soll.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Danach </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stimmte ich mir selbst zu</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und entschied, dass ich als Profi eingestellt wurde, und ich kann GitLab besser machen. </font><font style="vertical-align: inherit;">Im Juni und Juli habe ich eine Vielzahl von Verbesserungen angeboten. </font><font style="vertical-align: inherit;">Nicht alle von ihnen haben aus Gr√ºnden Resonanz gefunden, √ºber die wir sprechen werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt bin ich in der Phase der </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adoption</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und verstehe klar: wie, wo, warum und was ich mit all dem anfangen soll.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde Ihnen genauer erz√§hlen, was ich von August bis Oktober getan habe. </font><font style="vertical-align: inherit;">Ehrlich gesagt, in einem kleinen Outsourcing-Unternehmen oder in einem Startup w√§re ich in diesen drei Monaten f√ºnf Mal mit einer solchen Produktivit√§t entlassen worden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also habe ich in drei Monaten:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segmentierte Steuerung - drei Tasten.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Suchzeichenfolge, in der der lokale Verlauf gespeichert ist, ist eine etwas komplexere Komponente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spinner. </font><font style="vertical-align: inherit;">Und diese Komponente ist noch nicht eingefroren.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/p6/fw/uw/p6fwuwfxi5dxzpyuewu9vn7_zc4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes werden wir Schritt f√ºr Schritt analysieren, warum dies passiert ist und wie man damit lebt. Wenn es Ihnen so vorkommt, als w√ºrde ich √ºbertreiben, finden Sie hier einen Screenshot einiger Aufgaben, die bei GitLab an mir h√§ngen (Sie k√∂nnen direkt auf GitLab schauen, es ist ge√∂ffnet). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/em/ax/o9/emaxo9j3iwkxpdefee2ghsokjpi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siehe: verpasste 12.1, verpasste 12.2, verpasste 12.3. Der Sprint dauert einen Monat und die segmentierte Kontrolle - 3 Sprints. Spinner ist immer noch weg, er wird unsere Hauptfigur sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem des Refactorings und die Philosophie des Refactorings besch√§ftigen sich seit Jahrtausenden mit der Menschheit. Jetzt werde ich beweisen:</font></font><br>
<blockquote><em>¬´        ;      ,   ,   ;        ;    ,  .<br>
<br>
 ,   ,    ,  :  ¬ª.<br>
<br>
 </em></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Bibel sagt uns, wie man alte und neue Funktionen kombiniert. </font><font style="vertical-align: inherit;">Der zweite Teil des Zitats ist aus Sicht des Managements wertvoll: Unabh√§ngig davon, wie Sie Initiativen ergreifen, werden Sie auf gro√üen Widerstand sto√üen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Depressionsphase habe ich viele Berichte √ºber die Umgestaltung gro√üer Projekte gesehen, aber ungef√§hr 70% von ihnen erinnerten mich an einen Witz. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javist talk: </font></font></em><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wie beschleunigen wir unsere Java-Anwendung? </font></font></em><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Oh, also hatte ich einen Bericht dar√ºber! </font><font style="vertical-align: inherit;">Willst du erz√§hlen </font></font></em><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Um zu sagen und ich kann, w√ºrde ich beschleunigen! </font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich dennoch f√ºr den gef√§hrlichen und wackeligen Weg des Refactorings entscheiden, habe ich einige einfache Rezepte, die ich f√ºr mich selbst entwickelt habe und die unter realit√§tsnahen Bedingungen funktionieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Isolierung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Dinge zu beschleunigen, zu verbessern, umzugestalten, m√ºssen Sie den Elefanten in Steaks schneiden, dh die Aufgabe in Teile teilen. GitLab ist sehr gro√ü, wir haben einen Slack-Kanal "Ist das bekannt", in dem Leute Fragen stellen wie "Ist das ein Fehler oder eine Funktion, wer kann das erkl√§ren?" - und die Antwort wird nicht immer gefunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein einfaches Beispiel: Screenshots derselben Stelle in GitLab, aufgenommen mit einem Unterschied von einem Tag. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_i/e7/t3/_ie7t3qfxsof8p9kwrdzy2wsymi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich war sehr ver√§rgert, weil ich an dieser Schaltfl√§che gearbeitet habe, und das ist alles auf die eine oder andere Weise Probleme mit der Schaltfl√§che. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist passiert? Es ist ganz einfach: Wir entwickeln ein Design-System und haben als Teil eines separaten Storybook-Tools zum Testen eines Design-Systems das globale CSS-GitLab deaktiviert, um zu √ºberpr√ºfen, wie CSS-Komponenten vom globalen CSS isoliert sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammenfassend: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS wird nicht mehr gespeichert</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zumindest in GitLab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich arbeite seit 14 Jahren mit JavaScript und habe noch nie ein Projekt gesehen, bei dem mindestens ein oder zwei Jahre lang vollst√§ndig verwaltetes CSS erhalten bleibt. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML kann</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √ºbrigens </font><strong><font style="vertical-align: inherit;">auch</font></strong><font style="vertical-align: inherit;"> nicht gespeichert </font><strong><font style="vertical-align: inherit;">werden</font></strong><font style="vertical-align: inherit;"> (sicher in GitLab). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GitLab wurde f√ºr eine lange Zeit und Backendov entwickelt. Sie trafen eine kontroverse Entscheidung f√ºr Bootstrap, da Bootstrap ein Backend-freundliches Layoutsystem bot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber was ist Bootstrap in Bezug auf die Philosophie der Komponentenisolation? Dies sind ungef√§hr 600-700 globale Klassen (tats√§chlich ist jede CSS-Klasse global), die die gesamte Anwendung durchdringen. In Bezug auf die Verwaltbarkeit wird nichts Gutes daraus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die n√§chste Aktion (nennen wir es nicht einen Fehler) - GitLab hat Vue.js √ºbernommen. Die Wahl war vern√ºnftig, aufgrund der drei Frameworks ist es Vue, mit dem Sie etwas am reibungslosesten umschreiben k√∂nnen. Sie m√ºssen eine gro√üe Einzelseitenanwendung nicht sofort wegwerfen und ausschneiden, sondern k√∂nnen einzelne kleine Knoten neu schreiben. Jetzt kann es auf Angular ausgef√ºhrt werden, aber vor 3-4 Jahren, als Angular 2 erschien, konnte es in mehr als einer Instanz nicht auf einer Seite koexistieren. Jetzt ist auch eine Reaktion m√∂glich, aber all diese Magie mit dem Fehlen eines Build-Schritts und so weiter brachte die Waage in Richtung Vue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen wurde ein √úbel mit dem zweiten kombiniert. Dies ist schlecht, da Bootstrap-Stile nichts √ºber das Komponentensystem wissen und Vue-Komponenten ohnehin zuerst geschrieben wurden. Daher wurde eine willensstarke Entscheidung getroffen, ein eigenes Designsystem zu schaffen. Wir haben es genannt</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pyjamas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber niemand konnte mir erkl√§ren warum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich sehe, dass es jetzt immer mehr eigene Designsysteme gibt, und das ist sch√∂n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Design-System ist isoliert, aber da GitLab bereits in Bootstrap geschrieben wurde, sind ungef√§hr 50-60% unseres Design-Systems ein Wrapper √ºber Bootstrap / Vue-Komponenten mit einer Verringerung ihrer Funktionalit√§t. Dies ist erforderlich, damit Sie im Konstruktionssystem die Komponente nicht falsch verwenden k√∂nnen. Wenn wir √ºber eine abstrakte Bibliothek sprechen, ist Flexibilit√§t dort wichtig, zum Beispiel die M√∂glichkeit, jede gew√ºnschte Schaltfl√§che zu erstellen. Wenn in GitLab Spinner vier Gr√∂√üen haben k√∂nnen, die von Designern genehmigt wurden, m√ºssen Sie dies physisch nicht zulassen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eines Tages wird das Gute gewinnen, und wir werden ein wichtiges Tool haben, mit dem Sie nat√ºrlich Front-End-Projekte effektiv umgestalten k√∂nnen, wenn Sie bei der Unterst√ºtzung von IE und Edge punkten - dies ist das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shadow DOM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Shadow DOM l√∂st das Problem, dass globale Stile in Komponenten flie√üen. Bitte nehmen Sie kein Polymer, das selbst Google bereits begraben hat. Verwenden Sie lit-element und lit-HTML, und Sie k√∂nnen isolierte Stile mit Ihrem bevorzugten Framework erstellen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen sagen, dass React CSS-Module hat, Vue Stile mit G√ºltigkeitsbereich, die dasselbe tun. Seien Sie sehr vorsichtig mit ihnen: CSS-Module bieten keine 100% ige Isolation, da sie nur mit Klassen arbeiten. Und mit Stilen mit G√ºltigkeitsbereich in Vue kann ein sehr interessantes Szenario realisiert werden, wenn die Stile der obersten Komponente in das Stammelement des √ºbergeordneten Elements fallen und dort Datenattribute verwendet werden, die langsamer werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotz der Tatsache, dass ich Angular drei Jahre lang beschimpft habe, muss ich jetzt zugeben, dass es im Moment am besten darin implementiert ist. In Angular reicht es aus, einfach den Isolationsmodus zu wechseln und bei Bedarf das Shadow-DOM zu verwenden, ansonsten eine normale Emulation, um eine gute Stilisolation zu gew√§hrleisten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur√ºck zum Spinner. </font><font style="vertical-align: inherit;">Von den drei Monaten, die ich mit ihm gek√§mpft habe, war ich einige Zeit in einem aufregenden Gesch√§ft t√§tig: der Reinigung. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/zv/u0/s8zvu0h5yauznhgfqthij_96rkc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Klasse </font></font><code>loading-container</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist ein Implementierungsdetail eines Spinners, dh es ist eine Klasse innerhalb einer Spinner-Implementierung. </font><font style="vertical-align: inherit;">Wir haben beschlossen, im Pyjama ein separates CSS basierend auf Atomic CSS zu erstellen, da CSS nicht gespeichert werden soll. </font><font style="vertical-align: inherit;">Ich pers√∂nlich mag das Atomic CSS-Konzept nicht wirklich, aber wir haben das, was wir haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, ich war damit besch√§ftigt, Stile im Code des Hauptprodukts zu bereinigen, die an Elementen h√§ngen, die Implementierungsdetails sind. </font><font style="vertical-align: inherit;">Es sieht alles sehr einfach aus - denn nat√ºrlich gibt es Tests in GitLab.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Tests</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests in GitLab decken den gesamten Code ab</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und bieten Zuverl√§ssigkeit. </font><font style="vertical-align: inherit;">Damit ist die Pipeline in 98 Minuten fertig. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/uz/bb/fluzbboaa7on25ueq9z6pkvcdb4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
40% der Zeit von √∂ffentlichen L√§ufern auf GitLab.com GitLab sammelt GitLab selbst, da die Pipeline zu jeder Zusammenf√ºhrungsanforderung geht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich war sehr inspiriert: Ich habe endlich ein Projekt bekommen, bei dem alles in Tests behandelt wird! </font><font style="vertical-align: inherit;">Die Abdeckung des Backend-Codes liegt nahe bei 100%, und der Front-End-Code zum Zeitpunkt meiner Ankunft war zu </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">89,3%</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abgedeckt </font><strong><font style="vertical-align: inherit;">. </font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider stellte sich heraus, dass der gr√∂√üte Teil dieser Berichterstattung M√ºll ist, weil:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bricht zusammen, wenn √Ñnderungen vorgenommen werden, die sich nicht auf die Komponenten beziehen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bricht nicht, wenn √Ñnderungen vorgenommen werden.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde mit Beispielen erkl√§ren. </font><font style="vertical-align: inherit;">Wir haben Jest genommen, weil wir dachten, dass er uns in bestimmten Situationen erlauben w√ºrde, keine Behauptungen zu schreiben, sondern Schnappsch√ºsse zu verwenden. </font><font style="vertical-align: inherit;">Das Problem ist, dass Vue Test Utils Requisiten einfach in HTML ausgibt, wenn Sie Jest nicht konfiguriert und den richtigen Serializer hinzugef√ºgt haben. </font><font style="vertical-align: inherit;">Dann stellt sich beispielsweise heraus, dass Requisiten mit dem Namensbenutzer Requisiten in den Parametern mit den Namensdaten hatten, an die das Objektobjekt √ºbergeben wurde. </font><font style="vertical-align: inherit;">√Ñnderungen im Format der √ºbertragenen Daten f√ºhren nicht zu einem Fehler des Snapshots. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ruby-Entwickler sind es gewohnt, Tests durchzuf√ºhren, die grob gesagt alle Methoden abdecken.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir Tests f√ºr Vue- oder React-Komponenten durchf√ºhren, m√ºssen wir testen, wie sich die √∂ffentliche API verh√§lt.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher hatten wir umfangreiche Tests mit berechneten Eigenschaften, die in einigen Szenarien nicht verwendet wurden, in anderen war es jedoch physikalisch unm√∂glich, den Status zu erreichen, in dem diese berechneten Eigenschaften aufgerufen wurden. </font><font style="vertical-align: inherit;">Besonderer Dank geht an Vue, in dem die Vorlagen Zeichenfolgen sind, sodass Sie die Testabdeckung der Vorlage nicht berechnen k√∂nnen. </font><font style="vertical-align: inherit;">In Vue 3 werden Quellkarten angezeigt und die M√∂glichkeit, sie zu beheben, wird jedoch nicht in K√ºrze verf√ºgbar sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gl√ºcklicherweise gibt es eine einfache F√§higkeit, mit der Sie das Erbe effektiv umgestalten k√∂nnen. </font><font style="vertical-align: inherit;">Dies ist die F√§higkeit, den sogenannten Pinning-Test in der gro√üen Testwelt zu schreiben.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pinning-Test</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist ein Test, der versucht, das Verhalten zu erfassen, das Sie umgestalten. Bitte beachten Sie, dass der Pinning-Test h√∂chstwahrscheinlich nicht in das Repository √ºbernommen wird. Das hei√üt, Sie schreiben durch alle Arten von Verfeinerungen, beispielsweise mithilfe der Staging-Umgebung, selbst einen Test, der beschreibt, wie Ihre Komponente gerendert wird. Nach dem Refactoring sollte der Pinning-Test entweder denselben HTML-Code generieren, und dies ist h√∂chstwahrscheinlich ein gutes Zeichen, oder Sie sollten verstehen, welche √Ñnderungen aufgetreten sind.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde ein Beispiel aus dem Leben geben. Vor einigen Monaten habe ich eine √úberpr√ºfung der Zusammenf√ºhrungsanforderung durchgef√ºhrt und eine Dropdown-Liste √ºberarbeitet. Der alte Kontext ist folgender: Um die Zweige eines Freundes durch einen Bindestrich in der Dropdown-Liste voneinander zu trennen, wurde fr√ºher einfach die Textzeichenfolge ‚ÄûTeiler‚Äú √ºbergeben. Wenn Ihr Zweig also Teiler genannt wurde, haben Sie kein Gl√ºck. W√§hrend des Refactorings tauschte eine Person zwei Klassen in einem HTML-Knoten aus. Dieser ging in die Produktion und ruinierte ihn. Fairerweise nat√ºrlich nicht ganz die Produktion, sondern die Inszenierung, aber trotzdem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als wir mit dem Schreiben solcher Tests begannen, stellten wir fest, dass die Tests trotz des coolen Indikators f√ºr die Testabdeckung falsch geschrieben wurden. Denn erstens hatten wir Tests f√ºr Karma, das hei√üt f√ºr alte. Zweitens haben fast alle Tests Annahmen √ºber die Interna der Komponente getroffen. Das hei√üt, sie gaben vor, Komponententests zu sein, und arbeiteten im Wesentlichen wie Ende-zu-Ende. Dabei wurde √ºberpr√ºft, ob ein bestimmtes Tag mit einer bestimmten Klasse gerendert wurde, anstatt zu √ºberpr√ºfen, ob eine bestimmte Komponente mit bestimmten Requisiten gerendert wurde. Verstehen Sie den Unterschied: Klassen sind Komponenten? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis meiner 18 Zusammenf√ºhrungsanfragen mit Refactoring-Tests f√ºr insgesamt 8-9.000 Zeilen stellte sich heraus, dass das gesamte √Ñnderungsprotokoll ungef√§hr 20.000 betrug, da 11.000 gek√ºrzt wurden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ay/q_/qs/ayq_qsjbluc3lyjaiwft9oxkefo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig habe ich alle diese Tests formell √ºberarbeitet, um eines zu behaupten: um Aussagen √ºber Spinnerklassen zu entfernen und stattdessen zu √ºberpr√ºfen, ob der Spinner mit den richtigen Requisiten dort gerendert ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf den ersten Blick ist dies ein undankbarer Job. </font><font style="vertical-align: inherit;">Das Umschreiben von Tests f√ºr die richtige Architektur war jedoch recht einfach an das Unternehmen zu verkaufen. </font><font style="vertical-align: inherit;">GitLab ist ein kommerziell profitables Produkt. </font><font style="vertical-align: inherit;">Wenn Sie dem Produktmanager mitteilen, dass Sie drei Iterationen ben√∂tigen, um 20 Tests neu zu schreiben, raten Sie nat√ºrlich, wohin Sie gesendet werden. </font><font style="vertical-align: inherit;">Eine andere Sache: ‚ÄûIch ben√∂tige drei Iterationen, um den Test neu zu schreiben. </font><font style="vertical-align: inherit;">Auf diese Weise k√∂nnen wir Spinner effizienter einf√ºhren und die zuk√ºnftige Implementierung neuer Elemente des Designsystems beschleunigen. ‚Äú </font><font style="vertical-align: inherit;">Und hier kommen wir zum Wichtigen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Widerstand</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt eine weitere Funktion, auf die mehr meiner Spinner im GitLab-Designsystem warten - dies sind normale SVG-Symbole.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yu/to/cc/yutoccm3twkiswgiyqe2flvse_w.png" width="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben vom Designer gezeichnete Symbole, die im Hauptprojekt verwendet werden, aber sie befinden sich nicht im Designsystem, da GitLab eine schwierige Kindheit hat. </font><font style="vertical-align: inherit;">Zum Beispiel wird CSS 2019 nicht √ºber Webpack, sondern √ºber Sprockets gesammelt - dies ist Pipeline Ruby, da wir dasselbe CSS im Backend und Frontend wiederverwenden m√ºssen. </font><font style="vertical-align: inherit;">Aus diesem Grund m√ºssen Symbole auf unterschiedliche Weise mit verschiedenen Projekten verbunden werden. </font><font style="vertical-align: inherit;">Daher hat jemand die Hauptcodebasis drei Monate lang √ºberarbeitet, damit Sie die Symbole aus dem Entwurfssystem mit verwandten Projekten verbinden k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier gibt es einen wichtigen Punkt, dem Sie unweigerlich begegnen werden. </font><font style="vertical-align: inherit;">Refactoring ist ein Prozess der kontinuierlichen Verbesserung. </font><font style="vertical-align: inherit;">Aber fr√ºher oder sp√§ter muss man aufh√∂ren.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist absolut normal, aufzuh√∂ren, das Refactoring nicht abzuschlie√üen, sondern konkrete messbare Verbesserungen zu erzielen.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie jedoch an einem Legacy-Projekt arbeiten, werden Sie unweigerlich auf Leute sto√üen, die dies tun. </font></font><br>
<img src="https://habrastorage.org/webt/to/bx/ix/tobxixkebgoqq2lvl-2fijjeqme.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das bedeutet, dass sie auf die alte Art schreiben, weil sie so daran gew√∂hnt sind. Zum Beispiel sagen unsere Unterst√ºtzer: "Ich m√∂chte dies nicht Ihren Scherz beibringen. Ich habe drei Jahre lang Tests f√ºr Karma geschrieben. Ich muss neue Funktionen hinzuf√ºgen. Da diese ohne Tests keine Funktionen annehmen, ist hier ein Test f√ºr Karma. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ihre Aufgabe ist es, dem so weit wie m√∂glich zu widerstehen. Dies ist relativ leicht zu bek√§mpfen, aber es gibt eine noch gr√∂√üere S√ºnde als diese. Manchmal st√∂√üt man beim Refactoring auf ein Problem, und es besteht der Wunsch, generell beiseite zu gehen.</font></font><br>
<img src="https://habrastorage.org/webt/pz/va/st/pzvast70b3gpomnqsaic1iignns.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, eine neue Kr√ºcke zu ersetzen, nur weil es aus bestimmten Gr√ºnden nicht m√∂glich ist, das Refactoring zu beenden. </font><font style="vertical-align: inherit;">Wenn wir beispielsweise Probleme haben, Symbole in die Hauptcodebasis zu integrieren, k√∂nnen wir eine Dienstprogrammklasse belassen, die aus dem globalen Anwendungs-CSS abgerufen wird. </font><font style="vertical-align: inherit;">Formal wird die Gesch√§ftsaufgabe gel√∂st, aber in der Praxis wie in der Geschichte der Lernean Hydra: Es gab 8 Fehler, 4 behoben, 13 √ºbrig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Refactoring, wie die Reparatur eines Hauses - es ist unm√∂glich zu beenden, Sie k√∂nnen es nur stoppen.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die ersten 80% des Refactorings dauern 20% der Zeit, die restlichen 80% des Refactorings (einfach so) dauern weitere 80% der Zeit.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist wichtig, w√§hrend des Refactoring-Prozesses keine neuen Hacks einzuf√ºhren. </font><font style="vertical-align: inherit;">Glauben Sie mir, w√§hrend des Entwicklungsprozesses werden sie selbst erscheinen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Werkzeuge</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gl√ºcklicherweise hat GitLab bereits vor meiner Ankunft den richtigen Weg eingeschlagen, um gute Tools einzuf√ºhren: Prettier, Vue Test Utils, Jest. Obwohl Prettier schief umgesetzt hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde erkl√§ren, worum es geht. W√§hrend ich in der Vergangenheit herausgefunden habe, was und warum dies so ist, stie√üen 80% meiner Suchanfragen auf ein Commit von 37.000 Zeilen Prettify-Code. Es war fast unm√∂glich, den Verlauf zu verwenden, und ich musste das Plug-In f√ºr VS-Code so konfigurieren, dass dieses Commit bei der Suche nach dem √Ñnderungsverlauf ausgeschlossen wird.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sicher, Werkzeuge sind wichtig, aber Sie m√ºssen sie sorgf√§ltig ausw√§hlen. Zum Beispiel haben wir Vue und Vue hat ein gutes Testwerkzeug - Vue Test Utils. Aber wenn Vue 2 vor 2-3 Jahren ver√∂ffentlicht wurde, sind die Vue Test Utils immer noch nicht aus der Beta herausgekommen. Laut Insiderinformationen schreibt der einzige Entwickler von Vue Test Utils derzeit nicht √ºber Vue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Auswahl der Werkzeuge spielen Sie mit dem Schicksal und versuchen wirklich zu gewinnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GitLab hatte eine Kindheitsverletzung mit CoffeeScript. Aus diesem Grund ist es unm√∂glich, auch nur die theoretische Idee des Schreibens in TypeScript in GitLab voranzutreiben. Alles gliedert sich in ein einfaches Argument: Wird es nicht dasselbe sein wie bei CoffeeScript, wenn die Sprache, die in JavaScript kompiliert wird, gestorben ist?</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versuchen Sie bei der Auswahl der Werkzeuge, dass das Werkzeug ausgetauscht oder im Extremfall unabh√§ngig gewartet werden kann.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir bei GitLab verwenden eine coole Sache namens Danger. </font></font><br>
<img src="https://habrastorage.org/webt/lv/ol/oh/lvolohfoqnrzwiqzur-ziqhaaxw.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist ein echter Screenshot ihrer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Website</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Jahr 2019. </font><font style="vertical-align: inherit;">Kollegen sagten jedoch, dass die Website im Jahr 2019 tats√§chlich wie alles aussehen k√∂nnte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gefahr ist ein Bot, der einen Zwischenzustand zwischen dem Linter in Ihrem CI und den schriftlichen Richtlinien einnimmt. </font><font style="vertical-align: inherit;">Dieser Bot kann erweitert werden und es wird kommen, um Anfrage zu ziehen oder, wie sie bei uns richtig genannt werden, Anfrage zusammenzuf√ºhren und Kommentare zu hinterlassen wie:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Diese Datei enth√§lt einen ESlint-Deaktivierungskommentar. Korrigieren Sie ihn."</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄûDiese Datei wurde fr√ºher von dieser Person regiert. </font><font style="vertical-align: inherit;">Vielleicht m√ºssen Sie eine Bewertung abgeben. ‚Äú</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meiner Meinung nach ist dies ein sehr guter, wichtiger und erweiterbarer Rahmen f√ºr die √úberwachung des Status der Codebasis.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Abstraktion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde mit einem Beispiel beginnen. </font><font style="vertical-align: inherit;">Vor einigen Monaten sah ich die Nachricht: ‚ÄûGitHub hat jQuery losgeworden. </font><font style="vertical-align: inherit;">Wir haben einen langen, schwierigen Weg zur√ºckgelegt und verwenden jQuery nicht mehr. ‚Äú </font><font style="vertical-align: inherit;">Nat√ºrlich dachte ich, dass wir auch jQuery in GitLab loswerden m√ºssen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e3/3d/4z/e33d4zkjkbo05u2iz2ehkjp9oh8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine schnelle Suche ergab, dass jQuery in 300 Dateien verwendet wird. </font><font style="vertical-align: inherit;">Es sieht be√§ngstigend aus, aber nichts - die Augen haben Angst, die H√§nde tun es. </font><font style="vertical-align: inherit;">Aber nein! </font><font style="vertical-align: inherit;">jQuery ist ein integraler Bestandteil der GitLab-Codebasis, da wir Bootstrap haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bootstrap wurde urspr√ºnglich in jQuery geschrieben. </font><font style="vertical-align: inherit;">Dies bedeutet, dass dies ein jQuery-Ereignis ist, wenn Sie beispielsweise das Dropdown-Er√∂ffnungsereignis in Bootstrap abfangen m√ºssen. </font><font style="vertical-align: inherit;">Sie k√∂nnen es nicht nativ abfangen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist das erste, was Sie abstrahieren sollten, wenn Sie mit Legacy-Code arbeiten. </font><font style="vertical-align: inherit;">Wenn Sie jQuery haben, das Sie nicht wegwerfen k√∂nnen, schreiben Sie Ihren eigenen Event Emitter, der sich in der Arbeit mit jQuery-Ereignissen versteckt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn eine gl√§nzende Zukunft kommt, k√∂nnen wir jQuery entfernen, aber im Moment m√ºssen Sie sich leider auf den Govnokod konzentrieren. </font><font style="vertical-align: inherit;">In einem regul√§ren Legacy-Projekt wird es gleichm√§√üig im Code verteilt. </font><font style="vertical-align: inherit;">Sammeln Sie es in Engp√§ssen, die mit den Markierungen ‚ÄûNicht ohne Chemikalienschutzanzug betreten‚Äú gekennzeichnet sind.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Metriken</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen nichts tun, dessen Ergebnis nicht gemessen werden kann. Bei GitLab messen wir alles, was wir tun, um objektiv zu wissen, dass der Code besser funktioniert. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/0g/qb/me0gqbigji1jssyvv6be_ve_bjq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel haben wir einen Migrationsplan von Karma-Tests (blau) zu Jest (gr√ºn): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie sehen, dass es schrittweise Fortschritte gibt. Und wir haben viele solcher Zeitpl√§ne. Es ist jedoch wichtig zu verstehen, dass nicht immer alles gut endet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde noch ein Beispiel geben (die Demo im Bericht beginnt ab </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Moment). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6s/az/t7/6sazt7jddhpg2kshoo0sodo-hbu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist die √ºbliche Schnittstelle f√ºr Zusammenf√ºhrungsanforderungen in der GitLab-Produktion. Nat√ºrlich k√∂nnen wir Dateien reduzieren, auf den Header klicken und die Datei beginnt zu reduzieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was denken Sie, wie lange dauert es, eine Datei mit 50 Zeilen zu reduzieren, w√§hrend der Computer mit dem Core i7 der achten Generation f√ºr maximale Leistung verdreht ist? </font><font style="vertical-align: inherit;">Wie lange dauert die Bereitstellung? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Zeit, die die Datei zum Reduzieren ben√∂tigt, liegt zwischen 7 und 15 Sekunden. </font><font style="vertical-align: inherit;">Die Bereitstellung erfolgt sofort. </font><font style="vertical-align: inherit;">Vor dem Refactoring arbeiteten beide gleich schnell. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deshalb ist es sehr wichtig, Metriken zu haben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde Ihnen sagen, was hier passiert. </font><font style="vertical-align: inherit;">Dies ist Vue, sein Reaktivit√§tssystem verfolgt den Wert: Wenn es sich √§ndert, werden alle Abh√§ngigkeiten aufgerufen, die von diesem Wert abh√§ngen. </font><font style="vertical-align: inherit;">Jede Zeile ist eine Vue-Komponente, die aus vielen Dingen besteht, da Sie Kommentare in eine Zeile einf√ºgen k√∂nnen, Kommentare dynamisch vom Server geladen werden k√∂nnen usw. </font><font style="vertical-align: inherit;">All dies wird im Vue-Store abonniert, der auch eine Vue-Komponente ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie die Zusammenf√ºhrungsanforderung schlie√üen, m√ºssen beispielsweise alle 20.000 Gesch√§ftsabonnements aktualisiert werden, wenn das Gesch√§ft aktualisiert wird. Wenn die Zeile gel√∂scht wird, muss sie aus den Abh√§ngigkeiten entfernt werden. Und dann einfache Mathematik: Sie m√ºssen sich ein Array von 20.000 Elementen ansehen, um diejenigen zu finden, die entfernt werden m√ºssen. Angenommen, es gibt 500 solcher Zeilen, und jede Zeile besteht aus mehreren Komponenten. Das Ergebnis ist eine mathematische Operation O (N), dh O (20.000) * 500. JavaScript wurde die ganze Zeit ausgef√ºhrt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Bereitstellung erfolgt sofort, da das Hinzuf√ºgen einer Abh√§ngigkeit nur ein Push f√ºr das Array ist, d. H. mathematische Operation O (1). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal verschlechtert die Verbesserung der Codequalit√§t die Leistung und andere Metriken. Es ist sehr wichtig, sie zu messen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassend: Isolieren Sie fehlerhaften Code und verfolgen Sie die Metriken.</font></font></strong><br>
<br>
<blockquote>  legacy ‚Äî  .   ,      ‚Äì     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TechLead Conf</a> ‚Äî ,    .   ‚Äì    ,  legacy        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> Python</a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> PHP</a>.<br>
<br>
            ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">++</a>,        ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FrontendConf</a>.          .</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492980/index.html">9 IT-Tools zur Erh√∂hung des Humankapitals in einem Unternehmen</a></li>
<li><a href="../de492990/index.html">Organisation der Online-Studentenausbildung</a></li>
<li><a href="../de492994/index.html">Was ist neu in TestMace Teil 1. Cloud-Synchronisierung, aktualisierte Benutzeroberfl√§che und mehr</a></li>
<li><a href="../de492996/index.html">Benutzerdefinierte Datumsformate in Go</a></li>
<li><a href="../de492998/index.html">Wie wir verwirrt waren, freiberuflich f√ºr ein Rechenzentrum zu arbeiten und was daraus wurde</a></li>
<li><a href="../de493002/index.html">350 Menschen aus der Ferne: wie es war</a></li>
<li><a href="../de493008/index.html">Informationen zum 1C-Servercluster</a></li>
<li><a href="../de493010/index.html">Wie Quarkus imperative und reaktive Programmierung kombiniert</a></li>
<li><a href="../de493012/index.html">Luft, Relais, Kabel aus dem Fenster: Wie man einem monopolistischen Anbieter in einem Business Center nicht begegnet</a></li>
<li><a href="../de493014/index.html">Interview mit Vyacheslav Utochkin, Direktor f√ºr Bildungsentwicklungsprogramme an der Higher School of Economics, der Higher School of Economics und der Higher School of Economics; 20 Fragen zu Gamedev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>