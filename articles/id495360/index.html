<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏍️ 📔 👨🏽‍🎤 Cara kami mengotomatiskan produk porting dari C # ke C ++ 🦗 🌶️ 👩🏼‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo Habr. Dalam posting ini saya akan berbicara tentang bagaimana kami mengatur rilis perpustakaan bulanan untuk bahasa C ++, kode sumbernya dikemban...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cara kami mengotomatiskan produk porting dari C # ke C ++</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495360/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo Habr. </font><font style="vertical-align: inherit;">Dalam posting ini saya akan berbicara tentang bagaimana kami mengatur rilis perpustakaan bulanan untuk bahasa C ++, kode sumbernya dikembangkan dalam C #. </font><font style="vertical-align: inherit;">Ini bukan tentang C ++ yang dikelola, atau bahkan tentang membuat jembatan antara C ++ yang tidak dikelola dan lingkungan CLR - ini tentang mengotomatisasi pembuatan kode C ++ yang mengulang API dan fungsionalitas kode C # asli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menulis infrastruktur yang diperlukan untuk menerjemahkan kode antar bahasa dan meniru fungsi perpustakaan .Net sendiri, sehingga memecahkan masalah yang biasanya dianggap akademik. Ini memungkinkan kami untuk mulai merilis rilis bulanan produk-produk pra-Donet untuk bahasa C ++, mendapatkan kode untuk setiap rilis dari versi kode C # yang sesuai. Pada saat yang sama, tes yang mencakup kode asli porting bersama dengannya dan memungkinkan Anda untuk mengontrol kinerja solusi yang dihasilkan bersama dengan tes tertulis khusus di C ++.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel ini saya akan menjelaskan secara singkat sejarah proyek kami dan teknologi yang digunakan di dalamnya. </font><font style="vertical-align: inherit;">Saya akan menyentuh pada masalah pembenaran ekonomi hanya secara sepintas, karena sisi teknis jauh lebih menarik bagi saya. </font><font style="vertical-align: inherit;">Dalam artikel seri berikut ini, saya berencana untuk membahas topik-topik seperti pembuatan kode dan manajemen memori, serta beberapa topik lainnya, jika komunitas memiliki pertanyaan yang relevan.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Latar Belakang</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Awalnya, perusahaan kami terlibat dalam rilis perpustakaan untuk platform .Net. </font><font style="vertical-align: inherit;">Perpustakaan ini terutama menyediakan API untuk bekerja dengan beberapa format file (dokumen, tabel, slide, grafik) dan protokol (email), menempati ceruk tertentu di pasar untuk solusi tersebut. </font><font style="vertical-align: inherit;">Semua pengembangan dilakukan dalam C #.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhir tahun 2000-an, perusahaan memutuskan untuk memasuki pasar baru untuk dirinya sendiri, mulai merilis produk serupa untuk Jawa. Pengembangan dari awal jelas membutuhkan investasi sumber daya yang sebanding dengan pengembangan awal semua produk yang terkena dampak. Opsi untuk membungkus kode Donnet ke dalam layer yang menerjemahkan panggilan dan data dari Java ke .Net dan sebaliknya juga ditolak karena beberapa alasan. Sebaliknya, pertanyaannya adalah apakah mungkin dengan cara apa pun untuk sepenuhnya memigrasi kode yang ada ke platform baru. Ini semua lebih relevan karena itu bukan promosi satu kali, tetapi rilis bulanan setiap produk baru, disinkronkan antara dua bahasa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diputuskan untuk memecah keputusan menjadi dua bagian. </font><font style="vertical-align: inherit;">Yang pertama - yang disebut Porter - akan mengonversi sintaksis kode sumber C # ke Java, secara bersamaan menggantikan tipe dan metode .Net dengan rekan-rekan mereka dari perpustakaan Java. </font><font style="vertical-align: inherit;">Yang kedua - Perpustakaan - akan meniru pekerjaan bagian-bagian dari perpustakaan. Net yang sulit atau tidak mungkin untuk membangun korespondensi langsung dengan Jawa, menarik komponen pihak ketiga yang tersedia untuk ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam mendukung kelayakan utama dari rencana semacam itu, berikut ini berbicara:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secara ideologis, bahasa C # dan Java cukup mirip - setidaknya, dengan struktur tipe dan organisasi kerja dengan memori;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu tentang porting perpustakaan; tidak perlu port GUI;</font></font></li>
<li>  ,  , -    ,        System.Net  System.Drawing;</li>
<li>   ,        .Net ( Framework,   Standard   Xamarin),          .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak akan merinci, karena mereka pantas mendapatkan artikel terpisah (dan bukan satu). </font><font style="vertical-align: inherit;">Saya hanya bisa mengatakan bahwa butuh sekitar dua tahun dari awal pengembangan hingga rilis produk Java pertama, dan sejak itu rilis produk Java telah menjadi praktik rutin perusahaan. </font><font style="vertical-align: inherit;">Selama pengembangan proyek, porter telah berevolusi dari utilitas sederhana yang mengubah teks sesuai aturan yang ditetapkan, menjadi generator kode kompleks yang bekerja dengan representasi AST dari kode sumber. </font><font style="vertical-align: inherit;">Perpustakaan juga ditumbuhi kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keberhasilan arahan Jawa menentukan keinginan perusahaan untuk memperluas lebih jauh ke pasar baru untuk dirinya sendiri, dan pada tahun 2013 muncul pertanyaan tentang rilis produk untuk bahasa C ++ dalam skenario yang sama.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perumusan masalah</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memastikan rilis versi positif dari produk, perlu untuk membuat kerangka kerja yang akan memungkinkan Anda untuk mendapatkan kode C ++ dari kode C # yang sewenang-wenang, kompilasi, periksa dan berikan kepada klien. Itu tentang perpustakaan dengan volume mulai dari beberapa ratus ribu hingga beberapa juta baris (tidak termasuk dependensi).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada saat yang sama, pengalaman dengan porter Java diperhitungkan: pada awalnya, ketika itu hanya alat sederhana untuk mengkonversi sintaksis, praktik menyelesaikan kode porting secara manual muncul secara alami. Dalam jangka pendek, berfokus pada rilis cepat produk, ini relevan, karena memungkinkan untuk mempercepat proses pengembangan, namun, dalam jangka panjang, ini secara signifikan meningkatkan biaya mempersiapkan setiap versi untuk rilis karena kebutuhan untuk memperbaiki setiap kesalahan terjemahan setiap kali itu terjadi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, kompleksitas ini dapat dikelola - setidaknya dengan mentransfer hanya tambalan ke dalam kode Java yang dihasilkan, yang dihitung sebagai perbedaan antara output porter untuk dua revisi selanjutnya dari kode C #. Pendekatan ini memungkinkan untuk memperbaiki setiap baris porting hanya sekali dan di masa depan menggunakan kode yang sudah dikembangkan di mana tidak ada perubahan yang dilakukan. Namun, ketika mengembangkan porter positif, tujuannya adalah untuk menyingkirkan tahap memperbaiki kode porting, alih-alih memperbaiki kerangka itu sendiri. Dengan demikian, setiap kesalahan terjemahan yang jarang terjadi akan diperbaiki sekali - dalam kode porter, dan perbaikan ini akan berlaku untuk semua rilis mendatang dari semua produk porting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain porter itu sendiri, itu juga diperlukan untuk mengembangkan perpustakaan di C ++ yang akan memecahkan masalah berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emulasi lingkungan .Net sejauh diperlukan agar kode porting berfungsi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengadaptasi kode C # yang diangkut ke realitas C ++ (struktur tipe, manajemen memori, kode layanan lainnya);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menghaluskan perbedaan antara "ditulis ulang C #" dan C ++ itu sendiri, untuk membuatnya lebih mudah bagi programmer yang tidak terbiasa dengan. Net paradigma untuk menggunakan kode porting.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk alasan yang jelas, tidak ada upaya yang dilakukan untuk secara langsung memetakan jenis Net ke jenis dari perpustakaan standar. </font><font style="vertical-align: inherit;">Sebagai gantinya, diputuskan untuk selalu menggunakan tipe dari perpustakaannya sebagai pengganti untuk tipe Donnet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak pembaca akan segera bertanya mengapa mereka tidak menggunakan implementasi yang ada seperti </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mono</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ada alasan untuk itu.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dengan menarik perpustakaan yang sudah selesai, hanya mungkin memenuhi persyaratan pertama, tetapi bukan yang kedua dan bukan yang ketiga.</font></font></li>
<li> Mono   C# ,  ,   ,       .</li>
<li>      (API,  ,   ,   C++,   )   ,     .</li>
<li>    ,    .Net,                  .  ,           ,      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara teoritis, pustaka semacam itu dapat diterjemahkan ke dalam C ++ sepenuhnya menggunakan port, namun, ini akan membutuhkan porter yang berfungsi penuh pada awal pengembangan, karena tanpa pustaka sistem debugging dari setiap kode porting tidak mungkin secara prinsip. Selain itu, pertanyaan tentang mengoptimalkan kode yang diterjemahkan dari perpustakaan sistem akan menjadi lebih akut daripada kode produk porting, karena panggilan ke perpustakaan sistem cenderung menjadi hambatan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, diputuskan untuk mengembangkan perpustakaan sebagai seperangkat adaptor yang menyediakan akses ke fungsi yang sudah diterapkan di perpustakaan pihak ketiga, tetapi melalui API .Net-like (mirip dengan Jawa). Ini akan mengurangi pekerjaan dan menggunakan komponen C ++ yang sudah jadi, sudah dioptimalkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Persyaratan penting untuk kerangka kerja ini adalah bahwa kode porting harus dapat berfungsi sebagai bagian dari aplikasi pengguna (sejauh menyangkut perpustakaan). Ini berarti bahwa model manajemen memori harus dibuat jelas untuk programmer C ++, karena kita tidak dapat memaksa kode klien yang sewenang-wenang untuk berjalan di lingkungan pengumpulan sampah. Penggunaan smart pointer dipilih sebagai model kompromi. Tentang bagaimana kami berhasil memastikan transisi semacam itu (khususnya, untuk memecahkan masalah referensi melingkar), saya akan membahas dalam artikel terpisah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Persyaratan lain adalah kemampuan untuk port tidak hanya perpustakaan, tetapi juga tes untuk mereka. </font><font style="vertical-align: inherit;">Perusahaan ini memiliki budaya cakupan uji produk yang tinggi, dan kemampuan untuk menjalankan dalam C ++ tes yang sama yang ditulis untuk kode asli akan sangat menyederhanakan pencarian masalah setelah terjemahan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Persyaratan lainnya (format peluncuran, cakupan uji, teknologi, dll.) Terutama berkaitan dengan metode bekerja dengan proyek dan pada proyek. </font><font style="vertical-align: inherit;">Saya tidak akan memikirkan mereka.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cerita</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum melanjutkan, saya harus mengatakan beberapa patah kata tentang struktur perusahaan. Perusahaan bekerja dari jarak jauh, semua tim di dalamnya didistribusikan. Pengembangan produk tertentu biasanya merupakan tanggung jawab tim, disatukan oleh bahasa (hampir selalu) dan geografi (terutama). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pekerjaan aktif pada proyek dimulai pada musim gugur 2013. Karena struktur perusahaan yang terdistribusi, dan juga karena beberapa keraguan tentang keberhasilan pengembangan, tiga versi kerangka kerja diluncurkan segera: dua di antaranya melayani satu produk masing-masing, yang ketiga mencakup tiga sekaligus. Diasumsikan bahwa ini kemudian akan menghentikan pengembangan solusi yang kurang efektif dan merealokasi sumber daya jika perlu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di masa depan, empat tim lagi bergabung dalam kerangka “umum”, dua di antaranya kemudian mempertimbangkan kembali keputusan mereka dan menolak untuk merilis produk untuk C ++. Pada awal 2017, sebuah keputusan dibuat untuk menghentikan pengembangan salah satu solusi "individu" dan mentransfer tim terkait untuk bekerja dengan kerangka kerja "umum". Pengembangan yang dihentikan mengasumsikan penggunaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boehm GC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai sarana manajemen memori dan berisi implementasi yang jauh lebih kaya dari beberapa bagian perpustakaan sistem, yang kemudian dipindahkan ke solusi "umum".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, dua perkembangan mencapai garis akhir - yaitu, untuk merilis produk porting - satu "individu" dan satu "kolektif". Rilis pertama berdasarkan kerangka kerja kami ("umum") terjadi pada Februari 2018. Selanjutnya, rilis semua enam tim menggunakan solusi ini menjadi bulanan, dan kerangka itu sendiri dirilis sebagai produk terpisah dari perusahaan. Bahkan muncul pertanyaan tentang menjadikannya open-source, tetapi diskusi ini belum berkembang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tim, yang terus bekerja secara independen pada kerangka kerja yang sama, juga merilis rilis C ++ pertamanya pada 2018.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rilis pertama berisi versi terpotong dari produk asli, yang memungkinkan untuk menunda pekerjaan penyiaran bagian yang tidak penting sebanyak mungkin. </font><font style="vertical-align: inherit;">Dalam rilis berikutnya, penambahan fungsionalitas sebagian telah terjadi (dan sedang terjadi).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisasi kerja pada proyek</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Organisasi kerja bersama pada proyek oleh beberapa tim berhasil mengalami perubahan signifikan. Pada awalnya, diputuskan bahwa satu tim besar "pusat" akan bertanggung jawab untuk mengembangkan, mendukung dan memperbaiki kerangka kerja, sementara tim "produk" kecil yang terlibat dalam pelepasan produk akhir di C ++ akan terutama bertanggung jawab untuk mencoba mengirim mereka kode dan memberikan umpan balik (informasi tentang kesalahan porting, kompilasi, dan eksekusi). Namun, skema semacam itu ternyata tidak produktif, karena tim pusat dipenuhi dengan permintaan dari semua tim "produk", dan mereka tidak dapat melanjutkan sampai masalah yang mereka temui diselesaikan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk alasan yang sebagian besar tidak tergantung pada keadaan pengembangan khusus ini, diputuskan untuk membubarkan tim "pusat" dan mentransfer orang ke tim "produk", yang sekarang bertanggung jawab untuk memperbaiki kerangka kerja sesuai kebutuhan mereka. Dalam hal ini, masing-masing tim sendiri akan membuat keputusan apakah akan menggunakan landasan bersama atau menghasilkan cabang sendiri dari proyek tersebut. Pernyataan pertanyaan semacam itu relevan untuk kerangka kerja Java, yang kodenya stabil pada waktu itu, tetapi upaya konsolidasi diperlukan untuk mengisi pustaka C ++ sesegera mungkin, sehingga tim masih bekerja sama.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bentuk kerja ini juga memiliki kelemahan, sehingga di masa depan reformasi lain dilakukan. Tim "pusat" dipulihkan, meskipun dalam komposisi yang lebih kecil, tetapi dengan fungsi yang berbeda: sekarang tidak bertanggung jawab atas pengembangan proyek yang sebenarnya, tetapi untuk organisasi kerja bersama di dalamnya. Ini termasuk dukungan untuk lingkungan CI, mengorganisir praktik Permintaan Gabung, mengadakan pertemuan rutin dengan peserta pengembangan, mendukung dokumentasi, mencakup tes, membantu dengan solusi arsitektur dan pemecahan masalah, dan sebagainya. Selain itu, tim mengambil pekerjaan untuk menghilangkan utang teknis dan bidang-bidang padat sumber daya lainnya. Dalam mode ini, pengembangan berlanjut hingga hari ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, proyek ini diprakarsai oleh upaya beberapa (sekitar lima) pengembang dan pada saat terbaik berjumlah sekitar dua puluh orang. Sekitar sepuluh hingga lima belas orang yang bertanggung jawab untuk pengembangan dan dukungan kerangka kerja dan pelepasan enam produk yang diangkut dapat dianggap sebagai nilai yang stabil dalam beberapa tahun terakhir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penulis baris ini bergabung dengan perusahaan pada pertengahan 2016, mulai bekerja di salah satu tim yang menyiarkan kode mereka menggunakan solusi "umum". Pada musim dingin tahun yang sama, ketika diputuskan untuk menciptakan kembali tim "sentral", saya pindah ke posisi pemimpin timnya. Jadi, pengalaman saya dalam proyek hari ini adalah lebih dari tiga setengah tahun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otonomi tim yang bertanggung jawab atas pelepasan produk-produk porting telah mengarah pada fakta bahwa dalam beberapa kasus ternyata lebih mudah bagi pengembang untuk menambah porter dengan mode operasi daripada kompromi tentang bagaimana seharusnya berperilaku secara default. </font><font style="vertical-align: inherit;">Ini menjelaskan lebih dari yang Anda perkirakan, jumlah opsi yang tersedia saat mengkonfigurasi porter.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teknologi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saatnya berbicara tentang teknologi yang digunakan dalam proyek. Porter adalah aplikasi konsol yang ditulis dalam C #, karena dalam formulir ini lebih mudah untuk menanamkan dalam skrip yang melakukan tugas-tugas seperti "port-compile-run tests." Selain itu, ada komponen GUI yang memungkinkan Anda untuk mencapai tujuan yang sama dengan mengklik tombol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perpustakaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NRefactory</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kuno bertanggung jawab untuk parsing kode dan menyelesaikan semantik </font><font style="vertical-align: inherit;">. Sayangnya, pada saat proyek dimulai, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roslyn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> belum tersedia, meskipun migrasi ke sana, tentu saja, ada dalam rencana kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Porter menggunakan trotoar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kayu AST</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk mengumpulkan informasi dan menghasilkan kode output C ++. Ketika kode C ++ dihasilkan, representasi AST tidak dibuat, dan semua kode disimpan sebagai teks biasa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam banyak kasus, porter membutuhkan informasi tambahan untuk fine tuning. Informasi tersebut dikirimkan kepadanya dalam bentuk opsi dan atribut. Opsi berlaku untuk seluruh proyek segera dan memungkinkan Anda untuk mengatur, misalnya, nama-nama anggota makro ekspor kelas atau definisi preprocessor C # yang digunakan dalam analisis kode. Atribut digantung pada jenis dan entitas dan menentukan pemrosesan khusus untuk mereka (misalnya, kebutuhan untuk menghasilkan kata kunci "const" atau "bisa berubah" untuk anggota kelas atau untuk mengecualikan mereka dari porting).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kelas dan struktur C # diterjemahkan ke dalam kelas C ++, anggota mereka dan kode yang dapat dieksekusi diterjemahkan ke dalam ekuivalen terdekat. Jenis dan metode umum memetakan ke templat C ++. Tautan C # diterjemahkan ke dalam pointer cerdas (kuat atau lemah) yang didefinisikan di Perpustakaan. Rincian lebih lanjut tentang prinsip-prinsip porter akan dibahas dalam artikel terpisah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, rakitan C # asli dikonversi ke proyek C ++, yang alih-alih pustaka .Net bergantung pada pustaka bersama kami. Ini ditunjukkan dalam diagram berikut: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/d1/s-/ofd1s-pimst_5rrcxzz8t-fh0nq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cmake digunakan untuk membangun perpustakaan dan proyek porting. Kompiler VS 2017 dan 2019 (Windows), GCC dan Dentang (Linux) saat ini didukung.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti disebutkan di atas, sebagian besar implementasi .Net kami adalah lapisan tipis dari perpustakaan pihak ketiga yang melakukan sebagian besar pekerjaan. </font><font style="vertical-align: inherit;">Itu termasuk:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk bekerja dengan grafik;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Botan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk mendukung fungsi enkripsi;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ICU</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk bekerja dengan string, penyandian dan budaya;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Libxml2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk bekerja dengan XML;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCRE2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk bekerja dengan ekspresi reguler;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zlib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk mengimplementasikan fungsi kompresi;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk berbagai keperluan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beberapa perpustakaan lain.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baik porter dan perpustakaan dicakup dalam berbagai tes. </font><font style="vertical-align: inherit;">Tes pustaka menggunakan kerangka kerja gtest. </font><font style="vertical-align: inherit;">Tes porter ditulis terutama dalam NUnit / xUnit dan dibagi menjadi beberapa kategori, menyatakan bahwa:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output porter pada file input ini sesuai dengan target;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">output dari program porting setelah kompilasi dan peluncuran bertepatan dengan target;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes NUnit dari proyek input berhasil dikonversi ke tes gtest di proyek porting dan lulus;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ported Projects API bekerja dengan sukses di C ++;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dampak dari opsi dan atribut individual pada proses terjemahan adalah seperti yang diharapkan.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitLab</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menyimpan kode sumber </font><font style="vertical-align: inherit;">. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dipilih sebagai lingkungan CI </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Produk porting tersedia sebagai paket Nuget dan sebagai arsip unduhan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat mengerjakan proyek ini, kami harus menghadapi banyak masalah. </font><font style="vertical-align: inherit;">Beberapa dari mereka diharapkan, sementara yang lain tampaknya sudah dalam proses. </font><font style="vertical-align: inherit;">Kami mendaftar secara singkat yang utama.</font></font><br>
<br>
<ol>
<li><b>     .Net  C++.</b><br>
  ,   C++    Object,       RTTI.           .Net   STL.</li>
<li><b>   .</b><br>
       ,          ,    . ,  C#     ,   C++ — .</li>
<li><b>  .</b><br>
   —   .          ,   .   ,            .</li>
<li><b>    .</b><br>
 C++   ,        ,        .</li>
<li><b>    C#.</b><br>
 C#    ,      C++.    ,     :<br>
<br>
<ul>
<li>   ,    ;</li>
<li>   ,       (,       yeild);</li>
<li>,      (,            ,       ,        C#);</li>
<li>,   C++ (,  C#        foreground-).</li>
</ul></li>
<li><b>  .</b><br>
,        .Net  ,          .</li>
<li><b>   .</b><br>
- ,     ,        «» ,     .  ,  ,  ,     ,     using,             -.                 .   ,             .</li>
<li><b> .</b><br>
         ,    ,   ,  ,   ,    /     -          .</li>
<li><b>    .</b><br>
     .       ,           .    ,       ,      ,     .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesulitan dengan perlindungan kekayaan intelektual. </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kode C # cukup mudah dikaburkan oleh solusi kotak, maka dalam C ++ Anda harus melakukan upaya tambahan, karena banyak anggota kelas tidak dapat dihapus dari file header tanpa konsekuensi. </font><font style="vertical-align: inherit;">Menerjemahkan kelas dan metode umum ke dalam templat juga menciptakan kerentanan dengan mengekspos algoritma.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun demikian, proyek ini sangat menarik dari sudut pandang teknis. </font><font style="vertical-align: inherit;">Bekerja dengannya memungkinkan Anda belajar banyak dan banyak belajar. </font><font style="vertical-align: inherit;">Sifat akademis dari tugas ini juga berkontribusi terhadap hal ini.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ringkasan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai bagian dari proyek, kami dapat menerapkan sistem yang memecahkan masalah akademik yang menarik demi aplikasi praktis langsungnya. Kami mengatur edisi bulanan perpustakaan perusahaan dalam bahasa yang awalnya tidak dimaksudkan. Ternyata sebagian besar masalah sepenuhnya dapat dipecahkan, dan solusi yang dihasilkan dapat diandalkan dan praktis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segera direncanakan untuk menerbitkan dua artikel lagi. Salah satunya akan menjelaskan secara rinci, dengan contoh, cara kerja porter dan bagaimana konstruksi C # ditampilkan dalam C ++. Dalam pidato lain, kita akan berbicara tentang bagaimana kita berhasil memastikan kompatibilitas model memori dua bahasa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan mencoba menjawab pertanyaan di komentar. </font><font style="vertical-align: inherit;">Jika pembaca menunjukkan minat pada aspek lain dari perkembangan kami dan jawaban mulai melampaui korespondensi dalam komentar, kami akan mempertimbangkan kemungkinan penerbitan artikel baru.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id495344/index.html">Menyatukannya: bagaimana Lamoda membuat layanan Go-nya konsisten</a></li>
<li><a href="../id495346/index.html">Dari kesalahan hingga peringatan dengan tindakan</a></li>
<li><a href="../id495350/index.html">Server web rumah, atau penyedia hosting Anda sendiri</a></li>
<li><a href="../id495354/index.html">Bagaimana cara melepaskan produk secara terus menerus dalam 20 bahasa dan tidak mati?</a></li>
<li><a href="../id495356/index.html">Menerapkan Algoritma Konsensus RAFT untuk Penyimpanan KV Terdistribusi di Jawa</a></li>
<li><a href="../id495362/index.html">Mengasingkan diri dan memprogram: bagaimana tidak menjadi gila di rumah dan menghabiskan waktu dengan bermanfaat</a></li>
<li><a href="../id495364/index.html">Panduan Gaya API, atau jangan buat pengguna berpikir</a></li>
<li><a href="../id495366/index.html">16 jenis programmer, atau Pengembang bukan robot yang sama</a></li>
<li><a href="../id495368/index.html">Kami mendaftar sendiri untuk self-walking self-dog dalam kondisi isolasi diri</a></li>
<li><a href="../id495370/index.html">Publik itu jahat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>