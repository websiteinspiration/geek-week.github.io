<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🎓 🧑🏿‍🤝‍🧑🏿 🤱🏽 13シェルベースのワープロツール 🕟 ✋🏾 👩🏼‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Balthazar RuberolとEtienne Broadによる、将来の本「初心者ソフトウェア開発者のための基本ツールと実践」の抜粋です。この本は、若い世代の開発者の教育に役立つはずです。コンソールの習得、コマンドシェルでの効率的なセットアップと作業、gitSQLの基本を使用したコードのバージョ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>13シェルベースのワープロツール</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/492932/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Balthazar Ruberolと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etienne Broadに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よる、将来の本「初心者ソフトウェア開発者のための基本ツールと実践」の抜粋</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">この本は、若い世代の開発者の教育に役立つはずです。</font><font style="vertical-align: inherit;">コンソールの習得、コマンドシェルでの効率的なセットアップと作業、</font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQLの基本</font><font style="vertical-align: inherit;">を使用したコードのバージョン管理</font></font><code>Make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>jq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などの</font><font style="vertical-align: inherit;">ツール</font><font style="vertical-align: inherit;">、正規表現、ネットワークの基本、ソフトウェアの開発とコラボレーションのベストプラクティス</font><font style="vertical-align: inherit;">などのトピックを取り上げます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">現在、著者たちはこのプロジェクトに一生懸命取り組んで</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おり、メーリングリスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に参加するように皆を招待して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">います</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネコ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頭</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尾</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トイレ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グレップ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切る</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペースト</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソート</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniq</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折る</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際の例</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">深化：forおよびxargsループ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次は何ですか</font></font></a></li>
</ul><a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェルテキスト処理</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドシェルを非常に貴重なツールにする理由の1つは、多数のワードプロセッシングコマンドと、それらを簡単にパイプラインに結合して複雑な処理テンプレートを作成する機能です。</font><font style="vertical-align: inherit;">これらのコマンドを使用すると、テキストとデータの分析、さまざまな形式間でのデータの変換、文字列のフィルタリングなど、多くのタスクが簡単になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストデータを操作するときの主な原則は、複雑な問題を多数の小さな問題に分割し、それぞれを解決することです専用のツールを使用してそれらの。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各プログラムに1つのことをうまく行わせる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Unix哲学の基礎</font></font></a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この章の例は、一見すると少し遠いかもしれませんが、これは意図的に行われています。</font><font style="vertical-align: inherit;">各ツールは、1つの小さな問題を解決するように設計されています。</font><font style="vertical-align: inherit;">ただし、組み合わせると非常に強力になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シェルで最も一般的で便利なテキスト処理コマンドをいくつか見て、それらを接続する実際のワークフローを示します。</font><font style="vertical-align: inherit;">これらのチームのマナを見て、自由に使える可能性の全幅を確認することをお勧めします。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプルCSVファイル</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はオンラインで入手できます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ダウンロードして資料を確認できます。</font></font></blockquote><br>
<a name="1"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネコ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドは</font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、1つ以上のファイルのリストをコンパイルして、その内容を画面に表示するために使用されます。</font></font><br>
<br>
<pre><code class="plaintext hljs">$ cat Documents/readme<font></font>
Thanks again for reading this book!<font></font>
I hope you're following so far!<font></font>
<font></font>
$ cat Documents/computers<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.<font></font>
<font></font>
$ cat Documents/readme Documents/computers<font></font>
Thanks again for reading this book!<font></font>
I hope you are following so far!<font></font>
<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.</code></pre><br>
<a name="2"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頭</font></font></h1><br>
<code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルの最初のn行を出力します。</font><font style="vertical-align: inherit;">これは、コンソール全体に大量のテキストを入力せずに、構造とフォーマットが不明なファイルを調べる場合に非常に役立ちます。</font></font><br>
<br>
<pre><code class="bash hljs">$ head -n 2 metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name<font></font>
mysql.galera.wsrep_cluster_size,gauge,,node,,The current number of nodes <span class="hljs-keyword">in</span> the Galera cluster.,0,mysql,galera cluster size</code></pre><br><font style="vertical-align: inherit;"></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定しない</font><font style="vertical-align: inherit;">
場合</font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、指定したファイルまたは入力ストリームの最初の10行を印刷します。</font></font><br>
<br>
<a name="3"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尾</font></font></h1><br>
<code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-アナログ</font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ファイルの最後のn行だけが表示されます。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 1 metadata.csv<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n番目の行の後にあるすべての行（それを含む）を印刷する場合は、引数を使用できます</font></font><code>-n +n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n +42 metadata.csv<font></font>
mysql.replication.slaves_connected,gauge,,,,Number of slaves connected to a replication master.,0,mysql,slaves connected<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルには43行あるため、</font></font><code>tail -n +42</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力されるのは42行目と43行目のみです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータが</font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定されていない</font><font style="vertical-align: inherit;">場合、</font></font><code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定されたファイルまたは入力ストリームの最後の10行が出力されます。</font></font><br>
<br>
<code>tail -f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>tail --follow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ファイルの最後の行と、ファイルに書き込まれる新しい各行を表示します。</font><font style="vertical-align: inherit;">これは、たとえばWebサーバーのログに記録されているものなど、アクティビティをリアルタイムで表示するのに非常に役立ちます。</font></font><br>
<br>
<a name="4"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トイレ</font></font></h1><br>
<code>wc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ワード数）は、文字の数（表示</font></font><code>-c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、言葉（</font></font><code>-w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）または行（</font></font><code>-l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定したファイルまたはストリーム内）を。</font></font><br>
<br>
<pre><code class="bash hljs">$ wc -l metadata.csv<font></font>
43  metadata.csv<font></font>
$ wc -w metadata.csv<font></font>
405 metadata.csv<font></font>
$ wc -c metadata.csv<font></font>
5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、上記のすべてが表示されます。</font></font><br>
<br>
<pre><code class="bash hljs">$ wc metadata.csv<font></font>
43     405    5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストデータがパイプライン処理されるか、にリダイレクトされる</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合、カウンターのみが表示されます。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat metadata.csv | wc<font></font>
43     405    5094<font></font>
$ cat metadata.csv | wc -l<font></font>
43<font></font>
$ wc -w &lt; metadata.csv<font></font>
405</code></pre><br>
<a name="5"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グレップ</font></font></h1><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-これは、指定されたパターンに従って文字列をフィルタリングするスイスナイフです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば</font><font style="vertical-align: inherit;">、ファイル内の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という単語のすべての出現を見つけることができ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.mutex_spin_rounds,gauge,,event,second,The rate of mutex spin rounds.,0,mysql,mutex spin rounds<font></font>
mysql.innodb.mutex_spin_waits,gauge,,event,second,The rate of mutex spin waits.,0,mysql,mutex spin waits</code></pre><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引数として指定されたファイルまたはそれに渡されたテキストのストリームを処理できます</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">したがって、いくつかのコマンド</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">連結して</font><font style="vertical-align: inherit;">、テキストをさらにフィルターに</font><font style="vertical-align: inherit;">掛けることができ</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">次の例では、ファイルの行をフィルタリングして、</font><i><font style="vertical-align: inherit;">mutex</font></i><font style="vertical-align: inherit;">と</font><i><font style="vertical-align: inherit;">OSの</font></i></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方を含む行を見つけます</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv | grep OS<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかのオプション</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とその動作を</font><font style="vertical-align: inherit;">考えてみましょう</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逆マッチングを実行します</font><font style="vertical-align: inherit;">。引数パターンに一致</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しない</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字列をフィルタリングします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -v gauge metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name</code></pre><br>
<code> grep -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大文字と小文字を区別しないマッチングを実行します。</font><font style="vertical-align: inherit;">次の例で</font></font><code>grep -i os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方を検索し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -i os metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.os_log_fsyncs,gauge,,write,second,The rate of fsync writes to the <span class="hljs-built_in">log</span> file.,0,mysql,<span class="hljs-built_in">log</span> fsyncs</code></pre><br>
<code>grep -l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 一致を含むファイルをリストします。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -l mysql metadata.csv<font></font>
metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チーム</font></font><code>grep -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、サンプルが見つかった回数をカウントします。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -c select metadata.csv<font></font>
3</code></pre><br>
<code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 現在の作業ディレクトリとそのすべてのサブディレクトリでファイルを再帰的に検索します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r are ~/Documents<font></font>
/home/br/Documents/computers:Computers are not intelligent<font></font>
/home/br/Documents/readme:I hope you are following so far!</code></pre><br>
<code>grep -w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 一致する単語のみを表示します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep follow ~/Documents/readme<font></font>
I hope you are following so far!<font></font>
$ grep -w follow ~/Documents/readme<font></font>
$</code></pre><br>
<a name="6"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切る</font></font></h1><br>
<code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルの一部を抽出します（または通常どおり、入力ストリーム）。</font><font style="vertical-align: inherit;">このコマンドは、optionを使用してフィールド区切り文字（列を区切る）</font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、optionを使用して取得する列番号を</font><font style="vertical-align: inherit;">定義</font><font style="vertical-align: inherit;">します</font></font><code>-f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次のコマンドは、CSVファイルの最後の5行から最初の列を取得します。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1<font></font>
mysql.performance.user_time<font></font>
mysql.replication.seconds_behind_master<font></font>
mysql.replication.slave_running<font></font>
mysql.replication.slaves_connected<font></font>
mysql.performance.queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CSVを扱っているので、列はコンマで区切られ、オプションは最初の列を取得します</font></font><code>-f 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションを使用して、1列目と2列目の両方を選択できます</font></font><code>-f 1,2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1,2<font></font>
mysql.performance.user_time,gauge<font></font>
mysql.replication.seconds_behind_master,gauge<font></font>
mysql.replication.slave_running,gauge<font></font>
mysql.replication.slaves_connected,gauge<font></font>
mysql.performance.queries,gauge</code></pre><br>
<a name="7"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペースト</font></font></h1><br>
<code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つの異なるファイルを1つのマルチカラムファイルにマージします。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
$ cat prices<font></font>
1$<font></font>
1.99$<font></font>
1.50$<font></font>
2$/kg<font></font>
$ paste ingredients prices<font></font>
eggs    1$<font></font>
milk    1.99$<font></font>
butter  1.50$<font></font>
tomatoes    2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトで</font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、タブ区切り文字が使用されますが、パラメータを使用して変更できます</font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ paste ingredients prices -d:<font></font>
eggs:1$<font></font>
milk:1.99$<font></font>
butter:1.50$<font></font>
tomatoes:2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一つの一般的なユースケースは</font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;、指定された区切り文字を使用しての組み合わせを使用してストリームまたはファイル内のすべての行を組み合わせることである</font></font><code>-s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ paste -s -d, ingredients<font></font>
eggs,milk,butter,tomatoes</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータが入力ファイルとして指定されている場合は、</font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わりに読み込まれ</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients | paste -s -d, -<font></font>
eggs,milk,butter,tomatoes</code></pre><br>
<a name="8"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソート</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドは</font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際にデータを（指定されたファイルまたは入力ストリーム内で）ソートします。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
salt<font></font>
$ sort ingredients<font></font>
butter<font></font>
eggs<font></font>
milk<font></font>
salt<font></font>
tomatoes</code></pre><br>
<code>sort -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 逆ソートを実行します。</font></font><br>
<br>
<pre><code class="bash hljs">$ sort -r ingredients<font></font>
tomatoes<font></font>
salt<font></font>
milk<font></font>
eggs<font></font>
butter</code></pre><br>
<code>sort -n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> フィールドを算術値でソートします。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat numbers<font></font>
0<font></font>
2<font></font>
1<font></font>
10<font></font>
3<font></font>
$ sort numbers<font></font>
0<font></font>
1<font></font>
10<font></font>
2<font></font>
3<font></font>
$ sort -n numbers<font></font>
0<font></font>
1<font></font>
2<font></font>
3<font></font>
10</code></pre><br>
<a name="9"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniq</font></font></h1><br>
<code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 指定されたファイルまたは入力ストリーム内の隣接する同一の行を検出してフィルタリングします。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat duplicates<font></font>
and one<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three<font></font>
$ uniq duplicates<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three</code></pre><br><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">隣接する</font></i><font style="vertical-align: inherit;">行</font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみが除外される</font><font style="vertical-align: inherit;">
ため</font><font style="vertical-align: inherit;">、データに重複が残っている可能性があります。</font><font style="vertical-align: inherit;">ファイルから同じ行をすべてフィルタリングするには、最初にその内容をソートする必要があります。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq<font></font>
and one<font></font>
and one, two, three<font></font>
and two</code></pre><br>
<code>uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 各行の先頭に、その出現回数を挿入します。</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -c<font></font>
   3 and one<font></font>
   1 and one, two, three<font></font>
   2 and two</code></pre><br>
<code>uniq -u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 一意の文字列のみを表示します。</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -u<font></font>
and one, two, three</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パイプラインを</font></font><code>| sort | uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用すると、ファイルまたはストリーム内のすべての重複行を削除できる</font><font style="vertical-align: inherit;">ため、並べ替えと組み合わせると特に便利です</font><font style="vertical-align: inherit;">。</font></font></blockquote><br>
<a name="10"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></h1><br>
<code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-これは単なるワープロツールではありません。実際、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラミング言語全体を備えています</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">何が</font></font><code>awk</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本当に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">良いことは列に分割ファイルで、スペースやタブはファイルに混在しているときには、特別な輝きでそれをしません。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat -t multi-columns<font></font>
John Smith    Doctor^ITardis<font></font>
Sarah-James Smith^I    Companion^ILondon<font></font>
Rose Tyler   Companion^ILondon</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><code>cat -t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タブをとして表示します</font></font><code>^I</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、列はスペースまたはタブで区切られており、必ずしも同じ数のスペースで区切られているわけではありません。</font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは、区切り文字が1つしか機能しないため、役に立ちません。</font><font style="vertical-align: inherit;">しかし</font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そのようなファイルを扱うのは簡単です。</font></font><br>
<br>
<code>awk '{ print $n }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキストのn番目の列を表示します。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat multi-columns | awk <span class="hljs-string">'{ print $1 }'</span><font></font>
John<font></font>
Sarah-James<font></font>
Rose<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $3 }'</span><font></font>
Doctor<font></font>
Companion<font></font>
Companion<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $1,$2 }'</span><font></font>
John Smith<font></font>
Sarah-James Smith<font></font>
Rose Tyler</code></pre><br><font style="vertical-align: inherit;"></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はるかにできる、スピーカーの出力は、おそらく私の個人的なケースでの使用例は99％です。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><code>{ print $NF }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行の最後の列を表示します。</font></font></blockquote><br>
<a name="11"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr</font></font></h1><br>
<code>tr</code><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">translateの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">略です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このコマンドは、1つの文字を別の文字に置き換えます。</font><font style="vertical-align: inherit;">小文字、タイプ付き、スペース、英数字などの</font><font style="vertical-align: inherit;">文字または</font><font style="vertical-align: inherit;">文字</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いずれかで機能します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準入力で</font></font><code>tr &lt;char1&gt; &lt;char2&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、出現するすべての&lt;char1&gt;を&lt;char2&gt;に置き換えます。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers are fast"</span> | tr a A<font></font>
computers Are fAst</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表記法を使用して文字クラスを変換でき</font></font><code>[:class:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">利用可能なクラスの完全なリストはmanページに記載されています</font></font><code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、いくつかはここで示されています。</font></font><br>
<br>
<code>[:space:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単純なスペースからタブや改行まで、すべてのタイプのスペースを表します。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:space:]'</span> <span class="hljs-string">','</span>
computers,are,fast,%</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スペースなどのすべての文字はコンマで区切られます。</font></font><code>%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力の最後の</font><font style="vertical-align: inherit;">文字</font><font style="vertical-align: inherit;">は、終了する改行がないことを示していることに</font><font style="vertical-align: inherit;">注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">実際、この文字もコンマに変換されます。</font></font><br>
<br>
<code>[:lower:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての小文字と</font></font><code>[:upper:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;すべての大文字を</font><font style="vertical-align: inherit;">表し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">したがって、それらの間の変換は簡単になります。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:lower:]'</span> <span class="hljs-string">'[:upper:]'</span><font></font>
COMPUTERS ARE FAST<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"COMPUTERS ARE FAST"</span> | tr <span class="hljs-string">'[:upper:]'</span> <span class="hljs-string">'[:lower:]'</span>
computers are fast</code></pre><br>
<code>tr -c SET1 SET2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SET1に含まれて</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いない</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字をSET2の文字に</font><font style="vertical-align: inherit;">変換します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次の例では、指定された母音を除くすべての文字がスペースに置き換えられます。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr -c <span class="hljs-string">'[aeiouy]'</span> <span class="hljs-string">' '</span>
 o  u e   a e  a</code></pre><br>
<code>tr -d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定された文字を削除しますが、置換はしません。</font><font style="vertical-align: inherit;">これは同等</font></font><code>tr &lt;char&gt; ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers Are Fast"</span> | tr -d <span class="hljs-string">'[:lower:]'</span>
C A F</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字範囲を置き換えることもできます。たとえば、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">までのすべての文字、</font><font style="vertical-align: inherit;">または1から8までのすべての数字を、表記を使用して</font><font style="vertical-align: inherit;">置き換えることができます</font></font><code>s-e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ここ</font></font><code>s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;で、は開始文字、</font></font><code>e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;終了</font><font style="vertical-align: inherit;">文字</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'a-e'</span> <span class="hljs-string">'x'</span><font></font>
xomputxrs xrx fxst<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"5uch l337 5p34k"</span> | tr <span class="hljs-string">'1-4'</span> <span class="hljs-string">'x'</span>
5uch lxx7 5pxxk</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンド</font></font><code>tr -s string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、出現するすべての文字</font></font><code>string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を1つのシングルに</font><font style="vertical-align: inherit;">圧縮します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最も有用な用途の1つは、</font></font><code>tr -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">連続する複数のスペースを1つに置き換えることです。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers         are       fast"</span> | tr -s <span class="hljs-string">' '</span>
Computers are fast</code></pre><br>
<a name="12"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折る</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンド</font></font><code>fold</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、すべての入力行を指定された幅に縮小します。</font><font style="vertical-align: inherit;">たとえば、テキストが小さなディスプレイに収まるようにすると便利です。</font><font style="vertical-align: inherit;">したがって、</font></font><code>fold -w n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幅n文字の文字列をスタックします。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ~/Documents/readme | fold -w 16<font></font>
Thanks again <span class="hljs-keyword">for</span><font></font>
 reading this bo<font></font>
ok!<font></font>
I hope you<span class="hljs-string">'re fo
llowing so far!</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンド</font></font><code>fold -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はスペース文字でのみ行を分割します。</font><font style="vertical-align: inherit;">これを前のものと組み合わせて、文字列を指定された文字数に制限できます。</font></font><br>
<br>
<pre><code class="bash hljs">Thanks again
<span class="hljs-keyword">for</span> reading<font></font>
this book!<font></font>
I hope you<span class="hljs-string">'re
following so
far!</span></code></pre><br>
<a name="13"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></h1><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力ストリームのテキストを行ごとに変換するために使用される非インタラクティブストリームエディターです。</font><font style="vertical-align: inherit;">入力としては、ファイル、または、または</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力では、ファイルまたは</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エディタコマンドには、1つ以上の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アドレス</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を含めることができ</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">したがって、コマンドは次のとおりです。</font></font><br>
<br>
<pre><code class="bash hljs">[address[,address]]<span class="hljs-keyword">function</span>[arguments]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これ</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は多くの機能を実行しますが、最も一般的な使用例の1つとして、テキストの置換のみを検討します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキスト置換</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
置換コマンドは</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のとおりです。</font></font><br>
<br>
<pre><code class="bash hljs">s/PATTERN/REPLACEMENT/[options]</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ファイルの各行の単語の最初のインスタンスを置き換える：</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello<font></font>
hello hello<font></font>
hello world!<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/'</span><font></font>
Hey I just met you hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の行では、最初のインスタンスのみが置き換えられてい</font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">すべての行の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オカレンス</font><font style="vertical-align: inherit;">を置き換えるに</font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、オプション</font></font><code>g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グローバルを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味する</font><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">以外の区切り文字を使用できます</font><font style="vertical-align: inherit;">。これにより、コマンドの引数自体にスラッシュがある場合に特に読みやすくなります。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s@hello@Hey I just met you@g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アドレスは、置換を実行する行または行範囲をエディターに指示します。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you hello<font></font>
hello world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you  world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アドレス</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、最初の行で</font><font style="vertical-align: inherit;">置換が</font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オン</font></font><code>Hey I just met you</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">である</font><font style="vertical-align: inherit;">ことを示しています</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちは、表記法でアドレスの範囲を指定することができ</font></font><code>&lt;start&gt;,&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それは、</font></font><code>&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行番号またはいずれかであることができ</font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ある、ファイルの最後の行。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1,2s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,3s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,$s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、それ</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自体</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">結果を生成し</font><font style="vertical-align: inherit;">ますが、オプションで元のファイルを編集することもできます</font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s/hello/Bonjour/'</span> sed-data<font></font>
$ cat sed-data<font></font>
Bonjour hello<font></font>
Bonjour world<font></font>
hi</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">Linuxでは、十分</font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">ただし、macOSではコマンドの動作が少し異なるため</font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、の</font><font style="vertical-align: inherit;">直後</font><font style="vertical-align: inherit;">に追加する必要があります</font></font><code>''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br>
<a name="14"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際の例</font></font></h1><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grepおよびawkによるCSVフィルタリング</font></font></h3><br>
<pre><code class="bash hljs">$ grep -w gauge metadata.csv | awk -F, <span class="hljs-string">'{ if ($4 == "query") { print $1, "per", $5 } }'</span><font></font>
mysql.performance.com_delete per second<font></font>
mysql.performance.com_delete_multi per second<font></font>
mysql.performance.com_insert per second<font></font>
mysql.performance.com_insert_select per second<font></font>
mysql.performance.com_replace_select per second<font></font>
mysql.performance.com_select per second<font></font>
mysql.performance.com_update per second<font></font>
mysql.performance.com_update_multi per second<font></font>
mysql.performance.questions per second<font></font>
mysql.performance.slow_queries per second<font></font>
mysql.performance.queries per second</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、ファイルは</font></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初に単語を含む行をフィルタリングし</font></font><code>gauge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次に</font></font><code>query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4番目の列</font><font style="vertical-align: inherit;">を含む行をフィルタリング</font><font style="vertical-align: inherit;">し、対応する値</font></font><code>per_unit_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（5番目の列）</font><font style="vertical-align: inherit;">を含む</font><font style="vertical-align: inherit;">メトリック名（1番目の列）を表示します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークインターフェイスに関連付けられたIPv4アドレスを表示します</font></font></h3><br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンド</font></font><code>ifconfig &lt;interface name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、指定されたネットワークインターフェイスに関する情報を表示します。</font><font style="vertical-align: inherit;">例えば：</font></font><br>
<br>
<pre><code class="bash hljs">en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500<font></font>
    ether 19:64:92:de:20:ba<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255<font></font>
    nd6 options=201&lt;PERFORMNUD,DAD&gt;<font></font>
    media: autoselect<font></font>
    status: active</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forを</font><font style="vertical-align: inherit;">実行する</font><font style="vertical-align: inherit;">と</font></font><code>inet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、2行の通信が生成されます。</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、を使用</font></font><code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して行</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">除外し</font></font><code>ipv6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6<font></font>
inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、助けを借りて、</font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この行の2番目の列</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">要求します。これは、ネットワークインターフェイスに関連付けられているIPv4アドレス</font></font><code>en0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">私は</font><font style="vertical-align: inherit;">そのような信頼できるチーム</font><font style="vertical-align: inherit;">と交換する</font><font style="vertical-align: inherit;">よう</font><font style="vertical-align: inherit;">に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提案さ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れました</font><font style="vertical-align: inherit;">：</font></font><code>grep inet | grep -v inet6</code><font style="vertical-align: inherit;"></font><code>awk</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | awk <span class="hljs-string">' $1 == "inet" { print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはより短く、条件付きのIPv4をターゲットにしています</font></font><code>$1 == "inet"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成ファイルから値を取得する</font></font></h3><br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d = -f2 | sed <span class="hljs-string">'s/ //g'</span>
/usr/bin/vim</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のユーザーのgit設定ファイルで、値を探し</font></font><code>editor =</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、文字をトリミングし</font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、2番目の列を抽出して、周りのすべてのスペースを削除します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig<font></font>
     editor = /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2<font></font>
 /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2 | sed <span class="hljs-string">'s/ //'</span>
/usr/bin/vim</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ログファイルからIPを抽出する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の実際のコードは、データベースログ</font></font><code>Too many connections from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（IPアドレスが後に続く）で</font><font style="vertical-align: inherit;">メッセージを探し</font><font style="vertical-align: inherit;">、10人の主要な侵入者を表示します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
   10.11.112.108<font></font>
   10.11.111.70<font></font>
   10.11.97.57<font></font>
   10.11.109.72<font></font>
   10.11.116.156<font></font>
   10.11.100.221<font></font>
   10.11.96.242<font></font>
   10.11.81.68<font></font>
   10.11.99.112<font></font>
   10.11.107.120</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このパイプラインが何をするか見てみましょう。</font><font style="vertical-align: inherit;">まず、ログの行はどのように見えますか。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | head -n 1<font></font>
2020-01-01 08:02:37,617 [myid:1] - WARN  [NIOServerCxn.Factory:1.2.3.4/1.2.3.4:2181:NIOServerCnxnFactory@193] - Too many connections from /10.11.112.108 - max is 60</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に</font></font><code>awk '{ print $12 }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、文字列からIPアドレスを抽出します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span><font></font>
/10.11.112.108<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンド</font></font><code>sed 's@/@@'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、最初のスラッシュを削除します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span> | sed <span class="hljs-string">'s@/@@'</span><font></font>
10.11.112.108<font></font>
...</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">前に見たように、</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任意のセパレータを使用できます。</font><font style="vertical-align: inherit;">通常は区切り文字として使用され</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ますが、ここではこの特定の文字を置き換えます。これにより、置換式の読みやすさが若干損なわれます。</font></font><br>
<br>
<pre><code class="bash hljs">sed <span class="hljs-string">'s/\///'</span></code></pre></blockquote><br>
<code>sort | uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> IPアドレスを辞書式順序でソートし、重複を削除して、各IPアドレスの前にエントリ数を追加します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c<font></font>
   1379 10.11.100.221<font></font>
   1213 10.11.103.168<font></font>
   1138 10.11.105.177<font></font>
    946 10.11.106.213<font></font>
   1211 10.11.106.4<font></font>
   1326 10.11.107.120<font></font>
   ...</code></pre><br>
<code>sort -rn | head -n 10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主な違反者が最初に表示され、そのうち10行が表示されるように、発生数で行を数値順に逆順にソートします。</font><font style="vertical-align: inherit;">最後のコマンド</font></font><code>awk { print $2 }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、IPアドレス自体を取得します。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
  10.11.112.108<font></font>
  10.11.111.70<font></font>
  10.11.97.57<font></font>
  10.11.109.72<font></font>
  10.11.116.156<font></font>
  10.11.100.221<font></font>
  10.11.96.242<font></font>
  10.11.81.68<font></font>
  10.11.99.112<font></font>
  10.11.107.120</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースファイル内の関数の名前を変更する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトで作業していて、ソースファイル内の名前の付いていない関数（またはクラス、変数など）の名前を変更したいとします。</font><font style="vertical-align: inherit;">これ</font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、元のファイルで直接置き換える</font><font style="vertical-align: inherit;">コマンド</font><font style="vertical-align: inherit;">で実行できます。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat izk/utils.py<font></font>
def bool_from_str(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/def bool_from_str/def is_affirmative/'</span> izk/utils.py<font></font>
$ cat izk/utils.py<font></font>
def is_affirmative(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">macOSでは、代わりにを</font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">してください</font></font><code>sed -i ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、元のファイルでのみ関数の名前を変更しました。</font><font style="vertical-align: inherit;">この</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数は定義されていないため、他のファイルの</font><font style="vertical-align: inherit;">インポートは中断</font><font style="vertical-align: inherit;">されます。</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト全体で</font><font style="vertical-align: inherit;">名前を変更する方法を見つける必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">コマンド</font><font style="vertical-align: inherit;">、</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ、</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはを使用</font><font style="vertical-align: inherit;">して実現できます</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a name="15"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">深化：サイクル</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>xargs</code></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクト内のすべてのオカレンスを置き換えるに</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、最初にで再帰的にそれらを見つける必要があります</font></font><code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r bool_from_str .<font></font>
./tests/test_utils.py:from izk.utils import bool_from_str<font></font>
./tests/test_utils.py:def test_bool_from_str(s, expected):<font></font>
./tests/test_utils.py:    assert bool_from_str(s) == expected<font></font>
./izk/utils.py:def bool_from_str(s):<font></font>
./izk/prompt.py:from .utils import bool_from_str<font></font>
./izk/prompt.py:                    default = bool_from_str(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一致するファイルのみに関心があるため、オプションも使用する必要があります</font></font><code>-l/--files-with-matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">-l, --files-with-matches<font></font>
        Only the names of files containing selected lines are written to standard out-<font></font>
        put.  grep will only search a file until a match has been found, making<font></font>
        searches potentially less expensive.  Pathnames are listed once per file<font></font>
        searched.  If the standard input is searched, the string ``(standard input)<span class="hljs-string">''</span>
        is written.</code></pre><br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str .<font></font>
./tests/test_utils.py<font></font>
./izk/utils.py<font></font>
./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、コマンド</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">、出力の各行（つまり、行を含むすべてのファイル</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">からアクションを実行できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str . | \<font></font>
  xargs -n 1 sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このオプション</font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、出力の各行が個別のコマンドを実行する必要があることを示してい</font><font style="vertical-align: inherit;">ます</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、次のコマンドが実行されます。</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
呼び出すコマンド</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（この場合</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が複数の引数をサポート</font><font style="vertical-align: inherit;">している場合</font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、パフォーマンスのために</font><font style="vertical-align: inherit;">引数</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">破棄する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">grep -r --files-with-matches bool_from_str . | xargs sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドが実行されます</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py ./izk/utils.py ./izk/prompt.py</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manページの</font><font style="vertical-align: inherit;">概要から、</font><font style="vertical-align: inherit;">チームはいくつかの議論をすることができることがわかります。</font></font><br>
<br>
<pre><code class="bash hljs">SYNOPSIS<font></font>
     sed [-Ealn] <span class="hljs-built_in">command</span> [file ...]<font></font>
     sed [-Ealn] [-e <span class="hljs-built_in">command</span>] [-f command_file] [-i extension] [file ...]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、前の章で見た</font></font><code>file ...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように、それはファイル名であるいくつかの引数が受け入れられる</font><font style="vertical-align: inherit;">ことを</font><font style="vertical-align: inherit;">意味します。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
置換はすべての発生に対して行われることがわかり</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r is_affirmative .<font></font>
./tests/test_utils.py:from izk.utils import is_affirmative<font></font>
./tests/test_utils.py:def test_is_affirmative(s, expected):<font></font>
./tests/test_utils.py:    assert is_affirmative(s) == expected<font></font>
./izk/utils.py:def is_affirmative(s):<font></font>
./izk/prompt.py:from .utils import is_affirmative<font></font>
./izk/prompt.py:                    default = is_affirmative(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よくあることですが、同じ結果を得るにはいくつかの方法があります。</font><font style="vertical-align: inherit;">代わりに、</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">してリストの行を反復処理し、各項目に対してアクションを実行できます。</font><font style="vertical-align: inherit;">これらのループの構文は次のとおりです。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">command</span> <span class="hljs-variable">$item</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々は、コマンドをラップした場合</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font></font><code>$()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、シェルはそれを実行します</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブシェル</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その後、ループ内で繰り返される、その結果を</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> $(grep -r --files-with-matches bool_from_str .); <span class="hljs-keyword">do</span>
  sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> <span class="hljs-variable">$file</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドが実行されます</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ループ構文</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はそれより私には明確に見え</font><font style="vertical-align: inherit;">ます</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、後者はパラメーターを使用してコマンドを並列に実行できます</font></font><code>-P n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ここ</font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、は同時に実行される並列コマンドの最大数であり、これによりパフォーマンスが向上します。</font></font><br>
<br>
<a name="16"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのツールはすべて、データの抽出と変換を可能にし、チームでの作業を意図したものではない可能性があるチームからのパイプライン全体を作成できるため、可能性の全世界を切り開きます。それぞれが比較的小さな機能（ソート</font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、結合</font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、フィルター</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、編集</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、カット</font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）を実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストを含むタスクは、小さなタスクのパイプラインに縮小できます。各タスクは単純なアクションを実行し、その出力を次のタスクに転送します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ログファイルに一意のIPアドレスがいくつあるかを知りたい場合、これらのIPアドレスが常に同じ列に表示されるようにするには、次の一連のコマンドを実行します。</font></font><br>
<br>
<ul>
<li><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 文字列のパターンとIPアドレスが一致する文字列</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPアドレスの列を見つけて、それを抽出します </font></font><code>awk</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してIPアドレスのリストを並べ替える </font></font><code>sort</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隣接する重複を排除する </font></font><code>uniq</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して行数（つまり、一意のIPアドレス）を数える </font></font><code>wc -l</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのネイティブおよびサードパーティのワードプロセッシングツールがあるため、問題を解決する方法も数多くあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事の例は抜群ですが、驚くべき記事</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「コマンドラインツールはHadoopクラスターの235倍高速である可能性があります」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を読んで、</font><font style="vertical-align: inherit;">これらのコマンドが実際にどれほど有用で強力であるか、そして実際の問題は何かを理解することをお勧めします彼らが決めることができます。</font></font><br>
<br>
<a name="17"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次は何ですか</font></font></h1><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホームディレクトリにあるファイルとディレクトリの数を数えます。</font></font><br>
</li>
<li>     .<br>
</li>
<li>,       .<br>
</li>
<li>    .         .</li>
</ol><br>
<hr><br>
<i>  «        » (Essential Tools and Practices for the Aspiring Software Developer)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>            ,     .    ,    ,   ,       ,      <code>git</code>,  SQL,   <code>Make</code>, <code>jq</code>   ,   ,          .<br>
<br>
    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>!</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja492910/index.html">Cannyコントローラーによるステッピングモーター制御</a></li>
<li><a href="../ja492914/index.html">リモートの従業員、またはホームオフィスのセキュリティを保護する方法</a></li>
<li><a href="../ja492918/index.html">教皇：AIと無人車両の倫理</a></li>
<li><a href="../ja492920/index.html">チェコ共和国での検疫：内部の様子</a></li>
<li><a href="../ja492924/index.html">（地球物理学）モデルを視覚化してアニメーション化する方法。視覚化の有益性</a></li>
<li><a href="../ja492934/index.html">音声アシスタントを育てるのが難しい。言語学者と開発者の見た目</a></li>
<li><a href="../ja492938/index.html">テスト環境のポータル、または私たちの開発を保存</a></li>
<li><a href="../ja492940/index.html">Charles Proxyに飛び込む</a></li>
<li><a href="../ja492942/index.html">リモート作業に関するOntol（=最も有用）[100件以上の記事のコンパイル]</a></li>
<li><a href="../ja492946/index.html">Коронавирус: как мы себя обманываем</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>