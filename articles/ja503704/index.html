<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤽🏻 🍺 👩🏿‍🍳 100のアプリケーションの起動の代わりに-1つの自動テスト、またはQAエンジニアを20年の寿命で救う方法 🔴 🙋 👨🏼‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは。私の名前はエフゲニーデミデンコです。過去数年間、私はPixonicで自動ゲームテストシステムを開発してきました。今日、私は、War Robotsプロジェクトでこのようなシステムを開発、サポート、および使用した経験を共有したいと思いました。
 
 まず、このシステムで自動化してい...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>100のアプリケーションの起動の代わりに-1つの自動テスト、またはQAエンジニアを20年の寿命で救う方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/503704/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは。私の名前はエフゲニーデミデンコです。過去数年間、私はPixonicで自動ゲームテストシステムを開発してきました。今日、私は、War Robotsプロジェクトでこのようなシステムを開発、サポート、および使用した経験を共有したいと思いました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、このシステムで自動化しているものを理解します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、これらは回帰UIテスト、コアゲームプレイのテスト、およびベンチマークの自動化です。 3つのシステムはすべて、リリース前のQA部門の負担を軽減し、大規模で詳細なリファクタリングに自信を持ち、アプリケーションとその個々の部分のパフォーマンスの全体的な評価を常に維持できるようにします。もう1つ注意したいのは、ルーチンの自動化です。たとえば、仮説のテストです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x-/p8/li/x-p8lisenhooudwb_qghpki8oew.gif" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつか番号を挙げます。現在、War Robots用に600以上のUIテストと約100のコアテストが記述されています。このプロジェクトだけでも、テストスクリプトを約100万回起動し、それぞれに約80秒かかりました。これらのシナリオを手動で確認した場合、少なくともそれぞれ5分は費やしたことになります。さらに、70万以上のベンチマークを開始しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラットフォームのうち、AndroidとiOSを使用しています-公園内のデバイスは12台のみです。システムの開発とサポートには2人のプログラマーが関与しており、1人のQAエンジニアがテストの作成と分析を行っています。</font></font><br>
<br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/uf/yw/0w/ufyw0wcb6rt75dkydnmcqfg2zly.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/yt/x1/9g/ytx19guugufvzvniufmworpua6e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソフトウェアスタックについては、データベースでNUnitを使用していますが、単体テストではなく、統合テストとシステムテストに使用しています。</font><font style="vertical-align: inherit;">コアゲームプレイとビルド検証テストでは、Unityの組み込みソリューション-Unity Test Toolsを使用します。</font><font style="vertical-align: inherit;">これらのテスト後のレポートの作成と分析には、YandexのAllureテストレポートと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TeamCityを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">ます。これは、アプリケーションのビルド、サーバーの展開、およびテストの継続的な統合システム</font><font style="vertical-align: inherit;">として使用され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ネクサスリポジトリとPostgreSQLデータベースを使用して、アーティファクトを保存します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/3q/mo/u63qmozjx0tp1pcl6ym9ykqnrwa.jpeg"><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストを作成、分析、実行する方法</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゲーム設定ウィンドウで、サウンドのオン/オフを切り替えるアイコンをチェックする簡単なテストを作成するとします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、テストを作成し、テストリポジトリの特定のブランチにコミットしました。実行するテスト、実行するビルド、またはビルドがアセンブルされる特定のコミットを選択しました。ここでテストを実行し、しばらく待って結果を取得します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yh/lh/zh/yhlhzh-ks_cwipqs8r0rz6sgcdk.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/58/g2/vc/58g2vcabu81mbxprwuoalnf9p34.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、575のテストが開始され、そのうち97％が成功しました。すべてのテストを完了するのに約3時間かかりました。比較のために、同じテストを手動で実行した場合、少なくとも50時間の連続操作が必要になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では、失敗したテストの3％はどうなりましたか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のテストを開くと、スクリーンショットの照合中にエラーが発生したというメッセージが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/ae/tl/skaetlvcp3-ivmp5aqkzhmolbac.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、その時点でデバイス上にあったスクリーンショットを開くと、オリジナルに対応しないゾーンが赤いピクセルでマークされていることがわかります。</font><font style="vertical-align: inherit;">比較のために、彼にあげます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/am/h2/vn/amh2vnpzgkyhqtkrfsnski3y1sy.png"><br>
<br>
<img src="https://habrastorage.org/webt/s3/7o/zl/s37ozlopkihi4vpcpwrbslws05i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然、この後、QAエンジニアは、ビルドの動作がゲームデザインドキュメントに対応しないバグを作成するか、ゲームデザインドキュメントが変更されたため、元のスクリーンショットを更新する必要があります。これらの要素はゲームに含まれなくなります。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">かっこいいですね。</font><font style="vertical-align: inherit;">なぜこれがすべて必要なのですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し前に、War Robotsプロジェクトで、1つの小さなリファクタリングを実行する必要がありました。</font><font style="vertical-align: inherit;">これは、武器、特に機関銃を発射するためのコードの一部を書き換えることで構成されていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テスト中に、興味深いニュアンスが1つ見つかりました。機関銃の速度はFPSに直接依存していました。このようなバグは、手動テスト中に検出するのは非現実的です。1つ目は、プロジェクトの損傷のネットワーク計算機能により、2つ目は、War Robotsアプリケーションがかなり最適化されており、その時点ですべて実行されていたためです。ほぼ同じFPSのデバイス-30フレーム/秒。もちろん、多少のずれはありましたが、手動テスト中に発砲した武器によるダメージの増加に気づくには不十分でした。それから私たちは自分自身に尋ねました：そのようなバグはまだいくつありますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストの数を減らしたくはなく、むしろ増やしました。大幅な更新とコンテンツ数の増加を計画していたため、水平方向に拡大してQA部門の従業員数を増やしたくありませんでした。</font><font style="vertical-align: inherit;">その代わりに、現在の従業員の日常業務を減らし、新しいコンテンツの統合テスト中に彼らの生活を楽にする垂直成長を計画しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/yf/_w/shyf_wvrx43ugfrojh0q57lozoa.jpeg"><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用するツール</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストの自動化を始めたとき、まず最初に、当時Unityに組み込まれていたUnity Integration Test Toolsに注目しました。いくつかのUIとコアテストを記述し、以前に開始したリファクタリングを完了しましたが、ソリューションは既に機能しているため、想定が正しかったため、次に進む必要がありました。このソリューションの唯一の欠点は、私たちにとって非常に重要ですが、テストをモバイルデバイスで実行できないことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、私たちはAppiumフレームワークを使用するというアイデアを思いつきました。これは、別の有名なテストフレームワーク-Seleniumの分岐です。これは、おそらくWebアプリケーションをテストするための最も有名なフレームワークであり、その主な概念は、UI要素を操作し、それらの座標を取得して、これらのUI要素への入力を整理することです。 Appiumはこのコンセプトを採用し、Seleniumの既存のWebドライバーに加えて、iOSおよびAndroidドライバーも追加しました。これらのドライバーは、これらのプラットフォームごとにネイティブテストフレームワークを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UnityにはネイティブUI要素がなく、画像がレンダリングされるUI要素は1つしかないため、シーン階層の操作、シーンオブジェクトの取得などを可能にするAppium UnityDriverに加えて追加する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その瞬間、QAエンジニアは既にプロジェクトに参加していて、物事が流れ始め、テストシナリオの数は大幅に増え始めました。私たちはそれらをデバイス上で起動し始めました、そして、一般的に、私たちの仕事はすでに私たちが望む方法を探していました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将来的には、UIテストに加えて、システムに基づくより多くのコアテストやその他のツールが登場し始め、その結果、さまざまなデバイスでパフォーマンスと作業の品質に遭遇し、さらにいくつかのデバイスのサポート、並列テスト、およびAppiumを放棄しました独自のフレームワークの利点。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lv/mn/sv/lvmnsvmwhtnp3ewe2mpofdem-e4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちと一緒に残った唯一の問題は、UI階層です。 UIのリファクタリングやシーンでの作業によってシーンの階層が変化した場合、テストでこれをサポートする必要があるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の革新と改訂の後、システム全体のアーキテクチャは次のようになり始めました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/52/ho/yu52hohx3nmookj9vajusrl7uyg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
War Robotsビルドを作成し、別のリポジトリにあるテストを実行し、そこで実行するパラメーターを追加して、それぞれのケースでテストの起動を構成し、すべてをリモートPCのTeamCityエージェントに送信します。 TeamCityエージェントはテストを起動し、ロボットのビルドおよび起動パラメーターを渡します。その後、テストが動作し、有線でTeamCityエージェントに接続されているデバイスと個別に「通信」します。ビルドをそれらにビルドし、実行し、特定のスクリプトを実行し、削除しますビルド、アプリケーションの再起動など。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストとアプリケーション自体が物理的に異なるデバイス（携帯電話とMac mini）で実行されるため、フレームワークであるWar Robots APIとUnity API間の通信を実装する必要がありました。</font><font style="vertical-align: inherit;">小さなUDPサーバーをアプリケーションに追加しました。これは、フレームワークからコマンドを受信し、ハンドラーを介してアプリケーションAPIおよびUnityと通信します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sq/rt/qf/sqrtqfu4f-swgarbf1zgsysocea.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのフレームワークの主なタスクは、テストの作業を整理することです。つまり、デバイスの正しい準備、完了、管理です。</font><font style="vertical-align: inherit;">特に、作業を高速化するための並列化、デバイスとスクリーンショットの正しい選択、ビルドとの通信。</font><font style="vertical-align: inherit;">テストが完了すると、フレームワークは生成されたすべてのアーティファクトを保存し、レポートを生成します。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスを選択するためのヒント</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それとは別に、テスト用のデバイスの選択に注意を払いたいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハブにはかなりの注意を払う必要があります。デバイスでベンチマークを実行する場合、特にAndroidデバイスの場合、電力が不足します。ハブは、使用するデバイスに必要な電力を提供する必要があります。別の非常に微妙な機能があります。一部のハブにはアクティブな電力があり、この電力は電力サージの後にオフになり、その後、ボタンを物理的に押すだけでオンになります。そのようなハブがあり、これは非常に不便です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスで回帰UIテストとテストロジックを実行する場合は、別のデバイスを使用しないでください。</font><font style="vertical-align: inherit;">同じデバイスを使用してください。この方法でデバイスブレーキの時間を節約し、それらを使用する利便性が向上し、すべてのデバイスでのアプリケーションの動作が同じになるため、手頃な価格で最も生産性の高いデバイスを使用してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の問題は、クラウドファームの使用です。</font><font style="vertical-align: inherit;">それらについては調査しましたが、まだ使用していません。それらの内容、コスト、テストの実行方法はこれまでにありますが、これまでのところ、社内のデバイスパークは十分にあり、私たちのリクエストに対応できます。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストレポート</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストが完了すると、魅力的なレポートが生成されます。これには、テストの作業中に作成されたすべてのアーティファクトが含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何が起こったかを分析し、テスト中にクラッシュの原因を特定するための主な「主力」はログです。まず、これらをフレームワークから収集します。フレームワークは、スクリプトの状態とこのスクリプトで何が起こったかを通知します。ログをシステム（詳細）とQAのログ（よりコンパクトで分析に便利）に分割します。また、デバイス（logcatなど）からのシステムログとUnityアプリケーションからのログも収集します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストの秋には、スクリーンショットを撮って、秋にデバイスで何が起こっていたかを理解し、クラッシュ前に何が起こったかを理解するためにビデオを録画し、サーバーのpingやifconfigの情報など、デバイスのステータスに関する最大の情報を収集しようとしますデバイスにIPがあるかどうかを理解する。</font><font style="vertical-align: inherit;">驚かれるかもしれませんが、アプリケーションを50回手動で起動すると、すべてがうまくいきますが、自動モードで5万回実行すると、デバイス上のインターネットが失われる可能性があり、テスト中は明らかになりません。秋の前後につながりがあったかどうか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセス、バッテリー電力、温度、および一般的に到達可能なすべてのリストも収集します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/du/vk/o3/duvko3ve8ep_2fsl2wcm5m129wk.jpeg"><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">良いスクリーンショットとビデオは何ですか</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し前に、QAエンジニアは、秋にスクリーンショットを撮るだけでなく、テストの特定の場所でこれらのスクリーンショットをリポジトリにあるテンプレートと比較することを提案しました。したがって、彼はテスト実行の回数を節約し、コードベースのサイズを削減することを提案しました。つまり、1つのテストでロジックとビジュアル部分をチェックできます。単体テストの概念の観点から見ると、これはあまり正確ではありません。1つのテストで複数の仮説をテストするべきではないからです。しかし、これは意図的なステップです。これらすべてを正しく分析する方法を知っているので、同様の機能を追加することにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、スクリーンショットを一致させるためのライブラリを追加することを検討しましたが、異なる解像度の画像を使用することはあまり信頼できないため、同じ解像度のデバイスで停止し、特定のしきい値とピクセルごとに画像を比較しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/er/0l/mker0lc9w32qaca97jmykzsdae8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリーンショットマッチングを使用することの非常に興味深い効果は、一部のプロセスを自動化することが難しい場合は、それが判明した限り自動化し、スクリーンショットを手動で確認することです。これはまさに、テストのローカリゼーションで行ったものです。アプリケーションのローカライズをテストするリクエストを受け取ったので、テキスト認識を可能にするライブラリの検討を始めました-しかし、これはかなり信頼性が低く、その結果、さまざまな画面を「ウォーク」してさまざまなポップを引き起こすスクリプトをいくつか作成しました。アップ、そして現時点ではスクリーンショットが作成されます。このようなスクリプトを開始する前に、デバイスのロケールを変更し、スクリプトを実行し、スクリーンショットを撮り、ロケールを再度変更して、スクリプトを再度実行します。したがって、すべてのテストは夜間に実行され、午前中にQAエンジニアが500枚のスクリーンショットを見て、どこかにローカライズに問題がないかどうかをすぐに分析できるようにします。はい、スクリーンショットを見る必要がありますが、これはデバイスのすべての画面を手動で通過するよりもはるかに高速です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリーンショットとログだけでは不十分な場合があります。デバイスで何か奇妙なことが起こり始めますが、リモートに配置されているため、そこに何が起こったかを評価することはできません。</font><font style="vertical-align: inherit;">さらに、テストが落ちる前に文字通り何が起こったのかが時々不明確な場合があります。</font><font style="vertical-align: inherit;">そのため、デバイスからビデオテストを追加しました。これは、テストの開始から始まり、落下の場合にのみ保存されます。</font><font style="vertical-align: inherit;">そのようなビデオの助けを借りて、アプリケーションのクラッシュとフリーズを追跡することは非常に便利です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tv/yi/jk/tvyijk8fgyl3_sgkyykx4tdjc2g.jpeg"><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのシステムは他に何ができますか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し前に、QAテスト部門から、手動プレイテスト中にメトリックを収集するためのツールを開発するようにという要請を受けました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはなんのためですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、QAエンジニアが手動のプレイテストの後に、アプリケーションでのFPSの動作とメモリ消費をさらに分析し、同時にこのデバイスで何が起こっているかを反映したスクリーンショットとビデオを確認するために必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当社が開発したシステムは以下のように動作しました。 QAエンジニアがデバイスでWar Robotsを起動し、プレイベンチセッションの記録（ゲームベンチのアナログ）をオンにしてプレイテストを再生し、[プレイベンチセッションの終了]をクリックすると、生成されたレポートがリポジトリに保存され、その後、このプレイテストのデータを持つエンジニアが作業に到達できましたマシンとレポートを参照してください：FPSのドローダウン、メモリ消費、デバイスで何が起こっていたのか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、War Robotsプロジェクトでのベンチマークの起動を自動化しました。基本的には、既存のベンチマークを自動的に起動するだけです。ベンチマークの結果は通常1桁です。私たちの場合、これは通常、ベンチマークあたりの平均FPSです。自動起動に加えて、別のプレイベンチセッションを追加することを決定したため、特定の数値、ベンチマークの動作だけでなく、その時点でベンチマークに何が起こったかを分析できるおかげで情報も受け取りました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プルリクエストテストについても言及する必要があります。</font><font style="vertical-align: inherit;">今回は、QAエンジニアではなく、クライアント開発チームを支援するためのものでした。</font><font style="vertical-align: inherit;">プルリクエストごとに、いわゆるビルド検証テストを実行します。</font><font style="vertical-align: inherit;">デバイスとUnityエディターの両方でこれらを実行して、ロジックのチェック作業をスピードアップできます。</font><font style="vertical-align: inherit;">また、いくつかの要素の一種の再設計やコードのリファクタリングが行われる一連のコアテストを別々のブランチで実行します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6x/xj/t8/6xxjt8np3nxlfacdadgagz-qxry.jpeg"><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他の便利な機能</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、過去数年間に出会ったいくつかの興味深い事例について詳しく説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近登場した最も興味深いケースの1つは、ボットとの戦いにおけるベンチマークです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいプロジェクトでは、Pixonic Dino Squadが、QAエンジニアがボットを使用してプレイテストを行い、同僚を待たずにいくつかの仮説をテストできるシステムを開発しました。次に、QAエンジニアは、ボットで遊べるだけでなく、ボットが互いに遊べるようにする機能も追加するように求めました。したがって、アプリケーションを起動するだけで、この時点でボットは他のボットとのプレイを開始します。同時に、すべての対話は、コンピューターをプレイするプレーヤーではなく、実際のサーバーとのネットワークです。これらすべては、ベンチマークと夜の開始のトリガーを含むプレイベンチセッションにラップされています。したがって、夜間にボットとボットの間でいくつかの戦いが始まります。このとき、FPSとメモリ消費量が書き込まれ、スクリーンショットが撮られ、ビデオが記録されます。午前中にQAエンジニアが来て、どのプレイテストが行​​われ、何が起こったのか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャリークもチェックする価値があります。</font><font style="vertical-align: inherit;">これは一種のメモリ使用量のサブ分析ですが、ここでは主に、たとえば戦闘中のガレージテクスチャの使用状況を確認します。</font><font style="vertical-align: inherit;">したがって、バトルではガレージで使用されるアトラスが存在してはならず、バトルを終了するときに、バトルで使用されたテクスチャがメモリに残ってはなりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのシステムの興味深い副作用は、ほとんどその使用の最初から、アプリケーションのロード時間を追跡したことです。</font><font style="vertical-align: inherit;">War Robotsの場合、この時間はそれほど強くありませんが、新しいコンテンツが追加されており、このコンテンツの品質が向上しているため、絶えず成長しています。ただし、このパラメーターを管理し、常にそのサイズに注意することができます。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論の代わりに</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、私たちが知っている、そもそも解決したい問題に注目したいと思います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s3/8o/ow/s38oowcmbceqawngd_udbsvt3eq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つ目は、UIの変更です。私たちはブラックボックスで作業するため、サーバーを除いて、War Robotsアプリケーションには何も埋め込みません。つまり、QAエンジニアがテストするのと同じ方法ですべてをテストします。しかし、どういうわけか、シーンの要素にアクセスする必要があります。そして、それらを絶対パスに沿って見つけます。したがって、ステージで何かが変更された場合、特に高レベルの階層では、これらの変更を多数のテストでサポートする必要があります。残念ながら、今のところこれで何もできません。もちろん、いくつかの解決策がありますが、それらには追加の問題があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二の大きな問題はインフラです。先ほど述べたように、アプリケーションを手で50回実行すると、アプリケーションを5万回実行したときに明らかになる問題のほとんどに気付かないでしょう。手動モードで簡単に解決できる問題（たとえば、ビルドの再インストールやインターネットの再起動）は、これらのすべての問題を正しく処理し、エラーメッセージを表示し、発生する可能性があるという条件で、自動化の本当の苦痛となるでしょう。特に、ロジックが誤動作しているか、何らかのインフラストラクチャの問題が原因で、またはその他の理由で、テストが失敗した理由を特定する必要があります。ローエンドのデバイスには多くの問題があります。ビルドがない、インターネットが落ちる、デバイスがフリーズする、クラッシュする、電源が入らない、すぐに放電するなどです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ネイティブUIを操作したいのですが、現時点ではそのような機会はありません。</font><font style="vertical-align: inherit;">私たちはこれを行う方法を知っていますが、機能に対する他の要求が存在するため、これに到達することはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
個人的には、業界に存在する基準に準拠したいのですが、これは将来の計画にもあり、おそらく今年もそうです。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja503690/index.html">Kubernetesのベストプラクティス。Kubernetes Zero Downtime Cluster Upgrade</a></li>
<li><a href="../ja503696/index.html">Gears of war：機械的なアナログコンピュータが海を支配したとき</a></li>
<li><a href="../ja503698/index.html">リモートアカウンティング-ビジネス上のメリット</a></li>
<li><a href="../ja503700/index.html">2020年のReactフォームの作成</a></li>
<li><a href="../ja503702/index.html">実際にGoogle Analyticsで生データを使用する</a></li>
<li><a href="../ja503706/index.html">ロケットの打ち上げと着陸にこれらの迷惑な気象規則が必要なのはなぜですか？</a></li>
<li><a href="../ja503710/index.html">PyDoma [PyData Moscow Meetup＃12]：2020年5月26日</a></li>
<li><a href="../ja503712/index.html">Kubernetes永続ストレージソリューションのステータスとパフォーマンス</a></li>
<li><a href="../ja503716/index.html">宇宙に雲が必要ですか</a></li>
<li><a href="../ja503718/index.html">ロボット弁護士、ガベージコレクションアプリケーションなど：オンラインピザを使用したオンラインチューブハッカソンで危機を克服</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>