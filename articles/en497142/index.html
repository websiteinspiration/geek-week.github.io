<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✖️ 👨🏽‍🔧 👨🏿‍🤝‍👨🏾 How we added Harmony OS support to the inDriver Android application 🤚🏾 🏪 👨🏼‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It all started with the fact that the US Department of Commerce included Huawei in the list of companies with which it is forbidden to conduct busines...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How we added Harmony OS support to the inDriver Android application</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/indriver/blog/497142/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It all started with the fact that </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the US Department of Commerce included Huawei in the list of companies with which it is forbidden to conduct business with American companies</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Huawei's response was the Harmony OS operating system for its smartphones, and the refusal to use Google services in it. </font><font style="vertical-align: inherit;">And in order not to lose part of the market, we integrated its support in inDriver. </font><font style="vertical-align: inherit;">Although the "OS integration" sounds loud - our application, like any other written for Android, will run on Harmony, but for the full work it is necessary to replace Google services with similar Huawei ones.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/fh/pk/zm/fhpkzmbmmqxja-nsck3uaj4giak.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In inDriver, we use Google services for 3 purposes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sending push notifications;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definition of location;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google maps.</font></font></li>
</ul><br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Push Kit - send push notifications</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For starters, Huawei has some pretty good </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . But for a quick start, just use the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">step-by-step tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will not retell what is written there, I will dwell only on some points, since comments are needed here. </font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enabling the Service</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
You will be asked to set up Data Storage Location. Note that </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">you cannot change</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> it </font><b><font style="vertical-align: inherit;">later</font></b><font style="vertical-align: inherit;"> . The location does not affect the direct operation of the push, but is only a place for storing and processing data about them. </font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integrating the HMS SDK</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After you complete the integration, you will probably have problems building the project. In any case, this was the case on our Ubuntu 16.04.5 LTS build server (GNU / Linux 4.4.0-174-generic x86_64), while locally on the working Mac mini (late 2018, Mojave) everything worked fine. </font><font style="vertical-align: inherit;">
You can fix this if you add</font></font><br>
<br>
<font color="#aa0000"><code>Execution failed for task ':app:processIndriverReleaseManifest'. org.gradle.api.GradleException: ERROR: no manifest file found</code><br>
</font><br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="java hljs">agcp {<font></font>
   manifest <span class="hljs-keyword">false</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
at the end of the file </font></font><code>build.gradle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at the application level to disable the manifest for </font></font><code>agcp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. The problem here is rather that it is </font></font><code>agcp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">looking for a manifest file, but cannot find and load it, which is most likely a problem </font></font><code>agconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. At least that is how official Huawei technical support answered us. </font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuring AndroidManifest.xml</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I do not know why, but it does not say about automatic initialization, which is described </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in section 2.6 Automatic Initialization of the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> full documentation. This is necessary if you send a token to the server in the method</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNewToken</span><span class="hljs-params">(String token)</span> </span>{}</code></pre><br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sending Messages: HUAWEI Push Kit Console.</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
With it, you can check the operation of the push. An interesting fact: if you select in the console</font></font><code>Type: Notification Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, they</font></font><code>onMessageReceived(RemoteMessage message)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will immediately be displayed on the phone</font><font style="vertical-align: inherit;">bypassing the handler</font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When I set up the push, I often had to use the console. Both she and the pushes sent from the server had delays up to 30 minutes. I hope these were temporary difficulties that the developers have already dealt with.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we have two push services on our phone, but how can we organize their joint work? First you need to determine what services are available on the phone. At our place, we decided that Google services would be a priority for us. Suppose if both Google and Huawei services are available on the phone, we work with Google.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We send the status flag of services to the server with possible values:</font></font><br>
<br>
<code>- UNKNOWN</code><br>
<code>- GOOGLE</code><br>
<code>- HUAWEI</code><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkServices</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: PlayServicesState {
   <span class="hljs-keyword">val</span> googleAPI = GoogleApiAvailability.getInstance()
   <span class="hljs-keyword">when</span> (googleAPI.isGooglePlayServicesAvailable(context)) {<font></font>
       ConnectionResult.SUCCESS,<font></font>
       ConnectionResult.SERVICE_MISSING,<font></font>
       ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED,<font></font>
       ConnectionResult.SERVICE_DISABLED -&gt; <span class="hljs-keyword">return</span> PlayServicesState.GOOGLE<font></font>
   }<font></font>
   <span class="hljs-keyword">val</span> huaweiAPI = HuaweiApiAvailability.getInstance()
   <span class="hljs-keyword">when</span> (huaweiAPI.isHuaweiMobileNoticeAvailable(context)) {<font></font>
       com.huawei.hms.api.ConnectionResult.SUCCESS,<font></font>
       com.huawei.hms.api.ConnectionResult.SERVICE_MISSING,<font></font>
       com.huawei.hms.api.ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED,<font></font>
       com.huawei.hms.api.ConnectionResult.SERVICE_DISABLED -&gt; <span class="hljs-keyword">return</span> PlayServicesState.HUAWEI<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> PlayServicesState.UNKNOWN<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depending on the received value, the server will send push notifications to the corresponding service. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Organizing their work is a matter of technology. </font><font style="vertical-align: inherit;">I did just that. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Event Handling for FCM:</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppFcmListenerService</span> : <span class="hljs-type">FirebaseMessagingService</span></span>() {
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cloudMessageHandler: CloudMessageHandler = GoogleMessageHandler(<span class="hljs-keyword">this</span>)
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(message: <span class="hljs-type">RemoteMessage</span>)</span></span> {<font></font>
       cloudMessageHandler.onMessageReceived(message)<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
and HCM:</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppHmsListenerService</span> : <span class="hljs-type">HmsMessageService</span></span>() {
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cloudMessageHandler: CloudMessageHandler = HuaweiMessageHandler(<span class="hljs-keyword">this</span>)
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(message: <span class="hljs-type">RemoteMessage</span>)</span></span> {<font></font>
       cloudMessageHandler.onMessageReceived(message)<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
delegated to the abstract class:</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CloudMessageHandler</span> </span>{ 
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span> {
   <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = getData(message)<font></font>
   onMessageReceived(<span class="hljs-keyword">data</span>)<font></font>
}<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span> {
   <span class="hljs-comment">//   </span><font></font>
}<font></font>
<span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span> :  Map&lt;String, String&gt; {<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
which has two implementations: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
for FCM:</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FirebaseMessageHandler</span></span>(<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> context: Context) : CloudMessageHandler(context) {
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span>: Map&lt;String, String&gt; {
       <span class="hljs-keyword">return</span> (message <span class="hljs-keyword">as</span> RemoteMessage).<span class="hljs-keyword">data</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
for HCM:</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HuaweiMessageHandler</span></span>(<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> context: Context) : CloudMessageHandler(context) {
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span>: Map&lt;String, String&gt; {
       <span class="hljs-keyword">return</span> (message <span class="hljs-keyword">as</span> RemoteMessage).dataOfMap<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Huawei classes have an almost similar interface with Google services. </font><font style="vertical-align: inherit;">This "almost" I have personally manifested in the fact that </font></font><code>RemoteMessage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">out </font></font><code>com.google.firebase.messaging</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><code>Map&lt;String, String&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">you want to call </font></font><code>RemoteMessage.getData()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and for </font></font><code>RemoteMessage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">out </font></font><code>com.huawei.hms.push</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>getDataOfMap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Location Kit - location determination</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Locations can be dealt with </font></font><code>LOCATION_SERVICE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which is available without Google and Huawei services. </font><font style="vertical-align: inherit;">But for the passenger transportation service, accurate location determination is an important parameter. </font><font style="vertical-align: inherit;">Fortunately, the interfaces of the Location Kit classes were no different from those of the same name for Google services, so their application in the code did not differ. </font><font style="vertical-align: inherit;">However, Huawei services were less accurate in operation. </font><font style="vertical-align: inherit;">Hope this is a temporary issue. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also encountered the fact that the geolocation request is sent through the HMS Core, which means that for correct operation it is necessary to set the rights for geolocation as “Always allow”.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/c8/ia/yv/c8iayvndnzt_nx1xlouausbdhge.jpeg" alt="location" width="300"></div><br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Replacing Google Maps</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the CIS, we used an OSM engine with 2GIS tiles. </font><font style="vertical-align: inherit;">At the first stage of integration, we decided not to work with the Map Kit from HUAWEI, but simply use the OSM engine with OSM tiles. </font><font style="vertical-align: inherit;">Everything is simple.</font></font><br>
<br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before release</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I advise everyone to pay attention to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">common causes of failure</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> before launching your application in AppGallery. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, the Huawei release team informed us of the following violations. </font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Non-Standard Presentation of Hong Kong and Macau</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
China is scrupulous about the sovereignty of its autonomous administrative regions and asks them to be called "region." This forced us to change all the headings that mention the country to mention the country or region.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/w-/ei/q3/w-eiq3tg2iaewq9dyf2-plqpftg.png" width="300"></div><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Information about Third-party Competing Products in App Details</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Do not forget to rate the application by sending the user to the page in the App Gallery, not the Google Play Store :)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, Huawei services are similar to Google services and supporting them directly in the code does not cause difficulties. </font><font style="vertical-align: inherit;">Questions can only be to the Huawei “ecosystem” as a whole, but they can be attributed to its youth and with a high probability everything will be better with time.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497118/index.html">[Forecast] Will all unmanned trucks come to an end or only Starsky Robotics?</a></li>
<li><a href="../en497126/index.html">Backlog scoring and prioritization techniques</a></li>
<li><a href="../en497132/index.html">#SaveFirst Initiative to Support Socially Important Projects</a></li>
<li><a href="../en497136/index.html">“Save Concord” or a report from the tests of the Russian radar system for searching for foreign objects on the runway</a></li>
<li><a href="../en497140/index.html">Decryption of data in the CAN bus VW Polo sedan</a></li>
<li><a href="../en497144/index.html">Wedge by wedge: use of the PIV5 virus to create a vaccine against MERS-CoV and possibly against SARS-CoV-2</a></li>
<li><a href="../en497146/index.html">Applied cryptography. How we restored bitcoins for 300 thousand dollars</a></li>
<li><a href="../en497148/index.html">Creating a desktop application using Golang and Fyne</a></li>
<li><a href="../en497152/index.html">Where Product Heart Lives: Metrics for Measuring Happiness</a></li>
<li><a href="../en497154/index.html">Videos of all reports from eight Ontico conferences</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>