<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“ â™‰ï¸ ğŸŒˆ Steuern Sie ein externes GerÃ¤t im Auto mit den Tasten am Lenkrad ğŸ‘¨ğŸ¿â€ğŸš’ ğŸ ğŸ‘ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo alle zusammen. 
 
 Manchmal muss ein externes GerÃ¤t im Auto gesteuert werden, z. B. ein Videorecorder oder eine Winde. In diesem Fall werden nor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Steuern Sie ein externes GerÃ¤t im Auto mit den Tasten am Lenkrad</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505026/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo alle zusammen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal muss ein externes GerÃ¤t im Auto gesteuert werden, z. B. ein Videorecorder oder eine Winde. In diesem Fall werden normalerweise zusÃ¤tzliche SchaltflÃ¤chen installiert. Aber manchmal mÃ¶chte ich eine versteckte Installation machen, damit der Innenraum des Autos unverÃ¤ndert bleibt. Wir werden dies heute tun, als Auto wird es eine VW Polo Limousine mit einer installierten Vega MTX Ãœberwachungseinheit geben, und als Ladung wird es einen Notknopf geben. Stellen Sie sicher, dass die Notbeleuchtung dreimal blinkt, wÃ¤hrend Sie die Taste "OK" am Lenkrad gedrÃ¼ckt halten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter dem Schnitt eine groÃŸe Anzahl von Bildern und Videos.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einmal wurde ich gebeten, mich bei einem 2012er Renault Kaptur zu bedanken. Durch Klicken auf diese SchaltflÃ¤che sollte das Auto dreimal â€Notfallgruppeâ€œ blinken. Dieses Auto hatte einen analogen LenksÃ¤ulen-Joystick. Ich habe eine der Tasten am LenksÃ¤ulen-Joystick mit einem Zeitrelais verbunden, das dem Notfall-Gang-Knopf einen 3 Sekunden langen Impuls gab. SpÃ¤ter sprach der Besitzer sehr gut Ã¼ber die neue Funktion seines Autos und ich beschloss, sie auf meiner Polo-Limousine zu wiederholen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu Renault Kaptur habe ich keine analogen Tasten, aber das Signal aller Tasten am Lenkrad befindet sich im CAN-Bus. Als Taste wurde die Taste â€OKâ€œ am Lenkrad des Fahrzeugs ausgewÃ¤hlt. In meiner Konfiguration wird diese SchaltflÃ¤che fast nie verwendet. Bisher habe ich festgestellt, dass Sie damit den Betrieb des "Limiters" einstellen kÃ¶nnen, wenn der ordentliche Piepton ertÃ¶nt, wenn die eingestellte Geschwindigkeit Ã¼berschritten wird. In anderen FÃ¤llen fÃ¼hrt das Klicken auf diese SchaltflÃ¤che zu nichts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war mÃ¶glich, unsere PlÃ¤ne mit Hilfe von hausgemachter Elektronik umzusetzen, aber ich hatte bereits eine Vega MTX-Telematikeinheit in meinem Auto, daher wurde beschlossen, diese FunktionalitÃ¤t mithilfe dieser zu implementieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das DrÃ¼cken dieser Taste befindet sich im CAN-Bus, der sich hinter dem Radio befindet. Ich habe die Suche nach solchen Sensoren ausfÃ¼hrlich beschrieben</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sein vorheriger Artikel Ã¼ber das EntschlÃ¼sseln des CAN-Busses</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall wurden die Daten bei 5BF gefunden. Wenn Sie im Null-Byte auf die SchaltflÃ¤che "OK" klicken, wird die Zahl 40 im Dezimalformat angezeigt. Wenn die Tasten nicht gedrÃ¼ckt werden, ist das Null-Byte 0. Es muss ein Sensor erstellt werden, in dem diese Ã„nderungen angezeigt werden. In meinem Fall ist dies ein Knopf am Lenkrad. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j7/2b/wi/j72bwiuv_uhzh2kbt9crf7pb6tc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns nun herausfinden, wie Sie den Notfallknopf steuern kÃ¶nnen. Leider kann die Polo-Limousine die Notfallgruppe nicht Ã¼ber den CAN-Bus steuern, sodass Sie sie analog verwalten mÃ¼ssen. Dazu mÃ¼ssen Sie den Draht vom weiÃŸ-blauen Draht vom Stecker des Notfallknopfs abziehen. Wenn ein Erdungssignal mit einem Kurzzeitimpuls an dieses Kabel angelegt wird, wird die Notrufgruppe eingeschaltet. Ebenso schaltet es sich aus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Servieren Sie den "Boden" wird Ã¼ber den digitalen Ausgang Vega MTX. Hier haben wir 4 digitale AusgÃ¤nge, wir werden den dritten Ausgang (blaues Kabel) verwenden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/-o/ae/uz-oaegurh5p-8r1fczln8hiyrw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt mÃ¼ssen Sie die Algorithmen festlegen, mit denen die SchaltflÃ¤che funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens mÃ¶chte ich nicht, dass sich die Notfallgruppe sofort durch DrÃ¼cken der OK-Taste einschaltet. Ich mÃ¶chte, dass sie sich einschaltet, nachdem ich die Taste eine Sekunde lang gedrÃ¼ckt habe. Ich mache dies, um vor versehentlichem DrÃ¼cken zu schÃ¼tzen und die FunktionalitÃ¤t dieser Taste zu speichern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zweitens mÃ¼ssen Sie die Notfallgruppe nach 3 Blitzen ausschalten. 3 Blitze "Notfallbande" macht in 2 Sekunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um alle diese Algorithmen einzugeben, gehen Sie zu den Vega MTX-Einstellungen und dann zur Registerkarte "Skripte". Hier kÃ¶nnen Sie die Bedingungen festlegen, unter denen Aktionen ausgefÃ¼hrt werden. FÃ¼r die Implementierung musste ich 3 Szenarien verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen sind die Szenarien nicht fÃ¼r solche Operationen vorgesehen, daher musste ich lange experimentieren, bis das gewÃ¼nschte Ergebnis erzielt wurde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/np/tb/dmnptb-c9bmonjlmutgpskje2fs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste Szenario dient dazu, eine VerzÃ¶gerung pro Sekunde zu erzeugen, nachdem Sie auf die SchaltflÃ¤che â€OKâ€œ geklickt haben. Dies funktioniert, wenn im CAN-Sensor der Wert 40 wird und der externe Digitalausgang 1 0 ist.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0n/2-/gh/0n2-gh3y6v3d9w4p8v-wpaflbdw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier werde ich Ã¼ber externe digitale AusgÃ¤nge erklÃ¤ren. Wenn fÃ¼r die Aufgabe mehr als 4 digitale AusgÃ¤nge erforderlich sind, kann ein zusÃ¤tzliches externes Modul an Vega MTX angeschlossen werden, das Ã¼ber 15 digitale AusgÃ¤nge und viele weitere Ein- und AusgÃ¤nge verfÃ¼gt. Da wir diese externe Einheit nicht haben, kÃ¶nnen wir diese AusgÃ¤nge als Variablen verwenden und dort 0 oder 1 setzen (ein oder aus). StandardmÃ¤ÃŸig sind alle AusgÃ¤nge ausgeschaltet. Der externe Digitalausgang 1 ist eine Variable, die angibt, dass seit dem DrÃ¼cken der OK-Taste eine Sekunde vergangen ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Skript sollte folgendermaÃŸen lauten: Jetzt wird die OK-Taste gedrÃ¼ckt und weniger als eine Sekunde lang gedrÃ¼ckt. Wenn diese Bedingungen Ã¼bereinstimmen, wird die Aktion ausgefÃ¼hrt: Der externe Digitalausgang 1 wird fÃ¼r 1 Sekunde ausgeschaltet. Dies bedeutet, dass es in den "Aus" -Zustand wechselt, aber nach einer Sekunde in den "Ein" -Zustand.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/qw/v_/laqwv_wowjb0zzhvkkm9eiijnro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir nun mit dem zweiten Szenario fort. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/al/xc/gwalxcku5ectsxnsikszjeqkncu.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zum ersten Szenario funktioniert dies mit dem Sensor â€Tasten am Lenkradâ€œ von 40 und einem externen Digitaleingang von 1. Das heiÃŸt, die Taste â€OKâ€œ wird gedrÃ¼ckt und der externe Digitalausgang 1 ist 1. Der externe Digitalausgang wird erst nach einer Sekunde zu 1 nach dem AuslÃ¶sen des ersten Szenarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden wir analysieren, was passiert, nachdem das zweite Szenario ausgelÃ¶st wurde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-n/vw/mp/-nvwmpbzqfua5nwiizr2llgqgyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier wird ein Impuls von 1 Sekunde LÃ¤nge an den Digitalausgang 3 gegeben, an den der Ausgang des Notfall-Gang-Buttons angeschlossen ist, wodurch wir ihn einschalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach mÃ¼ssen wir den externen Digitalausgang 1 auf 0 zurÃ¼cksetzen. Daher schalten wir den externen Digitalausgang 1 fÃ¼r 1 Sekunde ein. Das heiÃŸt, 1 Sekunde nach dem AuslÃ¶sen des Skripts wird der externe digitale Ausgang 1 zu 0.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der letzte Punkt, wir Ã¼bertragen 2 Sekunden 15 auf Position 0. Nach 2 Sekunden nach dem AuslÃ¶sen des Skripts ist der externe Digitalausgang 15 1. Der externe Digitalausgang 15 wird als Variable verwendet, dass das Notlicht mit der Taste am Lenkrad eingeschaltet wurde. 2 Sekunden ist die Zeit, in der das Auto dreimal â€Notfallgruppeâ€œ blinkt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun das letzte Szenario, das einen Impuls senden sollte, um die Notfallbande auszuschalten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vy/g1/or/vyg1orbca6pqu-u3ufjcjr20ism.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Szenario funktioniert, wenn der externe digitale Ausgang 15 1 wird, dh 2 Sekunden nach dem AuslÃ¶sen des zweiten Szenarios. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0m/ke/8n/0mke8ngoswhi9jn9ject-paeftw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem das dritte Skript ausgelÃ¶st wurde, senden wir einen Impuls zum Ausschalten der Notfallgruppe und setzen den externen Digitalausgang 15 auf Null (Aus) zurÃ¼ck.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies beendet die Arbeit mit Skripten, speichert das Ergebnis in Vega MTX und Ã¼berprÃ¼ft den Betrieb des GerÃ¤ts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So kÃ¶nnen Sie jedes GerÃ¤t Ã¼ber den CAN-Bus des Fahrzeugs steuern. </font><font style="vertical-align: inherit;">Die Verwaltung ist nicht auf Tasten am Lenkrad beschrÃ¤nkt. </font><font style="vertical-align: inherit;">Sie kÃ¶nnen das GerÃ¤t beispielsweise so einstellen, dass es sich nach Fahrzeuggeschwindigkeit, Ã–ffnen eines Fensters oder einer TÃ¼r, Starten des Motors, Motordrehzahl, Motortemperatur usw. einschaltet. </font><font style="vertical-align: inherit;">Sie kÃ¶nnen die TÃ¼ren mit einer bestimmten Geschwindigkeit verriegeln (wenn der Hersteller keine solche Gelegenheit geboten hat), die Kamera beim Ã–ffnen des Fensters einschalten und viele andere Optionen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles oben Genannte ist im Videoformat, und es gibt auch ein Beispiel fÃ¼r die Aktivierung von Notlichtern beim RÃ¼ckwÃ¤rtsgang.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/70KNs2freow" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de504988/index.html">Interview mit Analyst - Denis Sobolev, Produktmanager, Leiter B2B Analytics Skyeng</a></li>
<li><a href="../de504996/index.html">BazarBackdoor: Neuer Einstiegspunkt in Unternehmenssysteme</a></li>
<li><a href="../de505016/index.html">Kostenlose Bildungskurse: Verwaltung</a></li>
<li><a href="../de505018/index.html">Wie Selen funktioniert: Episoden 1 - 2</a></li>
<li><a href="../de505024/index.html">YouTrack jetzt mit einer Wissensbasis</a></li>
<li><a href="../de505034/index.html">LED-Alterungstest</a></li>
<li><a href="../de505036/index.html">Avalonia Tutorial: Schrittweise Implementierung von MVVM mit Beispielen</a></li>
<li><a href="../de505046/index.html">Was haben erstklassige Inhalte und Pub Rock gemeinsam? Die Geschichte des â€Scheiternsâ€œ eines Projekts, das zum Erfolg fÃ¼hrte</a></li>
<li><a href="../de505052/index.html">Schnelltests von Motionia.js und Consoleimg.js</a></li>
<li><a href="../de505060/index.html">FÃ¼gen Sie das numpy-Array Ã¼ber Python in die MySQL-Datenbank ein</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>