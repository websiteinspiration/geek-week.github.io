<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📍 ♉️ 🌈 Steuern Sie ein externes Gerät im Auto mit den Tasten am Lenkrad 👨🏿‍🚒 🐁 👏🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo alle zusammen. 
 
 Manchmal muss ein externes Gerät im Auto gesteuert werden, z. B. ein Videorecorder oder eine Winde. In diesem Fall werden nor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Steuern Sie ein externes Gerät im Auto mit den Tasten am Lenkrad</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505026/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo alle zusammen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal muss ein externes Gerät im Auto gesteuert werden, z. B. ein Videorecorder oder eine Winde. In diesem Fall werden normalerweise zusätzliche Schaltflächen installiert. Aber manchmal möchte ich eine versteckte Installation machen, damit der Innenraum des Autos unverändert bleibt. Wir werden dies heute tun, als Auto wird es eine VW Polo Limousine mit einer installierten Vega MTX Überwachungseinheit geben, und als Ladung wird es einen Notknopf geben. Stellen Sie sicher, dass die Notbeleuchtung dreimal blinkt, während Sie die Taste "OK" am Lenkrad gedrückt halten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter dem Schnitt eine große Anzahl von Bildern und Videos.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einmal wurde ich gebeten, mich bei einem 2012er Renault Kaptur zu bedanken. Durch Klicken auf diese Schaltfläche sollte das Auto dreimal „Notfallgruppe“ blinken. Dieses Auto hatte einen analogen Lenksäulen-Joystick. Ich habe eine der Tasten am Lenksäulen-Joystick mit einem Zeitrelais verbunden, das dem Notfall-Gang-Knopf einen 3 Sekunden langen Impuls gab. Später sprach der Besitzer sehr gut über die neue Funktion seines Autos und ich beschloss, sie auf meiner Polo-Limousine zu wiederholen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu Renault Kaptur habe ich keine analogen Tasten, aber das Signal aller Tasten am Lenkrad befindet sich im CAN-Bus. Als Taste wurde die Taste „OK“ am Lenkrad des Fahrzeugs ausgewählt. In meiner Konfiguration wird diese Schaltfläche fast nie verwendet. Bisher habe ich festgestellt, dass Sie damit den Betrieb des "Limiters" einstellen können, wenn der ordentliche Piepton ertönt, wenn die eingestellte Geschwindigkeit überschritten wird. In anderen Fällen führt das Klicken auf diese Schaltfläche zu nichts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war möglich, unsere Pläne mit Hilfe von hausgemachter Elektronik umzusetzen, aber ich hatte bereits eine Vega MTX-Telematikeinheit in meinem Auto, daher wurde beschlossen, diese Funktionalität mithilfe dieser zu implementieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Drücken dieser Taste befindet sich im CAN-Bus, der sich hinter dem Radio befindet. Ich habe die Suche nach solchen Sensoren ausführlich beschrieben</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sein vorheriger Artikel über das Entschlüsseln des CAN-Busses</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall wurden die Daten bei 5BF gefunden. Wenn Sie im Null-Byte auf die Schaltfläche "OK" klicken, wird die Zahl 40 im Dezimalformat angezeigt. Wenn die Tasten nicht gedrückt werden, ist das Null-Byte 0. Es muss ein Sensor erstellt werden, in dem diese Änderungen angezeigt werden. In meinem Fall ist dies ein Knopf am Lenkrad. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j7/2b/wi/j72bwiuv_uhzh2kbt9crf7pb6tc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns nun herausfinden, wie Sie den Notfallknopf steuern können. Leider kann die Polo-Limousine die Notfallgruppe nicht über den CAN-Bus steuern, sodass Sie sie analog verwalten müssen. Dazu müssen Sie den Draht vom weiß-blauen Draht vom Stecker des Notfallknopfs abziehen. Wenn ein Erdungssignal mit einem Kurzzeitimpuls an dieses Kabel angelegt wird, wird die Notrufgruppe eingeschaltet. Ebenso schaltet es sich aus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Servieren Sie den "Boden" wird über den digitalen Ausgang Vega MTX. Hier haben wir 4 digitale Ausgänge, wir werden den dritten Ausgang (blaues Kabel) verwenden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/-o/ae/uz-oaegurh5p-8r1fczln8hiyrw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen Sie die Algorithmen festlegen, mit denen die Schaltfläche funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens möchte ich nicht, dass sich die Notfallgruppe sofort durch Drücken der OK-Taste einschaltet. Ich möchte, dass sie sich einschaltet, nachdem ich die Taste eine Sekunde lang gedrückt habe. Ich mache dies, um vor versehentlichem Drücken zu schützen und die Funktionalität dieser Taste zu speichern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zweitens müssen Sie die Notfallgruppe nach 3 Blitzen ausschalten. 3 Blitze "Notfallbande" macht in 2 Sekunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um alle diese Algorithmen einzugeben, gehen Sie zu den Vega MTX-Einstellungen und dann zur Registerkarte "Skripte". Hier können Sie die Bedingungen festlegen, unter denen Aktionen ausgeführt werden. Für die Implementierung musste ich 3 Szenarien verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen sind die Szenarien nicht für solche Operationen vorgesehen, daher musste ich lange experimentieren, bis das gewünschte Ergebnis erzielt wurde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/np/tb/dmnptb-c9bmonjlmutgpskje2fs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste Szenario dient dazu, eine Verzögerung pro Sekunde zu erzeugen, nachdem Sie auf die Schaltfläche „OK“ geklickt haben. Dies funktioniert, wenn im CAN-Sensor der Wert 40 wird und der externe Digitalausgang 1 0 ist.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0n/2-/gh/0n2-gh3y6v3d9w4p8v-wpaflbdw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier werde ich über externe digitale Ausgänge erklären. Wenn für die Aufgabe mehr als 4 digitale Ausgänge erforderlich sind, kann ein zusätzliches externes Modul an Vega MTX angeschlossen werden, das über 15 digitale Ausgänge und viele weitere Ein- und Ausgänge verfügt. Da wir diese externe Einheit nicht haben, können wir diese Ausgänge als Variablen verwenden und dort 0 oder 1 setzen (ein oder aus). Standardmäßig sind alle Ausgänge ausgeschaltet. Der externe Digitalausgang 1 ist eine Variable, die angibt, dass seit dem Drücken der OK-Taste eine Sekunde vergangen ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Skript sollte folgendermaßen lauten: Jetzt wird die OK-Taste gedrückt und weniger als eine Sekunde lang gedrückt. Wenn diese Bedingungen übereinstimmen, wird die Aktion ausgeführt: Der externe Digitalausgang 1 wird für 1 Sekunde ausgeschaltet. Dies bedeutet, dass es in den "Aus" -Zustand wechselt, aber nach einer Sekunde in den "Ein" -Zustand.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/qw/v_/laqwv_wowjb0zzhvkkm9eiijnro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir nun mit dem zweiten Szenario fort. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/al/xc/gwalxcku5ectsxnsikszjeqkncu.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zum ersten Szenario funktioniert dies mit dem Sensor „Tasten am Lenkrad“ von 40 und einem externen Digitaleingang von 1. Das heißt, die Taste „OK“ wird gedrückt und der externe Digitalausgang 1 ist 1. Der externe Digitalausgang wird erst nach einer Sekunde zu 1 nach dem Auslösen des ersten Szenarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden wir analysieren, was passiert, nachdem das zweite Szenario ausgelöst wurde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-n/vw/mp/-nvwmpbzqfua5nwiizr2llgqgyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier wird ein Impuls von 1 Sekunde Länge an den Digitalausgang 3 gegeben, an den der Ausgang des Notfall-Gang-Buttons angeschlossen ist, wodurch wir ihn einschalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach müssen wir den externen Digitalausgang 1 auf 0 zurücksetzen. Daher schalten wir den externen Digitalausgang 1 für 1 Sekunde ein. Das heißt, 1 Sekunde nach dem Auslösen des Skripts wird der externe digitale Ausgang 1 zu 0.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der letzte Punkt, wir übertragen 2 Sekunden 15 auf Position 0. Nach 2 Sekunden nach dem Auslösen des Skripts ist der externe Digitalausgang 15 1. Der externe Digitalausgang 15 wird als Variable verwendet, dass das Notlicht mit der Taste am Lenkrad eingeschaltet wurde. 2 Sekunden ist die Zeit, in der das Auto dreimal „Notfallgruppe“ blinkt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun das letzte Szenario, das einen Impuls senden sollte, um die Notfallbande auszuschalten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vy/g1/or/vyg1orbca6pqu-u3ufjcjr20ism.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Szenario funktioniert, wenn der externe digitale Ausgang 15 1 wird, dh 2 Sekunden nach dem Auslösen des zweiten Szenarios. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0m/ke/8n/0mke8ngoswhi9jn9ject-paeftw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem das dritte Skript ausgelöst wurde, senden wir einen Impuls zum Ausschalten der Notfallgruppe und setzen den externen Digitalausgang 15 auf Null (Aus) zurück.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies beendet die Arbeit mit Skripten, speichert das Ergebnis in Vega MTX und überprüft den Betrieb des Geräts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So können Sie jedes Gerät über den CAN-Bus des Fahrzeugs steuern. </font><font style="vertical-align: inherit;">Die Verwaltung ist nicht auf Tasten am Lenkrad beschränkt. </font><font style="vertical-align: inherit;">Sie können das Gerät beispielsweise so einstellen, dass es sich nach Fahrzeuggeschwindigkeit, Öffnen eines Fensters oder einer Tür, Starten des Motors, Motordrehzahl, Motortemperatur usw. einschaltet. </font><font style="vertical-align: inherit;">Sie können die Türen mit einer bestimmten Geschwindigkeit verriegeln (wenn der Hersteller keine solche Gelegenheit geboten hat), die Kamera beim Öffnen des Fensters einschalten und viele andere Optionen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles oben Genannte ist im Videoformat, und es gibt auch ein Beispiel für die Aktivierung von Notlichtern beim Rückwärtsgang.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/70KNs2freow" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de504988/index.html">Interview mit Analyst - Denis Sobolev, Produktmanager, Leiter B2B Analytics Skyeng</a></li>
<li><a href="../de504996/index.html">BazarBackdoor: Neuer Einstiegspunkt in Unternehmenssysteme</a></li>
<li><a href="../de505016/index.html">Kostenlose Bildungskurse: Verwaltung</a></li>
<li><a href="../de505018/index.html">Wie Selen funktioniert: Episoden 1 - 2</a></li>
<li><a href="../de505024/index.html">YouTrack jetzt mit einer Wissensbasis</a></li>
<li><a href="../de505034/index.html">LED-Alterungstest</a></li>
<li><a href="../de505036/index.html">Avalonia Tutorial: Schrittweise Implementierung von MVVM mit Beispielen</a></li>
<li><a href="../de505046/index.html">Was haben erstklassige Inhalte und Pub Rock gemeinsam? Die Geschichte des „Scheiterns“ eines Projekts, das zum Erfolg führte</a></li>
<li><a href="../de505052/index.html">Schnelltests von Motionia.js und Consoleimg.js</a></li>
<li><a href="../de505060/index.html">Fügen Sie das numpy-Array über Python in die MySQL-Datenbank ein</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>