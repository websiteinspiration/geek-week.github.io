<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôÄÔ∏è ‚öîÔ∏è üôÅ ¬øHab√≠a vida antes de un CD de audio? Decodificador de software PCM üë®üèø üöë ‚ùî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En el √∫ltimo art√≠culo, hablamos sobre c√≥digos QR din√°micos que se grabaron en cintas VHS. La epidemia de PCM tambi√©n me atrap√≥, as√≠ que es hora de ele...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>¬øHab√≠a vida antes de un CD de audio? Decodificador de software PCM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497946/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√∫ltimo art√≠culo,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hablamos sobre c√≥digos QR din√°micos que se grabaron en cintas VHS. </font><font style="vertical-align: inherit;">La epidemia de PCM tambi√©n me atrap√≥, as√≠ que es hora de elegir este formato.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5q/yw/xq/5qywxqy8gm11ivsraheotf1t5lq.png" alt="Capture con un procesador PCM"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la primera etapa, intentaremos implementar un decodificador de software. Este no es el √∫ltimo art√≠culo sobre este tema, ya que en las subastas japonesas los procesadores pueden terminar, ¬°y PCM deber√≠a estar en cada hogar! </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encontrar un reproductor de video no es un problema.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para trabajar, necesita un archivo con la grabaci√≥n de estos mismos c√≥digos QR. Puede obtenerlo usando la tarjeta de captura de video. Bueno, la fuente de se√±al, por supuesto. Puede capturar directamente la salida del procesador o grabar en una grabadora de cinta. Idealmente, trabaje inmediatamente con el dispositivo de captura para decodificar la se√±al en tiempo real.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cualquier idioma servir√°. Empec√© con Python. Pero result√≥ ser bastante lento en mi computadora port√°til, por lo que cambi√© a C ++. Por cierto, independientemente uno del otro (casi) nuestra peque√±a comunidad est√° desarrollando 3 proyectos de decodificadores: en OpenCV (C ++), en Qt (C ++) y en LabView. El primero ser√° discutido. Se eligi√≥ OpenCV debido a la simplicidad de trabajar con dispositivos de captura y videos pregrabados. Adem√°s, todas las manipulaciones con la imagen est√°n altamente optimizadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primer problema que encontrar√° es la p√©rdida de datos. En cualquier caso, se evitar√°n y no se pueden evitar de ninguna manera sin un equipo "especializado". PCM usa m√°s l√≠neas de las que caben en el √°rea visible del marco. En el caso de la regi√≥n NTSC, este n√∫mero es de 492 l√≠neas por cuadro con un √°rea visible de 480. En el caso de PAL, todo es mucho m√°s triste.</font></font><br>
<blockquote>  1. PCM    NTSC    44,056 kHz,   PAL   44,1 kHz.</blockquote> <blockquote>  2.           VHS   .       (   ).      ,      . ,            .  ,        .  .</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay dos soluciones para este problema. Trabaje con la tarjeta de captura de una manera complicada sin pasar por el controlador y tome datos del ADC, despu√©s de lo cual se pueden convertir a un marco PCM completo o martillar en las l√≠neas que faltan. La segunda opci√≥n suena un poco salvaje, pero el formato de almacenamiento de datos le permite recuperar parte de los datos. En el caso de la regi√≥n NTSC, resulta que cumple con las limitaciones del sistema de correcci√≥n de errores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debido al uso de l√≠neas de servicio, no puede tomar una tarjeta de video con una salida compuesta y hacer que se reproduzca el procesador PCM. Iron ignorar√° todo el cuadro si no encuentra el t√≠tulo en una l√≠nea espec√≠fica. Hay un par de pensamientos sobre este tema, pero sobre esto de alguna manera m√°s adelante.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para empezar, la se√±al de video est√° entrelazada. Cada cuadro contiene, por as√≠ decirlo, dos, compuestos de l√≠neas pares e impares. Se llaman campos. Es con los campos que funciona el procesador PCM. Por lo tanto, tambi√©n necesitamos dividir la secuencia original. Justo antes de eso, ser√≠a bueno convertir una imagen en blanco y negro (escala de grises) a binaria para que sea m√°s f√°cil trabajar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este punto, encontramos tres dificultades asociadas con las caracter√≠sticas de los dispositivos de captura de video. No puede usar un umbral est√°tico para binarizar una imagen. Pero OpenCV en s√≠ mismo resuelve este problema, con la ayuda del cual obtenemos un resultado bastante decente con una l√≠nea m√°gica.</font></font><br>
<br>
<pre><code class="cpp hljs">threshold(greyFrame, fullFrame, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, THRESH_BINARY + THRESH_OTSU);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo problema es, de repente, el color. Los procesadores PCM no usan el componente de color de la se√±al de video, pero las tarjetas de captura pueden intentar extraerlo del ruido. Esto es especialmente notable en el EasyCAP m√°s barato. Esto puede estropear un poco el resultado de la binarizaci√≥n, por lo que primero debe convertir la imagen a tonos de gris.</font></font><br>
<br>
<pre><code class="cpp hljs">cvtColor(srcFrame, greyFrame, CV_BGR2GRAY);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de lo anterior, EasyCAP logra confundir los campos en algunos lugares. M√°s precisamente, omite la primera l√≠nea, debido a que todas las dem√°s l√≠neas no est√°n en su lugar. Para grabar una matin√© del jard√≠n de ni√±os, esto no es muy importante, pero aqu√≠ ya se convierte en un problema. Organizar l√≠neas en el orden correcto es bastante f√°cil. Al final de cada cuadro hay un √°rea sin datos. Si movemos las l√≠neas que contienen la se√±al √∫til hasta la parada, se garantiza que los campos volver√°n a sus lugares. Al estudiar, intent√© usar tres dispositivos de captura de diferentes rangos de precios, pero al final el m√°s √∫til result√≥ ser el m√°s barato, ya que revel√≥ una serie de problemas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yy/rg/rg/yyrgrgxhp3qrb1lho4kpmor3hti.png" alt="Captura EasyCAP de videocasete"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se pueden observar manchas de color y un mayor nivel de brillo de los bits de datos en la imagen en comparaci√≥n con la primera ilustraci√≥n de un art√≠culo capturado en el Magewell Pro Capture AIO.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hora de recordar en qu√© se almacena la se√±al. Las grabadoras de cinta VHS no difieren en calidad especial, ya que este es un formato dom√©stico. Los pulsos de sincronizaci√≥n de trama y l√≠nea por s√≠ solos no son suficientes para un funcionamiento estable. Por lo tanto, se agregan marcas de sincronizaci√≥n adicionales a la se√±al de video. Cada l√≠nea al principio tiene una secuencia de alternar dos "p√≠xeles" blancos y dos negros, y al final de la l√≠nea hay un √°rea peque√±a con brillo m√°ximo que ajusta el AGC. Los bits de datos tienen un brillo del 60% del m√°ximo para 1 y menos del 20% para 0. Aqu√≠ hay un ejemplo de por qu√© estas etiquetas son necesarias: inversi√≥n de la imagen desde los casetes al principio y al final del marco. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/nb/fe/ennbfefb-kuattynm437n8a7lh8.png" alt="Giros al comienzo del cuadro"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg√∫n las marcas de sincronizaci√≥n, en cada fila hay un √°rea de datos. A continuaci√≥n, debe determinar el ancho de bits (solo 128 bits por l√≠nea) y reducir la l√≠nea de la imagen a 16 bytes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Echemos un vistazo m√°s de cerca al formato de datos. La l√≠nea consta de 8 bloques de 14 bits, cada uno con valores para la salida al DAC (muestras) y los c√≥digos de correcci√≥n de errores, y un bloque con una suma de verificaci√≥n (CRC-16 / CCITT-FALSE). Por sumas de verificaci√≥n, se determinan las l√≠neas descartadas, los datos en los que el dispositivo intentar√° recuperarse. Cada l√≠nea contiene tres muestras para los canales izquierdo y derecho, un bloque de paridad P (xor de todas las muestras) y una Q misteriosa. El orden es el siguiente: L0, R0, L1, R1, L2, R2, P, Q. Hoy, la correcci√≥n Q no es posible lo haremos, ya que este material a√∫n no se comprende completamente y la implementaci√≥n requiere depuraci√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u_/eq/sz/u_eqsz0ffb6x1qckzle0q9c99aw.png" alt="Orden de datos en filas"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si usa "tal cual", entonces una l√≠nea discontinua significa la p√©rdida de tres muestras a la vez, lo que se notar√° en el o√≠do en un anillo de metal. Pero dida fue m√°s inteligente y decidi√≥ registrar datos con escaleras. Solo se toma un bloque de una l√≠nea. La siguiente se toma con un ligero desplazamiento. El pelda√±o de la escalera lleva 16 l√≠neas. El bloque L0 se toma de 1 l√≠nea. Bloque R0 con la l√≠nea 17 ... Por lo tanto, utilizando el bloque de paridad, puede recuperar datos de 16 filas perdidas en una fila. Pero solo si hay un error dentro de la escalera. El bloque Q le permite corregir dos errores, lo que restaura hasta 32 l√≠neas perdidas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fs/4g/ok/fs4goklri5veci8g_38cx2sawce.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere un ejemplo simple. Hay un fragmento de un marco PCM en el que varias l√≠neas se rompen (resaltadas en rojo). Las primeras 4 escaleras se procesan normalmente. El quinto capturar√° la l√≠nea discontinua. El bloque Q se pierde primero, pero como sirve para corregir errores y las muestras en s√≠ no est√°n da√±adas, puede ir m√°s all√°. Con la sexta escalera, hacemos lo mismo. Por otra parte, hay escaleras sin da√±os de hasta 21. El bloque P sufre en √©l. Tambi√©n sirve para restaurar los datos. Puedes saltarte. As√≠ que vamos a 37 escaleras, donde se da√±ar√° la muestra del canal derecho. Para restaurarlo, debe realizar XOR para el bloque de paridad y todas las dem√°s muestras:</font></font><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>2</mn><mo>&amp;#x2295;</mo><mi>P</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="36.061ex" height="2.134ex" viewBox="0 -755.5 15526.3 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-32" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-3D" x="1537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMATHI-4C" x="2594" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-30" x="3275" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-2295" x="3998" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMATHI-52" x="4999" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-30" x="5758" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-2295" x="6481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMATHI-4C" x="7481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-31" x="8163" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-2295" x="8886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMATHI-52" x="9886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-31" x="10646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-2295" x="11369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMATHI-4C" x="12369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-32" x="13051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMAIN-2295" x="13774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhTEyulJuXBq_srL7K3NhFdWzwn7A#MJMATHI-50" x="14774" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>‚äï</mo><mi>R</mi><mn>0</mn><mo>‚äï</mo><mi>L</mi><mn>1</mn><mo>‚äï</mo><mi>R</mi><mn>1</mn><mo>‚äï</mo><mi>L</mi><mn>2</mn><mo>‚äï</mo><mi>P</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">R2=L0\oplus R0\oplus L1\oplus R1\oplus L2\oplus P</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, obtenemos el valor inicial. </font><font style="vertical-align: inherit;">Si hay dos errores, se intenta restaurar utilizando el bloque Q. Si hay m√°s de ellos, entonces no hay nada que hacer con esto, excepto interpolar los valores de las muestras batidas o restablecerlos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de pasar por el campo se puede observar en una peque√±a animaci√≥n GIF. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/a1/9o/hga19ot290hpakcghkmrw2ycyz8.gif" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y as√≠ vamos hasta que el √∫ltimo escal√≥n de la escalera descanse contra el final del campo. </font><font style="vertical-align: inherit;">Hardware PCM tiene un b√∫fer circular. </font><font style="vertical-align: inherit;">Tan pronto como se haya procesado la l√≠nea, se puede llenar con nuevos datos. </font><font style="vertical-align: inherit;">Por lo tanto, el √∫ltimo paso salta sin interrumpir la reproducci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eleg√≠ un principio de trabajo ligeramente diferente. Ahora ya no existe ese l√≠mite de memoria, por lo que el b√∫fer tiene un tama√±o ligeramente mayor: la altura del campo m√°s la altura de la escalera. Tan pronto como la escalera llega al final del b√∫fer, las √∫ltimas 111 l√≠neas se transfieren al principio, y el llenado de datos nuevos ya proviene de 112 l√≠neas. Por supuesto, no debemos olvidar que al trabajar con la tarjeta de captura perdemos algunas de las l√≠neas. Por lo tanto, aseg√∫rese de completar las l√≠neas que faltan con ceros para marcarlas para una mayor recuperaci√≥n por errores de CRC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PCM era originalmente de 14 bits. Pero con el tiempo, cuando las grabadoras de video VHS mejoraron la calidad de imagen, los fabricantes cambiaron a 16 bits, sin olvidar la compatibilidad con versiones anteriores.</font></font><br>
<blockquote>  3.   14- PCM   12  .             (    ).</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el PCM de 16 bits, no hay ning√∫n bloque Q, por lo que hay una marca especial en el encabezado del campo "La correcci√≥n Q no es posible". En cambio, se recolectaron 2 bits faltantes de muestras y P. En este caso, la altura de la escalera no es de 8 pasos, sino solo 7, ya que los bits faltantes del bloque se almacenan en su propia l√≠nea, y no por separado. Comprender c√≥mo funciona un PCM de 16 bits es bastante simple usando el ejemplo de capturar un meandro con una frecuencia de 100 Hz y una amplitud m√°xima. Todo inmediatamente cae en su lugar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ck/xr/ex/ckxrexdsdif_1dqeueylnokj-kw.png" alt="Comparaci√≥n de PCM de 14 bits y 16 bits"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora es el momento de guardar el resultado en un archivo wav. La biblioteca libsndfile ayudar√° en esto. Aunque ... PCM no guarda los archivos, sino que los reproduce de inmediato. Aqu√≠ puedes recordar algo tan genial, como la pipa. Cuando la salida de un programa se ingresa a otro. Simplemente especificamos stdout como destino y redirigimos la transmisi√≥n al programa ffplay.</font></font><br>
<br>
<pre><code class="bash hljs">./ggg -i easycap.avi -o - | ffplay -</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora puede disfrutar de las gotas y continuar depurando el c√≥digo para deshacerse de ellas ...</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Eso es todo por hoy. </font><font style="vertical-align: inherit;">Puede descargar la fuente del decodificador desde la p√°gina en GitHub: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/walhi/pcm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tambi√©n hay un generador. </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alg√∫n d√≠a lo dise√±ar√© como un complemento para foobar ...</font></font></s><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El trabajo activo est√° en marcha para terminar la recuperaci√≥n en el bloque Q, por lo que para un trabajo m√°s o menos correcto, tendr√° que saltar sobre los commits. </font><font style="vertical-align: inherit;">Pero estos son peque√±os. </font><font style="vertical-align: inherit;">Aquellos que deseen jugar pueden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descargar el ejemplo de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> captura.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497932/index.html">Estudiamos el motor VoIP Mediastreamer2. Parte 10</a></li>
<li><a href="../es497934/index.html">COVID-19: qu√© tratan de tratar, qu√© se puede tratar y algunas teor√≠as de conspiraci√≥n</a></li>
<li><a href="../es497938/index.html">El despertar de un instituto para dormir: c√≥mo eliminamos a los Python Walkers de REAPER</a></li>
<li><a href="../es497940/index.html">Desarrollador Heart: Sega Saturn Devkits</a></li>
<li><a href="../es497944/index.html">Uso de NAT Traversal para conectar usuarios pasivamente</a></li>
<li><a href="../es497950/index.html">21 lecciones aprendidas en 21 a√±os de programaci√≥n</a></li>
<li><a href="../es497952/index.html">Abreviaturas en ingl√©s y t√≠tulos de TI que pronunciamos mal</a></li>
<li><a href="../es497956/index.html">Sars milagroso? Genealog√≠a del coronavirus de Wuhan</a></li>
<li><a href="../es497958/index.html">Est√°n entre nosotros: explorando vulnerabilidades y c√≥digo malicioso en Zoom para Windows</a></li>
<li><a href="../es497960/index.html">Instalaci√≥n de red Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>