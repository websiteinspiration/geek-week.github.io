<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ° ğŸ™‡ ğŸ“ NATãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä»‹ã—ãŸã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼é–“ã®ç›´æ¥VPNãƒˆãƒ³ãƒãƒ«ï¼ˆVPSãªã—ã€STUNã‚µãƒ¼ãƒãƒ¼ã¨Yandex.Diskã‚’ä½¿ç”¨ï¼‰ ğŸš¬ âœ‹ğŸ½ â›¹ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®NATã®èƒŒå¾Œã«ã‚ã‚‹2å°ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼é–“ã§ç›´æ¥VPNãƒˆãƒ³ãƒãƒ«ã‚’æ§‹æˆã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã®è¨˜äº‹ã®ç¶šãã€‚å‰å›ã®è¨˜äº‹ã§ã¯ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦æ¥ç¶šã‚’æ•´ç†ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸ-ä»²ä»‹è€…ï¼ˆãƒ¬ãƒ³ã‚¿ãƒ«ã•ã‚ŒãŸVPSã¯ã€STUNã‚µãƒ¼ãƒãƒ¼ã®ã‚ˆã†ãªå½¹å‰²ã‚’æœãŸã—ã€æ¥ç¶šç”¨ã®ãƒãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®é€ä¿¡è€…ã§ã™ï¼‰ã€‚...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NATãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä»‹ã—ãŸã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼é–“ã®ç›´æ¥VPNãƒˆãƒ³ãƒãƒ«ï¼ˆVPSãªã—ã€STUNã‚µãƒ¼ãƒãƒ¼ã¨Yandex.Diskã‚’ä½¿ç”¨ï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481034/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®NATã®èƒŒå¾Œã«ã‚ã‚‹2å°ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼é–“ã§ç›´æ¥VPNãƒˆãƒ³ãƒãƒ«ã‚’æ§‹æˆã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦</font><font style="vertical-align: inherit;">ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¨˜äº‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®ç¶šã</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å‰å›ã®è¨˜äº‹ã§ã¯ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦æ¥ç¶šã‚’æ•´ç†ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸ-ä»²ä»‹è€…ï¼ˆãƒ¬ãƒ³ã‚¿ãƒ«ã•ã‚ŒãŸVPSã¯ã€STUNã‚µãƒ¼ãƒãƒ¼ã®ã‚ˆã†ãªå½¹å‰²ã‚’æœãŸã—ã€æ¥ç¶šç”¨ã®ãƒãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®é€ä¿¡è€…ã§ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€VPSã‚’ä½¿ç”¨ã—ãªã„æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ãŒã€ä»²ä»‹è€…ã¯æ®‹ã‚Šã€ãã‚Œã‚‰ã¯STUNã‚µãƒ¼ãƒãƒ¼ã¨Yandex.Diskã§ã—ãŸ...</font></font><br>
<img src="https://habrastorage.org/webt/ud/sj/3t/udsj3te1itgjnnv-bsk99369pre.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰æ›¸ã</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã®æŠ•ç¨¿ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã å¾Œã€å®Ÿè£…ã®ä¸»ãªæ¬ ç‚¹ã¯ä¸­é–“ãƒãƒ¼ãƒ‰ï¼ˆãƒãƒ¼ãƒ‰ã®ç¾åœ¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã€æ¥ç¶šå…ˆã€æ¥ç¶šæ–¹æ³•ã‚’ç¤ºã™ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ï¼ˆVPSï¼‰ï¼‰ã®ä½¿ç”¨ã«ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ç¾åœ¨ã®æ¥ç¶šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«ã€</font><font style="vertical-align: inherit;">ã“ã®STUNã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã‚‰ã®å¤šããŒå­˜åœ¨ã—ã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font><font style="vertical-align: inherit;">ã¾ãšã€STUNã‚µãƒ¼ãƒãƒ¼ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨é€£æºã—ã¦ã„ã¦ã€å®Œå…¨ã«èª­ã¿å–ã‚Šä¸å¯èƒ½ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å—ã‘å–ã£ã¦ã„ã‚‹ã¨ãã«ã€TCPDumpã‚’ä½¿ç”¨ã—ã¦ãƒ‘ã‚±ãƒƒãƒˆã®å†…å®¹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚°ãƒ¼ã‚°ãƒ«ã™ã‚‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã¨ã¯ã€ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’èª¬æ˜</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã‚‹</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">è¨˜äº‹ã«</font></a><font style="vertical-align: inherit;">å‡ºãã‚ã—ã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç§ã¯è‡ªåˆ†ã§STUNã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè£…ã§ããªã„ã“ã¨ã«æ°—ä»˜ãã€ãã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ã€Œãƒ•ã‚¡ãƒ¼ãƒœãƒƒã‚¯ã‚¹ã€ã«å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç†è«–</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€è¿‘ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰STUNã‚µãƒ¼ãƒãƒ¼ã‚’Debianã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸ </font></font><pre><code class="bash hljs"><span class="hljs-comment"># apt install stun-server</span></code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾å­˜é–¢ä¿‚ã§stun-clientãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¦‹ã¾ã—ãŸãŒã€ã©ã†ã„ã†ã‚ã‘ã‹ã“ã‚Œã‚’é‡è¦è¦–ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€å¾Œã§ã€ã‚¹ã‚¿ãƒ³ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦æ€ã„å‡ºã—ã€å—ã‘å–ã£ãŸã‚°ãƒ¼ã‚°ãƒ«ã¨Pojandeksivã«ã‚ˆã£ã¦ã€ãã‚ŒãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ç†è§£ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># apt install stun-client</span>
<span class="hljs-comment"># stun stun.ekiga.net -p 21234 -v</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã«å¿œãˆã¦ã€ç§ã¯å—ã‘å–ã‚Šã¾ã—ãŸï¼š</font></font><br>
<br>
<blockquote>STUN client version 0.97<br>
Opened port 21234 with fd 3<br>
Opened port 21235 with fd 4<br>
Encoding stun message: <br>
Encoding ChangeRequest: 0<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 4<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 2<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Received stun message: 92 bytes<br>
MappedAddress = &lt; IP&gt;:2885<br>
SourceAddress = 216.93.246.18:3478<br>
ChangedAddress = 216.93.246.17:3479<br>
Unknown attribute: 32800<br>
ServerName = Vovida.org 0.98-CPC<br>
Received message of type 257 id=1<br>
Encoding stun message: <br>
Encoding ChangeRequest: 0<br>
<br>
About to send msg of len 28 to 216.93.246.17:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 4<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 2<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 0<br>
<br>
About to send msg of len 28 to &lt; IP&gt;:2885<br>
Received stun message: 28 bytes<br>
ChangeRequest = 0<br>
Received message of type 1 id=11<br>
Encoding stun message: <br>
Encoding ChangeRequest: 0<br>
<br>
About to send msg of len 28 to 216.93.246.17:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 4<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 2<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Received stun message: 92 bytes<br>
MappedAddress = &lt; IP&gt;:2885<br>
SourceAddress = 216.93.246.17:3479<br>
ChangedAddress = 216.93.246.18:3478<br>
Unknown attribute: 32800<br>
ServerName = Vovida.org 0.98-CPC<br>
Received message of type 257 id=10<br>
Encoding stun message: <br>
Encoding ChangeRequest: 4<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 2<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 4<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 2<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 4<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 2<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 4<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br>
Encoding stun message: <br>
Encoding ChangeRequest: 2<br>
<br>
About to send msg of len 28 to 216.93.246.18:3478<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
STUNãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ç¬¦å·åŒ–ï¼š</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¬¦å·åŒ–ChangeRequestï¼š4 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
216.93.246.18:3478ã«lenã®28ã®MSGã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã«ã€ç´„</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼šSTUNãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ChangeRequestï¼š2 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã‚ã«lenã‚’216.93.246.18:3478 28ã®é€ä¿¡MSGã€œç´„</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ã‚¹ãƒˆã‚’I 1ã¤ã®= </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è©¦é¨“II = 0ã‚’</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ã‚¹ãƒˆIII = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ã‚¹ãƒˆIï¼ˆ2ï¼‰= 1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¯nat = 1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒƒãƒ”ãƒ³ã‚°ã•ã‚ŒãŸIPã¯åŒã˜= 1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ˜ã‚¢ãƒ”ãƒ³= 1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¿è­·ãƒãƒ¼ãƒˆ= 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ©ã‚¤ãƒãƒªï¼šç‹¬ç«‹ãƒãƒƒãƒ”ãƒ³ã‚°ã€ãƒãƒ¼ãƒˆä¾å­˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€ãƒ©ãƒ³ãƒ€ãƒ ãƒãƒ¼ãƒˆã€ãƒ˜ã‚¢ãƒ”ãƒ³ã«ãªã‚‹</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ»ã‚Šå€¤ã¯0x000006</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å€¤ã‚’æŒã¤æ–‡å­—åˆ— </font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MappedAddress = &lt;My IP&gt;ï¼š2885</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¿…è¦ãªã‚‚ã®ã ã‘ï¼</font><font style="vertical-align: inherit;">ãƒ­ãƒ¼ã‚«ãƒ«UDPãƒãƒ¼ãƒˆ21234ã§ã®æ¥ç¶šã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã¯æˆ¦ã„ã®åŠåˆ†ã«ã™ãã¾ã›ã‚“ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªãƒ¢ãƒ¼ãƒˆãƒ›ã‚¹ãƒˆã«è»¢é€ã—ã¦VPNæ¥ç¶šã‚’ç¢ºç«‹ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã®è³ªå•ãŒç”Ÿã˜ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãƒ¡ãƒ¼ãƒ«ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ãŠãã‚‰ããƒ†ãƒ¬ã‚°ãƒ©ãƒ ï¼Ÿï¼</font><font style="vertical-align: inherit;">å¤šãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€Yandex.Diskã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã¾ã—ãŸ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ãã‚Œã¯ã€Yandex.Diskã§WebDavã‚’ä»‹ã—ã¦CurlãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã«ã¤ã„ã¦ã®è¨˜äº‹ã‚’è¦‹ã¤ã‘ãŸã‹ã‚‰</font></a><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">å®Ÿè£…ã«ã¤ã„ã¦è€ƒãˆãŸå¾Œã€ç§ã¯ã“ã®ã‚¹ã‚­ãƒ¼ãƒ ã«è¡Œãã¾ã—ãŸï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex.diskã«ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒä»˜ã„ãŸç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒãƒ¼ãƒ‰ãŒæ¥ç¶šã‚’ç¢ºç«‹ã™ã‚‹æº–å‚™ãŒã§ãã¦ã„ã‚‹ã“ã¨ã‚’é€šçŸ¥ã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒ¼ãƒ‰ã®æº–å‚™ãŒã§ãã¦ã„ã‚‹å ´åˆã¯ã€STUNã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ç¾åœ¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¾åœ¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’Yandex.Diskã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ç”¨æ€§ã‚’ç¢ºèªã—ã€Yandex.Diskä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒªãƒ¢ãƒ¼ãƒˆã‚µã‚¤ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVPNã‚’ä½¿ç”¨ã—ã¦ãƒªãƒ¢ãƒ¼ãƒˆãƒ›ã‚¹ãƒˆã¸ã®æ¥ç¶šã‚’ç¢ºç«‹ã—ã¾ã™ã€‚</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç·´ç¿’</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°‘ã—è€ƒãˆã¦ã€å‰å›ã®è¨˜äº‹ã®çµŒé¨“ã‚’è€ƒæ…®ã—ã¦ã€ç°¡å˜ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">æ¬¡ã®ã‚‚ã®ãŒå¿…è¦ã§ã™ã€‚</font></font><pre><code class="bash hljs"><span class="hljs-comment"># apt install openvpn stun-client curl </span></code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã«ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆè‡ªä½“ï¼š</font></font><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆæœŸã‚ªãƒ—ã‚·ãƒ§ãƒ³</font></font></b>
                        <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-comment"># cat vpn8.sh</span></code></pre><br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment">########################    ###</span>
WARN=<span class="hljs-string">'\033[37;1;41m'</span>				<span class="hljs-comment">#</span>
END=<span class="hljs-string">'\033[0m'</span>					<span class="hljs-comment">#</span>
RED=<span class="hljs-string">'\033[0;31m'</span>         <span class="hljs-comment">#  ${RED}		#</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>      <span class="hljs-comment">#  ${GREEN}		#</span>
<span class="hljs-comment">#################################################</span>
<span class="hljs-comment">#######################     #########################################################</span>
al=<span class="hljs-string">"echo readlink dirname grep awk md5sum shuf nc curl sleep openvpn cat stun"</span><font></font>
ch=0<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable">$al</span>; <span class="hljs-keyword">do</span> <span class="hljs-built_in">which</span> <span class="hljs-variable">$i</span> &gt; /dev/null || <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${WARN}</span>   <span class="hljs-variable">$i</span> <span class="hljs-variable">${END}</span>"</span>; <span class="hljs-built_in">which</span> <span class="hljs-variable">$i</span> &gt; /dev/null || ch=1; <span class="hljs-keyword">done</span>
<span class="hljs-keyword">if</span> (( <span class="hljs-variable">$ch</span> &gt; 0 )); <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${WARN}</span>,      <span class="hljs-variable">${END}</span>"</span>; <span class="hljs-built_in">exit</span>; <span class="hljs-keyword">fi</span>
<span class="hljs-comment">#######################################################################################################################</span><font></font>
<font></font>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$1</span> == <span class="hljs-string">''</span> ]]; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${WARN}</span>   (  ,      !) <span class="hljs-variable">${END}</span> \t
<span class="hljs-variable">${GREEN}</span>           /etc/rc.local  nohup /&lt;  &gt;/vpn8.sh  &gt; /var/log/vpn8.log 2&gt;/dev/hull &amp; <span class="hljs-variable">${END}</span>"</span>; <span class="hljs-built_in">exit</span>; <span class="hljs-keyword">fi</span>
ABSOLUTE_FILENAME=`readlink -f <span class="hljs-string">"<span class="hljs-variable">$0</span>"</span>`                                                    <span class="hljs-comment">#    </span>
DIR=`dirname <span class="hljs-string">"<span class="hljs-variable">$ABSOLUTE_FILENAME</span>"</span>`                                                      <span class="hljs-comment">#     </span>
<span class="hljs-comment">###############################     ##################################</span>
key=<span class="hljs-string">"<span class="hljs-variable">$DIR</span>/secret.key"</span>
<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> ]; <span class="hljs-keyword">then</span>
				<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${WARN}</span>  VPN-  ,    : \
openvpn --genkey --secret secret.key :       \
    !!!<span class="hljs-variable">${END}</span>
 # ls -l secret.key
 -rw------- 1 root root 637  27 11:12 secret.key
 # chmod 600 secret.key"</span>;
				<span class="hljs-built_in">exit</span>;
				<span class="hljs-keyword">fi</span>
<span class="hljs-comment">########################################################################################################################</span><font></font>
<font></font>
ABSOLUTE_FILENAME=`readlink -f <span class="hljs-string">"<span class="hljs-variable">$0</span>"</span>`                                                    <span class="hljs-comment">#    </span>
DIR=`dirname <span class="hljs-string">"<span class="hljs-variable">$ABSOLUTE_FILENAME</span>"</span>`                                                      <span class="hljs-comment">#     </span>
name=$(uname -n | md5sum | awk <span class="hljs-string">'{print $1}'</span>)<font></font>
vpn=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$1</span> | md5sum | awk <span class="hljs-string">'{print $1}'</span>)<font></font>
stun=<span class="hljs-string">"stun.ekiga.net"</span> 	<span class="hljs-comment"># STUN </span>
username=<span class="hljs-string">"Yandex"</span>	<span class="hljs-comment">#   .	</span>
password=<span class="hljs-string">"Password"</span>	<span class="hljs-comment">#   .</span>
localport=`shuf -i 20000-65000 -n 1`	<span class="hljs-comment">#   </span><font></font>
<font></font>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>    ."</span>
curl -X MKCOL --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>     "</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> `curl --silent --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/\n/g'</span> | grep <span class="hljs-string">"d:displayname"</span> | sed <span class="hljs-string">'s/d:displayname//g'</span> | sed <span class="hljs-string">'s/&gt;//g'</span> | sed <span class="hljs-string">'s/&lt;//'</span> | sed <span class="hljs-string">'s/\///g'</span> | grep -v $(date +%Y-%m-%d-%H-%M)`; <span class="hljs-keyword">do</span>
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span> Delete: <span class="hljs-variable">$i</span>"</span>
	curl -X DELETE --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$i</span>
	<span class="hljs-keyword">done</span><font></font>
<font></font>
until [ <span class="hljs-variable">$c</span> ];<span class="hljs-keyword">do</span><font></font>
<font></font>
	until [[ <span class="hljs-variable">$b</span> ]]; <span class="hljs-keyword">do</span>
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>  "</span><font></font>
		date=`date +%Y-%m-%d-%H-%M`<font></font>
		mydata=`curl --silent --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/&gt;\n&lt;/g'</span> | grep <span class="hljs-variable">$name</span> | grep <span class="hljs-variable">$date</span> | grep <span class="hljs-string">"d:displayname"</span>`
		<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$mydata</span> ]]; 	<span class="hljs-keyword">then</span>
						<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>   "</span>
					        <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$date</span>"</span> &gt; <span class="hljs-string">"/tmp/<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>-ready.txt"</span>
					        curl -T <span class="hljs-string">"/tmp/<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>-ready.txt"</span> --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>-ready.txt
					<span class="hljs-keyword">else</span>
						<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>     - <span class="hljs-variable">$date</span>"</span>
					<span class="hljs-keyword">fi</span>
		remote=`curl --silent --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/&gt;\n&lt;/g'</span> | grep -v <span class="hljs-variable">$name</span> | grep <span class="hljs-variable">$date</span> | grep <span class="hljs-string">"d:displayname"</span>`
		<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$remote</span> ]];	<span class="hljs-keyword">then</span>
						<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${RED}</span>     <span class="hljs-variable">${END}</span>"</span>
						<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span> "</span><font></font>
						sleep 20<font></font>
					<span class="hljs-keyword">else</span>
						<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span>    <span class="hljs-variable">${END}</span>"</span><font></font>
						b=1<font></font>
						a=<span class="hljs-string">''</span>
					<span class="hljs-keyword">fi</span>
	<span class="hljs-keyword">done</span><font></font>
<font></font>
	until [ <span class="hljs-variable">$a</span> ]; <span class="hljs-keyword">do</span>
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>      STUN : <span class="hljs-variable">$stun</span>"</span>
                mydata=`stun <span class="hljs-variable">$stun</span> -p <span class="hljs-variable">$localport</span> -v 2&gt;&amp;1 | grep MappedAddress | sort | uniq`
                <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span>  : <span class="hljs-variable">$mydata</span><span class="hljs-variable">${END}</span>"</span>
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$mydata</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/mydata"</span>
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>    ."</span>
                curl -T <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/mydata"</span> --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$name</span>.txt
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>     "</span>
		filename=$(curl --silent --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/\n/g'</span> | grep <span class="hljs-string">"d:displayname&gt;"</span> | grep <span class="hljs-string">"txt"</span> | grep -v <span class="hljs-string">"<span class="hljs-variable">$name</span>"</span> | grep -v <span class="hljs-string">"ready"</span> | sed <span class="hljs-string">'s|.*d:displayname&gt;||'</span> | sed <span class="hljs-string">'s/&lt;/ /g'</span> | awk <span class="hljs-string">'{print $1}'</span>)
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>     : <span class="hljs-variable">$filename</span>"</span>
		address=$(curl --silent --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$filename</span> | sort | uniq | head -n1 | sed <span class="hljs-string">'s/:/ /g'</span>)
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>  IP-  "</span>
		ip=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$address</span>"</span> | awk <span class="hljs-string">'{print $3}'</span>)<font></font>
		port=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$address</span>"</span> | awk <span class="hljs-string">'{print $4}'</span>)
		<span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$ip</span>"</span> &amp;&amp; -n <span class="hljs-string">"<span class="hljs-variable">$port</span>"</span> ]]; <span class="hljs-keyword">then</span>
			<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span>  <span class="hljs-variable">$ip</span> <span class="hljs-variable">$port</span> <span class="hljs-variable">${END}</span>"</span>
       		 	openvpn --remote <span class="hljs-variable">$ip</span> --rport <span class="hljs-variable">$port</span> --lport <span class="hljs-variable">$localport</span> \<font></font>
	       	 	    --proto udp --dev tap --<span class="hljs-built_in">float</span> --auth-nocache --verb 3 --mute 20 \<font></font>
	       	 	    --ifconfig 10.45.54.2 255.255.255.252 \<font></font>
	       		    --secret <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/secret.key"</span> \<font></font>
	       		    --auth SHA256 --cipher AES-256-CBC \<font></font>
	        	    --ncp-disable --ping 10  --ping-exit 30 \<font></font>
	        	    --comp-lzo yes<font></font>
			<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${WARN}</span>  <span class="hljs-variable">${END}</span>"</span><font></font>
			a=1<font></font>
			b=<span class="hljs-string">''</span>
			<span class="hljs-keyword">else</span><font></font>
			a=1<font></font>
			b=<span class="hljs-string">''</span>
			<span class="hljs-keyword">fi</span>
	<span class="hljs-keyword">done</span>
<span class="hljs-keyword">done</span></code></pre><br>
   :<br>
<ol>
<li>      , :<br>
 <pre><code class="bash hljs"><span class="hljs-comment"># nano vpn8.sh </span></code></pre></li>
<li>     ..</li>
<li>  "--ifconfig 10.45.54.(1  2) 255.255.255.252"   IP- </li>
<li>c <b>secret.key</b> :<br>
 <pre><code class="bash hljs"><span class="hljs-comment"># openvpn --genkey --secret secret.key </span></code></pre></li>
<li>  :<br>
 <pre><code class="bash hljs"><span class="hljs-comment"># chmod +x vpn8.sh</span></code></pre></li>
<li> :<br>
 <pre><code class="bash hljs"><span class="hljs-comment"># ./vpn8.sh nZbVGBuX5dtturD</span></code></pre><br>
  nZbVGBuX5dtturD â€” ID-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a></li>
</ol><br>
          secret.key  ID-,    .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ›´æ–°ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆæ­£ã—ã„æ“ä½œã®ãŸã‚ã«ã¯ã€æ™‚åˆ»ã‚’åŒæœŸã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰ï¼š</font></font><br>
<br>
<pre><code class="bash hljs">cat vpn10.sh</code></pre><br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
stuns=<span class="hljs-string">"stun.sipnet.ru stun.ekiga.net"</span>   		<span class="hljs-comment">#  STUN   </span>
username=<span class="hljs-string">" Login "</span>		<span class="hljs-comment">#   .</span>
password=<span class="hljs-string">" Password "</span>   	<span class="hljs-comment">#   .</span>
intip=<span class="hljs-string">"10.23.22.1"</span>		<span class="hljs-comment"># IP-  </span><font></font>
<font></font>
WARN=<span class="hljs-string">'\033[37;1;41m'</span>
END=<span class="hljs-string">'\033[0m'</span>
RED=<span class="hljs-string">'\033[0;31m'</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
al=<span class="hljs-string">"ip echo readlink dirname grep awk md5sum openssl sha256sum shuf curl sleep openvpn cat stun"</span><font></font>
ch=0<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable">$al</span>; <span class="hljs-keyword">do</span> <span class="hljs-built_in">which</span> <span class="hljs-variable">$i</span> &gt; /dev/null || <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${WARN}</span>   <span class="hljs-variable">$i</span> <span class="hljs-variable">${END}</span>"</span>; <span class="hljs-built_in">which</span> <span class="hljs-variable">$i</span> &gt; /dev/null || ch=1; <span class="hljs-keyword">done</span>
<span class="hljs-keyword">if</span> (( <span class="hljs-variable">$ch</span> &gt; 0 )); <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${WARN}</span>,      <span class="hljs-variable">${END}</span>"</span>; <span class="hljs-built_in">exit</span>; <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$1</span> == <span class="hljs-string">''</span> ]];
	<span class="hljs-keyword">then</span>
		<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${WARN}</span>   (  ,      !) <span class="hljs-variable">${END}</span> \t
		<span class="hljs-variable">${GREEN}</span>           /etc/rc.local  nohup /&lt;  &gt;/vpn10.sh  &gt; /var/log/vpn10.log 2&gt;/dev/hull &amp; <span class="hljs-variable">${END}</span>"</span>
		<span class="hljs-built_in">exit</span>
<span class="hljs-keyword">fi</span>
ABSOLUTE_FILENAME=`readlink -f <span class="hljs-string">"<span class="hljs-variable">$0</span>"</span>`                                                    <span class="hljs-comment">#    </span>
DIR=`dirname <span class="hljs-string">"<span class="hljs-variable">$ABSOLUTE_FILENAME</span>"</span>`                                                      <span class="hljs-comment">#     </span>
key=<span class="hljs-string">"<span class="hljs-variable">$DIR</span>/secret.key"</span>
until [[ -n <span class="hljs-string">"<span class="hljs-variable">$iftosrv</span>"</span> ]]
	<span class="hljs-keyword">do</span>
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>   "</span>; iftosrv=`ip route get 8.8.8.8 | head -n 1 | sed <span class="hljs-string">'s|.*dev ||'</span> | awk <span class="hljs-string">'{print $1}'</span>`<font></font>
		sleep 5<font></font>
<span class="hljs-keyword">done</span><font></font>
timedatectl<font></font>
name=$(uname -n | md5sum | awk <span class="hljs-string">'{print $1}'</span>)<font></font>
vpn=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$1</span> | md5sum | awk <span class="hljs-string">'{print $1}'</span>)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>    ."</span>
curl -X MKCOL --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span> ID  : <span class="hljs-variable">$vpn</span>"</span>
until [ <span class="hljs-variable">$c</span> ];<span class="hljs-keyword">do</span>
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>     "</span>
	<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> `curl --silent --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/\n/g'</span> | grep <span class="hljs-string">"d:displayname"</span> | sed <span class="hljs-string">'s/d:displayname//g'</span> | sed <span class="hljs-string">'s/&gt;//g'</span> | sed <span class="hljs-string">'s/&lt;//'</span> | sed <span class="hljs-string">'s/\///g'</span> | grep -v $(date +%Y-%m-%d-%H-%M)`
               <span class="hljs-keyword">do</span>
               <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span><span class="hljs-variable">${RED}</span>   : <span class="hljs-variable">$i</span><span class="hljs-variable">${END}</span>"</span>
               curl -X DELETE --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$i</span>
               <span class="hljs-keyword">done</span>
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span> ID  : <span class="hljs-variable">$vpn</span>"</span>
        openvpn --genkey --secret <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span>
        passwd=`<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$vpn</span>-tt"</span> | sha256sum | awk <span class="hljs-string">'{print $1}'</span>`<font></font>
        openssl AES-256-CBC -e -<span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> -out <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/file.enc"</span> -k <span class="hljs-string">"<span class="hljs-variable">$passwd</span>"</span> -base64<font></font>
        curl -T <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/file.enc"</span> --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/key.enc<font></font>
        rm <span class="hljs-string">"<span class="hljs-variable">$DIR</span>"</span>/file.enc
	<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span> 1 -    <span class="hljs-variable">${END}</span>"</span><font></font>
	go=3<font></font>
	localport=`shuf -i 20000-65000 -n 1`    <span class="hljs-comment">#   </span>
	start=<span class="hljs-string">''</span>
	remote=<span class="hljs-string">''</span>
	timeout1=<span class="hljs-string">''</span>
	nextcheck=<span class="hljs-string">''</span>
	timestart=<span class="hljs-string">''</span>
	until [[ <span class="hljs-variable">$b</span> ]]
		<span class="hljs-keyword">do</span>
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>  "</span><font></font>
		date=`date +%s`<font></font>
		timeout1=60<font></font>
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>    <span class="hljs-variable">$date</span>"</span>
		<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$date</span>"</span> &gt; <span class="hljs-string">"/tmp/ready-<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>.txt"</span>
		curl -T <span class="hljs-string">"/tmp/ready-<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>.txt"</span> --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ready-<span class="hljs-variable">$name</span>.txt<font></font>
		readyfile=`curl --silent --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/&gt;\n&lt;/g'</span> | grep -v <span class="hljs-variable">$name</span> | grep <span class="hljs-string">"ready"</span> | grep <span class="hljs-string">"d:displayname"</span> | sed <span class="hljs-string">'s/&lt;d:displayname&gt;//g'</span> | sed <span class="hljs-string">'s/&lt;\/d:displayname&gt;//g'</span>`
		<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$readyfile</span> ]]
			<span class="hljs-keyword">then</span>
				<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${RED}</span>     <span class="hljs-variable">${END}</span>"</span>
				<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>  60 "</span>
				sleep <span class="hljs-variable">$timeout1</span>
			<span class="hljs-keyword">else</span>
				remote=$(curl --silent --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$readyfile</span>)
				<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span>    <span class="hljs-variable">${END}</span>"</span>
				start=`curl --silent --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/&gt;\n&lt;/g'</span> | grep <span class="hljs-string">"start"</span> | grep <span class="hljs-string">"d:displayname"</span> | sed <span class="hljs-string">'s/-/ /g'</span> | awk <span class="hljs-string">'{print $2}'</span>`
				<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">$start</span> ]]
					<span class="hljs-keyword">then</span>
                                                <span class="hljs-built_in">let</span> nextcheck=<span class="hljs-variable">$timeout1</span>-<span class="hljs-variable">$date</span>+<span class="hljs-variable">$remote</span>
						<span class="hljs-built_in">let</span> timestart=<span class="hljs-variable">$date</span>+<span class="hljs-variable">$timeout1</span>-<span class="hljs-variable">$nextcheck</span>
						go=<span class="hljs-variable">$nextcheck</span>
						<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$timestart</span>"</span> &gt; <span class="hljs-string">"/tmp/start-<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>.txt"</span>
						curl -T <span class="hljs-string">"/tmp/start-<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>.txt"</span> --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/start-<span class="hljs-variable">$date</span>-<span class="hljs-variable">$name</span>.txt
					<span class="hljs-keyword">else</span>
						<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>  <span class="hljs-variable">$go</span> "</span>
						sleep <span class="hljs-variable">$go</span><font></font>
						b=1<font></font>
						a=<span class="hljs-string">''</span><font></font>
<font></font>
					<span class="hljs-keyword">fi</span><font></font>
<font></font>
			<span class="hljs-keyword">fi</span>
	<span class="hljs-keyword">done</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span> 2 -     <span class="hljs-variable">${END}</span>"</span>
mydata=<span class="hljs-string">''</span>
filename=<span class="hljs-string">''</span>
address=<span class="hljs-string">''</span>
myip=<span class="hljs-string">''</span>
ip=<span class="hljs-string">''</span>
port=<span class="hljs-string">''</span><font></font>
ex=0<font></font>
	until [ <span class="hljs-variable">$a</span> ]; <span class="hljs-keyword">do</span>
                until [[ -n <span class="hljs-string">"<span class="hljs-variable">$mydata</span>"</span> ]]; <span class="hljs-keyword">do</span>
				k=`<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$stuns</span>"</span> | wc -w`<font></font>
				x=1<font></font>
				z=`shuf -i 1-<span class="hljs-variable">$k</span> -n 1`
				<span class="hljs-keyword">for</span> st <span class="hljs-keyword">in</span> <span class="hljs-variable">$stuns</span>; <span class="hljs-keyword">do</span>
					<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$x</span> == <span class="hljs-variable">$z</span> ]]; <span class="hljs-keyword">then</span>
						stun=<span class="hljs-variable">$st</span>;
					<span class="hljs-keyword">fi</span>;<font></font>
					(( x++ ));<font></font>
				<span class="hljs-keyword">done</span>
                                <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>      STUN : <span class="hljs-variable">$stun</span>"</span>
				sleep 5 &amp;&amp; <span class="hljs-keyword">for</span> pid <span class="hljs-keyword">in</span> $(ps xa | grep <span class="hljs-string">"stun "</span><span class="hljs-variable">$stun</span><span class="hljs-string">" 1 -p "</span><span class="hljs-variable">$localport</span><span class="hljs-string">" -v"</span> | grep -v grep | awk <span class="hljs-string">'{print $1}'</span>); <span class="hljs-keyword">do</span> <span class="hljs-built_in">kill</span> <span class="hljs-variable">$pid</span>; <span class="hljs-keyword">done</span> &amp;<font></font>
                                mydata=`stun <span class="hljs-string">"<span class="hljs-variable">$stun</span>"</span> 1 -p <span class="hljs-string">"<span class="hljs-variable">$localport</span>"</span> -v 2&gt;&amp;1 | grep <span class="hljs-string">"MappedAddress"</span> | sort | uniq`
                <span class="hljs-keyword">done</span>
			<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span>  : <span class="hljs-variable">$mydata</span><span class="hljs-variable">${END}</span>"</span>
               	 	<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>    ."</span>
			<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$mydata</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/mydata"</span>
			<span class="hljs-built_in">echo</span> <span class="hljs-string">"IntIP <span class="hljs-variable">$intip</span>"</span> &gt;&gt; <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/mydata"</span>
			curl -T <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/mydata"</span> --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$name</span>-ipport.txt<font></font>
			rm <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/mydata"</span><font></font>
			sleep 5<font></font>
			<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>     "</span>
			filename=$(curl --silent --user <span class="hljs-string">"<span class="hljs-variable">${username}</span>:<span class="hljs-variable">${password}</span>"</span> -X PROPFIND -H <span class="hljs-string">"Depth: 1"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/ | sed <span class="hljs-string">'s/&gt;&lt;/\n/g'</span> | grep <span class="hljs-string">"d:displayname&gt;"</span> | grep <span class="hljs-string">"ipport"</span> | grep -v <span class="hljs-string">"<span class="hljs-variable">$name</span>"</span> |  sed <span class="hljs-string">'s|.*d:displayname&gt;||'</span> | sed <span class="hljs-string">'s/&lt;/ /g'</span> | awk <span class="hljs-string">'{print $1}'</span>)
			<span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$filename</span>"</span> ]]
				<span class="hljs-keyword">then</span>
					<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>     : <span class="hljs-variable">$filename</span>"</span>
					address=$(curl --silent --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$filename</span> | grep <span class="hljs-string">"MappedAddress"</span> | head -n1 | sed <span class="hljs-string">'s/:/ /g'</span>)<font></font>
					intip2=$(curl --silent --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/<span class="hljs-variable">$filename</span> | grep <span class="hljs-string">"IntIP"</span> | head -n1 | awk <span class="hljs-string">'{print $2}'</span>)
					<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span>  IP-  : <span class="hljs-variable">$address</span> <span class="hljs-variable">$sesid2</span> <span class="hljs-variable">$tunid2</span>"</span>
					ip=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$address</span>"</span> | awk <span class="hljs-string">'{print $3}'</span>)<font></font>
					port=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$address</span>"</span> | awk <span class="hljs-string">'{print $4}'</span>)<font></font>
					myip=`ip route get <span class="hljs-string">"<span class="hljs-variable">$ip</span>"</span> | head -n 1 | sed <span class="hljs-string">'s|.*src ||'</span> | awk <span class="hljs-string">'{print $1}'</span>`
					<span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">"<span class="hljs-variable">$ip</span>"</span> &amp;&amp; -n <span class="hljs-string">"<span class="hljs-variable">$port</span>"</span> &amp;&amp; -n <span class="hljs-string">"<span class="hljs-variable">$myip</span>"</span> &amp;&amp; -n <span class="hljs-string">"<span class="hljs-variable">$localport</span>"</span> ]];
						<span class="hljs-keyword">then</span>
							<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-subst">$(date)</span> <span class="hljs-variable">${GREEN}</span>  <span class="hljs-variable">$ip</span> <span class="hljs-variable">$port</span> <span class="hljs-variable">${END}</span>"</span>
							<span class="hljs-built_in">echo</span> -e  <span class="hljs-string">"`date` <span class="hljs-variable">${GREEN}</span> <span class="hljs-variable">$myip</span>:<span class="hljs-variable">$localport</span> -&gt; <span class="hljs-variable">$ip</span>:<span class="hljs-variable">$port</span> <span class="hljs-variable">${END}</span>"</span>
	                	        		curl --silent --user <span class="hljs-string">"<span class="hljs-variable">$username</span>:<span class="hljs-variable">$password</span>"</span> https://webdav.yandex.ru/vpn-<span class="hljs-variable">$vpn</span>/key.enc &gt; <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/secret.enc"</span>
	                        			openssl AES-256-CBC -d -<span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/secret.enc"</span> -out <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> -k <span class="hljs-string">"<span class="hljs-variable">$passwd</span>"</span> -base64<font></font>
	                        			chmod 600 <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span>
	                        			rm <span class="hljs-string">"<span class="hljs-variable">$DIR</span>/secret.enc"</span>
	                        			openvpn --remote <span class="hljs-variable">$ip</span> --rport <span class="hljs-variable">$port</span> --lport <span class="hljs-variable">$localport</span> \<font></font>
	                        			--proto udp --dev tun --<span class="hljs-built_in">float</span> --auth-nocache --verb 3 --mute 20 \<font></font>
	                        			--ifconfig <span class="hljs-string">"<span class="hljs-variable">$intip</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$intip2</span>"</span> \<font></font>
	                        			--secret <span class="hljs-string">"<span class="hljs-variable">$key</span>"</span> \<font></font>
	                        			--auth SHA256 --cipher AES-256-CBC \<font></font>
	                        			--ncp-disable --ping 10 --ping-exit 20 \<font></font>
	                        			--comp-lzo yes<font></font>
							a=1<font></font>
							b=<span class="hljs-string">''</span>
                                         <span class="hljs-keyword">fi</span>
						<span class="hljs-keyword">else</span>
							<span class="hljs-keyword">if</span> (( <span class="hljs-variable">$ex</span> &gt;= 5 ))
								<span class="hljs-keyword">then</span>
									<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-subst">$(date)</span> "</span><font></font>
									a=1<font></font>
									b=<span class="hljs-string">''</span>
							<span class="hljs-keyword">fi</span><font></font>
							(( ex++ ))<font></font>
					sleep 5<font></font>
			<span class="hljs-keyword">fi</span>
		<span class="hljs-keyword">done</span>
<span class="hljs-keyword">done</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ï¼š</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚æ¬¡ã«ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
 <pre><code class="bash hljs"><span class="hljs-comment"># nano vpn10.sh </span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex.Diskã®ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆ2è¡Œç›®ï¼‰ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ3è¡Œç›®ï¼‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒˆãƒ³ãƒãƒ«ã®å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã—ã¾ã™ï¼ˆ4è¡Œç›®ï¼‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œå¯èƒ½ã«ã—ã¾ã™ã€‚</font></font><br>
 <pre><code class="bash hljs"><span class="hljs-comment"># chmod +x vpn10.sh</span></code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</font></font><br>
 <pre><code class="bash hljs"><span class="hljs-comment"># ./vpn10.sh nZbVGBuX5dtturD</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ã“ã“ã§ã€nZbVGBuX5dtturDã¯ã€</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ã“ã“ã§</font></a><font style="vertical-align: inherit;">ç”Ÿæˆã•</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ã‚Œ</font></a><font style="vertical-align: inherit;">ãŸæ¥ç¶šID </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªãƒ¢ãƒ¼ãƒˆãƒãƒ¼ãƒ‰ã§ã‚‚åŒã˜ã‚ˆã†ã«ã€å¯¾å¿œã™ã‚‹ãƒˆãƒ³ãƒãƒ«ã®å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨IDæ¥ç¶šã‚’æŒ‡å®šã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èµ·å‹•æ™‚ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«/etc/rc.localã«å«ã¾ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã€Œnohup / &lt;ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¸ã®ãƒ‘ã‚¹&gt; /vpn10.sh nZbVGBuX5dtturD&gt; /var/log/vpn10.log 2&gt; / dev / nullï¼†ã€ã‚’ä½¿ç”¨ã—ã¾ã™</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æ©Ÿèƒ½ã—ã€Ubuntuï¼ˆ18.04ã€19.10ã€20.04ï¼‰ã¨Debian 9ã§ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’é€ä¿¡æ©Ÿã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ãŒã€çµŒé¨“ä¸Šã€Yandex.Diskã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿé¨“ã®éç¨‹ã§ã€ä¸€éƒ¨ã®ã‚¿ã‚¤ãƒ—ã®NATãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯æ¥ç¶šã‚’è¨±å¯ã—ãªã„ã“ã¨ãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã»ã¨ã‚“ã©ã®å ´åˆã€ãƒˆãƒ¬ãƒ³ãƒˆãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒã‚¤ãƒ«ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã¯æ¬¡ã®ç‚¹ã§æœ€çµ‚åŒ–ã™ã‚‹äºˆå®šã§ã™ã€‚</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> èµ·å‹•ã™ã‚‹ãŸã³ã«secret.keyã‚’è‡ªå‹•ç”Ÿæˆã—ã€æš—å·åŒ–ã—ã¦Yandex.Diskã«ã‚³ãƒ”ãƒ¼ã—ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒ›ã‚¹ãƒˆã«è»¢é€ã—ã¾ã™ï¼ˆæ›´æ–°ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯è€ƒæ…®ã•ã‚Œã¦ã„ã¾ã™ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è‡ªå‹•çš„ã«å‰²ã‚Šå½“ã¦ã‚‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Yandex.Diskã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å‰ã®ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚³ãƒ¼ãƒ‰ã®æœ€é©åŒ–</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®å®¶åº­ã«IPv6ãŒã‚ã‚Šã¾ã™ã‚ˆã†ã«ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ›´æ–°ã—ã¾ã—ãŸï¼</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€æ–°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€ã“ã“ã§DEBãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yandex.disk</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja481020/index.html">ç´”ç²‹ãªJavaScriptã‚’ä½¿ç”¨ã—ãŸã‚¿ãƒƒãƒã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ä½œæˆï¼šãƒ‘ãƒ¼ãƒˆ2</a></li>
<li><a href="../ja481024/index.html">Google Maps APIã‚’ã‚„ã‚ãŸç†ç”±</a></li>
<li><a href="../ja481028/index.html">OpenVPNã‚’ä½¿ç”¨ã—ã¦ç”£æ¥­ç”¨PLCã¸ã®ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šã‚’æ•´ç†ã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="../ja481030/index.html">è‡ªåˆ†ã®ãŸã‚ã«ã©ã‚“ãªã‚µã‚¤ãƒãƒ¼ãƒ‡ãƒƒã‚¯ã‚’ã‚„ã‚ŠãŸã„ã§ã™ã‹</a></li>
<li><a href="../ja481032/index.html">ãªãœãƒãƒƒã‚­ãƒ³ã‚°ãŒå¯èƒ½ã ã£ãŸã®ã§ã™ã‹ï¼ŸãŠãã‚‰ãæ”»æ’ƒè€…ãŒ</a></li>
<li><a href="../ja481036/index.html">30 Firefoxé–‹ç™ºãƒ„ãƒ¼ãƒ«ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</a></li>
<li><a href="../ja481038/index.html">ãƒ‡ã‚¶ã‚¤ãƒ³ä¸­æ¯’ã®å‘Šç™½ã€‚1ã‹æœˆã§ã‚²ãƒ¼ãƒ ã€ŒIT Alchemyã€ã‚’ä½œæˆã—ãŸæ–¹æ³•</a></li>
<li><a href="../ja481042/index.html">ç§ãŸã¡ã‚¸ãƒ£ãƒ³ã‚´ã®å‘³ã¯èˆˆå¥®ã—ã€é­…äº†ã•ã‚Œã¾ã™</a></li>
<li><a href="../ja481044/index.html">2020å¹´ã«å‘ã‘ã¦ä½•ã‚’ç™ºè¡¨ã™ã‚‹ã‹ï¼šæ–°å¹´ã‚¬ã‚¤ãƒ‰ãƒãƒ‰ãƒ­ãƒœãƒƒãƒˆ</a></li>
<li><a href="../ja481048/index.html">ãƒ‡ã‚¸ã‚¿ãƒ«å›è·¯ã®èªè­˜ã€‚ä¸€èˆ¬åŒ–ã•ã‚ŒãŸCè¦ç´ </a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>