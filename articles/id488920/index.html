<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛃 👨🏼‍🔬 🔲 Tentukan ukuran yang sesuai untuk cluster Kafka di Kubernetes 🃏 👕 🔋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Catatan perev. : Dalam artikel ini, Banzai Cloud membagikan contoh penggunaan utilitas khusus untuk memfasilitasi pengoperasian Kafka dalam Kubernetes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tentukan ukuran yang sesuai untuk cluster Kafka di Kubernetes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/488920/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan perev.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Dalam artikel ini, Banzai Cloud membagikan contoh penggunaan utilitas khusus untuk memfasilitasi pengoperasian Kafka dalam Kubernetes. Instruksi ini menggambarkan bagaimana Anda dapat menentukan ukuran infrastruktur optimal dan mengkonfigurasi Kafka sendiri untuk mencapai throughput yang diperlukan.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/hw/a_/x4/hwa_x4pat6hztyyuh8lorl015pq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Apache Kafka adalah platform streaming terdistribusi untuk menciptakan sistem streaming real-time yang andal, dapat diskalakan, dan berkinerja tinggi. Fitur-fiturnya yang mengesankan dapat diperluas dengan Kubernetes. Untuk melakukan ini, kami mengembangkan</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> operator Open Source Kafka</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan alat yang disebut</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Supertubes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mereka memungkinkan Anda untuk menjalankan Kafka di Kubernetes dan menggunakan berbagai fungsinya, seperti menyempurnakan konfigurasi pialang, penskalaan berdasarkan metrik dengan penyeimbangan ulang, kesadaran rak (kesadaran akan sumber daya perangkat keras), </font><font style="vertical-align: inherit;">pembaruan bergulir </font><font style="vertical-align: inherit;">“lunak” </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(anggun)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dll.</font></font><a name="habracut"></a><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coba Supertubes di kluster Anda:</font></font><br>
<br>
<pre><code class="bash hljs">curl https://getsupertubes.sh | sh  supertubes install -a --no-democluster --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atau lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Anda juga dapat membaca tentang beberapa fitur Kafka, yang otomatis dengan bantuan Supertubes dan operator Kafka. </font><font style="vertical-align: inherit;">Kami sudah menulis tentang mereka di blog:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh tidak! </font><font style="vertical-align: inherit;">Namun operator Kafka lain untuk Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memantau dan mengoperasikan Kafka berdasarkan metrik Prometheus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka rack awareness pada Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menjalankan Apache Kafka melalui Istio - benchmark</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengguna diautentikasi dan akses kluster yang dikendalikan dengan operator Kafka</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka rolling upgrade dan konfigurasi dinamis di Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filter protokol utusan untuk Kafka, menyatu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika Anda memutuskan untuk menggunakan cluster Kafka di Kubernetes, Anda mungkin akan menghadapi masalah menentukan ukuran optimal dari infrastruktur yang mendasarinya dan kebutuhan untuk menyempurnakan konfigurasi Kafka untuk memenuhi persyaratan bandwidth. </font><font style="vertical-align: inherit;">Kinerja maksimum setiap broker ditentukan oleh kinerja komponen infrastruktur pada intinya, seperti memori, prosesor, kecepatan disk, bandwidth jaringan, dll.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idealnya, konfigurasi broker harus sedemikian rupa sehingga semua elemen infrastruktur digunakan semaksimal kemampuan mereka. Namun, dalam kehidupan nyata, pengaturan ini sangat rumit. Lebih mungkin bahwa pengguna akan mengkonfigurasi broker untuk memaksimalkan penggunaan satu atau dua komponen (disk, memori, atau prosesor). Secara umum, broker menunjukkan kinerja maksimum ketika konfigurasinya memungkinkan Anda untuk menggunakan komponen paling lambat "secara penuh." Jadi kita bisa mendapatkan perkiraan perkiraan beban yang bisa ditangani oleh satu broker.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara teoritis, kita juga dapat memperkirakan jumlah broker yang dibutuhkan untuk bekerja dengan beban yang diberikan. Namun, dalam praktiknya, ada begitu banyak opsi konfigurasi pada tingkat yang berbeda sehingga sangat sulit (jika bukan tidak mungkin) untuk menilai kinerja potensial dari konfigurasi tertentu. Dengan kata lain, sangat sulit untuk merencanakan konfigurasi, mulai dari beberapa kinerja yang diberikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk pengguna Supertubes, kami biasanya menggunakan pendekatan berikut: mulai dengan beberapa konfigurasi (infrastruktur + pengaturan), lalu ukur kinerjanya, sesuaikan pengaturan broker dan ulangi prosesnya lagi. Ini terjadi sampai potensi komponen infrastruktur paling lambat dimanfaatkan sepenuhnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan cara ini, kita mendapatkan ide yang lebih jelas tentang berapa banyak broker yang perlu diatasi oleh suatu cluster (jumlah broker juga tergantung pada faktor-faktor lain, seperti jumlah minimum replika pesan untuk memastikan stabilitas, jumlah pemimpin partisi, dll.). Selain itu, kami mendapatkan gagasan tentang penskalaan vertikal komponen infrastruktur mana yang diinginkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel ini akan membahas langkah-langkah yang kami ambil untuk "memeras semuanya" dari komponen paling lambat dalam konfigurasi awal dan mengukur throughput cluster Kafka. Konfigurasi yang sangat tangguh membutuhkan setidaknya tiga broker yang berfungsi (</font></font><code>min.insync.replicas=3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ditempatkan di tiga zona aksesibilitas berbeda. </font><font style="vertical-align: inherit;">Untuk mengonfigurasi, skala, dan memonitor infrastruktur Kubernetes, kami menggunakan platform manajemen wadah cloud hybrid kami sendiri - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipeline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini mendukung on-premise (bare metal, VMware) dan lima jenis awan (Alibaba, AWS, Azure, Google, Oracle), serta kombinasi dari semuanya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pikiran tentang infrastruktur dan konfigurasi cluster Kafka</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk contoh di bawah ini, kami memilih AWS sebagai penyedia layanan cloud dan EKS sebagai distribusi Kubernetes. </font><font style="vertical-align: inherit;">Konfigurasi serupa dapat diimplementasikan menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PKE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , distribusi Kubernetes dari Banzai Cloud, disertifikasi oleh CNCF.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disk</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Amazon menawarkan berbagai </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jenis volume EBS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">SSD adalah </font><font style="vertical-align: inherit;">dasar dari </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gp2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , untuk memastikan throughput yang tinggi, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gp2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengkonsumsi akumulasi pinjaman </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kredit </font><i><font style="vertical-align: inherit;">I / O)</font></i><font style="vertical-align: inherit;"> , oleh karena itu kami lebih suka tipe </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang menawarkan throughput tinggi yang stabil.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis Instance</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kinerja Kafka sangat tergantung pada cache halaman sistem operasi, jadi kami membutuhkan instance dengan memori yang cukup untuk broker (JVM) dan cache halaman. Instance </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.2xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah awal yang baik, karena memiliki memori 16 GB dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dioptimalkan untuk bekerja dengan EBS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kerugiannya adalah mampu memberikan kinerja maksimum tidak lebih dari 30 menit setiap 24 jam. Jika beban kerja Anda membutuhkan kinerja maksimum dalam periode waktu yang lebih lama, lihat jenis kejadian lainnya. Kami melakukan hal itu, berhenti di </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ini memberikan throughput maksimum </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">593,75 Mb / s.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Throughput maksimum </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volume</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> EBS </font><i><font style="vertical-align: inherit;">io1</font></i><font style="vertical-align: inherit;"> lebih tinggi daripada instance </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , jadi elemen infrastruktur paling lambat mungkin adalah throughput I / O dari instance ini (yang juga harus dikonfirmasi oleh hasil uji beban kami).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jaringan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bandwidth jaringan harus cukup besar dibandingkan dengan kinerja instance VM dan disk, jika tidak jaringan menjadi hambatan. </font><font style="vertical-align: inherit;">Dalam kasus kami, antarmuka jaringan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mendukung kecepatan hingga 10 Gb / s, yang secara signifikan lebih tinggi dari bandwidth instance I / O dari VM.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penempatan Broker</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Broker harus dikerahkan (direncanakan di Kubernetes) ke node khusus untuk menghindari persaingan dengan proses lain untuk prosesor, memori, jaringan, dan sumber daya disk.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi Java</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pilihan logisnya adalah Java 11, karena itu kompatibel dengan Docker dalam arti bahwa JVM dengan benar menentukan prosesor dan memori yang tersedia untuk wadah di mana broker berjalan. </font><font style="vertical-align: inherit;">Mengetahui bahwa batas prosesor itu penting, JVM secara internal dan transparan menetapkan jumlah thread GC dan thread compiler JIT. </font><font style="vertical-align: inherit;">Kami menggunakan gambar Kafka </font></font><code>banzaicloud/kafka:2.13-2.4.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang menyertakan Kafka versi 2.4.0 (Scala 2.13) di Java 11.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda ingin mempelajari lebih lanjut tentang Java / JVM di Kubernetes, lihat publikasi kami berikut ini:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa aplikasi Java saya OOMKilled</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana ukuran kontainer dengan benar untuk aplikasi Java 10</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan Memori Broker</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada dua aspek utama untuk mengatur memori broker: pengaturan untuk JVM dan untuk pod Kubernetes. </font><font style="vertical-align: inherit;">Batas memori yang diatur untuk pod harus lebih besar dari ukuran heap maksimum sehingga JVM memiliki cukup ruang untuk Java metaspace dalam memorinya sendiri dan untuk cache halaman sistem operasi yang digunakan Kafka secara aktif. </font><font style="vertical-align: inherit;">Dalam pengujian kami, kami menjalankan pialang Kafka dengan parameter </font></font><code>-Xmx4G -Xms2G</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan batas memori untuk podnya </font></font><code>10 Gi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Harap dicatat bahwa pengaturan memori untuk JVM dapat diperoleh secara otomatis menggunakan </font></font><code>-XX:MaxRAMPercentage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>-X:MinRAMPercentage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, berdasarkan batas memori untuk pod.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan prosesor pialang</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, Anda dapat meningkatkan produktivitas dengan meningkatkan konkurensi dengan meningkatkan jumlah utas yang digunakan oleh Kafka. </font><font style="vertical-align: inherit;">Semakin banyak prosesor yang tersedia untuk Kafka, semakin baik. </font><font style="vertical-align: inherit;">Dalam pengujian kami, kami mulai dengan batas 6 prosesor dan secara bertahap (iterated) menaikkan jumlahnya menjadi 15. Selain itu, kami menetapkan </font></font><code>num.network.threads=12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam pengaturan broker untuk meningkatkan jumlah stream yang menerima data dari jaringan dan mengirimkannya. </font><font style="vertical-align: inherit;">Setelah segera mengetahui bahwa broker pengikut tidak dapat menerima replika dengan cukup cepat, mereka naik </font></font><code>num.replica.fetchers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke 4 untuk meningkatkan kecepatan para broker pengikut mereplikasi pesan dari para pemimpin.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memuat alat generasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pastikan bahwa potensi generator beban yang dipilih tidak habis sebelum cluster Kafka (yang benchmark berjalan) mencapai beban maksimum. </font><font style="vertical-align: inherit;">Dengan kata lain, perlu untuk melakukan penilaian awal terhadap kemampuan alat pembangkit beban, serta memilih jenis instance untuknya dengan jumlah prosesor dan memori yang cukup. </font><font style="vertical-align: inherit;">Dalam hal ini, alat kami akan menghasilkan lebih banyak beban daripada yang dapat dicerna oleh cluster Kafka. </font><font style="vertical-align: inherit;">Setelah banyak percobaan, kami menetapkan tiga salinan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , di mana masing-masing generator diluncurkan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benchmarking</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengukuran kinerja adalah proses berulang yang mencakup langkah-langkah berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pengaturan infrastruktur (EKS cluster, cluster Kafka, alat pembangkit beban, serta Prometheus dan Grafana);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memuat generasi untuk periode tertentu untuk menyaring penyimpangan acak dalam indikator kinerja yang dikumpulkan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menyempurnakan infrastruktur dan konfigurasi broker berdasarkan indikator kinerja yang diamati;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ulangi proses tersebut sampai level yang diperlukan dari bandwidth cluster Kafka tercapai. </font><font style="vertical-align: inherit;">Pada saat yang sama, itu harus dapat direproduksi secara stabil dan menunjukkan variasi bandwidth minimal.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagian selanjutnya menjelaskan langkah-langkah yang dilakukan selama kelompok uji benchmark.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alat-alat berikut digunakan untuk menyebarkan konfigurasi basis, pembangkitan beban, dan pengukuran kinerja dengan cepat:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Banzai Cloud Pipeline</a>    EKS  Amazon c <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Prometheus</a> (   Kafka  )  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Grafana</a> (   ).   <b></b>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pipeline</a> ,    ,   ,  ,   ,      .</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sangrenel</a> —      Kafka.</li>
<li>  Grafana    Kafka  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kubernetes Kafka</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Node Exporter</a>.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supertubes CLI untuk cara termudah untuk mengkonfigurasi cluster Kafka di Kubernetes. </font><font style="vertical-align: inherit;">Zookeeper, operator Kafka, Utusan dan banyak komponen lainnya dipasang dan dikonfigurasikan dengan benar untuk menjalankan kluster Kafka yang siap untuk produksi di Kubernetes.</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk menginstal </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI supertubes,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gunakan instruksi yang diberikan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul></li>
</ul><br>
<img src="https://habrastorage.org/webt/98/xv/7i/98xv7iy-cxitdjo3xakipblgp5u.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EKS Cluster</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mempersiapkan cluster EKS dengan node kerja </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> khusus </font><font style="vertical-align: inherit;">di berbagai zona ketersediaan untuk pod dengan broker Kafka, serta node khusus untuk generator beban dan infrastruktur pemantauan.</font></font><br>
<br>
<pre><code class="bash hljs">banzai cluster create -f https://raw.githubusercontent.com/banzaicloud/kafka-operator/master/docs/benchmarks/infrastructure/cluster_eks_202001.json</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika cluster EKS operasional, aktifkan layanan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemantauan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terintegrasi </font><font style="vertical-align: inherit;">- itu akan menyebarkan Prometheus dan Grafana ke cluster.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponen sistem kafka</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instal komponen sistem Kafka (Zookeeper, operator kafka) di EKS menggunakan supertubes CLI:</font></font><br>
<br>
<pre><code class="bash hljs">supertubes install -a --no-democluster --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt;</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka Cluster</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, EKS menggunakan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volume gp2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> EBS </font><font style="vertical-align: inherit;">, jadi Anda perlu membuat kelas penyimpanan terpisah berdasarkan volume </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk cluster Kafka:</font></font><br>
<br>
<pre><code class="plaintext hljs">kubectl create -f - &lt;&lt;EOF<font></font>
apiVersion: storage.k8s.io/v1<font></font>
kind: StorageClass<font></font>
metadata:<font></font>
  name: fast-ssd<font></font>
provisioner: kubernetes.io/aws-ebs<font></font>
parameters:<font></font>
  type: io1<font></font>
  iopsPerGB: "50"<font></font>
  fsType: ext4<font></font>
volumeBindingMode: WaitForFirstConsumer<font></font>
EOF</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapkan parameter untuk broker </font></font><code>min.insync.replicas=3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan sebarkan pod broker pada node di tiga zona ketersediaan berbeda:</font></font><br>
<br>
<pre><code class="bash hljs">supertubes cluster create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f https://raw.githubusercontent.com/banzaicloud/kafka-operator/master/docs/benchmarks/infrastructure/kafka_202001_3brokers.yaml --<span class="hljs-built_in">wait</span> --timeout 600</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Topik</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami secara bersamaan meluncurkan tiga contoh generator beban. </font><font style="vertical-align: inherit;">Masing-masing dari mereka menulis dalam topiknya masing-masing, yaitu, yang kita butuhkan adalah tiga topik:</font></font><br>
<br>
<pre><code class="bash hljs">supertubes cluster topic create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f -&lt;&lt;EOF<font></font>
apiVersion: kafka.banzaicloud.io/v1alpha1<font></font>
kind: KafkaTopic<font></font>
metadata:<font></font>
  name: perftest1<font></font>
spec:<font></font>
  name: perftest1<font></font>
  partitions: 12<font></font>
  replicationFactor: 3<font></font>
  retention.ms: <span class="hljs-string">'28800000'</span><font></font>
  cleanup.policy: delete<font></font>
EOF<font></font>
<font></font>
supertubes cluster topic create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f -&lt;&lt;EOF<font></font>
apiVersion: kafka.banzaicloud.io/v1alpha1<font></font>
kind: KafkaTopic<font></font>
metadata:<font></font>
    name: perftest2<font></font>
spec:<font></font>
  name: perftest2<font></font>
  partitions: 12<font></font>
  replicationFactor: 3<font></font>
  retention.ms: <span class="hljs-string">'28800000'</span><font></font>
  cleanup.policy: delete<font></font>
EOF<font></font>
<font></font>
supertubes cluster topic create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f -&lt;&lt;EOF<font></font>
apiVersion: kafka.banzaicloud.io/v1alpha1<font></font>
kind: KafkaTopic<font></font>
metadata:<font></font>
  name: perftest3<font></font>
spec:<font></font>
  name: perftest3<font></font>
  partitions: 12<font></font>
  replicationFactor: 3<font></font>
  retention.ms: <span class="hljs-string">'28800000'</span><font></font>
  cleanup.policy: delete<font></font>
EOF</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk setiap topik, faktor replikasi adalah 3 - nilai minimum yang disarankan untuk sistem produksi yang sangat tersedia.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memuat alat generasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami meluncurkan tiga contoh generator beban (masing-masing menulis dalam topik terpisah). </font><font style="vertical-align: inherit;">Untuk pod generator beban, Anda harus mendaftarkan afinitas simpul sehingga hanya direncanakan pada node yang dialokasikan untuk mereka:</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: extensions/v1beta1<font></font>
kind: Deployment<font></font>
metadata:<font></font>
  labels:<font></font>
    app: loadtest<font></font>
  name: perf-load1<font></font>
  namespace: kafka<font></font>
spec:<font></font>
  progressDeadlineSeconds: 600<font></font>
  replicas: 1<font></font>
  revisionHistoryLimit: 10<font></font>
  selector:<font></font>
    matchLabels:<font></font>
      app: loadtest<font></font>
  strategy:<font></font>
    rollingUpdate:<font></font>
      maxSurge: 25%<font></font>
      maxUnavailable: 25%<font></font>
    type: RollingUpdate<font></font>
  template:<font></font>
    metadata:<font></font>
      creationTimestamp: null<font></font>
      labels:<font></font>
        app: loadtest<font></font>
    spec:<font></font>
      affinity:<font></font>
        nodeAffinity:<font></font>
          requiredDuringSchedulingIgnoredDuringExecution:<font></font>
            nodeSelectorTerms:<font></font>
            - matchExpressions:<font></font>
              - key: nodepool.banzaicloud.io/name<font></font>
                operator: In<font></font>
                values:<font></font>
                - loadgen<font></font>
      containers:<font></font>
      - args:<font></font>
        - -brokers=kafka-0:29092,kafka-1:29092,kafka-2:29092,kafka-3:29092<font></font>
        - -topic=perftest1<font></font>
        - -required-acks=all<font></font>
        - -message-size=512<font></font>
        - -workers=20<font></font>
        image: banzaicloud/perfload:0.1.0-blog<font></font>
        imagePullPolicy: Always<font></font>
        name: sangrenel<font></font>
        resources:<font></font>
          limits:<font></font>
            cpu: 2<font></font>
            memory: 1Gi<font></font>
          requests:<font></font>
            cpu: 2<font></font>
            memory: 1Gi<font></font>
        terminationMessagePath: /dev/termination-log<font></font>
        terminationMessagePolicy: File<font></font>
      dnsPolicy: ClusterFirst<font></font>
      restartPolicy: Always<font></font>
      schedulerName: default-scheduler<font></font>
      securityContext: {}<font></font>
      terminationGracePeriodSeconds: 30</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa hal yang perlu diperhatikan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Generator beban menghasilkan pesan 512-byte dan menerbitkannya ke Kafka dalam kumpulan 500 pesan.</font></font></li>
<li>    <code>-required-acks=all</code>   ,          Kafka.  ,          ,  ,    ,  .           <i>(consumers)</i>   ,       ,       ,   .</li>
<li>     20 worker' (<code>-workers=20</code>).  worker  5 producer',     worker'   Kafka.      100 producer',        Kafka.</li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemantauan Cluster</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama pengujian stres pada kluster Kafka, kami juga memantau kesehatannya untuk memastikan tidak ada restart pod, replika tidak sinkron, dan throughput maksimum dengan fluktuasi minimal:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generator beban menulis statistik standar tentang jumlah pesan yang dipublikasikan dan tingkat kesalahan. </font><font style="vertical-align: inherit;">Persentase kesalahan harus tetap dalam nilai </font></font><code>0,00%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cruise Control</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang digunakan oleh operator kafka, menyediakan dasbor tempat kami juga dapat memantau keadaan cluster. </font><font style="vertical-align: inherit;">Untuk melihat panel ini, lakukan:</font></font><br>
<br>
<pre><code class="bash hljs">supertubes cluster cruisecontrol show -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Level ISR </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(jumlah replika in-sync) dari</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shrink dan ekspansi adalah 0.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hasil pengukuran</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 broker, ukuran pesan - 512 byte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan pembagian yang merata di tiga broker, kami berhasil mencapai kinerja </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ 500 Mb / s (sekitar 990 ribu pesan per detik)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/5s/kk/ql5skk9eq59vw1dxiptnpv5baoo.png"><br>
<br>
<img src="https://habrastorage.org/webt/ye/cg/rc/yecgrcrh-mrdchebbysisw4mg3a.png"><br>
<br>
<img src="https://habrastorage.org/webt/5i/t6/it/5it6itlq4hfnndz2f-refjm1sbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konsumsi memori mesin virtual JVM tidak melebihi 2 GB: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/_s/-f/pc_s-fapugnsmx114p1rssgst8m.png"><br>
<br>
<img src="https://habrastorage.org/webt/2e/1-/qw/2e1-qwc0rb2fqk_bw_hkgr0jbl8.png"><br>
<br>
<img src="https://habrastorage.org/webt/m-/tr/nw/m-trnwodxrqpftqhnrnp35f25cy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bandwidth disk mencapai bandwidth I / O maksimum simpul pada ketiga instance yang dikerjakan broker: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tr/tx/tg/trtxtgaqntrbc_bwrxmxmxh9opu.png"><br>
<br>
<img src="https://habrastorage.org/webt/_k/ns/dh/_knsdhmjkkc2245qffym_pnkxge.png"><br>
<br>
<img src="https://habrastorage.org/webt/rq/xo/8x/rqxo8xwg5dualnt3uqt2jxmfeta.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari data penggunaan memori oleh node, berikut bahwa buffering sistem dan caching membutuhkan ~ 10-15 GB:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p3/ls/r6/p3lsr6ixa3wx0zfeowuqo_qlpq0.png"><br>
<br>
<img src="https://habrastorage.org/webt/aq/tn/fd/aqtnfdsjnp33e3buy5dxkrvojg4.png"><br>
<br>
<img src="https://habrastorage.org/webt/pi/aa/iv/piaaivarggmqsqiopmtx_doi4tg.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 broker, ukuran pesan - 100 byte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan penurunan ukuran pesan, throughput berkurang sekitar 15-20%: waktu yang dihabiskan untuk memproses setiap pesan dipengaruhi. </font><font style="vertical-align: inherit;">Selain itu, beban prosesor hampir dua kali lipat. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/9l/9l/mp9l9lcmuwuh866dce_v0puzrt0.png"><br>
<br>
<img src="https://habrastorage.org/webt/z0/ck/hd/z0ckhdrst6iqql9i5drcksb7y7i.png"><br>
<br>
<img src="https://habrastorage.org/webt/hu/dg/dp/hudgdpo3e8s0ft0zxd7tngwne3y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena node broker masih memiliki kernel yang tidak digunakan, Anda dapat meningkatkan kinerja dengan mengubah konfigurasi Kafka. </font><font style="vertical-align: inherit;">Ini bukan tugas yang mudah, oleh karena itu, untuk meningkatkan throughput, lebih baik bekerja dengan pesan yang lebih besar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 broker, ukuran pesan - 512 byte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat dengan mudah meningkatkan kinerja cluster Kafka dengan hanya menambahkan broker baru dan menjaga keseimbangan partisi (ini memastikan distribusi muatan yang merata antar broker). </font><font style="vertical-align: inherit;">Dalam kasus kami, setelah menambahkan broker, throughput cluster meningkat menjadi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ 580 Mb / s (~ 1,1 juta pesan per detik)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pertumbuhan ternyata lebih kecil dari yang diharapkan: ini terutama disebabkan oleh ketidakseimbangan partisi (tidak semua broker bekerja di puncak peluang). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8x/cs/nq/8xcsnqeafi6tom_rxrbb5jz1zmk.png"><br>
<br>
<img src="https://habrastorage.org/webt/_2/qm/2j/_2qm2jqmcig_qwnypgirtzwcnw0.png"><br>
<br>
<img src="https://habrastorage.org/webt/zn/vx/jm/znvxjmy9hpxm3c29l-x616hfyfa.png"><br>
<br>
<img src="https://habrastorage.org/webt/gm/mt/sc/gmmtscxckvpwqr3ypzmkz45jscu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konsumsi memori oleh mesin JVM tetap di bawah 2 GB: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a7/w7/qh/a7w7qh73p6ug6ozgqksh224fanc.png"><br>
<br>
<img src="https://habrastorage.org/webt/pe/cn/gs/pecngsl4nhacfu1drnmevl3p96q.png"><br>
<br>
<img src="https://habrastorage.org/webt/ee/vh/ei/eevheiyiaf_sxnw8epxlsnizxak.png"><br>
<br>
<img src="https://habrastorage.org/webt/lz/gj/lb/lzgjlblbytxjujal32u1nmgjixo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketidakseimbangan partisi memengaruhi operasi broker dengan drive:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4w/ga/3j/4wga3j3ogq8d_pesoite7ln9alk.png"><br>
<br>
<img src="https://habrastorage.org/webt/jb/sh/rl/jbshrlplduwv4xrnfdhab65auy8.png"><br>
<br>
<img src="https://habrastorage.org/webt/3r/dw/ox/3rdwox-qntdekifec-vuoooozuc.png"><br>
<br>
<img src="https://habrastorage.org/webt/oz/ux/cd/ozuxcdtsqz-rfgwmun8iljtgxcq.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temuan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendekatan berulang yang disajikan di atas dapat diperluas untuk mencakup skenario yang lebih kompleks, termasuk ratusan konsumen, partisi ulang, pembaruan bergulir, restart pod, dll. Semua ini memungkinkan kami untuk menilai batas kemampuan cluster Kafka dalam berbagai kondisi, mengidentifikasi kemacetan dalam pekerjaannya dan menemukan cara untuk menghadapinya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengembangkan Supertubes untuk menyebarkan cluster dengan cepat dan mudah, mengkonfigurasinya, menambah / menghapus broker dan topik, menanggapi peringatan, dan memastikan bahwa Kafka bekerja dengan baik di Kubernetes secara keseluruhan. Tujuan kami adalah membantu berkonsentrasi pada tugas utama ("menghasilkan" dan "mengonsumsi" pesan Kafka), dan menyediakan semua kerja keras untuk Supertubes dan operator Kafka.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda tertarik dengan teknologi Banzai Cloud dan proyek-proyek Open Source, berlangganan perusahaan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinkedIn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS dari penerjemah</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baca juga di blog kami:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satu cerita dengan operator Redis di K8 dan tinjauan umum kecil tentang utilitas untuk menganalisis data dari database ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migrasi RabbitMQ yang tidak terhalang ke Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zetcd dari CoreOS: Mengganti ZooKeeper dengan ... penyimpanan, dll</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ."</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id488908/index.html">Copywriter KPI atau fitur evaluasi karya penulis jarak jauh pada staf dan freelancer</a></li>
<li><a href="../id488910/index.html">Buku “Cinta dan Matematika. Jantung dari realitas yang tersembunyi</a></li>
<li><a href="../id488912/index.html">Prediksi Harga Bitcoin Python News</a></li>
<li><a href="../id488916/index.html">Cascadeur: Masalah Kucing yang Jatuh</a></li>
<li><a href="../id488918/index.html">Insinyur Data atau mati: kisah pengembang tunggal</a></li>
<li><a href="../id488926/index.html">5 Kursus Gratis untuk Insinyur AI Microsoft</a></li>
<li><a href="../id488946/index.html">Menu konsol Python</a></li>
<li><a href="../id488948/index.html">UPD. Menguji REST API di Golang. 120 000 [# / dtk] bukan batasnya?</a></li>
<li><a href="../id488950/index.html">Waktu dalam mesin seluler</a></li>
<li><a href="../id488952/index.html">Analisis sentimen frase menggunakan jaringan saraf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>