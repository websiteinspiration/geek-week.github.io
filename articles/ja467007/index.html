<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⏺️ 👨🏽‍⚕️ 🤲🏿 FLProg-カスタムコントローラーのプログラムへの独立した統合 🧘🏻 🌰 🗯️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="長い間、FLProgプロジェクトはHabréで取り上げられていませんでした。これは記事を書く時間が足りないこと、そして私自身の個人的な問題でさえあります。しかし、プロジェクトは死んでいるわけではなく、生きて発展しています。平均して月に1回、プログラムの次のバージョンがリリースされます。前回の公開以降...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>FLProg-カスタムコントローラーのプログラムへの独立した統合</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467007/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/m4/sc/xc/m4scxccdteuasxjzm_whvn1bs9q.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
長い間、FLProgプロジェクトはHabréで取り上げられていませんでした。これは記事を書く時間が足りないこと、そして私自身の個人的な問題でさえあります。しかし、プロジェクトは死んでいるわけではなく、生きて発展しています。平均して月に1回、プログラムの次のバージョンがリリースされます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前回の公開</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以降、</font><font style="vertical-align: inherit;">回路のレンダリングは完全にやり直され（これにより、レンダリング中にフリーズが除去されました）、プロジェクトの相互参照システム、およびプロジェクトのエラーを分析するシステムが登場しました。直接、プログラムコード自体が、より新しいバージョンのプログラミング言語に移植されました。このため、ポジティブな側面（もちろん、私の視点では、ユーザーは私をサポートしてくれます）で、プログラムインターフェイスが変更されました。多くの興味深いブロックが追加されました。スキームとブロック検索のスケーリングを実装しました。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それでも、プロジェクトの主な問題は、プログラムの開発者が1人（これが私）であり、中国と最近の両方の製造元によって製造されたさまざまなコントローラーボード、センサー、センサー、拡張カードの数が絶えず増加していることです。そして、ユーザーはそれらを試したり、プロジェクトで使用したりします。周辺機器の場合、この問題は、カスタムブロックエディターを作成することで、かつては多かれ少なかれ解決されました。彼らが言うように、このステップは「ショット」であり、現在、ほとんどの既存の周辺機器ボード、インターネット、または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムのフォーラム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、対応するユーザーブロックを見つけることができます。まあ、または同じフォーラム（または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vkontakteのグループ）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）地元の教祖に書いてもらいます。</font><font style="vertical-align: inherit;">通常、あなたは何らかの方法で同意することができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、2番目の問題を解決します。これらはコントローラーボードです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、番号が6.0のプログラムのベータ版がリリースされました。</font><font style="vertical-align: inherit;">このバージョンでは、コントローラーのユーザー説明用のエディターが実装されています。</font><font style="vertical-align: inherit;">カスタムブロックと同様に、説明をライブラリにグループ化し、個別の説明およびライブラリ全体をファイルとして保存し、共有することができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この投稿から、このエディタの使用方法を検討する少なくとも2つの投稿のシリーズを開始します。</font><font style="vertical-align: inherit;">最初の記事で私は許可を得て</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シオティニー</font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼のShIoTinyボード</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について説明</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">します。</font></a><font style="vertical-align: inherit;"> 2番目の記事では、実際の産業用コントローラーのアナログを仮想的に考えて、それについて説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは始めましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FLProgプログラムを開きます。 「ツール」メニューから「コントローラカスタム記述エディタ」を選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x-/ut/xg/x-utxgu-j-yc6o4bxbij3ortuye.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明エディタウィンドウが開きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カスタムの説明は、任意のネストの深さとライブラリで組み合わせることができます。したがって、まず説明ライブラリを作成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/io/kh/cs/iokhcsgn0qt_kgc6zvf4nhmi8a4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライブラリの名前を設定します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ir/l1/bd/irl1bdlbht21as-bsinayisfuzi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ライブラリーにコントローラー記述を作成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/fr/60/erfr60lyicwjbbppzgshkypj6ha.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、それに名前を割り当て</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/vw/of/zrvwofrlxkqwswrwq149hkmxlti.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。コントローラーの説明を作成すると、すぐに一般パラメーターのブランチに移動します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t7/u1/ct/t7u1ct8h0myo9vxvfjtapl58vpe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、名前の変更、CPUのタイプの設定、EEPROMのサイズの設定、説明のバージョン番号の変更を行うことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ShloTinyボードはESP8266コントローラーに基づいているので、これを選択します。コントローラを選択すると、対応するEEPROMボリュームが自動的に付加されます。必要に応じて、この値を変更できます。新しい説明のデフォルトのバージョン番号は1に設定されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今後、既存の説明を変更する場合は、増やす方向に変更することをお勧めします。この説明をプロジェクトで使用すると、プログラムはプロジェクトとライブラリの説明のバージョンを比較します。ライブラリ内の説明のバージョン番号がプロジェクト内のバージョン番号より大きい場合、プログラムの[プロジェクト]メニューにアイテムが表示され、プログラムの説明が更新されます。逆の場合、ライブラリの説明を更新するアイテムが表示されます。まあ、プロジェクトで使われているコントローラーの説明がライブラリに全くない場合は、プロジェクトからライブラリに説明を入力する項目が同じメニューに表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、このスレッドでは、コントローラーの選択に役立つテキストによるコントローラーの説明を書き込むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラパラメータの別のブランチに変更する前に行った変更を適用するには、[適用]ボタンをクリックします。これを行わないと、変更は保存されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ShloTinyボードの回路図を検討します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lq/wt/de/lqwtdebl8ssogd2rvcvvxbz9rd0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボードには、3つのデジタル入力、3つのデジタル出力、アナログ入力、およびセンサーの入力があります。理事会の合計8つの結論。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エディターで、「コントローラーの結論」ブランチに移動し、結論の数を設定します。その後、「適用」ボタンをクリックすることを忘れないでください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/wl/lb/lswllbh_hqil-hof8ydl6z7vn9y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムは必要な数の結論を生成します。私たちはそれらの最初のものに渡します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4u/d9/ha/4ud9habaghl5ioujfwby0a-08tc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このブランチでは、プログラムに表示される別の出力名を指定できます。存在しない場合、プログラムはPinNを表示します。Nはピンリストのピン番号です。ボードの別名フィールドにそれに碑文を書くことをお勧めします。これにより、どのような結論が導き出されているかを理解しやすくなります。ここで説明するボードでは、回路図に従ってInput1の値を入力します。したがって、このスレッドでは、たとえばアプリケーションの機能を示すために、出力の個別の説明を書き込むことができます。必要に応じて、出力のエイリアスを指定することもできます。エイリアスは、出力名の後の括弧内にプログラムで表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更後、必ず「適用」ボタンをクリックしてください。同じ原則で、残りの結論を呼び出しましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/y6/1u/bpy61u53hnwuttwg6s4ttl7kq2y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メイン出力パラメーターの同じブランチで、それが実行する機能がそれに追加されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/ol/vt/ksolvtqefuyugg0s1aven_efhps.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各ピンには以下の機能を割り当てることができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y8/04/cd/y804cdepj9pr9qgnji3h9ffan38.png"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I2Cは、I2Cバスピン（SDAまたはSCL）の1つの機能です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPIは、SPIバスピンの1つ（MISO、MOSI、SCK、SS）の機能です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UARTは、UARTインターフェース（RXまたはTX）のいずれかのピンの機能です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナログ入力機能</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナログ出力機能（FLProgではまだ使用されておらず、将来のバックログ）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デジタル入出力機能。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ピン1のデジタル入力/出力機能を割り当てます。新しい機能（まだ構成されていない）を出力に割り当てると、「エラー」ブランチがコントローラーツリーに表示され、正しくない機能のブランチへのパス全体が赤に変わります。 「エラー」ブランチで、コントローラの説明にあるエラーのリストを確認できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fu/c5/l6/fuc5l68t2uqnnb018st1us7kp84.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、デジタル入力/出力機能の入力1は、この入力の数をデジタルとして指定しません。この関数のブランチに切り替えます（将来、エラーをクリックすると、目的のブランチに直接移行する予定です）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m5/86/hp/m586hpytkvzarwhavx6lf1a2lcm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボードの回路図によると、出力「Input1」はコントローラーのGPIO2ピンに接続されています。 「デジタル入力番号」フィールドにこの値を入力します。プロジェクトをコンパイルすると、この値がコードに挿入されます。この入力を出力として使用することは提供されていないため、「出力として使用可能」チェックボックスをオフにします。いつものように、「適用」ボタンをクリックします。同様に、他の2つのデジタル入力を構成します。次に、アナログ入力「ADC1」の出力に移動し、それに「アナログ入力」機能を追加します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i5/vb/6j/i5vb6johktcuk0mym00jifsptqm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この機能の設定では、この出力の番号をアナログ入力として指定する必要があります。スキームによれば、これは0です（ESP8266では1です）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jh/yl/vs/jhylvsjhmvsl6dbki2nsnmu-aoe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、出力設定「1WIRE」に進みます。ここでは、デジタル入力/出力機能を追加していますが、入力と出力の両方の使用を禁止しています。その結果、センサーブロックでのみ選択できるようになり、入力と出力の作成時には使用できません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/s-/3i/5os-3i6f-756ojmbhfn0jrblftm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
出力「K1」〜「K3」の設定は、入力「Input1」〜「Input3」の設定と同様ですが、出力が入力として使用されることを禁止している場合のみです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wc/vh/nl/wcvhnl5d42ola1rk3cmcgqltpjy.png"><br>
<br>
<img src="https://habrastorage.org/webt/e3/qj/1y/e3qj1yyzrzn36t-plzwu_nl7-sq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「画像」ブランチに移動します。その中で、コントローラの説明にロードされた画像を追加できます。たとえば、コントローラの外観、ピン配置などがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像はコントローラの説明に直接読み込まれ、それを使用して作成されたプロジェクトに保存されることに注意してください。したがって、大きな画像をアップロードしないでください。これは、プロジェクトのサイズの増加を伴い、プロジェクトを開く速度に影響します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「画像を追加」ボタンを使用して画像を追加します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f_/ar/so/f_arso1h9wd207bcwxg0yx8rbjm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像を選択してロードした後（PNG形式のみがサポートされます）、ツリー内の画像ごとに個別のブランチが作成されます。このブランチでは、ダウンロードしたイメージの名前を指定できます。これは、コントローラー情報に表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9f/th/jb/9fthjbpdldgi5zzbmye2ior6kyw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要に応じて、複数の画像をアップロードして、希望の順序に並べることができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b_/cv/lx/b_cvlxb8-0zaxazygmrj300mkhy.png"><br>
<br>
<img src="https://habrastorage.org/webt/ru/wh/nu/ruwhnuvfvcuhntsygr0hpapxed0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「標準ブロック」のブランチに渡ります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5e/nr/gg/5enrggudk1-qgs36xmh1ryem1f8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このブランチは、プログラムの現在の設定に従って、プログラムの標準ブロックのライブラリで表すことができるブロックを示しています。どういう意味ですか。プログラムのビルディングブロックの一部は、特定のタイプのCPUのみを対象としています。また、それらの可用性は、選択したプロセッサによって異なります。また、SPI、I2C、UARTで動作するように設計されたブロックは、対応する機能がコントローラーピンに追加された場合にのみ、このリストに表示されます。 EEPROMで動作するように設計されたブロックは、一般的なコントローラーパラメーターのブランチで指定されたEEPROMサイズがゼロより大きい場合、またはI2C機能がコントローラーピンに追加された場合にのみ表示されます。デフォルトでは、ライブラリ内のすべてのブロックの使用が禁止されています（オレンジ色でマークされています）。個別のブロックまたはブロックのフォルダー全体を使用することを許可できます。必要なブランチを選択して[許可]ボタンをクリックするか、コンテキストメニューから。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_g/-f/cc/_g-fccqwf5_0twhukgxs6wfxhwo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブロックまたはブロックのフォルダーをプログラムで表示できるようにすると、それらは黒く塗られます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブロックまたは別のフォルダーのブロックも同様に禁止されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dc/yo/4p/dcyo4p2p6mj8c1zqtj_p_mymupw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのブロックの表示が許可されていないフォルダーでは、名前の前後に3つのアスタリスクが付いています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モーター、リアルタイムクロック、ディスプレイ、IRコントロールユニット、センサー（DS18B20およびDHT22センサーを除く。ボード開発者はこれまでのところサポートを発表しているだけなので）、拡張チップ、および圧電スピーカーの使用は禁止されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/co/ip/ji/coipji0n9m9oho6ed6jjpuatuu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LAD言語についても同様ですので、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h9/-u/xe/h9-uxez75k-8pyzyi08vk7z-p4m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更後は必ず適用してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラーの説明の残りの分岐については、次の投稿で説明しますが、現在の設定は、このボードをFLProgプログラムで使用するのに十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とりあえず、「特別なブロック」ブランチを使用してカスタムブロックを説明にロードすることを簡単に説明します。このブロックは、このコントローラを使用するときにプログラムの標準ブロックのライブラリに表示されます。 「特別なコード」ブランチは、コンパイルされたコードに常に挿入されるコードを記録するために使用され、「特別なライブラリ」ブランチは、ライブラリーをコントローラーの説明にロードするために使用されます。これは、プログラムが動作する\ libraries ArduinoIDEフォルダーにアップロードされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての変更後、コントローラー記述ライブラリーを保存します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x0/oe/d7/x0oed7fkffsba-owxcfxvgchyjm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、作成したコントローラーの説明を使用してみましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FLProgプログラムで、コントローラーの新しいプロジェクトを作成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/7w/ya/dx7wyao116azs1a2lwrpoa1tt4i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラ選択ウィンドウを開きます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l4/5f/wt/l45fwtcbztx_s8w9p71skiimmyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成した説明を選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dq/ly/jp/dqlyjprofstw-fkadjd1jiguzl4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラを選択すると、そのイメージを表示し、必要に応じて必要なものをファイルに保存できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/ni/gw/banigw8zc9shyyogovawmcvlyxy.png"><br>
<br>
<img src="https://habrastorage.org/webt/rh/ra/ss/rhrasshfamvayeljiqnmceepo3g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のパラメーターを</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gf/6p/wd/gf6pwdh-67cn9e8cbm0k4utlbw0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確認</font><font style="vertical-align: inherit;">することもできます</font><font style="vertical-align: inherit;">コントローラーを選択した後、その選択を確認します：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d0/7x/fy/d07xfyaacufag5wf1zqmcokjjd8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果として、メインプロジェクトの作業ウィンドウが開き、選択したコントローラーに従って構成されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dz/my/qj/dzmyqjeks591vtjfqnqhqnhvty4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この投稿の目的には、FLProgプログラムを使用するトレーニングのタスクは含まれていません。これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前の投稿</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトのWebサイト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトのフォーラム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でかなりよく説明されて</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">い</font></a><font style="vertical-align: inherit;">ます。さらに、YouTubeにはすでにかなりの数のチャンネルがあり、プログラムの操作に関するビデオチュートリアルが投稿されています。たとえば、非常に優れたチャンネル</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Key to Arduino」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、教材の非常に優れたプレゼンテーションとともに、一連のレッスンをリードしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、たとえば、単純なプロジェクトを作成してコンパイルしようとします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、コントローラー入力を追加します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/94/wf/4c94wfvporudssfe-mdvmg6fenm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その能力での作業を許可された結論のみが、入力として選択できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yy/dk/fi/yydkfixeg0aemh73lrqunx1qq_a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、デジタル出力を作成します。ここでは、許可された結論のみを利用できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/cq/qm/mkcqqm7djcs0klswidh2qkm2bt8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力1（入力1）のボタンを押すとリレーK1（リレー1​​）がオンになるように回路を組み立てます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、DS18B20センサーから別のボードの回路に情報を読み取るためのブロックを引き出します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xn/wa/2p/xnwa2pfpn7em5w2irs5meayndbc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブロック設定に移動します。新しいOneWireバスを作成すると、すべてのデジタル入力/出力を選択できることがわかります。これはバージョン6.0の問題です。ただし、このバージョンはまだベータ版であるため、言い訳にはなりません。バージョン6.1では、センサー、センサー、または拡張チップ用のピンの使用を禁止することができます。さらに、次の投稿では、この問題を解決する別の方法を紹介します。ここでは、1WIREピンを選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yi/0n/i0/yi0ni02zslfqijbthixnw4yeq_m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アレイを介してアドレスを設定するようにセンサーを構成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nu/ft/9h/nuft9hg43uwk_toqi1yanem1miq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のボードの前に新しいボードを挿入し、その上の「OneWireバススキャン」ブロックを引き出します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/21/r5/qv21r5i9ggwzcovlis6k9kg3f9u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DS18B20センサーからの読み取りユニットが構成されているのと同じOneWireバス上と同じアレイ上に構成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vm/cm/ri/vmcmrigupgqdmnxfbb8fcwfuluc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トリガーブロックR（リーディングエッジの選択）を使用して、コントローラーの起動時にバススキャンを1回開始するためのスキームを組み立てます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/xd/2l/vhxd2l7bxk3afyi7obm1kaix9l0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DS18B20センサーからのデータ読み取りユニットを備えたボード上に、ヒステリシスのあるリレーオン/オフ回路を組み立てます。</font><font style="vertical-align: inherit;">このために、2つのコンパレータとSRトリガーを使用します。</font><font style="vertical-align: inherit;">この方式により、リレー2は温度が10度を下回るとオンになり、温度が20度を超えるとオフになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/55/nw/3y/55nw3y062rknemyx2c7ouyavwgm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンパイルスキームを実行します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/tr/so/ohtrso3_hk9k13yizhsgy8stp0o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、結果のコードはArduino IDEで開きます。</font><font style="vertical-align: inherit;">ボードとして、ShloTinyと同じチップがインストールされているNodeMCUを選択します。</font><font style="vertical-align: inherit;">コードをチェックすると、それが正しく、ダウンロードできることが示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lv/jy/dc/lvjydc9b531j1inhq5vuumgn0n0.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイルされたコード</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">#include &lt;OneWire.h&gt;<font></font>
extern "C" {<font></font>
#include "user_interface.h";<font></font>
}<font></font>
OneWire  _ow13(13);<font></font>
byte _FLPArray133289689[9];<font></font>
unsigned long _d18x2x1Tti = 0UL;<font></font>
float _d18x2x1O = 0.00;<font></font>
bool _trgr1 = 0;<font></font>
bool _bounseInputD2S = 0;<font></font>
bool _bounseInputD2O = 0;<font></font>
unsigned long _bounseInputD2P = 0UL;<font></font>
bool _trgrt1 = 0;<font></font>
bool _trgrt1I = 0;<font></font>
bool _sowb1_needScan = 0;<font></font>
bool _sowb1_ost = 0;<font></font>
bool _sowb1_Out_1 = 0;<font></font>
<font></font>
void setup()<font></font>
{<font></font>
<font></font>
  pinMode(2, INPUT);<font></font>
  pinMode(12, OUTPUT);<font></font>
  pinMode(14, OUTPUT);<font></font>
<font></font>
  _bounseInputD2O =  digitalRead(2);<font></font>
<font></font>
}<font></font>
void loop()<font></font>
{<font></font>
<font></font>
<font></font>
  bool  _bounceInputTmpD2 =  (digitalRead (2));<font></font>
<font></font>
  if (_bounseInputD2S)<font></font>
  {<font></font>
    if (millis() &gt;= (_bounseInputD2P + 40))<font></font>
    {<font></font>
      _bounseInputD2O = _bounceInputTmpD2;<font></font>
      _bounseInputD2S = 0;<font></font>
    }<font></font>
  }<font></font>
  else<font></font>
  {<font></font>
    if (_bounceInputTmpD2 != _bounseInputD2O )<font></font>
    {<font></font>
      _bounseInputD2S = 1;<font></font>
      _bounseInputD2P = millis();<font></font>
    }<font></font>
  }<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
  //:1<font></font>
  if (1) {<font></font>
    if (_trgrt1I) {<font></font>
      _trgrt1 = 0;<font></font>
    } else {<font></font>
      _trgrt1 = 1;<font></font>
      _trgrt1I = 1;<font></font>
    }<font></font>
  } else {<font></font>
    _trgrt1 = 0;<font></font>
    _trgrt1I = 0;<font></font>
  };<font></font>
  if (_sowb1_needScan) {<font></font>
    if ( _oneWireSeach (_FLPArray133289689, _ow13)) {<font></font>
      _sowb1_Out_1 = 1;<font></font>
    }<font></font>
    _ow13.reset_search();<font></font>
    _sowb1_needScan = 0;<font></font>
  }<font></font>
  if (_trgrt1) {<font></font>
    if (! _sowb1_ost) {<font></font>
      _sowb1_ost = 1;<font></font>
      _sowb1_needScan = 1;<font></font>
      _sowb1_Out_1 = 0;<font></font>
    }<font></font>
  } else {<font></font>
    _sowb1_ost = 0;<font></font>
  }<font></font>
<font></font>
  //:2<font></font>
  digitalWrite(12, !(_bounseInputD2O));<font></font>
<font></font>
  //:3<font></font>
  if (_isTimer(_d18x2x1Tti, 1000)) {<font></font>
    _d18x2x1Tti = millis();<font></font>
    _d18x2x1O =  _readDS18_ow13(_FLPArray133289689, _FLPArray133289689[8]);<font></font>
  }<font></font>
  if (((_d18x2x1O)) &gt; (20)) _trgr1 = 0;<font></font>
  if (((_d18x2x1O)) &lt; (10)) _trgr1 = 1;<font></font>
  digitalWrite(14, _trgr1);<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
}<font></font>
<font></font>
bool _isTimer(unsigned long startTime, unsigned long period )<font></font>
{<font></font>
  unsigned long currentTime;<font></font>
  currentTime = millis();<font></font>
  if (currentTime &gt;= startTime) {<font></font>
    return (currentTime &gt;= (startTime + period));<font></font>
  } else {<font></font>
    return (currentTime &gt;= (4294967295 - startTime + period));<font></font>
  }<font></font>
}<font></font>
float _convertDS18x2xData(byte type_s, byte data[12])<font></font>
{<font></font>
  int16_t raw = (data[1] &lt;&lt; 8) | data[0];<font></font>
  if (type_s)<font></font>
  {<font></font>
    raw = raw &lt;&lt; 3;<font></font>
    if (data[7] == 0x10) {<font></font>
      raw = (raw &amp; 0xFFF0) + 12 - data[6];<font></font>
    }<font></font>
  }<font></font>
  else<font></font>
  {<font></font>
    byte cfg = (data[4] &amp; 0x60);<font></font>
    if (cfg == 0x00) raw = raw &amp; ~7;   else if (cfg == 0x20) raw = raw &amp; ~3;  else if (cfg == 0x40) raw = raw &amp; ~1;<font></font>
  }<font></font>
  return  (float)raw / 16.0;<font></font>
}<font></font>
float _readDS18_ow13(byte addr[8], byte type_s)<font></font>
{ byte data[12];<font></font>
  byte i;<font></font>
  _ow13.reset();<font></font>
  _ow13.select(addr);<font></font>
  _ow13.write(0xBE);<font></font>
  for ( i = 0; i &lt; 9; i++) {<font></font>
    data[i] = _ow13.read();<font></font>
  }<font></font>
  _ow13.reset();<font></font>
  _ow13.select(addr);<font></font>
  _ow13.write(0x44, 1);<font></font>
  return _convertDS18x2xData(type_s, data);<font></font>
}<font></font>
bool _oneWireSeach (byte array[], OneWire ow )<font></font>
{<font></font>
  byte temp[8];<font></font>
  byte i;<font></font>
  if ( !ow.search(temp)) {<font></font>
    return false;<font></font>
  }<font></font>
  if (OneWire::crc8(temp, 7) != temp[7]) {<font></font>
    return false;<font></font>
  }<font></font>
<font></font>
  switch (temp[0]) {<font></font>
    case 0x10:<font></font>
      array[8] = 1;<font></font>
      break;<font></font>
    case 0x28:<font></font>
      array[8] = 0;<font></font>
      break;<font></font>
    case 0x22:<font></font>
      array[8] = 0;<font></font>
      break;<font></font>
    default:<font></font>
      return false;<font></font>
  }<font></font>
<font></font>
  for ( i = 0; i &lt; 8; i++) {<font></font>
    array[i] = temp[i];<font></font>
  }<font></font>
  return true;<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FLProgプログラムのShloTinyコントローラーの説明</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これでこのレッスンは終了です。次の投稿では、より真剣で「実際の」産業用コントローラーに近いものについて説明します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja466987/index.html">非定型の「ls」またはlinuxoidの楽しみ方</a></li>
<li><a href="../ja466995/index.html">PVS-Studio統合用の警告次世代プラグインの構成</a></li>
<li><a href="../ja466999/index.html">Pythonの一般的なCLIライブラリの比較：クリック、セメント、火など</a></li>
<li><a href="../ja467003/index.html">1075カテゴリ（36000製品）の高速で便利な適応メニュー</a></li>
<li><a href="../ja467005/index.html">多項式を正しく着色する方法</a></li>
<li><a href="../ja467009/index.html">NotionとPythonを使用してホームライブラリを作成する</a></li>
<li><a href="../ja467011/index.html">データサイエンスを始めるために読むべきもの：本、辞書、コース</a></li>
<li><a href="../ja467015/index.html">JWT：デジタル署名攻撃VS MAC攻撃</a></li>
<li><a href="../ja467017/index.html">HED / MRSDとは何ですか？</a></li>
<li><a href="../ja467019/index.html">Webアナリティクスのeコマースサイトのダッシュボードの設計。パート3：SEOチャンネル</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>