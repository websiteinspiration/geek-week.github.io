<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤°ğŸ½ ğŸ‘¨ğŸ¾â€ğŸ“ ğŸ‘©ğŸ¾â€ğŸ¤ Lastoptimierung fÃ¼r ein Highload-Projekt mit ElasticSearch ğŸ¥¤ ğŸ‘¨ğŸ¼â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Mein Name ist Maxim Vasiliev, ich arbeite als Analyst und Projektmanager bei FINCH. Heute mÃ¶chte ich Ihnen sagen, wie wir mit ElasticSearc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Lastoptimierung fÃ¼r ein Highload-Projekt mit ElasticSearch</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503214/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! </font><font style="vertical-align: inherit;">Mein Name ist Maxim Vasiliev, ich arbeite als Analyst und Projektmanager bei FINCH. </font><font style="vertical-align: inherit;">Heute mÃ¶chte ich Ihnen sagen, wie wir mit ElasticSearch 15 Millionen Anfragen in 6 Minuten bearbeiten und die tÃ¤gliche Belastung auf der Website eines unserer Kunden optimieren konnten. </font><font style="vertical-align: inherit;">Leider mÃ¼ssen wir auf Namen verzichten, da wir die NDA haben, hoffen wir, dass der Inhalt des Artikels nicht beeinflusst wird. </font><font style="vertical-align: inherit;">Lass uns gehen.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie das Projekt aufgebaut ist</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Backend erstellen wir Services, die die Leistung von Websites und mobilen Anwendungen unseres Kunden sicherstellen. </font><font style="vertical-align: inherit;">Die allgemeine Struktur ist im Diagramm zu sehen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/yw/mx/svywmxdiqxb59mwxobsses8vrc8.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dabei verarbeiten wir eine Vielzahl von Transaktionen: KÃ¤ufe, Zahlungen, VorgÃ¤nge mit Benutzersalden, auf denen wir viele Protokolle speichern, und importieren und exportieren diese Daten auch in externe Systeme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt auch umgekehrte Prozesse, wenn wir Daten von einem Kunden empfangen und an den Benutzer Ã¼bertragen. </font><font style="vertical-align: inherit;">DarÃ¼ber hinaus gibt es noch Verfahren fÃ¼r die Arbeit mit Zahlungs- und Bonusprogrammen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurzer Hintergrund</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfangs haben wir PostgreSQL als einziges Data Warehouse verwendet. Die Standardvorteile fÃ¼r DBMS: VerfÃ¼gbarkeit von Transaktionen, entwickelte Sprache fÃ¼r die Datenerfassung, umfassende Tools fÃ¼r die Integration; In Verbindung mit guter Leistung haben zufriedene Menschen unsere BedÃ¼rfnisse seit langem befriedigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben absolut alle Daten in Postgres gespeichert: von Transaktionen bis zu Nachrichten. Aber die Anzahl der Benutzer wuchs und damit auch die Anzahl der Anfragen. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zum VerstÃ¤ndnis betrÃ¤gt die jÃ¤hrliche Anzahl der Sitzungen im Jahr 2017 allein auf der Desktop-Site 131 Millionen. Im Jahr 2018 sind es 125 Millionen, 2019 sind es erneut 130 Millionen. FÃ¼gen Sie dort weitere 100 bis 200 Millionen aus der mobilen Version der Site und der mobilen Anwendung hinzu, und Sie erhalten eine groÃŸe Anzahl von Anfragen.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Wachstum des Projekts hÃ¶rte Postgres auf, mit der Last fertig zu werden, wir hatten keine Zeit - es erschien eine groÃŸe Anzahl verschiedener Abfragen, unter denen wir keine ausreichende Anzahl von Indizes erstellen konnten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben festgestellt, dass andere Data Warehouses erforderlich sind, die unsere Anforderungen erfÃ¼llen und PostgreSQL entlasten. </font><font style="vertical-align: inherit;">Elasticsearch und MongoDB wurden als mÃ¶gliche Optionen in Betracht gezogen. </font><font style="vertical-align: inherit;">Letzterer verlor in folgenden Punkten:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langsame Indizierungsgeschwindigkeit mit zunehmendem Datenvolumen in Indizes. </font><font style="vertical-align: inherit;">Bei Elastic ist die Geschwindigkeit unabhÃ¤ngig von der Datenmenge.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keine Volltextsuche</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also haben wir uns fÃ¼r Elastic entschieden und uns auf den Ãœbergang vorbereitet. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wechseln zu Elastic</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Wir haben den Ãœbergang mit einem Point-of-Sale-Suchdienst begonnen. </font><font style="vertical-align: inherit;">Unser Kunde verfÃ¼gt Ã¼ber insgesamt rund 70.000 Verkaufsstellen und erfordert verschiedene Arten der Suche auf der Website und in der Anwendung:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Textsuche nach StÃ¤dtenamen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geosuche in einem bestimmten Radius von einem bestimmten Punkt. </font><font style="vertical-align: inherit;">Zum Beispiel, wenn ein Benutzer sehen mÃ¶chte, welche Verkaufsstellen seinem Haus am nÃ¤chsten liegen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suche nach einem bestimmten Quadrat - Der Benutzer zeichnet ein Quadrat auf der Karte und zeigt alle Punkte in diesem Radius an. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suchen Sie nach zusÃ¤tzlichen Filtern. </font><font style="vertical-align: inherit;">Verkaufsstellen unterscheiden sich im Sortiment voneinander</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apropos Organisation, dann haben wir in Postgres eine Datenquelle sowohl auf der Karte als auch in den Nachrichten, und in Elastic Snapshots werden aus den Originaldaten erstellt. Tatsache ist, dass Postgres die Suche zunÃ¤chst nicht nach allen Kriterien bewÃ¤ltigen konnte. Es gab nicht nur viele Indizes, sie konnten sich auch Ã¼berschneiden, sodass der Postgres-Scheduler verloren ging und nicht verstand, welcher Index dafÃ¼r verwendet werden sollte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Als nÃ¤chstes folgte der Nachrichtenbereich. Jeden Tag erscheinen VerÃ¶ffentlichungen auf der Website, damit der Benutzer nicht im Informationsfluss verloren geht. Die Daten mÃ¼ssen vor der Ausgabe sortiert werden. Dazu benÃ¶tigen Sie eine Suche: Auf der Site kÃ¶nnen Sie nach TextÃ¼bereinstimmungen suchen und gleichzeitig zusÃ¤tzliche Filter verbinden, da diese ebenfalls Ã¼ber Elastic erstellt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Dann haben wir die Transaktionsverarbeitung verschoben. </font><font style="vertical-align: inherit;">Benutzer kÃ¶nnen ein bestimmtes Produkt auf der Website kaufen und an der Verlosung teilnehmen. </font><font style="vertical-align: inherit;">Nach solchen EinkÃ¤ufen verarbeiten wir eine groÃŸe Datenmenge, insbesondere an Wochenenden und Feiertagen. </font><font style="vertical-align: inherit;">Zum Vergleich: Wenn an normalen Tagen die Anzahl der EinkÃ¤ufe zwischen 1,5 und 2 Millionen liegt, kann sie an Feiertagen 53 Millionen erreichen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig mÃ¼ssen die Daten in einer minimalen Zeit verarbeitet werden - Benutzer mÃ¶chten nicht mehrere Tage auf ein Ergebnis warten. </font><font style="vertical-align: inherit;">Sie werden solche Fristen nicht durch Postgres erreichen - wir haben hÃ¤ufig Sperren erhalten, und wÃ¤hrend wir alle Anfragen bearbeitet haben, konnten Benutzer nicht Ã¼berprÃ¼fen, ob sie Preise erhalten haben oder nicht. </font><font style="vertical-align: inherit;">Dies ist fÃ¼r das Unternehmen nicht sehr angenehm, daher haben wir die Verarbeitung auf Elasticsearch verlagert.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PeriodizitÃ¤t</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden Updates ereignisweise unter den folgenden Bedingungen konfiguriert:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kasse. </font><font style="vertical-align: inherit;">Sobald Daten von einer externen Quelle zu uns kommen, starten wir sofort das Update.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachrichten. </font><font style="vertical-align: inherit;">Sobald Nachrichten auf der Website bearbeitet wurden, werden sie automatisch an Elastic gesendet.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auch hier sind die Vorteile von Elastic zu erwÃ¤hnen. </font><font style="vertical-align: inherit;">In Postgres mÃ¼ssen Sie beim Senden einer Anfrage warten, bis alle DatensÃ¤tze ehrlich verarbeitet wurden. </font><font style="vertical-align: inherit;">Sie kÃ¶nnen 10.000 DatensÃ¤tze an Elastic senden und sofort mit der Arbeit beginnen, ohne zu warten, bis die DatensÃ¤tze auf alle Shards verteilt sind. </font><font style="vertical-align: inherit;">NatÃ¼rlich sehen einige Shard oder Replica die Daten mÃ¶glicherweise nicht sofort, aber sehr bald wird alles verfÃ¼gbar sein.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integrationsmethoden</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei MÃ¶glichkeiten, sich in Elastic zu integrieren:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ãœber den nativen Client Ã¼ber TCP. </font><font style="vertical-align: inherit;">Der native Treiber stirbt allmÃ¤hlich aus: Er wird nicht mehr unterstÃ¼tzt, er hat eine sehr unpraktische Syntax. </font><font style="vertical-align: inherit;">Daher verwenden wir es praktisch nicht und versuchen, es vollstÃ¤ndig aufzugeben.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ãœber eine HTTP-Schnittstelle, in der Sie sowohl JSON-Anforderungen als auch Lucene-Syntax verwenden kÃ¶nnen. </font><font style="vertical-align: inherit;">Letzteres ist eine Text-Engine, die Elastic verwendet. </font><font style="vertical-align: inherit;">Mit dieser Option erhalten wir die MÃ¶glichkeit, JSON-Anforderungen Ã¼ber HTTP zu stapeln. </font><font style="vertical-align: inherit;">Dies ist die Option, die wir verwenden mÃ¶chten.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dank der HTTP-Schnittstelle kÃ¶nnen wir Bibliotheken verwenden, die eine asynchrone Implementierung des HTTP-Clients ermÃ¶glichen. </font><font style="vertical-align: inherit;">Wir kÃ¶nnen Batch und die asynchrone API nutzen, die letztendlich eine hohe Leistung bietet, was in den Tagen einer groÃŸen Aktion sehr hilfreich war (mehr dazu weiter unten). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein paar Zahlen zum Vergleichen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speichern von Benutzern, die Preise in Postgres erhalten haben, in 20 Streams ohne Gruppierung: 460.713 EintrÃ¤ge in 42 Sekunden</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elastischer + reaktiver Client fÃ¼r 10 Threads + Batch fÃ¼r 1000 Elemente: 596749 DatensÃ¤tze in 11 Sekunden</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elastischer + reaktiver Client fÃ¼r 10 Threads + Batch fÃ¼r 1000 Elemente: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23801684 DatensÃ¤tze in 4 Minuten</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir einen HTTP-Anforderungsmanager geschrieben, der JSON als Batch / not Batch erstellt und unabhÃ¤ngig von der Bibliothek Ã¼ber einen beliebigen HTTP-Client sendet. </font><font style="vertical-align: inherit;">Sie kÃ¶nnen auch wÃ¤hlen, ob Anforderungen synchron oder asynchron gesendet werden sollen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einigen Integrationen verwenden wir immer noch den offiziellen Transport-Client, aber dies ist nur eine Frage des kommenden Refactorings. </font><font style="vertical-align: inherit;">Gleichzeitig wird ein benutzerdefinierter Client, der auf der Basis von Spring WebClient erstellt wurde, fÃ¼r die Verarbeitung verwendet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x2/sx/qg/x2sxqgijaic0-ldqbrjlwse_tp0.jpeg" alt="Bild"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GroÃŸe FÃ¶rderung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einmal im Jahr findet eine groÃŸe Kampagne fÃ¼r Benutzer des Projekts statt - dies ist dieselbe Hochlast, da wir zu diesem Zeitpunkt gleichzeitig mit zig Millionen Benutzern arbeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalerweise treten Spitzenlasten in den Ferien auf, aber diese Aktion ist ein vÃ¶llig anderes Niveau. Im vorletzten Jahr, am Tag der Aktion, haben wir 27.580.890 Wareneinheiten verkauft. Die Daten wurden mehr als eine halbe Stunde lang verarbeitet, was den Benutzern Unannehmlichkeiten bereitete. Die Benutzer erhielten Preise fÃ¼r die Teilnahme, aber es wurde klar, dass der Prozess beschleunigt werden musste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfang 2019 haben wir beschlossen, ElasticSearch zu benÃ¶tigen. Ein ganzes Jahr lang haben wir die Verarbeitung der empfangenen Daten in Elastic und deren Ausgabe in der API der mobilen Anwendung und Site organisiert. Infolgedessen haben wir im nÃ¤chsten Jahr wÃ¤hrend der Kampagne </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15 131 783 DatensÃ¤tze in 6 Minuten verarbeitet.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir viele Leute haben, die Waren kaufen und an der Verlosung von Werbeaktionen teilnehmen mÃ¶chten, ist dies eine vorÃ¼bergehende MaÃŸnahme. </font><font style="vertical-align: inherit;">Jetzt senden wir relevante Informationen an Elastic, aber in Zukunft planen wir, Archivinformationen aus den letzten Monaten als permanentes Repository an Postgres zu Ã¼bertragen. </font><font style="vertical-align: inherit;">Um den elastischen Index nicht zu verstopfen, der auch seine Grenzen hat.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlussfolgerung / Schlussfolgerungen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Moment haben wir alle Dienste, die wir wollten, auf Elastic Ã¼bertragen und vorerst angehalten. </font><font style="vertical-align: inherit;">Jetzt erstellen wir einen Index in Elastic Ã¼ber dem persistenten Hauptspeicher in Postgres, der die Benutzerlast Ã¼bernimmt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Zukunft planen wir die Ãœbertragung von Diensten, wenn wir verstehen, dass die Datenanforderung zu vielfÃ¤ltig wird und von einer unbegrenzten Anzahl von Spalten durchsucht wird. </font><font style="vertical-align: inherit;">Dies ist fÃ¼r Postgres keine Aufgabe mehr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir eine Volltextsuche in der Funktion benÃ¶tigen oder wenn wir viele verschiedene Suchkriterien haben, wissen wir bereits, dass dies in Elastic Ã¼bersetzt werden muss.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âŒ˜âŒ˜âŒ˜</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danke fÃ¼rs Lesen. </font><font style="vertical-align: inherit;">Wenn Ihr Unternehmen auch ElasticSearch verwendet und Ã¼ber eigene ImplementierungsfÃ¤lle verfÃ¼gt, teilen Sie uns dies mit. </font><font style="vertical-align: inherit;">Es wird interessant sein zu wissen, wie andere haben :-)</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de503200/index.html">YOLOv4 - das genaueste neuronale Echtzeitnetzwerk im Microsoft COCO-Dataset</a></li>
<li><a href="../de503204/index.html">So flashen Sie Xiaomi Redmi 4 Prime / Pro / Premium auf Android 10</a></li>
<li><a href="../de503208/index.html">Wann ist der beste Zeitpunkt fÃ¼r eine Investition?</a></li>
<li><a href="../de503210/index.html">KÃ¶nnen Phishing-Sites ausgerottet werden?</a></li>
<li><a href="../de503212/index.html">30 Life Hacks, um den Online-Kurs abzuschlieÃŸen</a></li>
<li><a href="../de503218/index.html">GlobalSign stellt Atlas vor - PKI-Plattform der nÃ¤chsten Generation</a></li>
<li><a href="../de503226/index.html">Was hindert das GeschÃ¤ft daran, sich in eine â€Zahlâ€œ zu verwandeln, und was hat es mit dem Ruf zu tun?</a></li>
<li><a href="../de503228/index.html">Herzfrequenzkontrolle beim Joggen durch musikalisches Feedback - oder â€Tester, die gerne laufen, suchenâ€œ</a></li>
<li><a href="../de503230/index.html">Incident Response Platform-Klassensysteme: Anwendungs- und Hauptfunktionen</a></li>
<li><a href="../de503232/index.html">So werden Sie in sechs Monaten oder noch schneller DevOps-Ingenieur. Teil 6. Starten der Anwendung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>