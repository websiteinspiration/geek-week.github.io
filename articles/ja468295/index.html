<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ˜ ğŸ’‡ğŸ½ ğŸ”³ 50ã‚·ã‚§ãƒ¼ãƒ‰ã®matplotlib-ãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ­ãƒƒãƒˆï¼ˆå®Œå…¨ãªPythonã‚³ãƒ¼ãƒ‰ä»˜ãï¼‰ ğŸ” ğŸ¤œğŸ¼ ğŸ‘©ğŸ½â€ğŸ¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†äººã€…ã¯ã€å¹¸ç¦ã¯ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã¯ãªãã€ãƒ‡ãƒ¼ã‚¿ã‚’æ­£ã—ãå‡¦ç†ã™ã‚‹æ–¹æ³•ã«ã‚ã‚‹ã“ã¨ã‚’ã‚ˆãçŸ¥ã£ã¦ã„ã¾ã™ã€‚ãŸã ã—ã€ãã‚Œã‚‰ã‚’å‡¦ç†ã™ã‚‹ã«ã¯ã€æœ€åˆã«ç›¸é–¢é–¢ä¿‚ã‚’åˆ†æã—ã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠã—ã€ä¸è¦ãªã‚‚ã®ã‚’æ¨ã¦ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚ˆã†ãªç›®çš„ã®ãŸã‚ã«ã€matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸè¦–è¦šåŒ–ãŒã‚ˆã...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>50ã‚·ã‚§ãƒ¼ãƒ‰ã®matplotlib-ãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ­ãƒƒãƒˆï¼ˆå®Œå…¨ãªPythonã‚³ãƒ¼ãƒ‰ä»˜ãï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468295/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†äººã€…ã¯ã€å¹¸ç¦ã¯ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã¯ãªãã€ãƒ‡ãƒ¼ã‚¿ã‚’æ­£ã—ãå‡¦ç†ã™ã‚‹æ–¹æ³•ã«ã‚ã‚‹ã“ã¨ã‚’ã‚ˆãçŸ¥ã£ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ãã‚Œã‚‰ã‚’å‡¦ç†ã™ã‚‹ã«ã¯ã€æœ€åˆã«ç›¸é–¢é–¢ä¿‚ã‚’åˆ†æã—ã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠã—ã€ä¸è¦ãªã‚‚ã®ã‚’æ¨ã¦ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ãªç›®çš„ã®ãŸã‚ã«ã€matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸè¦–è¦šåŒ–ãŒã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uq/6w/kj/uq6wkjk-9grcby6hkw-ibdynrbi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œä¸­ã€ã«ä¼šã£ã¦ãã ã•ã„ï¼</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦æ§‹æˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€å€‹ã€…ã®ã‚°ãƒ©ãƒ•ã¯è¨­å®šè‡ªä½“ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># !pip install brewer2mpl</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns
<span class="hljs-keyword">import</span> warnings; warnings.filterwarnings(action=<span class="hljs-string">'once'</span>)<font></font>
<font></font>
large = <span class="hljs-number">22</span>; med = <span class="hljs-number">16</span>; small = <span class="hljs-number">12</span>
params = {<span class="hljs-string">'axes.titlesize'</span>: large,
          <span class="hljs-string">'legend.fontsize'</span>: med,
          <span class="hljs-string">'figure.figsize'</span>: (<span class="hljs-number">16</span>, <span class="hljs-number">10</span>),
          <span class="hljs-string">'axes.labelsize'</span>: med,
          <span class="hljs-string">'axes.titlesize'</span>: med,
          <span class="hljs-string">'xtick.labelsize'</span>: med,
          <span class="hljs-string">'ytick.labelsize'</span>: med,
          <span class="hljs-string">'figure.titlesize'</span>: large}<font></font>
plt.rcParams.update(params)<font></font>
plt.style.use(<span class="hljs-string">'seaborn-whitegrid'</span>)<font></font>
sns.set_style(<span class="hljs-string">"white"</span>)<font></font>
%matplotlib inline<font></font>
<font></font>
<span class="hljs-comment"># Version</span>
print(mpl.__version__)  <span class="hljs-comment">#&gt; 3.0.0</span>
print(sns.__version__)  <span class="hljs-comment">#&gt; 0.9.0</span>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›¸é–¢</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›¸é–¢ãƒ—ãƒ­ãƒƒãƒˆã¯ã€2ã¤ä»¥ä¸Šã®å¤‰æ•°é–“ã®é–¢ä¿‚ã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€ã‚ã‚‹å¤‰æ•°ãŒåˆ¥ã®å¤‰æ•°ã«å¯¾ã—ã¦ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã§ã™ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.æ•£å¸ƒå›³</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Scatteplotã¯ã€2ã¤ã®å¤‰æ•°é–“ã®é–¢ä¿‚ã‚’èª¿ã¹ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹å¤å…¸çš„ã§åŸºæœ¬çš„ãªãƒãƒ£ãƒ¼ãƒˆãƒ“ãƒ¥ãƒ¼ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ã«è¤‡æ•°ã®ã‚°ãƒ«ãƒ¼ãƒ—ãŒã‚ã‚‹å ´åˆã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ç•°ãªã‚‹è‰²ã§è¦–è¦šåŒ–ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">matplotlibã§ã¯ã€plt.scatterplotï¼ˆï¼‰ã‚’ä½¿ç”¨ã—ã¦ç°¡å˜ã«ã“ã‚Œã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import dataset </span>
midwest = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data </span>
<span class="hljs-comment"># Create as many colors as there are unique midwest['category']</span>
categories = np.unique(midwest[<span class="hljs-string">'category'</span>])<font></font>
colors = [plt.cm.tab10(i/float(len(categories)<span class="hljs-number">-1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(categories))]<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot for Each Category</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)<font></font>
<font></font>
<span class="hljs-keyword">for</span> i, category <span class="hljs-keyword">in</span> enumerate(categories):<font></font>
    plt.scatter(<span class="hljs-string">'area'</span>, <span class="hljs-string">'poptotal'</span>, <font></font>
                data=midwest.loc[midwest.category==category, :], <font></font>
                s=<span class="hljs-number">20</span>, c=colors[i], label=str(category))<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
plt.gca().set(xlim=(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.1</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">90000</span>),<font></font>
              xlabel=<span class="hljs-string">'Area'</span>, ylabel=<span class="hljs-string">'Population'</span>)<font></font>
<font></font>
plt.xticks(fontsize=<span class="hljs-number">12</span>); plt.yticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">"Scatterplot of Midwest Area vs Population"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.legend(fontsize=<span class="hljs-number">12</span>)    <font></font>
plt.show()  <font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/gp/qp/3a/gpqp3ahgwojnkxp1f8pa6dlnh0u.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.ã‚°ãƒ«ãƒ¼ãƒ—ã‚­ãƒ£ãƒ—ãƒãƒ£ä»˜ãã®ãƒãƒ–ãƒ«ãƒãƒ£ãƒ¼ãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¢ƒç•Œã®å†…å´ã«ãƒã‚¤ãƒ³ãƒˆã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’è¡¨ç¤ºã—ã¦ã€ãã‚Œã‚‰ã®é‡è¦æ€§ã‚’å¼·èª¿ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ä¾‹ã§ã¯ã€å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€ãã‚Œã‚‰ã‚’ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹encircleï¼ˆï¼‰ã«æ¸¡ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> patches
<span class="hljs-keyword">from</span> scipy.spatial <span class="hljs-keyword">import</span> ConvexHull
<span class="hljs-keyword">import</span> warnings; warnings.simplefilter(<span class="hljs-string">'ignore'</span>)<font></font>
sns.set_style(<span class="hljs-string">"white"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Step 1: Prepare Data</span>
midwest = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># As many colors as there are unique midwest['category']</span>
categories = np.unique(midwest[<span class="hljs-string">'category'</span>])<font></font>
colors = [plt.cm.tab10(i/float(len(categories)<span class="hljs-number">-1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(categories))]<font></font>
<font></font>
<span class="hljs-comment"># Step 2: Draw Scatterplot with unique color for each category</span>
fig = plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)    <font></font>
<font></font>
<span class="hljs-keyword">for</span> i, category <span class="hljs-keyword">in</span> enumerate(categories):<font></font>
    plt.scatter(<span class="hljs-string">'area'</span>, <span class="hljs-string">'poptotal'</span>, data=midwest.loc[midwest.category==category, :], s=<span class="hljs-string">'dot_size'</span>, c=colors[i], label=str(category), edgecolors=<span class="hljs-string">'black'</span>, linewidths=<span class="hljs-number">.5</span>)<font></font>
<font></font>
<span class="hljs-comment"># Step 3: Encircling</span>
<span class="hljs-comment"># https://stackoverflow.com/questions/44575681/how-do-i-encircle-different-data-sets-in-scatter-plot</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">encircle</span>(<span class="hljs-params">x,y, ax=None, **kw</span>):</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ax: ax=plt.gca()<font></font>
    p = np.c_[x,y]<font></font>
    hull = ConvexHull(p)<font></font>
    poly = plt.Polygon(p[hull.vertices,:], **kw)<font></font>
    ax.add_patch(poly)<font></font>
<font></font>
<span class="hljs-comment"># Select data to be encircled</span>
midwest_encircle_data = midwest.loc[midwest.state==<span class="hljs-string">'IN'</span>, :]                         <font></font>
<font></font>
<span class="hljs-comment"># Draw polygon surrounding vertices    </span>
encircle(midwest_encircle_data.area, midwest_encircle_data.poptotal, ec=<span class="hljs-string">"k"</span>, fc=<span class="hljs-string">"gold"</span>, alpha=<span class="hljs-number">0.1</span>)<font></font>
encircle(midwest_encircle_data.area, midwest_encircle_data.poptotal, ec=<span class="hljs-string">"firebrick"</span>, fc=<span class="hljs-string">"none"</span>, linewidth=<span class="hljs-number">1.5</span>)<font></font>
<font></font>
<span class="hljs-comment"># Step 4: Decorations</span>
plt.gca().set(xlim=(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.1</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">90000</span>),<font></font>
              xlabel=<span class="hljs-string">'Area'</span>, ylabel=<span class="hljs-string">'Population'</span>)<font></font>
<font></font>
plt.xticks(fontsize=<span class="hljs-number">12</span>); plt.yticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">"Bubble Plot with Encircling"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.legend(fontsize=<span class="hljs-number">12</span>)    <font></font>
plt.show()    <font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/n3/pz/42/n3pz42yqbct7ctw7c_g9cthlotw.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.æœ€é©ãªç·šå½¢å›å¸°ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ã¤ã®å¤‰æ•°ãŒç›¸äº’ã«ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’ç†è§£ã—ãŸã„å ´åˆã¯ã€æœ€é©ç·šãŒæœ€é©ã§ã™ã€‚</font><font style="vertical-align: inherit;">ä»¥ä¸‹ã®ã‚°ãƒ©ãƒ•ã¯ã€ã•ã¾ã–ã¾ãªãƒ‡ãƒ¼ã‚¿ã‚°ãƒ«ãƒ¼ãƒ—é–“ã§æœ€ã‚‚ã‚ˆãä¸€è‡´ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã‚’ç„¡åŠ¹ã«ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå…¨ä½“ã«å¯¾ã—ã¦1ã¤ã®æœ€é©ãªç·šã‚’æãã«ã¯ã€ä»¥ä¸‹ã®sns.lmplotï¼ˆï¼‰ã‹ã‚‰hue = 'cyl'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span>)<font></font>
df_select = df.loc[df.cyl.isin([<span class="hljs-number">4</span>,<span class="hljs-number">8</span>]), :]<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
sns.set_style(<span class="hljs-string">"white"</span>)<font></font>
gridobj = sns.lmplot(x=<span class="hljs-string">"displ"</span>, y=<span class="hljs-string">"hwy"</span>, hue=<span class="hljs-string">"cyl"</span>, data=df_select, <font></font>
                     height=<span class="hljs-number">7</span>, aspect=<span class="hljs-number">1.6</span>, robust=<span class="hljs-literal">True</span>, palette=<span class="hljs-string">'tab10'</span>, <font></font>
                     scatter_kws=dict(s=<span class="hljs-number">60</span>, linewidths=<span class="hljs-number">.7</span>, edgecolors=<span class="hljs-string">'black'</span>))<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
gridobj.set(xlim=(<span class="hljs-number">0.5</span>, <span class="hljs-number">7.5</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>))<font></font>
plt.title(<span class="hljs-string">"Scatterplot with line of best fit grouped by number of cylinders"</span>, fontsize=<span class="hljs-number">20</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/0m/1t/rm/0m1trm1dh_xeddg4_mfij5vrscq.png"><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‹¬è‡ªã®åˆ—ã®å„å›å¸°è¡Œ</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®æœ€é©ç·šã‚’å€‹åˆ¥ã®åˆ—ã«è¡¨ç¤ºã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€sns.lmplotï¼ˆï¼‰å†…ã§col = groupingcolumnãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span>)<font></font>
df_select = df.loc[df.cyl.isin([<span class="hljs-number">4</span>,<span class="hljs-number">8</span>]), :]<font></font>
<font></font>
<span class="hljs-comment"># Each line in its own column</span>
sns.set_style(<span class="hljs-string">"white"</span>)<font></font>
gridobj = sns.lmplot(x=<span class="hljs-string">"displ"</span>, y=<span class="hljs-string">"hwy"</span>, <font></font>
                     data=df_select, <font></font>
                     height=<span class="hljs-number">7</span>, <font></font>
                     robust=<span class="hljs-literal">True</span>, <font></font>
                     palette=<span class="hljs-string">'Set1'</span>, <font></font>
                     col=<span class="hljs-string">"cyl"</span>,<font></font>
                     scatter_kws=dict(s=<span class="hljs-number">60</span>, linewidths=<span class="hljs-number">.7</span>, edgecolors=<span class="hljs-string">'black'</span>))<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
gridobj.set(xlim=(<span class="hljs-number">0.5</span>, <span class="hljs-number">7.5</span>), ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>))<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
 <img src="https://habrastorage.org/webt/ec/2t/dw/ec2tdwdzzrj5xnyvakp6aixrxq0.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.ã‚¹ãƒˆãƒªãƒƒãƒ—ãƒ—ãƒ­ãƒƒãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤šãã®å ´åˆã€è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã¯åŒã˜Xå€¤ã¨Yå€¤ã‚’æŒã¡ã€ãã®çµæœã€è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆãŒäº’ã„ã®ä¸Šã«ãƒ—ãƒ­ãƒƒãƒˆã•ã‚Œã¦éè¡¨ç¤ºã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’å›é¿ã™ã‚‹ã«ã¯ã€ãƒ‰ãƒƒãƒˆã‚’å°‘ã—é›¢ã—ã¦è¦–è¦šçš„ã«è¦‹ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€stripplotï¼ˆï¼‰ã‚’ä½¿ç”¨ã—ã¦ç°¡å˜ã«å®Ÿè¡Œã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Stripplot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)    <font></font>
sns.stripplot(df.cty, df.hwy, jitter=<span class="hljs-number">0.25</span>, size=<span class="hljs-number">8</span>, ax=ax, linewidth=<span class="hljs-number">.5</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
plt.title(<span class="hljs-string">'Use jittered plots to avoid overlapping of points'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/x1/vs/8u/x1vs8u1mchmmdjo1dfwftrtuf_s.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.ã‚«ã‚¦ãƒ³ãƒˆãƒ—ãƒ­ãƒƒãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒã‚¤ãƒ³ãƒˆã®é‡è¤‡ã®å•é¡Œã‚’å›é¿ã™ã‚‹åˆ¥ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ã“ã®å ´æ‰€ã«ã‚ã‚‹ãƒã‚¤ãƒ³ãƒˆã®æ•°ã«å¿œã˜ã¦ã€ãƒã‚¤ãƒ³ãƒˆã®ã‚µã‚¤ã‚ºã‚’å¤§ããã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ãƒã‚¤ãƒ³ãƒˆã®ã‚µã‚¤ã‚ºãŒå¤§ãã„ã»ã©ã€ãƒã‚¤ãƒ³ãƒˆã®å‘¨å›²ã«ãƒã‚¤ãƒ³ãƒˆãŒé›†ä¸­ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span>)<font></font>
df_counts = df.groupby([<span class="hljs-string">'hwy'</span>, <span class="hljs-string">'cty'</span>]).size().reset_index(name=<span class="hljs-string">'counts'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Stripplot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)    <font></font>
sns.scatterplot(df_counts.cty, df_counts.hwy, size=df_counts.counts*<span class="hljs-number">2</span>, ax=ax)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
plt.title(<span class="hljs-string">'Counts Plot - Size of circle is bigger as more points overlap'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/mo/ec/yc/moecyczknxw5dd-qwip1h293wp4.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.æ£’ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ©ã‚¤ãƒ³ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã«ã¯ã€Xè»¸ã¨Yè»¸ã®å¤‰æ•°ã«æ²¿ã£ãŸãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãŒã‚ã‚Šã€ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ã€Xã¨Yã®é–¢ä¿‚ã‚’ã€Xã¨Yã®1æ¬¡å…ƒåˆ†å¸ƒã¨ã¨ã‚‚ã«å€‹åˆ¥ã«è¦–è¦šåŒ–ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚°ãƒ©ãƒ•ã¯ã€ãƒ‡ãƒ¼ã‚¿åˆ†æï¼ˆEDAï¼‰ã§ã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Create Fig and gridspec</span>
fig = plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
grid = plt.GridSpec(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, hspace=<span class="hljs-number">0.5</span>, wspace=<span class="hljs-number">0.2</span>)<font></font>
<font></font>
<span class="hljs-comment"># Define the axes</span>
ax_main = fig.add_subplot(grid[:<span class="hljs-number">-1</span>, :<span class="hljs-number">-1</span>])<font></font>
ax_right = fig.add_subplot(grid[:<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>], xticklabels=[], yticklabels=[])<font></font>
ax_bottom = fig.add_subplot(grid[<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>:<span class="hljs-number">-1</span>], xticklabels=[], yticklabels=[])<font></font>
<font></font>
<span class="hljs-comment"># Scatterplot on main ax</span>
ax_main.scatter(<span class="hljs-string">'displ'</span>, <span class="hljs-string">'hwy'</span>, s=df.cty*<span class="hljs-number">4</span>, c=df.manufacturer.astype(<span class="hljs-string">'category'</span>).cat.codes, alpha=<span class="hljs-number">.9</span>, data=df, cmap=<span class="hljs-string">"tab10"</span>, edgecolors=<span class="hljs-string">'gray'</span>, linewidths=<span class="hljs-number">.5</span>)<font></font>
<font></font>
<span class="hljs-comment"># histogram on the right</span>
ax_bottom.hist(df.displ, <span class="hljs-number">40</span>, histtype=<span class="hljs-string">'stepfilled'</span>, orientation=<span class="hljs-string">'vertical'</span>, color=<span class="hljs-string">'deeppink'</span>)<font></font>
ax_bottom.invert_yaxis()<font></font>
<font></font>
<span class="hljs-comment"># histogram in the bottom</span>
ax_right.hist(df.hwy, <span class="hljs-number">40</span>, histtype=<span class="hljs-string">'stepfilled'</span>, orientation=<span class="hljs-string">'horizontal'</span>, color=<span class="hljs-string">'deeppink'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
ax_main.set(title=<span class="hljs-string">'Scatterplot with Histograms \n displ vs hwy'</span>, xlabel=<span class="hljs-string">'displ'</span>, ylabel=<span class="hljs-string">'hwy'</span>)<font></font>
ax_main.title.set_fontsize(<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> ([ax_main.xaxis.label, ax_main.yaxis.label] + ax_main.get_xticklabels() + ax_main.get_yticklabels()):<font></font>
    item.set_fontsize(<span class="hljs-number">14</span>)<font></font>
<font></font>
xlabels = ax_main.get_xticks().tolist()<font></font>
ax_main.set_xticklabels(xlabels)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/bz/fm/eg/bzfmegptclftfqmt0uv8cxxzomq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.ãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Boxplotã¯ã€è¡Œã”ã¨ã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã¨åŒã˜ç›®çš„ã‚’æœãŸã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ã“ã®ã‚°ãƒ©ãƒ•ã¯ã€Xã¨Yã®ä¸­å¤®å€¤ã€25ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ã€75ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ã‚’æ­£ç¢ºã«ç‰¹å®šã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Create Fig and gridspec</span>
fig = plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
grid = plt.GridSpec(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, hspace=<span class="hljs-number">0.5</span>, wspace=<span class="hljs-number">0.2</span>)<font></font>
<font></font>
<span class="hljs-comment"># Define the axes</span>
ax_main = fig.add_subplot(grid[:<span class="hljs-number">-1</span>, :<span class="hljs-number">-1</span>])<font></font>
ax_right = fig.add_subplot(grid[:<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>], xticklabels=[], yticklabels=[])<font></font>
ax_bottom = fig.add_subplot(grid[<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>:<span class="hljs-number">-1</span>], xticklabels=[], yticklabels=[])<font></font>
<font></font>
<span class="hljs-comment"># Scatterplot on main ax</span>
ax_main.scatter(<span class="hljs-string">'displ'</span>, <span class="hljs-string">'hwy'</span>, s=df.cty*<span class="hljs-number">5</span>, c=df.manufacturer.astype(<span class="hljs-string">'category'</span>).cat.codes, alpha=<span class="hljs-number">.9</span>, data=df, cmap=<span class="hljs-string">"Set1"</span>, edgecolors=<span class="hljs-string">'black'</span>, linewidths=<span class="hljs-number">.5</span>)<font></font>
<font></font>
<span class="hljs-comment"># Add a graph in each part</span>
sns.boxplot(df.hwy, ax=ax_right, orient=<span class="hljs-string">"v"</span>)<font></font>
sns.boxplot(df.displ, ax=ax_bottom, orient=<span class="hljs-string">"h"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations ------------------</span>
<span class="hljs-comment"># Remove x axis name for the boxplot</span>
ax_bottom.set(xlabel=<span class="hljs-string">''</span>)<font></font>
ax_right.set(ylabel=<span class="hljs-string">''</span>)<font></font>
<font></font>
<span class="hljs-comment"># Main Title, Xlabel and YLabel</span>
ax_main.set(title=<span class="hljs-string">'Scatterplot with Histograms \n displ vs hwy'</span>, xlabel=<span class="hljs-string">'displ'</span>, ylabel=<span class="hljs-string">'hwy'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Set font size of different components</span>
ax_main.title.set_fontsize(<span class="hljs-number">20</span>)
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> ([ax_main.xaxis.label, ax_main.yaxis.label] + ax_main.get_xticklabels() + ax_main.get_yticklabels()):<font></font>
    item.set_fontsize(<span class="hljs-number">14</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/3l/fq/wa/3lfqwa4qniqansvmy5eem7pjhcq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.ç›¸é–¢å›³</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›¸é–¢å›³ã¯ã€ç‰¹å®šã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆã¾ãŸã¯2æ¬¡å…ƒé…åˆ—ï¼‰å†…ã®ã™ã¹ã¦ã®å¯èƒ½ãªæ•°å€¤å¤‰æ•°ã®ãƒšã‚¢é–“ã®ç›¸é–¢ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Dataset</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.heatmap(df.corr(), xticklabels=df.corr().columns, yticklabels=df.corr().columns, cmap=<span class="hljs-string">'RdYlGn'</span>, center=<span class="hljs-number">0</span>, annot=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
plt.title(<span class="hljs-string">'Correlogram of mtcars'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.xticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.yticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/bx/gr/8q/bxgr8qqv0r8ksv2xeebh9j2zirs.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.ãƒšã‚¢ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç ”ç©¶åˆ†æã§ã‚ˆãä½¿ç”¨ã•ã‚Œã€æ•°å€¤å¤‰æ•°ã®ã™ã¹ã¦ã®å¯èƒ½ãªãƒšã‚¢é–“ã®é–¢ä¿‚ã‚’ç†è§£ã—â€‹â€‹ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€2æ¬¡å…ƒåˆ†æã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Load Dataset</span>
df = sns.load_dataset(<span class="hljs-string">'iris'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">10</span>,<span class="hljs-number">8</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.pairplot(df, kind=<span class="hljs-string">"scatter"</span>, hue=<span class="hljs-string">"species"</span>, plot_kws=dict(s=<span class="hljs-number">80</span>, edgecolor=<span class="hljs-string">"white"</span>, linewidth=<span class="hljs-number">2.5</span>))<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/l3/5n/rc/l35nrcu2srcuvvpdi6fiuwlxjsm.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Load Dataset</span>
df = sns.load_dataset(<span class="hljs-string">'iris'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">10</span>,<span class="hljs-number">8</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.pairplot(df, kind=<span class="hljs-string">"reg"</span>, hue=<span class="hljs-string">"species"</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
 <img src="https://habrastorage.org/webt/b7/vc/bq/b7vcbqwg6gbebqeg8dlnutmpz5m.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åå·®</font></font></h3><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.åˆ†å²ã™ã‚‹åˆ—</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦ç´ ãŒ1ã¤ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ã«å¿œã˜ã¦ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’ç¢ºèªã—ã€ã“ã®åˆ†æ•£ã®æ¬¡æ•°ã¨å¤§ãã•ã‚’è¦–è¦šåŒ–ã—ãŸã„å ´åˆã€åˆ†å²åˆ—ã¯å„ªã‚ŒãŸãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€ãƒ‡ãƒ¼ã‚¿å†…ã®ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ã™ã°ã‚„ãåŒºåˆ¥ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã€éå¸¸ã«ç›´æ„Ÿçš„ã§ã€ã™ãã«æ„å‘³ã‚’ä¼ãˆã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span>)<font></font>
x = df.loc[:, [<span class="hljs-string">'mpg'</span>]]<font></font>
df[<span class="hljs-string">'mpg_z'</span>] = (x - x.mean())/x.std()<font></font>
df[<span class="hljs-string">'colors'</span>] = [<span class="hljs-string">'red'</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'green'</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df[<span class="hljs-string">'mpg_z'</span>]]<font></font>
df.sort_values(<span class="hljs-string">'mpg_z'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=df.mpg_z, color=df.colors, alpha=<span class="hljs-number">0.4</span>, linewidth=<span class="hljs-number">5</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
plt.gca().set(ylabel=<span class="hljs-string">'$Model$'</span>, xlabel=<span class="hljs-string">'$Mileage$'</span>)<font></font>
plt.yticks(df.index, df.cars, fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">'Diverging Bars of Car Mileage'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">20</span>})<font></font>
plt.grid(linestyle=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/um/8o/na/um8onav0u5_esdezigrxhqm7hio.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.ãƒ†ã‚­ã‚¹ãƒˆã§åˆ—ã‚’åˆ†å²ã™ã‚‹</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -åˆ†å²åˆ—ã«ä¼¼ã¦ãŠã‚Šã€ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ å†…ã®å„è¦ç´ ã®é‡è¦æ€§ã‚’é©åˆ‡ã§è¦‹ã‚„ã™ã„å½¢ã§è¡¨ç¤ºã—ãŸã„å ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span>)<font></font>
x = df.loc[:, [<span class="hljs-string">'mpg'</span>]]<font></font>
df[<span class="hljs-string">'mpg_z'</span>] = (x - x.mean())/x.std()<font></font>
df[<span class="hljs-string">'colors'</span>] = [<span class="hljs-string">'red'</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'green'</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df[<span class="hljs-string">'mpg_z'</span>]]<font></font>
df.sort_values(<span class="hljs-string">'mpg_z'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">14</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=df.mpg_z)
<span class="hljs-keyword">for</span> x, y, tex <span class="hljs-keyword">in</span> zip(df.mpg_z, df.index, df.mpg_z):<font></font>
    t = plt.text(x, y, round(tex, <span class="hljs-number">2</span>), horizontalalignment=<span class="hljs-string">'right'</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'left'</span>, <font></font>
                 verticalalignment=<span class="hljs-string">'center'</span>, fontdict={<span class="hljs-string">'color'</span>:<span class="hljs-string">'red'</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'green'</span>, <span class="hljs-string">'size'</span>:<span class="hljs-number">14</span>})<font></font>
<font></font>
<span class="hljs-comment"># Decorations    </span>
plt.yticks(df.index, df.cars, fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">'Diverging Text Bars of Car Mileage'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">20</span>})<font></font>
plt.grid(linestyle=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.xlim(<span class="hljs-number">-2.5</span>, <span class="hljs-number">2.5</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/mj/ew/m3/mjewm3kaqdsmr0xeibikn57fqsk.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.åˆ†å²ç‚¹</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ†å²ç‚¹ã®ã‚°ãƒ©ãƒ•ã‚‚ã€åˆ†å²åˆ—ã¨ä¼¼ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ç™ºæ•£ã™ã‚‹åˆ—ã¨æ¯”è¼ƒã™ã‚‹ã¨ã€åˆ—ãŒãªã„ãŸã‚ã€ã‚°ãƒ«ãƒ¼ãƒ—é–“ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã¨ä¸ä¸€è‡´ã®ç¨‹åº¦ãŒå°ã•ããªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span>)<font></font>
x = df.loc[:, [<span class="hljs-string">'mpg'</span>]]<font></font>
df[<span class="hljs-string">'mpg_z'</span>] = (x - x.mean())/x.std()<font></font>
df[<span class="hljs-string">'colors'</span>] = [<span class="hljs-string">'red'</span> <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'darkgreen'</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df[<span class="hljs-string">'mpg_z'</span>]]<font></font>
df.sort_values(<span class="hljs-string">'mpg_z'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">16</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.scatter(df.mpg_z, df.index, s=<span class="hljs-number">450</span>, alpha=<span class="hljs-number">.6</span>, color=df.colors)
<span class="hljs-keyword">for</span> x, y, tex <span class="hljs-keyword">in</span> zip(df.mpg_z, df.index, df.mpg_z):<font></font>
    t = plt.text(x, y, round(tex, <span class="hljs-number">1</span>), horizontalalignment=<span class="hljs-string">'center'</span>, <font></font>
                 verticalalignment=<span class="hljs-string">'center'</span>, fontdict={<span class="hljs-string">'color'</span>:<span class="hljs-string">'white'</span>})<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
<font></font>
plt.yticks(df.index, df.cars)<font></font>
plt.title(<span class="hljs-string">'Diverging Dotplot of Car Mileage'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">20</span>})<font></font>
plt.xlabel(<span class="hljs-string">'$Mileage$'</span>)<font></font>
plt.grid(linestyle=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.xlim(<span class="hljs-number">-2.5</span>, <span class="hljs-number">2.5</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/1d/jo/zb/1djozbrk93362fhaqqiurq9n0bu.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.ãƒãƒ¼ã‚«ãƒ¼ä»˜ãã®ç™ºæ•£ãƒ­ãƒªãƒãƒƒãƒ—ãƒãƒ£ãƒ¼ãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lollipopã¯ã€æ³¨æ„ã‚’æ‰•ã„ãŸã„é–¢é€£ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã«ç„¦ç‚¹ã‚’åˆã‚ã›ã¦ã€ä¸ä¸€è‡´ã‚’è¦–è¦šåŒ–ã™ã‚‹æŸ”è»Ÿãªæ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span>)<font></font>
x = df.loc[:, [<span class="hljs-string">'mpg'</span>]]<font></font>
df[<span class="hljs-string">'mpg_z'</span>] = (x - x.mean())/x.std()<font></font>
df[<span class="hljs-string">'colors'</span>] = <span class="hljs-string">'black'</span><font></font>
<font></font>
<span class="hljs-comment"># color fiat differently</span>
df.loc[df.cars == <span class="hljs-string">'Fiat X1-9'</span>, <span class="hljs-string">'colors'</span>] = <span class="hljs-string">'darkorange'</span>
df.sort_values(<span class="hljs-string">'mpg_z'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-comment"># Draw plot</span>
<span class="hljs-keyword">import</span> matplotlib.patches <span class="hljs-keyword">as</span> patches<font></font>
<font></font>
plt.figure(figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">16</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=df.mpg_z, color=df.colors, alpha=<span class="hljs-number">0.4</span>, linewidth=<span class="hljs-number">1</span>)<font></font>
plt.scatter(df.mpg_z, df.index, color=df.colors, s=[<span class="hljs-number">600</span> <span class="hljs-keyword">if</span> x == <span class="hljs-string">'Fiat X1-9'</span> <span class="hljs-keyword">else</span> <span class="hljs-number">300</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df.cars], alpha=<span class="hljs-number">0.6</span>)<font></font>
plt.yticks(df.index, df.cars)<font></font>
plt.xticks(fontsize=<span class="hljs-number">12</span>)<font></font>
<font></font>
<span class="hljs-comment"># Annotate</span>
plt.annotate(<span class="hljs-string">'Mercedes Models'</span>, xy=(<span class="hljs-number">0.0</span>, <span class="hljs-number">11.0</span>), xytext=(<span class="hljs-number">1.0</span>, <span class="hljs-number">11</span>), xycoords=<span class="hljs-string">'data'</span>, <font></font>
            fontsize=<span class="hljs-number">15</span>, ha=<span class="hljs-string">'center'</span>, va=<span class="hljs-string">'center'</span>,<font></font>
            bbox=dict(boxstyle=<span class="hljs-string">'square'</span>, fc=<span class="hljs-string">'firebrick'</span>),<font></font>
            arrowprops=dict(arrowstyle=<span class="hljs-string">'-[, widthB=2.0, lengthB=1.5'</span>, lw=<span class="hljs-number">2.0</span>, color=<span class="hljs-string">'steelblue'</span>), color=<span class="hljs-string">'white'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Add Patches</span>
p1 = patches.Rectangle((<span class="hljs-number">-2.0</span>, <span class="hljs-number">-1</span>), width=<span class="hljs-number">.3</span>, height=<span class="hljs-number">3</span>, alpha=<span class="hljs-number">.2</span>, facecolor=<span class="hljs-string">'red'</span>)<font></font>
p2 = patches.Rectangle((<span class="hljs-number">1.5</span>, <span class="hljs-number">27</span>), width=<span class="hljs-number">.8</span>, height=<span class="hljs-number">5</span>, alpha=<span class="hljs-number">.2</span>, facecolor=<span class="hljs-string">'green'</span>)<font></font>
plt.gca().add_patch(p1)<font></font>
plt.gca().add_patch(p2)<font></font>
<font></font>
<span class="hljs-comment"># Decorate</span>
plt.title(<span class="hljs-string">'Diverging Bars of Car Mileage'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">20</span>})<font></font>
plt.grid(linestyle=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/y-/dz/ke/y-dzkeakaw6srdwg1ygg3v9f_ei.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.é¢ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è»¸ã¨ç·šã®é–“ã®ã‚¨ãƒªã‚¢ã«è‰²ã‚’ä»˜ã‘ã‚‹ã¨ã€ã‚¨ãƒªã‚¢ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ã¯ãƒ”ãƒ¼ã‚¯ã¨è°·ã‚’å¼·èª¿ã—ã¾ã™ãŒã€é«˜å€¤ã¨å®‰å€¤ã®æœŸé–“ã‚‚å¼·èª¿ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ”ãƒ¼ã‚¯ãŒé•·ã„ã»ã©ã€ç·šã®ä¸‹ã®é ˜åŸŸãŒåºƒããªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/economics.csv"</span>, parse_dates=[<span class="hljs-string">'date'</span>]).head(<span class="hljs-number">100</span>)<font></font>
x = np.arange(df.shape[<span class="hljs-number">0</span>])<font></font>
y_returns = (df.psavert.diff().fillna(<span class="hljs-number">0</span>)/df.psavert.shift(<span class="hljs-number">1</span>)).fillna(<span class="hljs-number">0</span>) * <span class="hljs-number">100</span><font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.fill_between(x[<span class="hljs-number">1</span>:], y_returns[<span class="hljs-number">1</span>:], <span class="hljs-number">0</span>, where=y_returns[<span class="hljs-number">1</span>:] &gt;= <span class="hljs-number">0</span>, facecolor=<span class="hljs-string">'green'</span>, interpolate=<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
plt.fill_between(x[<span class="hljs-number">1</span>:], y_returns[<span class="hljs-number">1</span>:], <span class="hljs-number">0</span>, where=y_returns[<span class="hljs-number">1</span>:] &lt;= <span class="hljs-number">0</span>, facecolor=<span class="hljs-string">'red'</span>, interpolate=<span class="hljs-literal">True</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
<span class="hljs-comment"># Annotate</span>
plt.annotate(<span class="hljs-string">'Peak \n1975'</span>, xy=(<span class="hljs-number">94.0</span>, <span class="hljs-number">21.0</span>), xytext=(<span class="hljs-number">88.0</span>, <span class="hljs-number">28</span>),<font></font>
             bbox=dict(boxstyle=<span class="hljs-string">'square'</span>, fc=<span class="hljs-string">'firebrick'</span>),<font></font>
             arrowprops=dict(facecolor=<span class="hljs-string">'steelblue'</span>, shrink=<span class="hljs-number">0.05</span>), fontsize=<span class="hljs-number">15</span>, color=<span class="hljs-string">'white'</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
xtickvals = [str(m)[:<span class="hljs-number">3</span>].upper()+<span class="hljs-string">"-"</span>+str(y) <span class="hljs-keyword">for</span> y,m <span class="hljs-keyword">in</span> zip(df.date.dt.year, df.date.dt.month_name())]<font></font>
plt.gca().set_xticks(x[::<span class="hljs-number">6</span>])<font></font>
plt.gca().set_xticklabels(xtickvals[::<span class="hljs-number">6</span>], rotation=<span class="hljs-number">90</span>, fontdict={<span class="hljs-string">'horizontalalignment'</span>: <span class="hljs-string">'center'</span>, <span class="hljs-string">'verticalalignment'</span>: <span class="hljs-string">'center_baseline'</span>})<font></font>
plt.ylim(<span class="hljs-number">-35</span>,<span class="hljs-number">35</span>)<font></font>
plt.xlim(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>)<font></font>
plt.title(<span class="hljs-string">"Month Economics Return %"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.ylabel(<span class="hljs-string">'Monthly returns %'</span>)<font></font>
plt.grid(alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/az/tl/hz/aztlhzdib5bvleiksqjq8cdgc5e.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°</font></font></h3><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.é †åºä»˜ã‘ã‚‰ã‚ŒãŸãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é †åºä»˜ã‘ã‚‰ã‚ŒãŸãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã¯ã€è¦ç´ ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°é †åºã‚’åŠ¹æœçš„ã«ä¼ãˆã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ã‚°ãƒ©ãƒ•ã®ä¸Šã«ãƒ¡ãƒˆãƒªãƒƒã‚¯å€¤ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚°ãƒ©ãƒ•è‡ªä½“ã‹ã‚‰æ­£ç¢ºãªæƒ…å ±ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
df = df_raw[[<span class="hljs-string">'cty'</span>, <span class="hljs-string">'manufacturer'</span>]].groupby(<span class="hljs-string">'manufacturer'</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())<font></font>
df.sort_values(<span class="hljs-string">'cty'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw plot</span>
<span class="hljs-keyword">import</span> matplotlib.patches <span class="hljs-keyword">as</span> patches<font></font>
<font></font>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), facecolor=<span class="hljs-string">'white'</span>, dpi= <span class="hljs-number">80</span>)<font></font>
ax.vlines(x=df.index, ymin=<span class="hljs-number">0</span>, ymax=df.cty, color=<span class="hljs-string">'firebrick'</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">20</span>)<font></font>
<font></font>
<span class="hljs-comment"># Annotate Text</span>
<span class="hljs-keyword">for</span> i, cty <span class="hljs-keyword">in</span> enumerate(df.cty):<font></font>
    ax.text(i, cty+<span class="hljs-number">0.5</span>, round(cty, <span class="hljs-number">1</span>), horizontalalignment=<span class="hljs-string">'center'</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-comment"># Title, Label, Ticks and Ylim</span>
ax.set_title(<span class="hljs-string">'Bar Chart for Highway Mileage'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">22</span>})<font></font>
ax.set(ylabel=<span class="hljs-string">'Miles Per Gallon'</span>, ylim=(<span class="hljs-number">0</span>, <span class="hljs-number">30</span>))<font></font>
plt.xticks(df.index, df.manufacturer.str.upper(), rotation=<span class="hljs-number">60</span>, horizontalalignment=<span class="hljs-string">'right'</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
<font></font>
<span class="hljs-comment"># Add patches to color the X axis labels</span>
p1 = patches.Rectangle((<span class="hljs-number">.57</span>, <span class="hljs-number">-0.005</span>), width=<span class="hljs-number">.33</span>, height=<span class="hljs-number">.13</span>, alpha=<span class="hljs-number">.1</span>, facecolor=<span class="hljs-string">'green'</span>, transform=fig.transFigure)<font></font>
p2 = patches.Rectangle((<span class="hljs-number">.124</span>, <span class="hljs-number">-0.005</span>), width=<span class="hljs-number">.446</span>, height=<span class="hljs-number">.13</span>, alpha=<span class="hljs-number">.1</span>, facecolor=<span class="hljs-string">'red'</span>, transform=fig.transFigure)<font></font>
fig.add_artist(p1)<font></font>
fig.add_artist(p2)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/py/m1/2k/pym12kmdmbv6gyn16pdhncin9oe.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16.ãƒ­ãƒªãƒãƒƒãƒ—ãƒãƒ£ãƒ¼ãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ­ãƒªãƒãƒƒãƒ—ãƒãƒ£ãƒ¼ãƒˆã¯ã€è¦–è¦šçš„ã«æ¥½ã—ã„æ–¹æ³•ã§é †åºä»˜ã‘ã‚‰ã‚ŒãŸãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã¨åŒã˜ç›®çš„ã‚’æœãŸã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
df = df_raw[[<span class="hljs-string">'cty'</span>, <span class="hljs-string">'manufacturer'</span>]].groupby(<span class="hljs-string">'manufacturer'</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())<font></font>
df.sort_values(<span class="hljs-string">'cty'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw plot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
ax.vlines(x=df.index, ymin=<span class="hljs-number">0</span>, ymax=df.cty, color=<span class="hljs-string">'firebrick'</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">2</span>)<font></font>
ax.scatter(x=df.index, y=df.cty, s=<span class="hljs-number">75</span>, color=<span class="hljs-string">'firebrick'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
<span class="hljs-comment"># Title, Label, Ticks and Ylim</span>
ax.set_title(<span class="hljs-string">'Lollipop Chart for Highway Mileage'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">22</span>})<font></font>
ax.set_ylabel(<span class="hljs-string">'Miles Per Gallon'</span>)<font></font>
ax.set_xticks(df.index)<font></font>
ax.set_xticklabels(df.manufacturer.str.upper(), rotation=<span class="hljs-number">60</span>, fontdict={<span class="hljs-string">'horizontalalignment'</span>: <span class="hljs-string">'right'</span>, <span class="hljs-string">'size'</span>:<span class="hljs-number">12</span>})<font></font>
ax.set_ylim(<span class="hljs-number">0</span>, <span class="hljs-number">30</span>)<font></font>
<font></font>
<span class="hljs-comment"># Annotate</span>
<span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> df.itertuples():<font></font>
    ax.text(row.Index, row.cty+<span class="hljs-number">.5</span>, s=round(row.cty, <span class="hljs-number">2</span>), horizontalalignment= <span class="hljs-string">'center'</span>, verticalalignment=<span class="hljs-string">'bottom'</span>, fontsize=<span class="hljs-number">14</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/f3/yp/20/f3yp20u2l7y0wak5asj3epjdm78.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.ç½²åä»˜ãã®ç‚¹ç·šã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ•£å¸ƒå›³ã¯ã€ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€æ°´å¹³è»¸ã«æ²¿ã£ã¦é…ç½®ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒã‚¤ãƒ³ãƒˆãŒäº’ã„ã«ã©ã®ãã‚‰ã„é›¢ã‚Œã¦ã„ã‚‹ã‹ã‚’è¦–è¦šçš„ã«è©•ä¾¡ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
df = df_raw[[<span class="hljs-string">'cty'</span>, <span class="hljs-string">'manufacturer'</span>]].groupby(<span class="hljs-string">'manufacturer'</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())<font></font>
df.sort_values(<span class="hljs-string">'cty'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw plot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
ax.hlines(y=df.index, xmin=<span class="hljs-number">11</span>, xmax=<span class="hljs-number">26</span>, color=<span class="hljs-string">'gray'</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">'dashdot'</span>)<font></font>
ax.scatter(y=df.index, x=df.cty, s=<span class="hljs-number">75</span>, color=<span class="hljs-string">'firebrick'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
<span class="hljs-comment"># Title, Label, Ticks and Ylim</span>
ax.set_title(<span class="hljs-string">'Dot Plot for Highway Mileage'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">22</span>})<font></font>
ax.set_xlabel(<span class="hljs-string">'Miles Per Gallon'</span>)<font></font>
ax.set_yticks(df.index)<font></font>
ax.set_yticklabels(df.manufacturer.str.title(), fontdict={<span class="hljs-string">'horizontalalignment'</span>: <span class="hljs-string">'right'</span>})<font></font>
ax.set_xlim(<span class="hljs-number">10</span>, <span class="hljs-number">27</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/br/zl/gz/brzlgzmep-b4lwiasjknmo6ljia.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.å‚¾æ–œãƒãƒƒãƒ—</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¹ãƒ­ãƒ¼ãƒ—ãƒãƒ£ãƒ¼ãƒˆã¯ã€ç‰¹å®šã®äººç‰©/è¢«é¨“è€…ã®ã€Œå‰ã€ã¨ã€Œå¾Œã€ã®ä½ç½®ã‚’æ¯”è¼ƒã™ã‚‹ã®ã«æœ€é©ã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> matplotlib.lines <span class="hljs-keyword">as</span> mlines
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/gdppercap.csv"</span>)<font></font>
<font></font>
left_label = [str(c) + <span class="hljs-string">', '</span>+ str(round(y)) <span class="hljs-keyword">for</span> c, y <span class="hljs-keyword">in</span> zip(df.continent, df[<span class="hljs-string">'1952'</span>])]<font></font>
right_label = [str(c) + <span class="hljs-string">', '</span>+ str(round(y)) <span class="hljs-keyword">for</span> c, y <span class="hljs-keyword">in</span> zip(df.continent, df[<span class="hljs-string">'1957'</span>])]<font></font>
klass = [<span class="hljs-string">'red'</span> <span class="hljs-keyword">if</span> (y1-y2) &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'green'</span> <span class="hljs-keyword">for</span> y1, y2 <span class="hljs-keyword">in</span> zip(df[<span class="hljs-string">'1952'</span>], df[<span class="hljs-string">'1957'</span>])]<font></font>
<font></font>
<span class="hljs-comment"># draw line</span>
<span class="hljs-comment"># https://stackoverflow.com/questions/36470343/how-to-draw-a-line-with-matplotlib/36479941</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newline</span>(<span class="hljs-params">p1, p2, color=<span class="hljs-string">'black'</span></span>):</span><font></font>
    ax = plt.gca()<font></font>
    l = mlines.Line2D([p1[<span class="hljs-number">0</span>],p2[<span class="hljs-number">0</span>]], [p1[<span class="hljs-number">1</span>],p2[<span class="hljs-number">1</span>]], color=<span class="hljs-string">'red'</span> <span class="hljs-keyword">if</span> p1[<span class="hljs-number">1</span>]-p2[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'green'</span>, marker=<span class="hljs-string">'o'</span>, markersize=<span class="hljs-number">6</span>)<font></font>
    ax.add_line(l)<font></font>
    <span class="hljs-keyword">return</span> l<font></font>
<font></font>
fig, ax = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">14</span>), dpi= <span class="hljs-number">80</span>)<font></font>
<font></font>
<span class="hljs-comment"># Vertical Lines</span>
ax.vlines(x=<span class="hljs-number">1</span>, ymin=<span class="hljs-number">500</span>, ymax=<span class="hljs-number">13000</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">'dotted'</span>)<font></font>
ax.vlines(x=<span class="hljs-number">3</span>, ymin=<span class="hljs-number">500</span>, ymax=<span class="hljs-number">13000</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">'dotted'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Points</span>
ax.scatter(y=df[<span class="hljs-string">'1952'</span>], x=np.repeat(<span class="hljs-number">1</span>, df.shape[<span class="hljs-number">0</span>]), s=<span class="hljs-number">10</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.scatter(y=df[<span class="hljs-string">'1957'</span>], x=np.repeat(<span class="hljs-number">3</span>, df.shape[<span class="hljs-number">0</span>]), s=<span class="hljs-number">10</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
<span class="hljs-comment"># Line Segmentsand Annotation</span>
<span class="hljs-keyword">for</span> p1, p2, c <span class="hljs-keyword">in</span> zip(df[<span class="hljs-string">'1952'</span>], df[<span class="hljs-string">'1957'</span>], df[<span class="hljs-string">'continent'</span>]):<font></font>
    newline([<span class="hljs-number">1</span>,p1], [<span class="hljs-number">3</span>,p2])<font></font>
    ax.text(<span class="hljs-number">1</span><span class="hljs-number">-0.05</span>, p1, c + <span class="hljs-string">', '</span> + str(round(p1)), horizontalalignment=<span class="hljs-string">'right'</span>, verticalalignment=<span class="hljs-string">'center'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">14</span>})<font></font>
    ax.text(<span class="hljs-number">3</span>+<span class="hljs-number">0.05</span>, p2, c + <span class="hljs-string">', '</span> + str(round(p2)), horizontalalignment=<span class="hljs-string">'left'</span>, verticalalignment=<span class="hljs-string">'center'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">14</span>})<font></font>
<font></font>
<span class="hljs-comment"># 'Before' and 'After' Annotations</span>
ax.text(<span class="hljs-number">1</span><span class="hljs-number">-0.05</span>, <span class="hljs-number">13000</span>, <span class="hljs-string">'BEFORE'</span>, horizontalalignment=<span class="hljs-string">'right'</span>, verticalalignment=<span class="hljs-string">'center'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">18</span>, <span class="hljs-string">'weight'</span>:<span class="hljs-number">700</span>})<font></font>
ax.text(<span class="hljs-number">3</span>+<span class="hljs-number">0.05</span>, <span class="hljs-number">13000</span>, <span class="hljs-string">'AFTER'</span>, horizontalalignment=<span class="hljs-string">'left'</span>, verticalalignment=<span class="hljs-string">'center'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">18</span>, <span class="hljs-string">'weight'</span>:<span class="hljs-number">700</span>})<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
ax.set_title(<span class="hljs-string">"Slopechart: Comparing GDP Per Capita between 1952 vs 1957"</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">22</span>})<font></font>
ax.set(xlim=(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>), ylim=(<span class="hljs-number">0</span>,<span class="hljs-number">14000</span>), ylabel=<span class="hljs-string">'Mean GDP Per Capita'</span>)<font></font>
ax.set_xticks([<span class="hljs-number">1</span>,<span class="hljs-number">3</span>])<font></font>
ax.set_xticklabels([<span class="hljs-string">"1952"</span>, <span class="hljs-string">"1957"</span>])<font></font>
plt.yticks(np.arange(<span class="hljs-number">500</span>, <span class="hljs-number">13000</span>, <span class="hljs-number">2000</span>), fontsize=<span class="hljs-number">12</span>)<font></font>
<font></font>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">.0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">.0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.0</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/m2/m6/bg/m2m6bgm4jzsjlxet6lkqfmdl3ra.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.ã€Œãƒ€ãƒ³ãƒ™ãƒ«ã€</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œãƒ€ãƒ³ãƒ™ãƒ«ã€ã‚°ãƒ©ãƒ•ã¯ã€ã•ã¾ã–ã¾ãªå½±éŸ¿ã®ã€Œå‰ã€ã¨ã€Œå¾Œã€ã®ä½ç½®ã€ãŠã‚ˆã³ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°é †åºã‚’ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€ã•ã¾ã–ã¾ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã™ã‚‹ä½•ã‹ã®åŠ¹æœã‚’è¦–è¦šåŒ–ã™ã‚‹å ´åˆã«éå¸¸ã«å½¹ç«‹ã¡ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> matplotlib.lines <span class="hljs-keyword">as</span> mlines<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/health.csv"</span>)<font></font>
df.sort_values(<span class="hljs-string">'pct_2014'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Func to draw line segment</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">newline</span>(<span class="hljs-params">p1, p2, color=<span class="hljs-string">'black'</span></span>):</span><font></font>
    ax = plt.gca()<font></font>
    l = mlines.Line2D([p1[<span class="hljs-number">0</span>],p2[<span class="hljs-number">0</span>]], [p1[<span class="hljs-number">1</span>],p2[<span class="hljs-number">1</span>]], color=<span class="hljs-string">'skyblue'</span>)<font></font>
    ax.add_line(l)<font></font>
    <span class="hljs-keyword">return</span> l<font></font>
<font></font>
<span class="hljs-comment"># Figure and Axes</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">14</span>), facecolor=<span class="hljs-string">'#f7f7f7'</span>, dpi= <span class="hljs-number">80</span>)<font></font>
<font></font>
<span class="hljs-comment"># Vertical Lines</span>
ax.vlines(x=<span class="hljs-number">.05</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">'dotted'</span>)<font></font>
ax.vlines(x=<span class="hljs-number">.10</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">'dotted'</span>)<font></font>
ax.vlines(x=<span class="hljs-number">.15</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">'dotted'</span>)<font></font>
ax.vlines(x=<span class="hljs-number">.20</span>, ymin=<span class="hljs-number">0</span>, ymax=<span class="hljs-number">26</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">1</span>, linewidth=<span class="hljs-number">1</span>, linestyles=<span class="hljs-string">'dotted'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Points</span>
ax.scatter(y=df[<span class="hljs-string">'index'</span>], x=df[<span class="hljs-string">'pct_2013'</span>], s=<span class="hljs-number">50</span>, color=<span class="hljs-string">'#0e668b'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.scatter(y=df[<span class="hljs-string">'index'</span>], x=df[<span class="hljs-string">'pct_2014'</span>], s=<span class="hljs-number">50</span>, color=<span class="hljs-string">'#a3c4dc'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
<span class="hljs-comment"># Line Segments</span>
<span class="hljs-keyword">for</span> i, p1, p2 <span class="hljs-keyword">in</span> zip(df[<span class="hljs-string">'index'</span>], df[<span class="hljs-string">'pct_2013'</span>], df[<span class="hljs-string">'pct_2014'</span>]):<font></font>
    newline([p1, i], [p2, i])<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
ax.set_facecolor(<span class="hljs-string">'#f7f7f7'</span>)<font></font>
ax.set_title(<span class="hljs-string">"Dumbell Chart: Pct Change - 2013 vs 2014"</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">22</span>})<font></font>
ax.set(xlim=(<span class="hljs-number">0</span>,<span class="hljs-number">.25</span>), ylim=(<span class="hljs-number">-1</span>, <span class="hljs-number">27</span>), ylabel=<span class="hljs-string">'Mean GDP Per Capita'</span>)<font></font>
ax.set_xticks([<span class="hljs-number">.05</span>, <span class="hljs-number">.1</span>, <span class="hljs-number">.15</span>, <span class="hljs-number">.20</span>])<font></font>
ax.set_xticklabels([<span class="hljs-string">'5%'</span>, <span class="hljs-string">'15%'</span>, <span class="hljs-string">'20%'</span>, <span class="hljs-string">'25%'</span>])<font></font>
ax.set_xticklabels([<span class="hljs-string">'5%'</span>, <span class="hljs-string">'15%'</span>, <span class="hljs-string">'20%'</span>, <span class="hljs-string">'25%'</span>])    <font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/fg/fu/xe/fgfuxesxmltrzrsbd5m1jdv5asu.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ†å¸ƒ</font></font></h3><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.é€£ç¶šå¤‰æ•°ã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã¯ã€ã“ã®å¤‰æ•°ã®åº¦æ•°åˆ†å¸ƒã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ã«åŸºã¥ã„ã¦å‘¨æ³¢æ•°å¸¯åŸŸã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare data</span>
x_var = <span class="hljs-string">'displ'</span>
groupby_var = <span class="hljs-string">'class'</span><font></font>
df_agg = df.loc[:, [x_var, groupby_var]].groupby(groupby_var)<font></font>
vals = [df[x_var].values.tolist() <span class="hljs-keyword">for</span> i, df <span class="hljs-keyword">in</span> df_agg]<font></font>
<font></font>
<span class="hljs-comment"># Draw</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)<font></font>
colors = [plt.cm.Spectral(i/float(len(vals)<span class="hljs-number">-1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(vals))]<font></font>
n, bins, patches = plt.hist(vals, <span class="hljs-number">30</span>, stacked=<span class="hljs-literal">True</span>, density=<span class="hljs-literal">False</span>, color=colors[:len(vals)])<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.legend({group:col <span class="hljs-keyword">for</span> group, col <span class="hljs-keyword">in</span> zip(np.unique(df[groupby_var]).tolist(), colors[:len(vals)])})<font></font>
plt.title(<span class="hljs-string">f"Stacked Histogram of $<span class="hljs-subst">{x_var}</span>$ colored by $<span class="hljs-subst">{groupby_var}</span>$"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.xlabel(x_var)<font></font>
plt.ylabel(<span class="hljs-string">"Frequency"</span>)<font></font>
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">25</span>)<font></font>
plt.xticks(ticks=bins[::<span class="hljs-number">3</span>], labels=[round(b,<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> bins[::<span class="hljs-number">3</span>]])<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/8a/2k/ds/8a2kds04cklb8osl4vt4gijz5sa.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21.ã‚«ãƒ†ã‚´ãƒªãƒ¼å¤‰æ•°ã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚«ãƒ†ã‚´ãƒªãƒ¼å¤‰æ•°ã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã¯ã€ã“ã®å¤‰æ•°ã®é »åº¦åˆ†å¸ƒã‚’ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åˆ—ã«è‰²ã‚’ä»˜ã‘ã‚‹ã¨ã€è‰²ã‚’è¡¨ã™åˆ¥ã®ã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ã¨ã®é–¢ä¿‚ã§åˆ†å¸ƒã‚’è¦–è¦šåŒ–ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare data</span>
x_var = <span class="hljs-string">'manufacturer'</span>
groupby_var = <span class="hljs-string">'class'</span><font></font>
df_agg = df.loc[:, [x_var, groupby_var]].groupby(groupby_var)<font></font>
vals = [df[x_var].values.tolist() <span class="hljs-keyword">for</span> i, df <span class="hljs-keyword">in</span> df_agg]<font></font>
<font></font>
<span class="hljs-comment"># Draw</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)<font></font>
colors = [plt.cm.Spectral(i/float(len(vals)<span class="hljs-number">-1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(vals))]<font></font>
n, bins, patches = plt.hist(vals, df[x_var].unique().__len__(), stacked=<span class="hljs-literal">True</span>, density=<span class="hljs-literal">False</span>, color=colors[:len(vals)])<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.legend({group:col <span class="hljs-keyword">for</span> group, col <span class="hljs-keyword">in</span> zip(np.unique(df[groupby_var]).tolist(), colors[:len(vals)])})<font></font>
plt.title(<span class="hljs-string">f"Stacked Histogram of $<span class="hljs-subst">{x_var}</span>$ colored by $<span class="hljs-subst">{groupby_var}</span>$"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.xlabel(x_var)<font></font>
plt.ylabel(<span class="hljs-string">"Frequency"</span>)<font></font>
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">40</span>)<font></font>
plt.xticks(ticks=bins, labels=np.unique(df[x_var]).tolist(), rotation=<span class="hljs-number">90</span>, horizontalalignment=<span class="hljs-string">'left'</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/mr/c7/6y/mrc76yjwi_mq2vdcdcjrqhpd0pg.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.å¯†åº¦ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯†åº¦ã‚°ãƒ©ãƒ•ã¯ã€é€£ç¶šå¤‰æ•°ã®åˆ†å¸ƒã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã«åºƒãä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã‚’å¤‰æ•°ã€Œå¿œç­”ã€ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ã¨ã€Xã¨Yã®é–¢ä¿‚ã‚’ç¢ºèªã§ãã¾ã™ã€‚ä»¥ä¸‹ã¯ã€æ˜ç¢ºã«ã™ã‚‹ãŸã‚ã«ã€ã‚·ãƒªãƒ³ãƒ€ãƒ¼ã®æ•°ã«ã‚ˆã£ã¦éƒ½å¸‚ã®èµ°è¡Œè·é›¢ã®åˆ†å¸ƒãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’èª¬æ˜ã™ã‚‹ä¾‹ã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.kdeplot(df.loc[df[<span class="hljs-string">'cyl'</span>] == <span class="hljs-number">4</span>, <span class="hljs-string">"cty"</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">"g"</span>, label=<span class="hljs-string">"Cyl=4"</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
sns.kdeplot(df.loc[df[<span class="hljs-string">'cyl'</span>] == <span class="hljs-number">5</span>, <span class="hljs-string">"cty"</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">"deeppink"</span>, label=<span class="hljs-string">"Cyl=5"</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
sns.kdeplot(df.loc[df[<span class="hljs-string">'cyl'</span>] == <span class="hljs-number">6</span>, <span class="hljs-string">"cty"</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">"dodgerblue"</span>, label=<span class="hljs-string">"Cyl=6"</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
sns.kdeplot(df.loc[df[<span class="hljs-string">'cyl'</span>] == <span class="hljs-number">8</span>, <span class="hljs-string">"cty"</span>], shade=<span class="hljs-literal">True</span>, color=<span class="hljs-string">"orange"</span>, label=<span class="hljs-string">"Cyl=8"</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">'Density Plot of City Mileage by n_Cylinders'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.legend()<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/wb/ir/sx/wbirsxdpgtbuinkmarizydudkpe.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ä»˜ãã®å¯†åº¦æ›²ç·š</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ä»˜ãã®å¯†åº¦æ›²ç·šã¯ã€2ã¤ã®ã‚°ãƒ©ãƒ•ã«ã‚ˆã£ã¦é€ä¿¡ã•ã‚ŒãŸè¦ç´„æƒ…å ±ã‚’çµ„ã¿åˆã‚ã›ã¦ã„ã‚‹ãŸã‚ã€ä¸¡æ–¹ã‚’1ã‹æ‰€ã§ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.distplot(df.loc[df[<span class="hljs-string">'class'</span>] == <span class="hljs-string">'compact'</span>, <span class="hljs-string">"cty"</span>], color=<span class="hljs-string">"dodgerblue"</span>, label=<span class="hljs-string">"Compact"</span>, hist_kws={<span class="hljs-string">'alpha'</span>:<span class="hljs-number">.7</span>}, kde_kws={<span class="hljs-string">'linewidth'</span>:<span class="hljs-number">3</span>})<font></font>
sns.distplot(df.loc[df[<span class="hljs-string">'class'</span>] == <span class="hljs-string">'suv'</span>, <span class="hljs-string">"cty"</span>], color=<span class="hljs-string">"orange"</span>, label=<span class="hljs-string">"SUV"</span>, hist_kws={<span class="hljs-string">'alpha'</span>:<span class="hljs-number">.7</span>}, kde_kws={<span class="hljs-string">'linewidth'</span>:<span class="hljs-number">3</span>})<font></font>
sns.distplot(df.loc[df[<span class="hljs-string">'class'</span>] == <span class="hljs-string">'minivan'</span>, <span class="hljs-string">"cty"</span>], color=<span class="hljs-string">"g"</span>, label=<span class="hljs-string">"minivan"</span>, hist_kws={<span class="hljs-string">'alpha'</span>:<span class="hljs-number">.7</span>}, kde_kws={<span class="hljs-string">'linewidth'</span>:<span class="hljs-number">3</span>})<font></font>
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">0.35</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">'Density Plot of City Mileage by Vehicle Type'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.legend()<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ms/db/8_/msdb8_z8c4bo6ztihrk0c3n_3cs.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.å–œã³ã®ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¸ãƒ§ã‚¤ãƒãƒ£ãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã•ã¾ã–ã¾ãªã‚°ãƒ«ãƒ¼ãƒ—ã®å¯†åº¦æ›²ç·šã‚’é‡ã­ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€å¤šæ•°ã®ã‚°ãƒ«ãƒ¼ãƒ—ã®åˆ†å¸ƒã‚’ç›¸äº’ã«é–¢é€£ã•ã›ã¦è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã®å„ªã‚ŒãŸæ–¹æ³•ã§ã™ã€‚</font><font style="vertical-align: inherit;">è¦‹ãŸç›®ã‚‚æ¥½ã—ã„ã—ã€æ­£ã—ã„æƒ…å ±ã ã‘ãŒã¯ã£ãã‚Šä¼ã‚ã‚‹ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># !pip install joypy</span>
<span class="hljs-comment"># Import Data</span>
mpg = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
fig, axes = joypy.joyplot(mpg, column=[<span class="hljs-string">'hwy'</span>, <span class="hljs-string">'cty'</span>], by=<span class="hljs-string">"class"</span>, ylim=<span class="hljs-string">'own'</span>, figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">10</span>))<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">'Joy Plot of City and Highway Mileage by Class'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/6l/zd/5g/6lzd5gbesikmcrdlth3zcd8wgyw.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25.åˆ†æ•£æ•£å¸ƒå›³</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ†æ•£æ•£å¸ƒå›³ã¯ã€ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†å‰²ã•ã‚ŒãŸç‚¹ã®ä¸€æ¬¡å…ƒåˆ†å¸ƒã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒã‚¤ãƒ³ãƒˆãŒæš—ã„ã»ã©ã€ã“ã®é ˜åŸŸã®ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆã®é›†ä¸­åº¦ãŒé«˜ããªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã¾ã–ã¾ãªæ–¹æ³•ã§ã€ä¸­å¤®å€¤ã‚’è‰²ä»˜ã‘ã™ã‚‹ã¨ã€ã‚°ãƒ«ãƒ¼ãƒ—ã®å®Ÿéš›ã®é…ç½®ãŒã™ãã«æ˜ã‚‰ã‹ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> matplotlib.patches <span class="hljs-keyword">as</span> mpatches<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
cyl_colors = {<span class="hljs-number">4</span>:<span class="hljs-string">'tab:red'</span>, <span class="hljs-number">5</span>:<span class="hljs-string">'tab:green'</span>, <span class="hljs-number">6</span>:<span class="hljs-string">'tab:blue'</span>, <span class="hljs-number">8</span>:<span class="hljs-string">'tab:orange'</span>}<font></font>
df_raw[<span class="hljs-string">'cyl_color'</span>] = df_raw.cyl.map(cyl_colors)<font></font>
<font></font>
<span class="hljs-comment"># Mean and Median city mileage by make</span>
df = df_raw[[<span class="hljs-string">'cty'</span>, <span class="hljs-string">'manufacturer'</span>]].groupby(<span class="hljs-string">'manufacturer'</span>).apply(<span class="hljs-keyword">lambda</span> x: x.mean())<font></font>
df.sort_values(<span class="hljs-string">'cty'</span>, ascending=<span class="hljs-literal">False</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
df.reset_index(inplace=<span class="hljs-literal">True</span>)<font></font>
df_median = df_raw[[<span class="hljs-string">'cty'</span>, <span class="hljs-string">'manufacturer'</span>]].groupby(<span class="hljs-string">'manufacturer'</span>).apply(<span class="hljs-keyword">lambda</span> x: x.median())<font></font>
<font></font>
<span class="hljs-comment"># Draw horizontal lines</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
ax.hlines(y=df.index, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">40</span>, color=<span class="hljs-string">'gray'</span>, alpha=<span class="hljs-number">0.5</span>, linewidth=<span class="hljs-number">.5</span>, linestyles=<span class="hljs-string">'dashdot'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw the Dots</span>
<span class="hljs-keyword">for</span> i, make <span class="hljs-keyword">in</span> enumerate(df.manufacturer):<font></font>
    df_make = df_raw.loc[df_raw.manufacturer==make, :]<font></font>
    ax.scatter(y=np.repeat(i, df_make.shape[<span class="hljs-number">0</span>]), x=<span class="hljs-string">'cty'</span>, data=df_make, s=<span class="hljs-number">75</span>, edgecolors=<span class="hljs-string">'gray'</span>, c=<span class="hljs-string">'w'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
    ax.scatter(y=i, x=<span class="hljs-string">'cty'</span>, data=df_median.loc[df_median.index==make, :], s=<span class="hljs-number">75</span>, c=<span class="hljs-string">'firebrick'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Annotate    </span>
ax.text(<span class="hljs-number">33</span>, <span class="hljs-number">13</span>, <span class="hljs-string">"$red \; dots \; are \; the \: median$"</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">12</span>}, color=<span class="hljs-string">'firebrick'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
red_patch = plt.plot([],[], marker=<span class="hljs-string">"o"</span>, ms=<span class="hljs-number">10</span>, ls=<span class="hljs-string">""</span>, mec=<span class="hljs-literal">None</span>, color=<span class="hljs-string">'firebrick'</span>, label=<span class="hljs-string">"Median"</span>)<font></font>
plt.legend(handles=red_patch)<font></font>
ax.set_title(<span class="hljs-string">'Distribution of City Mileage by Make'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">22</span>})<font></font>
ax.set_xlabel(<span class="hljs-string">'Miles Per Gallon (City)'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.set_yticks(df.index)<font></font>
ax.set_yticklabels(df.manufacturer.str.title(), fontdict={<span class="hljs-string">'horizontalalignment'</span>: <span class="hljs-string">'right'</span>}, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.set_xlim(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>)<font></font>
plt.xticks(alpha=<span class="hljs-number">0.7</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_visible(<span class="hljs-literal">False</span>)    <font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_visible(<span class="hljs-literal">False</span>)    <font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_visible(<span class="hljs-literal">False</span>)    <font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_visible(<span class="hljs-literal">False</span>)   <font></font>
plt.grid(axis=<span class="hljs-string">'both'</span>, alpha=<span class="hljs-number">.4</span>, linewidth=<span class="hljs-number">.1</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/dx/_p/6t/dx_p6t-5fbud-dbwtlxla0ysgyc.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26.é•·æ–¹å½¢ã®ã‚ã‚‹ãƒãƒ£ãƒ¼ãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ•ã¯ã€ä¸­å¤®å€¤ã€25ã€75ã®å››åˆ†ä½æ•°ã€ãŠã‚ˆã³é«˜å€¤ã¨å®‰å€¤ã‚’çŸ¥ã£ã¦ã€åˆ†å¸ƒã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã®å„ªã‚ŒãŸæ–¹æ³•ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚µã‚¤ã‚ºã‚’è§£é‡ˆã™ã‚‹ã¨ãã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã“ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«å«ã¾ã‚Œã‚‹ãƒã‚¤ãƒ³ãƒˆã®æ•°ãŒæ­ªã‚€å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€å„ã‚»ãƒ«ã®è¦³æ¸¬æ•°ã‚’æ‰‹å‹•ã§è¡¨ç¤ºã™ã‚‹ã¨ã€ã“ã®æ¬ ç‚¹ã®å…‹æœã«å½¹ç«‹ã¡ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã¨ãˆã°ã€å·¦å´ã®æœ€åˆã®2ã¤ã®é•·æ–¹å½¢ã¯åŒã˜ã‚µã‚¤ã‚ºã§ã™ãŒã€ãã‚Œãã‚Œ5ãŠã‚ˆã³47ã®ãƒ‡ãƒ¼ã‚¿è¦ç´ ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€è¦³æ¸¬æ•°ã«æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.boxplot(x=<span class="hljs-string">'class'</span>, y=<span class="hljs-string">'hwy'</span>, data=df, notch=<span class="hljs-literal">False</span>)<font></font>
<font></font>
<span class="hljs-comment"># Add N Obs inside boxplot (optional)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_n_obs</span>(<span class="hljs-params">df,group_col,y</span>):</span>
    medians_dict = {grp[<span class="hljs-number">0</span>]:grp[<span class="hljs-number">1</span>][y].median() <span class="hljs-keyword">for</span> grp <span class="hljs-keyword">in</span> df.groupby(group_col)}<font></font>
    xticklabels = [x.get_text() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> plt.gca().get_xticklabels()]<font></font>
    n_obs = df.groupby(group_col)[y].size().values<font></font>
    <span class="hljs-keyword">for</span> (x, xticklabel), n_ob <span class="hljs-keyword">in</span> zip(enumerate(xticklabels), n_obs):<font></font>
        plt.text(x, medians_dict[xticklabel]*<span class="hljs-number">1.01</span>, <span class="hljs-string">"#obs : "</span>+str(n_ob), horizontalalignment=<span class="hljs-string">'center'</span>, fontdict={<span class="hljs-string">'size'</span>:<span class="hljs-number">14</span>}, color=<span class="hljs-string">'white'</span>)<font></font>
<font></font>
add_n_obs(df,group_col=<span class="hljs-string">'class'</span>,y=<span class="hljs-string">'hwy'</span>)    <font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">'Box Plot of Highway Mileage by Vehicle Class'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.ylim(<span class="hljs-number">10</span>, <span class="hljs-number">40</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/gz/n_/hd/gzn_hdsn-2sugkdgnzotjtjpc4u.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27.é•·æ–¹å½¢ã¨ãƒ‰ãƒƒãƒˆã®ã‚ã‚‹ãƒãƒ£ãƒ¼ãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‰ãƒƒãƒˆ+ãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆã¯ã€ãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆã®ã‚ˆã†ãªã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†å‰²ã•ã‚ŒãŸåŒæ§˜ã®æƒ…å ±ã‚’é€ä¿¡ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ãƒ‰ãƒƒãƒˆã¯ã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ‡ãƒ¼ã‚¿é …ç›®ã®æ•°ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.boxplot(x=<span class="hljs-string">'class'</span>, y=<span class="hljs-string">'hwy'</span>, data=df, hue=<span class="hljs-string">'cyl'</span>)<font></font>
sns.stripplot(x=<span class="hljs-string">'class'</span>, y=<span class="hljs-string">'hwy'</span>, data=df, color=<span class="hljs-string">'black'</span>, size=<span class="hljs-number">3</span>, jitter=<span class="hljs-number">1</span>)<font></font>
<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(df[<span class="hljs-string">'class'</span>].unique())<span class="hljs-number">-1</span>):<font></font>
    plt.vlines(i+<span class="hljs-number">.5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">45</span>, linestyles=<span class="hljs-string">'solid'</span>, colors=<span class="hljs-string">'gray'</span>, alpha=<span class="hljs-number">0.2</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">'Box Plot of Highway Mileage by Vehicle Class'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.legend(title=<span class="hljs-string">'Cylinders'</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/qn/0z/r7/qn0zr7pvqptrttthbqhnpjyu3iy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28.ã€Œãƒã‚¤ã‚ªãƒªãƒ³ã€ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®ã‚ˆã†ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ç®±ã²ã’å›³ã®è¦–è¦šçš„ã«æ¥½ã—ã„ä»£æ›¿æ‰‹æ®µã§ã™ã€‚</font><font style="vertical-align: inherit;">ã€Œãƒã‚¤ã‚ªãƒªãƒ³ã€ã®å½¢ã‚„é¢ç©ã¯ã€ã“ã®ã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒ‡ãƒ¼ã‚¿é‡ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ã“ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯èª­ã¿ã«ãããªã‚‹ã“ã¨ãŒã‚ã‚Šã€é€šå¸¸ã€ãƒ—ãƒ­ã®è¨­å®šã§ã¯ä½¿ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
sns.violinplot(x=<span class="hljs-string">'class'</span>, y=<span class="hljs-string">'hwy'</span>, data=df, scale=<span class="hljs-string">'width'</span>, inner=<span class="hljs-string">'quartile'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">'Violin Plot of Highway Mileage by Vehicle Class'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ty/eg/cv/tyegcvu1g7pnl7z-jswcpzvh3ai.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">29.äººå£ã®ãƒ”ãƒ©ãƒŸãƒƒãƒ‰</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ é †ã«ä¸¦ã¹ã‚‰ã‚ŒãŸã‚°ãƒ«ãƒ¼ãƒ—ã®åˆ†å¸ƒã‚’è¡¨ç¤ºã—ãŸã‚Šã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«äººå£ã®æ®µéšçš„ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’è¡¨ç¤ºã—ãŸã‚Šã—ã¦ã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ç›®æ¨™åˆ°é”ãƒ—ãƒ­ã‚»ã‚¹ã®å„æ®µéšã‚’é€šéã™ã‚‹äººæ•°ã‚’è¦–è¦šåŒ–ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Read data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/email_campaign_funnel.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">13</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
group_col = <span class="hljs-string">'Gender'</span>
order_of_bars = df.Stage.unique()[::<span class="hljs-number">-1</span>]<font></font>
colors = [plt.cm.Spectral(i/float(len(df[group_col].unique())<span class="hljs-number">-1</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(df[group_col].unique()))]<font></font>
<font></font>
<span class="hljs-keyword">for</span> c, group <span class="hljs-keyword">in</span> zip(colors, df[group_col].unique()):<font></font>
    sns.barplot(x=<span class="hljs-string">'Users'</span>, y=<span class="hljs-string">'Stage'</span>, data=df.loc[df[group_col]==group, :], order=order_of_bars, color=c, label=group)<font></font>
<font></font>
<span class="hljs-comment"># Decorations    </span>
plt.xlabel(<span class="hljs-string">"$Users$"</span>)<font></font>
plt.ylabel(<span class="hljs-string">"Stage of Purchase"</span>)<font></font>
plt.yticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">"Population Pyramid of the Marketing Funnel"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.legend()<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/n3/sn/fp/n3snfpt0iu8p6mg6a8wooubx0ts.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30.ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒãƒ£ãƒ¼ãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
seabornãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«ã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨ã—ã¦ã€2ã¤ä»¥ä¸Šã®ã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ã®æ•°ã®ç›¸äº’ã®åˆ†å¸ƒã‚’è¦–è¦šåŒ–ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Load Dataset</span>
titanic = sns.load_dataset(<span class="hljs-string">"titanic"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
g = sns.catplot(<span class="hljs-string">"alive"</span>, col=<span class="hljs-string">"deck"</span>, col_wrap=<span class="hljs-number">4</span>,<font></font>
                data=titanic[titanic.deck.notnull()],<font></font>
                kind=<span class="hljs-string">"count"</span>, height=<span class="hljs-number">3.5</span>, aspect=<span class="hljs-number">.8</span>, <font></font>
                palette=<span class="hljs-string">'tab20'</span>)<font></font>
<font></font>
fig.suptitle(<span class="hljs-string">'sf'</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/_e/np/le/_enplextsmojkrvejat_7bypbby.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Load Dataset</span>
titanic = sns.load_dataset(<span class="hljs-string">"titanic"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
sns.catplot(x=<span class="hljs-string">"age"</span>, y=<span class="hljs-string">"embark_town"</span>,<font></font>
            hue=<span class="hljs-string">"sex"</span>, col=<span class="hljs-string">"class"</span>,<font></font>
            data=titanic[titanic.embark_town.notnull()],<font></font>
            orient=<span class="hljs-string">"h"</span>, height=<span class="hljs-number">5</span>, aspect=<span class="hljs-number">1</span>, palette=<span class="hljs-string">"tab10"</span>,<font></font>
            kind=<span class="hljs-string">"violin"</span>, dodge=<span class="hljs-literal">True</span>, cut=<span class="hljs-number">0</span>, bw=<span class="hljs-number">.2</span>)
</code></pre><br>
</div></div><br>
 <img src="https://habrastorage.org/webt/ce/ri/kx/cerikxpqa4yphgi4qnhodpnjhqk.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµ„ã¿ç«‹ã¦ã€æ§‹æˆ</font></font></h3><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31.ãƒ¯ãƒƒãƒ•ãƒ«å›³</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¯ãƒƒãƒ•ãƒ«ã‚°ãƒ©ãƒ•ã¯pywaffleãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ä½œæˆã§ãã€ã»ã¨ã‚“ã©ã®æ¯é›†å›£ã®ã‚°ãƒ«ãƒ¼ãƒ—æ§‹æˆã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#! pip install pywaffle</span>
<span class="hljs-comment"># Reference: https://stackoverflow.com/questions/41400136/how-to-do-waffle-charts-in-python-square-piechart</span>
<span class="hljs-keyword">from</span> pywaffle <span class="hljs-keyword">import</span> Waffle<font></font>
<font></font>
<span class="hljs-comment"># Import</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">'class'</span>).size().reset_index(name=<span class="hljs-string">'counts'</span>)<font></font>
n_categories = df.shape[<span class="hljs-number">0</span>]<font></font>
colors = [plt.cm.inferno_r(i/float(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n_categories)]<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot and Decorate</span><font></font>
fig = plt.figure(<font></font>
    FigureClass=Waffle,<font></font>
    plots={<font></font>
        <span class="hljs-string">'111'</span>: {
            <span class="hljs-string">'values'</span>: df[<span class="hljs-string">'counts'</span>],
            <span class="hljs-string">'labels'</span>: [<span class="hljs-string">"{0} ({1})"</span>.format(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df[[<span class="hljs-string">'class'</span>, <span class="hljs-string">'counts'</span>]].itertuples()],
            <span class="hljs-string">'legend'</span>: {<span class="hljs-string">'loc'</span>: <span class="hljs-string">'upper left'</span>, <span class="hljs-string">'bbox_to_anchor'</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">'fontsize'</span>: <span class="hljs-number">12</span>},
            <span class="hljs-string">'title'</span>: {<span class="hljs-string">'label'</span>: <span class="hljs-string">'# Vehicles by Class'</span>, <span class="hljs-string">'loc'</span>: <span class="hljs-string">'center'</span>, <span class="hljs-string">'fontsize'</span>:<span class="hljs-number">18</span>}<font></font>
        },<font></font>
    },<font></font>
    rows=<span class="hljs-number">7</span>,<font></font>
    colors=colors,<font></font>
    figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>)<font></font>
)<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/pr/m6/w4/prm6w4zvev-bzkq5okvhkm6usjc.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#! pip install pywaffle</span>
<span class="hljs-keyword">from</span> pywaffle <span class="hljs-keyword">import</span> Waffle<font></font>
<font></font>
<span class="hljs-comment"># Import</span>
<span class="hljs-comment"># df_raw = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")</span><font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
<span class="hljs-comment"># By Class Data</span>
df_class = df_raw.groupby(<span class="hljs-string">'class'</span>).size().reset_index(name=<span class="hljs-string">'counts_class'</span>)<font></font>
n_categories = df_class.shape[<span class="hljs-number">0</span>]<font></font>
colors_class = [plt.cm.Set3(i/float(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n_categories)]<font></font>
<font></font>
<span class="hljs-comment"># By Cylinders Data</span>
df_cyl = df_raw.groupby(<span class="hljs-string">'cyl'</span>).size().reset_index(name=<span class="hljs-string">'counts_cyl'</span>)<font></font>
n_categories = df_cyl.shape[<span class="hljs-number">0</span>]<font></font>
colors_cyl = [plt.cm.Spectral(i/float(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n_categories)]<font></font>
<font></font>
<span class="hljs-comment"># By Make Data</span>
df_make = df_raw.groupby(<span class="hljs-string">'manufacturer'</span>).size().reset_index(name=<span class="hljs-string">'counts_make'</span>)<font></font>
n_categories = df_make.shape[<span class="hljs-number">0</span>]<font></font>
colors_make = [plt.cm.tab20b(i/float(n_categories)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n_categories)]<font></font>
<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot and Decorate</span><font></font>
fig = plt.figure(<font></font>
    FigureClass=Waffle,<font></font>
    plots={<font></font>
        <span class="hljs-string">'311'</span>: {
            <span class="hljs-string">'values'</span>: df_class[<span class="hljs-string">'counts_class'</span>],
            <span class="hljs-string">'labels'</span>: [<span class="hljs-string">"{1}"</span>.format(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df_class[[<span class="hljs-string">'class'</span>, <span class="hljs-string">'counts_class'</span>]].itertuples()],
            <span class="hljs-string">'legend'</span>: {<span class="hljs-string">'loc'</span>: <span class="hljs-string">'upper left'</span>, <span class="hljs-string">'bbox_to_anchor'</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">'fontsize'</span>: <span class="hljs-number">12</span>, <span class="hljs-string">'title'</span>:<span class="hljs-string">'Class'</span>},
            <span class="hljs-string">'title'</span>: {<span class="hljs-string">'label'</span>: <span class="hljs-string">'# Vehicles by Class'</span>, <span class="hljs-string">'loc'</span>: <span class="hljs-string">'center'</span>, <span class="hljs-string">'fontsize'</span>:<span class="hljs-number">18</span>},
            <span class="hljs-string">'colors'</span>: colors_class<font></font>
        },<font></font>
        <span class="hljs-string">'312'</span>: {
            <span class="hljs-string">'values'</span>: df_cyl[<span class="hljs-string">'counts_cyl'</span>],
            <span class="hljs-string">'labels'</span>: [<span class="hljs-string">"{1}"</span>.format(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df_cyl[[<span class="hljs-string">'cyl'</span>, <span class="hljs-string">'counts_cyl'</span>]].itertuples()],
            <span class="hljs-string">'legend'</span>: {<span class="hljs-string">'loc'</span>: <span class="hljs-string">'upper left'</span>, <span class="hljs-string">'bbox_to_anchor'</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">'fontsize'</span>: <span class="hljs-number">12</span>, <span class="hljs-string">'title'</span>:<span class="hljs-string">'Cyl'</span>},
            <span class="hljs-string">'title'</span>: {<span class="hljs-string">'label'</span>: <span class="hljs-string">'# Vehicles by Cyl'</span>, <span class="hljs-string">'loc'</span>: <span class="hljs-string">'center'</span>, <span class="hljs-string">'fontsize'</span>:<span class="hljs-number">18</span>},
            <span class="hljs-string">'colors'</span>: colors_cyl<font></font>
        },<font></font>
        <span class="hljs-string">'313'</span>: {
            <span class="hljs-string">'values'</span>: df_make[<span class="hljs-string">'counts_make'</span>],
            <span class="hljs-string">'labels'</span>: [<span class="hljs-string">"{1}"</span>.format(n[<span class="hljs-number">0</span>], n[<span class="hljs-number">1</span>]) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> df_make[[<span class="hljs-string">'manufacturer'</span>, <span class="hljs-string">'counts_make'</span>]].itertuples()],
            <span class="hljs-string">'legend'</span>: {<span class="hljs-string">'loc'</span>: <span class="hljs-string">'upper left'</span>, <span class="hljs-string">'bbox_to_anchor'</span>: (<span class="hljs-number">1.05</span>, <span class="hljs-number">1</span>), <span class="hljs-string">'fontsize'</span>: <span class="hljs-number">12</span>, <span class="hljs-string">'title'</span>:<span class="hljs-string">'Manufacturer'</span>},
            <span class="hljs-string">'title'</span>: {<span class="hljs-string">'label'</span>: <span class="hljs-string">'# Vehicles by Make'</span>, <span class="hljs-string">'loc'</span>: <span class="hljs-string">'center'</span>, <span class="hljs-string">'fontsize'</span>:<span class="hljs-number">18</span>},
            <span class="hljs-string">'colors'</span>: colors_make<font></font>
        }<font></font>
    },<font></font>
    rows=<span class="hljs-number">9</span>,<font></font>
    figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">14</span>)<font></font>
)<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/8q/hl/t0/8qhlt0kkwqxhblw7x-cfuzoy7rw.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32.å††ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å††ã‚°ãƒ©ãƒ•ã¯ã€ã‚°ãƒ«ãƒ¼ãƒ—ã®æ§‹æˆã‚’ç¤ºã™å¤å…¸çš„ãªæ–¹æ³•ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®é¢ç©ãŒèª¤è§£ã‚’æ‹›ãå¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ç¾åœ¨ã“ã®ã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ä¸€èˆ¬ã«æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€å††ã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€å††ã‚°ãƒ©ãƒ•ã®å„éƒ¨åˆ†ã®å‰²åˆã¾ãŸã¯æ•°å€¤ã‚’æ˜ç¤ºçš„ã«è¨˜éŒ²ã™ã‚‹ã“ã¨ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">'class'</span>).size()<font></font>
<font></font>
<span class="hljs-comment"># Make the plot with pandas</span>
df.plot(kind=<span class="hljs-string">'pie'</span>, subplots=<span class="hljs-literal">True</span>, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">8</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.title(<span class="hljs-string">"Pie Chart of Vehicle Class - Bad"</span>)<font></font>
plt.ylabel(<span class="hljs-string">""</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/qn/ed/zp/qnedzpmdkuz-voxpbzcjdsnvshm.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">'class'</span>).size().reset_index(name=<span class="hljs-string">'counts'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">7</span>), subplot_kw=dict(aspect=<span class="hljs-string">"equal"</span>), dpi= <span class="hljs-number">80</span>)<font></font>
<font></font>
data = df[<span class="hljs-string">'counts'</span>]<font></font>
categories = df[<span class="hljs-string">'class'</span>]<font></font>
explode = [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0</span>]<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">pct, allvals</span>):</span>
    absolute = int(pct/<span class="hljs-number">100.</span>*np.sum(allvals))
    <span class="hljs-keyword">return</span> <span class="hljs-string">"{:.1f}% ({:d} )"</span>.format(pct, absolute)<font></font>
<font></font>
wedges, texts, autotexts = ax.pie(data, <font></font>
                                  autopct=<span class="hljs-keyword">lambda</span> pct: func(pct, data),<font></font>
                                  textprops=dict(color=<span class="hljs-string">"w"</span>), <font></font>
                                  colors=plt.cm.Dark2.colors,<font></font>
                                 startangle=<span class="hljs-number">140</span>,<font></font>
                                 explode=explode)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
ax.legend(wedges, categories, title=<span class="hljs-string">"Vehicle Class"</span>, loc=<span class="hljs-string">"center left"</span>, bbox_to_anchor=(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>))<font></font>
plt.setp(autotexts, size=<span class="hljs-number">10</span>, weight=<span class="hljs-number">700</span>)<font></font>
ax.set_title(<span class="hljs-string">"Class of Vehicles: Pie Chart"</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/gx/ex/wt/gxexwto-x00nzxtyklyb5jm6110.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33.ãƒ„ãƒªãƒ¼ãƒãƒƒãƒ—</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ„ãƒªãƒ¼ãƒãƒƒãƒ—ã¯å††ã‚°ãƒ©ãƒ•ã«ä¼¼ã¦ãŠã‚Šã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®ã‚·ã‚§ã‚¢ã‚’èª¤è§£ã•ã›ã‚‹ã“ã¨ãªãæ©Ÿèƒ½ã—ã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># pip install squarify</span>
<span class="hljs-keyword">import</span> squarify <font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">'class'</span>).size().reset_index(name=<span class="hljs-string">'counts'</span>)<font></font>
labels = df.apply(<span class="hljs-keyword">lambda</span> x: str(x[<span class="hljs-number">0</span>]) + <span class="hljs-string">"\n ("</span> + str(x[<span class="hljs-number">1</span>]) + <span class="hljs-string">")"</span>, axis=<span class="hljs-number">1</span>)<font></font>
sizes = df[<span class="hljs-string">'counts'</span>].values.tolist()<font></font>
colors = [plt.cm.Spectral(i/float(len(labels))) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(labels))]<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">8</span>), dpi= <span class="hljs-number">80</span>)<font></font>
squarify.plot(sizes=sizes, label=labels, color=colors, alpha=<span class="hljs-number">.8</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorate</span>
plt.title(<span class="hljs-string">'Treemap of Vechile Class'</span>)<font></font>
plt.axis(<span class="hljs-string">'off'</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/nc/8i/cx/nc8icx6f__6fh6doibxqop1xxz0.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">34.ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã¯ã€æ•°é‡ã¾ãŸã¯ç‰¹å®šã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ã«åŸºã¥ã„ã¦è¦ç´ ã‚’è¦–è¦šåŒ–ã™ã‚‹å¤å…¸çš„ãªæ–¹æ³•ã§ã™ã€‚</font><font style="vertical-align: inherit;">ä¸‹ã®å›³ã§ã¯ã€è¦ç´ ã”ã¨ã«ç•°ãªã‚‹è‰²ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ã‚°ãƒ«ãƒ¼ãƒ—ã§è‰²ä»˜ã‘ã—ãŸããªã„å ´åˆã¯ã€ã™ã¹ã¦ã®è¦ç´ ã«1ã¤ã®è‰²ã‚’é¸æŠã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">è‰²åã¯ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®all_colorså†…ã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">.plt.plotï¼ˆï¼‰ã§colorãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ã‚¹ãƒˆãƒ©ã‚¤ãƒ—ã®è‰²ã‚’å¤‰æ›´ã§ãã¾ã™</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> random<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df_raw = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
df = df_raw.groupby(<span class="hljs-string">'manufacturer'</span>).size().reset_index(name=<span class="hljs-string">'counts'</span>)<font></font>
n = df[<span class="hljs-string">'manufacturer'</span>].unique().__len__()+<span class="hljs-number">1</span><font></font>
all_colors = list(plt.cm.colors.cnames.keys())<font></font>
random.seed(<span class="hljs-number">100</span>)<font></font>
c = random.choices(all_colors, k=n)<font></font>
<font></font>
<span class="hljs-comment"># Plot Bars</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.bar(df[<span class="hljs-string">'manufacturer'</span>], df[<span class="hljs-string">'counts'</span>], color=c, width=<span class="hljs-number">.5</span>)
<span class="hljs-keyword">for</span> i, val <span class="hljs-keyword">in</span> enumerate(df[<span class="hljs-string">'counts'</span>].values):<font></font>
    plt.text(i, val, float(val), horizontalalignment=<span class="hljs-string">'center'</span>, verticalalignment=<span class="hljs-string">'bottom'</span>, fontdict={<span class="hljs-string">'fontweight'</span>:<span class="hljs-number">500</span>, <span class="hljs-string">'size'</span>:<span class="hljs-number">12</span>})<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.gca().set_xticklabels(df[<span class="hljs-string">'manufacturer'</span>], rotation=<span class="hljs-number">60</span>, horizontalalignment= <span class="hljs-string">'right'</span>)<font></font>
plt.title(<span class="hljs-string">"Number of Vehicles by Manaufacturers"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.ylabel(<span class="hljs-string">'# Vehicles'</span>)<font></font>
plt.ylim(<span class="hljs-number">0</span>, <span class="hljs-number">45</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/dx/ik/pb/dxikpbp2rckyrwsnncu5_ei7vws.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤‰æ›´ã®è¿½è·¡</font></font></h3><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35.æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•ã¯ã€ç‰¹å®šã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®çµŒæ™‚å¤‰åŒ–ã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§ã¯ã€æ—…å®¢ã®æµã‚ŒãŒ1949å¹´ã‹ã‚‰1969å¹´ã«ã©ã®ã‚ˆã†ã«å¤‰åŒ–ã—ãŸã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.plot(<span class="hljs-string">'date'</span>, <span class="hljs-string">'traffic'</span>, data=df, color=<span class="hljs-string">'tab:red'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.ylim(<span class="hljs-number">50</span>, <span class="hljs-number">750</span>)<font></font>
xtick_location = df.index.tolist()[::<span class="hljs-number">12</span>]<font></font>
xtick_labels = [x[<span class="hljs-number">-4</span>:] <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> df.date.tolist()[::<span class="hljs-number">12</span>]]<font></font>
plt.xticks(ticks=xtick_location, labels=xtick_labels, rotation=<span class="hljs-number">0</span>, fontsize=<span class="hljs-number">12</span>, horizontalalignment=<span class="hljs-string">'center'</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
plt.yticks(fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
plt.title(<span class="hljs-string">"Air Passengers Traffic (1949 - 1969)"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.grid(axis=<span class="hljs-string">'both'</span>, alpha=<span class="hljs-number">.3</span>)<font></font>
<font></font>
<span class="hljs-comment"># Remove borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0.0</span>)    <font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">0.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0.0</span>)    <font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">0.3</span>)   <font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ni/ze/jw/nizejwoyidtzi3jqkvdzmjwdcti.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36.ãƒ”ãƒ¼ã‚¯ã¨è°·ã®ã‚ã‚‹æ™‚ç³»åˆ— </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹ã®æ™‚ç³»åˆ—ã¯ã€ã™ã¹ã¦ã®ãƒ”ãƒ¼ã‚¯ã¨è°·ã‚’ç¤ºã—ã€å€‹ã€…ã®ç‰¹åˆ¥ãªã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºç”Ÿã‚’ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Get the Peaks and Troughs</span>
data = df[<span class="hljs-string">'traffic'</span>].values<font></font>
doublediff = np.diff(np.sign(np.diff(data)))<font></font>
peak_locations = np.where(doublediff == <span class="hljs-number">-2</span>)[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span><font></font>
<font></font>
doublediff2 = np.diff(np.sign(np.diff(<span class="hljs-number">-1</span>*data)))<font></font>
trough_locations = np.where(doublediff2 == <span class="hljs-number">-2</span>)[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span><font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.plot(<span class="hljs-string">'date'</span>, <span class="hljs-string">'traffic'</span>, data=df, color=<span class="hljs-string">'tab:blue'</span>, label=<span class="hljs-string">'Air Traffic'</span>)<font></font>
plt.scatter(df.date[peak_locations], df.traffic[peak_locations], marker=mpl.markers.CARETUPBASE, color=<span class="hljs-string">'tab:green'</span>, s=<span class="hljs-number">100</span>, label=<span class="hljs-string">'Peaks'</span>)<font></font>
plt.scatter(df.date[trough_locations], df.traffic[trough_locations], marker=mpl.markers.CARETDOWNBASE, color=<span class="hljs-string">'tab:red'</span>, s=<span class="hljs-number">100</span>, label=<span class="hljs-string">'Troughs'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Annotate</span>
<span class="hljs-keyword">for</span> t, p <span class="hljs-keyword">in</span> zip(trough_locations[<span class="hljs-number">1</span>::<span class="hljs-number">5</span>], peak_locations[::<span class="hljs-number">3</span>]):<font></font>
    plt.text(df.date[p], df.traffic[p]+<span class="hljs-number">15</span>, df.date[p], horizontalalignment=<span class="hljs-string">'center'</span>, color=<span class="hljs-string">'darkgreen'</span>)<font></font>
    plt.text(df.date[t], df.traffic[t]<span class="hljs-number">-35</span>, df.date[t], horizontalalignment=<span class="hljs-string">'center'</span>, color=<span class="hljs-string">'darkred'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.ylim(<span class="hljs-number">50</span>,<span class="hljs-number">750</span>)<font></font>
xtick_location = df.index.tolist()[::<span class="hljs-number">6</span>]<font></font>
xtick_labels = df.date.tolist()[::<span class="hljs-number">6</span>]<font></font>
plt.xticks(ticks=xtick_location, labels=xtick_labels, rotation=<span class="hljs-number">90</span>, fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
plt.title(<span class="hljs-string">"Peak and Troughs of Air Passengers Traffic (1949 - 1969)"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.yticks(fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
<font></font>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">.0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">.0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
<font></font>
plt.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
plt.grid(axis=<span class="hljs-string">'y'</span>, alpha=<span class="hljs-number">.3</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ca/lg/3w/calg3wc3ufgsoqwllm9x9f1huby.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">37.è‡ªå·±ç›¸é–¢ï¼ˆACFï¼‰ã¨éƒ¨åˆ†è‡ªå·±ç›¸é–¢ï¼ˆPACFï¼‰ã®ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACFã‚°ãƒ©ãƒ•ã¯ã€æ™‚ç³»åˆ—ã¨ãã‚Œè‡ªä½“ã®æ™‚é–“ã®ç›¸é–¢ã‚’ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ï¼ˆè‡ªå·±ç›¸é–¢ã‚°ãƒ©ãƒ•ä¸Šã®ï¼‰å„ç¸¦ç·šã¯ã€ç³»åˆ—ã¨ãã®æ™‚é–“ã®é–“ã®ç›¸é–¢ã‚’è¡¨ã—ã€æ™‚é–“0ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚ã‚°ãƒ©ãƒ•ä¸Šã®é’è‰²ã®ç¶²æ›ã‘éƒ¨åˆ†ã¯æœ‰æ„æ°´æº–ã§ã™ã€‚</font><font style="vertical-align: inherit;">é’ã„ç·šã®ä¸Šã«ã‚ã‚‹ç¬é–“ã¯é‡è¦ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã§ã¯ã€ã“ã‚Œã‚’ã©ã®ã‚ˆã†ã«è§£é‡ˆã—ã¾ã™ã‹ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AirPassengersã®å ´åˆã€x = 14ã§ã€Œãƒ­ãƒªãƒãƒƒãƒ—ã€ãŒé’ã„ç·šã‚’æ¨ªåˆ‡ã£ã¦ã„ã‚‹ãŸã‚ã€éå¸¸ã«é‡è¦ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€æœ€å¤§14å¹´å‰ã«è¦³æ¸¬ã•ã‚ŒãŸä¹—å®¢ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒã€ä»Šæ—¥è¦³æ¸¬ã•ã‚ŒãŸãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€æ–¹ã€PACFã¯ã€ä»»æ„ã®æ™‚é–“ï¼ˆæ™‚ç³»åˆ—ï¼‰ã¨ç¾åœ¨ã®ç³»åˆ—ã®è‡ªå·±ç›¸é–¢ã‚’ç¤ºã—ã¾ã™ãŒã€ãã‚Œã‚‰ã®é–“ã®å½±éŸ¿ã¯é™¤å»ã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> statsmodels.graphics.tsaplots <span class="hljs-keyword">import</span> plot_acf, plot_pacf<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
fig, (ax1, ax2) = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>,figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">6</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plot_acf(df.traffic.tolist(), ax=ax1, lags=<span class="hljs-number">50</span>)<font></font>
plot_pacf(df.traffic.tolist(), ax=ax2, lags=<span class="hljs-number">20</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorate</span>
<span class="hljs-comment"># lighten the borders</span>
ax1.spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
ax1.spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
ax1.spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
ax1.spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>); ax2.spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
<font></font>
<span class="hljs-comment"># font size of tick labels</span>
ax1.tick_params(axis=<span class="hljs-string">'both'</span>, labelsize=<span class="hljs-number">12</span>)<font></font>
ax2.tick_params(axis=<span class="hljs-string">'both'</span>, labelsize=<span class="hljs-number">12</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/pu/bz/aj/pubzajmopagb_auzeanlhqhvxvm.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38.ç›¸äº’ç›¸é–¢ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›¸äº’ç›¸é–¢ã‚°ãƒ©ãƒ•ã¯ã€2ã¤ã®æ™‚ç³»åˆ—ã®ç›¸äº’ã®é…å»¶ã‚’ç¤ºã—ã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> statsmodels.tsa.stattools <span class="hljs-keyword">as</span> stattools<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://github.com/selva86/datasets/raw/master/mortality.csv'</span>)<font></font>
x = df[<span class="hljs-string">'mdeaths'</span>]<font></font>
y = df[<span class="hljs-string">'fdeaths'</span>]<font></font>
<font></font>
<span class="hljs-comment"># Compute Cross Correlations</span>
ccs = stattools.ccf(x, y)[:<span class="hljs-number">100</span>]<font></font>
nlags = len(ccs)<font></font>
<font></font>
<span class="hljs-comment"># Compute the Significance level</span>
<span class="hljs-comment"># ref: https://stats.stackexchange.com/questions/3115/cross-correlation-significance-in-r/3128#3128</span>
conf_level = <span class="hljs-number">2</span> / np.sqrt(nlags)<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">7</span>), dpi= <span class="hljs-number">80</span>)<font></font>
<font></font>
plt.hlines(<span class="hljs-number">0</span>, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">100</span>, color=<span class="hljs-string">'gray'</span>)  <span class="hljs-comment"># 0 axis</span>
plt.hlines(conf_level, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">100</span>, color=<span class="hljs-string">'gray'</span>)<font></font>
plt.hlines(-conf_level, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">100</span>, color=<span class="hljs-string">'gray'</span>)<font></font>
<font></font>
plt.bar(x=np.arange(len(ccs)), height=ccs, width=<span class="hljs-number">.3</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.title(<span class="hljs-string">'$Cross\; Correlation\; Plot:\; mdeaths\; vs\; fdeaths$'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.xlim(<span class="hljs-number">0</span>,len(ccs))<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/dh/pq/vl/dhpqvlyqrwwrnzziogfxcjmlouw.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39.æ™‚ç³»åˆ—ã®æ‹¡å¼µ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ™‚ç³»åˆ—å±•é–‹ãƒãƒ£ãƒ¼ãƒˆã¯ã€æ™‚ç³»åˆ—ã‚’å‚¾å‘ã€å­£ç¯€ã€ãŠã‚ˆã³æ®‹å·®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†é¡ã—ãŸã‚‚ã®ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> statsmodels.tsa.seasonal <span class="hljs-keyword">import</span> seasonal_decompose
<span class="hljs-keyword">from</span> dateutil.parser <span class="hljs-keyword">import</span> parse<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span>)<font></font>
dates = pd.DatetimeIndex([parse(d).strftime(<span class="hljs-string">'%Y-%m-01'</span>) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df[<span class="hljs-string">'date'</span>]])<font></font>
df.set_index(dates, inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decompose </span>
result = seasonal_decompose(df[<span class="hljs-string">'traffic'</span>], model=<span class="hljs-string">'multiplicative'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.rcParams.update({<span class="hljs-string">'figure.figsize'</span>: (<span class="hljs-number">10</span>,<span class="hljs-number">10</span>)})<font></font>
result.plot().suptitle(<span class="hljs-string">'Time Series Decomposition of Air Passengers'</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/sw/_e/ob/sw_eobkfqcxkzq31ia54hpjauus.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40.ã„ãã¤ã‹ã®æ™‚ç³»åˆ— </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ã€1ã¤ã®ã‚°ãƒ©ãƒ•ã§åŒã˜å€¤ã‚’æ¸¬å®šã™ã‚‹è¤‡æ•°ã®æ™‚ç³»åˆ—ã‚’ä½œæˆã§ãã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://github.com/selva86/datasets/raw/master/mortality.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Define the upper limit, lower limit, interval of Y axis and colors</span>
y_LL = <span class="hljs-number">100</span>
y_UL = int(df.iloc[:, <span class="hljs-number">1</span>:].max().max()*<span class="hljs-number">1.1</span>)<font></font>
y_interval = <span class="hljs-number">400</span>
mycolors = [<span class="hljs-string">'tab:red'</span>, <span class="hljs-string">'tab:blue'</span>, <span class="hljs-string">'tab:green'</span>, <span class="hljs-string">'tab:orange'</span>]    <font></font>
<font></font>
<span class="hljs-comment"># Draw Plot and Annotate</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)    <font></font>
<font></font>
columns = df.columns[<span class="hljs-number">1</span>:]  
<span class="hljs-keyword">for</span> i, column <span class="hljs-keyword">in</span> enumerate(columns):    <font></font>
    plt.plot(df.date.values, df<font></font>
.values, lw=<span class="hljs-number">1.5</span>, color=mycolors[i])    <font></font>
    plt.text(df.shape[<span class="hljs-number">0</span>]+<span class="hljs-number">1</span>, df<font></font>
.values[<span class="hljs-number">-1</span>], column, fontsize=<span class="hljs-number">14</span>, color=mycolors[i])<font></font>
<font></font>
<span class="hljs-comment"># Draw Tick lines  </span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(y_LL, y_UL, y_interval):    <font></font>
    plt.hlines(y, xmin=<span class="hljs-number">0</span>, xmax=<span class="hljs-number">71</span>, colors=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.3</span>, linestyles=<span class="hljs-string">"--"</span>, lw=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations    </span>
plt.tick_params(axis=<span class="hljs-string">"both"</span>, which=<span class="hljs-string">"both"</span>, bottom=<span class="hljs-literal">False</span>, top=<span class="hljs-literal">False</span>,    <font></font>
                labelbottom=<span class="hljs-literal">True</span>, left=<span class="hljs-literal">False</span>, right=<span class="hljs-literal">False</span>, labelleft=<span class="hljs-literal">True</span>)        <font></font>
<font></font>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
<font></font>
plt.title(<span class="hljs-string">'Number of Deaths from Lung Diseases in the UK (1974-1979)'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.yticks(range(y_LL, y_UL, y_interval), [str(y) <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(y_LL, y_UL, y_interval)], fontsize=<span class="hljs-number">12</span>)    <font></font>
plt.xticks(range(<span class="hljs-number">0</span>, df.shape[<span class="hljs-number">0</span>], <span class="hljs-number">12</span>), df.date.values[::<span class="hljs-number">12</span>], horizontalalignment=<span class="hljs-string">'left'</span>, fontsize=<span class="hljs-number">12</span>)    <font></font>
plt.ylim(y_LL, y_UL)    <font></font>
plt.xlim(<span class="hljs-number">-2</span>, <span class="hljs-number">80</span>)    <font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ci/wj/nc/ciwjncvytziol6v4e0kgpqgwxx0.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">41.ç¬¬2 Yè»¸ã‚’ä½¿ç”¨ã—ã¦ç•°ãªã‚‹ã‚¹ã‚±ãƒ¼ãƒ«ã§æ§‹ç¯‰ã™ã‚‹</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ™‚ã«2ã¤ã®ç•°ãªã‚‹é‡ã‚’æ¸¬å®šã™ã‚‹2ã¤ã®æ™‚ç³»åˆ—ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã¯ã€å³å´ã®ç¬¬2 Yè»¸ã§2ç•ªç›®ã®ç³»åˆ—ã‚’å†åº¦æ§‹ç¯‰ã§ãã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/economics.csv"</span>)<font></font>
<font></font>
x = df[<span class="hljs-string">'date'</span>]<font></font>
y1 = df[<span class="hljs-string">'psavert'</span>]<font></font>
y2 = df[<span class="hljs-string">'unemploy'</span>]<font></font>
<font></font>
<span class="hljs-comment"># Plot Line1 (Left Y Axis)</span>
fig, ax1 = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)<font></font>
ax1.plot(x, y1, color=<span class="hljs-string">'tab:red'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot Line2 (Right Y Axis)</span>
ax2 = ax1.twinx()  <span class="hljs-comment"># instantiate a second axes that shares the same x-axis</span>
ax2.plot(x, y2, color=<span class="hljs-string">'tab:blue'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># ax1 (left Y axis)</span>
ax1.set_xlabel(<span class="hljs-string">'Year'</span>, fontsize=<span class="hljs-number">20</span>)<font></font>
ax1.tick_params(axis=<span class="hljs-string">'x'</span>, rotation=<span class="hljs-number">0</span>, labelsize=<span class="hljs-number">12</span>)<font></font>
ax1.set_ylabel(<span class="hljs-string">'Personal Savings Rate'</span>, color=<span class="hljs-string">'tab:red'</span>, fontsize=<span class="hljs-number">20</span>)<font></font>
ax1.tick_params(axis=<span class="hljs-string">'y'</span>, rotation=<span class="hljs-number">0</span>, labelcolor=<span class="hljs-string">'tab:red'</span> )<font></font>
ax1.grid(alpha=<span class="hljs-number">.4</span>)<font></font>
<font></font>
<span class="hljs-comment"># ax2 (right Y axis)</span>
ax2.set_ylabel(<span class="hljs-string">"# Unemployed (1000's)"</span>, color=<span class="hljs-string">'tab:blue'</span>, fontsize=<span class="hljs-number">20</span>)<font></font>
ax2.tick_params(axis=<span class="hljs-string">'y'</span>, labelcolor=<span class="hljs-string">'tab:blue'</span>)<font></font>
ax2.set_xticks(np.arange(<span class="hljs-number">0</span>, len(x), <span class="hljs-number">60</span>))<font></font>
ax2.set_xticklabels(x[::<span class="hljs-number">60</span>], rotation=<span class="hljs-number">90</span>, fontdict={<span class="hljs-string">'fontsize'</span>:<span class="hljs-number">10</span>})<font></font>
ax2.set_title(<span class="hljs-string">"Personal Savings Rate vs Unemployed: Plotting in Secondary Y Axis"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
fig.tight_layout()<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/li/rb/ob/lirbob4k8hdphq4ts6igp-pcfdy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42.ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ã®ã‚ã‚‹æ™‚ç³»åˆ—</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ä»˜ãã®æ™‚ç³»åˆ—ã¯ã€å„æ™‚ç‚¹ï¼ˆæ—¥ä»˜/ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰ã®è¤‡æ•°ã®è¦³æ¸¬å€¤ã‚’æŒã¤æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒã‚ã‚‹å ´åˆã«ä½œæˆã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä»¥ä¸‹ã«ã€ä¸€æ—¥ã®ã•ã¾ã–ã¾ãªæ™‚é–“å¸¯ã®æ³¨æ–‡ã®å—ã‘å–ã‚Šã«åŸºã¥ãã„ãã¤ã‹ã®ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€45æ—¥ä»¥å†…ã®å—æ³¨æ•°ã®åˆ¥ã®ä¾‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ã€æ³¨æ–‡ã®å¹³å‡æ•°ãŒç™½ã„ç·šã§ç¤ºã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€95ï¼…ã®é–“éš”ãŒè¨ˆç®—ã•ã‚Œã€å¹³å‡ã®å‘¨ã‚Šã«ãƒ—ãƒ­ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> scipy.stats <span class="hljs-keyword">import</span> sem<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/user_orders_hourofday.csv"</span>)<font></font>
df_mean = df.groupby(<span class="hljs-string">'order_hour_of_day'</span>).quantity.mean()<font></font>
df_se = df.groupby(<span class="hljs-string">'order_hour_of_day'</span>).quantity.apply(sem).mul(<span class="hljs-number">1.96</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.ylabel(<span class="hljs-string">"# Orders"</span>, fontsize=<span class="hljs-number">16</span>)  <font></font>
x = df_mean.index<font></font>
plt.plot(x, df_mean, color=<span class="hljs-string">"white"</span>, lw=<span class="hljs-number">2</span>) <font></font>
plt.fill_between(x, df_mean - df_se, df_mean + df_se, color=<span class="hljs-string">"#3F5D7D"</span>)  <font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">1</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">1</span>)<font></font>
plt.xticks(x[::<span class="hljs-number">2</span>], [str(d) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> x[::<span class="hljs-number">2</span>]] , fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">"User Orders by Hour of Day (95% confidence)"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.xlabel(<span class="hljs-string">"Hour of Day"</span>)<font></font>
<font></font>
s, e = plt.gca().get_xlim()<font></font>
plt.xlim(s, e)<font></font>
<font></font>
<span class="hljs-comment"># Draw Horizontal Tick lines  </span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">8</span>, <span class="hljs-number">20</span>, <span class="hljs-number">2</span>):    <font></font>
    plt.hlines(y, xmin=s, xmax=e, colors=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.5</span>, linestyles=<span class="hljs-string">"--"</span>, lw=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/yg/os/yt/ygosytkzsgv4z9w1qlij9xzco9m.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-string">"Data Source: https://www.kaggle.com/olistbr/brazilian-ecommerce#olist_orders_dataset.csv"</span>
<span class="hljs-keyword">from</span> dateutil.parser <span class="hljs-keyword">import</span> parse
<span class="hljs-keyword">from</span> scipy.stats <span class="hljs-keyword">import</span> sem<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df_raw = pd.read_csv(<span class="hljs-string">'https://raw.githubusercontent.com/selva86/datasets/master/orders_45d.csv'</span>, <font></font>
                     parse_dates=[<span class="hljs-string">'purchase_time'</span>, <span class="hljs-string">'purchase_date'</span>])<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data: Daily Mean and SE Bands</span>
df_mean = df_raw.groupby(<span class="hljs-string">'purchase_date'</span>).quantity.mean()<font></font>
df_se = df_raw.groupby(<span class="hljs-string">'purchase_date'</span>).quantity.apply(sem).mul(<span class="hljs-number">1.96</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
plt.ylabel(<span class="hljs-string">"# Daily Orders"</span>, fontsize=<span class="hljs-number">16</span>)  <font></font>
x = [d.date().strftime(<span class="hljs-string">'%Y-%m-%d'</span>) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df_mean.index]<font></font>
plt.plot(x, df_mean, color=<span class="hljs-string">"white"</span>, lw=<span class="hljs-number">2</span>) <font></font>
plt.fill_between(x, df_mean - df_se, df_mean + df_se, color=<span class="hljs-string">"#3F5D7D"</span>)  <font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">1</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">1</span>)<font></font>
plt.xticks(x[::<span class="hljs-number">6</span>], [str(d) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> x[::<span class="hljs-number">6</span>]] , fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">"Daily Order Quantity of Brazilian Retail with Error Bands (95% confidence)"</span>, fontsize=<span class="hljs-number">20</span>)<font></font>
<font></font>
<span class="hljs-comment"># Axis limits</span><font></font>
s, e = plt.gca().get_xlim()<font></font>
plt.xlim(s, e<span class="hljs-number">-2</span>)<font></font>
plt.ylim(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>)<font></font>
<font></font>
<span class="hljs-comment"># Draw Horizontal Tick lines  </span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>):    <font></font>
    plt.hlines(y, xmin=s, xmax=e, colors=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.5</span>, linestyles=<span class="hljs-string">"--"</span>, lw=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/g6/f8/c5/g6f8c5_-yqqrq11x8pzc8toyd3e.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43.ç´¯ç©ã®ã‚ã‚‹ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç©ã¿ä¸Šã’é¢ã‚°ãƒ©ãƒ•ã¯ã€è¤‡æ•°ã®æ™‚ç³»åˆ—ã‹ã‚‰ã®å¯„ä¸åº¦ã‚’è¦–è¦šçš„ã«è¡¨ã—ã¦ã„ã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://raw.githubusercontent.com/selva86/datasets/master/nightvisitors.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decide Colors </span>
mycolors = [<span class="hljs-string">'tab:red'</span>, <span class="hljs-string">'tab:blue'</span>, <span class="hljs-string">'tab:green'</span>, <span class="hljs-string">'tab:orange'</span>, <span class="hljs-string">'tab:brown'</span>, <span class="hljs-string">'tab:grey'</span>, <span class="hljs-string">'tab:pink'</span>, <span class="hljs-string">'tab:olive'</span>]      <font></font>
<font></font>
<span class="hljs-comment"># Draw Plot and Annotate</span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)<font></font>
columns = df.columns[<span class="hljs-number">1</span>:]<font></font>
labs = columns.values.tolist()<font></font>
<font></font>
<span class="hljs-comment"># Prepare data</span>
x  = df[<span class="hljs-string">'yearmon'</span>].values.tolist()<font></font>
y0 = df[columns[<span class="hljs-number">0</span>]].values.tolist()<font></font>
y1 = df[columns[<span class="hljs-number">1</span>]].values.tolist()<font></font>
y2 = df[columns[<span class="hljs-number">2</span>]].values.tolist()<font></font>
y3 = df[columns[<span class="hljs-number">3</span>]].values.tolist()<font></font>
y4 = df[columns[<span class="hljs-number">4</span>]].values.tolist()<font></font>
y5 = df[columns[<span class="hljs-number">5</span>]].values.tolist()<font></font>
y6 = df[columns[<span class="hljs-number">6</span>]].values.tolist()<font></font>
y7 = df[columns[<span class="hljs-number">7</span>]].values.tolist()<font></font>
y = np.vstack([y0, y2, y4, y6, y7, y5, y1, y3])<font></font>
<font></font>
<span class="hljs-comment"># Plot for each column</span><font></font>
labs = columns.values.tolist()<font></font>
ax = plt.gca()<font></font>
ax.stackplot(x, y, labels=labs, colors=mycolors, alpha=<span class="hljs-number">0.8</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
ax.set_title(<span class="hljs-string">'Night Visitors in Australian Regions'</span>, fontsize=<span class="hljs-number">18</span>)<font></font>
ax.set(ylim=[<span class="hljs-number">0</span>, <span class="hljs-number">100000</span>])<font></font>
ax.legend(fontsize=<span class="hljs-number">10</span>, ncol=<span class="hljs-number">4</span>)<font></font>
plt.xticks(x[::<span class="hljs-number">5</span>], fontsize=<span class="hljs-number">10</span>, horizontalalignment=<span class="hljs-string">'center'</span>)<font></font>
plt.yticks(np.arange(<span class="hljs-number">10000</span>, <span class="hljs-number">100000</span>, <span class="hljs-number">20000</span>), fontsize=<span class="hljs-number">10</span>)<font></font>
plt.xlim(x[<span class="hljs-number">0</span>], x[<span class="hljs-number">-1</span>])<font></font>
<font></font>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/xx/rm/pe/xxrmpeu7rbzf0dxkl46ivx7bnn0.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">44.éç©ã¿ä¸Šã’é¢ã‚°ãƒ©ãƒ•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚ªãƒ¼ãƒ—ãƒ³ã‚¨ãƒªã‚¢ãƒãƒ£ãƒ¼ãƒˆã¯ã€2ã¤ä»¥ä¸Šã®è¡Œã®é€²è¡ŒçŠ¶æ³ï¼ˆä¸Šä¸‹ï¼‰ã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸‹ã®å›³ã§ã¯ã€å¹³å‡å¤±æ¥­æœŸé–“ã®å¢—åŠ ã«ä¼´ã£ã¦å€‹äººã®è²¯è“„ç‡ãŒã©ã®ã‚ˆã†ã«æ¸›å°‘ã™ã‚‹ã‹ã‚’æ˜ç¢ºã«è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">é–‹ã„ãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å›³ã¯ã€ã“ã®ç¾è±¡ã‚’ã‚ˆãç¤ºã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/economics.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare Data</span>
x = df[<span class="hljs-string">'date'</span>].values.tolist()<font></font>
y1 = df[<span class="hljs-string">'psavert'</span>].values.tolist()<font></font>
y2 = df[<span class="hljs-string">'uempmed'</span>].values.tolist()<font></font>
mycolors = [<span class="hljs-string">'tab:red'</span>, <span class="hljs-string">'tab:blue'</span>, <span class="hljs-string">'tab:green'</span>, <span class="hljs-string">'tab:orange'</span>, <span class="hljs-string">'tab:brown'</span>, <span class="hljs-string">'tab:grey'</span>, <span class="hljs-string">'tab:pink'</span>, <span class="hljs-string">'tab:olive'</span>]      <font></font>
columns = [<span class="hljs-string">'psavert'</span>, <span class="hljs-string">'uempmed'</span>]<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot </span>
fig, ax = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)<font></font>
ax.fill_between(x, y1=y1, y2=<span class="hljs-number">0</span>, label=columns[<span class="hljs-number">1</span>], alpha=<span class="hljs-number">0.5</span>, color=mycolors[<span class="hljs-number">1</span>], linewidth=<span class="hljs-number">2</span>)<font></font>
ax.fill_between(x, y1=y2, y2=<span class="hljs-number">0</span>, label=columns[<span class="hljs-number">0</span>], alpha=<span class="hljs-number">0.5</span>, color=mycolors[<span class="hljs-number">0</span>], linewidth=<span class="hljs-number">2</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
ax.set_title(<span class="hljs-string">'Personal Savings Rate vs Median Duration of Unemployment'</span>, fontsize=<span class="hljs-number">18</span>)<font></font>
ax.set(ylim=[<span class="hljs-number">0</span>, <span class="hljs-number">30</span>])<font></font>
ax.legend(loc=<span class="hljs-string">'best'</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
plt.xticks(x[::<span class="hljs-number">50</span>], fontsize=<span class="hljs-number">10</span>, horizontalalignment=<span class="hljs-string">'center'</span>)<font></font>
plt.yticks(np.arange(<span class="hljs-number">2.5</span>, <span class="hljs-number">30.0</span>, <span class="hljs-number">2.5</span>), fontsize=<span class="hljs-number">10</span>)<font></font>
plt.xlim(<span class="hljs-number">-10</span>, x[<span class="hljs-number">-1</span>])<font></font>
<font></font>
<span class="hljs-comment"># Draw Tick lines  </span>
<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> np.arange(<span class="hljs-number">2.5</span>, <span class="hljs-number">30.0</span>, <span class="hljs-number">2.5</span>):    <font></font>
    plt.hlines(y, xmin=<span class="hljs-number">0</span>, xmax=len(x), colors=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.3</span>, linestyles=<span class="hljs-string">"--"</span>, lw=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/i6/di/_b/i6di_b692jdi6f1rjhacp6vc1gk.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">45.ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒãƒƒãƒ—ã¯ã€æ™‚ç³»åˆ—ã¨æ¯”è¼ƒã—ã¦æ™‚é–“ã«åŸºã¥ã„ã¦ãƒ‡ãƒ¼ã‚¿ã‚’è¦–è¦šåŒ–ã™ã‚‹ãŸã‚ã®ä»£æ›¿ã§ã‚ã‚Šã€ã‚ã¾ã‚Šå¥½ã¾ã—ããªã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã¯è¦–è¦šçš„ã«é­…åŠ›çš„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€æ•°å€¤ã¯å®Œå…¨ã«æ˜ç™½ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl
<span class="hljs-keyword">import</span> calmap<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/yahoo.csv"</span>, parse_dates=[<span class="hljs-string">'date'</span>])<font></font>
df.set_index(<span class="hljs-string">'date'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
calmap.calendarplot(df[<span class="hljs-string">'2014'</span>][<span class="hljs-string">'VIX.Close'</span>], fig_kws={<span class="hljs-string">'figsize'</span>: (<span class="hljs-number">16</span>,<span class="hljs-number">10</span>)}, yearlabel_kws={<span class="hljs-string">'color'</span>:<span class="hljs-string">'black'</span>, <span class="hljs-string">'fontsize'</span>:<span class="hljs-number">14</span>}, subplot_kws={<span class="hljs-string">'title'</span>:<span class="hljs-string">'Yahoo Stock Prices'</span>})<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/0q/jk/xq/0qjkxqus8k3dh4iry43rwn5v8qe.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">46.å­£ç¯€ãƒãƒ£ãƒ¼ãƒˆ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å­£ç¯€ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€å‰ã®ã‚·ãƒ¼ã‚ºãƒ³ã®åŒã˜æ—¥ã«å®Ÿè¡Œã•ã‚ŒãŸæ™‚ç³»åˆ—ã‚’æ¯”è¼ƒã§ãã¾ã™ï¼ˆå¹´/æœˆ/é€±ãªã©ï¼‰ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> dateutil.parser <span class="hljs-keyword">import</span> parse <font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://github.com/selva86/datasets/raw/master/AirPassengers.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Prepare data</span>
df[<span class="hljs-string">'year'</span>] = [parse(d).year <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df.date]<font></font>
df[<span class="hljs-string">'month'</span>] = [parse(d).strftime(<span class="hljs-string">'%b'</span>) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> df.date]<font></font>
years = df[<span class="hljs-string">'year'</span>].unique()<font></font>
<font></font>
<span class="hljs-comment"># Draw Plot</span>
mycolors = [<span class="hljs-string">'tab:red'</span>, <span class="hljs-string">'tab:blue'</span>, <span class="hljs-string">'tab:green'</span>, <span class="hljs-string">'tab:orange'</span>, <span class="hljs-string">'tab:brown'</span>, <span class="hljs-string">'tab:grey'</span>, <span class="hljs-string">'tab:pink'</span>, <span class="hljs-string">'tab:olive'</span>, <span class="hljs-string">'deeppink'</span>, <span class="hljs-string">'steelblue'</span>, <span class="hljs-string">'firebrick'</span>, <span class="hljs-string">'mediumseagreen'</span>]      <font></font>
plt.figure(figsize=(<span class="hljs-number">16</span>,<span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)<font></font>
<font></font>
<span class="hljs-keyword">for</span> i, y <span class="hljs-keyword">in</span> enumerate(years):<font></font>
    plt.plot(<span class="hljs-string">'month'</span>, <span class="hljs-string">'traffic'</span>, data=df.loc[df.year==y, :], color=mycolors[i], label=y)<font></font>
    plt.text(df.loc[df.year==y, :].shape[<span class="hljs-number">0</span>]<span class="hljs-number">-.9</span>, df.loc[df.year==y, <span class="hljs-string">'traffic'</span>][<span class="hljs-number">-1</span>:].values[<span class="hljs-number">0</span>], y, fontsize=<span class="hljs-number">12</span>, color=mycolors[i])<font></font>
<font></font>
<span class="hljs-comment"># Decoration</span>
plt.ylim(<span class="hljs-number">50</span>,<span class="hljs-number">750</span>)<font></font>
plt.xlim(<span class="hljs-number">-0.3</span>, <span class="hljs-number">11</span>)<font></font>
plt.ylabel(<span class="hljs-string">'$Air Traffic$'</span>)<font></font>
plt.yticks(fontsize=<span class="hljs-number">12</span>, alpha=<span class="hljs-number">.7</span>)<font></font>
plt.title(<span class="hljs-string">"Monthly Seasonal Plot: Air Passengers Traffic (1949 - 1969)"</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.grid(axis=<span class="hljs-string">'y'</span>, alpha=<span class="hljs-number">.3</span>)<font></font>
<font></font>
<span class="hljs-comment"># Remove borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0.0</span>)    <font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">0.5</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0.0</span>)    <font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">0.5</span>)   
<span class="hljs-comment"># plt.legend(loc='upper right', ncol=2, fontsize=12)</span><font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ky/tm/av/kytmav8hzpjgjvi6pln5mqx-y8w.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›£ä½“</font></font></h3><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47.ãƒ‡ãƒ³ãƒ‰ãƒ­ã‚°ãƒ©ãƒ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¨¹çŠ¶å›³ã¯ã€æŒ‡å®šã•ã‚ŒãŸè·é›¢ãƒ¡ãƒˆãƒªãƒƒã‚¯ã«åŸºã¥ã„ã¦é¡ä¼¼ç‚¹ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€ç‚¹ã®é¡ä¼¼æ€§ã«åŸºã¥ã„ã¦ãƒ„ãƒªãƒ¼ãƒªãƒ³ã‚¯ã®å½¢å¼ã§ãã‚Œã‚‰ã‚’é…ç½®ã—ã¾ã™ã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> scipy.cluster.hierarchy <span class="hljs-keyword">as</span> shc<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://raw.githubusercontent.com/selva86/datasets/master/USArrests.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)  <font></font>
plt.title(<span class="hljs-string">"USArrests Dendograms"</span>, fontsize=<span class="hljs-number">22</span>)  <font></font>
dend = shc.dendrogram(shc.linkage(df[[<span class="hljs-string">'Murder'</span>, <span class="hljs-string">'Assault'</span>, <span class="hljs-string">'UrbanPop'</span>, <span class="hljs-string">'Rape'</span>]], method=<span class="hljs-string">'ward'</span>), labels=df.State.values, color_threshold=<span class="hljs-number">100</span>)  <font></font>
plt.xticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/jh/a4/qm/jha4qmj6gjt0eky_s0ob2k3djfw.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48.ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å›³</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹ã‚¿ã‚°ãƒ©ãƒ•ã¯ã€1ã¤ã®ã‚¯ãƒ©ã‚¹ã‚¿ã«å±ã™ã‚‹ãƒã‚¤ãƒ³ãƒˆã‚’åŒºåˆ¥ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä»¥ä¸‹ã¯ã€USArrestsãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åŸºã¥ã„ã¦ç±³å›½ã®å·ã‚’5ã¤ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ä¾‹ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚°ãƒ©ãƒ•ã§ã¯ã€ã€Œkillã€åˆ—ã¨ã€Œattackã€åˆ—ã‚’Xè»¸ã¨Yè»¸ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€æœ€åˆã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Xè»¸ã¨Yè»¸ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> AgglomerativeClustering
<span class="hljs-keyword">from</span> scipy.spatial <span class="hljs-keyword">import</span> ConvexHull<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df = pd.read_csv(<span class="hljs-string">'https://raw.githubusercontent.com/selva86/datasets/master/USArrests.csv'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Agglomerative Clustering</span>
cluster = AgglomerativeClustering(n_clusters=<span class="hljs-number">5</span>, affinity=<span class="hljs-string">'euclidean'</span>, linkage=<span class="hljs-string">'ward'</span>)  <font></font>
cluster.fit_predict(df[[<span class="hljs-string">'Murder'</span>, <span class="hljs-string">'Assault'</span>, <span class="hljs-string">'UrbanPop'</span>, <span class="hljs-string">'Rape'</span>]])  <font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">10</span>), dpi= <span class="hljs-number">80</span>)  <font></font>
plt.scatter(df.iloc[:,<span class="hljs-number">0</span>], df.iloc[:,<span class="hljs-number">1</span>], c=cluster.labels_, cmap=<span class="hljs-string">'tab10'</span>)  <font></font>
<font></font>
<span class="hljs-comment"># Encircle</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">encircle</span>(<span class="hljs-params">x,y, ax=None, **kw</span>):</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ax: ax=plt.gca()<font></font>
    p = np.c_[x,y]<font></font>
    hull = ConvexHull(p)<font></font>
    poly = plt.Polygon(p[hull.vertices,:], **kw)<font></font>
    ax.add_patch(poly)<font></font>
<font></font>
<span class="hljs-comment"># Draw polygon surrounding vertices    </span>
encircle(df.loc[cluster.labels_ == <span class="hljs-number">0</span>, <span class="hljs-string">'Murder'</span>], df.loc[cluster.labels_ == <span class="hljs-number">0</span>, <span class="hljs-string">'Assault'</span>], ec=<span class="hljs-string">"k"</span>, fc=<span class="hljs-string">"gold"</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)<font></font>
encircle(df.loc[cluster.labels_ == <span class="hljs-number">1</span>, <span class="hljs-string">'Murder'</span>], df.loc[cluster.labels_ == <span class="hljs-number">1</span>, <span class="hljs-string">'Assault'</span>], ec=<span class="hljs-string">"k"</span>, fc=<span class="hljs-string">"tab:blue"</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)<font></font>
encircle(df.loc[cluster.labels_ == <span class="hljs-number">2</span>, <span class="hljs-string">'Murder'</span>], df.loc[cluster.labels_ == <span class="hljs-number">2</span>, <span class="hljs-string">'Assault'</span>], ec=<span class="hljs-string">"k"</span>, fc=<span class="hljs-string">"tab:red"</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)<font></font>
encircle(df.loc[cluster.labels_ == <span class="hljs-number">3</span>, <span class="hljs-string">'Murder'</span>], df.loc[cluster.labels_ == <span class="hljs-number">3</span>, <span class="hljs-string">'Assault'</span>], ec=<span class="hljs-string">"k"</span>, fc=<span class="hljs-string">"tab:green"</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)<font></font>
encircle(df.loc[cluster.labels_ == <span class="hljs-number">4</span>, <span class="hljs-string">'Murder'</span>], df.loc[cluster.labels_ == <span class="hljs-number">4</span>, <span class="hljs-string">'Assault'</span>], ec=<span class="hljs-string">"k"</span>, fc=<span class="hljs-string">"tab:orange"</span>, alpha=<span class="hljs-number">0.2</span>, linewidth=<span class="hljs-number">0</span>)<font></font>
<font></font>
<span class="hljs-comment"># Decorations</span>
plt.xlabel(<span class="hljs-string">'Murder'</span>); plt.xticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.ylabel(<span class="hljs-string">'Assault'</span>); plt.yticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.title(<span class="hljs-string">'Agglomerative Clustering of USArrests (5 Groups)'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ft/az/dk/ftazdkietrco4c6hgklzhwird8q.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49.ã‚¢ãƒ³ãƒ‰ãƒªãƒ¥ãƒ¼ã‚¹ã‚«ãƒ¼ãƒ–</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ³ãƒ‰ãƒªãƒ¥ãƒ¼ã‚¹æ›²ç·šã¯ã€ã‚°ãƒ«ãƒ¼ãƒ—ã«åŸºã¥ãã‚°ãƒ«ãƒ¼ãƒ—ã«å›ºæœ‰ã®æ•°å€¤ç‰¹æ€§ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’è¦–è¦šåŒ–ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå†…ã®åˆ—ï¼‰ãŒã‚°ãƒ«ãƒ¼ãƒ—ã®è­˜åˆ¥ã«å½¹ç«‹ãŸãªã„å ´åˆã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ã€è¡Œã¯é©åˆ‡ã«åˆ†é›¢ã•ã‚Œã¾ã›ã‚“ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> andrews_curves<font></font>
<font></font>
<span class="hljs-comment"># Import</span>
df = pd.read_csv(<span class="hljs-string">"https://github.com/selva86/datasets/raw/master/mtcars.csv"</span>)<font></font>
df.drop([<span class="hljs-string">'cars'</span>, <span class="hljs-string">'carname'</span>], axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)<font></font>
andrews_curves(df, <span class="hljs-string">'cyl'</span>, colormap=<span class="hljs-string">'Set1'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
<font></font>
plt.title(<span class="hljs-string">'Andrews Curves of mtcars'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.xlim(<span class="hljs-number">-3</span>,<span class="hljs-number">3</span>)<font></font>
plt.grid(alpha=<span class="hljs-number">0.3</span>)<font></font>
plt.xticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.yticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/1c/rh/-z/1crh-zrrc8urd4d1cf-iocfe5ji.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50.å¹³è¡Œåº§æ¨™</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹³è¡Œåº§æ¨™ã¯ã€é–¢æ•°ãŒã‚°ãƒ«ãƒ¼ãƒ—ã‚’åŠ¹æœçš„ã«åˆ†é›¢ã™ã‚‹ã®ã«å½¹ç«‹ã¤ã‹ã©ã†ã‹ã‚’è¦–è¦šåŒ–ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åˆ†é›¢ãŒç™ºç”Ÿã—ãŸå ´åˆã€ã“ã®æ©Ÿèƒ½ã¯ã“ã®ã‚°ãƒ«ãƒ¼ãƒ—ã®äºˆæ¸¬ã«éå¸¸ã«å½¹ç«‹ã¤å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> parallel_coordinates<font></font>
<font></font>
<span class="hljs-comment"># Import Data</span>
df_final = pd.read_csv(<span class="hljs-string">"https://raw.githubusercontent.com/selva86/datasets/master/diamonds_filter.csv"</span>)<font></font>
<font></font>
<span class="hljs-comment"># Plot</span>
plt.figure(figsize=(<span class="hljs-number">12</span>,<span class="hljs-number">9</span>), dpi= <span class="hljs-number">80</span>)<font></font>
parallel_coordinates(df_final, <span class="hljs-string">'cut'</span>, colormap=<span class="hljs-string">'Dark2'</span>)<font></font>
<font></font>
<span class="hljs-comment"># Lighten borders</span>
plt.gca().spines[<span class="hljs-string">"top"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"bottom"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"right"</span>].set_alpha(<span class="hljs-number">0</span>)<font></font>
plt.gca().spines[<span class="hljs-string">"left"</span>].set_alpha(<span class="hljs-number">.3</span>)<font></font>
<font></font>
plt.title(<span class="hljs-string">'Parallel Coordinated of Diamonds'</span>, fontsize=<span class="hljs-number">22</span>)<font></font>
plt.grid(alpha=<span class="hljs-number">0.3</span>)<font></font>
plt.xticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.yticks(fontsize=<span class="hljs-number">12</span>)<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/gt/mx/-7/gtmx-7rlwt_obq2rns8zrkdchio.png"><br>
<br><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã‚¸ãƒ¥ãƒ”ã‚¿ãƒ¼ã®</font></a><font style="vertical-align: inherit;"> 
ãƒœãƒ¼ãƒŠã‚¹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰</font></font></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¬ãƒãƒ§ã‚¦ã€ã‚ãªãŸã¯é›°å›²æ°—ã‚’ç´„æŸã—ã¾ã—ãŸï¼</font></font></b><div class="spoiler_text"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  ,     .       , ,      ,           .<br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja468277/index.html">ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ä»•äº‹ã¯é›£ã—ã„ã§ã™ã‹-å¿ƒç†ç”Ÿç†å­¦ã®è¦³ç‚¹ã‹ã‚‰ã®è¦–ç‚¹</a></li>
<li><a href="../ja468287/index.html">Cï¼ƒå±æ€§ï¼šã™ã¹ã¦ã®å´é¢ã«ã¤ã„ã¦</a></li>
<li><a href="../ja468289/index.html">AM</a></li>
<li><a href="../ja468291/index.html">ãƒãƒ¼ã‚¯ã‚´ãƒ¼ãƒ«ã‚¹ãƒˆãƒ³ã®æœ¬ã€ŒI Can You Hear You Throughã€ã®æ¦‚è¦</a></li>
<li><a href="../ja468293/index.html">Vive Cosmos-HTCã®æ–°ã—ã„VRã‚»ãƒƒãƒˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</a></li>
<li><a href="../ja468299/index.html">2019å¹´ä»¥é™ã«é–‹ç™ºè€…ã®ãŸã‚ã«Oracleã‚’é–‹ç™ºã™ã‚‹ã‚‚ã®</a></li>
<li><a href="../ja468305/index.html">æ‰‹ç¶šãå‹ãƒ ãƒ¼ãƒ³ãƒ¡ã‚¤ã‚­ãƒ³ã‚°</a></li>
<li><a href="../ja468309/index.html">Cascadiaã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ³ãƒˆã®ç´¹ä»‹</a></li>
<li><a href="../ja468311/index.html">Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½¿ç”¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹</a></li>
<li><a href="../ja468315/index.html">OK.RU APIã§æ­£ã—ã„ç½²åï¼ˆSIGï¼‰ã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•ã€‚ã‚¨ãƒ©ãƒ¼104ã§å‹•ä½œã—ã¾ã™</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>