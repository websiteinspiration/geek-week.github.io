<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♿️ 🤜🏽 🕺🏻 ページオブジェクトモデルの革命または進化？ 👌🏿 🏳️‍🌈 👩🏻‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！私の名前はArtyom Sokovetsです。Atlasに関する私の記事の翻訳を共有したいと思います。それは、HTMLオブジェクトフレームワークの生まれ変わりです。これは、ページオブジェクトを操作するためのまったく異なるアプローチを提供します。
 
 詳細に進む前に、質問します...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ページオブジェクトモデルの革命または進化？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/474408/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは！</font><font style="vertical-align: inherit;">私の名前は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artyom Sokovets</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">Atlasに関する私の記事の翻訳を共有したいと思います。それは、HTMLオブジェクトフレームワークの生まれ変わりです。これは、ページオブジェクトを操作するためのまったく異なるアプローチを提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳細に進む前に、質問します。Pag​​eObjectのラッパーはいくつ知っていますか。</font><font style="vertical-align: inherit;">Page Element、ScreenPlay、Loadable Component、Chains of invocations ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、インターフェイスに実装されたPage Objectを受け取り、プロキシパターンをねじ込み、Java 8機能を少し追加するとどうなりますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
興味があれば猫に切り替えることをお勧めします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/d9/ms/skd9msauqsfknsh8sw9sxyrj2dk.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準のPageObjectデザインパターンを使用すると、いくつかの問題が発生し</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainPage</span> </span>{
    <span class="hljs-meta">@FindBy(xpath = ".//div[@class = 'header']")</span>
    <span class="hljs-keyword">private</span> Header header;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnyOtherPage</span> </span>{
    <span class="hljs-meta">@FindBy(xpath = ".//div[@class = 'header']")</span>
    <span class="hljs-keyword">private</span> Header header;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、HeaderブロックがさまざまなPageObjectクラスで使用されています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素のパラメーター化の欠如</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EditUserPage</span> </span>{  
    <span class="hljs-meta">@FindBy(xpath = "//div[text()='Text_1']")</span>
    <span class="hljs-keyword">private</span> TextBlock lastActivity;<font></font>
<font></font>
    <span class="hljs-meta">@FindBy(xpath = "//div[text()='Text_2']")</span>
    <span class="hljs-keyword">private</span> TextBlock blockReason;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、ユーザー設定編集ページの要素について説明します。</font><font style="vertical-align: inherit;">2つのTextBlock要素には、テキスト値（ "Text_1"と "Text_2"）のみが異なるほぼ同一のロケーターが含まれています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じタイプのコード</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserPage</span> </span>{	
    	<span class="hljs-meta">@FindBy(xpath = "//div[text()='']/input")</span>
    	<span class="hljs-keyword">private</span> UfsTextInput innerPhone;<font></font>
     <font></font>
    	<span class="hljs-meta">@FindBy(xpath = "//div[text()='Email']/input")</span>
    	<span class="hljs-keyword">private</span> UfsTextInput email;<font></font>
     <font></font>
    	<span class="hljs-meta">@FindBy(xpath = "//button[text()='']")</span>
    	<span class="hljs-keyword">private</span> UfsButton save;<font></font>
     <font></font>
    	<span class="hljs-meta">@FindBy(xpath = "//button[text()='']")</span>
    	<span class="hljs-keyword">private</span> UfsButton toUsersList;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日常の作業では、同じ要素を持つ多数のコード行で構成されるPage Objectを見つけることができます。</font><font style="vertical-align: inherit;">将来、そのようなクラスは維持するのに「不便」になります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ付きの大規模クラス</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainSteps</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hasText</span><span class="hljs-params">(HtmlElement e, Matcher m)</span>  
    	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hasValue</span><span class="hljs-params">(HtmlElement e, Matcher m)</span>  
    	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">linkContains</span><span class="hljs-params">(HtmlElement e, String s)</span>
    	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hasSize</span><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span>
    	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hasItem</span><span class="hljs-params">(List&lt;HtmlElement&gt; e, Matcher m)</span>      
    	<span class="hljs-comment">//...  </span>
   }
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間が経つにつれて、要素を操作するためのステップのクラスが大きくなります。</font><font style="vertical-align: inherit;">メソッドが重複しないように、さらに注意が必要です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページオブジェクトの世界へのガイド</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTML Elementsフレームワークの生まれ変わりは、上記の問題を解決し、テストプロジェクトのコードの行数を減らし、リストと期待を考慮してより慎重に作業すること、そして拡張システムのおかげでツールを自分で微調整することを目的としています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atlas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、インターフェースを介してPage Objectパターンを実装するUIセルフテストを開発するための新世代Javaフレームワークです。このアプローチは、要素のツリーの構築における多重継承の可能性を提供し、最終的には自動テストのための簡潔なコードを提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレームワークの主な革新は、標準クラスの代わりにインターフェースを使用することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはgithub.comのホームページの説明です。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebPage</span>, <span class="hljs-title">WithHeader</span> </span>{
    <span class="hljs-meta">@FindBy("//a[contains(text(), 'Or start a free)]")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">trial</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードは、1つの要素とWebPageおよびWithHeaderレイヤーからの複数の継承を含むGitHubサイトのメインページを示しています（この例は教育目的でのみ提供されているため、ほとんどのWeb要素は省略されています）。 </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレームワークのアーキテクチャ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlasは現在3つのモジュールで構成されています。 </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アトラスコア</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atlas-webdriver</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アトラスアピウム</font></font></li>
</ul><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アトラスコアは、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページインターフェースを使用してオブジェクト処理するための基本的な機能を説明しています。</font><font style="vertical-align: inherit;">インターフェースを使用するというまさにそのアイデアは、よく知られたレトロフィットツールから取り入れられました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-s/mm/8w/-smm8wwthpyo0xu7lrweew0ew54.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の2つの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atlas-webdriver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atlas-appiumモジュール</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、自動UI WebおよびUIモバイルスクリプトの開発に使用され</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Webページを記述するための主なエントリポイントは、WebPageインターフェイスと、モバイル画面-Screenです。</font><font style="vertical-align: inherit;">概念的には、atlas-webdriverとatlas-appiumは拡張機能（パッケージ* .extension）に基づいて構築されています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アイテム</font></font></h2><br>
<img src="https://habrastorage.org/webt/ot/hn/ql/othnql8naaytd5_voumj6ev9uwy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このツールには、</font><font style="vertical-align: inherit;">UI要素（WebElementクラスのアナログ）を操作するための</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特殊なクラス</font><font style="vertical-align: inherit;">が付属し</font><font style="vertical-align: inherit;">ています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xy/n0/6v/xyn06vwigi41-bob1cxykbq-7dq.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AtlasWebElement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AtlasMobileElementがされて</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって補完</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHOULD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WaitUntilにより方法</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（これらの方法の検討は、記事の中でさらに行われます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このツールは、上記のクラスを拡張してコンポーネントを作成する機能を提供します。これにより、クロスプラットフォーム要素を作成できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主な特徴</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツールの機能を詳細に検討してみましょう：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ef/yd/-c/efyd-c1u5ywgk7ql59ablf3aw5g.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの代わりにインターフェイス</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
標準のPageObjectを説明する場合</font><b><font style="vertical-align: inherit;">、クラスの代わりに</font></b><font style="vertical-align: inherit;">インターフェイスが使用されます。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebPage</span>, <span class="hljs-title">WithHeader</span> </span>{
    <span class="hljs-meta">@FindBy("//a[contains(text(), 'Or start a free trial of Enterprise Server')]")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">trial</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、GitHubスタートページのリンクについて説明します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素のパラメータ化</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
フィールドを持つフォームがあると想像してみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uu/mb/wj/uumbwjd2-nqpladvu1m6khwmxg0.png" width="420"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それを説明するには、@ FindByアノテーションを付けて11個の変数を作成し、必要に応じてゲッターを宣言する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlasを使用すると、</font><font style="vertical-align: inherit;">パラメーター化されたAtlasWebElement要素</font><font style="vertical-align: inherit;">が</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">だけ必要になり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebPage</span> </span>{
    <span class="hljs-meta">@FindBy("//div[text()='{{ text }}']/input")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-meta">@Param("text")</span> String text)</span></span>;<font></font>
}<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動テストコードは次のとおりです。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">simpleTest</span><span class="hljs-params">()</span> </span>{<font></font>
    onMainPage().input(<span class="hljs-string">"First Name"</span>).sendKeys(<span class="hljs-string">"*"</span>);<font></font>
    onMainPage().input(<span class="hljs-string">"Postcode"</span>).sendKeys(<span class="hljs-string">"*"</span>);<font></font>
    onMainPage().input(<span class="hljs-string">"Email"</span>).sendKeys(<span class="hljs-string">"*"</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目的のページに移動し、パラメーターを指定してメソッドを呼び出し、要素を使用して必要なアクションを実行します。</font><font style="vertical-align: inherit;">パラメータを持つメソッドは、特定のフィールドを記述します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重継承</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
異なるページオブジェクトで使用されるブロック（たとえば、ヘッダー）はコードの複製であることはすでに述べました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘッダーgithubがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_p/ca/39/_pca39zx5r4iw6kkwy9azeqy4d4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このブロックについて説明します（ほとんどのWeb要素は省略されています）。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AtlasWebElement</span> </span>{
    <span class="hljs-meta">@FindBy(".//input[contains(@class,'header-search-input')]")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">searchInput</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、任意のページに接続できるレイヤーを作成します。 </font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">WithHeader</span> </span>{
    <span class="hljs-meta">@FindBy("//header[contains(@class,'Header')]")</span>
    <span class="hljs-function">Header <span class="hljs-title">header</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メインページをヘッダーブロックで拡張します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebPage</span>, <span class="hljs-title">WithHeader</span> </span>{
    <span class="hljs-meta">@FindBy("//a[contains(text(), 'Or start a)]")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">trial</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、追加のレイヤーを作成して、目的のページに接続できます。</font><font style="vertical-align: inherit;">次の例では、メインページからヘッダー、フッター、サイドバーの各レイヤーを接続します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WithHeader</span>, <span class="hljs-title">WithFooter</span>, <span class="hljs-title">WithSidebar</span> </span>{}
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに進みましょう。</font><font style="vertical-align: inherit;">ヘッダーには4つのボタン、3つのドロップダウンメニュー、および1つの検索フィールドが含まれてい</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/pk/dg/bfpkdgqfxasiualhznwxmis_nd8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。独自の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Button</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素を作成し、</font><font style="vertical-align: inherit;">1つの要素で4つのボタンを記述します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AtlasWebElement</span> </span>{
    <span class="hljs-meta">@FindBy(".//a[contains(., '{{ value }}')]")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">selectButton</span><span class="hljs-params">(<span class="hljs-meta">@Param("value")</span> String value)</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボタンボタンをヘッダーレイヤーに接続します。</font><font style="vertical-align: inherit;">したがって、GitHubヘッダーの機能を拡張します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WithButton</span> </span>{<font></font>
   …<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
個別の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Button</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素</font><font style="vertical-align: inherit;">をWebサイトの異なるレイヤーに接続して、目的のページで目的の要素をすばやく取得できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">simpleTest</span><span class="hljs-params">()</span> </span>{<font></font>
    onMainPage().open(<span class="hljs-string">"https://github.com"</span>);<font></font>
    onMainPage().header().button(<span class="hljs-string">"Priing"</span>).click();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストの2行目で、サイトの見出しにアクセスし、パラメーター化されたボタンを値「Pricing」で呼び出し、クリックします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストされたサイトには、ページごとに繰り返されるかなりの数の要素が存在する可能性があります。それらすべてを標準のページオブジェクトアプローチで記述しないようにするために、一度記述して、必要に応じて接続することができます。時間とコードの行数の節約は明らかです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jk/mb/hw/jkmbhwzovztryyxlgoxu-slikau.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトのメソッド</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Java 8では、必要な機能を事前定義するために使用されるデフォルトのメソッドが導入されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「有害な」要素があるとします。たとえば、オンまたはオフのチェックボックスです。多くのシナリオが通過します。チェックボックスが無効になっている場合は、有効にする必要があります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">if</span>(onMainPage().rentFilter().checkbox(<span class="hljs-string">""</span>).getAttribute(<span class="hljs-string">"class"</span>).contains(<span class="hljs-string">"disabled"</span>)) {<font></font>
    onMainPage().rentFilter().checkbox(<span class="hljs-string">""</span>).click();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このすべてのコードをステップクラスに格納しないようにするために、デフォルトのメソッドとして要素の隣に配置することができます。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Checkbox</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AtlasWebElement</span> </span>{
    <span class="hljs-meta">@FindBy("//...")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">checkBox</span><span class="hljs-params">((<span class="hljs-meta">@Param("value")</span> String value)</span></span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title">selectCheckbox</span><span class="hljs-params">(String value)</span> </span>{
        <span class="hljs-keyword">if</span> (checkBox(value).getAttribute(<span class="hljs-string">"class"</span>).contains(<span class="hljs-string">"disabled"</span>)) {<font></font>
            checkBox(value).click();<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストのステップは次のようになります。 </font></font><br>
<br>
<pre><code class="java hljs">onMainPage().rentFilter().selectCheckbox(<span class="hljs-string">""</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィールド内の文字のクリーニングと入力を組み合わせる別の例。</font></font><br>
<br>
<pre><code class="java hljs">onMainPage().header().input(<span class="hljs-string">"GitHub"</span>).clear();<font></font>
onMainPage().header().input(<span class="hljs-string">"GitHub"</span>).sendKeys(<span class="hljs-string">"*"</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィールドをクリアして要素自体を返すメソッドを定義します。 </font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Input</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AtlasWebElement</span> </span>{<font></font>
   <font></font>
    <span class="hljs-meta">@FindBy("//xpath")</span>
    <span class="hljs-function">AtlasWebElement <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-meta">@Param("value")</span> String value)</span></span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">default</span> AtlasWebElement <span class="hljs-title">withClearInput</span><span class="hljs-params">(String value)</span> </span>{<font></font>
        input(value).clear();<font></font>
        <span class="hljs-keyword">return</span> input(value);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テスト方法では、手順は次のとおりです。</font></font><br>
<br>
<pre><code class="java hljs">onMainPage().header().withClearInput(<span class="hljs-string">"GitHub"</span>).sendKeys(<span class="hljs-string">"Atlas"</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようにして、要素の目的の動作をプログラムできます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再試行</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Atlasには、再試行が組み込まれてい</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotFoundException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StaleElementReferenceException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebDriverException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などの例外について心配する必要はありません</font><font style="vertical-align: inherit;">。また、Selenium APIの明示的および暗黙的な期待の使用を忘れることもできます。</font></font><br>
<br>
<pre><code class="java hljs">onSite().onSearchPage(<span class="hljs-string">"Junit 5"</span>).repositories().waitUntil(hasSize(<span class="hljs-number">10</span>));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェーンのある時点で例外をキャッチした場合、フェーズは最初から繰り返されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
繰り返しを実行できる時間間隔、または繰り返しの頻度を個別に調整することができます。</font></font><br>
<br>
<pre><code class="java hljs">Atlas atlas = <span class="hljs-keyword">new</span> Atlas(<span class="hljs-keyword">new</span> WebDriverConfiguration(driver))<font></font>
        .context(<span class="hljs-keyword">new</span> RetryerContext(<span class="hljs-keyword">new</span> DefaultRetryer(<span class="hljs-number">3000L</span>, <span class="hljs-number">1000L</span>, Collections.singletonList(Throwable.class))));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポーリングレートが1秒に1回の3秒間を想定しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アノテーションを使用して特定のアイテムの待機を設定することもできます。</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リトライ</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">すべての要素について、検索は3秒以内に行われ、1つの場合は20になります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Retry(timeout = 20_000L, polling = 2000L)</span>
<span class="hljs-meta">@IOSFindBy(xpath = "//XCUIElementTypeSearchField[@name='Search Wikipedia']")</span>
<span class="hljs-meta">@AndroidFindBy(xpath = "//*[contains(@text, 'Search Wikipedia')]")</span>
<span class="hljs-function">AtlasMobileElement <span class="hljs-title">searchWikipedia</span><span class="hljs-params">()</span></span>;
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストでの作業</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ツールはそのままで、</font><b><font style="vertical-align: inherit;">リストでの作業を</font></b><font style="vertical-align: inherit;">提供します。</font><font style="vertical-align: inherit;">どういう意味ですか？</font><font style="vertical-align: inherit;">テキストを入力するinputタグを持つフィールドがあり、ドロップダウンリストが表示されますが、要素はすぐには表示されません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-r/y7/uy/-ry7uy6gnjyp02kyy94ikb8prde.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような場合のために、エンティティElementsCollectionがあります。</font><font style="vertical-align: inherit;">その助けを借りて、リストでの作業があります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ContributorsPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebPage</span>, <span class="hljs-title">WithHeader</span> </span>{
    <span class="hljs-meta">@FindBy(".//ol[contains(@class, 'contrib-data')]//li[contains(@class, 'contrib-person')]")</span>
    <span class="hljs-function">ElementsCollection&lt;RepositoryCard&gt; <span class="hljs-title">hovercards</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用：</font></font><br>
<br>
<pre><code class="java hljs">onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number">4</span>));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイテムをフィルタリングして別の種類のリストに変換することもできます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートアサーション</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
前述のとおり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AtlasWebElement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AtlasMobileElementエンティティ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、should、waitUntilメソッドを使用してチェック（ステートメント）を処理します。</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する必要があります（...）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素を使用してさまざまなステートメント（チェック）を実行します。</font><font style="vertical-align: inherit;">例外</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AssertionErrorがします</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">waitUntil（...）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素を使用してさまざまなステートメント（チェック）を実行します。</font><b><font style="vertical-align: inherit;">RuntimeExceptionを</font></b><font style="vertical-align: inherit;">スローします</font></font><b><font style="vertical-align: inherit;"></font></b></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜこれが行われるのですか？自動スクリプトの実行レポートを解析するときの時間を節約するため。ほとんどの機能チェックはスクリプトの最後に実行されます。機能チェックは機能テストの専門家にとって重要であり、中間チェックは自動テストの専門家にとって重要です。したがって、製品の機能が機能しない場合は、AssumptionError例外をスローし、それ以外の場合はRuntimeExceptionをスローするのが論理的です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/ry/lh/fxrylhza6j8ng2c8hawoaniixvc.png"><br>
<br>
<img src="https://habrastorage.org/webt/x3/jh/qv/x3jhqvyysqmclcpoe7recbi8tim.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリュールでは、私たちが何を扱っているかがすぐにわかります。製品に欠陥がある（FTスペシャリストが仕事を担当する）か、自動テストが失敗する（ATスペシャリストが理解する）のいずれかです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張モデル</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/nr/re/tj/nrretjnxyedry2guei6w0p1opqa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーは、ツールの基本機能を再定義するか、独自の機能を実装する機会があります。</font><font style="vertical-align: inherit;">Atlas拡張モデルはJUnit 5拡張モデルに似ており、atlas-webdriverおよびatlas-appiumモジュールは拡張に基づいて構築されています。</font><font style="vertical-align: inherit;">興味があれば、ソースコードをチェックしてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
抽象的な例を見てみましょう：Internet Explorer 11のUIテストを開発する必要があります（一部の場所ではまだ使用されています）。</font><font style="vertical-align: inherit;">要素の標準クリックが機能しない場合がありますが、JSクリックを使用できます。</font><font style="vertical-align: inherit;">テストプロジェクト全体のクリックを一時的に上書きすることにしました。</font></font><br>
<br>
<pre><code class="java hljs">onMainPage().header().button(<span class="hljs-string">"en"</span>).click();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どうやってするの？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MethodExtensionインターフェースを実装する拡張機能を作成します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JSClickExt</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MethodExtension</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, MethodInfo methodInfo, Configuration config)</span> </span>{
        <span class="hljs-keyword">final</span> WebDriver driver = config.getContext(WebDriverContext.class)<font></font>
                .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> AtlasException(<span class="hljs-string">"Context doesn't exist"</span>)).getValue();
        <span class="hljs-keyword">final</span> JavascriptExecutor js = (JavascriptExecutor) driver;<font></font>
        js.executeScript(<span class="hljs-string">"arguments[0].click();"</span>, proxy);
        <span class="hljs-keyword">return</span> proxy;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">test</span><span class="hljs-params">(Method method)</span> </span>{
        <span class="hljs-keyword">return</span> method.getName().equals(<span class="hljs-string">"click"</span>);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの方法を再定義します。</font><font style="vertical-align: inherit;">test（）メソッドで、clickメソッドをオーバーライドすることを指定します。</font><font style="vertical-align: inherit;">invokeメソッドは、必要なロジックを実装します。</font><font style="vertical-align: inherit;">これで、要素のクリックがJavaScriptを介して行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のように拡張機能を接続します。</font></font><br>
<br>
<pre><code class="java hljs">atlas = <span class="hljs-keyword">new</span> Atlas(<span class="hljs-keyword">new</span> WebDriverConfiguration(driver, <span class="hljs-string">"https://github.com"</span>))<font></font>
        .extension(<span class="hljs-keyword">new</span> JSClickExt());
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
拡張機能の助けを借りて、データベース内の要素のロケーターの検索を作成し、他の興味深い機能を実装することが可能です-それはすべてあなたの想像力とニーズに依存します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PageObjects（WebSite）への単一のエントリポイント</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ツールを使用すると、すべてのページを1か所に保存でき、今後はサイトエンティティを介してのみ機能します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">GitHubSite</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebSite</span> </span>{
    <span class="hljs-meta">@Page</span>
    <span class="hljs-function">MainPage <span class="hljs-title">onMainPage</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-meta">@Page(url = "search")</span>
    <span class="hljs-function">SearchPage <span class="hljs-title">onSearchPage</span><span class="hljs-params">(<span class="hljs-meta">@Query("q")</span> String value)</span></span>;<font></font>
<font></font>
    <span class="hljs-meta">@Page(url = "{profile}/{project}/tree/master/")</span>
    <span class="hljs-function">ProjectPage <span class="hljs-title">onProjectPage</span><span class="hljs-params">(<span class="hljs-meta">@Path("profile")</span> String profile, <span class="hljs-meta">@Path("project")</span> String project)</span></span>;<font></font>
<font></font>
    <span class="hljs-meta">@Page</span>
    <span class="hljs-function">ContributorsPage <span class="hljs-title">onContributorsPage</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、Page'amは高速URL、クエリパラメータ、パスセグメントを設定することができます。</font></font><br>
<br>
<pre><code class="java hljs">onSite().onProjectPage(<span class="hljs-string">"qameta"</span>, <span class="hljs-string">"atlas"</span>).contributors().click();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の行には2つのパスセグメント（qametaとatlas）が含まれており、github.com/qameta/atlas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/tree/masterに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換され</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このアプローチの主な利点は、目的のページをクリックせずにすぐに開くことができることです。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">usePathWebSiteTest</span><span class="hljs-params">()</span> </span>{<font></font>
    onSite().onProjectPage(<span class="hljs-string">"qameta"</span>, <span class="hljs-string">"atlas"</span>).contributors().click();<font></font>
    onSite().onContributorsPage().hovercards().waitUntil(hasSize(<span class="hljs-number">4</span>));<font></font>
}<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可動要素を使用した作業</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
可動要素（AtlasMobileElement）と協力しAtlasWebElementウェブ要素での作業に似ています。</font><font style="vertical-align: inherit;">さらに、AtlasMobileElementに3つのメソッドが追加されました。画面を上/下にスクロール（scrollUp / scrollDown）し、ホールドしてアイテムをクリック（longPress）します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ウィキペディアアプリケーションのメイン画面の例を紹介します。</font><font style="vertical-align: inherit;">1つの要素は、iOSプラットフォームとAndroidの両方について説明されています。</font><font style="vertical-align: inherit;">また、パラメーター化されたボタンについても説明します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MainScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Screen</span> </span>{
    <span class="hljs-meta">@Retry(timeout = 20_000L, polling = 2000L)</span>
    <span class="hljs-meta">@IOSFindBy(xpath = "//XCUIElementTypeSearchField[@name='Search Wikipedia']")</span>
    <span class="hljs-meta">@AndroidFindBy(xpath = "//*[contains(@text, 'Search Wikipedia')]")</span>
    <span class="hljs-function">AtlasMobileElement <span class="hljs-title">searchWikipedia</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-meta">@IOSFindBy(id = "{{ value }}")</span>
    <span class="hljs-function">AtlasMobileElement <span class="hljs-title">button</span><span class="hljs-params">(<span class="hljs-meta">@Param("value")</span> String value)</span></span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストは同じように見えます：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">simpleExample</span><span class="hljs-params">()</span> </span>{<font></font>
    onMainScreen().searchWikipedia().click();<font></font>
    onSearchScreen().search().sendKeys(<span class="hljs-string">"Atlas"</span>);<font></font>
    onSearchScreen().item(<span class="hljs-string">"Atlas LV-3B"</span>).swipeDownOn().click();<font></font>
    onArticleScreen().articleTitle().should(allOf(displayed(), text(<span class="hljs-string">"Atlas LV-3B"</span>)));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例では、Wikipediaのメインページを開き、検索バーをクリックして、テキストAtlasを入力し、値Atlas LV-3Bのリストアイテムまでスクロールして、そのビューに移動します。最後の行では、タイトルが表示され、目的の値が含まれていることを確認しています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リスナー</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
イベントログは、特別なリスナー（リスナーインターフェイス）を使用して実装できます。各メソッドが呼び出されると</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pass</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Failの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4つのイベントがあります</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あとの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vf/to/ku/vftokukrzuynpobt2yjtulqy2g8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このインターフェイスを使用して、レポートを整理できます。以下は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンクに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あるAllure Listenerの例です</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x3/fo/3c/x3fo3cmcfe7beqygkorupy3ngxo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Atlasクラスを初期化するときにリスナーを接続します。</font></font><br>
<br>
<pre><code class="java hljs">atlas = <span class="hljs-keyword">new</span> Atlas(<span class="hljs-keyword">new</span> WebDriverConfiguration(driver)).listener(<span class="hljs-keyword">new</span> AllureListener());
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の方法で、さまざまなレポートシステム（たとえば、ReportPortal）のリスナーを作成できます。 </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UI Webを自動化するには、atlas-webdriver依存関係を登録し、最新の現在のバージョンを示すだけで十分です（このテキストの執筆時点では、バージョン1.6.0が関連しています）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maven：</font></font><br>
<pre><code class="xml hljs"> <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.qameta.atlas<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>atlas-webdriver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${atlas.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gradle：</font></font><br>
<pre><code class="java hljs">dependencies { ompile <span class="hljs-string">'io.qameta.atlas:atlas-webdriver:1.+'</span> }
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UIモバイルを自動化する場合も同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maven：</font></font><br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.qameta.atlas<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>atlas-appium<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${atlas.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gradle：</font></font><br>
<pre><code class="java hljs">dependencies { ompile <span class="hljs-string">'io.qameta.atlas:atlas-appium:1.+'</span> }
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用する</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトに依存関係を追加したら、Atlasクラスインスタンスを初期化する必要があります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Before</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">startDriver</span><span class="hljs-params">()</span> </span>{<font></font>
    driver = <span class="hljs-keyword">new</span> ChromeDriver();<font></font>
    atlas = <span class="hljs-keyword">new</span> Atlas(<span class="hljs-keyword">new</span> WebDriverConfiguration(driver));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlasコンストラクターに、構成のインスタンスとドライバーを渡します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在2つの構成があります：WebDriverConfigurationとAppiumDriverConfiguration。</font><font style="vertical-align: inherit;">各構成には、特定のデフォルト拡張が含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、すべてのPageObjectを作成するメソッドを定義します。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">private</span> &lt;T extends WebPage&gt; <span class="hljs-function">T <span class="hljs-title">onPage</span><span class="hljs-params">(Class&lt;T&gt; page)</span> </span>{
    <span class="hljs-keyword">return</span> atlas.create(driver, page);<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単なテストケースの例：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">simpleTest</span><span class="hljs-params">()</span>  </span>{<font></font>
    onPage(MainPage.class).open("https://github.com");<font></font>
    onPage(MainPage.class).header().searchInput().sendKeys("Atlas");<font></font>
    onPage(MainPage.class).header().searchInput().submit();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイトを開き、ヘッダーレイヤーに移動して、テキストフィールド（検索入力）を探し、テキストを入力してEnterキーを押します。 </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、Atlasは優れた機能を備えた柔軟なツールであることを指摘しておきます。</font><font style="vertical-align: inherit;">これは、特定のテストプロジェクト用に、チームとあなたにとって便利な方法でカスタマイズできます。</font><font style="vertical-align: inherit;">クロスプラットフォームテストなどの開発 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビデオ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のクリップ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からの報告</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">特異なバグ</font></a><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セレンキャンプ、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nexign QAミートアップが用意されています</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">テレグラムチャット@atlashelpがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このツールを使用すると、コードの行数を大幅に削減できます（Yandex、SberTech、Tinkoffなどの企業によるプロジェクトでテスト済み）。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja474396/index.html">デルは、石油業界向けに史上最強の産業用スーパーコンピュータを構築します</a></li>
<li><a href="../ja474400/index.html">色のコントラストの可用性に関する神話</a></li>
<li><a href="../ja474402/index.html">VavrコレクションAPIガイド</a></li>
<li><a href="../ja474404/index.html">Yandex（フロントエンド開発）2019のプログラミング選手権で解決された問題の分析</a></li>
<li><a href="../ja474406/index.html">ワイルドでのBlueKeepの初登場</a></li>
<li><a href="../ja474414/index.html">独自のボクセルエンジンを作成します</a></li>
<li><a href="../ja474418/index.html">DEFCON 27カンファレンス。macOSのハッカー製品の恩恵を受けています。パート1</a></li>
<li><a href="../ja474420/index.html">Становление термостата: как это получилось</a></li>
<li><a href="../ja474424/index.html">混合トレーニング-それは何で、どのように機能するか</a></li>
<li><a href="../ja474426/index.html">アニメシリーズ「数学サークル」</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>