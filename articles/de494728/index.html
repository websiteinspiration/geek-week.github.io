<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🤝‍👨🏼 👊🏼 😓 Die kostengünstigste Methode zur Automatisierung von Vorhängen ✍🏼 🚶🏿 🛠️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es gibt keine Möglichkeit, mit der Entwicklung moderner Hausautomationssysteme namhafter Marken Schritt zu halten, aber der Preis und eine bestimmte F...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Die kostengünstigste Methode zur Automatisierung von Vorhängen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494728/"><img src="https://habrastorage.org/webt/p6/ip/wz/p6ipwzm2sefywfiutbglbhcxm5k.jpeg"> <br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Es gibt keine Möglichkeit, mit der Entwicklung moderner Hausautomationssysteme namhafter Marken Schritt zu halten, aber der Preis und eine bestimmte Funktionalität lassen Sie Ihre Fähigkeiten auf hausgemachte Haushaltsgeräte anwenden. Ich war keine Ausnahme, die Technik und die Arbeit mit Software sind jetzt zugänglicher, ESC, Arduino, STM und andere endlose Vielzahl der vorgeschlagenen Plattformen bieten Möglichkeiten zur Lösung fast aller technischen Probleme. Vor nicht allzu langer Zeit bin ich in eine neue Wohnung am Rande der Stadt gezogen, eine Halle mit Blick auf ein leeres Grundstück und eine verlassene Baustelle, auf der Fasane im Winter spazieren gingen, alles ändert sich schnell und wird gebaut, ein Haus ist vor dem Fenster gewachsen, ein Fenster durch das Fenster.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eq/tc/t4/eqtct4djbagxt9aplif8jng14ng.jpeg"><br>
 <a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Fehlen des Wunsches, Gegenstand der Aufmerksamkeit eines anderen zu werden, spornte an, automatische Vorhänge zu schneiden. Also, was ich von den Vorhängen wollte, das erste, das Heben und Senken entsprechend der eingestellten Zeit, die Steuerung, auch über das Internet, obwohl das letztere für die Implementierung der Sprachsteuerung notwendig war. Infolgedessen gibt es im Internet viele interessante Dinge, aber da ich schwach in der Programmierung bin, konnte ich nicht viele Lösungen verstehen und nicht alle erfüllten die Anforderungen. Die Entscheidung, es alleine zu machen, kam nach und nach, hier trat ich nach und nach auf alle Rechen, kam aber trotzdem zu den Ergebnissen. Rollläden wurden gekauft, eine alte CCTV-Drehkamera aus dem Objekt zerlegt, daraus zwei noone-chinesische Schrittmotoren extrahiert, deren Eigenschaften ich im Internet nicht finden konnte.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5u/tl/2u/5utl2u6o5uqvcybtxrfmbzyxn4w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich mich mit den Motoren befasst hatte, steuerte ich sie mit nodemcu, der Signale zur Steuerung des Aggregats an den ln298n-Treiber sendet. Eine einfache Skizze funktioniert auf der Blynk-Plattform. Die Anfangsposition des Vorhangs wird anhand des Signals vom Reed-Schalter gezählt. Eine bestimmte Anzahl von Schritten wird in die untere Position ausgeführt. Die Zeit zum Anheben und Absenken variiert in wenigen Sekunden und beträgt eineinhalb Minuten, ziemlich langsam, aber ohne Ton! Die Karte verfügt über ein eingebautes WLAN-Modul, und die Blinkplattform ermöglichte je nach Zeitzone eine zeitliche Synchronisation. Ein Widget ermöglichte es daher, die Schaltung so weit wie möglich zu vereinfachen. Die Sprachsteuerung erfolgt über Dusyas Assistenten. Während ich das Telefon als Plattform verwende, gibt es regelmäßig Fehlalarme, die nicht kritisch sind. In Zukunft wird es möglich sein, die Plattform zu ersetzen (wenn ich es herausfinde) und das Mikrofon auszutauschen. Es gibt Ideen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ny/c6/pg/nyc6pgibynw3djkievv9_9cde9i.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ik/cd/ok/ikcdokcux-_kcqnqufapdwiwbfo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein paar Monate Betrieb sind vergangen, alles funktioniert, keine Schritte überspringen, ich achte nicht mehr auf die Vorhänge, die man nicht über meine Katze sagen kann, sie verursachen ihm stabiles Interesse. </font><font style="vertical-align: inherit;">Was sind die Nachteile, Vorhänge funktionieren nicht ohne Internet (Bezahlung für erschwingliche Implementierung), es gibt keine Rückmeldung, bis ich es merkte, ist nicht klar, in welcher Position die Vorhänge geöffnet oder geschlossen sind. </font><font style="vertical-align: inherit;">Obwohl es nicht tödlich ist, wenn die Vorhänge geöffnet oder geschlossen sind und erneut befohlen werden, passiert nichts. </font><font style="vertical-align: inherit;">In jedem Fall ist die Umsetzung auf der Grundlage des geltenden Marktpreises gerechtfertigt. </font><font style="vertical-align: inherit;">Nun, wie sie sagen, alles gut!</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/x1lB_Mf90WY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8E-6TJkelRQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unten ist der Code für esp:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BLYNK_PRINT Serial</span>
<span class="hljs-meta">#include &lt;ESP8266WiFi.h&gt;</span>
<span class="hljs-meta">#include &lt;BlynkSimpleEsp8266.h&gt;</span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;ESP8266mDNS.h&gt;</span>
<span class="hljs-meta">#include &lt;WiFiUdp.h&gt;</span>
<span class="hljs-meta">#include &lt;ArduinoOTA.h&gt; //OTA   OTA-</span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;AccelStepper.h&gt;</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> motor1 D1</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> motor2 D2</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> motor3 D3</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> motor4 D4</span>
<span class="hljs-function">AccelStepper <span class="hljs-title">Stepper1</span>(<span class="hljs-params"><span class="hljs-number">4</span>, D1, D2, D3, D4</span>)</span>; <font></font>
<font></font>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> buttonPin = D5;  <span class="hljs-comment">//     </span>
<span class="hljs-comment">//unsigned long runTime1; //     Arduino, </span>
unsigned <span class="hljs-keyword">long</span> runTime2;
<span class="hljs-keyword">int</span> current = <span class="hljs-number">20800</span>;<span class="hljs-comment">// -    </span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> newZeroPoint = <span class="hljs-literal">true</span>; <span class="hljs-comment">//  ,      ,    .</span><font></font>
<font></font>
<span class="hljs-keyword">char</span> auth[] = <span class="hljs-string">""</span>;
<span class="hljs-keyword">char</span> ssid[] = <span class="hljs-string">""</span>;
<span class="hljs-keyword">char</span> pass[] = <span class="hljs-string">""</span>;<font></font>
   <font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>)</span> {<font></font>
 Serial.begin(<span class="hljs-number">9600</span>);<font></font>
  Blynk.begin(auth, ssid, pass);<font></font>
  <font></font>
  pinMode(buttonPin, INPUT);<font></font>
  pinMode(motor1, OUTPUT);<font></font>
  pinMode(motor2, OUTPUT);<font></font>
  pinMode(motor3, OUTPUT);<font></font>
  pinMode(motor4, OUTPUT);<font></font>
  <font></font>
<font></font>
  ArduinoOTA.setHostname(<span class="hljs-string">"ESP8266-00002"</span>); <span class="hljs-comment">//OTA    </span>
  <span class="hljs-comment">//ArduinoOTA.setPassword((const char *)"0000"); //OTA      </span>
  ArduinoOTA.begin(); <span class="hljs-comment">//OTA  OTA</span><font></font>
        <font></font>
 Stepper1.setMaxSpeed(<span class="hljs-number">200</span>);     <span class="hljs-comment">//      (/)</span>
Stepper1.setAcceleration(<span class="hljs-number">180</span>); <span class="hljs-comment">//  (/^2)</span><font></font>
  <font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ZeroPoint</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">if</span> (newZeroPoint)
  <span class="hljs-comment">//   .</span>
        <span class="hljs-keyword">if</span> (digitalRead(buttonPin)) <font></font>
      {<font></font>
          <span class="hljs-comment">//   ,       .</span>
          Stepper1.setCurrentPosition(<span class="hljs-number">0</span>);<font></font>
          newZeroPoint = <span class="hljs-literal">false</span>;
          <span class="hljs-comment">//Serial.println("true");</span>
      } <span class="hljs-keyword">else</span><font></font>
      {<font></font>
        <span class="hljs-comment">//     ,       .</span>
        <span class="hljs-keyword">if</span> (Stepper1.distanceToGo() == <span class="hljs-number">0</span>) {Stepper1.moveTo(Stepper1.currentPosition() + <span class="hljs-number">1000</span>);}<font></font>
        Stepper1.run();<font></font>
        <span class="hljs-comment">//Serial.println("false");</span><font></font>
      }<font></font>
  }<font></font>
 BLYNK_WRITE(V0)<font></font>
{<font></font>
  <span class="hljs-keyword">int</span> button = param.asInt(); <span class="hljs-comment">// read button  </span>
  <span class="hljs-keyword">if</span> (button == <span class="hljs-number">1</span>){ Stepper1.move(-Stepper1.currentPosition());}  <font></font>
}   <font></font>
      <font></font>
BLYNK_WRITE(V1)<font></font>
{<font></font>
  <span class="hljs-keyword">int</span> button = param.asInt(); <span class="hljs-comment">// read button  </span>
  <span class="hljs-keyword">if</span> (button == <span class="hljs-number">1</span>){<font></font>
    <font></font>
 Stepper1.moveTo(-current);<font></font>
 Stepper1.run();<font></font>
 } <font></font>
}<font></font>
BLYNK_WRITE(V2)<font></font>
{<font></font>
  <span class="hljs-keyword">int</span> button = param.asInt(); <span class="hljs-comment">// read button  </span>
  <span class="hljs-keyword">if</span> (button == <span class="hljs-number">1</span>){<font></font>
  Stepper1.stop();}<font></font>
 } <font></font>
     <font></font>
 <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Out</span>(<span class="hljs-params"></span>)<span class="hljs-comment">//             </span></span><font></font>
 {<font></font>
  <span class="hljs-keyword">if</span> (Stepper1.run())<font></font>
  runTime2 = millis(); <font></font>
  <span class="hljs-keyword">if</span> (millis() - runTime2 &gt; <span class="hljs-number">5000</span>) <font></font>
  {runTime2 = millis();<font></font>
  digitalWrite (<span class="hljs-number">5</span>, LOW);<font></font>
  digitalWrite (<span class="hljs-number">4</span>, LOW);<font></font>
  digitalWrite (<span class="hljs-number">0</span>, LOW);<font></font>
  digitalWrite (<span class="hljs-number">2</span>, LOW);<font></font>
    }<font></font>
}<font></font>
 <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  Blynk.run();<font></font>
 Stepper1.run();<font></font>
    ZeroPoint(); <font></font>
    Out();<font></font>
    ArduinoOTA.handle();       <font></font>
   <font></font>
}</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de494718/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 504 (10.03.2020-16.03.2020)</a></li>
<li><a href="../de494720/index.html">Mein Spickzettel von Pandas</a></li>
<li><a href="../de494722/index.html">Die erste Vorschau-Version von Microsoft PowerShell 7.1 für Windows, Linux und macOS</a></li>
<li><a href="../de494724/index.html">ADAM-6700 - Universelles Linux-Objektkommunikationsmodul</a></li>
<li><a href="../de494726/index.html">Ausnutzung des Themas Coronavirus bei IS-Bedrohungen</a></li>
<li><a href="../de494730/index.html">Interview mit Amusa Buminasan</a></li>
<li><a href="../de494732/index.html">Der Betreuer der beliebtesten JS-Bibliothek wurde wegen seines Verschuldens wegen eines tödlichen Unfalls zu einer Freiheitsstrafe verurteilt</a></li>
<li><a href="../de494736/index.html">Was der Blog des Herausgebers über die Trends der IT-Community aussagt</a></li>
<li><a href="../de494738/index.html">Ansible ist nichts für dich. Sergey Pechenko</a></li>
<li><a href="../de494748/index.html">DOOM Watch auf ESP32. Teil 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>