<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤲🏾 🕉️ 🛌🏽 ASP.NET MVC-ADO.NETを介してMySQLを操作する 🤶🏾 🦖 🤵🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="レガシーテクノロジー: ASP.NET MVC ADO.NET . ASP.NET Core ORM. , .
 
 おそらく、おそらく3回ASP.NET MVCにアクセスします。 ASP.NET WebFormsを10年間使用した後は、MVCテクノロジーに切り替えるのが少し難しくなります。多くの違...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ASP.NET MVC-ADO.NETを介してMySQLを操作する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482346/"><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レガシーテクノロジー</font></font></b><div class="spoiler_text"><b>:  ASP.NET MVC   ADO.NET .   ASP.NET Core   ORM.    ,  .</b><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、おそらく3回ASP.NET MVCにアクセスします。 ASP.NET WebFormsを10年間使用した後は、MVCテクノロジーに切り替えるのが少し難しくなります。多くの違いがあるため、.NET Frameworkライブラリを除いて、これらのテクノロジーに共通するものをリストする方が簡単です。ここでは書きません。MVCはWebFormsよりも優れていますが、どちらも優れているため、両方のテクノロジーで優れたアプリケーションを構築できます。また、TDDの必要性については、私は持っていますが、私も一緒に考えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、最も標準的なタスクについて説明します。通常のデータ操作：レコードのリストの表形式での表示、データの追加、変更、削除（CRUD操作）です。ただし、ASP.NET MVCのほとんどすべての書籍および多くのインターネットソリューションでは、何らかの理由で、このオプションはORM（オブジェクト関係マッピング）を通じてのみ検討されます。エンティティフレームワーク（EF）またはLINQ for SQLのいずれかです。最終的に、プログラマーはテクノロジーが優れていることは間違いありませんが、プログラマーは理解できない可能性がありますが、この非常にリレーショナルなDBMS（彼が使用する可能性が高い）は通常どのように機能し、SQLでさえ理論上は不要です：EFの形で配置してDBMSのコネクタはお互いを理解します。 「ここが幸福です-それはより美しくありません。」しかし、ADO.NETメカニズムを介してデータベースを直接操作することを恐れないプログラマーにとっては、多くの場合、明確ではありません。NET MVCおよびそれが必要かどうか。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、たとえば、私にとっては、最初は、グリッドテーブルにデータを表示するための便利なコンポーネントの欠如を混乱させていました。開発者自身がこれらすべてを実装するか、パッケージマネージャーから適切なものを取得する必要があることがわかります。私と同じように、ASP.NET WebフォームのGridViewコンポーネントに満足している場合、MVCの場合、Grid.mvcを除いて、比較できるものを見つけるのは困難です。しかし、そのようなコンポーネントに対する私の信頼は、十分に大きなプロジェクトにそれらを使用するには十分ではありません。それらが使用されている場合、プログラマーは、最初にこのコンポーネントの記述方法を知らない別の開発者に依存し始めます（定性的ですか？）、次に、いつ、どのようにしてコンポーネントが完成するかがわかりません。コンポーネントを拡張してさらに見られることさえあるようですが、開発者による開発の場合、コードを再度シャベルで動かすか、特定のバージョンでコンポーネントの更新を凍結する必要があります。また、開発者が脆弱性を修正した場合でも、新しいバージョンにアップグレードする必要があります。 MySQLコネクタの新しいバージョンへの移行でさえ、大企業によってまだ開発されていますが、特定の問題が発生しますが、Nugetパッケージマネージャの多数の「バイク」はどうですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは、MySQL DBMSで処理されるデータを操作しながら、ASP.NET MVCで書き込む方法を学びましょう。</font><font style="vertical-align: inherit;">すべてのコードはここの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このアドレス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">取得でき</font><font style="vertical-align: inherit;">ます。このコードの下には、小さなリンクと説明が部分的に表示されます。</font><font style="vertical-align: inherit;">そして、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、あなたはアプリケーションを見ることができます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQLでデータベースを作成する</font></font></h2><br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SCHEMA</span> <span class="hljs-string">`example`</span>;
<span class="hljs-keyword">USE</span> <span class="hljs-string">`example`</span>;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`users`</span> (
  <span class="hljs-string">`UserID`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,
  <span class="hljs-string">`SupporterTier`</span> enum(<span class="hljs-string">'None'</span>,<span class="hljs-string">'Silver'</span>,<span class="hljs-string">'Gold'</span>,<span class="hljs-string">'Platinum'</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'None'</span>,
  <span class="hljs-string">`Loginname`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`LanguageID`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'2'</span>,
  <span class="hljs-string">`Email`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`LastLoginDate`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,<font></font>
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`UserID`</span>),
  <span class="hljs-keyword">KEY</span> <span class="hljs-string">`i_Loginname`</span> (<span class="hljs-string">`Loginname`</span>),
  <span class="hljs-keyword">KEY</span> <span class="hljs-string">`i_Language_idx`</span> (<span class="hljs-string">`LanguageID`</span>),
  <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-string">`i_Language`</span> <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`LanguageID`</span>) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-string">`languages`</span> (<span class="hljs-string">`LanguageID`</span>)<font></font>
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> AUTO_INCREMENT=<span class="hljs-number">1</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`languages`</span> (
  <span class="hljs-string">`LanguageID`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,
  <span class="hljs-string">`LanguageName`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`Culture`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,<font></font>
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`LanguageID`</span>)<font></font>
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> AUTO_INCREMENT=<span class="hljs-number">1</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベース（DB）はシンプルで、2つのテーブルのみで表され、フィールド全体で1対多の関係が1つあります</font></font><code>LanguageID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このように、ユーザーの言語の1つを選択するためにドロップダウンリストを使用する必要がある状況を複雑にします。</font><font style="vertical-align: inherit;">また、複雑化のために</font></font><code>SupporterTier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、列挙型を通じてユーザーサポートのレベルを決定する</font><font style="vertical-align: inherit;">別のフィールド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">ユーザーに紹介します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、プロジェクトでほぼすべてのタイプのデータを使用するために</font></font><code>LastLoginDate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、「日付/時刻」タイプの</font><font style="vertical-align: inherit;">別のフィールド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加します</font><font style="vertical-align: inherit;">。この</font><font style="vertical-align: inherit;">フィールド</font><font style="vertical-align: inherit;">は、ユーザーがログインしたときにアプリケーション自体によって入力されます（このプロジェクトには反映されません）。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトを作成する</font></font></h2><br>
<img src="https://habrastorage.org/webt/sm/4a/07/sm4a07w8etetdgvtnkhd5i-wjcu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「MVC」を選択します。</font><font style="vertical-align: inherit;">「Empty」を使用することは可能ですが、実際のアプリケーションではなくトレーニングがあるため、不必要なジェスチャーなしですぐに、BootstrapとJQueryをアプリケーションに統合できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lg/yv/rn/lgyvrneaxmudgq9mx1ijk36jjqs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々はすでにいっぱいに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォント</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォルダ</font><font style="vertical-align: inherit;">だけでなく、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BundleConfig.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FilterConfig.csファイルを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App_Startの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリ</font><font style="vertical-align: inherit;">ASP.NET MVCバンドルとフィルタの登録と。</font><font style="vertical-align: inherit;">空のプロジェクトでは、ルートの登録のみが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RouteConfig.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルにあります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Global.asax.cs、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのファイルに記載された方法の呼び出しも追加されます。</font></font><br>
<br>
<pre><code class="cpp hljs">FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);<font></font>
RouteConfig.RegisterRoutes(RouteTable.Routes);<font></font>
BundleConfig.RegisterBundles(BundleTable.Bundles);</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インフラストラクチャとバンドル全体をセットアップしました</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL DBMSで作業するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySql.Data</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリを追加します</font><i><font style="vertical-align: inherit;">。mysql </font></i></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-connector-net-8.0.18コネクタが</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピューターにすでにインストールされている</font><font style="vertical-align: inherit;">場合は手動で</font><font style="vertical-align: inherit;">、またはNugetパッケージマネージャーから：</font><font style="vertical-align: inherit;">MySQL DBMSへの接続文字列の構成を</font><i><font style="vertical-align: inherit;">Web.config</font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/b_/fh/mkb_fhxg6d8kx2pdnrithceoaf4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ファイルに追加します</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs">&lt;connectionStrings&gt;<font></font>
  &lt;add name=<span class="hljs-string">"example"</span> providerName=<span class="hljs-string">"MySql.Data.MySqlClient"</span> connectionString=<span class="hljs-string">"server=localhost;Port=3306;user id=develop;Password=develop;persistsecurityinfo=True;database=example;CharSet=utf8;SslMode=none"</span> /&gt;<font></font>
&lt;/connectionStrings&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
追加した</font></font><code>&lt;appSettings&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続文字列へのリンクを</font><font style="vertical-align: inherit;">含む</font><font style="vertical-align: inherit;">行</font><font style="vertical-align: inherit;">をセクションに</font></font><code>&lt;add key="ConnectionString" value="example" /&gt;</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
追加し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">新しい</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドメイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリをアプリケーション</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">追加し、</font><font style="vertical-align: inherit;">そこに新しい静的クラスを</font></font><code>Base</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルに</font><font style="vertical-align: inherit;">）</font><i><font style="vertical-align: inherit;">作成し</font></i><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。これらのパラメーターにアクセスします。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> ConnectionString<font></font>
    {<font></font>
        get<font></font>
        { <span class="hljs-keyword">return</span> System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string">"ConnectionString"</span>]; }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> strConnect<font></font>
    {<font></font>
        get<font></font>
        { <span class="hljs-keyword">return</span> System.Configuration.ConfigurationManager.ConnectionStrings[ConnectionString].ConnectionString; }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーション全体に呼び出される可能性のあるアプリケーションパラメータといくつかの標準関数へのリンクを含む、特定の基本クラスをアプリケーションに含めるのが好きです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接続文字列の名前はアプリケーション設定で定義されるため、将来、DBMSへの接続文字列を操作しやすくなります。異なるデータベース間をすばやく切り替えて、接続設定を変更します。さらに、アプリケーションパラメーターで接続文字列名を使用してアプリケーションをMicrosoft Azureに公開すると便利です。公開に使用されるアプリケーションサービスのパラメーターを設定し、その中で目的の接続文字列を決定できます。これはで事前定義されてい</font></font><code>&lt;connectionStrings&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。次に、公開するときに、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.configファイルの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換を使用できません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、突然必要になった場合に複数の場所で上書きしないように、テキスト内のグローバルリソースファイルの値を使用することも好きです。</font><font style="vertical-align: inherit;">例：</font><i><font style="vertical-align: inherit;">_Layout.cshtml</font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/rc/8u/qz/rc8uqzdrz9hvnd-y7swirgoh4tm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ページのレイアウトファイル</font><font style="vertical-align: inherit;">（通常は</font><i><font style="vertical-align: inherit;">Views \ Shared</font></i><font style="vertical-align: inherit;">ディレクトリに</font><font style="vertical-align: inherit;">あり、さらにこのプロジェクトのすべてのページで使用されます）で、これらの変数を使用できるようになりました（例を参照</font><font style="vertical-align: inherit;">）。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>Example_Users.Properties.Resources.Title</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Type"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html; charset=utf-8"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>@ViewBag.Title – @Example_Users.Properties.Resources.Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><font></font>
   @Styles.Render("~/Content/css")<font></font>
   @Scripts.Render("~/bundles/modernizr")<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container body-content"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-header"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>@Example_Users.Properties.Resources.Title<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><font></font>
       @RenderBody()<font></font>
       <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> @DateTime.Now.Year – @Example_Users.Properties.Resources.Author<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
   @Scripts.Render("~/bundles/jquery")<font></font>
   @Scripts.Render("~/bundles/bootstrap")<font></font>
   @RenderSection("scripts", required: false)<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、このファイルには、接続されたブートストラップのカスケードスタイルシートとJQueryスクリプトライブラリの添付が含まれています。</font><font style="vertical-align: inherit;">すべてのビューの内容は、関数呼び出しの場所に生成されます</font></font><code>RenderBody()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M-モデルを意味する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイル</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserClass.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドメイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリに</font><font style="vertical-align: inherit;">追加します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs">[DisplayName(<span class="hljs-string">"User"</span>)]
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserClass</span>
{</span><font></font>
    [Key]<font></font>
    [HiddenInput(DisplayValue=<span class="hljs-literal">false</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> UserID { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [Required(ErrorMessage=<span class="hljs-string">"Please enter a login name"</span>)]<font></font>
    [Display(Name = <span class="hljs-string">"Login"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Loginname { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> LanguageClass Language { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [EmailAddress(ErrorMessage = <span class="hljs-string">"Please enter a valid email"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Email { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [UIHint(<span class="hljs-string">"Enum"</span>)]<font></font>
    [EnumDataType(typeof(Supporter))]<font></font>
    [Required(ErrorMessage = <span class="hljs-string">"Please select supporter tier"</span>)]<font></font>
    [Display(Name = <span class="hljs-string">"Supporter"</span>)]
    <span class="hljs-keyword">public</span> Supporter SupporterTier { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [HiddenInput(DisplayValue = <span class="hljs-literal">true</span>)]<font></font>
    [ScaffoldColumn(<span class="hljs-literal">false</span>)]<font></font>
    [Display(Name = <span class="hljs-string">"Last login"</span>)]
    <span class="hljs-keyword">public</span> DateTime? LastLoginDate { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [HiddenInput(DisplayValue = <span class="hljs-literal">false</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IsLastLogin<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> LastLoginDate != null &amp;&amp; LastLoginDate &gt; DateTime.MinValue; }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserClass</span><span class="hljs-params">()</span> </span>{}<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserClass</span><span class="hljs-params">(<span class="hljs-keyword">int</span> UserID, <span class="hljs-built_in">string</span> Loginname, LanguageClass Language, <span class="hljs-built_in">string</span> Email, DateTime? LastLoginDate, Supporter SupporterTier)</span>
    </span>{
        <span class="hljs-keyword">this</span>.UserID = UserID;
        <span class="hljs-keyword">this</span>.Loginname = Loginname;
        <span class="hljs-keyword">this</span>.Language = Language;
        <span class="hljs-keyword">this</span>.Email = Email;
        <span class="hljs-keyword">this</span>.LastLoginDate = LastLoginDate;
        <span class="hljs-keyword">this</span>.SupporterTier = SupporterTier;<font></font>
    }<font></font>
}<font></font>
 <font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> Supporter<font></font>
{<font></font>
    [Display(Name=<span class="hljs-string">""</span>)]<font></font>
    None = <span class="hljs-number">1</span>,<font></font>
    Silver = <span class="hljs-number">2</span>,<font></font>
    Gold = <span class="hljs-number">3</span>,<font></font>
    Platinum = <span class="hljs-number">4</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また</font><font style="vertical-align: inherit;">、同じディレクトリに</font><font style="vertical-align: inherit;">ある</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LanguageClass.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">：</font></font><br>
<pre><code class="cpp hljs">[DisplayName(<span class="hljs-string">"Language"</span>)]
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LanguageClass</span>
{</span><font></font>
    [Key]<font></font>
    [HiddenInput(DisplayValue = <span class="hljs-literal">false</span>)]<font></font>
    [Required(ErrorMessage = <span class="hljs-string">"Please select a language"</span>)]<font></font>
    [Range(<span class="hljs-number">1</span>, <span class="hljs-keyword">int</span>.MaxValue, ErrorMessage = <span class="hljs-string">"Please select a language"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> LanguageID { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [Display(Name = <span class="hljs-string">"Language"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> LanguageName { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LanguageClass</span><span class="hljs-params">()</span> </span>{}<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LanguageClass</span><span class="hljs-params">(<span class="hljs-keyword">int</span> LanguageID, <span class="hljs-built_in">string</span> LanguageName)</span>
    </span>{
        <span class="hljs-keyword">this</span>.LanguageID = LanguageID;
        <span class="hljs-keyword">this</span>.LanguageName = LanguageName;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、クラスのプロパティは、テーブルの構造を繰り返していることがわかります</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、</font></font><code>Languages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース化。</font><font style="vertical-align: inherit;">データベーステーブルの類似フィールドの</font></font><code>enum Supporter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスプロパティに使用できるように</font><font style="vertical-align: inherit;">列挙型用に作成され</font></font><code>SupporterTier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。フィールドでは</font></font><code>UserID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>LanguageID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたは彼らが主キー、データベース内とまったく同じように定義されていることがわかります。これには属性が使用されます</font></font><code>[Key]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のすべての属性は</font><font style="vertical-align: inherit;">、このクラスを使用</font><font style="vertical-align: inherit;">して、ビュー（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">view</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">さらに関連しています</font><font style="vertical-align: inherit;">。そして、ヘルパーを使用してこれらのプロパティのHTMLタグを作成する場合（個人的には絶対にお勧めします）、これらの属性を慎重に設定して必要なものを取得する必要があります。特に、このプロジェクトに必要なものは次のとおりです。</font></font><br>
<br>
<ul>
<li><b><code>[DisplayName]</code></b> –        .    ,        <code>Html.DisplayNameForModel</code>  .</li>
<li><b><code>[Display]</code></b>   <code>Name</code> –        .     Order,            (       ,      Order  ).</li>
<li><b><code>[HiddenInput]</code></b>   <code>DisplayValue</code>.   ,           (<code>DisplayValue=false</code>,    <code>input</code>   <code>hidden</code>),   ,  -  ,      (<code>DisplayValue=true</code>,    ,  )</li>
<li><b><code>[ScaffoldColumn]</code></b> – ,       (, <code>Html.EditorForModel</code>).  <code>false</code> –          ,   .    <code>[HiddenInput(DisplayValue = false)]</code>,                   ,     .        <code>LastLoginDate</code>,    ,   - ,     - .</li>
<li><b><code>[Required]</code></b> –   ,      ,        <code>ErrorMessage</code>   <code>AllowEmptyStrings</code>    .</li>
<li><b><code>[EmailAddress]</code></b> – ,  ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースモデルのクラスの準備ができたら、表現に移ります（表現のモデルのクラスについては以下で説明します）。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V- </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">復讐の</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンスを</font><font style="vertical-align: inherit;">意味し</font><font style="vertical-align: inherit;">ます</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビューの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリの作成、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリを</font><font style="vertical-align: inherit;">いただいため。</font><font style="vertical-align: inherit;">すべてのビュー</font><font style="vertical-align: inherit;">は、</font><i><font style="vertical-align: inherit;">Views \ Shared</font></i><font style="vertical-align: inherit;">ディレクトリに</font><font style="vertical-align: inherit;">ある標準（</font><i><font style="vertical-align: inherit;">Views</font></i><font style="vertical-align: inherit;">ディレクトリの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ViewStart.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">定義</font><font style="vertical-align: inherit;">）</font><i><font style="vertical-align: inherit;">_Layout.cshtml</font></i><font style="vertical-align: inherit;">レイアウトを使用します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ビューを作成します</font><font style="vertical-align: inherit;">（</font><i><font style="vertical-align: inherit;">Users</font></i><font style="vertical-align: inherit;">ディレクトリの</font><i><font style="vertical-align: inherit;">Index.cshtml</font></i><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">）：</font><font style="vertical-align: inherit;">
コードを記述します。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>Index</code><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/jh/es/jn/jhesjnicwj2g1acx7yziv4f6wqy.png"><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="xml hljs">@model Example_Users.Models.UsersGrid<font></font>
@{<font></font>
   ViewBag.Title = "Users page";<font></font>
}<font></font>
@using (@Html.BeginForm())<font></font>
{<font></font>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Users list:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><font></font>
       @if (TempData["message"] != null)<font></font>
       {<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-success"</span>&gt;</span>@TempData["message"]<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}<font></font>
       @if (TempData["error"] != null)<font></font>
       {<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-warning"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert"</span>&gt;</span>ERROR:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> @TempData["error"]<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}<font></font>
       @Html.Partial("List")<font></font>
       <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"onNewUser"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"New user"</span> /&gt;</span><font></font>
           @*@Html.ActionLink("New user", "New", "Users")*@<font></font>
       <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューをデフォルトで開始する場合は</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RouteConfig.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">を</font></font><code>Default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次の</font><font style="vertical-align: inherit;">ように変更し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs">routes.MapRoute(name: <span class="hljs-string">"Default"</span>, url: <span class="hljs-string">"{controller}/{action}/{id}"</span>,<font></font>
defaults: <span class="hljs-keyword">new</span> { controller = <span class="hljs-string">"Users"</span>, action = <span class="hljs-string">"Index"</span>, id = UrlParameter.Optional });</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プレゼンテーション自体では、行cに注意してください</font></font><code>Html.Partial("List")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">Views \ Shared</font></i><font style="vertical-align: inherit;">ディレクトリの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">ある特別な個別の一般的な部分ビューをこの場所に描画するために必要</font><font style="vertical-align: inherit;">です。実際、これはデータベーステーブルのデータを表示するためのグリッドテーブルです</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>users</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="xml hljs">@model Example_Users.Models.UsersGrid<font></font>
@using Example_Users.Domain<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-responsive"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table table-bordered table-hover"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Loginname).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Language.LanguageName).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Language).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Language).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Email).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Email).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Email).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().SupporterTier).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().LastLoginDate).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><font></font>
            @foreach (var item in Model.Users)<font></font>
            {<font></font>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@Html.ActionLink(item.Loginname, "Edit", "Users", new { UserID = item.UserID }, null)<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@Html.DisplayFor(modelitem =&gt; item.Language.LanguageName)<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@Html.DisplayFor(modelitem =&gt; item.Email)<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"@Html.DisplayFor(modelitem =&gt; item.SupporterTier)"</span>&gt;</span>@if (item.SupporterTier != Supporter.None) {@Html.DisplayFor(modelitem =&gt; item.SupporterTier);}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@if (item.IsLastLogin) {@Html.DisplayFor(modelitem =&gt; item.LastLoginDate)}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><font></font>
            }<font></font>
        <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
@if (Model.PagingInfo.totalPages &gt; 1)<font></font>
{<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pagination"</span>&gt;</span><font></font>
        @Html.PageLinks(Model.PagingInfo, x =&gt; Url.Action("Index", new { page = x, sortOrder = Model.SortingInfo.currentSort }))<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データテーブルのヘッダーでは、ヘルパーを使用</font></font><code>Html.DisplayNameFor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して列の名前を表示しているため、クラスオブジェクトのプロパティへのリンクを指定する必要があります。テーブルタイトルを形成するとき</font></font><code>Model.Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、タイプのオブジェクトのリストで</font><font style="vertical-align: inherit;">あるオブジェクトのみがある</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ため、次のメソッドを適用する必要があります</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このリストの最初の行をクラスのオブジェクトとして選択します</font><font style="vertical-align: inherit;">。たとえば、ユーザー名の場合：</font></font><code>Model.Users.First().Loginname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>Loginname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラス</font><font style="vertical-align: inherit;">プロパティに</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は属性</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">ある</font><font style="vertical-align: inherit;">ため、</font></font><code>[Display(Name = "Login")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列名に「ログイン」と正確に表示され</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hv/kf/dv/hvkfdvojevmzacuid51wurye8ik.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ブロックc </font></font><code>foreach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はもちろん、</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストにある</font><font style="vertical-align: inherit;">クラスオブジェクト</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">レンダリング</font><font style="vertical-align: inherit;">します</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントローラから取得します。</font><font style="vertical-align: inherit;">そして</font><font style="vertical-align: inherit;">、私たちのモデル</font><font style="vertical-align: inherit;">には興味深いオブジェクトが</font></font><code>SortingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font></font><code>PagingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、これらのオブジェクトは、データの並べ替え（タグのテーブルヘッダーで使用</font></font><code>&lt;th&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）と情報のページ分割（ページ下部のテーブルの下で使用）を整理</font><font style="vertical-align: inherit;">するために必要</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これが、型オブジェクトの純粋なリストをモデルとして使用しない理由</font></font><code>IEnumerable&lt;UserClass&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">また、モデルとして</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">Model</font></i><font style="vertical-align: inherit;">ディレクトリの</font><i><font style="vertical-align: inherit;">UsersGrid.cs</font></i></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">ある</font><font style="vertical-align: inherit;">クラスを使用し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersGrid</span>
{</span>
    <span class="hljs-keyword">public</span> IEnumerable&lt;UserClass&gt; Users { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-keyword">public</span> PagingInfo PagingInfo { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-keyword">public</span> SortingInfo SortingInfo { get; <span class="hljs-built_in">set</span>; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラス自体</font></font><code>PagingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>SortingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルの</font><font style="vertical-align: inherit;">両方が</font></font><code>GridInfo.cs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じ場所にあります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PagingInfo</span>
{</span>
    <span class="hljs-comment">//    </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> totalItems { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//    </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> itemsPerPage { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> currentPage { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//        </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> showPages { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> totalPages<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>)Math.Ceiling((decimal)totalItems / itemsPerPage); }<font></font>
    }<font></font>
    <span class="hljs-comment">//          </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> pagesSide<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>)Math.Truncate((decimal)showPages / <span class="hljs-number">2</span>); }<font></font>
    }<font></font>
}<font></font>
 <font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SortingInfo</span>
{</span>
    <span class="hljs-comment">//  ,    </span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> currentOrder { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">public</span> SortDirection currentDirection { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> currentSort<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> currentDirection != SortDirection.Descending ? currentOrder : currentOrder + <span class="hljs-string">"_desc"</span>; }<font></font>
    }<font></font>
    <span class="hljs-comment">//       (      -   )</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">NewOrder</span><span class="hljs-params">(<span class="hljs-built_in">string</span> columnName)</span>
    </span>{
        <span class="hljs-keyword">return</span> columnName == currentOrder &amp;&amp; currentDirection != SortDirection.Descending ? columnName + <span class="hljs-string">"_desc"</span> : columnName;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ビューで使用するために、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GridHelpers.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HtmlHelpers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリ</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">に特別なヘルパーが追加されて</font><i><font style="vertical-align: inherit;">い</font></i><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GridHelpers</span>
{</span>
    <span class="hljs-comment">//     1 ... 3 4 5 ... Last</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MvcHtmlString <span class="hljs-title">PageLinks</span><span class="hljs-params">(<span class="hljs-keyword">this</span> HtmlHelper html, PagingInfo pagingInfo, Func&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">string</span>&gt; pageUrl)</span>
    </span>{<font></font>
        StringBuilder result = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-keyword">if</span> (pagingInfo.currentPage &gt; pagingInfo.pagesSide + <span class="hljs-number">1</span>)<font></font>
        {<span class="hljs-comment">//  </span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"a"</span>);<font></font>
            tag.MergeAttribute(<span class="hljs-string">"href"</span>, pageUrl(<span class="hljs-number">1</span>));<font></font>
            tag.InnerHtml = <span class="hljs-string">"1"</span>;<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">int</span> page1 = pagingInfo.currentPage - pagingInfo.pagesSide;
        <span class="hljs-keyword">int</span> page2 = pagingInfo.currentPage + pagingInfo.pagesSide;
        <span class="hljs-keyword">if</span> (page1 &lt; <span class="hljs-number">1</span>)<font></font>
        {<font></font>
            page2 = page2 - page1 + <span class="hljs-number">1</span>;<font></font>
            page1 = <span class="hljs-number">1</span>;<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (page2 &gt; pagingInfo.totalPages) page2 = pagingInfo.totalPages;
        <span class="hljs-keyword">if</span> (page1 &gt; <span class="hljs-number">2</span>)<font></font>
        {<span class="hljs-comment">// ...</span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"span"</span>);<font></font>
            tag.InnerHtml = <span class="hljs-string">"..."</span>;<font></font>
            tag.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
            tag.AddCssClass(<span class="hljs-string">"disabled"</span>);<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = page1; i &lt;= page2; i++)<font></font>
        {<span class="hljs-comment">// </span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);
            <span class="hljs-keyword">if</span> (i == pagingInfo.currentPage) li.AddCssClass(<span class="hljs-string">"active"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"a"</span>);<font></font>
            tag.AddCssClass(<span class="hljs-string">"page-link"</span>);<font></font>
            tag.MergeAttribute(<span class="hljs-string">"href"</span>, pageUrl(i));<font></font>
            tag.InnerHtml = i.ToString();<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (page2 &lt; pagingInfo.totalPages)<font></font>
        {<span class="hljs-comment">// ...   </span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"span"</span>);<font></font>
            tag.InnerHtml = <span class="hljs-string">"..."</span>;<font></font>
            tag.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
            tag.AddCssClass(<span class="hljs-string">"disabled"</span>);<font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
 <font></font>
            li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"a"</span>);<font></font>
            tag.MergeAttribute(<span class="hljs-string">"href"</span>, pageUrl(pagingInfo.totalPages));<font></font>
            tag.InnerHtml = pagingInfo.totalPages.ToString();<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> MvcHtmlString.Create(result.ToString());<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IHtmlString <span class="hljs-title">SortIdentifier</span><span class="hljs-params">(<span class="hljs-keyword">this</span> HtmlHelper htmlHelper, <span class="hljs-built_in">string</span> sortOrder, <span class="hljs-built_in">string</span> field)</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(sortOrder) || (sortOrder.Trim() != field &amp;&amp; sortOrder.Replace(<span class="hljs-string">"_desc"</span>, <span class="hljs-string">""</span>).Trim() != field)) <span class="hljs-keyword">return</span> null;
        <span class="hljs-built_in">string</span> glyph = <span class="hljs-string">"glyphicon glyphicon-chevron-up"</span>;
        <span class="hljs-keyword">if</span> (sortOrder.ToLower().Contains(<span class="hljs-string">"desc"</span>))<font></font>
        {<font></font>
            glyph = <span class="hljs-string">"glyphicon glyphicon-chevron-down"</span>;<font></font>
        }<font></font>
        var span = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"span"</span>);<font></font>
        span.Attributes[<span class="hljs-string">"class"</span>] = glyph;
        <span class="hljs-keyword">return</span> MvcHtmlString.Create(span.ToString());<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RouteValueDictionary <span class="hljs-title">ToRouteValueDictionary</span><span class="hljs-params">(<span class="hljs-keyword">this</span> NameValueCollection collection, <span class="hljs-built_in">string</span> newKey, <span class="hljs-built_in">string</span> newValue)</span>
    </span>{<font></font>
        var routeValueDictionary = <span class="hljs-keyword">new</span> RouteValueDictionary();<font></font>
        foreach (var key in collection.AllKeys)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (key == null) <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">if</span> (routeValueDictionary.ContainsKey(key))<font></font>
                routeValueDictionary.Remove(key);<font></font>
            routeValueDictionary.Add(key, collection[key]);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(newValue))<font></font>
        {<font></font>
            routeValueDictionary.Remove(newKey);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (routeValueDictionary.ContainsKey(newKey))<font></font>
                routeValueDictionary.Remove(newKey);<font></font>
            routeValueDictionary.Add(newKey, newValue);<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> routeValueDictionary;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
並べ替えやページング情報のないデータを含むグリッドはかなり役に立たないものであり、ASP.NET MVCのデータテーブル全体に対する標準のヘルパーがないため、自分で作成する必要があります（または他の誰かが作成したものを使用します）。この場合、私はインターネットで提示されたASP.NET MVCの本とソリューションのいくつかの実装をスパイしました。さらに、何らかの理由で、少なくともデータの並べ替えとページ分割を組み合わせたソリューションはまったくないか、見つかりませんでした。私はこの全体を理解し、組み合わせて通常の状態に変更する必要がありました。たとえば、これらの実装でのページ分割では、ページのリストが多少長くなることはありませんが、数千ページある場合はどうでしょうか。上記のソリューションの表示例を示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wj/dt/yr/wjdtyrmtbxm5f_5jfj7til_iqy0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データを作成および変更するためのビューも必要です。</font><font style="vertical-align: inherit;">タイプのオブジェクトを作成するビュー</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0u/80/-i/0u80-itckfou4ciyyxremebrqy8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ビューコードは次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs">@model Example_Users.Models.UserModel<font></font>
@{<font></font>
    ViewBag.Title = <span class="hljs-string">"New "</span> + Html.DisplayNameForModel().ToString().ToLower();<font></font>
}<font></font>
&lt;h2&gt;@ViewBag.Title&lt;/h2&gt;<font></font>
@<span class="hljs-keyword">using</span> (@Html.BeginForm(<span class="hljs-string">"New"</span>, <span class="hljs-string">"Users"</span>, FormMethod.Post))<font></font>
{<font></font>
    @Html.EditorFor(m =&gt; m.User);<font></font>
    @Html.LabelFor(m =&gt; Model.User.Language)&lt;br /&gt;<font></font>
    @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages())<font></font>
    &lt;span/&gt;@Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID)&lt;br /&gt;<font></font>
    &lt;br /&gt;<font></font>
    &lt;p&gt;&lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Add"</span> /&gt; &lt;input type=<span class="hljs-string">"button"</span> onclick=<span class="hljs-string">"history.go(-1)"</span> value=<span class="hljs-string">"Cancel"</span> /&gt;&lt;/p&gt;<font></font>
    @*&lt;p&gt;@Html.ActionLink(<span class="hljs-string">"Back to list"</span>, <span class="hljs-string">"Index"</span>)&lt;/p&gt;*@<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューは、たとえば、</font></font><code>Html.EditorFor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスオブジェクトのすべてのプロパティを編集するためのタグを生成する手段としての</font><font style="vertical-align: inherit;">ヘルパーの使用を示してい</font><font style="vertical-align: inherit;">ます</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは次のように表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v-/rz/kw/v-rzkwz4dtui-xhs4lo2vbjyf3s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューでは、クラスは</font><font style="vertical-align: inherit;">直接</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ではなく</font><font style="vertical-align: inherit;">モデルとして使用され</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">クラス自体は</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">Models</font></i><font style="vertical-align: inherit;">ディレクトリの</font><i><font style="vertical-align: inherit;">UserModel.cs</font></i></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">にあり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserModel</span>
{</span>
    <span class="hljs-keyword">public</span> UserClass User { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-keyword">private</span> IList&lt;LanguageClass&gt; Languages { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserModel</span><span class="hljs-params">()</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserModel</span><span class="hljs-params">(UserClass user, IList&lt;LanguageClass&gt; languages)</span>
    </span>{
        <span class="hljs-keyword">this</span>.User = user;
        <span class="hljs-keyword">this</span>.Languages = languages;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;SelectListItem&gt; <span class="hljs-title">SelectLanguages</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">if</span> (Languages != null) { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SelectList(Languages, <span class="hljs-string">"LanguageID"</span>, <span class="hljs-string">"LanguageName"</span>); }
        <span class="hljs-keyword">return</span> null;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラスには、オブジェクト自体</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とタイプオブジェクトの追加リストが</font><font style="vertical-align: inherit;">含まれ</font><font style="vertical-align: inherit;">ます</font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。言語のドロップダウンリストを作成するためにこのリストが必要であり、現在のユーザー言語を選択できます。</font></font><code>@Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages(), "")</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このヘルパーは、</font></font><code>SelectLanguages()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語のリスト</font></font><code>SelectList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を、識別子と行名パラメーターが既に設定されて</font><font style="vertical-align: inherit;">いるタイプのオブジェクトに変換</font><font style="vertical-align: inherit;">する関数呼び出し</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用します</font><font style="vertical-align: inherit;">。このオブジェクトの生成をビューに入れるのは間違っています。理論上、アイデアはフィールド名へのこれらのバインディングを認識してはならないからです。もちろん、コントローラ</font></font><code>SelectList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">既製のものをすぐに生成することは可能です</font><font style="vertical-align: inherit;">が、私はドメインクラスオブジェクトのプライベートリストと関数のオプションがもっと好きです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドロップダウンリストを生成するには、別のヘルパーを使用する必要があります。これは、ヘルパー</font></font><code>Html.EditorFor(m =&gt; m.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がそのタイプの埋め込みオブジェクトの編集マークアップを生成しないためです</font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（これは、ドロップダウンリストの共通テンプレートを記述することで回避できますが、ここではこれを行いません...）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別のクラスオブジェクトを含む</font><font style="vertical-align: inherit;">ビュー</font><font style="vertical-align: inherit;">でクラスオブジェクト</font><font style="vertical-align: inherit;">を</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用している</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ため、ヘルパーは再帰的ではなく、この状況では機能しないため、ヘルパーを使用できません。したがって</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、オブジェクトの</font><font style="vertical-align: inherit;">ヘルパーを使用</font><font style="vertical-align: inherit;">します</font></font><code>User</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、コメント付きのタグにも注目したいと思います。</font></font><code>Html.ActionLink("Back to list", "Index")</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、編集のためのビューからのデータリストへの戻りは、この方法で実装されます。実際、第一に、私の意見では、奇妙に見えます-フォーム</font></font><code>button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">タイプボタンを使用</font><font style="vertical-align: inherit;">し、リターンボタンが何らかの理由でリンクによって実装されている場合です。次に、並べ替えとページごとの出力を使用する場合、同じビューの同じページに戻り、オブジェクトだけでなく</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ページに戻るためのパラメーターも</font><font style="vertical-align: inherit;">ビューに渡すことが賢明でなければなりません</font><font style="vertical-align: inherit;">。より簡単な方法があります-次のようなボタンでオプションを使用します：</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ユーザーをブラウザの履歴ページに戻します。もちろん、ここには微妙な違いがあります（たとえば、既にこのページでオブジェクトを保存しようとしましたが、機能しませんでした。今ではキャンセルボタンをダブルクリックする必要があります）が、このオプションは全体としてうまく機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてタイプのオブジェクトを編集するためのビュー</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a2/eo/xh/a2eoxhk3nzvbvs0h7s_nmjxuems.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてそのコード：</font></font><br>
<br>
<pre><code class="cpp hljs">@model Example_Users.Models.UserModel<font></font>
@{<font></font>
    ViewBag.Title = <span class="hljs-string">"Edit "</span> + Html.DisplayNameForModel().ToString().ToLower();<font></font>
}<font></font>
&lt;h2&gt;@ViewBag.Title @Model.User.Loginname&lt;/h2&gt;<font></font>
@<span class="hljs-keyword">using</span> (@Html.BeginForm(<span class="hljs-string">"Edit"</span>, <span class="hljs-string">"Users"</span>, FormMethod.Post))<font></font>
{<font></font>
    @Html.HiddenFor(m =&gt; Model.User.UserID)<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.Loginname)<font></font>
        @Html.EditorFor(m =&gt; Model.User.Loginname)<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.Loginname)<font></font>
    &lt;/div&gt;<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.Language)<font></font>
        @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages())<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID)<font></font>
    &lt;/div&gt;<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.Email)<font></font>
        @Html.EditorFor(m =&gt; Model.User.Email)<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.Email)<font></font>
    &lt;/div&gt;<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.SupporterTier)<font></font>
        @Html.EditorFor(m =&gt; Model.User.SupporterTier)<font></font>
        @*@Html.EnumDropDownListFor(m =&gt; Model.User.SupporterTier)*@<font></font>
        @*@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, <span class="hljs-keyword">new</span> SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))*@<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.SupporterTier)<font></font>
    &lt;/div&gt;<font></font>
    &lt;br /&gt;<font></font>
    &lt;p&gt;&lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Save"</span> /&gt; &lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Remove"</span> onclick=<span class="hljs-string">"javascript:return confirm('Are you sure?');"</span> /&gt; &lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Cancel"</span> /&gt;&lt;/p&gt;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、このビューでは、クラスオブジェクトの目的のプロパティごとに別々のタグを生成するために、さまざまなヘルパーを使用するオプションが表示されます。</font><font style="vertical-align: inherit;">この場合、すでに少し異なる、よりきれいな方法で表示を行うことができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3g/ew/as/3gewasn6m2whqy9odk4gvrn2l0c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このビューでは、別の方法を使用してリストに戻ります。</font><font style="vertical-align: inherit;">ビューボタンを使用する代わりに</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、他のアクションボタンと同じボタンが使用され（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Save</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remove</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、これらのボタンのアクションを処理するコントローラーメソッド内で戻りが実行されます（以下のメソッドの実装を参照）。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列挙型</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enum</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型のクラスプロパティの使用に関連するニュアンスがありました</font><font style="vertical-align: inherit;">。実際には、ヘルパーを使用するだけの場合、</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキスト情報入力フィールド（type tag </font></font><code>&lt;input type=”text”/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">フォーム</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">表示されますが、</font><font style="vertical-align: inherit;">実際には一連の値から選択できるフィールド（つまり</font></font><code>&lt;select&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、一連のオプションを持つ</font><font style="vertical-align: inherit;">タグ</font></font><code>&lt;option&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.は、直線型ヘルパーを使用して解決している</font></font><code>Html.DropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か、</font></font><code>Html.ListBoxFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々の場合には、例えば、</font></font><code>@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, new SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 2つのマイナスがあります-ヘルパーのために個別に処方されなければ</font><font style="vertical-align: inherit;">ならない</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、機能しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.カスタムタイプテンプレートを作成できます</font></font><code>Editor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><i><font style="vertical-align: inherit;">Views \ Shared \ EditorTemplatesフォルダーに</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supporter.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成し</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="xml hljs">@model Example_Users.Domain.Supporter<font></font>
@Html.DropDownListFor(m =&gt; m, new SelectList(Enum.GetNames(Model.GetType()), Model.ToString()))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイル名はタイプ名と一致する必要があります。一致しない</font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、ではなく</font><font style="vertical-align: inherit;">と書き込む必要があります</font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ファイルに別の名前を付ける場合は、クラスでプロパティを説明する前にヒントを追加する必要があります</font></font><code>[UIHint("Supporter")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そして、それが使用される予定である場合にも実行する必要があります</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-そのため、フォームのソリューションは機能し</font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーを作成（ビューを起動</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">しようとすると、</font><font style="vertical-align: inherit;">ヘルパー用のプログラムに</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーが発生し</font><font style="vertical-align: inherit;">たため、このオプションは適していませんでした</font><font style="vertical-align: inherit;">：「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディクショナリに渡されたモデル要素はNULLですが、このディクショナリには、「Example_Users Domain.Supporter "、nullではありません。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">»理由は明らかです。リストの値を空にすることはできませんが、問題を解決することはできませんでした。したがって、彼はさらに理解し始めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. </font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">転送専用</font><font style="vertical-align: inherit;">のヘルパーを使用できます</font><font style="vertical-align: inherit;">。ここではすべてが問題なく、追加で書き込む必要はありません。すべてが正しく表示され、オブジェクトの編集時および作成時に機能します。 1つの「しかし」を除いて：ヘルパー</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はヘルパーを使用してすべてのプロパティを表示するため、</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用しません</font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そして、私が理解しているように、プロパティのクラスの属性の助けを借りてそれを回避することはできません- </font></font><code>[UIHint]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>[DataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして</font></font><code>[EnumDataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それから機能しません。列挙値の属性も機能しません。つまり、Noneの代わりに、たとえば、列挙の説明で定義されている空の文字列を出力することはできません</font></font><code>Supporter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.その結果、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターネットで見つかっ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たソリューションオプションを考え出し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ました</font></a><font style="vertical-align: inherit;">。転送用の共通テンプレートを作成しました。</font><i><font style="vertical-align: inherit;">Views \ Shared \ EditorTemplatesフォルダーに</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enum.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成し</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="xml hljs">@using System.ComponentModel.DataAnnotations<font></font>
@model Enum<font></font>
@{ <font></font>
    Func<span class="hljs-tag">&lt;<span class="hljs-name">object,</span> <span class="hljs-attr">string</span>&gt;</span> GetDisplayName = o =&gt;<font></font>
    {<font></font>
        var result = null as string;<font></font>
        var display = o.GetType()<font></font>
                        .GetMember(o.ToString()).First()<font></font>
                        .GetCustomAttributes(false)<font></font>
                        .OfType<span class="hljs-tag">&lt;<span class="hljs-name">DisplayAttribute</span>&gt;</span>()<font></font>
                        .LastOrDefault();<font></font>
        if (display != null) result = display.GetName();<font></font>
        return result ?? o.ToString();<font></font>
    };<font></font>
    var values = Enum.GetValues(ViewData.ModelMetadata.ModelType).Cast<span class="hljs-tag">&lt;<span class="hljs-name">object</span>&gt;</span>()<font></font>
        .Select(v =&gt; new SelectListItem<font></font>
        {<font></font>
            Selected = v.Equals(Model),<font></font>
            Text = GetDisplayName(v), // v.ToString(),<font></font>
            Value = v.ToString()<font></font>
        });<font></font>
}<font></font>
@Html.DropDownList("", values)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、一般的に、すべてがうまくいきました。テンプレートは可能な限りうまく機能します。</font></font><code>[UIHint("Enum")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">こと</font><font style="vertical-align: inherit;">も</font><font style="vertical-align: inherit;">できません。</font><font style="vertical-align: inherit;">さらに、この一般的なテンプレートは</font></font><code>[Display(Name)]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、特別な関数を使用して列挙値</font><font style="vertical-align: inherit;">の属性</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">読み取り</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cはコントローラーを意味します</font></font></h2><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UsersController.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ファイル</font><font style="vertical-align: inherit;">を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controllers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリに</font><font style="vertical-align: inherit;">追加します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersController</span> :</span> Controller<font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> pageSize = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> showPages = <span class="hljs-number">15</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<font></font>
 <font></font>
    <span class="hljs-comment">//   </span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ViewResult <span class="hljs-title">Index</span><span class="hljs-params">(<span class="hljs-built_in">string</span> sortOrder, <span class="hljs-keyword">int</span> page = <span class="hljs-number">1</span>)</span>
    </span>{
        <span class="hljs-built_in">string</span> sortName = null;<font></font>
        System.Web.Helpers.SortDirection sortDir = System.Web.Helpers.SortDirection.Ascending;<font></font>
        sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir);<font></font>
        UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();<font></font>
        UsersGrid users = <span class="hljs-keyword">new</span> UsersGrid {<font></font>
            Users = rep.List(sortName, sortDir, page, pageSize, out count),<font></font>
            PagingInfo = <span class="hljs-keyword">new</span> PagingInfo<font></font>
            {<font></font>
                currentPage = page,<font></font>
                itemsPerPage = pageSize,<font></font>
                totalItems = count,<font></font>
                showPages = showPages<font></font>
            },<font></font>
            SortingInfo = <span class="hljs-keyword">new</span> SortingInfo {<font></font>
                currentOrder = sortName,<font></font>
                currentDirection = sortDir<font></font>
            }<font></font>
        };<font></font>
        <span class="hljs-keyword">return</span> View(users);<font></font>
    }<font></font>
 <font></font>
    [ReferrerHold]<font></font>
    [HttpPost]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Index</span><span class="hljs-params">(<span class="hljs-built_in">string</span> onNewUser)</span>
    </span>{
        <span class="hljs-keyword">if</span> (onNewUser != null) {<font></font>
            TempData[<span class="hljs-string">"referrer"</span>] = ControllerContext.RouteData.Values[<span class="hljs-string">"referrer"</span>];
            <span class="hljs-keyword">return</span> View(<span class="hljs-string">"New"</span>, <span class="hljs-keyword">new</span> UserModel(<span class="hljs-keyword">new</span> UserClass(), Languages()));<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> View();<font></font>
    }<font></font>
 <font></font>
    [ReferrerHold]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">New</span><span class="hljs-params">()</span>
    </span>{<font></font>
        TempData[<span class="hljs-string">"referrer"</span>] = ControllerContext.RouteData.Values[<span class="hljs-string">"referrer"</span>];
        <span class="hljs-keyword">return</span> View(<span class="hljs-string">"New"</span>, <span class="hljs-keyword">new</span> UserModel(<span class="hljs-keyword">new</span> UserClass(), Languages()));<font></font>
    }<font></font>
 <font></font>
    [HttpPost]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">New</span><span class="hljs-params">(UserModel model)</span>
    </span>{
        <span class="hljs-keyword">if</span> (ModelState.IsValid)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (model.User == null || model.User.Language == null || model.User.Language.LanguageID == <span class="hljs-number">0</span>) RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
            UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();
            <span class="hljs-keyword">if</span> (rep.AddUser(model.User)) TempData[<span class="hljs-string">"message"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has been added"</span>, model.User.Loginname);
            <span class="hljs-keyword">else</span> TempData[<span class="hljs-string">"error"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has not been added!"</span>, model.User.Loginname);
            <span class="hljs-keyword">if</span> (TempData[<span class="hljs-string">"referrer"</span>] != null) <span class="hljs-keyword">return</span> Redirect(TempData[<span class="hljs-string">"referrer"</span>].ToString());
            <span class="hljs-keyword">return</span> RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span><font></font>
        {<font></font>
            model = <span class="hljs-keyword">new</span> UserModel(model.User, Languages()); <span class="hljs-comment">// -          model.Languages,  </span>
            <span class="hljs-keyword">return</span> View(model);<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    [ReferrerHold]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Edit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> UserID)</span>
    </span>{<font></font>
        UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();<font></font>
        UserClass user = rep.FetchByID(UserID);<font></font>
        <span class="hljs-keyword">if</span> (user == null) <span class="hljs-keyword">return</span> HttpNotFound();<font></font>
        TempData[<span class="hljs-string">"referrer"</span>] = ControllerContext.RouteData.Values[<span class="hljs-string">"referrer"</span>];
        <span class="hljs-keyword">return</span> View(<span class="hljs-keyword">new</span> UserModel(user, Languages()));<font></font>
    }<font></font>
 <font></font>
    [HttpPost]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Edit</span><span class="hljs-params">(UserModel model, <span class="hljs-built_in">string</span> action)</span>
    </span>{
        <span class="hljs-keyword">if</span> (action == <span class="hljs-string">"Cancel"</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (TempData[<span class="hljs-string">"referrer"</span>] != null) <span class="hljs-keyword">return</span> Redirect(TempData[<span class="hljs-string">"referrer"</span>].ToString());
            <span class="hljs-keyword">return</span> RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (ModelState.IsValid)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (model.User == null || model.User.Language == null || model.User.Language.LanguageID == <span class="hljs-number">0</span>) RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
            UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();
            <span class="hljs-keyword">if</span> (action == <span class="hljs-string">"Save"</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">if</span> (rep.ChangeUser(model.User)) TempData[<span class="hljs-string">"message"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has been saved"</span>, model.User.Loginname);
                <span class="hljs-keyword">else</span> TempData[<span class="hljs-string">"error"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has not been saved!"</span>, model.User.Loginname);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (action == <span class="hljs-string">"Remove"</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">if</span> (rep.RemoveUser(model.User)) TempData[<span class="hljs-string">"message"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has been removed"</span>, model.User.Loginname);
                <span class="hljs-keyword">else</span> TempData[<span class="hljs-string">"error"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has not been removed!"</span>, model.User.Loginname);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (TempData[<span class="hljs-string">"referrer"</span>] != null) <span class="hljs-keyword">return</span> Redirect(TempData[<span class="hljs-string">"referrer"</span>].ToString());
            <span class="hljs-keyword">return</span> RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span><font></font>
        {<font></font>
            model = <span class="hljs-keyword">new</span> UserModel(model.User, Languages()); 
            <span class="hljs-keyword">return</span> View(model);<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;LanguageClass&gt; <span class="hljs-title">Languages</span><span class="hljs-params">()</span>
    </span>{<font></font>
        IList&lt;LanguageClass&gt; languages = <span class="hljs-keyword">new</span> List&lt;LanguageClass&gt;();<font></font>
        LanguagesRepository rep = <span class="hljs-keyword">new</span> LanguagesRepository();<font></font>
        languages = rep.List();<font></font>
        <span class="hljs-keyword">return</span> languages;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラーのメソッドを分析してみましょう：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1）メソッド</font></font><code>Index</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーのリストを含むページの表示：</font></font><code>public ViewResult Index(string sortOrder, int page = 1)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの入力パラメーター</font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とがあり</font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。では</font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、すべて多かれ少なかれ明確な、しかしを通じて</font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アドレスバーから、あなたたちはその後、SQLクエリで塾に持っており、それを直接行うことはできません任意の文字列を渡すことができます。したがって、関数の助けを借りてこの行を解析します（ここでは関数自体は示しません</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Base.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルで</font><i><font style="vertical-align: inherit;">確認</font></i><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">）。</font></font><code>sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir);</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、すべてが簡単です。リポジトリオブジェクトを作成し</font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（次の章で説明するDBMSを操作するため）、メソッド</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">呼び出して</font><font style="vertical-align: inherit;">ユーザーのリストを取得します。クラスオブジェクトを形成する</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーの実際のリストと、情報のページ分割の編成とソートに必要な情報から。また、メソッドが呼び出されると</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クラスオブジェクトの作成と同時に</font><font style="vertical-align: inherit;">totalItem値が取得さ</font><font style="vertical-align: inherit;">れます</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。さらに、このオブジェクトは、表示のために転送されて表現されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のインデックスの方法は属性でもあり</font></font><code>[HttpPost]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々はボタンのクリックをうまくするために必要なことを</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考慮して</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>public ActionResult Index(string onNewUser)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力パラメータがあり</font></font><code>onNewUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素と共通のものを</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考慮して</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々は、このボタンをクリックすると、それは我々が反対チェックしていることを関数に値を渡し</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヌル</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。タイプボタン</font></font><code>submit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がビューにある場合</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いくつか、値自体をチェックする必要があります（この場合、値は「新規ユーザー」になります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックした後</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、新しいオブジェクト</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と言語のリストで</font><font style="vertical-align: inherit;">構成される</font><font style="vertical-align: inherit;">クラスオブジェクトを形成</font><font style="vertical-align: inherit;">し、ドロップダウンリストから選択してプレゼンテーションに渡し</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。言語のリストは</font><font style="vertical-align: inherit;">、次のように</font></font><code>LanguageRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">呼び出すこと</font><font style="vertical-align: inherit;">によってリポジトリから取得さ</font><font style="vertical-align: inherit;">れます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;LanguageClass&gt; <span class="hljs-title">Languages</span><span class="hljs-params">()</span>
</span>{<font></font>
    LanguagesRepository rep = <span class="hljs-keyword">new</span> LanguagesRepository();
    <span class="hljs-keyword">return</span> rep.List();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）メソッド</font></font><code>New</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aメソッド</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータなしでは、上のクリック動作するように作られて</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいユーザー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク</font><font style="vertical-align: inherit;">コメントアウト行の</font></font><code>Html.ActionLink("New user", "New", "Users")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビューで</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。アクション（ビューを開く</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は、前</font><font style="vertical-align: inherit;">のアクション</font><font style="vertical-align: inherit;">と同様に実行されます。リンクをクリックするための処理が行われているため、押されたボタンのチェックはありません。</font><font style="vertical-align: inherit;">データベースに新しいユーザーを保存するためにフォームデータを送信するイベントを処理する</font><font style="vertical-align: inherit;">タイプのモデルパラメータを</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持つメソッド</font><font style="vertical-align: inherit;">：入力</font><font style="vertical-align: inherit;">
されたクラスオブジェクトをNewビューから取得し</font><font style="vertical-align: inherit;">、データの正確性を確認し（</font><font style="vertical-align: inherit;">およびで</font><font style="vertical-align: inherit;">説明されている要件に従って</font><font style="vertical-align: inherit;">）、リポジトリオブジェクト</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成し</font><font style="vertical-align: inherit;">、新しい行をデータベースに追加しようとします、関数を呼び出す</font></font><code>New</code><font style="vertical-align: inherit;"></font><code>UserModel</code><font style="vertical-align: inherit;"></font><code>public ActionResult New(UserModel model)</code><br>
<br><font style="vertical-align: inherit;"></font><code>UserModel</code><font style="vertical-align: inherit;"></font><code>UserClass</code><font style="vertical-align: inherit;"></font><code>LanguageClass</code><font style="vertical-align: inherit;"></font><code>UsersRepository</code><font style="vertical-align: inherit;"></font><code>AddUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。次に、前のページ（からビューが呼び出されたページ）に戻り</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、操作の成功または失敗を示すメッセージが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3）方法</font></font><code>Edit</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aメソッド</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の入力パラメータを持つ</font></font><code>UserID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ユーザID）は、ユーザデータの編集ビューを開くために、リスト内のユーザー名をクリックする：</font></font><code>public ActionResult Edit(int UserID)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
方法では、リポジトリが再び作成さ</font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と機能は、それから呼び出された</font></font><code>FetchByID(UserID)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプのオブジェクトを取得します</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。成功した場合、モデルが作成されます- </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受信したオブジェクトからの</font><font style="vertical-align: inherit;">クラスオブジェクト</font><font style="vertical-align: inherit;">と言語のリストであり、表示の</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ために</font><font style="vertical-align: inherit;">ビュー</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">渡さ</font><font style="vertical-align: inherit;">れます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイプ</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と行</font><font style="vertical-align: inherit;">モデルの入力パラメーターを持つメソッド</font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>public ActionResult Edit(UserModel model, string action)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイプオブジェクトがこのメソッドに渡され</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ビューのボタンがクリックされたときのアクション（フォームデータを送信するためのイベントの処理）が処理されます</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。どのボタンが押されたかを理解するために</font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、HTMLタイプタグの名前に示されて</font><font style="vertical-align: inherit;">いる入力パラメーターが使用され</font><font style="vertical-align: inherit;">ます</font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。したがって、メソッドはこのパラメーターの値を</font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのボタンの</font><font style="vertical-align: inherit;">パラメーター値と比較し</font><font style="vertical-align: inherit;">ます。モデルの有効性をチェックする前に、</font></font><code>Cancel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーの編集をキャンセルするアクションを実行するために</font><font style="vertical-align: inherit;">値がチェックさ</font><font style="vertical-align: inherit;">れます。このオプションは、ブラウザーの履歴に戻る代わりに使用されます。ブラウザーの履歴は、ビュー</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で使用</font><font style="vertical-align: inherit;">され、ビューの</font><font style="vertical-align: inherit;">リダイレクト元のページのアドレスの保管を使用します</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これを行うために、コントローラーはその属性を使用するテクノロジーを示します</font></font><code>ActionFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：クラス</font></font><code>ReferrerHoldAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReferrerHoldAttribute.csの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HtmlAttributeの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリ</font><font style="vertical-align: inherit;">）：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReferrerHoldAttribute</span> :</span> ActionFilterAttribute<font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnActionExecuting</span><span class="hljs-params">(ActionExecutingContext filterContext)</span>
    </span>{<font></font>
        var referrer = filterContext.RequestContext.HttpContext.Request.UrlReferrer;<font></font>
        <span class="hljs-keyword">if</span> (referrer != null) filterContext.RouteData.Values.Add(<span class="hljs-string">"referrer"</span>, referrer);<font></font>
        base.OnActionExecuting(filterContext);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいユーザー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">ボタン</font><font style="vertical-align: inherit;">またはユーザーを変更するためのリンクを</font><font style="vertical-align: inherit;">クリックした後に戻る必要があるページに関する情報を格納するために使用され</font></font><code>TempData["referrer"] = ControllerContext.RouteData.Values["referrer"];</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。異なる方法で毎回同じコードを記述しないようにするために必要です。コントローラーに別の関数を記述することも可能ですが、複数のコントローラーを使用する場合は、特別な属性タイプを使用する方が現実的です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
続いて、ビュー</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">との</font><font style="vertical-align: inherit;">アクションを処理するメソッドの本体で、</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存された情報が取得され、これらのビューが呼び出されたページにリダイレクトするために使用されます。</font></font><code>if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString());</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーを保存するか削除するかを決定するために、パラメーターは</font><i><font style="vertical-align: inherit;">Save</font></i><font style="vertical-align: inherit;">および</font><i><font style="vertical-align: inherit;">Removeの</font></i></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">比較され</font><font style="vertical-align: inherit;">ます。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それぞれ、リポジトリ</font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能</font></font><code>ChangeUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">によって引き起こされます</font></font><code>RemoveUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、前のページ（プレゼンテーションの呼び出し元</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">戻り</font><font style="vertical-align: inherit;">、操作の成功または失敗に関するメッセージが表示されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADO.NETとMySQL-リポジトリ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでようやくDBMSを操作できるようになりました。</font><font style="vertical-align: inherit;">ユーザーをテーブルに追加する機能、</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーデータを変更する機能、テーブルからユーザーを削除する機能、IDでユーザーを取得する機能、ユーザーのリストを取得する機能、テーブルから言語のリストを取得する</font><font style="vertical-align: inherit;">機能を実装する必要があり</font><font style="vertical-align: inherit;">ます</font></font><code>Languages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの場合、標準的な構築物が使用され</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL.Dataの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラス</font><font style="vertical-align: inherit;">使用します</font></font><code>MySqlCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection( ))<font></font>
{<font></font>
    <span class="hljs-built_in">string</span> sql = <span class="hljs-string">" "</span>;
    <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
    {<font></font>
        cmd.Parameters.Add(<span class="hljs-string">" "</span>,  ).Value =  ;<font></font>
        connect.Open();<font></font>
        result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>; <span class="hljs-comment">//        (INSERT, UPDATE, DELETE)   cmd.ExecuteScalar()         SELECT</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または</font></font><code>MySqlDataReader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クエリの結果としてテーブルの行を読み取るには：</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection( ))<font></font>
{<font></font>
    <span class="hljs-built_in">string</span> sql = <span class="hljs-string">" "</span>;
    <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
    {<font></font>
        cmd.Parameters.Add(<span class="hljs-string">" "</span>,  ).Value =  ;<font></font>
        objConnect.Open();<font></font>
        <span class="hljs-keyword">while</span> (dr.Read())<font></font>
        {<span class="hljs-comment">//      </span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">Models</font></i><font style="vertical-align: inherit;">ディレクトリに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserRepository.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ファイル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成します</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersRepository</span>
{</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">AddUser</span><span class="hljs-params">(UserClass user)</span>
    </span>{<font></font>
        user.UserID = AddUser(Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier);<font></font>
        <span class="hljs-keyword">return</span> user.UserID &gt; <span class="hljs-number">0</span>;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">AddUser</span><span class="hljs-params">(<span class="hljs-built_in">string</span> Name, <span class="hljs-keyword">int</span> LanguageID, <span class="hljs-built_in">string</span> Email, Supporter SupporterTier)</span>
    </span>{
        <span class="hljs-keyword">int</span> ID = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> sql = <span class="hljs-string">"INSERT INTO `Users` (`Loginname`, `LanguageID`, `Email`, `SupporterTier`) VALUES (@Loginname, @LanguageID, @Email, @SupporterTier)"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
            {<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"Loginname"</span>, MySqlDbType.String).Value = Name;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"LanguageID"</span>, MySqlDbType.Int32).Value = LanguageID;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"Email"</span>, MySqlDbType.String).Value = Email;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"SupporterTier"</span>, MySqlDbType.Int32).Value = SupporterTier;<font></font>
                connect.Open();<font></font>
                <span class="hljs-keyword">if</span> (cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>)<font></font>
                {<font></font>
                    sql = <span class="hljs-string">"SELECT LAST_INSERT_ID() AS ID"</span>;<font></font>
                    cmd.CommandText = sql;<font></font>
                    <span class="hljs-keyword">int</span>.TryParse(cmd.ExecuteScalar().ToString(), out ID);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> ID;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">ChangeUser</span><span class="hljs-params">(UserClass user)</span>
    </span>{
        <span class="hljs-keyword">return</span> ChangeUser(ID: user.UserID, Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier);<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">ChangeUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ID, <span class="hljs-built_in">string</span> Name, <span class="hljs-keyword">int</span> LanguageID, <span class="hljs-built_in">string</span> Email, Supporter SupporterTier)</span>
    </span>{
        <span class="hljs-keyword">bool</span> result = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (ID &gt; <span class="hljs-number">0</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
            {<font></font>
                <span class="hljs-built_in">string</span> sql = <span class="hljs-string">"UPDATE `Users` SET `Loginname`=@Loginname, `LanguageID`=@LanguageID, `Email`=@Email, `SupporterTier`=@SupporterTier WHERE UserID=@UserID"</span>;
                <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
                {<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"UserID"</span>, MySqlDbType.Int32).Value = ID;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"Loginname"</span>, MySqlDbType.String).Value = Name;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"LanguageID"</span>, MySqlDbType.Int32).Value = LanguageID;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"Email"</span>, MySqlDbType.String).Value = Email;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"SupporterTier"</span>, MySqlDbType.Int32).Value = SupporterTier;<font></font>
                    connect.Open();<font></font>
                    result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>;<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> result;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">RemoveUser</span><span class="hljs-params">(UserClass user)</span>
    </span>{
        <span class="hljs-keyword">return</span> RemoveUser(user.UserID);<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">RemoveUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ID)</span>
    </span>{
        <span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> sql = <span class="hljs-string">"DELETE FROM `Users` WHERE `UserID`=@UserID"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
            {<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"UserID"</span>, MySqlDbType.Int32).Value = ID;<font></font>
                connect.Open();<font></font>
                <span class="hljs-keyword">return</span> cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> UserClass <span class="hljs-title">FetchByID</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ID)</span>
    </span>{<font></font>
        UserClass user = null;<font></font>
        <span class="hljs-keyword">using</span> (MySqlConnection objConnect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> strSQL = <span class="hljs-string">"SELECT u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID WHERE `UserID`=@UserID"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(strSQL, objConnect))<font></font>
            {<font></font>
                objConnect.Open();<font></font>
                <span class="hljs-keyword">int</span> UserID = <span class="hljs-number">0</span>, LanguageID = <span class="hljs-number">0</span>;
                <span class="hljs-built_in">string</span> Loginname = null, LanguageName= null, Email = String.Empty;<font></font>
                Supporter SupporterTier = Supporter.None;<font></font>
                DateTime? LastLoginDate = null;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"UserID"</span>, MySqlDbType.Int32).Value = ID;
                <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
                {<font></font>
                    <span class="hljs-keyword">if</span> (dr.Read())<font></font>
                    {<font></font>
                        UserID = dr.GetInt32(<span class="hljs-string">"UserID"</span>);<font></font>
                        Loginname = dr.GetString(<span class="hljs-string">"Loginname"</span>).ToString();<font></font>
                        LanguageID = dr.GetInt32(<span class="hljs-string">"LanguageID"</span>);<font></font>
                        LanguageName = dr.GetString(<span class="hljs-string">"LanguageName"</span>).ToString();
                        <span class="hljs-keyword">if</span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"Email"</span>))) Email = dr.GetString(<span class="hljs-string">"Email"</span>).ToString();
                        <span class="hljs-keyword">if</span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"LastLoginDate"</span>))) LastLoginDate = dr.GetDateTime(<span class="hljs-string">"LastLoginDate"</span>);
                        <span class="hljs-keyword">if</span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"SupporterTier"</span>))) SupporterTier = (Supporter)dr.GetInt32(<span class="hljs-string">"SupporterTier"</span>);<font></font>
                    }<font></font>
                    LanguageClass language = null;<font></font>
                    <span class="hljs-keyword">if</span> (LanguageID &gt; <span class="hljs-number">0</span>) language = <span class="hljs-keyword">new</span> LanguageClass(LanguageID: LanguageID, LanguageName: LanguageName);
                    <span class="hljs-keyword">if</span> (UserID &gt; <span class="hljs-number">0</span> &amp;&amp; language != null &amp;&amp; language.LanguageID &gt; <span class="hljs-number">0</span>) user = <span class="hljs-keyword">new</span> UserClass(UserID: UserID, Loginname: Loginname, Language: language, Email: Email, LastLoginDate: LastLoginDate, SupporterTier: (Supporter)SupporterTier);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> user;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-comment">//       ASP.NET WebForms,             ObjectDataSource     </span>
    <span class="hljs-comment">//     ,         " "        </span>
    <span class="hljs-comment">//public IEnumerable&lt;DataRow&gt; List()</span>
    <span class="hljs-comment">//{</span>
    <span class="hljs-comment">//    using (MySqlConnection objConnect = new MySqlConnection(Base.strConnect))</span>
    <span class="hljs-comment">//    {</span>
    <span class="hljs-comment">//        string strSQL = "select * from users";</span>
    <span class="hljs-comment">//        using (MySqlCommand objCommand = new MySqlCommand(strSQL, objConnect))</span>
    <span class="hljs-comment">//        {</span>
    <span class="hljs-comment">//            objConnect.Open();</span>
    <span class="hljs-comment">//            using (MySqlDataAdapter da = new MySqlDataAdapter(objCommand))</span>
    <span class="hljs-comment">//            {</span>
    <span class="hljs-comment">//                DataTable dt = new DataTable();</span>
    <span class="hljs-comment">//                da.Fill(dt);</span>
    <span class="hljs-comment">//                return dt.AsEnumerable();</span>
    <span class="hljs-comment">//            }</span>
    <span class="hljs-comment">//        }</span>
    <span class="hljs-comment">//    }</span>
    <span class="hljs-comment">//}</span><font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;UserClass&gt; <span class="hljs-title">List</span><span class="hljs-params">(<span class="hljs-built_in">string</span> sortOrder, System.Web.Helpers.SortDirection sortDir, <span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> pagesize, out <span class="hljs-keyword">int</span> count)</span>
    </span>{<font></font>
        List&lt;UserClass&gt; users = <span class="hljs-keyword">new</span> List&lt;UserClass&gt;();
        <span class="hljs-keyword">using</span> (MySqlConnection objConnect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-comment">//    </span>
            <span class="hljs-built_in">string</span> sort = <span class="hljs-string">" ORDER BY "</span>;
            <span class="hljs-comment">//   ,               (inject)</span>
            <span class="hljs-comment">// ,  , MySQL       </span>
            <span class="hljs-comment">//    ,         (       )</span>
            <span class="hljs-comment">//        ,   </span>
            <span class="hljs-keyword">if</span> (sortOrder != null &amp;&amp; sortOrder != String.Empty)<font></font>
            {<font></font>
                sort += <span class="hljs-string">"`"</span> + sortOrder + <span class="hljs-string">"`"</span>;
                <span class="hljs-keyword">if</span> (sortDir == System.Web.Helpers.SortDirection.Descending) sort += <span class="hljs-string">" DESC"</span>;<font></font>
                sort += <span class="hljs-string">","</span>;<font></font>
            }<font></font>
            sort += <span class="hljs-string">"`UserID`"</span>; <span class="hljs-comment">//  </span>
            <span class="hljs-comment">//        ( )</span>
            <span class="hljs-built_in">string</span> limit = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">if</span> (pagesize &gt; <span class="hljs-number">0</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">int</span> start = (page - <span class="hljs-number">1</span>) * pagesize;<font></font>
                limit = <span class="hljs-built_in">string</span>.Concat(<span class="hljs-string">" LIMIT "</span>, start.ToString(), <span class="hljs-string">", "</span>, pagesize.ToString());<font></font>
            }<font></font>
            <span class="hljs-built_in">string</span> strSQL = <span class="hljs-string">"SELECT SQL_CALC_FOUND_ROWS u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName` as `Language`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID"</span> + sort + limit;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(strSQL, objConnect))<font></font>
            {<font></font>
                objConnect.Open();<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"page"</span>, MySqlDbType.Int32).Value = page;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"pagesize"</span>, MySqlDbType.Int32).Value = pagesize;
                <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
                {<font></font>
                    <span class="hljs-keyword">while</span> (dr.Read())<font></font>
                    {<font></font>
                        LanguageClass language = <span class="hljs-keyword">new</span> LanguageClass(LanguageID: dr.GetInt32(<span class="hljs-string">"LanguageID"</span>), LanguageName: dr.GetString(<span class="hljs-string">"Language"</span>).ToString());<font></font>
 <font></font>
                        users.Add(<span class="hljs-keyword">new</span> UserClass(<font></font>
                            UserID: dr.GetInt32(<span class="hljs-string">"UserID"</span>), <font></font>
                            Loginname: dr.GetString(<span class="hljs-string">"Loginname"</span>), <font></font>
                            Language: language,<font></font>
                            Email: dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"Email"</span>)) ? String.Empty : dr.GetString(<span class="hljs-string">"Email"</span>), <font></font>
                            LastLoginDate: dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"LastLoginDate"</span>)) ? (DateTime?) null : dr.GetDateTime(<span class="hljs-string">"LastLoginDate"</span>), <font></font>
                            SupporterTier: dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"SupporterTier"</span>)) ? (Supporter) Supporter.None : (Supporter)dr.GetInt32(<span class="hljs-string">"SupporterTier"</span>)));<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
            <span class="hljs-keyword">using</span> (MySqlCommand cmdrows = <span class="hljs-keyword">new</span> MySqlCommand(<span class="hljs-string">"SELECT FOUND_ROWS()"</span>, objConnect))<font></font>
            {<font></font>
                <span class="hljs-keyword">int</span>.TryParse(cmdrows.ExecuteScalar().ToString(), out count);<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> users;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これには、</font></font><code>AddUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーの追加、ユーザーデータの更新（</font></font><code>ChangeUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、削除（</font></font><code>RemoveUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、</font></font><code>FetchByID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">識別子による</font><font style="vertical-align: inherit;">ユーザー（</font><font style="vertical-align: inherit;">）の</font><font style="vertical-align: inherit;">検索、</font><font style="vertical-align: inherit;">および</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページングされたユーザーのリストを並べ替えて表示するため</font><font style="vertical-align: inherit;">の最も興味深いメソッドが含ま</font><font style="vertical-align: inherit;">れます。</font><font style="vertical-align: inherit;">関数についてさらにコメントしたい</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><code>DataTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このように</font><font style="vertical-align: inherit;">テーブル（</font><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">返す価値はありません。</font><font style="vertical-align: inherit;">この場合、ビュー内のクラスの要素にアクセスできなくなり、文字列定数を使用してテーブル行の値を参照するように強制されます。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">これは、SQLクエリを変更するときにエラーが発生する可能性がある場所です。</font><font style="vertical-align: inherit;">したがって、クラス要素のリストが作成され</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
<li>         <code>LIMIT</code>  SQL- <code>SELECT</code>.  ,  MySQL      ,   <code>LIMIT</code>       .   ,     ,       <code>ORDER BY</code>           . ,         SQL-,     SQL   ,       ,     .       ,      ,          :         .</li>
<li>          SQL  <code>SELECT FOUND_ROWS()</code>,          ,     <code>SELECT SQL_CALC_FOUND_ROWS</code>     <code>LIMIT</code>.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のすべてのメソッドは、上記のキヤノンと一致して、完全に普通です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、</font><i><font style="vertical-align: inherit;">Models</font></i><font style="vertical-align: inherit;">ディレクトリの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LanguageRepository.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">：</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LanguagesRepository</span>
{</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;LanguageClass&gt; <span class="hljs-title">List</span><span class="hljs-params">()</span>
    </span>{<font></font>
        List&lt;LanguageClass&gt; languages = <span class="hljs-keyword">new</span> List&lt;LanguageClass&gt;();
        <span class="hljs-keyword">using</span> (MySqlConnection objConnect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> strSQL = <span class="hljs-string">"SELECT `LanguageID`, `LanguageName` as `Language` FROM `Languages` ORDER BY `LanguageName`"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(strSQL, objConnect))<font></font>
            {<font></font>
                objConnect.Open();<font></font>
                <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
                {<font></font>
                    <span class="hljs-keyword">while</span> (dr.Read())<font></font>
                    {<font></font>
                        LanguageClass language = <span class="hljs-keyword">new</span> LanguageClass(LanguageID: dr.GetInt32(<span class="hljs-string">"LanguageID"</span>), LanguageName: dr.GetString(<span class="hljs-string">"Language"</span>).ToString());<font></font>
                        languages.Add(language);<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> languages;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースから言語のリストを取得し、クラス要素のリストを作成する関数は1つだけ</font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それだけです-タスクは解決されました。</font><font style="vertical-align: inherit;">多くの問題が対処されなかったことは明らかです：依存性注入コンテナー、ユニットテスト、モーキング用ツール、ローカリゼーションなど。</font><font style="vertical-align: inherit;">等 </font><font style="vertical-align: inherit;">いくつかのことは、異なる方法で、または単により良い方法で行うことができます。</font><font style="vertical-align: inherit;">しかし、判明した「レンガ」は、ASP.NET MVCがどのように機能するかを理解し、MS SQLではないADO.NETとDBMSで作業することはそれほど怖くないことで十分に判明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PSそして最後に：このプロジェクトが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このアドレス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でどのように機能するかを確認でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト全体をダウンロードできます。</font><font style="vertical-align: inherit;">さて、ヒープへ- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私のブログ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">へのリンク</font><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja482332/index.html">マニアがDOSでWi-Fiネットワークを立ち上げた方法</a></li>
<li><a href="../ja482336/index.html">トレーダーは、公開前にイングランド中央銀行の記者会見へのアクセスを得ました</a></li>
<li><a href="../ja482338/index.html">Visual Studio for Mac：IDEをキーで制御する</a></li>
<li><a href="../ja482340/index.html">ジュニアからミドル：パーサー</a></li>
<li><a href="../ja482344/index.html">ロシアでの社会的格付けの導入に備えましょう</a></li>
<li><a href="../ja482348/index.html">疑いを持たないゲーム開発者のためのトポロジーと包括的な分析：単一の3Dベクトルの圧縮</a></li>
<li><a href="../ja482352/index.html">私が風に150kをほとんど投げたとき、またはアパートに強制換気を設置した歴史</a></li>
<li><a href="../ja482354/index.html">ConfigureAwait：よくある質問</a></li>
<li><a href="../ja482356/index.html">通常のWindowsユーザーの観点から、エクスプローラーなしでWindows Serverを使用する</a></li>
<li><a href="../ja482358/index.html">Rustでのパニックの仕組み</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>