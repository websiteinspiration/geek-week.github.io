<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤²ğŸ¾ ğŸ•‰ï¸ ğŸ›ŒğŸ½ ASP.NET MVC-ADO.NETã‚’ä»‹ã—ã¦MySQLã‚’æ“ä½œã™ã‚‹ ğŸ¤¶ğŸ¾ ğŸ¦– ğŸ¤µğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼: ASP.NET MVC ADO.NET . ASP.NET Core ORM. , .
 
 ãŠãã‚‰ãã€ãŠãã‚‰ã3å›ASP.NET MVCã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚ ASP.NET WebFormsã‚’10å¹´é–“ä½¿ç”¨ã—ãŸå¾Œã¯ã€MVCãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã®ãŒå°‘ã—é›£ã—ããªã‚Šã¾ã™ã€‚å¤šãã®é•...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ASP.NET MVC-ADO.NETã‚’ä»‹ã—ã¦MySQLã‚’æ“ä½œã™ã‚‹</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482346/"><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼</font></font></b><div class="spoiler_text"><b>:  ASP.NET MVC   ADO.NET .   ASP.NET Core   ORM.    ,  .</b><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŠãã‚‰ãã€ãŠãã‚‰ã3å›ASP.NET MVCã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚ ASP.NET WebFormsã‚’10å¹´é–“ä½¿ç”¨ã—ãŸå¾Œã¯ã€MVCãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã®ãŒå°‘ã—é›£ã—ããªã‚Šã¾ã™ã€‚å¤šãã®é•ã„ãŒã‚ã‚‹ãŸã‚ã€.NET Frameworkãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é™¤ã„ã¦ã€ã“ã‚Œã‚‰ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã«å…±é€šã™ã‚‹ã‚‚ã®ã‚’ãƒªã‚¹ãƒˆã™ã‚‹æ–¹ãŒç°¡å˜ã§ã™ã€‚ã“ã“ã§ã¯æ›¸ãã¾ã›ã‚“ã€‚MVCã¯WebFormsã‚ˆã‚Šã‚‚å„ªã‚Œã¦ã„ã¾ã™ãŒã€ã©ã¡ã‚‰ã‚‚å„ªã‚Œã¦ã„ã‚‹ãŸã‚ã€ä¸¡æ–¹ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã§å„ªã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ã¾ãŸã€TDDã®å¿…è¦æ€§ã«ã¤ã„ã¦ã¯ã€ç§ã¯æŒã£ã¦ã„ã¾ã™ãŒã€ç§ã‚‚ä¸€ç·’ã«è€ƒãˆã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€æœ€ã‚‚æ¨™æº–çš„ãªã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚é€šå¸¸ã®ãƒ‡ãƒ¼ã‚¿æ“ä½œï¼šãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆã®è¡¨å½¢å¼ã§ã®è¡¨ç¤ºã€ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ã€å¤‰æ›´ã€å‰Šé™¤ï¼ˆCRUDæ“ä½œï¼‰ã§ã™ã€‚ãŸã ã—ã€ASP.NET MVCã®ã»ã¨ã‚“ã©ã™ã¹ã¦ã®æ›¸ç±ãŠã‚ˆã³å¤šãã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ä½•ã‚‰ã‹ã®ç†ç”±ã§ã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ORMï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–¢ä¿‚ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰ã‚’é€šã˜ã¦ã®ã¿æ¤œè¨ã•ã‚Œã¾ã™ã€‚ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆEFï¼‰ã¾ãŸã¯LINQ for SQLã®ã„ãšã‚Œã‹ã§ã™ã€‚æœ€çµ‚çš„ã«ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¯ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ãŒå„ªã‚Œã¦ã„ã‚‹ã“ã¨ã¯é–“é•ã„ã‚ã‚Šã¾ã›ã‚“ãŒã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¯ç†è§£ã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã®éå¸¸ã«ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãªDBMSï¼ˆå½¼ãŒä½¿ç”¨ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ï¼‰ã¯é€šå¸¸ã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã—ã€SQLã§ã•ãˆç†è«–ä¸Šã¯ä¸è¦ã§ã™ï¼šEFã®å½¢ã§é…ç½®ã—ã¦DBMSã®ã‚³ãƒã‚¯ã‚¿ã¯ãŠäº’ã„ã‚’ç†è§£ã—ã¾ã™ã€‚ ã€Œã“ã“ãŒå¹¸ç¦ã§ã™-ãã‚Œã¯ã‚ˆã‚Šç¾ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚ã€ã—ã‹ã—ã€ADO.NETãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’ä»‹ã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ç›´æ¥æ“ä½œã™ã‚‹ã“ã¨ã‚’æã‚Œãªã„ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã«ã¨ã£ã¦ã¯ã€å¤šãã®å ´åˆã€æ˜ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚NET MVCãŠã‚ˆã³ãã‚ŒãŒå¿…è¦ã‹ã©ã†ã‹ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ãŸã¨ãˆã°ã€ç§ã«ã¨ã£ã¦ã¯ã€æœ€åˆã¯ã€ã‚°ãƒªãƒƒãƒ‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ¬ å¦‚ã‚’æ··ä¹±ã•ã›ã¦ã„ã¾ã—ãŸã€‚é–‹ç™ºè€…è‡ªèº«ãŒã“ã‚Œã‚‰ã™ã¹ã¦ã‚’å®Ÿè£…ã™ã‚‹ã‹ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‹ã‚‰é©åˆ‡ãªã‚‚ã®ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ç§ã¨åŒã˜ã‚ˆã†ã«ã€ASP.NET Webãƒ•ã‚©ãƒ¼ãƒ ã®GridViewã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æº€è¶³ã—ã¦ã„ã‚‹å ´åˆã€MVCã®å ´åˆã€Grid.mvcã‚’é™¤ã„ã¦ã€æ¯”è¼ƒã§ãã‚‹ã‚‚ã®ã‚’è¦‹ã¤ã‘ã‚‹ã®ã¯å›°é›£ã§ã™ã€‚ã—ã‹ã—ã€ãã®ã‚ˆã†ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã™ã‚‹ç§ã®ä¿¡é ¼ã¯ã€ååˆ†ã«å¤§ããªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãã‚Œã‚‰ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ååˆ†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚Œã‚‰ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¯ã€æœ€åˆã«ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¨˜è¿°æ–¹æ³•ã‚’çŸ¥ã‚‰ãªã„åˆ¥ã®é–‹ç™ºè€…ã«ä¾å­˜ã—å§‹ã‚ã¾ã™ï¼ˆå®šæ€§çš„ã§ã™ã‹ï¼Ÿï¼‰ã€æ¬¡ã«ã€ã„ã¤ã€ã©ã®ã‚ˆã†ã«ã—ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå®Œæˆã™ã‚‹ã‹ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ‹¡å¼µã—ã¦ã•ã‚‰ã«è¦‹ã‚‰ã‚Œã‚‹ã“ã¨ã•ãˆã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€é–‹ç™ºè€…ã«ã‚ˆã‚‹é–‹ç™ºã®å ´åˆã€ã‚³ãƒ¼ãƒ‰ã‚’å†åº¦ã‚·ãƒ£ãƒ™ãƒ«ã§å‹•ã‹ã™ã‹ã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ›´æ–°ã‚’å‡çµã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€é–‹ç™ºè€…ãŒè„†å¼±æ€§ã‚’ä¿®æ­£ã—ãŸå ´åˆã§ã‚‚ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ MySQLã‚³ãƒã‚¯ã‚¿ã®æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã®ç§»è¡Œã§ã•ãˆã€å¤§ä¼æ¥­ã«ã‚ˆã£ã¦ã¾ã é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ãŒã€ç‰¹å®šã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ãŒã€Nugetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã®å¤šæ•°ã®ã€Œãƒã‚¤ã‚¯ã€ã¯ã©ã†ã§ã™ã‹ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã§ã¯ã€MySQL DBMSã§å‡¦ç†ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ“ä½œã—ãªãŒã‚‰ã€ASP.NET MVCã§æ›¸ãè¾¼ã‚€æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ã‚¢ãƒ‰ãƒ¬ã‚¹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">å–å¾—ã§ã</font><font style="vertical-align: inherit;">ã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã®ä¸‹ã«ã¯ã€å°ã•ãªãƒªãƒ³ã‚¯ã¨èª¬æ˜ãŒéƒ¨åˆ†çš„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã§</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚ãªãŸã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQLã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹</font></font></h2><br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SCHEMA</span> <span class="hljs-string">`example`</span>;
<span class="hljs-keyword">USE</span> <span class="hljs-string">`example`</span>;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`users`</span> (
  <span class="hljs-string">`UserID`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,
  <span class="hljs-string">`SupporterTier`</span> enum(<span class="hljs-string">'None'</span>,<span class="hljs-string">'Silver'</span>,<span class="hljs-string">'Gold'</span>,<span class="hljs-string">'Platinum'</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'None'</span>,
  <span class="hljs-string">`Loginname`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`LanguageID`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'2'</span>,
  <span class="hljs-string">`Email`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-string">`LastLoginDate`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,<font></font>
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`UserID`</span>),
  <span class="hljs-keyword">KEY</span> <span class="hljs-string">`i_Loginname`</span> (<span class="hljs-string">`Loginname`</span>),
  <span class="hljs-keyword">KEY</span> <span class="hljs-string">`i_Language_idx`</span> (<span class="hljs-string">`LanguageID`</span>),
  <span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-string">`i_Language`</span> <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`LanguageID`</span>) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-string">`languages`</span> (<span class="hljs-string">`LanguageID`</span>)<font></font>
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> AUTO_INCREMENT=<span class="hljs-number">1</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`languages`</span> (
  <span class="hljs-string">`LanguageID`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT,
  <span class="hljs-string">`LanguageName`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,
  <span class="hljs-string">`Culture`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span>,<font></font>
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`LanguageID`</span>)<font></font>
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> AUTO_INCREMENT=<span class="hljs-number">1</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆDBï¼‰ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã€2ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ã§è¡¨ã•ã‚Œã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å…¨ä½“ã§1å¯¾å¤šã®é–¢ä¿‚ãŒ1ã¤ã‚ã‚Šã¾ã™</font></font><code>LanguageID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨€èªã®1ã¤ã‚’é¸æŠã™ã‚‹ãŸã‚ã«ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒªã‚¹ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹çŠ¶æ³ã‚’è¤‡é›‘ã«ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€è¤‡é›‘åŒ–ã®ãŸã‚ã«</font></font><code>SupporterTier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€åˆ—æŒ™å‹ã‚’é€šã˜ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆã®ãƒ¬ãƒ™ãƒ«ã‚’æ±ºå®šã™ã‚‹</font><font style="vertical-align: inherit;">åˆ¥ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´¹ä»‹ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã»ã¼ã™ã¹ã¦ã®ã‚¿ã‚¤ãƒ—ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«</font></font><code>LastLoginDate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã€Œæ—¥ä»˜/æ™‚åˆ»ã€ã‚¿ã‚¤ãƒ—ã®</font><font style="vertical-align: inherit;">åˆ¥ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">è¿½åŠ ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚ã“ã®</font><font style="vertical-align: inherit;">ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</font><font style="vertical-align: inherit;">ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã¨ãã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã«ã‚ˆã£ã¦å…¥åŠ›ã•ã‚Œã¾ã™ï¼ˆã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯åæ˜ ã•ã‚Œã¾ã›ã‚“ï¼‰ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹</font></font></h2><br>
<img src="https://habrastorage.org/webt/sm/4a/07/sm4a07w8etetdgvtnkhd5i-wjcu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€ŒMVCã€ã‚’é¸æŠã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã€ŒEmptyã€ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ãŒã€å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãªããƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒã‚ã‚‹ãŸã‚ã€ä¸å¿…è¦ãªã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ãªã—ã§ã™ãã«ã€Bootstrapã¨JQueryã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±åˆã§ãã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lg/yv/rn/lgyvrneaxmudgq9mx1ijk36jjqs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ã€…ã¯ã™ã§ã«ã„ã£ã±ã„ã«</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚©ãƒ³ãƒˆ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚©ãƒ«ãƒ€</font><font style="vertical-align: inherit;">ã ã‘ã§ãªãã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BundleConfig.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FilterConfig.csãƒ•ã‚¡ã‚¤ãƒ«ã‚’</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App_Startã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª</font><font style="vertical-align: inherit;">ASP.NET MVCãƒãƒ³ãƒ‰ãƒ«ã¨ãƒ•ã‚£ãƒ«ã‚¿ã®ç™»éŒ²ã¨ã€‚</font><font style="vertical-align: inherit;">ç©ºã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ«ãƒ¼ãƒˆã®ç™»éŒ²ã®ã¿ãŒ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RouteConfig.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ã‚Šã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã§</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Global.asax.csã€</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¼‰ã•ã‚ŒãŸæ–¹æ³•ã®å‘¼ã³å‡ºã—ã‚‚è¿½åŠ ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);<font></font>
RouteConfig.RegisterRoutes(RouteTable.Routes);<font></font>
BundleConfig.RegisterBundles(BundleTable.Bundles);</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã¨ãƒãƒ³ãƒ‰ãƒ«å…¨ä½“ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySQL DBMSã§ä½œæ¥­ã™ã‚‹ã«ã¯ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySql.Data</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã—ã¾ã™</font><i><font style="vertical-align: inherit;">ã€‚mysql </font></i></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-connector-net-8.0.18ã‚³ãƒã‚¯ã‚¿ãŒ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«ã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹</font><font style="vertical-align: inherit;">å ´åˆã¯æ‰‹å‹•ã§</font><font style="vertical-align: inherit;">ã€ã¾ãŸã¯Nugetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‹ã‚‰ï¼š</font><font style="vertical-align: inherit;">MySQL DBMSã¸ã®æ¥ç¶šæ–‡å­—åˆ—ã®æ§‹æˆã‚’</font><i><font style="vertical-align: inherit;">Web.config</font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/b_/fh/mkb_fhxg6d8kx2pdnrithceoaf4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs">&lt;connectionStrings&gt;<font></font>
  &lt;add name=<span class="hljs-string">"example"</span> providerName=<span class="hljs-string">"MySql.Data.MySqlClient"</span> connectionString=<span class="hljs-string">"server=localhost;Port=3306;user id=develop;Password=develop;persistsecurityinfo=True;database=example;CharSet=utf8;SslMode=none"</span> /&gt;<font></font>
&lt;/connectionStrings&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿½åŠ ã—ãŸ</font></font><code>&lt;appSettings&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥ç¶šæ–‡å­—åˆ—ã¸ã®ãƒªãƒ³ã‚¯ã‚’</font><font style="vertical-align: inherit;">å«ã‚€</font><font style="vertical-align: inherit;">è¡Œ</font><font style="vertical-align: inherit;">ã‚’ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«</font></font><code>&lt;add key="ConnectionString" value="example" /&gt;</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿½åŠ ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ–°ã—ã„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‰ãƒ¡ã‚¤ãƒ³</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</font><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">è¿½åŠ ã—ã€</font><font style="vertical-align: inherit;">ãã“ã«æ–°ã—ã„é™çš„ã‚¯ãƒ©ã‚¹ã‚’</font></font><code>Base</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã«</font><font style="vertical-align: inherit;">ï¼‰</font><i><font style="vertical-align: inherit;">ä½œæˆã—</font></i><font style="vertical-align: inherit;">ã¾ã™</font><font style="vertical-align: inherit;">ã€‚ã“ã‚Œã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>
{</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> ConnectionString<font></font>
    {<font></font>
        get<font></font>
        { <span class="hljs-keyword">return</span> System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string">"ConnectionString"</span>]; }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">string</span> strConnect<font></font>
    {<font></font>
        get<font></font>
        { <span class="hljs-keyword">return</span> System.Configuration.ConfigurationManager.ConnectionStrings[ConnectionString].ConnectionString; }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã«å‘¼ã³å‡ºã•ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã„ãã¤ã‹ã®æ¨™æº–é–¢æ•°ã¸ã®ãƒªãƒ³ã‚¯ã‚’å«ã‚€ã€ç‰¹å®šã®åŸºæœ¬ã‚¯ãƒ©ã‚¹ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å«ã‚ã‚‹ã®ãŒå¥½ãã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ç¶šæ–‡å­—åˆ—ã®åå‰ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã§å®šç¾©ã•ã‚Œã‚‹ãŸã‚ã€å°†æ¥ã€DBMSã¸ã®æ¥ç¶šæ–‡å­—åˆ—ã‚’æ“ä½œã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–“ã‚’ã™ã°ã‚„ãåˆ‡ã‚Šæ›¿ãˆã¦ã€æ¥ç¶šè¨­å®šã‚’å¤‰æ›´ã—ã¾ã™ã€‚ã•ã‚‰ã«ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§æ¥ç¶šæ–‡å­—åˆ—åã‚’ä½¿ç”¨ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Microsoft Azureã«å…¬é–‹ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚å…¬é–‹ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è¨­å®šã—ã€ãã®ä¸­ã§ç›®çš„ã®æ¥ç¶šæ–‡å­—åˆ—ã‚’æ±ºå®šã§ãã¾ã™ã€‚ã“ã‚Œã¯ã§äº‹å‰å®šç¾©ã•ã‚Œã¦ã„</font></font><code>&lt;connectionStrings&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚æ¬¡ã«ã€å…¬é–‹ã™ã‚‹ã¨ãã«ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.configãƒ•ã‚¡ã‚¤ãƒ«ã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤‰æ›ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€çªç„¶å¿…è¦ã«ãªã£ãŸå ´åˆã«è¤‡æ•°ã®å ´æ‰€ã§ä¸Šæ›¸ãã—ãªã„ã‚ˆã†ã«ã€ãƒ†ã‚­ã‚¹ãƒˆå†…ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å€¤ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚å¥½ãã§ã™ã€‚</font><font style="vertical-align: inherit;">ä¾‹ï¼š</font><i><font style="vertical-align: inherit;">_Layout.cshtml</font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/rc/8u/qz/rc8uqzdrz9hvnd-y7swirgoh4tm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒšãƒ¼ã‚¸ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ï¼ˆé€šå¸¸ã¯</font><i><font style="vertical-align: inherit;">Views \ Shared</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«</font><font style="vertical-align: inherit;">ã‚ã‚Šã€ã•ã‚‰ã«ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã§ä½¿ç”¨ã•ã‚Œã¾ã™ï¼‰ã§ã€ã“ã‚Œã‚‰ã®å¤‰æ•°ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼ˆä¾‹ã‚’å‚ç…§</font><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>Example_Users.Properties.Resources.Title</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Type"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html; charset=utf-8"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span> /&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>@ViewBag.Title â€“ @Example_Users.Properties.Resources.Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><font></font>
   @Styles.Render("~/Content/css")<font></font>
   @Scripts.Render("~/bundles/modernizr")<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container body-content"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-header"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>@Example_Users.Properties.Resources.Title<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><font></font>
       @RenderBody()<font></font>
       <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> @DateTime.Now.Year â€“ @Example_Users.Properties.Resources.Author<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
   @Scripts.Render("~/bundles/jquery")<font></font>
   @Scripts.Render("~/bundles/bootstrap")<font></font>
   @RenderSection("scripts", required: false)<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€æ¥ç¶šã•ã‚ŒãŸãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ã®ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã¨JQueryã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ·»ä»˜ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒ“ãƒ¥ãƒ¼ã®å†…å®¹ã¯ã€é–¢æ•°å‘¼ã³å‡ºã—ã®å ´æ‰€ã«ç”Ÿæˆã•ã‚Œã¾ã™</font></font><code>RenderBody()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M-ãƒ¢ãƒ‡ãƒ«ã‚’æ„å‘³ã™ã‚‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserClass.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‰ãƒ¡ã‚¤ãƒ³</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«</font><font style="vertical-align: inherit;">è¿½åŠ ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">[DisplayName(<span class="hljs-string">"User"</span>)]
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserClass</span>
{</span><font></font>
    [Key]<font></font>
    [HiddenInput(DisplayValue=<span class="hljs-literal">false</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> UserID { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [Required(ErrorMessage=<span class="hljs-string">"Please enter a login name"</span>)]<font></font>
    [Display(Name = <span class="hljs-string">"Login"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Loginname { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> LanguageClass Language { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [EmailAddress(ErrorMessage = <span class="hljs-string">"Please enter a valid email"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Email { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [UIHint(<span class="hljs-string">"Enum"</span>)]<font></font>
    [EnumDataType(typeof(Supporter))]<font></font>
    [Required(ErrorMessage = <span class="hljs-string">"Please select supporter tier"</span>)]<font></font>
    [Display(Name = <span class="hljs-string">"Supporter"</span>)]
    <span class="hljs-keyword">public</span> Supporter SupporterTier { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [HiddenInput(DisplayValue = <span class="hljs-literal">true</span>)]<font></font>
    [ScaffoldColumn(<span class="hljs-literal">false</span>)]<font></font>
    [Display(Name = <span class="hljs-string">"Last login"</span>)]
    <span class="hljs-keyword">public</span> DateTime? LastLoginDate { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [HiddenInput(DisplayValue = <span class="hljs-literal">false</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IsLastLogin<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> LastLoginDate != null &amp;&amp; LastLoginDate &gt; DateTime.MinValue; }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserClass</span><span class="hljs-params">()</span> </span>{}<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserClass</span><span class="hljs-params">(<span class="hljs-keyword">int</span> UserID, <span class="hljs-built_in">string</span> Loginname, LanguageClass Language, <span class="hljs-built_in">string</span> Email, DateTime? LastLoginDate, Supporter SupporterTier)</span>
    </span>{
        <span class="hljs-keyword">this</span>.UserID = UserID;
        <span class="hljs-keyword">this</span>.Loginname = Loginname;
        <span class="hljs-keyword">this</span>.Language = Language;
        <span class="hljs-keyword">this</span>.Email = Email;
        <span class="hljs-keyword">this</span>.LastLoginDate = LastLoginDate;
        <span class="hljs-keyword">this</span>.SupporterTier = SupporterTier;<font></font>
    }<font></font>
}<font></font>
 <font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> Supporter<font></font>
{<font></font>
    [Display(Name=<span class="hljs-string">""</span>)]<font></font>
    None = <span class="hljs-number">1</span>,<font></font>
    Silver = <span class="hljs-number">2</span>,<font></font>
    Gold = <span class="hljs-number">3</span>,<font></font>
    Platinum = <span class="hljs-number">4</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸ</font><font style="vertical-align: inherit;">ã€åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«</font><font style="vertical-align: inherit;">ã‚ã‚‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LanguageClass.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ï¼š</font></font><br>
<pre><code class="cpp hljs">[DisplayName(<span class="hljs-string">"Language"</span>)]
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LanguageClass</span>
{</span><font></font>
    [Key]<font></font>
    [HiddenInput(DisplayValue = <span class="hljs-literal">false</span>)]<font></font>
    [Required(ErrorMessage = <span class="hljs-string">"Please select a language"</span>)]<font></font>
    [Range(<span class="hljs-number">1</span>, <span class="hljs-keyword">int</span>.MaxValue, ErrorMessage = <span class="hljs-string">"Please select a language"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> LanguageID { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    [Display(Name = <span class="hljs-string">"Language"</span>)]
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> LanguageName { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LanguageClass</span><span class="hljs-params">()</span> </span>{}<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LanguageClass</span><span class="hljs-params">(<span class="hljs-keyword">int</span> LanguageID, <span class="hljs-built_in">string</span> LanguageName)</span>
    </span>{
        <span class="hljs-keyword">this</span>.LanguageID = LanguageID;
        <span class="hljs-keyword">this</span>.LanguageName = LanguageName;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ã€ã‚¯ãƒ©ã‚¹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹é€ ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã€</font></font><code>Languages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŒ–ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®é¡ä¼¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®</font></font><code>enum Supporter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«</font><font style="vertical-align: inherit;">åˆ—æŒ™å‹ç”¨ã«ä½œæˆã•ã‚Œ</font></font><code>SupporterTier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã¯</font></font><code>UserID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>LanguageID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ãªãŸã¯å½¼ã‚‰ãŒä¸»ã‚­ãƒ¼ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã¨ã¾ã£ãŸãåŒã˜ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã¯å±æ€§ãŒä½¿ç”¨ã•ã‚Œã¾ã™</font></font><code>[Key]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»–ã®ã™ã¹ã¦ã®å±æ€§ã¯</font><font style="vertical-align: inherit;">ã€ã“ã®ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨</font><font style="vertical-align: inherit;">ã—ã¦ã€ãƒ“ãƒ¥ãƒ¼ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">view</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã«</font><font style="vertical-align: inherit;">ã•ã‚‰ã«é–¢é€£ã—ã¦ã„ã¾ã™</font><font style="vertical-align: inherit;">ã€‚ãã—ã¦ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®HTMLã‚¿ã‚°ã‚’ä½œæˆã™ã‚‹å ´åˆï¼ˆå€‹äººçš„ã«ã¯çµ¶å¯¾ã«ãŠå‹§ã‚ã—ã¾ã™ï¼‰ã€ã“ã‚Œã‚‰ã®å±æ€§ã‚’æ…é‡ã«è¨­å®šã—ã¦å¿…è¦ãªã‚‚ã®ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªã‚‚ã®ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<ul>
<li><b><code>[DisplayName]</code></b> â€“        .    ,        <code>Html.DisplayNameForModel</code>  .</li>
<li><b><code>[Display]</code></b>   <code>Name</code> â€“        .     Order,            (       ,      Order  ).</li>
<li><b><code>[HiddenInput]</code></b>   <code>DisplayValue</code>.   ,           (<code>DisplayValue=false</code>,    <code>input</code>   <code>hidden</code>),   ,  -  ,      (<code>DisplayValue=true</code>,    ,  )</li>
<li><b><code>[ScaffoldColumn]</code></b> â€“ ,       (, <code>Html.EditorForModel</code>).  <code>false</code> â€“          ,   .    <code>[HiddenInput(DisplayValue = false)]</code>,                   ,     .        <code>LastLoginDate</code>,    ,   - ,     - .</li>
<li><b><code>[Required]</code></b> â€“   ,      ,        <code>ErrorMessage</code>   <code>AllowEmptyStrings</code>    .</li>
<li><b><code>[EmailAddress]</code></b> â€“ ,  ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã®ã‚¯ãƒ©ã‚¹ã®æº–å‚™ãŒã§ããŸã‚‰ã€è¡¨ç¾ã«ç§»ã‚Šã¾ã™ï¼ˆè¡¨ç¾ã®ãƒ¢ãƒ‡ãƒ«ã®ã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã§èª¬æ˜ã—ã¾ã™ï¼‰ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V- </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾©è®ã®</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’</font><font style="vertical-align: inherit;">æ„å‘³ã—</font><font style="vertical-align: inherit;">ã¾ã™</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã§ã¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ¥ãƒ¼ã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’</font><font style="vertical-align: inherit;">ã„ãŸã ã„ãŸã‚ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒ“ãƒ¥ãƒ¼</font><font style="vertical-align: inherit;">ã¯ã€</font><i><font style="vertical-align: inherit;">Views \ Shared</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«</font><font style="vertical-align: inherit;">ã‚ã‚‹æ¨™æº–ï¼ˆ</font><i><font style="vertical-align: inherit;">Views</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_ViewStart.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">å®šç¾©</font><font style="vertical-align: inherit;">ï¼‰</font><i><font style="vertical-align: inherit;">_Layout.cshtml</font></i><font style="vertical-align: inherit;">ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã™</font><font style="vertical-align: inherit;">ï¼ˆ</font><i><font style="vertical-align: inherit;">Users</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®</font><i><font style="vertical-align: inherit;">Index.cshtml</font></i><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ï¼‰ï¼š</font><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>Index</code><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/jh/es/jn/jhesjnicwj2g1acx7yziv4f6wqy.png"><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="xml hljs">@model Example_Users.Models.UsersGrid<font></font>
@{<font></font>
   ViewBag.Title = "Users page";<font></font>
}<font></font>
@using (@Html.BeginForm())<font></font>
{<font></font>
   <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Users list:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><font></font>
       @if (TempData["message"] != null)<font></font>
       {<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-success"</span>&gt;</span>@TempData["message"]<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}<font></font>
       @if (TempData["error"] != null)<font></font>
       {<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-warning"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert"</span>&gt;</span>ERROR:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> @TempData["error"]<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}<font></font>
       @Html.Partial("List")<font></font>
       <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"onNewUser"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"New user"</span> /&gt;</span><font></font>
           @*@Html.ActionLink("New user", "New", "Users")*@<font></font>
       <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ“ãƒ¥ãƒ¼ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é–‹å§‹ã™ã‚‹å ´åˆã¯</font><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RouteConfig.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã‚’</font></font><code>Default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¬¡ã®</font><font style="vertical-align: inherit;">ã‚ˆã†ã«å¤‰æ›´ã—</font><font style="vertical-align: inherit;">ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">routes.MapRoute(name: <span class="hljs-string">"Default"</span>, url: <span class="hljs-string">"{controller}/{action}/{id}"</span>,<font></font>
defaults: <span class="hljs-keyword">new</span> { controller = <span class="hljs-string">"Users"</span>, action = <span class="hljs-string">"Index"</span>, id = UrlParameter.Optional });</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è‡ªä½“ã§ã¯ã€è¡Œcã«æ³¨æ„ã—ã¦ãã ã•ã„</font></font><code>Html.Partial("List")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã“ã‚Œã¯</font><font style="vertical-align: inherit;">ã€</font><i><font style="vertical-align: inherit;">Views \ Shared</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">ã‚ã‚‹ç‰¹åˆ¥ãªå€‹åˆ¥ã®ä¸€èˆ¬çš„ãªéƒ¨åˆ†ãƒ“ãƒ¥ãƒ¼ã‚’ã“ã®å ´æ‰€ã«æç”»ã™ã‚‹ãŸã‚ã«å¿…è¦</font><font style="vertical-align: inherit;">ã§ã™ã€‚å®Ÿéš›ã€ã“ã‚Œã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚°ãƒªãƒƒãƒ‰ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>users</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="xml hljs">@model Example_Users.Models.UsersGrid<font></font>
@using Example_Users.Domain<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-responsive"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table table-bordered table-hover"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Loginname).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Language.LanguageName).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Language).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Language).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Email).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Email).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Email).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().SupporterTier).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().LastLoginDate).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString())))<font></font>
                    @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString())<font></font>
                <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><font></font>
            @foreach (var item in Model.Users)<font></font>
            {<font></font>
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@Html.ActionLink(item.Loginname, "Edit", "Users", new { UserID = item.UserID }, null)<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@Html.DisplayFor(modelitem =&gt; item.Language.LanguageName)<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@Html.DisplayFor(modelitem =&gt; item.Email)<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"@Html.DisplayFor(modelitem =&gt; item.SupporterTier)"</span>&gt;</span>@if (item.SupporterTier != Supporter.None) {@Html.DisplayFor(modelitem =&gt; item.SupporterTier);}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>@if (item.IsLastLogin) {@Html.DisplayFor(modelitem =&gt; item.LastLoginDate)}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><font></font>
            }<font></font>
        <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
@if (Model.PagingInfo.totalPages &gt; 1)<font></font>
{<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pagination"</span>&gt;</span><font></font>
        @Html.PageLinks(Model.PagingInfo, x =&gt; Url.Action("Index", new { page = x, sortOrder = Model.SortingInfo.currentSort }))<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã§ã¯ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨</font></font><code>Html.DisplayNameFor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã¦åˆ—ã®åå‰ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ãƒªãƒ³ã‚¯ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¿ã‚¤ãƒˆãƒ«ã‚’å½¢æˆã™ã‚‹ã¨ã</font></font><code>Model.Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€ã‚¿ã‚¤ãƒ—ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚¹ãƒˆã§</font><font style="vertical-align: inherit;">ã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ãŒã‚ã‚‹</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã‚ã€æ¬¡ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®ãƒªã‚¹ãƒˆã®æœ€åˆã®è¡Œã‚’ã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦é¸æŠã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚ãŸã¨ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®å ´åˆï¼š</font></font><code>Model.Users.First().Loginname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><code>Loginname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹</font><font style="vertical-align: inherit;">ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯å±æ€§</font><font style="vertical-align: inherit;">ãŒ</font><font style="vertical-align: inherit;">ã‚ã‚‹</font><font style="vertical-align: inherit;">ãŸã‚ã€</font></font><code>[Display(Name = "Login")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ—åã«ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ã¨æ­£ç¢ºã«è¡¨ç¤ºã•ã‚Œ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hv/kf/dv/hvkfdvojevmzacuid51wurye8ik.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã™</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ãƒ–ãƒ­ãƒƒã‚¯c </font></font><code>foreach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã‚‚ã¡ã‚ã‚“ã€</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªã‚¹ãƒˆã«ã‚ã‚‹</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°</font><font style="vertical-align: inherit;">ã—ã¾ã™</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‹ã‚‰å–å¾—ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦</font><font style="vertical-align: inherit;">ã€ç§ãŸã¡ã®ãƒ¢ãƒ‡ãƒ«</font><font style="vertical-align: inherit;">ã«ã¯èˆˆå‘³æ·±ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ</font></font><code>SortingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã‚Š</font></font><code>PagingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ã“ã‚Œã‚‰ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ä¸¦ã¹æ›¿ãˆï¼ˆã‚¿ã‚°ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã§ä½¿ç”¨</font></font><code>&lt;th&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã¨æƒ…å ±ã®ãƒšãƒ¼ã‚¸åˆ†å‰²ï¼ˆãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸‹ã§ä½¿ç”¨ï¼‰ã‚’æ•´ç†</font><font style="vertical-align: inherit;">ã™ã‚‹ãŸã‚ã«å¿…è¦</font><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚ŒãŒã€å‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç´”ç²‹ãªãƒªã‚¹ãƒˆã‚’ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ä½¿ç”¨ã—ãªã„ç†ç”±</font></font><code>IEnumerable&lt;UserClass&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦</font><font style="vertical-align: inherit;">ã€</font><i><font style="vertical-align: inherit;">Model</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®</font><i><font style="vertical-align: inherit;">UsersGrid.cs</font></i></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">ã‚ã‚‹</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—</font><font style="vertical-align: inherit;">ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersGrid</span>
{</span>
    <span class="hljs-keyword">public</span> IEnumerable&lt;UserClass&gt; Users { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-keyword">public</span> PagingInfo PagingInfo { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-keyword">public</span> SortingInfo SortingInfo { get; <span class="hljs-built_in">set</span>; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹è‡ªä½“</font></font><code>PagingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><code>SortingInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã®</font><font style="vertical-align: inherit;">ä¸¡æ–¹ãŒ</font></font><code>GridInfo.cs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒã˜å ´æ‰€ã«ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PagingInfo</span>
{</span>
    <span class="hljs-comment">//    </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> totalItems { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//    </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> itemsPerPage { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> currentPage { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//        </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> showPages { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> totalPages<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>)Math.Ceiling((decimal)totalItems / itemsPerPage); }<font></font>
    }<font></font>
    <span class="hljs-comment">//          </span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> pagesSide<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>)Math.Truncate((decimal)showPages / <span class="hljs-number">2</span>); }<font></font>
    }<font></font>
}<font></font>
 <font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SortingInfo</span>
{</span>
    <span class="hljs-comment">//  ,    </span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> currentOrder { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">public</span> SortDirection currentDirection { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> currentSort<font></font>
    {<font></font>
        get { <span class="hljs-keyword">return</span> currentDirection != SortDirection.Descending ? currentOrder : currentOrder + <span class="hljs-string">"_desc"</span>; }<font></font>
    }<font></font>
    <span class="hljs-comment">//       (      -   )</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">NewOrder</span><span class="hljs-params">(<span class="hljs-built_in">string</span> columnName)</span>
    </span>{
        <span class="hljs-keyword">return</span> columnName == currentOrder &amp;&amp; currentDirection != SortDirection.Descending ? columnName + <span class="hljs-string">"_desc"</span> : columnName;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€ãƒ“ãƒ¥ãƒ¼ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GridHelpers.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HtmlHelpers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª</font><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">ã«ç‰¹åˆ¥ãªãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒè¿½åŠ ã•ã‚Œã¦</font><i><font style="vertical-align: inherit;">ã„</font></i><font style="vertical-align: inherit;">ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GridHelpers</span>
{</span>
    <span class="hljs-comment">//     1 ... 3 4 5 ... Last</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MvcHtmlString <span class="hljs-title">PageLinks</span><span class="hljs-params">(<span class="hljs-keyword">this</span> HtmlHelper html, PagingInfo pagingInfo, Func&lt;<span class="hljs-keyword">int</span>, <span class="hljs-built_in">string</span>&gt; pageUrl)</span>
    </span>{<font></font>
        StringBuilder result = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-keyword">if</span> (pagingInfo.currentPage &gt; pagingInfo.pagesSide + <span class="hljs-number">1</span>)<font></font>
        {<span class="hljs-comment">//  </span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"a"</span>);<font></font>
            tag.MergeAttribute(<span class="hljs-string">"href"</span>, pageUrl(<span class="hljs-number">1</span>));<font></font>
            tag.InnerHtml = <span class="hljs-string">"1"</span>;<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">int</span> page1 = pagingInfo.currentPage - pagingInfo.pagesSide;
        <span class="hljs-keyword">int</span> page2 = pagingInfo.currentPage + pagingInfo.pagesSide;
        <span class="hljs-keyword">if</span> (page1 &lt; <span class="hljs-number">1</span>)<font></font>
        {<font></font>
            page2 = page2 - page1 + <span class="hljs-number">1</span>;<font></font>
            page1 = <span class="hljs-number">1</span>;<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (page2 &gt; pagingInfo.totalPages) page2 = pagingInfo.totalPages;
        <span class="hljs-keyword">if</span> (page1 &gt; <span class="hljs-number">2</span>)<font></font>
        {<span class="hljs-comment">// ...</span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"span"</span>);<font></font>
            tag.InnerHtml = <span class="hljs-string">"..."</span>;<font></font>
            tag.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
            tag.AddCssClass(<span class="hljs-string">"disabled"</span>);<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = page1; i &lt;= page2; i++)<font></font>
        {<span class="hljs-comment">// </span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);
            <span class="hljs-keyword">if</span> (i == pagingInfo.currentPage) li.AddCssClass(<span class="hljs-string">"active"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"a"</span>);<font></font>
            tag.AddCssClass(<span class="hljs-string">"page-link"</span>);<font></font>
            tag.MergeAttribute(<span class="hljs-string">"href"</span>, pageUrl(i));<font></font>
            tag.InnerHtml = i.ToString();<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (page2 &lt; pagingInfo.totalPages)<font></font>
        {<span class="hljs-comment">// ...   </span>
            TagBuilder li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            TagBuilder tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"span"</span>);<font></font>
            tag.InnerHtml = <span class="hljs-string">"..."</span>;<font></font>
            tag.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
            tag.AddCssClass(<span class="hljs-string">"disabled"</span>);<font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
 <font></font>
            li = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"li"</span>);<font></font>
            li.AddCssClass(<span class="hljs-string">"page-item"</span>);<font></font>
 <font></font>
            tag = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"a"</span>);<font></font>
            tag.MergeAttribute(<span class="hljs-string">"href"</span>, pageUrl(pagingInfo.totalPages));<font></font>
            tag.InnerHtml = pagingInfo.totalPages.ToString();<font></font>
 <font></font>
            li.InnerHtml = tag.ToString();<font></font>
            result.Append(li.ToString());<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> MvcHtmlString.Create(result.ToString());<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IHtmlString <span class="hljs-title">SortIdentifier</span><span class="hljs-params">(<span class="hljs-keyword">this</span> HtmlHelper htmlHelper, <span class="hljs-built_in">string</span> sortOrder, <span class="hljs-built_in">string</span> field)</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(sortOrder) || (sortOrder.Trim() != field &amp;&amp; sortOrder.Replace(<span class="hljs-string">"_desc"</span>, <span class="hljs-string">""</span>).Trim() != field)) <span class="hljs-keyword">return</span> null;
        <span class="hljs-built_in">string</span> glyph = <span class="hljs-string">"glyphicon glyphicon-chevron-up"</span>;
        <span class="hljs-keyword">if</span> (sortOrder.ToLower().Contains(<span class="hljs-string">"desc"</span>))<font></font>
        {<font></font>
            glyph = <span class="hljs-string">"glyphicon glyphicon-chevron-down"</span>;<font></font>
        }<font></font>
        var span = <span class="hljs-keyword">new</span> TagBuilder(<span class="hljs-string">"span"</span>);<font></font>
        span.Attributes[<span class="hljs-string">"class"</span>] = glyph;
        <span class="hljs-keyword">return</span> MvcHtmlString.Create(span.ToString());<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RouteValueDictionary <span class="hljs-title">ToRouteValueDictionary</span><span class="hljs-params">(<span class="hljs-keyword">this</span> NameValueCollection collection, <span class="hljs-built_in">string</span> newKey, <span class="hljs-built_in">string</span> newValue)</span>
    </span>{<font></font>
        var routeValueDictionary = <span class="hljs-keyword">new</span> RouteValueDictionary();<font></font>
        foreach (var key in collection.AllKeys)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (key == null) <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">if</span> (routeValueDictionary.ContainsKey(key))<font></font>
                routeValueDictionary.Remove(key);<font></font>
            routeValueDictionary.Add(key, collection[key]);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(newValue))<font></font>
        {<font></font>
            routeValueDictionary.Remove(newKey);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (routeValueDictionary.ContainsKey(newKey))<font></font>
                routeValueDictionary.Remove(newKey);<font></font>
            routeValueDictionary.Add(newKey, newValue);<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> routeValueDictionary;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸¦ã¹æ›¿ãˆã‚„ãƒšãƒ¼ã‚¸ãƒ³ã‚°æƒ…å ±ã®ãªã„ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚°ãƒªãƒƒãƒ‰ã¯ã‹ãªã‚Šå½¹ã«ç«‹ãŸãªã„ã‚‚ã®ã§ã‚ã‚Šã€ASP.NET MVCã®ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã«å¯¾ã™ã‚‹æ¨™æº–ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒãªã„ãŸã‚ã€è‡ªåˆ†ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆã¾ãŸã¯ä»–ã®èª°ã‹ãŒä½œæˆã—ãŸã‚‚ã®ã‚’ä½¿ç”¨ã—ã¾ã™ï¼‰ã€‚ã“ã®å ´åˆã€ç§ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§æç¤ºã•ã‚ŒãŸASP.NET MVCã®æœ¬ã¨ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ã„ãã¤ã‹ã®å®Ÿè£…ã‚’ã‚¹ãƒ‘ã‚¤ã—ã¾ã—ãŸã€‚ã•ã‚‰ã«ã€ä½•ã‚‰ã‹ã®ç†ç”±ã§ã€å°‘ãªãã¨ã‚‚ãƒ‡ãƒ¼ã‚¿ã®ä¸¦ã¹æ›¿ãˆã¨ãƒšãƒ¼ã‚¸åˆ†å‰²ã‚’çµ„ã¿åˆã‚ã›ãŸã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã¾ã£ãŸããªã„ã‹ã€è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ç§ã¯ã“ã®å…¨ä½“ã‚’ç†è§£ã—ã€çµ„ã¿åˆã‚ã›ã¦é€šå¸¸ã®çŠ¶æ…‹ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚ãŸã¨ãˆã°ã€ã“ã‚Œã‚‰ã®å®Ÿè£…ã§ã®ãƒšãƒ¼ã‚¸åˆ†å‰²ã§ã¯ã€ãƒšãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆãŒå¤šå°‘é•·ããªã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æ•°åƒãƒšãƒ¼ã‚¸ã‚ã‚‹å ´åˆã¯ã©ã†ã§ã—ã‚‡ã†ã‹ã€‚ä¸Šè¨˜ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wj/dt/yr/wjdtyrmtbxm5f_5jfj7til_iqy0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆãŠã‚ˆã³å¤‰æ›´ã™ã‚‹ãŸã‚ã®ãƒ“ãƒ¥ãƒ¼ã‚‚å¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¿ã‚¤ãƒ—ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ãƒ“ãƒ¥ãƒ¼</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0u/80/-i/0u80-itckfou4ciyyxremebrqy8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">@model Example_Users.Models.UserModel<font></font>
@{<font></font>
    ViewBag.Title = <span class="hljs-string">"New "</span> + Html.DisplayNameForModel().ToString().ToLower();<font></font>
}<font></font>
&lt;h2&gt;@ViewBag.Title&lt;/h2&gt;<font></font>
@<span class="hljs-keyword">using</span> (@Html.BeginForm(<span class="hljs-string">"New"</span>, <span class="hljs-string">"Users"</span>, FormMethod.Post))<font></font>
{<font></font>
    @Html.EditorFor(m =&gt; m.User);<font></font>
    @Html.LabelFor(m =&gt; Model.User.Language)&lt;br /&gt;<font></font>
    @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages())<font></font>
    &lt;span/&gt;@Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID)&lt;br /&gt;<font></font>
    &lt;br /&gt;<font></font>
    &lt;p&gt;&lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Add"</span> /&gt; &lt;input type=<span class="hljs-string">"button"</span> onclick=<span class="hljs-string">"history.go(-1)"</span> value=<span class="hljs-string">"Cancel"</span> /&gt;&lt;/p&gt;<font></font>
    @*&lt;p&gt;@Html.ActionLink(<span class="hljs-string">"Back to list"</span>, <span class="hljs-string">"Index"</span>)&lt;/p&gt;*@<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ“ãƒ¥ãƒ¼ã¯ã€ãŸã¨ãˆã°ã€</font></font><code>Html.EditorFor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹ãŸã‚ã®ã‚¿ã‚°ã‚’ç”Ÿæˆã™ã‚‹æ‰‹æ®µã¨ã—ã¦ã®</font><font style="vertical-align: inherit;">ãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ä½¿ç”¨ã‚’ç¤ºã—ã¦ã„</font><font style="vertical-align: inherit;">ã¾ã™</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v-/rz/kw/v-rzkwz4dtui-xhs4lo2vbjyf3s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ“ãƒ¥ãƒ¼ã§ã¯ã€ã‚¯ãƒ©ã‚¹ã¯</font><font style="vertical-align: inherit;">ç›´æ¥</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã¯ãªã</font><font style="vertical-align: inherit;">ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œ</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹è‡ªä½“ã¯</font><font style="vertical-align: inherit;">ã€</font><i><font style="vertical-align: inherit;">Models</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®</font><i><font style="vertical-align: inherit;">UserModel.cs</font></i></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã«ã‚ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserModel</span>
{</span>
    <span class="hljs-keyword">public</span> UserClass User { get; <span class="hljs-built_in">set</span>; }
    <span class="hljs-keyword">private</span> IList&lt;LanguageClass&gt; Languages { get; <span class="hljs-built_in">set</span>; }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserModel</span><span class="hljs-params">()</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserModel</span><span class="hljs-params">(UserClass user, IList&lt;LanguageClass&gt; languages)</span>
    </span>{
        <span class="hljs-keyword">this</span>.User = user;
        <span class="hljs-keyword">this</span>.Languages = languages;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;SelectListItem&gt; <span class="hljs-title">SelectLanguages</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">if</span> (Languages != null) { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SelectList(Languages, <span class="hljs-string">"LanguageID"</span>, <span class="hljs-string">"LanguageName"</span>); }
        <span class="hljs-keyword">return</span> null;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚¯ãƒ©ã‚¹ã«ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè‡ªä½“</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã‚¿ã‚¤ãƒ—ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¿½åŠ ãƒªã‚¹ãƒˆãŒ</font><font style="vertical-align: inherit;">å«ã¾ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™</font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¨€èªã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒªã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã“ã®ãƒªã‚¹ãƒˆãŒå¿…è¦ã§ã‚ã‚Šã€ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨€èªã‚’é¸æŠã§ãã¾ã™ã€‚</font></font><code>@Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages(), "")</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¯ã€</font></font><code>SelectLanguages()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¨€èªã®ãƒªã‚¹ãƒˆ</font></font><code>SelectList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’ã€è­˜åˆ¥å­ã¨è¡Œåãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒæ—¢ã«è¨­å®šã•ã‚Œã¦</font><font style="vertical-align: inherit;">ã„ã‚‹ã‚¿ã‚¤ãƒ—ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›</font><font style="vertical-align: inherit;">ã™ã‚‹é–¢æ•°å‘¼ã³å‡ºã—</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ä½¿ç”¨ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆã‚’ãƒ“ãƒ¥ãƒ¼ã«å…¥ã‚Œã‚‹ã®ã¯é–“é•ã£ã¦ã„ã¾ã™ã€‚ç†è«–ä¸Šã€ã‚¢ã‚¤ãƒ‡ã‚¢ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¸ã®ã“ã‚Œã‚‰ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’èªè­˜ã—ã¦ã¯ãªã‚‰ãªã„ã‹ã‚‰ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©</font></font><code>SelectList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">æ—¢è£½ã®ã‚‚ã®ã‚’ã™ãã«ç”Ÿæˆã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™</font><font style="vertical-align: inherit;">ãŒã€ç§ã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªã‚¹ãƒˆã¨é–¢æ•°ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚‚ã£ã¨å¥½ãã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ã€åˆ¥ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼</font></font><code>Html.EditorFor(m =&gt; m.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒãã®ã‚¿ã‚¤ãƒ—ã®åŸ‹ã‚è¾¼ã¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç·¨é›†ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚’ç”Ÿæˆã—ãªã„ãŸã‚ã§ã™</font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆã“ã‚Œã¯ã€ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒªã‚¹ãƒˆã®å…±é€šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§å›é¿ã§ãã¾ã™ãŒã€ã“ã“ã§ã¯ã“ã‚Œã‚’è¡Œã„ã¾ã›ã‚“...ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ¥ã®ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å«ã‚€</font><font style="vertical-align: inherit;">ãƒ“ãƒ¥ãƒ¼</font><font style="vertical-align: inherit;">ã§ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</font><font style="vertical-align: inherit;">ã‚’</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã—ã¦ã„ã‚‹</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã‚ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¯å†å¸°çš„ã§ã¯ãªãã€ã“ã®çŠ¶æ³ã§ã¯æ©Ÿèƒ½ã—ãªã„ãŸã‚ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚ã—ãŸãŒã£ã¦</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®</font><font style="vertical-align: inherit;">ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨</font><font style="vertical-align: inherit;">ã—ã¾ã™</font></font><code>User</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã®ã‚¿ã‚°ã«ã‚‚æ³¨ç›®ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</font></font><code>Html.ActionLink("Back to list", "Index")</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ã€ç·¨é›†ã®ãŸã‚ã®ãƒ“ãƒ¥ãƒ¼ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆã¸ã®æˆ»ã‚Šã¯ã€ã“ã®æ–¹æ³•ã§å®Ÿè£…ã•ã‚Œã¾ã™ã€‚å®Ÿéš›ã€ç¬¬ä¸€ã«ã€ç§ã®æ„è¦‹ã§ã¯ã€å¥‡å¦™ã«è¦‹ãˆã¾ã™-ãƒ•ã‚©ãƒ¼ãƒ </font></font><code>button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">ã‚¿ã‚¤ãƒ—ãƒœã‚¿ãƒ³ã‚’ä½¿ç”¨</font><font style="vertical-align: inherit;">ã—ã€ãƒªã‚¿ãƒ¼ãƒ³ãƒœã‚¿ãƒ³ãŒä½•ã‚‰ã‹ã®ç†ç”±ã§ãƒªãƒ³ã‚¯ã«ã‚ˆã£ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹å ´åˆã§ã™ã€‚æ¬¡ã«ã€ä¸¦ã¹æ›¿ãˆã¨ãƒšãƒ¼ã‚¸ã”ã¨ã®å‡ºåŠ›ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€åŒã˜ãƒ“ãƒ¥ãƒ¼ã®åŒã˜ãƒšãƒ¼ã‚¸ã«æˆ»ã‚Šã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã ã‘ã§ãªã</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹ãŸã‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚‚</font><font style="vertical-align: inherit;">ãƒ“ãƒ¥ãƒ¼ã«æ¸¡ã™ã“ã¨ãŒè³¢æ˜ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“</font><font style="vertical-align: inherit;">ã€‚ã‚ˆã‚Šç°¡å˜ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™-æ¬¡ã®ã‚ˆã†ãªãƒœã‚¿ãƒ³ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã®å±¥æ­´ãƒšãƒ¼ã‚¸ã«æˆ»ã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ã“ã“ã«ã¯å¾®å¦™ãªé•ã„ãŒã‚ã‚Šã¾ã™ï¼ˆãŸã¨ãˆã°ã€æ—¢ã«ã“ã®ãƒšãƒ¼ã‚¸ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸãŒã€æ©Ÿèƒ½ã—ã¾ã›ã‚“ã§ã—ãŸã€‚ä»Šã§ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰ãŒã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯å…¨ä½“ã¨ã—ã¦ã†ã¾ãæ©Ÿèƒ½ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã‚¿ã‚¤ãƒ—ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç·¨é›†ã™ã‚‹ãŸã‚ã®ãƒ“ãƒ¥ãƒ¼</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a2/eo/xh/a2eoxhk3nzvbvs0h7s_nmjxuems.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ãã®ã‚³ãƒ¼ãƒ‰ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs">@model Example_Users.Models.UserModel<font></font>
@{<font></font>
    ViewBag.Title = <span class="hljs-string">"Edit "</span> + Html.DisplayNameForModel().ToString().ToLower();<font></font>
}<font></font>
&lt;h2&gt;@ViewBag.Title @Model.User.Loginname&lt;/h2&gt;<font></font>
@<span class="hljs-keyword">using</span> (@Html.BeginForm(<span class="hljs-string">"Edit"</span>, <span class="hljs-string">"Users"</span>, FormMethod.Post))<font></font>
{<font></font>
    @Html.HiddenFor(m =&gt; Model.User.UserID)<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.Loginname)<font></font>
        @Html.EditorFor(m =&gt; Model.User.Loginname)<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.Loginname)<font></font>
    &lt;/div&gt;<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.Language)<font></font>
        @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages())<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID)<font></font>
    &lt;/div&gt;<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.Email)<font></font>
        @Html.EditorFor(m =&gt; Model.User.Email)<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.Email)<font></font>
    &lt;/div&gt;<font></font>
    &lt;div&gt;<font></font>
        @Html.LabelFor(m =&gt; Model.User.SupporterTier)<font></font>
        @Html.EditorFor(m =&gt; Model.User.SupporterTier)<font></font>
        @*@Html.EnumDropDownListFor(m =&gt; Model.User.SupporterTier)*@<font></font>
        @*@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, <span class="hljs-keyword">new</span> SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))*@<font></font>
        @Html.ValidationMessageFor(m =&gt; Model.User.SupporterTier)<font></font>
    &lt;/div&gt;<font></font>
    &lt;br /&gt;<font></font>
    &lt;p&gt;&lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Save"</span> /&gt; &lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Remove"</span> onclick=<span class="hljs-string">"javascript:return confirm('Are you sure?');"</span> /&gt; &lt;input type=<span class="hljs-string">"submit"</span> name=<span class="hljs-string">"action"</span> value=<span class="hljs-string">"Cancel"</span> /&gt;&lt;/p&gt;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€ã“ã®ãƒ“ãƒ¥ãƒ¼ã§ã¯ã€ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã”ã¨ã«åˆ¥ã€…ã®ã‚¿ã‚°ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ã€ã•ã¾ã–ã¾ãªãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€ã™ã§ã«å°‘ã—ç•°ãªã‚‹ã€ã‚ˆã‚Šãã‚Œã„ãªæ–¹æ³•ã§è¡¨ç¤ºã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3g/ew/as/3gewasn6m2whqy9odk4gvrn2l0c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ“ãƒ¥ãƒ¼ã§ã¯ã€åˆ¥ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ãƒªã‚¹ãƒˆã«æˆ»ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ“ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ä»£ã‚ã‚Šã«</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ä»–ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã¨åŒã˜ãƒœã‚¿ãƒ³ãŒä½¿ç”¨ã•ã‚Œï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Save</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remove</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã“ã‚Œã‚‰ã®ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‡¦ç†ã™ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§æˆ»ã‚ŠãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼ˆä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ã‚’å‚ç…§ï¼‰ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ—æŒ™å‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enum</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‹ã®ã‚¯ãƒ©ã‚¹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä½¿ç”¨ã«é–¢é€£ã™ã‚‹ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ãŒã‚ã‚Šã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚å®Ÿéš›ã«ã¯ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã ã‘ã®å ´åˆã€</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆtype tag </font></font><code>&lt;input type=â€textâ€/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">ãŒ</font><font style="vertical-align: inherit;">ãƒ•ã‚©ãƒ¼ãƒ </font><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">è¡¨ç¤ºã•ã‚Œã¾ã™ãŒã€</font><font style="vertical-align: inherit;">å®Ÿéš›ã«ã¯ä¸€é€£ã®å€¤ã‹ã‚‰é¸æŠã§ãã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆã¤ã¾ã‚Š</font></font><code>&lt;select&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ä¸€é€£ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒã¤</font><font style="vertical-align: inherit;">ã‚¿ã‚°</font></font><code>&lt;option&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ãŒå¿…è¦ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.ã¯ã€ç›´ç·šå‹ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã—ã¦è§£æ±ºã—ã¦ã„ã‚‹</font></font><code>Html.DropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹ã€</font></font><code>Html.ListBoxFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ã€…ã®å ´åˆã«ã¯ã€ä¾‹ãˆã°ã€</font></font><code>@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, new SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ 2ã¤ã®ãƒã‚¤ãƒŠã‚¹ãŒã‚ã‚Šã¾ã™-ãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ãŸã‚ã«å€‹åˆ¥ã«å‡¦æ–¹ã•ã‚Œãªã‘ã‚Œã°</font><font style="vertical-align: inherit;">ãªã‚‰ãªã„</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚¤ãƒ—ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã§ãã¾ã™</font></font><code>Editor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><i><font style="vertical-align: inherit;">Views \ Shared \ EditorTemplatesãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supporter.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ä½œæˆã—</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">@model Example_Users.Domain.Supporter<font></font>
@Html.DropDownListFor(m =&gt; m, new SelectList(Enum.GetNames(Model.GetType()), Model.ToString()))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«åã¯ã‚¿ã‚¤ãƒ—åã¨ä¸€è‡´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸€è‡´ã—ãªã„</font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å ´åˆ</font><font style="vertical-align: inherit;">ã¯</font><font style="vertical-align: inherit;">ã€ã§ã¯ãªã</font><font style="vertical-align: inherit;">ã¨æ›¸ãè¾¼ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ¥ã®åå‰ã‚’ä»˜ã‘ã‚‹å ´åˆã¯ã€ã‚¯ãƒ©ã‚¹ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’èª¬æ˜ã™ã‚‹å‰ã«ãƒ’ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>[UIHint("Supporter")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ãã—ã¦ã€ãã‚ŒãŒä½¿ç”¨ã•ã‚Œã‚‹äºˆå®šã§ã‚ã‚‹å ´åˆã«ã‚‚å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ãã®ãŸã‚ã€ãƒ•ã‚©ãƒ¼ãƒ ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯æ©Ÿèƒ½ã—</font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆï¼ˆãƒ“ãƒ¥ãƒ¼ã‚’èµ·å‹•</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€</font><font style="vertical-align: inherit;">ãƒ˜ãƒ«ãƒ‘ãƒ¼ç”¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚‚</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—</font><font style="vertical-align: inherit;">ãŸãŸã‚ã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯é©ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸ</font><font style="vertical-align: inherit;">ï¼šã€Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒªã«æ¸¡ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«è¦ç´ ã¯NULLã§ã™ãŒã€ã“ã®ãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒªã«ã¯ã€ã€ŒExample_Users Domain.Supporter "ã€nullã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â»ç†ç”±ã¯æ˜ã‚‰ã‹ã§ã™ã€‚ãƒªã‚¹ãƒˆã®å€¤ã‚’ç©ºã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ãŒã€å•é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã—ãŸãŒã£ã¦ã€å½¼ã¯ã•ã‚‰ã«ç†è§£ã—å§‹ã‚ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. </font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è»¢é€å°‚ç”¨</font><font style="vertical-align: inherit;">ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚ã“ã“ã§ã¯ã™ã¹ã¦ãŒå•é¡Œãªãã€è¿½åŠ ã§æ›¸ãè¾¼ã‚€å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã™ã¹ã¦ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç·¨é›†æ™‚ãŠã‚ˆã³ä½œæˆæ™‚ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚ 1ã¤ã®ã€Œã—ã‹ã—ã€ã‚’é™¤ã„ã¦ï¼šãƒ˜ãƒ«ãƒ‘ãƒ¼</font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã€</font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨ã—ã¾ã›ã‚“</font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ãã—ã¦ã€ç§ãŒç†è§£ã—ã¦ã„ã‚‹ã‚ˆã†ã«ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚¯ãƒ©ã‚¹ã®å±æ€§ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ãã‚Œã‚’å›é¿ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“- </font></font><code>[UIHint]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>[DataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦</font></font><code>[EnumDataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã‹ã‚‰æ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚åˆ—æŒ™å€¤ã®å±æ€§ã‚‚æ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚ã¤ã¾ã‚Šã€Noneã®ä»£ã‚ã‚Šã«ã€ãŸã¨ãˆã°ã€åˆ—æŒ™ã®èª¬æ˜ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ç©ºã®æ–‡å­—åˆ—ã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“</font></font><code>Supporter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.ãã®çµæœã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§è¦‹ã¤ã‹ã£</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è€ƒãˆå‡ºã—</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ã¾ã—ãŸ</font></a><font style="vertical-align: inherit;">ã€‚è»¢é€ç”¨ã®å…±é€šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚</font><i><font style="vertical-align: inherit;">Views \ Shared \ EditorTemplatesãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enum.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ä½œæˆã—</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">@using System.ComponentModel.DataAnnotations<font></font>
@model Enum<font></font>
@{ <font></font>
    Func<span class="hljs-tag">&lt;<span class="hljs-name">object,</span> <span class="hljs-attr">string</span>&gt;</span> GetDisplayName = o =&gt;<font></font>
    {<font></font>
        var result = null as string;<font></font>
        var display = o.GetType()<font></font>
                        .GetMember(o.ToString()).First()<font></font>
                        .GetCustomAttributes(false)<font></font>
                        .OfType<span class="hljs-tag">&lt;<span class="hljs-name">DisplayAttribute</span>&gt;</span>()<font></font>
                        .LastOrDefault();<font></font>
        if (display != null) result = display.GetName();<font></font>
        return result ?? o.ToString();<font></font>
    };<font></font>
    var values = Enum.GetValues(ViewData.ModelMetadata.ModelType).Cast<span class="hljs-tag">&lt;<span class="hljs-name">object</span>&gt;</span>()<font></font>
        .Select(v =&gt; new SelectListItem<font></font>
        {<font></font>
            Selected = v.Equals(Model),<font></font>
            Text = GetDisplayName(v), // v.ToString(),<font></font>
            Value = v.ToString()<font></font>
        });<font></font>
}<font></font>
@Html.DropDownList("", values)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ã€ä¸€èˆ¬çš„ã«ã€ã™ã¹ã¦ãŒã†ã¾ãã„ãã¾ã—ãŸã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯å¯èƒ½ãªé™ã‚Šã†ã¾ãæ©Ÿèƒ½ã—ã¾ã™ã€‚</font></font><code>[UIHint("Enum")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿½åŠ </font><font style="vertical-align: inherit;">ã™ã‚‹</font><font style="vertical-align: inherit;">ã“ã¨</font><font style="vertical-align: inherit;">ã‚‚</font><font style="vertical-align: inherit;">ã§ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ã“ã®ä¸€èˆ¬çš„ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯</font></font><code>[Display(Name)]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ç‰¹åˆ¥ãªé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦åˆ—æŒ™å€¤</font><font style="vertical-align: inherit;">ã®å±æ€§</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">èª­ã¿å–ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’æ„å‘³ã—ã¾ã™</font></font></h2><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UsersController.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã‚’</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controllers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«</font><font style="vertical-align: inherit;">è¿½åŠ ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersController</span> :</span> Controller<font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> pageSize = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> showPages = <span class="hljs-number">15</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<font></font>
 <font></font>
    <span class="hljs-comment">//   </span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ViewResult <span class="hljs-title">Index</span><span class="hljs-params">(<span class="hljs-built_in">string</span> sortOrder, <span class="hljs-keyword">int</span> page = <span class="hljs-number">1</span>)</span>
    </span>{
        <span class="hljs-built_in">string</span> sortName = null;<font></font>
        System.Web.Helpers.SortDirection sortDir = System.Web.Helpers.SortDirection.Ascending;<font></font>
        sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir);<font></font>
        UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();<font></font>
        UsersGrid users = <span class="hljs-keyword">new</span> UsersGrid {<font></font>
            Users = rep.List(sortName, sortDir, page, pageSize, out count),<font></font>
            PagingInfo = <span class="hljs-keyword">new</span> PagingInfo<font></font>
            {<font></font>
                currentPage = page,<font></font>
                itemsPerPage = pageSize,<font></font>
                totalItems = count,<font></font>
                showPages = showPages<font></font>
            },<font></font>
            SortingInfo = <span class="hljs-keyword">new</span> SortingInfo {<font></font>
                currentOrder = sortName,<font></font>
                currentDirection = sortDir<font></font>
            }<font></font>
        };<font></font>
        <span class="hljs-keyword">return</span> View(users);<font></font>
    }<font></font>
 <font></font>
    [ReferrerHold]<font></font>
    [HttpPost]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Index</span><span class="hljs-params">(<span class="hljs-built_in">string</span> onNewUser)</span>
    </span>{
        <span class="hljs-keyword">if</span> (onNewUser != null) {<font></font>
            TempData[<span class="hljs-string">"referrer"</span>] = ControllerContext.RouteData.Values[<span class="hljs-string">"referrer"</span>];
            <span class="hljs-keyword">return</span> View(<span class="hljs-string">"New"</span>, <span class="hljs-keyword">new</span> UserModel(<span class="hljs-keyword">new</span> UserClass(), Languages()));<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> View();<font></font>
    }<font></font>
 <font></font>
    [ReferrerHold]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">New</span><span class="hljs-params">()</span>
    </span>{<font></font>
        TempData[<span class="hljs-string">"referrer"</span>] = ControllerContext.RouteData.Values[<span class="hljs-string">"referrer"</span>];
        <span class="hljs-keyword">return</span> View(<span class="hljs-string">"New"</span>, <span class="hljs-keyword">new</span> UserModel(<span class="hljs-keyword">new</span> UserClass(), Languages()));<font></font>
    }<font></font>
 <font></font>
    [HttpPost]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">New</span><span class="hljs-params">(UserModel model)</span>
    </span>{
        <span class="hljs-keyword">if</span> (ModelState.IsValid)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (model.User == null || model.User.Language == null || model.User.Language.LanguageID == <span class="hljs-number">0</span>) RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
            UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();
            <span class="hljs-keyword">if</span> (rep.AddUser(model.User)) TempData[<span class="hljs-string">"message"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has been added"</span>, model.User.Loginname);
            <span class="hljs-keyword">else</span> TempData[<span class="hljs-string">"error"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has not been added!"</span>, model.User.Loginname);
            <span class="hljs-keyword">if</span> (TempData[<span class="hljs-string">"referrer"</span>] != null) <span class="hljs-keyword">return</span> Redirect(TempData[<span class="hljs-string">"referrer"</span>].ToString());
            <span class="hljs-keyword">return</span> RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span><font></font>
        {<font></font>
            model = <span class="hljs-keyword">new</span> UserModel(model.User, Languages()); <span class="hljs-comment">// -          model.Languages,  </span>
            <span class="hljs-keyword">return</span> View(model);<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    [ReferrerHold]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Edit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> UserID)</span>
    </span>{<font></font>
        UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();<font></font>
        UserClass user = rep.FetchByID(UserID);<font></font>
        <span class="hljs-keyword">if</span> (user == null) <span class="hljs-keyword">return</span> HttpNotFound();<font></font>
        TempData[<span class="hljs-string">"referrer"</span>] = ControllerContext.RouteData.Values[<span class="hljs-string">"referrer"</span>];
        <span class="hljs-keyword">return</span> View(<span class="hljs-keyword">new</span> UserModel(user, Languages()));<font></font>
    }<font></font>
 <font></font>
    [HttpPost]<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult <span class="hljs-title">Edit</span><span class="hljs-params">(UserModel model, <span class="hljs-built_in">string</span> action)</span>
    </span>{
        <span class="hljs-keyword">if</span> (action == <span class="hljs-string">"Cancel"</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (TempData[<span class="hljs-string">"referrer"</span>] != null) <span class="hljs-keyword">return</span> Redirect(TempData[<span class="hljs-string">"referrer"</span>].ToString());
            <span class="hljs-keyword">return</span> RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (ModelState.IsValid)<font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (model.User == null || model.User.Language == null || model.User.Language.LanguageID == <span class="hljs-number">0</span>) RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
            UsersRepository rep = <span class="hljs-keyword">new</span> UsersRepository();
            <span class="hljs-keyword">if</span> (action == <span class="hljs-string">"Save"</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">if</span> (rep.ChangeUser(model.User)) TempData[<span class="hljs-string">"message"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has been saved"</span>, model.User.Loginname);
                <span class="hljs-keyword">else</span> TempData[<span class="hljs-string">"error"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has not been saved!"</span>, model.User.Loginname);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (action == <span class="hljs-string">"Remove"</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">if</span> (rep.RemoveUser(model.User)) TempData[<span class="hljs-string">"message"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has been removed"</span>, model.User.Loginname);
                <span class="hljs-keyword">else</span> TempData[<span class="hljs-string">"error"</span>] = <span class="hljs-built_in">string</span>.Format(<span class="hljs-string">"{0} has not been removed!"</span>, model.User.Loginname);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (TempData[<span class="hljs-string">"referrer"</span>] != null) <span class="hljs-keyword">return</span> Redirect(TempData[<span class="hljs-string">"referrer"</span>].ToString());
            <span class="hljs-keyword">return</span> RedirectToAction(<span class="hljs-string">"Index"</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span><font></font>
        {<font></font>
            model = <span class="hljs-keyword">new</span> UserModel(model.User, Languages()); 
            <span class="hljs-keyword">return</span> View(model);<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;LanguageClass&gt; <span class="hljs-title">Languages</span><span class="hljs-params">()</span>
    </span>{<font></font>
        IList&lt;LanguageClass&gt; languages = <span class="hljs-keyword">new</span> List&lt;LanguageClass&gt;();<font></font>
        LanguagesRepository rep = <span class="hljs-keyword">new</span> LanguagesRepository();<font></font>
        languages = rep.List();<font></font>
        <span class="hljs-keyword">return</span> languages;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ†æã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1ï¼‰ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>Index</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’å«ã‚€ãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºï¼š</font></font><code>public ViewResult Index(string sortOrder, int page = 1)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ã¤ã®å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼</font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ãŒã‚ã‚Š</font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚ã§ã¯</font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã™ã¹ã¦å¤šã‹ã‚Œå°‘ãªã‹ã‚Œæ˜ç¢ºãªã€ã—ã‹ã—ã‚’é€šã˜ã¦</font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã‹ã‚‰ã€ã‚ãªãŸãŸã¡ã¯ãã®å¾Œã€SQLã‚¯ã‚¨ãƒªã§å¡¾ã«æŒã£ã¦ãŠã‚Šã€ãã‚Œã‚’ç›´æ¥è¡Œã†ã“ã¨ã¯ã§ãã¾ã›ã‚“ä»»æ„ã®æ–‡å­—åˆ—ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€é–¢æ•°ã®åŠ©ã‘ã‚’å€Ÿã‚Šã¦ã“ã®è¡Œã‚’è§£æã—ã¾ã™ï¼ˆã“ã“ã§ã¯é–¢æ•°è‡ªä½“ã¯ç¤ºã—ã¾ã›ã‚“</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚Base.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«ã§</font><i><font style="vertical-align: inherit;">ç¢ºèª</font></i><font style="vertical-align: inherit;">ã§ãã¾ã™</font><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><code>sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir);</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ã™ã¹ã¦ãŒç°¡å˜ã§ã™ã€‚ãƒªãƒã‚¸ãƒˆãƒªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—</font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆæ¬¡ã®ç« ã§èª¬æ˜ã™ã‚‹DBMSã‚’æ“ä½œã™ã‚‹ãŸã‚ï¼‰ã€ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">å‘¼ã³å‡ºã—ã¦</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å½¢æˆã™ã‚‹</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å®Ÿéš›ã®ãƒªã‚¹ãƒˆã¨ã€æƒ…å ±ã®ãƒšãƒ¼ã‚¸åˆ†å‰²ã®ç·¨æˆã¨ã‚½ãƒ¼ãƒˆã«å¿…è¦ãªæƒ…å ±ã‹ã‚‰ã€‚ã¾ãŸã€ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã¨</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¨åŒæ™‚ã«</font><font style="vertical-align: inherit;">totalItemå€¤ãŒå–å¾—ã•</font><font style="vertical-align: inherit;">ã‚Œã¾ã™</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã•ã‚‰ã«ã€ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€è¡¨ç¤ºã®ãŸã‚ã«è»¢é€ã•ã‚Œã¦è¡¨ç¾ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ¥ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æ–¹æ³•ã¯å±æ€§ã§ã‚‚ã‚ã‚Š</font></font><code>[HttpPost]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æˆ‘ã€…ã¯ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚’ã†ã¾ãã™ã‚‹ãŸã‚ã«å¿…è¦ãªã“ã¨ã‚’</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€ƒæ…®ã—ã¦</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><code>public ActionResult Index(string onNewUser)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚Š</font></font><code>onNewUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦ç´ ã¨å…±é€šã®ã‚‚ã®ã‚’</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è€ƒæ…®ã—ã¦</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æˆ‘ã€…ã¯ã€ã“ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã‚Œã¯æˆ‘ã€…ãŒåå¯¾ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã“ã¨ã‚’é–¢æ•°ã«å€¤ã‚’æ¸¡ã—</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒŒãƒ«</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã‚¿ã‚¤ãƒ—ãƒœã‚¿ãƒ³</font></font><code>submit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒãƒ“ãƒ¥ãƒ¼ã«ã‚ã‚‹å ´åˆ</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã„ãã¤ã‹ã€å€¤è‡ªä½“ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆã“ã®å ´åˆã€å€¤ã¯ã€Œæ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã«ãªã‚Šã¾ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒã‚§ãƒƒã‚¯ã—ãŸå¾Œ</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨è¨€èªã®ãƒªã‚¹ãƒˆã§</font><font style="vertical-align: inherit;">æ§‹æˆã•ã‚Œã‚‹</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å½¢æˆ</font><font style="vertical-align: inherit;">ã—ã€ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒªã‚¹ãƒˆã‹ã‚‰é¸æŠã—ã¦ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«æ¸¡ã—</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚è¨€èªã®ãƒªã‚¹ãƒˆã¯</font><font style="vertical-align: inherit;">ã€æ¬¡ã®ã‚ˆã†ã«</font></font><code>LanguageRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">å‘¼ã³å‡ºã™ã“ã¨</font><font style="vertical-align: inherit;">ã«ã‚ˆã£ã¦ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–å¾—ã•</font><font style="vertical-align: inherit;">ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;LanguageClass&gt; <span class="hljs-title">Languages</span><span class="hljs-params">()</span>
</span>{<font></font>
    LanguagesRepository rep = <span class="hljs-keyword">new</span> LanguagesRepository();
    <span class="hljs-keyword">return</span> rep.List();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ï¼‰ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>New</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—ã§ã¯ã€ä¸Šã®ã‚¯ãƒªãƒƒã‚¯å‹•ä½œã™ã‚‹ã‚ˆã†ã«ä½œã‚‰ã‚Œã¦</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒ³ã‚¯</font><font style="vertical-align: inherit;">ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆè¡Œã®</font></font><code>Html.ActionLink("New user", "New", "Users")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ¥ãƒ¼ã§</font></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ“ãƒ¥ãƒ¼ã‚’é–‹ã</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã¯ã€å‰</font><font style="vertical-align: inherit;">ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</font><font style="vertical-align: inherit;">ã¨åŒæ§˜ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ãŸã‚ã®å‡¦ç†ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã€æŠ¼ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã®ãƒã‚§ãƒƒã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã«ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã™ã‚‹</font><font style="vertical-align: inherit;">ã‚¿ã‚¤ãƒ—ã®ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŒã¤ãƒ¡ã‚½ãƒƒãƒ‰</font><font style="vertical-align: inherit;">ï¼šå…¥åŠ›</font><font style="vertical-align: inherit;">
ã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’Newãƒ“ãƒ¥ãƒ¼ã‹ã‚‰å–å¾—ã—</font><font style="vertical-align: inherit;">ã€ãƒ‡ãƒ¼ã‚¿ã®æ­£ç¢ºæ€§ã‚’ç¢ºèªã—ï¼ˆ</font><font style="vertical-align: inherit;">ãŠã‚ˆã³ã§</font><font style="vertical-align: inherit;">èª¬æ˜ã•ã‚Œã¦ã„ã‚‹è¦ä»¶ã«å¾“ã£ã¦</font><font style="vertical-align: inherit;">ï¼‰ã€ãƒªãƒã‚¸ãƒˆãƒªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ä½œæˆã—</font><font style="vertical-align: inherit;">ã€æ–°ã—ã„è¡Œã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¿½åŠ ã—ã‚ˆã†ã¨ã—ã¾ã™ã€é–¢æ•°ã‚’å‘¼ã³å‡ºã™</font></font><code>New</code><font style="vertical-align: inherit;"></font><code>UserModel</code><font style="vertical-align: inherit;"></font><code>public ActionResult New(UserModel model)</code><br>
<br><font style="vertical-align: inherit;"></font><code>UserModel</code><font style="vertical-align: inherit;"></font><code>UserClass</code><font style="vertical-align: inherit;"></font><code>LanguageClass</code><font style="vertical-align: inherit;"></font><code>UsersRepository</code><font style="vertical-align: inherit;"></font><code>AddUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æ¬¡ã«ã€å‰ã®ãƒšãƒ¼ã‚¸ï¼ˆã‹ã‚‰ãƒ“ãƒ¥ãƒ¼ãŒå‘¼ã³å‡ºã•ã‚ŒãŸãƒšãƒ¼ã‚¸ï¼‰ã«æˆ»ã‚Š</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€æ“ä½œã®æˆåŠŸã¾ãŸã¯å¤±æ•—ã‚’ç¤ºã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3ï¼‰æ–¹æ³•</font></font><code>Edit</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã®å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¤</font></font><code>UserID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆãƒ¦ãƒ¼ã‚¶IDï¼‰ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ‡ãƒ¼ã‚¿ã®ç·¨é›†ãƒ“ãƒ¥ãƒ¼ã‚’é–‹ããŸã‚ã«ã€ãƒªã‚¹ãƒˆå†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ï¼š</font></font><code>public ActionResult Edit(int UserID)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–¹æ³•ã§ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªãŒå†ã³ä½œæˆã•</font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨æ©Ÿèƒ½ã¯ã€ãã‚Œã‹ã‚‰å‘¼ã³å‡ºã•ã‚ŒãŸ</font></font><code>FetchByID(UserID)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¿ã‚¤ãƒ—ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ã¾ã™</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æˆåŠŸã—ãŸå ´åˆã€ãƒ¢ãƒ‡ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™- </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å—ä¿¡ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã®</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</font><font style="vertical-align: inherit;">ã¨è¨€èªã®ãƒªã‚¹ãƒˆã§ã‚ã‚Šã€è¡¨ç¤ºã®</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã‚ã«</font><font style="vertical-align: inherit;">ãƒ“ãƒ¥ãƒ¼</font><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">æ¸¡ã•</font><font style="vertical-align: inherit;">ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¿ã‚¤ãƒ—</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨è¡Œ</font><font style="vertical-align: inherit;">ãƒ¢ãƒ‡ãƒ«ã®å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æŒã¤ãƒ¡ã‚½ãƒƒãƒ‰</font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><code>public ActionResult Edit(UserModel model, string action)</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¿ã‚¤ãƒ—ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã•ã‚Œ</font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒ“ãƒ¥ãƒ¼ã®ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†ï¼‰ãŒå‡¦ç†ã•ã‚Œã¾ã™</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã©ã®ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã‹ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«</font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€HTMLã‚¿ã‚¤ãƒ—ã‚¿ã‚°ã®åå‰ã«ç¤ºã•ã‚Œã¦</font><font style="vertical-align: inherit;">ã„ã‚‹å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒä½¿ç”¨ã•ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™</font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã—ãŸãŒã£ã¦ã€ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®å€¤ã‚’</font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®ãƒœã‚¿ãƒ³ã®</font><font style="vertical-align: inherit;">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼å€¤ã¨æ¯”è¼ƒã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚ãƒ¢ãƒ‡ãƒ«ã®æœ‰åŠ¹æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å‰ã«ã€</font></font><code>Cancel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç·¨é›†ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«</font><font style="vertical-align: inherit;">å€¤ãŒãƒã‚§ãƒƒã‚¯ã•</font><font style="vertical-align: inherit;">ã‚Œã¾ã™ã€‚ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®å±¥æ­´ã«æˆ»ã‚‹ä»£ã‚ã‚Šã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®å±¥æ­´ã¯ã€ãƒ“ãƒ¥ãƒ¼</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ä½¿ç”¨</font><font style="vertical-align: inherit;">ã•ã‚Œã€ãƒ“ãƒ¥ãƒ¼ã®</font><font style="vertical-align: inherit;">ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ƒã®ãƒšãƒ¼ã‚¸ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ä¿ç®¡ã‚’ä½¿ç”¨ã—ã¾ã™</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã“ã‚Œã‚’è¡Œã†ãŸã‚ã«ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ãã®å±æ€§ã‚’ä½¿ç”¨ã™ã‚‹ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚’ç¤ºã—ã¾ã™</font></font><code>ActionFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼šã‚¯ãƒ©ã‚¹</font></font><code>ReferrerHoldAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReferrerHoldAttribute.csã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HtmlAttributeã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª</font><font style="vertical-align: inherit;">ï¼‰ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReferrerHoldAttribute</span> :</span> ActionFilterAttribute<font></font>
{<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnActionExecuting</span><span class="hljs-params">(ActionExecutingContext filterContext)</span>
    </span>{<font></font>
        var referrer = filterContext.RequestContext.HttpContext.Request.UrlReferrer;<font></font>
        <span class="hljs-keyword">if</span> (referrer != null) filterContext.RouteData.Values.Add(<span class="hljs-string">"referrer"</span>, referrer);<font></font>
        base.OnActionExecuting(filterContext);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font><font style="vertical-align: inherit;">ãƒœã‚¿ãƒ³</font><font style="vertical-align: inherit;">ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ãƒªãƒ³ã‚¯ã‚’</font><font style="vertical-align: inherit;">ã‚¯ãƒªãƒƒã‚¯ã—ãŸå¾Œã«æˆ»ã‚‹å¿…è¦ãŒã‚ã‚‹ãƒšãƒ¼ã‚¸ã«é–¢ã™ã‚‹æƒ…å ±ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œ</font></font><code>TempData["referrer"] = ControllerContext.RouteData.Values["referrer"];</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã™ã€‚ç•°ãªã‚‹æ–¹æ³•ã§æ¯å›åŒã˜ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«åˆ¥ã®é–¢æ•°ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€è¤‡æ•°ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ç‰¹åˆ¥ãªå±æ€§ã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒç¾å®Ÿçš„ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¶šã„ã¦ã€ãƒ“ãƒ¥ãƒ¼</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã®</font><font style="vertical-align: inherit;">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‡¦ç†ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã®æœ¬ä½“ã§ã€</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿å­˜ã•ã‚ŒãŸæƒ…å ±ãŒå–å¾—ã•ã‚Œã€ã“ã‚Œã‚‰ã®ãƒ“ãƒ¥ãƒ¼ãŒå‘¼ã³å‡ºã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font></font><code>if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString());</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä¿å­˜ã™ã‚‹ã‹å‰Šé™¤ã™ã‚‹ã‹ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã«ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯</font><i><font style="vertical-align: inherit;">Save</font></i><font style="vertical-align: inherit;">ãŠã‚ˆã³</font><i><font style="vertical-align: inherit;">Removeã®</font></i></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å€¤</font><font style="vertical-align: inherit;">ã¨</font><font style="vertical-align: inherit;">æ¯”è¼ƒã•ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œãã‚Œã€ãƒªãƒã‚¸ãƒˆãƒª</font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ©Ÿèƒ½</font></font><code>ChangeUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font><font style="vertical-align: inherit;">ã«ã‚ˆã£ã¦å¼•ãèµ·ã“ã•ã‚Œã¾ã™</font></font><code>RemoveUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã«ã€å‰ã®ãƒšãƒ¼ã‚¸ï¼ˆãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å‘¼ã³å‡ºã—å…ƒ</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã«</font><font style="vertical-align: inherit;">æˆ»ã‚Š</font><font style="vertical-align: inherit;">ã€æ“ä½œã®æˆåŠŸã¾ãŸã¯å¤±æ•—ã«é–¢ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADO.NETã¨MySQL-ãƒªãƒã‚¸ãƒˆãƒª</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã‚ˆã†ã‚„ãDBMSã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ã™ã‚‹æ©Ÿèƒ½ã€</font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹æ©Ÿèƒ½ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã™ã‚‹æ©Ÿèƒ½ã€IDã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰è¨€èªã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹</font><font style="vertical-align: inherit;">æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™</font></font><code>Languages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã»ã¨ã‚“ã©ã®å ´åˆã€æ¨™æº–çš„ãªæ§‹ç¯‰ç‰©ãŒä½¿ç”¨ã•ã‚Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL.Dataã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹</font><font style="vertical-align: inherit;">ä½¿ç”¨ã—ã¾ã™</font></font><code>MySqlCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection( ))<font></font>
{<font></font>
    <span class="hljs-built_in">string</span> sql = <span class="hljs-string">" "</span>;
    <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
    {<font></font>
        cmd.Parameters.Add(<span class="hljs-string">" "</span>,  ).Value =  ;<font></font>
        connect.Open();<font></font>
        result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>; <span class="hljs-comment">//        (INSERT, UPDATE, DELETE)   cmd.ExecuteScalar()         SELECT</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã¯</font></font><code>MySqlDataReader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¯ã‚¨ãƒªã®çµæœã¨ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¡Œã‚’èª­ã¿å–ã‚‹ã«ã¯ï¼š</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection( ))<font></font>
{<font></font>
    <span class="hljs-built_in">string</span> sql = <span class="hljs-string">" "</span>;
    <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
    {<font></font>
        cmd.Parameters.Add(<span class="hljs-string">" "</span>,  ).Value =  ;<font></font>
        objConnect.Open();<font></font>
        <span class="hljs-keyword">while</span> (dr.Read())<font></font>
        {<span class="hljs-comment">//      </span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">Models</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserRepository.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ä½œæˆã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UsersRepository</span>
{</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">AddUser</span><span class="hljs-params">(UserClass user)</span>
    </span>{<font></font>
        user.UserID = AddUser(Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier);<font></font>
        <span class="hljs-keyword">return</span> user.UserID &gt; <span class="hljs-number">0</span>;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">AddUser</span><span class="hljs-params">(<span class="hljs-built_in">string</span> Name, <span class="hljs-keyword">int</span> LanguageID, <span class="hljs-built_in">string</span> Email, Supporter SupporterTier)</span>
    </span>{
        <span class="hljs-keyword">int</span> ID = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> sql = <span class="hljs-string">"INSERT INTO `Users` (`Loginname`, `LanguageID`, `Email`, `SupporterTier`) VALUES (@Loginname, @LanguageID, @Email, @SupporterTier)"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
            {<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"Loginname"</span>, MySqlDbType.String).Value = Name;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"LanguageID"</span>, MySqlDbType.Int32).Value = LanguageID;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"Email"</span>, MySqlDbType.String).Value = Email;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"SupporterTier"</span>, MySqlDbType.Int32).Value = SupporterTier;<font></font>
                connect.Open();<font></font>
                <span class="hljs-keyword">if</span> (cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>)<font></font>
                {<font></font>
                    sql = <span class="hljs-string">"SELECT LAST_INSERT_ID() AS ID"</span>;<font></font>
                    cmd.CommandText = sql;<font></font>
                    <span class="hljs-keyword">int</span>.TryParse(cmd.ExecuteScalar().ToString(), out ID);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> ID;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">ChangeUser</span><span class="hljs-params">(UserClass user)</span>
    </span>{
        <span class="hljs-keyword">return</span> ChangeUser(ID: user.UserID, Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier);<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">ChangeUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ID, <span class="hljs-built_in">string</span> Name, <span class="hljs-keyword">int</span> LanguageID, <span class="hljs-built_in">string</span> Email, Supporter SupporterTier)</span>
    </span>{
        <span class="hljs-keyword">bool</span> result = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (ID &gt; <span class="hljs-number">0</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
            {<font></font>
                <span class="hljs-built_in">string</span> sql = <span class="hljs-string">"UPDATE `Users` SET `Loginname`=@Loginname, `LanguageID`=@LanguageID, `Email`=@Email, `SupporterTier`=@SupporterTier WHERE UserID=@UserID"</span>;
                <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
                {<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"UserID"</span>, MySqlDbType.Int32).Value = ID;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"Loginname"</span>, MySqlDbType.String).Value = Name;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"LanguageID"</span>, MySqlDbType.Int32).Value = LanguageID;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"Email"</span>, MySqlDbType.String).Value = Email;<font></font>
                    cmd.Parameters.Add(<span class="hljs-string">"SupporterTier"</span>, MySqlDbType.Int32).Value = SupporterTier;<font></font>
                    connect.Open();<font></font>
                    result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>;<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> result;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">RemoveUser</span><span class="hljs-params">(UserClass user)</span>
    </span>{
        <span class="hljs-keyword">return</span> RemoveUser(user.UserID);<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">RemoveUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ID)</span>
    </span>{
        <span class="hljs-keyword">using</span> (MySqlConnection connect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> sql = <span class="hljs-string">"DELETE FROM `Users` WHERE `UserID`=@UserID"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(sql, connect))<font></font>
            {<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"UserID"</span>, MySqlDbType.Int32).Value = ID;<font></font>
                connect.Open();<font></font>
                <span class="hljs-keyword">return</span> cmd.ExecuteNonQuery() &gt;= <span class="hljs-number">0</span>;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> UserClass <span class="hljs-title">FetchByID</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ID)</span>
    </span>{<font></font>
        UserClass user = null;<font></font>
        <span class="hljs-keyword">using</span> (MySqlConnection objConnect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> strSQL = <span class="hljs-string">"SELECT u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID WHERE `UserID`=@UserID"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(strSQL, objConnect))<font></font>
            {<font></font>
                objConnect.Open();<font></font>
                <span class="hljs-keyword">int</span> UserID = <span class="hljs-number">0</span>, LanguageID = <span class="hljs-number">0</span>;
                <span class="hljs-built_in">string</span> Loginname = null, LanguageName= null, Email = String.Empty;<font></font>
                Supporter SupporterTier = Supporter.None;<font></font>
                DateTime? LastLoginDate = null;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"UserID"</span>, MySqlDbType.Int32).Value = ID;
                <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
                {<font></font>
                    <span class="hljs-keyword">if</span> (dr.Read())<font></font>
                    {<font></font>
                        UserID = dr.GetInt32(<span class="hljs-string">"UserID"</span>);<font></font>
                        Loginname = dr.GetString(<span class="hljs-string">"Loginname"</span>).ToString();<font></font>
                        LanguageID = dr.GetInt32(<span class="hljs-string">"LanguageID"</span>);<font></font>
                        LanguageName = dr.GetString(<span class="hljs-string">"LanguageName"</span>).ToString();
                        <span class="hljs-keyword">if</span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"Email"</span>))) Email = dr.GetString(<span class="hljs-string">"Email"</span>).ToString();
                        <span class="hljs-keyword">if</span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"LastLoginDate"</span>))) LastLoginDate = dr.GetDateTime(<span class="hljs-string">"LastLoginDate"</span>);
                        <span class="hljs-keyword">if</span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"SupporterTier"</span>))) SupporterTier = (Supporter)dr.GetInt32(<span class="hljs-string">"SupporterTier"</span>);<font></font>
                    }<font></font>
                    LanguageClass language = null;<font></font>
                    <span class="hljs-keyword">if</span> (LanguageID &gt; <span class="hljs-number">0</span>) language = <span class="hljs-keyword">new</span> LanguageClass(LanguageID: LanguageID, LanguageName: LanguageName);
                    <span class="hljs-keyword">if</span> (UserID &gt; <span class="hljs-number">0</span> &amp;&amp; language != null &amp;&amp; language.LanguageID &gt; <span class="hljs-number">0</span>) user = <span class="hljs-keyword">new</span> UserClass(UserID: UserID, Loginname: Loginname, Language: language, Email: Email, LastLoginDate: LastLoginDate, SupporterTier: (Supporter)SupporterTier);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> user;<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-comment">//       ASP.NET WebForms,             ObjectDataSource     </span>
    <span class="hljs-comment">//     ,         " "        </span>
    <span class="hljs-comment">//public IEnumerable&lt;DataRow&gt; List()</span>
    <span class="hljs-comment">//{</span>
    <span class="hljs-comment">//    using (MySqlConnection objConnect = new MySqlConnection(Base.strConnect))</span>
    <span class="hljs-comment">//    {</span>
    <span class="hljs-comment">//        string strSQL = "select * from users";</span>
    <span class="hljs-comment">//        using (MySqlCommand objCommand = new MySqlCommand(strSQL, objConnect))</span>
    <span class="hljs-comment">//        {</span>
    <span class="hljs-comment">//            objConnect.Open();</span>
    <span class="hljs-comment">//            using (MySqlDataAdapter da = new MySqlDataAdapter(objCommand))</span>
    <span class="hljs-comment">//            {</span>
    <span class="hljs-comment">//                DataTable dt = new DataTable();</span>
    <span class="hljs-comment">//                da.Fill(dt);</span>
    <span class="hljs-comment">//                return dt.AsEnumerable();</span>
    <span class="hljs-comment">//            }</span>
    <span class="hljs-comment">//        }</span>
    <span class="hljs-comment">//    }</span>
    <span class="hljs-comment">//}</span><font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;UserClass&gt; <span class="hljs-title">List</span><span class="hljs-params">(<span class="hljs-built_in">string</span> sortOrder, System.Web.Helpers.SortDirection sortDir, <span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> pagesize, out <span class="hljs-keyword">int</span> count)</span>
    </span>{<font></font>
        List&lt;UserClass&gt; users = <span class="hljs-keyword">new</span> List&lt;UserClass&gt;();
        <span class="hljs-keyword">using</span> (MySqlConnection objConnect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-comment">//    </span>
            <span class="hljs-built_in">string</span> sort = <span class="hljs-string">" ORDER BY "</span>;
            <span class="hljs-comment">//   ,               (inject)</span>
            <span class="hljs-comment">// ,  , MySQL       </span>
            <span class="hljs-comment">//    ,         (       )</span>
            <span class="hljs-comment">//        ,   </span>
            <span class="hljs-keyword">if</span> (sortOrder != null &amp;&amp; sortOrder != String.Empty)<font></font>
            {<font></font>
                sort += <span class="hljs-string">"`"</span> + sortOrder + <span class="hljs-string">"`"</span>;
                <span class="hljs-keyword">if</span> (sortDir == System.Web.Helpers.SortDirection.Descending) sort += <span class="hljs-string">" DESC"</span>;<font></font>
                sort += <span class="hljs-string">","</span>;<font></font>
            }<font></font>
            sort += <span class="hljs-string">"`UserID`"</span>; <span class="hljs-comment">//  </span>
            <span class="hljs-comment">//        ( )</span>
            <span class="hljs-built_in">string</span> limit = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">if</span> (pagesize &gt; <span class="hljs-number">0</span>)<font></font>
            {<font></font>
                <span class="hljs-keyword">int</span> start = (page - <span class="hljs-number">1</span>) * pagesize;<font></font>
                limit = <span class="hljs-built_in">string</span>.Concat(<span class="hljs-string">" LIMIT "</span>, start.ToString(), <span class="hljs-string">", "</span>, pagesize.ToString());<font></font>
            }<font></font>
            <span class="hljs-built_in">string</span> strSQL = <span class="hljs-string">"SELECT SQL_CALC_FOUND_ROWS u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName` as `Language`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID"</span> + sort + limit;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(strSQL, objConnect))<font></font>
            {<font></font>
                objConnect.Open();<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"page"</span>, MySqlDbType.Int32).Value = page;<font></font>
                cmd.Parameters.Add(<span class="hljs-string">"pagesize"</span>, MySqlDbType.Int32).Value = pagesize;
                <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
                {<font></font>
                    <span class="hljs-keyword">while</span> (dr.Read())<font></font>
                    {<font></font>
                        LanguageClass language = <span class="hljs-keyword">new</span> LanguageClass(LanguageID: dr.GetInt32(<span class="hljs-string">"LanguageID"</span>), LanguageName: dr.GetString(<span class="hljs-string">"Language"</span>).ToString());<font></font>
 <font></font>
                        users.Add(<span class="hljs-keyword">new</span> UserClass(<font></font>
                            UserID: dr.GetInt32(<span class="hljs-string">"UserID"</span>), <font></font>
                            Loginname: dr.GetString(<span class="hljs-string">"Loginname"</span>), <font></font>
                            Language: language,<font></font>
                            Email: dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"Email"</span>)) ? String.Empty : dr.GetString(<span class="hljs-string">"Email"</span>), <font></font>
                            LastLoginDate: dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"LastLoginDate"</span>)) ? (DateTime?) null : dr.GetDateTime(<span class="hljs-string">"LastLoginDate"</span>), <font></font>
                            SupporterTier: dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string">"SupporterTier"</span>)) ? (Supporter) Supporter.None : (Supporter)dr.GetInt32(<span class="hljs-string">"SupporterTier"</span>)));<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
            <span class="hljs-keyword">using</span> (MySqlCommand cmdrows = <span class="hljs-keyword">new</span> MySqlCommand(<span class="hljs-string">"SELECT FOUND_ROWS()"</span>, objConnect))<font></font>
            {<font></font>
                <span class="hljs-keyword">int</span>.TryParse(cmdrows.ExecuteScalar().ToString(), out count);<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> users;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«ã¯ã€</font></font><code>AddUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¿½åŠ ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ï¼ˆ</font></font><code>ChangeUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€å‰Šé™¤ï¼ˆ</font></font><code>RemoveUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€</font></font><code>FetchByID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è­˜åˆ¥å­ã«ã‚ˆã‚‹</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ</font><font style="vertical-align: inherit;">ï¼‰ã®</font><font style="vertical-align: inherit;">æ¤œç´¢ã€</font><font style="vertical-align: inherit;">ãŠã‚ˆã³</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’ä¸¦ã¹æ›¿ãˆã¦è¡¨ç¤ºã™ã‚‹ãŸã‚</font><font style="vertical-align: inherit;">ã®æœ€ã‚‚èˆˆå‘³æ·±ã„ãƒ¡ã‚½ãƒƒãƒ‰ãŒå«ã¾</font><font style="vertical-align: inherit;">ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">é–¢æ•°ã«ã¤ã„ã¦ã•ã‚‰ã«ã‚³ãƒ¡ãƒ³ãƒˆã—ãŸã„</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><code>DataTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ã«</font><font style="vertical-align: inherit;">ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ</font><font style="vertical-align: inherit;">ï¼‰ã‚’</font><font style="vertical-align: inherit;">è¿”ã™ä¾¡å€¤ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€ãƒ“ãƒ¥ãƒ¼å†…ã®ã‚¯ãƒ©ã‚¹ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚Šã€æ–‡å­—åˆ—å®šæ•°ã‚’ä½¿ç”¨ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œã®å€¤ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«å¼·åˆ¶ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€SQLã‚¯ã‚¨ãƒªã‚’å¤‰æ›´ã™ã‚‹ã¨ãã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹å ´æ‰€ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã‚¯ãƒ©ã‚¹è¦ç´ ã®ãƒªã‚¹ãƒˆãŒä½œæˆã•ã‚Œ</font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font></li>
<li>         <code>LIMIT</code>  SQL- <code>SELECT</code>.  ,  MySQL      ,   <code>LIMIT</code>       .   ,     ,       <code>ORDER BY</code>           . ,         SQL-,     SQL   ,       ,     .       ,      ,          :         .</li>
<li>          SQL  <code>SELECT FOUND_ROWS()</code>,          ,     <code>SELECT SQL_CALC_FOUND_ROWS</code>     <code>LIMIT</code>.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»–ã®ã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ä¸Šè¨˜ã®ã‚­ãƒ¤ãƒãƒ³ã¨ä¸€è‡´ã—ã¦ã€å®Œå…¨ã«æ™®é€šã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€</font><i><font style="vertical-align: inherit;">Models</font></i><font style="vertical-align: inherit;">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LanguageRepository.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¤ãƒ«</font><font style="vertical-align: inherit;">ï¼š</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LanguagesRepository</span>
{</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IList&lt;LanguageClass&gt; <span class="hljs-title">List</span><span class="hljs-params">()</span>
    </span>{<font></font>
        List&lt;LanguageClass&gt; languages = <span class="hljs-keyword">new</span> List&lt;LanguageClass&gt;();
        <span class="hljs-keyword">using</span> (MySqlConnection objConnect = <span class="hljs-keyword">new</span> MySqlConnection(Base.strConnect))<font></font>
        {<font></font>
            <span class="hljs-built_in">string</span> strSQL = <span class="hljs-string">"SELECT `LanguageID`, `LanguageName` as `Language` FROM `Languages` ORDER BY `LanguageName`"</span>;
            <span class="hljs-keyword">using</span> (MySqlCommand cmd = <span class="hljs-keyword">new</span> MySqlCommand(strSQL, objConnect))<font></font>
            {<font></font>
                objConnect.Open();<font></font>
                <span class="hljs-keyword">using</span> (MySqlDataReader dr = cmd.ExecuteReader())<font></font>
                {<font></font>
                    <span class="hljs-keyword">while</span> (dr.Read())<font></font>
                    {<font></font>
                        LanguageClass language = <span class="hljs-keyword">new</span> LanguageClass(LanguageID: dr.GetInt32(<span class="hljs-string">"LanguageID"</span>), LanguageName: dr.GetString(<span class="hljs-string">"Language"</span>).ToString());<font></font>
                        languages.Add(language);<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> languages;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰è¨€èªã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã€ã‚¯ãƒ©ã‚¹è¦ç´ ã®ãƒªã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹é–¢æ•°ã¯1ã¤ã ã‘</font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆè¨ˆ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã ã‘ã§ã™-ã‚¿ã‚¹ã‚¯ã¯è§£æ±ºã•ã‚Œã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">å¤šãã®å•é¡ŒãŒå¯¾å‡¦ã•ã‚Œãªã‹ã£ãŸã“ã¨ã¯æ˜ã‚‰ã‹ã§ã™ï¼šä¾å­˜æ€§æ³¨å…¥ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€ãƒ¢ãƒ¼ã‚­ãƒ³ã‚°ç”¨ãƒ„ãƒ¼ãƒ«ã€ãƒ­ãƒ¼ã‚«ãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã€‚</font><font style="vertical-align: inherit;">ç­‰ </font><font style="vertical-align: inherit;">ã„ãã¤ã‹ã®ã“ã¨ã¯ã€ç•°ãªã‚‹æ–¹æ³•ã§ã€ã¾ãŸã¯å˜ã«ã‚ˆã‚Šè‰¯ã„æ–¹æ³•ã§è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€åˆ¤æ˜ã—ãŸã€Œãƒ¬ãƒ³ã‚¬ã€ã¯ã€ASP.NET MVCãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ç†è§£ã—ã€MS SQLã§ã¯ãªã„ADO.NETã¨DBMSã§ä½œæ¥­ã™ã‚‹ã“ã¨ã¯ãã‚Œã»ã©æ€–ããªã„ã“ã¨ã§ååˆ†ã«åˆ¤æ˜ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PSãã—ã¦æœ€å¾Œã«ï¼šã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ã‚¢ãƒ‰ãƒ¬ã‚¹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ç¢ºèªã§ã</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã§</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã¦ã€ãƒ’ãƒ¼ãƒ—ã¸- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§ã®ãƒ–ãƒ­ã‚°</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¸ã®ãƒªãƒ³ã‚¯</font><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja482332/index.html">ãƒãƒ‹ã‚¢ãŒDOSã§Wi-Fiãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ç«‹ã¡ä¸Šã’ãŸæ–¹æ³•</a></li>
<li><a href="../ja482336/index.html">ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼ã¯ã€å…¬é–‹å‰ã«ã‚¤ãƒ³ã‚°ãƒ©ãƒ³ãƒ‰ä¸­å¤®éŠ€è¡Œã®è¨˜è€…ä¼šè¦‹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¾—ã¾ã—ãŸ</a></li>
<li><a href="../ja482338/index.html">Visual Studio for Macï¼šIDEã‚’ã‚­ãƒ¼ã§åˆ¶å¾¡ã™ã‚‹</a></li>
<li><a href="../ja482340/index.html">ã‚¸ãƒ¥ãƒ‹ã‚¢ã‹ã‚‰ãƒŸãƒ‰ãƒ«ï¼šãƒ‘ãƒ¼ã‚µãƒ¼</a></li>
<li><a href="../ja482344/index.html">ãƒ­ã‚·ã‚¢ã§ã®ç¤¾ä¼šçš„æ ¼ä»˜ã‘ã®å°å…¥ã«å‚™ãˆã¾ã—ã‚‡ã†</a></li>
<li><a href="../ja482348/index.html">ç–‘ã„ã‚’æŒãŸãªã„ã‚²ãƒ¼ãƒ é–‹ç™ºè€…ã®ãŸã‚ã®ãƒˆãƒãƒ­ã‚¸ãƒ¼ã¨åŒ…æ‹¬çš„ãªåˆ†æï¼šå˜ä¸€ã®3Dãƒ™ã‚¯ãƒˆãƒ«ã®åœ§ç¸®</a></li>
<li><a href="../ja482352/index.html">ç§ãŒé¢¨ã«150kã‚’ã»ã¨ã‚“ã©æŠ•ã’ãŸã¨ãã€ã¾ãŸã¯ã‚¢ãƒ‘ãƒ¼ãƒˆã«å¼·åˆ¶æ›æ°—ã‚’è¨­ç½®ã—ãŸæ­´å²</a></li>
<li><a href="../ja482354/index.html">ConfigureAwaitï¼šã‚ˆãã‚ã‚‹è³ªå•</a></li>
<li><a href="../ja482356/index.html">é€šå¸¸ã®Windowsãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦³ç‚¹ã‹ã‚‰ã€ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãªã—ã§Windows Serverã‚’ä½¿ç”¨ã™ã‚‹</a></li>
<li><a href="../ja482358/index.html">Rustã§ã®ãƒ‘ãƒ‹ãƒƒã‚¯ã®ä»•çµ„ã¿</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>