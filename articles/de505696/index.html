<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙆 👨🏾‍🏫 👩🏿‍⚖️ Erkunden versiegelter Klassen in Java 15 🚘 👩🏿 👩🏽‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir untersuchen weiterhin neue Funktionen, die in Java angezeigt werden. In früheren Zeiten haben wir uns eingehend  instanceofmit Aufzeichnungen und ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Erkunden versiegelter Klassen in Java 15</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505696/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir untersuchen weiterhin neue Funktionen, die in Java angezeigt werden. </font><font style="vertical-align: inherit;">In früheren Zeiten haben wir uns eingehend </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>  instanceof</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufzeichnungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Aufzeichnungen befasst</font></a><font style="vertical-align: inherit;"> , und heute wird das Ziel von Studienklassen sein </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der fünfzehnten Version von</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Java veröffentlicht werden sollen.</font></font></p><br>
<a name="habracut"></a><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Idee, "versiegelte" Typen in die Sprache einzuführen, wurde erstmals im Februar 2019 im Dokument </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Datenklassen und versiegelte Typen für Java"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ausführlich beschrieben </font><font style="vertical-align: inherit;">und erhielt im Juli dieses Jahres den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JEP 360</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der freundlicherweise </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Oleg Chirukhin </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">in Habré</font></a><font style="vertical-align: inherit;"> übersetzt wurde (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olegchir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Es ist erwähnenswert, dass die von Oleg übersetzte Version von JEP'a etwas veraltet war und sich von der aktuellen unterscheidet. Insbesondere in der neuen Version sind </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typen keine Typen mehr, sondern Klassen und Schnittstellen. Diese Umbenennung hängt damit zusammen, dass der Begriff „Typ“ zu überladen ist und nicht nur Klassen und Schnittstellen, sondern auch deren Ableitungen wie Arrays ( </font></font><code>Object[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>String[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) und Parametrisierung von Generika ( </font></font><code>List&lt;Integer&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>List&lt;?&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">bedeuten kann </font><font style="vertical-align: inherit;">. Weitere Informationen zu dieser Umbenennung finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Texte sind jedoch hübsch und wir gehen direkt zu unseren </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klassen. </font><font style="vertical-align: inherit;">Für Programmierer, die mit Scala und Kotlin vertraut sind, sollte diese Art von Unterricht vertraut sein. </font><font style="vertical-align: inherit;">In Java bedeutet dies genau das Gleiche wie dort: Der Modifikator </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">begrenzt den Bereich der Klassen, die von dieser Klasse geerbt werden können. </font><font style="vertical-align: inherit;">Aber in C # </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bedeutet es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etwas völlig anderes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wenn Sie also aus C # stammen, seien Sie vorsichtig: Das Analogon des Schlüsselworts </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Java ist dies </font></font><code>final</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nicht </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lass uns endlich mit den </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klassen spielen. </font><font style="vertical-align: inherit;">Schauen Sie sich aber zuerst unsere Java-Version an:</font></font></p><br>
<pre><code class="plaintext hljs">&gt; java --version<font></font>
openjdk 15-ea 2020-09-15<font></font>
OpenJDK Runtime Environment (build 15-ea+26-1287)<font></font>
OpenJDK 64-Bit Server VM (build 15-ea+26-1287, mixed mode, sharing)</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie Sie sehen können, habe ich mit dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frühen Build von</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> JDK 15 begonnen. </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klassen sind bereits darin enthalten.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns einen einfachen Code schreiben und ausführen:</font></font></p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        Shape rectangle = <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<font></font>
        Shape circle = <span class="hljs-keyword">new</span> Circle(<span class="hljs-number">3</span>);<font></font>
        System.out.println(rectangle);<font></font>
        System.out.println(circle);<font></font>
    }<font></font>
}<font></font>
<font></font>
sealed <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> </span>{<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> width, height;<font></font>
<font></font>
    Rectangle(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height) {
        <span class="hljs-keyword">this</span>.width = width;
        <span class="hljs-keyword">this</span>.height = height;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> radius;<font></font>
<font></font>
    Circle(<span class="hljs-keyword">int</span> radius) {
        <span class="hljs-keyword">this</span>.radius = radius;<font></font>
    }<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; java --enable-preview --source 15 Main.java<font></font>
Note: Main.java uses preview language features.<font></font>
Note: Recompile with -Xlint:preview for details.<font></font>
Rectangle@11e21d0e<font></font>
Circle@1dd02175</code></pre><br>
<p>     ,  ,      <code>Rectangle</code>  <code>Shape</code> <code>final</code>,     :</p><br>
<pre><code class="java hljs">…<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{<font></font>
    …<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{<font></font>
    …<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; java --enable-preview --source 15 Main.java<font></font>
Main.java:13: error: sealed, non-sealed or final modifiers expected<font></font>
class Rectangle extends Shape {<font></font>
^<font></font>
Main.java:22: error: sealed, non-sealed or final modifiers expected<font></font>
class Circle extends Shape {<font></font>
^<font></font>
…</code></pre><br>
<p> ,  <code>sealed</code>     <code>sealed</code>,  <code>non-sealed</code>,  <code>final</code>.</p><br>
<p>,     . ,  ,  ,   ?</p><br>
<pre><code class="java hljs">…<font></font>
<font></font>
sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> </span>{<font></font>
}<font></font>
<font></font>
<span class="hljs-function">record <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> implements Shape </span>{<font></font>
}<font></font>
<font></font>
<span class="hljs-function">record <span class="hljs-title">Circle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> radius)</span> implements Shape </span>{<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; java --enable-preview --source 15 Main.java<font></font>
Rectangle[width=1, height=2]<font></font>
Circle[radius=3]</code></pre><br>
<p>  .    <code>Shape</code> ,        .</p><br>
<p>     ,   <code>sealed</code>  .        :</p><br>
<pre><code class="java hljs"><span class="hljs-comment">// Main.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        Shape rectangle = <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<font></font>
        Shape circle = <span class="hljs-keyword">new</span> Circle(<span class="hljs-number">3</span>);<font></font>
        System.out.println(rectangle);<font></font>
        System.out.println(circle);<font></font>
    }<font></font>
}<font></font>
<font></font>
sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> </span>{<font></font>
}<font></font>
<font></font>
<span class="hljs-function">record <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> implements Shape </span>{<font></font>
}</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// Circle.java</span>
<span class="hljs-function">record <span class="hljs-title">Circle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> radius)</span> implements Shape </span>{<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; javac --enable-preview --release 15 Main.java Circle.java<font></font>
Circle.java:1: error: class is not allowed to extend sealed class: Shape<font></font>
record Circle(int radius) implements Shape {<font></font>
^</code></pre><br>
<p>   :     <code>sealed</code>    ,      .     ,       ? ,      ,        ,         <code>sealed</code>.      <code>permits</code>:</p><br>
<pre><code class="java hljs"><span class="hljs-comment">// Shape.java</span>
<span class="hljs-keyword">public</span> sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> <span class="hljs-title">permits</span> <span class="hljs-title">Rectangle</span>, <span class="hljs-title">Circle</span> </span>{<font></font>
}</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// Rectangle.java</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> record <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> implements Shape </span>{<font></font>
}</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// Circle.java</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> record <span class="hljs-title">Circle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> radius)</span> implements Shape </span>{<font></font>
}</code></pre><br>
<p>   .   <code>permits</code>     ,     <code>Shape</code>.</p><br>
<p>   - . ,   <code>permits</code> ,  «»  :</p><br>
<pre><code class="java hljs"><span class="hljs-comment">// Shape.java</span>
<span class="hljs-keyword">public</span> sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> <span class="hljs-title">permits</span> <span class="hljs-title">Rectangle</span> </span>{<font></font>
}</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// Rectangle.java</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> record <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> </span>{<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; javac --enable-preview --release 15 Shape.java Rectangle.java<font></font>
Shape.java:1: error: invalid permits clause<font></font>
public sealed interface Shape permits Rectangle {<font></font>
                                      ^<font></font>
  (subclass Rectangle must extend sealed class)</code></pre><br>
<p>   ,     ,    .</p><br>
<p>     <code>permits</code> ,     ?</p><br>
<pre><code class="java hljs"><span class="hljs-comment">// Shape.java</span>
<span class="hljs-keyword">public</span> sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> <span class="hljs-title">permits</span> <span class="hljs-title">RectangleShape</span>, <span class="hljs-title">Rectangle</span> </span>{<font></font>
}</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// RectangleShape.java</span>
<span class="hljs-keyword">public</span> sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">RectangleShape</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> <span class="hljs-title">permits</span> <span class="hljs-title">Rectangle</span> </span>{<font></font>
}</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// Rectangle.java</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> record <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> implements RectangleShape </span>{<font></font>
}</code></pre><br>
<p>,     <code>Rectangle</code>   <code>RectangleShape</code>,  <code>RectangleShape</code> –  <code>Shape</code>.     <code>Shape permits</code>  <code>Rectangle</code>.   :</p><br>
<pre><code class="plaintext hljs">&gt; javac --enable-preview --release 15 Shape.java RectangleShape.java Rectangle.java<font></font>
Shape.java:1: error: invalid permits clause<font></font>
public sealed interface Shape permits RectangleShape, Rectangle {<font></font>
                                                      ^<font></font>
  (subclass Rectangle must extend sealed class)</code></pre><br>
<p>  -    ,   :    <code>permits</code> ,       .</p><br>
<p>,  ,    <code>permits</code> -   ?</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> <span class="hljs-title">permits</span> <span class="hljs-title">Integer</span>, <span class="hljs-title">Rectangle</span>, <span class="hljs-title">Circle</span> </span>{<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; javac --enable-preview --release 15 Shape.java Rectangle.java Circle.java<font></font>
Shape.java:1: error: class is not allowed to extend sealed class: Shape<font></font>
public sealed interface Shape permits Integer, Rectangle, Circle {<font></font>
                                      ^</code></pre><br>
<p>      : Java    <code>permits</code>      .  <code>java.lang.Integer</code>    <code>java.base</code>,    .</p><br>
<p>   <code>sealed</code>   ?</p><br>
<pre><code class="java hljs"><span class="hljs-comment">// Shape.java</span>
<span class="hljs-keyword">public</span> sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> </span>{<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; javac --enable-preview --release 15 Shape.java<font></font>
Shape.java:1: error: sealed class must have subclasses<font></font>
public sealed interface Shape {<font></font>
              ^</code></pre><br>
<p>   .   <code>sealed</code>,        ,      <code>sealed</code>? (         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"> </a>,       <code>final</code> ,  <code>sealed</code>)</p><br>
<p>      . Java        .    ,          ,    . :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        Rectangle rect = <span class="hljs-keyword">new</span> Rectangle();<font></font>
        System.out.println(rect <span class="hljs-keyword">instanceof</span> Runnable);<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> </span>{<font></font>
}</code></pre><br>
<p>    ,    ,    <code>Rectangle</code>    <code>Runnable</code>,   <code>Rectangle</code>   <code>final</code>:</p><br>
<pre><code class="plaintext hljs">&gt; java Main.java<font></font>
Main.java:4: error: incompatible types: Rectangle cannot be converted to Runnable<font></font>
        System.out.println(rect instanceof Runnable);<font></font>
                           ^</code></pre><br>
<p>  :    ,    ,   <code>sealed</code> ?  :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        Shape rect = <span class="hljs-keyword">new</span> Rectangle();<font></font>
        System.out.println(rect <span class="hljs-keyword">instanceof</span> Runnable);<font></font>
    }<font></font>
}<font></font>
<font></font>
sealed <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> <span class="hljs-title">permits</span> <span class="hljs-title">Rectangle</span> </span>{<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{<font></font>
}</code></pre><br>
<p>    <code>rect</code>       <code>Runnable</code>,    <code>Shape</code> ,   <code>Shape</code>,  <code>Rectangle</code>   <code>Runnable</code>.    ,   ?</p><br>
<pre><code class="plaintext hljs">&gt; java --enable-preview --source 15 Main.java<font></font>
false</code></pre><br>
<p> ,  .    ,         .         OpenJDK,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"> </a>,             .   ,   .</p><br>
<p>    ?    ?      sealed ?</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        Shape shape = <span class="hljs-keyword">new</span> Shape() {};<font></font>
    }<font></font>
}<font></font>
<font></font>
sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> </span>{<font></font>
}<font></font>
<font></font>
<span class="hljs-function">record <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> implements Shape </span>{<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; java --enable-preview --source 15 Main.java<font></font>
Main.java:3: error: local classes must not extend sealed classes<font></font>
        Shape shape = new Shape() {};<font></font>
                                  ^</code></pre><br>
<p>,       ,      .  ,  ,     :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        Shape shape = () -&gt; {};<font></font>
    }<font></font>
}<font></font>
<font></font>
sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function">record <span class="hljs-title">Rectangle</span><span class="hljs-params">(<span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> implements Shape </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span> </span>{<font></font>
    }<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; java --enable-preview --source 15 Main.java<font></font>
Main.java:3: error: incompatible types: Shape is not a functional interface<font></font>
        Shape shape = () -&gt; {};<font></font>
                      ^</code></pre><br>
<p>   .   sealed      .       <code>@FunctionalInterface</code>,   :</p><br>
<pre><code class="java hljs">…<font></font>
<font></font>
<span class="hljs-meta">@FunctionalInterface</span>
sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span>;<font></font>
}</code></pre><br>
<pre><code class="plaintext hljs">&gt; java --enable-preview --source 15 Main.java<font></font>
Main.java:6: error: Unexpected @FunctionalInterface annotation<font></font>
@FunctionalInterface<font></font>
^<font></font>
  Shape is not a functional interface</code></pre><br>
<h3></h3><br>
<p>            .      ,     ,    . «»     Java 15, ,   .   <code>sealed</code>     ,      .</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diese Funktion wird jedoch noch spektakulärer, wenn eine vollwertige implementiert wird </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><code>-   switch</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und der Compiler, der mit der </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hierarchie arbeitet, kann Vollständigkeitsprüfungen durchführen. </font><font style="vertical-align: inherit;">Dies hilft dem Entwickler, den Code noch sicherer zu machen.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetzt befinden sich die </font></font><code>sealed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klassen für eine Weile im Vorschaumodus, aber mit der nächsten LTS-Version von Java 17 werden sie wahrscheinlich stabil. </font><font style="vertical-align: inherit;">Dies ist eine gute Motivation für ein Upgrade auf die neueste Version von Java.</font></font></p><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie über Java-Nachrichten lesen möchten, empfehle ich Ihnen, meinen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegrammkanal zu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abonnieren </font><font style="vertical-align: inherit;">.</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de505682/index.html">Quanteneffekte kommen in den Makrokosmos</a></li>
<li><a href="../de505684/index.html">Die Schwierigkeit muss irgendwo liegen</a></li>
<li><a href="../de505686/index.html">VR Helmauswahl</a></li>
<li><a href="../de505690/index.html">Die Zusammenfassung interessanter Materialien für den mobilen Entwickler # 347 (vom 1. bis 7. Juni)</a></li>
<li><a href="../de505692/index.html">Schwarzer Schwan in IT-Projekten. CEO Perspektive auf Entwicklungsfragen</a></li>
<li><a href="../de505698/index.html">7 Websites für das Website-Design. Was auszusuchen?</a></li>
<li><a href="../de505700/index.html">Ich werde Java-Programmierer interviewen. Eine Reihe von Fragen für jedes Level</a></li>
<li><a href="../de505702/index.html">Unbeholfener (fast wörtlicher) Kopierschutz</a></li>
<li><a href="../de505704/index.html">Arbeiten Sie an einer Fernbedienung - einem vergessenen Alten</a></li>
<li><a href="../de505706/index.html">FOSS News Nr. 19 - eine Überprüfung der kostenlosen und Open Source-Nachrichten für den 1. bis 7. Juni 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>