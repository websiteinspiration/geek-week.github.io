<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôåÔ∏è üë©üèª‚Äçüîß üèØ Crie suas fun√ß√µes no SIL üö£üèΩ üëè ‚õπüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° a todos! 
 
 Neste artigo, quero dizer como criar minha fun√ß√£o no SIL.
 
 Introdu√ß√£o
 SIL significa Simple Issue Language, foi criado pelos desenv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Crie suas fun√ß√µes no SIL</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492670/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° a todos! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, quero dizer como criar minha fun√ß√£o no SIL.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introdu√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SIL significa Simple Issue Language, foi criado pelos desenvolvedores do cPrime para automatizar a√ß√µes manuais no Atlassian Jira e Confluence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A principal vantagem do SIL √© que o SIL cont√©m fun√ß√µes que n√£o requerem conhecimento das APIs do Atlassian Jira ou Atlassian Confluence para us√°-las. </font><font style="vertical-align: inherit;">Isso reduz significativamente o limite de entrada do SIL e torna o c√≥digo do programa SIL menor em volume que o c√≥digo Java ou Groovy semelhante.</font></font><br>
<a name="habracut"></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, voc√™ deseja selecionar tickets do Jira mediante solicita√ß√£o, para poder executar algumas a√ß√µes neles. </font><font style="vertical-align: inherit;">Para fazer isso, em Java ou Groovy, voc√™ teria que escrever uma d√∫zia de linhas de c√≥digo. </font><font style="vertical-align: inherit;">No SIL, esta √© uma linha:</font></font><br>
<br>
<pre><code class="plaintext hljs">selectIssues(" JQL ");</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, em Java ou Groovy, voc√™ precisaria garantir a compatibilidade do c√≥digo no Jira 7 e Jira 8. No SIL, voc√™ n√£o precisa pensar em compatibilidade. </font><font style="vertical-align: inherit;">O SelectIssues funcionar√° em todas as vers√µes do Jira suportadas pelo SIL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode encontrar mais informa√ß√µes sobre o SIL </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas e se eu precisar fazer algo assim, por que n√£o h√° fun√ß√µes no SIL? </font><font style="vertical-align: inherit;">Por exemplo, preciso obter dados do plug-in Table Grid Next Generation ou gerar um arquivo PDF usando o exportador de PDF para o plugin Jira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, voc√™ tem duas op√ß√µes:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conector SIL Groovy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - esse plug-in permite escrever c√≥digo usando a API Jira Java em Java ou Groovy e chamar esse c√≥digo a partir de um script SIL.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escreva seu plugin Jira que adicionar√° suas fun√ß√µes ao SIL e, em seguida, use suas fun√ß√µes nos scripts SIL </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, focaremos em como escrever seu plugin Jira para estender as fun√ß√µes do SIL. </font><font style="vertical-align: inherit;">Para repetir as etapas deste artigo, voc√™ precisar√° do Atlassian SDK e git.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina o arqu√©tipo do maven</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um plug-in que estender√° o SIL deve conter l√≥gica que adicionar√° suas fun√ß√µes ao SIL. </font><font style="vertical-align: inherit;">Para n√£o adicionar essa l√≥gica ao plugin todas as vezes, mas para me concentrar apenas nas fun√ß√µes de escrita, criei o arqu√©tipo do maven que criar√° tudo o que voc√™ precisa no novo plugin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, clone o arqu√©tipo do reposit√≥rio:</font></font><br>
<br>
<pre><code class="plaintext hljs">git clone https://alex1mmm@bitbucket.org/alex1mmm/sil-extension-archetype.git --branch v1 --single-branch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pasta sil-extenstion-archetype ser√° criada. </font><font style="vertical-align: inherit;">Vamos entrar nisso:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd sil-extension-archetype</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora instale o arqu√©tipo no seu reposit√≥rio maven local:</font></font><br>
<br>
<pre><code class="plaintext hljs">atlas-mvn install</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie um plugin</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√° para a pasta acima e crie um novo plugin</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ..<font></font>
atlas-mvn archetype:generate -DarchetypeCatalog=local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ receber√° perguntas padr√£o ao criar um projeto atrav√©s do maven. </font><font style="vertical-align: inherit;">Eu dou minhas respostas para as perguntas. </font><font style="vertical-align: inherit;">Voc√™ pode mud√°-los.</font></font><br>
<br>
<pre><code class="plaintext hljs">Choose archetype:<font></font>
<font></font>
1: local -&gt; com.cprime.jira.sil.extension:sil-extension-archetype (This is the com.cprime.jira.sil.extension:sil-extension plugin for Atlassian JIRA.)<font></font>
Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): : <font></font>
<font></font>
Define value for property 'groupId': ru.matveev.alexey.sil.extension<font></font>
Define value for property 'artifactId': sil-extension<font></font>
Define value for property 'version' 1.0-SNAPSHOT: : <font></font>
Define value for property 'package' ru.matveev.alexey.sil.extension: : <font></font>
<font></font>
Confirm properties configuration:<font></font>
groupId: ru.matveev.alexey.sil.extension<font></font>
artifactId: sil-extension<font></font>
version: 1.0-SNAPSHOT<font></font>
package: ru.matveev.alexey.sil.extension<font></font>
<font></font>
 Y: : Y</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Depois disso, o plugin ser√° criado.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin de teste</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√° para a pasta criada (no meu caso, √© sil-extension) e execute o Jira:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd sil-extension<font></font>
atlas-run&lt;/code&gt;<font></font>
 Jira   <font></font>
&lt;code&gt;http://localhost:2990/jira/plugins/servlet/silmanager?autoSelectTree=sil.scripts</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ ver√° a tela do SIL Manager. </font><font style="vertical-align: inherit;">Selecione a op√ß√£o Novo arquivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/cy/jc/bccyjco81b4evwsq240zjeyqrnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie um arquivo test.sil com o seguinte conte√∫do:</font></font><br>
<br>
<pre><code class="plaintext hljs">runnerLog(SayHello("Alexey"));<font></font>
string[] res = SayHello2("Alexey", "Matveev");<font></font>
runnerLog(res[0]);<font></font>
runnerLog(res[1]);<font></font>
res = SayHello3("Alexey", "Matveev");<font></font>
runnerLog(res["param1"]);<font></font>
runnerLog(res["param2"]);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tela no Jira ter√° a seguinte apar√™ncia: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wu/e3/hx/wue3hxccvjobth5xl9dnrhevec4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso plug-in adicionou tr√™s fun√ß√µes: SayHello, SayHello2, SayHello3. </font><font style="vertical-align: inherit;">Test.sil verifica se as fun√ß√µes foram adicionadas ao SIL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Execute test.sil clicando no bot√£o Executar. </font><font style="vertical-align: inherit;">Na guia Console, voc√™ ver√° o seguinte texto:</font></font><br>
<br>
<pre><code class="plaintext hljs">Hello Alexey<font></font>
Hello Alexey<font></font>
Hello Matveev<font></font>
Hello Alexey<font></font>
Hello Matveev<font></font>
Done.</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ viu esse texto, nossas fun√ß√µes foram adicionadas com sucesso ao SIL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos falar sobre o que precisa ser alterado no plugin para criar nossa pr√≥pria fun√ß√£o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie uma classe Java para nossa fun√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada fun√ß√£o que voc√™ deseja adicionar ao SIL deve ter sua pr√≥pria classe. </font><font style="vertical-align: inherit;">Esta classe deve ser descendente da classe AbstractSILRoutine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para entender o que precisa ser adicionado a uma nova classe, vejamos os exemplos dispon√≠veis.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SayHello.java</font></font></h3><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SayHello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractSILRoutine</span>&lt;<span class="hljs-title">MutableString</span>&gt; </span>{ 
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SILType[][] types = {{ TypeInst.STRING }};<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SayHello</span><span class="hljs-params">(ClassLoader classLoader, String name)</span> </span>{ 
    <span class="hljs-keyword">super</span>(classLoader, name, types);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-meta">@Override</span> 
  <span class="hljs-function"><span class="hljs-keyword">public</span> SILType&lt;MutableString&gt; <span class="hljs-title">getReturnType</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> TypeInst.STRING; }<font></font>
<font></font>
  <span class="hljs-meta">@Override</span> 
  <span class="hljs-function"><span class="hljs-keyword">protected</span> SILValue&lt;MutableString&gt; <span class="hljs-title">runRoutine</span><span class="hljs-params">(SILContext silContext,                                   List&lt;SILValue&lt;?&gt;&gt; list)</span> </span>{ <font></font>
    SILValue param = list.get(<span class="hljs-number">0</span>); 
    <span class="hljs-keyword">return</span> SILValueFactory.string( <span class="hljs-string">"Hello "</span> + param.toStringValue());<font></font>
 }<font></font>
  <span class="hljs-meta">@Override</span> 
  <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getParams</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"(name)"</span>; }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeira linha:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SILType[][] types = {{ TypeInst.STRING }};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta linha define os tipos e o n√∫mero de par√¢metros que ser√£o passados ‚Äã‚Äãpara sua fun√ß√£o. </font><font style="vertical-align: inherit;">A fun√ß√£o no SIL se parece com isso:</font></font><br>
<br>
<pre><code class="plaintext hljs">mymethod(myparameter);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, {{TypeInst.STRING}} significa que teremos um par√¢metro e seu tipo ser√° String. </font><font style="vertical-align: inherit;">Se voc√™ deseja passar dois par√¢metros do tipo String, precisar√° alterar a string assim:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SILType[][] types = {{ TypeInst.STRING, TypeInst.STRING }};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No SIL, voc√™ pode chamar sua fun√ß√£o assim:</font></font><br>
<br>
<pre><code class="plaintext hljs">mymethod(myparameter1, myparameter2);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se sua fun√ß√£o pode aceitar um ou dois par√¢metros. </font><font style="vertical-align: inherit;">Esse termo ter√° a seguinte apar√™ncia:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SILType[][] types = {{ TypeInst.STRING},  <font></font>
                                                          {TypeInst.STRING, TypeInst.STRING }};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida vem:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SayHello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractSILRoutine</span>&lt;<span class="hljs-title">MutableString</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Herdamos nossa classe de AbstractSILRoutine, o que significa que nossa classe retornar√° um par√¢metro do tipo String. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais longe:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SayHello</span><span class="hljs-params">(ClassLoader classLoader, String name)</span> </span>{ 
  <span class="hljs-keyword">super</span>(classLoader, name, types);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© o construtor. </font><font style="vertical-align: inherit;">Voc√™ provavelmente n√£o ter√° que mudar nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais longe:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Override</span> 
<span class="hljs-function"><span class="hljs-keyword">public</span> SILType&lt;MutableString&gt; <span class="hljs-title">getReturnType</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> TypeInst.STRING; }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, determinamos o tipo do par√¢metro retornado. </font><font style="vertical-align: inherit;">No nosso caso, √© String. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais longe:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Override</span> 
<span class="hljs-function"><span class="hljs-keyword">protected</span> SILValue&lt;MutableString&gt; <span class="hljs-title">runRoutine</span><span class="hljs-params">(SILContext silContext, List&lt;SILValue&lt;?&gt;&gt; list)</span> </span>{ <font></font>
SILValue param = list.get(<span class="hljs-number">0</span>); 
<span class="hljs-keyword">return</span> SILValueFactory.string( <span class="hljs-string">"Hello "</span> + param.toStringValue());<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© o principal ponto de entrada para sua fun√ß√£o. </font><font style="vertical-align: inherit;">Quando voc√™ executa uma fun√ß√£o no SIL, voc√™ chega aqui. </font><font style="vertical-align: inherit;">Toda a l√≥gica est√° aqui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa fun√ß√£o usa dois par√¢metros: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
silContext - permite obter as vari√°veis ‚Äã‚ÄãJira e SIL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, seu script SIL funciona como uma fun√ß√£o de postagem e voc√™ deseja receber um ticket sob o qual o script √© executado:</font></font><br>
<br>
<pre><code class="java hljs">Issue issue = (Issue) silContext.getAllMetaInformation().get(<span class="hljs-string">"issue"</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lista - permite obter os valores dos par√¢metros passados ‚Äã‚Äãpara a fun√ß√£o SIL.</font></font><br>
<br>
<pre><code class="java hljs">SILValue param = list.get(<span class="hljs-number">0</span>); </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linha:</font></font><br>
<br>
<pre><code class="java hljs">SILValueFactory.string( <span class="hljs-string">"Hello "</span> + param.toStringValue());</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
retorna o valor </font><font style="vertical-align: inherit;">Voc√™ deve retornar valores que o SIL entende, portanto, use SILValueFactory para gerar os valores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais longe:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Override</span> 
<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getParams</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"(name)"</span>; }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso define o tipo de fun√ß√£o no SIL Manager. </font><font style="vertical-align: inherit;">Ao come√ßar a digitar no gerenciador do SIL, voc√™ recebe uma dica das fun√ß√µes dispon√≠veis. </font><font style="vertical-align: inherit;">No nosso caso, voc√™ ver√°:</font></font><br>
<br>
<pre><code class="java hljs">yourmethod(name)</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicione nossa classe ao mecanismo SIL</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ criou sua turma. </font><font style="vertical-align: inherit;">Agora voc√™ precisa conscientizar o SIL sobre sua fun√ß√£o. </font><font style="vertical-align: inherit;">Isso √© feito no arquivo ESLauncher.java. </font><font style="vertical-align: inherit;">Este arquivo cont√©m estas linhas:</font></font><br>
<br>
<pre><code class="java hljs">RoutineRegistry.register(<span class="hljs-keyword">new</span> SayHello( classLoader,<span class="hljs-string">"SayHello"</span>)); </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta linha diz que estamos adicionando a classe SayHello ao SIL sob o nome SayHello. </font><font style="vertical-align: inherit;">O nome e a fun√ß√£o da classe podem n√£o corresponder. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, adicione a seguinte linha:</font></font><br>
<br>
<pre><code class="java hljs">RoutineRegistry.unregister(<span class="hljs-string">"SayHello"</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Altere o SayHello para o nome da sua fun√ß√£o. </font><font style="vertical-align: inherit;">Esta linha descarregar√° sua fun√ß√£o do SIL se voc√™ remover o plugin do Jira.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais sobre o SIL</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na classe SayHello2, retornamos uma lista.</font></font><br>
<br>
<pre><code class="java hljs">SILValue param1 = list.get(<span class="hljs-number">0</span>); <font></font>
SILValue param2 = list.get(<span class="hljs-number">1</span>); <font></font>
List&lt;String&gt; res = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;(); <font></font>
res.add(<span class="hljs-string">"Hello "</span> + param1.toStringValue()); <font></font>
res.add(<span class="hljs-string">"Hello "</span> + param2.toStringValue()); 
<span class="hljs-keyword">return</span> SILValueFactory.stringArray(res);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que isso funcione, voc√™ tamb√©m precisa alterar o valor de retorno para TypeInst.STRING_ARR e herdar de AbstractSILRoutine com KeyableArraySILObject. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No SIL, voc√™ chama SayHello2 assim:</font></font><br>
<br>
<pre><code class="plaintext hljs">string[] res = SayHello2("Alexey", "Matveev");<font></font>
runnerLog(res[0]);<font></font>
runnerLog(res[1]);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No SayHello3, retornamos o Mapa:</font></font><br>
<br>
<pre><code class="java hljs">SILValue param1 = list.get(<span class="hljs-number">0</span>); <font></font>
SILValue param2 = list.get(<span class="hljs-number">1</span>); <font></font>
Map&lt;String, String&gt; res = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(); <font></font>
res.put(<span class="hljs-string">"param1"</span>,<span class="hljs-string">"Hello "</span> + param1.toStringValue()); <font></font>
res.put(<span class="hljs-string">"param2"</span>,<span class="hljs-string">"Hello "</span> + param2.toStringValue()); 
<span class="hljs-keyword">return</span> SILValueFactory.stringArray(res);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No SIL, voc√™ pode chamar SayHello3 assim:</font></font><br>
<br>
<pre><code class="plaintext hljs">res = SayHello3("Alexey", "Matveev");<font></font>
runnerLog(res["param1"]);<font></font>
runnerLog(res["param2"]);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, obtemos os elementos da matriz n√£o pelo √≠ndice, mas pelas chaves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ observar o c√≥digo em Java, nos dois casos, trabalharemos com KeyableArraySILObject. </font><font style="vertical-align: inherit;">O fato √© que na lista e no mapa SIL s√£o implementados pela classe KeyableArraySILObject. </font><font style="vertical-align: inherit;">Essa. </font><font style="vertical-align: inherit;">qualquer matriz no SIL pode ser acessada por √≠ndice ou por chave.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passamos uma matriz como par√¢metro</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos retornar uma matriz da fun√ß√£o SIL. </font><font style="vertical-align: inherit;">Agora vamos ver como passar uma matriz como par√¢metro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo ficar√° assim:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> SILValue&lt;MutableString&gt; <span class="hljs-title">runRoutine</span><span class="hljs-params">(SILContext silContext, List&lt;SILValue&lt;?&gt;&gt; list)</span> </span>{<font></font>
    GenericArraySILObject rowsToUpdate =  (GenericArraySILObject) list.get(<span class="hljs-number">0</span>).getObject();<font></font>
    Map&lt;String, <span class="hljs-keyword">int</span>[]&gt; keys = rowsToUpdate.getKeysMapping()<font></font>
......<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, obtemos o objeto da classe GenericArraySILObject a partir do par√¢metro e, em seguida, obtemos o mapa a partir dele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No SIL, voc√™ pode transmitir uma matriz como esta:</font></font><br>
<br>
<pre><code class="plaintext hljs">string[] arr;<font></font>
arr["key1"] = "value1";<font></font>
arr["key2"] = "value2";<font></font>
yourmethod(arr);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso conclui este artigo. </font><font style="vertical-align: inherit;">Espero que voc√™ tenha adquirido conhecimento suficiente para escrever sua fun√ß√£o no SIL.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt492658/index.html">Eu fui a um controle remoto - lancei um podcast: o que ler para iniciantes - 5 livros comprovados</a></li>
<li><a href="../pt492660/index.html">O mundo inteiro contra o coronav√≠rus. Hist√≥rias da Intel</a></li>
<li><a href="../pt492662/index.html">Como eu transmiti pela primeira vez uma palestra universit√°ria</a></li>
<li><a href="../pt492666/index.html">Maltego Parte 4. VK, Instagram, LinkedIN e outras criaturas fant√°sticas</a></li>
<li><a href="../pt492668/index.html">Teste de vacina COVID-19 com in√≠cio na segunda-feira</a></li>
<li><a href="../pt492672/index.html">Como mudar efetivamente para o trabalho remoto?</a></li>
<li><a href="../pt492676/index.html">Mem√≥ria em n√∫cleos magn√©ticos no foguete Saturn 5</a></li>
<li><a href="../pt492678/index.html">Desenvolvimento do primeiro projeto na plataforma do Microsoft Dynamics 365 For Finance and Operations</a></li>
<li><a href="../pt492682/index.html">Testosterona, por que √© para homens e como manter a for√ßa na terceira idade</a></li>
<li><a href="../pt492684/index.html">Servidor proxy gratuito para empresas com autentica√ß√£o de dom√≠nio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>