<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—“ï¸ â¸ï¸ ğŸ§Ÿ Bug terkenal dan bagaimana menghindarinya pada contoh ClickHouse ğŸ‘¨ğŸ¼â€ğŸ¤ ğŸ¶ ğŸ¤³ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jika Anda menulis kode, bersiaplah untuk masalah. Mereka pasti akan, dan mereka harus diharapkan dari semua sisi: dari kode dan kompiler Anda, dari si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bug terkenal dan bagaimana menghindarinya pada contoh ClickHouse</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/497334/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda menulis kode, bersiaplah untuk masalah. </font><font style="vertical-align: inherit;">Mereka pasti akan, dan mereka harus diharapkan dari semua sisi: dari kode dan kompiler Anda, dari sistem operasi dan perangkat keras, dan pengguna kadang-kadang memunculkan "kejutan". </font><font style="vertical-align: inherit;">Jika Anda mengubah skala cluster menjadi skala kosmik, maka perkirakan bug "space". </font><font style="vertical-align: inherit;">Terutama ketika datang ke data dari lalu lintas internet.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ooBAQIe0KlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexey Milovidov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o6CuFl2Q</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) akan berbicara tentang masalah yang paling konyol, mengecilkan hati dan putus asa dari pengalamannya dalam mengembangkan dan mendukung ClickHouse. </font><font style="vertical-align: inherit;">Mari kita lihat bagaimana mereka harus didebug dan langkah-langkah apa yang harus diambil pengembang dari awal, sehingga akan ada lebih sedikit masalah.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug terkenal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menulis beberapa kode, segera bersiap untuk masalah. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesalahan dalam kode.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mereka akan diminta. Tetapi katakanlah Anda menulis kode yang sempurna, dikompilasi, tetapi bug akan muncul </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di kompiler</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan kode tidak akan berfungsi dengan benar. Kami memperbaiki kompiler, semuanya dikompilasi - jalankan. Tapi (secara tak terduga) semuanya bekerja dengan tidak benar, karena </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada bug di kernel OS juga</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika tidak ada bug di OS, mau tidak mau, mereka akan berada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di perangkat keras</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sekalipun Anda menulis kode sempurna yang berfungsi sempurna pada perangkat keras sempurna, Anda masih akan menemui masalah, misalnya, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kesalahan konfigurasi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tampaknya Anda melakukan semuanya dengan benar, tetapi seseorang membuat kesalahan dalam file konfigurasi, dan semuanya tidak berfungsi lagi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika semua bug telah diperbaiki, pengguna akan menyelesaikannya, karena mereka terus-menerus menggunakan kode Anda "salah". </font><font style="vertical-align: inherit;">Tetapi masalahnya jelas bukan pada pengguna, tetapi dalam kode: Anda </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menulis sesuatu yang sulit digunakan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat bug ini dengan beberapa contoh.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug konfigurasi</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penghapusan data</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kasus pertama dari latihan. Untungnya, bukan milikku dan bukan Yandex, jangan khawatir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendahuluan terlebih dahulu. Arsitektur cluster pengurang peta (seperti Hadoop) terdiri dari beberapa server data (data node) yang menyimpan data, dan satu atau lebih server master yang mengetahui lokasi semua data di server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node data mengetahui alamat master dan terhubung ke sana. Wizard memantau di mana dan data apa yang harus ditemukan, dan memberikan perintah yang berbeda ke simpul data: "Unduh data X, Anda harus memiliki data Y, dan hapus data Z". Apa yang bisa salah?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika file konfigurasi baru diunggah ke semua node data, mereka keliru terhubung ke master dari cluster lain, dan bukan ke mereka sendiri. </font><font style="vertical-align: inherit;">Master melihat data tentang mana data node diinformasikan, memutuskan bahwa data itu tidak benar dan harus dihapus. </font><font style="vertical-align: inherit;">Masalahnya diperhatikan ketika setengah dari data dihapus.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/s8/ii/6i/s8ii6igrww4j3zdjhrfyyqrl2nk.png" width="350"></div><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug paling epik adalah bug yang menyebabkan penghapusan data yang tidak disengaja.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menghindari ini sangat sederhana. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan hapus data</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Misalnya, sisihkan di direktori terpisah atau hapus dengan penundaan. Pertama, kami mentransfer sehingga mereka tidak terlihat oleh pengguna, dan jika dia menemukan ada sesuatu yang hilang dalam beberapa hari, kami akan mengembalikannya kembali. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan hapus data yang tidak terduga jika penyebabnya tidak diketahui</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Secara terprogram membatasi dimulainya penghapusan data yang tidak dikenal: tak terduga, dengan nama aneh, atau jika jumlahnya terlalu banyak. Administrator akan melihat bahwa server tidak memulai dan menulis beberapa pesan, dan akan mengerti. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika program melakukan tindakan destruktif - isolasi pengujian dan produksi di tingkat jaringan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(iptables). Misalnya, menghapus file atau mengirim e-mail adalah tindakan yang merusak karena akan "menghabiskan" perhatian seseorang. Beri ambang batas pada mereka: seratus surat dapat dikirim, dan untuk seribu tuliskan kotak centang keamanan, yang ditetapkan sebelum sesuatu yang buruk terjadi. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Contoh kedua sudah dari latihan saya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satu perusahaan yang baik entah bagaimana memiliki kluster ClickHouse yang aneh. Keanehannya adalah bahwa replika tidak disinkronkan. Ketika server dimulai ulang, itu tidak dimulai dan muncul pesan bahwa semua data salah: â€œAda banyak data yang tidak terduga, saya tidak akan memulai. Kita harus mengatur benderanya </font></font><code>force_restore_data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mencari tahu. â€</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada yang bisa menemukannya di perusahaan - mereka hanya memasang bendera. Pada saat yang sama, setengah dari data menghilang di suatu tempat, menghasilkan grafik dengan kesenjangan. Para pengembang menoleh ke saya, saya pikir sesuatu yang menarik sedang terjadi, dan memutuskan untuk menyelidiki. Ketika pagi datang beberapa jam kemudian dan burung-burung mulai bernyanyi di luar jendela, saya menyadari bahwa saya tidak mengerti apa-apa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server ClickHouse menggunakan layanan ZooKeeper untuk koordinasi. ClickHouse menyimpan data, dan ZooKeeper menentukan server data apa yang harus diletakkan: menyimpan metadata tentang data apa yang seharusnya menjadi replika. ZooKeeper juga merupakan kluster - ia mereplikasi menurut algoritma konsensus terdistribusi yang sangat baik, dengan konsistensi yang ketat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai aturan, ZooKeeper adalah 3 mesin, kadang-kadang 5. Semua mesin terdaftar dalam konfigurasi ClickHouse sekaligus, koneksi dibuat dengan mesin acak, berinteraksi dengannya, dan server ini mereplikasi semua permintaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang terjadi? Perusahaan memiliki tiga server ZooKeeper. Tetapi mereka tidak bekerja sebagai </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cluster tiga node</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi sebagai </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiga node independen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tiga cluster dari satu node. One ClickHouse terhubung ke satu server dan menulis data. Replika ingin mengunduh data ini, tetapi tidak dapat ditemukan. Saat memulai ulang, server terhubung ke ZooKeeper lain: server ini melihat bahwa data yang digunakannya berlebihan, harus ditunda di suatu tempat. Dia tidak menghapusnya, tetapi mentransfernya ke direktori terpisah - dalam data ClickHouse tidak begitu mudah dihapus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memutuskan untuk memperbaiki konfigurasi ZooKeeper. </font><font style="vertical-align: inherit;">Saya mengganti nama semua data dan membuat permintaan untuk </font></font><code>ATTACH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bagian data dari direktori </font></font><code>detached/unexpeted_*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, semua data dipulihkan, replika disinkronkan, tidak ada kerugian, grafik terus menerus. </font><font style="vertical-align: inherit;">Perusahaan puas, bersyukur, seolah-olah mereka sudah lupa bagaimana semuanya berjalan buruk sebelumnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah bug konfigurasi sederhana. </font><font style="vertical-align: inherit;">Lebih banyak bug akan ada dalam kode.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug dalam kode</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menulis kode dalam C ++. </font><font style="vertical-align: inherit;">Ini artinya kita sudah punya masalah.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh berikutnya adalah bug nyata dari produksi pada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cluster Yandex.Metrica</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (2015) - konsekuensi dari kode C ++. </font><font style="vertical-align: inherit;">Bugnya adalah bahwa kadang-kadang pengguna alih-alih menanggapi permintaan menerima pesan kesalahan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œChecksum tidak cocok, data rusakâ€ - jumlah cek tidak cocok, data rusak - menakutkan!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"LRUCache menjadi tidak konsisten. </font><font style="vertical-align: inherit;">Pasti ada bug di dalamnya â€- cache menjadi tidak konsisten, kemungkinan besar bug di dalamnya.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode yang kami tulis menginformasikan bahwa ada bug di sana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Checksum tidak cocok, data rusak</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ." </font><font style="vertical-align: inherit;">Periksa jumlah blok data terkompresi diperiksa sebelum didekompresi. </font><font style="vertical-align: inherit;">Biasanya kesalahan ini muncul ketika data rusak pada sistem file. </font><font style="vertical-align: inherit;">Karena berbagai alasan, beberapa file berubah menjadi sampah ketika server dihidupkan ulang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi di sini ada kasus lain: Saya membaca file secara manual, jumlah cek cocok, tidak ada kesalahan. </font><font style="vertical-align: inherit;">Setelah muncul, kesalahan tersebut direproduksi secara stabil atas permintaan berulang. </font><font style="vertical-align: inherit;">Ketika server restart, kesalahan menghilang untuk sementara waktu, dan kemudian muncul kembali dengan stabil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin masalahnya ada di RAM? </font><font style="vertical-align: inherit;">Situasi tipikal adalah ketika bit mengalahkannya. </font><font style="vertical-align: inherit;">Saya mencari di </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dmesg</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(kern.log), tetapi tidak ada pengecualian pemeriksaan mesin - mereka biasanya menulis ketika ada sesuatu yang salah dengan RAM. Jika server telah mengalahkan RAM, maka tidak hanya program saya akan bekerja secara tidak benar, tetapi semua yang lain akan menghasilkan kesalahan secara acak. Namun, tidak ada manifestasi kesalahan lainnya. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"LRUCache menjadi tidak konsisten. Pasti ada bug di dalamnya. "</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ini adalah kesalahan yang jelas dalam kode, dan kami menulis dalam C ++ - mungkin akses memori? Tetapi tes di bawah AddressSanitizer, ThreadSanitizer, MemorySanitizer, UndefinedBehaviorSanitizer di CI tidak menunjukkan apa pun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin beberapa kasus uji tidak tercakup? Saya mengumpulkan server dengan AddressSanitizer, menjalankannya pada produksi - tidak menangkap apa pun. Untuk beberapa waktu, kesalahan dihapus dengan mengatur ulang beberapa cache mark (cache sachet).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu aturan pemrograman mengatakan: jika tidak jelas apa bug itu, perhatikan dengan cermat kode, berharap menemukan sesuatu di sana. Saya melakukannya, menemukan bug, memperbaikinya - itu tidak membantu. Saya melihat tempat lain dalam kode - ada juga bug. Diperbaiki, sekali lagi tidak membantu. Saya memperbaikinya lagi, kode menjadi lebih baik, tetapi kesalahan masih belum hilang! </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebab.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mencoba menemukan pola berdasarkan server, berdasarkan waktu, berdasarkan sifat beban - tidak ada yang membantu. Kemudian dia menyadari bahwa masalahnya hanya muncul pada salah satu kelompok, dan tidak pernah pada yang lain. Kesalahan tidak direproduksi begitu sering, tetapi selalu muncul di satu cluster setelah restart, dan semuanya bersih di yang lain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata alasannya adalah bahwa pada cluster "masalah" mereka menggunakan fitur baru - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kamus cache</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mereka menggunakan </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengalokasi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memori yang ditulis tangan </font><strong><font style="vertical-align: inherit;">ArenaWithFreeLists</font></strong><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Kami tidak hanya menulis dalam C ++, tetapi juga melihat semacam pengalokasi khusus - kami mengalami masalah dua kali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ArenaWithFreeLists adalah bagian dari memori di mana memori dialokasikan secara berurutan dalam ukuran yang dapat dibagi dua: 16, 32, 64 byte. </font><font style="vertical-align: inherit;">Jika memori dibebaskan, maka mereka membentuk daftar blok FreeLists yang terhubung secara tunggal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat kodenya.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArenaWithFreeLists</span>
{</span>
    Block * free_lists[<span class="hljs-number">16</span>] {};
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">sizeToPreviousPowerOfTwo</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span> size)</span>
    </span>{
        <span class="hljs-keyword">return</span> _bit_scan_reverse(size - <span class="hljs-number">1</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">char</span> * <span class="hljs-title">alloc</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span> size)</span>
    </span>{
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> list_idx = findFreeListIndex(size);<font></font>
        free_lists[list_idx] -&gt;...<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini menggunakan fungsi </font></font><code>_bit_scan_reverse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">garis bawah di awal.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada aturan yang tidak tertulis: "Jika suatu fungsi memiliki satu garis bawah pada awalnya, baca dokumentasi di atasnya sekali, dan jika dua, baca dua kali."</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mendengarkan dan membaca dokumentasinya: â€œint _bit_scan_reverse (int a). Atur dst ke indeks set bit tertinggi dalam integer 32-bit a. Jika tidak ada bit yang diatur dalam maka dst tidak </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terdefinisi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . " Kami sepertinya menemukan masalah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam C ++, situasi ini dianggap mustahil untuk kompiler. Kompiler dapat menggunakan perilaku tidak terdefinisi, ini "ketidakmungkinan", sebagai asumsi untuk mengoptimalkan kode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kompiler tidak melakukan kesalahan - ia dengan jujur â€‹â€‹menghasilkan instruksi perakitan </font></font><code>bsr %edi, %eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tetapi, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika operandnya nol, instruksi tersebut memiliki </font></font></strong><code><strong>bsr</strong></code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perilaku yang tidak ditentukan bukan pada level C ++, tetapi pada level CPU.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jika register sumber nol, maka register tujuan tidak berubah: ada beberapa sampah pada input, sampah ini juga akan tetap pada output.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasilnya tergantung pada tempat kompiler meletakkan instruksi ini. </font><font style="vertical-align: inherit;">Terkadang fungsi dengan instruksi ini sebaris, kadang tidak. </font><font style="vertical-align: inherit;">Dalam kasus kedua akan ada sesuatu seperti kode ini:</font></font><br>
<br>
<pre><code class="cpp hljs">bsrl %edi, %eax<font></font>
retq</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian saya melihat contoh kode serupa dalam biner saya gunakan </font></font><code>objdump</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lq/6k/4f/lq6k4fg0lwpm2nhwhxbyauyjt2c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menurut hasil, saya melihat bahwa kadang-kadang register sumber dan register tujuan sama. </font><font style="vertical-align: inherit;">Jika ada nol, maka hasilnya juga akan menjadi nol - semuanya baik-baik saja. </font><font style="vertical-align: inherit;">Tetapi kadang-kadang register berbeda, dan hasilnya akan menjadi sampah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana bug ini memanifestasikan dirinya?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menggunakan sampah sebagai indeks dalam array FreeLists. </font><font style="vertical-align: inherit;">Alih-alih array, kami pergi ke beberapa alamat yang jauh dan mendapatkan akses memori.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami beruntung, hampir semua alamat terdekat diisi dengan data dari cache - kami merusak cache. </font><font style="vertical-align: inherit;">Cache berisi offset file.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membaca file di offset yang salah. </font><font style="vertical-align: inherit;">Dari offset yang salah, kami mendapatkan jumlah cek. </font><font style="vertical-align: inherit;">Tetapi tidak ada check-sum, tetapi sesuatu yang lain - check-sum ini tidak akan bertepatan dengan data berikut.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mendapatkan kesalahan "Checksum tidak cocok, data rusak".</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untungnya, bukan data yang rusak, tetapi hanya cache di RAM. </font><font style="vertical-align: inherit;">Kami segera diberitahu tentang kesalahan tersebut, karena kami memeriksa jumlah data. </font><font style="vertical-align: inherit;">Kesalahan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diperbaiki</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada 27 Desember 2015 dan pergi untuk merayakannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, kode yang salah setidaknya bisa diperbaiki. </font><font style="vertical-align: inherit;">Tetapi bagaimana cara memperbaiki bug di perangkat keras?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serangga dalam besi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini bahkan bukan bug, tetapi hukum fisik - efek yang tak terhindarkan. Menurut hukum fisika, zat besi tidak dapat dihindari adalah kereta. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tulis non-atom ke RAID</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Misalnya, kami membuat RAID1. Terdiri dari dua hard drive. Ini berarti bahwa satu server adalah sistem terdistribusi: data ditulis ke satu hard drive dan ke yang lain. Tetapi bagaimana jika data ditulis ke satu disk dan daya hilang saat merekam ke disk kedua? Data pada array RAID1 tidak akan konsisten. Kami tidak akan dapat memahami data mana yang benar, karena kami akan membaca satu byte atau yang lainnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat mengatasinya dengan menempatkan log. Sebagai contoh, di ZFS masalah ini terpecahkan, tetapi lebih lanjut tentang itu nanti. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit busuk pada HDD dan SSD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Bit pada hard drive dan SSD bisa menjadi buruk begitu saja. SSD modern, terutama yang memiliki sel multi-level, dirancang untuk memastikan bahwa sel akan terus memburuk. Kode koreksi kesalahan membantu, tetapi kadang-kadang sel memburuk begitu banyak sehingga bahkan ini tidak menyelamatkan. Kesalahan yang tidak terdeteksi diperoleh. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit membalik RAM</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tapi bagaimana dengan ECC?). Dalam RAM di server, bit juga rusak. Ini juga memiliki kode koreksi kesalahan. Ketika kesalahan terjadi, mereka biasanya terlihat dari pesan di log kernel Linux di dmesg. Ketika ada banyak kesalahan, kita akan melihat sesuatu seperti: "N juta kesalahan dengan memori telah diperbaiki." Tetapi bit individual tidak akan diperhatikan, dan pasti sesuatu akan buggy. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit membalik pada level CPU dan jaringan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ada kesalahan di tingkat CPU, dalam cache CPU dan, tentu saja, ketika mengirimkan data melalui jaringan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana kesalahan besi biasanya terwujud? Tiket " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Znode cacat mencegah ClickHouse memulai</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">datang ke GitHub </font><font style="vertical-align: inherit;">- data di simpul ZooKeeper rusak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di ZooKeeper, kami biasanya menulis beberapa metadata dalam teks biasa. Ada sesuatu yang salah dengannya - " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replika</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ditulis sangat aneh. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8_/gk/zk/8_gkzkxlb1dzwhiph0saer-0d50.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jarang terjadi bahwa karena bug dalam kode, perubahan sedikit pun. Tentu saja, kita dapat menulis kode seperti itu: kita mengambil filter Bloom, mengubah bit di alamat tertentu, menghitung alamat secara tidak benar, mengubah bit yang salah, itu jatuh pada beberapa data. Itu dia, sekarang di ClickHouse itu bukan " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">replika"</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tapi " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repli </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " dan di dalamnya semua data salah. Tetapi biasanya, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perubahan dalam satu bit adalah gejala masalah besi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin Anda tahu contoh bitquatting. </font><font style="vertical-align: inherit;">Artyom Dinaburg </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melakukan percobaan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ada domain di Internet yang memiliki banyak lalu lintas, meskipun pengguna tidak pergi ke domain ini sendiri. </font><font style="vertical-align: inherit;">Misalnya, domain semacam itu FB-CDN.com adalah Facebook CDN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artyom mendaftarkan domain serupa (dan banyak lainnya), tetapi berubah sedikit. </font><font style="vertical-align: inherit;">Misalnya, FA-CDN.com, bukan FB-CDN.com. </font><font style="vertical-align: inherit;">Domain tidak dipublikasikan di mana pun, tetapi lalu lintas datang ke sana. </font><font style="vertical-align: inherit;">Kadang-kadang host FB-CDN ditulis dalam header HTTP, dan permintaan pergi ke host lain karena kesalahan dalam RAM pada perangkat pengguna. </font><font style="vertical-align: inherit;">RAM dengan koreksi kesalahan tidak selalu membantu. </font><font style="vertical-align: inherit;">Kadang-kadang bahkan mengganggu dan menyebabkan kerentanan (baca tentang Rowhammer, ECCploit, RAMBleed).</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan: selalu periksa-jumlah data sendiri.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat menulis ke sistem file, periksa jumlah tanpa gagal. </font><font style="vertical-align: inherit;">Saat mentransmisikan melalui jaringan, periksa juga ringkasannya - jangan berharap bahwa ada jumlah pemeriksaan di sana.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lebih banyak bug! ..</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metrik Cluster Produksi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pengguna dalam menanggapi permintaan terkadang mendapatkan pengecualian: "Checksum tidak cocok: data rusak" - jumlah cek tidak benar, data rusak. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jy/lb/wz/jylbwzqxrbk-g3hgygq4bktgdr8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pesan kesalahan menampilkan data terperinci: jumlah cek yang diharapkan, jumlah cek apa yang sebenarnya ada dalam data ini, ukuran blok tempat kami memeriksa jumlah cek dan konteks pengecualian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kami menerima paket melalui jaringan dari beberapa server, pengecualian muncul - itu tampak akrab. </font><font style="vertical-align: inherit;">Mungkin lagi melewati ingatan, kondisi balapan, atau yang lainnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengecualian ini muncul pada 2015. Bug telah diperbaiki, tidak lagi muncul. Pada Februari 2019, dia tiba-tiba muncul lagi. Pada saat ini saya berada di salah satu konferensi, kolega saya menangani masalah tersebut. Kesalahan direproduksi beberapa kali sehari di antara 1000 server dengan ClickHouse: tidak mungkin untuk mengumpulkan statistik di satu server, kemudian di yang lain. Pada saat yang sama, tidak ada rilis baru saat ini. Itu tidak berhasil dan menyelesaikan masalah, tetapi setelah beberapa hari kesalahan itu sendiri hilang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mereka lupa tentang kesalahan itu, dan pada 15 Mei 2019, itu berulang. Kami terus berurusan dengannya. Hal pertama yang saya lakukan adalah melihat semua log dan grafik yang tersedia. Dia mempelajarinya sepanjang hari, tidak mengerti apa-apa, tidak menemukan pola. Jika masalah tidak dapat direproduksi, satu-satunya pilihan adalah mengumpulkan semua kasus, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cari pola</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan kecanduan. </font><font style="vertical-align: inherit;">Mungkin kernel Linux tidak bekerja dengan benar dengan prosesor, menyimpan atau memuat register yang salah.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hipotesis dan pola</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7 dari 9 server dengan E5-2683 v4 gagal. Tetapi dari kesalahan cenderung, hanya sekitar setengah dari E5-2683 v4 adalah hipotesis kosong. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesalahan biasanya tidak berulang</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selain cluster mtauxyz, di mana memang ada data terkorupsi (data buruk pada disk). Ini adalah kasus lain, kami menolak hipotesis. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesalahan tidak tergantung pada kernel Linux</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - diperiksa pada server yang berbeda, tidak menemukan apa pun. Tidak ada yang menarik di kern.log, </font></font><code>machine check exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak ada </font><font style="vertical-align: inherit;">pesan </font><font style="vertical-align: inherit;">. Dalam grafik jaringan, termasuk retransmitter, CPU, IO, Network, tidak ada yang menarik. Semua adapter jaringan pada server tempat kesalahan terjadi dan tidak muncul adalah sama. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada pola</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Apa yang harus dilakukan? Terus mencari pola. Usaha kedua. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya melihat server uptime:</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uptime tinggi, server bekerja dengan stabil</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , segfault dan sesuatu seperti itu tidak. Saya selalu bersukacita ketika saya melihat bahwa program crash dengan segfault - setidaknya itu crash. Lebih buruk lagi, ketika ada kesalahan, itu merusak sesuatu, tetapi tidak ada yang memperhatikannya. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesalahan dikelompokkan berdasarkan hari</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan terjadi dalam beberapa hari. Dalam 2 hari, lebih banyak muncul, dalam beberapa kurang, sekali lagi lebih - tidak mungkin untuk secara akurat menentukan waktu terjadinya kesalahan. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa kesalahan cocok dengan paket dan jumlah cek yang kami harapkan.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sebagian besar kesalahan hanya memiliki dua opsi paket. Saya beruntung karena dalam pesan kesalahan kami menambahkan nilai dari jumlah cek, yang membantu menyusun statistik. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada pola server</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tempat kami membaca data dari. Ukuran blok terkompresi yang kami periksa jumlahnya kurang dari satu kilobyte. Tampak pada ukuran paket di HEX. Ini tidak berguna bagi saya - representasi biner dari ukuran paket dan jumlah cek tidak terlihat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak memperbaiki kesalahan - saya lagi mencari pola. Upaya ketiga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk beberapa alasan, kesalahan hanya muncul </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada salah satu cluster</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pada replika ketiga di Vladimir DC (kami suka memanggil pusat data dengan nama kota). Pada bulan Februari 2019, kesalahan juga muncul di Vladimirs DC, tetapi pada versi ClickHouse yang berbeda. Ini adalah argumen lain yang menentang hipotesis bahwa kita menulis kode yang salah. Kami sudah menulis ulang tiga kali dari Februari hingga Mei - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kesalahannya mungkin tidak ada dalam kode</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua kesalahan saat membaca paket melalui jaringan -</font></font><code>while receiving packet from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Paket di mana kesalahan terjadi tergantung pada struktur permintaan. </font><font style="vertical-align: inherit;">Untuk permintaan yang berbeda dalam struktur, kesalahan pada jumlah cek berbeda. </font><font style="vertical-align: inherit;">Tetapi dalam permintaan di mana kesalahan pada jumlah cek yang sama, konstanta berbeda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua permintaan dengan kesalahan, kecuali satu, adalah </font></font><code>GLOBAL JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Tetapi untuk perbandingan, ada satu permintaan sederhana yang tidak biasa, dan ukuran blok terkompresi untuk itu hanya 75 byte.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(ReceiveTimestamp) <span class="hljs-keyword">FROM</span> tracking_events_all 
<span class="hljs-keyword">WHERE</span> APIKey = <span class="hljs-number">1111</span> <span class="hljs-keyword">AND</span> (OperatingSystem <span class="hljs-keyword">IN</span> (<span class="hljs-string">'android'</span>, <span class="hljs-string">'ios'</span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menolak hipotesis pengaruh </font></font><code>GLOBAL JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang paling menarik adalah bahwa server yang terkena </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dikelompokkan ke dalam rentang dengan nama mereka</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<code>mtxxxlog01-{39..44 57..58 64 68..71 73..74 76}-3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya lelah dan putus asa, mulai mencari pola yang sepenuhnya delusi. </font><font style="vertical-align: inherit;">Ada baiknya saya tidak bisa men-debug kode menggunakan numerologi. </font><font style="vertical-align: inherit;">Tapi masih ada petunjuk.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grup server bermasalah sama dengan pada bulan Februari.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server bermasalah terletak di bagian tertentu dari pusat data. </font><font style="vertical-align: inherit;">Di DC Vladimir ada garis yang disebut - bagian yang berbeda: VLA-02, VLA-03, VLA-04. </font><font style="vertical-align: inherit;">Kesalahan jelas dikelompokkan: dalam beberapa antrian itu baik (VLA-02), dalam masalah lain (VLA-03, VLA-04).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengetik debugging</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hanya tinggal debug menggunakan metode "tombak". </font><font style="vertical-align: inherit;">Ini berarti membentuk hipotesis "Apa yang terjadi jika Anda mencoba melakukannya?" </font><font style="vertical-align: inherit;">dan mengumpulkan data. </font><font style="vertical-align: inherit;">Misalnya, saya menemukan </font></font><code>query_log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kueri sederhana dengan kesalahan </font><font style="vertical-align: inherit;">pada tabel </font><font style="vertical-align: inherit;">yang ukuran paketnya </font></font><code>size of compressed block</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sangat kecil (= 107). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cs/zz/fd/cszzfdvfkob2rhon1-n_xfnqtn4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menerima permintaan itu, menyalinnya dan menjalankannya secara manual menggunakan clickhouse-lokal.</font></font><br>
<br>
<pre><code class="sql hljs">strace -f -e trace=network -s 1000 -x \<font></font>
clickhouse-local <span class="hljs-comment">--query "</span>
    <span class="hljs-keyword">SELECT</span> uniqIf(DeviceIDHash, SessionType = <span class="hljs-number">0</span>)
    <span class="hljs-keyword">FROM</span> remote(<span class="hljs-string">'127.0.0.{2,3}'</span>, mobile.generic_events)
    <span class="hljs-keyword">WHERE</span> StartDate = <span class="hljs-string">'2019-02-07'</span> <span class="hljs-keyword">AND</span> APIKey <span class="hljs-keyword">IN</span> (<span class="hljs-number">616988</span>,<span class="hljs-number">711663</span>,<span class="hljs-number">507671</span>,<span class="hljs-number">835591</span>,<span class="hljs-number">262098</span>,<span class="hljs-number">159700</span>,<span class="hljs-number">635121</span>,<span class="hljs-number">509222</span>)
        <span class="hljs-keyword">AND</span> EventType = <span class="hljs-number">1</span> <span class="hljs-keyword">WITH</span> TOTALS<span class="hljs-string">" --config config.xml</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan bantuan strace saya menerima snapshot (dump) blok melalui jaringan - paket yang sama persis yang diterima ketika permintaan ini dieksekusi, dan saya bisa mempelajarinya. Anda dapat menggunakan tcpdump untuk ini, tetapi tidak nyaman: sulit untuk mengisolasi permintaan spesifik dari lalu lintas produksi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan menggunakan strace, Anda dapat melacak server ClickHouse itu sendiri. Tetapi server ini berfungsi dalam produksi, jika saya melakukan ini saya akan mendapatkan berbagai informasi yang tidak dapat dipahami. Oleh karena itu, saya meluncurkan program terpisah yang mengeksekusi tepat satu permintaan. Sudah untuk program ini saya menjalankan strace dan mendapatkan apa yang ditransmisikan melalui jaringan. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permintaan dieksekusi tanpa kesalahan - kesalahan tidak direproduksi</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika direproduksi, masalah akan teratasi. Oleh karena itu, saya menyalin paket ke file teks dan secara manual mulai menguraikan protokol.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f5/0y/-8/f50y-8qvloj4brnns-nvgydpbsa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jumlah cek sama dengan yang diharapkan. </font><font style="vertical-align: inherit;">Ini persis paket di mana kadang-kadang, di waktu lain, dalam permintaan lain, kesalahan terjadi. </font><font style="vertical-align: inherit;">Namun sejauh ini tidak ada kesalahan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menulis sebuah program sederhana yang mengambil paket dan memeriksa jumlah cek ketika mengganti satu bit dalam setiap byte. </font><font style="vertical-align: inherit;">Program melakukan bit flip pada setiap posisi yang memungkinkan dan membaca jumlah cek. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3m/fn/wr/3mfnwrp1udvm_ecrw0lnpcyoz0o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memulai program dan menemukan bahwa jika Anda mengubah nilai bit, Anda mendapatkan jumlah check-broken yang persis sama, yang mana ada keluhan</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah perangkat keras</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika ada kesalahan dalam perangkat lunak (misalnya, mengemudi melalui memori), flip bit tunggal tidak mungkin. </font><font style="vertical-align: inherit;">Karena itu, sebuah hipotesis baru muncul - masalahnya ada di kelenjar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seseorang dapat menutup tutup laptop dan berkata: "Masalahnya bukan di pihak kita, tetapi di perangkat keras, kita tidak melakukan ini." </font><font style="vertical-align: inherit;">Tapi tidak, mari kita coba memahami di mana masalahnya: di RAM, di hard drive, di prosesor, di kartu jaringan atau di RAM kartu jaringan di peralatan jaringan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana cara melokalkan masalah perangkat keras?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah muncul dan menghilang pada tanggal-tanggal tertentu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server yang terkena dikelompokkan dengan nama mereka: </font></font><code>mtxxxlog01-{39..44 57..58 64 68..71 73..74 76}-3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grup server bermasalah sama dengan Februari.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server bermasalah hanya dalam antrian tertentu dari pusat data.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada pertanyaan untuk insinyur jaringan - data berdetak pada switch jaringan. Ternyata insinyur jaringan bertukar switch untuk orang lain tepat pada tanggal tersebut. Setelah sebuah pertanyaan, mereka menggantinya dengan yang sebelumnya dan masalahnya hilang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalahnya teratasi, tetapi masih ada pertanyaan (tidak lagi untuk insinyur). </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa ECC (memori koreksi kesalahan) tidak membantu switch jaringan?</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Karena beberapa bit flip dapat saling mengimbangi - Anda mendapatkan kesalahan yang tidak terdeteksi. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa TCP tidak memeriksa jumlah membantu?</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mereka lemah. Jika hanya satu bit telah berubah dalam data, maka jumlah pemeriksaan TCP akan selalu melihat perubahan. Jika dua bit telah berubah, maka perubahan itu mungkin tidak terdeteksi - mereka membatalkan satu sama lain.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hanya satu bit yang berubah dalam paket kami, tetapi kesalahannya tidak terlihat. Itu karena 2 bit berubah di segmen TCP: mereka menghitung jumlah cek dari itu, itu bertepatan. Tetapi dalam satu segmen TCP lebih dari satu paket aplikasi kita berada. Dan untuk salah satu dari mereka, kami sudah mempertimbangkan jumlah cek kami. Hanya satu bit yang berubah dalam paket ini. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa jumlah pemeriksaan Ethernet tidak membantu - apakah mereka lebih kuat dari TCP? </font></font></strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jumlah Periksa Ethernet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">periksa-rangkum data sehingga mereka tidak rusak selama transmisi melalui satu segmen (saya bisa salah dengan terminologi, saya bukan insinyur jaringan). </font><font style="vertical-align: inherit;">Peralatan jaringan meneruskan paket-paket ini dan dapat meneruskan sejumlah data selama penerusan. </font><font style="vertical-align: inherit;">Oleh karena itu, jumlah cek hanya dihitung ulang. </font><font style="vertical-align: inherit;">Kami memeriksa - pada kabel paket tidak berubah. </font><font style="vertical-align: inherit;">Tetapi jika mereka mengalahkan pada switch jaringan itu sendiri, itu akan menghitung ulang jumlah cek (akan berbeda), dan meneruskan paket lebih lanjut.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada yang akan menyelamatkan Anda - cek jumlah Anda sendiri. </font><font style="vertical-align: inherit;">Jangan berharap seseorang melakukan ini untuk Anda.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk blok data, jumlah cek 128-bit dipertimbangkan (kerja keras ini untuk berjaga-jaga). </font><font style="vertical-align: inherit;">Kami dengan benar memberi tahu pengguna tentang kesalahan tersebut. </font><font style="vertical-align: inherit;">Data ditransmisikan melalui jaringan, itu rusak, tapi kami tidak merekamnya di mana saja - semua data kami dalam urutan, Anda tidak bisa khawatir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data yang disimpan di ClickHouse tetap konsisten. </font><font style="vertical-align: inherit;">Gunakan jumlah cek di ClickHouse. </font><font style="vertical-align: inherit;">Kami sangat menyukai jumlah cek sehingga kami segera mempertimbangkan tiga opsi:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk blok data terkompresi saat menulis ke file, ke jaringan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemeriksaan total adalah jumlah data terkompresi untuk verifikasi rekonsiliasi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemeriksaan total adalah jumlah data yang tidak terkompresi untuk verifikasi rekonsiliasi.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada bug dalam algoritma kompresi data, ini adalah kasus yang diketahui. </font><font style="vertical-align: inherit;">Oleh karena itu, ketika data direplikasi, kami juga mempertimbangkan jumlah cek total data terkompresi dan jumlah total data yang tidak terkompresi.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan takut untuk menghitung jumlah cek, mereka tidak memperlambat.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentu saja, itu tergantung pada yang mana dan bagaimana cara menghitungnya. </font><font style="vertical-align: inherit;">Ada nuansa, tetapi pastikan untuk mempertimbangkan jumlah cek. </font><font style="vertical-align: inherit;">Misalnya, jika Anda menghitung dari data yang dikompresi, maka akan ada lebih sedikit data, mereka tidak akan melambat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pesan kesalahan yang ditingkatkan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana menjelaskan kepada pengguna ketika ia menerima pesan kesalahan sedemikian rupa sehingga ini merupakan masalah perangkat keras? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t4/f6/rj/t4f6rj1mtuo38kojydfgddfh2nc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika jumlah cek tidak cocok, sebelum mengirim pengecualian, saya mencoba mengubah setiap bit - untuk jaga-jaga. Jika jumlah cek konvergen ketika berubah dan satu bit diubah, maka masalahnya kemungkinan besar adalah perangkat keras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kita dapat mendeteksi kesalahan ini, dan jika itu berubah ketika satu bit diubah, mengapa tidak memperbaikinya? Kita dapat melakukan ini, tetapi jika kita memperbaiki kesalahan setiap saat, pengguna tidak akan tahu bahwa peralatan tersebut bermasalah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kami mengetahui bahwa ada masalah di sakelar, orang-orang dari departemen lain mulai melaporkan: â€œDan kami memiliki satu kesalahan penulisan pada Mongo! Dan ada sesuatu yang sampai kepada kita di PostgreSQL! â€ Ini bagus, tetapi lebih baik melaporkan masalah sebelumnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kami merilis rilis diagnostik baru, pengguna pertama yang bekerja menulis satu minggu kemudian: "Inilah pesannya - apa masalahnya?" </font><font style="vertical-align: inherit;">Sayangnya, dia tidak membacanya. </font><font style="vertical-align: inherit;">Tetapi saya membaca dan menyarankan dengan probabilitas 99% bahwa jika kesalahan muncul pada satu server, maka masalahnya adalah pada perangkat keras. </font><font style="vertical-align: inherit;">Saya meninggalkan persentase yang tersisa jika saya salah menulis kode - ini terjadi. </font><font style="vertical-align: inherit;">Akibatnya, pengguna mengganti SSD, dan masalahnya hilang.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Delirium" dalam data</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah yang menarik dan tak terduga ini membuat saya khawatir. Kami memiliki data Yandex.Metrica. JSON sederhana ditulis ke database di salah satu kolom - parameter pengguna dari kode JavaScript penghitung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya membuat semacam permintaan dan server ClickHouse hancur dengan segfault. Dari jejak tumpukan, saya menyadari apa masalahnya - komitmen baru dari kontributor eksternal kami dari negara lain. Komit yang diperbaiki, segfault menghilang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menjalankan permintaan yang sama: </font></font><code>SELECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di ClickHouse, untuk mendapatkan JSON, tapi sekali lagi, omong kosong, semuanya bekerja lambat. Saya mendapatkan JSON, dan ini 10 MB. Saya menampilkannya dan terlihat lebih penuh perhatian: </font></font><code>{"jserrs": cannot find property of object undefind...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan kemudian satu megabyte kode biner terjatuh.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nt/ab/1g/ntab1gtbj8eialtctjq4nu-ucdi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada pemikiran bahwa ini sekali lagi merupakan bagian dari ingatan atau kondisi ras. </font><font style="vertical-align: inherit;">Banyak data biner yang buruk, bisa berisi apa saja. </font><font style="vertical-align: inherit;">Jika demikian, sekarang saya akan menemukan kata sandi dan kunci pribadi di sana. </font><font style="vertical-align: inherit;">Tetapi saya tidak menemukan apa-apa, jadi saya langsung menolak hipotesis itu. </font><font style="vertical-align: inherit;">Mungkin ini adalah bug di program saya di server ClickHouse? </font><font style="vertical-align: inherit;">Mungkin dalam program yang menulis (ini juga ditulis dalam C ++) - tiba-tiba dia secara tidak sengaja memasukkan memori dump-nya ke ClickHouse? </font><font style="vertical-align: inherit;">Di neraka ini, saya mulai memperhatikan surat-surat itu dan menyadari bahwa itu tidak sesederhana itu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jalur petunjuk</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sampah yang sama dicatat pada dua kelompok, terpisah satu sama lain. </font><font style="vertical-align: inherit;">Data ini sampah, tetapi valid UTF-8. </font><font style="vertical-align: inherit;">UTF-8 ini memiliki beberapa URL aneh, nama font, dan banyak huruf "I" berturut-turut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang istimewa tentang si kecil Cyrillic "I"? </font><font style="vertical-align: inherit;">Tidak, ini bukan Yandex. </font><font style="vertical-align: inherit;">Faktanya adalah bahwa dalam pengkodean Windows 1251 itu adalah karakter ke-255. </font><font style="vertical-align: inherit;">Dan di server Linux kami, tidak ada yang menggunakan pengkodean Windows 1251. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata ini adalah dump browser: kode JavaScript dari penghitung metrik mengumpulkan kesalahan JavaScript. </font><font style="vertical-align: inherit;">Ternyata, jawabannya sederhana - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semuanya berasal dari pengguna</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari sini juga, kesimpulan bisa ditarik.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug dari seluruh Internet</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex.Metrica mengumpulkan lalu lintas dari 1 miliar perangkat di Internet: browser di PC, ponsel, tablet. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sampah akan datang tak terhindarkan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ada bug di perangkat pengguna, di mana-mana RAM tidak dapat diandalkan dan perangkat keras yang terlalu panas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basis data menyimpan lebih dari 30 triliun baris (tampilan halaman). Jika Anda menganalisis data dari tabel ini, Anda dapat menemukan apa pun di sana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena itu, cukup menyaring sampah ini sebelum menulis ke basis data. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak perlu menulis sampah ke database - dia tidak menyukainya.</font></font></b><br>
<br>
<blockquote> HighLoad++   ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> 133 </a>   ),       -  ,   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">++</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PHP Russia 2020 Online</a>. <br>
<br>
   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Badoo</a>, <b> PHP Russia 2020 Online  </b>. PHP Russia 2020 Online  13 ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>.<br>
<br>
          â€” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>,     . </blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id497324/index.html">"Seperti apel mata ..." atau buat sistem keamanan sederhana berdasarkan mikrokontroler (Canny atau Arduino) dan Raspberry PI</a></li>
<li><a href="../id497326/index.html">Konektivitas SSH yang lebih aman dengan DNSSEC</a></li>
<li><a href="../id497328/index.html">Cara mudah belajar bahasa (apa saja)</a></li>
<li><a href="../id497330/index.html">Chrome Desktop Jarak Jauh. Dukungan jarak jauh</a></li>
<li><a href="../id497332/index.html">Houston kita punya masalah. Kegagalan Desain Sistem</a></li>
<li><a href="../id497336/index.html">Merek komputer tahun 90-an, bagian 3, final</a></li>
<li><a href="../id497338/index.html">Apa yang terjadi dengan transportasi minggu lalu - krisis sedang berkembang</a></li>
<li><a href="../id497340/index.html">COVID-19: cara berhenti membaca berita dan mulai menganalisis data</a></li>
<li><a href="../id497342/index.html">Browser waspada terhadap permintaan API: membangun komunikasi aman antara front-end dan back-end</a></li>
<li><a href="../id497346/index.html">Percepat numpy, scikit, dan panda 100 kali dengan Rust dan LLVM: wawancara dengan pengembang Weld</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>