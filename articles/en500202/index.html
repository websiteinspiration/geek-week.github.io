<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚙 🍰 🐻 Modeling a meander inverted-F antenna is easy 👩🏾‍🤝‍👨🏼 🔦 📙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Welcome, this article is about modeling the Meander inverted-F antenna (MIFA) in Ansys HFSS. Step-by-step instructions for designing an antenna. Make ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modeling a meander inverted-F antenna is easy</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500202/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welcome, this article is about modeling the Meander inverted-F antenna (MIFA) in Ansys HFSS. </font><font style="vertical-align: inherit;">Step-by-step instructions for designing an antenna. </font><font style="vertical-align: inherit;">Make your MIFA!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zu/-z/iy/zu-ziy2pmgvb-n2te69zzvgaeja.jpeg"></div><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The version of the program HFSS 15.0 is used, but there are not so many differences between the versions, therefore it can be modeled in other versions.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Table of contents:</font></font></h4><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit about the antenna</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting down to modeling</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Creation of the project and model of the board in HFSS</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Creating an antenna model in HFSS</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Set up a project for analysis</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Initial optimization</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. An example of a geometry change</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. We carry out a parametric analysis</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Final optimization</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But how does the antenna emit?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></a></li>
</ul><br>
<a name="1st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit about the antenna</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 The Meander Inverted-F Antenna is a modification of the IFA antenna, which has the main printed conductor in the form of a meander. </font><font style="vertical-align: inherit;">This modification allows you to make the antenna even more compact, which is often necessary in modern mobile devices. </font><font style="vertical-align: inherit;">MIFA can be integrated directly into the board of the device under development. </font><font style="vertical-align: inherit;">The appearance is shown in the figure below.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lj/qo/fu/ljqofu7swjvjp_efudtjqqjnfgm.png"></div> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Used in the ranges of decimeter, centimeter and millimeter wavelengths. </font><font style="vertical-align: inherit;">It allows constructive solutions for working in multi-frequency modes. </font><font style="vertical-align: inherit;">The radiation pattern (LH) of such an antenna is a closed toroid with an axis of rotation along the input channel and is presented in the figure below. </font><font style="vertical-align: inherit;">MIFA has a vertical polarization parallel to the axis of rotation of the toroid.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dc/8d/cq/dc8dcqbpdveaigcqvvvjf5ydgzc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Changing the geometry of the antenna allows you to change its impedance, which eliminates additional matching devices and circuits. </font><font style="vertical-align: inherit;">Designing MIFA for a specific device under development is individual, since the antenna uses the entire earth test ground on the board to emit electromagnetic waves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Advantages:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simplicity of construction; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">relatively small weight and size characteristics;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">production cost;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">high repeatability of sizes.</font></font></li>
</ul><br>
<a name="2st"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Getting down to modeling</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First you need to decide on the source model. </font><font style="vertical-align: inherit;">The picture below shows the MIFA antenna model.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/si/q_/wi/siq_wisgwwkidp0of7yfmnlfa6o.png"></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The structural parts of the antenna:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ground landfill;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the antenna input channel (on the right, it is given the size W), the RF path is connected to it;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">earth channel of the antenna (left);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meander part.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The figure shows the letter designations of various geometric sizes that will be used in the program and will be recorded as parameters:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HP - the vertical size of the polygon;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LP - horizontal size of the polygon;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H - antenna height, also the length of the input and ground channels;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H2 is the distance between the meander and the landfill;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YG is the distance between the channels;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W is the thickness of the printed conductors;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L1, L2, ..., L7 are the lengths of the horizontal lines of the meander;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LEnd - the length of the end line of the meander.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The dimensions of the polygon usually do not change (the antenna is often made for the developed board), i.e. </font><font style="vertical-align: inherit;">it remains to optimize only the lengths of the printed conductors of the antenna itself. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, you can experiment with the number of meander bends, there is no clear limit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The essence of the simulation is as follows: you need to find the antenna geometry so that it is matched to a certain frequency and has a gain that matches your task (for example, you need the antenna to radiate more in the horizontal plane parallel to the plane of the board and less in the vertical one.</font></font><br>
<a name="3st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Creation of the project and model of the board in HFSS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Open HFSS, click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File -&gt; New</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A new project is created. If it is empty, then click RMB on the project in the Project manager window, then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Insert -&gt; Insert HFSS Design</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A file with the 3D design of the project has been created, you see the axes and the grid. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First you need to create the necessary variables, for this, click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HFSSDesign</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Design Properties</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , enter a name, for example, HP, indicate the type </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Length</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , units mm, value </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the value you need in mm, for example, 75. Click OK. Variable created. Now you need to do the same operation with all other variables. For variables L1 - L7 and LEnd, set values, for example, at 3 mm. YG equal to at least 5 mm. W Equal to the required width of the printed conductors. Since your board already has some dimensions, and a certain place is allocated for the antenna on the board, in parameter H specify the following value (in my case, the antenna is located along the short side of the board, you can have it along the long one): from the length value on the long side of the board, subtract the polygon length and another minus 0.5 mm (0.5 mm is the indent from the edge of the board to the antenna). Also create a PortW variable and set it to 0.2 mm (this will be the width of the input port). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go to the tab</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modeler -&gt; New Object Type -&gt; Model</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Now all new objects will be models. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we need to create a substrate for our printed circuit board, for this, click on the top of the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Draw -&gt; Box</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> toolbar </font><font style="vertical-align: inherit;">, click LMB on the workspace and draw a rectangle, then click LMB again and drag up to create a three-dimensional shape, click LMB again. The result in the picture below.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cg/4i/nq/cg4inqhu3nsjn1gnilcupel6pnw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's set the dimensions for our substrate, for this click LMB on the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CreateBox</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> element </font><font style="vertical-align: inherit;">(in the picture above, the red arrow indicates where to click). On the left in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Properties</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> window </font><font style="vertical-align: inherit;">(or RMB by </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CreateBox -&gt; Properties</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), specify the required dimensions: enter “HP + H + 0.5mm” in the Xsize field, similar to the board width: in the Ysize field, enter “LP”, and in the Zsize field specify the board thickness in mm, for example, 1.5. Also fill in the Position field: separated by comma "-H-0.5mm, -LP / 2, -1.5mm". The center of coordinates will now be in the middle of the narrow side of the polygon. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rename “Box1” to “PCB” by clicking on it with PCM and going to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Properties</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In the same place, specify the material, for example, FR4_epoxy, typing in the search. Also select the appropriate color by changing </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Color</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Change the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transparent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transparency </font><font style="vertical-align: inherit;">to 0.3. </font><font style="vertical-align: inherit;">It should turn out like in the picture:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cp/js/ed/cpjsedoz4lnxxgon3kplzdhrfk4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you need to create 2 landfills. </font><font style="vertical-align: inherit;">To do this, click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Draw -&gt; Rectangle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">And make a small rectangle from the origin on the board. </font><font style="vertical-align: inherit;">Change its size and position. </font><font style="vertical-align: inherit;">To do this, in its properties, set the values ​​in the Xsize field “HP”, in Ysize - “LP”, and in the Position field - “0, -LP / 2, 0”. </font><font style="vertical-align: inherit;">Rename the object "Rectangle1" to "Top" and change its color. </font><font style="vertical-align: inherit;">Right click on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Top -&gt; Assign Boundary -&gt; Perfect E -&gt; OK</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">So we set the object properties of an ideal conductor. </font><font style="vertical-align: inherit;">You should get the same as in the picture below.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pu/rg/e6/purge66kykqvakpxlxkdisggq9a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conducting objects will be flat, it does not affect the result strongly, however, it speeds up the calculations significantly. If you need super precision, you can create a three-dimensional object from this rectangle by clicking </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modeler -&gt; Thicken Sheet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and specifying the required thickness. You can also specify the material “cooper”. But in our project this is not necessary, therefore, we work with flat ideal objects. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you need to create an earth test site on the other side of the board. To do this, click RMB on Top in the design tree, then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edit -&gt; Copy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . RMB on Top again, then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edit -&gt; Paste</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We have created exactly the same layer with the name "Top1". </font><font style="vertical-align: inherit;">Rename it to “Bottom” and change its position by writing “0mm, -LP / 2, -1.5mm” in the Position field. </font><font style="vertical-align: inherit;">Also give this object the properties of Perfect E. Now we have 2 ground polygons on both sides of the board.</font></font><br>
<a name="4st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Creating an antenna model in HFSS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next step is to design the antenna itself. We will create the antenna from the rectangles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Create a variable to set the distance from the center of coordinates to the middle of the input channel on the board as in the previous paragraph: name PortY, set the length, for example, -10 mm. Minus because the input channel will shift to the left relative to the origin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Create an input channel: draw a small rectangle by clicking </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Draw -&gt; Rectangle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and spreading it on the plane of the board. Change its size and position. Xsize equate to "H-PortW", Ysize - "W", Position - "-H, PortY, 0mm". Rename the object to “Feed” and set the color as for polygons. Also give it the properties of an ideal conductor. The result should be as in the picture below.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qb/3p/px/qb3ppxlbko_4p4pr7ymohe9b4ce.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now create an earthen canal. To do this, draw a rectangle in the same way as with the input channel, do the same operations, just set the size in the Xsize field “H”, the width is the same, and in the Position field enter “-H, PortY-YG, 0mm”. Also name it “Back” and give the object the same color and properties of an ideal conductor. Now, using the YG variable, you can adjust the distance between the input and ground channels. Try to click on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HFSSDesign</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font><font style="vertical-align: inherit;">change the YG variable </font><font style="vertical-align: inherit;">on the left in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Properties</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> window </font><font style="vertical-align: inherit;">, your earth channel will shift relative to the input one. Below in the picture it should turn out like this. At the same time, note that in the design tree in the Perfect E tab there are all our elements.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ur/dd/iv/urddiv5pp0gzeqra7r5po-fhb-y.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Create a jumper between the channels. </font><font style="vertical-align: inherit;">To do this, draw a rectangle again and set its size to Xsize “W”, Ysize to “YG-W”, Position to “-H, PortY-YG + W, 0mm”. </font><font style="vertical-align: inherit;">Also give the object the name “FeedBack”, the properties of the ideal conductor and color. </font><font style="vertical-align: inherit;">The result in the picture below.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vm/fc/8b/vmfc8bu-is_2xsoljqmovekigma.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Great, it remains to draw a meander:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We draw the first rectangle, call it “LineL1” and set its size Xsize - “W”, Ysize - “L1”, Position - “-H, PortY + W, 0mm”.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We draw the second rectangle and call it “Ver1” and give it the size Xsize - “H-H2”, Ysize - “W”, Position - “-H, PortY + W + L1, 0mm”.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We draw the third rectangle and call it “LineL2” and give it the size Xsize - “W”, Ysize - “L2”, Position - “-H + H2-W, PortY + L1 + 2 * W, 0mm”.</font></font></li>
<li>      «Ver2»     Xsize — «H-H2», Ysize — «W», Position — "-H, PortY+L1+L2+2*W, 0mm".</li>
<li>      «LineL3»     Xsize — «W», Ysize — «L3», Position — "-H ,PortY+L1+L2+3*W, 0mm".</li>
<li>      «Ver3»     Xsize — «H-H2», Ysize — «W», Position — "-H, PortY+L1+L2+L3+3*W, 0mm".</li>
<li>      «LineL4»     Xsize — «W», Ysize — «L4», Position — "-H+H2-W, PortY+L1+L2+L3+4*W, 0mm".</li>
<li>      «Ver4»     Xsize — «H-H2», Ysize — «W», Position — "-H, PortY+L1+L2+L3+L4+4*W, 0".</li>
<li>      «LineL5»     Xsize — «W», Ysize — «L5», Position — "-H, PortY+L1+L2+L3+L4+5*W, 0".</li>
<li>      «Ver5»     Xsize — «H-H2», Ysize — «W», Position — "-H, PortY+L1+L2+L3+L4+L5+5*W, 0".</li>
<li>      «LineL6»     Xsize — «W», Ysize — «L6», Position — "-H+H2-W, PortY+L1+L2+L3+L4+L5+6*W, 0mm".</li>
<li>      «Ver6»     Xsize — «H-H2», Ysize — «W», Position — "-H, PortY+L1+L2+L3+L4+L5+L6+6*W, 0".</li>
<li>      «LineL7»     Xsize — «W», Ysize — «L7», Position — "-H, PortY+L1+L2+L3+L4+L5+L6+7*W, 0".</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We draw the fourteenth rectangle and call it “VerLEnd” and give it the size Xsize - “LEnd”, Ysize - “W”, Position - “-H, PortY + L1 + L2 + L3 + L4 + L5 + L6 + L7 + 7 * W, 0 ".</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do not forget to put down the colors and properties of an ideal conductor. </font><font style="vertical-align: inherit;">It should turn out like in the picture below.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ml/ri/yc/mlriyc_vyt5b0q8kqzk7dtobcbk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now hold Ctrl and click LMB on “Top”, and then on other conductors on the upper plane of the board. All objects will be highlighted. Next, click on “Top” RMB </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; Edit -&gt; Boolean -&gt; Unite</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , now these objects are combined, and if you click on one of them in the workspace, they will all be selected as one object. Also look at the design tree, there the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unite</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab will appear in the Top object </font><font style="vertical-align: inherit;">, where all the combined components are displayed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you need to add the port. To do this, draw a rectangle between the input channel and the ground polygon according to the size of the input channel. Set the port rectangle to Xsize - “PortW”, Ysize - “W”, Position - “-PortW, PortY, 0”. Next, click on this RMB rectangle and select </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assign Ecitation -&gt; Lumped Port</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Click Next, select </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integration Line -&gt; New Line</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and draw a line as shown in the figure below, then click Next and Finish.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/b0/mv/io/b0mviokfymezkwyow1lwuv99eou.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now expand </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HFSSDesign</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by clicking on the </font><i><font style="vertical-align: inherit;">plus sign</font></i><font style="vertical-align: inherit;"> , and in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excitations</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">your port will appear, and it will also appear in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sheets</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">in the design tree. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the last step: you need to add the volume in which the calculations will be made. To do this, create a Box with dimensions Xsize = 400 mm, Ysize = 200 mm, Zsize = 200 mm and Position "-200, -100, -100". Set transparency 1. You can also completely disable its visibility. To do this, click on the top panel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">View -&gt; Visibility -&gt; Active View Visibility</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and uncheck this box. After that, right-click on your Box in the design tree and select </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assign Boundary -&gt; Radiation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and click OK.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Congratulations, done! </font><font style="vertical-align: inherit;">The picture below shows the final version of the MIFA model.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/8z/iv/dh/8zivdhxl1rtmmqpqscvtby7byvw.png"></div><br>
<a name="5st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Set up a project for analysis</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First you need to click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analysis -&gt; Add Solution Setup</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Since the antenna in this project is tuned to a frequency of 868 MHz, we enter the frequency of 0.868 GHz. </font><font style="vertical-align: inherit;">You will have your own frequency. </font><font style="vertical-align: inherit;">We immediately indicate Maximum Number of Passes = 36. So the calculation will be as accurate as possible. </font><font style="vertical-align: inherit;">Click OK. </font><i><font style="vertical-align: inherit;">Right click</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setup1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analysis</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">, then select </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add Frequency Sweep</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interpolating</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> type </font><font style="vertical-align: inherit;">, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinearStep</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and set the range from 750 MHz to 1100 MHz in 1 MHz steps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, on the left in the project tree, click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Radiation -&gt; Insert Far Field Setup -&gt; Infinite Sphere</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">You can not change anything, i.e. </font><font style="vertical-align: inherit;">leave the Phi angles from 0 to 360 in increments of 10 degrees and Theta from 0 to 180 in increments of 10 degrees and click OK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the top panel, click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HFSS -&gt; Solution Type</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and select </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Done!</font></font><br>
<a name="6st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Initial optimization</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is necessary to carry out optimization, with the help of which the program itself will select the necessary geometric parameters. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You must specify ranges for each variable to be changed. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Right-click</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on </font><i><font style="vertical-align: inherit;">HFSSDesign -&gt; Design Properties</font></i><font style="vertical-align: inherit;"> , select the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimization</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">, in which you need to check the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Include</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> column </font><font style="vertical-align: inherit;">next to the variables that will be optimized, and also set a certain range using the Min and Max columns. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the exit point of the RF path is often already fixed, the PortY variable and the parameters of the landfill remain constant and are not included in the optimization. All geometric meander parameters, as well as the distance between the input and earthen channels, will change.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sometimes the maximum antenna height is determined by the dimensions of the developed board, then the parameter H should also be left constant.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some antenna data</font></font></b>
                        <div class="spoiler_text"><i>   :    H,     ()            .     ,     ,       H.          ,   H  ,     ,    H,   ,      H     ,    ,    ,     50     .<br>
<br>
            .<br>
<br>
         ,         YG.</i><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, we put the necessary checkmarks and determine the variable range. Click OK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimetrics</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on the left in the project tree, then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add -&gt; Optimization</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . You need to choose an optimization algorithm (you should not choose a “quasi-Newtonian” algorithm, since this algorithm uses the gradient of the S parameter change, and it can fall into a local minimum), you can choose, for example, a “genetic” algorithm. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setup Calculations</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the same window </font><font style="vertical-align: inherit;">, select the parameters from the S column, select S (1,1) on the right, and dB to the right. Go to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculation Range</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">and check the frequency. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Check in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variables</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab the </font><font style="vertical-align: inherit;">minimum steps for changing the parameter</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Min ste</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> p, make them at least 0.1 or less, so the optimization accuracy will be higher, but the optimization may take longer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add Calculation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Correct </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Condition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to "&lt;=", in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goal,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enter, for example, -40, in Weight, enter 1. Thus, optimization will continue until there is a solution where the reflection coefficient S (1,1) is less than or equal to - 40 dB Click OK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Right-click on the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OptimizationSetup1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that appears on the left </font><font style="vertical-align: inherit;">in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimetrics -&gt; Analyze</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">. Optimization will begin. The number of iterations can reach several thousand. On one computer core (if you do not have an HPC license), the optimization time can be hours or days, so you can put it overnight.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, during the optimization process, you can click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OptimizationSetup1 -&gt; View Analysis Result</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . There are two tabs: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Table</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">displays a graph of the results. The lower the value of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cost</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the better. After the optimization is completed or after the optimization process is stopped, you can click on the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Table</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">, sort by </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cost</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> value </font><font style="vertical-align: inherit;">by clicking on the corresponding column, select the option with one of the lowest values ​​and click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apply</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . You will apply the selected configuration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you can do the analysis. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Right-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> click on </font><i><font style="vertical-align: inherit;">Setup1</font></i><font style="vertical-align: inherit;"> in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analysis -&gt; Analyze</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After calculation it is necessary to display the results. To do this, create the following “reports”: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RMB by </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Results</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the project tree </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; Create Modal Solution Data Report -&gt; Rectangular Plot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , select the parameter S (1,1) in dB of frequency. Click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New Report</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . And we have a tab in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Results</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and also a graph of the frequency dependence of the reflection coefficient S (1,1) is displayed. The image below shows an example of this graph for solving after the initial optimization, which lasted 1060 iterations (parameter H here is 14 mm).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/w5/w3/eb/w5w3eb8fgsrcfvshmtkk3y7b5dk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see from the graph, the reflection coefficient at a frequency of 868 MHz is -7.46 dB, which is quite small, a good result starts from -20 dB. Moreover, there is a second minimum to the right, which must be reduced. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's create the following report: for this, right-click again on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Results -&gt; Create Far Fields Report -&gt; 3D Polar Plot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , select </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gain -&gt; GainTotal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in dB at all angles. Click New Report. Below is a graph of KU for the same solution.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xx/f9/2c/xxf92cvksyj3xneipfxt7v6gqlk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The maximum KU in the horizontal plane is 1.5 dB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Add the graphs of the input active and reactance of the antenna: click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Results -&gt; Create Modal Solution Data Report -&gt; Rectangular Plot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , select </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z parameter -&gt; Z (1,1) -&gt; re</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New Report</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Now in the same window, click on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add Trace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and another curve is added to the same graph. </font><font style="vertical-align: inherit;">The picture below shows the graphs of the active and reactance of the antenna.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/np/d3/ba/npd3ba1j-ok2wibccph61pjohaq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The antenna resistance is 21.59 Ohms, and the reactance is 11.74 Ohms. </font><font style="vertical-align: inherit;">The coordination task is to have an active resistance of 50 ohms and a reactance of 0 ohms.</font></font><br>
<a name="7st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. An example of a geometry change</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remember what “a bit of antenna data” was in the spoiler? </font><font style="vertical-align: inherit;">So, for example, increasing the parameter H by 2 mm, we obtain the following data:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ii/pa/vw/iipavwrycdxd5zpnpw3zdrcgw5w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the change in S (1,1) is caused by the fact that the active and reactive resistances have changed, the graphs of which are shown in the figure below, the KU has changed, because the dimensions of the antenna have increased.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/t_/8i/pw/t_8ipwqyuyy3c8d0r_cpg9u_3l4.png"></div><br>
<a name="8st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. We carry out a parametric analysis</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to get closer to the full antenna matching, you should do a parametric analysis (you can start by parameterizing the distance between the channels): click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimetrics -&gt; Add -&gt; Parametric</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sweep Definitions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">on the right click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , select the parameter YG </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; Linear step</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and enter a range, for example, from 0.2 mm to 12 mm (the maximum value is chosen so that there is a distance to the edge of the board, for example, 0.5 mm), in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Table</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab there </font><font style="vertical-align: inherit;">are all calculated values ​​(it turned out 60), in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab, </font><font style="vertical-align: inherit;">check the </font><i><font style="vertical-align: inherit;">Save Fields</font></i><font style="vertical-align: inherit;"> checkbox </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and mesh</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, this is necessary in order to then draw a lot of curves on one graph and choose the right one. Click OK. RMB Analysis </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; Analyze</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After finishing the calculations on the first graph, output the family of curves S (1,1) for each calculated variation. To do this, open the XY Plot 1 graph tab (if you did not change the name), double-click on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dB (S (1,1))</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XY Plot 1 -&gt; Modify Report</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , open the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Families</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">, select the desired family, for example, by clicking the button in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> column </font><font style="vertical-align: inherit;">opposite the variable YG -&gt; check </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use all values</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Next click </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apply Trace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. A graph will appear in front of you, select the most suitable curve by pointing or clicking on it, remember: with what parameter this graph is built, and change it in all project parameters. Below is a graph of parametric analysis for one of the geometric parameters.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/qi/ix/fzqiixqzbqi1e1ldmlef-zpogwm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It can be seen from the graph that there is a purple curve at which S (1,1) reaches -40 dB. Just select the value of this parameter, change our parameter to it and optimize further if necessary. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can carry out such short parametric analyzes on any geometric parameters. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, if you want to simultaneously change several geometric parameters, then you can simply create a variable, for example, k and add it to all these geometric parameters, and conduct parametric analysis on the variable k. You can also try to add and subtract this variable from different geometric parameters, then one of them will increase with increasing k, and the other will decrease. Do not forget to add “mm” after the digital value in the </font><i><font style="vertical-align: inherit;">Value</font></i><font style="vertical-align: inherit;"> field</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geometric parameter, otherwise there will be an error with units. </font><font style="vertical-align: inherit;">For example, click RMB on </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HFSSDesign -&gt; Design Properties -&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> create the parameter k and equate it to 0 (Length), then click on any geometric parameter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; Edit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> field </font><font style="vertical-align: inherit;">enter “15mm + k”. </font><font style="vertical-align: inherit;">Now there will be no mistakes.</font></font><br>
<a name="9st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Final optimization</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When you have chosen the best geometric design after parameterization, you can achieve maximum results. To do this, we will carry out another optimization in the vicinity of the values ​​of geometric parameters already obtained, i.e. it is necessary to reduce the range of parameter changes in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HFSSDesign -&gt; Design Properties</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for all mutable variables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Right click on Optimetrics on the left in the project tree, then </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add -&gt; Optimization</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . You must select a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pattern Search</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> optimization algorithm </font><font style="vertical-align: inherit;">. Add the S (1,1) variable again as in the initial optimization, now add the second variable by pressing </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setup Calculation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . And selecting </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Far Fields</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on the left in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Report type</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> field </font><font style="vertical-align: inherit;">, click on</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gain -&gt; GainTotal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in dB. Next, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">add Add Calculation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and enter in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Condition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> field </font><font style="vertical-align: inherit;">"&gt; =", in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> field </font><font style="vertical-align: inherit;">"10", in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weight</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> field </font><font style="vertical-align: inherit;">"0", so that the first variable is more important in weight, since coordination is more important to us than KU. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Check in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variables</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab the </font><font style="vertical-align: inherit;">minimum steps for changing the parameter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Min ste</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> p, the smaller the better, since the optimization accuracy will be higher, but the optimization may take longer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We start the analysis. Most likely, the optimization will pass quickly, and you will automatically get the result, i.e. your geometric parameters themselves will change to new ones, since in the General tab of the optimization analysis there is a checkmark to update the parameters after optimization.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Congratulations, your MIFA is ready! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example of a fully optimized antenna:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/br/1d/oz/br1dozozqpitmswg5ab5fmvnhri.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As well as the Smith chart.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yv/ct/6v/yvct6vdftro2dj4q9231zss0dtm.png"><br>
<a name="10st"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But how does the antenna emit?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can create an animation of the radiation of the E field: open </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planes -&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> press XY or XZ, then click RMB on the work area </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; Plot Fields -&gt; E -&gt; Mag E -&gt; Done</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">After expand the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Field Overlays</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">, RMB by </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mag_E1 -&gt; Animate</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vf/ew/mm/vfewmmuacnsktnlmvbqudanuds4.gif"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/p0/z_/7n/p0z_7n7zetnkips35tjlt5gkulw.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can create an animation of the radiation of the H field: open </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planes -&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> press XY or XZ, then right-click on the workspace </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; Plot Fields -&gt; H -&gt; Mag H -&gt; Done</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">After expand the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Field Overlays</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">, RMB by </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mag_H1 -&gt; Animate</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/le/rs/zi/lerszi5ua4oyofrb6othmmkcx7a.gif"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yb/pv/lh/ybpvlhj54tpyrxm04nnexc8pzp0.gif"></div><br>
<a name="11st"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The GIFs show strong electromagnetic radiation. </font><font style="vertical-align: inherit;">The current at the end of the meander side of the antenna is minimal.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would like to add that the most accurate simulation of the MIFA antenna will be, if you create the most realistic model with all the vias, electronic components and other nearby objects installed on the board, the conductors should be voluminous and have, for example, copper properties. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As practice shows, often simplified and idealized models are often enough. </font><font style="vertical-align: inherit;">It is better to put contact pads under the filter or matching circuits, measure the SWR and other input characteristics of the antenna with the device, calculate the values ​​of the filter components for maximum real matching and install the components on these pads. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for your attention, I hope you enjoyed this article.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500192/index.html">To be or not to be: Soft vs Hard Skill's</a></li>
<li><a href="../en500194/index.html">Adapting your existing business solution for SwiftUI. Part 1</a></li>
<li><a href="../en500196/index.html">Translation of Andrew Un's book, Passion for Machine Learning, Chapters 40 and 41</a></li>
<li><a href="../en500198/index.html">We write front-end which works. Or how to become an engineer from a developer. Part 1</a></li>
<li><a href="../en500200/index.html">Job search in Germany as a product manager and more. Part 4/5. Work with a vacancy</a></li>
<li><a href="../en500204/index.html">Translation of Andrew Un's book, Passion for Machine Learning, Chapters 42 and 43</a></li>
<li><a href="../en500206/index.html">Healers cannot be burned now</a></li>
<li><a href="../en500208/index.html">Again about BLE, temperature and Xiaomi sensors</a></li>
<li><a href="../en500210/index.html">Flutter Layout Rules Everyone Should Know</a></li>
<li><a href="../en500212/index.html">Load Testing Atlassian Jira, Confluence, Bitbucket Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>