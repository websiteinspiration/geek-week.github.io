<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤶 👷🏻 🥌 Vanya va a la abuela o JavaScript dinámico adaptativo 💴 🤛🏻 🧗🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mientras trabajamos en la adaptación, de vez en cuando tenemos que cambiar la apariencia de los objetos. Por lo general, es suficiente para nosotros r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Vanya va a la abuela o JavaScript dinámico adaptativo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502028/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mientras trabajamos en la adaptación, de vez en cuando tenemos que cambiar la apariencia de los objetos. </font><font style="vertical-align: inherit;">Por lo general, es suficiente para nosotros registrar varias consultas de medios y podemos hacerlo. </font><font style="vertical-align: inherit;">En algunos casos, necesitamos cambiar el orden de los elementos, y aquí, por ejemplo, la propiedad del pedido de la tecnología Flexbox o Grid viene al rescate. </font><font style="vertical-align: inherit;">Pero hay momentos en que esto no nos ayuda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La idea de la adaptación dinámica está diseñada para simplificar la vida de un diseñador de diseño y adaptar rápidamente elementos de diseño complejos.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QKuMr575vlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, mira este caso. Aquí tenemos la siguiente estructura: encabezado y algo de texto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jd/hs/i8/jdhsi8bq-3u7lszevxzxd9mmgxq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero con cierto permiso, el diseñador indicó que el texto que estaba debajo del encabezado ahora debería estar en un lugar completamente diferente en la estructura. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/e4/u6/cye4u6m9mmoop_qysyp4mzfxinq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, los diseñadores de diseño resolvieron este problema de una de dos maneras. Te recordaré rápidamente a ellos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo mostraré como un ejemplo de una situación de vida en la que el chico de la ciudad, Vanya, realmente quería venir con su abuela para el verano. Pero no porque echara de menos a su abuela, sino porque quería ir al río con la niña Olya. Y quería hacer esto con una resolución inferior a 992px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/ev/nj/x9evnjtlgrzdje2vpbxvajitcw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Cómo resolveremos el problema de Vani?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos hacer lo siguiente: Ocultar Vanya en la ciudad con este permiso, y mostrar Vanya en el río con Olya. Pero para esto necesitamos hacer un clon de Vani. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí está la ciudad (original) Vanya. Pero Vanya, de hecho, ya está en el río con Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/34/hu/cq34hu8vfdlpqmc5nqsniftrdxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero inicialmente este río Vanya está oculto en CSS. Escribimos una consulta de medios con los parámetros que necesitamos, en la que mostramos la nueva Vanya y ocultamos la antigua Vanya (ciudad). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i0/id/2ti0idhaphwbdm9kelpifg0ndec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo salió bien para nosotros: con el permiso que necesitamos, Vanya se encuentra bajo Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/hz/i6/vvhzi6fnhiti6hed2t5ojkq42wg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consecuencia, cuando la resolución es superior a 992 px, Vanya regresa inmediatamente a la ciudad. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/s1/q7/vds1q743_a221midfog7xtlodtq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y todo parece estar bien, Vanya con Olya cuando es necesario. Puedes dispersar ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero no tan simple. De hecho, algunos clientes se oponen mucho al contenido duplicado. Esto se debe a algunos problemas con el SEO y, en principio, a la creación de bloques innecesarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora tenemos suerte, en nuestra situación Vanya es un poco pequeña, y resulta que Vanya es un tipo muy grande, masivo y bombeado, que respectivamente requiere muchas líneas de código. Y en esta situación, incluidos los clientes, le piden que mueva el objeto DOM usando JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto se puede hacer aproximadamente de la siguiente manera. Para empezar, tengo que eliminar Vanya, que es un clon, en HTML y dejar Vanya original. En CSS, comente todas las líneas que originalmente teníamos para otra opción de ajuste. Y agregue aquí un código JS tan simple.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-keyword">const</span> parent_original = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__blocks_city'</span>);
<span class="hljs-keyword">const</span> parent = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__column_river'</span>);
<span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__block_item'</span>);<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'resize'</span>, move);<font></font>
<font></font>
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params"></span>)</span>{
	<span class="hljs-keyword">const</span> viewport_width = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">document</span>.documentElement.clientWidth, <span class="hljs-built_in">window</span>.innerWidth || <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (viewport_width &lt;= <span class="hljs-number">992</span>) {
		<span class="hljs-keyword">if</span> (!item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent.insertBefore(item, parent.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.add(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">if</span> (item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent_original.insertBefore(item, parent_original.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.remove(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
move();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, declaramos las variables donde "marcamos" la ciudad, el río y el Vani original. A continuación, comenzamos a "escuchar" el ancho de la pantalla para captar el momento en que necesitamos mover a Vanya. Después de obtener el ancho y establecer la condición en la que verificamos que el ancho sea menor o igual a 992px. Al mover a Vanya, le asignamos una clase, por lo que verificamos la presencia de una clase para que este movimiento no ocurra todo el tiempo (Vanya se movió una vez y eso es todo, no necesita transferirlo constantemente). Y realizamos la transferencia dentro del padre (al río), aquí indicamos la posición en el árbol DOM donde necesitamos mover Vanya (debajo de Olya, sobre Olya). Y cuando tengamos una resolución superior a 992 px, debemos devolver a Vanya al lugar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tratamos de ver que nuestra Vanya nuevamente se movió bajo Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y todo está bien: no tenemos contenido duplicado, todo funciona bien, el cliente está satisfecho, todos están contentos. Pero este método tiene una serie de problemas asociados con la escritura del propio código js. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entendemos que para un solo caso esto es normal: escribimos bien. Pero tuve la idea de automatizar este proceso. Supongamos que necesito lanzar 5-6 elementos completamente diferentes en la página. Para esta tarea, escribir un código js usando este método es bastante laborioso y requiere mucho tiempo. Y el segundo punto, que, naturalmente, ha presionado a muchos de ustedes, es la carga en la PC del usuario, porque aquí constantemente "escuchamos" el ancho de la pantalla. También quería optimizar este momento. También se puede optimizar en este código, pero desde que escribí una </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">herramienta de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> automatización que llamé </font><b><font style="vertical-align: inherit;">"dinámica adaptativa"</font></b><font style="vertical-align: inherit;"> , la optimicé allí.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora te mostraré cómo funciona todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de conectar mi adaptativo dinámico, solo necesito trabajar con el archivo HTML y no es necesario acceder a JavaScript. Para hacer esto, necesito escribir el atributo data-da (da es la abreviatura de adaptativo dinámico) y especificar tres parámetros entre comillas, separados por comas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primer parámetro es dónde. Tomo una clase única del objeto donde quiero mover Vanya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo parámetro es cuál (en una fila). Mi objeto tiene dos elementos: cero y el primero (sabemos que en JavaScript todo comienza desde cero). Necesito insertar Vanya después del objeto "1", así que estoy escribiendo el parámetro "2". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tercer parámetro es cuándo. En el tercer parámetro, escribo "992", esta es la resolución debajo de la cual Vanya realmente quiere llegar a Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo y tercer parámetro son opcionales. Por defecto, el objeto se moverá al final del bloque con una resolución inferior a 768 px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s6/aw/an/s6awan4diwfqltbtcyvt7nkkg-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificamos. Todo funciona igual que en versiones anteriores, pero sin duplicación de contenido y todo está automatizado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considera las comodidades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, para mover Vanya sobre Olya, solo necesito cambiar el número de serie en el segundo parámetro de atributo. Y Vanya ya habrá terminado con Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/w1/it/clw1it_jfjybuy4wewk8bwxdbio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conveniente, ¿verdad? Puedo hacer lo mismo con el tercer parámetro de punto de interrupción. Puedo especificar, por ejemplo, 1280px. (data-da = "content__column_river, 1,1280"). Entonces Vanya irá a Olya un poco antes, precisamente cuando se alcanza este valor. Y lo mejor es que Vanya regresará a su lugar de forma absolutamente automática.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mayor comodidad, en lugar del número de serie en el segundo parámetro del atributo, puede especificar uno de los dos valores: primero o último. Cuando escribo primero, Vanya se moverá sobre el título "Soy un río". Se ubicará el primero dentro del objeto donde lo enviamos. En consecuencia, si especifica el último, nuestra Vanya estará en la parte inferior del objeto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/kb/l4/hxkbl42bvvf9aqvsnffcqhpkq0w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos un par de ejemplos más. Supongamos que podemos enviar a Kolya al jardín de la lota y enviar a Anya al río a Van y Ola también, será más divertido. Escribimos para Kolya un atributo con parámetros </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_garden, 2,992"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Y para Ani escribimos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_river, 1.1280"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Buscamos: Anya, Olya y Vanya en el río. Kolya va a Lota un poco más tarde. A su regreso, todos los chicos están en sus lugares. Todo esta bien.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Juegue en CodePen: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codepen.io/FreelancerLifeStyle/project/full/ZmWOPm</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por supuesto, puede tener una pregunta: ¿qué pasa con el evento que podría colgarse en objetos reubicables? Por ejemplo, inicialmente, al hacer clic en Anya, aparece una ventana con la inscripción: "Todo está bien". Veamos qué sucede cuando ella se muda con los chicos al río. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muévase, haga clic: todo funciona bien, también se muestra la ventana. El evento permanece con el objeto cuando se mueve. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/yp/9w/pnyp9wq5kdlt6nl5ypa-rgx3uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y la segunda pregunta emocionante es la carga, que intenté minimizar. Ahora mostraré esto contando un poco sobre el código que está oculto bajo el capó de la adaptación dinámica.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, declaro algunas variables, incluida la creación de matrices, que completo a continuación. Obtengo el atributo, lo separo, lo convierto en una matriz para obtener elementos individuales. Luego, completo la posición original de los objetos para que luego puedan ser devueltos a la casa de sus padres (en la ciudad). Después de eso, completé la matriz de los elementos en sí, para poder ordenarla para que funcione correctamente.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> originalPositions = [];
<span class="hljs-keyword">let</span> daElements = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'[data-da]'</span>);
<span class="hljs-keyword">let</span> daElementsArray = [];
<span class="hljs-keyword">let</span> daMatchMedia = [];
<span class="hljs-comment">// </span>
<span class="hljs-keyword">if</span> (daElements.length &gt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">let</span> number = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElements.length; index++) {
		<span class="hljs-keyword">const</span> daElement = daElements[index];
		<span class="hljs-keyword">const</span> daMove = daElement.getAttribute(<span class="hljs-string">'data-da'</span>);
		<span class="hljs-keyword">if</span> (daMove != <span class="hljs-string">''</span>) {
			<span class="hljs-keyword">const</span> daArray = daMove.split(<span class="hljs-string">','</span>);
			<span class="hljs-keyword">const</span> daPlace = daArray[<span class="hljs-number">1</span>] ? daArray[<span class="hljs-number">1</span>].trim() : <span class="hljs-string">'last'</span>;
			<span class="hljs-keyword">const</span> daBreakpoint = daArray[<span class="hljs-number">2</span>] ? daArray[<span class="hljs-number">2</span>].trim() : <span class="hljs-string">'767'</span>;
			<span class="hljs-keyword">const</span> daDestination = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim())
			<span class="hljs-keyword">if</span> (daArray.length &gt; <span class="hljs-number">0</span> &amp;&amp; daDestination) {<font></font>
				daElement.setAttribute(<span class="hljs-string">'data-da-index'</span>, number);
				<span class="hljs-comment">//   </span><font></font>
				originalPositions[number] = {<font></font>
					<span class="hljs-string">"parent"</span>: daElement.parentNode,
					<span class="hljs-string">"index"</span>: indexInParent(daElement)<font></font>
				};<font></font>
				<span class="hljs-comment">//   </span><font></font>
				daElementsArray[number] = {<font></font>
					<span class="hljs-string">"element"</span>: daElement,
					<span class="hljs-string">"destination"</span>: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim()),
					<span class="hljs-string">"place"</span>: daPlace,
					<span class="hljs-string">"breakpoint"</span>: daBreakpoint<font></font>
				}<font></font>
				number++;<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	dynamicAdaptSort(daElementsArray);<font></font>
<font></font>
	<span class="hljs-comment">//    </span>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daType = <span class="hljs-string">"max"</span>; <span class="hljs-comment">// MobileFirst   min</span><font></font>
<font></font>
		daMatchMedia.push(<span class="hljs-built_in">window</span>.matchMedia(<span class="hljs-string">"("</span> + daType + <span class="hljs-string">"-width: "</span> + daBreakpoint + <span class="hljs-string">"px)"</span>));<font></font>
		daMatchMedia[index].addListener(dynamicAdapt);<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y al final, se implementa la optimización de la que hablé: en lugar de cambiar el tamaño de la ventana (escuchar cada cambio de ventana), solo escucharemos los cambios en el punto de interrupción usando window matchMedia. </font><font style="vertical-align: inherit;">De esta forma, obtenemos la respuesta del navegador solo en algunos puntos: aquellos que indicamos en los atributos de nuestros objetos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, recopilo una serie de estos puntos de interrupción y cuelgo un evento para cada punto de interrupción. </font><font style="vertical-align: inherit;">En la función main dynamic_adapt, amplío todo esto dentro de la matriz que recopilamos y clasificamos, verifico la presencia de un punto de interrupción, muevo los elementos o los devuelvo a su lugar.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdapt</span>(<span class="hljs-params">e</span>) </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daElement = el.element;
		<span class="hljs-keyword">const</span> daDestination = el.destination;
		<span class="hljs-keyword">const</span> daPlace = el.place;
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daClassname = <span class="hljs-string">"_dynamic_adapt_"</span> + daBreakpoint;<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (daMatchMedia[index].matches) {
			<span class="hljs-comment">// </span>
			<span class="hljs-keyword">if</span> (!daElement.classList.contains(daClassname)) {
				<span class="hljs-keyword">let</span> actualIndex = indexOfElements(daDestination)[daPlace];
				<span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'first'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[<span class="hljs-number">0</span>];<font></font>
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'last'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[indexOfElements(daDestination).length];<font></font>
				}<font></font>
				daDestination.insertBefore(daElement, daDestination.children[actualIndex]);<font></font>
				daElement.classList.add(daClassname);<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (daElement.classList.contains(daClassname)) {<font></font>
				dynamicAdaptBack(daElement);<font></font>
				daElement.classList.remove(daClassname);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	customAdapt();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Volver a la función de posición de inicio:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptBack</span>(<span class="hljs-params">el</span>) </span>{
	<span class="hljs-keyword">const</span> daIndex = el.getAttribute(<span class="hljs-string">'data-da-index'</span>);
	<span class="hljs-keyword">const</span> originalPlace = originalPositions[daIndex];
	<span class="hljs-keyword">const</span> parentPlace = originalPlace[<span class="hljs-string">'parent'</span>];
	<span class="hljs-keyword">const</span> indexPlace = originalPlace[<span class="hljs-string">'index'</span>];
	<span class="hljs-keyword">const</span> actualIndex = indexOfElements(parentPlace, <span class="hljs-literal">true</span>)[indexPlace];<font></font>
	parentPlace.insertBefore(el, parentPlace.children[actualIndex]);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturalmente, muchos tienen una pregunta sobre Mobile First. </font><font style="vertical-align: inherit;">No hay problemas: necesitamos cambiar solo algunas variables en el código (ya está funcionando eliminar esta configuración en HTML):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando recopilo una serie de puntos de interrupción, necesitamos cambiar "max" a "min" aquí. </font><font style="vertical-align: inherit;">Y el evento será "escuchado" no por ancho máximo, sino por ancho mínimo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">También debe cambiar la clasificación para que los objetos en la matriz estén alineados en un orden diferente cuando los clasifiquemos por punto de interrupción. </font></font></li>
</ol><br>
<pre><code class="javascript hljs">	<span class="hljs-comment">// </span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptSort</span>(<span class="hljs-params">arr</span>) </span>{<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.breakpoint &gt; b.breakpoint) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-comment">// MobileFirst </span><font></font>
		});<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.place &gt; b.place) { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> }<font></font>
		});<font></font>
	}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También en dinámica adaptativa, uso un cierto método para obtener el índice cuando se arroja el objeto. </font><font style="vertical-align: inherit;">Y aquí están los primeros defectos: tengo que excluir el objeto transferido. </font><font style="vertical-align: inherit;">Aquellos. </font><font style="vertical-align: inherit;">cuando transfiero objetos al mismo lugar, para que todo sea adecuado y los objetos se alineen en el orden que queremos, cuando transfiero, necesito excluir el objeto transferido previamente al mismo punto.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indexOfElements</span>(<span class="hljs-params">parent, back</span>) </span>{
	<span class="hljs-keyword">const</span> children = parent.children;
	<span class="hljs-keyword">const</span> childrenArray = [];
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; children.length; i++) {
		<span class="hljs-keyword">const</span> childrenElement = children[i];
		<span class="hljs-keyword">if</span> (back) {<font></font>
			childrenArray.push(i);<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (childrenElement.getAttribute(<span class="hljs-string">'data-da'</span>) == <span class="hljs-literal">null</span>) {<font></font>
				childrenArray.push(i);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> childrenArray;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero conlleva otro problema de clasificación. Por ejemplo, si transfiero a los chicos al mismo tiempo a la misma posición, no podré controlar su orden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las formas de desarrollar esta adaptación dinámica puede ser, por ejemplo, la creación de varios puntos de interrupción. Ejemplo, necesitamos mover Vanya a Ola a 1280px, y a 992px Vanya para movernos al jardín, o regresar al lugar. Esta funcionalidad no está disponible ahora, por lo que aún queda trabajo por hacer. En general, para cubrir el 95% de las tareas cotidianas en la adaptación, la funcionalidad que es ahora es suficiente para mí. Para resolver el problema de mover elementos a otro lugar, necesito pasar unos segundos escribiendo un atributo. Y obtendré el resultado que necesito.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturalmente, exhorto absolutamente a todos los que les gustó la dinámica adaptativa a participar en sus pruebas, desarrollo y mejora tanto del funcionamiento como de la optimización del código. </font><font style="vertical-align: inherit;">Y todo para que nuestros Kohl, Ani, Vani y Olya estén juntos cuando lo deseen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repositorio de GitHub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/FreelancerLifeStyle/dynamic_adapt</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Basado en el video " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptación dinámica // Adaptación rápida de objetos complejos en JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " en el canal de YouTube " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freelancer for Life</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es501998/index.html">Precio caro de los estilos. Informe Yandex</a></li>
<li><a href="../es502000/index.html">12 cursos en línea de ingeniería de datos</a></li>
<li><a href="../es502004/index.html">Método Kanban: Entendiendo su proceso como un proceso de construcción de conocimiento colectivo - Parte 1 (recetas)</a></li>
<li><a href="../es502008/index.html">Programación a las masas.</a></li>
<li><a href="../es502012/index.html">Azure para todos: curso de introducción</a></li>
<li><a href="../es502030/index.html">Servicios web en Oracle</a></li>
<li><a href="../es502034/index.html">Los componentes controlados y no controlados en React no tienen que ser complicados</a></li>
<li><a href="../es502038/index.html">Levantando un átomo, enfoque 2.0.1</a></li>
<li><a href="../es502040/index.html">Acerca de Phrasal Verbs-5 (arriba / abajo)</a></li>
<li><a href="../es502042/index.html">Entrevista con el analista - Alexander Sibrikov, gerente de producto de AppMetrica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>