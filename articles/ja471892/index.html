<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👨‍👧‍👧 🍞 🐵 SREの平日の6つの実践的なストーリー 📺 🔲 ➕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最新のWebインフラストラクチャは、さまざまな目的のための多くのコンポーネントで構成されており、明白で相互に関連していません。これは、マイクロサービスの出現により文字通りあらゆる段階で文字通り発生し始めた、さまざまなソフトウェアスタックを使用してアプリケーションを操作するときに特にはっきりと見えます...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SREの平日の6つの実践的なストーリー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/471892/"><img src="https://habrastorage.org/webt/7_/c-/_w/7_c-_wura080ohc4zdfyq6ummtw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最新のWebインフラストラクチャは、さまざまな目的のための多くのコンポーネントで構成されており、明白で相互に関連していません。これは、マイクロサービスの出現により文字通りあらゆる段階で文字通り発生し始めた、さまざまなソフトウェアスタックを使用してアプリケーションを操作するときに特にはっきりと見えます。外部の要素（サードパーティのAPI、サービスなど）が一般的な「楽しみ」に追加されるため、すでに難しい状況が複雑になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、これらのアプリケーションが共通のアーキテクチャのアイデアとソリューションによって統合される場合でも、それらの異常な問題を排除するために、多くの場合、次に馴染みのない自然を乗り越えなければなりません。このような問題が発生するかどうかは時間の問題です。これらは、この記事が専門とする最新のプラクティスからの例です。キャスト：Golang、Sentry、RabbitMQ、nginx、PostgreSQLなど。</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歴史第1号 </font><font style="vertical-align: inherit;">GolangとHTTP / 2</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webアプリケーションに対して多くのHTTPリクエストを実行するベンチマークを実行すると、予期しない結果が生じました。</font><font style="vertical-align: inherit;">ベンチマークプロセスの単純なGoアプリケーションは、ingress / openrestyの背後にある別のGoアプリケーションに移動します。</font><font style="vertical-align: inherit;">HTTP / 2を有効にすると、一部のリクエストでコード400のエラーが発生します。この動作の理由を理解するために、チェーンから遠端からGoアプリケーションを削除し、常に200を返す単純な場所をIngressに作成しました。動作は変更されていません。</font></font><cut></cut><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、スクリプトをKubernetes環境外で別のハードウェアに再現することが決定されました。</font><font style="vertical-align: inherit;">その結果、Makefileが作成され、2つのコンテナが起動されました。一方は-nginxに向かうベンチマーク、もう一方はApacheです。</font><font style="vertical-align: inherit;">どちらも自己署名証明書でHTTP / 2をリッスンします。</font><font style="vertical-align: inherit;">最終的な稼働時間については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/flant/examples/tree/master/2019/09-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このリポジトリを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/flant/examples/tree/master/2019/09-"><font style="vertical-align: inherit;">て</font></a><font style="vertical-align: inherit;">ください</font><font style="vertical-align: inherit;">。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベンチマークを実行する</font></font><code>concurrency=200</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.1。</font><font style="vertical-align: inherit;">Nginx：</font></font><br>
 <br>
<pre><code class="plaintext hljs">Completed 0 requests<font></font>
Completed 1000 requests<font></font>
Completed 2000 requests<font></font>
Completed 3000 requests<font></font>
Completed 4000 requests<font></font>
Completed 5000 requests<font></font>
Completed 6000 requests<font></font>
Completed 7000 requests<font></font>
Completed 8000 requests<font></font>
Completed 9000 requests<font></font>
 <font></font>
----- Bench results begin -----<font></font>
Requests per second: 10336.09<font></font>
Failed requests: 1623<font></font>
----- Bench results end -----</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1.2。</font><font style="vertical-align: inherit;">Apache：</font></font><br>
 <br>
<pre><code class="plaintext hljs">…<font></font>
----- Bench results begin -----<font></font>
Requests per second: 11427.60<font></font>
Failed requests: 0<font></font>
----- Bench results end -----</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ここでのポイントは、ApacheでのHTTP / 2のそれほど厳密ではない実装であると想定しています。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
試みはしてみましょう</font></font><code>concurrency=1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.1。</font><font style="vertical-align: inherit;">Nginx：</font></font><br>
 <br>
<pre><code class="plaintext hljs">…<font></font>
----- Bench results begin -----<font></font>
Requests per second: 11274.92<font></font>
Failed requests: 4205<font></font>
----- Bench results end -----</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2.2。</font><font style="vertical-align: inherit;">Apache：</font></font><br>
 <br>
<pre><code class="plaintext hljs">…<font></font>
----- Bench results begin -----<font></font>
Requests per second: 11211.48<font></font>
Failed requests: 5<font></font>
----- Bench results end -----</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、結果が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">毎回再現されるわけで</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">ない</font></i><font style="vertical-align: inherit;">ことに注意してください</font><font style="vertical-align: inherit;">。一部の起動は問題なくパスします。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GolangのGitHubプロジェクトで問題を検索する</font><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃25009</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃32441が発生しました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それらを介して</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PR 903</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に行きました</font><font style="vertical-align: inherit;">：GoでHTTP / 2をデフォルトで無効にする！</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のWebサーバーのアーキテクチャに深く掘り下げることなく、ベンチマーク結果を解釈することは非常に困難です。</font><font style="vertical-align: inherit;">特定のケースでは、指定されたサービスに対してHTTP / 2を無効にするだけで十分でした。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歴史第2号 </font><font style="vertical-align: inherit;">古いsymfonyと歩哨</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトの1つでは、symfony PHPフレームワーク（v2.3）の非常に古いバージョンがまだ機能しています。</font><font style="vertical-align: inherit;">古いRavenクライアントとPHPの自己記述クラスが「セットで」アタッチされているため、デバッグが少し複雑になります。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロジェクトのアプリケーションのエラーを追跡するために使用されるKubernetesのサービスの1つをSentryに転送した後、イベントが突然停止しました。</font><font style="vertical-align: inherit;">この動作を再現するために、Sentry Webサイトの例を使用して、2つのオプションを取り、Sentry設定からDSNをコピーしました。</font><font style="vertical-align: inherit;">視覚的にはすべてが機能しました。エラーメッセージ（申し立てによると）が次々と送信されました。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptチェックオプション：</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;!DOCTYPE html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://browser.sentry-cdn.com/5.6.3/bundle.min.js"</span> <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-/Cqa/8kaWn7emdqIBLk3AkFMAHBk0LObErtMhO+hr52CntkaurEnihPmqYj3uJho"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>JavaScript in Body<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span>A Paragraph.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"myFunction()"</span>&gt;</span>Try it<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    Sentry.init({ <span class="hljs-attr">dsn</span>: <span class="hljs-string">'http://33dddd76e9f0c4ddcdb51@sentry.kube-dev.test//12'</span> });
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Caught'</span>);
    } <span class="hljs-keyword">catch</span> (err) {
      Sentry.captureException(err);
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様にPythonでは：</font></font><br>
<br>
<pre><code class="python hljs"> <span class="hljs-keyword">from</span> sentry_sdk <span class="hljs-keyword">import</span> init, capture_message<font></font>
 <font></font>
init(<span class="hljs-string">"http://33dddd76e9f0c4ddcdb51@sentry.kube-dev.test//12"</span>)<font></font>
capture_message(<span class="hljs-string">"Hello World"</span>)  <span class="hljs-comment"># Will create an event.</span>
<span class="hljs-keyword">raise</span> ValueError()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、彼らはセントリーに入らなかった。</font><font style="vertical-align: inherit;">メッセージを送信すると、クライアントが問題のハッシュを即座に生成するため、メッセージが送信されたように錯覚します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、問題は非常に簡単に解決されました。イベントの送信はHTTPになり、SentryサービスはHTTPSのみをリッスンしました。</font><font style="vertical-align: inherit;">HTTPからHTTPSへのリダイレクトが提供されましたが、古いクライアント（symfony側のコード）はリダイレクトを追跡できませんでした。デフォルトでは、これらの日は予期されていません。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歴史第3号 </font><font style="vertical-align: inherit;">RabbitMQとサードパーティのプロキシ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのプロジェクトでは、Evotorクラウドを使用してレジを接続します。</font><font style="vertical-align: inherit;">実際、これはプロキシとして機能します。EvotorからのPOSTリクエストは、RabbitMQに直接送信されます-WebSocket </font><font style="vertical-align: inherit;">接続を</font><font style="vertical-align: inherit;">介して</font><font style="vertical-align: inherit;">実装され</font><font style="vertical-align: inherit;">た</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STOMPプラグインを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介して</font><font style="vertical-align: inherit;">。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者の1人がPostmanを使用してテストリクエストを行い、期待される回答を受け取りましたが</font></font><code>200 OK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クラウドを介したリクエストは予期しないものをもたらしました</font></font><code>405 Method Not Allowed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">200 OK</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">source: kubernetes <font></font>
namespace: kube-nginx-ingress <font></font>
host: kube-node-2 <font></font>
pod_name: nginx-2bpt7 <font></font>
container_name: nginx <font></font>
stream: stdout <font></font>
app: nginx <font></font>
controller-revision-hash: 5bdbfd564 <font></font>
pod-template-generation: 25 <font></font>
time: 2019-09-10T09:42:50+00:00 <font></font>
request_id: 1271dba228f0943ab2df0196ff0d7f67 <font></font>
user: client <font></font>
address: 100.200.300.400 <font></font>
protocol: HTTP/1.1 <font></font>
scheme: http <font></font>
method: POST <font></font>
host: rmq-review.kube-dev.client.domain <font></font>
path: /api/queues/vhost/queue.gen.eeeeffff111:1.onlinecassa:55556666/get <font></font>
request_query: <font></font>
referrer: <font></font>
user_agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36 <font></font>
content_kind: cacheable <font></font>
namespace: review <font></font>
ingress: stomp-ws <font></font>
service: rabbitmq <font></font>
service_port: stats <font></font>
vhost: rmq-review.kube-dev.client.domain <font></font>
location: / nginx_upstream_addr: 10.127.1.1:15672 <font></font>
nginx_upstream_bytes_received: 2538 <font></font>
nginx_upstream_response_time: 0.008 <font></font>
nginx_upstream_status: 200 <font></font>
bytes_received: 757 <font></font>
bytes_sent: 1254 <font></font>
request_time: 0 <font></font>
status: 200 <font></font>
upstream_response_time: 0 <font></font>
upstream_retries: 0</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">405メソッドは許可されていません</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">source: kubernetes <font></font>
namespace: kube-nginx-ingress <font></font>
host: kube-node-1 <font></font>
pod_name: nginx-4xx6h <font></font>
container_name: nginx <font></font>
stream: stdout <font></font>
app: nginx <font></font>
controller-revision-hash: 5bdbfd564 <font></font>
pod-template-generation: 25 <font></font>
time: 2019-09-10T09:46:26+00:00 <font></font>
request_id: b8dd789604864c95b4af499ed6805630 <font></font>
user: client <font></font>
address: 200.100.300.400 <font></font>
protocol: HTTP/1.1 <font></font>
scheme: http <font></font>
method: POST <font></font>
host: rmq-review.kube-dev.client.domain <font></font>
path: /api/queues/vhost/queue.gen.ef7fb93387ca9b544fc1ecd581cad4a9:1.onlinecassa:55556666/get <font></font>
request_query: <font></font>
referrer: <font></font>
user_agent: ru.evotor.proxy/37 <font></font>
content_kind: cache-headers-not-present <font></font>
namespace: review <font></font>
ingress: stomp-ws <font></font>
service: rabbitmq <font></font>
service_port: stats <font></font>
vhost: rmq-review.kube-dev.client.domain <font></font>
location: / <font></font>
nginx_upstream_addr: 10.127.1.1:15672 <font></font>
nginx_upstream_bytes_received: 134 <font></font>
nginx_upstream_response_time: 0.004 <font></font>
nginx_upstream_status: 405 <font></font>
bytes_received: 878 <font></font>
bytes_sent: 137 <font></font>
request_time: 0 <font></font>
status: 405 <font></font>
upstream_response_time: 0 <font></font>
upstream_retries: 0</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EvotorからのTcpdump要求</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">200.100.300.400.21519 &gt; 100.200.400.300: Flags [P.], cksum 0x8e29 (correct), seq 1:879, ack 1, win 221, options [nop,nop,TS val 2313007107 ecr 79097074], length 878: HTTP, length: 878<font></font>
    POST /api/queues//vhost/queue.gen.ef7fb93387ca9b544fc1ecd581cad4a9:1.onlinecassa:55556666/get HTTP/1.1<font></font>
    device-model: ST-5<font></font>
    device-os: android<font></font>
    Accept-Encoding: gzip<font></font>
    content-type: application/json; charset=utf-8<font></font>
    connection: close<font></font>
    accept: application/json<font></font>
    x-original-forwarded-for: 10.11.12.13<font></font>
    originhost: rmq-review.kube-dev.client.domain<font></font>
    x-original-uri: /api/v2/apps/e114-aaef-bbbb-beee-abadada44ae/requests<font></font>
    x-scheme: https<font></font>
    accept-encoding: gzip<font></font>
    user-agent: ru.evotor.proxy/37<font></font>
    Authorization: Basic<font></font>
    X-Evotor-Store-Uuid: 20180417-73DC-40C9-80B7-00E990B77D2D<font></font>
    X-Evotor-Device-Uuid: 20190909-A47B-40EA-806A-F7BC33833270<font></font>
    X-Evotor-User-Id: 01-000000000147888<font></font>
    Content-Length: 58<font></font>
    Host: rmq-review.kube-dev.client.domain<font></font>
 <font></font>
    {"count":1,"encoding":"auto","ackmode":"ack_requeue_true"}[!http]<font></font>
12:53:30.095385 IP (tos 0x0, ttl 64, id 5512, offset 0, flags [DF], proto TCP (6), length 52)<font></font>
   100.200.400.300:80 &gt; 200.100.300.400.21519: Flags [.], cksum 0xfa81 (incorrect -&gt; 0x3c87), seq 1, ack 879, win 60, options [nop,nop,TS val 79097122 ecr 2313007107], length 0<font></font>
12:53:30.096876 IP (tos 0x0, ttl 64, id 5513, offset 0, flags [DF], proto TCP (6), length 189)<font></font>
   100.200.400.300:80 &gt; 200.100.300.400.21519: Flags [P.], cksum 0xfb0a (incorrect -&gt; 0x03b9), seq 1:138, ack 879, win 60, options [nop,nop,TS val 79097123 ecr 2313007107], length 137: HTTP, length: 137<font></font>
    HTTP/1.1 405 Method Not Allowed<font></font>
    Date: Tue, 10 Sep 2019 10:53:30 GMT<font></font>
    Content-Length: 0<font></font>
    Connection: close<font></font>
    allow: HEAD, GET, OPTIONS<font></font>
</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curlによるTcpdump要求</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">777.10.74.11.61211 &gt; 100.200.400.300:80: Flags [P.], cksum 0x32a8 (correct), seq 1:397, ack 1, win 2052, options [nop,nop,TS val 734012594 ecr 4012360530], length 396: HTTP, length: 396<font></font>
    POST /api/queues/%2Fvhost/queue.gen.ef7fb93387ca9b544fc1ecd581cad4a9:1.onlinecassa:55556666/get HTTP/1.1<font></font>
    Host: rmq-review.kube-dev.client.domain<font></font>
    User-Agent: curl/7.54.0<font></font>
    Authorization: Basic =<font></font>
    Content-Type: application/json<font></font>
    Accept: application/json<font></font>
    Content-Length: 58<font></font>
 <font></font>
    {"count":1,"ackmode":"ack_requeue_true","encoding":"auto"}[!http]<font></font>
12:40:11.001442 IP (tos 0x0, ttl 64, id 50844, offset 0, flags [DF], proto TCP (6), length 52)<font></font>
   100.200.400.300:80 &gt; 777.10.74.11.61211: Flags [.], cksum 0x2d01 (incorrect -&gt; 0xfa25), seq 1, ack 397, win 59, options [nop,nop,TS val 4012360590 ecr 734012594], length 0<font></font>
12:40:11.017065 IP (tos 0x0, ttl 64, id 50845, offset 0, flags [DF], proto TCP (6), length 2621)<font></font>
   100.200.400.300:80 &gt; 777.10.74.11.61211: Flags [P.], cksum 0x370a (incorrect -&gt; 0x6872), seq 1:2570, ack 397, win 59, options [nop,nop,TS val 4012360605 ecr 734012594], length 2569: HTTP, length: 2569<font></font>
    HTTP/1.1 200 OK<font></font>
    Date: Tue, 10 Sep 2019 10:40:11 GMT<font></font>
    Content-Type: application/json<font></font>
    Content-Length: 2348<font></font>
    Connection: keep-alive<font></font>
    Vary: Accept-Encoding<font></font>
    cache-control: no-cache<font></font>
    vary: accept, accept-encoding, origin</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 訓練を受けたエンジニアの目には、すぐに違いがわかります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> カール： </font></font><code>POST /api/queues/%2Fclient…</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 喚起者： </font></font><code>POST /api/queues//client…</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 問題は、ある場合には理解不能なものが到着したことで（RabbitMQの場合）</font></font><code>//vhost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、別の場合には通常の方法</font></font><code>%2Fvhost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">エンコードされた</font><font style="vertical-align: inherit;">ことです。</font></font><br>
 <br>
<pre><code class="plaintext hljs"># rabbitmqctl list_vhosts<font></font>
Listing vhosts ...<font></font>
/vhost</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、問題</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、このトピックでのRabbitMQプロジェクトの、開発者は説明します：</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％-encodingは置き換えません。</font><font style="vertical-align: inherit;">これはURLパスエンコーディングの標準的な方法であり、古くから使用されてきました。</font><font style="vertical-align: inherit;">そのようなURLパスが「悪意のある」と想定する最も人気のあるフレームワークでさえ、HTTPベースのツールの％-encodingがなくなると仮定すると、近視眼的で素朴です。</font><font style="vertical-align: inherit;">デフォルトの仮想ホスト名は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任意の値</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（スラッシュまたは％-encodingを必要とするその他の文字を使用しないものなど）に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">変更</font></a><font style="vertical-align: inherit;">でき</font><font style="vertical-align: inherit;">、少なくともRabbitMQのPivotal BOSHリリースでは、デフォルトの仮想ホストはデプロイメント時に削除されます。 。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（エンジニアに連絡した後、Evotor側で）エンジニアのさらなる関与なしに問題は解決しました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歴史第4号 </font><font style="vertical-align: inherit;">PostgreSQLのジーン</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostgreSQLには非常に便利なインデックスがあり、忘れられることがよくあります。この話は、アプリケーションのブレーキに関する不満から始まりました。では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近の記事、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このような状況を分析するときに我々はすでにおおよそのワークフローの例を挙げました。そして、ここで私たちのAPM- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atatus-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は次の画像を示しました：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t9/yy/gz/t9yygzwma4valcmjnpt-lbfxpdi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
午前10時に、アプリケーションがデータベースの操作に費やす時間が増加します。予想通り、DBMSの応答が遅いことが原因です。私たちにとって、クエリの分析、問題領域の特定、インデックスの「ぶら下がり」は、理解できるルーチンです。私たちが使用している</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">okmeter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、その中で</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">非常</font></a><font style="vertical-align: inherit;">に役立ち</font><font style="vertical-align: inherit;">ます。サーバーのステータスを監視するための標準的なパネルと、</font><font style="vertical-align: inherit;">問題のあるメトリックの出力を使用して、独自の</font><font style="vertical-align: inherit;">パネルを</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すばやく</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構築する</font><font style="vertical-align: inherit;">機能の両方</font><font style="vertical-align: inherit;">があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5r/8h/2p/5r8h2pfgbo_rxewvzgf_3jyjcii.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CPU負荷グラフは、データベースの1つが100％負荷されていることを示しています。</font><font style="vertical-align: inherit;">どうして？</font><font style="vertical-align: inherit;">新しいPostgreSQLパネルは次のことを教えてくれます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i0/pq/de/i0pqdejoizrp518mnsnguoljkdg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">原因はすぐに明らかになり</font><font style="vertical-align: inherit;">ます-CPU </font><font style="vertical-align: inherit;">の主な消費者：</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> u.* <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">users</span> u <span class="hljs-keyword">WHERE</span>
  u.id = ? &amp; u.field_1 = ? <span class="hljs-keyword">AND</span> u.field_2 <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%somestring%'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> u.id <span class="hljs-keyword">DESC</span> <span class="hljs-keyword">LIMIT</span> ?</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題のあるクエリの作業計画を検討すると、テーブルのインデックス付きフィールドによるフィルタリングでは選択範囲が大きすぎることがわかりました。データベースは</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font><font style="vertical-align: inherit;">によって70千を超える行を受け取り</font></font><code>field_1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それらの中から部分文字列を検索します。</font><font style="vertical-align: inherit;">これは、ことが判明し</font></font><code>LIKE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それがどのクエリ実行とCPU負荷の増大に深刻な景気後退につながるテキスト大量のデータのためのサブを検索します。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで、アーキテクチャの問題が除外されていないこと（アプリケーションロジックの修正またはフルテキストエンジンさえ必要です...）に気付くことができますが、やり直す時間はなく、15分前にすぐに機能するはずでした。この場合、検索ワードは実際には識別子であり（なぜ別のフィールドにないのですか？..）、行の単位を生成します。実際、このテキストフィールドにインデックスを作成できれば、他のすべてが不要になります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
現在の最終的な解決策は、フィールドごとにGINインデックスを追加すること</font></font><code>field_2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。それがその時のヒーローです。同じ「魔神」です。つまり、GINはフルテキスト検索で非常に優れたパフォーマンスを発揮し、定性的に高速化する一種のインデックスです。詳細については、たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このすばらしい資料を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font><font style="vertical-align: inherit;">。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/sm/lw/qd/smlwqdjwdystzwexf0rfz-hk6qq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、この単純な操作により、余分な負荷を取り除くことができ、それによってクライアントの費用を節約できました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歴史第5号 </font><font style="vertical-align: inherit;">nginxでs3をキャッシュする</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S3互換のクラウドストレージは、多くのプロジェクトで使用されているテクノロジーのリストに長い間含まれています。サイトやニューラルネットワークデータに信頼できる画像ストレージが必要な場合は、Amazon S3が最適です。ストレージの信頼性と高いデータ可用性（そして「庭をフェンスで囲む」必要性の欠如）は魅惑的です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、お金を節約するために-通常、S3の支払いは要求とトラフィックのためであるため、適切な解決策は、ストレージの前にキャッシングプロキシサーバーをインストールすることです。この方法は、たとえば、各ページに多数あるユーザーのアバターの場合、コストを削減します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nginxを使用して、キャッシング、再検証、バックグラウンド更新、およびその他のブラックジャックを使用してプロキシを設定するよりも簡単に思えますか？ただし、他の場所と同様に、いくつかのニュアンスがあります...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャッシングを使用したこのようなプロキシーのおおよその構成は、次のようになります。</font></font><br>
<br>
<pre><code class="plaintext hljs">proxy_cache_key $uri;<font></font>
proxy_cache_methods GET HEAD;<font></font>
proxy_cache_lock on;<font></font>
proxy_cache_revalidate on;<font></font>
proxy_cache_background_update on;<font></font>
proxy_cache_use_stale updating error timeout invalid_header http_500 http_502 http_503 http_504;<font></font>
proxy_cache_valid 200 1h;<font></font>
 <font></font>
location ~ ^/(?&lt;bucket&gt;avatars|images)/(?&lt;filename&gt;.+)$ {<font></font>
  set $upstream $bucket.s3.amazonaws.com;<font></font>
  proxy_pass http://$upstream/$filename;<font></font>
  proxy_set_header Host $upstream;<font></font>
  proxy_cache aws;<font></font>
 <font></font>
  proxy_cache_valid 200 1h;<font></font>
  proxy_cache_valid 404 60s;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、それは一般的に機能しました。写真が表示され、キャッシュはすべて問題ありませんでしたが、AWS S3クライアントで問題が表面化しました。</font><font style="vertical-align: inherit;">特に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aws-sdk-phpの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアントが機能しなくなりました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">分析nginxログは、HEADが上流の戻りコード403を要求し、特定のエラー応答を含むことを示しました</font></font><code>SignatureDoesNotMatch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">nginxが上流にGETリクエストを行うことを確認したとき、すべてが適切に配置されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、S3クライアントは各リクエストに署名し、サーバーはこの署名をチェックします。</font><font style="vertical-align: inherit;">単純なプロキシの場合、すべてが正常に機能します。リクエストは変更されずにサーバーに到達します。</font><font style="vertical-align: inherit;">ただし、キャッシュが有効な場合、nginxはバックエンドでの作業の最適化を開始し、HEADリクエストをGETで置き換えます。</font><font style="vertical-align: inherit;">ロジックは単純です。オブジェクト全体を取得して保存してから、すべてのHEADリクエストをキャッシュから取得することをお勧めします。</font><font style="vertical-align: inherit;">ただし、この場合、署名されているため、リクエストは変更できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的に2つの解決策があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S3クライアントをプロキシ経由で駆動しないでください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「必要な場合」-オプション</font></font><code>proxy_cache_convert_head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">オフ</font><font style="vertical-align: inherit;">にし</font></font><code>$request_method</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て、キャッシュキーに</font><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">この場合、nginxはHEADリクエストを「そのまま」送信し​​、それらへの応答を個別にキャッシュします。</font></font></li>
</ol><br>
 <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歴史第6号 </font><font style="vertical-align: inherit;">DDoSおよびGoogleユーザーコンテンツ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日曜日の夜は-突然まで問題を予告しませんでした！ -エッジサーバーでのキャッシュ無効化のキューが増えていないため、実際のユーザーにトラフィックが流れます。これは非常に奇妙な症状です。結局のところ、キャッシュはメモリに実装されており、ハードドライブに関連付けられていません。使用するアーキテクチャでのキャッシュのフラッシュは安価な操作であるため、このエラーは非常に高い負荷の場合にのみ発生します。これは、同じサーバーが500エラー</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（以下のグラフの赤い線のスパイク）の表示</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を通知し始めたという事実によって確認されました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3-/cr/ec/3-crecmpt9kbmt7o_6gujxwiru0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような急激な急増により、CPUオーバーランが発生しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/vn/cw/2tvncw9vkrti9ysqmil7bmcztk0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単な分析により、リクエストがメインドメインに到達していないことがわかりましたが、ログから、デフォルトの仮想ホストに分類されることが明らかになりました。</font><font style="vertical-align: inherit;">その過程で、多くのアメリカ人ユーザーがロシアのリソースを利用するようになりました。</font><font style="vertical-align: inherit;">そのような状況は常に疑問を投げかけます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nginxログからデータを収集したところ、特定のボットネットを扱っていることがわかりました。</font></font><br>
 <br>
<pre><code class="plaintext hljs">35.222.30.127 US [15/Sep/2019:21:40:00 +0300] GET "http://example.ru/?ITPDH=XHJI" HTTP/1.1 301 178 "http://example.ru/ORQHYGJES" "Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)" "-" "upcache=-" "upaddr=-" "upstatus=-" "uplen=-" "uptime=-" spdy="" "loc=wide-closed.example.ru.undef" "rewrited=/?ITPDH=XHJI" "redirect=http://www.example.ru/?ITPDH=XHJI" ancient=1 cipher=- "LM=-;EXP=-;CC=-"<font></font>
107.178.215.0 US [15/Sep/2019:21:40:00 +0300] GET "http://example.ru/?REVQSD=VQPYFLAJZ" HTTP/1.1 301 178 "http://www.usatoday.com/search/results?q=MLAJSBZAK" "Mozilla/5.0 (Windows; U; MSIE 7.0; Windows NT 6.0; en-US)" "-" "upcache=-" "upaddr=-" "upstatus=-" "uplen=-" "uptime=-" spdy="" "loc=wide-closed.example.ru.undef" "rewrited=/?REVQSD=VQPYFLAJZ" "redirect=http://www.example.ru/?REVQSD=VQPYFLAJZ" ancient=1 cipher=- "LM=-;EXP=-;CC=-"<font></font>
107.178.215.0 US [15/Sep/2019:21:40:00 +0300] GET "http://example.ru/?MPYGEXB=OMJ" HTTP/1.1 301 178 "http://engadget.search.aol.com/search?q=MIWTYEDX" "Mozilla/5.0 (Windows; U; Windows NT 6.1; en; rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)" "-" "upcache=-" "upaddr=-" "upstatus=-" "uplen=-" "uptime=-" spdy="" "loc=wide-closed.example.ru.undef" "rewrited=/?MPYGEXB=OMJ" "redirect=http://www.example.ru/?MPYGEXB=OMJ" ancient=1 cipher=- "LM=-;EXP=-;CC=-"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明確なパターンがログにトレースされます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 真のユーザーエージェント。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> キャッシュに入らないようにするランダムなGET引数を使用したルートURLへのリクエスト。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> refererは、リクエストが検索エンジンからのものであることを示します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはアドレスを収集し、その所属を確認します-それらはすべて</font></font><code>googleusercontent.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つのサブネット（107.178.192.0/18と34.64.0.0/10）に</font><font style="vertical-align: inherit;">属してい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これらのサブネットには、GCE仮想マシンと、ページ変換などのさまざまなサービスが含まれています。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸い、攻撃はそれほど長くは続きませんでした（約1時間）、徐々に減少しました。</font><font style="vertical-align: inherit;">Google内の保護アルゴリズムが機能しているようで、問題は「単独で」解決されました。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この攻撃は破壊的ではありませんでしたが、将来に役立つ質問を投げかけました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜアンチDDが機能しなかったのですか？</font><font style="vertical-align: inherit;">対応するリクエストを送信した外部サービスが使用されます。</font><font style="vertical-align: inherit;">しかし、たくさんのアドレスがありました...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将来的にこれから身を守る方法は？</font><font style="vertical-align: inherit;">私たちのケースでは、地理的にアクセスを閉じるオプションも可能です。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Kubernetes:  HTTP-   </a>»;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6      Kubernetes [  ]</a>»;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">3      Linux</a>».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471880/index.html">オタクハロウィーンのアイデア、またはGeekMaskを選ぶ時間</a></li>
<li><a href="../ja471882/index.html">GitHubのPHPイベント、講演者、主催者の公開リスト</a></li>
<li><a href="../ja471884/index.html">Microsoft SQL Serverデータベースを管理するための10の無料ApexSQLユーティリティ</a></li>
<li><a href="../ja471886/index.html">VMmanager 6：ボックスの紹介と前世代との比較</a></li>
<li><a href="../ja471890/index.html">変分推論-それは何で、何を食べますか？</a></li>
<li><a href="../ja471896/index.html">Inside Playbook。新しいAnsible Engine 2.9のネットワーク機能</a></li>
<li><a href="../ja471904/index.html">HPE InfoSightのリソースプランナー</a></li>
<li><a href="../ja471906/index.html">不適切な最適化の危険性</a></li>
<li><a href="../ja471908/index.html">素数の予想外の美しさ</a></li>
<li><a href="../ja471912/index.html">英語学習：語彙を増やすための7つの実践的な方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>