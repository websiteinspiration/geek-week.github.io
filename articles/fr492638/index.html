<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèº üë®‚Äçüë®‚Äçüëß‚Äçüëß üçï Faire √©voluer une application Redux avec des canards üë∑ üôÜ ‚¨áÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En pr√©vision du d√©but du cours, "d√©veloppeur React.js" a pr√©par√© une traduction de mat√©riel utile.
 
 
 
 
 Comment √©volue le front-end de votre appli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Faire √©voluer une application Redux avec des canards</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492638/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En pr√©vision du d√©but du cours, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"d√©veloppeur React.js" a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pr√©par√© une traduction de mat√©riel utile.</font></font><br>
</i></b><br>
<br>
<img src="https://habrastorage.org/webt/v4/na/xg/v4naxgyec9pamduy0s1qf7gjqyc.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment √©volue le front-end de votre application? Comment rendre votre code compatible six mois plus tard? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En 2015, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pris d'assaut le monde du d√©veloppement frontal et s'est impos√© comme une norme au-del√† de React. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La soci√©t√© pour laquelle je travaille a r√©cemment termin√© la refactorisation d'une grande base de code sur React, o√π nous avons impl√©ment√© le redux au lieu du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reflux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons d√ª franchir cette √©tape car aller de l'avant n'√©tait pas possible sans une application bien structur√©e et un ensemble de r√®gles claires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La base de code existe depuis plus de deux ans et le reflux y est depuis le tout d√©but. Nous avons d√ª changer le code, fortement li√© aux composants React, auxquels personne n'avait touch√© depuis plus d'un an.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la base de l'exp√©rience du travail effectu√©, j'ai cr√©√© ce </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©f√©rentiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui aidera √† expliquer notre approche de l'organisation du code sur redux.</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous en apprendrez plus sur redux, les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©ducteurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vous commencez avec des exemples simples. </font><font style="vertical-align: inherit;">De nombreux tutoriels disponibles aujourd'hui ne les d√©passent pas. </font><font style="vertical-align: inherit;">Cependant, si vous cr√©ez quelque chose de plus compliqu√© sur Redux qu'une liste de t√¢ches, vous aurez besoin d'un moyen raisonnable de mettre √† l'√©chelle votre base de code au fil du temps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelqu'un a dit un jour qu'en informatique, il n'y a pas de t√¢che plus difficile que de donner des noms de choses diff√©rentes. </font><font style="vertical-align: inherit;">Je ne pouvais pas √™tre en d√©saccord. </font><font style="vertical-align: inherit;">Dans ce cas, la structuration des dossiers et l'organisation des fichiers seront en deuxi√®me position. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons comment nous abordions l'organisation du code.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonction vs fonctionnalit√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Il existe deux approches g√©n√©ralement accept√©es pour organiser les applications: la fonction d'abord et la fonction d'abord. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Dans la capture d'√©cran √† gauche, la structure des dossiers est organis√©e selon le principe de la fonction en premier et √† droite, de la fonctionnalit√© en premier. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/le/wb/urlewbt5etkrntpbqzlygb0yzlo.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 La fonction d'abord signifie que vos r√©pertoires de niveau sup√©rieur sont nomm√©s en fonction des fichiers qu'ils contiennent. Vous avez donc: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conteneurs, composants, actions, r√©ducteurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne change pas du tout. Au fur et √† mesure que votre application se d√©veloppe et que de nouvelles fonctionnalit√©s apparaissent, vous ajouterez des fichiers dans les m√™mes dossiers. Par cons√©quent, vous devrez faire d√©filer le contenu de l'un des dossiers pendant une longue p√©riode pour trouver le fichier souhait√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre probl√®me est la combinaison de dossiers. L'un de vos fils d'application n√©cessitera probablement l'acc√®s aux fichiers de tous les dossiers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des avantages de cette approche est qu'elle peut isoler, dans notre cas, React de Redux. Par cons√©quent, si vous souhaitez modifier la biblioth√®que de gestion d'√©tat, vous saurez de quels dossiers vous aurez besoin. Si vous devez modifier la biblioth√®que de vues, vous pouvez laisser les dossiers avec redux intacts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fonctionnalit√© en premier signifie que les r√©pertoires de niveau sup√©rieur seront nomm√©s conform√©ment √† la fonctionnalit√© principale de l'application: produit, panier, session. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche √©volue beaucoup mieux, car chaque nouvelle fonctionnalit√© se trouve dans un nouveau dossier. Cependant, vous n'avez pas de s√©paration entre les composants Redux et React. Changer l'un d'eux √† long terme n'est pas une t√¢che facile.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous aurez des fichiers qui n'appartiendront √† aucune fonction. </font><font style="vertical-align: inherit;">En cons√©quence, tout se r√©sume au dossier commun ou partag√©, car vous souhaitez √©galement utiliser votre code dans diff√©rentes fonctionnalit√©s de votre application.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combiner le meilleur de deux mondes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Bien que ce ne soit pas le sujet de l'article, je tiens √† dire que les fichiers de gestion d'√©tat des fichiers d'interface utilisateur doivent √™tre stock√©s s√©par√©ment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pensez √† votre application √† long terme. Imaginez ce qui arrive √† votre code si vous passez de React √† autre chose. Ou pensez √† la fa√ßon dont votre base de code utilisera ReactNative en parall√®le avec la version Web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au c≈ìur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de notre approche se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trouve le principe de l'isolement du code React dans un dossier appel√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vues</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et du code redux dans un autre dossier appel√© redux. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette s√©paration au niveau d'entr√©e nous donne la flexibilit√© d'organiser les diff√©rentes parties de l'application de mani√®re compl√®tement diff√©rente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le dossier des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vues</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous prenons en charge l'organisation des fichiers fonctionnels. </font><font style="vertical-align: inherit;">Dans le contexte de React, cela semble naturel: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pages, mises en page, composants, exhausteurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de ne pas devenir fou du nombre de fichiers dans un dossier, vous pouvez utiliser l'approche de fonctionnalit√© dans ces dossiers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant ce temps, dans le dossier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√©sentation des re-ducks</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Chaque fonction d'application doit correspondre √† des actions et des r√©ducteurs distincts, de sorte qu'il est logique d'appliquer l'approche ax√©e sur les fonctionnalit√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'approche modulaire d' </font><font style="vertical-align: inherit;">origine des </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canards</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , il est facile de travailler avec Redux et offre un moyen structur√© pour ajouter de </font><font style="vertical-align: inherit;">nouvelles fonctionnalit√©s √† votre application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, vous vouliez comprendre ce qui se passe lorsque vous mettez √† l'√©chelle l'application. </font><font style="vertical-align: inherit;">Nous avons r√©alis√© que la fa√ßon d'organiser un fichier par fonctionnalit√© encombre l'application et rend son support probl√©matique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canards sont donc apparus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La solution √©tait de diviser la fonctionnalit√© en dossiers de canard.</font></font><br>
<br>
<pre><code class="javascript hljs">duck/<font></font>
‚îú‚îÄ‚îÄ actions.js<font></font>
‚îú‚îÄ‚îÄ index.js<font></font>
‚îú‚îÄ‚îÄ operations.js<font></font>
‚îú‚îÄ‚îÄ reducers.js<font></font>
‚îú‚îÄ‚îÄ selectors.js<font></font>
‚îú‚îÄ‚îÄ tests.js<font></font>
‚îú‚îÄ‚îÄ types.js<font></font>
‚îú‚îÄ‚îÄ utils.js</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Le dossier canard devrait:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contient toute la logique de traitement d'un seul concept de votre application, par exemple: produit, panier, session, etc.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contient le fichier index.js, qui est export√© selon les r√®gles de canard.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockez le code dans un seul fichier qui fait un travail similaire, comme les r√©ducteurs, les s√©lecteurs et les actions.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contient des tests li√©s au canard.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, dans cet exemple, nous n'avons pas utilis√© d'abstractions construites au-dessus de redux. </font><font style="vertical-align: inherit;">Lors de la cr√©ation d'un logiciel, il est important de commencer avec le moins d'abstraction. </font><font style="vertical-align: inherit;">Ainsi, vous verrez que la valeur de vos abstractions ne d√©passe pas leurs avantages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous voulez vous assurer que l'abstraction est mauvaise, regardez cette vid√©o de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheng Lou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons le contenu de chaque fichier.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les types</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">types</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contient les noms des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que vous ex√©cutez dans votre application. </font><font style="vertical-align: inherit;">Comme bonne pratique, vous devriez essayer de couvrir l'espace de noms correspondant √† la fonction √† laquelle ils appartiennent. </font><font style="vertical-align: inherit;">Cette approche vous aidera lors du d√©bogage d'applications complexes.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> QUACK = <span class="hljs-string">"app/duck/QUACK"</span>;
<span class="hljs-keyword">const</span> SWIM = <span class="hljs-string">"app/duck/SWIM"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    QUACK,<font></font>
    SWIM<font></font>
};</code></pre><br>
 <h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actions</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ce fichier contient toutes les fonctions du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr√©ateur d'action</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> types <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> quack = <span class="hljs-function"><span class="hljs-params">( )</span> =&gt;</span> ( {
    <span class="hljs-attr">type</span>: types.QUACK<font></font>
} );<font></font>
<font></font>
<span class="hljs-keyword">const</span> swim = <span class="hljs-function">(<span class="hljs-params"> distance </span>) =&gt;</span> ( {
    <span class="hljs-attr">type</span>: types.SWIM,
    <span class="hljs-attr">payload</span>: {<font></font>
        distance<font></font>
    }<font></font>
} );<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    swim,<font></font>
    quack<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Notez que toutes les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actions sont</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> repr√©sent√©es par des fonctions, m√™me si elles ne sont pas param√©tr√©es. </font><font style="vertical-align: inherit;">Une approche coh√©rente est la priorit√© la plus √©lev√©e pour une grande base de code.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les op√©rations</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Pour repr√©senter la cha√Æne d'op√©rations ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les Op√©rations</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), vous aurez besoin du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">middleware</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> redux </font><font style="vertical-align: inherit;">, pour am√©liorer la fonction de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la r√©partition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Des exemples populaires sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-thunk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-saga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-observable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre cas, le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-thunk est utilis√©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous devons s√©parer les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thunks</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr√©ateurs d'actions,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√™me au prix d'√©crire du code suppl√©mentaire. Par cons√©quent, nous d√©finirons l'op√©ration comme un wrapper sur les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si l'op√©ration n'envoie qu'une seule </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-√†-dire qu'elle n'utilise pas r√©ellement </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-thunk</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous envoyons la fonction de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr√©ateur d'action</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si l'op√©ration utilise du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thunk</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , elle peut envoyer de nombreuses </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et les lier √† l'aide de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">promesses</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">"./actions"</span>;<font></font>
<font></font>
<span class="hljs-comment">// This is a link to an action defined in actions.js.</span>
<span class="hljs-keyword">const</span> simpleQuack = actions.quack;<font></font>
<font></font>
<span class="hljs-comment">// This is a thunk which dispatches multiple actions from actions.js</span>
<span class="hljs-keyword">const</span> complexQuack = <span class="hljs-function">(<span class="hljs-params"> distance </span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"> dispatch </span>) =&gt;</span> {<font></font>
    dispatch( actions.quack( ) ).then( <span class="hljs-function"><span class="hljs-params">( )</span> =&gt;</span> {<font></font>
        dispatch( actions.swim( distance ) );<font></font>
        dispatch( <span class="hljs-comment">/* any action */</span> );<font></font>
    } );<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    simpleQuack,<font></font>
    complexQuack<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Appelez-les op√©rations, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thunks</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sagas </font><font style="vertical-align: inherit;">, </font><i><font style="vertical-align: inherit;">epics</font></i><font style="vertical-align: inherit;"> , comme vous le souhaitez. </font><font style="vertical-align: inherit;">Identifiez simplement les principes de d√©nomination et respectez-les. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la toute fin, nous parlerons d'index et verrons que les op√©rations font partie de l'interface publique de canard. </font><font style="vertical-align: inherit;">Les actions sont encapsul√©es, les op√©rations deviennent accessibles de l'ext√©rieur.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©ducteurs</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Si vous avez une fonction plus multiforme, vous devez absolument utiliser plusieurs </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©ducteurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour g√©rer des structures d'√©tats complexes. De plus, n'ayez pas peur d'utiliser autant de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moissonneuses-batteuses</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que n√©cessaire. Cela permettra de travailler plus librement avec les structures d'objets d'√©tat.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { combineReducers } <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>;
<span class="hljs-keyword">import</span> types <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;<font></font>
<font></font>
<span class="hljs-comment">/* State Shape
{
    quacking: bool,
    distance: number
}
*/</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> quackReducer = <span class="hljs-function">(<span class="hljs-params"> state = <span class="hljs-literal">false</span>, action </span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span>( action.type ) {
        <span class="hljs-keyword">case</span> types.QUACK: <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-comment">/* ... */</span>
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> distanceReducer = <span class="hljs-function">(<span class="hljs-params"> state = <span class="hljs-number">0</span>, action </span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span>( action.type ) {
        <span class="hljs-keyword">case</span> types.SWIM: <span class="hljs-keyword">return</span> state + action.payload.distance;
        <span class="hljs-comment">/* ... */</span>
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> reducer = combineReducers( {
    <span class="hljs-attr">quacking</span>: quackReducer,
    <span class="hljs-attr">distance</span>: distanceReducer<font></font>
} );<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> reducer;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Dans une grande application, l'arborescence d'√©tat comprendra au moins trois niveaux. </font><font style="vertical-align: inherit;">Les fonctions de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©duction</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> doivent √™tre aussi petites que possible et g√©rer uniquement des constructions de donn√©es simples. </font><font style="vertical-align: inherit;">La fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">combineReducers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est tout ce dont vous avez besoin pour cr√©er une structure d'√©tat flexible et maintenable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consultez l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemple de projet √†</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> part enti√®re </font><font style="vertical-align: inherit;">et voyez comment utiliser </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">combineReducers correctement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en particulier dans les fichiers </font></font><code>reducers.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>store.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o√π nous </font><i><font style="vertical-align: inherit;">construisons l'</font></i><font style="vertical-align: inherit;"> arborescence d'√©tat.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©lecteurs</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Avec le s√©lecteur d'op√©rations ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√©lecteur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) font partie du canard de l'interface publique. </font><font style="vertical-align: inherit;">La diff√©rence entre les op√©rations et les s√©lecteurs est similaire au mod√®le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CQRS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fonctions de s√©lection prennent une tranche de l'√©tat de l'application et renvoient certaines donn√©es en fonction de celui-ci. </font><font style="vertical-align: inherit;">Ils n'apportent jamais de modifications √† l'√©tat de l'application.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkIfDuckIsInRange</span>(<span class="hljs-params"> duck </span>) </span>{
    <span class="hljs-keyword">return</span> duck.distance &gt; <span class="hljs-number">1000</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    checkIfDuckIsInRange<font></font>
};</code></pre><br>
 <h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indice</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ce fichier indique ce qui sera export√© du dossier duck. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est-il:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporte le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©ducteur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonction </font><font style="vertical-align: inherit;">de canard par d√©faut.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporte les s√©lecteurs et les op√©rations en tant qu'exportations enregistr√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporte les types si n√©cessaire dans d'autres canards.</font></font></li>
</ul><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./reducers"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> duckSelectors } <span class="hljs-keyword">from</span> <span class="hljs-string">"./selectors"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> duckOperations } <span class="hljs-keyword">from</span> <span class="hljs-string">"./operations"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> duckTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> reducer;</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tests</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'avantage d'utiliser Redux avec le framework ducks est que vous pouvez √©crire des tests juste apr√®s le code que vous souhaitez tester. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tester votre code sur Redux est assez simple:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> expect <span class="hljs-keyword">from</span> <span class="hljs-string">"expect.js"</span>;
<span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./reducers"</span>;
<span class="hljs-keyword">import</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">"./actions"</span>;<font></font>
<font></font>
describe( <span class="hljs-string">"duck reducer"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> </span>) </span>{<font></font>
    describe( <span class="hljs-string">"quack"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> </span>) </span>{
        <span class="hljs-keyword">const</span> quack = actions.quack( );
        <span class="hljs-keyword">const</span> initialState = <span class="hljs-literal">false</span>;<font></font>
<font></font>
        <span class="hljs-keyword">const</span> result = reducer( initialState, quack );<font></font>
<font></font>
        it( <span class="hljs-string">"should quack"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> </span>) </span>{<font></font>
            expect( result ).to.be( <span class="hljs-literal">true</span> ) ;<font></font>
        } );<font></font>
    } );<font></font>
} );</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce fichier, vous pouvez √©crire des tests pour les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©ducteurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , les op√©rations, les s√©lecteurs, etc. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pourrais √©crire un article s√©par√© sur les avantages du test de code, mais ils sont d√©j√† suffisants, alors testez simplement votre code!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est tout</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La bonne nouvelle √† propos des re-ducks est que vous pouvez utiliser le m√™me mod√®le pour tout votre code redux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'approche de partitionnement bas√©e sur les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonctionnalit√©s</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de votre code redux aide votre application √† rester flexible et √©volutive √† mesure qu'elle grandit. </font><font style="vertical-align: inherit;">Une approche de s√©paration bas√©e sur les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonctions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonctionnera </font><font style="vertical-align: inherit;">bien lors de la construction de petits composants communs √† diff√©rentes parties de l'application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez jeter un ≈ìil √† la base de code compl√®te </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-redux-example </font></font></i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">N'oubliez pas que le r√©f√©rentiel fonctionne activement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment organisez-vous vos applications redux? </font><font style="vertical-align: inherit;">J'ai h√¢te de recevoir vos commentaires sur l'approche d√©crite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rendez-vous sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parcours</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492612/index.html">Plafonnier d√©coratif Leek Celebrity</a></li>
<li><a href="../fr492616/index.html">Packer, Terraform et Ansible: d√©ploiement du cluster Kubernetes en une heure</a></li>
<li><a href="../fr492628/index.html">Intervalle de confiance pour le nombre de patients atteints de coronavirus (calcul de la mortalit√©)</a></li>
<li><a href="../fr492632/index.html">Petites entreprises en quarantaine: la panique est l'ennemi de la raison</a></li>
<li><a href="../fr492636/index.html">Que signifie √™tre efficace?</a></li>
<li><a href="../fr492642/index.html">Cr√©ez une architecture √©volutive et r√©siliente avec des microservices dynamiques</a></li>
<li><a href="../fr492652/index.html">Jeu de cartes "Fool" sur deux M5Stack</a></li>
<li><a href="../fr492658/index.html">Je suis all√© √† une t√©l√©commande - lanc√© un podcast: que lire pour les d√©butants - 5 livres √©prouv√©s</a></li>
<li><a href="../fr492660/index.html">Le monde entier contre le coronavirus. Intel Stories</a></li>
<li><a href="../fr492662/index.html">Comment j'ai diffus√© une conf√©rence universitaire pour la premi√®re fois</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>