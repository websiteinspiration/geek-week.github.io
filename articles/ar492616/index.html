<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คฉ ๐ฉโโ๏ธ ๐ฉ๐ผโ๐พ ุจุงูุฑ ุ Terraform ู Ansible: ูุดุฑ ูุฌููุนุฉ Kubernetes ูู ุบุถูู ุณุงุนุฉ ๐ธ ๐ ๐คฝ๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจูุง ุ ุงุณูู ุฃูุฏุฑู ุดูููู ุ ุฃุณุงุนุฏ ุงูุดุฑูุงุช ุงููุจูุฑุฉ ูู ุชุฑุญูู ุงูุฎุฏูุงุช ูุงูุฃูุธูุฉ ุฅูู CROC Cloud. ุจุงูุชุนุงูู ูุน ุฒููุงุก ูู Southbridge ุ ุงูุฐู ูุฏูุฑ ุฏูุฑุงุช Kuberne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุจุงูุฑ ุ Terraform ู Ansible: ูุดุฑ ูุฌููุนุฉ Kubernetes ูู ุบุถูู ุณุงุนุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croccloudteam/blog/492616/"><img src="https://habrastorage.org/webt/0m/2c/zt/0m2cztx1saqv1v7e8a3mrliht_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุญุจูุง ุ ุงุณูู ุฃูุฏุฑู ุดูููู ุ ุฃุณุงุนุฏ ุงูุดุฑูุงุช ุงููุจูุฑุฉ ูู ุชุฑุญูู ุงูุฎุฏูุงุช ูุงูุฃูุธูุฉ ุฅูู CROC Cloud. ุจุงูุชุนุงูู ูุน ุฒููุงุก ูู Southbridge ุ ุงูุฐู ูุฏูุฑ ุฏูุฑุงุช Kubernetes ูู ูุฑูุฒ ุชุฏุฑูุจ Slerm ุ ุฃุฌุฑููุง ูุคุฎุฑูุง ูุฏูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช ูุนููุงุฆูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฑุช ุฃุฎุฐ ููุงุฏ ูู ูุญุงุถุฑุฉ ููุชุงุฒุฉ ูุฏููุง Pavel Selivanov ููุชุงุจุฉ ููุดูุฑ ูุฃููุฆู ุงูุฐูู ุจุฏุฃูุง ููุชู ูู ุงูุนูู ูุน ุฃุฏูุงุช ุงูุชุฒููุฏ ุงูุณุญุงุจูุฉ ููุง ูุนุฑููู ูู ุฃูู ูุจุฏุฃูู. ูุฐูู ุ ุณุฃุชุญุฏุซ ุนู ูุฌููุนุฉ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ ูู ุชุฏุฑูุจูุง ูุฅูุชุงุฌ CROC Cloud. ุฏุนููุง ูุชุญุฏุซ ุนู ุงูุฃุณุงููุจ ุงูุญุฏูุซุฉ ูุฅุฏุงุฑุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ ุ ุนู ูุฌููุนุฉ ูู ููููุงุช ุจุงูุฑ ุ Terraform ู Ansible ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฃุฏุงุฉ Kubeadm ุงูุชู ุณูููู ุจุชุซุจูุชูุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุช ูุทุน ุณูููู ููุงู ุงููุซูุฑ ูู ุงููุต ูุงูุชููููุงุช. </font><font style="vertical-align: inherit;">ููุงู ุงููุซูุฑ ูู ุงูููุงุฏ ุ ูุฐูู ุฃุถูุช ุงูุชููู ุจุนุฏ ุงููุดุฑ. </font><font style="vertical-align: inherit;">ูููุง ุฃูุถูุง ุจุฅุนุฏุงุฏ ูุณุชูุฏุน ุตุบูุฑ ูุถุน ููู ูู ูุง ูุญุชุงุฌู ููุดุฑ ุชุฏุฑูุจูุง. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุนุทู ุฃุณูุงุก ุงูุฏุฌุงุฌ ุ </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงููุนู ุงููุฎุจูุฒ ุฃูุซุฑ ุตุญุฉ ูู ุงูููููุฉ ุ </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญู ูุจุฏุฃ ุงููุฑู. </font><font style="vertical-align: inherit;">Packer </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform - ุงูุจููุฉ ุงูุชุญุชูุฉ ูุฑูุฒ </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุทูุงู </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจููุฉ ุงููุชูุฉ Terraform Cluster Kubernetes </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubeadm </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository ูุน ุฌููุน ุงููููุงุช</font></font></a><br>
 <a name="habracut"></a><br>
<a name="1"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุนุท ุฃุณูุงุก ููุฏุฌุงุฌ</font></font></h2><br>
<img src="https://habrastorage.org/webt/j0/0w/v1/j00wv1h7pcevviakk2iocfleqjk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุงูุนุฏูุฏ ูู ุงูููุงููู ุงููุฎุชููุฉ ูุฅุฏุงุฑุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ. ูุงุญุฏ ูููู ูุณูู ุงูุญููุงูุงุช ุงูุฃูููุฉ ููุงุจู. ุงููุงุดูุฉ ุ ุฃู "ุงูุญููุงูุงุช ุงูุฃูููุฉ ุถุฏ ุงููุงุดูุฉ". ูุตู ูุฐุง ุงูููููู ููุฌูู ูุชุนุงุฑุถูู ููุจููุฉ ุงูุชุญุชูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฎูู ุฃู ูุฏููุง ููุจ ููุถู. ูุญู ูุนุชูู ุจูุง ุ ููุฃุฎุฐู ุฅูู ุงูุทุจูุจ ุงูุจูุทุฑู ุ ูููุดุท ุงููุฑุงุก ุ ูุจุดูู ุนุงู ููู ูุฑูุฏ ุจุงููุณุจุฉ ููุง ุจูู ุงูุนุฏูุฏ ูู ุงูููุงุจ ุงูุฃุฎุฑู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุฉ ุฃุฎุฑู ุ ูุฏููุง ุญุธูุฑุฉ ุฏุฌุงุฌ. ูุญู ุฃูุถูุง ูุนุชูู ุจุงูุฏุฌุงุฌ ูุงูุชุบุฐูุฉ ูุงูุญุฑุงุฑุฉ ููุญุงูู ุฎูู ุงูุธุฑูู ุงูุฃูุซุฑ ุฑุงุญุฉ. ููุน ุฐูู ุ ูุฅู ุงูุฏุฌุงุฌ ูู ููุฑุฏ ูุฌููู ููุนูุง ูุง ุจุงููุณุจุฉ ููุง ุ ูุงูุฐู ูุคุฏู ูุธููุชู ุงููุชูุซูุฉ ูู ูุถุน ุงูุจูุถ ุ ููู ุฃุญุณู ุงูุฃุญูุงู ุ ูุทูู ุนูููุง ุงุณู "ุฐูู ุงููุณุญูู ุงูุฃุณูุฏ ุงูุฐู ูุณูุฑ ุฏุงุฆููุง ุงูุฃุณููุช". ุฅุฐุง ุชูููุช ุงูุฏุฌุงุฌ ุนู ูุถุน ุงูุจูุถ ุฃู ูุณุฑุช ูุฎูุจู ุ ูุนูู ุงูุฃุฑุฌุญ ุฃููุง ุณุชุฒูุฏูุง ุจุจุณุงุทุฉ ุจูุฑู ูุฐูุฐ ููุบุฏุงุก. ูู ุงููุงูุน ุ ูุญู ูุง ููุชู ุจูุตูุฑ ุงูุฏุฌุงุฌ ุงููุฑุฏู ุ ูููู ุญูู ุญุธูุฑุฉ ุงูุฏุฌุงุฌ ููู ูุฎุท ุฅูุชุงุฌ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฌุงู ุชูููููุฌูุง ุงููุนูููุงุช ุ ุจุฏุฃ ุชุทุจูู ููุฌ ููุงุซู ุจูุฌุฑุฏ ุธููุฑ ุงูุฃุฏูุงุช ุงูุชู ุฎูุถุช ุนุชุจุฉ ุงูุฏุฎูู ูููููุฏุณูู ูุฌุนูุช ูู ุงููููู ูุดุฑ ุงููุฌููุนุงุช ุงููุนูุฏุฉ ูุตูุงูุชูุง ูู ุงููุถุน ุงูุชููุงุฆู ุจุงููุงูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุณุงุจู ุ ูุงู ูุฏููุง ุนุฏุฏ ูููู ูู ุงูุฎูุงุฏู ุงูุชู ุชุชู ูุฑุงูุจุชูุง ูุถุจุทูุง ูุฏูููุง ูุงูุนูุงูุฉ ุจูุง ุจูู ุทุฑููุฉ ููููุฉ. ูู ุงููุฑุงูุจุฉ ุ ุชููุถ ุงูุณุฌูุงุช ูู ุฎูุงุฏู Cthulhu ู Aylith ู Dagon. ุงูุชูุงููุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ุฏุฎูุช ุงููุญุงูุงุฉ ุงูุงูุชุฑุงุถูุฉ ุญูุงุชูุง ุจููุฉ ุ ูุฃุนุทุช ุฃุณูุงุก ุฃุนูุงู Lovecraft ู Star Trek ุงูุทุฑูู ุฅูู "vlg-vlt-vault01.company.ru" ุงูุฃูุซุฑ ูุงุฆุฏุฉ. ููุงู ุงููุซูุฑ ูู ุงูุฎูุงุฏู ุ ููููุง ูุง ุฒููุง ูุฑูุน ุงูุฎุฏูุงุช ูุฏูููุง ุจุดูู ุฃู ุจุขุฎุฑ ุ ููุง ูุฒูู ุงููุดุงูู ุนูู ูู ุฌูุงุฒ ุฅุฐุง ูุฒู ุงูุฃูุฑ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุชุฒุงูู ููุฌ ุงูุญูุงุธ ุนูู ุงูุจููุฉ ุงูุชุญุชูุฉ ุชูุงููุง ูุน ุงูุจุฑูุฌุฉ. </font><font style="vertical-align: inherit;">ูุถูู ูุณุชูู ุขุฎุฑ ูู ุงูุชุฌุฑูุฏ ููุชููู ุนู ุงูุฅุฒุนุงุฌ ุจุดุฃู ุงูุนูุฏ ุงููุฑุฏูุฉ. </font><font style="vertical-align: inherit;">ูุญุชูู ูู ูุงุญุฏ ุนูู ููุฑุณ ูุฌููู ุจุฏูุงู ูู ุงูุงุณู ุ ููู ุญุงูุฉ ูุฌูุฏ ูุดููุฉ ุ ุชูุชู ุงูุขูุฉ ุงูุงูุชุฑุงุถูุฉ ูุชุฑุชูุน ูู ููุทุฉ ุงูุนูู. </font><font style="vertical-align: inherit;">ููุงู ุฃุฏูุงุช ุชุณูุญ ูู ุจุชูููุฐ ูุฐุง ุงูููุฌ. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ุงูุฃุฏุงุฉ ุงูุฃููู ูู CROC Cloud ุ ูุงูุซุงููุฉ ูู Terraform.</font></font><br>
<br>
<a name="2"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู ุงููุฎุจูุฒ ุฃูุซุฑ ุตุญุฉ ูู ุงูููููุฉ</font></font></h2><br>
<img src="https://habrastorage.org/webt/hs/pp/oa/hsppoaujv0lhrk0u3dt6ust0rry.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฅุฏุงุฑุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ ุ ููุงู ุชุจุงูู ุจูู ุงูููุฌูู ูุฑูุฏ ููุงุจู. ูุฎุจูุฒ ุ ุฃู "ูููู ุนูู ุฎุจุฒ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุดูุฑ ูููุฌ Fried ุฅูู ุฃู ูุฏูู ุตูุฑุฉ ููุธุงู ุชุดุบูู ุงููุงููููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ CentOS 7. ุซู ุ ุจุนุฏ ูุดุฑ ูุธุงู ุงูุชุดุบูู ุ ูุณุชุฎุฏู ูุธุงู ุฅุฏุงุฑุฉ ุงูุชูููู ูุฅุญุถุงุฑ ุงููุธุงู ุฅูู ุงูุญุงูุฉ ุงููุณุชูุฏูุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ุงุณุชุฎุฏุงู Ansible ุฃู Chef ุฃู Puppet ุฃู SaltStack.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูุก ูุนูู ุจุดูู ุฌูุฏ ุ ุฎุงุตุฉ ุนูุฏูุง ูุง ูููู ููุงู ุงููุซูุฑ ูู ุงูุฎูุงุฏู. ุนูุฏูุง ุชููู ููุงู ุญุงุฌุฉ ุฅูู ูุดุฑ ูุงุฆู ุ ูุฅููุง ููุงุฌู ูุดููุงุช ูู ุงูุฃุฏุงุก. ุชุจุฏุฃ ุงููุฆุงุช ูู ุงูุฎูุงุฏู ุจุดูู ูุชุฒุงูู ูู ุงูุชูุงู ููุงุฑุฏ ุงูุดุจูุฉ ููุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ู IOPS ูู ุนูููุฉ ุทุฑุญ ุงูุนุฏูุฏ ูู ุงูุญุฒู ุงูุฌุฏูุฏุฉ. ุนูุงูุฉ ุนูู ุฐูู ุ ูููู ุชุฃุฌูู ูุฐู ุงูุนูููุฉ ููุชุฑุฉ ุทูููุฉ ุฅูู ุญุฏ ูุง. ุจุงุฎุชุตุงุฑ ุ ุชุนูู ุงูุฏุงุฆุฑุฉ ุจุดูู ูุทูู ุ ูููููุง ููุณุช ูุซูุฑุฉ ููุงูุชูุงู ูู ูุฌูุฉ ูุธุฑ ุชูููู ููุช ุงูุชููู ุนู ุงูุนูู ุฃุซูุงุก ุงูุญูุงุฏุซ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุดูุฑ ููุฌ Baked ุฅูู ุฃู ูุฏูู ุตูุฑ ูุธุงู ุชุดุบูู "ูุฎุจูุฒุฉ" ุฌุงูุฒุฉ ููุช ุจุงููุนู ุจุชุซุจูุช ุฌููุน ุงูุญุฒู ุงูุถุฑูุฑูุฉ ูููุง ุ ูููุช ุจุชูููู ุงูุชูููู ููู ุดูุก ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุนูุฏ ุงูุฅุฎุฑุงุฌ ุ ูุฏููุง ูููุฐุฌ ููุทุฉ ุชุฌุฑูุฏูุฉ ุ ุดุญุฐ ูุฃุฏุงุก ุจุนุถ ุงููุธุงุฆู. </font><font style="vertical-align: inherit;">ูุณุชุบุฑู ูุดุฑ ุงูุจููุฉ ุงูุชุญุชูุฉ ูู ูุฐู ุงูุตูุฑ ุงููุฎุจูุฒุฉ ููุชูุง ุฃูู ุจูุซูุฑ ููููู ููุช ุงูุชุนุทู ุฅูู ุงูุญุฏ ุงูุฃุฏูู. </font><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงู ุฃูุฏููููุฌูุฉ ูุดุงุจูุฉ ุฌุฏูุง ูู ุตูุฑ Docker ูุชุนุฏุฏุฉ ุงูุทุจูุงุช ุ ุญูุซ ูุง ุฃุญุฏ ููุฑุต ูุฏูู ุฏูู ุฏุงุน. </font><font style="vertical-align: inherit;">ูุณูุฑ ุงูุญุงููุฉ - ุงูุชูุทุช ูุงุญุฏุฉ ุฌุฏูุฏุฉ.</font></font><br>
<br>
<a name="3"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏุฃ ุงููุฑู. </font><font style="vertical-align: inherit;">ุจุงูุฑ</font></font></h2><br>
<img src="https://habrastorage.org/webt/xw/mr/im/xwmrimtkl-6qvfcrae3xo4zdf7q.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจููุชูุง ุงูุชุญุชูุฉ ุ ูุณุชุฎุฏู ุงูุนุฏูุฏ ูู ููุชุฌุงุช Hashicorp ุ ูุงูุชู ุชุจูู ุฃู ุจุนุถูุง ูุงุฌุญ ููุบุงูุฉ. ููุจุฏุฃ ุณุญุฑูุง ุจุฅุนุฏุงุฏ ุตูุฑุฉ ูุฎุจุฒูุง ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ Packer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชุฎุฏู Packer ูููุฐุฌ JSON ุ ุฃู ูููุงุช ุงูููุงุฐุฌ ุงูุชู ุชุญุชูู ุนูู ูุตู ููุง ูุฌุจ ุงูุญุตูู ุนููู ูุขูุฉ ุงูุชุฑุงุถูุฉ "ูุฎุจูุฒุฉ" (VM). ุจุนุฏ ุฅูุดุงุก ุงููุงูุจ ุ ูุชู ููู ุงูููู ุฅูู Packer ุ ููุชู ุชูููู ุงูุฃุฐููุงุช ุงููุงุฒูุฉ ูุฅูุดุงุก ุงูุฎุงุฏู ูู ุงูุณุญุงุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุญ ูู Packer ุฑูุน VMs ูุญูููุง ูู KVM ู VirtualBox ู Vagrant ู AWS ู GCP ู Alibaba Cloud ู OpenStack ููุง ุฅูู ุฐูู. ููู ููุงุฆู ููุนูู ูุน Packer ูู CROC Cloud ุ ูุธุฑูุง ูุฃูู ูุทุจู ูุงุฌูุงุช AWS ุ ุฃู ุฌููุน ุงูุฃุฏูุงุช ุงูุชู ุชูุช ูุชุงุจุชูุง ูู ุฃุฌู ุงูุนูู ูุน ุณุญุงุจุฉ CROC.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุชุนููู ุงูููุงูุจ ุงููุงุฒูุฉ ุ ูุฑูุน Packer VM CROC ูู ุงูุณุญุงุจุฉ ุ ูููุชุธุฑ ุฃู ูุจุฏุฃ ุ ุซู ูุฏุฎู "ุงููููุฑ" ุฅูู ูุฒูุฏ ุงูุนูู: ุฃุฏุงุฉ ูุณุงุนุฏุฉ ูุฌุจ ุฃู ุชููู ุฅุนุฏุงุฏ ุงูุตูุฑุฉ. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ูุฐุง Ansible ุ ุนูู ุงูุฑุบู ูู ุฃู ุจุงูุฑ ูููู ุฃู ูุนูู ูุน ุฎูุงุฑุงุช ุฃุฎุฑู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ูููู VM ุฌุงูุฒูุง ุ ููุดุฆ Packer ุตูุฑุชู ููุถุนู ูู CROC Cloud ุจุญูุซ ูููู ุฅุทูุงู VMs ุฃุฎุฑู ูู ููุณ ุงูุตูุฑุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู Base.json</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฌุฏ ูู ุจุฏุงูุฉ ุงูููู ูุณู ูุชู ููู ุงูุฅุนูุงู ุนู ุงููุชุบูุฑุงุช:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">"variables" : {<font></font>
 "source_ami_name": "{{env SOURCE_AMI_NAME}}",<font></font>
 "ami_name": "{{env AMI_NAME}}",<font></font>
 "instance_type": "{{env INSTANCE_TYPE}}",<font></font>
 "kubernetes_version": "{{env KUBERNETES_VERSION}}",<font></font>
 "docker_version": "{{env DOCKER_VERSION}}",<font></font>
 "subnet_id": "",<font></font>
 "availability_zone": "",<font></font>
},</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุชู ุชุนููู ุงููุฌููุนุฉ ุงูุฑุฆูุณูุฉ ูู ูุฐู ุงููุชุบูุฑุงุช ูู ููู settings.json. </font><font style="vertical-align: inherit;">ูุชูู ุงููุชุบูุฑุงุช ุงูุชู ุชุชุบูุฑ ุจุดูู ูุชูุฑุฑ ุฃูุซุฑ ููุงุกูุฉ ููุชุนููู ูู ูุญุฏุฉ ุงูุชุญูู ุนูุฏ ุจุฏุก Packer ูุจูุงุก ุตูุฑุฉ ุฌุฏูุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ูุณู ุงูุจูุงุฆูู:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">"builders" : [<font></font>
 {<font></font>
  "type": "amazon-ebs",<font></font>
  "region": "croc",<font></font>
  "skip_region_validation": true,<font></font>
  "custom_endpoint_ec2": "https://api.cloud.croc.ru",<font></font>
  "source_ami": "",<font></font>
  "source_ami_filter": {<font></font>
   "filters": {<font></font>
    "name": "{{user `source_ami_name`}}"<font></font>
    "state": "available",<font></font>
    "virtualization-type": "kvm-virtio"<font></font>
     },<font></font>
...</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ูุตู ุงูุณุญุจ ุงููุณุชูุฏูุฉ ูุฃุณููุจ ุจุฏุก ุชุดุบูู VM ููุง. ูุฑุฌู ููุงุญุธุฉ ุฃูู ูู ูุฐู ุงูุญุงูุฉ ูุชู ุงูุฅุนูุงู ุนู ููุน amazon-ebs ุ ูููู ููู ูุนูู Packer ูุน CROC Cloud ุ ูุชู ุชุนููู ุงูุนููุงู ุงูููุงุจู ูู custom_endpoint_ec2. ุชุญุชูู ุจููุชูุง ุงูุชุญุชูุฉ ุนูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุชูุงููุฉ ุชูุงููุง ุชูุฑูุจูุง ูุน Amazon Web Services ุ ูุฐูู ุฅุฐุง ูุงูุช ูุฏูู ุชุทูุฑุงุช ุฌุงูุฒุฉ ููุฐุง ุงููุธุงู ุงูุฃุณุงุณู ุ ูุนูุฏุฆุฐู ุณุชุญุชุงุฌ ูู ุงูุบุงูุจ ููุท ุฅูู ุชุญุฏูุฏ ููุทุฉ ุฅุฏุฎุงู ูุฎุตุตุฉ ููุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">api.cloud.croc.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุซุงููุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ูุณู source_ami_filter ุจุดูู ูููุตู. </font><font style="vertical-align: inherit;">ููุง ูุชู ุชุนููู ุงูุตูุฑุฉ ุงูุฃูููุฉ ููุฌูุงุฒ ุงูุธุงูุฑู ุ ุญูุซ ุณูุชู ุฅุฌุฑุงุก ุงูุชุบููุฑุงุช ุงููุงุฒูุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุชุทูุจ Packer ูุฌูุฏ AMI ููุฐู ุงูุตูุฑุฉ ุ ุฃู ูุนุฑููุง ุงูุนุดูุงุฆู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐุง ุงููุนุฑู ูุงุฏุฑูุง ูุง ูููู ูุนุฑูููุง ูุณุจููุง ููุชุบูุฑ ูุน ูู ุชุญุฏูุซ ุ ูู ูุชู ุชุนููู ูุตุฏุฑ AMI ููููุฉ ูุญุฏุฏุฉ ุ ูููู ููุชุบูุฑ source_ami_filter. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุงููุนููุฉ ุงููุญุฏุฏุฉ ูููุฑุดุญ ูู ุงุณู ุงูุตูุฑุฉ. </font><font style="vertical-align: inherit;">ูุชู ุชุนููู ูุฐุง ุงูุงุณู ูู ุงููุชุบูุฑุงุช ูู ุฎูุงู ููู settings.json. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุชู ุชุญุฏูุฏ ุฅุนุฏุงุฏุงุช VM: ูุชู ุชุญุฏูุฏ ููุน ุงููุซูู ูุงููุนุงูุฌ ูุญุฌู ุงูุฐุงูุฑุฉ ูุงููุณุงุญุฉ ุงููุฎุตุตุฉ ููุง ุฅูู ุฐูู:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">"instance_type": "{{user `instance_type`}}",<font></font>
"launch_block_device_mappings": [<font></font>
 {<font></font>
  "device_name": "disk1",<font></font>
  "volume_type": "io1",<font></font>
  "volume_size": "8",<font></font>
  "iops": "1000",<font></font>
  "delete_on_termination": "true"<font></font>
 }<font></font>
],</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ูู base.json ูู ูุนููุงุช ุงูุงุชุตุงู ุจุฌูุงุฒ VM ูุฐุง:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">"availability_zone": "{{user `availability_zone`}}",<font></font>
"subnet_id": "{{user `subnet_id`}}",<font></font>
"associate_public_ip_address": true,<font></font>
"ssh_username": "ec2-user",<font></font>
"ami_name": "{{user `ami_name`}}"<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููู ููุงุญุธุฉ ูุนููุฉ subnet_id ููุง. </font><font style="vertical-align: inherit;">ูุฌุจ ุถุจุทูุง ูุฏูููุง ุ ูุฃูู ุจุฏูู ุชุญุฏูุฏ ุงูุดุจูุฉ ุงููุฑุนูุฉ VM ูู ุณุญุงุจุฉ CROC ุ ูู ุงููุณุชุญูู ุฅูุดุงุกูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนููุฉ ุฃุฎุฑู ุชุชุทูุจ ุงูุฅุนุฏุงุฏ ุงููุณุจู ูู Associate_public_ip_address. </font><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุนููุงู IP ุฃุจูุถ ุ ูุฃูู ุจุนุฏ ุฅูุดุงุก VM Packer ุณูุจุฏุฃ ูู ุชุทุจูู ุงูุฅุนุฏุงุฏุงุช ุงูุถุฑูุฑูุฉ ูู ุฎูุงู Ansible. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุชุตู Ansible ุจู VM ุนุจุฑ SSH ุ ุงูุฃูุฑ ุงูุฐู ูุชุทูุจ ุนููุงู IP ุฃุจูุถ ุฃู VPN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุณู ุงูุฃุฎูุฑ ูู ุงููููุฑูู:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">"provisioners": [<font></font>
 {<font></font>
  "type": "ansible",<font></font>
  "playbook_file": "playbook.yml",<font></font>
  "extra_arguments": [<font></font>
   "--extra-vars",<font></font>
   "kubernetes_version={{user `kubernetes_version`}}",<font></font>
   "--extra-vars",<font></font>
   "docker_version={{user `docker_version`}}"<font></font>
   ]<font></font>
  }<font></font>
]</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุคูุงุก ูู ุงููููุฑูู ุ ุฃู ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ุงูุชู ูููู ุจูุง ุจุงูุฑ ุจุชูููู ุงูุฎุงุฏู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ูุฒูุฏ ููุน ุบูุฑ ูุฑุฆู. </font><font style="vertical-align: inherit;">ูููุง ููู ูุนููุฉ playbook_file ุ ุงูุชู ุชุญุฏุฏ ุงูุฃุฏูุงุฑ Ansible ูุงููุถูููู ุงูุฐูู ุณูุชู ุชุทุจูู ุงูุฃุฏูุงุฑ ุงููุญุฏุฏุฉ ุนูููู. </font><font style="vertical-align: inherit;">ูููุง ููู ุฎูุงุฑุงุช ุฅุถุงููุฉ ุฅุถุงููุฉ ุ ูุงูุชู ุ ุนูุฏ ุจุฏุก Ansible ุ ุชููู ุฅุตุฏุงุฑุงุช Kubernetes ู Docker.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุฏุงุฏ ุณุญุงุจุฉ CROC</font></font></h3><br>
 <img src="https://habrastorage.org/webt/23/_s/uo/23_suoef0us5ia6kjgn8xteomba.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ูููุงุช ุงูุชูููู ุงูุฎุงุตุฉ ุจูุง ุ ูุญุชุงุฌ ุฅูู ุงูููุงู ุจุจุนุถ ุงูุฃุดูุงุก ูู ุฌุงูุจ ููุญุฉ ุงูุชุญูู ุงูุณุญุงุจูุฉ ุญุชู ูุนูู ูู ุงูุณุญุฑ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ IP ุฃุจูุถ ูุฅูุดุงุก ุดุจูุฉ ูุฑุนูุฉ ุนุงููุฉ ุ ูุงูุชู ุณูุณุชุฎุฏููุง ุนูุฏ ุงููุดุฑ.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑ ููู ุชูููุฒ ุงูุนููุงู. </font><font style="vertical-align: inherit;">ุณูุฌุฏ Packer ุนููุงู IP ุงูุฃุจูุถ ุงููุทููุจ ุจููุฑุฏู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑ ููู ุฅูุดุงุก ุดุจูุฉ ูุฑุนูุฉ ูุญุฏุฏ ุดุจูุฉ ูุฑุนูุฉ ูููุงุน. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุฎ ูุนุฑู ุงูุดุจูุฉ ุงููุฑุนูุฉ. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏุฎู ูุฐู ุงููููุฉ ูู ูุนููุฉ subnet_id ูุฃูุฑ ุจุฏุก ุชุดุบูู Packer. </font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/24/0w/gp/240wgpvzi8oyy6ixwzdj8cougqk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูู ุจุชุดุบูู Packer. </font><font style="vertical-align: inherit;">ูุฌุฏ ุตูุฑุฉ VM ุงูุฃุตููุฉ ุ ูููุดุฑูุง ูู CROC Cloud ุ ููููู ุจุฏูุฑ Ansible ุนูููุง. </font><font style="vertical-align: inherit;">ูููู ุฑุคูุฉ ุงูุฌูุงุฒ ุงูุธุงูุฑู ุงูุฌุฏูุฏ ูู ุณุญุงุจุฉ CROC ูู ูุณู "ุงููุซููุงุช". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/aj/ui/olajuiprqljv50bi2opn4xlqcvs.png"> <br>
 <br>
<img src="https://habrastorage.org/webt/rq/0d/ri/rq0drint5cwvddjxbd7czcyfp9a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุนูู ุ ูููู Packer ุจุฅุฒุงูุฉ VM ูู ุงูุณุญุงุจุฉ ููุชุฑู ุตูุฑุฉ ุฌุงูุฒุฉ ูู ููุงููุง ุ ูุงูุชู ูููู ุงูุนุซูุฑ ุนูููุง ูู ูุณู "ุงูููุงูุจ". </font><font style="vertical-align: inherit;">ุณูุชู ุฅูุดุงุก ุงูุจููุฉ ุงูุชุญุชูุฉ Kubernetes ุจุฃููููุง ูู ูุฐู ุงูุตูุฑุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุฐูุฑูุง ุณุงุจููุง ุ ูุชู ุชูุฑูุฑ ูุนููุฉ playbook ูู ูุนููุงุช ูููุฑ Ansible. </font><font style="vertical-align: inherit;">ูุจุฏู ููู playbook.yml ููุณู ููุง ููู:</font></font><br>
<br>
<pre><code class="plaintext hljs">- hosts: all<font></font>
  become: true<font></font>
<font></font>
  roles:<font></font>
  | - base</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงูููู ุฅูู Ansible ุฃูู ูู ุงูุถุฑูุฑู ุนูู ุฌููุน ุงููุถูููู ุฃุฏุงุก ุฏูุฑ ุงููุงุนุฏุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ููุงู ุฃุฏูุงุฑ ุฃุฎุฑู ุ ููููู ุฅุถุงูุชูุง ุฅูู ููุณ ุงูููู ููุงุฆูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุญ ูู ุงูุฏูุฑ ุงูุฃุณุงุณู ุจุงูุญุตูู ุนูู ูุฌููุนุฉ ุฌุงูุฒุฉ ุจุงุณุชุฎุฏุงู ุฃูุฑ ูุงุญุฏ. </font><font style="vertical-align: inherit;">ููุถุญ ููู main.yml ูุง ูููู ุจู ูุฐุง ุงูุฏูุฑ ุจุงูุถุจุท:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูู ูุณุชูุฏุน Docker ุฅูู ูุงูุจ ุงููุธุงู. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถูู ูุณุชูุฏุน Kubernetes ุฅูู ูุงูุจ ุงููุธุงู. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุซุจูุช ุงูุญุฒู ุงููุงุฒูุฉ. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุฏููู ูุชูููู Docker daemon. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูููู ุงูุฌูุงุฒ ููููุง ูููู ุงูุชูููู daemon.json.j2. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญููู ููุงุฉ br_netfilter.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุถูู ุงูุฎูุงุฑุงุช ุงูุถุฑูุฑูุฉ ูู br_netfilter.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุถูู ููููุงุช Docker ู Kubelet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุชุดุบูู Docker ูู VM.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุชุดุบูู ุฃูุฑ ูููู ุจุชูุฒูู ุตูุฑ Docker ุงููุงุฒูุฉ ูุนูู Kubernetes.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชุนููู ุงูุญุฒู ุงููุซุจุชุฉ ูู ููู main.yml ูู ุฏููู vars. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ูููู ุจุชุซุจูุช ุญุฒูุฉ docker-ce ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุญุฒู ุงูุซูุงุซ ุงููุงุฒูุฉ ูุนูู Kubernetes: kubelet ู kubeadm ู kubectl.</font></font><br>
<br>
<a name="4"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform - ุงูุจููุฉ ุงูุชุญุชูุฉ ูุฑูุฒ</font></font></h2><br>
<img src="https://habrastorage.org/webt/o4/um/wi/o4umwitq-qh_zpwr0thmcmejis0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terraform ูู ุฃุฏุงุฉ ูุธูููุฉ ููุบุงูุฉ ูู HashiCorp ููุชูุณูู ุงูุณุญุงุจู. ูุฏููุง ูุบุฉ HCL ุงูุฎุงุตุฉ ุจูุง ุ ูุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ุบุงูุจูุง ูู ููุชุฌุงุช ุฃุฎุฑู ููุดุฑูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู HashiCorp Vault ู Consul. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุจุฏุฃ ุงูุฃุณุงุณู ูุดุงุจู ูุฌููุน ุฃูุธูุฉ ุฅุฏุงุฑุฉ ุงูุชูููู. ุฃูุช ุชุดูุฑ ุจุจุณุงุทุฉ ุฅูู ุญุงูุฉ ุงููุฏู ุจุงูุชูุณูู ุงููุทููุจ ุ ููุญุณุจ ุงููุธุงู ุฎูุงุฑุฒููุฉ ููููุฉ ุชุญููู ุฐูู. ุดูุก ุขุฎุฑ ูู ุฃูู ุนูู ุนูุณ Ansible ููุณู ุ ุงูุฐู ูุนูู ููุฑุจุน ุฃุณูุฏ ุนูู ูุชุจ ุงููุนุจ ุงููุนูุฏุฉ ุ ูููู ูู Terraform ุชูุฏูู ุฎุทุฉ ูู ุงูุฅุฌุฑุงุกุงุช ุงููุณุชูุจููุฉ ูู ุดูู ููุงุณุจ ููุชุญููู. ูุฐุง ููู ุนูุฏ ุงูุชุฎุทูุท ูุชุบููุฑุงุช ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุนูุฏุฉ. ุจุนุฏ ุชุฎุทูุท ุงูุฅุฌุฑุงุกุงุช ุงููุงุฒูุฉ ุ ูู ุจุชุดุบูู ุงูุฃูุฑ " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจูู terraform"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณูููู Terraform ุจูุดุฑ ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูููุถุญุฉ ูู ุงููููุงุช.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซู Packer ุ ุชุฏุนู ูุฐู ุงูุฃุฏุงุฉ AWS ู GCP ู Alibaba Cloud ู Azure ู OpenStack ู VMware ููุง ุฅูู ุฐูู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู ุงููุดุฑูุน</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ุฏููู Terraform ุนูู ูุฌููุนุฉ ูู ุงููููุงุช ุฐุงุช ุงูุงูุชุฏุงุฏ .tf. </font><font style="vertical-align: inherit;">ุชุตู ูุฐู ุงููููุงุช ููููุงุช ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุชู ุณูุนูู ูุนูุง. </font><font style="vertical-align: inherit;">ูุณูู ุงููุดุฑูุน ุฅูู ูุญุฏุงุช ูุธูููุฉ. </font><font style="vertical-align: inherit;">ูุซู ูุฐุง ุงููููู ูุฌุนู ูู ุงูุณูู ุงูุชุญูู ูู ุงูุฅุตุฏุงุฑุงุช ูุชุฌููุน ูู ูุดุฑูุน ูู ุงููุชู ุงููุฑูุญุฉ ุงูุฌุงูุฒุฉ. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ูุฎูุงุฑูุง ุ ูุฅู ุงููููู ุงูุชุงูู ููุงุณุจ:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main.tf</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">network.tf</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">security_groups.tf</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุฏ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุฏ</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ููู Main.tf</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุจุฏุฃ ุจุงูููู main.tf ุ ุญูุซ ูุชู ุชูููู ุงููุตูู ุฅูู ุงูุณุญุงุจุฉ. </font><font style="vertical-align: inherit;">ุนูู ูุฌู ุงูุฎุตูุต ุ ุชู ุงูุฅุนูุงู ุนู ุงูุนุฏูุฏ ูู ุงููุนููุงุช ุงูุชู ุชููู ุจุชูููู Terraform ููุนูู ูุน CROC Cloud:</font></font><br>
<br>
<pre><code class="plaintext hljs">provider "aws" {<font></font>
 endpoints {<font></font>
  ec2 = "https://api.cloud.croc.ru"<font></font>
 }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุตู ุงูููู ุฃูู ูุฌุจ ุนูู Terraform ุฅูุดุงุก ููุชุงุญ ุฎุงุต ุจุดูู ูุณุชูู ูุชุญููู ุฌุฒุกู ุงูุนุงู ุฅูู ุฌููุน ุงูุฎูุงุฏู. </font><font style="vertical-align: inherit;">ูุชู ุฅุตุฏุงุฑ ุงูููุชุงุญ ุงูุฎุงุต ููุณู ูู ููุงูุฉ Terraform:</font></font><br>
<br>
<pre><code class="plaintext hljs">resource "tls_private_key" "ssh" {<font></font>
 algorithm = "RSA"<font></font>
}<font></font>
resource "aws_key_pair" "kube" {<font></font>
 key_name = "terraform"<font></font>
 public_key = "${tls_private_key.ssh.public_key_openssh}"<font></font>
}<font></font>
output "ssh" {<font></font>
value = "${tls_private_key.ssh.private_key_pem}"<font></font>
}<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ููู network.tf</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุตู ูุฐุง ุงูููู ููููุงุช ุงูุดุจูุฉ ุงููุงุฒูุฉ ูุจุฏุก ุชุดุบูู ุงูุฌูุงุฒ ุงูุธุงูุฑู:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">data "aws_availability_zones" "az" {<font></font>
 state = "available"<font></font>
}<font></font>
resource "aws_vpc" "kube" {<font></font>
 cidr_block = "${var.vpc_cidr}"<font></font>
}<font></font>
resource "aws_eip" "master" {<font></font>
 count = "1"<font></font>
 vpc = true<font></font>
}<font></font>
resource "aws_subnet" "private" {<font></font>
 vpc_id = "${aws_vpc.kube.id}"<font></font>
 count = "${length(data.aws_availability_zones.az.names)}"<font></font>
 cidr_block = "${var.private_subnet_cidr_list[count.index]}"<font></font>
 availability_zone = "${data.aws_availability_zones.az.names[count.index]}"<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชุฎุฏู Terraform ููุนูู ูู ุงูููููุงุช:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุฑุฏ - ูุง ููุฒู ุฅูุดุงุคู ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจูุงูุงุช - ูุง ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนููู.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงูุญุงูุฉ ุ ุชุดูุฑ ูุนููุฉ ุงูุจูุงูุงุช ุฅูู ุฃู Terraform ูุฌุจ ุฃู ูุชููู ููุงุทู ุงูุชููุฑ ููุณุญุงุจุฉ ุงููุญุฏุฏุฉ ุ ูุงูุชู ุชููู ูู ุงูุญุงูุฉ ุงููุชุงุญุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุตู ููุฑุฏ ุงููุนููุฉ ุงูุฃูู ุฅูุดุงุก ุณุญุงุจุฉ ุฎุงุตุฉ ุงูุชุฑุงุถูุฉ ุ ูุชุตู ุงููุนููุฉ ุงูุชุงููุฉ ุฅูุดุงุก ุนููุงู IP ุงููุฑู. ุจุงููุณุจุฉ ููุฌููุนุฉ Kubernetes ุ ูุทูุจ ุนููุงู IP ูุฐุง ูู ุฎูุงู Terraform. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุงูุฉ ุนูู ุฐูู ุ ูู ูู ูู ููุงุทู ุฅููุงููุฉ ุงููุตูู ุ ููู ุงูููุช ุงูุญุงูู ูุฏู CROC ุฎุฏูุชุงู ุณุญุงุจูุชุงู ุ ูุชู ุฅูุดุงุก ุดุจูุชูุง ุงููุฑุนูุฉ ุงูุฎุงุตุฉ. ุชู ุงูุชุตุฑูุญ ุนู ููุฑุฏ ูู ููุน aws_subnet ุ ูุชู ุชูุฑูุฑ ูุนุฑู aws_vpc ุงูุฐู ุชู ุฅูุดุงุคู ูุฌุฒุก ูู ูุฐู ุงููุนููุฉ. ูููู ูุธุฑูุง ูุฃู ูุนุฑูู ูุฐุง ุงูููุฑุฏ ูุง ูุฒุงู ุบูุฑ ูุนุฑูู ุ ูุฅููุง ูุญุฏุฏ ุงููุนููุฉ aws_vpc.kube.id ุ ุงูุชู ุชุดูุฑ ุฅูู ุงูููุฑุฏ ุงูุฐู ุชู ุฅูุดุงุคู ูุชุญู ูุญู ุงููููุฉ ูู ุญูู ุงููุนุฑู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ุนุฏุฏ ุงูุดุจูุงุช ุงููุฑุนูุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ูุชู ุชุญุฏูุฏูุง ูู ุฎูุงู ุนุฏุฏ ููุงุทู ุชูุงูุฑ ุงูุณุญุงุจุฉ ููููู ุฃู ูุชุบูุฑ ูุฐุง ุงูุฑูู ุจูุฑูุฑ ุงูููุช ุ ูุชู ุชุนููู ูุฐู ุงููุนููุฉ ูู ุฎูุงู ูุชุบูุฑ ุงูุทูู (data.aws_availability_zones.az.names) ุ ุฃู ุทูู ูุงุฆูุฉ ููุงุทู ุงููุตูู ุงููุณุชููุฉ ูู ุฎูุงู ูุนููุฉ ุงูุจูุงูุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุนููุชุงู ุงูุฃุฎูุฑุชุงู ููุง cidr_block (ุงูุดุจูุฉ ุงููุฑุนูุฉ ุงููุฎุตุตุฉ) ูููุทูุฉ ุงูุชูุงูุฑ ุงูุชู ูุชู ุฅูุดุงุก ูุฐู ุงูุดุจูุฉ ุงููุฑุนูุฉ ูููุง. </font><font style="vertical-align: inherit;">ูุชู ุฃูุถูุง ุชุนููู ุงููุนููุฉ ุงูุฃุฎูุฑุฉ ุนุจุฑ ูุชุบูุฑ ูุฃุฎุฐ ูููุฉ ูู ูุงุฆูุฉ ุงูุจูุงูุงุช ููููุง ูููุฑุณ ุงูุญููุฉ ุงููุนููุฉ ุจูุงุณุทุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[count.index]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจููุฉ ููู Security_groups.tf</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌููุนุงุช ุงูุฃูุงู ูู ููุน ูู ุฌุฏุงุฑ ุงูุญูุงูุฉ ููุณุญุจ ุ ูุงูุชู ูุง ูููู ุฅูุดุงุคูุง ุฏุงุฎู VM ููุณูุง ุ ูููู ุจูุงุณุทุฉ ุงูุณุญุงุจุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุตู ุฌุฏุงุฑ ุงูุญูุงูุฉ ูุงุนุฏุชูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุดุฆ ุงููุงุนุฏุฉ ุงูุฃููู ูุฌููุนุฉ ุฃูุงู ุชุณูู kube. </font><font style="vertical-align: inherit;">ูุฌููุนุฉ ุงูุฃูุงู ูุฐู ูุทููุจุฉ ููุณูุงุญ ูุฌููุน ุญุฑูุฉ ุงููุฑูุฑ ุงูุตุงุฏุฑุฉ ูู ุนูุฏ Kubernetes ุ ููุง ูุณูุญ ููุนูุฏ ุจุงููุตูู ุฅูู ุงูุฅูุชุฑูุช ุจุญุฑูุฉ. </font><font style="vertical-align: inherit;">ููุณูุญ ุฃูุถูุง ุจุญุฑูุฉ ุงููุฑูุฑ ุงููุงุฑุฏุฉ ุฅูู ุนูุฏ Kubernetes ูู ุงูุดุจูุงุช ุงููุฑุนูุฉ ููุนูุฏ ููุณูุง. </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ูููู ุฃู ุชุนูู ุนูุฏ Kubernetes ูููุง ุจูููุง ุฏูู ูููุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุดุฆ ุงููุงุนุฏุฉ ุงูุซุงููุฉ ูุฌููุนุฉ ุฃูุงู ssh. </font><font style="vertical-align: inherit;">ูุณูุญ ุจุงุชุตุงู SSH ูู ุฃู ุนููุงู IP ุฅูู ุงููููุฐ 22 ูู ูุฌููุนุฉ Kubernetes VM:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">resource "aws_security_group" "kube" {<font></font>
 vpc_id = "${aws_vpc.kube.id}"<font></font>
 name   = "kubernetes"<font></font>
 # Allow all outbound<font></font>
 egress {<font></font>
  from_port = 0<font></font>
  to_port = 0<font></font>
  protocol = "-1"<font></font>
  cidr_blocks = ["0.0.0.0/0"]<font></font>
 }<font></font>
 # Allow all internal<font></font>
 ingress {<font></font>
  from_port = 0<font></font>
  to_port = 0<font></font>
  protocol = "-1"<font></font>
  cidr_blocks = ["${var.vpc_cidr}"]<font></font>
 }<font></font>
}<font></font>
resource "aws_security_group" "ssh" {<font></font>
 vpc_id = "${aws_vpc.kube.id}"<font></font>
 name   = "ssh"<font></font>
<font></font>
 # Allow all inbound<font></font>
 ingress {<font></font>
  from_port = 22<font></font>
  to_port = 22<font></font>
  protocol = "tcp"<font></font>
  cidr_blocks = ["0.0.0.0/0"]<font></font>
 }<font></font>
}</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุฏุฉ ุงูุฑุฆูุณูุฉ. </font><font style="vertical-align: inherit;">ูููู ููู Master.tf</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุตู ููู master.tf ุฅูุดุงุก ุงูุนุฏูุฏ ูู ุงูููุงูุจ ูุงููุซููุงุช. </font><font style="vertical-align: inherit;">ุนูู ูุฌู ุงูุฎุตูุต ุ ูุชู ุฅูุดุงุก ูุณุฎุฉ ุฑุฆูุณูุฉ Kubernetes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงููุชุบูุฑ ami ุจุชุนููู AMI ููุตูุฑุฉ ุงููุตุฏุฑ ูู VM. </font><font style="vertical-align: inherit;">ูููุง ููู ูุตู ูููุน VM ูุงูุดุจูุฉ ุงููุฑุนูุฉ ุงูุชู ูุชู ุฅูุดุงุคูุง ูููุง. </font><font style="vertical-align: inherit;">ุนูุฏ ุชุญุฏูุฏ ุดุจูุฉ ูุฑุนูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ุงูุฏูุฑุฉ ูุฑุฉ ุฃุฎุฑู ูุฅูุดุงุก VMs ูู ูู ููุทูุฉ ุชููุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุชู ุงูุฅุนูุงู ุนู ูุฌููุนุงุช ุงูุฃูุงู ุงููุณุชุฎุฏูุฉ ูุงูููุชุงุญ ุงูุฐู ุชู ุชุญุฏูุฏู ูู ููู main.tf. </font><font style="vertical-align: inherit;">ูุญุชูู ุญูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุนูู ุชูููุฐ ูุฌููุนุฉ ูู ุณูุฑุจุช ุณุญุงุจุฉ ุงูุชููุฆุฉ ุ ูุงูุชู ุณูุชู ุชูููุฐ ูุชุงุฆุฌูุง ูู ุงูุฌูุงุฒ ุงูุธุงูุฑู:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณุฏ</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">resource "aws_instance" "master" {<font></font>
 count = "1"<font></font>
 ami = "${var.kubernetes_ami}"<font></font>
 instance_type = "c3.large"<font></font>
 disable_api_termination = false<font></font>
 instance_initiated_shutdown_behavior = "terminate"<font></font>
 source_dest_check = false<font></font>
 subnet_id = "${aws_subnet.private.*.id[count.index % length(data.aws_availability_zones.az.names)]}"<font></font>
 associate_public_ip_address = true<font></font>
 vpc_security_group_ids = [<font></font>
  "${aws_security_group.ssh.id}",<font></font>
  "${aws_security_group.kube.id}",<font></font>
 ]<font></font>
 key_name = "${aws_key_pair.kube.key_name}"<font></font>
 user_data = "${data.template_cloudinit_config.master.rendered}"<font></font>
 monitoring = "true"<font></font>
}</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุฏุฉ ุงูุฑุฆูุณูุฉ. </font><font style="vertical-align: inherit;">ุงูุญุฑู ุงูุณุญุงุจู</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud-init</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฃุฏุงุฉ ุชุทูุฑูุง Canonical. </font><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุชูููุฐ ูุฌููุนุฉ ูุนููุฉ ูู ุงูุฃูุงูุฑ ุชููุงุฆููุง ูู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุณุญุงุจูุฉ ุจุนุฏ ุจุฏุก ุชุดุบูู VM. </font><font style="vertical-align: inherit;">ูุฏู Terraform ุขููุงุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุงูู ูุนูุง ุจุงุณุชุฎุฏุงู ุงูููุงูุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃูู ูู ุงููุณุชุญูู "ุฎุจุฒ" ูู ุดูุก ุถุฑูุฑู ูู VM ุ ุจุนุฏ ุงูุจุฏุก ุ ุงุนุชูุงุฏูุง ุนูู ููุนู ุ ูุฌุจ ุฅูุง ุงูุงูุถูุงู ุฅูู ูุฌููุนุฉ Kubernetes ุฃู ุชููุฆุฉ ูุฌููุนุฉ Kubernetes. </font><font style="vertical-align: inherit;">ูู ูุงูุจ ููู cloud-init ูุณูู master.tpl ุ ูุชู ุชูููุฐ ุงูุนุฏูุฏ ูู ุงูุฅุฌุฑุงุกุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. ูุชู ุชุณุฌูู ูููุงุช ุงูุชูููู ู Kubeadm:</font></font><br>
<br>
<pre><code class="plaintext hljs">#cloud-config<font></font>
<font></font>
    write_files:<font></font>
    - path: etc/kubernetes/kubeadm.conf<font></font>
      owner: root:root<font></font>
      content:<font></font>
    ...</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. ูุชู ุชูููุฐ ูุฌููุนุฉ ูู ุงูุฃูุงูุฑ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชู ูุชุงุจุฉ ุนููุงู IP ูููุนุงูุฌ ูู ููู ุงูุชูููู ุงูุฐู ุชู ุฅูุดุงุคู ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชู ุชููุฆุฉ ุงูุฑุฆูุณู ูู ูุฌููุนุฉ Kubernetes ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ kubeadm init ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุชูุฉ Kubernetes ุ ูุชู ุชุซุจูุช ุดุจูุฉ ุชุฑุงูุจ Calico ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ kubectl.</font></font></li>
</ul><br>
 <pre><code class="plaintext hljs">runcmd:<font></font>
         - sed -i "s/CONTROL_PLANE_IP/$(curl http://169.254.169.254/latest/meta-data-local-ipv4)/g" /etc/kubernetes/kubeadm.conf<font></font>
         - kubeadm init --config /etc/kubernetes/kubeadm.conf<font></font>
         - mkdir -p $HOME/.kube<font></font>
         - sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config<font></font>
         - sudo chown $(id -u):$(id -g) $HOME/.kube/config<font></font>
         - kubectl apply -f https://docs.projectcalico.org/v3.8/manifests/calico.yaml</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุชูููุฐ ุงูุฃูุงูุฑ ุนูุฏ ุจุฏุก ุชุดุบูู VM ุ ูุชู ุงูุญุตูู ุนูู ูุชูุฉ Kubernetes ุนุงููุฉ ูู ุนูุฏุฉ ุฑุฆูุณูุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ุณุชูุถู ุงูุนูุฏ ุงููุชุจููุฉ ุฅูู ูุฐู ุงูุนูุฏุฉ ุงูุฑุฆูุณูุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุฏ ุงูุนุงุฏูุฉ. </font><font style="vertical-align: inherit;">ุนูุฏุฉ. tf</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุดุจู ููู node.tf ููู master.tf. </font><font style="vertical-align: inherit;">ูุชู ุฃูุถูุง ุฅูุดุงุก ุงูููุงุฑุฏ ููุง ุ ูุงูุชู ุชุณูู ูู ูุฐู ุงูุญุงูุฉ ุงูุนูุฏุฉ. </font><font style="vertical-align: inherit;">ูุงููุฑู ุงููุญูุฏ ูู ุฃู ุงูุนูุฏุฉ ุงูุฑุฆูุณูุฉ ูุชู ุฅูุดุงุคูุง ูู ูุซูู ูุงุญุฏ ุ ููุชู ุชุนููู ุนุฏุฏ ุนูุฏ ุงูุนูู ุงูุชู ุชู ุฅูุดุงุคูุง ุนุจุฑ ูุชุบูุฑ nodes_count:</font></font><br>
<br>
<pre><code class="plaintext hljs">resource "aws_instance" "node" {<font></font>
 count = "${var.nodes_count}"<font></font>
 ami = "${var.kubernetes_ami}"<font></font>
 instance_type = "c3.large"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุฐ ููู cloud-init ููุนูุฏ ุงูุนุงููุฉ ุฃูุฑูุง ูุงุญุฏูุง ููุท - ุงูุถูุงู kubeadm. </font><font style="vertical-align: inherit;">ูููู ูุฐุง ุงูุฃูุฑ ุจุฅุฑูุงู ุงูุฌูุงุฒ ุงูููุงุฆู ุจูุฌููุนุฉ Kubernetes ุจุงุณุชุฎุฏุงู ุฑูุฒ ุงูุชูููุถ ุงูุฐู ูุฑุณูู.</font></font><br>
<br>
<a name="5"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุบูู Terraform</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุฅุทูุงูู ุ ูุณุชุฎุฏู Terraform ุนุฏุฉ ูุญุฏุงุช:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฉ AWS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฉ ูุงูุจ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฉ TLS ุงููุณุคููุฉ ุนู ุชูููุฏ ุงูููุชุงุญ. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุจ ุชุซุจูุช ูุฐู ุงููุญุฏุงุช ุนูู ุงูุฌูุงุฒ ุงููุญูู:</font></font><br>
<br>
<pre><code class="plaintext hljs">terraform init terraform/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุน ูุฐุง ุงูุฃูุฑ ุ ูุดุงุฑ ุฅูู ุงูุฏููู ุงูุฐู ุชูุฌุฏ ููู ุฌููุน ุงููููุงุช ุงูุถุฑูุฑูุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุงูุชููุฆุฉ ุ ูููู Terraform ุจุชูุฒูู ุฌููุน ุงููุญุฏุงุช ุงููุญุฏุฏุฉ ุ ูุจุนุฏ ุฐูู ุชุญุชุงุฌ ุฅูู ุชูููุฐ ุฃูุฑ ุฎุทุฉ terraform:</font></font><br>
<br>
<pre><code class="plaintext hljs">terraform plan -var-file terraform/vars/dev.tfvars terraform/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฌู ููุงุญุธุฉ ุฃูู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฏููู ุงูุฐู ูุญุชูู ุนูู ูููุงุช Terraform ุ ูุดุงุฑ ุฅูู ููู var ุ ูุงูุฐู ูุญุชูู ุนูู ููู ุงููุชุบูุฑุงุช ุงููุณุชุฎุฏูุฉ ูู ูููุงุช Terraform. </font><font style="vertical-align: inherit;">ูููู ุฃู ูุญุชูู ุฏููู vars ุนูู ูููุงุช .tfvars ูุชุนุฏุฏุฉ ุ ููุง ูุณูุญ ูู ุจุฅุฏุงุฑุฉ ุฃููุงุน ูุฎุชููุฉ ูู ุงูุจูู ุงูุชุญุชูุฉ ูู ุฎูุงู ูุฌููุนุฉ ูุงุญุฏุฉ ูู ูููุงุช Terraform. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ููู dev.tfvars ููุณู ุนูู ุงููุชุบูุฑุงุช ุงููุงูุฉ ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes_version (ูุณุฎุฉ ูุงุจูุฉ ููุชุซุจูุช ูู Kubernetes) ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes_ami (ุตูุฑุฉ AMI ุงูุชู ุฃูุดุฃูุง Packer). </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุชุนููู ุงูููู ุงูุถุฑูุฑูุฉ ูููุชุบูุฑุงุช ุ ูู ุจุชุดุบูู ุฃูุฑ ุฎุทุฉ terraform ุ ูุจุนุฏ ุฐูู ุณููุฏู Terraform ูุงุฆูุฉ ุจุงูุฅุฌุฑุงุกุงุช ุงููุงุฒูุฉ ูุชุญููู ุงูุญุงูุฉ ุงูููุถุญุฉ ูู ูููุงุช Terraform. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงูุชุญูู ูู ูุฐู ุงููุงุฆูุฉ ุ ูู ุจุชุทุจูู ุงูุชุบููุฑุงุช ุงูููุชุฑุญุฉ: </font></font><br>
<br>
<code>terraform apply -auto-approve -var-file terraform/vars/dev.tfvars terraform/</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃูุฑ ุฎุทุฉ terraform ุ ุชุชููุฒ ุจูุฌูุฏ ููุชุงุญ - ุงูููุงููุฉ ุงูุชููุงุฆูุฉ ุ ููุง ููุบู ุงูุญุงุฌุฉ ุฅูู ุชุฃููุฏ ุงูุชุบููุฑุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง. </font><font style="vertical-align: inherit;">ููููู ุญุฐู ูุฐุง ุงูููุชุงุญ ุ ูููู ุจุนุฏ ุฐูู ุณููุฒู ุชุฃููุฏ ูู ุฅุฌุฑุงุก ูุฏูููุง.</font></font><br>
<br>
<a name="6"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ูุฌููุนุฉ Kubernetes</font></font></h2><br>
<img src="https://habrastorage.org/webt/zs/i-/c3/zsi-c326-ips2acfurg_trunzhm.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุชููู ูุฌููุนุฉ Kubernetes ูู ุนูุฏุฉ ุฑุฆูุณูุฉ ุชุคุฏู ูุธุงุฆู ุฅุฏุงุฑูุฉ ูุนูุฏ ุนูู ุชุนูู ุนูู ุชุดุบูู ุงูุชุทุจููุงุช ุงููุซุจุชุฉ ูู ุงููุฌููุนุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุซุจูุช ุฃุฑุจุนุฉ ููููุงุช ุนูู ุงูุนูุฏุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุชุถูู ุชุดุบูู ูุฐุง ุงููุธุงู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ETCD ุ ุฃู ูุงุนุฏุฉ ุจูุงูุงุช Kubernetes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API Server ุ ุงูุฐู ูููู ูู ุฎูุงูู ุจุชุฎุฒูู ุงููุนูููุงุช ูู Kubernetes ูุงูุญุตูู ุนูู ุงููุนูููุงุช ูููุง ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏูุฑ ุชุญูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฌุฏูู </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุซุจูุช ูููููู ุฅุถุงูููู ุนูู ุนูุฏ ุงูุนูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kube-proxy (ุงููุณุคูู ุนู ุฅูุดุงุก ููุงุนุฏ ุงูุดุจูุฉ ูู ูุฌููุนุฉ Kubernetes) ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubelet (ุงููุณุคูู ุนู ุฅุฑุณุงู ุงูุฃูุฑ ุฅูู Docker daemon ูุชุดุบูู ุงูุชุทุจููุงุช ูู ูุฌููุนุฉ Kubernetes). </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูู ุงูุนูุฏ ุ ูุนูู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุดุจูุฉ ูุงูููู.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุทุท ุณูุฑ ุนูู ุงููุชูุฉ</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/oz/ew/f3/ozewf310dnhdmnx2gg4ozhzb1rc.png"><br>
,      Kubernetes    replicaset.<br>
<br>
<ol>
<li>     API-,     ETCD.        .</li>
<li>API-      .</li>
<li>Controller-manager   API-   ,    ยซยป,    .</li>
<li>Scheduler       .       ETCD  API-.</li>
<li>Kubelet  API-  Docker    .</li>
<li>Docker   .</li>
<li>Kubelet   API-   ,     .</li>
</ol><br>
 ,    Kubernetes  ,      .       ,           ,     YAML-.  ,   ,    API-.       .<br>
</div></div><br>
<a name="7"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubeadm</font></font></h2><br>
<img src="https://habrastorage.org/webt/wd/sw/cu/wdswcujzvnx4ynnrbi_ec9c1gr8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุนูุตุฑ ุงูุฃุฎูุฑ ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ูู Kubeadm. </font><font style="vertical-align: inherit;">ุฅู ูุดุฑ ูุฌููุนุฉ Kubernetes ุงูุฌุฏูุฏุฉ ุนูููุฉ ุดุงูุฉ ุฏุงุฆููุง. </font><font style="vertical-align: inherit;">ูู ูู ูุฑุญูุฉ ุ ููุงู ูุฎุงุทุฑ ุงูุฃุฎุทุงุก ุจุณุจุจ ุงูุนุงูู ุงูุจุดุฑู ุ ูุงูุนุฏูุฏ ูู ุงูููุงู ูู ุจุจุณุงุทุฉ ุฑูุชูููุฉ ูุทูููุฉ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุตุจ ุงูุดูุงุฏุงุช ูุชุดููุฑ TLS ุจูู ุงูุนูุฏ ูุฅุจูุงุฆูุง ูุญุฏุซุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุงูููุงู ุงูุฐู ุชุฃุชู ููู ุฃุฏูุงุช ุฃุชูุชุฉ ุงููุงูุจ ุงูุฃุณุงุณู ุฅูู ุงูุฅููุงุฐ. </font><font style="vertical-align: inherit;">ุฎุฏุนุฉ Kubeadm ูู ุฃููุง ูุนุชูุฏุฉ ุฑุณูููุง ููุนูู ูุน Kubernetes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุญ ูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุซุจูุช ูุชูููู ูุชุดุบูู ุฌููุน ููููุงุช ุงููุชูุฉ ุงูุฑุฆูุณูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุงุฑุฉ ุงูุดูุงุฏุงุช ุ ุจูุง ูู ุฐูู ุชุฏููุฑูุง ููุชุงุจุฉ ุดูุงุฏุงุช ุฌุฏูุฏุฉ ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุงุฑุฉ ุฅุตุฏุงุฑุงุช ูููู ุงููุชูุฉ (ุงูุชุฑููุฉ ูุงูุฅุฑุฌุงุน). </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุช ููุณู ุ Kubeadm ููุณ ูุธุงููุง ูุงููุงู ูุฅุฏุงุฑุฉ ูุฌููุนุงุช Kubernetes ุ ููููู ููุน ูู ูุชู ุงูุจูุงุก ุงูุชู ุชุณูุญ ูู ุจุชูููู Kubernetes ุนูู ุงูุนูุฏุฉ ุงูุชู ุชุนูู ุนูููุง ุฃุฏุงุฉ Kubeadm. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃู ููุงู ุญุงุฌุฉ ุฅูู ูุธุงู ุชุฒุงูู ูููู ุจุชุดุบูู ุฌููุน ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุถุฑูุฑูุฉ ุ ูุชูููููุง ูุชุดุบูู Kubeadm ุนูู ุฌููุน ุงูุนูุฏ. </font><font style="vertical-align: inherit;">ููุฐู ุงูุฃุบุฑุงุถ ูุชู ุงุณุชุฎุฏุงู Terraform.</font></font><br>
<br>
<a name="8"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุฏุน ุจุฌููุน ุงููููุงุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุถุน ุฌููุน ุงููููุงุช ูุงูุชููููุงุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุงู ูุงุญุฏ ุ ุจุญูุซ ูููู ุฃูุซุฑ ููุงุกูุฉ ูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฏูู ุณุญุงุจุฉ ุฎุงุตุฉ ูู ูุชูุงูู ูุฏู ุ ููููู ุชุฑูุฏ ุฅุฌุฑุงุก ูู ูุฐู ุงูุฎุทูุงุช ุจููุณู ูุงุฎุชุจุงุฑ ุงููุดุฑ ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุงูุชุจ ุฅูููุง ุนูู cloud@croc.ru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณููุฏู ูู ูุณุฎุฉ ุชุฌุฑูุจูุฉ ููุงุฎุชุจุงุฑุงุช ูุชูุฏูู ุงููุดูุฑุฉ ุจุดุฃู ุฌููุน ุงููุถุงูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฑูุจูุง ุณูููู ููุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slurm ุฌุฏูุฏ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ ููููู ุฅูุดุงุก ูุฌููุนุชู ุงูุฎุงุตุฉ. </font><font style="vertical-align: inherit;">ุฎุตู 10ูช ุนูู ุงูุฑูุฒ ุงูุชุฑููุฌู CROC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูุนูููู ุจุงููุนู ูุน Kubernetes ุ ููุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูุฑุฉ ูุชูุฏูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุฎุตู ูู ููุณู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฒููุงุก ุ Habraparser ููุณุฑ ุชุฑููุฒ ุงููุฏููุฉ. </font><font style="vertical-align: inherit;">ูุฑุฌู ุฃุฎุฐ ุงููุตุฏุฑ ูู ุฌูุซุจ ูู ุงูุฑุงุจุท ุฃุนูุงู.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar492600/index.html">ุงูุฏููู ุดุจู ุงูุนููู ูุงุณุชุถุงูุฉ ููุฌู WiFi</a></li>
<li><a href="../ar492604/index.html">ุงูุนูู ูุน ุทุฑููุฉ ุงูุนุฑุถ ุจุดูู ุบูุฑ ูุชุฒุงูู ุจุงุณุชุฎุฏุงู coroutine</a></li>
<li><a href="../ar492606/index.html">ูุถุงูุง ูุฌููุนุฉ ุงูุฃุฏูุงุช ูู ุงููุดุงุฑูุน ุงููุจูุฑุฉ</a></li>
<li><a href="../ar492608/index.html">ููุฒุงุช ููุฒุงุช ุงูุชุณููู ูู ุงููุดุงุฑูุน ุงููุจูุฑุฉ</a></li>
<li><a href="../ar492612/index.html">ูุตุจุงุญ ููุณูู Leek Celebrity</a></li>
<li><a href="../ar492628/index.html">ูุงุตู ุงูุซูุฉ ูุนุฏุฏ ุงููุฑุถู ุงูุฐูู ูุนุงููู ูู ููุฑูุณ ุงูุชุงุฌู (ุญุณุงุจ ุงููููุงุช)</a></li>
<li><a href="../ar492632/index.html">ุงูุฃุนูุงู ุงูุตุบูุฑุฉ ุงููุนุฒููุฉ: ุงูุฐุนุฑ ุนุฏู ุงูุนูู</a></li>
<li><a href="../ar492636/index.html">ูุงุฐุง ูุนูู ุฃู ุชููู ูุนุงูุ</a></li>
<li><a href="../ar492638/index.html">ุชูุณูุน ุชุทุจูู Redux ูุน ุงูุจุท</a></li>
<li><a href="../ar492642/index.html">ุฅูุดุงุก ุจููุฉ ูุงุจูุฉ ููุชุทููุฑ ููุฑูุฉ ูุน ุงูุฎุฏูุงุช ุงูุฏูููุฉ ุงูุฏููุงููููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>