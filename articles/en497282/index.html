<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🤝‍👨🏻 🐎 🚟 Clean up the code in Angular. Cooking ESLint, codelyzer, stylelint, husky, lint-staged and Prettier 📲 ⌚️ 👨‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you have not had to work in a team, then perhaps you are not using these things, and someone does not even know about them. Working alone, you are ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Clean up the code in Angular. Cooking ESLint, codelyzer, stylelint, husky, lint-staged and Prettier</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/497282/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you have not had to work in a team, then perhaps you are not using these things, and someone does not even know about them. </font><font style="vertical-align: inherit;">Working alone, you are your own boss.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As soon as they started working in a team, the situation changes dramatically. </font><font style="vertical-align: inherit;">If there is no agreement, then everyone starts writing code in the style that he can. </font><font style="vertical-align: inherit;">And even if you still get together and discuss the codestyle in words on the project and even write down somewhere, this most likely will not help to solve the problem, and here's why.</font></font></p><br>
<p><img src="https://habrastorage.org/webt/y_/n-/0h/y_n-0hadf_3oq7c6otl4nl4zas8.png"></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A person is not a robot, and he is prone to make mistakes, especially if there are no restrictions. </font><font style="vertical-align: inherit;">Write the code as you please, others somehow sort it out. </font><font style="vertical-align: inherit;">Even if you try to follow all the rules and carefully check not only your code, but also the code of colleagues, this does not guarantee that it will be possible to identify 100% of all errors.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To help solve such problems, there are special utilities - linters, which are able to automatically not only check, but in some cases correct the code you wrote in accordance with the rules. </font><font style="vertical-align: inherit;">You can take the rules ready, or you can write your own. </font><font style="vertical-align: inherit;">Also, in addition to the linters themselves, additional tools will be considered in this article. </font><font style="vertical-align: inherit;">In conjunction with linters, they will give even more effective results in supporting your code.</font></font></p><br>
<h2 id="podgotovka"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Training</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Immediately, I note that the configuration examples are quite simple and not suitable for use in production, only key points are considered. </font><font style="vertical-align: inherit;">But you will find a link to the Angular project with a ready-made configuration at the end of the article.</font></font></p><br>
<p> ,    ,      Angular,        Angular    ,    :</p><br>
<pre><code class="bash hljs">npm install -g @angular/cli <span class="hljs-comment">#      @angular/cli</span>
ng new angular-linters-sample</code></pre><br>
<h2 id="tslint-deprecated">TSLint (deprecated)</h2><br>
<p>    ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Angular CLI</a>,    TSLint.       npm run lint,     CLI   ng lint,        codestyle.</p><br>
<p>  :       ( ,    ).</p><br>
<p><img src="https://habrastorage.org/webt/sl/_c/ei/sl_ceicvqrkmqsdzot_hdn3pbac.png"><br>
<em>TSLint:    Angular-</em></p><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>     styleguide,    Angular-.</p><br>
<p>  TSLint   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>,        TSLint.</p><br>
<p>       ,  TSLint   deprecated,       ESLint (   ).</p><br>
<h2 id="codelyzer">Codelyzer</h2><br>
<p> TSLint, ,   ,   TypeScript,  Angular-   ,     Angular.</p><br>
<p>     —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">codelyzer</a>,            Angular CLI.  codelyzer      npm run lint.       tslint.json,    TSLint  codelyzer    rulesDirectory.</p><br>
<h2 id="eslint">ESLint</h2><br>
<p>  TSLint <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a>  deprecated, Angular-     ESLint.    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a>,   ,   .</p><br>
<p>   ( Angular 9.0.5)   ESLint  Angular  ,    CLI    TSLint  codelyzer.  ,  codelyzer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a>  ESLint        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">angular-eslint</a>:   builder    —  schematic   .<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>  ESLint       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">eslint-plugin-typescript</a>.</p><br>
<p>   Nx,    9.1 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>  @nrwl/linter,  ESLint.</p><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">@tinkoff/linters</a>,         Tinkoff.    ESLint,   — TSLint.</p><br>
<p>,   ,           ESLint,      .</p><br>
<h2 id="stylelint">Stylelint</h2><br>
<p>   ?      .   —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">stylelint</a>.  ,         .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a> —       .</p><br>
<p>  stylelint,     :</p><br>
<pre><code class="bash hljs">npm install stylelint stylelint-config-standard --save-dev</code></pre><br>
<p>    .stylelintrc (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>):</p><br>
<pre><code class="javascript hljs">{
 <span class="hljs-string">"extends"</span>: <span class="hljs-string">"stylelint-config-standard"</span>,
 <span class="hljs-string">"rules"</span>: {
   <span class="hljs-string">"at-rule-empty-line-before"</span>: <span class="hljs-literal">null</span><font></font>
 }<font></font>
}</code></pre><br>
<p>   package.json,       :</p><br>
<pre><code class="json hljs"><span class="hljs-string">"scripts"</span>: {<font></font>
 ...<font></font>
 <span class="hljs-attr">"lint-css"</span>: <span class="hljs-string">"stylelint src/**/*.css"</span><font></font>
 ...<font></font>
}</code></pre><br>
<p>     ,       app.component.css  ,      no-empty-source,     .</p><br>
<p><img src="https://habrastorage.org/webt/2x/7i/7k/2x7i7kxlx_lz_yksbkww6yr9oss.png"><br>
<em>Stylelint:      Angular-</em></p><br>
<h2 id="husky">Husky</h2><br>
<p>        ,         .    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">husky</a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Git Hooks</a>.<br>
 ,    -   ,      pre-commit.<br>
         pre-push.    ,      pre-commit     .</p><br>
<p>  .    ,        npm run lint.<br>
   husky:</p><br>
<pre><code class="bash hljs">npm install husky --save-dev</code></pre><br>
<p>    .huskyrc (    package.json,    ):</p><br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"hooks"</span>: {
   <span class="hljs-attr">"pre-commit"</span>: <span class="hljs-string">"npm run lint"</span><font></font>
 }<font></font>
}</code></pre><br>
<p>       :</p><br>
<p><img src="https://habrastorage.org/webt/bg/eb/eu/bgebeunyjdsnmivv4np-tr8tykc.png"><br>
<em>Husky:     </em></p><br>
<p>   ,      ng lint,    lint,   package.json.<br>
    :</p><br>
<p>Husky → pre-commit hook → npm run lint → ng lint</p><br>
<p>   ,    ,    .</p><br>
<h2 id="lint-staged">Lint-staged</h2><br>
<p>   husky,    ,      ,      codestyle.</p><br>
<p>,  ,   ,   -    -      (      codestyle,  !).  ,  ,  ,   ,   .</p><br>
<p>   ,        ,     ,      .           .  ,     ,     ,    —     staged (     git   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>).</p><br>
<p>  .<br>
 lint-staged:</p><br>
<pre><code class="bash hljs">npm install lint-staged --save-dev</code></pre><br>
<p>    .lintstagedrc (      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>).  ,          js  ts,     —     css:</p><br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"*.{js,ts}"</span>: <span class="hljs-string">"npm run lint"</span>,
 <span class="hljs-attr">"*.css"</span>: <span class="hljs-string">"npm run lint-css"</span>
}</code></pre><br>
<p>   husky,        pre-commit.     lint-staged,       ,        :</p><br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"hooks"</span>: {
   <span class="hljs-attr">"pre-commit"</span>: <span class="hljs-string">"lint-staged"</span><font></font>
 }<font></font>
}</code></pre><br>
<p>   :</p><br>
<p>Husky → pre-commit hook → lint-staged<br>
→ tslint<br>
→ stylelint</p><br>
<h2 id="prettier">Prettier</h2><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Prettier</a>   ,     .<br>
    ,        ?</p><br>
<p> :</p><br>
<ul>
<li>Prettier      (auto fix). ,   TSLint     ,   .     Has Fixer   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.      stylelint:    ,   ,     --fix.  prettier    ,         .</li>
<li>  “” .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>   ,     ESLint, TSLint, stylelint.</li>
<li>    IDE.</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</li>
<li>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</li>
</ul><br>
<p> :</p><br>
<ul>
<li>         .         ,     .</li>
<li>        HTML.</li>
</ul><br>
<p> ,      prettier     ,     .   ,  ,    ,   —    - “”   . ,           ,     — ,  ,   .</p><br>
<p>  .<br>
 Prettier        TSLint  stylelint:</p><br>
<pre><code class="bash hljs">npm install prettier tslint-config-prettier tslint-plugin-prettier stylelint-config-prettier stylelint-prettier --save-dev</code></pre><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  TSLint</a>   tslint.json:</p><br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"extends"</span>: [
   <span class="hljs-string">"tslint-config-prettier"</span>,
   <span class="hljs-string">"tslint-plugin-prettier"</span>,
   <span class="hljs-string">"codelyzer"</span><font></font>
 ],<font></font>
 <span class="hljs-attr">"rules"</span>: {
   <span class="hljs-attr">"prettier"</span>: <span class="hljs-literal">true</span><font></font>
 }<font></font>
}</code></pre><br>
<p>  :  ESLint/TSLint  Prettier    ,     .<br>
     ,   —       Prettier.<br>
    stylelint   .stylelintrc:</p><br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"extends"</span>: [<span class="hljs-string">"stylelint-prettier/recommended"</span>]<font></font>
}</code></pre><br>
<p>   Prettier  .prettierrc:</p><br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"trailingComma"</span>: <span class="hljs-string">"es5"</span>,
 <span class="hljs-attr">"tabWidth"</span>: <span class="hljs-number">2</span>,
 <span class="hljs-attr">"semi"</span>: <span class="hljs-literal">true</span>,
 <span class="hljs-attr">"singleQuote"</span>: <span class="hljs-literal">true</span>
}</code></pre><br>
<p>  ,   :</p><br>
<pre><code class="bash hljs">npx tslint-config-prettier-check ./tslint.json<font></font>
npx stylelint-config-prettier-check</code></pre><br>
<p>     prettier  package.json:</p><br>
<pre><code class="json hljs"><span class="hljs-string">"scripts"</span>: {<font></font>
 ...<font></font>
 <span class="hljs-attr">"prettier"</span>: <span class="hljs-string">"prettier --write src/**/*.{js,ts,css}"</span>,<font></font>
 ...<font></font>
}</code></pre><br>
<p>    lint-staged,  Prettier    :</p><br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"*.{js,json,md,html}"</span>: [
   <span class="hljs-string">"prettier --write"</span><font></font>
 ],<font></font>
 <span class="hljs-attr">"*.css"</span>: [
   <span class="hljs-string">"prettier --write"</span>,
   <span class="hljs-string">"npm run lint-css"</span><font></font>
 ],<font></font>
 <span class="hljs-attr">"*.ts"</span>: [
   <span class="hljs-string">"prettier --write"</span>,
   <span class="hljs-string">"npm run lint"</span><font></font>
 ]<font></font>
}</code></pre><br>
<p>  Prettier   ,   :</p><br>
<pre><code class="bash hljs">npm run prettier</code></pre><br>
<h2 id="itogi"></h2><br>
<p>     ,        .</p><br>
<p>    ,    Angular,      —          .      Angular,           .</p><br>
<p> ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a>.</p><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">@tinkoff/linters</a>,          .<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a> ,     ,      .</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497270/index.html">New reality. 2.5 million rubles online hackathon</a></li>
<li><a href="../en497272/index.html">Who is Seraphim? Or how to lose and win a hackathon at the same time</a></li>
<li><a href="../en497276/index.html">Check: how “healthy” is your pose when working at the computer?</a></li>
<li><a href="../en497278/index.html">Flutter. Asynchrony and parallelism</a></li>
<li><a href="../en497280/index.html">How I stopped being afraid and fell in love with cholesterol</a></li>
<li><a href="../en497286/index.html">Ludum Dare: checklist a week before the start</a></li>
<li><a href="../en497288/index.html">Decorative ceiling light Feron AL5000</a></li>
<li><a href="../en497290/index.html">Improving performance using uop cache on Sandy Bridge +</a></li>
<li><a href="../en497292/index.html">Technology Stack Shiro Games</a></li>
<li><a href="../en497296/index.html">Popular errors in English among IT professionals. Part 2: Pronunciation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>