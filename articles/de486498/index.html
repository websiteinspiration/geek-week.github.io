<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õπüèª üçã üíû Gesichtsgesteuerte Spielmasken auf Instagram oder Doppelklick-Augen üëõ ‚ùáÔ∏è üë©üèø‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Was f√ºr ein Unsinn, denkst du? Was f√ºr bedeutungslose W√∂rter? Aber leider oder Prost - so jemand, heute ist das kein Unsinn, sondern Realit√§t. Der Art...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Gesichtsgesteuerte Spielmasken auf Instagram oder Doppelklick-Augen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486498/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qr/9p/o1/qr9po1b7d633kt3pmdsf2esb9io.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was f√ºr ein Unsinn, denkst du? Was f√ºr bedeutungslose W√∂rter? Aber leider oder Prost - so jemand, heute ist das kein Unsinn, sondern Realit√§t. Der Artikel handelt von einem Spiel, das ich f√ºr Instagram geschrieben habe, in dem dein Gesicht als Controller verwendet wird, oder besser gesagt, nicht nur es, sondern manchmal den ganzen Kopf. Das Bewegen auf dem Spielfeld erfolgt durch Drehen und Neigen des Kopfes. Die Wahl der Aktion erfolgt durch √ñffnen des Mundes oder durch Doppelklick (blinkende) Augen. Double Blink w√§re es wahrscheinlich wert, es zu nennen ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh sch√∂ne neue Welt! Wahrscheinlich werden die Hipster der Zukunft Skripte entwickeln, um sch√∂nen bunten Rauch hinter ihren leichten Raumkapseln zu erzeugen, oder Shader schreiben, um den schwarzen Toren eines pers√∂nlichen Teleports interessante visuelle Effekte zu verleihen, wie z. B. fallende Schneeflocken (Web 100.0) oder fraktaler Nebel (WebGL 100.0) oder ... Nein, vielleicht Ich habe nicht genug Vorstellungskraft, um mir vorzustellen, mit welchem ‚Äã‚ÄãUnsinn wir in Zukunft umgehen k√∂nnten: Ich versuche, zu logisch zu denken. Aber vor ungef√§hr 30 Jahren h√§tten wir sicherlich unter keinen Umst√§nden gedacht, dass wir heute Masken f√ºr ein soziales Netzwerk namens Instagram erstellen werden. Und au√üerdem erscheinen in diesen Masken vollwertige Spiele. Ich wurde √§ngstlich und interessant. Alles in allem be√§ngstigend interessant. Und wie Sie bereits verstanden haben, konnte ich nicht widerstehen und schrieb auch ein solches Spiel.Zum Spielen ben√∂tigen Sie nat√ºrlich ein Smartphone auf Android oder iOS mit einer Frontkamera und der installierten Instagram-Anwendung.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Spiel ist Tic Tac Toe. </font><font style="vertical-align: inherit;">Im Allgemeinen ist dies eines der ersten Spiele, die ich in meinem Leben erstellt habe, und vielleicht sogar das allererste - ich kann mich jetzt nicht genau erinnern. </font><font style="vertical-align: inherit;">Aber ich habe es in Pascal zur√ºckgeschrieben und dann diesen alten Algorithmus in Delphi gezogen. </font><font style="vertical-align: inherit;">Danach erschien das Spiel nat√ºrlich auch im Internet, auf meiner Website: Nun, wo auf Ihrer pers√∂nlichen Seite ohne Ihren pers√∂nlichen Tic-Tac-Toe ... Und jetzt ist es Zeit, dieses epische Spiel auch auf Instagram zu ver√∂ffentlichen. </font><font style="vertical-align: inherit;">Wenn ich in diesem Spiel ein Dolch oder ein Tac Toe w√§re (eher wahrscheinlich ein Toe), k√∂nnte ich im Allgemeinen viel √ºber mein langes, interessantes Leben erz√§hlen ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was f√ºr Masken sind das?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst einmal - ein kurzer historischer Exkurs. Masken auf Instagram erschienen dank des belarussischen Teams, das die MSQRD-Selfie-Anwendung entwickelt hat. Nachdem diese Anwendung von Facebook gekauft wurde, integrierte das Team des Unternehmens seine Technologie weiter in Facebook-Produkte. Es gab also eine Plattform mit Augmented Reality-Funktionen, Spark AR. Im August 2019 verlie√ü die Plattform den Beta-Status und stand allen Benutzern zur Verf√ºgung, die jetzt Augmented-Reality-Inhalte f√ºr Facebook und Instagram erstellen k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masken wurden als Filter konzipiert, um ihrer Physiognomie mit der anschlie√üenden Platzierung eines Selfies in einem sozialen Netzwerk lustige Effekte zu verleihen. Bei den Maskenspielen habe ich nicht so viele gefunden. Es gibt ein fliegendes Gesicht, ein Analogon von Flappy Bird, bei dem ein Vogel √ºber den Bildschirm fliegt, und Sie m√ºssen verhindern, dass er gegen Hindernisse st√∂√üt und im richtigen Moment blinkt. Ich habe auch ein Spiel gesehen, bei dem man den Mund von oben nach unten fallen lassen muss. Ein Sch√ºtze wie Invaders. Und ein 3D-L√§ufer, bei dem ein Charakter eine Stadtstra√üe entlang l√§uft und √ºber Hindernisse springt. Vielleicht gibt es noch mehr. Im Allgemeinen ist das Thema ziemlich neu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Prozess zur Erstellung von Inhalten findet in der Spark AR Studio-Entwicklungsumgebung statt, die kostenlos f√ºr Windows heruntergeladen werden kann. Es lohnt sich auch, die Spark AR Player-Anwendung herunterzuladen, um die Effekte zu testen, die Sie auf Andrioid- oder iOS-Mobilger√§ten erstellen, f√ºr die diese Effekte tats√§chlich vorgesehen sind. Die Verbindung zum Computer erfolgt √ºber ein USB-Kabel, zumindest in meinem Fall mit einem Android-Smartphone. Nachdem Sie die Maske √ºber die Facebook / sparkarhub-Komponente heruntergeladen und die Moderation bestanden haben, steht Ihre Maske (oder Ihr Spiel) allen Instagram-Benutzern aus dem Internet zur Verf√ºgung. Die Maske kann √ºber einen direkten Link oder von der Seite des Erstellers auf Instagram bezogen werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist √ºberhaupt nicht schwierig zu verstehen, wie man in Spark AR Studio arbeitet. </font><font style="vertical-align: inherit;">Ich werde nicht im Detail darauf eingehen, zumal das Internet voller Lektionen zu diesem Thema ist. </font><font style="vertical-align: inherit;">Ich werde nur bemerken, dass es zwei M√∂glichkeiten gibt, eine mehr oder weniger interaktive Anwendung zu entwickeln, die mehr beinhaltet als nur eine Art statisches Sprite auf Ihr Gesicht anzuwenden: das Erstellen der sogenannten Patches und das Schreiben von Skripten. </font><font style="vertical-align: inherit;">Die erste Methode √§hnelt visuell der Arbeit mit Materialien in einem 3D-Editor, und die zweite Methode programmiert lediglich in Javascript mit einer speziellen API. </font><font style="vertical-align: inherit;">Ich habe die zweite Option gew√§hlt. </font><font style="vertical-align: inherit;">Es verbietet jedoch niemand, beide Methoden zu kombinieren: √úber Skripte besteht die M√∂glichkeit, auf alles zuzugreifen, was in den Patches geschieht.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafik</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr den Anfang w√§re es also sch√∂n, einige grafische Elemente zu erstellen, die im Spiel verwendet werden. </font><font style="vertical-align: inherit;">√ñffnen Sie Ihr bevorzugtes 3D-Modellierungsprogramm und erstellen Sie es. </font><font style="vertical-align: inherit;">Ich benutze Blender. </font><font style="vertical-align: inherit;">Im Prinzip k√∂nnen Sie nur separate Sprites erstellen und diese dann mit Spark AR nach einer Verhaltenslogik fragen, ohne den 3D-Editor zu verwenden. </font><font style="vertical-align: inherit;">Aber ich beschloss, volumin√∂se Figuren aus Kreuzen und Zehen zu machen, so dass ich ohne einen solchen Editor nicht auskommen konnte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als erstes erstellen Sie eine 2D-Textur. </font><font style="vertical-align: inherit;">Kombinieren Sie alle Texturen in einem Atlas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9y/ii/n8/9yiin8wu1jf3emkzbnyjn88jmgq.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Textur Satin</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun zu 3D-Modellen. Als Spiel-3D-Raum wird eine Ebene aus zwei Dreiecken verwendet, auf der die Feldmarkierung gestreckt wird (hier ist das gro√üe Netzfragment aus dem Texturatlas). Der Atlas selbst ist mit einem transparenten Alphakanal versehen. 9 blaue Quadrate, die ebenfalls aus jeweils zwei Dreiecken bestehen, werden in das Feld eingef√ºgt. Zus√§tzlich zu den neun blauen enth√§lt das 3D-Modell in den gleichen Koordinaten 9 gr√ºne und rote Quadrate, die zu Beginn des Spiels ausgeblendet werden. Die Bedeutung ist, dass im Normalzustand die Farbe aller Quadrate des Feldes blau ist und Gr√ºn und Rot als Cursor verwendet werden, um die Position auszuw√§hlen, an der Sie ein Kreuz bzw. eine Null setzen m√∂chten. Zus√§tzlich werden Gr√ºn und Rot verwendet, um die Gewinnreihe von drei Zellen am Ende jeder Runde hervorzuheben. Es w√ºrde nat√ºrlich ausreichenVerwenden Sie 9 blaue und nur 3 gr√ºne und rote Quadrate, aber dann m√ºssten Sie zus√§tzlich zum Ein- / Ausblenden eine Art Bewegungslogik festlegen. Es schien mir, dass es einfacher w√§re, sie nur zu verstecken und anzuzeigen, ohne die Koordinaten im Raum zu manipulieren, und das 3D-Modell w√ºrde sie unbedeutend laden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vy/fk/bs/vyfkbs_c_hezcstqfoebd2xyjoy.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Spielfeld</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Im Spiel stimmen nat√ºrlich die Positionen der drei Felder in jeder der neun Gruppen √ºberein. Hier habe ich sie nur vertikal in eine der Zellen gestreut, um deutlich zu machen, woraus das 3D-Modell insgesamt besteht. Beachten Sie, dass die K√§stchen auf bestimmte Weise mit Namen versehen sind (in der Abbildung rechts): von b11 bis b33, von g11 bis g33 und von r11 bis r33, wobei sich jede Ziffer im Bereich von 1 bis 3 √§ndert. Mit anderen Worten, der Buchstabe bezeichnet eine Farbe, und die Zahlen sind die Zeile und Spalte. Dies ist erforderlich, um √ºber die Namen aus dem Skript auf die Felder (Netze in 3D-Terminologie) zuzugreifen, damit sie bequem ausgeblendet und angezeigt werden k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann modellierte ich die Figuren von Kreuzen und Zehen selbst und platzierte sie auch paarweise in jeder Zelle. </font><font style="vertical-align: inherit;">(Aus Gr√ºnden der Klarheit hat er eine der Nullen angehoben.) Sehen Sie sich nicht die Tatsache an, dass ihre Textur bisher so ‚Äûfr√∂hlich‚Äú ist. </font><font style="vertical-align: inherit;">Ich habe dies getan, um einen UV-Scan bequem durchf√ºhren zu k√∂nnen. </font><font style="vertical-align: inherit;">Dann habe ich im Texturatlas die Texturen der Figuren durch ruhigere ersetzt, die Sie im Spiel selbst sehen k√∂nnen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/qc/cp/qqqccp5siugamnwegcpegomgank.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spielsteine</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Schlie√ülich habe ich 4 flache Pfeile modelliert, die die Richtung anzeigen, in die sich der Cursor im Spiel bewegt. </font><font style="vertical-align: inherit;">Ich habe eine Textur auf ihre Geometrie angewendet: Im Sprite-Blatt ist dies ein wei√üer dreieckiger Pfeil in einem Strich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir exportieren alle 3D-Modelle (alle drei, dh das Feld, die Formen und die Pfeile) in das FBX-Format, f√ºr das Spark AR Studio erforderlich ist.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Spark AR Studio importieren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Starten Sie zun√§chst Spark AR Studio und importieren Sie dort 3D-Modelle. Sie werden in der Liste der Assets unten links angezeigt. Gleichzeitig erstellen wir f√ºr uns eine thematische Maske mit Kriegsbemalung in Form von ‚ÄûT√§towierungen‚Äú eines Kreuzes und eines Zehs im Gesicht. Sie k√∂nnen aus Tausenden von Lektionen im globalen Netzwerk oder aus der offiziellen Dokumentation auf der Plattform lernen, wie Sie eine strukturierte Maske erstellen. Ich werde mich nicht darauf konzentrieren. Kurz gesagt: Laden Sie das "Leerzeichen" herunter, √∂ffnen Sie es in Ihrem bevorzugten Grafikeditor, zeichnen Sie etwas dar√ºber, speichern Sie es, importieren Sie das Bild in Spark AR Studio, passen Sie die Material- und Texturparameter an.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/-d/aw/pv-dawxo7-dqxkgd2rxga-umd7w.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ziehen Sie unsere Modelle von Assets in die Szenenliste oben. Au√üerdem m√ºssen sie in einer bestimmten Reihenfolge gerendert werden: zuerst das Feld (field.fbx), dann das Modell der Figuren (fieldxo.fbx) und schlie√ülich die Pfeile (pfeile.fbx). Dar√ºber hinaus befindet sich auf der untersten Ebene auch faceTracker mit faceMesh - dies ist eine Maske f√ºr Ihr Gesicht. Sie k√∂nnen Modelle wahrscheinlich in beliebiger Reihenfolge auf die B√ºhne werfen. Ich beabsichtige jedoch, die Tiefenpr√ºfung und die Tiefenpr√ºfung sowie den Tiefenpuffer (in den Materialeigenschaften) f√ºr alle Materialien (au√üer Abbildungen) zu deaktivieren. Lassen Sie sie daher in der von mir manuell festgelegten Reihenfolge rendern: Maske - Feld - Figuren - Pfeile.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie in den Materialien jeder Ebene den Mischmodus = Alpha ein, damit die Objekte an den Stellen transparent werden, an denen dies in der Textur angegeben ist. </font><font style="vertical-align: inherit;">Und wir werden die Texturen Filtering = Medium zum Gl√§tten setzen. </font><font style="vertical-align: inherit;">(Wenn Sie ein Material oder eine Textur aus der Liste links ausw√§hlen, werden alle f√ºr sie verf√ºgbaren Eigenschaften auf der rechten Seite des Fensters angezeigt.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie schlie√ülich das Skriptelement zu den Elementen hinzu (indem Sie auf das Element unten links + Element hinzuf√ºgen klicken). </font><font style="vertical-align: inherit;">Neben 3D-Modellen wird script.js in der Liste angezeigt, indem Sie darauf klicken, welcher externe Texteditor f√ºr Skripte ge√∂ffnet wird. </font><font style="vertical-align: inherit;">Wenn Sie im Editor speichern, wird Ihr Programm in Spark AR Studio neu gestartet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmierung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verbinden Sie zu Beginn des Skripts die Module, die wir in diesem Projekt ben√∂tigen. </font><font style="vertical-align: inherit;">Dies ist eine Szene, Gesichtsverfolgung, Module f√ºr die Arbeit mit Zeit, Ton und Animation.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> Scene = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Scene'</span>);
<span class="hljs-keyword">const</span> FaceTracking = <span class="hljs-built_in">require</span>(<span class="hljs-string">'FaceTracking'</span>);
<span class="hljs-keyword">const</span> Time = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Time'</span>);
<span class="hljs-keyword">const</span> Audio = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Audio'</span>);
<span class="hljs-keyword">const</span> Animation = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Animation'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt viele M√∂glichkeiten, Tic-Tac-Toe in Javascript zu implementieren. </font><font style="vertical-align: inherit;">In diesem Artikel geht es nicht darum, dieses Spiel in einer bestimmten Programmiersprache zu implementieren, sondern darum, mit Hilfe einer Person zu verwalten. </font><font style="vertical-align: inherit;">Ich werde wichtige Punkte beschreiben, die f√ºr die Interaktion mit dem Spark AR-System spezifisch sind, damit das Prinzip verstanden wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zugriff auf das benannte Fragment des 3D-Modells (Netz), z. B. auf das blaue Quadrat in der ersten Zeile, zweite Spalte des Spielfelds:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'b12'</span>);</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Erinnern Sie sich an b12 - so haben wir dieses Netz im 3D-Editor genannt.)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Zugriff auf das Kreuz an dieser Position:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'x12'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verstecke einen Zeh (o), setze ein Kreuz (x) und f√§rbe die Zellen des Feldes '32' (dritte Reihe, zweite Spalte) gr√ºn (g):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// figure</span>
Scene.root.find(<span class="hljs-string">'o32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'x32'</span>).hidden = <span class="hljs-literal">false</span>;
<span class="hljs-comment">// background</span>
Scene.root.find(<span class="hljs-string">'b32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'g32'</span>).hidden = <span class="hljs-literal">false</span>;<font></font>
Scene.root.find(<span class="hljs-string">'r32'</span>).hidden = <span class="hljs-literal">true</span>;</code></pre><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/xg/bz/tkxgbzthiw7ubagtismtw7pmedk.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gr√ºnes Kreuz mit gr√ºner Hintergrundbeleuchtung im Feld '32'.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Abonnieren Sie die Ereignisse des Kopfdrehens und -kippens, um sich auf dem Feld zu bewegen.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//vert: fov+ back-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationX.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//hor: rt+ dn-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationY.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist alles sehr einfach. </font><font style="vertical-align: inherit;">Wir nehmen aus dem Ereignis die Werte der Kopfdrehung oder -neigung (event.newValue) und pr√ºfen, ob sie au√üerhalb eines bestimmten Bereichs liegen. </font><font style="vertical-align: inherit;">Wenn ja, bewegen Sie den Cursor (gr√ºnes Feld) visuell in die gew√ºnschte Richtung. </font><font style="vertical-align: inherit;">Ein negativer Wert der Kopfdrehung entspricht ihrer Drehung nach links, positiv - nach rechts. </font><font style="vertical-align: inherit;">Ebenso - den Kopf hin und her neigen, um sich entlang der Linien zu bewegen. </font><font style="vertical-align: inherit;">Der gesamte Bereich reicht von -1 bis +1. </font><font style="vertical-align: inherit;">So k√∂nnen Sie die Cursorbewegung implementieren und ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und dann d√§mmerte es mir</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pl√∂tzlich wurde mir klar, dass es unpraktisch war, den Cursor auf dem Feld so zu steuern, wie ich es gew√§hlt hatte: Sie m√ºssen Ihren Kopf drehen, um eine Zelle zu bewegen, dann Ihren Kopf in seine urspr√ºngliche Position zur√ºckbringen und ihn dann f√ºr den n√§chsten Schritt erneut drehen und so weiter. Und warum nicht einfach die Bruchwerte verwenden, bei denen der Kopf zur Seite gedreht und hin und her gekippt wird, um sich sofort auf die gew√ºnschte Zelle im Feld zu konzentrieren? Das hei√üt, wie man dem Cursor seine Position mit einem Blick oder vielmehr mit der Richtung des Kopfes anzeigt. Und dann ist die erste Methode ein zu hartes Training f√ºr den Hals. Sportunterricht ist nat√ºrlich gut, aber nicht in gleichem Ma√üe. Nat√ºrlich werden wir uns an die aktuelle Position irgendwo in ap.cur = {x: 1, y: 1} erinnern, um den Cursor an der vorherigen Position zu l√∂schen und die Koordinaten der neuen Position zu speichern, die anschlie√üend f√ºr das ‚ÄûKlicken‚Äú ben√∂tigt werden. AproposVisuelle Pfeile zur Angabe der Richtung der Cursorbewegung werden nicht mehr ben√∂tigt: Wir werfen ein 3D-Modell (arrows.fbx) aus dem Projekt. Sie k√∂nnen das Pfeilbild auch aus der Textur l√∂schen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doppelter Blink?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt sind wir zu den interessantesten gekommen. </font><font style="vertical-align: inherit;">Doppelklicken Sie auf die Augen. </font><font style="vertical-align: inherit;">Gib es zu, du wolltest das von dem Moment an tun, als du am Anfang des Artikels davon erfahren hast? </font><font style="vertical-align: inherit;">Jetzt werden Sie Ihren Freunden mitteilen, dass die Maus bereits veraltet ist und dass das doppelte Blinken heute f√ºr einen Klick verwendet wird! </font><font style="vertical-align: inherit;">Doppeltes Blinken. </font><font style="vertical-align: inherit;">Warum verdoppeln? </font><font style="vertical-align: inherit;">Alles ist einfach: Eine einzelne Person tut dies unfreiwillig in regelm√§√üigen Abst√§nden. Es w√§re also Sadismus, Ereignisse an einem einzigen Augenblick festzuhalten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qb/ke/8j/qbke8jqkze91tmgkb2xrhxhjrbm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Spark AR gibt es Ereignisse leftEye.openness und rightEye.openness, durch deren Abonnieren Sie den √ñffnungswert jedes Auges in event.newValue im Bereich von 0 bis 1 erhalten k√∂nnen. Wir betrachten das Auge als geschlossen mit einem Wert von weniger als 0,1. </font><font style="vertical-align: inherit;">Und wir werden die Blink-Verarbeitungsfunktion ap.blink1 () aufrufen (ap ist ein Namespace, f√ºr mich nur bequemer).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).leftEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).rightEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Blinkverarbeitungsfunktion selbst definieren wir das Mindestintervall zwischen den Blinksignalen von 200 Millisekunden, damit diese Funktion beim Blinken mit beiden Augen nicht sofort zweimal funktioniert, da ihr Anruf an jedem Auge h√§ngt. </font><font style="vertical-align: inherit;">Ich denke es ist klar. </font><font style="vertical-align: inherit;">Au√üerdem definieren wir die maximale doppelte Blinkzeit - 1 Sek. </font><font style="vertical-align: inherit;">Wenn wir in diesen Bereich passen, funktioniert die Funktion action (), die das Kreuz an der aktuellen Position anzeigt. </font><font style="vertical-align: inherit;">Gleichzeitig h√§ngen wir action () an das Ereignis word.openness - damit der Spieler die Wahl hat, ob er beim doppelten Blinken oder beim √ñffnen des Mundes ein Kreuz setzen m√∂chte.</font></font><br>
<br>
<pre><code class="javascript hljs">blink1:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">var</span> tmNew = <span class="hljs-built_in">Date</span>.now();
	<span class="hljs-keyword">if</span>  (tmNew - ap.blinkStart &gt; <span class="hljs-number">200</span>) {<font></font>
		ap.blinkCount++;<font></font>
		<span class="hljs-keyword">if</span>  (ap.blinkCount &gt; <span class="hljs-number">1</span>) {
			<span class="hljs-comment">//action</span>
			<span class="hljs-keyword">if</span> (tmNew - ap.blinkStart &lt; <span class="hljs-number">1000</span>) {<font></font>
				ap.action();<font></font>
			};<font></font>
			ap.blinkCount = <span class="hljs-number">0</span>;<font></font>
			ap.blinkStart = <span class="hljs-number">0</span>;<font></font>
		} <span class="hljs-keyword">else</span> {<font></font>
			ap.blinkStart = tmNew;<font></font>
		};<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-attr">action</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">if</span>  (ap.fProc == <span class="hljs-literal">false</span>) {<font></font>
		ap.fProc = <span class="hljs-literal">true</span>;<font></font>
		xo.putx();<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-comment">//mouth</span>
FaceTracking.face(<span class="hljs-number">0</span>).mouth.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &gt; <span class="hljs-number">0.2</span>) {<font></font>
		ap.action();<font></font>
	};<font></font>
});</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ger√§usche</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich fand sie in den lizenzfreien Abschnitten verschiedener Soundeffekt-Sites. Wichtiges Detail: F√ºr Spark AR sind Audiodateien eines bestimmten Formats erforderlich, n√§mlich M4A, Mono, 44,1 kHz, 16 Bit. Online-Konverter von WAV und MP3 zu M4A sind im globalen Netzwerk verf√ºgbar. Ich habe vier Ereignissen Sound hinzugef√ºgt: Bewegen, Dolche gewinnen, Tac Toe gewinnen und Unentschieden. Die Gesamtlautst√§rke aller Sounds nach der Konvertierung betrug 105 Kb. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Sounds in einem Skript zu verwenden, m√ºssen Sie ein Audiomodul im Skript anschlie√üen, der Szene die gew√ºnschte Anzahl von Lautsprechern anhand der Anzahl der Sounds hinzuf√ºgen (ich habe Speaker0, Speaker1, Speaker2, Speaker3), das Playback Controller-Modul zu Assets hinzuf√ºgen und die erforderliche Anzahl von AudioPlaybackController-Unterelementen entsprechend der Anzahl der Sounds erstellen und f√ºgen Sie jedem Lautsprecher einen Ton hinzu.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/ib/s8/zzibs8wwtsk_0dzinsuzxu4klb4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach k√∂nnen Sie den Sound aus dem Skript wie folgt abspielen (z. B. den Sound eines Klicks):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> audioClick = Audio.getPlaybackController(<span class="hljs-string">'audioPlaybackControllerClick'</span>);<font></font>
audioClick.reset();<font></font>
audioClick.setPlaying(<span class="hljs-literal">true</span>);</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endg√ºltiger Build</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Builds f√ºr alle unterst√ºtzten Mobilger√§te (Android, iOs) zu erstellen, klicken Sie einfach auf Datei -&gt; Exportieren. Das Volumen des Spiels f√ºr jede mobile Plattform mit allen 3D-Modellen und Texturen betrug in meinem Fall etwa 1 MB. Dann m√ºssen Sie √ºber den Browser zum Spark AR Hub auf Facebook / sparkarhub gehen und dort die exportierte Datei hochladen. Sie m√ºssen auch eine Beschreibung ausf√ºllen, nach Stichw√∂rtern suchen und ein Demo-Video herunterladen. Au√üerdem muss es √ºber die Instagram-Kamera am Telefon aufgenommen werden. Zu diesem Zweck gibt es im Hub einen Abschnitt "Vorschau-Kamera", der einen Link enth√§lt. Dieser Link kann auf einem mobilen Ger√§t ge√∂ffnet werden. Die Instagram-Anwendung wird gestartet und Ihre Maske (Spiel) wird darin ge√∂ffnet. Der Link kann auch zum Testen an alle Ihre Freunde gesendet werden, die nat√ºrlich ein Smartphone mit installierter Instagram-Anwendung ben√∂tigen.Bis zum Ende des Moderationsprozesses ist die Maske nicht f√ºr alle Benutzer sichtbar und sie k√∂nnen sie erst dann zu ihrer Effektliste hinzuf√ºgen, wenn sie nur √ºber diesen Link sichtbar ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Moderationsprozess dauert normalerweise einige Tage (es kann bis zu 10 Werktage dauern). So wie ich es verstehe, wird der Effekt zun√§chst einem Maschinentest unterzogen, zumindest einem Demo-Video - sicher, da ich eine Sekunde nach dem Senden eine Nachricht erhalten habe, dass die Moderation nicht bestanden hat. Grund - das Video enth√§lt Text. Im Allgemeinen ist maskierter Text aus irgendeinem Grund grunds√§tzlich nicht erw√ºnscht, wie die Regeln besagen. Ich musste die Spieloberfl√§che neu gestalten, damit die Punktzahl nicht wie zuvor st√§ndig √ºber dem Kopf des Spielers hing, sondern erst am Ende jeder Runde erschien. Und das Video erneut aufnehmen. Nachdem ich alle √Ñnderungen vorgenommen hatte, reichte ich mein Spiel zur Moderation erneut ein.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Drei Tage sp√§ter wurde das Spiel genehmigt, nachdem es in den Bereich ‚ÄûKamerastile‚Äú verschoben wurde. </font><font style="vertical-align: inherit;">Ehrlich gesagt kann ich mich nicht erinnern, in welchen Abschnitt ich ihn urspr√ºnglich eingef√ºgt habe (und der Abschnitt oder mit anderen Worten die Kategorie musste ausgew√§hlt werden). </font><font style="vertical-align: inherit;">Dies ist nicht offensichtlich, da es keinen Spieleabschnitt f√ºr Instagram gibt. </font><font style="vertical-align: inherit;">Aber okay, jetzt wissen wir, wo wir neue Spiele platzieren k√∂nnen. </font><font style="vertical-align: inherit;">Wenn die Spiele in Zukunft erscheinen, sollte Instagram wahrscheinlich einen neuen Abschnitt hinzuf√ºgen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesamt</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen eine Maske anprobieren, indem Sie auf Instagram zum Profil ihres Erstellers gehen und auf das Symbol der Masken unten klicken (Emoticon mit zwei Pluspunkten). </font><font style="vertical-align: inherit;">Gleiches gilt nat√ºrlich auch f√ºr maskierte Spiele. </font><font style="vertical-align: inherit;">Zuvor war es beim Betatest von Masken auch erforderlich, den Autor zu abonnieren. </font><font style="vertical-align: inherit;">Aber jetzt wurde diese Regel aufgehoben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie zahlen kein Geld f√ºr das Erstellen von Masken und es gibt keinen bezahlten Maskenladen, in dem sie verkauft werden k√∂nnen, wie Anwendungen in bekannten Gesch√§ften. Au√üerdem m√ºssen Sie nicht f√ºr die Platzierung der Maske bezahlen, die Sie in Ihrem Profil erstellt haben. Sie m√ºssen nur auf die Moderation warten. Viele Blogger und Unternehmen bestellen jedoch die Entwicklung von Markenmasken f√ºr sich. Nat√ºrlich k√∂nnen Sie Ihre Abonnenten bitten, die von Ihnen erstellten Masken anzuprobieren, Ihre Spiele zu spielen und dies alles auf Instagram zu √ºbertragen. Solche Aktionen k√∂nnen einen sogenannten viralen Effekt hervorrufen, insbesondere wenn das Spiel interessant ist. Dies kann dazu beitragen, Ihr Konto zu bewerben. Jetzt ist jedoch nicht jeder zu faul, um Masken zu machen. Die Idee von Instagram-Maskenspielen ist jedoch noch recht neu. Dar√ºber hinaus gibt es eine h√∂here Eintrittsschwelle und weniger Wettbewerb,da nicht jeder Maskenhersteller ein Programmierer ist, um ein vollwertiges Spiel zu schreiben.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486480/index.html">Waymo Robocars (Google) liefert Pakete in Phoenix, USA</a></li>
<li><a href="../de486482/index.html">Einzigartige Gesichter: Besucher z√§hlen, nach Au√üenstehenden suchen, Identifikation in Erkennungssystemen</a></li>
<li><a href="../de486484/index.html">Neuartiges Coronavirus nCOV / 2019-nCoV / NCP / COVID19: Prognosen, Statistiken, Schutz, Nachrichten [4. Nachdruck, Rev. 07.03]</a></li>
<li><a href="../de486488/index.html">Sivelkiriya-Betriebssystem: Einf√ºhrende Beschreibung</a></li>
<li><a href="../de486492/index.html">Icloud Phisher und wo leben sie?</a></li>
<li><a href="../de486500/index.html">Webkomponenten und offene Standards</a></li>
<li><a href="../de486506/index.html">Problem Nr. 30: IT-Schulung - aktuelle Probleme und Herausforderungen f√ºhrender Unternehmen</a></li>
<li><a href="../de486510/index.html">Anzeigen von Ausnahmeinformationen vor dem Notausgang</a></li>
<li><a href="../de486512/index.html">Kurz erfahren Sie, wie Sie Brother-MFPs das Scannen in Windows Server beibringen</a></li>
<li><a href="../de486514/index.html">Wochenendlesung: 10 Materialien zu Repliken von Soundkarten, offenen Soundbibliotheken und Audiosoftware</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>