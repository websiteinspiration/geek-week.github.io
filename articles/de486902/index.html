<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¥üèæ üë®‚Äçüë©‚Äçüëß‚Äçüë¶ üè® Protokollorientierte Programmierung in Swift 5.1 üé§ üçï üç®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Protokolle sind eine grundlegende Eigenschaft von Swift. Sie spielen eine wichtige Rolle in Standard-Swift-Bibliotheken und sind eine g√§ngige Methode ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Protokollorientierte Programmierung in Swift 5.1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486902/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protokolle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sind eine grundlegende Eigenschaft von Swift. </font><font style="vertical-align: inherit;">Sie spielen eine wichtige Rolle in Standard-Swift-Bibliotheken und sind eine g√§ngige Methode zur Codierung der Abstraktion. </font><font style="vertical-align: inherit;">In vielerlei Hinsicht √§hneln sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnittstellen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in anderen Programmiersprachen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Tutorial stellen wir Ihnen einen Anwendungsentwicklungsansatz vor, der als protokollorientierte Programmierung bezeichnet wird und fast zum Kern von Swift geworden ist. </font><font style="vertical-align: inherit;">Dies ist wirklich das, was Sie verstehen m√ºssen, wenn Sie Swift lernen! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Handbuch haben Sie:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den Unterschied zwischen objektorientierter und protokollorientierter Programmierung verstehen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Standardprotokollimplementierungen verstehen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahren Sie, wie Sie die Funktionalit√§t der Standard-Swift-Bibliothek erweitern k√∂nnen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahren Sie, wie Sie Protokolle mit Generika erweitern.</font></font></li>
</ul><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Loslegen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich vor, Sie entwickeln ein Rennspiel. Ihre Spieler k√∂nnen Autos, Motorr√§der und Flugzeuge fahren. Und selbst wenn man auf V√∂geln fliegt, ist das ein Spiel, oder? Die Hauptsache hier ist, dass es eine Dofiga aller Arten von ‚ÄûDingen‚Äú gibt, auf denen man fahren, fliegen usw. kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein √ºblicher Ansatz zur Entwicklung solcher Anwendungen ist die objektorientierte Programmierung. In diesem Fall schlie√üen wir die gesamte Logik in einige Basisklassen ein, von denen wir danach erben. Basisklassen m√ºssen daher die Logik von "Blei" und "Pilot" enthalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir beginnen mit der Entwicklung, indem wir Klassen f√ºr jedes Fahrzeug erstellen. Wir werden die "V√∂gel" auf sp√§ter verschieben, wir werden etwas sp√§ter zu ihnen zur√ºckkehren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auto</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motorrad</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Funktionalit√§t ist sehr √§hnlich, daher erstellen wir die Basisklasse </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotorVehicle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Auto und Motorrad werden von MotorVehicle geerbt. Auf die gleiche Weise erstellen wir die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aircraft-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Basisklasse </font><font style="vertical-align: inherit;">, aus der wir die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plane-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse erstellen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie denken, dass alles in Ordnung ist, aber - bam! - Die Aktion Ihres Spiels findet im 20. Jahrhundert statt und einige Autos k√∂nnen bereits </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fliegen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also hatten wir einen Knebel. Swift hat keine Mehrfachvererbung. Wie k√∂nnen Ihre fliegenden Autos sowohl von Motorfahrzeugen als auch von Flugzeugen geerbt werden? Eine weitere Basisklasse erstellen, die beide Funktionen kombiniert? H√∂chstwahrscheinlich nicht, da es keinen klaren und einfachen Weg gibt, dies zu erreichen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und was wird unser Spiel in dieser schrecklichen Situation retten? </font><font style="vertical-align: inherit;">Protokollorientierte Programmierung hat es eilig zu helfen!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie ist protokollorientierte Programmierung?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Protokollen k√∂nnen Sie √§hnliche Methoden, Funktionen und Eigenschaften f√ºr Klassen, Strukturen und Aufz√§hlungen gruppieren. In nur Klassen k√∂nnen Sie jedoch die Vererbung von der Basisklasse verwenden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Vorteil von Protokollen in Swift besteht darin, dass ein Objekt mehreren Protokollen entsprechen kann.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn Sie diese Methode verwenden, wird Ihr Code modularer. Stellen Sie sich Protokolle als Bausteine ‚Äã‚Äãder Funktionalit√§t vor. Wenn Sie einem Objekt neue Funktionen hinzuf√ºgen und es an ein bestimmtes Protokoll anpassen, erstellen Sie kein v√∂llig neues Objekt von Grund auf neu. Es w√§re zu lang. Stattdessen f√ºgen Sie verschiedene Bausteine ‚Äã‚Äãhinzu, bis das Objekt fertig ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Wechsel von einer Basisklasse zu Protokollen l√∂st unser Problem. </font><font style="vertical-align: inherit;">Mit Protokollen k√∂nnen wir eine FlyingCar-Klasse erstellen, die sowohl MotorVehicle als auch Aircraft entspricht. </font><font style="vertical-align: inherit;">Sch√∂n, was?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lass uns den Code machen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie Xcode aus, erstellen Sie einen Spielplatz, speichern Sie ihn als SwiftProtocols.playground und f√ºgen Sie diesen Code hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Bird</span> </span>{
  <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> }
  <span class="hljs-keyword">var</span> canFly: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">get</span> }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Flyable</span> </span>{
  <span class="hljs-keyword">var</span> airspeedVelocity: <span class="hljs-type">Double</span> { <span class="hljs-keyword">get</span> }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kompilieren Sie mit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Command-Shift-Return</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um sicherzustellen, dass alles in Ordnung ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier definieren wir ein einfaches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokoll </font><font style="vertical-align: inherit;">mit den </font><b><font style="vertical-align: inherit;">Eigenschaften </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canFly</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dann haben wir das definieren </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flyable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokoll </font><font style="vertical-align: inherit;">mit der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">airspeedVelocity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eigenschaft </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der ‚ÄûVorprotokoll-√Ñra‚Äú begann ein Entwickler mit der Flyable-Klasse als Basisklasse und definierte dann mithilfe der Vererbung Bird und alles andere, was fliegen k√∂nnte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der protokollorientierten Programmierung beginnt alles mit einem Protokoll. Mit dieser Technik k√∂nnen wir eine Skizze einer Funktion ohne Basisklasse kapseln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie jetzt sehen werden, macht dies den Schriftentwurfsprozess viel flexibler.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bestimmen Sie den Typ, der dem Protokoll entspricht</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie diesen Code unten auf dem Spielplatz hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FlappyBird</span>: <span class="hljs-title">Bird</span>, <span class="hljs-title">Flyable</span> </span>{
  <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
  <span class="hljs-keyword">let</span> flappyAmplitude: <span class="hljs-type">Double</span>
  <span class="hljs-keyword">let</span> flappyFrequency: <span class="hljs-type">Double</span>
  <span class="hljs-keyword">let</span> canFly = <span class="hljs-literal">true</span><font></font>
<font></font>
  <span class="hljs-keyword">var</span> airspeedVelocity: <span class="hljs-type">Double</span> {
    <span class="hljs-number">3</span> * flappyFrequency * flappyAmplitude<font></font>
  }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Code definiert eine neue </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FlappyBird-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Struktur </font><font style="vertical-align: inherit;">, die sowohl dem Bird-Protokoll als auch dem Flyable-Protokoll entspricht. </font><font style="vertical-align: inherit;">Die Eigenschaft airspeedVelocity ist eine Arbeit von Flappy Frequency und Flappy Amplitude. </font><font style="vertical-align: inherit;">Die Eigenschaft canFly gibt true zur√ºck. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie nun die Definitionen von zwei weiteren Strukturen hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Penguin</span>: <span class="hljs-title">Bird</span> </span>{
  <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
  <span class="hljs-keyword">let</span> canFly = <span class="hljs-literal">false</span><font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SwiftBird</span>: <span class="hljs-title">Bird</span>, <span class="hljs-title">Flyable</span> </span>{
  <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span> { <span class="hljs-string">"Swift \(version)"</span> }
  <span class="hljs-keyword">let</span> canFly = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">let</span> version: <span class="hljs-type">Double</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> speedFactor = <span class="hljs-number">1000.0</span><font></font>
  <font></font>
  <span class="hljs-keyword">init</span>(version: <span class="hljs-type">Double</span>) {
    <span class="hljs-keyword">self</span>.version = version<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// Swift is FASTER with each version!</span>
  <span class="hljs-keyword">var</span> airspeedVelocity: <span class="hljs-type">Double</span> {<font></font>
    version * speedFactor<font></font>
  }<font></font>
}</code></pre><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pinguin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein Vogel, kann aber nicht fliegen. </font><font style="vertical-align: inherit;">Es ist gut, dass wir keine Vererbung verwenden und nicht alle V√∂gel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flugf√§hig gemacht haben</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Protokolle verwenden, definieren Sie die Komponenten der Funktion und stellen </font><b><font style="vertical-align: inherit;">sicher</font></b><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">dass alle geeigneten Objekte dem Protokoll entsprechen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann definieren wir </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftBird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber in unserem Spiel gibt es verschiedene Versionen davon. </font><font style="vertical-align: inherit;">Je gr√∂√üer die Versionsnummer ist, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desto</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gr√∂√üer ist die </font><b><font style="vertical-align: inherit;">Fluggeschwindigkeit</font></b><font style="vertical-align: inherit;"> , die als berechnete Eigenschaft definiert ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt jedoch eine gewisse Redundanz. </font><font style="vertical-align: inherit;">Jeder Vogeltyp muss eine explizite Definition der canFly-Eigenschaft definieren, obwohl wir eine Definition des Flyable-Protokolls haben. </font><font style="vertical-align: inherit;">Es sieht so aus, als m√ºssten wir die Standardimplementierung von Protokollmethoden bestimmen. </font><font style="vertical-align: inherit;">Nun, daf√ºr gibt es Protokollerweiterungen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweitern des Protokolls mit Standardverhalten</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Protokollerweiterungen k√∂nnen Sie das Standardprotokollverhalten festlegen. </font><font style="vertical-align: inherit;">Schreiben Sie diesen Code unmittelbar nach der Definition des Bird-Protokolls:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">Bird</span> </span>{
  <span class="hljs-comment">// Flyable birds can fly!</span>
  <span class="hljs-keyword">var</span> canFly: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">self</span> <span class="hljs-keyword">is</span> <span class="hljs-type">Flyable</span> }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Code definiert die Erweiterung des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokolls </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Diese Erweiterung bestimmt, dass die Eigenschaft </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canFly</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> true </font><b><font style="vertical-align: inherit;">zur√ºckgibt</font></b><font style="vertical-align: inherit;"> , wenn der Typ dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flyable-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokoll entspricht </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mit anderen Worten, jeder Flyable-Vogel muss canFly nicht mehr explizit einstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entfernen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nun </font><b><font style="vertical-align: inherit;">let canFly = ...</font></b><font style="vertical-align: inherit;"> aus den Definitionen von FlappyBird, Penguin und SwiftBird. </font><font style="vertical-align: inherit;">Kompilieren Sie den Code und stellen Sie sicher, dass alles in Ordnung ist.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns die Transfers machen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aufz√§hlungen in Swift k√∂nnen Protokollen entsprechen. </font><font style="vertical-align: inherit;">F√ºgen Sie die folgende Aufz√§hlungsdefinition hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">UnladenSwallow</span>: <span class="hljs-title">Bird</span>, <span class="hljs-title">Flyable</span> </span>{
  <span class="hljs-keyword">case</span> african
  <span class="hljs-keyword">case</span> european
  <span class="hljs-keyword">case</span> unknown<font></font>
  <font></font>
  <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span> {
    <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
    <span class="hljs-keyword">case</span> .african:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"African"</span>
    <span class="hljs-keyword">case</span> .european:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"European"</span>
    <span class="hljs-keyword">case</span> .unknown:
      <span class="hljs-keyword">return</span> <span class="hljs-string">"What do you mean? African or European?"</span><font></font>
    }<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">var</span> airspeedVelocity: <span class="hljs-type">Double</span> {
    <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
    <span class="hljs-keyword">case</span> .african:
      <span class="hljs-keyword">return</span> <span class="hljs-number">10.0</span>
    <span class="hljs-keyword">case</span> .european:
      <span class="hljs-keyword">return</span> <span class="hljs-number">9.9</span>
    <span class="hljs-keyword">case</span> .unknown:
      <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"You are thrown from the bridge of death!"</span>)<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch die Definition der entsprechenden Eigenschaften </font><font style="vertical-align: inherit;">entspricht </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnladenSwallow</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zwei Protokollen - Bird und Flyable. </font><font style="vertical-align: inherit;">Auf diese Weise wird die Standarddefinition f√ºr canFly implementiert.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úberschreiben des Standardverhaltens</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Typ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnladenSwallow</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> erhielt gem√§√ü dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bird-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokoll </font><font style="vertical-align: inherit;">automatisch eine Implementierung f√ºr </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canFly</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir ben√∂tigen jedoch </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnladenSwallow.unknown,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºr canFly zur√ºckzugeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie den folgenden Code hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">UnladenSwallow</span> </span>{
  <span class="hljs-keyword">var</span> canFly: <span class="hljs-type">Bool</span> {
    <span class="hljs-keyword">self</span> != .unknown<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden nur .african und .european f√ºr canFly wahr zur√ºckkehren. </font><font style="vertical-align: inherit;">H√∂r zu! </font><font style="vertical-align: inherit;">F√ºgen Sie den folgenden Code unten auf unserem Spielplatz hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">UnladenSwallow</span>.unknown.canFly         <span class="hljs-comment">// false</span>
<span class="hljs-type">UnladenSwallow</span>.african.canFly         <span class="hljs-comment">// true</span>
<span class="hljs-type">Penguin</span>(name: <span class="hljs-string">"King Penguin"</span>).canFly  <span class="hljs-comment">// false</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie den Spielplatz zusammen und √ºberpr√ºfen Sie die empfangenen Werte anhand der in den obigen Kommentaren angegebenen Werte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher definieren wir Eigenschaften und Methoden √§hnlich wie virtuelle Methoden in der objektorientierten Programmierung neu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protokoll erweitern</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen Ihr eigenes Protokoll auch an ein anderes Protokoll aus der Swift-Standardbibliothek anpassen und das Standardverhalten definieren. </font><font style="vertical-align: inherit;">Ersetzen Sie die Bird-Protokolldeklaration durch den folgenden Code:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Bird</span>: <span class="hljs-title">CustomStringConvertible</span> </span>{
  <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span> { <span class="hljs-keyword">get</span> }
  <span class="hljs-keyword">var</span> canFly: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">get</span> }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">CustomStringConvertible</span> <span class="hljs-title">where</span> <span class="hljs-title">Self</span>: <span class="hljs-title">Bird</span> </span>{
  <span class="hljs-keyword">var</span> description: <span class="hljs-type">String</span> {<font></font>
    canFly ? <span class="hljs-string">"I can fly"</span> : <span class="hljs-string">"Guess I'll just sit here :["</span><font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Einhaltung des CustomStringConvertible-Protokolls bedeutet, dass Ihr Typ eine Beschreibungseigenschaft haben muss. </font><font style="vertical-align: inherit;">Anstatt diese Eigenschaft dem Bird-Typ und all seinen Ableitungen hinzuzuf√ºgen, definieren wir die Protokollerweiterung CustomStringConvertible, die nur dem Bird-Typ zugeordnet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnladenSwallow.african</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> am unteren Rand des Spielplatzes. </font><font style="vertical-align: inherit;">Kompilieren Sie und Sie werden sehen, dass ich fliegen kann.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protokolle in Swift Standard Libraries</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen k√∂nnen, sind Protokolle eine effektive M√∂glichkeit, Typen zu erweitern und anzupassen. </font><font style="vertical-align: inherit;">In der Swift-Standardbibliothek wird diese Eigenschaft ebenfalls h√§ufig verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie diesen Code dem Spielplatz hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> numbers = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-number">60</span>]
<span class="hljs-keyword">let</span> slice = numbers[<span class="hljs-number">1</span>...<span class="hljs-number">3</span>]
<span class="hljs-keyword">let</span> reversedSlice = slice.reversed()<font></font>
<font></font>
<span class="hljs-keyword">let</span> answer = reversedSlice.<span class="hljs-built_in">map</span> { $<span class="hljs-number">0</span> * <span class="hljs-number">10</span> }
<span class="hljs-built_in">print</span>(answer)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie wissen wahrscheinlich, was dieser Code ausgeben wird, aber Sie werden m√∂glicherweise √ºberrascht sein, welche Typen hier verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Slice ist beispielsweise nicht Array, sondern ArraySlice. </font><font style="vertical-align: inherit;">Dies ist ein spezieller ‚ÄûWrapper‚Äú, der eine effiziente M√∂glichkeit bietet, mit Teilen des Arrays zu arbeiten. </font><font style="vertical-align: inherit;">Dementsprechend ist reversedSlice eine ReversedCollection &lt;ArraySlice&gt;. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gl√ºcklicherweise ist die Kartenfunktion als Erweiterung des Sequenzprotokolls definiert, das allen Sammlungstypen entspricht. </font><font style="vertical-align: inherit;">Dies erm√∂glicht es uns, die Map-Funktion sowohl auf Array als auch auf ReversedCollection anzuwenden und den Unterschied nicht zu bemerken. </font><font style="vertical-align: inherit;">Bald werden Sie diesen n√ºtzlichen Trick nutzen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auf die Pl√§tze</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bisher haben wir verschiedene Typen identifiziert, die dem Bird-Protokoll entsprechen. </font><font style="vertical-align: inherit;">Jetzt werden wir etwas ganz anderes hinzuf√ºgen:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Motorcycle</span> </span>{
  <span class="hljs-keyword">init</span>(name: <span class="hljs-type">String</span>) {
    <span class="hljs-keyword">self</span>.name = name<font></font>
    speed = <span class="hljs-number">200.0</span><font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>
  <span class="hljs-keyword">var</span> speed: <span class="hljs-type">Double</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Typ hat nichts mit V√∂geln und Fl√ºgen zu tun. </font><font style="vertical-align: inherit;">Wir wollen ein Motorradrennen mit Pinguinen veranstalten. </font><font style="vertical-align: inherit;">Es ist Zeit, diese seltsame Firma an den Start zu bringen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles zusammenf√ºgen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um solche unterschiedlichen Rennfahrer irgendwie zu vereinen, brauchen wir ein gemeinsames Protokoll f√ºr den Rennsport. </font><font style="vertical-align: inherit;">Wir k√∂nnen all dies tun, ohne alle zuvor erstellten Typen zu ber√ºhren, mit Hilfe einer wunderbaren Sache, die als r√ºckwirkende Modellierung bezeichnet wird. </font><font style="vertical-align: inherit;">F√ºgen Sie dies einfach dem Spielplatz hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">// 1</span>
<span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Racer</span> </span>{
  <span class="hljs-keyword">var</span> speed: <span class="hljs-type">Double</span> { <span class="hljs-keyword">get</span> }  <span class="hljs-comment">// speed is the only thing racers care about</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// 2</span>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">FlappyBird</span>: <span class="hljs-title">Racer</span> </span>{
  <span class="hljs-keyword">var</span> speed: <span class="hljs-type">Double</span> {<font></font>
    airspeedVelocity<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">SwiftBird</span>: <span class="hljs-title">Racer</span> </span>{
  <span class="hljs-keyword">var</span> speed: <span class="hljs-type">Double</span> {<font></font>
    airspeedVelocity<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">Penguin</span>: <span class="hljs-title">Racer</span> </span>{
  <span class="hljs-keyword">var</span> speed: <span class="hljs-type">Double</span> {
    <span class="hljs-number">42</span>  <span class="hljs-comment">// full waddle speed</span><font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">UnladenSwallow</span>: <span class="hljs-title">Racer</span> </span>{
  <span class="hljs-keyword">var</span> speed: <span class="hljs-type">Double</span> {<font></font>
    canFly ? airspeedVelocity : <span class="hljs-number">0.0</span><font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">Motorcycle</span>: <span class="hljs-title">Racer</span> </span>{}<font></font>
<font></font>
<span class="hljs-comment">// 3</span>
<span class="hljs-keyword">let</span> racers: [<span class="hljs-type">Racer</span>] =<font></font>
  [<span class="hljs-type">UnladenSwallow</span>.african,
   <span class="hljs-type">UnladenSwallow</span>.european,
   <span class="hljs-type">UnladenSwallow</span>.unknown,
   <span class="hljs-type">Penguin</span>(name: <span class="hljs-string">"King Penguin"</span>),
   <span class="hljs-type">SwiftBird</span>(version: <span class="hljs-number">5.1</span>),
   <span class="hljs-type">FlappyBird</span>(name: <span class="hljs-string">"Felipe"</span>, flappyAmplitude: <span class="hljs-number">3.0</span>, flappyFrequency: <span class="hljs-number">20.0</span>),
   <span class="hljs-type">Motorcycle</span>(name: <span class="hljs-string">"Giacomo"</span>)]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgendes tun wir hier: Definieren Sie zun√§chst das Racer-Protokoll. </font><font style="vertical-align: inherit;">Dies ist alles, was an Rennen teilnehmen kann. </font><font style="vertical-align: inherit;">Dann haben wir alle unsere zuvor erstellten Typen in das Racer-Protokoll umgewandelt. </font><font style="vertical-align: inherit;">Und schlie√ülich erstellen wir ein Array, das Instanzen von jedem unserer Typen enth√§lt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie den Spielplatz so zusammen, dass alles in Ordnung ist.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H√∂chstgeschwindigkeit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir schreiben eine Funktion, um die H√∂chstgeschwindigkeit der Fahrer zu bestimmen. </font><font style="vertical-align: inherit;">F√ºgen Sie diesen Code am Ende des Spielplatzes hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">topSpeed</span><span class="hljs-params">(of racers: [Racer])</span></span> -&gt; <span class="hljs-type">Double</span> {<font></font>
  racers.<span class="hljs-built_in">max</span>(by: { $<span class="hljs-number">0</span>.speed &lt; $<span class="hljs-number">1</span>.speed })?.speed ?? <span class="hljs-number">0.0</span><font></font>
}<font></font>
<font></font>
topSpeed(of: racers) <span class="hljs-comment">// 5100</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier verwenden wir die Max-Funktion, um den Fahrer mit maximaler Geschwindigkeit zu finden und zur√ºckzugeben. </font><font style="vertical-align: inherit;">Wenn das Array leer ist, wird 0.0 zur√ºckgegeben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Funktion allgemeiner gestalten</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, das Racers-Array ist gro√ü genug, und wir m√ºssen die maximale Geschwindigkeit nicht im gesamten Array, sondern in einem Teil davon ermitteln. </font><font style="vertical-align: inherit;">Die L√∂sung besteht darin, topSpeed ‚Äã‚Äã(von :) so zu √§ndern, dass nicht speziell ein Array, sondern alles, was dem Sequenzprotokoll entspricht, als Argument verwendet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ersetzen Sie unsere Implementierung von topSpeed ‚Äã‚Äã(von :) wie folgt:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">// 1</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">topSpeed</span>&lt;RacersType: Sequence&gt;<span class="hljs-params">(of racers: RacersType)</span></span> -&gt; <span class="hljs-type">Double</span>
    <span class="hljs-comment">/*2*/</span> <span class="hljs-keyword">where</span> <span class="hljs-type">RacersType</span>.<span class="hljs-type">Iterator</span>.<span class="hljs-type">Element</span> == <span class="hljs-type">Racer</span> {
  <span class="hljs-comment">// 3</span>
  racers.<span class="hljs-built_in">max</span>(by: { $<span class="hljs-number">0</span>.speed &lt; $<span class="hljs-number">1</span>.speed })?.speed ?? <span class="hljs-number">0.0</span>
}</code></pre><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RacersType ist der generische Argumenttyp unserer Funktion. </font><font style="vertical-align: inherit;">Es kann alles sein, was dem Sequenzprotokoll entspricht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dabei wird festgelegt, dass der Sequenzinhalt dem Racer-Protokoll entsprechen muss.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Funktionsk√∂rper selbst bleibt unver√§ndert.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√úberpr√ºfen Sie dies, indem Sie dies am Ende unseres Spielplatzes hinzuf√ºgen:</font></font><br>
<br>
<pre><code class="swift hljs">topSpeed(of: racers[<span class="hljs-number">1</span>...<span class="hljs-number">3</span>]) <span class="hljs-comment">// 42</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt funktioniert unsere Funktion mit jedem Typ, der das Sequenzprotokoll erf√ºllt, einschlie√ülich ArraySlice.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Funktion ‚Äûschneller‚Äú machen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geheimnis: Du kannst es noch besser machen. </font><font style="vertical-align: inherit;">F√ºgen Sie dies ganz unten hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">Sequence</span> <span class="hljs-title">where</span> <span class="hljs-title">Iterator</span>.<span class="hljs-title">Element</span> == <span class="hljs-title">Racer</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">topSpeed</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Double</span> {
    <span class="hljs-keyword">self</span>.<span class="hljs-built_in">max</span>(by: { $<span class="hljs-number">0</span>.speed &lt; $<span class="hljs-number">1</span>.speed })?.speed ?? <span class="hljs-number">0.0</span><font></font>
  }<font></font>
}<font></font>
<font></font>
racers.topSpeed()        <span class="hljs-comment">// 5100</span>
racers[<span class="hljs-number">1</span>...<span class="hljs-number">3</span>].topSpeed() <span class="hljs-comment">// 42</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt haben wir das Sequenzprotokoll selbst mit topSpeed ‚Äã‚Äã() erweitert. </font><font style="vertical-align: inherit;">Dies gilt nur, wenn Sequence den Racer-Typ enth√§lt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protokollkomparatoren</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiteres Merkmal von Swift-Protokollen ist die Definition der Gleichheitsoperatoren von Objekten oder deren Vergleich. </font><font style="vertical-align: inherit;">Wir schreiben folgendes:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Score</span> </span>{
  <span class="hljs-keyword">var</span> value: <span class="hljs-type">Int</span> { <span class="hljs-keyword">get</span> }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RacingScore</span>: <span class="hljs-title">Score</span> </span>{
  <span class="hljs-keyword">let</span> value: <span class="hljs-type">Int</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Score-Protokoll k√∂nnen Sie Code schreiben, der alle Elemente dieses Typs auf eine Weise behandelt. Wenn Sie jedoch einen ganz bestimmten Typ wie RacingScore erhalten, werden Sie ihn nicht mit anderen Ableitungen des Score-Protokolls verwechseln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√∂chten, dass die Punktzahlen verglichen werden, um festzustellen, wer die h√∂chste Punktzahl hat. Vor Swift 3 mussten Entwickler globale Funktionen schreiben, um einen Operator f√ºr ein Protokoll zu definieren. Jetzt k√∂nnen wir diese statischen Methoden im Modell selbst definieren. Dazu ersetzen wir die Definitionen von Score und RacingScore wie folgt:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Score</span>: <span class="hljs-title">Comparable</span> </span>{
  <span class="hljs-keyword">var</span> value: <span class="hljs-type">Int</span> { <span class="hljs-keyword">get</span> }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RacingScore</span>: <span class="hljs-title">Score</span> </span>{
  <span class="hljs-keyword">let</span> value: <span class="hljs-type">Int</span><font></font>
  <font></font>
  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> &lt;(lhs: RacingScore, rhs: RacingScore) -&gt; <span class="hljs-title">Bool</span> </span>{<font></font>
    lhs.value &lt; rhs.value<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die gesamte Logik f√ºr RacingScore an einem Ort. </font><font style="vertical-align: inherit;">F√ºr das Protokoll "Vergleichbar" m√ºssen Sie eine Implementierung nur f√ºr die Funktion "weniger als" definieren. </font><font style="vertical-align: inherit;">Alle anderen Vergleichsfunktionen werden automatisch implementiert, basierend auf der Implementierung der von uns erstellten Funktion "kleiner als". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testen:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">RacingScore</span>(value: <span class="hljs-number">150</span>) &gt;= <span class="hljs-type">RacingScore</span>(value: <span class="hljs-number">130</span>) <span class="hljs-comment">// true</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ñnderungen am Objekt vornehmen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bisher hat jedes Beispiel gezeigt, wie </font><font style="vertical-align: inherit;">Funktionen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hinzugef√ºgt werden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> k√∂nnen. </font><font style="vertical-align: inherit;">Aber was ist, wenn wir ein Protokoll erstellen m√∂chten, das etwas </font><font style="vertical-align: inherit;">in einem Objekt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√§ndert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">Dies kann mithilfe von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mutationsmethoden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in unserem Protokoll erfolgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie ein neues Protokoll hinzu:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Cheat</span> </span>{
  <span class="hljs-keyword">mutating</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">boost</span><span class="hljs-params">(<span class="hljs-number">_</span> power: Double)</span></span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier definieren wir ein Protokoll, das es uns erm√∂glicht zu betr√ºgen. </font><font style="vertical-align: inherit;">Auf welche Weise? </font><font style="vertical-align: inherit;">Beliebige √Ñnderung des Boost-Inhalts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie nun eine SwiftBird-Erweiterung, die dem Cheat-Protokoll entspricht:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">SwiftBird</span>: <span class="hljs-title">Cheat</span> </span>{
  <span class="hljs-keyword">mutating</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">boost</span><span class="hljs-params">(<span class="hljs-number">_</span> power: Double)</span></span> {<font></font>
    speedFactor += power<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier implementieren wir die Funktion boost (_ :) und erh√∂hen den speedFactor um den √ºbertragenen Wert. </font><font style="vertical-align: inherit;">Das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutierende Schl√ºsselwort</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> macht die Struktur verst√§ndlich, dass einer ihrer Werte durch diese Funktion ge√§ndert wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√∂r zu!</font></font><br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> swiftBird = <span class="hljs-type">SwiftBird</span>(version: <span class="hljs-number">5.0</span>)<font></font>
swiftBird.boost(<span class="hljs-number">3.0</span>)<font></font>
swiftBird.airspeedVelocity <span class="hljs-comment">// 5015</span>
swiftBird.boost(<span class="hljs-number">3.0</span>)<font></font>
swiftBird.airspeedVelocity <span class="hljs-comment">// 5030</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier k√∂nnen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie den vollst√§ndigen Quellcode f√ºr den Spielplatz herunterladen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben die M√∂glichkeiten der protokollorientierten Programmierung kennengelernt, indem Sie einfache Protokolle erstellt und deren Funktionen mithilfe von Erweiterungen erweitert haben. Mit der Standardimplementierung geben Sie den Protokollen das entsprechende ‚ÄûVerhalten‚Äú. Fast wie bei Basisklassen, aber nur besser, da dies alles auch f√ºr Strukturen und Aufz√§hlungen gilt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben auch gesehen, dass die Protokollerweiterung f√ºr die zugrunde liegenden Swift-Protokolle gilt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier finden Sie den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offiziellen Protokollf√ºhrer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen sich auch eine hervorragende </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WWDC-Vorlesung √ºber</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> protokollorientierte Programmierung </font><font style="vertical-align: inherit;">ansehen </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie bei jedem Programmierparadigma besteht die Gefahr, dass Sie mitgerissen werden und die Protokolle links und rechts verwenden. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist ein interessanter Hinweis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu den Gefahren von Entscheidungen im Stil von Silberkugeln.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de486902/">https://habr.com/ru/post/de486902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486884/index.html">Das japanische Pharmaunternehmen beginnt mit dem Testen von Arzneimitteln, die mithilfe eines neuronalen Netzwerks synthetisiert wurden</a></li>
<li><a href="../de486888/index.html">Das Buch ‚ÄûObjektorientierter Ansatz. 5th int. ed. "</a></li>
<li><a href="../de486890/index.html">Selbstentwicklung: Wie ich nicht auf zwei St√ºhlen sa√ü und einen dritten fand</a></li>
<li><a href="../de486892/index.html">Kontaktauswahl-API oder wie Sie Ihre Kontakte mit einem Browser teilen</a></li>
<li><a href="../de486896/index.html">UID- und Stalker-Autorisierung auf dem MAG250</a></li>
<li><a href="../de486904/index.html">Anzeigen des Status der Qualit√§tskontrolle von Quellcode in SonarQube f√ºr Entwickler</a></li>
<li><a href="../de486908/index.html">Wulfric Ransomware ist ein Kryptor, den es nicht gibt</a></li>
<li><a href="../de486912/index.html">Lowkiq. Warum haben wir das gemacht?</a></li>
<li><a href="../de486914/index.html">8. Fortinet Erste Schritte v6.0. Arbeiten Sie mit Benutzern</a></li>
<li><a href="../de486918/index.html">Emacs - 6 Produktivit√§ts-Tricks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>