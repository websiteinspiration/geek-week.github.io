<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏾 💭 🧜🏾 CSS阻止页面解析时该怎么办？ 🚒 ☝🏻 🔳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近，我对一个站点进行了审核，并遇到了preload/polyfill一些客户已经看到的模式。今天，不建议使用此先前流行的模式。但是，考虑它对于说明Web浏览器谨慎使用预载材料机制的重要性很有用。这也是有趣的，因为它可以让你展示如何在文档中元素的顺序会影响性能的一个真实的例子（这是在讨论这个美妙的哈...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CSS阻止页面解析时该怎么办？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/490628/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近，我对一个站点进行了审核，并遇到了</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些客户已经看到</font><font style="vertical-align: inherit;">的模式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">今天，不建议使用此先前流行的模式。</font><font style="vertical-align: inherit;">但是，考虑它对于说明Web浏览器谨慎使用预载材料机制的重要性很有用。</font><font style="vertical-align: inherit;">这也是有趣的，因为它可以让你展示如何在文档中元素的顺序会影响性能的一个真实的例子（这是在讨论</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">美妙的哈里·罗伯茨的文章）。</font><font style="vertical-align: inherit;">
该材料（我们今天出版的翻译）专门用于分析CSS资源使用不当和不及时处理会影响网页性能的情况。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/j9/ku/dh/j9kudhouixuhlvhywk7misjih8w.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于loadCSS</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filament Group的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">忠实</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">拥护者</font></a><font style="vertical-align: inherit;"> -他们发布了数量惊人的优秀项目。此外，他们不断创建宝贵的工具并共享它们，以改善Web。这些工具之一就是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loadCSS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，很长一段时间以来，我一直是我推荐所有人用来加载非关键CSS资源的工具。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管现在情况已经改变了（Filament Group发表了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一篇</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很好的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">文章，</font></a><font style="vertical-align: inherit;">介绍了他们的员工</font><font style="vertical-align: inherit;">最近</font><font style="vertical-align: inherit;">喜欢使用什么），但是当我审核站点时，我仍然经常看到他们</font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在生产中</font><font style="vertical-align: inherit;">如何</font><font style="vertical-align: inherit;">使用它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我遇到的模式之一是模式</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用这种方法，所有具有样式的文件都将以预加载模式加载（</font></font><code>rel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相应链接</font><font style="vertical-align: inherit;">的属性</font><font style="vertical-align: inherit;">设置为</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">之后，当他们准备好使用时，应用其事件将其</font></font><code>onload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接到页面。</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"path/to/mystylesheet.css"</span> <span class="hljs-keyword">as</span>=<span class="hljs-string">"style"</span> onload=<span class="hljs-string">"this.rel='stylesheet'"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"path/to/mystylesheet.css"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于并非所有的浏览器都支持design </font></font><code>&lt;a href="https://caniuse.com/#feat=link-rel-preload"&gt;&lt;link rel="preload"&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此该项目</font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为开发人员提供了一个方便的polyfill，它将在相关链接的描述之后添加到页面中：</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"path/to/mystylesheet.css"</span> <span class="hljs-keyword">as</span>=<span class="hljs-string">"style"</span> onload=<span class="hljs-string">"this.rel='stylesheet'"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"path/to/mystylesheet.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ ... }());
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络优先顺序混乱</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我从不热衷于这种模式。</font><font style="vertical-align: inherit;">预加载是一种粗鲁的工具。</font><font style="vertical-align: inherit;">使用属性链接下载的资料可以</font></font><code>rel="preload"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与其他资料争夺网络资源。</font><font style="vertical-align: inherit;">使用情况</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假定由于样式表在页面输出中不发挥关键作用而异步加载的样式表会从浏览器获得很高的优先级。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下图取自WebPageTest，很好地演示了此问题。</font><font style="vertical-align: inherit;">在第3-6行中，您可以看到使用pattern异步加载CSS文件</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，尽管开发人员认为这些文件不是很重要，以至于下载它们会阻止渲染，但是请使用</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 表示将在浏览器接收剩余资源之前加载它们。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f9/07f/75a/8f907f75ae91cafe98091b00c2e7750e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载时使用预加载模式的CSS文件将比其他资源更早地进入浏览器，即使它们不是对页面的初始呈现至关重要的资源</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML解析器锁</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与资源加载优先级相关的问题已经足够避免在大多数情况下使用该模式</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是在这种情况下，由于存在另一个以常规方式加载的样式表，使情况更加恶化。</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"path/to/main.css"</span> /&gt;<font></font>
&lt;link rel="preload" href="path/to/mystylesheet.css" as="style" onload="this.rel='stylesheet'"&gt;<font></font>
&lt;noscript&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="path/to/mystylesheet.css"&gt;<font></font>
&lt;/noscript&gt;<font></font>
&lt;script&gt;<font></font>
/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */<font></font>
(function(){ ... }());<font></font>
&lt;/script&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用时也会出现同样的问题，</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致最重要的文件没有获得高优先级。但这对浏览器解析页面的能力具有同样重要的作用，也许不太明显。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同样，它已经被详细地</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">写</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">，所以我建议阅读该材料，以便更好地了解正在发生的事情。在这里，我将简短地讨论这一点。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，加载样式会阻止页面呈现。浏览器需要查询和解析样式才能显示页面。但是，这不会阻止浏览器解析其余的HTML代码。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一方面，如果脚本未标记为</font></font><code>defer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或，</font><font style="vertical-align: inherit;">则会阻止解析器</font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于浏览器必须假定脚本可以操纵页面本身的内容或应用于页面的样式，因此在运行此脚本时需要格外小心。</font><font style="vertical-align: inherit;">如果浏览器知道正在加载某些CSS代码，它将等待此CSS代码到达，然后再运行脚本。</font><font style="vertical-align: inherit;">而且由于浏览器在执行脚本之前无法继续解析文档，因此这意味着样式不再只是阻止渲染。</font><font style="vertical-align: inherit;">它们阻止浏览器解析HTML。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于外部脚本和页面中嵌入的脚本，此行为都是正确的。</font><font style="vertical-align: inherit;">如果CSS加载，则在此CSS到达浏览器之前，不会运行内联脚本。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">问题研究</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可视化此问题的最容易理解的方法是使用Chrome开发人员工具（我真的很喜欢这些工具的发展水平）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在Chrome工具中，有一个标签</font></font><code>Performance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用来记录页面加载配置文件。我建议人为地减慢网络连接速度，以使问题更加明显。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，我使用Fast 3G网络设置进行了测试。如果仔细查看主线程发生了什么，可以理解，加载CSS文件的请求是在HTML解析的最开始时发生的（大约在页面开始加载后1.7秒）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/40b/881/a00/40b881a0060365bcbb5e4944b6784a2d.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML解析块下面的一个小矩形表示接收CSS文件的请求，</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
在接下来的大约一秒钟的时间内，主线程处于不活动状态。</font><font style="vertical-align: inherit;">在这里您可以看到活动的小岛。</font><font style="vertical-align: inherit;">这是事件的触发，指示样式的加载完成；它是预加载机制发送的其他请求的资源。</font><font style="vertical-align: inherit;">但是浏览器完全停止了对HTML的解析。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/059/fca/6f1/059fca6f1820ca9a3b841140ab912d4e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您看大图，事实证明，开始加载CSS后，主流处于非活动状态的时间超过1.1秒，</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
因此，经过2.8秒，加载了样式，浏览器对其进行处理。</font><font style="vertical-align: inherit;">只有这样，我们才能看到内置脚本的处理过程，然后浏览器最终返回到HTML解析。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65a/a96/da2/65aa96da21d2e1ac6db4116ad54a8f80.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS大约需要2.8秒到达，此后我们看到浏览器继续解析HTML</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox是一个很好的例外</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于Chrome，Edge和Safari，上述行为很常见。</font><font style="vertical-align: inherit;">Firefox是流行浏览器列表中的一个很好的例外。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有其他浏览器都暂停HTML解析，但是使用主动解析器（一种预加载材料的方式）来查看代码以获取到外部资源的链接并满足加载这些资源的请求。</font><font style="vertical-align: inherit;">但是，Firefox在这方面走得更远：</font><font style="vertical-align: inherit;">即使它希望脚本能够执行，</font><font style="vertical-align: inherit;">它也可以推测性地</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DOM树。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除非脚本操作DOM（导致需要丢弃推测分析的结果），否则此方法将允许Firefox加以利用。当然，如果浏览器必须删除以推测方式构造的DOM树，则意味着他通过构建此树没有任何用处。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是一个有趣的方法。我非常想知道它的有效性。但是，现在，Firefox Performance Profiler中没有有关此信息。在那里，您无法确定推测性解析器是否有效，是否需要重做它所做的工作以及是否仍需要重做，这将如何影响性能。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我与负责Firefox开发人员工具的人员进行了交谈，我可以说他们对于将来如何在探查器中呈现此类信息有有趣的想法。</font><font style="vertical-align: inherit;">我希望他们能成功。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决问题</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于我在开始时提到的客户，解决此问题的第一步看起来非常简单：摆脱模式</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">预加载非关键CSS是没有意义的。</font><font style="vertical-align: inherit;">在这里，您需要切换为使用而不是</font></font><code>rel="preload"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attribute </font></font><code>media="print"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这正是灯丝小组专家的建议。</font><font style="vertical-align: inherit;">此外，这种方法还使您完全摆脱了polyfill。</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"/path/to/my.css"</span> media=<span class="hljs-string">"print"</span> onload=<span class="hljs-string">"this.media='all'"</span>&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这已经使我们处于一个更好的位置：现在，网络优先级与下载的真正重要性更加一致。而且我们也摆脱了内置脚本。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，在文档标题中还有另一个内置脚本，位于启动请求以加载CSS的行下方。如果移动此脚本，使其位于加载CSS的行的前面，则将消除解析器锁定。如果您使用Chrome开发者工具再次分析页面，则差异将非常明显。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d16/c64/170/d16c64170a5ae365154626fc77eea21f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在更改页面代码之前，HTML解析器在遇到内置脚本后停在1939行，并在此处停留了大约一秒钟。经过优化之后，他能够到达第5281行。</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
先前，解析器在第1939行停止并等待CSS加载，但现在到达第5281行。在页面的最后，还有另一个内置脚本再次停止了解析器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是解决该问题的快速方法。这不是代表问题最终解决方案的选项。更改元素的顺序并摆脱模式</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只是第一步。您可以通过在页面中嵌入关键的CSS代码而不是从外部文件加载代码来最好地解决此问题。图案</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设计用于除内联CSS外。</font><font style="vertical-align: inherit;">这使我们可以完全忽略与脚本相关的问题，并确保在第一个请求之后，浏览器具有呈现页面所需的所有样式。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但就目前而言，应该指出的是，通过对项目的加载方式和DOM中元素的顺序进行很小的更改，我们可以实现良好的性能提升。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要</font></font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果使用</font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请转到样式加载模式</font></font><code>print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您以通常的方式（即使用指向这些样式文件的常规链接）加载外部样式，请将所有可以移动到链接上方的内置脚本移至加载样式。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在页面中嵌入关键样式，以确保尽快开始渲染。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">亲爱的读者们！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您是否遇到过由于CSS导致页面渲染速度变慢的问题？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RUVDS在3月8日向所有IT专业人员表示祝贺！</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今年，我们决定不给郁金香，也不选择极客礼物。</font><font style="vertical-align: inherit;">我们采取了不同的方法，创建了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IT is female页面，</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以显示IT领域女性专家的身影。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490618/index.html">Goroutine堆栈缓冲区</a></li>
<li><a href="../zh-CN490620/index.html">当我听到“恢复神经网络”一词时，我爬上去检查备份</a></li>
<li><a href="../zh-CN490622/index.html">应对Web应用程序中的内存泄漏</a></li>
<li><a href="../zh-CN490624/index.html">功能策略HTTP标头和Web浏览器控件</a></li>
<li><a href="../zh-CN490626/index.html">有关数据的完整指南* HTML属性</a></li>
<li><a href="../zh-CN490630/index.html">从磁盘加载NumPy数组：比较memmap（）和Zarr / HDF5</a></li>
<li><a href="../zh-CN490634/index.html">3月2日至8日在莫斯科举行的数字活动</a></li>
<li><a href="../zh-CN490636/index.html">3月2日至8日在圣彼得堡举行的数字活动</a></li>
<li><a href="../zh-CN490640/index.html">C ++中的重载。第三部分 重载新/删除语句</a></li>
<li><a href="../zh-CN490642/index.html">用于监视K8s应用程序的插件DevOpsProdigy KubeGraf v1.3.0：新版本和新功能</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>