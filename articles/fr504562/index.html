<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙎 🐭 📡 Sauvegarde incrémentielle Proxmox VE avec VBR 👨🏼‍🔬 🈯️ 🛶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans l'un des articles précédents de la série d'hyperviseurs Proxmox VE, nous avons déjà expliqué comment effectuer une sauvegarde à l'aide d'outils s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sauvegarde incrémentielle Proxmox VE avec VBR</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/504562/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/6u/nl/ol/6unlolfmjashv0lotsjhjbgc1gg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'un des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">articles précédents</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la série d'hyperviseurs Proxmox VE, nous avons déjà expliqué comment effectuer une sauvegarde à l'aide d'outils standard. </font><font style="vertical-align: inherit;">Aujourd'hui, nous montrons comment utiliser l'excellent outil Veeam® Backup &amp; Replication ™ 10. dans le même but. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Les sauvegardes ont une essence quantique explicite. </font><font style="vertical-align: inherit;">Jusqu'à ce que vous tentiez de récupérer à partir de la sauvegarde, elle est en superposition. </font><font style="vertical-align: inherit;">Il réussit et ne réussit pas. » </font><font style="vertical-align: inherit;">(trouvé sur Internet)</font></font></i><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avertissement:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Non, je ne dis pas que c'est le moyen idéal de sauvegarder. Non, il ne peut pas être recommandé pour la production. Non, je ne garantis pas l'intégrité parfaite des sauvegardes effectuées. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, tout cela fonctionne et convient parfaitement à de nombreux utilisateurs et administrateurs système novices qui font les premiers pas dans l'étude des systèmes de virtualisation et de sauvegarde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sauvegarde est peut-être l'un des processus les plus importants dont dépend le travail de toute entreprise. Il n'y a rien de plus cher que les données stockées dans les systèmes d'information de l'entreprise, et il n'y a rien de pire que le manque de capacité à les récupérer en cas de panne.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il arrive souvent que vous deviez penser à la nécessité d'une sauvegarde et choisir un outil uniquement après une urgence qui s'est déjà produite, associée à la perte de données critiques. </font><font style="vertical-align: inherit;">Au fur et à mesure du développement des technologies de virtualisation, les applications de sauvegarde ont commencé à se concentrer sur une interaction étroite avec les hyperviseurs. </font><font style="vertical-align: inherit;">Veeam® Backup &amp; Replication ™ ne fait pas exception, avec des options de sauvegarde étendues dans des environnements virtualisés. </font><font style="vertical-align: inherit;">Aujourd'hui, nous allons vous montrer comment le configurer pour qu'il fonctionne avec Proxmox VE.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de l'hyperviseur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utiliserons la version actuelle de Proxmox au moment de la rédaction - 6.2-1. </font><font style="vertical-align: inherit;">Cette version a été publiée le 12 mai 2020 et contient de nombreux changements utiles, dont nous discuterons dans l'un des articles suivants. </font><font style="vertical-align: inherit;">Pour l'instant, commençons à préparer l'hyperviseur. </font><font style="vertical-align: inherit;">La tâche principale consiste à installer Veeam® Agent pour Linux sur un hôte redondant avec Proxmox. </font><font style="vertical-align: inherit;">Mais avant cela, nous prenons quelques mesures.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Préparation du système</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous </font><font style="vertical-align: inherit;">installons l' </font><font style="vertical-align: inherit;">utilitaire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est absent du système si Proxmox n'a pas été installé sur un système Linux existant, mais en tant que système d'exploitation autonome à partir d'une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">image officielle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous aurons également besoin des en-têtes pve du noyau. </font><font style="vertical-align: inherit;">Nous allons sur le serveur via SSH et ajoutons un référentiel qui fonctionne sans abonnement de support (officiellement, il n'est pas recommandé pour la production, mais il contient les packages dont nous avons besoin):</font></font><br>
<br>
<pre><code class="plaintext hljs">echo "deb http://download.proxmox.com/debian/pve buster pve-no-subscription" &gt;&gt; /etc/apt/sources.list</code></pre><br>
<pre><code class="plaintext hljs">apt update</code></pre><br>
<pre><code class="plaintext hljs">apt install sudo pve-headers</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cette procédure, assurez-vous de redémarrer le serveur.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer Veeam® Agent</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Téléchargez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le package deb de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Veeam® Agent pour Linux sur le site officiel (un compte est requis), armez-vous d'un client SFTP et téléchargez le package deb reçu sur le serveur. </font><font style="vertical-align: inherit;">Installez le package et mettez à jour la liste des programmes dans les référentiels que ce package ajoute:</font></font><br>
<br>
<pre><code class="plaintext hljs">dpkg -i veeam-release-deb_1.x.x_amd64.deb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise à jour des référentiels à nouveau:</font></font><br>
<br>
<pre><code class="plaintext hljs">apt update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez l'agent lui-même:</font></font><br>
<br>
<pre><code class="plaintext hljs">apt install veeam</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vérifions que tout a été installé correctement:</font></font><br>
<br>
<pre><code class="plaintext hljs">dkms status</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La réponse serait quelque chose comme ceci:</font></font><br>
<br>
<pre><code class="plaintext hljs">veeamsnap, 4.0.0.1961, 5.4.41-1-pve, x86_64: installed</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de Veeam® Backup &amp; Replication ™</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout d'un référentiel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, vous pouvez également stocker des sauvegardes directement sur le serveur avec Veeam® Backup &amp; Replication ™ déployé, mais il est plus pratique d'utiliser le stockage externe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accédez à la section </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INFRASTRUCTURE DE SAUVEGARDE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/n0/do/z9/n0doz9jyudpcf-hayqu6njcstng.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sélectionnez l'élément Sauvegarder les référentiels, cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter un référentiel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et sélectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockage connecté au réseau</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans la fenêtre qui apparaît </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/le/ew/dsleewxwyfrbxi64ibhnkgbl3hm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, prenons un test de stockage SMB, j'ai ceci est le QNAP habituel:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wn/2v/75/wn2v75pnyilvwfm2wdnez0gff3e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remplissez le nom et la description, puis cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/lu/c1/aeluc1vlc3rjv8yfjkkegksfqak.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saisissez l'adresse du stockage SMB et, si elle nécessite une autorisation, cliquez sur Ajouter pour ajouter les détails d'accès:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ku/5g/5n/ku5g5nrjheqx_loj6dicmfylzmm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remplissez le nom d'utilisateur et le mot de passe pour accéder au stockage SMB, puis cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OK</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et revenez à la fenêtre précédente, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/z5/ty/dqz5tyipy4tpabxyce7azqvwbos.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tout se fait sans erreur, le programme se connecte au référentiel, demande des informations sur l'espace disque disponible et affiche la boîte de dialogue suivante. </font><font style="vertical-align: inherit;">Dans celui-ci, définissez des paramètres supplémentaires (si nécessaire) et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ed/gd/mk/edgdmktah8gzp2ficmybhka_qio.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fenêtre suivante, vous pouvez laisser tous les paramètres par défaut et également cliquer sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/-5/xh/ob-5xhmenemijzrsdka1lonr4a4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vérifions que les composants nécessaires sont installés et sont </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">déjà</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans l'état </font><font style="vertical-align: inherit;">et cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appliquer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0a/gv/ix/0agvixnl2-ev6qlpi1dssnj3esy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, Veeam® Backup &amp; Replication ™ se connectera à nouveau au référentiel, déterminera les paramètres nécessaires et créera un référentiel. </font><font style="vertical-align: inherit;">Cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9x/sv/79/9xsv79akohraqucyp83uh6syqo8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vérifions les informations totales sur le référentiel ajouté et cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/e6/2g/zoe62g6kxg07rl5_qo95l7y1m9y.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le programme vous proposera automatiquement de sauvegarder vos fichiers de configuration dans un nouveau référentiel. </font><font style="vertical-align: inherit;">Nous n'en avons pas besoin, nous répondons donc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tp/vs/9-/tpvs9-do-0wpdyqhf_fzr0sg7nk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Référentiel ajouté avec succès:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/cy/qy/fpcyqy80-k4ktz59aqchgkg2-9y.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création d'un travail de sauvegarde</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fenêtre principale de Veeam® Backup &amp; Replication ™, cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backup Job</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux computer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Choisissez le type de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serveur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le mode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">géré par le serveur de sauvegarde</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1s/oi/wz/1soiwz1snio9rt2aa8lsuz7xnou.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous donnons un nom à la mission et ajoutons éventuellement une description. </font><font style="vertical-align: inherit;">Cliquez ensuite sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hi/ji/fy/hijifygvb4srir_ecso7zii2tvk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous devons créer tous les serveurs avec Proxmox que nous allons sauvegarder. Pour ce faire, cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordinateur individuel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Saisissez le nom d'hôte ou l'adresse IP du serveur et les détails d'accès. Ainsi, nous formons la liste des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordinateurs protégés</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/d_/wp/kp/d_wpkp2p_szef1vyd5bwde6blg0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, un point très important, à savoir le choix des données à ajouter à la sauvegarde. Tout dépendra de l'emplacement exact de vos machines virtuelles. Si vous souhaitez ajouter uniquement un volume logique, vous avez besoin du mode de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sauvegarde au niveau</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du </font><b><font style="vertical-align: inherit;">volume</font></b><font style="vertical-align: inherit;"> et choisissez le chemin d'accès au volume logique ou au périphérique, par exemple </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ dev / pve</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Toutes les autres actions sont identiques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cet article, nous allons montrer comment fonctionne le mode de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sauvegarde au niveau fichier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/6b/5p/wq6b5psnc7jay48_xbrj2_ureee.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fenêtre suivante, nous créons une liste de répertoires pour la sauvegarde. Cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et prescrivez les répertoires dans lesquels les fichiers de configuration de la machine virtuelle sont stockés. Par défaut, il s'agit du répertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / pve / nodes / pve / qemu-server /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si vous utilisez non seulement des machines virtuelles, mais également des conteneurs LXC, ajoutez le répertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / pve / nodes / pve / lxc /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans mon cas, c'est aussi le répertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir formé la liste des répertoires de cette manière, cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_k/_d/yd/_k_dydc6dnhx4mngj4cuuisokqu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la liste déroulante des référentiels, sélectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> créé précédemment. </font><font style="vertical-align: inherit;">Nous déterminons la longueur de la chaîne pour la sauvegarde incrémentielle. </font><font style="vertical-align: inherit;">Plus il y a de points dans la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">politique de rétention</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , plus vous économisez d'espace. </font><font style="vertical-align: inherit;">Mais en parallèle, la fiabilité de la sauvegarde diminuera. </font><font style="vertical-align: inherit;">La fiabilité est plus importante pour moi que la quantité d'espace de stockage, j'ai donc mis 4 points. </font><font style="vertical-align: inherit;">Vous pouvez prendre la valeur standard de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous continuons de configurer la tâche en cliquant sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/ae/v5/wkaev5az-3ruj4n-gjuv43oz9vo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous laissons les paramètres inchangés, passez simplement à la fenêtre suivante:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/4p/b-/tt4pb-cw4quxwulze1xcjjohx_4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous configurons le planificateur. </font><font style="vertical-align: inherit;">C'est l'une des fonctionnalités les plus intéressantes pour simplifier la vie de l'administrateur système. </font><font style="vertical-align: inherit;">Dans l'exemple, j'ai choisi de démarrer automatiquement la sauvegarde tous les jours à 2 heures du matin. </font><font style="vertical-align: inherit;">Une autre grande fonctionnalité est la possibilité d'interrompre la tâche de sauvegarde si nous dépassons le délai de la «fenêtre de sauvegarde» allouée. </font><font style="vertical-align: inherit;">Son horaire exact est configuré via le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fenêtre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e-/7j/7h/e-7j7hfdz5fdru4lft7cul74fr0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, par exemple, supposons que nous n'effectuions des sauvegardes qu'en dehors des heures de travail en semaine et le week-end, nous ne sommes généralement pas limités dans le temps. </font><font style="vertical-align: inherit;">Nous formons un si beau tableau, revenons à la fenêtre précédente et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appliquer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7g/ob/ii/7gobiidnihb8a9jsrbsdt8yp9c8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste plus qu'à vérifier les informations récapitulatives sur la tâche et cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2s/mk/6m/2smk6mspmnfayuhhxxi1yjezj3k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci termine la création du travail de sauvegarde.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauvegarde</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, tout est élémentaire. </font><font style="vertical-align: inherit;">Dans la fenêtre principale du programme, sélectionnez la tâche créée et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démarrer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le système se connectera automatiquement à notre serveur (ou à plusieurs serveurs), vérifiera la disponibilité du stockage et réservera la quantité d'espace disque nécessaire. </font><font style="vertical-align: inherit;">Ensuite, en fait, le processus de sauvegarde commencera et, une fois terminé, nous recevrons des informations complètes sur le processus.</font></font><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si un problème de la forme </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Échec du chargement du module [veeamsnap] avec les paramètres [zerosnapdata = 1 debuglogging = 0] se produit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pendant le processus de démarrage de la sauvegarde </font><font style="vertical-align: inherit;">, vous devez alors reconstruire le module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeamsnap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conformément aux </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instructions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></blockquote><div style="text-align:center;"><img src="https://habrastorage.org/webt/ts/do/cm/tsdocmchujzdj5nxvujwmrroffs.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui est particulièrement intéressant, c'est que sur le serveur lui-même, nous pouvons voir non seulement une liste de toutes les tâches de sauvegarde terminées, mais aussi regarder la commande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeam</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en temps réel </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/li/lp/tk/lilptkhpxrygvey6krcgbltfvvm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prédisant la question de savoir pourquoi la console a l'air si étrange, je dirai tout de suite: j'aime vraiment à quoi ressemble la console sur l'écran d'un moniteur à tube CRT chaud. </font><font style="vertical-align: inherit;">Cela se fait à l'aide de l'émulateur de terminal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cool-retro-term</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Récupération de données</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, la question la plus importante. </font><font style="vertical-align: inherit;">Mais comment récupérer des données en cas d'incident irréparable? </font><font style="vertical-align: inherit;">Par exemple, ils ont accidentellement supprimé la mauvaise machine virtuelle. </font><font style="vertical-align: inherit;">Dans l'interface graphique de Proxmox, il a complètement disparu; il ne restait rien dans le stockage sur le site de la machine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de récupération est simple. </font><font style="vertical-align: inherit;">Nous allons dans la console Proxmox et entrons la commande:</font></font><br>
<br>
<pre><code class="plaintext hljs">veeam</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous verrons une liste des sauvegardes terminées. </font><font style="vertical-align: inherit;">Sélectionnez la flèche avec les flèches et appuyez sur la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> touche </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ensuite, sélectionnez un point de récupération et appuyez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrée</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lt/du/j8/ltduj8hywtb1zwrmauzoeplnw4c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après quelques secondes, le point de récupération sera monté dans le répertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ mnt / backup</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste plus qu'à copier les disques virtuels et les fichiers de configuration des machines virtuelles à leur place, après quoi la machine "tuée" apparaîtra automatiquement dans l'interface graphique de Proxmox VE. </font><font style="vertical-align: inherit;">Vous pouvez l'exécuter de la manière habituelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour démonter le point de récupération, vous ne devez pas le faire manuellement, mais vous devez appuyer sur la touche </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans l'utilitaire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeam</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que la force soit avec toi! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles précédents sur l'hyperviseur Proxmox VE:</font></font></i><br>
<br>
<ul>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> :    Proxmox VE</a></i></li>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   Proxmox VE</a></i></li>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  Proxmox VE</a></i></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504524/index.html">Modèle typique de développement d'épidémie COVID-19</a></li>
<li><a href="../fr504554/index.html">Unity Terrane et Mesh Blending</a></li>
<li><a href="../fr504556/index.html">Gestion des gestes: gestion des conflits de gestes. 3e partie</a></li>
<li><a href="../fr504558/index.html">La vaccination obligatoire est-elle une nouvelle réalité?</a></li>
<li><a href="../fr504560/index.html">Parlons du visage du crowdfunding domestique</a></li>
<li><a href="../fr504564/index.html">IoT dans ma vie. Comment créer un bureau intelligent et suivre la croissance des pommes de terre dans votre appartement grâce à l'IoT</a></li>
<li><a href="../fr504566/index.html">Table dans Atlassian Confluence basée sur les données d'une demande REST</a></li>
<li><a href="../fr504568/index.html">Isaac Asimov: D'où les gens trouvent-ils de nouvelles idées?</a></li>
<li><a href="../fr504572/index.html">Parlez comme Winston Churchill: qui a besoin de vendre son âme pour communiquer en anglais SO</a></li>
<li><a href="../fr504576/index.html">Comment le son à domicile s'est développé - des soirées chanson aux premiers lecteurs mécaniques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>