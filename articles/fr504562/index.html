<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôé üê≠ üì° Sauvegarde incr√©mentielle Proxmox VE avec VBR üë®üèº‚Äçüî¨ üàØÔ∏è üõ∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans l'un des articles pr√©c√©dents de la s√©rie d'hyperviseurs Proxmox VE, nous avons d√©j√† expliqu√© comment effectuer une sauvegarde √† l'aide d'outils s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sauvegarde incr√©mentielle Proxmox VE avec VBR</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/504562/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/6u/nl/ol/6unlolfmjashv0lotsjhjbgc1gg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'un des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">articles pr√©c√©dents</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la s√©rie d'hyperviseurs Proxmox VE, nous avons d√©j√† expliqu√© comment effectuer une sauvegarde √† l'aide d'outils standard. </font><font style="vertical-align: inherit;">Aujourd'hui, nous montrons comment utiliser l'excellent outil Veeam¬Æ Backup &amp; Replication ‚Ñ¢ 10. dans le m√™me but. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´Les sauvegardes ont une essence quantique explicite. </font><font style="vertical-align: inherit;">Jusqu'√† ce que vous tentiez de r√©cup√©rer √† partir de la sauvegarde, elle est en superposition. </font><font style="vertical-align: inherit;">Il r√©ussit et ne r√©ussit pas. ¬ª </font><font style="vertical-align: inherit;">(trouv√© sur Internet)</font></font></i><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avertissement:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Non, je ne dis pas que c'est le moyen id√©al de sauvegarder. Non, il ne peut pas √™tre recommand√© pour la production. Non, je ne garantis pas l'int√©grit√© parfaite des sauvegardes effectu√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, tout cela fonctionne et convient parfaitement √† de nombreux utilisateurs et administrateurs syst√®me novices qui font les premiers pas dans l'√©tude des syst√®mes de virtualisation et de sauvegarde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sauvegarde est peut-√™tre l'un des processus les plus importants dont d√©pend le travail de toute entreprise. Il n'y a rien de plus cher que les donn√©es stock√©es dans les syst√®mes d'information de l'entreprise, et il n'y a rien de pire que le manque de capacit√© √† les r√©cup√©rer en cas de panne.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il arrive souvent que vous deviez penser √† la n√©cessit√© d'une sauvegarde et choisir un outil uniquement apr√®s une urgence qui s'est d√©j√† produite, associ√©e √† la perte de donn√©es critiques. </font><font style="vertical-align: inherit;">Au fur et √† mesure du d√©veloppement des technologies de virtualisation, les applications de sauvegarde ont commenc√© √† se concentrer sur une interaction √©troite avec les hyperviseurs. </font><font style="vertical-align: inherit;">Veeam¬Æ Backup &amp; Replication ‚Ñ¢ ne fait pas exception, avec des options de sauvegarde √©tendues dans des environnements virtualis√©s. </font><font style="vertical-align: inherit;">Aujourd'hui, nous allons vous montrer comment le configurer pour qu'il fonctionne avec Proxmox VE.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de l'hyperviseur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utiliserons la version actuelle de Proxmox au moment de la r√©daction - 6.2-1. </font><font style="vertical-align: inherit;">Cette version a √©t√© publi√©e le 12 mai 2020 et contient de nombreux changements utiles, dont nous discuterons dans l'un des articles suivants. </font><font style="vertical-align: inherit;">Pour l'instant, commen√ßons √† pr√©parer l'hyperviseur. </font><font style="vertical-align: inherit;">La t√¢che principale consiste √† installer Veeam¬Æ Agent pour Linux sur un h√¥te redondant avec Proxmox. </font><font style="vertical-align: inherit;">Mais avant cela, nous prenons quelques mesures.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√©paration du syst√®me</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous </font><font style="vertical-align: inherit;">installons l' </font><font style="vertical-align: inherit;">utilitaire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est absent du syst√®me si Proxmox n'a pas √©t√© install√© sur un syst√®me Linux existant, mais en tant que syst√®me d'exploitation autonome √† partir d'une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">image officielle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous aurons √©galement besoin des en-t√™tes pve du noyau. </font><font style="vertical-align: inherit;">Nous allons sur le serveur via SSH et ajoutons un r√©f√©rentiel qui fonctionne sans abonnement de support (officiellement, il n'est pas recommand√© pour la production, mais il contient les packages dont nous avons besoin):</font></font><br>
<br>
<pre><code class="plaintext hljs">echo "deb http://download.proxmox.com/debian/pve buster pve-no-subscription" &gt;&gt; /etc/apt/sources.list</code></pre><br>
<pre><code class="plaintext hljs">apt update</code></pre><br>
<pre><code class="plaintext hljs">apt install sudo pve-headers</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cette proc√©dure, assurez-vous de red√©marrer le serveur.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer Veeam¬Æ Agent</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T√©l√©chargez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le package deb de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Veeam¬Æ Agent pour Linux sur le site officiel (un compte est requis), armez-vous d'un client SFTP et t√©l√©chargez le package deb re√ßu sur le serveur. </font><font style="vertical-align: inherit;">Installez le package et mettez √† jour la liste des programmes dans les r√©f√©rentiels que ce package ajoute:</font></font><br>
<br>
<pre><code class="plaintext hljs">dpkg -i veeam-release-deb_1.x.x_amd64.deb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mise √† jour des r√©f√©rentiels √† nouveau:</font></font><br>
<br>
<pre><code class="plaintext hljs">apt update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez l'agent lui-m√™me:</font></font><br>
<br>
<pre><code class="plaintext hljs">apt install veeam</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous v√©rifions que tout a √©t√© install√© correctement:</font></font><br>
<br>
<pre><code class="plaintext hljs">dkms status</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La r√©ponse serait quelque chose comme ceci:</font></font><br>
<br>
<pre><code class="plaintext hljs">veeamsnap, 4.0.0.1961, 5.4.41-1-pve, x86_64: installed</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de Veeam¬Æ Backup &amp; Replication ‚Ñ¢</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout d'un r√©f√©rentiel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, vous pouvez √©galement stocker des sauvegardes directement sur le serveur avec Veeam¬Æ Backup &amp; Replication ‚Ñ¢ d√©ploy√©, mais il est plus pratique d'utiliser le stockage externe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acc√©dez √† la section </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INFRASTRUCTURE DE SAUVEGARDE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/n0/do/z9/n0doz9jyudpcf-hayqu6njcstng.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√©lectionnez l'√©l√©ment Sauvegarder les r√©f√©rentiels, cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter un r√©f√©rentiel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et s√©lectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockage connect√© au r√©seau</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans la fen√™tre qui appara√Æt </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/le/ew/dsleewxwyfrbxi64ibhnkgbl3hm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, prenons un test de stockage SMB, j'ai ceci est le QNAP habituel:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wn/2v/75/wn2v75pnyilvwfm2wdnez0gff3e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remplissez le nom et la description, puis cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/lu/c1/aeluc1vlc3rjv8yfjkkegksfqak.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saisissez l'adresse du stockage SMB et, si elle n√©cessite une autorisation, cliquez sur Ajouter pour ajouter les d√©tails d'acc√®s:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ku/5g/5n/ku5g5nrjheqx_loj6dicmfylzmm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remplissez le nom d'utilisateur et le mot de passe pour acc√©der au stockage SMB, puis cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OK</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et revenez √† la fen√™tre pr√©c√©dente, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/z5/ty/dqz5tyipy4tpabxyce7azqvwbos.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tout se fait sans erreur, le programme se connecte au r√©f√©rentiel, demande des informations sur l'espace disque disponible et affiche la bo√Æte de dialogue suivante. </font><font style="vertical-align: inherit;">Dans celui-ci, d√©finissez des param√®tres suppl√©mentaires (si n√©cessaire) et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ed/gd/mk/edgdmktah8gzp2ficmybhka_qio.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fen√™tre suivante, vous pouvez laisser tous les param√®tres par d√©faut et √©galement cliquer sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/-5/xh/ob-5xhmenemijzrsdka1lonr4a4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous v√©rifions que les composants n√©cessaires sont install√©s et sont </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©j√†</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans l'√©tat </font><font style="vertical-align: inherit;">et cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appliquer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0a/gv/ix/0agvixnl2-ev6qlpi1dssnj3esy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce stade, Veeam¬Æ Backup &amp; Replication ‚Ñ¢ se connectera √† nouveau au r√©f√©rentiel, d√©terminera les param√®tres n√©cessaires et cr√©era un r√©f√©rentiel. </font><font style="vertical-align: inherit;">Cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9x/sv/79/9xsv79akohraqucyp83uh6syqo8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous v√©rifions les informations totales sur le r√©f√©rentiel ajout√© et cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/e6/2g/zoe62g6kxg07rl5_qo95l7y1m9y.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le programme vous proposera automatiquement de sauvegarder vos fichiers de configuration dans un nouveau r√©f√©rentiel. </font><font style="vertical-align: inherit;">Nous n'en avons pas besoin, nous r√©pondons donc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tp/vs/9-/tpvs9-do-0wpdyqhf_fzr0sg7nk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©f√©rentiel ajout√© avec succ√®s:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/cy/qy/fpcyqy80-k4ktz59aqchgkg2-9y.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'un travail de sauvegarde</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fen√™tre principale de Veeam¬Æ Backup &amp; Replication ‚Ñ¢, cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backup Job</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux computer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Choisissez le type de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serveur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le mode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g√©r√© par le serveur de sauvegarde</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1s/oi/wz/1soiwz1snio9rt2aa8lsuz7xnou.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous donnons un nom √† la mission et ajoutons √©ventuellement une description. </font><font style="vertical-align: inherit;">Cliquez ensuite sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hi/ji/fy/hijifygvb4srir_ecso7zii2tvk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous devons cr√©er tous les serveurs avec Proxmox que nous allons sauvegarder. Pour ce faire, cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordinateur individuel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Saisissez le nom d'h√¥te ou l'adresse IP du serveur et les d√©tails d'acc√®s. Ainsi, nous formons la liste des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordinateurs prot√©g√©s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/d_/wp/kp/d_wpkp2p_szef1vyd5bwde6blg0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, un point tr√®s important, √† savoir le choix des donn√©es √† ajouter √† la sauvegarde. Tout d√©pendra de l'emplacement exact de vos machines virtuelles. Si vous souhaitez ajouter uniquement un volume logique, vous avez besoin du mode de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sauvegarde au niveau</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du </font><b><font style="vertical-align: inherit;">volume</font></b><font style="vertical-align: inherit;"> et choisissez le chemin d'acc√®s au volume logique ou au p√©riph√©rique, par exemple </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ dev / pve</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Toutes les autres actions sont identiques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cet article, nous allons montrer comment fonctionne le mode de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sauvegarde au niveau fichier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/6b/5p/wq6b5psnc7jay48_xbrj2_ureee.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fen√™tre suivante, nous cr√©ons une liste de r√©pertoires pour la sauvegarde. Cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et prescrivez les r√©pertoires dans lesquels les fichiers de configuration de la machine virtuelle sont stock√©s. Par d√©faut, il s'agit du r√©pertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / pve / nodes / pve / qemu-server /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si vous utilisez non seulement des machines virtuelles, mais √©galement des conteneurs LXC, ajoutez le r√©pertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / pve / nodes / pve / lxc /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans mon cas, c'est aussi le r√©pertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir form√© la liste des r√©pertoires de cette mani√®re, cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_k/_d/yd/_k_dydc6dnhx4mngj4cuuisokqu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la liste d√©roulante des r√©f√©rentiels, s√©lectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cr√©√© pr√©c√©demment. </font><font style="vertical-align: inherit;">Nous d√©terminons la longueur de la cha√Æne pour la sauvegarde incr√©mentielle. </font><font style="vertical-align: inherit;">Plus il y a de points dans la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">politique de r√©tention</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , plus vous √©conomisez d'espace. </font><font style="vertical-align: inherit;">Mais en parall√®le, la fiabilit√© de la sauvegarde diminuera. </font><font style="vertical-align: inherit;">La fiabilit√© est plus importante pour moi que la quantit√© d'espace de stockage, j'ai donc mis 4 points. </font><font style="vertical-align: inherit;">Vous pouvez prendre la valeur standard de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous continuons de configurer la t√¢che en cliquant sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suivant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/ae/v5/wkaev5az-3ruj4n-gjuv43oz9vo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous laissons les param√®tres inchang√©s, passez simplement √† la fen√™tre suivante:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/4p/b-/tt4pb-cw4quxwulze1xcjjohx_4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous configurons le planificateur. </font><font style="vertical-align: inherit;">C'est l'une des fonctionnalit√©s les plus int√©ressantes pour simplifier la vie de l'administrateur syst√®me. </font><font style="vertical-align: inherit;">Dans l'exemple, j'ai choisi de d√©marrer automatiquement la sauvegarde tous les jours √† 2 heures du matin. </font><font style="vertical-align: inherit;">Une autre grande fonctionnalit√© est la possibilit√© d'interrompre la t√¢che de sauvegarde si nous d√©passons le d√©lai de la ¬´fen√™tre de sauvegarde¬ª allou√©e. </font><font style="vertical-align: inherit;">Son horaire exact est configur√© via le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fen√™tre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e-/7j/7h/e-7j7hfdz5fdru4lft7cul74fr0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, par exemple, supposons que nous n'effectuions des sauvegardes qu'en dehors des heures de travail en semaine et le week-end, nous ne sommes g√©n√©ralement pas limit√©s dans le temps. </font><font style="vertical-align: inherit;">Nous formons un si beau tableau, revenons √† la fen√™tre pr√©c√©dente et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appliquer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7g/ob/ii/7gobiidnihb8a9jsrbsdt8yp9c8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste plus qu'√† v√©rifier les informations r√©capitulatives sur la t√¢che et cliquez sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2s/mk/6m/2smk6mspmnfayuhhxxi1yjezj3k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci termine la cr√©ation du travail de sauvegarde.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauvegarde</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, tout est √©l√©mentaire. </font><font style="vertical-align: inherit;">Dans la fen√™tre principale du programme, s√©lectionnez la t√¢che cr√©√©e et cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©marrer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le syst√®me se connectera automatiquement √† notre serveur (ou √† plusieurs serveurs), v√©rifiera la disponibilit√© du stockage et r√©servera la quantit√© d'espace disque n√©cessaire. </font><font style="vertical-align: inherit;">Ensuite, en fait, le processus de sauvegarde commencera et, une fois termin√©, nous recevrons des informations compl√®tes sur le processus.</font></font><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si un probl√®me de la forme </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âchec du chargement du module [veeamsnap] avec les param√®tres [zerosnapdata = 1 debuglogging = 0] se produit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pendant le processus de d√©marrage de la sauvegarde </font><font style="vertical-align: inherit;">, vous devez alors reconstruire le module </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeamsnap</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conform√©ment aux </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instructions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></blockquote><div style="text-align:center;"><img src="https://habrastorage.org/webt/ts/do/cm/tsdocmchujzdj5nxvujwmrroffs.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui est particuli√®rement int√©ressant, c'est que sur le serveur lui-m√™me, nous pouvons voir non seulement une liste de toutes les t√¢ches de sauvegarde termin√©es, mais aussi regarder la commande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeam</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en temps r√©el </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/li/lp/tk/lilptkhpxrygvey6krcgbltfvvm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pr√©disant la question de savoir pourquoi la console a l'air si √©trange, je dirai tout de suite: j'aime vraiment √† quoi ressemble la console sur l'√©cran d'un moniteur √† tube CRT chaud. </font><font style="vertical-align: inherit;">Cela se fait √† l'aide de l'√©mulateur de terminal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cool-retro-term</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©cup√©ration de donn√©es</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, la question la plus importante. </font><font style="vertical-align: inherit;">Mais comment r√©cup√©rer des donn√©es en cas d'incident irr√©parable? </font><font style="vertical-align: inherit;">Par exemple, ils ont accidentellement supprim√© la mauvaise machine virtuelle. </font><font style="vertical-align: inherit;">Dans l'interface graphique de Proxmox, il a compl√®tement disparu; il ne restait rien dans le stockage sur le site de la machine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de r√©cup√©ration est simple. </font><font style="vertical-align: inherit;">Nous allons dans la console Proxmox et entrons la commande:</font></font><br>
<br>
<pre><code class="plaintext hljs">veeam</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous verrons une liste des sauvegardes termin√©es. </font><font style="vertical-align: inherit;">S√©lectionnez la fl√®che avec les fl√®ches et appuyez sur la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> touche </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ensuite, s√©lectionnez un point de r√©cup√©ration et appuyez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entr√©e</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lt/du/j8/ltduj8hywtb1zwrmauzoeplnw4c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s quelques secondes, le point de r√©cup√©ration sera mont√© dans le r√©pertoire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ mnt / backup</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste plus qu'√† copier les disques virtuels et les fichiers de configuration des machines virtuelles √† leur place, apr√®s quoi la machine "tu√©e" appara√Ætra automatiquement dans l'interface graphique de Proxmox VE. </font><font style="vertical-align: inherit;">Vous pouvez l'ex√©cuter de la mani√®re habituelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour d√©monter le point de r√©cup√©ration, vous ne devez pas le faire manuellement, mais vous devez appuyer sur la touche </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans l'utilitaire </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">veeam</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que la force soit avec toi! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles pr√©c√©dents sur l'hyperviseur Proxmox VE:</font></font></i><br>
<br>
<ul>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> :    Proxmox VE</a></i></li>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   Proxmox VE</a></i></li>
<li><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  Proxmox VE</a></i></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504524/index.html">Mod√®le typique de d√©veloppement d'√©pid√©mie COVID-19</a></li>
<li><a href="../fr504554/index.html">Unity Terrane et Mesh Blending</a></li>
<li><a href="../fr504556/index.html">Gestion des gestes: gestion des conflits de gestes. 3e partie</a></li>
<li><a href="../fr504558/index.html">La vaccination obligatoire est-elle une nouvelle r√©alit√©?</a></li>
<li><a href="../fr504560/index.html">Parlons du visage du crowdfunding domestique</a></li>
<li><a href="../fr504564/index.html">IoT dans ma vie. Comment cr√©er un bureau intelligent et suivre la croissance des pommes de terre dans votre appartement gr√¢ce √† l'IoT</a></li>
<li><a href="../fr504566/index.html">Table dans Atlassian Confluence bas√©e sur les donn√©es d'une demande REST</a></li>
<li><a href="../fr504568/index.html">Isaac Asimov: D'o√π les gens trouvent-ils de nouvelles id√©es?</a></li>
<li><a href="../fr504572/index.html">Parlez comme Winston Churchill: qui a besoin de vendre son √¢me pour communiquer en anglais SO</a></li>
<li><a href="../fr504576/index.html">Comment le son √† domicile s'est d√©velopp√© - des soir√©es chanson aux premiers lecteurs m√©caniques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>