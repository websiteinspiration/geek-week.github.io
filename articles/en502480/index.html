<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧦 🕦 👩🏿‍🤝‍👨🏽 What is DHCP Snooping and how does it work? 🆒 🌏 🧔🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="“Why can't I connect to the network, even if my laptop received an IP address dynamically?” Have you encountered this problem in everyday life? Have y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>What is DHCP Snooping and how does it work?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502480/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Why can't I connect to the network, even if my laptop received an IP address dynamically?” </font><font style="vertical-align: inherit;">Have you encountered this problem in everyday life? </font><font style="vertical-align: inherit;">Have you doubted the authenticity of the IP addresses? </font><font style="vertical-align: inherit;">Are they received from an authorized DHCP server? </font><font style="vertical-align: inherit;">If not, how to prevent this? </font><font style="vertical-align: inherit;">The term DHCP Snooping will be introduced in this article to help users avoid using illegal IP addresses.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is DHCP Snooping?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DHCP Snooping is a Layer 2 security technology built into the operating system of a healthy network switch that discards DHCP traffic that is considered inappropriate. </font><font style="vertical-align: inherit;">DHCP Snooping prevents unauthorized (fraudulent) DHCP servers offering IP addresses to DHCP clients. </font><font style="vertical-align: inherit;">The DHCP Snooping function performs the following actions:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Checks DHCP messages from untrusted sources and filters out invalid messages.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creates and maintains a DHCP Snooping binding database that contains information about untrusted hosts with leased IP addresses. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uses the DHCP Snooping binding database to verify subsequent requests from untrusted hosts.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How does DHCP snooping work?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To find out how DHCP Snooping works, we need to catch the working DHCP mechanism, which stands for Dynamic Host Configuration Protocol. When DHCP is enabled, a network device without an IP address will “interact” with the DHCP server through 4 stages as follows. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/402/540/47d/40254047dbbfdfceed1ab4a01a3d8e60.jpg" title="_1570419937_O8eZreIy0u.jpg" alt="DHCP Principle.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DHCP Snooping typically classifies the interfaces on the switch into two categories: trusted untrusted ports, as shown in Figure 2. A trusted port is a port or source whose DHCP server messages are trusted. An untrusted port is the port from which DHCP server messages are not trusted. If DHCP snooping is triggered, a DHCP offer message can only be sent through the trusted port. Otherwise, it will be discarded.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/13c/b35/a76/13cb35a7610937f9573a2ffb181dbf51.jpg" title="_1570419954_XgNqUWM9Fx.jpg" alt="DHCP Snooping app.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the confirmation stage, a DHCP binding table will be created according to the DHCP ACK message. </font><font style="vertical-align: inherit;">It records the host MAC address, leased IP address, lease time, type of binding, as well as the VLAN number and interface information associated with the host, as shown in Figure 3. If the subsequent DHCP packet received from the untrusted host does not match information, it will be deleted.</font></font><br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td width="127" align="center"></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAC Address</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IP Address</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rent (sec)</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A type</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VLAN</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface</font></font></td>
</tr>
<tr>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entry 1</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e4-54-e8-9d-ab-42</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.32.96.19</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2673</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dhcp-snooping</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eth 1/23</font></font></td>
</tr>
<tr>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entry 2</font></font></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
</tr>
<tr>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entry 3</font></font></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
</tr>
<tr>
<td width="127" align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
<td width="127" align="center"></td>
</tr>
</tbody>
</table></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic Types of Attacks Prevented by DHCP Snooping</font></font></h2><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHCP Spoofing Attack</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DHCP spoofing occurs when an attacker tries to respond to DHCP requests and tries to specify himself (spoof) as the default gateway or DNS server, therefore, initiating an attack through an intermediary. </font><font style="vertical-align: inherit;">At the same time, it is possible that they can intercept traffic from users before forwarding to a real gateway or perform DoS, filling the real DHCP server with requests for clogging IP address resources.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHCP Starvation (DHCP exhaustion)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DHCP resource depletion typically targets network DHCP servers to populate an authorized DHCP server with DHCP REQUEST messages using fake source MAC addresses. </font><font style="vertical-align: inherit;">The DHCP server will respond to all requests, not knowing that it is a DHCP depletion attack by assigning available IP addresses, which will lead to the depletion of the DHCP pool.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to enable DHCP snooping?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DHCP Snooping is applicable only to wired users. </font><font style="vertical-align: inherit;">As an access-level security feature, it is mainly enabled on any switch containing VLAN access ports served by DHCP. </font><font style="vertical-align: inherit;">When deploying DHCP Snooping, you must configure trusted ports (the ports through which valid DHCP server messages will pass) before enabling DHCP Snooping in the VLAN that you want to protect. </font><font style="vertical-align: inherit;">This can be implemented both in the CLI interface and in the web interface.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Although DHCP simplifies IP addressing, it also causes security issues. </font><font style="vertical-align: inherit;">To fix the problems, DHCP Snooping, one of the protection mechanisms, can prevent the use of untrusted DHCP addresses from a fraudulent DHCP server and can prevent a resource exhaustion attack that attempts to use all existing DHCP addresses.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en502460/index.html">What to expect at the startup arena of Ukraine in 2020?</a></li>
<li><a href="../en502462/index.html">Digital events in Moscow from May 18 to 24</a></li>
<li><a href="../en502464/index.html">Digital events in St. Petersburg from May 18 to 24</a></li>
<li><a href="../en502466/index.html">New RIT ++ in the new conditions</a></li>
<li><a href="../en502472/index.html">Prometheus monitoring of microservice applications. Vitaly Levchenko</a></li>
<li><a href="../en502486/index.html">The book "Race with the epidemic. Antibiotics against superbugs "</a></li>
<li><a href="../en502490/index.html">Flashing restrictive beliefs. For what and what does it give</a></li>
<li><a href="../en502492/index.html">Innovations in Zextras Suite and Zimbra OSE</a></li>
<li><a href="../en502494/index.html">7 mistakes of one Black Friday and how Magento Cloud works - video</a></li>
<li><a href="../en502496/index.html">Easy Web Access to LabVIEW VI PHP Applications via ActiveX Server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>