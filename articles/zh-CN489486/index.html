<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ›€ğŸ¼ ğŸ™ ğŸ‘©ğŸ½â€ğŸ¤ æˆ‘ä»¬å°†æ•°æ®ç§‘å­¦ç”¨äºè´­æˆ¿çš„å’Œå¹³ç›®çš„ ğŸ‘¨ğŸ»â€ğŸ’» ğŸ”² ğŸš‹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¦å‡ºå”®ä¸å¿…è¦çš„ä¸œè¥¿ï¼Œæ‚¨å¿…é¡»å…ˆè´­ä¹°ä¸å¿…è¦çš„ä¸œè¥¿ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰é’±ã€‚
 -Prostokvashinoçš„ä¸‰äºº
 ä»‹ç»
 

ç¢°å·§æˆ‘ä½åœ¨è’™ç‰¹åˆ©å°”çš„å…¬å¯“ï¼ˆæˆ–å½“åœ°å…¬å¯“ï¼‰ä¸­ã€‚å¤§çº¦ä¸€å¹´å‰ï¼Œæœ‰ä¸€æ¬¡ï¼Œæˆ‘æƒ³åˆ°å¯ä»¥æ¬åˆ°è‡ªå·±çš„å®¶æ¥ã€‚æˆ‘å·²ç»æœ‰ä¸€äº›ä¹°å–æˆ¿å±‹çš„ç»éªŒï¼Œä»åŸåˆ™ä¸Šè®²ï¼Œå¯ä»¥åƒå¤§å¤šæ•°å½“åœ°å±…æ°‘ä¸€æ ·ç®€å•åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼šé›‡ç”¨ä¸€åæˆ¿åœ°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬å°†æ•°æ®ç§‘å­¦ç”¨äºè´­æˆ¿çš„å’Œå¹³ç›®çš„</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489486/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦å‡ºå”®ä¸å¿…è¦çš„ä¸œè¥¿ï¼Œæ‚¨å¿…é¡»å…ˆè´­ä¹°ä¸å¿…è¦çš„ä¸œè¥¿ï¼Œä½†æˆ‘ä»¬æ²¡æœ‰é’±ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -Prostokvashinoçš„ä¸‰äºº</font></font></blockquote><br>
<h1 id="vvedenie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»‹ç»</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¢°å·§æˆ‘ä½åœ¨è’™ç‰¹åˆ©å°”çš„å…¬å¯“ï¼ˆæˆ–å½“åœ°å…¬å¯“ï¼‰ä¸­ã€‚</font><font style="vertical-align: inherit;">å¤§çº¦ä¸€å¹´å‰ï¼Œæœ‰ä¸€æ¬¡ï¼Œæˆ‘æƒ³åˆ°å¯ä»¥æ¬åˆ°è‡ªå·±çš„å®¶æ¥ã€‚</font><font style="vertical-align: inherit;">æˆ‘å·²ç»æœ‰ä¸€äº›ä¹°å–æˆ¿å±‹çš„ç»éªŒï¼Œä»åŸåˆ™ä¸Šè®²ï¼Œå¯ä»¥åƒå¤§å¤šæ•°å½“åœ°å±…æ°‘ä¸€æ ·ç®€å•åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼šé›‡ç”¨ä¸€åæˆ¿åœ°äº§ç»çºªäººå¹¶è®©ä»–å¤„ç†æ‰€æœ‰é—®é¢˜ï¼Œä½†è¿™å°†æ˜¯æ— èŠä¸”æ— è¶£çš„ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘å†³å®šç§‘å­¦åœ°å¤„ç†æ­¤é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">æœ‰ä¸€é¡¹ä»»åŠ¡ï¼šæ‚¨éœ€è¦å¼„æ¸…æ¥šæˆ‘æ‰€æ‹¥æœ‰çš„ä»·å€¼ï¼Œä»¥åŠæˆ‘èƒ½æ‰¿å—çš„ä»·æ ¼ã€‚</font><font style="vertical-align: inherit;">å¥½å§ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿‡å»çš„é—®é¢˜-äº†è§£é£åœ¨å“ªé‡Œå¹ã€‚</font><font style="vertical-align: inherit;">å¹¶æ¢ç´¢</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rä¸­</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„åœ°ç†ç©ºé—´è®¡ç®—</font><font style="vertical-align: inherit;">ã€‚</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸåˆ™ä¸Šï¼Œå¾ˆæ˜æ˜¾ï¼Œå¦‚æœæˆ‘æƒ³ç•™åœ¨ä¸€ä¸ªæ–‡æ˜çš„åœ°åŒºå¹¶æ¯å¤©éª‘è‡ªè¡Œè½¦æ¥åº”å¯¹å…¨çƒå˜æš–ï¼Œæˆ‘ä¸ä¼šåªåœ¨å½“åœ°ï¼ˆå½“åœ°ï¼‰ç§Ÿä¸€é—´å•ç‹¬çš„å®¶åº­ä½å®…ã€‚</font><font style="vertical-align: inherit;">å¦ä¸€ä¸ªå¸¸è§çš„æœ¬åœ°é€‰æ‹©æ˜¯è´­ä¹°åŒå·¥æˆ–ä¸‰å±‚ï¼Œå³ </font><font style="vertical-align: inherit;">æœ‰ä¸¤ä¸‰ä¸ªå…¬å¯“çš„æˆ¿å­ï¼šä½ ä½åœ¨ä¸€ä¸ªï¼Œ</font></font><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨å…¶ä½™çš„åœ°æ–¹ï¼Œä½ ä¼šç¹æ®–å…”å­</font></font></del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶ä½™çš„åˆ™äº¤è¿˜ç»™æˆ¿å®¢ã€‚</font><font style="vertical-align: inherit;">ç„¶åå‡ºç°å¦ä¸€ä¸ªæœªçŸ¥æ•°é‡-ç§Ÿé‡‘æ”¶å…¥ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘æƒ³ç»˜åˆ¶ä¸€å¼ åŒ…å«å¾…å”®æˆ¿å±‹ä»·æ ¼ï¼Œç§Ÿé‡‘ä»·æ ¼çš„åŸå¸‚åœ°å›¾ï¼Œå¹¶ä¸”è¿˜èƒ½å¤Ÿè·Ÿè¸ªæ‰€æœ‰è¿™äº›éšæ—¶é—´çš„å˜åŒ–ã€‚ </font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zillowä¹‹ç±»çš„æœåŠ¡æ— æ³•æ˜¾ç¤ºå‡ºå¸¦æœ‰ä¼°è®¡æˆ¿å±‹ä»·æ ¼å›¾è¡¨çš„ç²¾ç¾å›¾ç‰‡ï¼Œå› æ­¤ä¸é€‚ç”¨äºæˆ‘ä»¬æ‰€åœ¨çš„åœ°åŒºï¼Œæ‚¨åªèƒ½ç ”ç©¶å½“åœ°æˆ¿åœ°äº§ç»çºªäººåä¼šçš„å®šæœŸæŠ¥å‘Šï¼Œè¯¥æŠ¥å‘Šå®šæœŸæŠ¥å‘Šä»·æ ¼ä¸Šæ¶¨ï¼Œä½†æˆ‘æ— æ³•ä¿æŒä¸‹å»ï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">//apciq.ca/ zh /æˆ¿åœ°äº§å¸‚åœº/</font></a><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ²¡æœ‰äººå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¤§è§„æ¨¡åœ°åˆ†æç§Ÿé‡‘ä»·æ ¼ï¼Œæ‚¨åªéœ€ç›‘è§†ç•™è¨€æ¿ï¼Œä½†è¿™æ˜¯ä¸€é¡¹ç›¸å½“æ— èŠçš„ä»»åŠ¡ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ€»çš„æ¥è¯´ï¼Œæˆ‘åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æµè§ˆInternetä¸Šå…³äºæœ¬åœ°æˆ¿åœ°äº§ä»·æ ¼çš„ç°æˆå¼€æ”¾æ•°æ®ï¼Œä½†æˆ‘å‘ç°å‡ ä¹æ²¡æœ‰ä»»ä½•å‘ç°ï¼Œä½†æ˜¯æˆ‘å‘ç°æœ¬åœ°å¾…å”®æˆ¿å±‹æŒ‚ç‰ŒæœåŠ¡çš„æ–‡æ¡£è®°å½•ä¸è‰¯ï¼Œæ— æ³•æºå¸¦æœ‰å…³ç°æœ‰ä¿¡æ¯çš„ä¿¡æ¯ã€‚åœ¨å¸‚åœºä¸Šï¼š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">https</font></a><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//github.com/Froren/realtorca</font></font></a></p><br>
<p>      â€”     ,              ,    -   requests  beatifulsoap,         . </p><br>
<p>     â€”    ,   ,  ,  ,      , ;         ,      .</p><br>
<p> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">   </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">openstreet map</a>,      . </p><br>
<h1 id="obrabotka-dannyh"> </h1><br>
<p> â€”   ,      ,     sqlite  ,         ,        .   ,   ,     ,   ,      .. </p><br>
<p>     R,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">tidy-verse</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Simple Features for R</a>,          â€” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">-  Geocomputation with R</a>,     ggplot2 (   tidyverse),  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">tmap</a>. </p><br>
<p>     ,        ,    (join?)      . </p><br>
<h1 id="otslezhivanie-lokalnoy-ceny-kvartiry">   </h1><br>
<p> ,          ,   <em>dplyr</em>   ,         :</p><br>
<p>    R       ,        :</p><br>
<pre><code class="plaintext hljs">library(tidyverse)<font></font>
library(sf)<font></font>
<font></font>
property&lt;-read_csv("....") %&gt;% <font></font>
 st_as_sf(coords=c("lng","lat"), crs=4326) %&gt;% <font></font>
 st_transform(crs=32188)</code></pre><br>
<p>      :</p><br>
<pre><code class="plaintext hljs">neighbourhood&lt;-geojson_sf("quartierreferencehabitation.geojson") %&gt;%<font></font>
 st_transform(32188) %&gt;% <font></font>
 filter(nom_qr %in% c("Saint-Louis", "Milton-Parc")) %&gt;% <font></font>
 summarize() %&gt;% <font></font>
 st_buffer(dist=0)</code></pre><br>
<p>     :</p><br>
<pre><code class="plaintext hljs">neighbors &lt;- st_join(property, neighbourhood, left=F)</code></pre><br>
<p>     openstreetmap       :</p><br>
<pre><code class="plaintext hljs">osm_neighbourhood&lt;-read_osm(st_bbox(neighbourhood%&gt;%st_transform(4326)), ext=1.5, type="esri")</code></pre><br>
<p>       tmap :</p><br>
<pre><code class="plaintext hljs">library(tmap)<font></font>
library(tmaptools)<font></font>
<font></font>
tm_shape(osm_neighbourhood) + tm_rgb(alpha=0.7)+<font></font>
  tm_shape(neighbourhood) + tm_borders(col='red',alpha=0.8)  + <font></font>
  tm_shape(neighbors) + tm_symbols(shape=3,size=0.2,alpha=0.8) +<font></font>
  tm_shape(ref_home) + tm_symbols(col='red',shape=4,size=0.5,alpha=0.8)+<font></font>
  tm_compass(position=c("right", "bottom"))+<font></font>
  tm_scale_bar(position=c("right", "bottom"))</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/58e/efc/c29/58eefcc29df996dec0d1acb0d83a1c02.svg" alt="å›¾ç‰‡"><br>
   ,        :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/b55/211/d9f/b55211d9f54e4351d5b5a1e750a180b3.svg" alt="å›¾ç‰‡"></p><br>
<p>     (    ):</p><br>
<pre><code class="plaintext hljs">lm(price ~ parking:area_interior)</code></pre><br>
<p>  :</p><br>
<pre><code class="plaintext hljs">## Coefficients:<font></font>
##                            Estimate Std. Error t value Pr(&gt;|t|)    <font></font>
## (Intercept)                33776.10   22175.97   1.523    0.129    <font></font>
## parkingFALSE:area_interior   444.28      23.54  18.876   &lt;2e-16 ***<font></font>
## parkingTRUE:area_interior    523.01      19.65  26.614   &lt;2e-16 ***</code></pre><br>
<p>..             444$     33,    +523$.</p><br>
<p>   ,    443k$,    [433k$ â€” 453k$] </p><br>
<p>,      ,            : </p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/219/fd7/792/219fd7792c21cbb1115694cb164e24c5.svg" alt="å›¾ç‰‡"></p><br>
<p>..      , ..            .  ,         . ,   ,  ,        <em>generalized linear model</em>    <em>inverse Gaussian distribution</em>    , -  ,   :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/007/2ad/d56/0072add564f8de13689123c86bfaf745.svg" alt="å›¾ç‰‡"></p><br>
<p>  : 435k$,  95%  [419k$ â€” 450k$] â€” ,         . </p><br>
<p>,        ,   ,       â€”   .<br>
      ,  ,            â€” ..           ,   ,          ( X  X  )    . </p><br>
<p>,          ()  ,       (<del> ,     </del>).</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/969/080/2ae/9690802aeccabd043ad9f734a38a2b14.svg" alt="å›¾ç‰‡"></p><br>
<p>   <em>generalized linear model</em>    <em>inverse Gaussian</em> distribution    :</p><br>
<pre><code class="plaintext hljs">glm(price_sqft ~ parking + bedrooms,family=inverse.gaussian(link="log")</code></pre><br>
<p>   :</p><br>
<pre><code class="plaintext hljs">## (Intercept)    parkingTRUE   bedrooms2   bedrooms3   bedrooms4 <font></font>
## 503.1981961   1.1215828   0.9720589   0.9662187   0.8325715</code></pre><br>
<p>..   ,   503$,   12%   ,   â€”    2.8%, 3  â€”  3.3%, 4   17%,          .<br>
     430k$ [ 413k$ â€” 448k$] </p><br>
<h1 id="vremennaya-dinamika"> </h1><br>
<p>           .         <del>    </del>  .<br>
         - ,  - ,    â€”  -    ,           ?<br>
 ,       <em>loess</em>.<br>
<img src="https://habrastorage.org/getpro/habr/post_images/971/703/3e7/9717033e7236995e67b49e244c69e7a2.svg" alt="å›¾ç‰‡"></p><br>
<p>     ,   â€” -       .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/28f/d7f/831/28fd7f831faa836dfbd6553d6721d016.svg" alt="å›¾ç‰‡"></p><br>
<p>,             . ,             (     )    . </p><br>
<p>        â€œ  â€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Generalized additive model</a></p><br>
<p>     ,                    .  R     <em>mgcv</em>   <em>gam</em>:</p><br>
<pre><code class="plaintext hljs">gam(price_sqft ~ parking + bedrooms + s(start_date, k=24), family=inverse.gaussian(link="log"))</code></pre><br>
<p>    ,    ,    inverse Gaussian distribution,     ,    ,       24 .    gam â€”    ,    k       . </p><br>
<p>      (  2    ):</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/677/cbf/c8f/677cbfc8fef6f08880e15c8442ffbfcf.svg" alt="å›¾ç‰‡"></p><br>
<p> ,    : 429k [413k-447k], .        .       ,     . </p><br>
<h1 id="skolko-vremeni-uydyot-na-prodazhu">    </h1><br>
<p>   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>               ,    .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5c6/3d2/02e/5c63d202e56401475ad563c6229359c6.svg" alt="å›¾ç‰‡"></p><br>
<p>,        60 .          ,       . </p><br>
<h1 id="ocenivaem-doma"> </h1><br>
<p>,          ,         .       ,       1,      - :</p><br>
<pre><code class="plaintext hljs">#     <font></font>
selected_mls=17758383 <font></font>
#    2<font></font>
max_distance=2000  <font></font>
#       <font></font>
plex_pe&lt;-prop_geo_p %&gt;% filter(type!='Apartment', type!='House')<font></font>
ref&lt;-plex_pe%&gt;%filter(mls==selected_mls) <font></font>
<font></font>
#     <font></font>
search_roi &lt;- st_buffer(ref, max_distance) <font></font>
#      ,    -  <font></font>
result &lt;- st_intersection(plex_pe %&gt;% filter(mls!=selected_mls), search_roi) %&gt;% <font></font>
filter(area_interior&lt;10000, area_interior&gt;100,area_land&gt;0,price&lt;1e7,price&gt;100 ) </code></pre><br>
<p> :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/4e1/587/1d7/4e15871d7535aab6a74659f9c6146a69.svg" alt="å›¾ç‰‡"></p><br>
<p>   :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/035/34b/dd6/03534bdd6c6ec801eb352f0dc62d3a71.svg" alt="å›¾ç‰‡"></p><br>
<p>,           ,          ,   -  â€”        ,      (          XX ),         ..<br>
       ,    523k$,   [ 570k$ â€” 620k$] </p><br>
<h1 id="risuem-karty-so-srednimi-cenami">    </h1><br>
<p>       ,        .  ,         .      sf   :</p><br>
<p>    ,       (),      ,       :</p><br>
<pre><code class="plaintext hljs">aggregate(filter(kijiji_geo_p,bedrooms==2)%&gt;%dplyr::select(price), mtl_p, median, join = st_contains)</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/895/498/c1d/895498c1d59478b1b0e18cea42c2e2b0.svg" alt="å›¾ç‰‡"></p><br>
<p>       ,   .              .        .<br>
   ,         :</p><br>
<pre><code class="plaintext hljs">gam(price_sqft ~ type + bedrooms + parking + s(x,y,k=100), family=inverse.gaussian(link="log"))</code></pre><br>
<p>   ,   100:</p><br>
<pre><code class="plaintext hljs">pred_rent_whole &lt;- raster(extent(mtl_land),res=100)<font></font>
crs(pred_rent_whole)&lt;-crs(mtl_land)<font></font>
my_predict&lt;-function(...) predict(...,type="response")<font></font>
pred_rent_whole&lt;- raster::interpolate(pred_rent_whole, model_rent_geo_whole, fun=my_predict, xyOnly=T,const=data.frame(bedrooms=2))<font></font>
<font></font>
#      <font></font>
pred_rent_whole &lt;- mask(pred_rent_whole, mtl_land)</code></pre><br>
<p>      <em>tmap</em>:</p><br>
<pre><code class="plaintext hljs">tm_shape(osm_mtl)+tm_rgb(alpha=0.6)+<font></font>
  tm_shape(mtl_arr) + tm_borders(alpha=0.8, col='black')+<font></font>
  tm_shape(pred_rent_whole)+tm_raster(style="cont",alpha=0.7, title='$')+  tm_shape(subway_stop_p%&gt;%dplyr::select(stop_name))+tm_symbols(col='blue',alpha=0.2,size=0.03)+<font></font>
  tm_shape(subway_p)+tm_lines(col='blue',alpha=0.2)+<font></font>
  tm_compass(position=c("right", "bottom"))+<font></font>
  tm_scale_bar(position=c("left", "bottom"))+<font></font>
  tm_layout(scale=1.5)</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/47e/a93/8fd/47ea938fd524dc1027091bba03b7f1d5.svg" alt="å›¾ç‰‡"><br>
  â€”  .</p><br>
<p>   ,    .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b3f/272/789/b3f272789dd8ba919eb026a9b37a23aa.svg" alt="å›¾ç‰‡"></p><br>
<p>,      .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a89/de3/2a7/a89de32a720f8a50b8fc0fdaf1e8a052.svg" alt="å›¾ç‰‡"></p><br>
<p>     ,        (    /(    * ).<br>
         .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/c81/269/8a9/c812698a9809d34bd26cdead72c6fd00.svg" alt="å›¾ç‰‡"></p><br>
<p>   (   /  ).<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b88/b94/4ec/b88b944ecca7908d3e78bf5b83fd3c84.svg" alt="å›¾ç‰‡"></p><br>
<p>  ,     ,        (       ).</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/3b5/6bf/684/3b56bf6845a7558258397b1e07b90e74.svg" alt="å›¾ç‰‡"></p><br>
<h1 id="zaklyuchenie"></h1><br>
<p> ,        R  <del>   </del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯„ä¼°ä»€ä¹ˆï¼Œä½•æ—¶ä½•åœ°ä¹°å–ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ç”Ÿæ´»æ˜¯ä¸€ä»¶æ›´å¤æ‚çš„äº‹æƒ…ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œäººä»¬å¯¹çœŸå®å”®ä»·çš„äº†è§£ä¸è¶³ï¼ˆåœ¨æˆ‘ä»¬åœ°åŒºï¼Œè¿™ä»…é€‚ç”¨äºæ³¨å†Œæˆ¿åœ°äº§ç»çºªäººï¼‰ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæ‚¨ä¸åº”æœŸæœ›è·å¾—çš„é¢„æµ‹ä¸å®é™…æƒ…å†µç›¸ç¬¦100ï¼…ã€‚</font><font style="vertical-align: inherit;">æ€»çš„æ¥è¯´ï¼Œæ²¡æœ‰èº²è—çš„äººä¸æ˜¯æˆ‘çš„é”™ã€‚</font></font></p><br>
<h1 id="ishodnyy-kod"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ„æº</font></font></h1><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€æœ‰æ•°æ®å’Œæºä»£ç éƒ½åœ¨å­˜å‚¨åº“ä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹°æˆ‘ä»¬çš„å¤§è±¡ï¼</font></font></em></p><br>
<h2 id="bonus-dlya-teh-kto-dochital-do-konca"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹äºé‚£äº›è¯»åˆ°æœ€åçš„äººæœ‰å¥–åŠ±</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº¤äº’å¼åœ°å›¾åŠå…¶ç»“æœï¼š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">http</font></a><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//www.ilmarin.info/re_mtl/</font></font></a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN489470/index.html">å›´æ”»æ¨¡æ‹Ÿçš„ç«äº‰æ½œåŠ›</a></li>
<li><a href="../zh-CN489472/index.html">Webå­˜æ¡£ï¼šå¯¼å…¥æ›¿æ¢</a></li>
<li><a href="../zh-CN489474/index.html">å¦‚ä½•å°†fastTextæ¨¡å‹å‹ç¼©100æ¬¡</a></li>
<li><a href="../zh-CN489476/index.html">ä½¿ç”¨CSS3è®¾ç½®å¤é€‰æ¡†å’Œå•é€‰æŒ‰é’®çš„æ ·å¼</a></li>
<li><a href="../zh-CN489482/index.html">å¦‚æœè¦ä»æ±‡ç¼–ç¨‹åºè°ƒç”¨Goå‡½æ•°ï¼Œéœ€è¦çŸ¥é“ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN489488/index.html">é€‚ç”¨äºå¼€å‘äººå‘˜çš„DevOpsï¼ˆæˆ–åå¯¹ä»–ä»¬ï¼Ÿï¼ï¼‰</a></li>
<li><a href="../zh-CN489490/index.html">äº•å­—æ¸¸æˆï¼ˆPixiJSï¼‰</a></li>
<li><a href="../zh-CN489492/index.html">Ğ¯Ğ½Ğ´ĞµĞºÑ.Ğ”Ğ¸ÑĞº Ğ·Ğ°Ğ¿Ñ€ĞµÑ‚Ğ¸Ğ» Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ open source ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ rclone. UPD â€” ÑĞ½Ğ¾Ğ²Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚</a></li>
<li><a href="../zh-CN489494/index.html">æœ€å—æ¬¢è¿çš„æ•°æ®ç»“æ„</a></li>
<li><a href="../zh-CN489496/index.html">å¯»æ‰¾å‘˜å·¥å’Œå¯»æ‰¾å·¥ä½œï¼šæˆ‘ä»å†…éƒ¨åˆ°å¤–éƒ¨çš„è§‚ç‚¹</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>