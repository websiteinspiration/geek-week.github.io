<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óÄÔ∏è üë©‚Äçüåæ üî¢ Detalles de implementaci√≥n del protocolo de sincronizaci√≥n de tiempo PTPv2 üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø üë®‚Äçüë®‚Äçüëß üéæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introducci√≥n
 
 El concepto de construir una "Subestaci√≥n digital" en la industria de la energ√≠a el√©ctrica requiere sincronizaci√≥n con una precisi√≥n d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Detalles de implementaci√≥n del protocolo de sincronizaci√≥n de tiempo PTPv2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/phoenix_contact/blog/495920/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducci√≥n</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El concepto de construir una "Subestaci√≥n digital" en la industria de la energ√≠a el√©ctrica requiere sincronizaci√≥n con una precisi√≥n de 1 Œºs. </font><font style="vertical-align: inherit;">Las transacciones financieras tambi√©n requieren precisi√≥n de microsegundos. </font><font style="vertical-align: inherit;">En estas aplicaciones, la precisi√≥n del tiempo NTP ya no es suficiente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El protocolo de sincronizaci√≥n PTPv2, descrito por el est√°ndar IEEE 1588v2, permite una precisi√≥n de sincronizaci√≥n de varias decenas de nanosegundos. </font><font style="vertical-align: inherit;">PTPv2 le permite enviar paquetes de sincronizaci√≥n a trav√©s de redes L2 y L3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las principales √°reas donde se utiliza PTPv2 son:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingenier√≠a de la Energ√≠a;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">equipos de control y medici√≥n;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complejo militar-industrial;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telecom</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sector financiero.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta publicaci√≥n analiza c√≥mo funciona el protocolo de sincronizaci√≥n PTPv2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos m√°s experiencia en la industria y a menudo nos encontramos con este protocolo en aplicaciones de energ√≠a. En consecuencia, haremos la revisi√≥n con un ojo puesto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la energ√≠a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPor qu√© es necesario?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Actualmente, STO 34.01-21-004-2019 PJSC Rosseti y STO 56947007-29.240.10.302-2020 PJSC FGC UES contienen requisitos para la organizaci√≥n del bus de proceso con la provisi√≥n de sincronizaci√≥n de tiempo a trav√©s de PTPv2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto se debe al hecho de que los terminales de protecci√≥n de rel√© y los dispositivos de medici√≥n est√°n conectados al bus de proceso, que transmiten valores instant√°neos de corriente y voltaje utilizando los llamados flujos SV (flujos de multidifusi√≥n) a trav√©s del bus de proceso.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los terminales de protecci√≥n de rel√© utilizan estos valores para implementar la protecci√≥n de conexi√≥n. Si la precisi√≥n de las mediciones a lo largo del tiempo es peque√±a, algunas protecciones pueden fallar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, la protecci√≥n de la selectividad absoluta puede convertirse en una v√≠ctima de sincronizaci√≥n de tiempo "d√©bil". A menudo, la l√≥gica de tales defensas se basa en una comparaci√≥n de dos valores. Si los valores divergen a un valor suficientemente grande, entonces se activa la protecci√≥n. Si estos valores se miden con una precisi√≥n de 1 ms, puede obtener una gran diferencia donde los valores son realmente normales, si los mide con una precisi√≥n de 1 Œºs. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versiones PTP</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El protocolo PTP se describi√≥ originalmente en 2002 en el est√°ndar IEEE 1588-2002 y se denomin√≥ "Est√°ndar para un protocolo de sincronizaci√≥n de reloj de precisi√≥n para sistemas de control y medici√≥n en red". </font><font style="vertical-align: inherit;">En 2008, se lanz√≥ el est√°ndar IEEE 1588-2008 actualizado, que describe la versi√≥n 2 del PTP. En esta versi√≥n del protocolo, se mejor√≥ la precisi√≥n y la estabilidad, pero no se mantuvo la compatibilidad con la primera versi√≥n del protocolo. </font><font style="vertical-align: inherit;">Adem√°s, en 2019, se lanz√≥ una versi√≥n del est√°ndar IEEE 1588-2019 que describe PTP v2.1. </font><font style="vertical-align: inherit;">Esta versi√≥n agrega mejoras menores a PTPv2 y es compatible con versiones anteriores de PTPv2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En otras palabras, tenemos la siguiente imagen con las versiones:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTPv1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(IEEE 1588-2002)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTPv2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(IEEE 1588-2008)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTPv2.1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(IEEE 1588-2019)</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTPv1 (IEEE 1588-2002)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incompatible</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incompatible</font></font><br>
</td>
</tr>
<tr>
<td>PTPv2 (IEEE 1588-2008)<br>
</td>
<td><br>
</td>
<td> ‚Äî </td>
<td><br>
</td>
</tr>
<tr>
<td>PTPv2.1 (IEEE 1588-2019)<br>
</td>
<td><br>
</td>
<td><br>
</td>
<td> ‚Äî </td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, como siempre, hay matices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La incompatibilidad entre PTPv1 y PTPv2 sugiere que un dispositivo con soporte PTPv1 no podr√° sincronizarse desde el reloj exacto que se ejecuta en PTPv2. Usan diferentes formatos de mensajes para la sincronizaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero a√∫n puede combinar dispositivos con PTPv1 y dispositivos con PTPv2 en la misma red. Para hacer esto, algunos fabricantes le permiten seleccionar la versi√≥n del protocolo en los puertos del reloj fronterizo. Es decir, el reloj de l√≠mite se puede sincronizar a trav√©s de PTPv2 y al mismo tiempo sincronizar otros relojes conectados a √©l tanto por PTPv1 como por PTPv2. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispositivos PTP. ¬øQu√© son y en qu√© se diferencian?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El est√°ndar IEEE 1588v2 describe varios tipos de dispositivos. Todos ellos se dan en la tabla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los dispositivos se comunican entre s√≠ a trav√©s de LAN mediante PTP.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los dispositivos PTP se llaman relojes. </font><font style="vertical-align: inherit;">Todos los relojes toman la hora exacta del reloj Grandmaster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay 5 tipos de relojes:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reloj de gran maestro</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La principal fuente de tiempo preciso. </font><font style="vertical-align: inherit;">A menudo equipado con una interfaz para conectar GPS.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reloj ordinario</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un dispositivo de puerto √∫nico que puede ser maestro (reloj maestro) o esclavo (reloj maestro)</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horas principales (master)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Son la fuente de la hora exacta en la que se sincronizan otros relojes.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reloj esclavo (esclavo)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El dispositivo final que se sincroniza desde el reloj maestro</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reloj l√≠mite</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un dispositivo con m√∫ltiples puertos, que puede ser maestro o esclavo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, este reloj puede sincronizarse desde un reloj maestro superior y sincronizar un reloj esclavo inferior.</font></font><br>
</td>
</tr>
<tr>
<td>End-to-end Transparent Clock ( ,    End-to-End)<br>
</td>
<td>   ,      ,  .    PTP   . <br>
<br>
       PTP-. <br>
<br>
                .<br>
 </td>
</tr>
<tr>
<td>Peer-to-Peer Transparent Clock ( ,    Peer-to-Peer)<br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un dispositivo con m√∫ltiples puertos que no es ni un reloj maestro ni un esclavo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transmite datos PTP entre dos horas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al transmitir datos, el reloj transparente corrige todos los mensajes PTP Sync y Follow_Up (a continuaci√≥n se describe m√°s sobre ellos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La correcci√≥n se logra agregando al campo del ajuste del paquete de retraso transmitido en el dispositivo de transmisi√≥n y el retraso en el canal de datos.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nodo de gesti√≥n</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un dispositivo que configura y diagnostica otros relojes.</font></font><br>
</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los relojes maestro y esclavo se sincronizan mediante marcas de tiempo en mensajes PTP. </font><font style="vertical-align: inherit;">Hay dos tipos de mensajes en el protocolo PTP:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los mensajes de evento son mensajes sincronizados que implican la generaci√≥n de una marca de tiempo en el momento en que se env√≠a un mensaje y en el momento en que se recibe.</font></font></li>
<li>General Messages ‚Äì      ,        </li>
</ul><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>Event Messages<br>
</td>
<td>General Messages<br>
</td>
</tr>
<tr>
<td>Sync<br>
Delay_Req<br>
Pdelay_Req<br>
Pdelay_Resp<br>
</td>
<td>Announce<br>
Follow_Up<br>
Delay_Resp<br>
Pdelay_Resp_Follow_Up<br>
Management<br>
Signaling<br>
</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, consideraremos todos los tipos de mensajes con m√°s detalle. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principales problemas de sincronizaci√≥n</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cuando se transmite un paquete de sincronizaci√≥n a trav√©s de una red local, se retrasa en el conmutador y en el canal de transmisi√≥n de datos. </font><font style="vertical-align: inherit;">Cualquier cambio dar√° un retraso de aproximadamente 10 Œºs, lo cual es inaceptable para PTPv2. </font><font style="vertical-align: inherit;">Despu√©s de todo, necesitamos obtener una precisi√≥n de 1 Œºs en el dispositivo final. </font><font style="vertical-align: inherit;">(Esto es cuando se trata de energ√≠a. Otras aplicaciones pueden requerir m√°s precisi√≥n). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IEEE 1588v2 describe varios algoritmos de operaci√≥n que le permiten registrar el retraso de tiempo y ajustarlo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmo operativo</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Durante la operaci√≥n normal, el protocolo opera en dos fases.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fase 1 - Establecimiento de la jerarqu√≠a "Reloj l√≠der - Reloj esclavo".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fase 2: sincronizaci√≥n del reloj utilizando el mecanismo de extremo a extremo o punto a punto.</font></font></li>
</ul><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fase 1: configuraci√≥n de la jerarqu√≠a de esclavos maestros</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cada puerto de un reloj regular o de l√≠mite tiene un cierto n√∫mero de estados (reloj esclavo y reloj maestro). El est√°ndar describe el algoritmo de transici√≥n entre estos estados. En programaci√≥n, dicho algoritmo se llama m√°quina de estados o m√°quina de estados (m√°s en la Wiki). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta m√°quina de estado utiliza el Mejor algoritmo de reloj maestro (BMCA) para configurar el maestro cuando se conectan dos horas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este algoritmo permite que el reloj asuma las obligaciones de un reloj de gran maestro cuando un reloj de gran maestro superior pierde su se√±al GPS, se desconecta de la red, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las transiciones de estado de acuerdo con BMCA se muestran brevemente en el siguiente diagrama:</font></font><br>
<img src="https://habrastorage.org/webt/uy/hz/h6/uyhzh63gb0jt63bppsuuhcllwmu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La informaci√≥n sobre el reloj en el otro extremo del "cable" se env√≠a en un mensaje especial (Mensaje de anuncio). </font><font style="vertical-align: inherit;">Cuando se recibe esta informaci√≥n, el algoritmo de la m√°quina de estado procesa y compara qu√© reloj es mejor. </font><font style="vertical-align: inherit;">El puerto de los mejores relojes se convierte en el reloj l√≠der. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una jerarqu√≠a simple se presenta en el diagrama a continuaci√≥n. </font><font style="vertical-align: inherit;">Las rutas 1, 2, 3, 4, 5 pueden contener un reloj transparente (Reloj transparente), pero no participan en el establecimiento de la jerarqu√≠a "Reloj l√≠der - Reloj esclavo". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kj/md/ci/kjmdcibg-ls2rflwu6qtur-0osg.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fase 2 - Sincronizaci√≥n de un reloj normal y de l√≠mite</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Inmediatamente despu√©s de que se establezca la jerarqu√≠a "Horas iniciales - Horas de esclavos", comienza la fase de sincronizaci√≥n de un reloj regular y de l√≠mite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la sincronizaci√≥n, el reloj maestro env√≠a un mensaje que contiene una marca de tiempo al reloj esclavo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los horarios principales pueden ser:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escenario √∫nico;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dos etapas</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un reloj de una sola etapa para la sincronizaci√≥n env√≠a un mensaje de sincronizaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un reloj de dos etapas utiliza dos mensajes para la sincronizaci√≥n: sincronizaci√≥n y seguimiento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se pueden usar dos mecanismos para la fase de sincronizaci√≥n:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retraso del mecanismo de solicitud-respuesta.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mecanismo de medici√≥n de retraso entre pares.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para empezar, consideraremos estos mecanismos en el caso m√°s simple, cuando no se utilizan relojes transparentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Retraso del mecanismo de solicitud-respuesta </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mecanismo tiene dos pasos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medici√≥n del retraso en la transmisi√≥n de un mensaje entre un reloj maestro y un esclavo. </font><font style="vertical-align: inherit;">Se realiza utilizando el mecanismo de solicitud-respuesta de retraso.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corrige el turno de la hora exacta.</font></font></li>
</ol><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medici√≥n de retardo</font></font></i><br>
<img src="https://habrastorage.org/webt/zj/hp/sa/zjhpsak259vihrylfiujf5vj2sm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
t1: sincronizaci√≥n del tiempo de env√≠o del mensaje por el reloj principal; t2 - Sincroniza el tiempo de recepci√≥n del mensaje por el reloj esclavo; t3 - Tiempo de env√≠o de solicitud de retraso (Delay_Req) ‚Äã‚Äãpor horas de esclavo; t4 - Tiempo de recepci√≥n de Retardo_Req por el reloj principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando el reloj esclavo conoce el tiempo t1, t2, t3 y t4, puede calcular el retraso promedio en la transmisi√≥n del mensaje de sincronizaci√≥n (tmpd). Se calcula de la siguiente manera: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e6/cz/qx/e6czqxjr1wen8eld_z4y16joa4k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cuando se transmite un mensaje Sync y Follow_Up, se calcula el retraso de tiempo del maestro al esclavo - t-ms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se transmiten los mensajes Delay_Req y Delay_Resp, se calcula el retraso de tiempo del esclavo al maestro, t-sm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si se produce cierta asimetr√≠a entre estos dos valores, aparece un error en la correcci√≥n de la salida de la hora exacta. El error es causado por el hecho de que el retraso calculado es el promedio de los retrasos t-ms y t-sm. Si los retrasos no son iguales entre s√≠, entonces ajustaremos el tiempo incorrectamente. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correcci√≥n del desplazamiento de la hora exacta</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Despu√©s de que se </font><i><font style="vertical-align: inherit;">conoce</font></i><font style="vertical-align: inherit;"> el retraso entre el reloj principal y el reloj esclavo, el reloj esclavo realiza la correcci√≥n de tiempo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a7/gv/qz/a7gvqzykdjxtg6nm5rcqhcqmyzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El reloj esclavo utiliza el mensaje de sincronizaci√≥n y el mensaje opcional Follow_Up para calcular la diferencia horaria exacta al transmitir el paquete del reloj maestro al esclavo. El cambio se calcula utilizando la siguiente f√≥rmula: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n1/rk/nw/n1rknwzr-r0qio-uf1a9iiqd_9o.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mecanismo de medici√≥n de retraso entre pares</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Este mecanismo tambi√©n utiliza dos pasos para sincronizar:</font></font><br>
<br>
<ol>
<li>         .     peer delay mechanism.</li>
<li>   .</li>
</ol><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medici√≥n de demora de</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
igual a igual </font><i><font style="vertical-align: inherit;">La demora entre dispositivos habilitados de</font></i><font style="vertical-align: inherit;"> igual a igual se mide usando los siguientes mensajes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eo/0o/y2/eo0oy26vhwksm1rel2znic_q8rs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando el puerto 1 conoce los tiempos t1, t2, t3 y t4, puede calcular el retraso promedio (tmld ) Se calcula usando la siguiente f√≥rmula: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/3r/mc/a63rmc4ehosk81dvktfv4prevt0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, el puerto usa este valor para calcular el campo de ajuste para cada mensaje de sincronizaci√≥n o mensaje de seguimiento opcional que pasa a trav√©s de este dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El retraso total ser√° igual a la suma del retraso durante la transmisi√≥n a trav√©s de este dispositivo, el retraso promedio durante la transmisi√≥n a trav√©s del canal de datos y el retraso ya contenido en este mensaje, incluido en los dispositivos superiores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los mensajes Pdelay_Req, Pdelay_Resp y Pdelay_Resp_Follow_Up opcionales le permiten obtener un retraso del maestro al esclavo y del esclavo al maestro (circular). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cualquier asimetr√≠a entre estos dos valores introducir√° un error de correcci√≥n de desplazamiento de tiempo preciso. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correcci√≥n del desplazamiento de la hora exacta El</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/m6/do/ku/m6dokuldnfjmqscwyrtin2tvjiu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
reloj esclavo utiliza el mensaje de sincronizaci√≥n y el mensaje opcional Follow_Up para calcular el desplazamiento de la hora exacta al transmitir el paquete desde el reloj principal al esclavo. El cambio se calcula de acuerdo con la siguiente f√≥rmula: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ub/ui/xk/ubuixkpfmzizo7ilzkdgyfwvh8c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beneficios de ajuste entre pares: el retraso de cada mensaje de sincronizaci√≥n o seguimiento se calcula a medida que se transmite por la red. Por lo tanto, un cambio en la ruta de transmisi√≥n no afectar√° de ninguna manera la precisi√≥n del ajuste.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se usa este mecanismo, la sincronizaci√≥n de tiempo no requiere el c√°lculo del retraso de tiempo en el camino recorrido por el paquete de sincronizaci√≥n, como se hace con un intercambio b√°sico. Aquellos. Los mensajes Delay_Req y Delay_Resp no se env√≠an. En este m√©todo, la demora entre el reloj maestro y los seguidores simplemente se suma en el campo de ajuste de cada mensaje de sincronizaci√≥n o seguimiento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra ventaja es que el reloj de conducci√≥n se descarga debido a la necesidad de procesar mensajes Delay_Req. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modos de funcionamiento de relojes transparentes En</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
consecuencia, se examinaron ejemplos simples. Ahora suponga que los interruptores aparecen en la ruta de sincronizaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si utiliza conmutadores sin compatibilidad con PTPv2, el paquete de sincronizaci√≥n se retrasar√° unos 10 Œºs en el conmutador.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los conmutadores que admiten PTPv2 en la terminolog√≠a IEEE 1588v2 se denominan relojes transparentes. </font><font style="vertical-align: inherit;">El reloj transparente no est√° sincronizado con el reloj principal y no participa en la jerarqu√≠a "Reloj principal - Reloj esclavo", pero cuando transmiten mensajes de sincronizaci√≥n, recuerdan cu√°nto retrasaron el mensaje. </font><font style="vertical-align: inherit;">Esto le permite ajustar el retraso de tiempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un reloj transparente puede funcionar en dos modos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De extremo a extremo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De igual a igual.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">End-to-End (E2E) El</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/cb/ev/vy/cbevvyylfmfgq9jgwm_jiuxvkjw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
reloj E2E transparente transmite mensajes Sync y los mensajes Follow_Up que lo acompa√±an a todos los puertos. Incluso aquellos que est√°n bloqueados por alg√∫n protocolo (por ejemplo, RSTP). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El conmutador recuerda la marca de tiempo cuando se recibi√≥ el paquete Sync (Follow_Up) en el puerto y cuando se envi√≥ desde el puerto. En base a estas dos marcas de tiempo, se calcula el tiempo de procesamiento del interruptor para el mensaje. En el est√°ndar, este tiempo se llama tiempo de residencia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tiempo de procesamiento se agrega al campo correctField del mensaje Sync (reloj de una etapa) o Follow_Up (reloj de dos etapas).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hv/4q/rj/hv4qrjcuzer2hejocmtzitnntma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El reloj transparente E2E mide el tiempo de procesamiento de los mensajes Sync y Delay_Req que pasan por el conmutador. Pero es importante comprender que el retraso de tiempo entre el reloj principal y el reloj esclavo se calcula utilizando el mecanismo de solicitud-respuesta de retraso. Si el reloj maestro cambia o la ruta del reloj maestro al esclavo cambia, el retraso se mide nuevamente. Esto aumenta el tiempo de transici√≥n en caso de cambios en la red. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sw/im/q7/swimq7rpv2n24wyd8erbsvf420s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El reloj P2P transparente, adem√°s de medir el tiempo de procesamiento del mensaje por el interruptor, mide el retraso en el canal de datos al vecino m√°s cercano utilizando el mecanismo de medici√≥n de retraso del nodo vecino.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El retraso se mide en cada canal en ambas direcciones, incluidos los canales que est√°n bloqueados por un protocolo (por ejemplo, RSTP). </font><font style="vertical-align: inherit;">Esto le permite calcular de inmediato un nuevo retraso en la ruta de sincronizaci√≥n si el reloj del gran maestro o la topolog√≠a de la red ha cambiado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tiempo de procesamiento del interruptor y el tiempo de retraso se acumulan al transmitir mensajes de sincronizaci√≥n o seguimiento. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de soporte para conmutadores PTPv2 Los</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
conmutadores pueden admitir PTPv2:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">program√°ticamente</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hardware.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la implementaci√≥n del software del protocolo PTPv2, el conmutador solicita una marca de tiempo del firmware. </font><font style="vertical-align: inherit;">El problema es que el firmware funciona de forma c√≠clica, y debe esperar hasta que finalice el ciclo actual, procesar la solicitud y, una vez que expire el siguiente ciclo, emitir√° una marca de tiempo. </font><font style="vertical-align: inherit;">Todo esto tambi√©n llevar√° tiempo, y obtendremos un retraso, aunque no tan significativo como sin el soporte de software PTPv2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo el soporte de hardware para PTPv2 le permite mantener la precisi√≥n necesaria. </font><font style="vertical-align: inherit;">En este caso, la emisi√≥n de la marca de tiempo se realiza mediante un ASIC especial, que est√° instalado en el puerto. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formato del mensaje</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Todos los mensajes PTP consisten en los siguientes campos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encabezado: 34 bytes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuerpo: el tama√±o depende del tipo de mensaje.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sufijo (opcional.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ae/9l/_3/ae9l_3mph3pkhb-2oi0h_ppy48u.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encabezado</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El campo </font><b><font style="vertical-align: inherit;">Encabezado</font></b><font style="vertical-align: inherit;"> es el mismo para todos los mensajes PTP. Su tama√±o es de 34 bytes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El formato del </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/xs/gu/yuxsgundgrz9iyiyyfabaxt5i38.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">campo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Encabezado: </font><b><font style="vertical-align: inherit;">mensajeTipo</font></b><font style="vertical-align: inherit;"> es el tipo del mensaje transmitido, por ejemplo, Sincronizaci√≥n, Delay_Req, PDelay_Req, etc. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">messageLength</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : contiene el tama√±o completo del mensaje PTP, incluidos el encabezado, el cuerpo y el sufijo (pero excluyendo los bytes de relleno). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">domainNumber</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : determina a qu√© dominio PTP pertenece el mensaje. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un dominio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> son unos pocos relojes diferentes ensamblados en un grupo l√≥gico y sincronizados desde un reloj principal, pero no necesariamente sincronizados con un reloj que pertenece a otro dominio. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">banderas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : este campo contiene varias banderas para identificar el estado del mensaje. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correcci√≥ncampo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- contiene el tiempo de retraso en nanosegundos. El tiempo de demora incluye la demora de transmisi√≥n a trav√©s del reloj transparente, as√≠ como la demora de transmisi√≥n a trav√©s del canal cuando se utiliza el modo punto a punto. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sourcePortIdentity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : este campo contiene informaci√≥n sobre desde qu√© puerto se envi√≥ originalmente este mensaje. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID de secuencia</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : contiene el n√∫mero de identificaci√≥n para mensajes individuales. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlField</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - artifact field =) Permanece de la primera versi√≥n del est√°ndar y contiene informaci√≥n sobre el tipo de este mensaje. Esencialmente lo mismo que messageType, pero con menos opciones. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logMessageInterval</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : este campo est√° determinado por el tipo de mensaje. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuerpo</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se discuti√≥ anteriormente, hay varios tipos de mensajes. Estos tipos se describen a continuaci√≥n: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensaje de anuncio El mensaje de anuncio</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
se utiliza para "informar" a otros relojes dentro del mismo dominio acerca de su configuraci√≥n. Este mensaje le permite configurar la jerarqu√≠a "Reloj l√≠der - Reloj esclavo". </font></font><br>
<img src="https://habrastorage.org/webt/-i/zs/dh/-izsdhnvkookhpjtrdrqx2myimy.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sincronizaci√≥n</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
mensaje de sincronizaci√≥n mensaje A (Sync) es enviado por el reloj maestro y contiene la hora del reloj maestro en el momento del mensaje de sincronizaci√≥n se ha creado. Si el reloj principal es de dos pasos, la marca de tiempo en el mensaje de sincronizaci√≥n se establecer√° en 0 y la marca de tiempo actual se enviar√° en el mensaje de seguimiento emparejado. El mensaje de sincronizaci√≥n se usa para ambos mecanismos de medici√≥n de retardo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mensaje se transmite mediante multidifusi√≥n. Opcionalmente, puede usar Unicast.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/pp/1f/scpp1fns1uuyccw9bucbvghesgo.png"><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mensaje </font><b><font style="vertical-align: inherit;">Delay_Req</font></b><font style="vertical-align: inherit;"> El formato del mensaje </font><b><font style="vertical-align: inherit;">Delay_Req</font></b><font style="vertical-align: inherit;"> es id√©ntico al mensaje Sync. El reloj esclavo env√≠a Delay_Req. Contiene el tiempo que Delay_Req fue enviado por el reloj esclavo. Este mensaje se usa solo para el mecanismo de solicitud-respuesta de retraso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mensaje se transmite mediante multidifusi√≥n. Opcionalmente, puede usar Unicast. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/bm/r_/febmr_zz7v1dricuta5z88xmjqk.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensaje de seguimiento El mensaje de seguimiento</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
es enviado opcionalmente por el reloj maestro y contiene la hora en que el </font><font style="vertical-align: inherit;">maestro </font><font style="vertical-align: inherit;">envi√≥ el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mensaje de sincronizaci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . El mensaje Follow_Up solo se env√≠a mediante un reloj de conducci√≥n de dos etapas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mensaje Follow_Up se usa para ambos mecanismos de medici√≥n de retraso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mensaje se transmite mediante multidifusi√≥n. Opcionalmente, puede usar Unicast. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1g/42/2a/1g422aehbonsjrjjq0dwn9ceoxi.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensaje Delay_Resp</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El reloj maestro env√≠a el mensaje Delay_Resp. Contiene la hora en que el reloj maestro recibe el Delay_Req. Este mensaje se usa solo para el mecanismo de solicitud-respuesta de retraso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mensaje se transmite mediante multidifusi√≥n. Opcionalmente, puede usar Unicast. </font><font style="vertical-align: inherit;">
Mensaje </font></font><br>
<br>
<img src="https://habrastorage.org/webt/up/is/gz/upisgzu5d7dk0iscixogmmjciwi.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pdelay_Req Un</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mensaje </font><b><font style="vertical-align: inherit;">Pdelay_Req</font></b><font style="vertical-align: inherit;"> es enviado por un dispositivo que solicita un retraso. Contiene la hora en que se envi√≥ el mensaje desde el puerto de este dispositivo. Pdelay_Req se usa solo para el mecanismo de medici√≥n de retardo del nodo vecino. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hn/km/rz/hnkmrzmcidqsawxtazho-oprpus.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensaje Pdelay_Resp El</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
dispositivo que recibi√≥ la solicitud de retraso </font><b><font style="vertical-align: inherit;">env√≠a el mensaje Pdelay_Resp</font></b><font style="vertical-align: inherit;"> . Contiene la hora en que este dispositivo recibi√≥ el mensaje Pdelay_Req. Los mensajes Pdelay_Resp se usan solo para el mecanismo de medici√≥n de retardo del nodo vecino.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/bb/34/khbb34wn7ujy84lldruomgaenmg.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensaje Pdelay_Resp_Follow_Up El mensaje Pdelay_Resp_Follow_Up</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
es enviado opcionalmente por el dispositivo que recibi√≥ la solicitud de retraso. </font><font style="vertical-align: inherit;">Contiene la hora en que este dispositivo recibi√≥ el mensaje Pdelay_Req. </font><font style="vertical-align: inherit;">El mensaje Pdelay_Resp_Follow_Up solo se env√≠a mediante un reloj maestro de dos etapas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este mensaje tambi√©n se puede usar para el tiempo de ejecuci√≥n en lugar de una marca de tiempo. </font><font style="vertical-align: inherit;">El tiempo de ejecuci√≥n es el tiempo desde el momento en que se recibe Pdelay-Req hasta que se env√≠a Pdelay_Resp. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pdelay_Resp_Follow_Up se usan solo para el mecanismo de medici√≥n de retardo del nodo vecino. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w7/-k/q2/w7-kq2pssesbnko10w1tmsrs9ow.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensajes de control (Mensaje de administraci√≥n)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Los mensajes de control PTP son necesarios para transferir informaci√≥n entre uno o m√°s relojes y el nodo de control. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r7/xi/c0/r7xic0kvnb_yurjc53bah53f2ss.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transferencia a LV</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un mensaje PTP se puede transmitir a dos niveles:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Red: como parte de los datos de IP.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace: como parte de una trama Ethernet.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enviar un mensaje PTP sobre UDP sobre IP sobre Ethernet </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f7/k6/al/f7k6alykkmt_4jrstkfkad_if-4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PTP sobre UDP sobre Ethernet Los </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a7/pe/wu/a7pewujvuii1chap6wppv51dh0k.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfiles</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PTP tienen muchos par√°metros "flexibles" que deben configurarse. </font><font style="vertical-align: inherit;">Por ejemplo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opciones de BMCA.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El mecanismo de medici√≥n de retraso.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intervalos y valores iniciales de todos los par√°metros configurables, etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y a pesar del hecho de que anteriormente dijimos que los dispositivos PTPv2 son compatibles entre s√≠, en el buen sentido no lo es. Los dispositivos deben tener la misma configuraci√≥n para interactuar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, hay los llamados perfiles PTPv2. Los perfiles son grupos de ajustes configurados y ciertas restricciones de protocolo para que pueda implementar la sincronizaci√≥n de tiempo para una aplicaci√≥n espec√≠fica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El est√°ndar IEEE 1588v2 describe solo un perfil: el "Perfil predeterminado". Todos los dem√°s perfiles son creados y descritos por varias organizaciones y asociaciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, el Power Profile o PTPv2 Power Profile fue creado por el Power Systems Relaying Committee y el Substation Committee de la IEEE Power and Energy Society. El perfil en s√≠ se llama IEEE C37.238-2011.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El perfil describe que PTP se puede transmitir:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solo a trav√©s de redes L2 (es decir, Ethernet, HSR, PRP, no IP).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los mensajes se transmiten solo por la lista de correo de multidifusi√≥n.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El mecanismo de medici√≥n de retraso de pares se utiliza como mecanismo de medici√≥n de retraso.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El dominio predeterminado es 0, el dominio recomendado es 93. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La filosof√≠a de crear C37.238-2011 fue el deseo de reducir la cantidad de caracter√≠sticas opcionales y dejar solo las funciones necesarias para una interacci√≥n confiable entre dispositivos y aumentar la estabilidad del sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, se determina la frecuencia de la transmisi√≥n de mensajes: de </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wc/gp/z9/wcgpz9du_jejtkxidtptsh9x53i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hecho, solo hay un par√°metro disponible para la selecci√≥n: el tipo de reloj principal (de una o dos etapas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La precisi√≥n no debe ser superior a 1 Œºs. </font><font style="vertical-align: inherit;">En otras palabras, puede contener un m√°ximo de 15 relojes transparentes o tres horas l√≠mite en una ruta de sincronizaci√≥n.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/zp/y0/etzpy01l2mtcewn9mxik3wyztrq.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495904/index.html">¬øSe puede predecir una epidemia?</a></li>
<li><a href="../es495908/index.html">El camino a la recompensa</a></li>
<li><a href="../es495910/index.html">Instalaci√≥n de ROS en una imagen IMG de placa √∫nica de Ubuntu</a></li>
<li><a href="../es495912/index.html">Pegatinas inteligentes de repetici√≥n</a></li>
<li><a href="../es495918/index.html">C√≥mo reproducir sonido realista en juegos de computadora y realidad virtual y por qu√© es dif√≠cil</a></li>
<li><a href="../es495924/index.html">¬øPor qu√© es tan dif√≠cil construir un buen modelo de distribuci√≥n COVID-19?</a></li>
<li><a href="../es495926/index.html">Estamos escribiendo firmware para TI cc2530 en Z-Stack 3.0 para Zigbee relay Sonoff BASICZBR3 con sensor ds18b20</a></li>
<li><a href="../es495932/index.html">¬øCu√°l es el significado oculto de los autores en la Gu√≠a SCRUM? Parte 1. Sobre el proceso</a></li>
<li><a href="../es495934/index.html">DataGovernance en el hogar</a></li>
<li><a href="../es495938/index.html">Una selecci√≥n de art√≠culos sobre aprendizaje autom√°tico: casos, gu√≠as y estudios para marzo de 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>