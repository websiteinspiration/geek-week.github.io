<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧒🏼 🏙️ 👸🏼 Tentang cadangan di Proxmox VE 📳 ⛹🏽 🍪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel "Keajaiban Virtualisasi: Kursus Pengantar di Proxmox VE", kami berhasil menginstal hypervisor di server, menghubungkan penyimpanan ke sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tentang cadangan di Proxmox VE</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/486194/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/wt/vx/xu/wtvxxuyee73gugficymc7t4x0zm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Keajaiban Virtualisasi: Kursus Pengantar di Proxmox VE",</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami berhasil menginstal hypervisor di server, menghubungkan penyimpanan ke sana, merawat keamanan dasar dan bahkan menciptakan mesin virtual pertama. Sekarang kita akan melihat bagaimana mengimplementasikan tugas-tugas paling mendasar yang harus Anda lakukan agar selalu dapat memulihkan layanan jika terjadi kegagalan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alat Proxmox yang mapan memungkinkan Anda untuk tidak hanya membuat cadangan data, tetapi juga membuat set gambar pra-konfigurasi sistem operasi untuk penyebaran cepat. Ini tidak hanya membantu jika perlu untuk membuat server baru untuk layanan apa pun dalam beberapa detik, tetapi juga mengurangi waktu henti ke minimum.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak akan berbicara tentang perlunya membuat cadangan, karena ini jelas dan telah lama menjadi aksioma. </font><font style="vertical-align: inherit;">Mari kita memikirkan beberapa hal dan fitur yang tidak terlihat.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, pertimbangkan bagaimana data disimpan selama prosedur pencadangan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritma cadangan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mulai dengan, Proxmox memiliki toolkit kepegawaian yang baik untuk membuat cadangan mesin virtual. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk dengan mudah menyimpan semua data dari mesin virtual dan mendukung dua mekanisme kompresi, serta tiga metode untuk membuat salinan ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita periksa mekanisme kompresi:</font></font><br>
<br>
<ol>
<li><b> LZO</b>.     ,     90- .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a> (  Proxmox  lzop).        . ,   ,     ,        .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengompresi GZIP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dengan menggunakan algoritma ini, cadangan akan dikompres dengan cepat dengan utilitas GNU Zip, yang menggunakan algoritma Deflate yang kuat yang dibuat oleh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phil Katz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Penekanan utama adalah pada kompresi data maksimum, yang mengurangi ruang disk yang ditempati oleh cadangan. </font><font style="vertical-align: inherit;">Perbedaan utama dari LZO adalah bahwa prosedur kompresi / dekompresi membutuhkan waktu yang cukup besar.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode Pengarsipan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proxmox menawarkan tiga metode cadangan untuk dipilih administrator sistem. </font><font style="vertical-align: inherit;">Dengan menggunakannya, Anda dapat memecahkan masalah yang diperlukan dengan menentukan prioritas antara kebutuhan untuk waktu henti dan keandalan cadangan:</font></font><br>
<br>
<ol>
<li><b> Snapshot ()</b>.       Live backup,          .       VM,       —    -         .  ,   ,      .     ,     ,    .</li>
<li><b> Suspend ()</b>.    «»  ,     .     ,        ,     . ,        ,    /  ,      . ,       .              .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode berhenti</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Metode pencadangan yang paling andal, tetapi membutuhkan pematian total mesin virtual. </font><font style="vertical-align: inherit;">Perintah dikirim ke shutdown secara normal, setelah berhenti, cadangan dilakukan dan kemudian perintah dikeluarkan untuk menghidupkan mesin virtual. </font><font style="vertical-align: inherit;">Jumlah kesalahan dengan pendekatan ini minimal dan paling sering dikurangi menjadi nol. </font><font style="vertical-align: inherit;">Cadangan yang dibuat dengan cara ini hampir selalu digunakan dengan benar.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lakukan prosedur pencadangan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk cadangan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami lolos ke mesin virtual yang diperlukan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilih item </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reservasi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klik tombol Pesan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sebuah jendela akan terbuka di mana Anda dapat memilih opsi untuk cadangan di masa mendatang.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/et/gn/fu/etgnfuz7yjw9dohf4ktcvphtxry.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagai penyimpanan, kami menunjukkan salah satu yang kami sambungkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di bagian sebelumnya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah memilih parameter, klik tombol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cadangan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan tunggu hingga cadangan dibuat. </font><font style="vertical-align: inherit;">Ini akan ditunjukkan dengan tulisan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TUGAS OK</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/u-/8i/pc/u-8ipc1amu1z51u4ibgh9tjxs-o.png"></div><br>
</li>
</ol><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang arsip yang dibuat dengan cadangan mesin virtual akan tersedia untuk diunduh dari server. </font><font style="vertical-align: inherit;">Cara penyalinan yang paling sederhana dan paling umum adalah SFTP. </font><font style="vertical-align: inherit;">Untuk melakukan ini, gunakan klien FTP Cross-platform populer FileZilla, yang dapat bekerja menggunakan protokol SFTP.</font></font><br>
<br>
<ol>
<li>  <b></b>  IP-   ,   <b> </b>  root,   <b></b> — ,     ,    <b></b>  «22» (   ,     SSH-).</li>
<li>  <b> </b> ,      ,        ,   .</li>
<li>   <b>/mnt/storage</b>.         «dump».    :<ul>
<li><b>vzdump-qemu-_--.vma.gz</b>     GZIP;</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vzdump-qemu-machine_number-date-time.vma.lzo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jika metode LZO dipilih.</font></font></li>
</ul></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda disarankan untuk segera mengunduh cadangan dari server dan menyimpannya di tempat yang aman, misalnya, di penyimpanan cloud kami. </font><font style="vertical-align: inherit;">Jika Anda membuka zip file dengan resolusi vma, utilitas dengan nama yang sama yang dibundel dengan Proxmox, maka file dengan ekstensi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mentah</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan ada di dalam </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">File-file ini berisi yang berikut ini:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gambar disk </font><b><font style="vertical-align: inherit;">mentah</font></b><font style="vertical-align: inherit;"> ;</font></font></li>
<li><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konfigurasi </font><b><font style="vertical-align: inherit;">conf</font></b><font style="vertical-align: inherit;"> - VM;</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pengaturan firewall.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pulihkan dari cadangan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan situasi ketika mesin virtual secara tidak sengaja terhapus dan pemulihan daruratnya dari cadangan diperlukan:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buka penyimpanan tempat cadangan berada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buka tab </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konten</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilih salinan yang diinginkan dan klik tombol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pulihkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bg/ou/ts/bgoutsyb4clkt_qx4xy88avgtqq.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menentukan penyimpanan target dan ID yang akan ditugaskan ke mesin setelah proses selesai.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klik tombol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pulihkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah pemulihan selesai, VM akan muncul dalam daftar yang tersedia.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kloning mesin virtual</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, anggap perusahaan perlu membuat perubahan ke layanan kritis. </font><font style="vertical-align: inherit;">Perubahan seperti itu diterapkan dengan membuat banyak perubahan pada file konfigurasi. </font><font style="vertical-align: inherit;">Hasilnya tidak dapat diprediksi dan kesalahan apa pun dapat menyebabkan kegagalan layanan. </font><font style="vertical-align: inherit;">Untuk mencegah percobaan seperti itu mempengaruhi server yang berjalan, disarankan agar Anda mengkloning mesin virtual.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mekanisme kloning akan membuat salinan yang tepat dari server virtual yang dengannya ia diizinkan untuk membuat perubahan tanpa mempengaruhi operasi layanan utama. Kemudian, jika perubahan berhasil diterapkan, VM baru dimulai dan yang lama dimatikan. Ada fitur dalam proses ini yang harus selalu diingat. Pada mesin yang dikloning, alamat IP akan persis sama dengan sumber VM, yaitu, ketika dimulai, akan ada konflik alamat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan memberi tahu Anda cara menghindari situasi seperti itu. Segera sebelum melakukan kloning, Anda harus membuat perubahan pada konfigurasi jaringan. Untuk melakukan ini, Anda perlu mengubah alamat IP sementara, tetapi jangan memulai kembali layanan jaringan. Setelah kloning pada mesin utama, Anda harus mengembalikan pengaturan, dan pada mesin kloning, tentukan alamat IP lainnya. Jadi, kami mendapatkan dua salinan dari server yang sama di alamat yang berbeda. Ini akan dengan cepat memperkenalkan layanan baru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika layanan ini adalah server web, maka Anda hanya perlu mengubah A-record dari penyedia DNS Anda, setelah itu permintaan klien untuk nama domain ini sudah akan dikirim ke alamat mesin virtual kloning.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Omong-omong, Selectel memberi semua pelanggannya layanan penempatan sejumlah domain di server NS secara gratis. </font><font style="vertical-align: inherit;">Manajemen catatan dilakukan baik menggunakan panel kontrol kami, dan menggunakan API khusus. </font><font style="vertical-align: inherit;">Baca lebih lanjut tentang ini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di basis pengetahuan kami</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengkloning VM di Proxmox adalah tugas yang sangat sederhana. </font><font style="vertical-align: inherit;">Untuk melakukannya, Anda harus melakukan langkah-langkah berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergi ke mobil yang kita butuhkan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilih dari menu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">More</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> klik </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clone</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di jendela yang terbuka, isi parameter Nama.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3n/on/wn/3nonwng-06gxpllialr7u_9ck2m.png"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klon dengan menekan tombol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klon</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alat ini memungkinkan Anda untuk membuat salinan mesin virtual tidak hanya di server lokal. </font><font style="vertical-align: inherit;">Jika beberapa server virtualisasi digabungkan ke dalam cluster, maka menggunakan alat ini Anda dapat segera memindahkan salinan yang dibuat ke server fisik yang diinginkan. </font><font style="vertical-align: inherit;">Fungsi yang berguna adalah pilihan penyimpanan disk (parameter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storage Target</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), yang sangat nyaman ketika memindahkan mesin virtual dari satu media fisik ke yang lain.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format Drive Virtual</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan memberi tahu Anda lebih banyak tentang format drive yang digunakan di Proxmox:</font></font><br>
<br>
<ol>
<li><b>RAW</b>.     .       «  »    .    ,       mount   linux-.      «» ,        .<br>
<br>
     ,        ,             RAW (        ).</li>
<li><b>QEMU image format (qcow2)</b>. ,       .    ,             . ,    40  ,      2 ,         VM.        .<br>
<br>
       :        ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  nbd</a>,     <b>qemu-nbd</b>,            .       ,   ,       .<br>
<br>
 ,    -      ,           .        ,     RAW.</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format gambar VMware (vmdk)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Format ini asli dari hyperware VMware vSphere dan telah disertakan dengan Proxmox untuk kompatibilitas. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk memigrasi mesin virtual VMware ke infrastruktur Proxmox. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan vmdk secara berkelanjutan tidak dianjurkan, format ini adalah yang paling lambat di Proxmox, jadi hanya cocok untuk migrasi, tidak lebih. </font><font style="vertical-align: inherit;">Mungkin di masa mendatang kekurangan ini akan dihilangkan.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bekerja dengan gambar disk</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Termasuk dengan Proxmox adalah utilitas yang sangat mudah disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qemu-img</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Salah satu fungsinya adalah untuk mengkonversi gambar disk virtual. </font><font style="vertical-align: inherit;">Untuk menggunakannya, cukup buka konsol hypervisor dan jalankan perintah dalam format:</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img convert -f vmdk test.vmdk -O qcow2 test.qcow2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam contoh di atas, gambar vmdk dari drive virtual VMware yang disebut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan dikonversi ke format </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qcow2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini adalah perintah yang sangat berguna ketika Anda perlu memperbaiki kesalahan dalam pemilihan format awal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berkat perintah yang sama, Anda dapat memaksa gambar yang diinginkan menggunakan argumen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">create</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img create -f raw test.raw 40G</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perintah seperti itu akan membuat gambar uji dalam format </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAW</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , berukuran 40 GB. </font><font style="vertical-align: inherit;">Sekarang ini cocok untuk menghubungkan ke salah satu mesin virtual.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubah ukuran disk virtual</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai kesimpulan, kami akan menunjukkan cara meningkatkan ukuran disk image jika, karena suatu alasan, ruang di atasnya tidak lagi cukup. </font><font style="vertical-align: inherit;">Untuk melakukan ini, gunakan argumen ukuran:</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img resize -f raw test.raw 80G</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang gambar kita telah menjadi ukuran 80 GB. </font><font style="vertical-align: inherit;">Anda dapat melihat informasi detail tentang gambar menggunakan argumen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">info</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">qemu-img info test.raw</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jangan lupa bahwa ekstensi gambar itu sendiri tidak akan menambah ukuran partisi secara otomatis - itu hanya akan menambah ruang kosong yang tersedia. </font><font style="vertical-align: inherit;">Untuk memperbesar bagian, gunakan perintah:</font></font><br>
<br>
<pre><code class="plaintext hljs">resize2fs /dev/sda1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
di mana </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ dev / sda1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah partisi yang diinginkan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otomatiskan cadangan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan metode manual untuk membuat cadangan adalah tugas yang sangat memakan waktu dan membutuhkan banyak waktu. </font><font style="vertical-align: inherit;">Oleh karena itu, Proxmox VE menyertakan alat untuk pencadangan terjadwal otomatis. </font><font style="vertical-align: inherit;">Pertimbangkan cara melakukannya:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menggunakan antarmuka web hypervisor, buka item </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datacenter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pilih item </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reservasi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klik tombol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambah</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengatur parameter untuk penjadwal.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/5d/a0/tu/5da0tunglle5mwsvudggbwjyuhc.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Centang kotak </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simpan perubahan menggunakan tombol </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang penjadwal akan secara otomatis memulai program cadangan pada waktu yang ditentukan, berdasarkan jadwal yang ditentukan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mempertimbangkan metode pencadangan dan pemulihan mesin virtual secara berkala. Penggunaannya memungkinkan Anda untuk menyimpan semua data tanpa masalah dan segera mengembalikannya jika terjadi keadaan darurat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, ini bukan satu-satunya cara untuk menyimpan data penting. Ada banyak alat, misalnya, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Duplicity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang dengannya Anda dapat membuat salinan lengkap dan tambahan dari konten server virtual yang berbasis Linux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat melakukan prosedur pencadangan, Anda harus selalu mempertimbangkan bahwa mereka secara aktif memuat subsistem disk. </font><font style="vertical-align: inherit;">Dalam hal ini, direkomendasikan untuk melakukan prosedur ini pada saat beban minimum untuk menghindari keterlambatan saat melakukan operasi I / O di dalam mesin. </font><font style="vertical-align: inherit;">Anda dapat memantau status penundaan operasi disk langsung dari antarmuka web hypervisor (parameter keterlambatan IO).</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id486194/">https://habr.com/ru/post/id486194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id486184/index.html">Cara menggunakan pencarian secara efektif</a></li>
<li><a href="../id486186/index.html">Catastrophic Cloud: Bagaimana Cara Kerjanya</a></li>
<li><a href="../id486188/index.html">Memperkenalkan sistem cadangan PostgreSQL wal-g</a></li>
<li><a href="../id486190/index.html">Pengalaman kami dalam mengembangkan driver CSI di Kubernetes untuk Yandex.Cloud</a></li>
<li><a href="../id486192/index.html">Penipu dunia maya meretas operator seluler untuk mendapatkan nomor telepon pelanggan</a></li>
<li><a href="../id486198/index.html">Berbicara itu sulit. Esai tentang Berkomunikasi dengan Non-Programmer</a></li>
<li><a href="../id486200/index.html">Tips Docker: Bersihkan Mesin Anda Dari Sampah</a></li>
<li><a href="../id486202/index.html">Alpine mengumpulkan pembangunan Docker di bawah Python 50 kali lebih lambat, dan gambar 2 kali lebih berat</a></li>
<li><a href="../id486204/index.html">Profesi: Administrator Sistem</a></li>
<li><a href="../id486206/index.html">Jenis penipuan apa yang saya temui dalam freelance dan outsourcing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>