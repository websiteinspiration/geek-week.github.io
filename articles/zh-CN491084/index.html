<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♦️ 🖕🏿 👩🏽‍🔬 saneex.c：尝试/捕获/最终基于setjmp / longjmp（C99）的速度比标准C ++例外¹ 🛀🏽 🙁 🔓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在Habr撰写这篇纯技术文章的过程中，Habr设法成为了WHO的一个当地办事处，现在我什至感到羞耻地出版了该文章……但人们对IT人员尚未逃离的希望充满了希望，她将找到她的读者。或不？
 
 

标准C库和C本身一直令我赞叹不已，尽管它具有极简主义，但它仍然震撼了最初的那些人的精神。 红眼 骇客。第一...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>saneex.c：尝试/捕获/最终基于setjmp / longjmp（C99）的速度比标准C ++例外¹</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491084/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Habr撰写这篇纯技术文章的过程中，Habr设法成为了WHO的一个当地办事处，现在我什至感到羞耻地出版了该文章……但人们对IT人员尚未逃离的希望充满了希望，她将找到她的读者。</font><font style="vertical-align: inherit;">或不？</font></font></p><br>
<hr><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准C库和C本身一直令我赞叹不已，尽管它具有极简主义，但它仍然震撼了最初的那些人的精神。 </font></font><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">红眼</font></font></del> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">骇客</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。第</font><font style="vertical-align: inherit;">一个正式标准（ANSI C，也称为C89，</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">又称为</font></a><font style="vertical-align: inherit;"> ANS X3.159-1989，后来，C90和IEC 9899：1990）</font><font style="vertical-align: inherit;">的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">草案</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义了145个功能和宏，其中约有25个是变体（由于缺少用重载语言表示），而26纯粹是数学上的。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">在第二版中，K＆R</font></a><font style="vertical-align: inherit;">引用了114个函数（加上数学函数），并将其余函数视为奇异函数。在</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">草案C11</font></a><font style="vertical-align: inherit;">中，已经有348个函数，但是数学中有一百多个函数，而“过载”则有90多个。现在让我们看一下Boost，那里</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">只有160个库</font></a><font style="vertical-align: inherit;">。 hur我...</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这一百零五种函数中，总有：信号处理，变化函数（25年后才达到解释PHP的水平，而在曾经蓬勃发展的Delphi中，它们仍然缺失）和大约50个字符串函数，如</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">printf（）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmm</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... JavaScript），</font><strong><font style="vertical-align: inherit;">strftime（）</font></strong><font style="vertical-align: inherit;">（...）和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scanf（）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（是常规的廉价替代品）。</font></font></p><br>
<a name="r4"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一直都有</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setjmp（）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">longjmp（）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它允许您实现其他语言中熟悉的异常机制，而不会超出可移植C的范围。</font><font style="vertical-align: inherit;">这里是关于它们的讨论</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Quake World</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，堆栈，寄存器，汇编器和其他</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物料</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，cherry是一个奇怪的统计数据（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">破坏者</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：Visual Studio并不是恒定的，因为三月的野兔，并且</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">投入</font></font></strong> <code>saneex.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了一半的时间）。</font></font></p><br>
<img src="https://habrastorage.org/webt/cx/fz/jq/cxfzjqci2ud94mxrbl5bwitnobo.png"><a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐藏文字</font></font></b><div class="spoiler_text"><p>¹  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>  .</p><br>
<p>² ,  . 270 ,   80&nbsp;—    .                ,     . <del><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">K&amp;R</a>&nbsp;—  , .</del></p><br>
<p>³  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  </a> ,     ANSI  ISO   ,   .    .</p><br>
<p>⁴ ,     «»  TinyURL,     URL         ,  і .    , -.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">urlex.org</a>.</p></div></div><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录：</font></font></strong></p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setjmp（）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font><strong><font style="vertical-align: inherit;">longjmp（）如何</font></strong><font style="vertical-align: inherit;">工作</font></font><strong><font style="vertical-align: inherit;"></font></strong></a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">寄存器，堆栈和所有所有</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混搭变量，或者用俄语破坏</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">挥发性</font></strong><font style="vertical-align: inherit;">预选赛</font></font><strong><font style="vertical-align: inherit;"></font></strong></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用IRL的案例</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能</font></font></a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试环境</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">庆祝活动的罪魁祸首-saneex.c</font></font></a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其余的“功能”</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> « »</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">:   </a></li>
</ul></li>
</ul><br>
<p>,   &nbsp;— <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">setjmp()</a>/<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">longjmp()</a>,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">setjmp.h</a>,      «SJLJ» (     ,     ).    C89 ,  -,   ,       (   &nbsp;—  ,  &nbsp;—  ).</p><br>
<p>   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> ,   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">zzeng</a>.   , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>¹, ,   , <del>    </del>       ( ,    ),      .</p><br>
<p>¹ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">CException</a>   &nbsp;—  60 , ,   ,  ANSI C,     <strong>finally</strong>   ,     .</p><br>
<p>,    &nbsp;—   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  </a>   ,    ,     ,   ,          ,     «       ». (,    ,       -  «»  ,   <strong>errno</strong>      . &nbsp;—   ,   .)</p><br>
<p>     ,  :</p><br>
<ul>
<li>     ,  -    ,             (  ,   &nbsp;—   ,  <code>if (error) return -1;</code>)</li>
<li> -     &nbsp;—     ,             ,    </li>
</ul><br>
<p>    . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">    </a>,   .</p><br>
<a name="sjlj"></a><br>
<h2 id="kak-rabotayut-setjmplongjmp">  <strong>setjmp()</strong>/<strong>longjmp()</strong></h2><br>
<a name="matan"></a><br>
<h3 id="registry-stek-i-vse-vse-vsehttplibruanekdoty9600txt">,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">--</a></h3><br>
<p>  , <strong>longjmp()</strong>&nbsp;—   <strong>goto</strong>,  <strong>setjmp()</strong>&nbsp;— <del> </del>     <strong>goto</strong>  run-time. , «<strong>goto</strong>  ». ,    ,  , <strong>goto</strong>,       &nbsp;—     ,   <strong>goto</strong>   .       ,   - ,     (  &nbsp;—         «try»).</p><br>
<p>,    ,    , ,  <code>setjmp.h</code>   <del>^W</del> ?  ,   <strong>setjmp()</strong>  ,    <strong>  </strong> (,  , ). ,    <del></del>       ,   <del> </del>    ,         .  .</p><br>
<p> , ,     <strong>setjmp()</strong>&nbsp;— <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">fork()</a>  POSIX    .  ,      *nix’ API       WinAPI,    &nbsp;—      ,       .   &nbsp;— « ,   ?»…   .</p><br>
<a name="r6"></a><br>
<p>,    ,    &nbsp;—  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>,      ()    .   &nbsp;—   (  Intel’&nbsp;— ), &nbsp;—  ( Intel’&nbsp;— -, ).  : </p><br>
<pre><code class="plaintext hljs">void sub(int s) {<font></font>
  char buf[256];<font></font>
  sub(2);<font></font>
}<font></font>
<font></font>
int main(int m) {<font></font>
  sub(1);<font></font>
}</code></pre><br>
<p>   &nbsp;— <strong>tcc</strong> (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Tiny C Compiler</a>)   - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">. </a>. <strong>tcc</strong>             .      <strong>sub()</strong> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> Intel</a>,    ): </p><br>
<pre><code class="plaintext hljs">sub     esp, 100h       ;     <font></font>
mov     eax, 2          ;  <font></font>
push    eax<font></font>
call    sub_401000      ;  sub()<font></font>
add     esp, 4          ;     (= cdecl)</code></pre><br>
<p>    :</p><br>
<img src="https://habrastorage.org/webt/xt/mz/lc/xtmzlclm6cujy23wvupm7cxmm1k.png"><br>
<p>     &nbsp;—      (  Intel… ,  ).     <strong>ESP</strong> (<strong>RSP</strong>  x86_64). <strong>setjmp()</strong>    <strong>ESP</strong>/<strong>RSP</strong>,    ,    <strong>jmp_buf</strong>,    .    <strong>longjmp()</strong>    (      )&nbsp;—    ,       ,    <strong>setjmp()</strong>,        ().    , «undo»   (,   ).</p><br>
<p>   <strong>setjmp()</strong>   <strong>jmp</strong>   <code>FEF8h</code> (<code>FDF0h</code>  ..&nbsp;—     )    ,  : </p><br>
<pre><code class="plaintext hljs">void sub(int s) {<font></font>
  char buf[256];<font></font>
  jmp_buf jmp;<font></font>
  setjmp(jmp);<font></font>
  sub(2);<font></font>
}</code></pre><br>
<p>, ,  ™:</p><br>
<ul>
<li>    (<strong>setjmp()</strong>  , <strong>longjmp()</strong>  ),  , ,     </li>
<li> ,   <strong>setjmp()</strong>,  ,  «»   &nbsp;—    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">undefined behavior</a> (   )</li>
</ul><br>
<a name="r1"></a><br>
<ul>
<li>     &nbsp;— ,  ,  !&nbsp;—  , ,     ,  <strong>setjmp()</strong>       ,   <strong>longjmp()</strong>  ,       <strong>setjmp()</strong></li>
</ul><br>
<a name="clob"></a><br>
<h3 id="zatiranie-peremennyh-ili-po-russki-clobbering">  , -, clobbering</h3><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>  . : </p><br>
<pre><code class="plaintext hljs">#include &lt;stdlib.h&gt;<font></font>
#include &lt;stdio.h&gt;<font></font>
#include &lt;setjmp.h&gt;<font></font>
<font></font>
int main(void) {<font></font>
  int i;<font></font>
  jmp_buf jmp;<font></font>
  i = rand();<font></font>
  if (setjmp(jmp) == 0) {<font></font>
    i = rand();<font></font>
    printf("%d\n", i);<font></font>
    longjmp(jmp, 1);<font></font>
  } else {<font></font>
    printf("%d\n", i);<font></font>
  }<font></font>
}</code></pre><br>
<p> :      ?</p><br>
<p> :    . <del>-!</del></p><br>
<p>,     <strong>gcc</strong>.    <strong>-O0</strong>,    ,       : </p><br>
<pre><code class="plaintext hljs">; int main(void) {<font></font>
  push    ebp             ;  ( stack frame)<font></font>
  mov     ebp, esp        ; EBP     ESP (  )<font></font>
  sub     esp, E0h<font></font>
  ...<font></font>
  call    _rand           ;    EAX<font></font>
  mov     [ebp-D4h], eax  ;  i = rand();  i   (EBP-D4h)<font></font>
  ...<font></font>
; if (... == 0) {         ;  setjmp()      <font></font>
  call    _rand<font></font>
  mov     [ebp-D4h], eax  ;  i = rand();  <font></font>
; printf("%d\n", i);<font></font>
  mov     eax, [ebp-D4h]  ;  i    <font></font>
  mov     esi, eax<font></font>
  lea     edi, format     ;   "%d\n"<font></font>
  mov     eax, 0<font></font>
  call    _printf<font></font>
  ...<font></font>
; } else {                ;    setjmp()  <font></font>
  mov     eax, [ebp-D4h]  ;   i,    <font></font>
  mov     esi, eax<font></font>
  lea     edi, format     ; "%d\n"<font></font>
  mov     eax, 0<font></font>
  call    _printf</code></pre><br>
<p> ,       <strong>i</strong>   (  <code>EBP - D4h</code>).       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>, :</p><br>
<ul>
<li>   256 <strong>char</strong>   <strong>int</strong>  <strong>jmp_buf</strong>,      4  200  ,  20   -  ,         224  (E0h)  100h,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a></li>
<li><strong>ESP</strong>    <strong>setjmp()</strong>  <code>FFF8h - E0h = FF18h</code> ( <code>FEF8h</code>),      <strong>jmp</strong><br>
<ul>
<li>,   ,     </li>
</ul></li>
<li>   <strong>i</strong>,     <strong>i</strong>   (  <code>FF18h</code>)</li>
<li><strong>longjmp()</strong>      <code>FF18h</code>, ,    <strong>i</strong>     ,  - ,      (<strong>jmp</strong>),   <strong>main()</strong> (  )<br>
<ul>
<li>   <strong>ESP</strong>    ,  <strong>longjmp()</strong>       ,   <strong>main()</strong></li>
</ul></li>
</ul><br>
<p>      <strong>-O1</strong>,   : </p><br>
<pre><code class="plaintext hljs">;   stack frame  ,   ESP <font></font>
  sub     esp, E8h<font></font>
  ...<font></font>
  call    _rand<font></font>
  mov     [esp+E8h-DCh], eax  ; i = rand();  ,    -O0<font></font>
  ...<font></font>
; -O1 - ,   else  , <font></font>
; if (setjmp() == 0) ( - ),  <font></font>
;  ;       <font></font>
; if (... == 0) {<font></font>
  call    _rand<font></font>
  mov     esi, eax            ; !  i  <font></font>
; printf("%d\n", i);<font></font>
  lea     edi, format     ; "%d\n"<font></font>
  mov     eax, 0<font></font>
  call    _printf<font></font>
  ...<font></font>
; } else {<font></font>
  mov     esi, [esp+E8h-DCh]  ; !  i  <font></font>
  lea     edi, format     ; "%d\n"<font></font>
  mov     eax, 0<font></font>
  call    _printf</code></pre><br>
<p>,  <strong>-O1</strong> <strong>gcc</strong>     : </p><br>
<pre><code class="plaintext hljs">test.c:6:11: warning: variable ‘i’ might be clobbered by ‘longjmp’ or ‘vfork’ [-Wclobbered]</code></pre><br>
<p>   ?  <strong>i</strong>   ,     ( <strong>if</strong>) <strong>gcc</strong>,   <strong>i</strong>     <strong>printf()</strong>,      <strong>ESI</strong>,     ( <strong>ESI</strong>     <strong>printf()</strong>, . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ABI, . 22</a>&nbsp;— RDI (<strong>format</strong>), RSI (<strong>i</strong>),&nbsp;…). - :</p><br>
<ul>
<li>    <code>ESP + E8h - DCh</code>    <strong>rand()</strong></li>
<li> <strong>ESI</strong>   </li>
<li><strong>printf()</strong> ( )  ()   </li>
<li><strong>longjmp()</strong>   ,     ,         </li>
<li>  <strong>printf()</strong> ( <strong>else</strong>)  ,  ,  ,   <br>
<ul>
<li>       <strong>ESI</strong>,          (,  <strong>printf()</strong>   <strong>longjmp()</strong>)</li>
</ul></li>
</ul><br>
<a name="r2"></a><br>
<p>,      : </p><br>
<pre><code class="plaintext hljs">stack[i] = rand();          // i = rand();   (1)<font></font>
if (setjmp(jmp) == 0) {<font></font>
  ESI = rand();             // i = rand();   (2)<font></font>
  printf("%d\n", ESI);      //   (2)<font></font>
  longjmp(jmp, 1);          // <font></font>
} else {<font></font>
  printf("%d\n", stack[i]); //   (1)<font></font>
  //     :<font></font>
  printf("%d\n", ESI);      //  ,   -<font></font>
                            // "" ( printf()  longjmp())<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p> ,   ,  <strong>gcc</strong>   <strong>rand()</strong>     <strong>ESI</strong>     (  <strong>-O3</strong>).  <abbr title="StackOverflow.com">SO</abbr> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>,    x86_64 (    )   ,  <strong>EAX</strong>.     ?  ,  <strong>gcc</strong>  <strong>printf()</strong>  <strong>else</strong>  <strong>longjmp()</strong>,     <strong>rand()</strong>   <strong>printf()</strong>&nbsp;—   , <strong>i</strong>      .</p><br>
<p>       &nbsp;—   .</p></div></div><br>
<a name="vol"></a><br>
<h3 id="kvalifikator-volatile"> <strong>volatile</strong></h3><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a> « »&nbsp;—  <strong>volatile</strong> (&nbsp;— «»).        ,     ,  ,    : </p><br>
<pre><code class="plaintext hljs">volatile int i;</code></pre><br>
<p>   <strong>-O1</strong>    <strong>if</strong>: </p><br>
<pre><code class="plaintext hljs">; :<font></font>
  call    _rand<font></font>
  mov     esi, eax<font></font>
; :<font></font>
  call    _rand<font></font>
  mov     [rsp+E8h-DCh], eax<font></font>
  mov     esi, [rsp+E8h-DCh]<font></font>
;    :<font></font>
  call    _rand<font></font>
  mov     esi, eax<font></font>
  mov     [rsp+E8h-DCh], eax</code></pre><br>
<p> ,      (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>): </p><br>
<pre><code class="plaintext hljs">if (setjmp(jmp) == 0) {<font></font>
  ESI = stack[i] = rand();</code></pre><br>
<a name="irl"></a><br>
<h3 id="sluchai-ispolzovaniya-abbr-titlein-real-lifeirlabbr">  <abbr title="在真实生活中">IRL</abbr></h3><br>
<p>,    &nbsp;—             -<strong>volatile</strong>   ,  SJLJ          .        &nbsp;—  ,  SJLJ   <del>  </del>  :</p><br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>        (   &nbsp;—     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ldir</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>)</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">alexkalmuk</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-     SJLJ</a> (+ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>),  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">dzeban</a>&nbsp;—  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  Linux</a></li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a> (:     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Atakua</a>),  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   x86emu</a> (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">NWOcs</a>)  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> libpng</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">libjpeg-turbo</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>)</li>
<li> 2017 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Skapix</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  <strong>pthreads</strong></a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">kutelev</a>&nbsp;—  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Symbian</a></li>
<li>  <strong>Quake World</strong>    &nbsp;— . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">PatientZero</a> , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a> (     )</li>
</ul><br>
<p> ,   ,  &nbsp;—      ,    «  »,   ,        ,  -    (). , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">DrMefistO</a>.</p><br>
<p>  <strong>Quake World</strong>     <strong>WinMain()</strong>,      <strong>jmp_buf</strong>,       ,    « <strong>continue</strong>»: </p><br>
<pre><code class="plaintext hljs">// WinQuake/host.c<font></font>
jmp_buf         host_abortserver;<font></font>
<font></font>
void Host_EndGame (char *message, ...)<font></font>
{<font></font>
  ...<font></font>
<font></font>
  if (cls.demonum != -1)<font></font>
    CL_NextDemo ();<font></font>
  else<font></font>
    CL_Disconnect ();<font></font>
<font></font>
  longjmp (host_abortserver, 1);<font></font>
}<font></font>
<font></font>
void Host_Error (char *error, ...)<font></font>
{<font></font>
  ...<font></font>
<font></font>
  if (cls.state == ca_dedicated)<font></font>
    Sys_Error ("Host_Error: %s\n",string);  // dedicated servers exit<font></font>
<font></font>
  CL_Disconnect ();<font></font>
  cls.demonum = -1;<font></font>
<font></font>
  inerror = false;<font></font>
<font></font>
  longjmp (host_abortserver, 1);<font></font>
}<font></font>
<font></font>
void _Host_Frame (float time)<font></font>
{<font></font>
  static double           time1 = 0;<font></font>
  static double           time2 = 0;<font></font>
  static double           time3 = 0;<font></font>
  int                     pass1, pass2, pass3;<font></font>
<font></font>
  if (setjmp (host_abortserver) )<font></font>
    return;                 // something bad happened, or the server disconnected<font></font>
<font></font>
  ...<font></font>
}<font></font>
<font></font>
// QW/client/sys_win.c<font></font>
int WINAPI WinMain (...)<font></font>
{<font></font>
  ...<font></font>
<font></font>
  while (1)<font></font>
  {<font></font>
    ...<font></font>
    newtime = Sys_DoubleTime ();<font></font>
    time = newtime - oldtime;<font></font>
    Host_Frame (time);<font></font>
    oldtime = newtime;<font></font>
  }<font></font>
<font></font>
  /* return success of application */<font></font>
  return TRUE;<font></font>
}</code></pre><br>
<a name="perf"></a><br>
<h2 id="proizvoditelnost"></h2><br>
<p>  ,     &nbsp;—     .  ,   <strong>setjmp()</strong>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">glibc</a> ,        .   :</p><br>
<ul>
<li>  ,     ,  SJLJ/<code>saneex.c</code>          </li>
<li> -…- (<del>,    </del>) ,    - &nbsp;—     ,     </li>
<li>  ,   &nbsp;—   zero-cost exceptions (, , zero-cost <strong>try</strong>),         <strong>try</strong>,        ()&nbsp;—       <strong>goto</strong>   , ,   ,     «» , -,  </li>
</ul><br>
<p>«» zero-cost exceptions     ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">volatile</a>-,     ,     (      <strong>longjmp()</strong>).   ,         :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> Windows</a>  <abbr title="结构化异常处理">SEH</abbr>  <abbr title="向量异常处理">VEH</abbr>,    XP.</li>
<li> <strong>gcc</strong>    &nbsp;—    SJLJ,  DWARF,        (DWARF    <strong>clang</strong>).    .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">zzeng</a>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">dwarfstd.org</a>.</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">nuit</a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">libunwind</a>,      &nbsp;—        ( ).</li>
</ul><br>
<p>,  <code>saneex.c</code>     zero-cost ( &nbsp;—  ),     <strong>setjmp()</strong>,   ? ,  ?    &nbsp;— .</p><br>
<a name="bench"></a><br>
<h3 id="testovaya-sreda"> </h3><br>
<p>    « »,   <strong>main()</strong>   100      <strong>try</strong>/<strong>catch</strong>      <strong>throw()</strong>.</p><br>
<p>   C:</p><br>
<pre><code class="plaintext hljs">#include &lt;stdio.h&gt;<font></font>
#include &lt;time.h&gt;<font></font>
#include "saneex.h"<font></font>
<font></font>
int main(void) {<font></font>
  for (int i = 0; i &lt; 100000; i++) {<font></font>
    try {<font></font>
      //  ("" = ):<font></font>
      throw(msgex("A quick fox jumped over a red dog and a nyancat was spawned"));<font></font>
      //  ("" = ):<font></font>
      time(NULL);<font></font>
    } catchall {<font></font>
      fprintf(stderr, "%s\n", curex().message);<font></font>
    } endtry<font></font>
  }<font></font>
}</code></pre><br>
<p>  ++ (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>,        <code>cerr &lt;&lt;</code>  <strong>fprintf()</strong>):</p><br>
<pre><code class="plaintext hljs">#include &lt;iostream&gt;<font></font>
#include &lt;vector&gt;<font></font>
#include &lt;stdexcept&gt;<font></font>
#include &lt;time.h&gt;<font></font>
<font></font>
int main() {<font></font>
  std::vector&lt;int&gt; vec{ 3, 4, 3, 1 };<font></font>
<font></font>
  for (int i = 0; i &lt; 100000; i++) {<font></font>
    try {<font></font>
      //  ("" = ):<font></font>
      int i{ vec.at(4) };<font></font>
      //  ("" = ):<font></font>
      time(NULL);<font></font>
    }<font></font>
    catch (std::out_of_range &amp; e) {<font></font>
      // &lt;&lt;  fprintf()     25-50%<font></font>
      //std::cerr &lt;&lt; "Accessing a non-existent element: " &lt;&lt; e.what() &lt;&lt; '\n';<font></font>
      fprintf(stderr, "%s\n", e.what());<font></font>
    }<font></font>
    catch (std::exception &amp; e) {<font></font>
      //std::cerr &lt;&lt; "Exception thrown: " &lt;&lt; e.what() &lt;&lt; '\n';<font></font>
      fprintf(stderr, "%s\n", e.what());<font></font>
    }<font></font>
    catch (...) {<font></font>
      //std::cerr &lt;&lt; "Some fatal error\n";<font></font>
      fprintf(stderr, "Some fatal error");<font></font>
    }<font></font>
  }<font></font>
<font></font>
  return 0;<font></font>
}</code></pre><br>
<p>        ( 64-):</p><br>
<ul>
<li>Windows 10 2019 LTSC  PowerShell   <code>Measure-Command { test.exe 2&gt;$null }</code></li>
<li> Live CD <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Ubuntu</a>    <strong>time</strong></li>
</ul><br>
<p>      Windows   <strong>__try</strong>/<strong>__except</strong>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">   </a>:</p><br>
<pre><code class="plaintext hljs">#include &lt;windows.h&gt;<font></font>
#include &lt;stdio.h&gt;<font></font>
#include &lt;vector&gt;<font></font>
<font></font>
int filterExpression(EXCEPTION_POINTERS* ep) {<font></font>
  ep-&gt;ContextRecord-&gt;Eip += 8;<font></font>
  return EXCEPTION_EXECUTE_HANDLER;<font></font>
}<font></font>
<font></font>
int main() {<font></font>
  static int zero;<font></font>
  for (int i = 0; i &lt; 100000; i++) {<font></font>
    __try {<font></font>
      zero = 1 / zero;<font></font>
      __asm {<font></font>
        nop<font></font>
        nop<font></font>
        nop<font></font>
        nop<font></font>
        nop<font></font>
        nop<font></font>
        nop<font></font>
      }<font></font>
      printf("Past the exception.\n");<font></font>
    }<font></font>
    __except (filterExpression(GetExceptionInformation())) {<font></font>
      printf("Handler called.\n");<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br>
<p>      &nbsp;—  , : </p><br>
<pre><code class="plaintext hljs">error C2712: Cannot use __try in functions that require object unwinding</code></pre><br>
<p>          ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>.   1100-1300  (Debug  Release, x86)&nbsp;— ,     <abbr title="视觉工作室">VS</abbr>,    ,     g++.</p><br>
<a name="benchres"></a><br>
<h3 id="rezultaty"></h3><br>
<pre><code class="plaintext hljs">№                     ()¹           saneex <font></font>
<font></font>
1.  VS 2019 v16.0.0   Debug     x64   saneex.c        9713  / 8728  = 1.1    1.8 / 1.8<font></font>
2.  VS 2019 v16.0.0   Debug     x64   saneex.c       95    / 46    = 2      4.5 / 2.3<font></font>
3.  VS 2019 v16.0.0   Debug     x64   C++             5449  / 4750² = 1.6<font></font>
4.  VS 2019 v16.0.0   Debug     x64   C++            21    / 20    = 1<font></font>
5.  VS 2019 v16.0.0   Release   x64   saneex.c        8542³ / 182   = 47     1.8 / 0.4<font></font>
6.  VS 2019 v16.0.0   Release   x64   saneex.c       80³   / 23    = 3.5    8   / 1.8<font></font>
7.  VS 2019 v16.0.0   Release   x64   C++             4669³ / 420   = 11<font></font>
8.  VS 2019 v16.0.0   Release   x64   C++            10³   / 13    = 0.8<font></font>
9.  gcc 9.2.1         -O0       x64   saneex.c        71    / 351   = 0.2    0.2 / 0.6<font></font>
10. gcc 9.2.1         -O0       x64   saneex.c       6     / 39    = 0.2    1.5 / 1.1<font></font>
11. g++ 9.2.1         -O0       x64   C++             378   / 630   = 0.6<font></font>
12. g++ 9.2.1         -O0       x64   C++            4     / 37    = 0.1<font></font>
13. gcc 9.2.1         -O3       x64   saneex.c        66    / 360   = 0.2    0.2 / 0.6<font></font>
14. gcc 9.2.1         -O3       x64   saneex.c       5     / 23    = 0.2    1   / 0.6<font></font>
15. g++ 9.2.1         -O3       x64   C++             356   / 605   = 0.6<font></font>
16. g++ 9.2.1         -O3       x64   C++            5     / 38    = 0.1</code></pre><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p>¹   <strong></strong>       Windows 7 SP1 x64  VS 2017 v15.9.17  gcc  cygwin.</p><br>
<p>²   :  <strong>fprintf()</strong>   <code>cerr &lt;&lt;</code>,    <strong></strong>  3 : 1386/1527 .</p><br>
<p>³ VS          ,        .</p></div></div><br>
<p> … :</p><br>
<ul>
<li>      /    «» VS.   &nbsp;— .</li>
<li> <code>cerr &lt;&lt;</code>  <strong>fprintf()</strong>       VS       3-4  ( 3). <abbr title="我究竟做错了什么"></abbr>?</li>
<li>      <strong>try</strong>   <strong>throw</strong>&nbsp;—  (4-28   100  ).</li>
<li>  «» Debug  VS,    <code>saneex.c</code> ,      ( 2.3   VS,  5   <strong>gcc</strong>/g++),  <strong>try</strong>  <strong>throw</strong>&nbsp;— ,      .   !</li>
</ul><br>
<p>   …    .    !</p><br>
<p>    use-case&nbsp;—    <strong>try</strong>    <strong>throw</strong> (« ,  »),        <strong>setjmp()</strong>,   ,   ,    ,   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  </a>,      ,    <strong>setjmp()</strong>       OpenBSD   (1.45)&nbsp;—  Solaris.     2005 .  «»&nbsp;—     ,      .</p><br>
<p>,  …</p><br>
<a name="saneex"></a><br>
<h2 id="vinovnik-torzhestva-saneexc"> &nbsp;— <code>saneex.c</code></h2><br>
<p>,     <abbr title="图片吸引注意"></abbr>:</p><br>
<ul>
<li>    Visual Studio</li>
<li>   , <strong>throw()</strong>   , <strong>finally</strong>   <strong>catch</strong>   (  )</li>
<li>       (  <strong>static</strong>)</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>- (<strong>__thread</strong>/<strong>_Thread_local</strong>)</li>
<li> public domain (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">CC0</a>)</li>
</ul><br>
<a name="r5"></a><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">    GitHub</a>.       ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>.    <code>saneex-demo.c</code>  : </p><br>
<pre><code class="plaintext hljs">01.    #include &lt;stdio.h&gt;<font></font>
02.    #include "saneex.h"<font></font>
03.<font></font>
04.    int main(void) {<font></font>
05.      sxTag = "SaneC's Exceptions Demo";<font></font>
06.<font></font>
07.      try {<font></font>
08.        printf("Enter a message to fail with: [] [1] [2] [!] ");<font></font>
09.<font></font>
10.        char msg[50];<font></font>
11.        thrif(!fgets(msg, sizeof(msg), stdin), "fgets() error");<font></font>
12.<font></font>
13.        int i = strlen(msg) - 1;<font></font>
14.        while (i &gt;= 0 &amp;&amp; msg[i] &lt;= ' ') { msg[i--] = 0; }<font></font>
15.<font></font>
16.        if (msg[0]) {<font></font>
17.          errno = atoi(msg);<font></font>
18.          struct SxTraceEntry e = newex();<font></font>
19.          e = sxprintf(e, "Your message: %s", msg);<font></font>
20.          e.uncatchable = msg[0] == '!';<font></font>
21.          throw(e);<font></font>
22.        }<font></font>
23.<font></font>
24.        puts("End of try body");<font></font>
25.<font></font>
26.      } catch (1) {<font></font>
27.        puts("Caught in catch (1)");<font></font>
28.        sxPrintTrace();<font></font>
29.<font></font>
30.      } catch (2) {<font></font>
31.        puts("Caught in catch (2)");<font></font>
32.        errno = 123;<font></font>
33.        rethrow(msgex("calling rethrow() with code 123"));<font></font>
34.<font></font>
35.      } catchall {<font></font>
36.        printf("Caught in catchall, message is: %s\n", curex().message);<font></font>
37.<font></font>
38.      } finally {<font></font>
39.        puts("Now in finally");<font></font>
40.<font></font>
41.      } endtry<font></font>
42.<font></font>
43.      puts("End of main()");<font></font>
44.    }</code></pre><br>
<p>   ,          :</p><br>
<ul>
<li>   &nbsp;—    ,   : </li>
</ul><br>
<pre><code class="plaintext hljs">End of try body<font></font>
Now in finally<font></font>
End of main()</code></pre><br>
<ul>
<li>  ,   ,        (<strong>1</strong>),       <code>catch (1)</code> (26.),    : </li>
</ul><br>
<pre><code class="plaintext hljs">Caught in catch (1)<font></font>
Your message: 1 hello, habr!<font></font>
    ...at saneex-demo.c:18, code 1<font></font>
Now in finally<font></font>
End of main()</code></pre><br>
<ul>
<li>  ,     (30.),   (  ,   )       (33.),       : </li>
</ul><br>
<pre><code class="plaintext hljs">Caught in catch (2)<font></font>
Now in finally<font></font>
<font></font>
Uncaught exception (code 123) - terminating. Tag: SaneC's Exceptions Demo<font></font>
Your message: 2 TM! kak tam blok4ain?<font></font>
    ...at saneex-demo.c:18, code 2<font></font>
calling rethrow() with code 123<font></font>
    ...at saneex-demo.c:33, code 123<font></font>
rethrown by ENDTRY<font></font>
    ...at saneex-demo.c:41, code 123</code></pre><br>
<ul>
<li>  <code>!</code>,    «» (<strong>uncatchable</strong>; 20.)&nbsp;—      <strong>try</strong>   ,    ( <strong>catch</strong>,   <strong>finally</strong>),         &nbsp;—   <strong>abort()</strong>: </li>
</ul><br>
<pre><code class="plaintext hljs">Caught in catch (1)<font></font>
Your message: ! it is a good day to die<font></font>
    ...UNCATCHABLE at saneex-demo.c:18, code 0<font></font>
Now in finally<font></font>
<font></font>
Uncaught exception (code 0) - terminating. Tag: SaneC's Exceptions Demo<font></font>
Your message: ! it is a good day to die<font></font>
    ...UNCATCHABLE at saneex-demo.c:18, code 0<font></font>
UNCATCHABLE rethrown by ENDTRY<font></font>
    ...at saneex-demo.c:41, code 0</code></pre><br>
<ul>
<li>,   ,     <strong>catchall</strong> (35.),      : </li>
</ul><br>
<pre><code class="plaintext hljs">Caught in catchall, message is: Your message: 3 we need more gold<font></font>
Now in finally<font></font>
End of main()</code></pre><br>
<a name="sexfeat"></a><br>
<h3 id="ostalnye-fichi"> «»</h3><br>
<a name="sexmt"></a><br>
<p><strong>.</strong>    ,       ( MSVC¹),  C11             (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">TLS</a>): </p><br>
<pre><code class="plaintext hljs">#define SX_THREAD_LOCAL _Thread_local</code></pre><br>
<p>¹    Microsoft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>   open source,  <del> </del> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>  ,   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">8  </a>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>.</p><br>
<p><strong>sxTag</strong> (05.)&nbsp;— ,        <strong>stderr</strong>.  &nbsp;—     (<strong>__DATE__</strong> <strong>__TIME__</strong>).</p><br>
<p><strong> SxTraceEntry</strong> (  stack trace).    &nbsp;—   <code>(struct SxTraceEntry) {...}</code>:</p><br>
<ul>
<li><code>newex()</code>&nbsp;—    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>;  <strong>__FILE__</strong>, <strong>__LINE__</strong>    = <strong>errno</strong> (       ,     <strong>fgets()</strong>; 11.)<br>
<ul>
<li>  1  1 ( <strong>setjmp()</strong>  0    ),  <code>catch (0)</code>   </li>
</ul></li>
<li><code>msgex(m)</code>&nbsp;—  <strong>newex()</strong>,      ( )</li>
<li><code>exex(m, e)</code>&nbsp;—  <strong>msgex()</strong>,       ;      <strong>free()</strong> : </li>
</ul><br>
<pre><code class="plaintext hljs">try {<font></font>
  TimeoutException *e = malloc(sizeof(*e));<font></font>
  e-&gt;elapsed = timeElapsed;<font></font>
  e-&gt;limit = MAX_TIMEOUT;<font></font>
  errno = 146;<font></font>
  throw(exex("Connection timed out", e));<font></font>
} catch (146) {<font></font>
  printf("%s after %d\n", curex().message,<font></font>
    //   void *SxTraceEntry.extra:<font></font>
    ((TimeoutException *) curex().extra)-&gt;elapsed);<font></font>
} endtry</code></pre><br>
<p>, ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">designated initializers</a>     C99 (  Visual Studio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">2013+</a>): </p><br>
<pre><code class="plaintext hljs">throw( (struct SxTraceEntry) {.message = "kaboom!"} );</code></pre><br>
<p><strong> :</strong></p><br>
<ul>
<li><code>throw(e)</code>&nbsp;—   <strong>SxTraceEntry</strong></li>
<li><code>rethrow(e)</code>&nbsp;—  <strong>throw()</strong>,     stack trace;     <strong>catch</strong>/<strong>catchall</strong></li>
<li><code>thrif(x, m)</code>&nbsp;— ;  <code>if (x)</code>  <strong>SxTraceEntry</strong>   <strong>x</strong> + <strong>m</strong>  «» </li>
<li><code>thri(x)</code>&nbsp;—  <strong>thrif()</strong>,    <strong>m</strong></li>
</ul><br>
<p>    «»      &nbsp;—   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>  <strong>fgets()</strong> (11.),      .   <strong>fgets()</strong>      (    <abbr title="文件结束">EOF</abbr>: <code>./a.out &lt;/dev/null</code>),         .   :</p><br>
<pre><code class="plaintext hljs">thri(read(0xBaaD, buf, nbyte));<font></font>
// errno = 9, "Bad file descriptor"<font></font>
// Assertion error: read(0xBaaD, buf, nbyte);</code></pre><br>
<a name="sexpit"></a><br>
<h3 id="i-osobennosti-realizacii">… « »</h3><br>
<p>     (  !):</p><br>
<ul>
<li>    <strong>endtry</strong>&nbsp;—        ( <strong>try</strong>)   <br>
<ul>
<li>  ,  , ,  <strong>try</strong>   <code>{</code>,  <strong>endtry</strong>  </li>
</ul></li>
<li><strong>  return  try  endtry</strong>&nbsp;—    ,         ;    <abbr title="拉取要求">PR</abbr><br>
<ul>
<li>, <strong>goto</strong>      ,    - ? <code>&lt;/sarcasm&gt;</code></li>
</ul></li>
</ul><br>
<p>  «»,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a> <strong>volatile</strong>. «» &nbsp;—       (. <strong>longjmp()</strong>), ,        <strong>try</strong>,        <strong>catch</strong>/<strong>catchall</strong>/<strong>finally</strong>   <strong>endtry</strong>,      <strong>volatile</strong>.      .   : </p><br>
<pre><code class="plaintext hljs">int foo = 1;<font></font>
try {<font></font>
  foo = 2;<font></font>
  //    foo<font></font>
} catchall {<font></font>
  //    !<font></font>
} finally {<font></font>
  //   !<font></font>
} endtry<font></font>
//   !</code></pre><br>
<p> <strong>volatile</strong>     : </p><br>
<pre><code class="plaintext hljs">volatile int foo = 1;<font></font>
try {<font></font>
  ...</code></pre><br>
<a name="sexside"></a><br>
<h3 id="itog-kak-eto-rabotaet">:   </h3><br>
<p>     - () :</p><br>
<ul>
<li><code>struct SxTryContext</code>&nbsp;—    <strong>try</strong>,     &nbsp;—  , <strong>jmp_buf</strong>    ; ,   : </li>
</ul><br>
<pre><code class="plaintext hljs">try {<font></font>
  try {<font></font>
    //  <font></font>
  } endtry<font></font>
} endtry</code></pre><br>
<ul>
<li><code>struct SxTraceEntry</code>&nbsp;—  stack trace,   ,      ;      ,   <strong>try</strong>: </li>
</ul><br>
<pre><code class="plaintext hljs">try {         //  SxTryContext<font></font>
  try {       //  SxTryContext<font></font>
              //  SxTraceEntry<font></font>
    throw(msgex(" !"));<font></font>
              //  SxTraceEntry<font></font>
  } catchall {<font></font>
              //  SxTraceEntry<font></font>
    rethrow(msgex("   !"));<font></font>
              //  SxTraceEntry (*)<font></font>
  } endtry<font></font>
} endtry</code></pre><br>
<p>     <strong>rethrow()</strong>  <strong>throw()</strong>,   <strong>SxTraceEntry</strong> <code>(*)</code>   ,  &nbsp;—    (stack trace  ).  ,        <code>sxAddTraceEntry(e)</code>.</p><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">try</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和其他结构元素是宏（-您的</font></font><abbr title="队长明显"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K.O.</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><code>{ }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后面的</font><font style="vertical-align: inherit;">括号</font><font style="vertical-align: inherit;">是可选的。</font><font style="vertical-align: inherit;">最后，一切都归结为以下伪代码：</font></font></p><br>
<pre><code class="plaintext hljs">try {                             int _sxLastJumpCode = setjmp(add_context()¹);<font></font>
                                  bool handled = false;<font></font>
                                  if (_sxLastJumpCode == 0) {<font></font>
  throw(msgex("Mama mia!"));        clearTrace();<font></font>
                                    sxAddTraceEntry(msgex(...));<font></font>
                                    if (count_contexts() == 0) {<font></font>
                                      fprintf(stderr, "Shurik, vs propalo!");<font></font>
                                      sxPrintTrace();<font></font>
                                      exit(curex().code);<font></font>
                                    } else {<font></font>
                                      longjmp(top_context());<font></font>
                                    }<font></font>
} catch (9000) {                  } else if (_sxLastJumpCode == 9000) {<font></font>
                                    handled = true;<font></font>
} catchall {                      } else {<font></font>
                                    handled = true;<font></font>
} finally {                       }<font></font>
                                  //    finally { }<font></font>
} endtry                          remove_context();<font></font>
                                  if (!handled) {<font></font>
                                    //    throw()<font></font>
                                  }</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¹带</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的名称</font><font style="vertical-align: inherit;">未在库中使用，它们是抽象的。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我认为，在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SJLJ的工作原理</font><font style="vertical-align: inherit;">进行</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">详细说明</font></a><font style="vertical-align: inherit;">之后</font><font style="vertical-align: inherit;">，这里不需要评论其他内容，因此，让我请您发言。</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN491054/index.html">如何使用PKCS＃11令牌与GPG密钥签署电子邮件通信</a></li>
<li><a href="../zh-CN491056/index.html">Ampere Altra-世界上第一个80核ARM处理器</a></li>
<li><a href="../zh-CN491058/index.html">死亡率，死亡率，冠状病毒和matan</a></li>
<li><a href="../zh-CN491062/index.html">Angular：创建自定义表单元素并将表单状态传递给它</a></li>
<li><a href="../zh-CN491076/index.html">在NestJS中巧妙地使用RabbitMQ</a></li>
<li><a href="../zh-CN491086/index.html">Webix JavaScript库通过初学者的眼光。第6部分。服务器交互</a></li>
<li><a href="../zh-CN491088/index.html">GitHub：OSINT的新开源库</a></li>
<li><a href="../zh-CN491090/index.html">在C＃中将文本文档转换为xml</a></li>
<li><a href="../zh-CN491092/index.html">Bandicoot如何崩溃导致Playstation崩溃</a></li>
<li><a href="../zh-CN491094/index.html">在现代Linux版本上安装Firebird 3：CentOS8和Ubuntu 19</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>