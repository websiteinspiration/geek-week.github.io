<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüë¶‚Äçüë¶ üë∑üèº üëÇüèø Automatisation du r√©seau. Cas de vie üòî ü§¨ üñïüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 
 
 Dans cet article, nous aimerions parler de l'automatisation de l'infrastructure r√©seau. Un sch√©ma de r√©seau fonctionnel sera pr√©sen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Automatisation du r√©seau. Cas de vie</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496152/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous aimerions parler de l'automatisation de l'infrastructure r√©seau. </font><font style="vertical-align: inherit;">Un sch√©ma de r√©seau fonctionnel sera pr√©sent√©, qui op√®re dans une petite mais tr√®s fi√®re entreprise. </font><font style="vertical-align: inherit;">Toutes les correspondances avec du mat√©riel r√©seau r√©el sont al√©atoires. </font><font style="vertical-align: inherit;">Nous allons consid√©rer un cas survenu dans ce r√©seau, qui pourrait conduire √† une fermeture de l'entreprise pendant longtemps et √† de graves pertes financi√®res. </font><font style="vertical-align: inherit;">La solution de ce cas s'inscrit tr√®s bien dans le concept d '"Automatisation de l'infrastructure r√©seau". </font><font style="vertical-align: inherit;">Avec l'aide d'outils d'automatisation, nous montrerons comment vous pouvez r√©soudre efficacement des probl√®mes complexes en peu de temps et r√©fl√©chirons √† la raison pour laquelle ces t√¢ches sont plus prometteuses √† r√©soudre de cette mani√®re et non autrement </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(via la console)</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avertissement</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos principaux outils d'automatisation sont Ansible (comme moyen d'automatisation) et Git (comme r√©f√©rentiel des playbooks d'Ansible). Je veux imm√©diatement faire une r√©servation que ce n'est pas un article introductif o√π nous parlons de la logique d'Ansible ou Git, et expliquer des choses de base (par exemple, quels sont les r√¥les \ t√¢ches \ modules \ fichiers d'inventaire \ variables dans Ansible, ou ce qui se passe lorsque vous entrez des commandes push git ou git commit). Cette histoire n'est pas sur la fa√ßon dont vous pouvez vous entra√Æner dans Ansible, le configurer sur un √©quipement NTP ou SMTP. C'est une histoire sur la fa√ßon dont vous pouvez r√©soudre rapidement et de pr√©f√©rence sans erreur un probl√®me de r√©seau. Il est √©galement souhaitable d'avoir une bonne id√©e du fonctionnement du r√©seau, en particulier de la pile de protocoles TCP / IP, OSPF, BGP. Le choix d'Ansible et de Git est √©galement hors de question. Si vous avez toujours le choix d'une solution sp√©cifique,nous vous recommandons fortement de lire le livre Network Programmability and Automation. Comp√©tences pour l'ing√©nieur r√©seau de nouvelle g√©n√©ration ¬ªpar Jason Edelman, Scott S. Lowe et Matt Oswalt.</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant au point.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulation du probl√®me</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez une situation: √† 3 heures du matin, vous dormez profond√©ment et r√™vez. </font><font style="vertical-align: inherit;">L'appel au t√©l√©phone. </font><font style="vertical-align: inherit;">Le directeur technique appelle: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Oui? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - ###, ####, #####, le cluster de pare-feu est tomb√© et ne monte pas !!! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous vous frottez les yeux, essayez de r√©aliser ce qui se passe et imaginez comment une telle chose aurait pu arriver. </font><font style="vertical-align: inherit;">Dans le tube, on entend les cheveux se d√©chirer sur la t√™te du r√©alisateur, et il demande de rappeler, car le g√©n√©ral l'appelle en deuxi√®me ligne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s une demi-heure, vous avez recueilli les premi√®res notes introductives du quart de travail, r√©veill√© toutes les personnes avec qui vous pourriez vous r√©veiller. </font><font style="vertical-align: inherit;">En cons√©quence, le directeur technique n'a pas menti, tout est ainsi, le groupe principal de pare-feu est tomb√©, et aucun geste de base ne le ram√®ne √† ses sens. </font><font style="vertical-align: inherit;">Tous les services que l'entreprise propose ne fonctionnent pas.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choisissez un probl√®me √† votre go√ªt, tout le monde se souviendra de quelque chose de diff√©rent. </font><font style="vertical-align: inherit;">Par exemple, apr√®s une mise √† jour du jour au lendemain, en l'absence d'une lourde charge, tout a bien fonctionn√© et tous les satisfaits se sont couch√©s. </font><font style="vertical-align: inherit;">Le trafic est all√© et les tampons d'interface ont commenc√© √† d√©border en raison d'un bogue dans le pilote de la carte r√©seau. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La situation peut bien d√©crire Jackie Chan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/nm/20/ltnm203hcpvq05tb8uq3ke6e1qm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci, Jackie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La situation n'est pas tr√®s agr√©able, n'est-ce pas? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Partons pour le temps de notre r√©seau fr√®re avec ses tristes pens√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous discuterons de l'√©volution future des √©v√©nements. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous vous proposons l'ordre suivant de pr√©sentation du mat√©riel</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Examinez le sch√©ma du r√©seau et analysez son fonctionnement;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous d√©crirons comment nous transf√©rons les param√®tres d'un routeur √† un autre √† l'aide d'Ansible;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parlons de l'automatisation de l'infrastructure informatique en g√©n√©ral.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√©ma du r√©seau et sa description</font></font></h4><br>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√®me</font></font></b></p><br>
<br>
<img src="https://habrastorage.org/webt/wp/0f/zp/wp0fzp8bvlwmylrn-pl7knbplga.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consid√©rez la logique de notre organisation. </font><font style="vertical-align: inherit;">Nous ne nommerons pas de fabricants sp√©cifiques d'√©quipements, cela n'a pas d'importance dans l'article </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(le lecteur attentif lui-m√™me devinera quel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> type d' </font><i><font style="vertical-align: inherit;">√©quipement est utilis√©)</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ce n'est l√† qu'un des bons avantages de travailler avec Ansible, lors de la configuration, en g√©n√©ral, nous ne nous soucions pas de quel type d'√©quipement il s'agit. </font><font style="vertical-align: inherit;">Juste pour comprendre, cet √©quipement est des fournisseurs bien connus tels que Cisco, Juniper, Check Point, Fortinet, Palo Alto ... vous pouvez remplacer votre propre version. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons deux t√¢ches principales pour d√©placer le trafic:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurer la publication de nos services, qui sont l'affaire de l'entreprise;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fournissez la communication avec les succursales, un centre de donn√©es distant et des organisations tierces (partenaires et clients), ainsi que l'acc√®s √† Internet via le bureau central.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons par les √©l√©ments de base:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deux routeurs frontaliers (BRD-01, BRD-02);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cluster de pare-feu (FW-CLUSTER);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commutateur de noyau (L3-CORE);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un routeur qui deviendra une bou√©e de sauvetage (dans le processus de r√©solution du probl√®me, nous transf√©rerons les param√®tres r√©seau de FW-CLUSTER vers EMERGENCY) (EMERGENCY);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commutateurs pour la gestion de l'infrastructure r√©seau (L2-MGMT);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Machine virtuelle avec Git et Ansible (VM-AUTOMATION);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un ordinateur portable qui teste et d√©veloppe des playbooks pour Ansible (Laptop-Automation).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un protocole de routage OSPF dynamique est configur√© sur le r√©seau avec les zones suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zone 0 - la zone dans laquelle les routeurs responsables du mouvement du trafic dans la zone ECHANGE sont inclus;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zone 1 - la zone dans laquelle les routeurs responsables du travail des services de l'entreprise sont inclus;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zone 2 - la zone dans laquelle les routeurs responsables du trafic de gestion de routage sont inclus;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zone N - zones du r√©seau de succursales.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur les routeurs frontaliers, il a √©t√© cr√©√© √† l'aide d'un routeur virtuel (VRF-INTERNET), sur lequel une vue compl√®te eBGP a √©t√© √©lev√©e avec l'AS affect√© correspondant. Entre les VRF, iBGP est configur√©. La soci√©t√© poss√®de un pool d'adresses blanches qui sont publi√©es sur ces VRF-INTERNET. Certaines des adresses blanches sont achemin√©es directement vers FW-CLUSTER (adresses sur lesquelles op√®rent les services de l'entreprise), certaines sont achemin√©es via la zone EXCHANGE (services internes √† l'entreprise qui n√©cessitent des adresses IP externes et des adresses NAT externes pour les bureaux). De plus, le trafic parvient aux routeurs virtuels cr√©√©s sur L3-CORE avec des adresses blanches et grises (zones de s√©curit√©). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©seaux de gestion utilisent des commutateurs d√©di√©s et constituent un r√©seau physiquement d√©di√©. Le r√©seau de gestion est √©galement divis√© en zones de s√©curit√©.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le routeur d'URGENCE duplique physiquement et logiquement le FW-CLUSTER. </font><font style="vertical-align: inherit;">Toutes les interfaces y sont d√©sactiv√©es sauf celles qui regardent le r√©seau de gestion.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'automatisation et sa description</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons compris comment fonctionne le r√©seau. </font><font style="vertical-align: inherit;">Voyons maintenant les √©tapes, que ferons-nous pour transf√©rer le trafic de FW-CLUSTER vers l'URGENCE:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©sactivez les interfaces sur le commutateur du noyau (L3-CORE) qui le connectent au FW-CLUSTER;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©sactivez les interfaces sur le commutateur principal L2-MGMT qui le connectent au FW-CLUSTER;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez le routeur d'URGENCE (par d√©faut, toutes les interfaces sont d√©sactiv√©es sur celui-ci, sauf celles associ√©es √† L2-MGMT):</font></font></li>
</ol><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous incluons des interfaces sur l'URGENCE;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez l'adresse IP externe (pour NAT), qui √©tait sur FW-Cluster;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous g√©n√©rons des requ√™tes GARP de sorte que dans les tables d'arp L3-CORE, les adresses de pavot passent de FW-Cluster √† EMERGENCY;</font></font></li>
<li>      BRD-01, BRD-02;</li>
<li>  NAT;</li>
<li>  EMERGENCY OSPF Area 1;</li>
<li>  EMERGENCY OSPF Area 2;</li>
<li>    Area 1  10;</li>
<li>     Area 1  10;</li>
<li> ip-,   L2-MGMT ( ,    FW-CLUSTER);</li>
<li> gARP ,   arp- L2-MGMT  -  FW-CLUSTER  EMERGENCY.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, nous revenons √† la formulation originale du probl√®me. Trois heures du matin, un stress √©norme, une erreur √† n'importe quelle √©tape peut entra√Æner de nouveaux probl√®mes. Pr√™t √† taper des commandes via la CLI? Oui? D'accord, allez au moins vous rincer le visage, buvez du caf√© et rassemblez votre volont√© dans un poing. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bruce, s'il vous pla√Æt, aidez les gars. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0v/sh/qe/0vshqe7g7ngkcgdjrl4lxvdif4g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, nous continuons de r√©duire notre automatisation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous trouverez ci-dessous un sch√©ma du classeur en termes d'Ansible. Ce diagramme refl√®te ce que nous avons d√©crit ci-dessus, juste une impl√©mentation concr√®te dans Ansible. </font></font><br>
<img src="https://habrastorage.org/webt/yg/oa/hu/ygoahutrkrtb-q7qqteifyuejp0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce stade, nous avons r√©alis√© ce qui devait √™tre fait, d√©velopp√© un playbook, effectu√© des tests, maintenant nous sommes pr√™ts √† le lancer.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encore une petite digression. La facilit√© de la narration ne doit pas vous induire en erreur. Le processus d'√©criture des playbooks n'√©tait pas aussi simple et rapide qu'il y para√Æt. Les tests ont pris beaucoup de temps, un stand virtuel a √©t√© cr√©√©, la solution a √©t√© d√©ploy√©e plusieurs fois, une centaine de tests ont √©t√© effectu√©s.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
On commence ... On a l'impression que tout se passe tr√®s lentement, quelque part il y a une erreur, quelque chose ne fonctionnera pas au final. La sensation d'un saut en parachute, et le parachute ne veut pas s'ouvrir imm√©diatement ... c'est normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous lisons le r√©sultat des op√©rations du livre de jeu Ansible (nous avons remplac√© les adresses IP √† des fins de complot):</font></font><br>
<br>
<pre><code class="plaintext hljs">[xxx@emergency ansible]$ ansible-playbook -i /etc/ansible/inventories/prod_inventory.ini /etc/ansible/playbooks/emergency_on.yml <font></font>
<font></font>
PLAY [-------&gt;Emergency on VCF] ********************************************************<font></font>
<font></font>
TASK [vcf_junos_emergency_on : Disable PROD interfaces to FW-CLUSTER] *********************<font></font>
changed: [vcf]<font></font>
<font></font>
PLAY [-------&gt;Emergency on MGMT-CORE] ************************************************<font></font>
<font></font>
TASK [mgmt_junos_emergency_on : Disable MGMT interfaces to FW-CLUSTER] ******************<font></font>
changed: [m9-03-sw-03-mgmt-core]<font></font>
<font></font>
PLAY [-------&gt;Emergency on] ****************************************************<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable EXT-INTERNET interface] **************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Generate gARP for EXT-INTERNET interface] ****************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable static default route to EXT-INTERNET] ****************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change NAT rule to EXT-INTERNET interface] ****************<font></font>
changed: [m9-04-r-04] =&gt; (item=12)<font></font>
changed: [m9-04-r-04] =&gt; (item=14)<font></font>
changed: [m9-04-r-04] =&gt; (item=15)<font></font>
changed: [m9-04-r-04] =&gt; (item=16)<font></font>
changed: [m9-04-r-04] =&gt; (item=17)<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable OSPF Area 1 PROD] ******************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable OSPF Area 2 MGMT] *****************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change OSPF Area 1 interfaces costs to 10] *****************<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1001)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1002)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1003)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1004)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1005)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1006)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1007)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1008)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1009)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1010)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1011)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1012)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1013)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1100)<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change OSPF area1 default cost for to 10] ******************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change MGMT interfaces ip addresses] ********************<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n.254', u'name': u'VLAN-803'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+1.254', u'name': u'VLAN-805'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+2.254', u'name': u'VLAN-807'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+3.254', u'name': u'VLAN-809'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+4.254', u'name': u'VLAN-820'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+5.254', u'name': u'VLAN-822'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+6.254', u'name': u'VLAN-823'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+7.254', u'name': u'VLAN-824'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+8.254', u'name': u'VLAN-850'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+9.254', u'name': u'VLAN-851'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+10.254', u'name': u'VLAN-852'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+11.254', u'name': u'VLAN-853'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+12.254', u'name': u'VLAN-870'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+13.254', u'name': u'VLAN-898'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+14.254', u'name': u'VLAN-899'})<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Generate gARPs for MGMT interfaces] *********************<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n.254', u'name': u'VLAN-803'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+1.254', u'name': u'VLAN-805'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+2.254', u'name': u'VLAN-807'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+3.254', u'name': u'VLAN-809'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+4.254', u'name': u'VLAN-820'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+5.254', u'name': u'VLAN-822'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+6.254', u'name': u'VLAN-823'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+7.254', u'name': u'VLAN-824'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+8.254', u'name': u'VLAN-850'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+9.254', u'name': u'VLAN-851'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+10.254', u'name': u'VLAN-852'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+11.254', u'name': u'VLAN-853'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+12.254', u'name': u'VLAN-870'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+13.254', u'name': u'VLAN-898'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+14.254', u'name': u'VLAN-899'})<font></font>
<font></font>
PLAY RECAP ************************************************************************</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Termin√©! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, ce n‚Äôest pas tout √† fait pr√™t, n‚Äôoubliez pas la convergence des protocoles de routage dynamique et le chargement d‚Äôun grand nombre de routes dans la FIB. Nous ne pouvons en aucun cas influencer cela. Nous attendons. C'est venu ensemble. Maintenant c'est pr√™t. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et dans le village de Vilabaggio (qui ne veut pas automatiser la configuration du r√©seau), ils continuent de laver la vaisselle. Bruce (bien que d√©j√† diff√©rent, mais non moins cool) essaie de comprendre combien de plus pour reconfigurer manuellement l'√©quipement. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/4y/hc/zr4yhcq2zpqmjjbjp7lx37rxibg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voudrais √©galement insister sur un point important. Comment r√©cup√©rer tout? Apr√®s un certain temps, nous redonnerons vie √† notre FW-CLUSTER. Il s'agit de l'√©quipement principal, pas de l'√©quipement de sauvegarde, le r√©seau devrait y fonctionner.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Envie de commencer √† br√ªler chez les networkers? Le directeur technique entendra mille arguments pourquoi cela n'est pas n√©cessaire, pourquoi cela peut √™tre fait plus tard. Malheureusement, c'est ainsi que le r√©seau fonctionne √† partir d'un tas de patchs, de pi√®ces, de vestiges de l'ancien luxe. Il s'av√®re qu'une courtepointe. Notre t√¢che dans son ensemble, pas dans cette situation particuli√®re, mais en g√©n√©ral, en principe, en tant que sp√©cialistes des TI, est d'amener le r√©seau au beau mot anglais ¬´coh√©rence¬ª, il est tr√®s multiforme, il peut se traduire par: coh√©rence, coh√©rence, coh√©rence, coh√©rence, coh√©rence, coh√©rence, comparabilit√©, connectivit√©. Tout tourne autour de lui. Ce n'est que dans cet √©tat que le r√©seau est g√©rable, nous comprenons clairement ce qu'il fonctionne et comment il fonctionne, nous comprenons clairement ce qui doit √™tre chang√©, si n√©cessaire, nous savons clairement o√π chercher en cas de probl√®me.Et ce n'est que dans un tel r√©seau que vous pouvez faire des tours comme ceux que nous venons de d√©crire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, un autre playbook a √©t√© pr√©par√©, qui a remis les param√®tres √† leur √©tat d'origine. </font><font style="vertical-align: inherit;">La logique de son travail est la m√™me (il est important de se rappeler, l'ordre des t√¢ches est tr√®s important), afin de ne pas prolonger l'article d√©j√† long, nous avons d√©cid√© de ne pas publier la liste du playbook. </font><font style="vertical-align: inherit;">Apr√®s avoir effectu√© de tels exercices, vous vous sentirez beaucoup plus calme et plus confiant dans l'avenir, de plus, toutes les b√©quilles que vous y aurez entass√©es se retrouveront imm√©diatement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout le monde peut nous √©crire et obtenir le code source de tout le code √©crit, ainsi que tous les palybooks. </font><font style="vertical-align: inherit;">Contacts dans le profil.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä notre avis, les processus pouvant √™tre automatis√©s ne se sont pas encore cristallis√©s. </font><font style="vertical-align: inherit;">Sur la base de ce que nous avons rencontr√© et de ce que nos coll√®gues occidentaux discutent, les sujets suivants sont toujours visibles:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Provisionnement des appareils;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Collecte de donn√©es;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rapports</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D√©pannage;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conformit√©</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il y a un int√©r√™t, nous pouvons poursuivre la discussion sur l'un des sujets donn√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je veux √©galement sp√©culer un peu sur l'automatisation. </font><font style="vertical-align: inherit;">Que devrait-il √™tre dans notre compr√©hension:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le syst√®me doit vivre sans homme, tout en am√©liorant l'homme. </font><font style="vertical-align: inherit;">Le syst√®me ne doit pas d√©pendre de la personne;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'op√©ration doit √™tre experte. </font><font style="vertical-align: inherit;">Il n'y a pas de classe de sp√©cialistes qui effectuent des t√¢ches de routine. </font><font style="vertical-align: inherit;">Il y a des experts qui ont automatis√© toute la routine et ne r√©solvent que des probl√®mes complexes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les t√¢ches de routine \ standard sont effectu√©es automatiquement "par bouton", les ressources ne sont pas gaspill√©es. </font><font style="vertical-align: inherit;">Le r√©sultat de ces t√¢ches est toujours pr√©visible et compr√©hensible.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et que devraient conduire ces points:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transparence de l'infrastructure informatique (moins de risques d'exploitation, de modernisation, de mise en ≈ìuvre. Moins de temps d'arr√™t par an);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La capacit√© de planifier les ressources informatiques (syst√®me de planification des capacit√©s - vous pouvez voir combien est consomm√©, combien de ressources sont n√©cessaires dans un seul syst√®me, et non par des lettres et des visites aux d√©partements sup√©rieurs);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Capacit√© √† r√©duire le nombre de personnel informatique.</font></font></li>
</ul><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auteurs de l'article: Alexander Manov (CCIE RS, CCIE SP) et Pavel Kirillov. </font><font style="vertical-align: inherit;">Nous souhaitons discuter et proposer des solutions sur le th√®me de l'automatisation des infrastructures informatiques.</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr496136/index.html">Utilisation de la biblioth√®que ColorPicker dans Android pour impl√©menter une s√©lection de couleurs flexible</a></li>
<li><a href="../fr496138/index.html">Participez √† la programmation musicale - des langages qui vous aideront √† le faire</a></li>
<li><a href="../fr496144/index.html">Les fruits de l'isolement: carte interactive COVID-19 avec graphiques historiques et restrictions de migration</a></li>
<li><a href="../fr496146/index.html">Lua sur STM32</a></li>
<li><a href="../fr496148/index.html">Mod√®les de conception structurelle dans ES6 + sur l'exemple de Game of Thrones</a></li>
<li><a href="../fr496154/index.html">Automatisation du service client: une solution de bout en bout de DeepPavlov</a></li>
<li><a href="../fr496156/index.html">Comment les syst√®mes d'analyse du trafic d√©tectent les tactiques des pirates par MITRE ATT & CK, partie 3</a></li>
<li><a href="../fr496160/index.html">Nous √©tudions le moteur VoIP Mediastreamer2. Partie 5</a></li>
<li><a href="../fr496162/index.html">Terraform, r√©f√©rentiels mono et conformit√© en tant que code</a></li>
<li><a href="../fr496164/index.html">Pendant la crise, j'ai perdu mon emploi et maintenant j'ai peur d'√©crire du code intelligent pour ne pas effrayer les derniers postes vacants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>