<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèà üì≤ üî¢ Geh weg von jQuery nach Svelte, ohne Schmerzen ‚ôèÔ∏è ‚òπÔ∏è ü¶à</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo alle zusammen. 
 
 Ich bin ein Backend-Entwickler und l√∂se die Front-End-Aufgaben so gut ich kann, das hei√üt, auf jQuery hat es 2015 funktionier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Geh weg von jQuery nach Svelte, ohne Schmerzen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486646/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo alle zusammen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich bin ein Backend-Entwickler und l√∂se die Front-End-Aufgaben so gut ich kann, das hei√üt, auf jQuery hat es 2015 funktioniert, es funktioniert jetzt. Aber mit Vue and React ist dies kein Kampfer mehr. Aus Liebe zu einer besonderen Art entschied ich mich, Angular / React / Vue zu beherrschen, das nicht von Millionen von Entwicklern getestet wurde. Ich entschied mich, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Svelte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auszuprobieren </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich ein paar √úbungen aus dem Lehrbuch gemacht hatte, beschloss ich, weiter zu √ºben. Daf√ºr habe ich eine meiner erfolgreich abgeschlossenen Testaufgaben √ºbernommen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Zuweisung musste die Liste der Aufgaben √ºberpr√ºft werden, und eine Aufgabe aus dieser Liste, CRUD, wird nicht ben√∂tigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Client-Teil ist als SPA implementiert, und alle Arbeiten mit dem DOM werden √ºber jQuery ausgef√ºhrt. Dies ist ein hervorragender Kandidat, um jQuery durch Svelte zu ersetzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Folgenden werde ich √ºber die ersten Hindernisse auf dem Weg sprechen und nat√ºrlich dar√ºber, wie man sie √ºberwinden kann.</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Svelte-Tutorial ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sehr zug√§nglich und intuitiv, aber wie man Svelte in ein beliebiges Projekt einbettet, ist nicht sehr klar, da Svelte keine Bibliothek wie jQuery ist, sondern ein Compiler, dh Code, der mit Svelte-Direktiven geschrieben wurde, muss irgendwie in natives JS kompiliert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer Stolperstein war die Verwendung von</font></font><br>
<br>
<pre><code class="javascript hljs">$</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 In Svelte ist dies ein reserviertes Zeichen. Die Verwendung in dem von Svelte kompilierten Code f√ºhrt daher zu einem Fehler: </font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
[!] (plugin svelte) ValidationError: $ is an illegal variable name<font></font>
</code></pre><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden von $</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nat√ºrlich kann sich die Frage stellen: Wie ist "$", wenn wir jQuery vollst√§ndig in Svelte √§ndern? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ja, die Frage ist vern√ºnftig, aber wenn Sie dar√ºber nachdenken, wird das Problem klar - Sie m√ºssen nicht den ganzen Elefanten essen, erfahrene Leute essen den Elefanten in Teilen. Beim √úbergang von der Verwendung von jQuery zur Verwendung von Svelte wird es sich um eine Reihe von atomaren Refactorings handeln, der Fortschritt wird immer sichtbar sein und das ‚ÄûSystem‚Äú als Ganzes wird immer in einem funktionierenden Zustand sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Plan ist folgender: ein St√ºck umschreiben, testen, reparieren, das n√§chste St√ºck umschreiben und so weiter, bis wir den ganzen Elefanten spurlos essen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem mit "$" tritt nur in dem Code auf, den Svelte kompiliert. Ich habe die gesamte SPA-Logik in die Datei "business-process.js" verschoben. Es ist nicht erforderlich, dieses Problem zu l√∂sen, aber der gesamte Code aus "business-process.js" sollte aufgerufen werden App.svelte und andere verwandte Anwendungskomponenten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem ersten Refactoring wurde App.svelte mit dem folgenden Code angezeigt:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadStartScreen</span>(<span class="hljs-params"></span>) </span>{<font></font>
        loadPaging(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        loadPage(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        }<font></font>
<font></font>
        loadStartScreen();<font></font>
<font></font>
        <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">sample</span>) </span>{<font></font>
            $(<span class="hljs-string">'#paging'</span>).empty();<font></font>
            $.ajax({<font></font>
                <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
                <span class="hljs-attr">url</span>: <span class="hljs-string">`/api/v1/task/search/<span class="hljs-subst">${sample}</span>/`</span>,
                <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
                <span class="hljs-attr">success</span>: renderTasks,
                <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{<font></font>
                },<font></font>
                <span class="hljs-attr">timeout</span>: <span class="hljs-number">500</span>,<font></font>
            });<font></font>
        }<font></font>
<font></font>
        $(<span class="hljs-string">"#search"</span>).submit(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{<font></font>
            event.preventDefault();<font></font>
            <span class="hljs-keyword">const</span> sample = $(<span class="hljs-string">"#sample"</span>).val();<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (sample) {<font></font>
                search(sample);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (!sample) {<font></font>
                loadStartScreen();<font></font>
            }<font></font>
        });<font></font>
    });<font></font>
&lt;/script&gt;<font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-horizontal"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"search"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-label col-sm-2"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"sample"</span>&gt;</span>
            
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-sm-10"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sample"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control "</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span>
                 <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"  "</span> 
                 <span class="hljs-attr">autofocus</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"on"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"taskList"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"paging"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Code funktioniert, tats√§chlich wird Svelte noch gar nicht verwendet. Zu diesem Zeitpunkt generiert Svelte nur HTML-Code, in den eingef√ºgt wird </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Variable `$` ist im Aufruf isoliert </font></font><br>
<br>
<pre><code class="javascript hljs">jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{});</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kein Namenskonflikt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir binden die Beispielvariable mit dem Wert des Eingabeelements mit id = "sample":</font></font><br>
<br>
<pre><code class="javascript hljs">
                &lt;input id=<span class="hljs-string">"sample"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"form-control "</span> type=<span class="hljs-string">"search"</span>
                 placeholder=<span class="hljs-string">"  "</span>
                 autofocus autocomplete=<span class="hljs-string">"on"</span>
                 <span class="hljs-attr">bind</span>:value={sample}<font></font>
                 /&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Submit-Ereignis des Formularelements mit id = "search" wird der Code ausgef√ºhrt:</font></font><br>
<br>
<pre><code class="javascript hljs">
        $(<span class="hljs-string">"#search"</span>).submit(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{<font></font>
            event.preventDefault();<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (sample) {<font></font>
                search(sample);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (!sample) {<font></font>
                loadStartScreen();<font></font>
            }<font></font>
        });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Code muss gem√§√ü der Svelte-Direktive ausgef√ºhrt werden, wir schreiben ihn neu:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svelteSearch</span>(<span class="hljs-params">event</span>) </span>{<font></font>
        event.preventDefault();<font></font>
        <span class="hljs-keyword">if</span> (sample) {<font></font>
            search(sample);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (!sample) {<font></font>
            loadStartScreen();<font></font>
        }<font></font>
    }<font></font>
&lt;/script&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-horizontal"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"search"</span>
<span class="hljs-attr">on:submit</span>=<span class="hljs-string">"{svelteSearch}"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Code wird kompiliert, funktioniert jedoch nicht, da die Funktion search () im Bereich jQuery (function ($) {}) definiert ist. </font><font style="vertical-align: inherit;">und im globalen Bereich ist diese Funktion nicht sichtbar. </font><font style="vertical-align: inherit;">Ziehen Sie search () mit svelteSearch (event) in einen Bereich:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadStartScreen</span>(<span class="hljs-params"></span>) </span>{<font></font>
        loadPaging(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        loadPage(<span class="hljs-number">0</span>, settings.capacity);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">let</span> sample = <span class="hljs-string">''</span>;<font></font>
<font></font>
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
        loadStartScreen();<font></font>
    });<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">sample</span>) </span>{<font></font>
        $(<span class="hljs-string">'#paging'</span>).empty();<font></font>
        $.ajax({<font></font>
            <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-string">`/api/v1/task/search/<span class="hljs-subst">${sample}</span>/`</span>,
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
            <span class="hljs-attr">success</span>: renderTasks,
            <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{<font></font>
            },<font></font>
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">500</span>,<font></font>
        });<font></font>
    }<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svelteSearch</span>(<span class="hljs-params">event</span>) </span>{<font></font>
        event.preventDefault();<font></font>
        <span class="hljs-keyword">if</span> (sample) {<font></font>
            search(sample);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (!sample) {<font></font>
            loadStartScreen();<font></font>
        }<font></font>
    }<font></font>
&lt;/script&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein solcher Code wird nicht kompiliert:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
[!] (plugin svelte) ValidationError: $ is an illegal variable name<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was zu tun ist? </font><font style="vertical-align: inherit;">Google es! </font><font style="vertical-align: inherit;">"Svelte, wie man jquery importiert": </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie verwende ich jQuery in Svelte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Die </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
als "korrekt" gekennzeichnete Antwort zum Importieren einer Drittanbieter-Bibliothek (willk√ºrlich * .js) hat mir nicht gefallen. Es reicht nicht aus, import * zu schreiben. Sie m√ºssen sie in rollup.config.js registrieren extern:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { external []};
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Option mit Fenster. $ Erfordert viel weniger K√∂rperbewegungen. Da wir die Verwendung von jQuery vollst√§ndig aufgeben m√∂chten, ist diese Direktive f√ºr den Import vor√ºbergehend und die Vertrautheit mit dem Import kann auf sp√§ter verschoben werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie Copy-Paste mit Stapel√ºberlauf:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadStartScreen</span>(<span class="hljs-params"></span>) </span>{<font></font>
        loadPaging(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        loadPage(<span class="hljs-number">0</span>, settings.capacity);<font></font>
    }<font></font>
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
        loadStartScreen();<font></font>
    });<font></font>
<font></font>
    <span class="hljs-keyword">let</span> sample = <span class="hljs-string">''</span>;<font></font>
<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">sample</span>) </span>{
        <span class="hljs-built_in">window</span>.$(<span class="hljs-string">'#paging'</span>).empty();
        <span class="hljs-built_in">window</span>.$.ajax({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-string">`/api/v1/task/search/<span class="hljs-subst">${sample}</span>/`</span>,
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
            <span class="hljs-attr">success</span>: renderTasks,
            <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{<font></font>
            },<font></font>
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">500</span>,<font></font>
        });<font></font>
    }<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svelteSearch</span>(<span class="hljs-params">event</span>) </span>{<font></font>
        event.preventDefault();<font></font>
        <span class="hljs-keyword">if</span> (sample) {<font></font>
            search(sample);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (!sample) {<font></font>
            loadStartScreen();<font></font>
        }<font></font>
    }<font></font>
&lt;/script&gt;<font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-horizontal"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"search"</span>
    <span class="hljs-attr">on:submit</span>=<span class="hljs-string">"{svelteSearch}"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-label col-sm-2"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"sample"</span>&gt;</span>
            
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-sm-10"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sample"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control "</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span>
                 <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"  "</span>
                 <span class="hljs-attr">autofocus</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"on"</span>
                 <span class="hljs-attr">bind:value</span>=<span class="hljs-string">{sample}</span>
                 /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
// ..skip..
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt zu beseitigen:</font></font><br>
<br>
<pre><code class="javascript hljs">
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
        loadStartScreen();<font></font>
    });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir entfernen diesen Code und f√ºgen ihn dem Markup hinzu:</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">svelte:window</span> <span class="hljs-attr">on:load</span> = <span class="hljs-string">{loadStartScreen}</span> /&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erledigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Svelte-Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> finden Sie:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;svelte: document&gt; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das &lt;svelte: document&gt; -Tag bietet Ihnen genau wie &lt;svelte: window&gt; eine bequeme M√∂glichkeit, dem Dokumentobjekt Ereignis-Listener deklarativ hinzuzuf√ºgen. </font><font style="vertical-align: inherit;">Dies ist n√ºtzlich, um Ereignisse abzuh√∂ren, die nicht im Fenster ausgel√∂st werden, z. B. Mouseenter und Mouseleave.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Praxis haben wir:</font></font><br>
<br>
<pre><code class="javascript hljs">
[!] (plugin svelte) ParseError: Valid &lt;svelte:...&gt; tag names are svelte:head, <span class="hljs-attr">svelte</span>:options, <span class="hljs-attr">svelte</span>:<span class="hljs-built_in">window</span>, <span class="hljs-attr">svelte</span>:body, <span class="hljs-attr">svelte</span>:self or svelte:component
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tag wurde aus dem Code herausgeschnitten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , aber sie haben vergessen, es aus der Dokumentation zu l√∂schen. Zu meinem Erstaunen wurde Svelte nicht von den G√∂ttern entwickelt, sondern von Menschen, die auch dazu neigen, etwas f√ºr sp√§ter zu hinterlassen und zu vergessen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie man jQuery mit wenig Blut in Svelte-Code integriert, sagte ich.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompilieren von Svelte-Anweisungen in JS-Code</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir pumpen ein leeres Projekt in einen separaten Ordner, wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Svelte-Blog beschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (installieren Sie Node.js auf dem Weg). </font><font style="vertical-align: inherit;">Jetzt √ºbertragen wir die heruntergeladenen Dateien in das Verzeichnis unseres Projekts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir √ºbertragen die Dateien von "public" dorthin, wo wir die Dateien haben, die vom Client (dem Browser des Benutzers) heruntergeladen werden sollen. Ich habe sie "public / assets / Site". Ich ben√∂tige keine Stile von "global.css". Ich habe diese Datei nicht √ºbertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Datei "public / index.html" habe ich an den Ort √ºbertragen, an den der Server die Vorlage zur Ansicht nimmt: "view / Site / index.html". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dateien von "src" werden zur Quelle des Frontends hinzugef√ºgt - "src / frontend". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dateien, die die Quellen des Frontends beschreiben:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rollup.config.js</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">package-lock.json</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">package.json</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich wechselte zum Stammverzeichnis, dort nahm die IDE sie auf und k√ºmmerte sich um alles (installierte Abh√§ngigkeiten). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt m√ºssen Sie die Kompilierungskonfiguration von Svelte-Direktiven in JS √§ndern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ñffnen Sie rollup.config.js und √§ndern Sie die Dateipfade:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
	<span class="hljs-attr">input</span>: <span class="hljs-string">'src/frontend/main.js'</span>,
	<span class="hljs-attr">output</span>: {
		<span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
		<span class="hljs-attr">format</span>: <span class="hljs-string">'iife'</span>,
		<span class="hljs-attr">name</span>: <span class="hljs-string">'app'</span>,
		<span class="hljs-attr">file</span>: <span class="hljs-string">'public/assets/Site/bundle.js'</span><font></font>
	},<font></font>
	<span class="hljs-attr">plugins</span>: [<font></font>
		svelte({<font></font>
			<span class="hljs-attr">dev</span>: !production,
			<span class="hljs-attr">css</span>: <span class="hljs-function"><span class="hljs-params">css</span> =&gt;</span> {<font></font>
				css.write(<span class="hljs-string">'public/assets/Site/bundle.css'</span>);<font></font>
			}<font></font>
		}),<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist die Schwierigkeit bei der anf√§nglichen Integration von Svelte in ein bestehendes Projekt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir installieren die Abh√§ngigkeiten und beginnen, √Ñnderungen im Quellcode des Frontends f√ºr die sofortige Kompilierung zu verfolgen:</font></font><br>
<br>
<pre><code class="dos hljs">npm install<font></font>
npm run dev<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vergessen Sie nicht</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bearbeiten Sie die Pr√§sentationsvorlage (in meinem Fall "view / Site / index.html"):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Alles innerhalb des Body-Tags ist auf App.svelte portierbar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºgen Sie Links zu den erforderlichen Ressourcendateien hinzu</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">'stylesheet'</span> <span class="hljs-attr">href</span>=<span class="hljs-string">'/assets/Site/bundle.css'</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºgen Sie nach dem Body-Tag einen "Link" zur generierten Assembly-Datei hinzu:</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'/assets/Site/bundle.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><br>
</li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der gesamte Code kann im Repository angezeigt werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die endg√ºltige Aufgabe von jQuery in diesem Projekt ist noch weit entfernt, aber in diesem Artikel ging es nicht darum. In diesem Artikel geht es um die ersten Schritte zur Implementierung von Svelte in Ihrem Code, um die einfachsten Dinge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihre Aufmerksamkeit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bedrohung </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie sich der √úbergang herausstellte, k√∂nnen Sie im n√§chsten Artikel " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie es war</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">lesen.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de486646/">https://habr.com/ru/post/de486646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486632/index.html">Mentale reaktive Programmiermodelle f√ºr Supervisoren</a></li>
<li><a href="../de486634/index.html">MSVC-Backend-Updates in Visual Studio 2019, Version 16.3 und 16.4</a></li>
<li><a href="../de486638/index.html">Blazor WebAssembly 3.2.0 Preview 1 ist jetzt verf√ºgbar</a></li>
<li><a href="../de486640/index.html">Die Zusammenfassung interessanter Materialien f√ºr den mobilen Entwickler # 331 (27. Januar - 2. Februar)</a></li>
<li><a href="../de486644/index.html">DIY Antenne in 5 Minuten</a></li>
<li><a href="../de486648/index.html">AWS Lambda in Aktion in Java 11. Serverlos in die Produktion gehen</a></li>
<li><a href="../de486650/index.html">Dynamischer Speicher in harten Echtzeitsystemen</a></li>
<li><a href="../de486652/index.html">"Kritik der reinen Vernunft" f√ºr Programmierer</a></li>
<li><a href="../de486654/index.html">Bewegungssensor und Alarm- und Videoregistrierungsverbindung im Home Assistant auf Raspberry pi</a></li>
<li><a href="../de486656/index.html">So f√ºgen Sie Unicode neue Charaktere hinzu: die Erfahrung des Laien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>