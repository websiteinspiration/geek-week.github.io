<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüé® ‚≠êÔ∏è üåø A billion operations in the database in 0.3 seconds. Do not compare OLTP with OLAP, but QuestDB with PostgreSQL ‚úåüèø üê≠ üë©üèΩ‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Very often, for my 15 years of experience as a software developer and team leader, I come across the same thing. Programming turns into a religion - r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A billion operations in the database in 0.3 seconds. Do not compare OLTP with OLAP, but QuestDB with PostgreSQL</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496206/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Very often, for my 15 years of experience as a software developer and team leader, I come across the same thing. Programming turns into a religion - rarely anyone tries to introduce technology based on a reasonable choice, reasonably, taking into account restrictions, portability, assessing the degree of attachment to the vendor, the real price, the prospects of technology and freedom of license. Developers go to conferences or read posts - start hype, and their IT directors and managers are fed not only with tales of a bright agile future at events, various visionaries, sales and consultants. And it turns out that the technologies were in the project, not taking into account the convenience of development and implementation, non-functional requirements of the project, but because it is hype and google uses itself,amazon recommends (although their vacancies say that they themselves do not often use it) or the highest decision has been made by the company's management to implement "this."</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/5o/oc/gw5ooc3vrg7l1posp3i32i1r5ng.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the special fun is choosing a database. The larger the amount of information stored, the more complex the data structure in the project and its changes / evolution, the higher the requirements for response time or performance, the more expensive the selection error at the beginning in the later stages of the project.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I have an idea why this is so - in a nutshell, then prototyping and comparing different technologies is ‚Äúexpensive‚Äù (time, licenses, training or reverse engineering) and there is a temptation to turn on ancient instincts and move from the time-consuming evidence part to fun and simple, touching the abyss of irrationality. I did this too, and I also saw how the most ridiculous things happen at the work of me and my friends and not only by decision of technical specialists. Therefore, the choice of a programming language, frameworks, message queues or cloud providers can equally well be made on the basis of posts in networks, reports at conferences, manuals from Gartner for managers or fortunetelling. It‚Äôs a pity that I can‚Äôt tell many stories from my work, because I‚Äôm afraid for my life after that ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What affects the choice of database</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From my point of view, when choosing a database, I have to solve at least the following trade-offs:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">real-time transaction processing or online analytic processing</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vertically or horizontally scalable</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the case of a distributed base - data consistency / availability / separation resistance (CAP theorem)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a specific data scheme and restrictions in the database or storage that does not require a data scheme</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data model - key-value, hierarchical, graph, document or relational</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processing logic as close to data as possible or all processing in the application</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">work mainly in RAM or with a disk subsystem</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">universal solution or specialized</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we use the existing expertise on a database that is not particularly suitable for the requirements of the project or we develop a new one in suitable but not familiar training, ‚Äúblood and sweat‚Äù (the same applies not only to development, but also to operation)</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">built-in or in another process / network</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hipster or retrograde</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Often we get a ‚Äúgift‚Äù to the implemented solution:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúAlien‚Äù query language</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the only native API for working with the database, which will complicate the transition to other databases (time, team effort and project budget were spent)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unavailability of drivers for other platforms / languages ‚Äã‚Äã/ operating systems</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lack of source codes, descriptions of the data format on the disk (or a ban on reverse engineering licenses, especially Oracle with the buggy Coherence)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">license cost growth year by year</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">own ecosystem and difficulty finding specialists</font></font></li>
<li>    ,  , </li>
<li></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The horizontal scaling of systems is quite complex and requires team expertise. Experienced developers are quite expensive in the market, distributed applications are more difficult to develop, debug and test. Therefore, if it is possible to change the server to a more powerful one and the amount of data the system allows, they often do so. Now servers can have terabytes of RAM and hundreds of processor cores on board. So, as never before, it becomes important to use all server resources as efficiently as possible. The cost of database licenses is also important, and if they are sold by processor cores, the operating budget, even with vertical scaling, can cost as much as a superpower space program. Therefore, it is important to keep this in mind so as not to be unable to scale the database performance due to licenses.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is clear that with the help of marketing they will try to convince you that only the solution of a certain company will solve all your problems (but they are silent about how many new ones will appear). There is no one ideal database that will suit everyone and is suitable for everything.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So in the foreseeable future, we will still support several different databases for processing the same data for different types of queries in different systems. No solutions for Data Fabric without data caching, Data Lake can not yet be compared with databases with mass-parallel architecture in terms of performance and query optimality. Transactional data will still be stored in PostgreSQL, Oracle, MS Sql Server, analytical queries in Citus, Greenplum, Snowflake, Redshift, Vertica, Impala, Teradata, and raw data swamps in HDFS / S3 / ADLS (Azure) will be managed by Dremio , Redshift Spectrum, Apache Spark, Presto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the solutions listed above are poorly suited for analyzing time series data with a low response time. </font><font style="vertical-align: inherit;">According to its popularity in working with time series data, it is now in the favorites of InfluxDB. </font><font style="vertical-align: inherit;">In the in-memory database niche, kdb + and memSQL keep their places.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What can oppose all of these </font><font style="vertical-align: inherit;">open source </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solutions </font><font style="vertical-align: inherit;">with an Apache license?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An attempt to get the most out of the hardware for performing analytical queries - vectorization of aggregation functions, working with data through memory mapped files</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL as the language of DML queries and DDL operations for managing the database structure</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">support for join tables specific to time series DB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">support for window and aggregation functions in SQL</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the ability to embed a database in an application on the JVM</font></font></li>
<li>        JVM,        ServiceLoader</li>
<li> Influx DB line protocol (ILP)  UDP  Telegraf.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">¬´What makes QuestDB faster than InfluxDB¬ª</a></li>
<li> PostgreSql 11           PostgreSQL: JDBC, ODBC   psql <br>
</li>
<li>   web    -  REST endpoint  ,     SQL      json <br>
</li>
<li>       ,    <br>
</li>
<li>          zero-GC API,       .<br>
</li>
<li>                  (        )<br>
</li>
<li> 64  Windows, Linux, OSX, ARM Linux    FreeBSD<br>
</li>
<li>,    open source,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When this database can be useful to you - if you are developing financial systems on the JVM with a low latency and you need a solution for data analytics in RAM. </font><font style="vertical-align: inherit;">As a replacement for kdb + due to the cost of licenses. </font><font style="vertical-align: inherit;">If you collect metrics according to the Influx / Telegraf protocol, but the performance and usability of working with InfluxDB is not satisfactory. </font><font style="vertical-align: inherit;">If your project is running on the JVM and you need a built-in database to store metrics or application data that are only added and not updated. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The new release 4.2.0 with support for SIMD instructions caused </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wave of comments </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">on Reddit</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">For fans to participate in the competition of knowledge of modern hardware and its effective programming, I recommend talking to the author of the database (bluestreak01) in the comments!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIMD operations</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The project team </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conducted a test</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on synthetic data and compared QuestDB 4.2.0 with kdb 4.0 to aggregate a billion values, harnessing the SIMD instructions of the processors. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the Intel 8850H platform: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/-z/vy/bh-zvyhql33d-ezkf9h0mudxia0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the AMD Ryzen 3900X platform: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/f7/_d/baf7_d-6mpkifdhg8wiwtay2xle.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It‚Äôs clear that these are all tests in a ‚Äúvacuum‚Äù, but you can compare on your data if your project uses kdb and share the results with the community.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Running docker database image</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The database is published on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dockerhub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with every release. </font><font style="vertical-align: inherit;">More details are described in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Get the QuestDB image:</font></font><br>
<br>
<pre><code class="bash hljs">docker pull questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We launch:</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -it -p 9000:9000 -p 8812:8812 questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, you can connect using the PostgreSQL protocol to port 8812, the web console is available on port 9000.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jdbc access</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depending on our project, we add the PostrgreSQL jdbc driver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.postgresql: postgresql: 42.2.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , for this test I use </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my QuestDB module for testcontainers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The test is available</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on github along with the build script:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.assertj.core.api.Assertions.*;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbDriverTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">containerIsUpTestByJdbcInvocation</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">try</span> (Connection connection = DriverManager.getConnection(<span class="hljs-string">"jdbc:tc:questdb:///?user=admin&amp;password=quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Running docker leads to additional overhead, and this can be avoided by simply implementing </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.questdb: core: jar: 4.2.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as a dependency on the project and running io.questdb.ServerMain:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.ServerMain;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbJdbcTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">embeddedServerStartTest</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        ServerMain.main(<span class="hljs-keyword">new</span> String[]{<span class="hljs-string">"-d"</span>, tempDir.toString()});
        <span class="hljs-keyword">try</span> (DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:8812/"</span>, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Embedding in java application</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But this is the fastest way to work with the database using the inprocess java API:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.cairo.CairoEngine;
<span class="hljs-keyword">import</span> io.questdb.cairo.DefaultCairoConfiguration;
<span class="hljs-keyword">import</span> io.questdb.griffin.CompiledQuery;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlCompiler;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlExecutionContextImpl;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TruncateExecuteTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">truncate</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        SqlExecutionContextImpl executionContext = <span class="hljs-keyword">new</span> SqlExecutionContextImpl();<font></font>
        DefaultCairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(tempDir.toAbsolutePath().toString());
        <span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {
            <span class="hljs-keyword">try</span> (SqlCompiler compiler = <span class="hljs-keyword">new</span> SqlCompiler(engine)) {<font></font>
                CompiledQuery createTable = compiler.compile(<span class="hljs-string">"create table tr_table(id long,name string)"</span>, executionContext);<font></font>
                compiler.compile(<span class="hljs-string">"truncate table tr_table"</span>, executionContext);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web console</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The project includes a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web console</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for querying QuestDB </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5v/_w/bb/5v_wbbpw-roh7cbrv7jpivazvgc.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AND downloading data to a database in csv format through a browser.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/ya/lu/fwyalug09h88tp3iyaeyotztxoo.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do you need another database?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This project is young and still lacks some corporate features, but it is developing quite quickly and several contributors are actively working on the project. I </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äôve been</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> following </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">QuestDB</font></a><font style="vertical-align: inherit;"> since last August and developed a couple of extensions for this project ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jdbc function</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osquery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), and also integrated </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this project with testcontainers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Now I am trying to solve my current problems in Dremio with incremental data uploading, data partitioning and lengthy transactions to data sources in production using QuestDB, supplementing it with data export functions. I plan to share my experience in the following publications. It bribes me especially that I can debug my functions and database on the platform that I am familiar with, write unit tests that run at the speed of light. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You decide as an experienced developer. Once again, QuestDB is not a replacement for OLTP databases - PostgreSQL, Oracle, MS Sql Server, DB2, or even an </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">H2</font></a><font style="vertical-align: inherit;"> replacement </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for tests</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the JVM. </font><font style="vertical-align: inherit;">This is a powerful specialized open-source database with support for PostgreSQL, Influx / Telegraf network protocols. </font><font style="vertical-align: inherit;">If your usage scenario fits the features that are implemented in it and the main scenario of using a column database, then the choice is justified!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en496192/index.html">Call Rust functions from Go</a></li>
<li><a href="../en496194/index.html">On the binarization of fine structure tomographic images</a></li>
<li><a href="../en496196/index.html">DEFCON Conference 26. Wagging the tail: covert passive surveillance. Part 1</a></li>
<li><a href="../en496198/index.html">Presentations of the second ROS Meetup on the topic of training robots</a></li>
<li><a href="../en496204/index.html">CI / CD Process Update: Preparation and Planning</a></li>
<li><a href="../en496208/index.html">How JIT inlines our C # code (heuristics)</a></li>
<li><a href="../en496210/index.html">Biodiversity may have evolved from the principle of playing rock-paper-scissors</a></li>
<li><a href="../en496212/index.html"># 04 - And a whole byte is not enough ... | Take BK by the horns</a></li>
<li><a href="../en496214/index.html">AdColony: 89% of publishers of mobile apps and games use promotional videos</a></li>
<li><a href="../en496216/index.html">Dark store: are you already thinking about this?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>