<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🌾 ✉️ 🥢 JavaScriptのMathオブジェクトの変更可能なメソッドについて 👩🏿‍🤝‍👩🏼 🧑🏾 ⛅️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本日、JavaScriptでの数学計算に関する記事の翻訳を公開します。これは、WaffleJSに関する著者のプレゼンテーションを書面で作成したものです。そして、この発言自体は、Twitter でのこの会話の少しの継続でした。
 
 
 数学教育
 
 数学への興味
 それはすべて、私の数学の教育から...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>JavaScriptのMathオブジェクトの変更可能なメソッドについて</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/489826/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本日、JavaScriptでの数学計算に関する記事の翻訳を公開します。これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WaffleJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関する著者の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">プレゼンテーション</font></a><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">書面で作成したもの</font></a><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">そして、この発言自体は、</font><font style="vertical-align: inherit;">Twitter </font><font style="vertical-align: inherit;">での</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会話の</font><font style="vertical-align: inherit;">少しの継続でし</font><font style="vertical-align: inherit;">た。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c50/bea/705/c50bea705dc18becfec75951a06de4df.jpg"></div></a><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数学教育</font></font></font></i><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数学への興味</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはすべて、私の数学の教育から始まりました。コンピューターサイエンスを勉強していたとき、世界トップクラスの数学の先生とコミュニケーションをとることができましたが、この機会を逃しました。私は数学が好きではありませんでした。学習したトピックは実践からはほど遠いものでした。さらに、私はすでにコンピュータトレーニングの深く理論的なプログラムによってバランスが取れていませんでした。それから私は彼女が人生から離婚したと信じました、そして、大部分は、私はそう考え続けています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、今、勉強を終えてから数年後、数学を学ぶことへの渇望が目覚めました。数学の知識を少しでも応用しても、自分の仕事や趣味にどのような影響を与えることができるかに刺激を受けました。しかし、明確な研究計画はありませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、2012年に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単純統計</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトに取り組み始めることにより、数学を学ぶ方法を見つけました</font><font style="vertical-align: inherit;">。それ以来、このプロジェクトを拡大し、サポートしてきました。現在、多くのアルゴリズムの実装が含まれており、最も「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">星空の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」数学JavaScriptライブラリの</font><font style="vertical-align: inherit;">1つであることが判明しました</font><font style="vertical-align: inherit;">。そして、どうやら、人々は本当にこのライブラリを使用しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私は2012年に仕事を始めました。この間、テクノロジーがどのように変化したかについて話すと、それは非常に昔のことです。それ以来、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.jsの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8つのLTSリリースがリリースされました</font><font style="vertical-align: inherit;">。それ以来、JavaSript自体と、この言語で記述されたプログラムが動作する環境は大きく変化しました。 2012年には、Reactライブラリはまだ存在していなかったため、Babelプロジェクトへの最初のコミットはまだ行われていませんでした。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d8/832/415/5d8832415ee3bf56c1f3a18e294f39fb.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間の</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
経過何年にもわたって、Node.jsを更新するとテストがクラッシュすることに気付きました。</font><font style="vertical-align: inherit;">たとえば、次のようなテストがあるとします。</font></font><br>
<br>
<pre><code class="javascript hljs">t.equal(ss.gamma(<span class="hljs-number">11.54</span>), <span class="hljs-number">13098426.039156161</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このテストはNode.js v10では正常に機能しますが、Node.js v12では機能しません。</font><font style="vertical-align: inherit;">そして、ここではテストされ、いくつかの超複雑な方法ではありません：関数がされ</font></font><code>gamma</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、標準のJavaScript関数を使用して実装- </font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Math.sqrt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">算術</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はあなたがここで何を考えることができるか知っています：算術。</font><font style="vertical-align: inherit;">Twitterでは、次の式の計算結果により、激しい議論が定期的に激化しています。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span> = <span class="hljs-number">0.30000000000000004</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、すでに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書いたように</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、すべての一般的なプログラミング言語</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">は</font></a><font style="vertical-align: inherit;">、Haskellのような古風で古臭い言語であっても、このように動作します。</font><font style="vertical-align: inherit;">浮動小数点演算は奇妙に見えるかもしれませんが、それらは同じように動作し、その動作は十分に文書化されています。</font><font style="vertical-align: inherit;">つまり、</font><font style="vertical-align: inherit;">要件がプログラミング言語で厳密に実装されている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEEE 754</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準について話している</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">したがって、問題は算術にありません。言語での加算、減算、除算、乗算の実装、プログラミングは「石に刻まれた」と言えます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数学オブジェクト</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の問題は、標準のJavaScriptオブジェクトにありました</font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特に、</font><font style="vertical-align: inherit;">このオブジェクトの</font><font style="vertical-align: inherit;">すべての</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクニックなど</font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Math.cos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Math.exp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Math.tan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-のための基本的な食材である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幾何学的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および他の計算。</font><font style="vertical-align: inherit;">これを理解したとき</font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Node.jsの異なるバージョンでの</font><font style="vertical-align: inherit;">オブジェクトの基本メソッドの動作の変化を個別に調査し始めました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">下記は用例です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計算</font></font><code>Math.tanh(0.1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 4</span>
<span class="hljs-number">0.09966799462495590234</span>
<span class="hljs-comment">// Node 6</span>
<span class="hljs-number">0.09966799462495581907</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計算</font></font><code>Math.pow(1/3, 3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 10</span>
<span class="hljs-number">0.03703703703703703498</span>
<span class="hljs-comment">// Node 12</span>
<span class="hljs-number">0.03703703703703702804</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに悪いことに、この問題はNode.jsだけで明らかになるわけではありません。</font><font style="vertical-align: inherit;">ブラウザーや、JavaScriptをサポートする他の環境でも同じことが起こります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、次の質問につながります。数学計算とは何ですか？</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a45/45e/f7c/a4545ef7cf6e282546aee3ea506d762f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算のグラフ表示</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
三角法は視覚化が簡単です。円が1つと高校の数か月が自由に使える場合、余弦と正弦は円の端の特定の点の座標であり、関数sinとcosのグラフは波のように見えることがわかります。実際、高校ではこれらの値の導出を研究していますが、これに使用される方法-</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テイラー級数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -は無限級数に依存しており、コンピューターがそのような問題を解決するのは容易ではありません。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ウィキペディア</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
から学べることは次の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とおりです</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイン計算アルゴリズムに関して：「サインを計算するための標準的なアルゴリズムはありません。 IEEE 754-2008は、浮動小数点計算で最も広く使用されている規格ですが、サインのような三角関数の計算には影響しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CORDICの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ような</font><font style="vertical-align: inherit;">、あらゆる種類のトリッキートリックとルックアップテーブルの</font><font style="vertical-align: inherit;">ような計算を実行するために、多くの異なる近似とアルゴリズムを使用します</font><font style="vertical-align: inherit;">。このすべての異質性は、GitHub上の多くの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fastmathライブラリの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在を説明しています</font><font style="vertical-align: inherit;">。実際には、メソッドを実装する方法はたくさんあります</font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そして他の機能も。たとえば、ご存知のように、Quake III Arenaは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より高速な</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準の逆平方根計算方法を置き換えて、レンダリングを高速化します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果として、数学的計算は特定のアルゴリズムの実装の結果です。実際には、多くの一般的なアルゴリズムとそのバリアントが使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScript仕様では、言語の実装で使用する特定のアルゴリズムを指定する代わりに、数学的計算で使用される関数の観点から、実装に操作の余地を多く与えています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">規格</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がこれについて述べていることです</font><font style="vertical-align: inherit;">（ECMA-262、10版、セクション20.2.2）：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「関数acos、acosh、asin、asinh、atan、atanh、atan2、cbrt、cos、cosh、exp、expm1、hypot、log、log1p、log2、log10、pow、random、sin、sinh、sqrt、tan、tanhの動作注目すべき境界ケースである引数の特定の値について特定の結果を返すための要件を除いて、ここでは完全に説明されていません。 " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ECMA-262標準を担当する委員会のメンバーの内部活動がどのように機能するかはわかりませんが、IntelまたはAMDが新しい超高速数学命令を発行した場合にJavaScriptの互換性の問題が発生しないように標準を作成したと思います彼らの新鮮なプロセッサで。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptインタープリターが広く使用されていること、JavaScriptがブラウザーで頻繁に使用されていること、およびブラウザー間で競争のようなものがまだあること、および一般的なJavaScript実装でさえ常にプレッシャーがかかっていることによるそして、迅速な進化を余儀なくされ、最高のパフォーマンスを提供します...これらすべてのために、私たちは私たちが持っているものを持っています。</font><font style="vertical-align: inherit;">JavaScriptを使用する人なら誰でも、オブジェクトの手段によって実行される数学的計算の結果が異なる実装では異なるという事実を定期的に経験します</font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のインタプリタ言語では通常、いくつかの「標準的な」実装があるため、これはそれほど重要ではありません。</font><font style="vertical-align: inherit;">たとえば、これはPythonインタープリターに当てはまります。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算はどこで実行されますか？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、計算が実行される正確な場所を詳しく見てみましょう。</font><font style="vertical-align: inherit;">JavaScriptの場合、基本的な数学計算が実行される3つの領域があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語インタープリター（特定のJavaScript実装のC ++およびCコード）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScriptコード。たとえば、専用ライブラリのコード。</font></font></li>
</ol><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍1。</font><font style="vertical-align: inherit;">CPU</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計算が行われる場所について考えたときに最初に頭に浮かんだのは、計算はプロセッサで実行されるということでした。プロセッサは算術計算を実装しているため、さらに複雑な計算を実装することもできます。プロセッサには三角関数やその他の計算を実行するための命令があることが判明しましたが、これらの命令はほとんど使用されません。たとえば、x86アーキテクチャのプロセッサでの正弦計算の実装はあまり人気がありませんでした。この実装は、ソフトウェアの実装（プロセッサの算術演算を使用するもの）よりも必ずしも速いとは限らないためです。さらに、ソフトウェアの実装よりも正確であるとは限りません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intelはまた非常に強いために恥を被った</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメンテーションの三角関数</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の</font></a><font style="vertical-align: inherit;">精度の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">過大評価</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">プログラムとは異なり、マイクロチップにはパッチを適用できないため、このようなエラーは特に悲劇的です。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍2。</font><font style="vertical-align: inherit;">言語通訳</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ほとんどのJavaScript実装でコンピューティングサブシステムが機能する方法です。</font><font style="vertical-align: inherit;">これらのサブシステムはさまざまな方法で実装されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V8エンジンとSpiderMonkeyエンジンは、計算に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fdlibm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリポートを使用します</font><font style="vertical-align: inherit;">が、若干異なります。</font><font style="vertical-align: inherit;">このライブラリは、もともとSun Microsystemsで作成されたもので、世代から世代へと受け継がれています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScriptCore（Safari）はcmathライブラリーを使用してほとんどの操作を実行します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet Explorerはcmathと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アセンブラーで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書かれたコードのいくつかのブロックの両方を使用し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ここでは、プロセッサーの三角法も使用されました-ブラウザーが同様の命令を持つプロセッサー用にコンパイルされた場合。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
歴史的な理由により、さまざまなJSエンジンで計算を実行するために使用されるツールが変更されました。</font><font style="vertical-align: inherit;">したがって、V8は計算に独自のソリューションを使用し、次に</font><font style="vertical-align: inherit;">fdlibm </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScriptポートが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用され、Cバージョンのfdlibmのみが使用されました。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍なぜこれが問題なのですか？</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでの要点は、これらすべてがJavaScriptの能力を低下させ、数学的な計算を含む問題を解決する上で均一な結果を生成するということです。</font><font style="vertical-align: inherit;">これはデータサイエンスでは特に困難です。</font><font style="vertical-align: inherit;">JavaScriptをブラウザーでデータサイエンスの計算を行うのにより適したものにしたいと思います。</font><font style="vertical-align: inherit;">さらに、均一な結果を生成できないこと</font><font style="vertical-align: inherit;">は、すべての科学の特徴である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再現性の危機の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">悪化を意味し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは、数字を入力する機能や、データフレームを操作するために広く使用されているライブラリの欠如など、他のJavaScriptの問題については言うまでもありません。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍3。</font><font style="vertical-align: inherit;">専用ライブラリの使用</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptで計算を行うための信頼できる方法があります。それは、専門化されたライブラリを使用することにあります。したがって、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stdlib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリは、</font><font style="vertical-align: inherit;">算術演算のみを使用して高レベルの計算を実装します。算術計算は仕様に完全に記述されており、それらは標準であるため、stdlibによって返される結果は、コードが実行されるプラットフォームに関係なく、完全に均一な結果を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、複雑さと決定のスピードを犠牲にして達成されます。 stdlibメソッドは組み込みメソッドほど高速ではありません。さらに、「サインを数えるだけ」には、ライブラリ全体をプロジェクトに接続する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、もっと広く考えると、これは完全に正常です。たとえば、WebAssemblyプラットフォームは、プログラマーに高レベルの数学的計算を実行する手段を提供しません。そのドキュメントでは、対応するメカニズムの実装を独自のモジュールに個別に含めることをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「WebAssemblyには、sin、cos、exp、powなどの独自の数学関数の実装は含まれていません。このような関数に対するWebAssemblyの戦略は、開発者がそれらをWebAssemblyプラットフォーム自体にライブラリツールとして実装できるようにすることです（x86プラットフォームのsinおよびcos命令は遅く、不正確であり、最近ではとにかく、使用しないようにしてください）。」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが、コンパイルされた言語が常に機能する方法です。Cで記述されたプログラムをコンパイルすると、インポートされたメソッド</font></font><code>math.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がコンパイルされたプログラムに含まれます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イプシロン値の使用</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計算を実行するためにstdlibライブラリをJavaScriptプロジェクトに含めたくないが、複雑な計算を実行するコードをテストする必要がある場合は、おそらく単純統計ライブラリですでに使用されているメソッドを使用する必要があります。それは</font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、数の違いが考慮されない境界を定義</font><font style="vertical-align: inherit;">する値</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用することについて</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">数学でイプシロン記号</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ため</font></a><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">オプション</font></a><font style="vertical-align: inherit;">を考える</font><font style="vertical-align: inherit;">と、私はそれを「任意の小さな正の値」として話していると言えます。単純統計で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、イプシロン値のequalを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">使用</font></a><font style="vertical-align: inherit;">します</font></font><code>0.0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの数値が等しいかどうかを調べる必要がある場合は、フォームの条件がチェックされます</font></font><code>Math.abs(result — expected) &lt; epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この条件が真であることが判明した場合、数値間の差が指定された範囲内にあり、等しいと見なすことができます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍精度</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Twitterのコメンテーターは、例で得られた結果の変動</font><font style="vertical-align: inherit;">は浮動小数点数の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効数字</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">範囲外であることを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">示しました</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">技術的な観点からは、これは正しいことであり、これは、値を使用する方法よりも正確に数値を比較する方法を見つけることができることを意味します</font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">しかし、実際には同じ話がここにあります-数字の最後の数字は結果に影響を与え、最終結果に不正確さをもたらします。</font><font style="vertical-align: inherit;">さらに、ここに示す例はすべてを網羅しているわけではありません。</font><font style="vertical-align: inherit;">実際のところ、JavaScriptインタープリターの実装機能は、仕様から逸脱することなく、ほとんどの数値結果に違いを生じさせる可能性があります。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍JavaScript</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptを批判したくありません。</font><font style="vertical-align: inherit;">JavaScriptは、将来の不確実性と言語実装が作成されるプラットフォームの数を考慮して、正当な妥協をしたと私は信じています。</font><font style="vertical-align: inherit;">JavaScriptと他の言語を直接比較することは非常に困難です。</font><font style="vertical-align: inherit;">ポイントはJavaScriptエコシステムです。</font><font style="vertical-align: inherit;">同時に、同じ言語の多くの通訳がいるという事実は、他の言語ではまったく異例です。</font><font style="vertical-align: inherit;">さらに、これはJavaScriptの主な長所の1つです。</font><font style="vertical-align: inherit;">さらに、これらは言語自体で発生するものとはまったく異なる計画の現象であると言うことは間違いありません。</font><font style="vertical-align: inherit;">そして、JavaScriptは時間とともに変化し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くの良いもの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がそこに現れ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Stdlibまたはイプシロン？</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、ほとんどの場合、イプシロン値の使用を意味するアプローチを使用する価値があると思います。</font><font style="vertical-align: inherit;">stdlibライブラリはすばらしい強力なツールですが、プロジェクトに数学計算用の追加のライブラリを含めることは非常に高くつく可能性があります。</font><font style="vertical-align: inherit;">また、ほとんどの場合、計算結果のわずかな差異はアプリケーションにとって問題になりません。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、前述のことから結論を導き、いくつかの考えを共有したいと思います。</font></font><br>
<br>
<ol>
<li>,     ,   ,    .         .     —    « ». ,   ,   ,   <code>Math.sin</code>   ,   ,      ,      .      ,   ,      ,   ,   ,   .    ,       ,   ,       .</li>
<li>      . ,   ,       Node.js,         ,    ,     simply-statistics.    ,    , ,     ,      .  —    .</li>
<li>  ,    .    V8,      ,   .    ,    .    , ,         ,     .</li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読者の皆様！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.jsの新しいバージョンにアップグレードするときに計算結果の変更に関する問題が発生しましたか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja489812/index.html">Oracle BIでLDAPを構成する</a></li>
<li><a href="../ja489818/index.html">JavaScriptなど：ブラウザーで時間を測定する4つの独創的なアプローチ</a></li>
<li><a href="../ja489820/index.html">古き良きボタン要素のスタイリング</a></li>
<li><a href="../ja489822/index.html">セルオートマトンを使用して疑似乱数を生成する：ルール30</a></li>
<li><a href="../ja489824/index.html">知っておきたい7つのオープンソースクラウドセキュリティ監視ツール</a></li>
<li><a href="../ja489828/index.html">Node.jsでのGeoJSONの操作：実用的な入門</a></li>
<li><a href="../ja489832/index.html">人工原子ビーズ：大環状分子による操作</a></li>
<li><a href="../ja489834/index.html">スマートホームデバイスをSmartThingsエコシステムに組み込む</a></li>
<li><a href="../ja489836/index.html">未来のライダー：128ではなく11,000レーザー</a></li>
<li><a href="../ja489838/index.html">SSR（サーバー側レンダリング）を使用したNuxtサーバー側メモリリーク</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>