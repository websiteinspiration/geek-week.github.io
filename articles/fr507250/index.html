<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈯️ 🏁 👧🏿 Définir une main de poker gagnante en utilisant map / Reduce en JavaScript 🌸 👨🏽‍🚒 🤖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous, comme moi, pouvez parfois participer à des mini-compétitions dans la programmation des Olympiades. Habituellement, je n'ai pas le temps de trouv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Définir une main de poker gagnante en utilisant map / Reduce en JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/507250/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img height="326" src="https://habrastorage.org/webt/mv/2r/o3/mv2ro3o7alphphi_pz-yzj_wdrg.png"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img align="right" width="355" height="445" src="https://habrastorage.org/webt/ba/-t/s7/ba-ts7ubl-bu6-dwxrnvbk6g8hw.jpeg"></a><br clear="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous, comme moi, pouvez parfois participer à des mini-compétitions dans la programmation des Olympiades. Habituellement, je n'ai pas le temps de trouver une solution dans laquelle plus d'une ou deux lignes utilisent une fonction non standard, mais cette fois, la tâche était de déterminer les mains de poker seniors (gagnantes), et il me semblait que c'est une de ces tâches qui «devrait» être facile! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon résultat est correct, concis et lisible (au moins beaucoup plus court que les solutions proposées par les autres participants). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, dans ce cas, vous pouvez utiliser la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carte</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réduire</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour obtenir les informations nécessaires. Un très bon exemple est ressorti de la façon d'utiliser ces outils pour résoudre des problèmes pratiques en plusieurs étapes.</font></font><a name="habracut"></a><blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Logiciel EDISON - développement web"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="Logiciel EDISON - développement web"></a><br clear="right">
 EDISON      -.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img align="right" width="345" height="230" src="https://habrastorage.org/webt/lu/xa/zr/luxazrrwdkcxwu279m3mzlerbx8.png"></a><br clear="left">
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>,          .<br>
<br>
    ,  « ».          - .<div style="text-align:center;"><img width="770" height="1" src="https://habrastorage.org/webt/mw/wy/cu/mwwycuqpta7m96dxifyx9if7mu8.gif"></div></blockquote><h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elle consiste à comparer deux mains de poker et à déterminer celle gagnante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les mains de poker sont représentées par des lignes contenant des sous-chaînes (désignant des cartes individuelles) de 2 caractères, séparées par des espaces. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un deux de vers, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une croix dix, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier caractère signifie classement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les options possibles, classées par ancienneté: </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 3 4 5 6 7 8 9 TJQKA</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec les désignations numériques, tout est clair en ce qui concerne les lettres: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est 10 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est jack ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ack), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est reine ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ueen), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est roi ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ing),</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ace ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ce). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxième personnage définit la combinaison. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Options possibles: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - vers ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> earts), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - cross ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lubs), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - peaks ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pades), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tambourins ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iamonds). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, une telle ligne complète pour la main «2C 5C 3C 4C 6C» - dans ce cas, il s'agit d'une croix droite affleurante de deux à six. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le classement des mains se fait comme au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texas Hold'em</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez comprendre qu'il existe des difficultés cachées - l'utilisation de cartes supplémentaires pour résoudre les situations de tirage, l'utilisation de la valeur nominale des paires, etc.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Décision</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, comment résoudre ce problème? </font><font style="vertical-align: inherit;">Vous devez d'abord déterminer une méthode de comparaison qui résout le problème du classement des mains, puis, si le classement correspond, le gagnant est déterminé, si possible, en comparant des cartes supplémentaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque l'énoncé du problème suppose que les combinaisons sont équivalentes, nous utilisons un objet simple pour représenter le classement des mains:</font></font><br>
<br>
<pre><code class="javascript hljs">{ 
   <span class="hljs-attr">rank</span>: <span class="hljs-number">1</span>,       <span class="hljs-comment">//     1  9,   ,    </span>
   <span class="hljs-attr">value</span>: <span class="hljs-string">'ABCDE'</span> <span class="hljs-comment">//  ,        ,    ASCII-    </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous pouvons écrire une fonction simple pour comparer deux mains représentées sous la forme de cette structure:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors maintenant, tout ce que nous devons faire est de créer un objet à partir de nos mains - et ici le plaisir commence!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous démontons la main de poker en ses composants</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans de tels cas, il est nécessaire de déterminer les données de base nécessaires pour résoudre le problème. </font><font style="vertical-align: inherit;">Ici, notre premier problème est de répartir nos mains dans l'ancienneté. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les mains de poker peuvent être une quinte, une couleur ou une combinaison de plusieurs cartes avec la même valeur faciale. </font><font style="vertical-align: inherit;">Notre tâche consiste à collecter d'abord ces informations à partir de notre chaîne d'entrée. </font><font style="vertical-align: inherit;">La première étape consiste à décider comment analyser ces données.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyser les données entrantes</font></font></h3><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> input = <span class="hljs-string">"AH KS TC 9D 3S"</span> <span class="hljs-comment">// -  </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons besoin à la fois du costume et de la valeur nominale de chaque carte. </font><font style="vertical-align: inherit;">Cependant, étant donné que la seule raison pour laquelle nous nous intéressons à la couleur est que si la couleur de toutes les cartes dans la main est la même, il n'est pas nécessaire de conserver la combinaison dénomination / couleur. </font><font style="vertical-align: inherit;">Cela rend le processus d'analyse assez simple:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convertissez une ligne entrante en une séquence de cartes.</font></font></b></li>
<li><b> /   ,   .</b><br>
<br>
,      ,  ,        .  , A&gt; K (  ),    Q &gt; J (  ),   ,            . ,   :</li>
<li><b>     .</b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons 5 cartes en main, à la fin nous avons besoin que les valeurs de main pour résoudre les collisions de tirages soient comparées en une seule opération - donc cela devrait être exactement la ligne. Par conséquent, nous traduirons la valeur de nos cartes en caractères, afin qu'elles puissent plus tard être retournées à la chaîne. En général, nous devons faire l'as A, le roi - B, la reine - C, le jack - D, dix - E, neuf - G, etc.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span> <span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>) <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort() 
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, ici, nous avons divisé en cartes distinctes et attribué à chacune d'entre elles sa valeur nominale et sa couleur. </font><font style="vertical-align: inherit;">Dans le même temps, nous avons converti la dénomination en une représentation sous forme de chaîne à une lettre, en commençant par A (qui est la désignation d'un as, les lettres suivantes restantes dans l'ordre correspondaient aux petites cartes à leur valeur nominale). </font><font style="vertical-align: inherit;">Pour ce faire, a espionné le numéro de la position nominale dans l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constant de la chaîne </font><font style="vertical-align: inherit;">, a soustrait ce nombre de 77 et reconverti en chaîne. </font><font style="vertical-align: inherit;">65 est le code pour A, nous obtenons donc une ligne comparable commençant par A, qui est la meilleure option. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons également trié par valeur nominale et par costume, ce qui vous permet de passer à l'étape suivante!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créez des données comparables.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Très bien, mais maintenant vous devez générer plus de données pour pouvoir écrire du code pour classer vos mains.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérifiez le flash.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérifiez la rue.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous déterminons les doublons à leur valeur nominale - ils sont nécessaires pour tous les autres types de mains.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérifier le flash</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est assez simple, car nous avons analysé la ligne entrante et trié par combinaisons. </font><font style="vertical-align: inherit;">Si la couleur de la dernière carte correspond à la couleur de la première - nous avons un flash.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérifiez la rue</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La rue n'est pas beaucoup plus compliquée - si toutes les cartes (quelle que soit leur couleur) ont une dénomination cohérente, alors c'est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commençons avec la première carte dans la main et pour chaque prochaine vérification si sa valeur nominale est cohérente avec la carte précédente. </font><font style="vertical-align: inherit;">L'utilisation de l'index est passée par le rappel, comme suit:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définir les doublons</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette étape est un peu plus compliquée. </font><font style="vertical-align: inherit;">Nous devons calculer le montant pour chaque valeur faciale dans notre main. </font><font style="vertical-align: inherit;">Et vous avez également besoin d'un moyen de déterminer les paires, les triplets, etc., afin de simplifier le classement de vos mains de cette manière:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compter la quantité pour chaque valeur faciale</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conversion d'un décompte en une soumission dans laquelle vous pouvez rechercher.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il faut s'assurer qu'il est possible de déterminer la présence du «quatre» (carré) ou trois dans la main, le nombre de paires (pas une, une ou deux), etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, nous calculons d'abord combien de fois des cartes de chaque valeur sont trouvées:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
    c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> c<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et puis nous recherchons ces calculs, au sens littéral de «compter les calculs».</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classement des mains</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous avons toutes les informations nécessaires pour classer les mains, sans tenir compte des situations de tirage possibles.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, une quinte flush est la combinaison la plus forte avec un rang 1 (afin de ne pas le compliquer, nous considérons qu'un tirage est possible si quelqu'un a une quinte royale), puis quatre d'un genre, full house, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, l'opérateur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;&amp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utilisé de manière fantastique </font><font style="vertical-align: inherit;">, qui numérise jusqu'à la dernière valeur si les valeurs entre parenthèses précédentes sont correctes. </font><font style="vertical-align: inherit;">Ainsi, </font></font><nobr><code>(flush &amp;&amp; direct &amp;&amp; 1)</code> </nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retourne 1 si flush et direct sont vrais, sinon retourne faux.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situation dessinée</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si deux mains ont le même rang, le gagnant est déterminé en plus par la valeur nominale des cartes, si possible. </font><font style="vertical-align: inherit;">Certaines règles y sont associées.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couple vs couple. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une paire avec une valeur nominale plus élevée gagne. </font><font style="vertical-align: inherit;">Si les valeurs correspondent, la prochaine carte la plus élevée gagne. </font><font style="vertical-align: inherit;">(Pour deux paires, il est résolu de la même manière). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, si nous comparons la main «2H 2D AH KC 3D» avec la main «4H 4C JC TC 3H», les quatre de la deuxième main gagnent, bien que dans la première main la carte la plus haute ait la valeur nominale la plus élevée - un as.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full house contre full house</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le trio avec la valeur nominale la plus élevée gagne. </font><font style="vertical-align: inherit;">Si les dénominations de triples dans les deux mains sont égales, alors nous regardons les dénominations de deux.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous agissons de manière similaire lorsque nous comparons des mains de même rang - décide de la valeur nominale de la carte la plus élevée en combinaison.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, nous devons d'abord trier par quantité, puis par valeur nominale dans notre ligne sortante. </font><font style="vertical-align: inherit;">N'oubliez pas que la chaîne de cinq caractères entière est utilisée pour résoudre les cas avec des classements de main correspondants.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> value = faces.sort(byCountFirst).join(<span class="hljs-string">""</span>)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-comment">//    -  ,  </span>
    <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
    <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et c'est tout!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shebang entier</font></font></h2><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHandDetails</span>(<span class="hljs-params">hand</span>) </span>{
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>)
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort()
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()
    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})
    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})
    <span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]
    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)
    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> { rank, <span class="hljs-attr">value</span>: faces.sort(byCountFirst).join(<span class="hljs-string">""</span>) }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-comment">//    -  ,  </span>
        <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
        <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
        c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> c<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, si nous analysons soigneusement tout sur les étagères, nous pouvons, en utilisant la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carte</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réduire</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , préparer facilement toutes les informations dont nous avons besoin pour résoudre ce problème.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr507226/index.html">OCR pour PDF dans .NET - Comment extraire du texte de documents PDF inaccessibles</a></li>
<li><a href="../fr507234/index.html">Snort ou Suricata. Partie 2: installation et configuration initiale de Suricata</a></li>
<li><a href="../fr507236/index.html">Nous augmentons l'efficacité de l'interaction entre les concepteurs et les développeurs frontend</a></li>
<li><a href="../fr507238/index.html">Nous utilisons DS pour traiter les avis clients de grands sites</a></li>
<li><a href="../fr507242/index.html">Qu'est-ce que le Wi-Fi 6 intéressant dans les performances de Huawei</a></li>
<li><a href="../fr507254/index.html">Zabbix - élargir les frontières des macros</a></li>
<li><a href="../fr507256/index.html">Peter Hinchens: Code source du psychopathe</a></li>
<li><a href="../fr507258/index.html">Bonus, avantages et bonus en informatique: les résultats de la recherche Habr Career</a></li>
<li><a href="../fr507260/index.html">Lifehack rapide pour la croissance des applications - ASO dans d'autres langues</a></li>
<li><a href="../fr507264/index.html">Nouvelles fonctionnalités de Python 3.9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>