<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàØÔ∏è üèÅ üëßüèø D√©finir une main de poker gagnante en utilisant map / Reduce en JavaScript üå∏ üë®üèΩ‚Äçüöí ü§ñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous, comme moi, pouvez parfois participer √† des mini-comp√©titions dans la programmation des Olympiades. Habituellement, je n'ai pas le temps de trouv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>D√©finir une main de poker gagnante en utilisant map / Reduce en JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/507250/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img height="326" src="https://habrastorage.org/webt/mv/2r/o3/mv2ro3o7alphphi_pz-yzj_wdrg.png"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img align="right" width="355" height="445" src="https://habrastorage.org/webt/ba/-t/s7/ba-ts7ubl-bu6-dwxrnvbk6g8hw.jpeg"></a><br clear="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous, comme moi, pouvez parfois participer √† des mini-comp√©titions dans la programmation des Olympiades. Habituellement, je n'ai pas le temps de trouver une solution dans laquelle plus d'une ou deux lignes utilisent une fonction non standard, mais cette fois, la t√¢che √©tait de d√©terminer les mains de poker seniors (gagnantes), et il me semblait que c'est une de ces t√¢ches qui ¬´devrait¬ª √™tre facile! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon r√©sultat est correct, concis et lisible (au moins beaucoup plus court que les solutions propos√©es par les autres participants). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, dans ce cas, vous pouvez utiliser la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carte</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©duire</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour obtenir les informations n√©cessaires. Un tr√®s bon exemple est ressorti de la fa√ßon d'utiliser ces outils pour r√©soudre des probl√®mes pratiques en plusieurs √©tapes.</font></font><a name="habracut"></a><blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" title="Logiciel EDISON - d√©veloppement web"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="Logiciel EDISON - d√©veloppement web"></a><br clear="right">
 EDISON      -.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img align="right" width="345" height="230" src="https://habrastorage.org/webt/lu/xa/zr/luxazrrwdkcxwu279m3mzlerbx8.png"></a><br clear="left">
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>,          .<br>
<br>
    ,  ¬´ ¬ª.          - .<div style="text-align:center;"><img width="770" height="1" src="https://habrastorage.org/webt/mw/wy/cu/mwwycuqpta7m96dxifyx9if7mu8.gif"></div></blockquote><h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elle consiste √† comparer deux mains de poker et √† d√©terminer celle gagnante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les mains de poker sont repr√©sent√©es par des lignes contenant des sous-cha√Ænes (d√©signant des cartes individuelles) de 2 caract√®res, s√©par√©es par des espaces. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un deux de vers, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une croix dix, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier caract√®re signifie classement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les options possibles, class√©es par anciennet√©: </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 3 4 5 6 7 8 9 TJQKA</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec les d√©signations num√©riques, tout est clair en ce qui concerne les lettres: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est 10 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est jack ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ack), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est reine ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ueen), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est roi ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ing),</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ace ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ce). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me personnage d√©finit la combinaison. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Options possibles: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - vers ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> earts), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - cross ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lubs), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - peaks ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pades), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tambourins ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iamonds). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, une telle ligne compl√®te pour la main ¬´2C 5C 3C 4C 6C¬ª - dans ce cas, il s'agit d'une croix droite affleurante de deux √† six. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le classement des mains se fait comme au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texas Hold'em</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez comprendre qu'il existe des difficult√©s cach√©es - l'utilisation de cartes suppl√©mentaires pour r√©soudre les situations de tirage, l'utilisation de la valeur nominale des paires, etc.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©cision</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, comment r√©soudre ce probl√®me? </font><font style="vertical-align: inherit;">Vous devez d'abord d√©terminer une m√©thode de comparaison qui r√©sout le probl√®me du classement des mains, puis, si le classement correspond, le gagnant est d√©termin√©, si possible, en comparant des cartes suppl√©mentaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque l'√©nonc√© du probl√®me suppose que les combinaisons sont √©quivalentes, nous utilisons un objet simple pour repr√©senter le classement des mains:</font></font><br>
<br>
<pre><code class="javascript hljs">{ 
   <span class="hljs-attr">rank</span>: <span class="hljs-number">1</span>,       <span class="hljs-comment">//     1  9,   ,    </span>
   <span class="hljs-attr">value</span>: <span class="hljs-string">'ABCDE'</span> <span class="hljs-comment">//  ,        ,    ASCII-    </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous pouvons √©crire une fonction simple pour comparer deux mains repr√©sent√©es sous la forme de cette structure:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors maintenant, tout ce que nous devons faire est de cr√©er un objet √† partir de nos mains - et ici le plaisir commence!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous d√©montons la main de poker en ses composants</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans de tels cas, il est n√©cessaire de d√©terminer les donn√©es de base n√©cessaires pour r√©soudre le probl√®me. </font><font style="vertical-align: inherit;">Ici, notre premier probl√®me est de r√©partir nos mains dans l'anciennet√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les mains de poker peuvent √™tre une quinte, une couleur ou une combinaison de plusieurs cartes avec la m√™me valeur faciale. </font><font style="vertical-align: inherit;">Notre t√¢che consiste √† collecter d'abord ces informations √† partir de notre cha√Æne d'entr√©e. </font><font style="vertical-align: inherit;">La premi√®re √©tape consiste √† d√©cider comment analyser ces donn√©es.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyser les donn√©es entrantes</font></font></h3><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> input = <span class="hljs-string">"AH KS TC 9D 3S"</span> <span class="hljs-comment">// -  </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons besoin √† la fois du costume et de la valeur nominale de chaque carte. </font><font style="vertical-align: inherit;">Cependant, √©tant donn√© que la seule raison pour laquelle nous nous int√©ressons √† la couleur est que si la couleur de toutes les cartes dans la main est la m√™me, il n'est pas n√©cessaire de conserver la combinaison d√©nomination / couleur. </font><font style="vertical-align: inherit;">Cela rend le processus d'analyse assez simple:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convertissez une ligne entrante en une s√©quence de cartes.</font></font></b></li>
<li><b> /   ,   .</b><br>
<br>
,      ,  ,        .  , A&gt; K (  ),    Q &gt; J (  ),   ,            . ,   :</li>
<li><b>     .</b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons 5 cartes en main, √† la fin nous avons besoin que les valeurs de main pour r√©soudre les collisions de tirages soient compar√©es en une seule op√©ration - donc cela devrait √™tre exactement la ligne. Par cons√©quent, nous traduirons la valeur de nos cartes en caract√®res, afin qu'elles puissent plus tard √™tre retourn√©es √† la cha√Æne. En g√©n√©ral, nous devons faire l'as A, le roi - B, la reine - C, le jack - D, dix - E, neuf - G, etc.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span> <span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>) <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort() 
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, ici, nous avons divis√© en cartes distinctes et attribu√© √† chacune d'entre elles sa valeur nominale et sa couleur. </font><font style="vertical-align: inherit;">Dans le m√™me temps, nous avons converti la d√©nomination en une repr√©sentation sous forme de cha√Æne √† une lettre, en commen√ßant par A (qui est la d√©signation d'un as, les lettres suivantes restantes dans l'ordre correspondaient aux petites cartes √† leur valeur nominale). </font><font style="vertical-align: inherit;">Pour ce faire, a espionn√© le num√©ro de la position nominale dans l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> constant de la cha√Æne </font><font style="vertical-align: inherit;">, a soustrait ce nombre de 77 et reconverti en cha√Æne. </font><font style="vertical-align: inherit;">65 est le code pour A, nous obtenons donc une ligne comparable commen√ßant par A, qui est la meilleure option. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons √©galement tri√© par valeur nominale et par costume, ce qui vous permet de passer √† l'√©tape suivante!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez des donn√©es comparables.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tr√®s bien, mais maintenant vous devez g√©n√©rer plus de donn√©es pour pouvoir √©crire du code pour classer vos mains.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√©rifiez le flash.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√©rifiez la rue.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous d√©terminons les doublons √† leur valeur nominale - ils sont n√©cessaires pour tous les autres types de mains.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√©rifier le flash</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est assez simple, car nous avons analys√© la ligne entrante et tri√© par combinaisons. </font><font style="vertical-align: inherit;">Si la couleur de la derni√®re carte correspond √† la couleur de la premi√®re - nous avons un flash.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√©rifiez la rue</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La rue n'est pas beaucoup plus compliqu√©e - si toutes les cartes (quelle que soit leur couleur) ont une d√©nomination coh√©rente, alors c'est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commen√ßons avec la premi√®re carte dans la main et pour chaque prochaine v√©rification si sa valeur nominale est coh√©rente avec la carte pr√©c√©dente. </font><font style="vertical-align: inherit;">L'utilisation de l'index est pass√©e par le rappel, comme suit:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©finir les doublons</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette √©tape est un peu plus compliqu√©e. </font><font style="vertical-align: inherit;">Nous devons calculer le montant pour chaque valeur faciale dans notre main. </font><font style="vertical-align: inherit;">Et vous avez √©galement besoin d'un moyen de d√©terminer les paires, les triplets, etc., afin de simplifier le classement de vos mains de cette mani√®re:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compter la quantit√© pour chaque valeur faciale</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conversion d'un d√©compte en une soumission dans laquelle vous pouvez rechercher.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il faut s'assurer qu'il est possible de d√©terminer la pr√©sence du ¬´quatre¬ª (carr√©) ou trois dans la main, le nombre de paires (pas une, une ou deux), etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, nous calculons d'abord combien de fois des cartes de chaque valeur sont trouv√©es:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
    c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> c<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et puis nous recherchons ces calculs, au sens litt√©ral de ¬´compter les calculs¬ª.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classement des mains</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous avons toutes les informations n√©cessaires pour classer les mains, sans tenir compte des situations de tirage possibles.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, une quinte flush est la combinaison la plus forte avec un rang 1 (afin de ne pas le compliquer, nous consid√©rons qu'un tirage est possible si quelqu'un a une quinte royale), puis quatre d'un genre, full house, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, l'op√©rateur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;&amp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utilis√© de mani√®re fantastique </font><font style="vertical-align: inherit;">, qui num√©rise jusqu'√† la derni√®re valeur si les valeurs entre parenth√®ses pr√©c√©dentes sont correctes. </font><font style="vertical-align: inherit;">Ainsi, </font></font><nobr><code>(flush &amp;&amp; direct &amp;&amp; 1)</code> </nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retourne 1 si flush et direct sont vrais, sinon retourne faux.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situation dessin√©e</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si deux mains ont le m√™me rang, le gagnant est d√©termin√© en plus par la valeur nominale des cartes, si possible. </font><font style="vertical-align: inherit;">Certaines r√®gles y sont associ√©es.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couple vs couple. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une paire avec une valeur nominale plus √©lev√©e gagne. </font><font style="vertical-align: inherit;">Si les valeurs correspondent, la prochaine carte la plus √©lev√©e gagne. </font><font style="vertical-align: inherit;">(Pour deux paires, il est r√©solu de la m√™me mani√®re). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, si nous comparons la main ¬´2H 2D AH KC 3D¬ª avec la main ¬´4H 4C JC TC 3H¬ª, les quatre de la deuxi√®me main gagnent, bien que dans la premi√®re main la carte la plus haute ait la valeur nominale la plus √©lev√©e - un as.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full house contre full house</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le trio avec la valeur nominale la plus √©lev√©e gagne. </font><font style="vertical-align: inherit;">Si les d√©nominations de triples dans les deux mains sont √©gales, alors nous regardons les d√©nominations de deux.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous agissons de mani√®re similaire lorsque nous comparons des mains de m√™me rang - d√©cide de la valeur nominale de la carte la plus √©lev√©e en combinaison.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, nous devons d'abord trier par quantit√©, puis par valeur nominale dans notre ligne sortante. </font><font style="vertical-align: inherit;">N'oubliez pas que la cha√Æne de cinq caract√®res enti√®re est utilis√©e pour r√©soudre les cas avec des classements de main correspondants.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> value = faces.sort(byCountFirst).join(<span class="hljs-string">""</span>)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-comment">//    -  ,  </span>
    <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
    <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et c'est tout!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shebang entier</font></font></h2><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHandDetails</span>(<span class="hljs-params">hand</span>) </span>{
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>)
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort()
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()
    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})
    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})
    <span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]
    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)
    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> { rank, <span class="hljs-attr">value</span>: faces.sort(byCountFirst).join(<span class="hljs-string">""</span>) }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-comment">//    -  ,  </span>
        <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
        <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
        c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> c<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, si nous analysons soigneusement tout sur les √©tag√®res, nous pouvons, en utilisant la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carte</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©duire</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pr√©parer facilement toutes les informations dont nous avons besoin pour r√©soudre ce probl√®me.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr507226/index.html">OCR pour PDF dans .NET - Comment extraire du texte de documents PDF inaccessibles</a></li>
<li><a href="../fr507234/index.html">Snort ou Suricata. Partie 2: installation et configuration initiale de Suricata</a></li>
<li><a href="../fr507236/index.html">Nous augmentons l'efficacit√© de l'interaction entre les concepteurs et les d√©veloppeurs frontend</a></li>
<li><a href="../fr507238/index.html">Nous utilisons DS pour traiter les avis clients de grands sites</a></li>
<li><a href="../fr507242/index.html">Qu'est-ce que le Wi-Fi 6 int√©ressant dans les performances de Huawei</a></li>
<li><a href="../fr507254/index.html">Zabbix - √©largir les fronti√®res des macros</a></li>
<li><a href="../fr507256/index.html">Peter Hinchens: Code source du psychopathe</a></li>
<li><a href="../fr507258/index.html">Bonus, avantages et bonus en informatique: les r√©sultats de la recherche Habr Career</a></li>
<li><a href="../fr507260/index.html">Lifehack rapide pour la croissance des applications - ASO dans d'autres langues</a></li>
<li><a href="../fr507264/index.html">Nouvelles fonctionnalit√©s de Python 3.9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>