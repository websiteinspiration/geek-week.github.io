<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüíº üèúÔ∏è üéí Como fizemos no pr√≥ximo designer de chat bots. Parte 1 üë®üèΩ‚Äçüåæ üçΩÔ∏è ‚õÑÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi Habromir! No ano passado, eu e a equipe criamos nossa startup Botlify Chatbot Constructor for Business, e gostaria de compartilhar com o p√∫blico um...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como fizemos no pr√≥ximo designer de chat bots. Parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487340/"><img src="https://habrastorage.org/webt/d-/nb/kc/d-nbkcwczgbkbz3ywbf55vj94k4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oi Habromir! No ano passado, eu e a equipe criamos nossa startup Botlify Chatbot Constructor for Business, e gostaria de compartilhar com o p√∫blico uma breve hist√≥ria do projeto e as decis√µes t√©cnicas tomadas. Neste post, tentarei me concentrar o m√°ximo poss√≠vel em detalhes t√©cnicos e aprofundar menos o produto e os neg√≥cios, apesar do fato de que neste projeto meu papel √© muito menos conectado ao desenvolvimento e √† tecnologia. Este material √© baseado na minha experi√™ncia pessoal, n√£o sou um coach de startups e n√£o pretendo ser um bom programador, gerente, arquiteto ou empreendedor. Como somos uma startup relativamente jovem, com poucos usu√°rios, n√£o haver√° nada sobre as cargas de trabalho e os problemas de grandes projetos. Abaixo, mostrarei como meu projeto come√ßou, que tipo de comiss√£o de desenvolvimento adotamos e que conclus√µes tiramos.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu nome √© Andrey, por algum tempo trabalhei como desenvolvedor, principalmente em PHP, depois como l√≠der de equipe e depois como diretor t√©cnico em v√°rias pequenas startups, onde me apaixonei pelo NodeJS. </font><font style="vertical-align: inherit;">Mas aconteceu que ultimamente sou mais prov√°vel que seja um empreendedor. </font><font style="vertical-align: inherit;">Esta n√£o √© a primeira startup que eu fundei, e muito menos a primeira startup em que participei. </font><font style="vertical-align: inherit;">Por acaso trabalhei em v√°rios projetos de sucesso e em muitas falhas. </font><font style="vertical-align: inherit;">Eu fundei ainda mais projetos fracassados. </font><font style="vertical-align: inherit;">Cada vez, as causas do fracasso s√£o completamente diferentes, bem como os est√°gios em que eu falhei, mas de alguma forma eu usei essa experi√™ncia neste projeto.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de come√ßar a hist√≥ria do projeto, gostaria de falar sobre quais objetivos buscamos desde o in√≠cio, iniciando esta aventura. De fato, nosso designer come√ßou como um projeto para aprender os conceitos b√°sicos de gerenciamento de produtos, desenvolvimento de clientes, adquirir novas habilidades de gerenciamento e experi√™ncia em startups. Ouvi e tentei v√°rias vezes aplicar as abordagens do LEAN Startup e sempre que eram completamente diferentes. √â claro que sonhamos em construir um neg√≥cio nisso e ganhar um bom dinheiro, mas n√£o nos divertimos com as ilus√µes de que esse era um caminho simples e curto. E ainda mais, n√£o tentamos fazer algum tipo de WOW! Meu co-fundador e eu trabalhamos em per√≠odo integral e entendemos que n√£o poder√≠amos dedicar muito tempo.O principal motivador foi precisamente a oportunidade de dominar √°reas completamente novas do setor de TI, aplicar novos conhecimentos na pr√°tica e, ao mesmo tempo, ganhar dinheiro.</font></font><br>
<br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como programador, gostei muito de desenhar diagramas de classes, sequ√™ncias, fluxogramas. Para mim, o pr√≥prio processo de visualiza√ß√£o foi um est√°gio na compreens√£o de problemas e solu√ß√µes, e me permitiu ter uma vis√£o geral do que estava acontecendo. Enquanto trabalhava no pr√≥ximo projeto, novamente enfrentei a necessidade de inserir um widget com bate-papo on-line no site e ver quais s√£o as solu√ß√µes prontas nessa √°rea. Ent√£o, entre o que eu estava procurando, me deparei com plataformas que permitiam n√£o apenas criar widgets com bate-papo online para o site, mas tamb√©m incorporar bots de bate-papo neles. Conversei com um desses rob√¥s e ele me deixou uma boa impress√£o. E ent√£o comecei a tentar criar diferentes scripts de chatbot que pudessem ser √∫teis em meus projetos. A fantasia acabou de cair sobre a mesa: uma consulta com o sal√£o de beleza,ajude a fazer uma escolha na loja online, indique o lugar certo na documenta√ß√£o, aceite a solicita√ß√£o ao servi√ßo de suporte. O que eu simplesmente n√£o pensei.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, subi para olhar para v√°rios designers e quase todos me ofereceram para preencher formul√°rios, depois preencher e depois preencher novamente. Em geral, crie bots preenchendo formul√°rios. Como resultado, foi extremamente inconveniente para mim, perdi constantemente o contexto do que estava acontecendo, tive que voltar √†s etapas anteriores para restaurar o contexto e n√£o havia nenhuma quest√£o de pensamento conveniente atrav√©s da l√≥gica e da cria√ß√£o de cen√°rios. Bem, acho que vou tentar primeiro "projetar" meus bots em uma ferramenta externa e depois transferi-los para a plataforma desejada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E aqui me deparei com o primeiro problema: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como descrever o di√°logo com o bot de maneira que fique claro o que e por que o bot responde e, ao mesmo tempo, tem toda a sequ√™ncia de a√ß√µes √† sua frente?</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No come√ßo, tentei usar xmind e outras ferramentas para criar um mapa mental. Aconteceu algo assim. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9b/lj/fd/9bljfdg_rb26tagz8csasws9ikc.png" alt="Exemplo de chatbot de mapa mental"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais tarde, ficou claro que os bots de bate-papo, como um todo, se encaixavam muito bem no conceito de descrever estados e transi√ß√µes entre eles, √© bastante conveniente navegar nos ramos de conversa√ß√£o, mesmo onde existem muitos deles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas alguns concorrentes foram encontrados fornecendo um designer de bot visual. </font><font style="vertical-align: inherit;">Para alguns, era mais intuitivo, para algu√©m menos, mas, em geral, esses construtores me pareciam muito mais amig√°veis. </font><font style="vertical-align: inherit;">Tornou-se interessante para n√≥s tentar fazer algo semelhante, quer√≠amos criar uma ferramenta com a qual voc√™ pode criar um bot de bate-papo sem habilidades de programa√ß√£o, simplesmente descrevendo-o na forma de um diagrama. </font><font style="vertical-align: inherit;">Obviamente, algumas habilidades t√©cnicas ainda s√£o necess√°rias, mas n√£o √© muito mais dif√≠cil criar um mapa mental. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bots s√£o um t√≥pico bastante complicado e grande, e nossos recursos s√£o muito limitados. </font><font style="vertical-align: inherit;">Portanto, era vital para n√≥s simplificar nossa decis√£o o m√°ximo poss√≠vel, para que ela pudesse ver o mercado. </font><font style="vertical-align: inherit;">" </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quanto mais cedo melhor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " - n√£o vou me cansar de repetir esse mantra no contexto de startups.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AI &amp; ML</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pergunta sobre intelig√™ncia artificial nos bots de bate-papo ainda est√° aberta para mim. Mas agora partimos do fato de sermos uma empresa iniciante, n√£o temos compet√™ncias em IA e ML na equipe e j√° concordamos que queremos apenas desenhar diagramas e n√£o preparar conjuntos de dados, treinar redes neurais e isso √© tudo. No momento, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o usamos intelig√™ncia artificial e aprendizado de m√°quina em nossos bots</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Talvez algum dia, no futuro, quando haver√° dinheiro para isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â importante entender que os mesmos rob√¥s em sua ess√™ncia podem ser feitos de maneira muito diferente. Grosso modo, pode haver um bot que escreve: " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que voc√™ est√° fazendo?</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " E espera uma resposta arbitr√°ria do usu√°rio no esp√≠rito: " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aprenda sobre borsch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quero encomendar borsch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", "</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que horas s√£o?</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". Tendo recebido a resposta, o bot tenta reconhec√™-la, determinar a inten√ß√£o e escolher o ramo certo para o desenvolvimento do di√°logo. Desnecess√°rio dizer que, dados erros de digita√ß√£o, uma variedade de formas e express√µes, isso pode ser caro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por outro lado, podemos usar perguntas fechadas quando se trata de trata-se de escolher, por exemplo, um bot pode escrever: " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que voc√™ est√° disposto a fazer?</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "e op√ß√µes de oferta:" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aprenda sobre borsch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "," </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicite borsch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "," </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descubra o hor√°rio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". Por um lado, o usu√°rio perde sua liberdade de a√ß√£o, mas, por outro lado, n√£o apenas simplificamos significativamente os c√°lculos, mas tamb√©m podemos gerenciar mais facilmente o contexto do di√°logo, girando-o na dire√ß√£o certa. Preferimos usar perguntas abertas no contexto da coleta de dados de texto do usu√°rio: insira email , telefone, escreva sua pergunta para dar suporte etc.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bate-papo bot vs man</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro argumento contra permitir que o usu√°rio se comunique com o bot de forma livre foi a cren√ßa de que o bot de bate-papo n√£o deve "jogar" em uma pessoa. </font><font style="vertical-align: inherit;">Na minha opini√£o, ao se comunicar com um bot, uma pessoa deve entender claramente o que se comunica com o bot, saber quais oportunidades ele tem e como us√°-los. </font><font style="vertical-align: inherit;">E se uma pessoa entende que est√° se comunicando com um bot - qual √© o sentido da comunica√ß√£o de texto livre? </font><font style="vertical-align: inherit;">√â muito melhor quando o chatbot se torna assistente de uma pessoa, e n√£o um substituto e n√£o √© t√≠mido, e a pessoa entende claramente que se comunica com o chatbot e quais s√£o suas fun√ß√µes. </font><font style="vertical-align: inherit;">Nesse caso, a comunica√ß√£o acaba sendo notavelmente mais eficaz.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu sou f√£ de udalenki. N√£o me alimente p√£o - deixe-me montar uma equipe remota e come√ßar a trabalhar com ela. Eu me sinto confort√°vel trabalhando remotamente, sei organizar o trabalho e encontrar pessoas que tamb√©m possam trabalhar de forma independente e eficiente. Entendo perfeitamente que isso n√£o √© adequado para todos, concordo plenamente com isso, mas acho que no futuro brilhante haver√° cada vez mais udalenki. √â que a economia n√£o √© nada pessoal. Como este √© o meu projeto e eu pedi m√∫sica para ele - aqui tamb√©m √© remoto, isso deixa uma certa marca.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No in√≠cio do trabalho em qualquer projeto, considero muito importante tentar formalizar minhas id√©ias o m√°ximo poss√≠vel. Embora a id√©ia n√£o tenha encontrado sua forma no papel, na forma de texto, notas, desenhos, nenhuma id√©ia existe. Ao mesmo tempo, todos os processos dentro da equipe devem ser o mais simples, natural e r√°pido poss√≠vel, eficaz na comunica√ß√£o. Voc√™ n√£o deve usar ferramentas grandes e pesadas para gerenciar sua equipe, como Jira ou Redmine, se toda a equipe for voc√™ e seu amigo. Mas tamb√©m para n√£o usar nada tamb√©m, caso contr√°rio, tudo rapidamente sair√° do controle e o caos surgir√°, restringindo o que √© muito mais dif√≠cil do que simplesmente n√£o permitir. Mesmo na cabe√ßa de uma pessoa, essa confus√£o pode ser formada de acordo com o projeto, n√£o √© para eu lhe dizer o que dizer sobre a equipe, mesmo que apenas 2-3 pessoas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s, como iniciantes reais, usamos o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trello</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para organizar tarefas e armazenar links importantes para o projeto, e id√©ias tamb√©m foram lan√ßadas l√°. Para documenta√ß√£o comercial, o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Docs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , enquanto o t√©cnico, √© muito bem criado em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descontos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e colocado no reposit√≥rio correspondente. Comunica√ß√£o ao longo do dia - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegrama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e para stand-ups di√°rios do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Hangouts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os levantamentos di√°rios s√£o uma das pedras angulares da exist√™ncia de equipes remotas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Se isso n√£o existe, n√£o h√° equipe, algu√©m necessariamente come√ßa a se sentir sozinho, cansado, mal-entendido e descontentamento est√£o se acumulando, n√£o apenas o controle da situa√ß√£o, mas tamb√©m as rela√ß√µes na equipe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do ponto de vista do processo de desenvolvimento, a Am√©rica tamb√©m n√£o precisou ser descoberta. Determinamos a dura√ß√£o do sprint, planejamos o sprint com base nos objetivos da inicializa√ß√£o. Pegamos quebra-cabe√ßas e come√ßamos a salsicha. Um novo desafio √© uma nova ramifica√ß√£o no seu sistema de controle de vers√£o favorito. Voc√™ terminou? Emitimos uma solicita√ß√£o Pull, aguarde at√© que algu√©m se refira √† revis√£o. A revis√£o foi? CI funcionou bem? Bem, ent√£o, voc√™ pode manter tudo no ramo de desenvolvimento, aguardar a luz verde do conjunto de desenvolvimento e atualizar o servidor de teste. O c√≥digo que armazenamos no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . At√© o primeiro cliente pagador, estes eram reposit√≥rios abertos ao p√∫blico. Como uma pessoa que tentou promover v√°rias solu√ß√µes de c√≥digo aberto no passado, fico sinceramente ressentida toda vez que uma startup come√ßa a tremer pela seguran√ßa de seu c√≥digo antes de come√ßar a ganhar dinheiro.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ tentar copiar - este √© um sucesso comercial claro</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . N√£o custa nada fechar o reposit√≥rio posteriormente. E os neg√≥cios, voc√™ sabe, est√£o enterrados, via de regra, longe do c√≥digo. Eu tenho acesso ao c√≥digo de muitos, incluindo produtos muito bem-sucedidos, mas vale a pena dizer que t√™-los n√£o repetirei nem de perto seu sucesso? Para criar cont√™ineres do Docker e executar autotestes, decidimos experimentar o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub Actions</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , felizmente, eles deram acesso preliminar. Em geral, as impress√µes permaneceram bastante agrad√°veis, a velocidade de montagem √© satisfat√≥ria. A √∫nica coisa desagrad√°vel foram as atualiza√ß√µes com perda de compatibilidade com as vers√µes anteriores. Algumas vezes eles mudaram seriamente o esquema de descri√ß√£o das a√ß√µes e tiveram que reconfigurar tudo. Mas sab√≠amos o que est√°vamos fazendo quando concordamos em experimentar o produto com status</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beta</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde os primeiros dias, literalmente, desde o desenvolvimento de uma p√°gina de destino para testes de demanda, tentamos lan√ßar lan√ßamentos pelo menos uma vez por semana e testar pelo menos uma hip√≥tese. No in√≠cio, as hip√≥teses eram mais globais, tentamos encontrar v√°rios problemas, atingir o p√∫blico-alvo e desenvolver uma proposta. Por√©m, quanto mais o produto se desenvolvia, menos globais eles se tornavam e a ess√™ncia em si era menos prov√°vel de mudar. O projeto come√ßou do zero, com a p√°gina de destino habitual, depois criamos um cliente de demonstra√ß√£o do bot de bate-papo, que ainda est√° na nossa p√°gina principal. Esta demonstra√ß√£o pode reproduzir um di√°logo estritamente programado e nos serviu como uma demonstra√ß√£o do que poderia ser feito em nosso construtor - o resultado de seu trabalho, e n√£o o pr√≥prio construtor. O truque foi que assumimos que o neg√≥cio n√£o iria at√© n√≥s para o designer de bot,mas por algum resultado, a vantagem que ele dar√°. Quer√≠amos servir aos nossos clientes uma x√≠cara de caf√© feita por nossa m√°quina de caf√©, em vez de mostrar a pr√≥pria m√°quina de caf√©. √â f√°cil adivinhar que</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fazer uma x√≠cara de caf√© √© muito mais r√°pido e mais barato do que coletar uma m√°quina de caf√©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Guiados por esse princ√≠pio, decidimos fazer uma demonstra√ß√£o do cliente primeiro, principalmente porque, com v√°rias ferramentas prontas, n√£o demoramos mais do que duas noites, incluindo o desenvolvimento de cen√°rios de di√°logo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando vimos o interesse dos visitantes do pouso e as convers√µes adicionais geradas por nossa demonstra√ß√£o, decidimos que ir√≠amos al√©m. Lembro que nosso primeiro lan√ßamento do construtor foi um formul√°rio de registro com um formul√°rio de login, ap√≥s o qual o usu√°rio foi levado a uma p√°gina com um pedido de desculpas e com a promessa de informar quando outra coisa funcionava. Fiz os formul√°rios de login e registro centenas de vezes na minha vida e n√£o conseguia nem pensar que aqui encontrar√≠amos imediatamente muitos problemas.</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cerca de 60% dos primeiros usu√°rios simplesmente n√£o conseguiram concluir o processo de registro</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para quem o bot√£o n√£o funciona, para quem o email n√£o vem, para quem outra coisa √©. No come√ßo, percebi a id√©ia de liberar apenas algumas formas bastante c√©ticas, mas uma primeira olhada no Yandex.Metrica deixou claro que era a decis√£o certa. A percep√ß√£o de que os usu√°rios se comportam de maneira diferente do que voc√™ gostaria e, √†s vezes, da maneira que voc√™ pensou que n√£o podia, teve um grande impacto em tudo o que fizemos a seguir. Como hobby, passei v√°rias vezes por semana em algumas horas em um navegador da web apenas observando como os usu√°rios usam nosso of√≠cio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, pouco a pouco, adicionamos funcionalidade √† nossa ideia e chegamos a um produto que ainda tem valor n√£o apenas para n√≥s, mas tamb√©m para nossos usu√°rios, alguns dos quais at√© nos pagam dinheiro. </font><font style="vertical-align: inherit;">A longo prazo, n√£o entendemos o que queremos chegar, como ser√° nosso produto. </font><font style="vertical-align: inherit;">A √∫nica coisa que entendemos na √©poca era que n√£o entendemos nada e estamos em um estado de incerteza.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse experimento levou a mim e √† minha equipe a um investimento angelical da categoria de amigos, fam√≠lia e tolos, criada pelo MVP, primeiras vendas, √≥tima experi√™ncia, muitas alegrias e decep√ß√µes. Ainda n√£o somos um neg√≥cio verdadeiro, mas nos esfor√ßamos para nos tornar um. E quando digo isso, quero dizer que ainda estamos em busca de um modelo de neg√≥cios sustent√°vel e de ajuste do mercado do produto. Mais uma vez, planejamos procurar o conceito de produto certo, nosso cliente, nosso mercado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os objetivos iniciais foram alcan√ßados de maneira alguma, mas o projeto cresceu de um hobby em casa e se transformou em um emprego de per√≠odo integral, e a responsabilidade apareceu para investidores, usu√°rios e funcion√°rios. Obviamente, o projeto tem muitos problemas, tanto conceituais quanto t√©cnicos, mas n√£o h√° nada insol√∫vel e planejamos continuar trabalhando.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de embarcar na parte mais t√©cnica da minha obra, provavelmente vale a pena falar brevemente sobre o que o produto permite que voc√™ fa√ßa.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciar chatbots na sua conta</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Editor visual de chatbot</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controlar o acesso aos bots de bate-papo (acesso de edi√ß√£o, acesso p√∫blico)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacidade de publicar bots de bate-papo na web (widget, incorporado, tela cheia)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√µes do Chatbot (design, nomes, m√©tricas, posi√ß√£o do widget, etc.)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte para integra√ß√£o de chatbots com servi√ßos externos atrav√©s de solicita√ß√µes GET e POST</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lise de caixas de di√°logo de bot</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciamento de conta</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo de Assinatura, Gerenciamento de Assinaturas</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, conhecendo os antecedentes, objetivos, id√©ias e princ√≠pios que nos guiaram no desenvolvimento, posso come√ßar a dar uma descri√ß√£o geral de como tudo isso funciona. </font><font style="vertical-align: inherit;">Como nossa escolha inicial foi criar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chatbots</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para sites e </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">chat em</font></a><font style="vertical-align: inherit;"> tela </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">cheia</font></a><font style="vertical-align: inherit;"> , como </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">app.botlify.io/bot/5de53dbf9b9bae002b319600</font></a><font style="vertical-align: inherit;"> , ficou claro que a maior parte do trabalho seria do lado da interface. </font><font style="vertical-align: inherit;">Como resultado, a frente do trabalho no cliente foi formada em uma lista significativa de tarefas e lista de desejos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie / encontre uma biblioteca cliente, uma esp√©cie de "mecanismo" para bots de bate-papo em um navegador que compreenda as instru√ß√µes json recebidas e mantenha um di√°logo com o usu√°rio.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie um aplicativo para editar n√≥s de bot, que salvar√° uma lista de n√≥s e links entre eles em algum objeto json (com base no qual a biblioteca cliente conduzir√° di√°logos).</font></font></li>
<li> ,    , ,      -  .      ,        ,  ,  . ,  ,  ,     ..</li>
<li> ,     ,     .  id ,       :<br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://app.botlify.io/botlify.min.js"</span>
    <span class="hljs-attr">onload</span>=<span class="hljs-string">"Botlify({ bot: '5de53dbf9b9bae002b319600', type: 'widget'})"</span>
&lt;/<span class="hljs-attr">script</span>&gt;</span>
</code></pre></li>
<li>        ,  ,  (       )</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toda a l√≥gica dos di√°logos, desde a cria√ß√£o de bots de bate-papo (n√≥s e conex√µes) at√© o trabalho direto com eles no Web client, √© tratada pelo frontend. </font><font style="vertical-align: inherit;">O papel do back-end √© mais sobre o gerenciamento de acesso, assinaturas, boletins, notifica√ß√µes e armazenamento de dados transmitidos de muitos clientes da Web.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A parte dianteira</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a frente, usamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reactjs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Empacotamos tudo no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o constru√≠mos e o empurramos para o cont√™iner nginx), o c√≥digo no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em reposit√≥rios particulares, para o CI usamos as </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A√ß√µes do Github</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lan√ßamos cont√™ineres em servidores VPS comuns com scripts bash simples. </font><font style="vertical-align: inherit;">Para simplificar o desenvolvimento da interface do usu√°rio, utilizamos o </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blueprint</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li>Web  ‚Äî  javascript ,   -  .  json     -,     .       -(, ,  ,  , ,   .).<img src="https://habrastorage.org/webt/fi/0s/lj/fi0slje6f5pudmobz1olwwf15um.png"></li>
<li>Web  ‚Äî  javascript  .       id     ,     ,     Web-  .</li>
<li>  ‚Äî  ,      .        json,   -.   ,       ¬´¬ª        ,   ‚Äî  -.<img src="https://habrastorage.org/webt/pr/bo/j4/prboj4obbfqtwlznnjbljvjobnu.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conta de usu√°rio - um aplicativo da web para gerenciar sua conta, assinatura e bots.</font></font><img src="https://habrastorage.org/webt/cw/vc/q5/cwvcq5zg2zxjgacfakqr6y7yh64.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O painel administrativo √© um aplicativo da web para administradores. </font><font style="vertical-align: inherit;">Gerenciamento de usu√°rios, bots, assinaturas, pain√©is com an√°lises.</font></font><img src="https://habrastorage.org/webt/kp/_9/1d/kp_91dhvq_ane41aqkipyovzkwe.png"></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O diagrama abaixo mostra os componentes do front-end e como eles interagem entre si. </font><font style="vertical-align: inherit;">O cliente da Web e o editor de bot s√£o usados ‚Äã‚Äãapenas no contexto de outros aplicativos, enquanto se o editor √© usado apenas em nossos aplicativos, o cliente da Web tamb√©m pode ser usado pelos nossos clientes como um m√≥dulo da Web. </font><font style="vertical-align: inherit;">Ao criar o projeto, pacotes com Webclient e Editor s√£o adicionados aos aplicativos Dashboard e Admin. </font><font style="vertical-align: inherit;">Al√©m disso, o m√≥dulo da web √© constru√≠do usando o webpack para entrega aos usu√°rios.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kt/ys/uq/ktysuqp6v_dlfhvhsu0pcjz5q-u.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVP 1. Cliente da Web</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como uma startup, sempre nos esfor√ßamos para alcan√ßar o m√°ximo de resultados usando um m√≠nimo de recursos. Parece-me que um passo bastante l√≥gico para o primeiro MVP foi a cria√ß√£o de um cliente da Web do ponto de vista que representava a ‚Äúface do produto‚Äù, mostrava o resultado do trabalho do designer, e n√£o o processo de cria√ß√£o do bot - uma x√≠cara de caf√©, n√£o uma m√°quina de caf√©. Para minimizar o tempo de desenvolvimento da solu√ß√£o, decidimos procurar bibliotecas adequadas aos nossos pedidos e, de repente, encontramos! </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lucasbassetti.com.br/react-simple-chatbot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um componente de rea√ß√£o que cobriu quase todas as nossas necessidades!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse componente sugeriu descrever a l√≥gica do chatbot na forma de uma matriz de etapas, ler os valores inseridos pelos usu√°rios, personalizar a apar√™ncia, validar os dados e parecer suficientemente flex√≠vel para come√ßar. </font><font style="vertical-align: inherit;">A descri√ß√£o das etapas mais simples se parece com isso:</font></font><br>
<br>
<pre><code class="json hljs">&lt;ChatBot<font></font>
      steps={[<font></font>
        {<font></font>
          id: '<span class="hljs-number">1</span>',<font></font>
          message: 'What is your name?',<font></font>
          trigger: '<span class="hljs-number">2</span>',<font></font>
        },<font></font>
        {<font></font>
          id: '<span class="hljs-number">2</span>',<font></font>
          user: <span class="hljs-literal">true</span>,<font></font>
          trigger: '<span class="hljs-number">3</span>',<font></font>
        },<font></font>
        {<font></font>
          id: '<span class="hljs-number">3</span>',<font></font>
          message: 'Hi {previousValue}, nice to meet you!',<font></font>
          end: <span class="hljs-literal">true</span>,<font></font>
        },<font></font>
      ]}<font></font>
    /&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come√ßamos tentando compor um chatbot apresentando nosso projeto, cujo mapa mental estava na tela no in√≠cio do artigo. </font><font style="vertical-align: inherit;">Naturalmente, descrever manualmente esse json acabou sendo bastante inconveniente, e eu tive que escrever muitas fun√ß√µes personalizadas, mas, em geral, esse processo deu uma compreens√£o de como o componente funciona, como alcan√ßar o resultado desejado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, meu colega personalizou a apar√™ncia, fez v√°rias op√ß√µes de exibi√ß√£o e inventamos um exemplo com uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">barbearia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e uma exposi√ß√£o de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Van Gogh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Voc√™ pode at√© perceber que nem pensamos em otimiza√ß√£o de imagens. </font><font style="vertical-align: inherit;">Sim, foi e n√£o foi necess√°rio. </font><font style="vertical-align: inherit;">No processo de trabalho, formamos uma vis√£o aproximada de como o cliente funcionar√° e come√ßamos a procurar solu√ß√µes para o pr√≥prio designer, a fim de aproveitar os benef√≠cios da edi√ß√£o visual o mais r√°pido poss√≠vel.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVP 2. Construtor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base no que vimos ao trabalhar com o cliente, conclu√≠mos geral que o bot pode ter v√°rios tipos de a√ß√µes: enviar algo, aguardar a√ß√µes do usu√°rio, enviar uma solicita√ß√£o para um servi√ßo externo. </font><font style="vertical-align: inherit;">Para um editor de bot minimamente vi√°vel, decidimos nos limitar a blocos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iniciar - uma unidade t√©cnica que inicia uma nova sess√£o</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fim - bloco que termina a sess√£o</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensagem - ao alcan√ßar o bloco, o bot envia a mensagem especificada no corpo do bloco</font></font></li>
<li>   ‚Äî      .       ,      </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supunha-se que os blocos seriam interconectados por setas ou linhas. Todos os blocos, exceto o bloco ‚ÄúStart‚Äù, t√™m uma porta de entrada (soquete). Muitas linhas podem se conectar √† porta de entrada, conectando a unidade a outras. Todos os blocos, exceto o bloco End, t√™m de uma a v√°rias portas de sa√≠da. As portas de sa√≠da determinam para qual controle de bloco √© transferido ap√≥s a conclus√£o da l√≥gica do bloco atual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s uma breve inspe√ß√£o das solu√ß√µes dispon√≠veis, decidimos pelo Rete.js (https://rete.js.org). Eu me familiarizei com a documenta√ß√£o, exemplos e encontrei neles tudo o que precis√°vamos para come√ßar. Eles at√© tiveram um exemplo apenas com um bot de bate-papo, que foi o √∫ltimo gatilho</font></font><br>
<br>
<blockquote> Rete                .       . ,    ‚Äî  ,    JSON </blockquote><br>
<br>
<img src="https://habrastorage.org/webt/pa/tz/5e/patz5emykn7nicpa2sjrujjo-dg.png" alt="N√≥ no Rete.js"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os n√≥s podem conter um nome, entradas, sa√≠das e controles. As entradas e sa√≠das devem estar localizadas √† esquerda e √† direita do n√≥, respectivamente (para n√≥s customizados, pode haver exce√ß√µes). Eles s√£o representados por um soquete e podem ter nomes. Para as entradas, permitimos um n√∫mero ilimitado de conex√µes (existem muitas maneiras de chegar ao n√≥); para a sa√≠da, nos limitamos a apenas uma conex√£o; no entanto, ao contr√°rio dos soquetes de entrada, alguns blocos t√™m muitos soquetes de sa√≠da. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Rete.js √© constru√≠do de tal maneira que sua funcionalidade √© expandida atrav√©s da cria√ß√£o de n√≥s, controles e componentes personalizados, o que nos permitiu obter rapidamente exatamente a imagem que quer√≠amos ver, pela qual </font><font style="vertical-align: inherit;">agrade√ßo aos </font><font style="vertical-align: inherit;">criadores do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rete</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! Obviamente, um dos mais importantes √© um editor pronto! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conforme escrito em</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um editor √© uma √°rea com n√≥s e conex√µes entre seus soquetes. </font><font style="vertical-align: inherit;">As seguintes op√ß√µes est√£o dispon√≠veis:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intera√ß√£o com o espa√ßo de trabalho (movimenta√ß√£o, dimensionamento) e gerenciamento de n√≥s (movimenta√ß√£o, adi√ß√£o, exclus√£o)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exibi√ß√£o de conex√µes, n√≥s, suas entradas / sa√≠das e controles</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manipula√ß√£o de eventos do editor</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquema de importa√ß√£o / exporta√ß√£o no formato JSON</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estendendo a funcionalidade com plugins</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personaliza√ß√£o da √°rea de trabalho, n√≥s e conex√µes</font></font></li>
</ul><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo conjurado um pouco com Rete e estudado em exemplos mais detalhados, conseguimos criar algo que nos permitia criar e excluir blocos ‚Äúiniciar‚Äù, ‚Äúfinal‚Äù, ‚Äúmensagem‚Äù e ‚Äúentrada de teclado‚Äù. </font><font style="vertical-align: inherit;">Na sa√≠da, recebemos json com uma descri√ß√£o dos n√≥s, soquetes e linhas que os conectam. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/ul/kb/qyulkb_ydgahfqvgmcgxtazqmmy.jpeg" alt="Uma das primeiras vers√µes do editor"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J√° √© alguma coisa, mas isso n√£o √© suficiente, porque nosso cliente da web n√£o entende esse json. </font><font style="vertical-align: inherit;">Ele precisa de algum tipo de descri√ß√£o, com a descri√ß√£o das etapas. </font><font style="vertical-align: inherit;">Decidiu-se incorporar um conversor de um formato json para outro no cliente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transformador Json</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O utilit√°rio recebe o NodesMap, compilado pelo editor, como entrada e retorna um StepsMap que o cliente entende. O c√≥digo de todo o transformador leva um pouco mais de 100 linhas, dependendo do tipo de n√≥ e dos dados, nele s√£o criados um passo adequado, fun√ß√µes de acionamento e um conjunto de instru√ß√µes (a√ß√µes) a serem executadas neste passo. Existem instru√ß√µes que salvam a vari√°vel no estado chatbot, h√° aquelas que substituem a vari√°vel no texto ou enviam uma solicita√ß√£o ao nosso servidor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de amarrar os componentes, come√ßamos a testar as ferramentas resultantes. </font><font style="vertical-align: inherit;">Mesmo sem o back-end, foi muito emocionante. </font><font style="vertical-align: inherit;">Criamos di√°logos no editor e inserimos o json no cliente por meio de ferramentas de desenvolvimento, e, como resultado, recebemos um bot que diz como precisamos dele! </font><font style="vertical-align: inherit;">Ele tamb√©m sabe como salvar vari√°veis ‚Äã‚Äãe us√°-las, droga! </font><font style="vertical-align: inherit;">Grandes sensa√ß√µes das primeiras vit√≥rias ... O mosaico do dispositivo de nossa aplica√ß√£o j√° se formou praticamente na minha cabe√ßa, conseguimos algo trabalhando nos princ√≠pios que queremos usar no futuro. </font><font style="vertical-align: inherit;">Temos um certo esqueleto em torno do qual restava construir "carne". </font><font style="vertical-align: inherit;">E o mais importante - ficou claro como fazer isso:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mude o editor, adicione o tipo de n√≥ desejado</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensinamos json transformador a transformar um novo n√≥ em uma nova etapa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensinamos o cliente a trabalhar com uma nova etapa</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por outro lado, foi necess√°rio come√ßar a se envolver na conta pessoal do usu√°rio para que fosse poss√≠vel criar bots, salv√°-los, gerenciar e decidimos nos concentrar nisso para mostrar rapidamente aos usu√°rios n√£o um conceito, mas um produto.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conta de usu√°rio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As bibliotecas acima executaram determinadas fun√ß√µes relacionadas √† cria√ß√£o da l√≥gica do chatbot (editor), sua interpreta√ß√£o ou sua reprodu√ß√£o (cliente). Os problemas de armazenamento de dados, a capacidade de carregar bots criados, gerenciando-os e definindo propriedades n√£o relacionadas √† l√≥gica permaneceram em aberto e o aplicativo deveria ter resolvido-os para os usu√°rios. Armado com </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blueprintJS,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> esbo√ßamos um prot√≥tipo de uma </font><b><font style="vertical-align: inherit;">conta</font></b><font style="vertical-align: inherit;"> pessoal na qual era poss√≠vel registrar e criar v√°rios bots. Quando voc√™ clica no bot para criar uma pessoa, ele cai no editor com um novo bot e quando voc√™ clica no cart√£o de bot no editor com esse bot. Decidimos confiar as fun√ß√µes de carregar e salvar o bot por meio da API do nosso back-end nessa camada para deixar o editor de bot independente do back-end.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/0h/ip/vu0hippebcgv2huzg9tkbb3rq1e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O aplicativo da conta do usu√°rio pode fazer o download do pacote do editor e transferir dados prontos para exibi√ß√£o. Este aplicativo tamb√©m gerencia formul√°rios para definir propriedades do bot (nome, teclas da API, avatar, configura√ß√µes de publica√ß√£o) e permite visualizar estat√≠sticas. Para permitir que os usu√°rios vejam imediatamente o resultado do editor, adicionamos um cliente da Web ao escrit√≥rio do usu√°rio, ao qual atribu√≠mos o esquema do json bot, ele o interpreta em etapas e o reproduz na guia "preview". Em geral, este √© um painel de administra√ß√£o muito cl√°ssico, com alguns componentes interessantes (editor de bot e cliente da web), acho que muitos o fizeram. Mas foi nessa fase que se tornou visivelmente inconveniente desenvolver nosso aplicativo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, pareceu-nos uma boa id√©ia conter os componentes do produto em diferentes reposit√≥rios e n√£o vimos nenhum problema espec√≠fico nisso. No entanto, rapidamente ficou claro que manter muitos reposit√≥rios atualizados √© problem√°tico, sem mencionar a necessidade de dan√ßar com um pandeiro durante o desenvolvimento, porque eles s√£o, at√© certo ponto, interdependentes. E, considerando que t√≠nhamos apenas um desenvolvedor em per√≠odo integral, essa abordagem foi um grande furac√£o. E qualquer implanta√ß√£o se transformou em um ramo do inferno na Terra por causa da diferen√ßa na montagem e publica√ß√£o de bibliotecas, aplicativos, problemas de compatibilidade com vers√µes anteriores. Da√≠ a conclus√£o banal, mas n√£o a mais in√∫til: a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aloca√ß√£o prematura de m√≥dulos pode fazer mais mal do que ajudar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J√° me convenci disso muitas vezes no back-end, e aqui vim novamente, mas na frente. Sim, e n√£o perdi uma chance no back-end: =) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dos meus colegas reuniu sua vontade em um punho e combinou tudo em um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reposit√≥rio mono</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gerenciado com </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lerna</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Agora, nosso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√∫nico reposit√≥rio front-end est√°</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dividido em pacotes: admin, cliente, comum, painel, editor, m√≥dulo da web. Eles podem ter um assembly diferente dentro, mas o lerna permite que eles vinculem e atualizem depend√™ncias entre pacotes. Depois disso, o desenvolvimento e a implanta√ß√£o do front-end se tornaram muito mais r√°pidos e f√°ceis, tudo est√° imediatamente √† m√£o, mas ainda est√° dividido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de criar o gabinete, passamos algum tempo em novos blocos no editor e seu processamento pelo cliente:</font></font><br>
<br>
<ul>
<li> ‚Äî       .           ( ),                </li>
<li> ‚Äî     -  </li>
<li>Email ‚Äî  email   </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o tenho muito o que dizer sobre o painel de administra√ß√£o e o m√≥dulo da web, tudo √© muito padr√£o l√°. </font><font style="vertical-align: inherit;">Quero apenas observar que o painel de administra√ß√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tamb√©m n√£o deve ser feito com anteced√™ncia</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Temos, mas ningu√©m o usa, porque, pessoalmente, n√£o √© dif√≠cil ver tudo o que me interessa imediatamente no banco de dados. </font><font style="vertical-align: inherit;">N√£o h√° humanidades que precisem do nosso painel de administra√ß√£o na equipe, e mant√™-lo atualizado √© essencialmente um pouco menos caro do que manter a conta de um usu√°rio. </font><font style="vertical-align: inherit;">Com o tempo, um painel simples foi adicionado l√°, exibindo pagamentos, novos registros e visitas do aplicativo, mas essas informa√ß√µes dificilmente valem o desenvolvimento de um administrador inteiro. </font><font style="vertical-align: inherit;">pain√©is com tabelas, formul√°rios e autentica√ß√£o separada</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conseguimos criar prot√≥tipos e p√°ginas de destino muito rapidamente. Sim, n√£o era o que muitos imaginam sob o disfarce de MVP. Mas apenas algumas noites ap√≥s a id√©ia surgir, poder√≠amos come√ßar a mostr√°-la √†s pessoas e test√°-la. Diferentes p√°ginas de destino, an√∫ncios, textos no bot - poder√≠amos testar e pesquisar. Eu recomendo que qualquer pessoa envolvida no desenvolvimento de inicializa√ß√£o pense em como fazer as coisas o mais r√°pido poss√≠vel. Fizemos o primeiro produto para extrair valor em cerca de tr√™s meses e, em seguida, um processo mais gradual de melhoria regular come√ßou. Obviamente, agora temos mais blocos dentro do construtor, adicionamos valida√ß√£o, tipos de dados, solicita√ß√µes GET e POST, muitas configura√ß√µes de design e exibi√ß√£o, mas voc√™ pode come√ßar sem tudo isso, o que fizemos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com o tempo, o sistema come√ßou a se tornar mais complexo e evoluir, e eu n√£o consegui descrever nem de perto tudo o que realmente est√° acontecendo. Comece pequeno, as coisas ficam complicadas com o tempo, quando necess√°rio. Qualquer componente extra pode resultar em um custo muito alto, porque n√£o √© apenas necess√°rio criar e integrar, mas tamb√©m oferecer suporte, testar, documentar, implantar, monitorar, apresentar outros membros da equipe a ele. Provavelmente voc√™ n√£o deve se preocupar com filas no RabbitMQ, se antes n√£o havia filas no seu aplicativo. Provavelmente, solu√ß√µes baseadas em tecnologias que j√° existem ser√£o suficientes para come√ßar. Qualquer novo componente √© um custo adicional para integra√ß√£o, opera√ß√£o, teste, suporte, documenta√ß√£o, implanta√ß√£o, etc., etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que minha experi√™ncia seja √∫til para pelo menos algu√©m. </font><font style="vertical-align: inherit;">Durante muito tempo, tentei descobrir qual hub determinaria isso, mas n√£o entendi. </font><font style="vertical-align: inherit;">Deixe-me saber se vale a pena escrever a segunda parte em que eu queria falar um pouco sobre o back-end, servi√ßos externos e planos de desenvolvimento</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt487340/">https://habr.com/ru/post/pt487340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487324/index.html">Agregador de not√≠cias de duas semanas</a></li>
<li><a href="../pt487326/index.html">Software de teste de automa√ß√£o QIWI-terminais</a></li>
<li><a href="../pt487332/index.html">Teste as l√¢mpadas LED Ergolux baratas</a></li>
<li><a href="../pt487334/index.html">Como "remoto" melhora a colabora√ß√£o</a></li>
<li><a href="../pt487336/index.html">Unidade - Habilite Multidex ou Muitos M√©todos</a></li>
<li><a href="../pt487342/index.html">Li√ß√£o # 2 - Reuni√µes e Eventos</a></li>
<li><a href="../pt487346/index.html">Casos para usar ferramentas de an√°lise de anomalias de rede: detec√ß√£o de vazamentos</a></li>
<li><a href="../pt487348/index.html">Classifica√ß√£o de tarefas priorit√°rias - aplicativo IL TEMPO</a></li>
<li><a href="../pt487356/index.html">Voc√™ vai mudar? Pense de novo</a></li>
<li><a href="../pt487358/index.html">BERT, ELMO e Co. em imagens (como o treinamento de transfer√™ncia chegou √† PNL)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>