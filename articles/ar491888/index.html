<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฉ๐พโ๐คโ๐จ๐ฝ ๐ฉ๐ปโ๐คโ๐จ๐ฝ GitLab CI: 6 ููุฒุงุช ูู ุฃุญุฏุซ ุงูุฅุตุฏุงุฑุงุช ุงูุชู ููุชุธุฑูุง ๐บ๐ผ ๐คฒ๐ป ๐คฉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุนุตุฑ CI / CD ูู ูู ููุงู ุ ููุงุฌู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุฃุฏูุงุช ุฐุงุช ุงูุตูุฉ ุ ุจูุง ูู ุฐูู ุฃูุธูุฉ CI. ููุน ุฐูู ุ ูุงู GitLab ูู ุงูุฃูุฑุจ ุจุงููุณุจุฉ ููุง ุ ุญููุง "ููุงุทู". ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>GitLab CI: 6 ููุฒุงุช ูู ุฃุญุฏุซ ุงูุฅุตุฏุงุฑุงุช ุงูุชู ููุชุธุฑูุง</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/491888/"><img src="https://habrastorage.org/webt/gw/s2/_l/gws2_lpk_xse3zwysoxi7yhgedi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุนุตุฑ CI / CD ูู ูู ููุงู ุ ููุงุฌู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุฃุฏูุงุช ุฐุงุช ุงูุตูุฉ ุ ุจูุง ูู ุฐูู ุฃูุธูุฉ CI. ููุน ุฐูู ุ ูุงู GitLab ูู ุงูุฃูุฑุจ ุจุงููุณุจุฉ ููุง ุ ุญููุง "ููุงุทู". ุงูุชุณุจ ุดุนุจูุฉ ููุญูุธุฉ ูู ุงูุตูุงุนุฉ ููู *. ูู ูุชุฎูู ูุทูุฑู ุงูููุชุฌ ุนู ุงูุงูุชูุงู ุงููุชุฒุงูุฏ ุจุงุณุชุฎุฏุงูู ุ ููุง ูุณุนุฏ ูุฌุชูุน ุงููุทูุฑูู ููููุฏุณู DevOps ุจุงูุชุธุงู ุจุฅุตุฏุงุฑุงุช ุฌุฏูุฏุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/le/lp/fl/lelpfl_26qkmpjz5qf5cjq4bbd0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดูุฑ ูุณุชูุฏุน GitLab ูุชุฌููุน ุงูุนูุงูุงุช</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GitLab ูู ุงูุญุงู ุนูุฏูุง ูุฌูุจ ุงูุชุทููุฑ ุงููุดุท ุงูุนุฏูุฏ ูู ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ูุงููุซูุฑุฉ ููุงูุชูุงู. ุฅุฐุง ูุงู ูุฐุง ุจุงููุณุจุฉ ุฅูู ุงููุณุชุฎุฏููู ุงููุญุชูููู ูู ุฃุญุฏ ุนูุงูู ุงุฎุชูุงุฑ ุงูุฃุฏุงุฉ ุ ุจุงููุณุจุฉ ููุฃุฏูุงุช ุงูููุฌูุฏุฉ ุ ูุฅู ุงููุถุน ูู ูุง ููู: ุฅุฐุง ูู ุชูู ุจุชุญุฏูุซ ุชุซุจูุช GitLab ูู ุงูุดูุฑ ุงููุงุถู ุ ูุนูุฏุฆุฐู ูุน ุงุญุชูุงู ูุจูุฑ ูุงุชู ุดูุก ูุซูุฑ ููุงูุชูุงู. ุจูุง ูู ุฐูู ุชุญุฏูุซุงุช ุงูุฃูุงู ุงููุงุดุฆุฉ ุจุงูุชุธุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญูู ุงูุฃูุซุฑ ุฃูููุฉ - ุนูู ุณุจูู ุงููุซุงู ูุทููุจ ูู ูุจู ูููุฏุณู DevOps ูุนููุงุฆูุง - ุงุจุชูุงุฑุงุช ูู ุฃุญุฏุซ ุฅุตุฏุงุฑุงุช ุทุจุนุฉ ุงููุฌุชูุน ูู GitLab ุ ูุณูุชู ููุงูุดุฉ ูุฐู ุงูููุงูุฉ.</font></font><a name="habracut"></a><br>
<br>
<i>*   5  ,  ยซGitLabยป,   : ยซ,   GitHub?ยป.     โ ,  Google Trends <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>  5-    ยซgitlabยป   .     ยซยป  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>.     ,   ,     ยซยป   .</i><br>
<br>
<h2>โ1: needs</h2><br>
<ul>
<li>     job'.</li>
<li>    GitLab: 12.2.</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>dependencies</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุฐุง ูุง ุชุญุชุงุฌูุ ุนูู ุงูุฃุฑุฌุญ ุ ูู ููู ุงููุญูุฏูู ุงูุฐูู ุงุฑุชูุจูุง ุฎุทุฃ ุชุนููู ูุฐุง ุงูุชูุฌูู ... ููุงู ุญุงุฌุฉ ุฅูู ุณุฑุฏ ุงููุธุงุฆู ุงูุณุงุจูุฉ ุ </font><font style="vertical-align: inherit;">ูุงูุชู ุณุชููู ููุงู ุญุงุฌุฉ </font><font style="vertical-align: inherit;">ุฅูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุทุน ุงูุฃุซุฑูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฅููุง ูุทุน ุฃุซุฑูุฉ ุ ูููุณ ุงูุงุนุชูุงุฏ ุนูู ุฃุฏุงุก ุงููููุฉ ุงูุณุงุจูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุชุฑุถ ุฃูู ุญุฏุซ ูู ูุฑุญูุฉ ูุงุญุฏุฉ ูุธุงุฆู ููุณุช ุถุฑูุฑูุฉ ูุฃุฏุงุกูุง ุ ูููู ูุณุจุจ ูุง ูุง ุชูุฌุฏ ุฅููุงููุฉ ุฃู ูุฌุฑุฏ ุงูุฑุบุจุฉ ูู ููููู ุฅูู ูุฑุญูุฉ ูููุตูุฉ (ุงููุณู ูู ูุญุฑู ุงูุชูุฏู ุ ูููู ูุง ุชูุฌุฑู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุญุงูุฉ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_u/sa/k1/_usak1lrpdqpjtxln69r3ktc5ag.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑู ุ </font><font style="vertical-align: inherit;">ุชุญุชูู </font><font style="vertical-align: inherit;">ูุฑุญูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดุฑ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุฃุฒุฑุงุฑ ูุทุฑุญ ูู ูู ุงูุฅูุชุงุฌ ูุงููุฑุญูุฉ </font><i><font style="vertical-align: inherit;">ูุงุฎุชุจุงุฑุงุช ุงูุณููููููู</font></i><font style="vertical-align: inherit;"> ุงููุธูููุฉ</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุจุจ ูุง ูู ูุชู ุชูููุฐ. </font><font style="vertical-align: inherit;">ุงูุฃูุฑ ุจุณูุท: ุฅูู ููุชุธุฑ ุญุชู ุชูุชูู ุฌููุน ุงููุธุงุฆู ูู ุงููุฑุญูุฉ ุงูุณุงุจูุฉ ุจูุฌุงุญ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูู ุฅุทุงุฑ ููุณ ุฎุท ุงูุฃูุงุจูุจ ุ ูุง ูุญุชุงุฌ ุฅูู ูุดุฑ ุงููุฑุญูุฉ ุงูุขู ูุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช (ุชู ุถุฎูุง ูู ููุช ุณุงุจู ูููุณ ุถูู ุงูุนูุงูุฉ). </font><font style="vertical-align: inherit;">ูุงุฐุง ุฃูุนูุ </font><font style="vertical-align: inherit;">ุซู ุชุนุงู ุฅูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุญุชูุงุฌุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅููุงุฐ </font><font style="vertical-align: inherit;">! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏุฑุฌ ููุท ุงููุธุงุฆู ุงูุณุงุจูุฉ ุงููุงุฒูุฉ ูุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุชูุง:</font></font><br>
<br>
<pre><code class="plaintext hljs">  needs:<font></font>
    - To production (Cluster 1)<font></font>
    - To production (Cluster 2)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ููุญุตู ุนูู ูุธููุฉ ุ ูุงูุชู ูุชู ุงุณุชุฏุนุงุคูุง ุชููุงุฆููุง ุจุนุฏ ุชูููุฐ ุงูููุงู ุงููุฏุฑุฌุฉ ููุท: ุจุดูู </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/9y/8z/jm9y8zesapj3neflq_xmn7er70i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุฆู ุ ุฃููุณ ูุฐููุ </font><font style="vertical-align: inherit;">ูููู ุจูุฌุฑุฏ ุฃู ุชููุนุช ุฃู ุงูุชูุฌูู ุณูุนูู ุนูู ุดูุก ูุซู ูุฐุง </font></font><code>dependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูู 2: ููุชุฏ</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนุฒูุฒ ุงููุฑุงุณู ูุงูุฃุณูุงุก ุงููุณุชุนุงุฑุฉ ูู YAML.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏู ููุฐ GitLab 11.3.</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.gitlab.com/ce/ci/yaml/#extends</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุจุช ูู ูุฑุงุกุฉ ุงูููุงุฆู </font></font><code>.gitlab-ci.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูู ุชูุชูุฏ ูุจุฏุฃ ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุฑูุฒุ ุซู ุญุงููุช ุจุงููุนู ูุฑุจูุง ูุฌุญุช ูู ุฅุญุถุงุฑ ุฏููุชู </font></font><code>.gitlab-ci.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ุญุงูุฉ ูุซู ูุฐู:</font></font><br>
<br>
<pre><code class="plaintext hljs">.base_deploy: &amp;base_deploy<font></font>
  stage: deploy<font></font>
  script:<font></font>
    - my_deploy_command.sh<font></font>
  variables:<font></font>
    CLUSTER: "default-cluster"<font></font>
    MY_VAR: "10"<font></font>
<font></font>
Deploy Test:<font></font>
  &lt;&lt;: *base_deploy<font></font>
  environment:<font></font>
    url: test.example.com<font></font>
    name: test<font></font>
<font></font>
Deploy Production:<font></font>
  &lt;&lt;: *base_deploy<font></font>
  environment:<font></font>
    url: production.example.com<font></font>
    name: production<font></font>
  variables:<font></font>
    CLUSTER: "prod-cluster"<font></font>
    MY_VAR: "10"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุนุธููุงุ ููุน ุฐูู ุ ุฅุฐุง ูุธุฑุช ุนู ูุซุจ ุ ููุงู ุดูุก ูููุช ุงูุชุจุงูู ... ููุงุฐุง ุชุบูุฑูุง ูู ุงูุฅูุชุงุฌ ููุณ ููุท </font></font><code>variables.CLUSTER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ุฃูุถูุง ุชู ูุตูู ูุฑุฉ ุฃุฎุฑู </font></font><code>variables.MY_VAR=10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูู ูุฌุจ ุฃุฎุฐ ูุฐุง ุงููุชุบูุฑ ูู </font></font><code>base_deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุงุชุถุญ ุฃูู ูุง ููุจุบู: YAML ูุนูู ุจุญูุซุ ุฅุนุงุฏุฉ ูุง ุชุณููู ูู ูุฑุณุงุฉุ ูุฅูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุนุธูู ูุชูููุน</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุชููุงุช ุงูุญููู ุงููุทุงุจูุฉุ ูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุญูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฐูู ุ ูุญู ูุถุทุฑูู ูุณุฑุฏ ุงููุชุบูุฑุงุช ุงููุนุฑููุฉ ููุง ุจุงููุนู ูู ุงูููุฑุฉ ุงููุทุงุจูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนู ุ "ุชูุณูุน" ูู ุงููููุฉ ุงูุตุญูุญุฉ: ูุฐุง ูู ุจุงูุถุจุท ูุง ูุทูู ุนููู ุงูููุฒุฉ ุงููุนููุฉ. </font></font><code>Extends</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅููุง ุชุณูุญ ููุง ููุณ ููุท ุจุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุญูู ุ ููุง ูุญุฏุซ ูุน ุงูุงุฑุชุณุงุก ุ ูููู ูุฅุฌุฑุงุก ุฏูุฌ ุฐูู ูู:</font></font><br>
<br>
<pre><code class="plaintext hljs">.base_deploy: <font></font>
  stage: deploy<font></font>
  script:<font></font>
    - my_deploy_command.sh<font></font>
  variables:<font></font>
    CLUSTER: "default-cluster"<font></font>
    MY_VAR: "10"<font></font>
<font></font>
Deploy Production:<font></font>
  extends: .base_deploy<font></font>
  environment:<font></font>
    url: production.example.com<font></font>
    name: production<font></font>
  variables:<font></font>
    CLUSTER: "prod-cluster"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูู ุงููููุฉ ุงูููุงุฆูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุฑ ุงูุฅูุชุงุฌ ุ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูููู </font><i><font style="vertical-align: inherit;">ููุงู</font></i><font style="vertical-align: inherit;"> ูุชุบูุฑ </font></font><code>MY_VAR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูููุฉ ุงูุชุฑุงุถูุฉ ูุฃุฎุฑู ูุชุฌุงูุฒุฉ </font></font><code>CLUSTER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃู ูุฐุง ุชุงูู ุ ููู ุชุฎูู: ูุฏูู </font></font><code>base_deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงุฆุฑุฉ </font><font style="vertical-align: inherit;">ูุงุญุฏุฉ </font><font style="vertical-align: inherit;">ู 20 ุฏุงุฆุฑุฉ ููุชุดุฑุฉ ุจุดูู ูุดุงุจู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชู ุชูุฑูุฑูุง ุฅูู ุงูุขุฎุฑูู </font></font><code>cluster</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>environment.name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงูุญูุงุธ ุนูู ูุฌููุนุฉ ูุนููุฉ ูู ุงููุชุบูุฑุงุช ุฃู ุงูุญููู ุงููุทุงุจูุฉ ุงูุฃุฎุฑู ... ุณูุญุช ููุง ูุฐู ุงููุชุนุฉ ุงูุตุบูุฑุฉ ุจุชูููู ูุตู ูุดุฑ ูุฌููุนุฉ ุฏูุงุฆุฑ ุงูุชุทููุฑ ุจููุฏุงุฑ 2-3 ูุฑุงุช.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูู 3: ูุดูู</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณู YAML ุถุฎูุฉ ุฅูู ุนุฏุฉ ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ูู ูุดุงุฑูุน ุฃุฎุฑู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชู ุชูุฏููู ูู Core ููุฐ ุงูุฅุตุฏุงุฑ 11.4.</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.gitlab.com/ce/ci/yaml/#include</font></font></a></li>
</ul><br>
<code>.gitlab-ci.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุฒุงู ูุจุฏู </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฃูู ุชุนูููุงุช ูุงุจูุฉ ููุทู ููููุณุฉ ููุฑุจุงุฆูุฉ ุจู 20 ูุบุฉ (ูุง ุชููู ูููุง ุณูู ูุบุชู ุงูุฃู) ูู</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ูู ุงูุตุนุจ ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุงูุชุนุงูู ูุน ุฃุญุฏ ุฃูุณุงููุง ุฏูู ุชุบููุฑ ูู ููุงุฌูุฉ ุงููุธุงุฆู ุบูุฑ ุงููุนุฑููุฉ ุงูุชู ุชูุงุฌููุง ูู ุงูุทุฑููุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูู ูุณุงุนุฏ ุตุฏูู ุงูุจุฑูุฌุฉ ููุฐ ูุชุฑุฉ ุทูููุฉ </font></font><code>include</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">stages:<font></font>
  - test<font></font>
  - build<font></font>
  - deploy<font></font>
<font></font>
variables:<font></font>
  VAR_FOR_ALL: 42<font></font>
<font></font>
include:<font></font>
  - local: .gitlab/ci/test.yml<font></font>
  - local: .gitlab/ci/build.yml<font></font>
  - local: .gitlab/ci/deploy-base.yml<font></font>
  - local: .gitlab/ci/deploy-production.yml</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุฆู. </font><font style="vertical-align: inherit;">ูููู ุงูุขู ุจุชุญุฑูุฑ ุงููุดุฑ ูู ุงูุฅูุชุงุฌ ุจุฌุฑุฃุฉ ุ ุจูููุง ููุดุบู ุงููุฎุชุจุฑูู ุจุชุนุฏูู ููููู ุ ูุงูุฐู ูุฏ ูุง ููุธุฑ ุฅููู ุญุชู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุณุงุนุฏ ูุฐุง ุนูู ุชุฌูุจ ุฏูุฌ ุงูุชุนุงุฑุถุงุช: ููุณ ูู ุงูููุชุน ุฏุงุฆููุง ููู ุฑูุฒ ุดุฎุต ุขุฎุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุงุฐุง ูู ููุง ูุนุฑู ุฎุท ุฃูุงุจูุจ ูุดุงุฑูุนูุง ุงูุนุดุฑูู ุนูู ุทูู ูุนุจุฑ ุ ููู ูููููุง ุดุฑุญ ููุทู ูู ูุธููุฉ ูููุงุ </font><font style="vertical-align: inherit;">ููู ุณูุณุงุนุฏูุง ุฐููุ </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ุญูููุง ุงูุชูููุฑ ูู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุฌููุน ุงูุฐูู ูุฏููู ุงูุนุฏูุฏ ูู ุงููุดุงุฑูุน ุงูููุงุซูุฉ ุ ููููู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">include: file</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุถููู ูููุงุช GitLab CI ูู ูุณุชูุฏุน ุขุฎุฑ ูููุณ ูุซูู GitLab ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ูุงูุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุฌููุนุงุช ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงูุจ GitLab ุงูุฌุงูุฒุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ููู: ุนู ุจุนุฏ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ููู ุฎุงุฑุฌู (ูููู ุงููุตูู ุฅููู ุนุจุฑ HTTPS).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุดุฑุงุช ูู ููุณ ุงูููุน ูู ุงููุดุงุฑูุน ุจุฑูุฒ ูุฎุชูู ุ ูููู ุชู ูุดุฑูุง ุจููุณ ุงูุทุฑููุฉ - ุจุณูููุฉ ูุฏูู ุงูุญูุงุธ ุนูู ุฃุญุฏุซ CI ูู ุฌููุน ุงููุณุชูุฏุนุงุช! </font><i><font style="vertical-align: inherit;">ุชู ุฅุนุทุงุก </font></i></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงู ููุงุณุชุฎุฏุงู ุงูุนููู </font></font><code>include</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถูุง ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ุงูููุงูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูู 4: ููุท / ุจุงุณุชุซูุงุก ุงููุฑุฌุน</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุดุฑูุท ุดุงููุฉ ุ ุจูุง ูู ุฐูู ุงููุชุบูุฑุงุช ูุชุบููุฑุงุช ุงูููู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐู ูุฌููุนุฉ ูุงููุฉ ูู ุงููุธุงุฆู ุ ููุฏ ุจุฏุฃุช ุจุนุถ ุงูุฃุฌุฒุงุก ูู ุงูุธููุฑ ูู GitLab 10.0 ุ ุจูููุง ุจุฏุฃุช ุฃุฌุฒุงุก ุฃุฎุฑู (ุนูู ุณุจูู ุงููุซุงู </font></font><code>changes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">ูู ุงูุธููุฑ ูู </font><font style="vertical-align: inherit;">11.4.</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.gitlab.com/ce/ci/yaml/#onlyexcept-advanced</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุญูุงููุง ูุจุฏู ูู ุฃู ูุฐุง ููุณ ุฎุท ุฃูุงุจูุจ ูุณุชูุน ุฅูููุง ุ ููููุง ูุญู. </font><font style="vertical-align: inherit;">ุชู </font><font style="vertical-align: inherit;">ุฏูุฌ </font></font><code>only</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>except</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">ุฃุฏุงุฉ ุฅุฏุงุฑุฉ ููุชุงุฒุฉ </font><font style="vertical-align: inherit;">ุงูุขู. </font><font style="vertical-align: inherit;">ูุงุฐุง ูุนูู ูุฐุงุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุจุณุท ุงูุญุงูุงุช (ูุฑุจูุง ุงูุฃูุซุฑ ูุชุนุฉ) ุ ูุฑุงุญู ุงูุชุฎุทู:</font></font><br>
<br>
<pre><code class="plaintext hljs">Tests:<font></font>
  only:<font></font>
    - master<font></font>
  except:<font></font>
    refs:<font></font>
    - schedules<font></font>
    - triggers<font></font>
    variables:<font></font>
    - $CI_COMMIT_MESSAGE =~ /skip tests/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููููุฉ ุงููููุฐุฌูุฉ ุ ูุชู ุชุดุบูููุง ููุท ุนูู ูุฑุน ุฑุฆูุณู ุ ูููู ูุง ูููู ุชุดุบูููุง ูู ุฎูุงู ุฌุฏูู ุฃู ูุดุบู (ูุดุงุฑู GitLab ููุงููุงุช ููุดุบูุงุช ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูู ูู ุงูุฃุณุงุณ ููุณ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช). </font><font style="vertical-align: inherit;">ูู ูุชู ุชูููุฐ ุงููููุฉ ุฅุฐุง ูุงู ููุงู ุนุจุงุฑุฉ ูุฑูุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฎุทู ุงูุงุฎุชุจุงุฑุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฑุณุงูุฉ ุงูุงูุชุฒุงู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุชู ุฅุตูุงุญ ุฎุทุฃ ูุทุจุนู ูู </font></font><code>README.md</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดุฑูุน ุฃู ุงููุซุงุฆู - ูููุงุฐุง ุชูุชุธุฑ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"ูุฑุญุจูุง ุ 2020 ุจุงูุฎุงุฑุฌ!" </font><font style="vertical-align: inherit;">ููุงุฐุง ูุฌุจ ุฃู ุฃุดุฑุญ ููุตูุฏูู ุงูุญุฏูุฏู ูู ูู ูุฑุฉ ุฃูู ููุณ ูู ุงูุถุฑูุฑู ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ุนูุฏ ุชุบููุฑ ุงููุซุงุฆูุ " </font><font style="vertical-align: inherit;">ูุญูุงู: </font></font><code>only:changes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ูู ุจุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ุนูุฏ ุชุบููุฑ ุงููููุงุช ูู ุฏูุงุฆู ูุนููุฉ ููุท. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู:</font></font><br>
<br>
<pre><code class="plaintext hljs">  only:<font></font>
    refs:<font></font>
      - master<font></font>
      - merge_requests<font></font>
    changes:<font></font>
      - "front/**/*"<font></font>
      - "jest.config.js"<font></font>
      - "package.json"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุนูู ุงูุนูุณู - ุฃู </font><font style="vertical-align: inherit;">ูุง ุชุฑูุถ - ูุนู </font></font><code>except:changes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูู 5: ุงูููุงุนุฏ</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงุนุฏ ุงูุนูู ุงููุฑุฏูุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุฏูุฉ ูู GitLab 12.3.</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.gitlab.com/ce/ci/yaml/#rules</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงูุชูุฌูู ูุดุงุจู ุฌุฏูุง ููุฃูุงูุฑ ุงูุณุงุจูุฉ </font></font><code>only:*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ูุน ุงุฎุชูุงู ููู: ููู ูุณูุญ ูู ุจุงูุชุญูู ูู ุงููุนููุฉ </font></font><code>when</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ูุง ุชุฑุบุจ ูู ุฅุฒุงูุฉ ุฅููุงููุฉ ุจุฏุก ูุธููุฉ ุจุงููุงูู. </font><font style="vertical-align: inherit;">ููููู ุจุจุณุงุทุฉ ุชุฑู ุงูุฒุฑ ุ ุงูุฐู ุณูุชู ุงุณุชุฏุนุงุคู ุจุดูู ูุณุชูู ุ ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ุฏูู ุชุดุบูู ุฎุท ุฃูุงุจูุจ ุฌุฏูุฏ ุฃู ุฏูู ุงูุชุฒุงู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 6: ุงูุจูุฆุฉ: auto_stop_in</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชููู ุงูุจูุฆุงุช ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ูุดุงุท.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุฏูุฉ ูู GitLab 12.8.</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.gitlab.com/ce/ci/yaml/#environmentauto_stop_in</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุนูููุง ุจูุฐู ุงููุฑุตุฉ ูุจู ูุดุฑ ุงูููุงู ูุจุงุดุฑุฉ ููู ููู ูุฏููุง ุงูููุช ุงููุงูู ูุชุฌุฑุจุชูุง ุนููููุง ุ ูููู ูุฐุง ุจุงูุชุฃููุฏ ูู "ููุณ ุงูุดูุก" ุงูุฐู ูุงู ูุชููุนูุง ูู ุงูุนุฏูุฏ ูู ุงููุดุงุฑูุน. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุชุญุฏูุฏ ูุนููุฉ ูู ุจูุฆุงุช GitLab </font></font><code>on_stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ููู ูููุฏุฉ ุฌุฏูุง ุนูุฏูุง ุชุฑูุฏ ุฅูุดุงุก ุจูุฆุงุช ูุญุฐููุง ุฏููุงูููููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ููู ูุฑุน. </font></font><code>on_stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชูููุฐ </font><font style="vertical-align: inherit;">ุงููููุฉ ุงููููุฒุฉ ุจู k </font><font style="vertical-align: inherit;">ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ูููู ุฏูุฌ MR ูู ุงููุฑุน ุงูุฑุฆูุณู ุฃู ุนูุฏูุง ูุชู ุฅุบูุงู MR (ุฃู ุญุชู ุจุจุณุงุทุฉ ุนู ุทุฑูู ุงูููุฑ ุนูู ุงูุฒุฑ) ุ ุญูุซ ูุชู ุญุฐู ุงูุจูุฆุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ ุชููุงุฆููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูุก ููุงุณุจ ูููุทูู ููุนูู ... ุฅู ูู ููู ููุนุงูู ุงูุจุดุฑู. ูููู ุงูุนุฏูุฏ ูู ุงููุทูุฑูู ุจุฏูุฌ MR ููุณ ุจุงูููุฑ ุนูู ุฒุฑ ูู GitLab ุ ูููู ูุญูููุง ุนุจุฑ </font></font><code>git merge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููููู ููููุง: ุฅููุง ูุฑูุญุฉ! ูููู ูู ูุฐู ุงูุญุงูุฉ ุ ุงูููุทู</font></font><code>on_stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุนูู ุ ููุฏ ุชุฑุงููุช ูุฏููุง ูุญูุทุงุช ููุณูุฉ ... ูุฐุง ูู ุงูููุงู ุงูุฐู ูููู ููู ุงูุฐู ุทุงู ุงูุชุธุงุฑู ูู ูุชูุงูู ุงููุฏ </font></font><code>auto_stop_in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงูุฃุฉ: ุฃููุงุฎ ูุคูุชุฉ ุนูุฏูุง ูุง ุชููู ููุงู ูุฑุต ูุงููุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ูู ูุฐู ุงููุธุงุฆู (ูุบูุฑูุง ุงููุซูุฑ) ุ ุงููุธุงุฆู ุงูุฌุฏูุฏุฉ ูุงููุทููุจุฉ ูู GitLab ุ ูุณูุก ุงูุญุธ ุ ูู ุจุนุถ ุงูุฃุญูุงู ูููู ูู ุงููุณุชุญูู ูุตู ุดุฑูุท ุฅูุฌุงุฒ ุงููุธููุฉ ูู ุฅุทุงุฑ ุงููุฏุฑุงุช ุงููุชุงุญุฉ ุญุงูููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅู GitLab ููุณ ูุซุงูููุง ุ ููููู ูููุฑ ุงูุฃุฏูุงุช ุงูุฃุณุงุณูุฉ ูุจูุงุก ุฎุท ุฃูุงุจูุจ ุฃุญูุงู ... ุฅุฐุง ููุช ุนูู ุงุณุชุนุฏุงุฏ ูุชุฌุงูุฒ DSL ุงููุชูุงุถุน ุ ูุงูุงูุบูุงุณ ูู ุนุงูู ุงูุจุฑูุฌุฉ ุงููุตูุฉ. </font><font style="vertical-align: inherit;">ูููุง ููู ุจุนุถ ุงูุญููู ูู ุชุฌุฑุจุชูุง ุ ูุงูุชู ูุง ุชุฏุนู ุจุฃู ุญุงู ูู ุงูุฃุญูุงู ุฃููุง ุตุญูุญุฉ ุฃู ููุตู ุจูุง ูู ุงููุงุญูุฉ ุงูุฅูุฏููููุฌูุฉ ุ ูููู ูุชู ุชูุฏูู ุงููุฒูุฏ ูุฅุซุจุงุช ุงูุงุญุชูุงูุงุช ุงููุฎุชููุฉ ูุน ุงูุงูุชูุงุฑ ุฅูู ูุธุงุฆู API ุงููุถููุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญู ุฑูู 1: ุฅุทูุงู ูุธููุชูู ุจุงุณุชุฎุฏุงู ุฒุฑ ูุงุญุฏ</font></font></h3><br>
<pre><code class="plaintext hljs">script:<font></font>
  - &gt; <font></font>
    export CI_PROD_CL1_JOB_ID=`curl -s -H "PRIVATE-TOKEN: ${GITLAB_API_TOKEN}" \ <font></font>
      "https://gitlab.domain/api/v4/projects/${CI_PROJECT_ID}/pipelines/${CI_PIPELINE_ID}/jobs" | \<font></font>
      jq '[.[] | select(.name == "Deploy (Cluster 1)")][0] | .id'`<font></font>
  - &gt; <font></font>
    export CI_PROD_CL2_JOB_ID=`curl -s -H "PRIVATE-TOKEN: ${GITLAB_API_TOKEN}" \ <font></font>
      "https://gitlab.domain/api/v4/projects/${CI_PROJECT_ID}/pipelines/${CI_PIPELINE_ID}/jobs" | \<font></font>
      jq '[.[] | select(.name == "Deploy (Cluster 2)")][0] | .id'`<font></font>
  - &gt; <font></font>
    curl -s --request POST -H "PRIVATE-TOKEN: ${GITLAB_API_TOKEN}" \ <font></font>
      "https://gitlab.domain/api/v4/projects/${CI_PROJECT_ID}/jobs/$CI_PROD_CL1_JOB_ID/play"<font></font>
  - &gt; <font></font>
    curl -s --request POST -H "PRIVATE-TOKEN: ${GITLAB_API_TOKEN}" \ <font></font>
      "https://gitlab.domain/api/v4/projects/${CI_PROJECT_ID}/jobs/$CI_PROD_CL2_JOB_ID/play"<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุงุฐุง ูุง ุ ุฅุฐุง ููุช ุชุฑูุฏ ุฐูู ุญููุงุ</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญู ุฑูู 2: ุชู ุชุบููุฑ ุงูููู ูู ูููุงุช MR rb ูู rubocop ุฏุงุฎู ุงูุตูุฑุฉ</font></font></h3><br>
<pre><code class="plaintext hljs">Rubocop:<font></font>
  stage: test<font></font>
  allow_failure: false<font></font>
  script:<font></font>
    ...<font></font>
    - export VARFILE=$(mktemp)<font></font>
    - export MASTERCOMMIT=$(git merge-base origin/master HEAD)<font></font>
    - echo -ne 'CHANGED_FILES=' &gt; ${VARFILE}<font></font>
    - if [ $(git --no-pager diff --name-only ${MASTERCOMMIT} | grep '.rb$' | wc -w |awk '{print $1}') -gt 0 ]; then<font></font>
        git --no-pager diff --name-only ${MASTERCOMMIT} | grep '.rb$' |tr '\n' ' ' &gt;&gt; ${VARFILE} ;<font></font>
      fi<font></font>
    - if [ $(wc -w ${VARFILE} | awk '{print $1}') -gt 1 ]; then<font></font>
        werf --stages-storage :local run rails-dev --docker-options="--rm --user app --env-file=${VARFILE}" -- bash -c /scripts/rubocop.sh ;<font></font>
      fi<font></font>
    - rm ${VARFILE}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชูุฌุฏ ุตูุฑุฉ ุจุงูุฏุงุฎู </font></font><code>.git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐูู ูุงู ุนูู ุงูุฎุฑูุฌ ููุชุญูู ูู ุงููููุงุช ุงูุชู ุชู ุชุบููุฑูุง ููุท. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ูุฐู ููุณุช ุญุงูุฉ ููุงุณูุฉ ุฌุฏูุง ููุญุงููุฉ ูุงุฆุณุฉ ููุงูุชุซุงู ููุนุฏูุฏ ูู ุดุฑูุท ุงููุดููุฉ ุ ูุงูุชู ูู ูุชู ุชุถููู ูุตููุง ูู ูุทุงู ูุฐู ุงูููุงูุฉ.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญู # 3: ุจุฏุก ุชุดุบูู ุงูููุงู ูู ูุณุชูุฏุนุงุช ุฃุฎุฑู ุนูุฏ ุทุฑุญูุง</font></font></h3><br>
<pre><code class="plaintext hljs">  before_script:<font></font>
    - |<font></font>
      echo '### Trigger review: infra'<font></font>
      curl -s -X POST \<font></font>
        -F "token=$REVIEW_TOKEN_INFRA" \<font></font>
        -F "ref=master" \<font></font>
        -F "variables[REVIEW_NS]=$CI_ENVIRONMENT_SLUG" \<font></font>
        -F "variables[ACTION]=auto_review_start" \<font></font>
        https://gitlab.example.com/api/v4/projects/${INFRA_PROJECT_ID}/trigger/pipeline</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃู ูุซู ูุฐุง ุงูุดูุก ุงูุจุณูุท ูุงูุถุฑูุฑู (ูู ุนุงูู ุงูุฎุฏูุงุช ุงูุฏูููุฉ) ูุทุฑุญ ุฎุฏูุฉ ุตุบูุฑุฉ ุฃุฎุฑู ูู ุฏุงุฆุฑุฉ ุญุฏูุซุฉ ุงูุฅูุดุงุก ูุงุนุชูุงุฏ. </font><font style="vertical-align: inherit;">ูููู ุ ููุณ ูุฐุง ูุทููุจูุง ุฅุฌุฑุงุก ููุงููุฉ API ูููุฒุฉ ูุฃูููุฉ ุจุงููุนู (ุงูููุถุญุฉ ุฃุนูุงู):</font></font><br>
<br>
<pre><code class="plaintext hljs">  only:<font></font>
    refs:<font></font>
    - triggers<font></font>
    variables:<font></font>
    - $ACTION == "auto_review_start"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุญุธุงุช:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุชุตููู ุงููุธููุฉ ุนูุฏ ุงูุชุดุบูู ูุชููู ูุฑุชุจุทุฉ ุจุชูุฑูุฑ ูุชุบูุฑ ุฅูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุ ุนูู ุบุฑุงุฑ ุงููุซุงู ุฑูู 1. </font><font style="vertical-align: inherit;">ูู ุงูููุทูู ุฃูุซุฑ ุชูููุฐ ุฐูู ุนูู API ูุน ุชูุฑูุฑ ุงุณู ุงููููุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนู ุ ุงููุธููุฉ ููุฌูุฏุฉ ูู ุงูุฅุตุฏุงุฑ ุงูุชุฌุงุฑู (EE) ูู GitLab ุ ููููุง ูุง ูุนุชุจุฑูุง.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุงูู GitLab ููุงูุจุฉ ุงูุงุชุฌุงูุงุช ุ ููุทุจู ุชุฏุฑูุฌูุงู ููุฒุงุช ููุชุนุฉ ููุทููุจุฉ ูู ูุจู ูุฌุชูุน DevOps. </font><font style="vertical-align: inherit;">ุฅููุง ุณููุฉ ุงูุงุณุชุฎุฏุงู ููุบุงูุฉ ุ ูุนูุฏูุง ูุง ุชููู ุงููุฏุฑุงุช ุงูุฃุณุงุณูุฉ ูุงููุฉ ุ ูููู ุฏุงุฆููุง ุชูุณูุนูุง ุจุงุณุชุฎุฏุงู ุงููุตูุต ุงูุจุฑูุฌูุฉ. </font><font style="vertical-align: inherit;">ูุฅุฐุง ุฑุฃููุง ุฃูู ูู ูุชุจูู ุจุดูู ุฃููู ููุฑูุญ ูู ุงูุฏุนู ... ูุจูู ุงูุชุธุงุฑ ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู GitLab - ุฃู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุงุนุฏุฉ ุงููุดุฑูุน</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุณุงููุชูุง </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฑุฃ ุฃูุถุง ูู ูุฏููุชูุง:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌููุน ููุดุฑ ููุณ ุงูููุน ูู ุงูุฎุฏูุงุช ุงูุฏูููุฉ ูุน werf ู GitLab CI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JUnit ูู GitLab CI ูุน Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุ</font></font></li>
<li> ยซ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">werf โ    CI/CD  Kubernetes (   )</a>ยป <i>( ; 27  2019  DevOpsConf)</i>;</li>
<li> ยซ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">       GitLab CI</a>ยป;</li>
<li> ยซ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GitLab CI       production</a>ยป.</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar491876/index.html">MosQA # 2 - ููุงุฏ ูู mitap ูุงุจุญุซ ุนู ุฌููุน ุงูุฃุนูุงู ูู ุงููููุฉ</a></li>
<li><a href="../ar491880/index.html">5 ูุฑุงุญู ูู ุญุชููุฉ ุงุนุชูุงุฏ ุดูุงุฏุฉ ISO / IEC 27001. ุงูุบุถุจ</a></li>
<li><a href="../ar491882/index.html">ุฃุชูุชุฉ ุงูุฅุฏุฎุงู ุฅูู SecureCRT ุจุงุณุชุฎุฏุงู ุงูุจุฑุงูุฌ ุงููุตูุฉ</a></li>
<li><a href="../ar491884/index.html">ุฅุฏุงุฑุฉ ุงููุนุฑูุฉ ุงูุดุงููุฉ ูู ุดุฑูุฉ ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
<li><a href="../ar491886/index.html">KnowledgeConf 2020 Online: ุชูููุฐ ุฅุฏุงุฑุฉ ุงููุนุฑูุฉ ุฎุทูุฉ ุจุฎุทูุฉ</a></li>
<li><a href="../ar491890/index.html">ุชุดุฑูุญ ูุญุฑู ุงูุฃูุฑุงุต: SSD</a></li>
<li><a href="../ar491896/index.html">ููู ูููู ูู Cyan ุจุชุญุณูู ููุชุฌ ูู ุฎูุงู ุฃุจุญุงุซ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู</a></li>
<li><a href="../ar491900/index.html">ุงููุฑููุฉ ูุงูุฃุชูุชุฉ ูู ุงูุชุนูู ุงูุขูู</a></li>
<li><a href="../ar491902/index.html">ูุชุงุจุฉ ูุญุฑุฑ WYSIWYG ุจุณูุท ุจุงุณุชุฎุฏุงู ProseMirror</a></li>
<li><a href="../ar491904/index.html">ููููุฉ ูุชุงุจุฉ ููุฏ ุจุงูุซูู ุขูู. ูุฌุจุงุช ููุดุงู ุฏุงุณ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>