<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏼‍🤝‍🧑🏼 👦🏿 🚗 MCSクラウドプラットフォームセキュリティ監査 👎🏽 👨🏾‍🎓 ⏮️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SkyShip Dusk by SeerLight
 
 サービスの構築には、セキュリティに関する継続的な作業が必ず含まれます。セキュリティは、製品のセキュリティの継続的な分析と改善、脆弱性に関するニュースの監視などを含む継続的なプロセスです。含む-監査。監査は、単独で、またはプロジェクトに没頭して...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MCSクラウドプラットフォームセキュリティ監査</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/463897/"><img src="https://habrastorage.org/webt/j7/8u/p2/j78up2mg9yossvgwejyj7virtaq.jpeg"><br>
<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SkyShip Dusk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by SeerLight</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サービス</font><i><font style="vertical-align: inherit;">の</font></i><font style="vertical-align: inherit;">構築には、セキュリティに関する継続的な作業が必ず含まれます。セキュリティは、製品のセキュリティの継続的な分析と改善、脆弱性に関するニュースの監視などを含む継続的なプロセスです。含む-監査。監査は、単独で、またはプロジェクトに没頭しておらず、明確な視野を持っているため、セキュリティを劇的に支援できる外部の専門家の両方によって実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は、Mail.ruクラウドソリューション（MCS）チームがクラウドサービスをテストするのを助けた外部の専門家のこの非常に人気のない見解と、彼らが見つけたものについてです。</font><font style="vertical-align: inherit;">「外的な力」として、MCSは、セキュリティコミュニティにおける高い専門知識で知られているデジタルセキュリティを選択しました。</font><font style="vertical-align: inherit;">そして、この記事では、外部監査の一部として発見されたいくつかの興味深い脆弱性を分析します。これにより、クラウドサービスを作成するときに同じレーキが得られます。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">製品説明</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru Cloud Solutions（MCS）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、クラウドで仮想インフラストラクチャを構築するためのプラットフォームです。</font><font style="vertical-align: inherit;">IaaS、PaaS、開発者向けの既製のアプリケーションイメージの市場が含まれます。</font><font style="vertical-align: inherit;">MCSのアーキテクチャを考慮すると、次の領域で製品の安全性を確認する必要がありました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仮想化環境のインフラストラクチャ保護：ハイパーバイザー、ルーティング、ファイアウォール。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顧客の仮想インフラストラクチャの保護：ネットワーク、SDNのプライベートネットワークなど、相互の分離。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenStackとそのオープンコンポーネント。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3独自の開発。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IAM：ロールモデルを使用したマルチテナントプロジェクト。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジョン（マシンビジョン）：画像を操作する際のAPIと脆弱性。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webインターフェイスと従来のWeb攻撃。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PaaSコンポーネントの脆弱性。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのコンポーネントのAPI。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、その後の歴史に不可欠なすべてがすべてです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのような作業が行われ、なぜ必要なのですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セキュリティ監査は、個人データの漏洩、機密情報の変更、またはサービスの可用性の混乱につながる可能性のある脆弱性と構成エラーを特定することを目的としています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
平均1〜2か月続く作業中、監査人は潜在的な攻撃者のアクションを繰り返し、選択したサービスのクライアント部分とサーバー部分の脆弱性を探します。</font><font style="vertical-align: inherit;">MCSクラウドプラットフォームの監査のコンテキストでは、次の目的が特定されました。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスでの認証の分析。</font><font style="vertical-align: inherit;">このコンポーネントの脆弱性は、すぐに他の人のアカウントに侵入するのに役立ちます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">異なるアカウント間の役割モデルとアクセス制御の研究。</font><font style="vertical-align: inherit;">攻撃者にとって、他の誰かの仮想マシンにアクセスする能力は歓迎すべき目標です。</font></font><br>
</li>
<li>  . XSS/CSRF/CRLF/etc. ,        ?<br>
</li>
<li>  : RCE    (SQL/XXE/SSRF   ).  ,  ,  ,        .<br>
</li>
<li>      .           .<br>
</li>
<li> -.         ?<br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロジェクトでは、作業はグレイボックスモデルに従って行われました。監査人は通常のユーザーの権限でサービスとやり取りしましたが、APIのソースコードを部分的に所有しており、開発者と詳細を明確にする機会がありました。</font><font style="vertical-align: inherit;">通常、これは最も便利でありながら非常に現実的な作業モデルです。内部情報は攻撃者によって収集される可能性がありますが、これは時間の問題です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見つかった脆弱性</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監査人がさまざまなペイロード（攻撃に使用されるペイロード）をランダムな場所に送信し始める前に、それがどのように機能し、どのような機能が提供されるかを理解する必要があります。</font><font style="vertical-align: inherit;">調査された場所のほとんどに脆弱性がないので、これは無駄な練習であるように見えるかもしれません。</font><font style="vertical-align: inherit;">しかし、アプリケーションの構造とその操作のロジックを理解するだけで、最も複雑な攻撃ベクトルを見つけることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
疑わしいと思われる場所や、他の場所とはまったく異なる場所を見つけることは重要です。</font><font style="vertical-align: inherit;">そして、最初の危険な脆弱性はこの方法で発見されました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDOR</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IDORの脆弱性（安全でない直接オブジェクト参照、オブジェクトへの安全でない直接リンク）は、何らかの方法で実際にアクセスが許可されていないオブジェクトにアクセスできるようにするビジネスロジックの最も一般的な脆弱性の1つです。 IDORの脆弱性により、さまざまな重大度のユーザー情報が取得される可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IDORオプションの1つは、システムオブジェクト（ユーザー、銀行口座、バスケット内の商品）のアクションを実行することです。これらのオブジェクトのアクセス識別子を操作します。これは、最も予測不可能な結果につながります。たとえば、送信者のアカウントが代用される可能性があるため、他のユーザーからそれらを盗むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCSの場合、監査人はシステム以外の識別子に関連するIDORの脆弱性を発見しました。</font><font style="vertical-align: inherit;">ユーザーの個人アカウントでは、オブジェクトへのアクセスにUUIDが使用されました。これは、セキュリティ担当者が言うように、目立たないほど大規模な（つまり、ブルートフォース攻撃から保護されている）ようです。</font><font style="vertical-align: inherit;">しかし、特定のエンティティでは、アプリケーションユーザーに関する情報を取得するために通常の予測可能な数値が使用されることが判明しました。</font><font style="vertical-align: inherit;">ユーザーIDを1つずつ変更してリクエストを再送信し、ACLをバイパスして情報（アクセス制御リスト、プロセスとユーザーのデータアクセスルール）を受け取ることが可能だったと思います。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーサイドリクエストフォージェリ（SSRF）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オープンソース製品は、発生する問題の詳細な技術的説明と、運が良ければ解決策の説明があるフォーラムが多数あるため、優れています。しかし、このコインには裏返しがあります。よく知られた脆弱性も詳しく説明されています。たとえば、OpenStackフォーラムには脆弱性</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[XSS]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[SSRF]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">についてのすばらしい説明があります</font><font style="vertical-align: inherit;">が、何らかの理由で誰も修正を急いでいません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頻繁なアプリケーション機能は、ユーザーがサーバーへのリンクを送信する機能です（たとえば、指定されたソースからイメージをダウンロードするため）。サーバーからユーザーに返されるリンクまたは応答のセキュリティフィルタリングが不十分なため、このような機能は攻撃者によって簡単に使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SSRFの脆弱性により、攻撃の開発が大幅に進む可能性があります。</font><font style="vertical-align: inherit;">攻撃者は以下を取得できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻撃されたローカルネットワークへの限定的なアクセス。たとえば、特定のネットワークセグメントや特定のプロトコルのみ。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカルネットワークへの完全なアクセス（アプリケーションレベルからトランスポートレベルへのダウングレードが可能であり、その結果、アプリケーションレベルでの完全な負荷管理が可能）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー上のローカルファイルの読み取りへのアクセス（ファイル：///スキームがサポートされている場合）;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、はるかに。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenStackは、その「ブラインド」SSRFの脆弱性で古くから知られています。サーバーにアクセスすると、サーバーからの応答はありませんが、リクエストの結果に応じて、さまざまなタイプのエラー/遅延が発生します。これに基づいて、内部ネットワーク上のホストのポートをスキャンできます。その結果、過小評価しないでください。たとえば、製品にバックオフィス用のAPIがあり、企業ネットワークからのみ利用できる場合があります。ドキュメントを所持している場合（内部関係者も忘れないでください）、攻撃者はSSRFを使用して内部メソッドを使用できます。たとえば、有用なURLのおおよそのリストをなんとかして取得できた場合、SSRFを使用してリクエストを実行できます-比較的言えば、アカウントからアカウントへの送金または制限の変更。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、OpenStackでSSRFの脆弱性を検出する最初のケースではありません。</font><font style="vertical-align: inherit;">以前は、直接リンクを介してVM ISOイメージをダウンロードすることが可能でしたが、これも同様の結果をもたらしました。</font><font style="vertical-align: inherit;">この機能は現在OpenStackから削除されています。</font><font style="vertical-align: inherit;">どうやら、コミュニティはこれが問題に対する最も簡単で信頼できる解決策だと考えていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして</font><font style="vertical-align: inherit;">、HackerOne（h1）サービスからの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公に利用可能なレポートでは、インスタンスメタデータを読み取る機能を備えた非ブラインドSSRFの悪用により、Shopifyインフラストラクチャ全体へのルートアクセスにつながります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCSでは、機能が類似している2つの場所でSSRFの脆弱性が検出されましたが、ファイアウォールやその他の保護機能が原因で悪用することはほとんど不可能でした。</font><font style="vertical-align: inherit;">どういうわけか、MCSチームはコミュニティを待たずにこの問題を解決しました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェルをロードする代わりにXSS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何百もの研究が書かれているにもかかわらず、年々、XSS（クロスサイトスクリプティング攻撃）は依然として最も</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的な</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Webの脆弱性（または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">攻撃</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？）です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルのダウンロードは、セキュリティ研究者にとってお気に入りの場所です。ペンテスターの用語である「ロードシェル」では、任意のスクリプト（asp / jsp / php）をロードしてOSコマンドを実行できることがよくあります。しかし、そのような脆弱性の人気は双方向に作用します。それらは記憶され、それらに対してツールを開発したため、最近「シェルをロードする」確率はゼロに近づきつつあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
攻撃チーム（Digital Securityに代表される）は幸運でした。 OK、MCSでは、サーバー側で、ダウンロードされたファイルの内容がチェックされ、画像のみが許可されました。しかし、SVGも画像です。そして、危険なSVG画像は何ですか？ JavaScriptフラグメントを埋め込むことができるという事実！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダウンロードしたファイルは、MCSサービスのすべてのユーザーが利用できることがわかりました。つまり、クラウドの他のユーザー、つまり管理者を攻撃することができます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5cc/7cd/dfb/5cc7cddfbc661649ea69d5d90fc41893.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XSS攻撃を使用したフィッシングログインフォームの使用</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
例</font><i><font style="vertical-align: inherit;">XSS攻撃</font></i><font style="vertical-align: inherit;">の悪用の例：</font></font><br>
<br>
<ul>
<li>    ( ,    HTTP-Only cookies,      js-),        API ?        XHR-   , ,   SSH-    SSH-  .<br>
</li>
<li> CSP- (  )   JavaScript,     .   HTML              :         URL,     .<br>
</li>
<li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> DoS</a> —  Cookies   4 .       —     ,      :     -    .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定されたさらに別のXSSの例を考えてみましょう。今回はよりトリッキーな操作です。 MCSサービスを使用すると、ファイアウォール設定をグループに結合できます。 XSSはグループ名で発見されました。その特異性は、ルールのリストを表示したときではなく、グループが削除されたときに、ベクターがすぐに機能しなかった</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1e9/448/10f/1e944810f95b56f4a49f7564ab54b11e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ことです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">つまり、シナリオは次のとおりです。攻撃者が名前に「load」を含むファイアウォールルールを作成し、しばらくすると管理者がそれに気づき、プロセスを開始しました除去。そして、ここでは悪意のあるJSも満たしています。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCS開発者は、ダウンロード可能なSVG画像（破棄できない場合）のXSSから保護するために、デジタルセキュリティチームは次のことを推奨しました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーがアップロードしたファイルを、「Cookie」とは関係のない別のドメインにホストします。</font><font style="vertical-align: inherit;">スクリプトは別のドメインのコンテキストで実行され、MCSに脅威を与えることはありません。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーのHTTP応答で、ヘッダーに「Content-disposition：attachment」を指定します。</font><font style="vertical-align: inherit;">その後、ファイルはブラウザによってダウンロードされ、実行されません。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、開発者がXSSを操作するリスクを軽減するために利用できる方法は数多くあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「HTTPのみ」フラグを使用すると、悪意のあるJavaScriptからCookieのセッションヘッダーにアクセスできなくなります。</font></font><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正しく実装されたCSPポリシーは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、攻撃者にとってXSSの操作を著しく複雑にします。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AngularやReactなどの最新のテンプレートエンジンは、ユーザーのブラウザーに表示する前に、ユーザーデータを自動的に消去します。</font></font><br>
</li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二要素認証の脆弱性</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アカウントのセキュリティを強化するために、ユーザーは常に2FA（2要素認証）を有効にすることをお勧めします。</font><font style="vertical-align: inherit;">実際、これは、ユーザーの資格情報が侵害された場合に攻撃者がサービスにアクセスするのを防ぐ効果的な方法です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、2番目の認証要素を使用すると、常にアカウントの安全性が保証されますか？</font><font style="vertical-align: inherit;">2FA実装では、このようなセキュリティ問題があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OTPコード（ワンタイムコード）の大まかな検索。</font><font style="vertical-align: inherit;">操作は単純ですが、OTPブルータスからの保護の欠如などのエラーは、大企業（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Case Slack</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Case </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Facebook）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でも見られ</font><font style="vertical-align: inherit;">ます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弱い生成アルゴリズム。たとえば、次のコードを予測する機能。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それはとして例えば論理エラー、お使いの携帯電話上の要求誰か他の人のOTPの能力、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">だった</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Shopifyと。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCSの場合、2FAはGoogle Authenticatorと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Duoに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基づいています</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">プロトコル自体はすでにテスト済みですが、アプリケーション側でのコード検証の実装は確認する価値があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCS 2FAはいくつかの場所で使用されます。</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー認証時。</font><font style="vertical-align: inherit;">ここにはブルートフォースからの保護があります。ユーザーはワンタイムパスワードを数回入力するだけで、しばらくの間入力がブロックされます。</font><font style="vertical-align: inherit;">これにより、OTPバスティングを実行する機能がブロックされます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2FAを実行するためのオフラインバックアップコードを生成するとき、およびオフにするとき。</font><font style="vertical-align: inherit;">ここでは、ブルートフォースに対する保護は実装されていません。これにより、アカウントのパスワードとアクティブなセッションがある場合に、バックアップコードを再生成したり、2FAを完全に無効にしたりすることが可能になりました。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バックアップコードがOTPアプリケーションによって生成されたものと同じ範囲のライン値にあることを考えると、短時間でコードを取得する可能性ははるかに高かったです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/385/1a6/4cb/3851a64cba9fa02e23d1dd8ee0677e02.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Burp：Intruderツールを使用して2FAを無効にするOTPを選択するプロセス</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結果</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全体として、製品としてのMCSは安全であることが判明しました。</font><font style="vertical-align: inherit;">監査中、PentesterチームはクライアントVMとそのデータにアクセスできず、見つかった脆弱性はMCSチームによって迅速に修正されました。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、ここでは、セキュリティは継続的な作業であることに注意することが重要です。</font><font style="vertical-align: inherit;">サービスは静的ではなく、常に進化しています。</font><font style="vertical-align: inherit;">そして、完全に脆弱性のない製品を開発することは不可能です。</font><font style="vertical-align: inherit;">しかし、時間内にそれらを見つけ、それらの繰り返しの可能性を最小限に抑えることができます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、MCSで言及されているすべての脆弱性はすでに修正されています。</font><font style="vertical-align: inherit;">そして、新しいものの数を最小限に抑え、寿命を短縮するために、プラットフォームチームはこれを続けています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部企業による定期的な監査を実施する。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バグバウンティプログラムMail.ruグループ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">への参加をサポートし、発展させるため</font><font style="vertical-align: inherit;">。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セキュリティを行う。</font><font style="vertical-align: inherit;">:)</font></font><br>
</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja463881/index.html">人質を撮った写真。WiFi（PTP / IPプロトコル）を介したデジタルカメラの最初のハッキング</a></li>
<li><a href="../ja463885/index.html">16MBフラッシュ搭載のルーターでMikroTik RouterOSを更新する際の問題</a></li>
<li><a href="../ja463889/index.html">障害のある携帯電話向けのアプリケーションの作成方法</a></li>
<li><a href="../ja463891/index.html">情報セキュリティにおける人工免疫システム</a></li>
<li><a href="../ja463895/index.html">コンパクトプロジェクターの棚に到着：エプソンEF-100-一連の明るいポータブルレーザープロジェクターの最初のツバメ</a></li>
<li><a href="../ja463899/index.html">なぜバイクの発明を長い間待っていたのですか？</a></li>
<li><a href="../ja463901/index.html">サンクトペテルブルクでのNB-IoTネットワークの可用性のテスト（2019年8月）</a></li>
<li><a href="../ja463903/index.html">5デザインリーダーシップのヒント パート2</a></li>
<li><a href="../ja463905/index.html">YouTubeチャンネルプロモーション</a></li>
<li><a href="../ja463907/index.html">8base、GraphQL、およびReactを使用した付箋アプリケーションの作成</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>