<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍👩‍👧‍👧 🤮 🌆 使用Python预测金融危机 💄 👦🏼 ↗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="从2020年2月20日的历史高位开始，到2020年3月9日，美国市场急剧下降，目前约为-16％。消息充斥着有关冠状病毒即将衰退的新闻，俄罗斯退出了欧佩克+协议，这打击了油价（每天-20％），明天（2020年3月10日），预计MICEX市场也将下降20％。我们在西方市场的股票报价。
 
 
 全球衰退...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>使用Python预测金融危机</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491622/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从2020年2月20日的历史高位开始，到2020年3月9日，美国市场急剧下降，目前约为-16％。</font><font style="vertical-align: inherit;">消息充斥着有关冠状病毒即将衰退的新闻，俄罗斯退出了欧佩克+协议，这打击了油价（每天-20％），明天（2020年3月10日），预计MICEX市场也将下降20％。我们在西方市场的股票报价。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bi/7e/fx/bi7efxdyajb37dmvxce8kmq2zl8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全球衰退会等待着我们吗？在本文中，我们将尝试弄清楚如何使用Python提前看到衰退开始的信号。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了回答这个问题，我们将尝试使用债券，股票和技术分析的收益率。我们将使用美国金融市场的历史数据作为世界上第一大股票市场。实际上，如果衰退开始于美国，那它将在世界范围内开始（就像2008年一样）。同样，对于我们来说，方便的是，有几十年的美国市场数据，这使我们可以分析一个重要的历史时期。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将从</font><font style="vertical-align: inherit;">美联储网站</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yfinance</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库获取Yahoo Finance的历史数据</font><font style="vertical-align: inherit;">。使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fredapi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库的美国储备金，</font><font style="vertical-align: inherit;">以及来自Quandl网站的通过</font><i><font style="vertical-align: inherit;">pandas_datareader</font></i><font style="vertical-align: inherit;">提供的各种财务信息</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，对于Fed和Quandl，您需要注册才能获得API密钥（这是免费的）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将在美国图表上直接在灰色区域标记所有美国的金融危机。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导入库</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> fredapi <span class="hljs-keyword">import</span> Fred
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> pandas_datareader.data <span class="hljs-keyword">as</span> web
<span class="hljs-keyword">import</span> pandas_datareader <span class="hljs-keyword">as</span> pdr<font></font>
%matplotlib inline<font></font>
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date
<span class="hljs-keyword">import</span> yfinance
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<font></font>
<font></font>
api = <span class="hljs-string">'YOUR API HERE'</span>
os.environ[<span class="hljs-string">"QUANDL_API_KEY"</span>] = <span class="hljs-string">'YOUR API HERE'</span>
os.environ[<span class="hljs-string">"TIINGO_API_KEY"</span>] = <span class="hljs-string">'YOUR API HERE'</span><font></font>
<font></font>
fred = Fred(api_key=api)<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们使用Yahoo获取S＆P500的历史数据，使用FRED获得债券收益率点差，以及使用FRED获得债券的累计收益率指数：</font></font><br>
<br>
<pre><code class="python hljs">GSPC_h = yfinance.download(<span class="hljs-string">"^GSPC"</span>, start=<span class="hljs-string">"1962-01-01"</span>, end=<span class="hljs-string">"2020-03-09"</span>) <span class="hljs-comment">#SNP500</span>
T10YFF = fred.get_series(<span class="hljs-string">'T10YFF'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>) <span class="hljs-comment">#10YB-FFR</span>
T10Y2Y = fred.get_series(<span class="hljs-string">'T10Y2Y'</span>, observation_start=<span class="hljs-string">'1976-06-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>) <span class="hljs-comment">#10YB-2YB</span>
<span class="hljs-comment"># ICE BofA US Corp 10-15yr Total Return Index Value</span>
BAMLCC7A01015YTRIV = fred.get_series(<span class="hljs-string">'BAMLCC7A01015YTRIV'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>)
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">风险溢价</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
风险溢价是一个指标，它反映了投资者通过承担更大的风险将获得的额外获利能力。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
金融市场就是这样运作的-投资回报率越高，风险越高。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了计算风险溢价，有必要从风险资产的预期收益中减去无风险收益率。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于美国市场，无风险收益率是美联储准备金率（与我们的关键利率类似）-FED。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
股票和债券的风险溢价被认为是不同的。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于债券：债券收益率（收益率）减去FED。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于股票：利润/价格（E / P）指标减去FED，</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其中利润是公司当年的利润，价格是计算指标时的股价。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要计算股票的获利能力，我们不会将支付的股利当作获利能力，而是将公司获得的利润视为收益，因为股利只是公司支付给股东的利润的一部分。</font><font style="vertical-align: inherit;">实际上，通过购买股票成为公司的所有者，对我们来说，最终收入将恰好是在公司清算时将全部分配给股东的利润。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们获得标准普尔500的E / P（SP500_EARNINGS_YIELD_MONTH），无风险利率（FED基金利率）和广泛市场公司债券收益率（Baa债券收益率）：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># E/P</span>
symbol = <span class="hljs-string">'MULTPL/SP500_EARNINGS_YIELD_MONTH'</span>
SP500_EARNINGS_YIELD_MONTH = web.DataReader(symbol, <span class="hljs-string">'quandl'</span>, <span class="hljs-string">'1962-01-01'</span>, <span class="hljs-string">'2020-03-09'</span>)
<span class="hljs-comment"># FED Funds Rate</span>
FEDFUNDS = fred.get_series(<span class="hljs-string">'FEDFUNDS'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>)
<span class="hljs-comment"># Baa Bonds Yield</span>
BAA = fred.get_series(<span class="hljs-string">'BAA'</span>, observation_start=<span class="hljs-string">'1962-01-01'</span>, observation_end=<span class="hljs-string">'2020-03-09'</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将风险溢价计算为利润减去无风险利率：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#     </span>
risk_premium = pd.concat([SP500_EARNINGS_YIELD_MONTH, FEDFUNDS],axis=<span class="hljs-number">1</span>).fillna(method=<span class="hljs-string">'bfill'</span>)<font></font>
risk_premium[<span class="hljs-string">'premium'</span>] = risk_premium[<span class="hljs-string">'Value'</span>] - risk_premium[<span class="hljs-number">0</span>]<font></font>
<font></font>
<span class="hljs-comment">#     </span>
risk_premium_b = pd.concat([BAA, FEDFUNDS],axis=<span class="hljs-number">1</span>).fillna(method=<span class="hljs-string">'bfill'</span>)<font></font>
risk_premium_b.columns = [<span class="hljs-string">'BAA'</span>, <span class="hljs-string">'FEDFUNDS'</span>]<font></font>
risk_premium_b[<span class="hljs-string">'premium_b'</span>] = risk_premium_b[<span class="hljs-string">'BAA'</span>] - risk_premium_b[<span class="hljs-string">'FEDFUNDS'</span>]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们来看看发生了什么分别为股票和债券。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
股票：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形代码</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
<font></font>
line1, = ax.plot(risk_premium[<span class="hljs-string">'premium'</span>],linewidth=<span class="hljs-number">1</span>)<font></font>
line1.set_label(<span class="hljs-string">'risk_premium_stocks'</span>)<font></font>
<font></font>
line2, = ax.plot(SP500_EARNINGS_YIELD_MONTH,linewidth=<span class="hljs-number">1</span>)<font></font>
line2.set_label(<span class="hljs-string">'SP500_EARNINGS_YIELD_MONTH'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
<font></font>
par1 = ax.twinx()<font></font>
line3, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line3.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'upper left'</span>, bbox_to_anchor=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.88</span>))<font></font>
<font></font>
plt.xlim(left=date(<span class="hljs-number">1962</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/k2/fr/j_/k2frj_8irme_zhcwanphjqr3vem.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于债券：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形代码</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
<font></font>
line1, = ax.plot(risk_premium_b[<span class="hljs-string">'premium_b'</span>][date(<span class="hljs-number">1987</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>):],linewidth=<span class="hljs-number">1</span>, color=<span class="hljs-string">'k'</span>)<font></font>
line1.set_label(<span class="hljs-string">'risk_premium_bonds'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>, bbox_to_anchor=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.95</span>))<font></font>
<font></font>
par1 = ax.twinx()<font></font>
line2, = par1.plot(np.log(BAMLCC7A01015YTRIV),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'green'</span>)<font></font>
line2.set_label(<span class="hljs-string">'Log ICE BofA US Corp 10-15yr Total Return Index Value'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
plt.xlim(left=date(<span class="hljs-number">1987</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
<font></font>
ax.axhline(y=<span class="hljs-number">1.5</span>, linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'red'</span>, ls=<span class="hljs-string">'--'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  BofA'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/o8/et/i1/o8eti1vu7hyaglz63-uhfdjuljk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如我们所见，危机前时期是股票的风险溢价为负而债券的风险溢价降低的区域。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，对于债券而言，降低风险溢价并不总是表示债券市场发生危机的信号（Bof指数仅在2008年才有所下降），但股票市场溢价的降低却几乎总是（除了1980年代初期危机发生后的时期，当时长期持有负溢价）导致股票价值下降。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
负风险溢价对股票意味着什么？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当购买股票时，我们得到低于市场无风险利率的回报。同时，对股价波动和潜在损失的风险承担全部责任。这不是正常情况，投资者了解风险溢价不能为负，因此市场逐渐意识到股票的当前价值过高而开始销售。在广泛的投资者（普通人而非机构投资者）开始恐慌，出售其投资组合并加剧跌势之后，跌势加剧。因此，市场反应迅速而强烈。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值得注意的是，市场跌幅不会达到先前的风险溢价水平，而是会更加剧烈，这会大大增加风险溢价，并再次增强证券对投资者的吸引力。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，如果我们在一张图表上查看股票和债券的风险溢价，就会发现债券的风险溢价传统上高于股票，但是，在过去的五年中，它们已经同步，并且都逐渐趋向于零：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形代码</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
<font></font>
line1, = ax.plot(risk_premium[<span class="hljs-string">'premium'</span>],linewidth=<span class="hljs-number">1</span>)<font></font>
line1.set_label(<span class="hljs-string">'risk_premium_stocks'</span>)<font></font>
<font></font>
par1 = ax.twinx()<font></font>
line3, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line3.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'upper left'</span>, bbox_to_anchor=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.88</span>))<font></font>
<font></font>
line2, = ax.plot(risk_premium_b[<span class="hljs-string">'premium_b'</span>],linewidth=<span class="hljs-number">1</span>, color=<span class="hljs-string">'k'</span>)<font></font>
line2.set_label(<span class="hljs-string">'risk_premium_bonds'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
plt.xlim(left=date(<span class="hljs-number">1968</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/2i/xb/xe/2ixbxehawqshzbeznt-cseobsom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
截至2020年3月9日，尽管美国股市大幅下跌，但股票收益率仍远未达到负值区域，这发出了令人鼓舞的信号。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">国债收益率差</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
危机前市场状况的另一种指标是长期和短期国债收益率之间的差异。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
噪声最小且最实用的是10年期和2年期国债收益率之间的价差：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形代码</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
par1 = ax.twinx()<font></font>
line, = ax.plot(pd.DataFrame(T10Y2Y),linewidth=<span class="hljs-number">0.4</span>)<font></font>
line.set_label(<span class="hljs-string">'10YB-2YB'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.1</span>))<font></font>
<font></font>
line1, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line1.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.18</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1976</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
plt.ylim(bottom=<span class="hljs-number">4</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2019</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2007</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2000</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1998</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1989</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.8</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1981</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1978</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), <span class="hljs-number">5.9</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/na/vx/ph/navxphciegx_cu6-jy23x3djvnw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从历史角度来看，该指标是最真实的，并预测了最近的7次金融危机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，债券收益率之间的价差反映了投资者的情绪-如果他们认为经济将很快恶化，便开始将资金从固定期限收益率的短期债券（期限为2年）转移到长期工具（期限为10年）最可靠的发行人是美国财政部。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
购买长期债券会影响其收益，因为购买大量现金的债券会导致债券成本增加。当息票为固定价值时，债券主体的升值会导致其收益率下降。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于在这种情况下出售的短期债券，情况恰恰相反-机构开始变得便宜，在固定的息票中，收益率开始增长。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，FRED在1976年之前没有提供有关该利差的更多信息，因此，出于说明目的，我们可以将10年期国债的收益率减去FED利率（而不是短期2年期国债）来了解自1962年以来发生的情况并涵盖了另外2次危机：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形代码</font></font></b><div class="spoiler_text"><pre><code class="python hljs">fig, ax = plt.subplots(figsize=(<span class="hljs-number">17</span>,<span class="hljs-number">6</span>))<font></font>
par1 = ax.twinx()<font></font>
line, = ax.plot(pd.DataFrame(T10YFF),linewidth=<span class="hljs-number">0.4</span>)<font></font>
line.set_label(<span class="hljs-string">'10-Year Treasury Constant Maturity Minus Federal Funds Rate'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.1</span>))<font></font>
<font></font>
line1, = par1.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
line1.set_label(<span class="hljs-string">'S&amp;P500'</span>)<font></font>
par1.legend(loc=<span class="hljs-string">'best'</span>, bbox_to_anchor=(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.18</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1962</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
plt.ylim(bottom=<span class="hljs-number">4</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axhline(linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2019</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.7</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2007</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.7</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">2000</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.7</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1998</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1989</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.4</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1973</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1981</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.3</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1979</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1969</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
plt.scatter(date(<span class="hljs-number">1967</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-number">6.6</span>, color=<span class="hljs-string">'orange'</span>, s=<span class="hljs-number">500</span>, marker=<span class="hljs-string">'o'</span>, alpha=<span class="hljs-number">0.5</span>)<font></font>
<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'  , %'</span>)<font></font>
par1.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/an/z3/az/anz3azvwzxftytsp9lu0eyp8lkk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管这种利差普遍存在噪音（与10年至2年的利差比较），但通过减少利差至负值区域也实现了73和69的危机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在呢？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
事情不是很顺利-该指标在2019年已经显示出负区域。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
机构投资者期望在不久的将来，我们将面临严重的冲击，因此，它们将转向长期固定收益工具。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
危机前还剩下多少？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从价差图可以看出，收益率倒挂预计将持续一到两年的危机。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
鉴于这种反转发生在2019年底，并且由于对COVID-19病毒可能导致未来经济衰退的预期，美国市场已经开始下跌，这场危机正在临近。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
截至2020年3月9日，美国10年期美国国债的收益率跌至0.318％-最低值！</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
似乎有大事在等着我们，而且已经开始了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当前值T10YFF：-0.17 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当前值T10Y2Y：0.25</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过去的价格无法预测危机</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以本期技术分析的无奈为例，我们采用RSI指标。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSI-理论上的相对强度指数显示“超买”和“超卖”市场。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
超买市场-这是价格必须下调的状态，即股市危机。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接到Wiki，并附有指标的描述</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我们可以使用Python计算该指标，为了进行计算，我们使用了周期-244个交易时段（1个日历年）：</font></font><br>
<br>
<pre><code class="python hljs">SP500_returns = GSPC_h[<span class="hljs-string">'Close'</span>].pct_change()<font></font>
delta = GSPC_h[<span class="hljs-string">'Close'</span>].diff()<font></font>
window_length = <span class="hljs-number">500</span><font></font>
<font></font>
<span class="hljs-comment"># Make the positive gains (up) and negative gains (down) Series</span><font></font>
up, down = delta.copy(), delta.copy()<font></font>
up[up &lt; <span class="hljs-number">0</span>] = <span class="hljs-number">0</span>
down[down &gt; <span class="hljs-number">0</span>] = <span class="hljs-number">0</span><font></font>
<font></font>
<span class="hljs-comment"># Calculate the EWMA</span><font></font>
roll_up1 = up.ewm(span=window_length).mean()<font></font>
roll_down1 = down.abs().ewm(span=window_length).mean()<font></font>
<font></font>
<span class="hljs-comment"># Calculate the RSI based on EWMA</span><font></font>
RS1 = roll_up1 / roll_down1<font></font>
RSI1 = <span class="hljs-number">100.0</span> - (<span class="hljs-number">100.0</span> / (<span class="hljs-number">1.0</span> + RS1))
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形代码</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Compare graphically</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">20</span>,<span class="hljs-number">4</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1968</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
line, = ax.plot(np.log(GSPC_h[<span class="hljs-string">'Close'</span>]),linewidth=<span class="hljs-number">0.7</span>, color=<span class="hljs-string">'red'</span>)<font></font>
<font></font>
line.set_label(<span class="hljs-string">'SNP500'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
<font></font>
fig1, ax1 = plt.subplots(figsize=(<span class="hljs-number">20</span>,<span class="hljs-number">4</span>))<font></font>
plt.xlim(left=date(<span class="hljs-number">1968</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), right=date(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">9</span>))<font></font>
line1, = ax1.plot(RSI1[<span class="hljs-number">80</span>:],linewidth=<span class="hljs-number">1</span>)<font></font>
<font></font>
line1.set_label(<span class="hljs-string">'RSI (1Y)'</span>)<font></font>
ax1.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
<font></font>
ax.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axhline(y=<span class="hljs-number">57</span>, linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
ax1.axhline(y=<span class="hljs-number">45</span>, linewidth=<span class="hljs-number">2</span>, color=<span class="hljs-string">'black'</span>, alpha=<span class="hljs-number">0.7</span>)<font></font>
<font></font>
ax.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax1.axvspan(date(<span class="hljs-number">1990</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1991</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1981</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1982</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1980</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1980</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1973</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1975</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">1969</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">1970</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">2007</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2009</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
ax1.axvspan(date(<span class="hljs-number">2001</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), date(<span class="hljs-number">2001</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>), alpha=<span class="hljs-number">0.3</span>, color=<span class="hljs-string">'grey'</span>)<font></font>
<font></font>
ax1.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>)<font></font>
ax1.set_ylabel(<span class="hljs-string">' RSI'</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">'Log  S&amp;P500'</span>)<font></font>
<font></font>
plt.show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/en/zh/v_/enzhv_y7bwccnqp9qib3lb6gqls.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们在RSI图表上看到了什么？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
许多“超买”区域可能预示着过多的市场，现在该是下调的时候了。</font><font style="vertical-align: inherit;">但是它继续上升（例如，自1995年以来很长一段时间，该指标显示为“超买”，但在2001年危机之前，它返回到其正常区域，并不表示“超买”，但以危机结束）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
换句话说，使用振荡器来预测危机是一项极富争议的工作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在危机发生之前，市场保持平稳增长，没有像下跌那样呈现出很高的向上波动性，而是始终迅速而迅速。</font><font style="vertical-align: inherit;">我们看到这恰好位于震荡指标的下边界附近，几乎总是在危机来临时，跌落谷接近时才准确地显示出它的交点。</font><font style="vertical-align: inherit;">购买信号？</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前，形势看起来令人震惊；有直接迹象表明可能出现衰退。</font><font style="vertical-align: inherit;">除了已审查的指标外，还有工业生产指数（它导致经济（而非金融）危机的发生）。</font><font style="vertical-align: inherit;">也可以深入研究宏观经济统计数据，并将国际收支，GDP等添加到分析中，但是，机构投资者已经为我们做到了这一点-他们的反应反映在长期和短期债券的收益率差中。</font><font style="vertical-align: inherit;">如果您没有金融投资，则可以放松并观看节目。</font><font style="vertical-align: inherit;">如果有的话-考虑一下可能对冲您的头寸，或者去缓存直到更好的时机。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN491612/index.html">以Sberbank的优先股和普通股为例比较python中两只股票的报价动态</a></li>
<li><a href="../zh-CN491614/index.html">为什么Masterhost注定要失败：内幕</a></li>
<li><a href="../zh-CN491616/index.html">使用PC通过Internet管理Arduino-初学者体验</a></li>
<li><a href="../zh-CN491618/index.html">为什么种族和编程语言会消失，它们如何帮助将其保存在社交网络上</a></li>
<li><a href="../zh-CN491620/index.html">是什么使赛普拉斯非常适合自动化初学者？</a></li>
<li><a href="../zh-CN491624/index.html">在Unity Universal Render管道中创建轮廓效果</a></li>
<li><a href="../zh-CN491628/index.html">Spelunky是优秀游戏设计的一个例子</a></li>
<li><a href="../zh-CN491630/index.html">Firefox浏览器扩展程序应用程序（WebExtensions）</a></li>
<li><a href="../zh-CN491632/index.html">数字不朽-同步互联网</a></li>
<li><a href="../zh-CN491634/index.html">保护和黑客Xbox 360（第1部分）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>