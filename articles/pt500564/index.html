<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🌾 👩🏿‍🏫 🍣 Transações off-line em transporte público - segurança e antifraude 💪🏻 😞 🍊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="E não passou um dia, pois estou escrevendo um novo artigo, que também está relacionado à tecnologia NFC. Ou seja - transações off-line em transporte p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Transações off-line em transporte público - segurança e antifraude</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500564/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E não passou um dia, pois estou escrevendo um novo artigo, que também está relacionado à tecnologia NFC. Ou seja - transações off-line em transporte público, por que e quais são os prós e os contras dos passageiros e transportadoras que ele transporta. Cerca de cinco anos atrás, vários escândalos relacionados ao roubo de cartões da Troika em Moscou fizeram barulho. Em seguida, os hackers precisaram obter as chaves para acessar o conteúdo dos cartões Mifare 1K e similares, além de software bastante específico para trabalhar com eles. Ao mesmo tempo, a probabilidade de ser detectada era bastante alta - cartões com inconsistências no conteúdo e o servidor da Troika foi rapidamente enviado para a lista de paradas, e ao tentar passar por esse cartão, a catraca emitiu um grito agudo, atraindo a atenção. O que mudou quando os terminais começaram a suportar cartões bancários?</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/up/59/xi/up59xi-eljbjnmjuvc9a2uj34yq.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta é exatamente a imagem em que o pagamento da tarifa pode ser observado em algumas grandes cidades. </font><font style="vertical-align: inherit;">Os novos terminais podem funcionar tanto com cartões Mifare antigos quanto com cartões EMV sem contato. </font><font style="vertical-align: inherit;">É necessário dizer que, apesar dos escândalos que eclodiram, as vulnerabilidades do antigo Mifare não desapareceram? </font><font style="vertical-align: inherit;">Mas neste artigo, falaremos sobre as vulnerabilidades que o suporte a EMV traz.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aviso para párias, bandidos e hackers de todas as faixas:</font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A descrição abaixo é puramente informativa e informativa por natureza. </font><font style="vertical-align: inherit;">Entendo que, por algumas razões subjetivas, esse aviso não irá parar alguns leitores, mas lembre-se: existem artigos do Código Penal da Federação Russa nº 159 e nº 272!</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pouco de teoria</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EMV (Europay Mastercard Visa)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - um padrão que descreve o comportamento de um chip de cartão de pagamento em vários cenários para garantir a maior segurança possível dos pagamentos. </font><font style="vertical-align: inherit;">Você pode ler mais sobre isso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em um post respeitado</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexgre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Estamos interessados ​​apenas no fato de que, em alguns casos, o protocolo permite transações offline, ou seja, a operação que o cartão e o terminal realizam exclusivamente entre si, e as informações da transação são transmitidas posteriormente ao banco adquirente. A vantagem dessa abordagem é, sem dúvida, que esta solução é ideal para condições em que não há conexão ou a conexão é instável - como o mesmo barramento, por exemplo. O menos vem do nome - o terminal não pode verificar a disponibilidade de fundos no cartão, nem o status do próprio cartão. O banco somente poderá confirmar ou negar baixas contábeis para uma transação específica durante a sincronização. O que acontece se você mostrar ao condutor um cartão em branco ou bloqueado? Mas nada vai acontecer.Utilizando comandos básicos do APDU, o terminal solicita a data de validade do cartão e o compara com a hora do sistema - se não tiver expirado, solicita sua PAN - é o mesmo número de cartão impresso. Depois de salvar esses dados, a critério do TRM (Terminal Risk Management, Terminal Risk Management), o terminal transfere um número aleatório para o cartão, faz o hash e assina com sua chave, o terminal salva o número original e a resposta do cartão para que posteriormente possa ser transferido para o banco. Depois de executar essas operações, o terminal envia um comando para finalizar a conexão com o cartão e finaliza a conexão imprimindo um cheque. Posteriormente, o terminal não poderá cancelar o dinheiro desse cartão - o cartão PAN é enviado para a lista de paradas - até que eles paguem a dívida, eles não aceitarão esse cartão em nenhum ônibus. Um sistema ideal, não é? Parece que existem vulnerabilidades,todos os brindes pagam por tudo no final. Tudo teria permanecido o mesmo, se não fosse um grande "Mas" ... Ou vários.</font></font><br>
<br>
<h3>Apple/Samsung/Google Pay — </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E em 9 de setembro de 2014, a Apple introduziu um novo método de pagamento sem contato na infraestrutura existente. O Apple Pay concentrou-se na simplicidade, velocidade e privacidade. A simplicidade foi fornecida (e fornece) pela interface intuitiva da Wallet e a privacidade é garantida pela tokenização. Ao adicionar um cartão à Carteira virtual, um sistema de pagamento (como Mastercard ou Visa) gera um token. O token é um PAN - mas não aquele que é eliminado no cartão adicionado, mas é equivalente no sistema de pagamento. A partir de agora, as solicitações de terminal POS para este PAN virtual serão consideradas pelo sistema de pagamento como se fosse um número de cartão físico. Com essa abordagem, mesmo um terminal potencialmente comprometido não vê o número real do cartão - o token pode ser usado apenas para pagamentos em terminais POS; em outros casos, é inútil.Mais tarde, o Samsung Pay e o Google Pay (anteriormente Android Pay) começaram a trabalhar com o mesmo princípio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tokens em transações offline</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim. </font><font style="vertical-align: inherit;">Um dispositivo sem contato aqui é equivalente a um cartão físico. </font><font style="vertical-align: inherit;">E, no caso de um erro de pagamento, o terminal no ônibus colocará o PAN na lista de paradas. </font><font style="vertical-align: inherit;">A justiça triunfou! </font><font style="vertical-align: inherit;">Só que ... PAN é efêmero! </font><font style="vertical-align: inherit;">Cada vez que você adiciona um cartão a um dispositivo móvel, o token será diferente. </font><font style="vertical-align: inherit;">Assim - adicionamos o cartão ao dispositivo - e saímos da lista de paradas sem pagar um centavo. </font><font style="vertical-align: inherit;">Repita se necessário. </font><font style="vertical-align: inherit;">Assim, para reproduzir esse ataque, qualquer dispositivo capaz de efetuar pagamentos sem contato é adequado. </font><font style="vertical-align: inherit;">Isso representa 90% de todos os telefones com NFC.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como lutar?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Off-line - de jeito nenhum. </font><font style="vertical-align: inherit;">Absolutamente. </font><font style="vertical-align: inherit;">Não há como determinar se um token pertence a alguma conta. </font><font style="vertical-align: inherit;">Portanto, precisamos de terminais que possam ficar off-line apenas quando necessário e permanecer on-line pelo maior tempo possível. </font><font style="vertical-align: inherit;">Entendo que a soma dos riscos é pequena, mas a vulnerabilidade é tão fácil de operar que todos podem tirar vantagem. </font><font style="vertical-align: inherit;">Você pode resolver a situação - existem validadores especializados para transporte público.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipo de tal.</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/ov/1t/wl/ov1twljnqkirfa91bajgeyo8igk.jpeg" alt="image"><br>
     ,      .       .<br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quais são as descobertas?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As inovações apressadas nem sempre serão seguras e confiáveis. </font><font style="vertical-align: inherit;">Como no sistema de transporte, as antigas vulnerabilidades ainda não foram corrigidas, mas já trouxeram novas e facilmente exploráveis. </font><font style="vertical-align: inherit;">E muletas são ruins. </font><font style="vertical-align: inherit;">Espero que minha pequena pesquisa ajude algumas empresas de transporte a repensar suas prioridades.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500552/index.html">Como acelerar a revisão de código</a></li>
<li><a href="../pt500554/index.html">Modelo de servidor back-end Golang - parte 2 (API REST)</a></li>
<li><a href="../pt500556/index.html">Dois anos de transformação digital em dois meses</a></li>
<li><a href="../pt500558/index.html">Uma seleção de artigos sobre aprendizado de máquina: estudos de caso, guias e pesquisas para abril de 2020</a></li>
<li><a href="../pt500562/index.html">Padrões de design de formulário. Revisão do livro</a></li>
<li><a href="../pt500568/index.html">Simulação simples de espaço usando Python e Box2D</a></li>
<li><a href="../pt500572/index.html">Spring MVC: Design de Sites e Serviços RESTful</a></li>
<li><a href="../pt500574/index.html">Análise completa da primeira parte do exame no SHAD 2020</a></li>
<li><a href="../pt500576/index.html">Interpolação e discretização, por que elas são necessárias para a conversão da imagem projetada?</a></li>
<li><a href="../pt500578/index.html">O Único que Importa (Parte 4 do Guia de Inicialização de Mark Andriessen, 2007)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>