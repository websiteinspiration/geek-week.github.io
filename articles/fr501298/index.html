<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥞 👨‍🚒 🎷 Création de votre propre référentiel de plugins QGIS 👇 👨🏻‍🎓 👨🏽‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La plupart des plugins QGIS accessibles au public sont hébergés dans le référentiel officiel . Cependant, dans certains cas, il est nécessaire de crée...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Création de votre propre référentiel de plugins QGIS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501298/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La plupart des plugins QGIS accessibles au public sont hébergés dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">référentiel officiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cependant, dans certains cas, il est nécessaire de créer votre propre référentiel de plugins, par exemple, pour distribuer votre plugin dans un cercle restreint de collègues d'une organisation particulière. </font><font style="vertical-align: inherit;">Dans cet article, nous verrons comment implémenter notre propre référentiel de plugins et discuterons également des exigences minimales qu'un plugin doit remplir pour le placer dans son propre référentiel.</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note 1</font></font></b>
                        <div class="spoiler_text"> ,           QGIS  . ,        ,       :<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">https://plugins.qgis.org/publish/</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Releasing your plugin</a><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note 2</font></font></b>
                        <div class="spoiler_text">,   ,    QGIS 3.10.5 LTR.<br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestionnaire de plugins</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
QGIS dispose d'un outil spécial pour travailler avec des plugins - le gestionnaire de plugins. </font><font style="vertical-align: inherit;">Il vous permet de rechercher des plugins, de les installer et de les supprimer, de suivre l'apparition de nouvelles versions des plugins installés, de connecter des référentiels tiers, etc. </font><font style="vertical-align: inherit;">Pour chaque plugin, le gestionnaire de plugins fournit une fenêtre avec des informations sur le plugin. </font><font style="vertical-align: inherit;">Il existe trois scénarios pour remplir ces informations:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le plugin est dans le référentiel, mais n'est pas installé sur votre ordinateur. </font><font style="vertical-align: inherit;">Dans ce cas, toutes les informations pour le gestionnaire de plugins sont extraites de la description du plugin dans le fichier plugins.xml.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le plugin est installé sur votre ordinateur et il existe une connexion avec le référentiel. </font><font style="vertical-align: inherit;">Dans ce cas, une partie des informations est toujours extraite de la description du plugin dans le fichier plugins.xml, et une partie du fichier de métadonnées metadata.txt</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le plugin est installé sur votre ordinateur et il n'y a pas de connexion avec le référentiel. </font><font style="vertical-align: inherit;">Dans ce cas, toutes les informations du gestionnaire de plugins sont extraites du fichier de métadonnées metadata.txt.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le tableau ci-dessous décrit l'origine des paramètres dans la fenêtre avec des informations sur le plugin, dans chacun des trois cas:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paramètre dans la fenêtre d'informations sur le plugin dans le gestionnaire de plugins QGIS</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La source à partir de laquelle le paramètre est extrait avant l'installation à partir du référentiel</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La source à partir de laquelle le paramètre est extrait lorsque le plug-in est installé sur votre ordinateur et qu'il existe une connexion avec le référentiel</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La source à partir de laquelle le paramètre est extrait lorsque le plug-in est installé sur votre ordinateur et qu'il n'y a pas de connexion avec le référentiel</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nom</font></font><br>
 </td>
<td> <font color="blue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugins.xml</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (propriété de nom de la balise pyqgis_plugin)</font></font><br>
 </td>
<td> <font color="blue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugins.xml</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (propriété de nom de la balise pyqgis_plugin)</font></font><br>
 </td>
<td> <font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt</font></font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La description</font></font><br>
 </td>
<td> <font color="blue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugins.xml</font></font></font><br>
 </td>
<td> <font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt</font></font></font><br>
 </td>
<td> <font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt</font></font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> À propos de</font></font><br>
 </td>
<td> <font color="blue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugins.xml</font></font></font><br>
 </td>
<td> <font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt</font></font></font><br>
 </td>
<td> <font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt</font></font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Version installée</font></font><br>
 </td>
<td></td>
<td> <font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(paramètre de version)</font></font><br>
 </td>
<td> <font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(paramètre de version)</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Version disponible</font></font><br>
 </td>
<td> <font color="blue">plugins.xml</font>&nbsp;( version  pyqgis_plugin)<br>
 </td>
<td> <font color="blue">plugins.xml</font>&nbsp;( version  pyqgis_plugin)<br>
 </td>
<td> </td>
</tr>
<tr>
<td> Download url<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> </td>
</tr>
<tr>
<td> Changelog<br>
 </td>
<td></td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Tags<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Author<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Email<br>
 </td>
<td></td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Homepage<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Bug tracker<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Code repository<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> QgisMinimumVersion<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> QgisMaximumVersion<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Experimental<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Deprecated<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Icon<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
<tr>
<td> Category<br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="blue">plugins.xml</font><br>
 </td>
<td> <font color="green">metadata.txt</font><br>
 </td>
</tr>
</tbody></table></div><div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"> </b>
                        <div class="spoiler_text"><ul>
<li> ,       QGIS,   metadata.txt  plugins.xml  .      initGui()   .</li>
<li> Installed version  Available version,  QGIS   .  Installed version  Available version,  QGIS   «Installed version of this plugin is higher than any version found in repository».       ,  ,   .</li>
<li>        ,     metadata.txt  plugins.xml .        .</li>
<li> Available version   plugins.xml   version  pyqgis_plugin,     version.</li>
<li>  metadata.txt  plugins.xml    Experimental  Deprecated,           .</li>
<li>   QGIS     (QgisMinimumVersion)   (QgisMaximumVersion) ,   metadata.txt  plugins.xml.</li>
<li>    ,       .     ,      QgisMinimumVersion + 0.99.</li>
</ul><br>
</div>
                    </div><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque plugin dans le référentiel doit être conditionné dans une archive zip distincte, dans laquelle le dossier racine doit être présent, et dans lequel se trouvent les fichiers de votre plugin avec le fichier metadata.txt. </font><font style="vertical-align: inherit;">Par le nom du dossier racine, le gestionnaire de plugins QGIS fera correspondre les plugins installés localement avec les plugins disponibles dans le référentiel. </font><font style="vertical-align: inherit;">Les caractéristiques d'une telle comparaison seront discutées ci-dessous dans la section </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Communication entre le plugin local et le plugin dans le référentiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un plugin QGIS fonctionnel ne doit contenir que deux fichiers requis dans son répertoire:</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">__init__.py est le point de départ du plugin. </font><font style="vertical-align: inherit;">Le fichier doit contenir la méthode classFactory ().</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata.txt - contient des informations générales sur le plugin. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple de plugin avec un ensemble minimal de fichiers peut être trouvé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez étudier la structure des plugins plus en détail dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation officielle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier de métadonnées</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme déjà indiqué, dans le répertoire de chaque plugin, il doit y avoir un fichier metadata.txt contenant des informations générales sur le plugin. </font><font style="vertical-align: inherit;">Les informations qu'il contient sont utilisées pour s'afficher dans le gestionnaire de plug-ins QGIS, rechercher un plug-in, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La structure du fichier de métadonnées doit être la suivante:</font></font><br>
<br>
<pre><code class="plaintext hljs">[general]<font></font>
Parameter1_Name: Parameter1_Value<font></font>
Parameter2_Name: Parameter2_Value<font></font>
…<font></font>
ParameterN_Name: ParameterN_Value</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou:</font></font><br>
<br>
<pre><code class="plaintext hljs">[general]<font></font>
Parameter1_Name= Parameter1_Value<font></font>
Parameter2_Name= Parameter2_Value<font></font>
…<font></font>
ParameterN_Name= ParameterN_Value</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez utiliser deux points ou le symbole "=" comme séparateur pour le nom du paramètre et sa valeur. </font><font style="vertical-align: inherit;">Cependant, il n'est pas nécessaire qu'il n'y ait qu'un seul type de délimiteur dans un seul fichier de métadonnées. </font><font style="vertical-align: inherit;">Les espaces avant et après le séparateur n'affectent pas la lecture des données de metadata.txt, par conséquent, ils peuvent être en n'importe quelle quantité ou totalement absents. </font><font style="vertical-align: inherit;">Notez également que le mot clé "[général]" au début du fichier de métadonnées est obligatoire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les paramètres requis, sans lesquels le plug-in peut être interrompu, sont les suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name - nom du plugin,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">version - version plugin,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qgisMinimumVersion est la version minimale de QGIS adaptée pour travailler avec ce plugin.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez trouver des informations sur d'autres paramètres </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plugins.xml</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque référentiel doit contenir un fichier plugins.xml qui fournit des informations générales au gestionnaire de plugins sur tous les plugins disponibles dans le référentiel.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque</font></font></b>
                        <div class="spoiler_text">  ,       .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La structure de plugins.xml doit être la suivante:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">pyqgis_plugin</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Plugin1_Name"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"Plugin1_Version"</span>&gt;</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">Plugin1_Parameter1_Name</span>&gt;</span>Plugin1_Parameter1_Value<span class="hljs-tag">&lt;/<span class="hljs-name">Plugin1_Parameter1_Name</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">Plugin1_Parameter2_Name</span>&gt;</span>Plugin1_Parameter2_Value<span class="hljs-tag">&lt;/<span class="hljs-name">Plugin1_Parameter2_Name</span>&gt;</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ....<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">Plugin1_ParameterN_Name</span>&gt;</span>Plugin1_ParameterN_Value<span class="hljs-tag">&lt;/<span class="hljs-name">Plugin1_ParameterN_Name</span>&gt;</span>
&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;/<span class="hljs-name">pyqgis_plugin</span>&gt;</span><font></font>
&nbsp;&nbsp;&nbsp; ...<font></font>
&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">pyqgis_plugin</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PluginN_Name"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"PluginN_Version"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">PluginN_Parameter1_Name</span>&gt;</span>PluginN_Parameter1_Value<span class="hljs-tag">&lt;/<span class="hljs-name">PluginN_Parameter1_Name</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">PluginN_Parameter2_Name</span>&gt;</span>PluginN_Parameter2_Value<span class="hljs-tag">&lt;/<span class="hljs-name">PluginN_Parameter2_Name</span>&gt;</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ....<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">PluginN_ParameterN_Name</span>&gt;</span>PluginN_ParameterN_Value<span class="hljs-tag">&lt;/<span class="hljs-name">PluginN_ParameterN_Name</span>&gt;</span>
&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;/<span class="hljs-name">pyqgis_plugin</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les paramètres requis sans lesquels le référentiel peut être interrompu sont les suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name - le nom du plugin (indiqué comme paramètre de la balise pyqgis_plugin)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">version - version du plugin (spécifié comme paramètre de la balise pyqgis_plugin),</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qgis_minimum_version - la version minimale de QGIS adaptée pour travailler avec ce plugin,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">download_url - URL où se trouve l'archive zip avec votre plugin.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est recommandé d'étudier l'exemple de fichier plugins.xml du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">référentiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> officiel </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">QGIS</font></a><font style="vertical-align: inherit;"> (remplacez les numéros à la fin du lien par la version de QGIS installée sur votre ordinateur).</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pointe</font></font></b>
                        <div class="spoiler_text">  plugins.xml,         .      xml.<br>
</div>
                    </div><br>
<a name="link"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La relation entre le plugin local et le plugin dans le référentiel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment le gestionnaire de plugins comprend-il qu'un certain plugin installé sur votre ordinateur et un plugin dans le référentiel connecté sont le même plugin, par exemple, afin de vérifier si une nouvelle version du plugin est apparue dans le référentiel? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sans entrer dans les détails techniques, la règle de connexion des plugins est la suivante: le plug-in local et le plug-in dans le référentiel sont considérés par le gestionnaire de plug-ins QGIS comme étant le même plug-in si le nom du dossier racine du plug-in correspond au texte jusqu'au premier point de la balise file_name, ou si la balise file_name est manquante, avec du texte au premier point du dernier élément de chemin de la balise download_url.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, si la balise file_name est présente dans la description du plugin à partir de plugins.xml, alors la partie jusqu'au premier point (mise en évidence en gras) en sera extraite, qui doit être exactement le nom du dossier racine du plugin installé afin que le gestionnaire de plugins QGIS les considère comme un et le même plugin. </font><font style="vertical-align: inherit;">
Si la balise file_name est manquante, le dernier élément de chemin de la balise download_url sera analysé de la même manière. La partie extraite de celui-ci jusqu'au premier point (surligné en gras) doit également être exactement le nom du dossier racine du plug-in installé afin que le gestionnaire de plug-ins QGIS les considère comme le même plug-in. </font><font style="vertical-align: inherit;">
S'il n'y a pas de correspondance entre le nom du dossier racine et la partie extraite de nom_fichier ou (si nom_fichier est manquant) de download_url, les plugins sont considérés comme des plugins différents.</font></font><br>
<br>
<code>&lt;file_name&gt;<strong>PluginName</strong>.2.1.0.zip&lt;/file_name&gt;</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>&lt;download_url&gt;YourRepositoryURL/<strong>PluginName</strong>.2.1.0.zip&lt;/download_url&gt;</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de cette règle, il est recommandé d'ajouter la balise file_name dans la description des plugins dans le fichier plugins.xml, qui n'indique pas le nom de votre archive zip, mais le nom du dossier racine de votre plugin, auquel vous pouvez éventuellement ajouter une version ou d'autres informations, en les séparant par un point. </font><font style="vertical-align: inherit;">Dans ce cas, vous pouvez nommer l'archive zip avec le plugin comme vous le souhaitez, y compris en séparant le nom du plugin et sa version par un trait d'union, comme c'est la coutume dans le référentiel officiel.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque</font></font></b>
                        <div class="spoiler_text">   QGIS   file_name         . <br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemples de plugins correctement conçus</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple 1</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Structure du fichier du plugin</font></font></h4><br>
<code>FolderName.SomeInfo.zip<br>
---FolderName<br>
------__init__.py<br>
------metadata.txt</code><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier Metadata.txt</font></font></h4><br>
<code>[general]<br>
name: PluginName<br>
version: 2.1.0<br>
qgisMinimumVersion: 3.0</code><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier plugins.xml</font></font></h4><br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>&nbsp;
   <span class="hljs-tag">&lt;<span class="hljs-name">pyqgis_plugin</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PluginName"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"2.1.0"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">qgis_minimum_version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">qgis_minimum_version</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">download_url</span>&gt;</span>YourRepositoryURL/FolderName.SomeInfo.zip<span class="hljs-tag">&lt;/<span class="hljs-name">download_url</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">pyqgis_plugin</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet exemple, la connexion entre le plugin installé localement sur votre ordinateur et le plugin dans le référentiel se fait via le nom du dossier racine et la balise download_url. </font><font style="vertical-align: inherit;">Par conséquent, la partie du nom de l'archive zip au premier point et le nom du dossier racine du plugin doivent correspondre exactement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple 2</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Structure du fichier du plugin</font></font></h4><br>
<code>ArchiveName.SomeInfo.zip<br>
---FolderName<br>
------__init__.py<br>
------metadata.txt</code><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier Metadata.txt</font></font></h4><br>
<code>[general]<br>
name: PluginName<br>
version: 2.1.0<br>
qgisMinimumVersion: 3.0</code><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier plugins.xml</font></font></h4><br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">pyqgis_plugin</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PluginName"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"2.1.0"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">qgis_minimum_version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">qgis_minimum_version</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">file_name</span>&gt;</span>FolderName.SomeInfo<span class="hljs-tag">&lt;/<span class="hljs-name">file_name</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="hljs-tag">&lt;<span class="hljs-name">download_url</span>&gt;</span>YourRepositoryURL/ArchiveName.SomeInfo.zip<span class="hljs-tag">&lt;/<span class="hljs-name">download_url</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">pyqgis_plugin</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet exemple, la connexion entre le plugin installé localement sur votre ordinateur et le plugin dans le référentiel se fait via le nom du dossier racine et la balise file_name. </font><font style="vertical-align: inherit;">Dans ce cas, la partie du nom de l'archive zip au premier point et le nom du dossier racine peuvent différer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer un référentiel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le référentiel de plugins QGIS doit être constitué d'un fichier plugins.xml qui fournit des informations générales au gestionnaire de plugins sur tous les plugins disponibles dans le référentiel et des archives zip contenant les plugins eux-mêmes. Le référentiel peut être hébergé sur des services Web tels que GitHub ou Bitbucket. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une condition importante pour que QGIS reconnaisse un tel référentiel est d'accéder aux fichiers via un lien direct. Cela peut être fait, par exemple, en utilisant des pages Github ou des pages Bitbucket. Google Drive ou DropBox ne fonctionneront pas à ces fins. ils ne permettent pas un lien direct vers un fichier de la forme ... / filename.extension. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les instructions d'utilisation de GitHub pour héberger un site Web statique sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">disponibles ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les instructions sur la façon d'utiliser Bitbucket pour héberger un site Web statique sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">disponibles ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En règle générale, il vous suffit de renommer votre référentiel selon le modèle: </font></font><br>
<br>
<code>username.github.io </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(pour GitHub) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou </font></font><br>
<code>username.bitbucket.io </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(pour Bitbucket) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après les paramètres nécessaires, le lien vers votre référentiel QGIS ressemblera à ceci: </font></font><br>
<br>
<code>username.github.io/plugins.xml </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(pour GitHub) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou </font></font><br>
<code>username.bitbucket.io/plugins.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(pour Bitbucket) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce lien doit être spécifié dans le champ URL du gestionnaire de plug-ins QGIS lors de la connexion d'un nouveau référentiel. </font><font style="vertical-align: inherit;">Si la connexion au référentiel réussit, l'état du référentiel sera défini sur «connecté» et les plugins décrits dans le fichier plugins.xml apparaîtront dans la liste des plugins disponibles.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr501270/index.html">Il est temps de distribuer vos jouets</a></li>
<li><a href="../fr501272/index.html">Contre de Durov</a></li>
<li><a href="../fr501276/index.html">Ajouter des milliers de clips à une liste de lecture YouTube à partir d'une chaîne Telegram</a></li>
<li><a href="../fr501280/index.html">Программист должен решать проблемы бизнеса</a></li>
<li><a href="../fr501282/index.html">Effet secondaire du coronavirus: les robots occuperont nos emplois encore plus rapidement</a></li>
<li><a href="../fr501302/index.html">Veuillez ne pas faire de bruit</a></li>
<li><a href="../fr501306/index.html">Création d'un pipeline pour fournir Graal Native Image aux utilisateurs finaux</a></li>
<li><a href="../fr501308/index.html">Nous essayons de comprendre StateFlow</a></li>
<li><a href="../fr501310/index.html">À propos du peroxyde d'hydrogène et du bug des fusées</a></li>
<li><a href="../fr501312/index.html">Alpine.js - cadre léger avec une syntaxe pratique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>