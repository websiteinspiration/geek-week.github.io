<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☃️ 🧗🏾 📠 Arbeit mit dem chinesischen Chip ADC Hx711 (Fazit) 🧤 👨🏻‍✈️ 🐐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nach einiger Zeit verursachte eine zweite Bekanntschaft mit dem ursprünglichen Artikel ein Gefühl der Unvollständigkeit bei der Verwendung dieses ADC ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Arbeit mit dem chinesischen Chip ADC Hx711 (Fazit)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491990/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach einiger Zeit verursachte eine zweite Bekanntschaft mit dem ursprünglichen Artikel ein Gefühl der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unvollständigkeit bei der Verwendung dieses ADC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ja, bestimmte Studien zu diesem Produkt wurden durchgeführt, Schwachstellen wurden gefunden und Wege zur Umgehung dieser Schwachstellen vorgeschlagen, aber es gab keine Frage der experimentellen praktischen Anwendung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Arbeit von Andrei Gerasimenko („ADC NH711 von 3.3V - glaube nicht an die chinesische Dokumentation und nicht nur ...“ (https // habr.com / ru / post / 438772)) erforderte keine absolute Berücksichtigung des Gewichts des Bienenstocks. Die Relativitätsbedingung der gewichteten Bienenstöcke beseitigte den Wiegefehler, da technische Fehler, die sich aus Änderungen der äußeren Bedingungen ergaben, auf alle Verfolgungsobjekte wirkten und automatisch von der Analyse des Zustands der Bienenstöcke ausgeschlossen wurden. Bei einfachem Wiegen ist die Situation anders.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die von mir festgestellten Schwächen des Wandlers in Form der Verteilung des Messfehlers außer der Zufallsverteilung wurden auch von Nikopol_86 ("... glaube der chinesischen Dokumentation nicht" Nikopol_86, Februar 86, um 09:27 Uhr) festgestellt, die ebenfalls theoretische Studien waren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meine Anwendung der Methode des gleitenden Durchschnitts zur "Beruhigung" des Zitterns der letzten Bits der 24-Bit-Konvertierung hat ihre Wirksamkeit gezeigt, aber es gab kein fertiges Messgerät, das alle oben genannten Ergebnisse berücksichtigt. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Für die endgültige Schlussfolgerung über die Eignung von Hx711 für die Verwendung in Waagen wurde ein Wiegeprogramm entwickelt, das auf dem Schaltplan basiert: Die</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/4h/sy/o5/4hsyo5yiiy4qex1_odr4l86ibtk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Schaltung wird von einem herkömmlichen Standardnetzteil mit einer konstanten Spannung von 5 Volt und 1 Ampere gespeist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Entwicklung des Programms wurden alle zuvor genannten Nachteile des ADC berücksichtigt. </font><font style="vertical-align: inherit;">Und nun zum Programm, das in den ATMega16-Controller eingebettet ist.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Wenn die Stromversorgung eingeschaltet wird, zeigt die Anzeige Folgendes an: Der aus der Wägezelle in der unteren Zeile abgelesene ADC-Wert und der durch Normalisieren der ADC-Werte in der unteren Zeile erhaltene Gewichtswert werden in der oberen Zeile angezeigt. </font><font style="vertical-align: inherit;">Normalerweise ist dies: Die obere Zeile ist 1.015 und die untere Zeile ist 1085. Nach dem Platzieren des gewünschten Behälters auf der Plattform werden die Messwerte durch Drücken von Taste2 (Verpackung) auf Null gesetzt, was zu 0.000 und 0 in der oberen bzw. unteren Zeile des Indikators führt. </font><font style="vertical-align: inherit;">Nachdem wir die gewogene Last auf die Plattform gelegt haben, lesen wir das Gewicht von der obersten Zeile ab.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass die Auto-Null-Funktion, dh die Eingabe des Taragewichts in das Lesegewicht von der Plattform zum Zeitpunkt des Einschaltens der Waage, nicht implementiert ist. Werte der Normalisierungskoeffizienten werden vorab in das Programm „eingenäht“ (im Flash-Speicher des Controllers), wodurch das Wiegen unmittelbar nach Berücksichtigung des Taragewichts ermöglicht wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Normalisierungskoeffizienten zu ändern, wird ein Modus zum Kalibrieren der Waage mit einem Teil des Gewichts (in diesem Fall 2 kg) bereitgestellt. Um in diesen Modus zu gelangen, müssen Sie die Plattform freigeben, auf stabile Messwerte warten und gleichzeitig Taste 12 und Taste 17 drücken.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der oberen Zeile wird Folgendes angezeigt: „Cal: Turn Key 12“, was anzeigt, dass die Waage mit einem Teil des Gewichts in den Kalibrierungsmodus wechselt. Um fortzufahren, müssen Sie Taste 12 drücken. In der unteren Zeile wird "Tara-Taste drücken" angezeigt. Dies bedeutet, dass die Waage bereit ist, sich den Wert des Containers zu "merken". Um fortzufahren, drücken Sie Taste2 (Tara). In der unteren Zeile wird "Platziere 2 kg Schlüssel17" angezeigt. Legen Sie ein Gewicht von 2 kg auf die Plattform, warten Sie und drücken Sie Taste 17. Auf der Anzeige in der oberen Zeile steht 2.000 und in der unteren Zeile steht 2130. Die Waage hat in den Wägemodus geschaltet. Entfernen Sie das Gewicht und wiegen Sie weiter. Es ist wichtig, dass die neuen Normalisierungskoeffizienten im Controller-RAM aufgezeichnet werden und nach dem Ausschalten der Waage gelöscht werden (verschwinden).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein ähnliches Verfahren ist praktisch, aber bei der Arbeit ist nicht immer ein Gewicht von 2 kg zur Hand. Für diesen Fall wird ein Kalibrierungskorrekturverfahren bereitgestellt. Um in dieses Verfahren einzutreten, muss die Waage ausgeschaltet und JP1 neu angeordnet werden, damit der Ausgang des Controller-Ports gegen Masse kurzgeschlossen wird. Schalten Sie die Waage ein. Der Wert eines der Normalisierungskoeffizienten wird zur obersten Zeile hinzugefügt, in diesem Fall ist er 5325. Setzen Sie die Key2-Waage auf Null, legen Sie das uns bekannte Gewicht auf die Plattform und erhöhen Sie es mit den Key12-Tasten und verringern Sie den Wert des Gewichts, das durch die Skalen mit Key17 angezeigt wird. Wir erreichen die Gleichheit des auf die Plattform gelegten Gewichts und des durch die Waage angegebenen Gewichts. Nachdem die Gleichheit erreicht ist, öffnet JP1 den Stromkreis. WICHTIG: Es ist besser, den Jumper zu schließen, wenn die Waage nicht stimmt. Öffnen nur bei eingeschalteter Stromversorgung.Der Wert des angezeigten Normalisierungskoeffizienten ändert sich auch während des Anpassungsprozesses. Je umgekehrt die Beziehung, desto höher der Koeffizient, desto niedriger das angezeigte Gewicht und umgekehrt. Die Sache ist, dass der neue Koeffizientenwert auch in den internen RAM der Steuerung geschrieben wird. Nun, das ist alles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Waagen wurden in der Verpackungswerkstatt für 2 Arbeitsschichten von 8 Stunden bei einer Umgebungstemperatur von 18 bis 22 Grad Celsius betrieben. Bereits am ersten Betriebstag zeigte sich, dass Gewichtsänderungen aufgrund äußerer Faktoren: Erwärmung des Gerätes, Sprünge der Umgebungstemperatur durch Öffnen der Türen zufriedenstellend sind. Alle Schwankungen liegen im Bereich von 10 bis 15 Gramm (Durchschnittsgewicht des verpackten Produkts beträgt 10 kg), was für ein bestimmtes Gewicht akzeptabel ist. Die Messfehler, die die Messtechnik für Waagen mit der größten Wägegrenze von 15 kg UEG zulässt, sind also: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yz/vj/eb/yzvjebt6nvwwea-efnp38pzvwvy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der eingegebene Kalibrierungskorrekturmodus ist praktisch. Es wurde jedoch hauptsächlich verwendet, wenn das Gewicht um 5 bis 10 Gramm pro 5 kg Gewicht abwich. Der natürliche Wunsch ist es, genau null Fehler der Skalen zu haben, aber nicht notwendiger, da der Fehler im zulässigen Bereich liegt.</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassend lässt</font></font></b><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sich sagen</font><u><font style="vertical-align: inherit;"> ,</font></u><font style="vertical-align: inherit;"> dass sich der auf dem chinesischen ADC-Modul basierende Nh711-Chip als funktionsfähig erwiesen hat und als herkömmliches Ausgleichsschema und Mittelklasse eingesetzt werden kann. Das Fehlen einer Gewichtskorrektur aufgrund der Umgebungstemperatur im Mikrokreis selbst ist der anfälligste Punkt dieses Moduls (Mikrokreis). Meine Praxis hat gezeigt, dass bei Geräten, die unter Bedingungen mit geringen Schwankungen der Umgebungstemperatur betrieben werden, der Messfehler die von der Messtechnik zugelassenen Fehler nicht überschreitet. Die Frage der Verwendung dieses Moduls für Waagen, die beispielsweise auf dem Markt betrieben werden, wenn im Sommer die Temperatur über +30 ° C und im Winter bis zu -15 ° Celsius liegt, bleibt jedoch offen.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Leider habe ich nicht die Möglichkeit, die Waage in einer Wärmekammer zu testen und diese Frage zu beantworten. Am Ende des Artikels füge ich eine Hex-Datei (nicht für Arduino) für den Flash-Speicher des Mikrocontrollers hinzu. </font><font style="vertical-align: inherit;">Das Diagramm ist oben gezeigt, die Eigenschaften des Dehnungsmessers sind ebenfalls angegeben. </font><font style="vertical-align: inherit;">Wenn sich jemand für dieses ADC-Modul interessiert und es eine Wärmekammer gibt, können Sie die erforderlichen Tests selbst durchführen. </font><font style="vertical-align: inherit;">Es ist ratsam, Ihre Ergebnisse zu teilen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Datei: Scale16_11.hex. </font><font style="vertical-align: inherit;">Link: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud.mail.ru/public/4Edm/43fwpHEPU</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 Alles </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Gute</font></a><font style="vertical-align: inherit;"> !</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de491976/index.html">Wir drehen die UNIT-Wirtschaft für einen Online-Shop oder eine Produktion</a></li>
<li><a href="../de491980/index.html">Die Vorteile von Interviews. Flutter Developer Option</a></li>
<li><a href="../de491984/index.html">Flughafenautomatisierung bei HEL</a></li>
<li><a href="../de491986/index.html">RemoteLoRa - Mehr als EIN / AUS</a></li>
<li><a href="../de491988/index.html">Was ist neu in Red Hat OpenShift 4.2 und 4.3?</a></li>
<li><a href="../de491992/index.html">Analystenentwicklung</a></li>
<li><a href="../de491994/index.html">Migration von Cocoapods zu Swift Package Manager</a></li>
<li><a href="../de491996/index.html">Weitere Informationen zu Coroutinen in C ++</a></li>
<li><a href="../de492000/index.html">Produkt zuerst. Ausbrennen</a></li>
<li><a href="../de492002/index.html">Lichtabsorbierende Flügel: Das Geheimnis der Super Black Butterflies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>