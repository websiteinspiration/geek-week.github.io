<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎹 🕕 🕰️ ボットは私たちを助けます 🉑 🐓 🧛🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1年前、私たちの最愛の人事部門が要求しました：新人を会社に適応させるのに役立つボットチャットを書く。
 
 自社製品の開発は行っておりませんが、お客様にあらゆる開発サービスを提供しています。ストーリーは、お客様がサードパーティ企業ではなく、私たち自身の人事である私たちの内部プロジェクトについてです。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ボットは私たちを助けます</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478342/"><img src="https://habrastorage.org/webt/xp/2d/jx/xp2djxoreqgyjc-yafxv9kqhb5m.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1年前、私たちの最愛の人事部門が要求しました：新人を会社に適応させるのに役立つボットチャットを書く。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自社製品の開発は行っておりませんが、お客様にあらゆる開発サービスを提供しています。ストーリーは、お客様がサードパーティ企業ではなく、私たち自身の人事である私たちの内部プロジェクトについてです。そして、限られた人員、リソース、時間どおりにプロジェクトを完了して製品をリリースする時間の限られた主なタスク。</font></font><br>
 <a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、解決すべき課題について説明します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者はほとんど内向的な人々であり、話したくないので、電子チャットで質問を書く方がはるかに簡単です。ボットを使用すると、誰に質問するか、誰に電話するか、どこに行くか、一般にどこに情報を探すか、それが関連しているかどうかを考える必要はありません。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の問題は情報です。情報がたくさんあり、さまざまなソースにあります。常に存在するわけではなく、常に更新する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同社には約500人の従業員がおり、さまざまなオフィス、タイムゾーン、ロシアの都市、さらには海外にいるため、通常は多くの質問があるため、別のタスクは、従業員が尋ねる最も一般的な質問に関連する人事担当者の負担を減らすことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセスを自動化することも必要でした。新人の会社への到着、新人のマネージャーとメンターへのメッセージの送信、新人がうまく適応するために合格しなければならないコースやテストの自動リマインダーの送信。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビジネス要件に基づいて、技術要件が形成されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボットはSkypeに基づいて動作する必要があります（これまでは社内で使用するように開発されてきたため）、Azurのサービスが選択されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセスを制限するために、Skype経由の認証メカニズムを使用し始めました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキスト認識にはParlAIライブラリが使用されました</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。セットアップ、トレーニング、デバッグ、メールのセットアップなどのタスクには、管理Webポータルも必要です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/lx/h7/polxh7kr3auav5fl62qlodkrs_c.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトに取り組む過程で、私たちは多くの問題と困難に遭遇しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、Azureのアカウントに関する技術的な問題がありました。マイクロソフトは、サービス内の技術的な問題のため、サブスクリプションのアクティブ化を望んでいませんでした。ほぼ2か月間、これでは何もできませんでした。Microsoftのサポートが最終的に握手をして、すべてを正常にセットアップしてアカウントを提供してくれたパートナーに私たちを送りました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も困難な段階はプロジェクトの開始時であり、使用するもの、アーキテクチャ、データを格納する方法と場所、およびシステムのコンポーネントとモジュールが相互に対話する方法を選択する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの場合、実際、プロジェクトを開始する際の通常の問題は、人員配置によっても複雑になりました。私たちのビジネスの詳細は、商業的なものとは異なり、必要な分野で十分な知識を持たないことが多い開発者が多くの場合、内部プロジェクトに取り組みます-彼らはたまたま次の大きなクールな商業的プロジェクトを待っているベンチにいます。この状況での動機により、物事も非常に困難であったことは論理的です。パフォーマンスが低下し、チームがシンプルになることがよくあり、結局は人を説得（モチベーション）または変更する必要があります。開発者を変更するときは、トレーニングを実施し、知識を伝達し、再び基本的にプロジェクトを開始する必要があります。新しい各開発者は、独自の方法でアーキテクチャを見て、彼らが行った決定と他の人のコードについて以前のものを叱りました。書き直しはゼロから始まりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは約6か月続きました。私たちはその場で踏みつけ、コードをリファクタリングし、新しいものを何も書きませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、社内プロジェクトについては、原則としてドキュメンテーションはほとんどなく、その時々に何をすべきか、そして今何を優先すべきかを理解することは困難でした。恒久的なチームを作り、プロセスを確立し、少なくとも3か月間計画と評価を行う必要がありました。しかし、プロジェクトが商業的でない場合にこれを行うにはどうすればよいですか。つまり、最低でも人間の時間を費やす必要があり、同時に外部顧客の場合よりも結果が悪くなることはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトの開発に参加し、プロジェクトに精通しており、取り組みたいリソースのプールを特定しました。プロジェクトに人を雇用するスケジュールを立てた作業を評価して調整し、主要プロジェクト間の「穴」に作業を入力しました。 4か月後、アプリケーションの実用的なプロトタイプを受け取りました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ボットの機能、アーキテクチャ、技術ソリューションについて詳しく説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HRの主な要件の1つは、質問に正しく答えるためにユーザーが作成したテキストの認識です。あなたは彼に手紙を書くことができます-私は休暇に行きたい、私は休暇に行きたい、または休暇に行きたい、そして彼はそれに応じて理解して対応します。または、突然、従業員の椅子が壊れて、「椅子が壊れている」、「私の椅子にひびが入っている」、「椅子の後ろが落ちた」などの適切なトレーニングを行うと、ボットはそのような要求を認識します。テキスト認識自体の品質は、ボットのトレーニングに依存します。これについては、後で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の要件と機能の一部は、ボットダイアログシステムです。ボットが対話を行い、現在の問題のコンテキストを理解できるシステムが開発されました。あなたの質問に答えて、ボットがこれを行うように訓練した場合、彼は明確な質問をして会話を続けることができます。 Skypeは、ダイアログを続行するためのオプションについてユーザーにプロンプ​​トを表示する簡単なメニュー項目をサポートしています。また、対話があったが突然トピック外の質問をすることに決めた場合、ボットもこれを理解します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボットは、ユーザーの個人データに基づいて、さまざまなアーティファクトをユーザーに送信することを可能にします。たとえば、彼の場所で。ある人がトイレを見つけたい場合は、トイレに行くオフィ​​スの地図が表示されます。また、カードは、従業員がいる会社のオフィスに応じて選択されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も重要なタスクの1つは、ユーザーの個人情報を保護することです。ボットが操作する機密データに誰もがアクセスすることを許可することはできません。このようなボットの認証の必要性は、そのボットの不可欠な部分です。ボットは、ユーザーとの対話を行う前に、ユーザーに承認を求めるよう求めます。これは、従業員が最初にボットに連絡したときに発生します。認証自体がユーザーを適切なページにリダイレクトし、そこでユーザーはトークンを受け取り、それをSkypeメッセージに挿入します。認証が成功した場合、ボットとの通信を開始できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tr/0o/mq/tr0omqpgqzklutknufcopd6upmu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
承認は、Skype-ポータル-承認サービス、企業ネットワーク、およびLDAPを通過します。したがって、承認は企業ネットワーク内の現在のユーザーデータに依存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボットを開発する過程で、ポータルの機能に組み込まれた特定のシステムが必要であることに気づきました。これは、人事部がボットをすばやくデバッグするのに役立ちます。ボットの操作中にユーザーが記録したエラーをHRが確認し、再トレーニングまたは開発者に任せて解決するポータルページを追加しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポータルでボットを直接トレーニングする可能性は、当初からありませんでした。開発プロセスでは、ボットトレーニングは人事部門の従業員がボットトレーニングを行うときに実行する最も一般的なタスクであり、追加のボットトレーニングのためにテキストファイルを開発者に送信することはまったく受け入れられないことに気付きました。時間がかかりすぎて、エラーや問題が多すぎます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/yq/qv/omyqqvtq-zpdgudauprojl2r2mc.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、ユーザーフレンドリーなボットトレーニング用のUIをポータルに作成しました。これにより、人事部はボットの現在のトレーニングを確認し、トレーニングして、現在のトレーニングに調整を加えることができます。学習は、ノード、つまりブランチがボットとの対話の続きであるツリー構造によって表されます。簡単な質問と回答、または重要なダイアログを作成できます。すべては人事とそのニーズに依存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソリューションのアーキテクチャについて一言。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s0/ii/ry/s0iiry0ttklshipcxcvrw8swi-y.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソリューションのアーキテクチャはモジュール式です。これには、次のようなさまざまなタスクを担当するサービスが含まれます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•Azure上のSkypeボットサービス-ユーザーの要求を受け入れて処理します。これはかなり単純なサービスであり、最初に要求を受け入れ、その初期処理を実行します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•管理ポータル-ポータルの設定とボット自体のWebインターフェイスを提供するサービス。ボットは常に最初にポータルを参照し、ポータルは次のリクエストで何を行うかをすでに決定しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•承認サービス-ボットと管理ポータルに認証メカニズムを提供します。承認はOauth2プロトコルを使用して行われます。肯定的な認証では、サービスは有効なユーザーデータに従って企業ネットワークで認証を行うため、システムはデータの同期に関連するエラーを制御できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•AIテキスト認識自体にParlAIフレームワークを使用する、Pythonで記述されたテキスト認識モジュール。これは、少なくとも現在の実装ではニューラルネットワークです。問題を理解するために、tfDiffアルゴリズムを使用します。モジュールは、コミュニケーションとトレーニングのためのAPIを提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、これはチャットボットを作成する最初の経験であり、最小限の人件費で、システムをできるだけ単純にすると同時に機能させることを試みました。</font><font style="vertical-align: inherit;">とても面白い商品があると思います。</font><font style="vertical-align: inherit;">トレーニング、エラーログ、通知メールのシステムにより、他のメッセンジャーと統合することもできます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja478326/index.html">思慮深いクエリ：PWAキャッシュ戦略</a></li>
<li><a href="../ja478328/index.html">データサイエンティストが車を購入した方法</a></li>
<li><a href="../ja478330/index.html">DapはWeb用のもう1つのジェットエンジンです。全然違う</a></li>
<li><a href="../ja478336/index.html">非同期、Swoole、ParallelによるTarantool PHPコネクタの高速化</a></li>
<li><a href="../ja478340/index.html">Tinkoffインターンシッププログラムはどのように機能しますか？</a></li>
<li><a href="../ja478344/index.html">メールを開始してスパムに巻き込まれないようにするにはどうすればよいですか？</a></li>
<li><a href="../ja478346/index.html">2020年にMacBook Pro 2011を購入するとどうなりますか？</a></li>
<li><a href="../ja478350/index.html">12月5日、ManyChatバックエンドMeetUp</a></li>
<li><a href="../ja478352/index.html">WxWidgetsサイザー</a></li>
<li><a href="../ja478354/index.html">実用的な関数型プログラミング</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>