<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฐ๐ป ๐๏ธ ๐ง๐พ Blending and Unity Terrain: ููููุฉ ุงูุชุฎูุต ูู ุงูุชูุงุทุนุงุช ูุงูุชููู ุนู ุฅูุฐุงุก ุนูููู ๐ง๐พ ๐๐พ ๐ฐ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุฃุฌู ุงูุญุตูู ุนูู ุนุงูู ูุงูุนู ุฏุงุฎู ุงููุนุจุฉ ุ ูู ุงูุถุฑูุฑู ูุฑุงุนุงุฉ ุชูุงุนู ุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ุงููุฎุชููุฉ ูุน ุจุนุถูุง ุงูุจุนุถ ููุน ุงูููุงุฐุฌ ุงูุฃุฎุฑู. ูุฅุฐุง ูุงูุช ุฎุทูุท ุงูุชูุงุทุน ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Blending and Unity Terrain: ููููุฉ ุงูุชุฎูุต ูู ุงูุชูุงุทุนุงุช ูุงูุชููู ุนู ุฅูุฐุงุก ุนูููู</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/490226/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃุฌู ุงูุญุตูู ุนูู ุนุงูู ูุงูุนู ุฏุงุฎู ุงููุนุจุฉ ุ ูู ุงูุถุฑูุฑู ูุฑุงุนุงุฉ ุชูุงุนู ุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ุงููุฎุชููุฉ ูุน ุจุนุถูุง ุงูุจุนุถ ููุน ุงูููุงุฐุฌ ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุฅุฐุง ูุงูุช ุฎุทูุท ุงูุชูุงุทุน ุงููุฑุฆูุฉ ุจูู ุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุชูุณุฏ ุชูุงูู ุงูุตูุฑุฉ ุ ููู ุงูุฌุฏูุฑ ุงูุชูููุฑ ูู ููููุฉ ุงูุชุฎูุต ูููุง. </font><font style="vertical-align: inherit;">ุงูุญุงูุฉ ุงูุฃูุซุฑ ุดููุนูุง ููุซู ูุฐู ุงูุฎุทูุท ุ ูุงูุชู ูุฏ ุชููู ูุฃูููุฉ ูููุซูุฑูู ุ ูู ุชูุงุทุน ููุญุงุช ุงูุฌุณููุงุช ูุน ุงูููุฏุณุฉ ุบูุฑ ุงูุดูุงูุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ja/va/g2/javag2i9gc9lhkwohebgbyklsjc.png" alt="ุตูุฑุฉ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู ุขุฎุฑ ูู ุงูุชูููู ุงูุทุจูุนู ุงููููู ูุชูุงุทุน ุงูุตุฎูุฑ ูุงููุจุงุชุงุช ูุน ุณุทุญ ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ูู ูุดุงูุฏ "ูู ุงูููุงุก ุงูุทูู".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v0/k6/s9/v0k6s98hdon17qotuaryat0vogs.png" alt="ุตูุฑุฉ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุทุฑู ุงูุชูุนูู ุงููุฎุชููุฉ (SSAA ู MSAA ู CSAA ู FXAA ู NFAA ู CMAA ู DLAA ู TAA ููุง ุฅูู ุฐูู) ุ ูุงูุชู ูุฅู ูุงูุช ุชุฎูู ูู ุงููุธูุฑ ุงููุชุญุฏู ูุฎุทูุท ุงูุชูุงุทุน ูุฐู ุ ูููููุง ูุง ุชุตุญุญ ุงููููู ุชูุงููุง ุ ูููุงู ุชูููุงุช ุฃูุซุฑ ูุนุงููุฉ. </font><font style="vertical-align: inherit;">ุณููุธุฑ ูููุง.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุฌ ุงูุนูู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุชูู ุงููุญุฏุฉ ุญููุง ูุฏูุฌูุง ูููุถุงุก ุนูู ุงูุชูุงุทุนุงุช ุงููุฑุฆูุฉ ุจูู ุงูุฌุณููุงุช ุงูุดูุงูุฉ ูุงูููุฏุณุฉ ุงููุนุชูุฉ ุงูุชู ุชุณูู ุงูุฌุณููุงุช ุงููููุฉ. </font><font style="vertical-align: inherit;">ุชุนูู ุงูุชุธููู ุงูุชู ุชุฏุนู ูุฐุง ุงูุชุฃุซูุฑ ุนูู ุชุนุฒูุฒ ุดูุงููุฉ ุงูุฌุณููุงุช ุ ุงุนุชูุงุฏูุง ุนูู ูุฏู ุตุบุฑ ุงููุฑู ุจูู ุนูู ุฌุฒุก ุงูุฌุณูู ูุนูู ุงูููุฏุณุฉ ุบูุฑ ุงูุดูุงูุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mz/wx/9k/mzwx9kecz9hkjps0laijveek-54.png" alt="ุตูุฑุฉ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏุฃ ุชุดุบูู ุงูุฌุฒูุฆุงุช ุงููููุฉ ูู</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงููุงุถุญ ุฃูู ูู ุฃุฌู ุงูุชุดุบูู ุงูุตุญูุญ ููุฌุณููุงุช ุงููููุฉ ุ ููุฒู ูุฌูุฏ ูุฎุฒู ูุคูุช ููุนูู. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุงูุชุธููู ุงููุคุฌู ุ ูุชู ุชูููู ุงููุฎุฒู ุงููุคูุช ููุนูู ูู ูุฑุญูุฉ ุนุฑุถ ุงููุฎุงุฒู ุงููุคูุชุฉ ููุก ุงูุดุงุดุฉ ุ ููุน ูุฑุงุนุงุฉ MRT (ุฃูุฏุงู ุงูุนุฑุถ ุงููุชุนุฏุฏุฉ ุ ูููุณ ุงูุชุตููุฑ ุงูููุทุนู ุจุงูุฑููู ุงููุบูุงุทูุณู) ุ ูุง ูุชู ุงูุชุนุจูุฑ ุนู ูุฌูุฏูุง ูู ุชูุงููู ุญุณุงุจูุฉ ุฅุถุงููุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุฉ ุงูุชุธููู ุงูุฃูุงูู ูุงุณุชุฎุฏุงู ุฎุท ุฃูุงุจูุจ Unity Legacy ุ ูุงู ููุงู ุญุงุฌุฉ ุฅูู ุชูุฑูุฑ ุฅุถุงูู ูุชูุฏูู ุงูููุฏุณุฉ ุบูุฑ ุงูุดูุงูุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช ููุนูู </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุชู ุชูุดูุท ูุฐุง ุงูุชูุฑูุฑ ูู ุฎูุงู ุชุนููู ุงููููุฉ ุงูููุงุณุจุฉ ูุฎุงุตูุฉ Camera.depthTextureMode. </font><font style="vertical-align: inherit;">ูุฐู ุงูุฎุงุตูุฉ ุบูุฑ ูุชุงุญุฉ ูู ูุงูุฐุฉ ุงูููุชุด ุ ูููููุง ูุชุงุญุฉ ูู API </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุงูุขู ุชูููุฐ ูุณุฎุชู ุงูุฎุงุตุฉ ูู ุฎุท ุฃูุงุจูุจ ุงูุชูุฏูู Scriptable ูุน ุชุธููู ุฃูุงูู ุ ูุงูุฐู ุจูุณุงุนุฏุฉ MRT ูููู ุฃู ูุนุฑุถ ูู ูู ุงููุฎุฒู ุงููุคูุช ููุนูู ููุฎุฒู ุงูุฃููุงู ุงููุคูุช ูู ููุณ ุงูููุช. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7z/-b/1l/7z-b1lg9zs8xbsywe6evbmanfiw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฒุงูุฉ ุฎุทูุท ุงูุชูุงุทุน ูู ุงูุชุธููู ุงูุชู ุชุฏุนู ุงูุฌุฒูุฆุงุช ุงููููุฉ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุจุดูู ุนุงู ุ ูุง ุชูุฌุฏ ุนูุงุฆู ูููุฉ ูุงุณุชุฎุฏุงู ุทุฑููุฉ ูุฒุฌ ุงูุนูู ูุฅุฒุงูุฉ ุงูุชูุงุทุนุงุช ุงููุฑุฆูุฉ ููููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูุน ุงูููุงุธุฑ ุงูุทุจูุนูุฉ:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูููุฏ</font></font></b><div class="spoiler_text"><pre><code class="css hljs">// <span class="hljs-selector-tag">Blending</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">depth</span> <span class="hljs-selector-tag">buffer</span><font></font>
<font></font>
<span class="hljs-selector-id">#include</span> "<span class="hljs-selector-tag">UnityCG</span><span class="hljs-selector-class">.cginc</span>"<font></font>
<font></font>
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">BlendStart</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">BlendEnd</span>;
<span class="hljs-selector-tag">UNITY_DECLARE_DEPTH_TEXTURE</span>(_<span class="hljs-selector-tag">CameraDepthTexture</span>);<font></font>
<font></font>
<span class="hljs-selector-tag">struct</span> <span class="hljs-selector-tag">v2f</span><font></font>
{<font></font>
    // ...<font></font>
<font></font>
    half4 <span class="hljs-attribute">projPos </span>: TEXCOORD0;<font></font>
};<font></font>
<font></font>
<span class="hljs-selector-tag">v2f</span> <span class="hljs-selector-tag">vert</span>(<span class="hljs-selector-tag">appdata</span> <span class="hljs-selector-tag">v</span>)<font></font>
{<font></font>
    v2f o;<font></font>
    UNITY_INITIALIZE_OUTPUT(v2f,o);<font></font>
<font></font>
    // ...<font></font>
<font></font>
    o.projPos = ComputeScreenPos(o.pos);<font></font>
    COMPUTE_EYEDEPTH(o.projPos.z);<font></font>
<font></font>
    // ...<font></font>
<font></font>
    return o;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-tag">fixed4</span> <span class="hljs-selector-tag">frag</span>(<span class="hljs-selector-tag">v2f</span> <span class="hljs-selector-tag">i</span>) : <span class="hljs-selector-tag">COLOR</span><font></font>
{     <font></font>
    fixed4 result = 0;<font></font>
      <font></font>
    // ... <font></font>
<font></font>
    float depth = SAMPLE_DEPTH_TEXTURE_PROJ(_CameraDepthTexture, UNITY_PROJ_COORD(i.projPos));<font></font>
    float sceneZ = LinearEyeDepth(depth);<font></font>
    float partZ = i.projPos.z;<font></font>
    float fade = saturate( sceneZ - partZ );<font></font>
    result.a = smoothstep( BlendStart, BlendEnd, fade );<font></font>
<font></font>
    // ... <font></font>
       <font></font>
    return result; <font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูุฅู ูุฐุง ุงูููุฌ ูู ุนููุจ ุนุฏูุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุนูุจ ุงูุฃูู ูุชุนูู ุจุงูุฃุฏุงุก. ูุนูู ูุฒุฌ ุงูุนูู ูู ูุฑุญูุฉ ูุฒุฌ ุฃูุงุจูุจ ุงูุฃุฌูุฒุฉ ุ ุฃู ูุจุงุดุฑุฉ ุจุนุฏ ุชูููุท ูุญุณุงุจ ุฌูุงุฒ ุชุธููู ุงูุดุธุงูุง. ูู ูุฐู ุงููุฑุญูุฉ ุ ูุชู ุฎูุท ูุชูุฌุฉ ุชูููุฐ ุฌูุงุฒ ุชุธููู ุงูุฃุฌุฒุงุก ูุน ุงููุชูุฌุฉ ุงููุณุฌูุฉ ูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[3] [4] [5]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุง ููุตูุบุฉ ุงููุญุฏุฏุฉ ูุณุจููุง ุจูุงุณุทุฉ ุงูุงุณุชุฏุนุงุกุงุช ุฅูู API </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[6] [7] [8] [9]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุงูุฌุฒุก ุงูุฃูู ุชูุฏูููุง ูู ุฃู ุฎุท ุฃูุงุจูุจ ููุฃุฌูุฒุฉ ุ ุจูุนูู ุฃูู ูุนูู ุชูุงููุง ููุง ุนูู ุณููู ูุจู ุนุดุฑูู ุนุงููุง. ููุฑุฃ GPU ุงููููุฉ ูู ุงูุฐุงูุฑุฉ ุ ูููุฒุฌูุง ูุน ูููุฉ ุฌูุงุฒ ุชุธููู ุงูุฃุฌุฒุงุก ุ ููุนูุฏูุง ุฅูู ุงูุฐุงูุฑุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุฃูุถูุง ุงุฎุชูุงู ูู ุงุณุชุฎุฏุงู ุงููุฒุฌ ุงูุนููู ููููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุงูุดูุงูุฉ ุชูุงููุง ุฃู ุงูุดูุงูุฉ ุฌุฒุฆููุง. ุดูุงู - ุนูู ุณุจูู ุงููุซุงู ุ ููุญุงุช ุงูุฌุณููุงุช - ุญุชู ุจุฏูู ุงููุฒุฌ ูู ุงูุนูู ุ ูููู ุงูุชุฌุณูุฏ ุจุฃูููู ุดูุงููุง. ูู ุญุงูุฉ ุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุบูุฑ ุงูุดูุงูุฉ ุ ุณุชููุญ ุงูุดูุงููุฉ ุงูุญููููุฉ ูุงูููููุณุฉ ูุงููุฑุฆูุฉ ุนูุฏ ุงููุฒุฌ ูู ุงูุนูู ุนุฏุฏูุง ุตุบูุฑูุง ุฌุฏูุง ูู ุงูุฃุฌุฒุงุก ุ ูู ุญูู ุณุชุธู ุงูุบุงูุจูุฉ ุงูุนุธูู ูููุง ุบูุฑ ุดูุงูุฉ. ููู ูุฐุง ุงูุฃุฎูุฑ ูุง ูุนูู ุนูู ุงูุฅุทูุงู ุฃู ุงููุฒุฌ ูู ูุณุชุฎุฏู ูู ุนุฑุถู - ุจู ุณูุนูู ุจุจุณุงุทุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุนูู ุงูุนูุจ ุงูุซุงูู ุจููููุฉ ุชุญุฏูุฏ ููู ุงููุฒุฌ. ุจุงุฎุชุตุงุฑ ุ ุฌููุน ุงูุฃุฌุฒุงุก ุงูุชู ูุชู ุฎูุทูุง ูู ุจูุณู ุดุงุดุฉ ูุนูู ุชูุน ุนูู ุดุนุงุน ูุงุญุฏ ููุจุนุซ ูู ุงููููุน ุงูุนุงููู ูููุงููุฑุง ูููุฑ ูู ุฎูุงู ุงููููุน ุงูุนุงููู ููุฐู ุงูุจูุณู. ููุฐุง ุจุฏูุฑู ูุนูู ุฃูู ูุน ุฃู ุชุบููุฑ ูู ููุถุน ุงููุงููุฑุง ุฃู ุงุชุฌุงููุง ุ ุณูุชู ููุงุญุธุฉ ุงุฎุชูุงู ุงูููุธุฑ: ุณุชุชุญุฑู ุฃุฌุฒุงุก ูู ุงููููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ุงูููุฌูุฏ ุจุงููุฑุจ ูู ุงููุงููุฑุง ุจุดูู ุฃุณุฑุน ูู ุฃุฌุฒุงุก ุงููุดูุฏ ุงูููุฌูุฏุฉ ุจุนูุฏูุง ุนู ุงููุงููุฑุง </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[10] [11]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฐุง ููุญูุธ ุจุดูู ุฎุงุต ุนูุฏ ุงููุธุฑ ุฅููู ูู ูุณุงูุฉ ูุฑูุจุฉ ูุน ุงูุฅุฒุงุญุฉ ุงูุฌุงูุจูุฉ ุงููุณุชูุฑุฉ ูููุงููุฑุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hz/sc/78/hzsc78n3vvddbvvlgrb3hqkfwxc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุธุฑ ุงูุฌุงูุจู ุนูุฏ ุชุญุฑูู ุงููุงููุฑุง: ูุชู ุชุญููู ุฃุฌุฒุงุก ูู ุงููููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ุฅูู ูุณุงูุฉ ุฃูุจุฑ ููุงุฑูุฉ ุจุฃุฌุฒุงุก ุงููุดูุฏ</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/5v/zf/wj/5vzfwjmabznaiprchenxb9eqy3q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุธุฑ ุงูุฌุงูุจู ุนูุฏ ุชุญุฑูู ุงููุงููุฑุง: ุนูุฏ ุชุซุจูุช ุงููุงููุฑุง ุนูู ุฌุฒุก ูู ุงููุดูุฏ ุ ูุตุจุญ ููุญูุธูุง ูุฏู ุณุฑุนุฉ ุชุญุฑู ุฃุฌุฒุงุก ุงููููุฐุฌ.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุนูุฏ ุชุฏููุฑ ุงููุงููุฑุง ุ ูุชู ููุงุญุธุฉ ุงูููุธุฑ ุนูู ุงูููุฑ ุนูู ุทูู ูุญูุฑูู ูุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ. ููุน ุฐูู ุ ูู ุงูุฏููุงููุงุช ูุฐุง ุฃูู ูุถูุญุง ูู ุงูููุธุฑ ุงูุฌุงูุจู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/ew/jn/qsewjnfucpdriai47zh9032fwcm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชูุงู ุงูููุธุฑ ุนูุฏ ุชุญุฑูู ุงููุงููุฑุง: ูู ุงูุตุนุจ ุนูู ุงูุฏูุงุบ ุงูุชุนุฑู ุนูู ููุท ุงุฎุชูุงู ุงูููุธุฑ ุนูุฏูุง ูุชู ุชุญููู ุงูุฃุฌุฒุงุก ุนูู ุทูู ูุญูุฑูู ุ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูููู ุจุดูู ููุญูุธ ุ ูุชุบูุฑ ูุธูุฑ ุงููุฒุฌ ูู ุงูุนูู ุงุนุชูุงุฏูุง ุนูู ุงูุฒุงููุฉ ุงูุชู ููุธุฑ ูููุง ุงููุฑุงูุจ ุฅูู ุณุทุญ ุงููุดูุฏ. ุชุตุจุญ ููุทูุฉ ุงููุฒุฌ ุบูุฑ ูุฑุฆูุฉ ุชูุฑูุจูุง ุนูุฏูุง ูููู ุงุชุฌุงู ุงูุฑุคูุฉ ูุชุนุงูุฏูุง ูุน ุงูุณุทุญ ุงูุทุจูุนู ุนูู ุงูุณุทุญ ุงูุฃููู ุ ููู ุญุฌู ูุฐู ุงูููุทูุฉ ูุฒุฏุงุฏ ุจุณุฑุนุฉ ุฅุฐุง ููุช ุจุฅูุงูุฉ ุงููุงููุฑุง ูุฃุณูู.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hd/r8/gs/hdr8gs_ha63gspkr_eaxowjosna.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุบููุฑ ุนุฑุถ ููุทูุฉ ุงููุฒุฌ ุฃุซูุงุก ุฅูุงูุฉ ุงููุงููุฑุง</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุจุนูู ูุฏ ูููู ุงููุฒุฌ ุฎูุงุฑูุง ุฌูุฏูุง ูุฅุฒุงูุฉ ุฎุทูุท ุงูุชูุงุทุน ููููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูุน ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ุ ุฅู ูู ููู ูููุฑุฉ ุงููุทุน ุงููุตุงุญุจุฉ ููุง. </font><font style="vertical-align: inherit;">ูุฐู ุงูุทุฑููุฉ ุฃูุซุฑ ููุงุกูุฉ ูุชุฃุซูุฑุงุช ุงูุฌุณููุงุช ุบูุฑ ุงูุซุงุจุชุฉ ุ ูููุงุนุฏุฉ ุนุงูุฉ ุ ูุง ุชุญุชูู ุนูู ููุงุฏ ููุตูุฉ ููุบุงูุฉ ุ ูุจุงูุชุงูู ุ ูุง ูุชู ููุงุญุธุฉ ุชุฃุซูุฑุงุช ุงูููุธุฑ ูู ุญุงูุชูู.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุฌ ุฎุฑูุทุฉ ุงูุงุฑุชูุงุน</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฎูุงุฑ ุขุฎุฑ ูุชุทุจูู ุงููุฒุฌ ุงูุฃููู ูู ุงุณุชุฎุฏุงู ุฎุฑูุทุฉ ุงูุงุฑุชูุงุน ุ ุงูุชู ุชููุฑ Unity ุงููุตูู ุฅูููุง ูู ุฎูุงู TerrainData API </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[12]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุนุฑูุฉ ููุถุน ูุงุฆู ุงูุชุถุงุฑูุณ ูุฃุจุนุงุฏ ุงูุชุถุงุฑูุณ ุงููุดุงุฑ ุฅูููุง ูู TerrainData ุ ููุฏููุง "ุฎุฑูุทุฉ ุงุฑุชูุงุน" ูู ูุชูุงูู ุงููุฏ ุ ููููู ุญุณุงุจ ุงุฑุชูุงุน ุงูุชุถุงุฑูุณ ูู ุฃู ููุทุฉ ูุญุฏุฏุฉ ูู ุฅุญุฏุงุซูุงุช ุงูุนุงูู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/69/za/ga69zap3c3xnluhjfm68g4_roto.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนููุงุช ุงูุชุถุงุฑูุณ ุงููุทููุจุฉ ูุฃุฎุฐ ุนููุงุช ูู ุฎุฑูุทุฉ ุงูุงุฑุชูุงุน</font></font></i><br>
<br>
<pre><code class="css hljs">// <span class="hljs-selector-tag">Setting</span> <span class="hljs-selector-tag">up</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">heightmap</span> <span class="hljs-selector-tag">and</span> <span class="hljs-selector-tag">uniforms</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">use</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">shaders</span>... <font></font>
<font></font>
<span class="hljs-selector-tag">Shader</span><span class="hljs-selector-class">.SetGlobalTexture</span>(<span class="hljs-selector-tag">Uniforms</span><span class="hljs-selector-class">.TerrainHeightmap</span>, <span class="hljs-selector-tag">terrain</span><span class="hljs-selector-class">.terrainData</span><span class="hljs-selector-class">.heightmapTexture</span>);
<span class="hljs-selector-tag">Shader</span><span class="hljs-selector-class">.SetGlobalVector</span>(<span class="hljs-selector-tag">Uniforms</span><span class="hljs-selector-class">.HeightmapScale</span>, <span class="hljs-selector-tag">terrain</span><span class="hljs-selector-class">.terrainData</span><span class="hljs-selector-class">.heightmapScale</span>);
<span class="hljs-selector-tag">Shader</span><span class="hljs-selector-class">.SetGlobalVector</span>(<span class="hljs-selector-tag">Uniforms</span><span class="hljs-selector-class">.TerrainSize</span>, <span class="hljs-selector-tag">terrain</span><span class="hljs-selector-class">.terrainData</span><span class="hljs-selector-class">.size</span>);
<span class="hljs-selector-tag">Shader</span><span class="hljs-selector-class">.SetGlobalVector</span>(<span class="hljs-selector-tag">Uniforms</span><span class="hljs-selector-class">.TerrainPos</span>, <span class="hljs-selector-tag">terrain</span><span class="hljs-selector-class">.transform</span><span class="hljs-selector-class">.position</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ุงูุขู ุ ุจุนุฏ ุญุณุงุจ ุงุฑุชูุงุน ุงููุดูุฏ ุ ููููู ุฃูุถูุง ุญุณุงุจ ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูู ุงูุชุธููู ูุชุฌุฑุจุฉ ุฎุฑูุทุฉ ุงุฑุชูุงุนุงุช ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ูู ุฅุญุฏุงุซูุงุช ุงูุนุงูู.</font></font><br>
<br>
<pre><code class="css hljs">// <span class="hljs-selector-tag">Computes</span> <span class="hljs-selector-tag">UV</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">sampling</span> <span class="hljs-selector-tag">terrain</span> <span class="hljs-selector-tag">heightmap</span>... <font></font>
<font></font>
<span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">TerrainUV</span>(<span class="hljs-selector-tag">float3</span> <span class="hljs-selector-tag">worldPos</span>)<font></font>
{<font></font>
    return (worldPos.xz - TerrainPos.xz) / TerrainSize.xz;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุฌู ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุงุณุชุฎุฏุงู ููุณ ุงูุฑูุฒ ูู ุชุธููู ุงูุดุธูุฉ ูุงูุฑุฃุณ ุ ูุชู ุงุณุชุฎุฏุงู ูุธููุฉ tex2Dlod ูุฃุฎุฐ ุงูุนููุงุช. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ุชุญุชูู ุฎุฑูุทุฉ ุงูุงุฑุชูุงุน ุนูู ูุณุชููุงุช mip ุ ูุฐุง ูุฅู ุฃุฎุฐ ุนููุงุช ูููุง ุจุงุณุชุฎุฏุงู ูุธููุฉ tex2D ุ ุงูุชู ุชุญุณุจ ูุณุชูู mip ุชููุงุฆููุง ุ ูุง ูุนูู ูู ูู ุงูุฃุณุงุณ.</font></font><br>
<br>
<pre><code class="css hljs">// <span class="hljs-selector-tag">Returns</span> <span class="hljs-selector-tag">the</span> <span class="hljs-selector-tag">height</span> <span class="hljs-selector-tag">of</span> <span class="hljs-selector-tag">terrain</span> <span class="hljs-selector-tag">at</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">given</span> <span class="hljs-selector-tag">position</span> <span class="hljs-selector-tag">in</span> <span class="hljs-selector-tag">world</span> <span class="hljs-selector-tag">space</span>... <font></font>
<font></font>
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">TerrainHeight</span>(<span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">terrainUV</span>)<font></font>
{<font></font>
    float heightmapSample = tex2Dlod(TerrainHeightmap, float4(terrainUV,0,0));<font></font>
    return TerrainPos.y + UnpackHeightmap(heightmapSample) * HeightmapScale.y * 2;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ูุญุงููุฉ ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุฅุฒุงูุฉ ุงูุชูุงุทุนุงุช ูู ุฎูุงู ุงูุดูุงููุฉ ุฏูู ุงุณุชุฎุฏุงู ูุฎุฒู ุนูู. </font><font style="vertical-align: inherit;">ูุฐุง ูุง ูุญู ุงููุดุงูู ุงูุฃุฎุฑู ุงููุฑุชุจุทุฉ ุจูุฐู ุงูุทุฑููุฉ ุ ููููู ูุฌุนู ูู ุงููููู ุงูุชุญูู ูู ูุงุจููุฉ ุชุดุบูู ุงููุฒุฌ ุจุงุณุชุฎุฏุงู ุฎุฑูุทุฉ ุงูุงุฑุชูุงุน.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูููุฏ</font></font></b><div class="spoiler_text"><pre><code class="css hljs">// <span class="hljs-selector-tag">Blending</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">terrain</span> <span class="hljs-selector-tag">heightmap</span><font></font>
<font></font>
<span class="hljs-selector-id">#include</span> "<span class="hljs-selector-tag">UnityCG</span><span class="hljs-selector-class">.cginc</span>"<font></font>
<font></font>
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">BlendStart</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">BlendEnd</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">sampler2D_float</span> <span class="hljs-selector-tag">TerrainHeightmap</span>; 
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">HeightmapScale</span>;
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">TerrainSize</span>;
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">TerrainPos</span>;        <font></font>
<font></font>
<span class="hljs-selector-tag">struct</span> <span class="hljs-selector-tag">v2f</span><font></font>
{<font></font>
   // ...<font></font>
<font></font>
   float3 <span class="hljs-attribute">worldPos </span>: TEXCOORD0;<font></font>
   float2 <span class="hljs-attribute">heightMapUV </span>: TEXCOORD1;<font></font>
<font></font>
   // ...<font></font>
};<font></font>
<font></font>
<font></font>
<span class="hljs-selector-tag">v2f</span> <span class="hljs-selector-tag">vert</span>(<span class="hljs-selector-tag">appdata</span> <span class="hljs-selector-tag">v</span>)<font></font>
{<font></font>
    v2f o;<font></font>
    UNITY_INITIALIZE_OUTPUT(v2f,o);<font></font>
   <font></font>
    // ...<font></font>
    <font></font>
    o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;<font></font>
    o.heightMapUV = TerrainUV(o.worldPos);<font></font>
<font></font>
    // ...<font></font>
<font></font>
    return o;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-tag">fixed4</span> <span class="hljs-selector-tag">frag</span>(<span class="hljs-selector-tag">v2f</span> <span class="hljs-selector-tag">i</span>) : <span class="hljs-selector-tag">COLOR</span><font></font>
{<font></font>
    fixed4 result = 0;<font></font>
<font></font>
    // ... <font></font>
<font></font>
    half height = TerrainHeight(i.heightMapUV);<font></font>
    half deltaHeight = i.worldPos.y - height;<font></font>
    result.a = smoothstep( BlendStart, BlendEnd, deltaHeight );<font></font>
<font></font>
    // ... <font></font>
       <font></font>
    return result; <font></font>
}</code></pre><br>
</div></div><br>
<br>
<img src="https://habrastorage.org/webt/zl/fl/nz/zlflnzwmh3tl6z_dhlvxowot4he.png"><br>
<img src="https://habrastorage.org/webt/-k/qc/f8/-kqcf8fgcmkjj7kt3gxmfpz31zu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุฌ ุงูุนูู ููุฒุฌ ุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ูุฎุชูู ุนุฑุถ ููุทูุฉ ุงููุฒุฌ ูุน ููุณ ูุนููุงุช ุงูุชุธููู ุ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุชุณุชุฎุฏู ุงูุฑุณูู ุงูุชูุถูุญูุฉ ูุนููุงุช ูุฒุฌ ูุชุทุงุจูุฉ ูููุง ุงูุทุฑููุชูู. </font><font style="vertical-align: inherit;">ูุฎุชูู ุนุฑุถ ููุงุทู ุงููุฒุฌ ุจุตุฑููุง ุ ูุฃู ุงููุฒุฌ ุจุฎุฑูุทุฉ ุงูุงุฑุชูุงุน ูุง ูุนุชูุฏ ุนูู ุงูุฒุงููุฉ ุจูู ูุธุฑุฉ ุงููุฑุงูุจ ูุงูุนุงุฏู ุฅูู ุงูููุงุธุฑ ุงูุทุจูุนูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุชุจุฑ ุงููุฒุฌ ุจุฎุฑูุทุฉ ุงูุงุฑุชูุงุน ุฃูุถู ูู ุงููุฒุฌ ูู ุงูุนูู ุนูู ุงูุฃูู ูู ูุงุญูุฉ: ููู ูุตุญุญ ุงุนุชูุงุฏ ุงููุฒุฌ ุงููุฑุฆู ุจุงูุนูู ุงููุฌุฑุฏุฉ ุนูู ุงูุฒุงููุฉ ุงูุชู ุชูุธุฑ ุจูุง ุงููุงููุฑุง ุฅูู ุงูููุงุธุฑ ุงูุทุจูุนูุฉ. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ุณูู ูุณุชูุฑ ููุงุญุธุฉ ุชุฃุซูุฑ ุงูููุธุฑ.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุฌ ุฅุนุงุฏุฉ ุจูุงุก ุงูููุงุธุฑ ุงูุทุจูุนูุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุฎูุต ูู ุงุฎุชูุงู ุงูููุธุฑ ุ ุชุญุชุงุฌ ุฅูู ูุฒุฌ ุฌุฒุก ูู ุงููููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ูุน ุฌุฒุก ูู ุงููุดูุฏ ุงูุฃููู ุฃุณููู (ูุง ูุนุชูุฏ ุงุฎุชูุงุฑ ุงูููู ููุฎูุท ูู ูุฐู ุงูุญุงูุฉ ุนูู ููุถุน ุงููุงููุฑุง ูุงุชุฌุงููุง). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h8/en/8t/h8en8tgwnrmjvhnunm0wkgcr3cu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุฉ ุฅุตูุงุญ ุงูููุธุฑ: ุงุฎุชูุงุฑ ุฌุฒุก ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ูููุฒุฌ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุจุงูุทุจุน ุ ูุญู ูุชุญุฏุซ ููุง ุฃูุซุฑ ุนู ุฌุฒุก ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ุงูุงูุชุฑุงุถูุฉ. ุงุนุชูุงุฏูุง ุนูู ููุถุน ุงููุงููุฑุง ุ ูููู ุงููุถุน ูููููุง ุนูุฏูุง ูุง ููุน ุฌุฒุก ูู ุงููุดูุฏ ุ ูุงูุฐู ูู ุงูุถุฑูุฑู ูุฒุฌ ุฌุฒุก ูู ูููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ุ ูู ูุฌุงู ุฑุคูุฉ ุงููุงููุฑุง. ุชูุฌุฏ ูุดููุฉ ููุงุซูุฉ ูู ุนุฑุถ ุงูุงูุนูุงุณุงุช ุงููุญููุฉ ูู ูุณุงุญุฉ ุงูุดุงุดุฉ (SSLR). ููู ูุชุฃูู ูู ุญูููุฉ ุฃูู ูู ุงููุณุชุญูู ุชูุฏูู ุงูุนูุงุณ ูุฌุฒุก ุบูุฑ ููุฌูุฏ ุนูู ุงูุดุงุดุฉ </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[13]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุฉ ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ุ ูููู ุฅุนุงุฏุฉ ุจูุงุก ููู ุงูุฌุฒุก ุงูุงูุชุฑุงุถู ุจุฏูุฉ ุนุงููุฉ ุจุงุณุชุฎุฏุงู ููุงุฏ ูุณุงุนุฏุฉ ููุฏูุฉ ูู Unity API: ุงูุฎุฑูุทุฉ ุงูุนุงุฏูุฉ </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[14]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฎุฑูุทุฉ ุงูุฎูููุฉ </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[15]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูููุงู ุงูููุฒูู ูุทุจูุงุช ุงููุฒุฌ </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[16]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูููุงู ุงููุชุถูู ูู ุชูููู ุงูุทุจูุงุช </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[17]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ff/hu/zr/ffhuzriatn-pfjxf-nendtckscm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุงุฏุฉ ุจูุงุก ุฌุฒุก ูู ุงูููุงุธุฑ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงูุทุจูุนูุฉ ูุชู ุฃุฎุฐ ุนููุงุช </font><i><font style="vertical-align: inherit;">ูู</font></i><font style="vertical-align: inherit;"> ุฌููุน ุงูููุงู ุงูุฐู ูุชููู ูู ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ููููุง ูููุณ ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูุซู ุฎุฑูุทุฉ ุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุงูุทุจูุงุช ุ ูุชู ุถุจุท ุฅุญุฏุงุซูุงุช ุฃุฎุฐ ุงูุนููุงุช ูู ุฎูุงู ูุนููุงุช ุงูุชุฌุงูุจ ุงููุญุฏุฏุฉ ูุทุจูุฉ ูุนููุฉ </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[18] [19]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูููุฏ</font></font></b><div class="spoiler_text"><pre><code class="css hljs">// <span class="hljs-selector-tag">Blending</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">reconstructed</span> <span class="hljs-selector-tag">terrain</span> <span class="hljs-selector-tag">fragments</span><font></font>
<font></font>
<span class="hljs-selector-id">#include</span> "<span class="hljs-selector-tag">UnityCG</span><span class="hljs-selector-class">.cginc</span>"<font></font>
<font></font>
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">BlendStart</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">BlendEnd</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">sampler2D_float</span> <span class="hljs-selector-tag">TerrainHeightmapTexture</span>;
<span class="hljs-selector-tag">sampler2D_float</span> <span class="hljs-selector-tag">TerrainNormalTexture</span>;
<span class="hljs-selector-tag">sampler2D</span> <span class="hljs-selector-tag">TerrainAlphaMap</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">HeightmapScale</span>;
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">TerrainSize</span>;
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">TerrainPos</span>;
<span class="hljs-selector-tag">Float4</span> <span class="hljs-selector-tag">TerrainLightmap_ST</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D</span>(<span class="hljs-selector-tag">TerrainSplatMap0</span>);
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D_NOSAMPLER</span>(<span class="hljs-selector-tag">TerrainNormalMap0</span>);
<span class="hljs-selector-tag">half4</span> <span class="hljs-selector-tag">TerrainSplatMap0_ST</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D</span>(<span class="hljs-selector-tag">TerrainSplatMap1</span>);
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D_NOSAMPLER</span>(<span class="hljs-selector-tag">TerrainNormalMap1</span>);
<span class="hljs-selector-tag">half4</span> <span class="hljs-selector-tag">TerrainSplatMap1_ST</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D</span>(<span class="hljs-selector-tag">TerrainSplatMap2</span>);
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D_NOSAMPLER</span>(<span class="hljs-selector-tag">TerrainNormalMap2</span>);
<span class="hljs-selector-tag">half4</span> <span class="hljs-selector-tag">TerrainSplatMap2_ST</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D</span>(<span class="hljs-selector-tag">TerrainSplatMap3</span>);
<span class="hljs-selector-tag">UNITY_DECLARE_TEX2D_NOSAMPLER</span>(<span class="hljs-selector-tag">TerrainNormalMap3</span>);
<span class="hljs-selector-tag">half4</span> <span class="hljs-selector-tag">TerrainSplatMap3_ST</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">struct</span> <span class="hljs-selector-tag">v2f</span><font></font>
{<font></font>
   // ...<font></font>
<font></font>
   float3 <span class="hljs-attribute">worldPos </span>: TEXCOORD0;<font></font>
   float2 <span class="hljs-attribute">heightMapUV </span>: TEXCOORD1;<font></font>
#if defined(LIGHTMAP_ON)<font></font>
   float2 <span class="hljs-attribute">modelLightMapUV </span>: TEXCOORD2;<font></font>
   float2 <span class="hljs-attribute">terrainLightMapUV </span>: TEXCOORD3;<font></font>
#endif<font></font>
<font></font>
   // ...<font></font>
};<font></font>
<font></font>
<font></font>
<span class="hljs-selector-tag">v2f</span> <span class="hljs-selector-tag">vert</span>(<span class="hljs-selector-tag">appdata</span> <span class="hljs-selector-tag">v</span>)<font></font>
{<font></font>
    v2f o;<font></font>
    UNITY_INITIALIZE_OUTPUT(v2f,o);<font></font>
   <font></font>
    // ...<font></font>
    <font></font>
    o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;<font></font>
    o.heightMapUV = TerrainUV(o.worldPos);<font></font>
<font></font>
#if defined(LIGHTMAP_ON)<font></font>
    o.modelLightMapUV = v.texcoord1.xy * unity_LightmapST.xy + unity_LightmapST.zw;<font></font>
    o.terrainLightMapUV = o.heightMapUV * TerrainLightmap_ST.xy + TerrainLightmap_ST.zw;<font></font>
#endif<font></font>
<font></font>
    // ...<font></font>
<font></font>
    return o;<font></font>
}<font></font>
<span class="hljs-selector-tag">half3</span> <span class="hljs-selector-tag">TerrainNormal</span>(<span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">terrainUV</span>)<font></font>
{<font></font>
    return tex2Dlod( TerrainNormalTexture, float4(terrainUV,0,0) ).xyz * 2.0 - 1.0;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-tag">half4</span> <span class="hljs-selector-tag">TerrainSplatMap</span>(<span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv0</span>, <span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv1</span>, <span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv2</span>, <span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv3</span>, <span class="hljs-selector-tag">half4</span> <span class="hljs-selector-tag">control</span>)<font></font>
{<font></font>
    half4 splat0 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainSplatMap0, TerrainSplatMap0, uv0);<font></font>
    half4 splat1 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainSplatMap1, TerrainSplatMap1, uv1);<font></font>
    half4 splat2 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainSplatMap2, TerrainSplatMap2, uv2);<font></font>
    half4 splat3 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainSplatMap3, TerrainSplatMap3, uv3);         <font></font>
    half4 result = splat0 * control.r + <font></font>
                   splat1 * control.g + <font></font>
                   splat2 * control.b + <font></font>
                   splat3 * control.a;<font></font>
    return result;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-tag">half3</span> <span class="hljs-selector-tag">TerrainNormalMap</span>(<span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv0</span>, <span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv1</span>, <span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv2</span>, <span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv3</span>, <span class="hljs-selector-tag">half4</span> <span class="hljs-selector-tag">control</span>)<font></font>
{<font></font>
    half4 n0 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainNormalMap0, TerrainSplatMap0, uv0);<font></font>
    half4 n1 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainNormalMap1, TerrainSplatMap1, uv1);<font></font>
    half4 n2 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainNormalMap2, TerrainSplatMap2, uv2);<font></font>
    half4 n3 = UNITY_SAMPLE_TEX2D_SAMPLER(TerrainNormalMap3, TerrainSplatMap3, uv3);<font></font>
    half3 result = UnpackNormalWithScale(n0, 1.0) * control.r +<font></font>
                   UnpackNormalWithScale(n1, 1.0) * control.g +<font></font>
                   UnpackNormalWithScale(n2, 1.0) * control.b +<font></font>
                   UnpackNormalWithScale(n3, 1.0) * control.a;<font></font>
    result.z += 1e-5;<font></font>
    return result;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-tag">half3</span> <span class="hljs-selector-tag">TerrainLightmap</span>(<span class="hljs-selector-tag">float2</span> <span class="hljs-selector-tag">uv</span>, <span class="hljs-selector-tag">half3</span> <span class="hljs-selector-tag">normal</span>)<font></font>
{<font></font>
#if defined(LIGHTMAP_ON)<font></font>
#if defined(DIRLIGHTMAP_COMBINED)<font></font>
    half4 lm = UNITY_SAMPLE_TEX2D(unity_Lightmap, uv);<font></font>
    half4 lmd = UNITY_SAMPLE_TEX2D_SAMPLER(unity_LightmapInd, unity_Lightmap, uv);<font></font>
    half3 result = DecodeLightmapRGBM(lm, unity_Lightmap_HDR);<font></font>
    result = DecodeDirectionalLightmap(result, lmd, normal);<font></font>
#else<font></font>
    half4 lm = UNITY_SAMPLE_TEX2D(unity_Lightmap, uv);<font></font>
    half3 result = DecodeLightmapRGBM(lm, unity_Lightmap_HDR);<font></font>
#endif                <font></font>
#else<font></font>
    half3 result = UNITY_LIGHTMODEL_AMBIENT.rgb;<font></font>
#endif<font></font>
    return result;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-tag">fixed4</span> <span class="hljs-selector-tag">frag</span>(<span class="hljs-selector-tag">v2f</span> <span class="hljs-selector-tag">i</span>) : <span class="hljs-selector-tag">COLOR</span><font></font>
{<font></font>
    fixed4 result = 0;<font></font>
<font></font>
    // ...<font></font>
<font></font>
    // compute model color and put it to the result<font></font>
<font></font>
    // ... <font></font>
<font></font>
    // reconstruction of terrain fragment<font></font>
<font></font>
    float2 splatUV0 = TRANSFORM_TEX(i.heightMapUV, TerrainSplatMap0);<font></font>
    float2 splatUV1 = TRANSFORM_TEX(i.heightMapUV, TerrainSplatMap1);<font></font>
    float2 splatUV2 = TRANSFORM_TEX(i.heightMapUV, TerrainSplatMap2);<font></font>
    float2 splatUV3 = TRANSFORM_TEX(i.heightMapUV, TerrainSplatMap3);<font></font>
<font></font>
    half4 control = tex2D(_TerrainAlphaMap, i.heightMapUV);<font></font>
    half4 terrainColor = TerrainSplatMap(splatUV0, splatUV1, splatUV2, splatUV3, control);<font></font>
<font></font>
    half3 terrainSurfaceNormal = TerrainNormal(i.heightMapUV);<font></font>
    half3 terrainSurfaceTangent = cross(terrainSurfaceNormal, float3(0,0,1));<font></font>
    half3 terrainSurfaceBitangent = cross(terrainSurfaceTangent, terrainSurfaceNormal);<font></font>
<font></font>
    half3 terrainNormal = TerrainNormalMap(splatUV0, splatUV1, splatUV2, splatUV3, control);<font></font>
    terrainNormal = terrainNormal.x * terrainSurfaceTangent + <font></font>
                    terrainNormal.y * terrainSurfaceBitangent + <font></font>
                    terrainNormal.z * terrainSurfaceNormal;<font></font>
    <font></font>
    half3 terrainLightmapColor = TerrainLightmap(i.heightMapUV, terrainNormal);<font></font>
    terrainColor *= terrainLightmapColor;<font></font>
<font></font>
    // blend model color &amp; terrain color<font></font>
<font></font>
    half height = TerrainHeight(i.heightMapUV);<font></font>
    half deltaHeight = i.worldPos.y - height;<font></font>
    half blendingWeight = smoothstep(BlendStart, BlendEnd, deltaHeight);<font></font>
<font></font>
    result.rgb = lerp(result.rgb, terrainColor, blendingFactor);<font></font>
       <font></font>
    return result; <font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูุฅู ุงููุฒุฌ ูุน ุฅุนุงุฏุฉ ุจูุงุก ุฃุฌุฒุงุก ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ูุนูู ุนูู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุงููููุฐุฌูุฉ ููุฒุฌ ุงูุนูู ูุงููุฒุฌ ุจุฎุฑูุทุฉ ุงูุงุฑุชูุงุน ุ ุจูุง ูู ุฐูู ุงุฎุชูุงู ุงูููุธุฑ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mf/pb/0s/mfpb0sfkav-hj-i5xhpll305drc.png"><br>
<img src="https://habrastorage.org/webt/ba/-z/x6/ba-zx6icghn-mnbreobdnekbjay.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุฌ ุฅุนุงุฏุฉ ุจูุงุก ุงูููุงุธุฑ ุงูุทุจูุนูุฉ</font></font></i><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏุงุก ุฅุนุงุฏุฉ ุจูุงุก ุฌุฒุก ุงูุชุถุงุฑูุณ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงููุฑุญูุฉ ุ ุญุงู ุงูููุช ููุณุคุงู ุ ูุง ูููุฉ ูุฐุง ุงูููุน ูู ุงูุชุณููุฉุ ูููููุฉ ุงูุฃููู ุ ุชุชุฌุงูุฒ ูุซุงูุฉ ุงูููุงุฑุฏ ูุฅุนุงุฏุฉ ุจูุงุก ุฃุฌุฒุงุก ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ูุซุงูุฉ ุงูููุงุฑุฏ ููุฒุฌ ุฃููุง. ูุฅุนุงุฏุฉ ุงูุจูุงุก ุ ูู ุงูุถุฑูุฑู ุงูููุงู ุจุนุดุฑุงุช ุนูููุงุช ุงููุฑุงุกุฉ ุงูุฅุถุงููุฉ ูู ุงูุฐุงูุฑุฉ. ููุฒุฌ ุฃููุง ุ ุชุญุชุงุฌ ููุท ุฅูู ุนูููุฉ ูุฑุงุกุฉ ูุงุญุฏุฉ ูู ุงูุฐุงูุฑุฉ ูุนูููุฉ ูุชุงุจุฉ ูุงุญุฏุฉ ุฅูู ุงูุฐุงูุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ุณูุนุชูุฏ ูู ุดูุก ุนูู ููุฒุงุช ุงููุธุงู ุงูุฃุณุงุณู ููุฃุฌูุฒุฉ. ูุชู ุฏุนู ุฅุนุงุฏุฉ ุจูุงุก ุงูุฃุฌุฒุงุก ูู ุฎูุงู ุถุบุท ุงููุณูุฌ ุ ูุชุนููู ุงูุฎุฑุงุฆุท ุ ูููุฉ ุงููุนุงูุฌุฉ ุงูุฃุณุงุณูุฉ ููุญุฏุฉ ูุนุงูุฌุฉ ุงูุฑุณููุงุช ุ ูุชุญุณููุงุช ูุญุฏุฏุฉ ูุฎุท ุฃูุงุจูุจ ุงูุฃุฌูุฒุฉ (ุงูุฑูุถ ุงููุจูุฑ ููุนูู). ูุนูู ุนูุณ ูุฒุฌ ุฃููุง ุ ูุฅู ุงูุญูููุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ุณุชูุนุจ ุฃููุง ุฃูู ุฌุฒุก ุชูุฏูู ูู ุฃู GPU.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ููุงู ุฏุงุฆููุง ูุฌุงู ููุชุญุณูู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูู ุญุงูุฉ ุฅุนุงุฏุฉ ุจูุงุก ููู ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ุ ูุฅู ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุงูุจูุงุก ูุฐู ูู ููุท ูุดุฑูุท ุถูู ูู ุฃุฌุฒุงุก ุงููููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ุงูุชู ูุง ุชุฒูุฏ ุนู ุงุฑุชูุงุน ูุนูู ููู ุณุทุญ ุงูููุงุธุฑ ุงูุทุจูุนูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฃู ูุนุทู ุงูุชูุฑุน ุงูุฏููุงูููู ูู ุงูุชุธููู ูุชุงุฆุฌ ุฃุฏุงุก ูููู ุงูุชูุจุค ุจูุง ุจุดูู ุณูุฆ ุ ูููู ููุงู ููุทุชุงู ูุฌุจ ูุฑุงุนุงุชููุง:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุชุฎุทู ุงูุญุณุงุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ ูู ุงูุชูุฑุน ุจูุงุณุทุฉ ุดุฑุท ุฅุฐุง ูู ูุชู ุงุณุชููุงุก ูุฐุง ุงูุดุฑุท ูู ุฌุฒุก ูุจูุฑ ูู ุงูุญุงูุงุช.</font></font></li>
<li>       .   ,             ( ,  ),      GPU.    โ   (branch granularity),  , , ,          ,      .         ,    ,       .  ,   GPU  ,     ,       . ,      GPU,   ,  1 (PowerVR SGX).</li>
</ol><br>
<img src="https://habrastorage.org/webt/i7/8y/x9/i78yx9mn7egjmojcmxl67crz1kc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตูุฑ ุฏุฑุฌุงุช ูุฎุชููุฉ ูู ุงูุชูุงุณู</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูู ุญุงูุฉ ุฅุนุงุฏุฉ ุจูุงุก ุงูุฃุฌุฒุงุก ุ ุชุคุฎุฐ ูุงุชุงู ุงูููุทุชุงู ูู ุงูุงุนุชุจุงุฑ: ุชุณูุญ ุญุงูุฉ ุงูุชูุฑุน ูู ูุนุธู ุงูุญุงูุงุช ุจูุทุน ุชูููุฐ ุงูุนูููุงุช ูุซููุฉ ุงูููุงุฑุฏ ูุฅุนุงุฏุฉ ุจูุงุก ุงูููู ุงูุทุจูุนู ุ ููุฐุง ุงูุดุฑุท ูุชูุงุณู ุ ุจุงุณุชุซูุงุก ุนุฏุฏ ูููู ุฌุฏูุง ูู ุงูุฃุฌุฒุงุก (ูู ุงูุฑุณู ุงูุชูุถูุญู ุ ูุฐู ุดุธุงูุง ุชููู ุนูู ุงูุญุฏูุฏ ุจูู ุงูููุทูุชูู "ุงูุญูุฑุงุก" ู "ุงูุฎุถุฑุงุก"). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k3/do/ic/k3doicnobaqmuv82xbdfvq_kgas.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงุณู ุฅุนุงุฏุฉ ุจูุงุก ุฃุฌุฒุงุก ุงูููุงุธุฑ ุงูุทุจูุนูุฉ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุจูู ุฅุถุงูุฉ ุจุนุถ ุงูุชุนูููุงุช ุจุฎุตูุต ุทุฑููุฉ ุงููุฒุฌ ูุฐู:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุฑ ุงููุญุฏุฉ ุฌููุน ุงูููุงู ุงูุถุฑูุฑู ููุท ุฅุฐุง ูุงู ุงููุถุน ุงูุฃููู ููููููุง ูุถุน Draw Instanced </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[20]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฅูุง ููู ุชููู ุงูุฎุฑูุทุฉ ุงูุนุงุฏูุฉ ูุชุงุญุฉ ุ ูุงูุชู ุจุฏูุฑูุง ูู ุชุณูุญ ูู ุจุฅุนุงุฏุฉ ุจูุงุก ุฅุถุงุกุฉ ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ุจุดูู ุตุญูุญ ูููุฒุฌ.</font></font></li>
<li> Unity API    ,      (base map)         . -          .</li>
<li>         ,   API          (, Metal   16  ). </li>
<li>    3D-  ,     Terrain,     SRP.</li>
<li> 3D-      ,       3D-    . </li>
<li>,   ยซยป ,     ยซยป  .    ,  ยซยป      ,             .  ยซยป          .</li>
</ol><br>
<img src="https://habrastorage.org/webt/9z/yi/y-/9zyiy-6z47y7pxyonhwrl31zyoc.png"><br>
<i>    </i><br>
<br>
<br>
<h2>   </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุชุตููู ุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุ ูู ุงููุณุชุญูู ูุฑุงุนุงุฉ ุชููุน ุงูุชุถุงุฑูุณ ุงูุฃุฑุถูุฉ ุงูุชู ูููุชุฑุถ ุฃู ุชุณุชุฎุฏู ุจูุง ูุฐู ุงูููุงุฐุฌ. ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูุฌุจ ุฃู ุชููู ุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ "ุบุงุฑูุฉ" ูู ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ุฃู ูุชู ุชุฏููุฑูุง ูุฅุฎูุงุก ุงูุฃุฌุฒุงุก ุงูุจุงุฑุฒุฉ ุ ุฃู ุงูุนูุณ - ูุฅุธูุงุฑ ุงูุฃุฌุฒุงุก ุงููุฎููุฉ ุงูุชู ูุฌุจ ุฃู ุชููู ูุฑุฆูุฉ. ุชุญุฏ ููุงุฐุฌ "ุงูุงุญุชุฑุงุฑ" ูู ูุงุจููุชูุง ููุชุทุจูู ุ ูุฅุฐุง ุชู ุนุฑุถ ุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ููุช ุฃุจูุฑ ูู ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ุ ูุฅููุง ุชุคุฏู ุฃูุถูุง ุฅูู ุชุฃุซูุฑ ุฒุงุฆุฏ. ุจุฏูุฑู ุ ุจุฏูุฑู ุ ุจุนูุฏ ุฃูุถูุง ุนู ูููู ููุงุณุจูุง ูุฌููุน ุงูููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ (ุนูู ุณุจูู ุงููุซุงู ุ ููุณ ููููุงุฒู ูุงูุฃุดุฌุงุฑ). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ue/tg/8y/uetg8yx5ctdsn80stvnnezplgh4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุฎูุงุก ุงูุนูุงุตุฑ ุงูุจุงุฑุฒุฉ ูููููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ุ ูุฌุจ ุฃู "ูุบุฑู" ูู ุงููุดูุฏ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุนุถ ูู ูุตุทูุญ ูุฃููู ููุณุชุฎุฏูู ุงููุญุฑุฑูู ุงูุฑุณูููุฉ. ูุฐู ูุธููุฉ ุชุณูุญ ูููุงุท ุงูุชุญูู "ุจุงูุงูุชุตุงู" ุจุนูุฏ ุงูุดุจูุฉ ุงูููุงููุฉ ุ ููู ุงููุญุฑุฑุงุช ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ููุฌูู ูุฃุณุทุญ ุงูุฃุดูุงุก ุงูุฃุฎุฑู. ูููู ุฃู ูุคุฏู ุงูุงูุชูุงุท ุฅูู ุฎุฑูุทุฉ ุงุฑุชูุงุนุงุช ุงูููุงุธุฑ ุงูุทุจูุนูุฉ ูู ุชุธููู ุงูุฑุฃุณ ุฅูู ุชุจุณูุท ุชุตููู ุงููุดุงูุฏ ุฅูู ุญุฏ ูุจูุฑ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4w/1t/xw/4w1txwi3vaczzpne7ewajozlymo.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ุจุฏูู ุงูุชูุงุท. ูููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ูุน ุงูุชูุงุท ุงูุฑุฃุณ. ูููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ูุน ุงูุงูุชูุงุท ูุงููุฒุฌ. ูููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ูุน ุงูุชูุงุท ุงูุฑุฃุณ ุ ูุงููุฒุฌ ุ ูุงูุฅุถุงุกุฉ ุงูุซุงุจุชุฉ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุชูุซู ุงูุตุนูุจุฉ ุงูุฑุฆูุณูุฉ ูู ุชูููุฐ ุงูุงูุชูุงุท ูู ุฃูู ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุฑุคูุณ ุงููููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ ุงูุชู ุชุญุชุงุฌ ุฅูู ุงูุชูุงุทูุง ุนูู ุฎุฑูุทุฉ ุงูุงุฑุชูุงุน ุ ูุฃููุง ูุง ุชุณุชุญู ุฐูู. </font><font style="vertical-align: inherit;">ุชุญุชูู ุงูุฑุคูุณ ุนูู ูุนูููุงุช ููุท ุญูู ุงูุทุจูุนุฉ ุงููุญููุฉ ููุณุทุญ (ููู ููุณุช ูุงููุฉ) ููุง ุชุญุชูู ุนูู ุฃู ูุนูููุงุช ุญูู ูููููุง (ููู ุถุฑูุฑู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูู ุงูุญุงู ูู ุญุงูุงุช ุงูุชุทุจูู ุงูุฃุฎุฑู ุ ุชููู ูุฐู ุงููุดููุฉ ุฃุณูู ูุญููุง ูู ูุฑุญูุฉ ุงูููุฐุฌุฉ ูู ุฎูุงู ุงูุชูููุฐ ุงููุจุงุดุฑ ูููุนููุงุช ุงูุถุฑูุฑูุฉ ูู ุงูููู. </font><font style="vertical-align: inherit;">ููุซู ูุฐู ุงููุนููุฉ ุ ูุฌุจ ุนููู ุงุฎุชูุงุฑ ุณูุฉ ุจุฏูููุฉ - ุนูู ุณุจูู ุงููุซุงู ุ ุนุงูู ุชุฑุฌูุญ ุงูุนุถ (ูููุณ ุงููุณุงูุฉ ุฅูู ุญุฏูุฏ ุณุทุญ ููุชูุญ ุ ููุง ูุฑุบุจ ูู ุงููุฑููุฉ). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7b/gq/2b/7bgq2bdhdlr13qgeqpgcocvo0q8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑููุฒ ุงูุชุฑุฌูุญ ูุงูุชูุงุท ุงูุตูุฑ</font></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูููุฏ</font></font></b><div class="spoiler_text"><pre><code class="css hljs">// <span class="hljs-selector-tag">Per-vertex</span> <span class="hljs-selector-tag">snapping</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">terrain</span> <span class="hljs-selector-tag">heightmap</span><font></font>
<font></font>
<span class="hljs-selector-id">#include</span> "<span class="hljs-selector-tag">UnityCG</span><span class="hljs-selector-class">.cginc</span>"<font></font>
<font></font>
<span class="hljs-selector-tag">sampler2D_float</span> <span class="hljs-selector-tag">TerrainHeightmapTexture</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">HeightmapScale</span>;
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">TerrainSize</span>;
<span class="hljs-selector-tag">float4</span> <span class="hljs-selector-tag">TerrainPos</span>;<font></font>
<font></font>
<span class="hljs-selector-tag">struct</span> <span class="hljs-selector-tag">v2f</span><font></font>
{<font></font>
<font></font>
   // ...<font></font>
<font></font>
   float3 <span class="hljs-attribute">worldPos </span>: TEXCOORD0;<font></font>
   float2 <span class="hljs-attribute">heightMapUV </span>: TEXCOORD1;<font></font>
<font></font>
   // ...<font></font>
<font></font>
};<font></font>
<font></font>
<span class="hljs-selector-tag">v2f</span> <span class="hljs-selector-tag">vert</span>(<span class="hljs-selector-tag">appdata</span> <span class="hljs-selector-tag">v</span>)<font></font>
{<font></font>
    v2f o;<font></font>
    UNITY_INITIALIZE_OUTPUT(v2f,o);<font></font>
   <font></font>
    // ...<font></font>
    <font></font>
    o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;<font></font>
    o.heightMapUV = TerrainUV(o.worldPos);<font></font>
    float snappingWeight = v.color.r;                <font></font>
    half height = TerrainHeight( o.heightMapUV );                <font></font>
    o.worldPos.y = lerp( o.worldPos.y, height, snappingWeight );<font></font>
    o.pos = UnityWorldToClipPos( half4( o.worldPos, 1 ) );<font></font>
<font></font>
    // ...<font></font>
<font></font>
    return o;<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅู ูุงุจููุฉ ุงูุทุจุงู ููุฉ ุงูุฑุฃุณ ูุญุฏูุฏุฉ ุจุงููุฑุงุณูุฉ ุงูุนุงูุฉ ุจูู ุงูุชุถุงุฑูุณ ูุณุทุญ ุงููููุฐุฌ ุซูุงุซู ุงูุฃุจุนุงุฏ. </font><font style="vertical-align: inherit;">ููุชุนููุถ ุนู ุงุฎุชูุงูุงุชูู ุงููุจูุฑุฉ ุ ูู ุงูุถุฑูุฑู ุงุณุชุฎุฏุงู ุทุฑู ุฃุฎุฑู ุฃูุซุฑ ูุซุงูุฉ ูู ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ - ุนูู ุณุจูู ุงููุซุงู ุ ุงุณุชุฎุฏุงู ููุงุฐุฌ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูุน ุงููุดุฑุฉ.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุฑุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ูุฌุจ ุฃุฎุฐูุง ูู ุงูููุงูุฉ: ุฃู ุฌูุงุฒ ุชุธููู ูุนูุฏ ุจุฏุฑุฌุฉ ูุงููุฉ ููุงุจู ููุชุทููุฑ ูุญุชุงุฌ ุฅูู ุจูุงูุงุช ุฃุณุงุณูุฉ. </font><font style="vertical-align: inherit;">ููููุฉ ุงููุทูุฑ ูู ููู ููููุฉ ุชุดุบูู ุงููุธุงู ุงูุฑุณููู: ูุง ูู ุงูุจูุงูุงุช ุงูุชู ูููุฑูุง ุ ูููู ูููู ุฏูุฌูุง ูุน ุจุนุถูุง ุงูุจุนุถ ูููููุฉ ุงุณุชุฎุฏุงููุง ูู ุงูุชุธููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุญุงูุฉ ุงูุนุงูุฉ ุ ูููููุง ุฃู ูุณุชูุชุฌ ุฃู ุงูุฎูุงุฑ ุงููุญูุฏ ููุชุบูุจ ุนูู ุงูุฅุทุงุฑ ุงูุฐู ูู ุฎูุงูู ุชููู ุฅููุงูุงุช ุงูุชุฃุซูุฑุงุช ุงูุฑุณูููุฉ ูุญุฏูุฏุฉ ูู ุงูุฌูุน ุจูู ูุชุงุฆุฌ ุงูุธูุงู ุงููุฎุชููุฉ.</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุฌุน</font></font></h2><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูุฑูุงุจุท</font></font></b><div class="spoiler_text"><sup>[1]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/Manual/SL-CameraDepthTexture.html</a><br>
<sup>[2]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/ScriptReference/Camera-depthTextureMode.html</a><br>
<sup>[3]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/ScriptReference/RenderTexture.html</a><br>
<sup>[4]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.khronos.org/opengl/wiki/Framebuffer_Object</a><br>
<sup>[5]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.microsoft.com/en-us/windows/win32/api/d3d11/nf-d3d11-id3d11device-createrendertargetview</a><br>
<sup>[6]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/ScriptReference/Rendering.BlendMode.html</a><br>
<sup>[7]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/ScriptReference/Rendering.BlendOp.html</a><br>
<sup>[8]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.khronos.org/opengl/wiki/Blending</a><br>
<sup>[9]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.microsoft.com/en-us/windows/win32/direct3d11/d3d10-graphics-programming-guide-blend-state</a><br>
<sup>[10]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">en.wikipedia.org/wiki/Parallax</a><br>
<sup>[11]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">en.wikipedia.org/wiki/Parallax_scrolling</a><br>
<sup>[12]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/TerrainData-heightmapTexture.html</a><br>
<sup>[13]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">pdfs.semanticscholar.org/ce6c/fcafe3581a7e4d7184a9727cc504bdc6b295.pdf</a><br>
<sup>[14]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/Terrain-normalmapTexture.html</a><br>
<sup>[15]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/Terrain-lightmapIndex.html</a><br>
<sup>[16]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/TerrainData-alphamapTextures.html</a><br>
<sup>[17]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/TerrainData-terrainLayers.html</a><br>
<sup>[18]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/TerrainLayer-tileSize.html</a><br>
<sup>[19]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/TerrainLayer-tileOffset.html</a><br>
<sup>[20]</sup> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">docs.unity3d.com/2018.3/Documentation/ScriptReference/Terrain-drawInstanced.html</a><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar490204/index.html">ููุฎุต ุงูุฃุญุฏุงุซ ูููุธูู ุชูุธูู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุชูููููุฌูุง ุงููุนูููุงุช ูู ูุงุฑุณ 2020</a></li>
<li><a href="../ar490208/index.html">ูุณู ุงููุงุฌูุฉ ุงูุฎูููุฉ ุนูู DUMP2020: ุงููุฒุงุญ ุ ุงููุฑูุญุฉ ุ ุงููุดู</a></li>
<li><a href="../ar490210/index.html">ุชุณุฑูุน ุงููุงุฌูุฉ. ุนูุฏูุง ุชููู ุงููุซูุฑ ูู ุทูุจุงุช ุงูุฎุงุฏู ุฌูุฏุฉ</a></li>
<li><a href="../ar490222/index.html">ููุชุจุฉ ููู ุงูููุช ุงูููุงุณูุฉ</a></li>
<li><a href="../ar490224/index.html">ุฎูุณุฉ ุนุตุฑูุฉ</a></li>
<li><a href="../ar490242/index.html">ุฎุฏูุฉ ุชุญุฏูุฏ ุงูููุงูุน GSM ููุญุฏุงุช SIM800x ูุนูููุง ูุน Yandex.Locator API</a></li>
<li><a href="../ar490244/index.html">ุจูุซูู ููุฏ ุงูุฃูุซู ูุน ุฃููุงุน</a></li>
<li><a href="../ar490246/index.html">ุฃุจุฑุงุฌ ุงููุฑูููู ูู ุงุญุชุถุงู ููุฏุฑุง: ูุคุชูุฑ ุงูุญูุณุจุฉ ุงููุชูุงุฒูุฉ ูุงูููุฒุนุฉ Hydra 2020</a></li>
<li><a href="../ar490248/index.html">ูุฏูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช "Winnum CNC: ุงููุฑุงูุจุฉ ุงููุงุฌุญุฉ"</a></li>
<li><a href="../ar490250/index.html">ูุฌููุนุฉ ุงูุฑุนุจ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>