<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗄️ 👩🏼‍🤝‍👨🏿 🚴🏽 RangeAmp-一个新漏洞允许DDoS攻击放大数万倍 🖐🏻 🤘🏼 🧚🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="就在几天前，一群中国科学家发现了一个漏洞，该漏洞可以放大DDoS攻击。作者成功地进行了43,000的攻击！新型攻击不仅会耗尽目标Web服务器传出通道的资源，而且还会耗尽CDN节点的通道。 13个经过验证的最大CDN提供商中，有13个都处于弱势，包括Akamai，Fastly和Cloudflare。在...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>RangeAmp-一个新漏洞允许DDoS攻击放大数万倍</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ddosguard/blog/504228/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就在几天前，一群中国科学家</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现了一个</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏洞，</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">该</font></a><font style="vertical-align: inherit;">漏洞可以放大DDoS攻击。作者成功地进行了</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43,000</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的攻击</font><strong><font style="vertical-align: inherit;">！</font></strong><font style="vertical-align: inherit;">新型攻击不仅会耗尽目标Web服务器传出通道的资源，而且还会耗尽CDN节点的通道。 13个经过验证的最大CDN提供商中，有13个都处于弱势，包括Akamai，Fastly和Cloudflare。在削减的情况下，考虑攻击机制和作者提出的措施。</font></font></p><br>
<p><img src="https://habrastorage.org/webt/77/qk/ko/77qkkofmuznqo1elqpmasginwba.jpeg" alt="拇指"></p><a name="habracut"></a><br>
<p> ,    ,  Range-based Amplification ttack   RangeAmp.     CDN    range request  HTTP,      - .   —    . , ,  Akamai  ~15-30%  -   .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">RFC</a>    range request      ,  CDN    .      .</p><br>
<h1 id="kak-provodilos-issledovanie">  </h1><br>
<p>  13  CDN : Akamai, Alibaba Cloud, Azure, CDN77, CDNsun, Cloudﬂare, CloudFront, Fastly, G-Core Labs, Huawei Cloud, KeyCDN, StackPath  Tencent Cloud.</p><br>
<p>   -   Linux  c 2.4GHz CPU, 16G DDR  1000 Mbps . </p><br>
<p> -   Apache/2.4.18   .  CDN     .</p><br>
<h1 id="range-request">Range request</h1><br>
<p>  range request      -.                .    ,               . </p><br>
<p>    ,      <em>Range</em>.   ,     .     ,         .     ,      <em>Accept-Ranges</em>   "bytes".</p><br>
<p>   range    CDN  -   <em>Range</em>.     :</p><br>
<ol>
<li>Laziness () —   .</li>
<li>Deletion () —   .</li>
<li>Expansion () —   ,  .</li>
</ol><br>
<p>   CDN   <strong>2</strong>  <strong>3</strong>.  , ,       ,   ,          .</p><br>
<p> ,      ? RFC7233  <strong>, </strong>  <strong> range       </strong>.   , 4  13  CDN   .</p><br>
<p>    ,    —      . ..    ,  !     .</p><br>
<h1 id="ataka-na-kanal-celevogo-servera">    </h1><br>
<p> Deletion  Expansion CDN       ,     ,   CDN      .    .          <em>Range</em>,  CDN         -   .    Small Byte Range Attack  SBR RangeAmp.     DDoS-,         . , ,  ,  ""  CDN, ..,  CDN     .</p><br>
<p><img src="https://habrastorage.org/webt/jc/ze/lx/jczelxturerywpant3iwrff9vpm.png" alt="丁苯橡胶"></p><br>
<p>  ,     .     25 MB   Akamai  <strong>43000</strong>!</p><br>
<p><img src="https://habrastorage.org/webt/oi/wm/pu/oiwmpuobqsr4lzevyknxyv2tsyg.png" alt="AMP_SBR"></p><br>
<p> 13  CDN     : Akamai, Alibaba Cloud, Azure, CDN77, CDNsun, Cloudﬂare, CloudFront, Fastly, G-Core Labs, Huawei Cloud, KeyCDN, StackPath  Tencent Cloud.</p><br>
<h1 id="ataka-na-kanaly-cdn">   CDN</h1><br>
<p>   ,       . CDN,         CDN  ,   Frontend CDN  FCDN. CDN,     -,   Backend CDN (.  ).</p><br>
<p><img src="https://habrastorage.org/webt/yk/m-/uu/ykm-uu9mkayv8ecsnqobwzvzq0i.png" alt="Obr"></p><br>
<p> ,    :</p><br>
<ol>
<li>FCDN  Laziness     <em>Range</em> " ".</li>
<li>BCDN  ,       <em>Range</em> .</li>
</ol><br>
<p>,      <strong>n</strong>  ,    BCDN    <strong>n</strong> * (  ).    ,      .        TCP Receive Window,           .</p><br>
<p>,      ,    . ..       <em>Range</em>.</p><br>
<p>,   RFC   ,     , 4 : CloudFlare, CDN77, CDNsun, StackPath.             1KB (, <strong>n —     </strong>):</p><br>
<p><img src="https://habrastorage.org/webt/z1/bo/gy/z1bogy6koxnf4q6py3ogni6gpik.png" alt="AMP_OBR"></p><br>
<h1 id="chto-v-itoge">  ?</h1><br>
<p>           ,     .        -  (SBR RangeAmp),  —    CDN  (OBR RangeAmp)     HTTP/1.1,   HTTP/2.</p><br>
<p>        CDN     RFC.</p><br>
<p>CDN      :</p><br>
<ul>
<li>, ,  RFC7233      .</li>
<li>     <em>Range</em>   Laziness    ,   Expansion,     .</li>
</ul><br>
<p>Source:<br>
CDN Backﬁred: Ampliﬁcation Attacks Based on HTTP Range Requests, <em>Weizhong Li, Kaiwen Shen, Run Guo, Baojun Liu, Jia Zhang, Haixin Duan, Shuang Hao, Xiarun Chen, Yao Wan.</em></p><br>
<p>      .</p><br>
<h1 id="ps">P.S.</h1><br>
<p>    CloudFlare   ,         ,   ,         . </p><br>
<p>"They thought that the SBR attack relies on constantly triggering a cache-miss and a customer can add a page rule to ignore query strings. But this does not solve the problem fundamentally. The malicious customers and some normal customers will not follow this suggestion. Unfortunately, they won’t implement our mitigation solutions because Cloudﬂare does not want to cache partial responses of certain resources."</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN504218/index.html">生产力，实习生，老人和硅谷精神的丧失。扎克伯格的远程工作访谈</a></li>
<li><a href="../zh-CN504220/index.html">服务器HTTP标头验证服务</a></li>
<li><a href="../zh-CN504222/index.html">氢是一切的负责人：如何为日本酒店的塑料碎片产生能量</a></li>
<li><a href="../zh-CN504224/index.html">在远程站点上x10负载急剧增加的情况下，我们如何生存？得出的结论是什么？</a></li>
<li><a href="../zh-CN504226/index.html">2020年6月HR和IT招聘人员的事件摘要</a></li>
<li><a href="../zh-CN504230/index.html">NextDNS测试版-整个家庭网络的隐私保护，规避国家审查和广告拦截</a></li>
<li><a href="../zh-CN504232/index.html">工程师如何成长为Techlida</a></li>
<li><a href="../zh-CN504236/index.html">使用Ansible将Docker映像部署到Dokku</a></li>
<li><a href="../zh-CN504240/index.html">第6部分。职业程序员。自己创业</a></li>
<li><a href="../zh-CN504242/index.html">一般方案</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>