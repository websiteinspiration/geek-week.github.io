<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÉè ‚õπüèø üßëüèø‚Äçü§ù‚Äçüßëüèª Como usar o Microsoft SQL para relat√≥rios no Power BI. No exemplo do Mindbox ü•ì üåµ üòò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se voc√™ deseja entender a efic√°cia dos investimentos em publicidade, √© necess√°rio avaliar tudo: cartas, visitas, pedidos, receita. A velocidade de obt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como usar o Microsoft SQL para relat√≥rios no Power BI. No exemplo do Mindbox</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506740/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ deseja entender a efic√°cia dos investimentos em publicidade, √© necess√°rio avaliar tudo: cartas, visitas, pedidos, receita. </font><font style="vertical-align: inherit;">A velocidade de obten√ß√£o dessas m√©tricas tamb√©m √© importante. </font><font style="vertical-align: inherit;">Para maior clareza, voc√™ pode criar relat√≥rios bonitos e compreens√≠veis no Microsoft Power BI. </font><font style="vertical-align: inherit;">E simplificar o recebimento de dados para relat√≥rios ajudar√° no armazenamento em seu pr√≥prio banco de dados. </font><font style="vertical-align: inherit;">Isso √© conveniente, especialmente quando h√° muitas informa√ß√µes, e √© dif√≠cil obt√™-las diretamente de servi√ßos online. </font><font style="vertical-align: inherit;">Armazenamos dados no Microsoft SQL, mas voc√™ pode usar outro servidor de banco de dados.</font></font></p><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas na cria√ß√£o de relat√≥rios usando dados do ESP</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataformas de correio modernas (Plataforma de envio de email ou ESP) coletam estat√≠sticas sobre correspond√™ncias: envio, entrega, abertura, cliques. </font><font style="vertical-align: inherit;">E plataformas mais avan√ßadas, por exemplo, Mindbox, permitem adicionar pedidos e receita aqui.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√©m disso, os dados podem e devem ser coletados usando o Google Analytics e / ou o Yandex.Metrics.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados s√£o armazenados em algum lugar, acess√≠veis pelas APIs da plataforma de email, mas √© dif√≠cil criar relat√≥rios sobre esses dados brutos, porque:</font></font></p><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados podem ser armazenados em diferentes formatos, geralmente inconvenientes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O acesso aos dados pode ser dif√≠cil devido a esquemas de autoriza√ß√£o complexos, protocolo de aquisi√ß√£o de dados complexos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados s√≥ podem ser armazenados no ESP nos √∫ltimos meses; os dados mais antigos da plataforma geralmente s√£o exclu√≠dos.</font></font></li>
<li>  , &nbsp;    -  &nbsp; API      .</li>
<li>     &nbsp; &nbsp; Power BI&nbsp;   &nbsp; &nbsp; -  .</li>
</ol><br>
<p>          API-. ,    &nbsp; ,    ,    .      &nbsp;, &nbsp;     , &nbsp;  &nbsp;  .      , &nbsp;Power BI&nbsp;       &nbsp;.</p><br>
<p> &nbsp;    &nbsp;   &nbsp;‚Äî Microsoft SQL Server.    &nbsp;&nbsp; , &nbsp; &nbsp; .    SQL-    ,   MS&nbsp;Azure  BigQuery.</p><br>
<p><strong> &nbsp;:</strong>    &nbsp;   .  ESP-   &nbsp;     &nbsp;. &nbsp;    &nbsp; SQL- &nbsp;   . ,   ,   &nbsp;   &nbsp;, ‚Ä¶    &nbsp;3&nbsp;!</p><br>
<p>    API ESP      :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/929/374/8eb/9293748eb6a2fd08d2c004d3a478cb59.png" alt="O resultado de uma solicita√ß√£o padr√£o para a API ESP" width="435" height="200"></p><br>
<p> ,   :     .</p><br>
<p>    SQL-      .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/0f9/18b/b2f/0f918bb2f65691737dc02d715e639274.png" alt="Informa√ß√µes para o per√≠odo necess√°rio ao agregar dados em um servidor Microsoft SQL" width="926" height="409"></p><br>
<p>           ,   SQL-       .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/2d9/73f/11c/2d973f11c0b1b2c91f94649268f282fb.png" alt="Estat√≠sticas di√°rias do Microsoft SQL Server" width="873" height="381"></p><br>
<h2> &nbsp;  &nbsp;Microsoft SQL Server</h2><br>
<p> SQL-    ,    .            Node.js.          API-.</p><br>
<p>   API-   &nbsp;ESP,  &nbsp;  &nbsp; &nbsp; . &nbsp;   ,      &nbsp;.</p><br>
<p> , &nbsp; &nbsp;  ,  &nbsp; &nbsp;  &nbsp; Power BI&nbsp;&nbsp;:   ,  &nbsp;.</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/d64/fa9/d99/d64fa9d9966babdc7a5e8394512f50d3.png" alt="Importar dados do Mindbox usando o Microsoft SQL Server" width="1920" height="1080"></p><br>
<p>, &nbsp;  &nbsp; &nbsp; &nbsp;Mindbox. &nbsp;  &nbsp;‚Äî  ,   &nbsp;,  &nbsp; ¬´‚Üí‚Üí‚Üí &nbsp; &nbsp;‚Üí &nbsp;¬ª.</p><br>
<p>       &nbsp; &nbsp;, &nbsp; .</p><br>
<ol>
<li>Mindbox     ,  .       ‚Äî 10 000,     500-1000  ‚Äî    API.        .     ,       ,   Mindbox.</li>
<li>&nbsp;API Mindbox     &nbsp;.    c&nbsp;&nbsp;ID ( ) , &nbsp;,   &nbsp;, ID&nbsp;  ,  &nbsp;  &nbsp; .</li>
<li>    ,       .     , &nbsp;&nbsp;  .</li>
<li> API- &nbsp;Mindbox    &nbsp; .     ,      &nbsp;,  .   , &nbsp;&nbsp;   .       .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Mindbox fornece dados brutos que geralmente n√£o s√£o necess√°rios para gera√ß√£o de relat√≥rios. </font><font style="vertical-align: inherit;">No servidor SQL, voc√™ pode agregar imediatamente os dados, o que aumentar√° a velocidade do download e simplificar√° o processamento nos relat√≥rios do Power BI.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta ocasi√£o, recebemos um coment√°rio do gerente de produtos da Mindbox, Ilya Tsyrulnikov:</font></font><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúEm junho de 2020, lan√ßamos uma nova API de exporta√ß√£o que funciona de forma ass√≠ncrona e retorna imediatamente uma grande quantidade de dados. </font><font style="vertical-align: inherit;">Por exemplo, ser√° poss√≠vel descarregar todos os pedidos nos √∫ltimos seis meses com uma solicita√ß√£o.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No futuro, planejamos criar um provedor padr√£o para um dos sistemas de BI. </font><font style="vertical-align: inherit;">Os dados brutos no BI chegar√£o automaticamente sem a implanta√ß√£o e o suporte de um banco de dados separado. ‚Äù</font></font></p><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o Microsoft SQL Data Collector funciona</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O algoritmo do programa pode ser descrito assim:</font></font></p><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descubra o ID m√°ximo de a√ß√£o que conseguimos salvar em nosso banco de dados.</font></font></li>
<li>  API Mindbox , ID&nbsp; ,   ID&nbsp;  .    , &nbsp; &nbsp; ID.</li>
<li>  , &nbsp; &nbsp;&nbsp;  .  &nbsp; 1. &nbsp;  , , &nbsp;  &nbsp; ,  Mindbox  .</li>
</ol><br>
<p>     .  &nbsp;     &nbsp;&nbsp;.</p><br>
<pre><code class="plaintext hljs">/* MSSQL */<font></font>
const config = require('./config.js');<font></font>
/**<font></font>
   :<font></font>
module.exports = {<font></font>
<font></font>
mssql: {<font></font>
user: 'sa',<font></font>
password: 'mssqlpassword',<font></font>
server: 'mssqlhost',<font></font>
database: 'mssqldbname',<font></font>
connectionTimeout: 60000,<font></font>
requestTimeout: 60000<font></font>
},<font></font>
<font></font>
mindbox_api_key: '___API_mindbox'<font></font>
};<font></font>
**/<font></font>
<font></font>
const async = require('async');<font></font>
const request = require('request');<font></font>
const https = require("https");<font></font>
const sql = require('mssql');<font></font>
var parseString = require('xml2js').parseString;<font></font>
var _ = require('lodash');<font></font>
var iconv = require('iconv-lite');<font></font>
<font></font>
//  SQL-<font></font>
sql.connect(config.mssql, err =&gt; {<font></font>
// Query<font></font>
if (err) {<font></font>
console.log('SQL connect error: ', err, config.mssql);<font></font>
}<font></font>
})<font></font>
<font></font>
sql.on('error', err =&gt; {<font></font>
console.log('SQL server error: ', err);<font></font>
// ... error handler<font></font>
})<font></font>
<font></font>
setTimeout(function() {<font></font>
//     ,     <font></font>
var operarions = ['EksportDejstvijPoRuchnym', 'EksportDejstvijPoRassylkam', 'EksportDejstvijPoRassylkamSkandinavskij', 'EksportDejstvijPoRassylkamNovoe', 'EksportDejstvijPoRassylkamSkolkovskij', 'EksportDejstvijPoRassylkamDsk1', 'EksportDejstvijPoRassylkamDyxanie', 'EksportDejstvijPoRassylkamPokolenie', 'EksportDejstvijPoRassylkamFsk'];<font></font>
async.forEach(operarions, function(operation, cb1) {<font></font>
mbxChunk(operation, cb1);<font></font>
},<font></font>
function(err, res) {<font></font>
if (err) {<font></font>
sql.close();<font></font>
process.exit();<font></font>
return;<font></font>
}<font></font>
console.log('DONE!');<font></font>
sql.close();<font></font>
process.exit();<font></font>
}<font></font>
)<font></font>
}, 1000);<font></font>
<font></font>
/**<font></font>
*        <font></font>
*/<font></font>
function mbxChunk(operation, cb) {<font></font>
console.log('New Chunk '+operation);<font></font>
var sqlreq = new sql.Request();<font></font>
//  mindboxId  ,  ,   ID  <font></font>
sqlreq.query("SELECT MAX(mindboxId) AS last FROM "+config.mssql.database+".dbo."+operation+";", function(err, maxres) {<font></font>
if (err || !maxres.recordset[0]) {<font></font>
console.log('MsSQL SELECT MAX error: ', err);<font></font>
cb(err);<font></font>
return;<font></font>
}<font></font>
var chunk = parseInt(maxres.recordset[0].last || 0) + 1;<font></font>
<font></font>
// ,   ID=chunk<font></font>
mbxCall(operation, chunk, function(err, xml) {<font></font>
console.log(operation + ' from #' + chunk.toString() + ' started');<font></font>
if (err) {<font></font>
console.log(operation + ' from #' + chunk.toString() + ': Mindbox API request error: ', err);<font></font>
cb(err);<font></font>
}<font></font>
parseString(xml, function(err, res) {<font></font>
if (err) {<font></font>
console.log(operation + ' from #' + chunk.toString() + ': Mindbox returns invalid XML, parse error: ', err);<font></font>
console.log(xml);<font></font>
cb(err);<font></font>
}<font></font>
if (res &amp;&amp; res.result &amp;&amp; res.result.status == 'Success') {<font></font>
var rows = res.result.customerActions ? res.result.customerActions[0].customerAction : [];<font></font>
if (rows.length &gt; 0) {<font></font>
mbxHandle(operation, rows, function(err, res) {<font></font>
console.log(operation + ' from #' + chunk.toString() + ' + '+rows.length.toString()+' done!');<font></font>
mbxChunkCopy(operation, cb);<font></font>
});<font></font>
}<font></font>
else {<font></font>
console.log(operation + ' - data is over!');<font></font>
cb();<font></font>
}<font></font>
}<font></font>
else {<font></font>
console.log(operation + ' from #' + chunk.toString() + ': Mindbox returns unsuccessfull result: ', res);<font></font>
cb(err);<font></font>
}<font></font>
});<font></font>
})<font></font>
})<font></font>
}<font></font>
<font></font>
function mbxChunkCopy(operation, cb) {<font></font>
mbxChunk(operation, cb);<font></font>
}<font></font>
<font></font>
/**<font></font>
*   API Mindbox<font></font>
*  1000 . ID    startId<font></font>
*/<font></font>
function mbxCall(operation, startId, cb) {<font></font>
var request = require("request");<font></font>
var options = {<font></font>
method: 'POST',<font></font>
url: 'https://api.mindbox.ru/v3/operations/sync',<font></font>
qs: {<font></font>
endpointId: 'fskuniversalpoint', operation: operation<font></font>
},<font></font>
headers: {<font></font>
"Cache-Control": "no-cache",<font></font>
"Content-Type": "application/xml",<font></font>
"Accept": "application/xml",<font></font>
"Authorization": 'Mindbox secretKey="'+config.mindbox_api_key+'"'<font></font>
},<font></font>
body: '&lt;operation&gt;\r\n  &lt;page&gt;\r\n    &lt;firstmindboxid&gt;' + startId.toString() + '&lt;/firstmindboxid&gt;\r\n    &lt;pagenumber&gt;1&lt;/pagenumber&gt;\r\n    &lt;itemsperpage&gt;1000&lt;/itemsperpage&gt;\r\n  &lt;/page&gt;\r\n&lt;/operation&gt;'<font></font>
};<font></font>
<font></font>
request(options, function (error, response, body) {<font></font>
cb(error, body);<font></font>
});<font></font>
}<font></font>
<font></font>
/**<font></font>
*     Mindbox<font></font>
*    table MsSQL<font></font>
*/<font></font>
function mbxHandle(table, rows, cb) {<font></font>
console.log(rows.length.toString() + ' items to save into '+table);<font></font>
var i = 0;<font></font>
<font></font>
async.forEach(rows, function(row, cb1) {<font></font>
try {<font></font>
var sqlreq = new sql.Request();<font></font>
sqlreq.input('mindboxId', sql.Int, parseInt(row.ids[0].mindboxId[0]));<font></font>
sqlreq.input('transactionId', sql.VarChar, (row.ids[0].transactionId ? row.ids[0].transactionId[0] : ''));<font></font>
sqlreq.input('systemName', row.actionTemplate[0].systemName[0]);<font></font>
sqlreq.input('name', sql.NVarChar, row.actionTemplate[0].name[0]);<font></font>
sqlreq.input('dateTimeUtc', sql.DateTime, new Date(row.dateTimeUtc[0]));<font></font>
sqlreq.input('pointOfContact_externalId', sql.VarChar, row.pointOfContact[0].ids[0].externalId[0]);<font></font>
sqlreq.input('customer_mindboxId', sql.VarChar, (row.customer[0].ids[0] ? row.customer[0].ids[0].mindboxId[0] : ''));<font></font>
sqlreq.input('customer_webSiteId', sql.VarChar, (row.customer[0].ids[0].webSiteId ? row.customer[0].ids[0].webSiteId[0] : ''));<font></font>
sqlreq.input('channel', sql.VarChar, (row.mailing &amp;&amp; row.mailing[0].channel ? row.mailing[0].channel[0] : ''));<font></font>
sqlreq.input('action', sql.VarChar, (row.mailing &amp;&amp; row.mailing[0].action ? row.mailing[0].action[0] : ''));<font></font>
sqlreq.input('notSentReason_name', sql.VarChar, row.ids[0].mindboxId[0]);<font></font>
sqlreq.input('notSentReason_systemName', sql.VarChar, (row.mailing &amp;&amp; row.mailing[0].notSentReason &amp;&amp;  row.mailing[0].notSentReason[0].name ? row.mailing[0].notSentReason[0].name[0] : ''));<font></font>
sqlreq.input('groupingKey', sql.VarChar, (row.mailing &amp;&amp; row.mailing[0].groupingKey ? row.mailing[0].groupingKey[0] : ''));<font></font>
sqlreq.input('link', sql.VarChar, (row.mailing &amp;&amp; row.mailing[0].link ? row.mailing[0].link[0] : ''));<font></font>
sqlreq.input('viewEmailMessageUrl', sql.VarChar, (row.mailing &amp;&amp; row.mailing[0].viewEmailMessageUrl ? row.mailing[0].viewEmailMessageUrl[0] : ''));<font></font>
var q = "INSERT INTO "+config.mssql.database+".dbo."+table<font></font>
+ " (mindboxId, transactionId, systemName, name, dateTimeUtc, pointOfContact_externalId, customer_mindboxId, customer_webSiteId, channel, [action], notSentReason_name, notSentReason_systemName, groupingKey, link, viewEmailMessageUrl)"<font></font>
+ " VALUES(@mindboxId, @transactionId, @systemName, @name, @dateTimeUtc, @pointOfContact_externalId, @customer_mindboxId, @customer_webSiteId, @channel, @action, @notSentReason_name, @notSentReason_systemName, @groupingKey, @link, @viewEmailMessageUrl);";<font></font>
}<font></font>
catch (err) {<font></font>
console.log('MsSQL input vars error: ', err, JSON.stringify(row));<font></font>
return cb1(err);<font></font>
}<font></font>
sqlreq.query(q, function(err, r) {<font></font>
if (err) {<font></font>
console.log('MsSQL query error: ', err, JSON.stringify(row));<font></font>
}<font></font>
cb1(err, r);<font></font>
})<font></font>
}, function(err, r) {<font></font>
cb(err, r);<font></font>
});<font></font>
}</code></pre><br>
<p>  , &nbsp;&nbsp;  , ,   .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/e1b/763/f84/e1b763f8481d28a292fe9e90652b8e17.jpg" alt="Exemplo de relat√≥rio com dados coletados usando o Microsoft SQL" width="1364" height="736"></p><br>
<p>&nbsp;  Power BI&nbsp;     &nbsp;Mindbox &nbsp;  :</p><br>
<pre><code class="plaintext hljs">let<font></font>
//       Mindbox<font></font>
   ExportAction = (name as text, page as number)=&gt;let<font></font>
   Source=Xml.Tables(Web.Contents("https://api.mindbox.ru/v3/",<font></font>
                     [Headers=[#"content-type"="application/xml",Accept="application/xml",Authorization="Mindbox secretKey="""""],<font></font>
                     RelativePath="operations/sync",<font></font>
                     Query=[endpointId="",operation=name],<font></font>
                     Content=Text.ToBinary("&lt;operation&gt;&lt;page&gt;&lt;firstmindboxid&gt;0&lt;/firstmindboxid&gt;&lt;pagenumber&gt;"&amp;Number.ToText(page)&amp;"&lt;/pagenumber&gt;&lt;itemsperpage&gt;10000&lt;/itemsperpage&gt;&lt;/page&gt;&lt;/operation&gt;")])),<font></font>
   Data= try Source{0}[customerActions] otherwise null //    <font></font>
in<font></font>
   Data,<font></font>
//  <font></font>
   name="XXXXXXXXXXX",  //     Mindbox<font></font>
   Source = List.Generate( ()=&gt;                                            //        Mindbox<font></font>
            [Result = ExportAction(name, 1), Page = 1],                    //    .<font></font>
            each [Result] &lt;&gt; null,                                         //   ,   <font></font>
            each [Result = ExportAction(name,[Page]+1), Page = [Page]+1],  //     <font></font>
            each [Result]),<font></font>
//     <font></font>
    #"Converted to Table" = Table.FromList(Source, Splitter.SplitByNothing(), null, null, ExtraValues.Error)<font></font>
//   *<font></font>
//   *<font></font>
//     <font></font>
//   *<font></font>
//   *<font></font>
//   result = ..........<font></font>
in<font></font>
    result</code></pre><br>
<p>&nbsp;&nbsp;  .  2-3. , ,  &nbsp;,  &nbsp; &nbsp;   &nbsp;  &nbsp; .</p><br>
<p>&nbsp; &nbsp;,  ,  ,    . &nbsp;  &nbsp;.       , &nbsp;   &nbsp;.</p><br>
<p>    2020  PowerQuery    () ,        ,     API    .</p><br>
<p> &nbsp;Power BI&nbsp; ,   &nbsp;SQL-, &nbsp;    &nbsp;   &nbsp;‚Äî   .</p><br>
<p>&nbsp;   ( &nbsp; &nbsp;API):</p><br>
<br>
<pre><code class="plaintext hljs">let<font></font>
Source = Sql.Database("ServerName¬´, ¬´DataBase¬ª),<font></font>
Result = Source{[Schema="dbo",Item="TableName"]}[Data]<font></font>
in<font></font>
Result</code></pre><br>
<p>           ,         Power query  .</p><br>
<br>
<h2>   &nbsp;Power BI</h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui est√° um relat√≥rio que voc√™ pode coletar dados do Mindbox e do Google Analytics.</font></font></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/aae/bd3/fff/aaebd3fff86c4fa89626c19330db1bbd.png" alt="Relat√≥rio do Power BI compilado usando o Microsoft SQL" width="1651" height="899"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seguindo a metodologia acima, os dados do Mindbox e do Google Analytics s√£o coletados todas as noites em um banco de dados no servidor SQL (um script especial coleta dados sem amostragem) e, em seguida, os dados coletados e agregados do servidor SQL s√£o carregados no relat√≥rio no servidor do Power BI.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim, no in√≠cio do dia √∫til, os usu√°rios recebem dados atualizados no relat√≥rio.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt506726/index.html">Experi√™ncia no uso da tecnologia Rutoken para registro e autoriza√ß√£o de usu√°rios no sistema (parte 2)</a></li>
<li><a href="../pt506730/index.html">Bufo ou Suricata. Parte 1: escolha um IDS / IPS gratuito para proteger a rede corporativa</a></li>
<li><a href="../pt506732/index.html">Reutiliza√ß√£o em toda a organiza√ß√£o de componentes da interface do usu√°rio</a></li>
<li><a href="../pt506734/index.html">C√°lculos transit√≥rios em redes el√©tricas</a></li>
<li><a href="../pt506736/index.html">Quantos m√©todos devem estar em uma classe?</a></li>
<li><a href="../pt506742/index.html">Por que o centro do pixel deve estar em (0,5; 0,5)</a></li>
<li><a href="../pt506748/index.html">Quem aumentou as vendas em quarentena?</a></li>
<li><a href="../pt506758/index.html">Os produtos organizaram uma confer√™ncia sobre o princ√≠pio do c√≥digo aberto e, por 10 anos, cada participante √© um organizador</a></li>
<li><a href="../pt506762/index.html">Semana da Seguran√ßa 25: Conjunto de patches recordes da Microsoft</a></li>
<li><a href="../pt506766/index.html">Recusamos as plataformas RPA pagas e somos baseados em OpenSource (OpenRPA)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>