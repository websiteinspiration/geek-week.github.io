<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔁 🤼 👨🏼‍🎤 Esquema de animación en SCADA 🤽🏾 🐫 👩🏾‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Al crear HMI, con frecuencia la tarea es construir un mapeo de un circuito complejo de elementos relacionados. Esto puede ser esquemas de tuberías ram...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Esquema de animación en SCADA</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487738/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al crear HMI, con frecuencia la tarea es construir un mapeo de un circuito complejo de elementos relacionados. </font><font style="vertical-align: inherit;">Esto puede ser esquemas de tuberías ramificadas, electricidad, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, puede limitarse a mostrar elementos clave (válvulas de compuerta, disyuntores), pero cuanto más grande sea el circuito, más difícil será componer una imagen completa y garantizar las acciones correctas del operador. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/js/86/tr/js86trkeud1o6qilw9cdjckia8s.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este artículo describe la coloración de elementos de tales esquemas, describe el método de solución para Simatic WinCC v7 y su implementación en Simargl SCADA. </font><font style="vertical-align: inherit;">Si no tiene que trabajar con WinCC, puede mirar al final del artículo: hay un video curioso.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para una representación más visual de por qué todo esto es necesario, tomamos un pequeño esquema simple.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zm/7-/rm/zm7-rmshnfpa9zuahdxt6m_mdfo.png" alt="imagen"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora imagine lo que sucederá si hay una operación. </font><font style="vertical-align: inherit;">¿Cuánto tiempo lleva rastrear la ruta de un producto a través de un sistema de tuberías? </font><font style="vertical-align: inherit;">Nos armamos con un cronómetro.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listo? </font><font style="vertical-align: inherit;">¡Vamos!</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/iq/l8/jt/iql8jtcvyifvukrjviudd-s4mxu.png" alt="image"></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Según mis observaciones, lleva de 10 a 15 segundos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora recuerde que (de repente) las operaciones pueden ser varias al mismo tiempo. </font><font style="vertical-align: inherit;">Esto "ligeramente" complica la tarea. </font><font style="vertical-align: inherit;">¿Listo para ponerte a prueba de nuevo?</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡Vamos!</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/zl/oh/-dzloh6cxb2zcwpqzpdiwlolmm0.png" alt="image"></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traduciendo a un idioma decente las palabras de mi colega: “¡Esa es una oportunidad! Mientras rastreas la segunda ruta, te olvidarás mucho de la primera. ¡Qué esquema tan maravilloso y conveniente! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el esquema es realmente simple: ni siquiera tiene lecturas de instrumentos y varias firmas (un saludo especial a los fanáticos para dibujar tuberías "tridimensionales"). En la práctica, las cosas pueden ser peores. Me he encontrado con esquemas significativamente más grandes (más de 400 válvulas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué puede hacer un operador con una imitación de este tipo? En el mejor de los casos, abra lentamente las válvulas de compuerta a lo largo de la ruta y espere que no se haya equivocado. Pero, ¿qué sucede si el cambio debe hacerse rápidamente y el costo del error es alto?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La salida de esta situación es obvia: es necesario colorear las líneas a lo largo de la ruta, y es aconsejable hacerlo antes de la acción de control. </font><font style="vertical-align: inherit;">Por extraño que parezca, no vi una solución lista para usar, incluso con los costosos paquetes SCADA. </font><font style="vertical-align: inherit;">Un intento de teñir manualmente cada línea amenaza con retrasar la configuración casi hasta el infinito.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solución para WinCC v7</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resolví tal problema basado en WinCC v7. Desafortunadamente, según los términos del contrato, no tengo derecho a presentar una solución preparada, pero puedo describir una posible solución. De repente alguien será de ayuda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notaré de inmediato que se tratará de la familia de productos WinCC versión 7, ya que existe la oportunidad de usar VBA. Es necesario advertir, todo lo que se describe a continuación es más probable que sea un truco, se utiliza desde la desesperanza y no es adecuado en todos los casos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continuaré la discusión en términos de tuberías y válvulas, aunque, por supuesto, todo será igual para los esquemas de suministro de energía. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Divida mentalmente el esquema en secciones para que en cada lado solo haya una entrada / salida. Aquellos. Si se corta una salida en la tubería, se deberán hacer tres secciones: antes de la rama, luego la rama misma.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para crear un diagrama, deberá usar dos tipos de objetos gráficos estándar: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conector (para dibujar líneas) y Círculo (para crear puntos de control del diagrama). El conector es necesario porque le permite determinar qué objetos en el circuito están conectados, en contraste con la línea habitual. El círculo estándar debe rehacerse en CustomObject; esto evitará confusión al ordenar elementos del esquema mnemónico y dará nombres convenientes a las propiedades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parte de los puntos de control corresponderá a las uniones de las tuberías, y parte a las válvulas de compuerta. Para este último, seleccionamos cualquier propiedad no utilizada y asignamos una acción VBS, donde creamos una constante y le asignamos un valor de cadena con el nombre de la válvula:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4a/4a/6s/4a4a6sqjj2s_tn7vq-o87itgkhk.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, escribimos un script en VBA que pasará por todos los elementos de la pantalla y para cada conector crearemos una lista de pestillos conectados indirectamente, lo que le permitirá crear finalmente texto VBS para la propiedad BorderColor. Esto se puede lograr debido al hecho de que Connector tiene dos propiedades: TopConnectedObjectName y BottomConnectedObjectName, disponibles en VBA. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado de este script se verá más o menos así: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2j/sg/io/2jsgiom-vpl8c5vahyyd3nsutro.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D1 y D2: matrices con los nombres de las válvulas; TubeColor: una función que devuelve el color y el estilo de línea según el estado de las válvulas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un punto importante: al escribir un script VBS en un elemento, también debe cambiar los desencadenantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la función TubeColor, será necesario establecer todas las reglas de coloración según la situación tecnológica. Por supuesto, TubeColor debe representarse en el script Global.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces comenzará la lucha por el rendimiento, la optimización de VBS, etc., ya que WinCC apenas puede transferir grandes diagramas mnemónicos. </font><font style="vertical-align: inherit;">Pero debemos rendir homenaje a los colegas de Siemens, la velocidad de VBS ha aumentado significativamente, si no me equivoco, de la versión 7.3, que simplificó enormemente la vida de los desarrolladores de proyectos aplicados.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripción de la implementación en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simargl SCADA</font></font></a></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para dibujar esquemas animados, Simargl SCADA incluye dos widgets: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SPipeScene, una escena para dibujar líneas y establecer reglas de coloración; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SPipe: para especificar puntos nodales y mostrar cambios en el estado del equipo de campo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esencia, el proceso se reduce a simplemente colocar los puntos nodales del circuito, vincular las propiedades a los valores de las etiquetas y colocar widgets en la parte superior de la escena que muestran el estado del equipo. </font><font style="vertical-align: inherit;">Todo se parece a esto:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es curioso que para crear el circuito real, no fue necesario escribir código en absoluto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede obtener la versión demo de Simargl SCADA, la documentación y las fuentes del proyecto del video de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">página de Facebook</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es487720/index.html">Sobre el corutinismo competitivo (usando la programación reactiva como ejemplo)</a></li>
<li><a href="../es487724/index.html">BlazingPizza: aplicación Blazor de principio a fin. Parte 2. Agregar un componente</a></li>
<li><a href="../es487728/index.html">Compilación de @Pythonetc, enero de 2020</a></li>
<li><a href="../es487730/index.html">Procesamiento natural del lenguaje. Resultados 2019 y tendencias para 2020</a></li>
<li><a href="../es487734/index.html">Acelerar Entity Framework Core</a></li>
<li><a href="../es487740/index.html">Ensamblar un magnetómetro portátil</a></li>
<li><a href="../es487742/index.html">Comercio de Arbitraje (Algoritmo Bellman-Ford)</a></li>
<li><a href="../es487744/index.html">FARO presenta el escáner láser 3D FOCUS S 70</a></li>
<li><a href="../es487746/index.html">Eterno</a></li>
<li><a href="../es487748/index.html">Clave de cifrado de hardware de $ 3: ¿es esto posible?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>