<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏽 🤞🏿 🧚🏾 用Raspberry Pi控制网络 🐣 🎷 🈁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！我向您介绍了APC杂志上一篇文章的翻译。
 
 
 
 网络安全对于确保数据和硬件的完整性至关重要。毫无疑问，路由器上必须有防火墙和软件保护工具，但是，要想更多地了解网络上正在发生的事情，就需要有一个监视和控制它的工具。
 
 看来，将有关企图黑客入侵的信号发送到计算机的网络监视工具只是科幻...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>用Raspberry Pi控制网络</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490446/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哈Ha！</font><font style="vertical-align: inherit;">我向您介绍了APC杂志上一篇文章的翻译。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/3x/pr/rz3xpr3gcbhn4bm9_fokig8xqfq.png" alt="图片"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络安全对于确保数据和硬件的完整性至关重要。</font><font style="vertical-align: inherit;">毫无疑问，路由器上必须有防火墙和软件保护工具，但是，要想更多地了解网络上正在发生的事情，就需要有一个监视和控制它的工具。</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
看来，将有关企图黑客入侵的信号发送到计算机的网络监视工具只是科幻电影情节的一部分，但实际上这种工具确实存在。从本质上讲，这意味着您可以快速确定网络中的设备何时与Internet断开连接（例如，智能家居或物联网的应用程序），并检测与路由器或网络硬件的未经授权的连接。您只需要一台Raspberry Pi单板计算机和Nagios。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nagios和Raspberry Pi单板计算机一样，有多个版本。为了便于理解，此处将考虑安装程序的两个选项：创建磁盘映像和在当前OS上手动安装。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NEMS（Nagios企业监控服务器）是Nagios企业监控服务器，它安装在Raspberry Pi上，可在以下位置找到：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit.ly</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lxf253nems。它将需要容量至少为16 GB的存储卡，但最好选择32 GB。尽管可以使用Raspberry Pi1 A型和Raspberry Pi计算模块以外的任何版本，但建议使用Raspberry Pi 3B +进行操作。请注意，只能通过BitTorrent下载NEMS软件包。但是，可以免费获得其他Nagios磁盘映像。下载软件包后，使用该工具创建磁盘映像并将IMG文件写入SD卡。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一旦准备好在单板计算机上运行NEMS，就可以通过以太网电缆将Raspberry Pi连接到路由器。尽管服务器可以通过Wi-Fi运行，但以太网仍然是监视网络的更可靠的方法。插入SD卡，启动Raspberry Pi，然后等待NEMS设置完成。该过程将自动调整文件系统的大小，因此初始下载将花费比平时更长的时间。使用安全外壳协议（SSH），使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nemsadmin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为用户名和密码</font><font style="vertical-align: inherit;">连接到NEMS </font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后输入命令：</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo nems-init</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，将开始安装NEMS。</font><font style="vertical-align: inherit;">在此阶段，您将需要执行区域设置，选择编码方法，创建一个帐户，并添加一个将发送通知的电子邮件地址。</font><font style="vertical-align: inherit;">为此，请在桌面浏览器中打开</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nems.local</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接</font><font style="vertical-align: inherit;">（或使用Raspberry Pi的IP地址）以开始配置。</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手动安装</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
另外，您可以在任何Raspberry Pi操作系统（例如Raspbian）上手动安装Nagios。</font><font style="vertical-align: inherit;">为了获得最佳结果，请从全新安装操作系统开始，然后启动SSH会话。</font><font style="vertical-align: inherit;">为此，首先升级数据库：</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo apt update &amp;&amp; sudo apt upgrade</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重启设备：</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后安装Nagios：</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo apt install nagios3</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等待对话框创建管理员帐户，然后创建并写下密码，因为稍后将需要它。这个过程不需要很多时间。之后，您将通过IP地址</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">192.168.1.10/nagios3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从另一台设备访问Nagios </font><font style="vertical-align: inherit;">。需要时，请使用先前创建的nagiosadmin用户名和密码。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络监视</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/sa/zz/_o/sazz_odur9uxtznzmmvdu7pe3fo.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
在Raspberry Pi上安装Nagios之后，您将可以运行连续监视系统。它仍然只是根据您的需要对其进行自定义。如果程序是手动安装的，则通过终端配置主机。为此，请创建一个配置文件。例如，我们称它为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monitor.cfg</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo nano /etc/nagios3/ conf.d/monitor.cfg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
向其添加要跟踪的设备的详细信息。</font><font style="vertical-align: inherit;">假设您在Raspberry Pi上有一个Minecraft服务器。</font><font style="vertical-align: inherit;">输入以下命令：</font></font><br>
<br>
<pre><code class="plaintext hljs">define host {  <font></font>
use      generic-host<font></font>
 host_name   minecraft <font></font>
 alias     minecraft  <font></font>
address    192.168.1.22<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这里的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generic-host</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font><font style="vertical-align: inherit;">是一个模板。</font><font style="vertical-align: inherit;">可以在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generic-host_nagios2.cfg文件夹中</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到它</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在设备上为监视会话创建安装时，可以使用模板来节省时间。</font><font style="vertical-align: inherit;">为此，您只需要根据给定的定义创建多个条目，然后更改要监视的设备的host_name（计算节点的名称），别名（附加名称）和地址（IP地址）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
按Ctrl-X保存更改并退出，然后重新启动Nagios：</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo service nagios3 reload</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果在配置过程中出现问题，则需要使用以下命令检查服务器是否有错误：</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo /usr/sbin/nagios3 -v / etc/nagios3/nagios.cfg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
她将检查配置文件的正确性。之后，别忘了重新启动Nagios。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，网络监视是通过浏览器完成的。标签可以无限期地打开。也可以通过VNC（远程计算机管理系统）在Raspberry Pi桌面上启动远程监视。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了终端之外，Nagios还通过Web浏览器进行配置。您只需要打开设置菜单和NEMS配置器，然后使用与手动安装和必要的通知相同的凭据添加节点描述。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用“报告”菜单部分监视Nagios。</font><font style="vertical-align: inherit;">该程序的外部部分可以分为两个版本：现代化的Adagios用户界面和几年前创建的Nagios Core界面。</font><font style="vertical-align: inherit;">两者都完全可以运行。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nagios的功能非常强大，因此值得花时间了解该程序的功能，添加设备，检查网络活动日志，启用可视化等。如果您使用NEMS，则可以通过浏览器界面轻松配置主机道路。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
就是这样-已安装Nagios的Raspberry Pi已准备好进行网络监视。</font><font style="vertical-align: inherit;">它会在后台运行，并在网络中设备连接和可疑活动出现任何问题时通知您。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490430/index.html">在绘图的路上</a></li>
<li><a href="../zh-CN490434/index.html">如何根据N + 1方案构建Tier IV数据中心</a></li>
<li><a href="../zh-CN490436/index.html">完全控制还是免费安排？公司流动性简介</a></li>
<li><a href="../zh-CN490438/index.html">维基百科尚不了解他们的工作</a></li>
<li><a href="../zh-CN490440/index.html">Tarantool：1C搜索加速的历史</a></li>
<li><a href="../zh-CN490450/index.html">从程序员的生活：不合理的方法</a></li>
<li><a href="../zh-CN490454/index.html">朱莉娅和细胞自动机</a></li>
<li><a href="../zh-CN490456/index.html">编写babel插件，演练</a></li>
<li><a href="../zh-CN490458/index.html">比较了Haskell和C ++，比较了jump和cmov</a></li>
<li><a href="../zh-CN490460/index.html">LED服装</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>