<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♑️ 💰 🤵🏼 "Marina apa?" atau kami mengontrol pengontrol via bluetooth menggunakan aplikasi seluler di Xamarin (Android) 🏂🏽 💴 🅾️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam artikel sebelumnya , saya berjanji untuk berbicara tentang cara menghubungkan CANNY 3 mungil menggunakan UART ke bluetooth. Dan karena Anda tida...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>"Marina apa?" atau kami mengontrol pengontrol via bluetooth menggunakan aplikasi seluler di Xamarin (Android)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500454/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebelumnya </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">,</font></a><font style="vertical-align: inherit;"> saya berjanji untuk berbicara tentang cara menghubungkan CANNY 3 mungil menggunakan UART ke bluetooth. </font><font style="vertical-align: inherit;">Dan karena Anda tidak benar-benar berjalan-jalan di liburan Mei ini, diputuskan untuk menghabiskan waktu dengan manfaat dan tetap menepati janji. </font><font style="vertical-align: inherit;">Tetapi hanya untuk menghubungkan controller ke adaptor Bluetooth HC-06, itu akan terlalu mudah untuk Habr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, kami tidak hanya akan menghubungkan semuanya, tetapi kami juga akan menulis aplikasi Android primitif untuk rangkaian kami menggunakan C # dan Xamarin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda suka memantau "limit switch" dan buluh switch, seperti yang saya suka, Anda dipersilakan di bawah kucing.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/2t/ai/a62taim0dwnonrmzzjhicax8q-g.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah yang akan kita bicarakan hari ini: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian I: Pendahuluan </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian II: Menghubungkan sirkuit dan program untuk CANNY 3 mungil </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian III: Kami menulis aplikasi di Xamarin untuk Android </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian IV: Kesimpulan</font></font></a><br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bagian I: Pendahuluan</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan mulai dengan yang bagus, kecuali untuk penyisipan kode program dalam C #, maka kali ini artikelnya akan relatif kecil, karena kami telah memeriksa teknik dasar bekerja dengan controller sebelumnya. </font><font style="vertical-align: inherit;">Agar tidak mengulangi sekali lagi, berikut adalah daftar artikel di mana kami telah memeriksa metode dasar bekerja dengan pengontrol CANNY:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Satu, dua, tiga - bakar pohon Natal!" </font><font style="vertical-align: inherit;">atau tampilan pertama saya di CANNY 3 controller kecil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dalam artikel ini kami menganalisis apa controller itu, serta dasar-dasar bekerja di lingkungan pengembangan CannyLab.</font></font><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Destinasi memiliki banyak kedok ..." atau kami mengotomatisasi kontrol lampu menggunakan CANNY 3 mungil dan photoresistor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dalam artikel ini kami melihat bekerja dengan USB Virtual COM-port, menghubungkan sensor ke ADC, serta PWM frekuensi tinggi pada output pengontrol.</font></font><br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">«  ...»         (CANNY  Arduino)  Raspberry PI</a> —        UART,     .<br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam mempersiapkan artikel ini, saya menggunakan perangkat keras berikut: CANNY 3 controller kecil, HC-06 bluetooth adapter, limit switch (trailer modul Trema), saklar buluh, headphone kabel tua, papan tempat memotong roti, kabel, buaya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan membangun sistem yang, menggunakan aplikasi seluler, memantau status dua sensor dan, jika perlu, dapat membunyikan alarm secara manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segala sesuatu yang akan disajikan dalam artikel ini diciptakan murni untuk tujuan pendidikan dan demonstrasi. Saya hanya ingin menunjukkan beberapa trik bekerja dengan controller, serta untuk potongan-potongan besi yang dibeli pada suatu waktu entah bagaimana caranya mengetahui nilainya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terlepas dari sifat masalah yang sedang dipecahkan, yang jauh dari kenyataan, kita akan membayangkan bahwa kita sedang membuat sistem pemantauan di balik pintu geser kompartemen. </font><font style="vertical-align: inherit;">Ketika mulai bergerak, saklar buluh akan bekerja, dan di ujung jalan itu akan memberi sinyal ke trailer. </font><font style="vertical-align: inherit;">Jika kita perlu menarik perhatian, misalnya, agar pintu tertutup kembali, kita akan memberikan sinyal "mencicit" melalui pengeras suara. </font><font style="vertical-align: inherit;">Benar, saya tidak punya speaker, tetapi ada headphone lama. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/wn/cn/jqwncnwbb_hvquu7qyfhlvhw10q.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baik dan, seperti biasa, sebuah catatan. </font><font style="vertical-align: inherit;">Saya sangat tidak merekomendasikan menggunakan materi dalam artikel ini sebagai kebenaran pamungkas. </font><font style="vertical-align: inherit;">Saya melakukan banyak hal untuk pertama kalinya, saya sendiri pasti bisa melakukannya dengan lebih baik.</font></font><br>
</i><br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian II: Menghubungkan sirkuit dan program untuk CANNY 3 mungil</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memulai, agar tidak menyinggung siapa pun dalam hak cipta, saya meminjam dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi saya sendiri mengadaptasinya untuk </font><font style="vertical-align: inherit;">ide menghubungkan controller ke HC-06, dengan mengendalikannya melalui aplikasi "Serial bluetooth terminal" dan beberapa trik ketika mengembangkan diagram. </font><font style="vertical-align: inherit;">tugas Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagram koneksi adalah sebagai berikut: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kt/lj/7c/ktlj7chkvqtuk-omahss0xxyxx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saklar batas dan sakelar buluh dihubungkan ke terminal pengontrol No. 6 dan No. 5, headphone ke terminal No. 4 (memiliki RF PWM), UART RX adalah terminal No. 1, UART TX adalah terminal No. 2, terminal No. 3 Ini digunakan untuk memasok "+ 5V", output "-" - untuk komunikasi dengan "ground". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Begini tampilannya dalam perakitan:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/57/hy/du/57hydukatcvw7-mihshfkaykr20.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mengembangkan diagram (program) untuk CANNY 3 tiny di CannyLab versi 1.42, mungkin di versi lain dari lingkungan pengembangan dan dengan pengontrol lain, akan perlu untuk membuat perubahan pada diagram. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah yang terjadi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l8/mb/yr/l8mbyr6rzisiqurje5vrboprrio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blok yang terkait dengan pengaturan controller dan mengirim pesan melalui UART dibongkar di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel sebelumnya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita periksa lebih detail dua yang tersisa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blok “ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima pesan UART</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ” </font><font style="vertical-align: inherit;">bertanggung jawab untuk menyalakan sirene (headphone). Pada prinsipnya, diperlukan untuk mem-parse contoh menerima pesan melalui UART.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, kami memeriksa apakah data yang diterima ada di UART, jika demikian, maka kami mengirim satu ke input pemicu D "E", dalam hal ini pemicu menyalin nilai dari input "D" di mana kami akan menulis dua karakter pertama dari pesan yang diterima melalui UART. Saya tidak ingin menyulitkan semuanya, jadi kami akan menggunakan skema sederhana lebih lanjut. Kami berasumsi bahwa angka 00 hingga 99 akan datang kepada kami oleh UART, kami akan menerjemahkan angka ini dari bentuk simbolis ke angka numerik (saya sarankan membaca cara </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kerja blok konverter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , saya punya sedikit "plug" dengan itu) Lebih lanjut, setiap nilai "&gt; 0" pada input detektor tepi utama menyebabkan sinyal tunggal, yang menyalakan output 5 selama 5 detik, beroperasi dalam mode RF PWM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat bermain dalam pengaturan dengan periode pengisian RF PWM, suara di headphone akan tergantung pada ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lanjutkan ke blok</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Pembentukan pesan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">"</font></b><font style="vertical-align: inherit;"> Penerapannya sekilas mungkin tampak tidak biasa. Ini dijelaskan oleh fakta bahwa saya tidak benar-benar mencari cara untuk bekerja dengan program terminal Serial bluetooth dan dengan protokol bluetooth yang sama di Xamarin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan berlari sedikit ke depan dan mengatakan bahwa saya belum belajar bagaimana menerima pesan yang dikirim dari pengontrol di ponsel cerdas saya. Jika semuanya jelas dengan kabel UART di artikel terakhir, maka dengan Bluetooth, dalam prakteknya, bukannya pesan yang dikirim, hanya bagiannya yang dapat dibaca dan makna dari perintah yang dikirimkan dilanggar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memutuskan bahwa solusi paling sederhana adalah mengirimkan satu nomor, yang dijamin untuk mencapai penerima tanpa kehilangan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus kami, kami memantau keadaan diskrit dari sakelar buluh dan sakelar batas. Artinya, kita hanya memiliki 4 kemungkinan kombinasi: saklar buluh dan saklar batas mati, hanya satu yang aktif, keduanya aktif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena saklar buluh dan saklar batas memberikan sinyal diskrit (0/1), Anda perlu membedakannya. Untuk melakukan ini, kita mengalikan nilai sinyal buluh dengan 2. Sekarang ternyata jumlah sinyal akan memberi kita nilai dari 0 hingga 3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita akan menganalisis opsi yang tidak jelas dengan lima puluh ditambahkan ke nilai ini. Faktanya adalah CannyLab mengirim beberapa karakter ke UART, yaitu bukannya 3, katakanlah 03, tetapi seperti yang saya katakan ada risiko kehilangan beberapa informasi. Misalnya, dari nilai 01, program pada ponsel cerdas hanya dapat membaca "0" pertama, dan ini sudah merupakan kesalahan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin akan membingungkan dan mengubah data, menggantikan, misalnya, karakter "D1" dari register dengan beberapa huruf atau spasi, tetapi saya memutuskan untuk membuatnya lebih mudah. Saya mengonversi nilai 01 menjadi 51 (02 hingga 52, dll.). Kelima tidak membawa sinyal dan saya hentikan itu di tingkat program untuk smartphone. Dengan demikian, kami selalu menjamin bahwa bagian pesan yang berguna tetap ada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memuat program ke controller, klik "run", jika semuanya berjalan sesuai rencana, maka HC-06 akan secara berkala mem-flash LED merah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami memasangkan smartphone dengan adaptor. Sekarang Anda dapat memeriksa kinerja di aplikasi "terminal Bluetooth Serial" atau yang lainnya dengan fungsi serupa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tuliskan alamat adaptor Bluetooth, itu akan berguna bagi kita di bab berikutnya.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7q/9_/cj/7q9_cjavutr8evwh-bzcjo7lu_o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang Anda lihat, datanya datang, tergantung pada keadaan sensor, dan jika Anda mengirim "11", maka suara mencicit terdengar di headphone. </font><font style="vertical-align: inherit;">Kita bisa berhenti di sini, tetapi mari kita buat sketsa aplikasi primitif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program untuk pengontrol dan kode sumber program untuk telepon pintar dapat diunduh dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub.</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Saya ingin mencatat bahwa Anda tidak harus mengimplementasikan semuanya dalam perangkat keras khususnya pada pengontrol CANNY, Anda dapat menulis sebuah program untuk Arduino atau pengontrol lain yang Anda suka. </font><font style="vertical-align: inherit;">Awalnya, saya sendiri juga berencana untuk menulis versi tambahan sketsa untuk Arduino, tetapi karena saya membunuh hampir semua liburan Mei, saya tidak lagi memiliki kekuatan untuk menghubungkan CANNY dan aplikasi smartphone.</font></font><br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian III: Menulis Aplikasi Android Xamarin </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tahu bahwa Xamarin, secara sederhana, bukanlah solusi yang paling populer untuk pengembangan ponsel. Dan mungkin Anda sudah memiliki pertanyaan: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Mengapa saya memilihnya?"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Saya ingin menjawabnya dengan kata-kata dari lagu dengan nama yang sama oleh Psoya Korolenko: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ky/lq/bd/kylqbdcllbxokagsfxfjtasavrg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jujur, tidak ada alasan obyektif. Hanya beberapa tahun yang lalu saya mempelajari dasar-dasar C # dan semua orang ingin melihat apa itu Xamarin. Dan sekarang, karena "isolasi diri", tangan akhirnya mencapai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baiklah, izinkan saya mengingatkan Anda lagi. Ini adalah pertama kalinya saya bertemu Xamarin dan ini adalah aplikasi Android pertama saya. Jangan menyalin kode kurva saya secara membabi buta, jika tiba-tiba Anda dapat menemukan solusi yang lebih indah, gunakan itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika mengembangkan program saya, saya mengandalkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">materi ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Artikel ini tidak terlalu dikunyah, dan bahkan dalam bahasa Spanyol, jadi saya masih merasa pantas untuk berbagi dengan Anda variasi saya tentang topik ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya membangun program dalam edisi komunitas Visual studio 2019. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama, buat proyek Android kosong baru (Xamarin), seperti pada gambar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/ic/hz/gwichz5ldmq0k8wgpoedzpnt41u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya membuat perubahan hanya dalam tiga file, semuanya dapat dilihat sepenuhnya di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan di sini kami hanya akan menganalisis bagian-bagian penting: </font><font style="vertical-align: inherit;">
Izin </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AndroidManifest.xml</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2 ditambahkan ke templat standar:</font></font><br>
<br>
<pre><code class="cs hljs">  &lt;uses-permission android:name=<span class="hljs-string">"android.permission.BLUETOOTH"</span>/&gt;<font></font>
  &lt;uses-permission android:name=<span class="hljs-string">"android.permission.BLUETOOTH_ADMIN"</span>/&gt;
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">activity_main.xml</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wadah default (RelativeLayout) telah dihapus. </font><font style="vertical-align: inherit;">Sebaliknya, wadah LinearLayout ditambahkan hanya karena lebih sederhana. </font><font style="vertical-align: inherit;">Dalam wadah ini, semua elemen disejajarkan secara vertikal, membentang di seluruh lebar layar.</font></font><br>
<br>
<pre><code class="cs hljs">&lt;LinearLayout<font></font>
    xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    android:orientation=<span class="hljs-string">"vertical"</span>
    android:minWidth=<span class="hljs-string">"25px"</span>
    android:minHeight=<span class="hljs-string">"25px"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>
    android:id=<span class="hljs-string">"@+id/linearLayout1"</span>&gt;<font></font>
    &lt;TextView<font></font>
        android:text=<span class="hljs-string">"Reed switch status - undefined"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:id=<span class="hljs-string">"@+id/rSwitch"</span>
        android:textSize=<span class="hljs-string">"12pt"</span> /&gt;<font></font>
    &lt;TextView<font></font>
        android:text=<span class="hljs-string">"End sensor status - undefined"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:id=<span class="hljs-string">"@+id/EndSensor"</span>
        android:textSize=<span class="hljs-string">"12pt"</span> /&gt;<font></font>
    &lt;Button<font></font>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:id=<span class="hljs-string">"@+id/startSiren"</span>
        android:text=<span class="hljs-string">"Send signal to siren"</span> /&gt;<font></font>
    &lt;Switch<font></font>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:id=<span class="hljs-string">"@+id/bltSwitch"</span>
        android:<span class="hljs-keyword">checked</span>=<span class="hljs-string">"false"</span>
        android:showText=<span class="hljs-string">"true"</span>
        android:text=<span class="hljs-string">"Connect bluetooth"</span> /&gt;<font></font>
    &lt;TextView<font></font>
        android:text=<span class="hljs-string">"status"</span>
        android:textAppearance=<span class="hljs-string">"?android:attr/textAppearanceSmall"</span>
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:id=<span class="hljs-string">"@+id/status"</span> /&gt;<font></font>
&lt;/LinearLayout&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siapa pun yang sedikit terbiasa dengan tata letak HTML atau XML dapat dengan mudah memahami struktur antarmuka pengguna. </font><font style="vertical-align: inherit;">Kami memiliki tiga bidang teks hanya baca (TextView), satu sakelar (Switch), yang pada dasarnya berfungsi seperti kotak centang dan satu tombol biasa (Tombol). </font><font style="vertical-align: inherit;">Elemen dapat ditempatkan pada formulir dengan menyeret dan menjatuhkan dari konstruktor, dan di jendela properti atau dalam kode untuk mengatur mereka Id lebih nyaman, bertopik teks dan parameter lainnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masih menjelaskan logika program. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MainActivity.cs</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Di bawah ini, di bawah spoiler, seluruh kode untuk kenyamanan</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode MainActivity.cs Lengkap</font></font></b>
                        <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-comment">// based on http://alejandroruizvarela.blogspot.com/2014/01/bluetooth-arduino-xamarinandroid.html</span>
<span class="hljs-comment">// for this article https://habr.com/ru/post/500454/</span><font></font>
<font></font>
<font></font>
<span class="hljs-comment">// based on http://alejandroruizvarela.blogspot.com/2014/01/bluetooth-arduino-xamarinandroid.html</span>
<span class="hljs-comment">// for this article https://habr.com/ru/post/500454/</span><font></font>
<font></font>
<font></font>
<span class="hljs-keyword">using</span> Android.App;
<span class="hljs-keyword">using</span> Android.OS;
<span class="hljs-keyword">using</span> Android.Support.V7.App;
<span class="hljs-keyword">using</span> Android.Runtime;
<span class="hljs-keyword">using</span> Android.Widget;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.IO;
<span class="hljs-keyword">using</span> Java.Util;
<span class="hljs-keyword">using</span> Android.Bluetooth;
<span class="hljs-keyword">using</span> System.Threading.Tasks;<font></font>
<font></font>
<span class="hljs-keyword">namespace</span> _6.<span class="hljs-title">Canny_Xanarin_Bluetooth_Android</span><font></font>
{<font></font>
    [<span class="hljs-meta">Activity(Label = <span class="hljs-meta-string">"Control Canny 3 tiny via bluetooth"</span>, Theme = <span class="hljs-meta-string">"@style/AppTheme"</span>, MainLauncher = true)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> : <span class="hljs-title">AppCompatActivity</span><font></font>
    {<font></font>
<font></font>
        Button startSiren;<font></font>
        TextView rSwitch;<font></font>
        TextView EndSensor;<font></font>
        Switch bltSwitch;<font></font>
        TextView status;<font></font>
        <span class="hljs-keyword">private</span> Java.Lang.String dataToSend;
        <span class="hljs-keyword">private</span> BluetoothAdapter mBluetoothAdapter = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">private</span> BluetoothSocket btSocket = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">private</span> Stream outStream = <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// don't forget change addres to your device:</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> address = <span class="hljs-string">"98:D3:91:F9:6C:F6"</span>;
        <span class="hljs-comment">// MY_UUID can be saved as is</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> UUID MY_UUID = UUID.FromString(<span class="hljs-string">"00001101-0000-1000-8000-00805F9B34FB"</span>);
        <span class="hljs-keyword">private</span> Stream inStream = <span class="hljs-literal">null</span>;<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCreate</span>(<span class="hljs-params">Bundle savedInstanceState</span>)</span><font></font>
        {<font></font>
<font></font>
            <span class="hljs-keyword">base</span>.OnCreate(savedInstanceState);<font></font>
            Xamarin.Essentials.Platform.Init(<span class="hljs-keyword">this</span>, savedInstanceState);
            <span class="hljs-comment">// Set our view from the "main" layout resource</span><font></font>
            SetContentView(Resource.Layout.activity_main);<font></font>
<font></font>
            startSiren = FindViewById&lt;Button&gt;(Resource.Id.startSiren);<font></font>
            rSwitch = FindViewById&lt;TextView&gt;(Resource.Id.rSwitch);<font></font>
            EndSensor = FindViewById&lt;TextView&gt;(Resource.Id.EndSensor);<font></font>
            status = FindViewById&lt;TextView&gt;(Resource.Id.status);<font></font>
            bltSwitch = FindViewById&lt;Switch&gt;(Resource.Id.bltSwitch);<font></font>
<font></font>
<font></font>
            startSiren.Click += startSiren_ClickOnButtonClicked;<font></font>
            bltSwitch.CheckedChange += bltSwitch_HandleCheckedChange;<font></font>
            CheckBt();<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CheckBt</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            mBluetoothAdapter = BluetoothAdapter.DefaultAdapter;<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (!mBluetoothAdapter.Enable())<font></font>
            {<font></font>
                Toast.MakeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Bluetooth Off"</span>,<font></font>
                    ToastLength.Short).Show();<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (mBluetoothAdapter == <span class="hljs-literal">null</span>)<font></font>
            {<font></font>
                Toast.MakeText(<span class="hljs-keyword">this</span>,
                    <span class="hljs-string">"Bluetooth does not exist or is busy"</span>, ToastLength.Short)<font></font>
                    .Show();<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">startSiren_ClickOnButtonClicked</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> sender, EventArgs e</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (bltSwitch.Checked)<font></font>
            {<font></font>
                <span class="hljs-keyword">try</span><font></font>
                {<font></font>
                    dataToSend = <span class="hljs-keyword">new</span> Java.Lang.String(<span class="hljs-string">"11"</span>);<font></font>
                    writeData(dataToSend);<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Send signal to siren"</span>);<font></font>
                }<font></font>
                <span class="hljs-keyword">catch</span> (System.Exception execept)<font></font>
                {<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Error when send data"</span> + execept.Message);<font></font>
                }<font></font>
<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span> status.Text = <span class="hljs-string">"bluetooth not connected"</span>;<font></font>
        }<font></font>
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bltSwitch_HandleCheckedChange</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> sender, CompoundButton.CheckedChangeEventArgs e</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (e.IsChecked)<font></font>
            {<font></font>
                Connect();<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span><font></font>
            {<font></font>
                status.Text = <span class="hljs-string">"bluetooth not connected"</span>;
                <span class="hljs-keyword">if</span> (btSocket.IsConnected)<font></font>
                {<font></font>
                    <span class="hljs-keyword">try</span><font></font>
                    {<font></font>
                        btSocket.Close();<font></font>
                        System.Console.WriteLine(<span class="hljs-string">"Connection closed"</span>);<font></font>
                    }<font></font>
                    <span class="hljs-keyword">catch</span> (System.Exception ex)<font></font>
                    {<font></font>
                        Console.WriteLine(ex.Message);<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            BluetoothDevice device = mBluetoothAdapter.GetRemoteDevice(address);<font></font>
            System.Console.WriteLine(<span class="hljs-string">"Connection in progress"</span> + device);<font></font>
            mBluetoothAdapter.CancelDiscovery();<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                btSocket = device.CreateRfcommSocketToServiceRecord(MY_UUID);<font></font>
                btSocket.Connect();<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Correct Connection"</span>);<font></font>
                status.Text = <span class="hljs-string">"Correct Connection to bluetooth"</span>;<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.Exception e)<font></font>
            {<font></font>
                Console.WriteLine(e.Message);<font></font>
                <span class="hljs-keyword">try</span><font></font>
                {<font></font>
                    btSocket.Close();<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Connection closed"</span>);<font></font>
                }<font></font>
                <span class="hljs-keyword">catch</span> (System.Exception)<font></font>
                {<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Impossible to connect"</span>);<font></font>
                    status.Text = <span class="hljs-string">"Impossible to connect"</span>;<font></font>
                }<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Socket Created"</span>);<font></font>
  <font></font>
            }<font></font>
            beginListenForData();<font></font>
<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">beginListenForData</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                inStream = btSocket.InputStream;<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.IO.IOException ex)<font></font>
            {<font></font>
                Console.WriteLine(ex.Message);<font></font>
            }<font></font>
            Task.Factory.StartNew(() =&gt; {<font></font>
                <span class="hljs-keyword">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];
                <span class="hljs-keyword">int</span> bytes;<font></font>
                <font></font>
                <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<font></font>
                {<font></font>
<font></font>
                    <span class="hljs-keyword">try</span><font></font>
                    {<font></font>
                        bytes = inStream.Read(buffer, <span class="hljs-number">0</span>, <span class="hljs-number">1024</span>);<font></font>
                        System.Console.WriteLine(<span class="hljs-string">"bytes "</span> + bytes.ToString());
                        <span class="hljs-keyword">if</span> (bytes &gt; <span class="hljs-number">0</span>)<font></font>
                        {<font></font>
                            <font></font>
                            RunOnUiThread(() =&gt; {<font></font>
                                <span class="hljs-keyword">string</span> valor = System.Text.Encoding.ASCII.GetString(buffer).Replace(<span class="hljs-string">"5"</span>,String.Empty);
                                <span class="hljs-comment">// transform string for deleate all symbols except 1-4(command from canny).</span>
                                <span class="hljs-keyword">string</span> command = <span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>(valor.Where(<span class="hljs-keyword">char</span>.IsDigit).ToArray());<font></font>
<font></font>
                                <span class="hljs-keyword">if</span> (command.Length &gt; <span class="hljs-number">0</span>)<font></font>
                                {<font></font>
                                     status.Text=<span class="hljs-string">"data successfully readed"</span>;<font></font>
                                    System.Console.WriteLine(<span class="hljs-string">"command  "</span> + command);
                                    <span class="hljs-keyword">switch</span> (Int32.Parse(command))<font></font>
                                    {<font></font>
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - disconnected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - not pressed "</span>;
                                            <span class="hljs-keyword">break</span>;
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - disconnected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - pressed "</span>;
                                            <span class="hljs-keyword">break</span>;
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - connected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - not pressed "</span>;
                                            <span class="hljs-keyword">break</span>;
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - connected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - pressed "</span>;
                                        <span class="hljs-keyword">break</span>;<font></font>
                                    }<font></font>
                                }<font></font>
                            });<font></font>
                        }<font></font>
                    }<font></font>
                    <span class="hljs-keyword">catch</span> (Java.IO.IOException)<font></font>
                    {<font></font>
                        RunOnUiThread(() =&gt; {<font></font>
                            EndSensor.Text = <span class="hljs-string">"End sensor status - undefined"</span>;<font></font>
                            rSwitch.Text = <span class="hljs-string">"Reed switch status - undefined "</span>;<font></font>
                        });<font></font>
                        <span class="hljs-keyword">break</span>;<font></font>
                    }<font></font>
                }<font></font>
            });<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeData</span>(<span class="hljs-params">Java.Lang.String data</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                outStream = btSocket.OutputStream;<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.Exception e)<font></font>
            {<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Error with OutputStream when write to Serial port"</span> + e.Message);<font></font>
            }<font></font>
<font></font>
            Java.Lang.String message = data;<font></font>
<font></font>
            <span class="hljs-keyword">byte</span>[] msgBuffer = message.GetBytes();<font></font>
<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                outStream.Write(msgBuffer, <span class="hljs-number">0</span>, msgBuffer.Length);<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Message sent"</span>);<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.Exception e)<font></font>
            {<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Error with  when write message to Serial port"</span> + e.Message);<font></font>
                status.Text = <span class="hljs-string">"Error with  when write message to Serial port"</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnRequestPermissionsResult</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> requestCode, <span class="hljs-keyword">string</span>[] permissions, [GeneratedEnum] Android.Content.PM.Permission[] grantResults</span>)</span><font></font>
        {<font></font>
            Xamarin.Essentials.Platform.OnRequestPermissionsResult(requestCode, permissions, grantResults);<font></font>
<font></font>
            <span class="hljs-keyword">base</span>.OnRequestPermissionsResult(requestCode, permissions, grantResults);<font></font>
        }<font></font>
    }<font></font>
 }<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang di beberapa bagian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blok dengan koneksi ruang nama, deklarasi kelas, dll. </font><font style="vertical-align: inherit;">Aku akan merindukan. </font></font><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membuat variabel yang nantinya akan kami ikat dengan elemen antarmuka pengguna:</font></font><br>
<br>
<pre><code class="cs hljs">   Button startSiren;<font></font>
   TextView rSwitch;<font></font>
   TextView EndSensor;<font></font>
   Switch bltSwitch;<font></font>
   TextView status;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikutnya adalah kode dari contoh yang saya andalkan. </font><font style="vertical-align: inherit;">Variabel (bidang) yang diperlukan untuk pengoperasian metode tertentu.</font></font><br>
<br>
<pre><code class="cs hljs">  <span class="hljs-keyword">private</span> Java.Lang.String dataToSend;
        <span class="hljs-keyword">private</span> BluetoothAdapter mBluetoothAdapter = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">private</span> BluetoothSocket btSocket = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">private</span> Stream outStream = <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// don't forget change addres to your device:</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> address = <span class="hljs-string">"98:D3:91:F9:6C:F6"</span>;
        <span class="hljs-comment">// MY_UUID can be saved as is</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> UUID MY_UUID = UUID.FromString(<span class="hljs-string">"00001101-0000-1000-8000-00805F9B34FB"</span>);
        <span class="hljs-keyword">private</span> Stream inStream = <span class="hljs-literal">null</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penting bagi kami di sini untuk mengarahkan alamat modul HC-06 Anda ke bidang alamat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena ini adalah pengalaman pengembangan pertama saya untuk ponsel cerdas, termasuk bekerja dengan Xamarin, saya memutuskan untuk tidak mempersulit apa pun, sehingga alamat perangkat, seperti dalam contoh asli, diperbaiki. </font><font style="vertical-align: inherit;">Jika mau, Anda bisa melihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sepertinya sudah ada enumerasi perangkat Bluetooth yang tersedia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berpindah.</font></font><br>
<br>
<pre><code class="cs hljs">
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCreate</span>(<span class="hljs-params">Bundle savedInstanceState</span>)</span><font></font>
        {<font></font>
<font></font>
            <span class="hljs-keyword">base</span>.OnCreate(savedInstanceState);<font></font>
            Xamarin.Essentials.Platform.Init(<span class="hljs-keyword">this</span>, savedInstanceState);
            <span class="hljs-comment">// Set our view from the "main" layout resource</span><font></font>
            SetContentView(Resource.Layout.activity_main);<font></font>
<font></font>
            startSiren = FindViewById&lt;Button&gt;(Resource.Id.startSiren);<font></font>
            rSwitch = FindViewById&lt;TextView&gt;(Resource.Id.rSwitch);<font></font>
            EndSensor = FindViewById&lt;TextView&gt;(Resource.Id.EndSensor);<font></font>
            status = FindViewById&lt;TextView&gt;(Resource.Id.status);<font></font>
            bltSwitch = FindViewById&lt;Switch&gt;(Resource.Id.bltSwitch);<font></font>
<font></font>
<font></font>
            startSiren.Click += startSiren_ClickOnButtonClicked;<font></font>
            bltSwitch.CheckedChange += bltSwitch_HandleCheckedChange;<font></font>
            CheckBt();<font></font>
        }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode ini dibuat secara otomatis, tugas kami adalah untuk mengaitkan objek UI di dalamnya dengan bidang kelas, dan juga melampirkan penangan untuk reaksi terhadap peristiwa ( </font></font><code>startSiren.Click  bltSwitch.CheckedChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memeriksa koneksi melalui Bluetooth:</font></font><br>
<br>
<pre><code class="cs hljs">
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CheckBt</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            mBluetoothAdapter = BluetoothAdapter.DefaultAdapter;<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (!mBluetoothAdapter.Enable())<font></font>
            {<font></font>
                Toast.MakeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"Bluetooth Off"</span>,<font></font>
                    ToastLength.Short).Show();<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (mBluetoothAdapter == <span class="hljs-literal">null</span>)<font></font>
            {<font></font>
                Toast.MakeText(<span class="hljs-keyword">this</span>,
                    <span class="hljs-string">"Bluetooth does not exist or is busy"</span>, ToastLength.Short)<font></font>
                    .Show();<font></font>
            }<font></font>
        }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nyalakan sirene. </font><font style="vertical-align: inherit;">Intinya hanya mengirim karakter "11" ke controller:</font></font><br>
<br>
<pre><code class="cs hljs">
   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">startSiren_ClickOnButtonClicked</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> sender, EventArgs e</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (bltSwitch.Checked)<font></font>
            {<font></font>
                <span class="hljs-keyword">try</span><font></font>
                {<font></font>
                    dataToSend = <span class="hljs-keyword">new</span> Java.Lang.String(<span class="hljs-string">"11"</span>);<font></font>
                    writeData(dataToSend);<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Send signal to siren"</span>);<font></font>
                }<font></font>
                <span class="hljs-keyword">catch</span> (System.Exception execept)<font></font>
                {<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Error when send data"</span> + execept.Message);<font></font>
                }<font></font>
<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span> status.Text = <span class="hljs-string">"bluetooth not connected"</span>;<font></font>
        }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memeriksa status sakelar (jika digeser ke kanan, artinya sakelar dihidupkan): </font></font><br>
<br>
<pre><code class="cs hljs">   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bltSwitch_HandleCheckedChange</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> sender, CompoundButton.CheckedChangeEventArgs e</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (e.IsChecked)<font></font>
            {<font></font>
                Connect();<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span><font></font>
            {<font></font>
                <span class="hljs-keyword">if</span> (btSocket.IsConnected)<font></font>
                {<font></font>
                    <span class="hljs-keyword">try</span><font></font>
                    {<font></font>
                        btSocket.Close();<font></font>
                        System.Console.WriteLine(<span class="hljs-string">"Connection closed"</span>);<font></font>
                    }<font></font>
                    <span class="hljs-keyword">catch</span> (System.Exception ex)<font></font>
                    {<font></font>
                        Console.WriteLine(ex.Message);<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika Anda menghidupkan, kami memulai koneksi dengan Bluetooth. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementasi koneksi itu sendiri:</font></font><br>
<br>
<pre><code class="cs hljs">   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Connect</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            BluetoothDevice device = mBluetoothAdapter.GetRemoteDevice(address);<font></font>
            System.Console.WriteLine(<span class="hljs-string">"Connection in progress"</span> + device);<font></font>
            mBluetoothAdapter.CancelDiscovery();<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                btSocket = device.CreateRfcommSocketToServiceRecord(MY_UUID);<font></font>
                btSocket.Connect();<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Correct Connection"</span>);<font></font>
                status.Text = <span class="hljs-string">"Correct Connection to bluetooth"</span>;<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.Exception e)<font></font>
            {<font></font>
                Console.WriteLine(e.Message);<font></font>
                <span class="hljs-keyword">try</span><font></font>
                {<font></font>
                    btSocket.Close();<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Connection closed"</span>);<font></font>
                }<font></font>
                <span class="hljs-keyword">catch</span> (System.Exception)<font></font>
                {<font></font>
                    System.Console.WriteLine(<span class="hljs-string">"Impossible to connect"</span>);<font></font>
                    status.Text = <span class="hljs-string">"Impossible to connect"</span>;<font></font>
                }<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Socket Created"</span>);<font></font>
  <font></font>
            }<font></font>
            beginListenForData();<font></font>
<font></font>
        }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan inilah salah satu metode paling penting - membaca data secara langsung:</font></font><br>
<br>
<pre><code class="cs hljs">
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">beginListenForData</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                inStream = btSocket.InputStream;<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.IO.IOException ex)<font></font>
            {<font></font>
                Console.WriteLine(ex.Message);<font></font>
            }<font></font>
            Task.Factory.StartNew(() =&gt; {<font></font>
                <span class="hljs-keyword">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];
                <span class="hljs-keyword">int</span> bytes;<font></font>
                <font></font>
                <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<font></font>
                {<font></font>
<font></font>
                    <span class="hljs-keyword">try</span><font></font>
                    {<font></font>
                        bytes = inStream.Read(buffer, <span class="hljs-number">0</span>, <span class="hljs-number">1024</span>);<font></font>
                        System.Console.WriteLine(<span class="hljs-string">"bytes "</span> + bytes.ToString());
                        <span class="hljs-keyword">if</span> (bytes &gt; <span class="hljs-number">0</span>)<font></font>
                        {<font></font>
                            <font></font>
                            RunOnUiThread(() =&gt; {<font></font>
                                <span class="hljs-keyword">string</span> valor = System.Text.Encoding.ASCII.GetString(buffer).Replace(<span class="hljs-string">"5"</span>,String.Empty);
                                <span class="hljs-comment">// transform string for deleate all symbols except 1-4(command from canny).</span>
                                <span class="hljs-keyword">string</span> command = <span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>(valor.Where(<span class="hljs-keyword">char</span>.IsDigit).ToArray());<font></font>
<font></font>
                                <span class="hljs-keyword">if</span> (command.Length &gt; <span class="hljs-number">0</span>)<font></font>
                                {<font></font>
                                     status.Text=<span class="hljs-string">"data successfully readed"</span>;<font></font>
                                    System.Console.WriteLine(<span class="hljs-string">"command  "</span> + command);
                                    <span class="hljs-keyword">switch</span> (Int32.Parse(command))<font></font>
                                    {<font></font>
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - disconnected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - not pressed "</span>;
                                            <span class="hljs-keyword">break</span>;
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - disconnected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - pressed "</span>;
                                            <span class="hljs-keyword">break</span>;
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - connected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - not pressed "</span>;
                                            <span class="hljs-keyword">break</span>;
                                        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
                                            rSwitch.Text = <span class="hljs-string">"reed switch - connected "</span>;<font></font>
                                            EndSensor.Text = <span class="hljs-string">"end sensor - pressed "</span>;
                                        <span class="hljs-keyword">break</span>;<font></font>
                                    }<font></font>
                                }<font></font>
                            });<font></font>
                        }<font></font>
                    }<font></font>
                    <span class="hljs-keyword">catch</span> (Java.IO.IOException)<font></font>
                    {<font></font>
                        RunOnUiThread(() =&gt; {<font></font>
                            EndSensor.Text = <span class="hljs-string">"End sensor status - undefined"</span>;<font></font>
                            rSwitch.Text = <span class="hljs-string">"Reed switch status - undefined "</span>;<font></font>
                        });<font></font>
                        <span class="hljs-keyword">break</span>;<font></font>
                    }<font></font>
                }<font></font>
            });<font></font>
        }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya meninggalkan banyak elemen metode seperti pada contoh, seperti yang saya pahami, pada awalnya koneksi ke aliran data dibuat, jika ada sesuatu di buffer dengan data yang dibaca, maka itu dibaca menjadi variabel </font></font><code>valor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Selain itu, seperti yang saya janjikan, kami cukup menghapus angka "5". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami menghapus semua karakter kecuali angka-angka dari pesan baca. </font></font><code>string command = new string(valor.Where(char.IsDigit).ToArray());</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, setelah itu semuanya sederhana, tergantung pada nomor apa yang datang kepada kami, kami menampilkan status ini atau itu di UI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak secara mendasar mengubah dua metode ini:</font></font><br>
<br>
<pre><code class="cs hljs">  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeData</span>(<span class="hljs-params">Java.Lang.String data</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                outStream = btSocket.OutputStream;<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.Exception e)<font></font>
            {<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Error with OutputStream when write to Serial port"</span> + e.Message);<font></font>
            }<font></font>
<font></font>
            Java.Lang.String message = data;<font></font>
<font></font>
            <span class="hljs-keyword">byte</span>[] msgBuffer = message.GetBytes();<font></font>
<font></font>
            <span class="hljs-keyword">try</span><font></font>
            {<font></font>
                outStream.Write(msgBuffer, <span class="hljs-number">0</span>, msgBuffer.Length);<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Message sent"</span>);<font></font>
            }<font></font>
            <span class="hljs-keyword">catch</span> (System.Exception e)<font></font>
            {<font></font>
                System.Console.WriteLine(<span class="hljs-string">"Error with  when write message to Serial port"</span> + e.Message);<font></font>
                status.Text = <span class="hljs-string">"Error with  when write message to Serial port"</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnRequestPermissionsResult</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> requestCode, <span class="hljs-keyword">string</span>[] permissions, [GeneratedEnum] Android.Content.PM.Permission[] grantResults</span>)</span><font></font>
        {<font></font>
            Xamarin.Essentials.Platform.OnRequestPermissionsResult(requestCode, permissions, grantResults);<font></font>
<font></font>
            <span class="hljs-keyword">base</span>.OnRequestPermissionsResult(requestCode, permissions, grantResults);<font></font>
        }<font></font>
    }<font></font>
 }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang saya pahami, blok kode ini mengimplementasikan pengiriman pesan dan pengendali event untuk meningkatkan izin untuk mengakses Bluetooth. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, hanya itu yang tersisa untuk mengatur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koneksi ponsel cerdas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug aplikasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cukup aneh, tetapi berhasil:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/vs/5z/jmvs5zdesg9lvfprcdbp5-cebes.png"><br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bagian IV: Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah cara program bekerja dengan baik: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/4r/kv/8b4rkvzlvtcl-nnqh-fb1dm8cey.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu adalah pengalaman pertama saya dalam mengembangkan aplikasi untuk smartphone di Android. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya ingin mencatat bahwa VS 2019 dan Xamarin pada komputer lama saya bekerja sangat lambat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada pertemuan pertama proyek, saya benar-benar berhasil makan roti Prancis lembut ini dan minum teh. Juga, aplikasi itu sendiri ternyata terus terang menyedihkan, tombol on / off tidak bekerja dengan sangat mudah, tetapi di sisi lain, mengingat bahwa saya hanya sedikit akrab dengan teknik pengembangan dasar untuk .NET, dan bahwa saya bukan seorang programmer sama sekali, saya bahkan bisa tanpa melalui satu tutorial atau satu pelajaran, garis besar aplikasi pertama Anda dalam sehari. Oleh karena itu, ambang entri untuk membuat aplikasi dasar cukup rendah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang saya pahami, pengontrol CANNY dapat digunakan ketika menyetel mobil, terutama yang domestik, sehingga sangat mungkin untuk membuat semacam "fitur" dan menulis aplikasi untuk smartphone. </font><font style="vertical-align: inherit;">Hal utama yang perlu diingat adalah bahwa ketika digerakkan dari jaringan on-board kendaraan, output pengontrol juga akan memiliki tegangan yang sama dengan input (misalnya, 12 V, bukannya 5 V). </font><font style="vertical-align: inherit;">Jangan lupa untuk melindungi adaptor Bluetooth agar tidak gagal secara tidak sengaja. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel itu ternyata sangat melelahkan bagi saya, saya harap semuanya tidak sia-sia dan Anda akan menyukainya.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id500444/index.html">9 Keterampilan pemrograman Python yang membedakan pemula dari yang berpengalaman</a></li>
<li><a href="../id500446/index.html">Beberapa kata tentang R2DBC dan PostgreSQL</a></li>
<li><a href="../id500448/index.html">Prometheus: Pemantauan HTTP melalui eksportir Blackbox</a></li>
<li><a href="../id500450/index.html">Membuat keyboard MIDI dari synthesizer anak-anak tua</a></li>
<li><a href="../id500452/index.html">Alasan Tinggi dalam Pembelajaran Mendalam</a></li>
<li><a href="../id500456/index.html">BpfTrace - akhirnya, pengganti lengkap untuk Dtrace di Linux</a></li>
<li><a href="../id500458/index.html">Fitur Teknis Ucapan Online: Paket Pemula</a></li>
<li><a href="../id500462/index.html">Mendeteksi perubahan adegan dan menyimpan klip video h264 ke Raspberry Pi tanpa decoding</a></li>
<li><a href="../id500468/index.html">Panduan Fitur Java 8-14</a></li>
<li><a href="../id500470/index.html">Mengadaptasi solusi bisnis Anda yang sudah ada untuk SwiftUI. Bagian 3. Bekerja dengan arsitektur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>