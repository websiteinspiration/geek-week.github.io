<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò†Ô∏è ü¶á üß¶ "Like the apple of an eye ..." or make a simple security system based on a microcontroller (Canny or Arduino) and Raspberry PI üöµüèø üôåüèø üà∑Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During the preparation of the article about the recognition of microcontrollers using TensorFlow and OpenCV, Craftduino, Canny 3 tiny and Raspberry PI...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>"Like the apple of an eye ..." or make a simple security system based on a microcontroller (Canny or Arduino) and Raspberry PI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497324/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">During the preparation of the article about the recognition of microcontrollers using TensorFlow and OpenCV, Craftduino, Canny 3 tiny and Raspberry PI caught my eye at the same time, after which I decided it would be great to combine them again in one article. I thought for a long time about what to write about, and then I am ashamed to admit, I remembered that I was a healthy uncle, and I had never connected anything via UART yet. ‚ÄúEverything needs to be tried in life,‚Äù I thought. But writing only about connecting to UART is boring, so all sorts of ‚Äútoys‚Äù were immediately ordered, among which were the brand new Arduino, and a couple of sensors.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, today we will make a security system for my favorite pen. Are you surprised why a pen? The secret is simple, I‚Äôm very inexperienced in all kinds of electronics matters, and therefore, when I ordered the pressure sensor, I thought that it would work over the entire area, but it turned out that it works only for a specific contact area. Oddly enough, but in the whole house there was nothing weighty enough, stable and suitable in size, except for this pen. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, except for my finger, but I was not ready to experiment with it</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the article, I will share my experience of connecting a pressure sensor and a Doppler motion sensor to microcontrollers. We will connect the controllers via the wired UART interface to the GPIO Raspberry PI 3. Then we will write a simple program to Python to display the status of the security system, and at the end we will connect the smartphone to the raspberry using VNC to monitor the security system at a distance from the computer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Want to leave Indiana Jones out of work? Then you are welcome under cat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bi/nx/ru/binxrusi0n6mkswqbzmfsvt3lnq.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As always, at the beginning, I will explain that I myself am new to DIY electronics issues and am slowly learning from article to article. </font><font style="vertical-align: inherit;">Therefore, do not perceive what I will write as the ultimate truth. </font><font style="vertical-align: inherit;">Surely everything can be done better. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here's what we'll talk about today: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part I: Introduction </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part II: Connecting the circuit and program for Canny 3 tiny </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part III: Connecting the circuit and program for Arduino Uno </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part IV: Raspberry PI and the monitoring program in Python </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part V: Conclusion</font></font></a><br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part I: Introduction</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An attentive reader may ask, ‚ÄúWhy did you buy Arduino if you mentioned CraftDuino before?‚Äù, Everything is very commonplace. </font><font style="vertical-align: inherit;">CraftDuino broke again. </font><font style="vertical-align: inherit;">Once</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I repaired it, and now it‚Äôs "self-isolation", and I didn‚Äôt want to disturb a person for nothing. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we smoothly approached the material base. </font><font style="vertical-align: inherit;">For this article, I used:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pressure Resistor FSR402:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1n/1e/ac/1n1eacbwx7ut25yotoswobz9u9a.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Doppler motion sensor RCWL-0516:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ao/-a/cd/ao-acdxaqtajtd0ed1hlqrqetqk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the store where I bought both sensors in the description on the site it was written that they were for Arduino, but in practice it turned out that no special libraries were needed and everything started without problems on Canny.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Microcontroller Arduino Uno:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/va/om/wx/vaomwxb6dsmmidh9bgg9qtpprnu.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Canny 3 Tiny microcontroller - version with terminal block and cable harness:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/be/70/bzbe70wksqorza7989bkeidhhm8.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Raspberry PI 3 Model B Single Board Computer:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xr/ig/xt/xrigxt2ft6fnwzmcg1bh5gu6drg.png"></div> </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Other: Breboard breadboards, crocodile wires and clips, Raspberry power adapter </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's get down to business.</font></font><br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part II: Connecting the circuit and program for Canny 3 tiny</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many examples on the Internet how to connect Arduino via UART, there are much fewer examples about Canny, so let's start with it. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order not to inflate the length of the article and not repeat myself, I remind you that I considered the most basic issues of how to work with Canny and the CannyLab development environment </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in this article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and an example of connecting sensors to an analog-to-digital converter (ADC) and transmitting a message via Virtual COM port, I made out </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in this article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For those who do not read this, but immediately try to connect the sensors to the ADC, there is an important point. Do not repeat my mistake, in order for the outputs of the controller No. 5 and No. 6 to work in the ADC mode, jumpers must be set, as in the picture below. It‚Äôs not difficult, even I did it.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/o3/eu/68/o3eu68jhpsacuwweo5rmddzkfag.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And another important point at the controller outputs will be the supply voltage, that is, if you connect from an external power source instead of USB, make sure that the output voltage does not exceed the allowable voltage for sensors and UART. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For this article, one jumper would have been enough for us, but if we got a soldering iron, why should we waste time on trifles?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pay attention to the terminal block, the native cable harness comes standard for this version of the controller, it is tough and probably convenient if used inside the car, but not for experiments at the table. I came up with the know-how, replaced the native harness with harnesses that are often bundled with computer equipment, well, or sold in stores selling DIY electronics and it turned out to be very convenient. They do not sit badly in the block, soft and at the same time give additional lengthening. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's move on to the connection diagram:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l-/w6/d_/l-w6d_fdkhl4hw2gqeuudmippqq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything is quite simple and does not require any special skills, I think almost anyone can handle it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, let's deal with the power of the board. We will take the ‚Äúground‚Äù from the ‚Äú-‚Äù output of the controller, but with the plus, everything is not so clear. At first glance, it seems logical to connect to the ‚Äú+‚Äù terminal, but in practice it is apparently a terminal for + 5V INPUT. Therefore, instead of it, we will configure one of the outputs as a + 5V output, supplying a logical unit to it and pulling it to the ‚Äúplus‚Äù. I decided to take exit number 3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The pressure sensor is connected very simply. In fact, this is a resistor. We bring power to one of its ‚Äúlegs‚Äù, and from the second ‚Äúlegs‚Äù we wind the wire to the controller input connected to the ADC (either No. 5 or No. 6). I chose No. 6.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, I lost the pressure sensor twice. My second mistake was connecting the sensor. It does not fit into the breadboard, it turns out that it must be connected to a screw terminal block or something similar. I had to get out with the "crocodiles". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The motion sensor is not connected much more complicated, we put + 5V from the board into the Vin jack, connect it to the GND jack on the breadboard, and connect the OUT jack to any digital input of the controller, I connected it to output No. 5 (we we will not switch it to ADC mode). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It remains to connect the controller to the "Raspberry" through UART. To do this, controller output No. 2, which in our UART mode becomes the TX output, must be connected to the Raspberry GPIO RX input, and the ground on the board and the Raspberry PI GPIO GND must also be connected.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many people advise coordinating the voltage level to 3.3 V, and I even tried to connect Canny through a voltage divider, but it works worse with it than without it (or doesn't work at all), so in this case I connected directly to the Raspberry UART. </font><font style="vertical-align: inherit;">It seems that nothing burned out. </font><font style="vertical-align: inherit;">Everything is working.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tn/9g/jd/tn9gjdkty542gzjkh5gjvg1l8_8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhaps you had the thought: ‚ÄúWhy is it connected‚Äù with wires to the UART, when possible via Bluetooth? ‚Äù </font><font style="vertical-align: inherit;">Indeed, there are many examples of connecting Arduino through the UART to the HC-06 module on the network. </font><font style="vertical-align: inherit;">If you believe the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then Canny also connects to it without problems. </font><font style="vertical-align: inherit;">But I have not tried it myself. </font><font style="vertical-align: inherit;">I wanted to connect using wires, and I decided to postpone the Bluetooth connection until next time. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here's what the circuit looks like:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ao/rn/tg/aorntgjqegbbdoydxfiwo1scijg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's move on to the program for the controller (diagram):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9g/fu/yt/9gfuytcpdiwhzqza7wpjbh_eyyo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Parameter Setting"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> block </font><font style="vertical-align: inherit;">, we turn on the ADC mode for channel (input) No. 6, transfer channel No. 3 to discrete output mode and feed in a logical unit (+ 5V in our case), almost everything was analyzed </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in this article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Only UART settings are unfamiliar to us. </font><font style="vertical-align: inherit;">Fortunately, everything is simple. </font><font style="vertical-align: inherit;">Canny 3 tiny has only 1 UART interface (for example, Canny 7 has two of them). </font><font style="vertical-align: inherit;">When the UART mode is activated, output No. 1 becomes RX, output No. 2 TX. </font><font style="vertical-align: inherit;">We will choose the usual 9600 baud rate, but the data transfer mode is limited. </font><font style="vertical-align: inherit;">The available number of data bits is only 8 bytes and 1 stop bit (for ‚Äúolder‚Äù controller models there is more choice). In order to enable UART, it is necessary to </font><b><font style="vertical-align: inherit;">enter the UART1 config register</font></b><font style="vertical-align: inherit;"> in the corresponding register</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> write a predefined constant:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/qg/18/ccqg18wcifd7jnqqr6rqsgijl28.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, in our case it was possible to choose a constant that included only the UART transmission mode, because we do not plan to take anything back. But I decided to show a more general example. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you selected the correct controller when creating the diagram, then CannyLab will not allow you to choose the constant that would not suit him. Therefore, choosing a knowingly dangerous mode does not work. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The truth is always the opportunity to enter a constant manually, but it‚Äôs better not to do this.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
We will send 10 characters in the message (including 2 problems), so we will write a constant equal to 10 in the message register. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôm not sure about 1 TX lift to one, but just in case I turned on this item, as I understand it, I need it Do not tighten with a resistor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In block</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúPeriodic sending via UART and VCP‚Äù</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
We use the PWM generator to send 1 time in 2 seconds so that the controller does not clog the channel for a second by constantly sending a message, we use the ‚ÄúTrailing Edge Detector‚Äù. Which will work only once at the moment of switching from one to zero, if the controller is ready at that moment to send a message via UART, then two units will come to the input of the logical multiplication block, respectively, also ‚Äú1‚Äù, which will instruct the controller to send a message via UART , and also just in case for debugging in a USB-COM port (I wrote about this in detail </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in a previous article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the </font><b><font style="vertical-align: inherit;">"Display"</font></b><font style="vertical-align: inherit;"> block</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">everything is quite simple, if the values ‚Äã‚Äãfrom the pressure sensor are less than a certain threshold and the motion sensor has triggered (it will give ‚Äú1‚Äù to the output), then we will turn on the green LED of the controller as an alarm signal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would be cool if the system worked like in a movie: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zv/uz/vn/zvuzvnxgsn-kbzb2vvbtjh8gxeu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But we will limit ourselves to turning on the LED. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is a visual demonstration:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2w/wa/nf/2wwanfi6z0fgo9pie5ay7kdo2_w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is the last block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúMessage Formation‚Äù</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> left </font><b><font style="vertical-align: inherit;">.</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
We receive data from the ADC, the ADC resolution is from 0 to 1023. We send characters to UART, which means the readings from the pressure sensor must be converted to a string. Since the maximum number is 1023 (4 digits), then we need 4 bytes. ‚ÄúNumber to String Converter‚Äù outputs a couple of characters at the outputs, we will have 2 pairs of characters, each of them we will send UART and VCP messages to the installation registers. Next, we need to write a separator so that the readings do not merge, since CannyLab uses a couple of characters, then we take two ‚Äúspace‚Äù characters as a separator. Similarly, we convert the readings of the motion sensor, it gives a discrete either 00 or 01, which means we need only one pair of characters. At the very end of the message, write the carriage return and newline characters.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As I already wrote in the article about the photoresistor, Canny does not have its own COM port monitor, but you can use any third-party one, and since we will use the Arduino IDE a bit later, we will use the built-in COM port monitor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, I put a finger on the pressure sensor and move along the way:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/te/h7/yw/teh7yw7biknpy6-wwyxp9adtjui.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The diagram, like the entire code below, can be downloaded from </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's move on to the Arduino.</font></font><br>
<br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part III: Wiring Diagram and Program for Arduino Uno </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I won‚Äôt talk about Arduino in such detail, because everything is quite trivial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wiring diagram:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fs/db/7c/fsdb7cfmep12vakizj2mibjylaw.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note! Since the Arduino RX / TX output operates at 5V, and the Raspberry PI has 3.3V, people advise connecting the Arduino to the Raspberry UART using special modules or at least using a voltage divider. I don‚Äôt have a special module, but the voltage divider is always welcome. I took 3 resistors with a nominal value of 1000 ohms. And he made a tap after the second resistor, on which 2/3 of the voltage will drop. If you round off the power via USB to 5 V, then it just turns out </font></font><code> 5*0.66=3.3 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Although I also connected Arduino directly to the UART Raspberry PI and everything seemed to work. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We connect the pressure sensor to ‚Äú+‚Äù and to the analog input ‚ÄúA1‚Äù. The motion sensor for power and digital input No. 5. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is how the circuit looks like when assembled:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dh/0b/u4/dh0bu4cuhrr2kiw6svtg58dzqr8.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the sketch code for Ardino: </font><font style="vertical-align: inherit;">
The code is simple, the only thing worth explaining is the ‚Äúadjustment‚Äù variable. </font><font style="vertical-align: inherit;">The fact is that when connected to the Arduino, the pressure sensor sometimes showed non-zero values ‚Äã‚Äãeven without load, and I didn‚Äôt think of anything better than subtracting the average value of ‚Äúnoise‚Äù to unify the readings with Canny. </font><font style="vertical-align: inherit;">
Also, as in the previous case, we implemented the display with a built-in LED, in case the sensors worked:</font></font><br>
<br>
<code>byte photoPin = A0;<br>
<br>
void setup() {<br>
 Serial.begin(9600);<br>
 pinMode(photoPin, INPUT);<br>
 pinMode(5, INPUT); <br>
 pinMode(13, OUTPUT);<br>
}<br>
<br>
void loop() {<br>
 int adjustment = 250;<br>
 int pressure_sensor = analogRead(A1) - adjustment;<br>
 int motion_sensor = digitalRead(5);<br>
<br>
Serial.print(pressure_sensor);<br>
 Serial.print(" ");<br>
 Serial.println(motion_sensor);<br>
 if ((pressure_sensor&lt;380) &amp;&amp; (motion_sensor==1))<br>
 {<br>
 digitalWrite(LED_BUILTIN, HIGH); <br>
 }<br>
 else {<br>
 digitalWrite(LED_BUILTIN, LOW); <br>
 }<br>
 delay(1000);<br>
}<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/sa/ld/gwsalds7c3tdqys4dqiywwal-os.png"></div><br>
<br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Part IV: Raspberry PI and the monitoring program in Python</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First you need to enable UART, as well as SSH and VNC, then connect to Raspberry using a smartphone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go to the Raspberry PI settings and enable SSH, VNC, UART, as in the picture:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qh/gj/xq/qhgjxq2lh6ovw0uvszrpiwdrqpe.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Just in case, I turned off Bluetooth. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will write a simple Python program, I used the built-in IDE and did not install any additional Python modules. </font><font style="vertical-align: inherit;">I had a Raspbian with desktop image, medium in size, which takes up approximately 1.1 GB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our monitoring program, we will use both the console and the graphical interface to display information. </font><font style="vertical-align: inherit;">To implement the GUI, I decided to use Tkinter. </font><font style="vertical-align: inherit;">I really use it for the second time in my life, but I just needed a couple of text fields and a dialog box. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the program code:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> serial
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> ttk
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox<font></font>
<font></font>
serialport = serial.Serial(<span class="hljs-string">"/dev/ttyS0"</span>, baudrate=<span class="hljs-number">9600</span>, timeout=<span class="hljs-number">1.0</span>) <font></font>
<font></font>
window = Tk()  <font></font>
window.title(<span class="hljs-string">"Security system for my pen"</span>)  <font></font>
window.geometry(<span class="hljs-string">'400x170'</span>)
<span class="hljs-comment">#Presure sensor label</span>
lbl_ps = ttk.Label(window, text=<span class="hljs-string">"Pressure sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)<font></font>
lbl_ps_status = ttk.Label(window, text=<span class="hljs-string">" "</span>,  font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)
<span class="hljs-comment">#Motion sensor label</span>
lbl_ms = ttk.Label(window, text=<span class="hljs-string">"Motion sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)<font></font>
lbl_ms_status = ttk.Label(window, text=<span class="hljs-string">" "</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)<font></font>
<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
   counter = <span class="hljs-number">0</span>
   rcv = serialport.readline().decode(<span class="hljs-string">'utf-8'</span>).replace(<span class="hljs-string">"\r\n"</span>,<span class="hljs-string">""</span>).split(<span class="hljs-string">'  '</span>)
   <span class="hljs-keyword">if</span> (len(rcv)==<span class="hljs-number">2</span>):<font></font>
       ps=rcv[<span class="hljs-number">0</span>]<font></font>
       ms=rcv[<span class="hljs-number">1</span>]
       <span class="hljs-keyword">print</span> (ps+ <span class="hljs-string">" "</span> +ms)
       <span class="hljs-keyword">if</span> (int(ps)&lt;<span class="hljs-number">380</span>):<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Warning!"</span>)<font></font>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Ok"</span>)<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (int(ms)&gt;<span class="hljs-number">0</span>):<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Warning!"</span>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Ok"</span>  <font></font>
       window.update_idletasks()  <font></font>
       window.update()<font></font>
       <span class="hljs-keyword">if</span> (counter == <span class="hljs-number">2</span>):<font></font>
            messagebox.showinfo(<span class="hljs-string">"Alarm!"</span>, <span class="hljs-string">"heck your pen!"</span>)     <font></font>
       time.sleep(<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will probably skip the import of libraries. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After import, we set the settings for UART, the port itself, speed and timeout.</font></font><br>
<br>
<pre><code class="python hljs">serialport = serial.Serial(<span class="hljs-string">"/dev/ttyS0"</span>, baudrate=<span class="hljs-number">9600</span>, timeout=<span class="hljs-number">1.0</span>) 
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we place text fields (Label) on the table layout (on the grid) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will have 4 fields of which 2 are unchanged, and the status of the sensor will be displayed in the other two.</font></font><br>
<br>
<pre><code class="python hljs">window.title(<span class="hljs-string">"Security system for my pen"</span>)  <font></font>
window.geometry(<span class="hljs-string">'400x170'</span>)
<span class="hljs-comment">#Presure sensor label</span>
lbl_ps = ttk.Label(window, text=<span class="hljs-string">"Pressure sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)<font></font>
lbl_ps_status = ttk.Label(window, text=<span class="hljs-string">" "</span>,  font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)
<span class="hljs-comment">#Motion sensor label</span>
lbl_ms = ttk.Label(window, text=<span class="hljs-string">"Motion sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)<font></font>
lbl_ms_status = ttk.Label(window, text=<span class="hljs-string">" "</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, create an endless loop. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the beginning of the cycle, we will reset the alarm label </font></font><code> counter </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then read the data from the serial port. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order not to look at all entries like ‚Äú\ x00‚Äù, we re-encode the message into UTF-8. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then we remove the beginning and end of the line so that only numbers remain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we divide the line, pay attention to the separator 2 spaces, not 1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So that the program does not crash when the message is incorrect, the further code that is tied to receiving the message is crammed into a conditional structure that will work only if the message can be divided into 2 parts. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, display the pressure sensor and the motion sensor in the console.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
   counter = <span class="hljs-number">0</span>
   rcv = serialport.readline().decode(<span class="hljs-string">'utf-8'</span>).replace(<span class="hljs-string">"\r\n"</span>,<span class="hljs-string">""</span>).split(<span class="hljs-string">'  '</span>)
   <span class="hljs-keyword">if</span> (len(rcv)==<span class="hljs-number">2</span>):<font></font>
       ps=rcv[<span class="hljs-number">0</span>]<font></font>
       ms=rcv[<span class="hljs-number">1</span>]
       <span class="hljs-keyword">print</span> (ps+ <span class="hljs-string">" "</span> +ms)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We check the sensors worked, if everything is fine, the system writes ‚ÄúOK‚Äù, if one of the sensors works, the counter increases by 1 and a warning is issued.</font></font><br>
<br>
<pre><code class="python hljs">
       <span class="hljs-keyword">if</span> (int(ps)&lt;<span class="hljs-number">380</span>):<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Warning!"</span>)<font></font>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Ok"</span>)<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (int(ms)&gt;<span class="hljs-number">0</span>):<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Warning!"</span>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Ok"</span>  
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the last block, we update the elements of the Tkinter form, after which we check how many sensors worked. </font><font style="vertical-align: inherit;">If both sensors have worked in the cycle, a modal window appears with an alarm message.</font></font><br>
<br>
<pre><code class="python hljs"><font></font>
       window.update_idletasks()  <font></font>
       window.update()<font></font>
       <span class="hljs-keyword">if</span> (counter == <span class="hljs-number">2</span>):<font></font>
            messagebox.showinfo(<span class="hljs-string">"Alarm!"</span>, <span class="hljs-string">"heck your pen!"</span>)     <font></font>
       time.sleep(<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important to note here that the motion sensor keeps output ‚Äú1‚Äù for two seconds from the moment the motion is detected. </font><font style="vertical-align: inherit;">So, as a rule, the system manages to work. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Below are screenshots showing the operation of the program: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All sensors are calm:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ag/k4/5g/agk45gfxxjwlw0mnho5ev1azihs.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of two things worked:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/wv/pl/ccwvplgtz7cehxt6j49n4eilcr0.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Both worked, the system waits for the operator to acknowledge:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/mb/ex/zombexigilxlkmribvot0spkq-g.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It seems that everything was as planned.</font></font><br>
<br>
<a name="V"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conclusion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In conclusion, consider connecting to a Raspberry PI from a smartphone. In principle, there is nothing complicated, if you can connect from a computer, then you can from a phone. All you need to know is the Raspberry IP, username and password. I installed VNC Viewer on my Android smartphone, but you can certainly have another client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It‚Äôs not very convenient to use, but it works:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cr/wb/st/crwbstmutqolgb1vhz6iwdr0pz4.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let me remind you once again that all the code can be downloaded from </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each time I promise myself that I will not write a long article, but here again the draft has exceeded 10 printed pages. </font><font style="vertical-align: inherit;">The article shows an easy-to-implement example of a home-made security system, the scope for imagination is huge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If I understand that the article was interesting to you, then I will outline later another one about connecting via a Bluetooth adapter. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It seems that I got a small series of articles, so for your convenience I will leave links to other related articles:</font></font></i><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúOne, two, three - burn the Christmas tree!‚Äù </font><font style="vertical-align: inherit;">or my first look at the CANNY 3 tiny controller</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúDestination has a lot of guises ...‚Äù or we automate the control of an autolamp using CANNY 3 tiny and a photoresistor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúWhat marinas?‚Äù </font><font style="vertical-align: inherit;">or we control the controller via bluetooth using a mobile application on Xamarin (Android)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497314/index.html">How deep the Challenger Abyss is: measuring depth</a></li>
<li><a href="../en497316/index.html">Own server or public cloud?</a></li>
<li><a href="../en497318/index.html">Network simulator tutorial ns-3. Chapter 3</a></li>
<li><a href="../en497320/index.html">Key Trends in Software Testing from SmartBear: Test Types and Trends</a></li>
<li><a href="../en497322/index.html">Objective Quality Score Testing with Customer Journey Map</a></li>
<li><a href="../en497326/index.html">More secure SSH connectivity with DNSSEC</a></li>
<li><a href="../en497328/index.html">Easy way to learn a language (any)</a></li>
<li><a href="../en497330/index.html">Chrome Remote Desktop. Remote support</a></li>
<li><a href="../en497332/index.html">Houston, we have a problem. System Design Failure</a></li>
<li><a href="../en497334/index.html">The notorious bugs and how to avoid them on the example of ClickHouse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>