<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¥üèø üç• üßòüèª C√≥mo y por qu√© la opci√≥n noatime mejora el rendimiento del sistema Linux üßëüèª‚Äçü§ù‚Äçüßëüèª üö¥üèº üéûÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Actualizar atime afecta el rendimiento del sistema. Qu√© sucede all√≠ y qu√© hacer al respecto: lea el art√≠culo.
 
 
 Cada vez que actualizo Linux en la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>C√≥mo y por qu√© la opci√≥n noatime mejora el rendimiento del sistema Linux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/505784/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualizar atime afecta el rendimiento del sistema. </font><font style="vertical-align: inherit;">Qu√© sucede all√≠ y qu√© hacer al respecto: lea el art√≠culo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ul/95/o-/ul95o-nvhv-_qxazmshaml17zwq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada vez que actualizo Linux en la computadora de mi casa, tengo que resolver ciertos problemas. Con los a√±os, esto se ha convertido en un h√°bito: hago copias de seguridad de mis archivos, borro el sistema, instalo todo desde cero, restauro mis archivos y luego reinstalo mis aplicaciones favoritas. Tambi√©n cambio la configuraci√≥n del sistema por m√≠ mismo. A veces lleva demasiado tiempo. Y recientemente, me preguntaba si necesitaba este dolor de cabeza.</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atime</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una de las tres marcas de tiempo para archivos en Linux (m√°s sobre esto m√°s adelante). </font><font style="vertical-align: inherit;">En particular, me preguntaba si a√∫n valdr√≠a la pena deshabilitar atime en sistemas Linux posteriores. </font><font style="vertical-align: inherit;">Como atime se actualiza cada vez que se accede a un archivo, me di cuenta de que tiene un impacto significativo en el rendimiento del sistema. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recientemente me actualic√© a Fedora 32 y, por costumbre, comenc√© deshabilitando atime. </font><font style="vertical-align: inherit;">Pens√©: ¬ørealmente lo necesito? </font><font style="vertical-align: inherit;">Decid√≠ estudiar este tema y eso es lo que desenterr√©.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un poco sobre las marcas de tiempo del archivo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprenderlo, debe dar un paso atr√°s y recordar algunas cosas sobre los sistemas de archivos de Linux y c√≥mo el n√∫cleo asigna marcas de tiempo a los archivos y directorios. </font><font style="vertical-align: inherit;">Puede ver la fecha del √∫ltimo cambio de archivos y directorios ejecutando el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando ls -l (long)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o simplemente mirando la informaci√≥n al respecto en el administrador de archivos. </font><font style="vertical-align: inherit;">Pero detr√°s de escena, el kernel de Linux rastrea varias marcas de tiempo para archivos y directorios:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cu√°ndo fue la √∫ltima vez que se modific√≥ el archivo (mtime)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cu√°ndo fue la √∫ltima vez que se modificaron las propiedades y los metadatos del archivo (ctime)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cu√°ndo fue la √∫ltima vez que se accedi√≥ a un archivo (atime)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede usar el comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para ver la informaci√≥n del archivo o directorio. </font><font style="vertical-align: inherit;">Aqu√≠ est√° el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo / etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de uno de mis servidores de prueba:</font></font></li>
</ol><br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">stat</span> fstab<font></font>
  File: fstab<font></font>
  Size: 261             Blocks: 8          IO Block: 4096   regular file<font></font>
Device: b303h/45827d    Inode: 2097285     Links: 1<font></font>
Access: (0664/-rw-rw-r--)  Uid: (    0/    root)   Gid: (    0/    root)<font></font>
Context: system_u:object_r:etc_t:s0<font></font>
Access: 2019-04-25 21:10:18.083325111 -0500<font></font>
Modify: 2019-05-16 10:46:47.427686706 -0500<font></font>
Change: 2019-05-16 10:46:47.434686674 -0500<font></font>
 Birth: 2019-04-25 21:03:11.840496275 -0500</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede ver que este archivo fue creado el 25 de abril de 2019, cuando instal√© el sistema. </font><font style="vertical-align: inherit;">Mi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo / etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se modific√≥ por √∫ltima vez el 16 de mayo de 2019, y todos los dem√°s atributos se modificaron aproximadamente al mismo tiempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si copio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a un archivo nuevo, las fechas cambian, lo que indica que se trata de un archivo nuevo:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo cp fstab fstab.bak<font></font>
$ <span class="hljs-built_in">stat</span> fstab.bak<font></font>
  File: fstab.bak<font></font>
  Size: 261             Blocks: 8          IO Block: 4096   regular file<font></font>
Device: b303h/45827d    Inode: 2105664     Links: 1<font></font>
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)<font></font>
Context: unconfined_u:object_r:etc_t:s0<font></font>
Access: 2020-05-12 17:53:58.442659986 -0500<font></font>
Modify: 2020-05-12 17:53:58.443659981 -0500<font></font>
Change: 2020-05-12 17:53:58.443659981 -0500<font></font>
 Birth: 2020-05-12 17:53:58.442659986 -0500</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero si solo cambio el nombre del archivo sin cambiar su contenido, Linux solo actualizar√° el tiempo de modificaci√≥n del archivo:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo mv fstab.bak fstab.tmp<font></font>
$ <span class="hljs-built_in">stat</span> fstab.tmp<font></font>
  File: fstab.tmp<font></font>
  Size: 261             Blocks: 8          IO Block: 4096   regular file<font></font>
Device: b303h/45827d    Inode: 2105664     Links: 1<font></font>
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)<font></font>
Context: unconfined_u:object_r:etc_t:s0<font></font>
Access: 2020-05-12 17:53:58.442659986 -0500<font></font>
Modify: 2020-05-12 17:53:58.443659981 -0500<font></font>
Change: 2020-05-12 17:54:24.576508232 -0500<font></font>
 Birth: 2020-05-12 17:53:58.442659986 -0500</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estas marcas de tiempo son muy √∫tiles para ciertos programas de Unix. Por ejemplo, biff es un programa que le notifica un nuevo mensaje en un correo electr√≥nico. Ahora pocas personas usan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biff</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero en aquellos d√≠as en que los buzones eran locales para el sistema, el biff estaba bastante extendido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo sabe el programa si tiene correo nuevo en su bandeja de entrada? biff compara la √∫ltima hora modificada (cuando la bandeja de entrada se actualiz√≥ con un nuevo correo electr√≥nico) y la √∫ltima hora de acceso (la √∫ltima vez que ley√≥ su correo electr√≥nico). Si el cambio se produjo despu√©s del acceso, biff entender√° que ha llegado una nueva carta y se lo notificar√°. El cliente de correo electr√≥nico de Mutt funciona de la misma manera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La √∫ltima marca de tiempo de acceso tambi√©n es √∫til si necesita recopilar estad√≠sticas sobre el uso del sistema de archivos y ajustar el rendimiento. Los administradores del sistema necesitan saber a qu√© objetos se accede para configurar correctamente el sistema de archivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero la mayor√≠a de los programas modernos ya no necesitan esta etiqueta, por lo que hubo una propuesta para no usarla. En 2007, Linus Torvalds y varios otros desarrolladores de kernel discutieron atime en el contexto de problemas de rendimiento. El desarrollador del kernel de Linux, Ingo Molnar, hizo el siguiente comentario sobre atime y el sistema de archivos ext3:</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Es bastante extra√±o que cada servidor de escritorio y Linux sufra una disminuci√≥n notable en el rendimiento de E / S debido a las constantes actualizaciones de atime, aunque solo hay dos usuarios reales: tmpwatch [que se puede configurar para usar ctime, por lo que este no es un gran problema] y algunas herramientas de respaldo ". </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero la gente todav√≠a usa algunos programas que necesitan esta etiqueta. </font><font style="vertical-align: inherit;">Entonces, eliminar atime interrumpir√° su trabajo. </font><font style="vertical-align: inherit;">Los desarrolladores del kernel de Linux no deben infringir la libertad del usuario.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La decisi√≥n de Salom√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las distribuciones de Linux incluyen muchas aplicaciones, y los usuarios tambi√©n pueden descargar e instalar otros programas seg√∫n sus necesidades. Esta es una ventaja clave de un sistema operativo de c√≥digo abierto. Pero esto dificulta la optimizaci√≥n del rendimiento de su sistema de archivos. La eliminaci√≥n de componentes de uso intensivo de recursos puede interrumpir el sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como compromiso, los desarrolladores del kernel de Linux han introducido la nueva opci√≥n de tiempo de retransmisi√≥n, que tiene como objetivo lograr un equilibrio entre rendimiento y compatibilidad:</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atime se actualiza solo si el tiempo de acceso anterior es menor que el tiempo actual para modificar o cambiar el estado ... A partir de Linux 2.6.30, el kernel usa esta opci√≥n por defecto (si no se especifica noatime) ... Adem√°s, a partir de Linux 2.6 .30, la √∫ltima vez que se accedi√≥ al archivo siempre se actualiza si tiene m√°s de 1 d√≠a de antig√ºedad. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los sistemas Linux modernos (comenzando con Linux 2.6.30, lanzado en 2009) ya utilizan el tiempo de retransmisi√≥n, lo que deber√≠a dar un gran impulso al rendimiento. </font><font style="vertical-align: inherit;">Esto significa que no necesita configurar el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo / etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y con el tiempo de retransmisi√≥n puede confiar en el valor predeterminado.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mejora del rendimiento del sistema con noatime</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero si desea ajustar su sistema para obtener el m√°ximo rendimiento, a√∫n es posible desactivar el tiempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cambio de rendimiento puede no ser muy notable en unidades modernas muy r√°pidas (como NVME o Fast SSD), pero hay un ligero aumento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si sabe que no est√° utilizando un software que requiere un tiempo, puede mejorar ligeramente el rendimiento al incluir la opci√≥n noatime en el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo / etc / fstab</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Despu√©s de eso, el n√∫cleo no se actualizar√° constantemente atime. </font><font style="vertical-align: inherit;">Use la opci√≥n noatime cuando monte el sistema de archivos:</font></font><br>
<br>
<pre><code class="bash hljs">/dev/mapper/fedora_localhost--live-root /          ext4   defaults,noatime,x-systemd.device-timeout=0 1 1<font></font>
UUID=be37c451-915e-4355-95c4-654729cf662a /boot    ext4   defaults,noatime        1 2<font></font>
UUID=C594-12B1                          /boot/efi  vfat   <span class="hljs-built_in">umask</span>=0077,shortname=winnt 0 2<font></font>
/dev/mapper/fedora_localhost--live-home /home      ext4   defaults,noatime,x-systemd.device-timeout=0 1 2<font></font>
/dev/mapper/fedora_localhost--live-swap none       swap   defaults,x-systemd.device-timeout=0 0 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los cambios surtir√°n efecto la pr√≥xima vez que reinicie.</font></font><br>
<br>
<hr><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como un anuncio</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øNecesita un servidor para alojar el sitio? </font><font style="vertical-align: inherit;">¬°Nuestra compa√±√≠a ofrece </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servidores confiables</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con pagos diarios o √∫nicos, cada servidor est√° conectado a un canal de Internet de 500 Megabits y est√° libre de ataques DDoS!</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es505764/index.html">Entrevista de robot</a></li>
<li><a href="../es505766/index.html">Monitoreo de datos en reposo con un sistema DCAP</a></li>
<li><a href="../es505772/index.html">Eventos digitales en Mosc√∫ del 8 al 14 de junio.</a></li>
<li><a href="../es505778/index.html">HCI: soluciones llave en mano para construir una infraestructura de TI corporativa flexible</a></li>
<li><a href="../es505780/index.html">C√≥mo hacer un generador de cotizaciones en una hora</a></li>
<li><a href="../es505786/index.html">5 t√©cnicas de arte cl√°sico para crear una buena presentaci√≥n</a></li>
<li><a href="../es505788/index.html">Ozon Go Demo Day</a></li>
<li><a href="../es505796/index.html">CO2, Sp02 y COVID-19: por qu√© necesita ventilar con m√°s frecuencia (pocas mediciones)</a></li>
<li><a href="../es505798/index.html">PHP 25 a√±os: una breve historia del lenguaje y un 50% de descuento en PhpStorm</a></li>
<li><a href="../es505802/index.html">Hosting y servidores dedicados: responda preguntas. Parte 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>