<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔻 ❣️ 👨🏿‍🔬 Cara membuat tampilan khusus untuk lansiran (), konfirmasi () dan prompt () untuk digunakan dalam JavaScript 🧒🏾 😽 🍸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya telah lama berpikir untuk menyesuaikan tampilan fungsi interaksi pengguna pada JavaScript - alert (), confirm () dan prompt () (selanjutnya modal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cara membuat tampilan khusus untuk lansiran (), konfirmasi () dan prompt () untuk digunakan dalam JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496372/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya telah lama berpikir untuk menyesuaikan tampilan fungsi interaksi pengguna pada JavaScript - alert (), confirm () dan prompt () (selanjutnya modal windows). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memang, mereka sangat nyaman digunakan, tetapi berbeda di browser yang berbeda dan sangat tidak enak dipandang. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, tangan-tangan itu meraih. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa masalahnya? Cara biasa untuk mengeluarkan dialog (misalnya, bootstrap) tidak dapat digunakan semudah mengingatkan, di mana browser mengatur kode JavaScript untuk berhenti mengeksekusi dan menunggu tindakan pengguna (mengklik tombol tutup). Modal dalam bootstrap akan membutuhkan penanganan acara terpisah - mengklik tombol, menutup jendela modal ...</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun demikian, saya telah menggunakan penyesuaian lansiran di game untuk mengganti pesan standar dengan pesan yang sesuai dengan gaya desain game. Ini berfungsi dengan baik, termasuk pesan kesalahan koneksi dan situasi sistem lainnya. Tetapi ini tidak akan berfungsi jika pengguna perlu menunggu jawaban!</font></font><br>
<img src="https://habrastorage.org/webt/c4/mc/c_/c4mcc_awjvsbs6hpwucvdcylisu.png" alt="gambar"><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan munculnya Janji dalam ECMAScript 6 (ES6), semuanya mungkin! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menerapkan pendekatan memisahkan desain modal windows dan kode (alert (), confirm () dan prompt ()). </font><font style="vertical-align: inherit;">Tetapi Anda dapat menyembunyikan semua yang ada dalam kode. </font><font style="vertical-align: inherit;">Apa yang menarik dari pendekatan semacam itu - desain dapat diubah dalam proyek yang berbeda, tetapi hanya pada halaman yang berbeda atau tergantung pada situasinya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin buruk tentang pendekatan ini adalah perlunya menggunakan nama markup (id) dalam kode modal windows, dan bahkan dalam lingkup global. </font><font style="vertical-align: inherit;">Tapi ini hanya contoh dari prinsip, jadi saya tidak akan fokus pada ini.</font></font><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendapatkan kode untuk lansiran</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, mari kita lihat markup (bootstrap dan Font Awesome untuk ikon font) dan kode peringatan (saya menggunakan jQuery):</font></font><br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"PromiseAlert"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-dialog"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"document"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-content"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-header"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-title"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-exclamation-triangle text-warning"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>The app reports<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"close"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Close"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>×<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-body"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-footer"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span>&gt;</span>OK<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><br>
<pre><code class="javascript hljs">    <span class="hljs-built_in">window</span>.alert = <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {<font></font>
        $(<span class="hljs-string">'#PromiseAlert .modal-body p'</span>).html(message);
        <span class="hljs-keyword">var</span> PromiseAlert = $(<span class="hljs-string">'#PromiseAlert'</span>).modal({
            <span class="hljs-attr">keyboard</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">backdrop</span>: <span class="hljs-string">'static'</span>
        }).modal(<span class="hljs-string">'show'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{<font></font>
            PromiseAlert.on(<span class="hljs-string">'hidden.bs.modal'</span>, resolve);<font></font>
        });<font></font>
    };<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang saya katakan di atas, nama global PromiseAlert dan kelas markup html digunakan untuk kode. Di baris pertama kode, parameter fungsi peringatan dilewatkan ke badan pesan. Setelah itu, metode bootstrap menampilkan jendela modal dengan opsi tertentu (mereka membuatnya lebih dekat dengan peringatan asli). Penting! Jendela modal diingat dalam variabel lokal, yang digunakan di bawah ini melalui penutupan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, itu dibuat dan dikembalikan sebagai hasil dari Janji janji, di mana, sebagai akibat dari menutup jendela modal, menyelesaikan Janji ini dieksekusi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita lihat bagaimana peringatan ini dapat digunakan:</font></font><br>
<pre><code class="javascript hljs">    $(<span class="hljs-string">'p a[href="#"]'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> (e) =&gt; {<font></font>
        e.preventDefault();<font></font>
        <span class="hljs-keyword">await</span> alert(<span class="hljs-string">'Promise based alert sample'</span>);<font></font>
    });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam contoh ini, sebuah pesan ditampilkan saat mengklik tautan kosong dalam paragraf. Memperhatikan! Untuk memenuhi spesifikasi, fungsi peringatan harus didahului oleh kata kunci yang menunggu, dan hanya dapat digunakan di dalam fungsi dengan kata kunci async. Ini memungkinkan Anda untuk mengharapkan di tempat ini (skrip akan berhenti, seperti dalam kasus dengan peringatan asli), penutupan jendela modal.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang akan terjadi jika ini tidak dilakukan? </font><font style="vertical-align: inherit;">Tergantung pada logika aplikasi Anda (contoh dari pendekatan seperti pada gambar di atas). </font><font style="vertical-align: inherit;">Jika ini adalah akhir dari kode atau tindakan selanjutnya dari kode tidak membebani halaman, maka semuanya mungkin akan baik-baik saja! </font><font style="vertical-align: inherit;">Jendela modal melorot sampai pengguna menutupnya. </font><font style="vertical-align: inherit;">Tetapi jika masih ada modal windows atau jika halaman reload, ada transisi ke halaman lain, maka pengguna tidak akan melihat jendela modal Anda dan logikanya akan dihancurkan. </font><font style="vertical-align: inherit;">Saya dapat mengatakan bahwa dari pengalaman, pesan tentang berbagai kesalahan server (status) atau dari pustaka kode berfungsi dengan baik dengan peringatan baru kami, meskipun mereka tidak menggunakan menunggu.</font></font><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengembangkan pendekatan untuk konfirmasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita melangkah lebih jauh. </font><font style="vertical-align: inherit;">Tanpa ragu, konfirmasi hanya dapat digunakan dalam pengikatan async / wait, as </font><font style="vertical-align: inherit;">ia harus memberi tahu kode hasil pilihan pengguna. </font><font style="vertical-align: inherit;">Ini juga berlaku untuk prompt. </font><font style="vertical-align: inherit;">Jadi konfirmasikan:</font></font><br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"PromiseConfirm"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-dialog"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"document"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-content"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-header"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-title"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-check-circle text-success"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Confirm app request<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"close"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Close"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>×<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-body"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-footer"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-success"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span>&gt;</span>OK<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-danger"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span>&gt;</span>Cancel<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><br>
<pre><code class="javascript hljs">    <span class="hljs-built_in">window</span>.confirm = <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {<font></font>
        $(<span class="hljs-string">'#PromiseConfirm .modal-body p'</span>).html(message);
        <span class="hljs-keyword">var</span> PromiseConfirm = $(<span class="hljs-string">'#PromiseConfirm'</span>).modal({
            <span class="hljs-attr">keyboard</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">backdrop</span>: <span class="hljs-string">'static'</span>
        }).modal(<span class="hljs-string">'show'</span>);
        <span class="hljs-keyword">let</span> confirm = <span class="hljs-literal">false</span>;<font></font>
        $(<span class="hljs-string">'#PromiseConfirm .btn-success'</span>).on(<span class="hljs-string">'click'</span>, e =&gt; {<font></font>
            confirm = <span class="hljs-literal">true</span>;<font></font>
        });<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{<font></font>
            PromiseConfirm.on(<span class="hljs-string">'hidden.bs.modal'</span>, (e) =&gt; {<font></font>
                resolve(confirm);<font></font>
            });<font></font>
        });<font></font>
    };<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hanya ada satu perbedaan - kita perlu menginformasikan tentang pilihan pengguna. </font><font style="vertical-align: inherit;">Ini dilakukan dengan menggunakan variabel lokal lain dalam penutupan - konfirmasi. </font><font style="vertical-align: inherit;">Jika tombol konfirmasi ditekan, variabel diatur ke true, dan secara default nilainya salah. </font><font style="vertical-align: inherit;">Nah, saat memproses penutupan modal window, resolusinya mengembalikan variabel ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah penggunaannya (diperlukan dengan async / menunggu):</font></font><br>
<pre><code class="javascript hljs">    $(<span class="hljs-string">'p a[href="#"]'</span>).on(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> (e) =&gt; {<font></font>
        e.preventDefault();<font></font>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> confirm(<span class="hljs-string">'Want to test the Prompt?'</span>)) {
            <span class="hljs-keyword">let</span> prmpt = <span class="hljs-keyword">await</span> prompt(<span class="hljs-string">'Entered value:'</span>);
            <span class="hljs-keyword">if</span> (prmpt) <span class="hljs-keyword">await</span> alert(<span class="hljs-string">`entered: «<span class="hljs-subst">${prmpt}</span>»`</span>);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">await</span> alert(<span class="hljs-string">'Do not enter a value'</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">await</span> alert(<span class="hljs-string">'Promise based alert sample'</span>);<font></font>
    });<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pindah - pendekatan untuk prompt</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Logika di atas juga diimplementasikan dengan prompt tes. </font><font style="vertical-align: inherit;">Dan markup dan logikanya adalah sebagai berikut:</font></font><br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"PromisePrompt"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-dialog"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"document"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-content"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-header"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h5</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-title"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-question-circle text-primary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Prompt request<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"close"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Close"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span>×<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-body"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"PromisePromptInput"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"PromisePromptInput"</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal-footer"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-success"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span>&gt;</span>OK<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-danger"</span> <span class="hljs-attr">data-dismiss</span>=<span class="hljs-string">"modal"</span>&gt;</span>Cancel<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><br>
<pre><code class="javascript hljs">    <span class="hljs-built_in">window</span>.prompt = <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> {<font></font>
        $(<span class="hljs-string">'#PromisePrompt .modal-body label'</span>).html(message);
        <span class="hljs-keyword">var</span> PromisePrompt = $(<span class="hljs-string">'#PromisePrompt'</span>).modal({
            <span class="hljs-attr">keyboard</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">backdrop</span>: <span class="hljs-string">'static'</span>
        }).modal(<span class="hljs-string">'show'</span>);<font></font>
        $(<span class="hljs-string">'#PromisePromptInput'</span>).focus();
        <span class="hljs-keyword">let</span> prmpt = <span class="hljs-literal">null</span>;<font></font>
        $(<span class="hljs-string">'#PromisePrompt .btn-success'</span>).on(<span class="hljs-string">'click'</span>, e =&gt; {<font></font>
            prmpt = $(<span class="hljs-string">'#PromisePrompt .modal-body input'</span>).val();<font></font>
        });<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{<font></font>
            PromisePrompt.on(<span class="hljs-string">'hidden.bs.modal'</span>, (e) =&gt; {<font></font>
                resolve(prmpt);<font></font>
            });<font></font>
        });<font></font>
    };<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbedaan antara logika dan konfirmasi adalah minimal. </font><font style="vertical-align: inherit;">Variabel lokal tambahan dalam penutupan adalah prmpt. </font><font style="vertical-align: inherit;">Dan itu tidak memiliki nilai logis, tetapi string yang dimasukkan pengguna. </font><font style="vertical-align: inherit;">Melalui penutupan, nilainya teratasi. </font><font style="vertical-align: inherit;">Dan nilai diberikan hanya ketika tombol konfirmasi ditekan (dari kolom input). </font><font style="vertical-align: inherit;">Ngomong-ngomong, di sini saya menyia-nyiakan variabel global lain, PromisePromptInput, hanya untuk steno dan kode alternatif. </font><font style="vertical-align: inherit;">Dengan itu, saya mengatur fokus input (meskipun dapat dilakukan dalam satu pendekatan - baik dengan cara yang sama atau dalam mendapatkan nilai). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat mencoba pendekatan ini dalam tindakan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Kode ini terletak di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kelihatannya seperti ini (meskipun tautan di atas lebih beragam):</font></font><br>
<img src="https://habrastorage.org/webt/5o/zl/rc/5ozlrc4mvo0cep-tb-lesrsrltk.png" alt="gambar"><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AIDS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mereka tidak berhubungan langsung dengan topik artikel, tetapi mereka mengungkapkan fleksibilitas penuh dari pendekatan tersebut. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini termasuk tema bootstrap. </font><font style="vertical-align: inherit;">Saya mengambil tema gratis di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beralih bahasa menggunakan instalasi otomatis sesuai dengan bahasa browser. </font><font style="vertical-align: inherit;">Ada tiga mode - otomatis (melalui browser), Rusia atau Inggris (dipaksakan). </font><font style="vertical-align: inherit;">Mesin diinstal secara default. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cookie ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) Saya biasa menghafal tema dan pergantian bahasa. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tema beralih hanya dengan menginstal segmen href css dari situs di atas:</font></font><br>
<pre><code class="javascript hljs">    $(<span class="hljs-string">'#themes a.dropdown-item'</span>).on(<span class="hljs-string">'click'</span>, (e) =&gt; {<font></font>
        e.preventDefault();<font></font>
        $(<span class="hljs-string">'#themes a.dropdown-item'</span>).removeClass(<span class="hljs-string">'active'</span>);<font></font>
        e.currentTarget.classList.add(<span class="hljs-string">'active'</span>);
        <span class="hljs-keyword">var</span> cur = e.currentTarget.getAttribute(<span class="hljs-string">'href'</span>);
        <span class="hljs-built_in">document</span>.head.children[<span class="hljs-number">4</span>].href = <span class="hljs-string">'https://stackpath.bootstrapcdn.com/bootswatch/4.4.1/'</span> + cur + <span class="hljs-string">'bootstrap.min.css'</span>;
        <span class="hljs-keyword">var</span> ed = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();<font></font>
        ed.setFullYear(ed.getFullYear() + <span class="hljs-number">1</span>);<font></font>
        setCookie(<span class="hljs-string">'WebApplicationPromiseAlertTheme'</span>, cur, ed);<font></font>
    });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yah, saya ingat di Cookies untuk pemulihan saat boot:</font></font><br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">var</span> cookie = getCookie(<span class="hljs-string">'WebApplicationPromiseAlertTheme'</span>);
    <span class="hljs-keyword">if</span> (cookie) {<font></font>
        $(<span class="hljs-string">'#themes a.dropdown-item'</span>).removeClass(<span class="hljs-string">'active'</span>);<font></font>
        $(<span class="hljs-string">'#themes a.dropdown-item[href="'</span> + cookie + <span class="hljs-string">'"]'</span>).addClass(<span class="hljs-string">'active'</span>);
        <span class="hljs-built_in">document</span>.head.children[<span class="hljs-number">4</span>].href = <span class="hljs-string">'https://stackpath.bootstrapcdn.com/bootswatch/4.4.1/'</span> + cookie + <span class="hljs-string">'bootstrap.min.css'</span>;<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk pelokalan, saya menggunakan file localization.json di mana saya membuat kamus kunci dalam bahasa Inggris dan nilainya dalam bahasa Rusia. </font><font style="vertical-align: inherit;">Untuk kesederhanaan (meskipun markup menjadi lebih rumit di beberapa tempat), saya hanya memeriksa node teks murni ketika menerjemahkan, mengganti kunci dari nilai.</font></font><br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">var</span> translate = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
        $(<span class="hljs-string">'#cultures .dropdown-toggle samp'</span>).text({ <span class="hljs-attr">ru</span>: <span class="hljs-string">'  '</span>, <span class="hljs-attr">en</span>: <span class="hljs-string">' English '</span> }[culture]);
        <span class="hljs-keyword">if</span> (culture == <span class="hljs-string">'ru'</span>) {
            <span class="hljs-keyword">let</span> int;
            <span class="hljs-keyword">if</span> (localization) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> el <span class="hljs-keyword">of</span> <span class="hljs-built_in">document</span>.all)
                    <span class="hljs-keyword">if</span> (el.childElementCount == <span class="hljs-number">0</span> &amp;&amp; el.textContent) {
                        <span class="hljs-keyword">let</span> text = localization[el.textContent];
                        <span class="hljs-keyword">if</span> (text) el.textContent = text;<font></font>
                    }<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span> int = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                <span class="hljs-keyword">if</span> (localization) {<font></font>
                    translate();<font></font>
                    clearInterval(int);<font></font>
                }<font></font>
            }, <span class="hljs-number">100</span>);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> location.reload();<font></font>
    };<font></font>
    <span class="hljs-keyword">if</span> (culture == <span class="hljs-string">'ru'</span>) translate();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
jadi sulit melakukan produksi (lebih baik di server), tapi di sini saya bisa menunjukkan semuanya pada klien. </font><font style="vertical-align: inherit;">Saya mengakses server hanya ketika mengubah dari bahasa Rusia ke bahasa Inggris - Saya hanya membebani markup asli (location.reload). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang terakhir, seperti yang diharapkan, pesan di onbeforeunload dikeluarkan sesuai dengan algoritma browser dan konfirmasi kami tidak memengaruhi ini. </font><font style="vertical-align: inherit;">Di akhir kode ada versi komentar dari pesan semacam itu - Anda dapat mencobanya saat Anda mentransfernya sendiri.</font></font><br>
<pre><code class="javascript hljs">    <span class="hljs-comment">//window.onbeforeunload = function (e) {</span>
    <span class="hljs-comment">//    e.returnValue = 'Do you really want to finish the job?';</span>
    <span class="hljs-comment">//    return e.returnValue;</span>
    <span class="hljs-comment">//};</span>
</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id496360/index.html">BFCache, atau Di sana dan kembali. Laporan Yandex</a></li>
<li><a href="../id496362/index.html">Masker diatur ulang</a></li>
<li><a href="../id496366/index.html">Miniseri: komputer terner do-it-yourself</a></li>
<li><a href="../id496368/index.html">Startup Australia mengembangkan PC hybrid dari komponen elektronik dan biologis</a></li>
<li><a href="../id496370/index.html">Kegembiraan dan kesedihan karena kemenangan atas C: kami membuat permen dari prototipe wc di Haskell</a></li>
<li><a href="../id496376/index.html">Kuartet 9: Allegro | Keringkasan dan kesederhanaan</a></li>
<li><a href="../id496380/index.html">Pemulihan Bencana dan migrasi menggunakan Ketersediaan VMware vCloud. Bagian 2</a></li>
<li><a href="../id496384/index.html">Orang-orang IT yang dikarantina: pengalaman pribadi dari berbagai negara</a></li>
<li><a href="../id496386/index.html">Langkah pertama di Spring, Rest API, fokus pada PUT bersama dengan frontend</a></li>
<li><a href="../id496388/index.html">Tidak ada orang sehat, ada yang diperiksa: diagnosis dini penyakit jantung koroner</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>