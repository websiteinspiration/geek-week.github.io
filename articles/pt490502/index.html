<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëê üéé üéõÔ∏è Ansible vs Puppet üßñ üç± ü§ôüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ansible e Puppet s√£o os sistemas de gerenciamento de configura√ß√£o (SCM) necess√°rios para construir infraestruturas repetitivas. 
 
 O Ansible √© f√°cil ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Ansible vs Puppet</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/490502/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible e Puppet s√£o os sistemas de gerenciamento de configura√ß√£o (SCM) necess√°rios para construir infraestruturas repetitivas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Ansible √© f√°cil de usar, possui uma arquitetura sem agente (n√£o requer a instala√ß√£o de um agente / cliente no sistema de destino) e um DSL do tipo YAML, escrito em Python e facilmente expandido por m√≥dulos. Geralmente gerencia configura√ß√µes do Linux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Puppet possui uma arquitetura cliente-servidor (consulta periodicamente o servidor para fazer altera√ß√µes na configura√ß√£o feita pelo administrador da rede), √© escrito em Ruby e possui uma DSL semelhante a Ruby. Este aplicativo permite gerenciar centralmente a configura√ß√£o do software instalado em v√°rios computadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O artigo compara as vantagens e desvantagens desses SCMs.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x1/ic/q3/x1icq3wsfkfmjfv3iqhkfc9nqh8.jpeg"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em compara√ß√£o com os anos 90, atualmente os administradores e desenvolvedores de sistemas precisam gerenciar um n√∫mero significativamente maior de servidores que hospedam muito mais aplicativos. A raz√£o para isso √© o crescimento exponencial da computa√ß√£o para organiza√ß√µes e empresas associadas ao advento de novas tecnologias, como virtualiza√ß√£o e computa√ß√£o em nuvem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, ferramentas como Puppet e Ansible tornam-se rapidamente componentes necess√°rios para gerenciar um grande n√∫mero de servidores, por exemplo, em data centers. </font><font style="vertical-align: inherit;">Eles s√£o chamados de Configuration Management Tools (CM) e Remote Execution (RE) e geralmente s√£o usados ‚Äã‚Äãcom ferramentas de atualiza√ß√£o de software. </font><font style="vertical-align: inherit;">Esses aplicativos √∫teis permitem, por exemplo, que um administrador de rede execute a√ß√µes em v√°rios servidores ao mesmo tempo, implante v√°rios aplicativos com um clique, o que simplifica bastante a configura√ß√£o e manuten√ß√£o de dezenas, centenas ou at√© milhares de servidores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs. Puppet: Uma Breve Revis√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puppet √© uma das marcas mais famosas do mercado CM. Existe desde 2005, que para as ferramentas de CM √© equivalente a existir desde o in√≠cio da humanidade. Muitos grandes nomes como Google, Reddit, Dell, PayPal, Oracle, Los Alamos Labs e Stanford University gerenciam seus data centers com o Puppet. Ter esses clientes a bordo sempre d√° ao produto um certo n√≠vel de confian√ßa. O Puppet tamb√©m possui a interface mais madura e trabalha em todos os principais sistemas operacionais - Linux, Windows, Unix e at√© Mac OS X. Seguindo o modelo criado por v√°rias vers√µes do Linux, este aplicativo de c√≥digo aberto √© desenvolvido em Ruby. No entanto, existe uma empresa de apoio e patroc√≠nio s√≥lida e bem estabelecida do PuppetLabs,oferecendo suporte profissional e uma vers√£o corporativa comercial do software.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Puppet tamb√©m oferece um procedimento simples de instala√ß√£o e v√°rias ferramentas para tarefas como implanta√ß√£o r√°pida em servidores clientes. Al√©m da GUI, h√° uma CLI baseada em Ruby. De fato, para as tarefas mais avan√ßadas, √© prov√°vel que voc√™ dependa da CLI e a GUI √© a interface para visualiza√ß√£o, gerenciamento e monitoramento. Isso significa que, al√©m de trabalhar como administrador do sistema, voc√™ precisa aprender Ruby.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/9v/wc/hu9vwcjf6nwscjrgdyfpxfgtfjq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode pensar: ‚ÄúTudo parece √≥timo! Existe alguma desvantagem, ou vale a pena comprar o Puppet agora? ‚Äù.. O debate sobre o uso desse SCM em f√≥runs especializados de CM √© que o Puppet, como muitos outros gigantes de software, foi v√≠tima de seu pr√≥prio sucesso e tamanho. ‚Äú√Ågil‚Äù e ‚Äú√°gil‚Äù n√£o s√£o palavras que podem ser usadas para descrever o trabalho de Puppet. Os usu√°rios relatam bugs que demoram muito para corrigir e ignorar novas solicita√ß√µes. Tamb√©m h√° alguma insatisfa√ß√£o com o fato de o PuppetLabs persistentemente pressionar seus clientes a aceitar a vers√£o comercial. Por fim, embora o Puppet suporte Ruby puro e seu DSL configurado na CLI, o suporte somente para Ruby est√° obsoleto. Isso √© uma m√° not√≠cia para quem estudou Ruby, n√£o para DSL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Ansible ignorou o Puppet, capturando a maior </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">participa√ß√£o de mercado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no setor de gerenciamento de configura√ß√µes - 26,5%. √â seguido pelo Microsoft System Center CM (21,8%) e Puppet (12%). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/b2/tm/cmb2tmfw7wmtdruecpelzl7snkc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m √© um produto de c√≥digo aberto lan√ßado em 2012 e desde ent√£o tem sido suportado pela AnsibleWorks. Foi desenvolvido em Python, e n√£o em Ruby, o que o torna espiritualmente mais pr√≥ximo do Salt (outra nova ferramenta de CM) do que do Puppet. Outra vantagem do Python √© que ele √© incorporado √† maioria dos aplicativos Unix e Linux; portanto, o SCM escrito nessa linguagem √© instalado e funciona mais rapidamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A estrat√©gia de marketing exclusiva da Ansible reside em sua implanta√ß√£o f√°cil e r√°pida. De fato, esse sistema nem usa agentes implementados para se comunicar com o cliente mestre; em vez disso, todas as fun√ß√µes s√£o executadas atrav√©s do SSH. Para aquelas configura√ß√µes que n√£o suportam SSH raiz, o Ansible pode executar "sudo" como raiz. O Ansible pode ser iniciado a partir da CLI sem usar arquivos de configura√ß√£o para tarefas simples, como verificar a opera√ß√£o do servi√ßo ou iniciar atualiza√ß√µes e reinicializa√ß√µes. Para tarefas mais complexas, a configura√ß√£o Ansible √© manipulada usando a sintaxe YAML nos arquivos de configura√ß√£o chamados "playbooks". Os comandos poss√≠veis podem ser escritos em quase qualquer linguagem de programa√ß√£o e distribu√≠dos como m√≥dulos JSON universais, o que √© claramente uma vantagem sobre a escolha de uma linguagem espec√≠fica.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Ansible se tornou mais popular com uma nova abordagem para tarefas de configura√ß√£o tradicionais, e muitas empresas o utilizam para implantar grandes datacenters. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A comunidade Ansible de entusiastas est√° trabalhando duro para obter sucesso, aumentando o n√∫mero de dispositivos suportados, integrando melhor suporte ao Windows, melhorando o ecossistema e assim por diante.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs. Puppet: Diferen√ßa de instala√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As diferen√ßas entre Ansible ou Puppet se tornam aparentes a partir do momento em que os sistemas s√£o instalados. </font><font style="vertical-align: inherit;">Como eles seguem diferentes paradigmas arquitet√¥nicos, seu cen√°rio √© significativamente diferente. </font><font style="vertical-align: inherit;">Portanto, o Ansible tem o objetivo expl√≠cito de tornar o processo de instala√ß√£o o mais simples poss√≠vel, o que se reflete na experi√™ncia do usu√°rio.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/hr/me/gqhrmedn8unjfxxq3tcdsjfzrtw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para configurar o Ansible, primeiro voc√™ precisa designar um n√≥ como o n√≥ de controle. De fato, qualquer um dos seus n√≥s pode ser um n√≥ de gerenciamento. √â poss√≠vel instalar o Ansible nesse n√≥ usando o pacote Ansible mais recente nos reposit√≥rios de pacotes da sua distribui√ß√£o, sem a necessidade de configurar o software cliente em outros n√≥s. Basta criar um par de chaves SSH no n√≥ de gerenciamento e copi√°-los para os outros n√≥s. Em seguida, crie um arquivo de invent√°rio para n√≥s Ansible - geralmente em sistemas operacionais Linux como Red Hat Linux, Ubuntu e Debian, isso acontece em / etc / ansible / hosts. Agora voc√™ est√° pronto para usar o Ansible para iniciar o PlayBook no host e no restante da infraestrutura de rede.O Ansible usar√° conex√µes SSH com seu n√≥ de controle para acionar o gerenciamento de configura√ß√µes com base no PlayBook.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A instala√ß√£o do Puppet parece um pouco mais complicada, mas h√° muita documenta√ß√£o na Internet que ajudar√° em um caso dif√≠cil. Primeiro, voc√™ precisar√° configurar os n√≥s mestre e do agente para que eles tenham o mesmo fuso hor√°rio e fuso hor√°rio. Ent√£o voc√™ precisa acessar o servidor principal com privil√©gios de root e instalar o software do servidor Puppet. Em seguida, voc√™ precisa configurar o arquivo do assistente Puppet / etc / hosts para conectar todos os clientes gerenciados, iniciar o servi√ßo PuppetServer e coloc√°-lo no modo "ativar" para receber conex√µes do cliente na porta 8140. Como o Puppet depende do software cliente, ser√° necess√°rio instalar os agentes do software Puppet em cada um deles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, voc√™ precisar√° adicionar o endere√ßo IP do servidor mestre em / etc / hosts para que o cliente possa se conectar a ele. </font><font style="vertical-align: inherit;">Para fazer isso, voc√™ deve iniciar e ativar o servi√ßo do agente Puppet em cada cliente e, em seguida, gerar certificados SSL, pois esse sistema CM usa HTTPS para comunica√ß√£o com o cliente principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos dois casos, ser√° necess√°rio refor√ßar a seguran√ßa do servidor para excluir a possibilidade de conex√µes n√£o autorizadas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs. Puppet: mecanismo de transporte de escalabilidade e configura√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dois SCMs s√£o bem dimensionados, mas usam mecanismos de transporte de configura√ß√£o diferentes para conseguir isso. De fato, independentemente de voc√™ precisar gerenciar v√°rias centenas ou dezenas de milhares de n√≥s, existem truques e estrat√©gias que voc√™ pode usar em cada plataforma para escalar convenientemente para o n√≠vel desejado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3y/pe/u6/3ypeu6xorodq8eixu9xnnqbvtvc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Ansible usa o mecanismo de transporte inteligente por padr√£o, que √© baseado em certificados SSH confi√°veis. O Ansible analisar√° primeiro os PlayBooks e identificar√° os elementos de infraestrutura afetados. Ela abrir√° uma conex√£o SSH e criar√° um diret√≥rio tempor√°rio. Depois de fechar esta conex√£o, o Ansible abre uma segunda conex√£o para copiar o c√≥digo do m√≥dulo Ansible e o c√≥digo do modelo Ansible. O Ansible fechar√° essa conex√£o antes de abrir a terceira conex√£o final para executar o c√≥digo. Essa configura√ß√£o servir√° √† maioria dos prop√≥sitos, mas pode ser alterada conforme a infraestrutura √© escalada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira fun√ß√£o que o Ansible pode usar √© chamada ControlPersist e depende de soquetes persistentes e persistentes para reduzir o tempo necess√°rio para trocar apertos de m√£o necess√°rios para v√°rias conex√µes. O Ansible tamb√©m suporta pipelining, uma configura√ß√£o que reduz o n√∫mero de conex√µes necess√°rias de tr√™s para um. Por fim, o Ansible pode ser configurado para lidar com mais n√≥s de invent√°rio ao mesmo tempo, configurando a vari√°vel de garfos na configura√ß√£o deste sistema. Por padr√£o, esse valor √© 5, mas voc√™ pode definir um valor mais alto para acelerar o processamento.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/du/wz/kwduwz2vqawecyp_530h99vo-o0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mecanismo de transporte Puppet √© HTTPS, que √© gerenciado usando certificados SSL. Um servidor Puppet processa solicita√ß√µes de configura√ß√£o para uma lista inteira de clientes Puppet. Cada cliente envia fatos do Puppet ao servidor mestre, juntamente com uma solicita√ß√£o ao diret√≥rio Puppet, ap√≥s o qual o servidor mestre envia esse diret√≥rio em resposta. O cliente processa o diret√≥rio, verificando cada recurso de software com o estado de configura√ß√£o necess√°rio especificado no diret√≥rio. Se o recurso n√£o estiver no estado desejado, o cliente Puppet atualizar√° o recurso neste computador e, ap√≥s a conclus√£o da atualiza√ß√£o, enviar√° um relat√≥rio sobre a altera√ß√£o de configura√ß√£o conclu√≠da ao servidor Puppet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kx/_7/nz/kx_7nzpnuvxgislidrtlelkp1s4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notavelmente, o modelo de processamento Puppet aloca um encadeamento JRuby do pool de encadeamentos para manipular cada conex√£o de cliente recebida. √Ä medida que o n√∫mero de n√≥s aumenta, o dimensionamento do Puppet pode ser otimizado aumentando o n√∫mero de encadeamentos JRuby dispon√≠veis no pool. Isso pode ser feito configurando o valor do par√¢metro de configura√ß√£o do Puppet "inst√¢ncias m√°ximas ativas" mais alto que o valor padr√£o, que √© 1. Como regra, esse valor √© considerado igual ao n√∫mero de n√∫cleos de processador do seu computador, mas lembre-se de que isso exigir√° mais A mem√≥ria da CPU usou RAM RAM. Como regra geral, voc√™ tamb√©m precisar√° definir um "tamanho m√°ximo de heap" mais alto para a JVM do seu servidor Puppet para garantirque seus encadeamentos JRuby adicionais podem ser alocados sem um erro de falta de mem√≥ria do Java. √â necess√°rio cuidado ao fazer essa configura√ß√£o, pois isso pode resultar em perda de desempenho.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo de C√≥digo Ansible CM</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o trabalho di√°rio de configura√ß√£o, escrever c√≥digo Ansible √© surpreendentemente simples devido a uma combina√ß√£o de dois fatores: o uso do formato YAML para PlayBooks e o estilo declarativo de gerenciamento de configura√ß√£o que corta ‚Äúcantos cortantes‚Äù. </font><font style="vertical-align: inherit;">Isso √© importante para melhorar rapidamente o desempenho dos comandos do DevOps e garantir que seu c√≥digo seja gerenci√°vel, mesmo para tarefas complexas de configura√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo imposs√≠vel √© idempotente. Isso significa que voc√™ pode executar com seguran√ßa o PlayBook para componentes do sistema repetidamente, sem bagun√ßar seus servidores. O Ansible alterar√° apenas a configura√ß√£o dos recursos de software nos servidores onde estiver fora do estado desejado. Por exemplo, se o seu PlayBook precisar instalar um pacote e criar um arquivo de configura√ß√£o espec√≠fico no disco, o Ansible instalar√° apenas esse pacote e criar√° o arquivo de configura√ß√£o especificado quando o PlayBook foi iniciado pela primeira vez no host. Os lan√ßamentos subsequentes do PlayBook deixam automaticamente o pacote intacto at√© que haja alguma altera√ß√£o que remova ou modifique a configura√ß√£o especificada de arquivo ou pacote. Isso mant√©m seus n√≥s em um estado determin√≠stico e previs√≠vel, com muito pouca ou nenhuma chance de desvio de configura√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, √© apresentado um exemplo do c√≥digo Ansible PlayBook que instala o servidor da Web Tomcat nos seus sites. </font><font style="vertical-align: inherit;">Este exemplo √© retirado do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reposit√≥rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oficial de </font><font style="vertical-align: inherit;">exemplos do Ansible, que voc√™ deve procurar para se familiarizar melhor com o estilo idiom√°tico do Ansible:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
- name: Install Java 1.7<font></font>
yum: name=java-1.7.0-openjdk state=present<font></font>
<font></font>
- name: add group "tomcat"<font></font>
group: name=tomcat<font></font>
<font></font>
- name: add user "tomcat"<font></font>
user: name=tomcat group=tomcat home=/usr/share/tomcat createhome=no<font></font>
become: True<font></font>
become_method: sudo<font></font>
<font></font>
- name: Download Tomcat<font></font>
get_url: url=http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.61/bin/apache-tomcat-7.0.61.tar.gz dest=/opt/apache-tomcat-7.0.61.tar.gz<font></font>
<font></font>
- name: Extract archive<font></font>
command: chdir=/usr/share /bin/tar xvf /opt/apache-tomcat-7.0.61.tar.gz -C /opt/ creates=/opt/apache-tomcat-7.0.61<font></font>
<font></font>
- name: Symlink install directory<font></font>
file: src=/opt/apache-tomcat-7.0.61 path=/usr/share/tomcat state=link<font></font>
<font></font>
- name: Change ownership of Tomcat installation<font></font>
file: path=/usr/share/tomcat/ owner=tomcat group=tomcat state=directory recurse=yes<font></font>
<font></font>
- name: Configure Tomcat server<font></font>
template: src=server.xml dest=/usr/share/tomcat/conf/<font></font>
notify: restart tomcat<font></font>
<font></font>
- name: Configure Tomcat users<font></font>
template: src=tomcat-users.xml dest=/usr/share/tomcat/conf/<font></font>
notify: restart tomcat<font></font>
<font></font>
- name: Install Tomcat init script<font></font>
copy: src=tomcat-initscript.sh dest=/etc/init.d/tomcat mode=0755<font></font>
<font></font>
- name: Start Tomcat<font></font>
service: name=tomcat state=started enabled=yes<font></font>
<font></font>
- name: deploy iptables rules<font></font>
template: src=iptables-save dest=/etc/sysconfig/iptables<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '6'"<font></font>
notify: restart iptables<font></font>
<font></font>
- name: insert firewalld rule for tomcat http port<font></font>
firewalld: port=/tcp permanent=true state=enabled immediate=yes<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"<font></font>
<font></font>
- name: insert firewalld rule for tomcat https port<font></font>
firewalld: port=/tcp permanent=true state=enabled immediate=yes<font></font>
when: "ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'"<font></font>
<font></font>
- name: wait for tomcat to start<font></font>
wait_for: port=</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa tarefa Ansible espec√≠fica baixa e instala o Apache Tomcat junto com o Java JDK 1.7 dependente e, em seguida, configura, inicia e instala o Tomcat. </font><font style="vertical-align: inherit;">Como voc√™ pode ver neste exemplo, os arquivos controlados por Ansible podem conter modelos Jinja, o que simplifica o c√°lculo de valores e torna sua configura√ß√£o mais flex√≠vel. </font><font style="vertical-align: inherit;">O c√≥digo YAML √© f√°cil de ler e escrever para administradores de sistema e desenvolvedores. </font><font style="vertical-align: inherit;">Isso leva ao fato de o Ansible estar se tornando um sistema de gerenciamento de configura√ß√£o acess√≠vel para usu√°rios avan√ßados e iniciantes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo de c√≥digo de marionetes CM</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A linguagem orientada a assuntos Puppet √© baseada em Ruby, mas sua sintaxe est√° muito mais pr√≥xima de linguagens imperativas no estilo C, como Perl, Java e C ++. </font><font style="vertical-align: inherit;">Essa abordagem √© um intermedi√°rio entre desenvolvedores familiarizados com Ruby e aqueles que podem n√£o estar familiarizados com esse idioma. </font><font style="vertical-align: inherit;">Como resultado, talvez voc√™ n√£o precise conhecer Ruby para aprender e usar o Puppet DSL de forma produtiva. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um exemplo de um manifesto Puppet do reposit√≥rio do PuppetLabs MySQL Puppet Module que instala e configura o pacote do cliente MySQL:</font></font><br>
<br>
<pre><code class="plaintext hljs"># @summary<font></font>
#     Installs and configures the MySQL client.<font></font>
#<font></font>
# @example Install the MySQL client<font></font>
#     class {'::mysql::client':<font></font>
#         package_name =&gt; 'mysql-client',<font></font>
#         package_ensure =&gt; 'present',<font></font>
#         bindings_enable =&gt; true,<font></font>
#     }<font></font>
#<font></font>
# @param bindings_enable<font></font>
#     Whether to automatically install all bindings. Valid values are `true`, `false`. Default to `false`.<font></font>
# @param install_options<font></font>
#     Array of install options for managed package resources. You must pass the appropriate options for the package manager.<font></font>
# @param package_ensure<font></font>
#     Whether the MySQL package should be present, absent, or a specific version. Valid values are 'present', 'absent', or 'x.y.z'.<font></font>
# @param package_manage<font></font>
#     Whether to manage the MySQL client package. Defaults to `true`.<font></font>
# @param package_name<font></font>
#     The name of the MySQL client package to install.<font></font>
#<font></font>
class mysql::client (<font></font>
    $bindings_enable = $mysql::params::bindings_enable,<font></font>
    $install_options = undef,<font></font>
    $package_ensure = $mysql::params::client_package_ensure,<font></font>
    $package_manage = $mysql::params::client_package_manage,<font></font>
    $package_name = $mysql::params::client_package_name,<font></font>
)  inherits mysql::params {<font></font>
    <font></font>
    include '::mysql::client::install'<font></font>
<font></font>
    if $bindings_enable {<font></font>
        class { 'mysql::bindings':<font></font>
            java_enable =&gt; true,<font></font>
            perl_enable =&gt; true,<font></font>
            php_enable =&gt; true,<font></font>
            python_enable =&gt; true,<font></font>
            ruby_enable =&gt; true,<font></font>
        }<font></font>
    }<font></font>
<font></font>
# Anchor pattern workaround to avoid resources of mysql::client::install to<font></font>
# "float off" outside mysql::client<font></font>
anchor { 'mysql::client::start': }<font></font>
-&gt; Class['mysql::client::install']<font></font>
-&gt; anchor { 'mysql::client::end': }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma vantagem importante do Puppet √© que, diferentemente das linguagens de programa√ß√£o imperativas listadas acima, o Puppet DSL √© declarativo, de certa forma semelhante ao XML, assim como o c√≥digo YAML do exemplo de c√≥digo Ansible acima. </font><font style="vertical-align: inherit;">A abordagem declarativa do Puppet e do Ansible √© realmente rastreada nos dois exemplos de c√≥digo. </font><font style="vertical-align: inherit;">Em termos de codifica√ß√£o, eles s√£o semelhantes e mais pr√≥ximos um do outro do que ferramentas como Chef. </font><font style="vertical-align: inherit;">No entanto, a linguagem declarativa Puppet tamb√©m fornece constru√ß√µes semelhantes ao Ruby, como express√µes condicionais e itera√ß√µes, o que novamente √© um compromisso para os usu√°rios do Ruby e para aqueles que n√£o falam o idioma.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs. Puppet: Facilidade de Uso</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a equipe de desenvolvimento, a facilidade de uso deve ser uma parte importante da avalia√ß√£o do SCM. Dado que os desenvolvedores da Ansible est√£o concentrando muito esfor√ßo na facilidade de uso do sistema, n√£o h√° concorrentes nisso. Configurar, programar e gerenciar os n√≥s fornece uma interface muito simples para engenheiros de desenvolvimento e administradores de sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o significa que o Puppet seja dif√≠cil de usar, mas esse sistema se comporta com confian√ßa enquanto voc√™ segue o m√©todo proposto de automa√ß√£o de sua infraestrutura. Nesta √°rea, o Puppet √© bastante forte, modelando explicitamente cada recurso e fornecendo aos usu√°rios m√≥dulos com comportamento padr√£o que s√£o eficientemente usados ‚Äã‚Äãem seus manifestos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em termos de aprendizado do usu√°rio, as duas plataformas s√£o f√°ceis de usar, mas o Ansible tem uma pequena vantagem. </font><font style="vertical-align: inherit;">√â f√°cil obter um estilo YAML declarativo, portanto, o c√≥digo Ansible nunca √© muito complicado. </font><font style="vertical-align: inherit;">Enquanto isso, o Puppet passou a reconhecer alguns dos problemas associados √† combina√ß√£o de dados e c√≥digo nos mesmos arquivos de origem. </font><font style="vertical-align: inherit;">Isso levou ao advento do Puppet Hiera, uma solu√ß√£o de armazenamento que usa o formato YAML para armazenar pares de valores-chave de dados de configura√ß√£o. </font><font style="vertical-align: inherit;">Hiera ajuda bastante na simplifica√ß√£o e otimiza√ß√£o da experi√™ncia do Puppet DevOps. </font><font style="vertical-align: inherit;">O formato YAML provou ser bastante popular no gerenciamento de configura√ß√µes, com o Salt do SaltStack tamb√©m usando esse formato.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dois SCMs t√™m a capacidade de validar e testar seu CM, desde a verifica√ß√£o de sintaxe at√© a integra√ß√£o da infraestrutura como c√≥digo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs. Puppet: custos de licenciamento e implementa√ß√£o</font></font></h3><br>
<br>
<img src="https://habrastorage.org/webt/hc/dr/ex/hcdrexeefe8ias0zzyh2f7lqngu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ferramentas de c√≥digo aberto, o Ansible e o Puppet t√™m muito em comum em suas pol√≠ticas de licenciamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O lan√ßamento de c√≥digo aberto do Ansible √© totalmente gratuito. </font><font style="vertical-align: inherit;">As empresas que precisam de mais garantias de seguran√ßa, estabilidade e confiabilidade s√£o incentivadas a atualizar para o Ansible Engine, o produto de classe empresarial que acompanha o Red Hat Linux. </font><font style="vertical-align: inherit;">Os custos de licen√ßa do Ansible Engine geralmente variam de US $ 47,50 a US $ 70 por ano por n√≥ e dependem da sua configura√ß√£o preferida.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ precisar de suporte t√©cnico com solu√ß√£o r√°pida de problemas, use a vers√£o corporativa. </font><font style="vertical-align: inherit;">A Ferramenta de Gerenciamento Ansible Tower para Grandes Empresas est√° dispon√≠vel como um pacote de servi√ßos e fornece √† sua empresa mais recursos de treinamento, gerenciamento e agendamento de tarefas por meio de um painel de controle gr√°fico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o Ansible, o lan√ßamento do Puppet de c√≥digo aberto est√° dispon√≠vel gratuitamente. </font><font style="vertical-align: inherit;">Para recursos corporativos adicionais e suporte t√©cnico, as organiza√ß√µes podem atualizar para o Puppet Enterprise, que custa de US $ 112 a US $ 199 por ano por n√≥. </font><font style="vertical-align: inherit;">O Puppet Enterprise oferece um pacote de v√°rias ferramentas, incluindo relat√≥rios e monitoramento do status da infraestrutura da empresa.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: Comunidade</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Puppet, lan√ßado em 2005, √© uma ferramenta antiga do DevOps, por isso teve mais tempo para criar sua pr√≥pria comunidade e base de usu√°rios. No entanto, o Ansible, lan√ßado em 2012, gra√ßas √† sua nova abordagem, conseguiu atrair um p√∫blico ainda maior e criar uma comunidade muito din√¢mica de entusiastas e usu√°rios de desenvolvedores. Os usu√°rios do Puppet incluem empresas como Uber, Salesforce e Paypal, enquanto a comunidade Ansible inclui empresas como Digital Ocean, 9GAG e TypeForm.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se compararmos um indicador t√£o importante do desenvolvimento de produtos de c√≥digo aberto como o n√∫mero de colaboradores que participam do desenvolvimento no GitHub, o Ansible com mais de 4.800 colaboradores √© muito superior ao Puppet, com seus 527 colaboradores no desenvolvimento de produtos. O desenvolvimento do Ansible nos √∫ltimos anos foi t√£o r√°pido que gerou a cria√ß√£o de um reposit√≥rio "gal√°ctico" separado do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible Galaxy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Isso significa que a comunidade Ansible se esfor√ßa para compartilhar seu c√≥digo, contribuindo assim para o desenvolvimento adicional do produto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto isso, a comunidade Puppet, que est√° se desenvolvendo de forma mais lenta e constante, criou uma infraestrutura para facilitar a localiza√ß√£o de solu√ß√µes para atender √†s suas necessidades de SCM. </font><font style="vertical-align: inherit;">O Puppet Forge fornece m√≥dulos para tarefas comuns de gerenciamento de configura√ß√£o da comunidade Puppet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ambos os sistemas possuem ferramentas de primeira classe para monitorar o ciclo de vida de um projeto de gerenciamento de configura√ß√£o por meio da linha de comando. </font><font style="vertical-align: inherit;">O Puppet e o Ansible se integram bem a outros sistemas DevOps amplamente usados, como Docker, Kubernetes e Jenkins, e plataformas de computa√ß√£o em nuvem da AWS e do Azure.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ansible vs Puppet: qual √© o melhor?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta quest√£o, a escolha √© sua. O estilo declarativo do Ansible e do Puppet significa que essas ferramentas t√™m muito mais em comum do que outros sistemas de gerenciamento de configura√ß√£o. No entanto, para fazer a melhor escolha, voc√™ precisa prestar aten√ß√£o especial em como as necessidades de sua equipe s√£o combinadas com o design e as vantagens de um SCM espec√≠fico. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Ansible √© mais adequado para aqueles que est√£o interessados ‚Äã‚Äãna configura√ß√£o no estilo YAML e compartilham a filosofia do Ansible de ser o mais simples poss√≠vel ao gerenciar um grande conjunto de m√°quinas de forma r√°pida e simult√¢nea. Al√©m disso, essa filosofia se concentra no uso de fun√ß√µes SSH existentes, em vez de criar agentes do usu√°rio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Puppet √© mais adequado para equipes que preferem o DSL, que modela os recursos do sistema de maneira consistente e repetitiva. </font><font style="vertical-align: inherit;">√â exatamente isso que o Puppet DSL faz, juntamente com todo um ecossistema de ferramentas para tornar grandes equipes previs√≠veis e f√°ceis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ sabe exatamente quais princ√≠pios de gerenciamento de configura√ß√£o melhor atendem √†s suas necessidades, escolher entre Puppet e Ansible n√£o ser√° um problema para voc√™.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para facilitar sua escolha, sugerimos que voc√™ se familiarize com as principais vantagens e desvantagens de ambos os sistemas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bx/i8/j6/bxi8j6fcayvlx5bn80fdevkr8hy.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pouco de publicidade :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado por ficar com a gente. Voc√™ gosta dos nossos artigos? Deseja ver materiais mais interessantes? Ajude-nos fazendo um pedido ou recomendando aos seus amigos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS na nuvem para desenvolvedores a partir de US $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anal√≥gico exclusivo de servidores de n√≠vel b√°sico que foi inventado por n√≥s para voc√™: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toda a verdade sobre o VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10 GB DDR4 480 GB SSD 1 Gbps de US $ 19 ou como dividir o servidor?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 vezes mais barato no data center Equinix Tier IV em Amsterd√£?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Somente n√≥s temos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 TVs Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV a partir de US $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na Holanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - a partir de $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leia sobre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como criar um pr√©dio de infraestrutura. </font><font style="vertical-align: inherit;">classe c usando servidores Dell R730xd E5-2650 v4 que custam 9.000 euros por um centavo?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt490490/index.html">Leitura de fim de semana: 10 materiais sobre os efeitos do som na sa√∫de - da ‚Äúhigiene do ru√≠do‚Äù ao bom sono e GTD</a></li>
<li><a href="../pt490492/index.html">Rob√¥ de armaz√©m aprende a classificar coisas fora do padr√£o</a></li>
<li><a href="../pt490494/index.html">Ratos, Widiots e jogadores: propaganda dos perigos dos videogames nos anos 80</a></li>
<li><a href="../pt490496/index.html">Criando uma loja online no Nuxt.js 2 Passo a passo - Parte 1</a></li>
<li><a href="../pt490498/index.html">Enquanto escrevia uma criptomoeda semi-descentralizada em PHP. (Parte 2 - Desenvolvimento)</a></li>
<li><a href="../pt490510/index.html">Empresas gastam US $ 16 bilh√µes em drones para capturar 8 trilh√µes de mercado</a></li>
<li><a href="../pt490512/index.html">(Quase) Gere cores automaticamente</a></li>
<li><a href="../pt490516/index.html">A IA existe, mas n√£o √© isso que pensamos?</a></li>
<li><a href="../pt490518/index.html">Uma introdu√ß√£o √† estrutura arquitet√¥nica de an√°lise de dados de Lena</a></li>
<li><a href="../pt490520/index.html">As origens da matem√°tica: id√©ias l√≥gicas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>