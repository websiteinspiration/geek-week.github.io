<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äç‚öñÔ∏è ‚ôøÔ∏è üìß Comprender la actividad de Android launchMode: est√°ndar, singleTop, singleTask y singleInstance üõ∏ üëåüèº üîÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La traducci√≥n del art√≠culo fue preparada especialmente para estudiantes avanzados en desarrollo de Android .
 
 
 
 La actividad es uno de los concept...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comprender la actividad de Android launchMode: est√°ndar, singleTop, singleTask y singleInstance</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/493802/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La traducci√≥n del art√≠culo fue preparada especialmente para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estudiantes avanzados en desarrollo de Android</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/rz/oc/v4/rzocv4m1jq5tpiy0oisluhhgrfs.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La actividad es uno de los conceptos m√°s llamativos en Android (el sistema operativo m√≥vil m√°s popular con una arquitectura de gesti√≥n de memoria bien dise√±ada que implementa perfectamente la multitarea). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De una forma u otra, con el lanzamiento de Activity en la pantalla, no todo es tan simple. La forma en que se ejecut√≥ tambi√©n es importante. Hay muchos matices en este tema. Uno de los realmente importantes es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , del que hablaremos en este art√≠culo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada actividad se crea para trabajar con diferentes objetivos. Algunos de ellos est√°n dise√±ados para trabajar por separado con cada intento, por ejemplo, actividad enviada para redactar correos electr√≥nicos en el cliente de correo. Mientras que otros est√°n dise√±ados para funcionar como un singleton, como un buz√≥n de actividad.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es por eso que es importante indicar si necesita crear una nueva Actividad o usar una existente, de lo contrario, puede provocar una mala experiencia de usuario o fallas. </font><font style="vertical-align: inherit;">Gracias a los desarrolladores del kernel de Android, esto es f√°cil de hacer con </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que fue dise√±ado espec√≠ficamente para esto.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definici√≥n de LaunchMode </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esencialmente, podemos definir </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directamente como un atributo de etiqueta </font></font><code><code>&lt;</code>activity&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>AndroidManifest.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleTaskActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleTask launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleTask"</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay 4 tipos de launchMode disponibles. Echemos un vistazo a ellos uno a la vez. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√°ndar</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Este es el modo predeterminado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comportamiento de una Actividad establecida en este modo siempre crear√° una nueva Actividad para trabajar por separado con cada Intento enviado. De hecho, si se enviaron 10 Intentos para redactar un correo electr√≥nico, se deben lanzar 10 Actividades para servir cada Intento por separado. Como resultado, se puede iniciar un n√∫mero ilimitado de tales Actividades en el dispositivo. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comportamiento en Android pre-Lollipop</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Este tipo de actividad se crear√° y se colocar√° en la parte superior de la pila en la misma tarea que envi√≥ la intenci√≥n.</font></font><br>
 <br>
 <img src="https://habrastorage.org/webt/ne/n2/2u/nen22uybqupb_f6jnw5hvjz90rc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La siguiente imagen muestra lo que sucede cuando compartimos la imagen con la Actividad est√°ndar. Se apilar√° en la misma tarea descrita anteriormente, aunque son de diferentes aplicaciones. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/t5/fz/wpt5fzwohvycuouxans3y_t11vu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y esto es lo que ver√° en el administrador de tareas. (Puede parecer un poco extra√±o) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/u_/ii/s8u_iioeu_3jyfu9e2va7xypr54.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si cambiamos la aplicaci√≥n a otra tarea y luego volvemos a la Galer√≠a, a√∫n veremos que el modo de lanzamiento est√°ndar se coloca encima de la tarea Galer√≠a. Como resultado, si necesitamos hacer algo en la Galer√≠a, primero debemos terminar nuestro trabajo en esta Actividad adicional. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comportamiento en Android Lollipop</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si estas actividades se relacionan con la misma aplicaci√≥n, el comportamiento ser√° el mismo que en la implementaci√≥n previa a Lollipop, colocando en la pila encima de la tarea.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/pm/90/ljpm90f0v8oh12ygrs0hrqxnmxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero en caso de que la intenci√≥n se env√≠e desde otra aplicaci√≥n, se crear√° una nueva tarea y la actividad reci√©n creada se colocar√° como ra√≠z, como se muestra a continuaci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/bn/ci/rebncivt1yw-otyjkghmjmevxss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es lo que ver√° en el administrador de tareas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/vh/us/stvhusvjhnp8tmqogzkrenle3am.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto se debe a que el sistema de gesti√≥n de tareas se ha modificado en Lollipop, se ha vuelto mejor y m√°s comprensible. En Lollipop, simplemente puede volver a la Galer√≠a, ya que est√° en una tarea diferente. Puede enviar otra intenci√≥n, se crear√° una nueva tarea que servir√° a la intenci√≥n de la misma manera que la anterior. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/iz/p_/iaizp_8fdhzzyft95zupxt89q54.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de este tipo de actividad es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redactar actividad de correo electr√≥nico</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font><b><font style="vertical-align: inherit;">actividad </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de publicaci√≥n de estado de redes sociales</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(actualizaci√≥n de estado en redes sociales). </font><font style="vertical-align: inherit;">Si tiene una Actividad en mente que procesa cada Intento por separado, entonces est√° pensando en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una Actividad est√°ndar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTop</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente modo es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se comporta de la misma manera que el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√°ndar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo que significa que puede crear tantas instancias de SingleTop Activity como queramos. </font><font style="vertical-align: inherit;">La √∫nica diferencia es que si ya hay una instancia de Actividad con el mismo tipo en la parte superior de la pila en la tarea de llamada, no se crear√° ninguna Actividad nueva, en cambio, el Intento se enviar√° a la instancia de Actividad existente a trav√©s del m√©todo </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/uq/dj/khuqdjmchshqsq4cvxsybngidg8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el modo SingleTop, debe considerar manejar la intenci√≥n entrante </font></font><code>onCreate()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para que funcione en todos los casos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de uso de este modo es la funci√≥n de b√∫squeda. Pensemos en crear un cuadro de b√∫squeda que lo dirija a SearchActivity para ver los resultados de la b√∫squeda. Para una mejor experiencia de usuario, generalmente siempre ponemos el cuadro de b√∫squeda en la p√°gina de resultados de b√∫squeda para permitir al usuario realizar la siguiente b√∫squeda sin volver atr√°s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora imagine que si siempre lanzamos una nueva SearchActivity para servir un nuevo resultado de b√∫squeda, obtendremos 10 nuevas actividades para 10 iteraciones de la b√∫squeda. Ser√≠a muy extra√±o regresar, ya que tendr√≠a que hacer clic 10 veces para revisar todos los resultados de b√∫squeda y volver a la Actividad ra√≠z.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cambio, si SearchActivity ya est√° en la parte superior de la pila, es mejor enviar un Intento a una instancia de Actividad existente y dejar que actualice el resultado de la b√∫squeda. Ahora solo habr√° una SearchActivity ubicada en la parte superior de la pila, y simplemente puede hacer clic en el bot√≥n Atr√°s una vez para volver a la Actividad anterior. Eso tiene m√°s sentido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cualquier caso, singleTop funciona en la misma tarea que la persona que llama. Si espera que la intenci√≥n se env√≠e a una actividad existente, colocada encima de cualquier otra tarea, deber√≠a decepcionarlo diciendo que all√≠ ya no funciona. En caso de que la intenci√≥n se env√≠e desde otra aplicaci√≥n a singleTop Activity, la nueva actividad se lanzar√° en el mismo aspecto que para standart launchMode (</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pre-Lollipop: colocado encima de la tarea de llamada, Lollipop: se crear√° una nueva tarea)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SingleTask</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este modo es muy diferente de standart y singleTop. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La actividad con singleTask launchMode solo puede tener una instancia en el sistema (ala singleton)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si ya existe una instancia de Actividad en el sistema, toda la tarea que contiene la instancia se mover√° hacia arriba y la Intenci√≥n se proporcionar√° a trav√©s del m√©todo </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. De lo contrario, se crear√° una nueva Actividad y se colocar√° en la tarea correspondiente. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajar en una aplicaci√≥n</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si no hubo una sola instancia de Actividad de Tarea en el sistema, se crear√° una nueva y simplemente se colocar√° en la pila en la misma tarea. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tl/gd/v5/tlgdv5pp1aup44lacg-a39l4qtg.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero si existe, todas las Actividades ubicadas encima de esta Actividad de Tarea √∫nica se destruir√°n brutalmente de manera autom√°tica (el ciclo de vida se completa) para mostrar la Actividad deseada en la parte superior de la pila.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al mismo tiempo, la intenci√≥n se enviar√° a SingleTask Activity a trav√©s de un m√©todo maravilloso </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pr/7l/e9/pr7le9ygampc5au3-slsqydvakq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No tiene sentido desde el punto de vista de la experiencia del usuario, pero est√° dise√±ado de esta manera ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede notar un matiz que se menciona en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el sistema crea una nueva tarea e instancia una instancia de actividad en la ra√≠z de la nueva tarea. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero en la pr√°ctica, parece que esto no funciona como se describe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . SingleTask Activity todav√≠a se coloca en la parte superior de la pila de Actividad de la tarea, como se puede ver en el resultado del comando </font></font><code>dumpsys activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ej√©rcito de reserva</font></font><br>
<br>
<pre><code class="java hljs">sk id #<span class="hljs-number">239</span>
  TaskRecord{<span class="hljs-number">428</span>efe30 #<span class="hljs-number">239</span> A=com.thecheesefactory.lab.launchmode U=<span class="hljs-number">0</span> sz=<span class="hljs-number">2</span>}<font></font>
  Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=<span class="hljs-number">0x10000000</span> cmp=com.thecheesefactory.lab.launchmode/.StandardActivity }<font></font>
    Hist #<span class="hljs-number">1</span>: ActivityRecord{<span class="hljs-number">429</span>a88d0 u0 com.thecheesefactory.lab.launchmode/.SingleTaskActivity t239}<font></font>
      Intent { cmp=com.thecheesefactory.lab.launchmode/.SingleTaskActivity }<font></font>
      ProcessRecord{<span class="hljs-number">42243130</span> <span class="hljs-number">18965</span>:com.thecheesefactory.lab.launchmode/u0a123}<font></font>
    Hist #<span class="hljs-number">0</span>: ActivityRecord{<span class="hljs-number">425f</span>ec98 u0 com.thecheesefactory.lab.launchmode/.StandardActivity t239}<font></font>
      Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=<span class="hljs-number">0x10000000</span> cmp=com.thecheesefactory.lab.launchmode/.StandardActivity }<font></font>
      ProcessRecord{<span class="hljs-number">42243130</span> <span class="hljs-number">18965</span>:com.thecheesefactory.lab.launchmode/u0a123}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea que SingleTask Activity se comporte como se describe en el documento: cree una nueva tarea y coloque Activity como la Actividad ra√≠z. </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debe </font><font style="vertical-align: inherit;">definir un atributo </font><font style="vertical-align: inherit;">para la actividad SingleTask de la siguiente manera.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleTaskActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleTask launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleTask"</span>
    <span class="hljs-attr">android:taskAffinity</span>=<span class="hljs-string">""</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ese ser√° el resultado cuando intentemos correr </font></font><code>SingleTaskActivity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qn/au/9f/qnau9ftfyqxjtq8yty5cjlfaxiq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ln/pk/d4/lnpkd4alkah9kvmiphylvk8mx6a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Su tarea es decidir si usar </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o no, dependiendo del comportamiento deseado de la Actividad. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interactuar con otra aplicaci√≥n</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tan pronto como se env√≠e el Intento desde otra aplicaci√≥n y no se haya creado ninguna instancia de la Actividad en el sistema, se </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear√° una nueva tarea</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con una nueva Actividad colocada como Actividad ra√≠z. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/wv/9p/bewv9pxsnqrp9rj2is8sfs1ka1m.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/7b/wc/_b/7bwc_bbpbwsbw0man-59yupltyw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no hay ninguna tarea que sea el propietario de la actividad de la tarea √∫nica que realiza la llamada, se mostrar√° una nueva actividad. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0e/eo/j5/0eeoj5h6thjdff3izlqcttpphde.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si existe una instancia de una Actividad en una tarea, toda la tarea se mover√° hacia arriba, y para cada Actividad individual ubicada por encima de una Actividad de Tarea √∫nica, se completar√° el ciclo de vida</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si se presiona el bot√≥n Atr√°s, el usuario debe pasar por la Actividad en la pila antes de regresar a la tarea de llamada. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dy/if/9d/dyif9dvekt6pictwq7znk7bqb-i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de uso de este modo es cualquier Actividad de punto de entrada, por ejemplo, la p√°gina Bandeja de entrada de un cliente de correo electr√≥nico o una l√≠nea de tiempo de una red social. </font><font style="vertical-align: inherit;">Estas actividades no suponen m√°s de una instancia, por lo que singleTask har√° su trabajo perfectamente. </font><font style="vertical-align: inherit;">En cualquier caso, debe usar este modo sabiamente, ya que en este modo las Actividades pueden destruirse sin la confirmaci√≥n del usuario, como se describi√≥ anteriormente.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√∫nica instancia</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este modo es muy similar a singleTask, donde solo podr√≠a existir una instancia de una Actividad en un sistema. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La diferencia es que una tarea que tiene esta Actividad solo puede tener una Actividad, una que tenga un atributo SingleInstance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si se llama a otra Actividad desde este tipo de Actividad, se crea autom√°ticamente una nueva tarea para acomodar esta nueva Actividad. Del mismo modo, si se llama a la actividad singleInstance, se crear√° una nueva tarea para alojar esta actividad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cualquier caso, el resultado es bastante extra√±o. De la informaci√≥n proporcionada</font></font><code>dumpsys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, est√° claro que hay dos tareas en el sistema, pero solo una aparece en el administrador de tareas, dependiendo de cu√°l est√© en la parte superior. Como resultado, aunque hay una tarea que todav√≠a se est√° ejecutando en segundo plano, no podemos volver a ponerla en primer plano. No tiene ning√∫n sentido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es lo que sucede cuando se llama a una sola actividad de entrada mientras ya existe una actividad en la pila. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/2v/qy/ea2vqyvflpzuia5elbfl7cd_fzm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aqu√≠ est√° lo que vemos en el administrador de tareas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5a/lr/7s/5alr7sfn0d253r5-wi90zpmaoc4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que esta tarea solo puede tener una Actividad, ya no podemos volver a la tarea No. 1. La √∫nica forma de hacerlo es reiniciar la aplicaci√≥n desde el iniciador, pero, como resultado, la tarea singleInstance se ocultar√° en segundo plano.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De todos modos, hay algunas soluciones para este problema. </font><font style="vertical-align: inherit;">Al igual que con SingleTask Activity, simplemente asigne un atributo </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a singleInstance Activity, permitiendo que existan m√∫ltiples tareas en el administrador de tareas.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleInstanceActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleInstance launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleInstance"</span>
    <span class="hljs-attr">android:taskAffinity</span>=<span class="hljs-string">""</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora la imagen tiene m√°s sentido. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4g/g7/sr/4gg7srssanlpsftak21yt7ge4o4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este modo rara vez se usa. </font><font style="vertical-align: inherit;">Algunos de los casos de uso pr√°cticos son un iniciador de actividad o una aplicaci√≥n para la cual est√° 100% seguro de que solo debe haber una actividad. </font><font style="vertical-align: inherit;">En cualquier caso, le sugiero que no use este modo, a menos que haya una emergencia.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banderas de intenciones</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s </font></font><code>AndroidManifest.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de establecer el </font><font style="vertical-align: inherit;">modo de inicio directamente en </font><font style="vertical-align: inherit;">, tambi√©n podemos ajustar el comportamiento utilizando una herramienta llamada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indicadores de intenci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por ejemplo:</font></font><br>
<br>
<pre><code class="java hljs">Intent intent = <span class="hljs-keyword">new</span> Intent(StandardActivity.<span class="hljs-keyword">this</span>, StandardActivity.class);<font></font>
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);<font></font>
startActivity(intent);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
se iniciar√° </font></font><code>StandardActivity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con la condici√≥n singleTop launchMode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay bastantes banderas con las que puede trabajar. </font><font style="vertical-align: inherit;">Puede encontrar m√°s informaci√≥n sobre esto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que hayas encontrado √∫til este art√≠culo =) </font></font><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aprende m√°s sobre el curso</font></font></a></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es493792/index.html">Informes del segundo Meetup ROS sobre navegaci√≥n de robots</a></li>
<li><a href="../es493794/index.html">C√≥mo la oficina de Mosc√∫ de FunCorp cambi√≥ a udalenka en 1 d√≠a</a></li>
<li><a href="../es493796/index.html">4 mejores patrones de dise√±o para pruebas automatizadas (y 86 m√°s)</a></li>
<li><a href="../es493798/index.html">No hay dise√±o en 1C UX / UI</a></li>
<li><a href="../es493800/index.html">Probabilidad emp√≠rica</a></li>
<li><a href="../es493804/index.html">Jugador que habla en frambuesa</a></li>
<li><a href="../es493808/index.html">C√≥digo asincr√≥nico linealizado con corutina</a></li>
<li><a href="../es493810/index.html">Cinco a√±os de desarrollo intensivo del mercado para el reconocimiento de documentos.</a></li>
<li><a href="../es493814/index.html">C√≥mo realizamos entrevistas en Barcelona</a></li>
<li><a href="../es493816/index.html">Git Guide N√∫mero de parte 1: todo lo que necesita saber sobre el directorio .git</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>