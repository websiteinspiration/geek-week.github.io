<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏏 👲🏻 🧑🏽 Grafana, InfluxDB, dua tag dan satu jumlah. Atau bagaimana cara menghitung jumlah subkelompok? 🔱 👇🏿 🗼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! 
 
 Terlibat dalam pengujian kinerja. Dan saya sangat suka mengatur pemantauan dan menikmati metrik di Grafana . Dan standar untuk meny...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Grafana, InfluxDB, dua tag dan satu jumlah. Atau bagaimana cara menghitung jumlah subkelompok?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/490764/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ol/b6/9a/olb69a8cdqhqtmjf-ic8x8qjevi.png"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Halo semuanya! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terlibat dalam pengujian kinerja. </font><font style="vertical-align: inherit;">Dan saya sangat suka mengatur pemantauan dan menikmati metrik di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dan standar untuk menyimpan metrik pada alat beban adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda dapat menyimpan metrik dari alat populer seperti:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="  Apache.JMeter
Real-time results

In this document we will present the configuration setup to graph and historize the data in different backends:

 • InfluxDB setup for InfluxDBBackendListenerClient
 • InfluxDB setup for GraphiteBackendListenerClient
 • Grafana
 • Graphite"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache.JMeter</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="  Gatling
Realtime monitoring

The sections below describe how to configure Gatling with InfluxDB and Graphite, and use Grafana as a graphing library"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatling</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="  LoadRunner Enterprise
Manage analysis servers

This section describes how to configure external analysis database servers to be used with LoadRunner Enterprise"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perusahaan Loadrunner</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="  Yandex.Tank
Modules / Artifact uploaders / InfluxDB

      Yandex.Tank  InfluxDB"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex. Terima kasih</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bekerja dengan alat pengujian kinerja dan metrik mereka, saya telah mengumpulkan pilihan resep pemrograman untuk bundel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Saya mengusulkan untuk mempertimbangkan masalah menarik yang muncul ketika ada metrik dengan dua atau lebih tag. </font><font style="vertical-align: inherit;">Saya pikir ini tidak biasa. </font><font style="vertical-align: inherit;">Dan dalam kasus umum, tugas terdengar seperti ini: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menghitung metrik total untuk grup, yang dibagi menjadi beberapa subkelompok</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada tiga opsi: </font></font></h3><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jumlah yang dikelompokkan berdasarkan Jenis tag</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana-way. </font><font style="vertical-align: inherit;">Kami menggunakan setumpuk nilai</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jumlah tertinggi dengan subquery</font></font></a></li>
</ol> <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana semua ini dimulai</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pemantauan JVM MBean yang dikonfigurasi menggunakan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jolokia</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegraf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dan dia memvisualisasikan metrik pada kumpulan memori - berapa banyak memori yang dialokasikan oleh masing-masing kumpulan memori di HEAP dan seterusnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagan pada kolam memori JVM dan aktivitas pemulung dari 13:00 hari sebelumnya hingga 01:00 malam hari saat ini (periode 12 jam). Di sini Anda dapat melihat bahwa kumpulan memori dibagi menjadi dua kelompok: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dan bahwa sekitar pukul 17.00 ada pengumpulan sampah, setelah itu ukuran kolam memori menurun: </font><font style="vertical-align: inherit;">
Untuk metrik mengumpulkan pada kolam memori, saya ditentukan </font><font style="vertical-align: inherit;">pengaturan berikut </font><font style="vertical-align: inherit;">di </font><b><font style="vertical-align: inherit;">Telegraf</font></b><font style="vertical-align: inherit;"> file konfigurasi </font><font style="vertical-align: inherit;">: </font><b><font style="vertical-align: inherit;">telegraf.conf</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ow/ow/os/owowosl0e-neglcsbew-0u7bjjq.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br>
<pre><code class="apache hljs">[<span class="hljs-attribute">outputs</span>.influxdb]
  <span class="hljs-attribute">urls</span> =<span class="hljs-meta"> ["http://influxdb_server:8086"]</span>
  <span class="hljs-attribute">database</span> = <span class="hljs-string">"telegraf"</span>
  <span class="hljs-attribute">username</span> = <span class="hljs-string">"login-InfluxDb"</span>
  <span class="hljs-attribute">password</span> = <span class="hljs-string">"*****"</span>
  <span class="hljs-attribute">retention_policy</span> = <span class="hljs-string">"month"</span>
  <span class="hljs-attribute">influx_uint_support</span> = false<font></font>
<font></font>
[<span class="hljs-attribute">agent</span>]
  <span class="hljs-attribute">collection_jitter</span> = <span class="hljs-string">"2s"</span>
  <span class="hljs-attribute">interval</span> = <span class="hljs-string">"2s"</span>
  <span class="hljs-attribute">precision</span> = <span class="hljs-string">"s"</span><font></font>
<font></font>
[[<span class="hljs-attribute">inputs</span>.jolokia<span class="hljs-number">2</span>_agent]]
  <span class="hljs-attribute">username</span> = <span class="hljs-string">"login-Jolokia"</span>
  <span class="hljs-attribute">password</span> = <span class="hljs-string">"*****"</span>
  <span class="hljs-attribute">urls</span> =<span class="hljs-meta"> ["http://127.0.0.1:7777/jvm-service"]</span><font></font>
<font></font>
[[<span class="hljs-attribute">inputs</span>.jolokia<span class="hljs-number">2</span>_agent.metric]]
  <span class="hljs-attribute">paths</span> =<span class="hljs-meta"> ["Usage","PeakUsage","CollectionUsage","Type"]</span>
  <span class="hljs-attribute">name</span> = <span class="hljs-string">"java_memory_pool"</span>
  <span class="hljs-attribute">mbean</span> = <span class="hljs-string">"java.lang:name=*,type=MemoryPool"</span>
  <span class="hljs-attribute">tag_keys</span> =<span class="hljs-meta"> ["name"]</span><font></font>
<font></font>
[[<span class="hljs-attribute">processors</span>.converter]]<font></font>
  [<span class="hljs-attribute">processors</span>.converter.fields]
    <span class="hljs-attribute">integer</span> =<span class="hljs-meta"> ["CollectionUsage.*", "PeakUsage.*", "Usage.*"]</span>
    <span class="hljs-attribute">tag</span> =<span class="hljs-meta"> ["Type"]</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana, saya</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> membuat kueri untuk </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menampilkan dalam grafik nilai metrik maksimum </font></font><b><code>Usage.Committed</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk periode waktu dengan langkah </font></font><b><code>$granularity</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1m) dan dikelompokkan berdasarkan dua tag </font></font><b><code>Type</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(HEAP atau NON_HEAP) dan </font></font><b><code>name</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Metaspace, G1 Gen Lama, ...): </font><font style="vertical-align: inherit;">
Kueri yang sama dalam bentuk teks, dengan mempertimbangkan semua variabel </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> (perhatikan untuk menghindari nilai variabel </font><font style="vertical-align: inherit;">- ini penting agar kueri berfungsi dengan benar):</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/qx/2z/-2/qx2z-2mblgxyi-u6g4mrbyvybf8.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><code>:regex</code></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>)
<span class="hljs-keyword">FROM</span> <span class="hljs-string">"telegraf"</span>.<span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span>
<span class="hljs-keyword">WHERE</span>
    host =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span>
    jolokia_agent_url =~ /^${jolokia:regex}$/ <span class="hljs-keyword">AND</span><font></font>
    $timeFilter<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-built_in">time</span>($granularity)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kueri yang sama dalam bentuk teks, dengan mempertimbangkan nilai spesifik variabel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>)
<span class="hljs-keyword">FROM</span> <span class="hljs-string">"telegraf"</span>.<span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span>
<span class="hljs-keyword">WHERE</span>
    host =~ /^serverName$/ <span class="hljs-keyword">AND</span>
    jolokia_agent_url =~ /^<span class="hljs-keyword">http</span>:\/\/<span class="hljs-number">127</span>\<span class="hljs-number">.0</span>\<span class="hljs-number">.0</span>\<span class="hljs-number">.1</span>:<span class="hljs-number">7777</span>\/jvm-service$/ <span class="hljs-keyword">AND</span>
    <span class="hljs-built_in">time</span> &gt;= <span class="hljs-number">1583834400000</span>ms <span class="hljs-keyword">and</span> <span class="hljs-built_in">time</span> &lt;= <span class="hljs-number">1583877600000</span>ms
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-built_in">time</span>(<span class="hljs-number">1</span>m)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengelompokan berdasarkan waktu </font></font><b><code>GROUP BY time($granularity)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau </font></font><b><code>GROUP BY time(1m)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">digunakan untuk mengurangi jumlah poin pada grafik. </font><font style="vertical-align: inherit;">Untuk jangka waktu 12 jam dan langkah pengelompokan 1 menit, kita mendapatkan: 12 x 60 = 720 kali atau 721 poin (titik terakhir dengan nilai nol).</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingat bahwa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">721</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah jumlah titik yang diharapkan dalam menanggapi permintaan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan pengaturan saat ini untuk interval waktu (12 jam) dan langkah pengelompokan (1 menit).</font></font></blockquote> <br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP kumpulan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
memori </font><b><font style="vertical-align: inherit;">: Metaspace</font></b><font style="vertical-align: inherit;"> (biru) memimpin dalam konsumsi memori pada pukul 20:00. </font><font style="vertical-align: inherit;">Dan menurut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP: G1 Old Gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (kuning) ada lonjakan lokal kecil di 17:03. </font><font style="vertical-align: inherit;">Dan pada saat 20:00, secara total, semua </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pool tersisa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172,5 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (113,2 + 45,9 + 13,4), dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kolam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">128 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (67 + 57 + 4).</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ku/mo/wf/kumowfdo6gkw3wx_b8mugtsp8l4.png"></a><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingat nilai-nilai untuk 20:00: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kolam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">172,5 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kolam </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">128 MiB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Kami akan fokus pada nilai-nilai ini di masa depan.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam konteks </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kami memperoleh nilai metrik dengan mudah. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam konteks hanya tag </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nilai metrik juga mudah diperoleh, karena semua nama kumpulan memori unik, dan cukup untuk membiarkan pengelompokan hasil hanya berdasarkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertanyaannya tetap: bagaimana cara mendapatkan ukuran apa yang dialokasikan untuk semua kelompok HEAP dan semua kelompok NON_HEAP secara total?</font></font></blockquote><br>
<a name="1"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Jumlah yang dikelompokkan berdasarkan Jenis tag</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1. </font><font style="vertical-align: inherit;">Jumlah yang dikelompokkan berdasarkan tag</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusi pertama yang mungkin terlintas dalam pikiran adalah mengelompokkan nilai-nilai dengan tag </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan menghitung jumlah nilai-nilai dalam setiap kelompok. </font><font style="vertical-align: inherit;">Kueri seperti itu akan terlihat seperti ini: </font><font style="vertical-align: inherit;">
Representasi tekstual dari permintaan penghitungan penjumlahan dikelompokkan berdasarkan </font><b><font style="vertical-align: inherit;">Jenis</font></b><font style="vertical-align: inherit;"> tag </font><font style="vertical-align: inherit;">dengan semua variabel </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/xz/w_/4a/xzw_4aonrgekrw4onxv9fwcctlg.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">sum</span>(<span class="hljs-string">"Usage.committed"</span>)
<span class="hljs-keyword">FROM</span> <span class="hljs-string">"telegraf"</span>.<span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span>
<span class="hljs-keyword">WHERE</span>
    host =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span>
    jolokia_agent_url =~ /^${jolokia:regex}$/ <span class="hljs-keyword">AND</span><font></font>
    $timeFilter<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
    <span class="hljs-string">"Type"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah kueri yang valid, tetapi hanya akan mengembalikan dua poin: jumlahnya akan dihitung dengan pengelompokan hanya dengan tag </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan dua nilai (HEAP dan NON_HEAP). </font><font style="vertical-align: inherit;">Kami bahkan tidak akan melihat jadwal. </font><font style="vertical-align: inherit;">Akan ada dua poin yang berdiri sendiri dengan nilai dalam jumlah besar (lebih dari 3 TiB): </font><font style="vertical-align: inherit;">
Jumlah seperti itu tidak cocok, diperlukan penguraian dalam interval waktu.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/sz/lx/bo/szlxboh0o4r3-jsq7jg9d49wnic.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2. </font><font style="vertical-align: inherit;">Jumlah yang dikelompokkan berdasarkan tag per menit</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kueri asli, kami mengelompokkan metrik berdasarkan interval </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ granularity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> khusus </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mari lakukan pengelompokan sekarang dengan interval khusus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kueri ini akan berubah, tambahnya </font></font><b><code>GROUP BY time($granularity)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">
Kami mendapatkan nilai yang meningkat, alih-alih 172,5 MiB oleh </font><b><font style="vertical-align: inherit;">NON_HEAP</font></b><font style="vertical-align: inherit;"> kita melihat 4,88 GiB: </font><font style="vertical-align: inherit;">
Karena metrik dikirim ke InfluxDB setiap 2 detik sekali (lihat </font><b><font style="vertical-align: inherit;">telegraf.conf di</font></b><font style="vertical-align: inherit;"> atas), jumlah bacaan dalam satu menit tidak akan memberikan jumlah pada saat ini, dan jumlah dari tiga puluh jumlah tersebut. </font><font style="vertical-align: inherit;">Kami tidak dapat </font><font style="vertical-align: inherit;">
membagi hasilnya dengan konstanta </font><b><font style="vertical-align: inherit;">30</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Karena </font><b><font style="vertical-align: inherit;">$ granularity</font></b><font style="vertical-align: inherit;"> adalah parameter, ia dapat disetel menjadi 1 menit dan 10 menit. </font><font style="vertical-align: inherit;">Dan nilai jumlahnya akan berubah.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/yb/xp/tw/ybxptwbmibq2xlujuuwbkwb83nq.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/9l/lo/hn/9llohn9ncpoztbtcsrfqzfzoqya.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3. </font><font style="vertical-align: inherit;">Tag dikelompokkan per detik</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mendapatkan nilai metrik dengan benar untuk intensitas pengumpulan metrik saat ini (2 detik), Anda perlu menghitung jumlah untuk interval tetap yang tidak melebihi intensitas pengumpulan metrik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita coba menampilkan statistik dengan pengelompokan dalam hitungan detik. Tambahkan ke </font></font><b><code>GROUP BY</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengelompokan </font></font><b><code>time(1s)</code></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">
Dengan granularity kecil seperti itu, kami mendapatkan sejumlah besar poin untuk interval waktu kami 12 jam (12 jam * 60 menit * 60 detik = interval 43.200, 43.201 poin per baris, yang terakhir adalah nol): </font><font style="vertical-align: inherit;">
43.201 poin di setiap baris grafik. Ada banyak </font><b><font style="vertical-align: inherit;">poin</font></b><font style="vertical-align: inherit;"> sehingga </font><b><font style="vertical-align: inherit;">InfluxDB</font></b><font style="vertical-align: inherit;"> akan membentuk respons untuk waktu yang lama, </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> akan mengambil respons lebih lama, dan kemudian browser akan menarik sejumlah besar poin untuk waktu yang lama.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/vn/sl/q_/vnslq_lq48mzzh9hgmjwiuvcy2i.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/_2/mw/4k/_2mw4ki9rcnf140m2doyqsn-zxy.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan tidak dalam setiap detik ada poin: metrik dikumpulkan setiap 2 detik, dan pengelompokan setiap detik, yang berarti bahwa setiap titik kedua akan menjadi nol. Untuk melihat garis yang halus, konfigurasikan koneksi nilai yang tidak kosong. Kalau tidak, kita tidak akan melihat grafik: </font><font style="vertical-align: inherit;">
Sebelumnya, </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> sedemikian rupa sehingga browser tergantung selama menggambar sejumlah besar poin. Sekarang versi </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> memiliki kemampuan untuk menggambar beberapa puluh ribu poin: browser cukup melompati beberapa dari mereka, menggambar grafik menggunakan data yang diencerkan. Tetapi grafik diperhalus. Tertinggi ditampilkan sebagai tertinggi rata-rata.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/xx/ya/hf/xxyahfkl3xzk6ezsakvgsbi8lp4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, ada grafik, ditampilkan secara akurat, metrik pada pukul 20:00 dihitung dengan benar, metrik dalam legenda grafik dihitung dengan benar. </font><font style="vertical-align: inherit;">Tapi grafiknya halus: semburan tidak terlihat di atasnya dengan akurasi 1 detik. </font><font style="vertical-align: inherit;">Secara khusus, lonjakan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada 17:03 menghilang dari grafik, grafik </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sangat halus: </font><font style="vertical-align: inherit;">
minus dalam kinerja jelas akan memanifestasikan dirinya dalam interval waktu yang lebih lama. </font><font style="vertical-align: inherit;">Jika Anda mencoba membuat grafik dalam sebulan (720 jam), dan tidak dalam 12 jam, maka semuanya akan membeku dengan rincian kecil (1 detik), akan ada terlalu banyak poin. </font><font style="vertical-align: inherit;">Dan ada minus dengan tidak adanya puncak, paradoks - </font><b><font style="vertical-align: inherit;">karena akurasi yang tinggi dalam mendapatkan metrik, kami mendapatkan akurasi rendah dari tampilan mereka</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/1g/vs/m8/1gvsm8owfg-ifjjcqwf-w1q2lbk.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a name="2"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Cara Grafana. </font><font style="vertical-align: inherit;">Kami menggunakan setumpuk nilai</font></font></h2><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">Itu</font></b><font style="vertical-align: inherit;"> tidak mungkin </font><font style="vertical-align: inherit;">
untuk </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membuat solusi</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sederhana dan efisien dengan </font><b><font style="vertical-align: inherit;">InfluxDB</font></b><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desainer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permintaan </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Kami hanya akan mencoba menggunakan alat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana untuk</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> merangkum metrik yang </font><b><font style="vertical-align: inherit;">ditampilkan</font></b><font style="vertical-align: inherit;"> dalam bagan asli. </font><font style="vertical-align: inherit;">Dan ya, ini mungkin!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1. </font><font style="vertical-align: inherit;">Cukup buat Hover tooltip / Stacked value: kummulative</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan membiarkan permintaan untuk memilih metrik tidak berubah, sama seperti pada bagian "Bagaimana semuanya dimulai": </font><font style="vertical-align: inherit;">
Metrik akan dikelompokkan berdasarkan </font><b><font style="vertical-align: inherit;">Jenis</font></b><font style="vertical-align: inherit;"> dan </font><b><font style="vertical-align: inherit;">nama</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tapi kami hanya akan menampilkan tag </font><b><font style="vertical-align: inherit;">Jenis</font></b><font style="vertical-align: inherit;"> dalam nama grafik </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">
Dan dalam pengaturan visualisasi, kami akan mengelompokkan metrik berdasarkan tumpukan </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> : </font><font style="vertical-align: inherit;">
Pertama, tambahkan pemisahan dua tag menjadi dua tumpukan A dan B yang berbeda, sehingga nilainya tidak berpotongan:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/s5/an/3e/s5an3errkt29lgc8byme6tnowz4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ls/vg/to/lsvgtohynssezzeiy04px0qwq3c.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/no/py/5g/nopy5ggb9ittxbz2phdei1egphg.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambahkan seri override</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / HEAP / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : A</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambahkan seri override</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / NON_HEAP / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : B</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian konfigurasikan visualisasi metrik untuk menampilkan nilai total dalam tooltip dengan grafik:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stacking &amp; Null value</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : On</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arahkan tooltip</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nilai tumpukan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : kumulatif</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arahkan tooltip</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : tunggal</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena berbagai fitur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda perlu melakukan tindakan dalam urutan itu. </font><font style="vertical-align: inherit;">Jika Anda mengubah urutan tindakan atau meninggalkan beberapa bidang dengan pengaturan default, sesuatu tidak akan berfungsi:</font></font><br>
<br>
<ul>
<li>    Stack <b>A</b>  <b>B</b>    <b>Stacking &amp; Null value</b> / <b>Stack</b>: On,    ;</li>
<li>  <b>Hover tooltip / Mode</b>    ,    <b>Single</b>,  <b>Hover tooltip</b>    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sekarang, kita melihat banyak garis, seperti diri kita sendiri. </font><font style="vertical-align: inherit;">Tapi! </font><font style="vertical-align: inherit;">Jika Anda </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengarahkan kursor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke </font><b><font style="vertical-align: inherit;">NON_HEAP</font></b><font style="vertical-align: inherit;"> teratas </font><font style="vertical-align: inherit;">, tooltip akan menampilkan jumlah nilai semua </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Jumlahnya dianggap benar, sudah oleh </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berarti </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">
Dan jika Anda mengarahkan kursor ke grafik paling atas dengan nama </font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;"> , kita akan melihat jumlahnya dengan </font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Grafik ditampilkan dengan benar. </font><font style="vertical-align: inherit;">Bahkan gelombang </font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;"> pada 17:03 terlihat: </font><font style="vertical-align: inherit;">
Secara formal, tugas selesai. </font><font style="vertical-align: inherit;">
Tetapi ada kontra - banyak grafik tambahan yang ditampilkan. </font><font style="vertical-align: inherit;">Anda perlu mengarahkan kursor ke atas. </font><font style="vertical-align: inherit;">Dan dalam legenda untuk grafik, bukan kumulatif, tetapi nilai-nilai individual ditampilkan, sehingga legenda menjadi tidak berguna.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/p9/tx/tw/p9txtwio9i4uozvliutk5_dg13o.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/g5/78/bo/g578boco1u0sncwf0jmh8ejsyow.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2. </font><font style="vertical-align: inherit;">Nilai susun: kumulatif dengan menyembunyikan garis tengah</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita perbaiki minus pertama dari solusi sebelumnya: pastikan bahwa grafik tambahan tidak ditampilkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk ini:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambahkan metrik baru dengan nama dan nilai 0 yang berbeda ke hasil.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambahkan metrik baru ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ke atas tumpukan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sembunyikan dari tampilan - garis asli </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menambahkan dua yang baru setelah permintaan utama: permintaan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menerima seri dengan nilai 0 dan nama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[NON_HEAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan permintaan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menerima seri dengan nilai 0 dan nama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HEAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Untuk mendapatkan 0, kami mengambil nilai pertama bidang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Usage.committed"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di setiap grup waktu </font><font style="vertical-align: inherit;">dan mengurangi: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pertama ("Usage.committed") - pertama ("Usage.committed")</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - kami mendapatkan kestabilan 0. Nama-nama grafik diubah tanpa kehilangan makna karena tanda kurung: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[NON_HEAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HEAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">[HEAP]</font></b><font style="vertical-align: inherit;"> dan </font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;"> digabungkan menjadi </font><b><font style="vertical-align: inherit;">Stack A</font></b><font style="vertical-align: inherit;"> , dan juga menyembunyikan semua </font><b><font style="vertical-align: inherit;">HEAP</font></b><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">[NON_HEAP]</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/no/kh/0f/nokh0fb2fp1t_ictdthli2etylg.png"></a><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">gabungkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sembunyikan NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><b><font style="vertical-align: inherit;">Dapatkan</font></b><font style="vertical-align: inherit;"> 
jumlah yang benar dengan </font><b><font style="vertical-align: inherit;">[NON_HEAP]</font></b><font style="vertical-align: inherit;"> di Tooltip saat melayang di atas bagan: </font><font style="vertical-align: inherit;">
Dapatkan jumlah yang benar dengan </font><b><font style="vertical-align: inherit;">[HEAP]</font></b><font style="vertical-align: inherit;"> di Tooltip saat melayang di atas bagan. </font><font style="vertical-align: inherit;">Dan bahkan semua semburan terlihat: </font><font style="vertical-align: inherit;">
Dan jadwal terbentuk dengan cepat. </font><font style="vertical-align: inherit;">Tapi legenda selalu menampilkan 0, legenda itu menjadi tidak berguna. </font><font style="vertical-align: inherit;">
Semuanya berhasil! </font><font style="vertical-align: inherit;">Bypass sejati adalah melalui tumpukan </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Karena itulah artikel tersebut ditambahkan ke kategori </font><b><font style="vertical-align: inherit;">Pemrograman Abnormal</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/uf/zw/7s/ufzw7sw-oxjflnzkglbilrdgmw4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/ga/mh/nz/gamhnzyw1thhnbi5mflkwrlvr_i.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/p_/tp/ev/p_tpevfzm7rwkc1534vyhe92ozg.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a name="3"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Jumlah tertinggi dengan subquery</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena kita telah memulai jalur pemrograman abnormal dengan sekelompok </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mari kita lanjutkan. </font><font style="vertical-align: inherit;">Mari kita buat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengembalikan sejumlah kecil poin dan membuat legenda itu muncul.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1 Jumlah penambahan jumlah kumulatif maxima</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selidiki</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kemungkinan </font><b><font style="vertical-align: inherit;">InfluxDB</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sebelumnya, saya sering membantu dengan mengambil turunan dari jumlah kumulatif, jadi kami akan mencoba menerapkan pendekatan ini sekarang. </font><font style="vertical-align: inherit;">Mari kita beralih ke mode pengeditan permintaan secara manual: </font><font style="vertical-align: inherit;">
Mari buat permintaan seperti itu:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/om/-b/yt/om-bytkvhp5zisny6gw5io_g2ba.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">sum</span>(<span class="hljs-string">"U"</span>) <span class="hljs-keyword">FROM</span> (
        <span class="hljs-keyword">SELECT</span> non_negative_difference(cumulative_sum(<span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>))) <span class="hljs-keyword">AS</span> <span class="hljs-string">"U"</span> 
        <span class="hljs-keyword">FROM</span> <span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span> 
        <span class="hljs-keyword">WHERE</span> <font></font>
            (<font></font>
                <span class="hljs-string">"host"</span> =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span> 
                <span class="hljs-string">"jolokia_agent_url"</span> =~ /^${jolokia:regex}$/<font></font>
            ) <span class="hljs-keyword">AND</span> <font></font>
            $timeFilter <font></font>
        <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>($granularity), <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span><font></font>
)<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">"Type"</span>, <span class="hljs-built_in">time</span>($granularity)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini nilai maksimum metrik dalam grup berdasarkan waktu diambil dan jumlah nilai tersebut sejak referensi dimulai, dikelompokkan berdasarkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font><font style="vertical-align: inherit;">tag </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Akibatnya, pada setiap momen waktu akan ada jumlah semua indikasi berdasarkan jenis ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NON_HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dengan pemisahan berdasarkan nama kumpulan, tetapi tidak 30 nilai dijumlahkan, seperti halnya dalam versi 1.2, tetapi hanya satu yang maksimum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan jika kita mengambil kenaikan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non_negative_difference</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari </font><font style="vertical-align: inherit;">jumlah kumulatif untuk langkah terakhir, maka kita akan mendapatkan nilai jumlah semua kumpulan data yang dikelompokkan berdasarkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font><font style="vertical-align: inherit;">tag </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di awal interval waktu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, untuk mendapatkan jumlah hanya dengan tag</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketik</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tanpa pengelompokan berdasarkan tag </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Anda perlu membuat permintaan tingkat atas dengan parameter pengelompokan yang serupa, tetapi tanpa pengelompokan berdasarkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasil dari query yang kompleks, kami mendapatkan jumlah semua tipe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadwal sempurna. </font><font style="vertical-align: inherit;">Jumlah maksimal dihitung dengan benar. </font><font style="vertical-align: inherit;">Ada legenda dengan nilai yang benar, bukan nol. </font><font style="vertical-align: inherit;">Di tooltip Anda dapat menampilkan semua metrik, bukan hanya Tunggal. </font><font style="vertical-align: inherit;">Bahkan semburan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HEAP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditampilkan </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">
Satu hal tetapi - permintaan ternyata sulit: jumlah kenaikan jumlah kumulatif maxima dengan perubahan tingkat pengelompokan.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/an/yv/1t/anyv1t7m69cwrl6cnwgl-dwd7xy.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2 Jumlah tertinggi dengan perubahan pada tingkat pengelompokan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bisakah Anda melakukan sesuatu yang lebih sederhana daripada di versi 3.1? Kotak Pandora sudah terbuka, kami beralih ke mode edit kueri manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada kecurigaan bahwa menerima kenaikan dari jumlah kumulatif menyebabkan efek nol - yang satu memadamkan yang lain. Singkirkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non_negative_difference (cumulative_sum (...))</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sederhanakan permintaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami cukup meninggalkan jumlah maxima, dengan penurunan tingkat pengelompokan:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">sum</span>(<span class="hljs-string">"A"</span>)
<span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">max</span>(<span class="hljs-string">"Usage.committed"</span>) <span class="hljs-keyword">as</span> <span class="hljs-string">"A"</span>
    <span class="hljs-keyword">FROM</span> <span class="hljs-string">"month"</span>.<span class="hljs-string">"java_memory_pool"</span> 
    <span class="hljs-keyword">WHERE</span><font></font>
            (<font></font>
                <span class="hljs-string">"host"</span> =~ /^${host:regex}$/ <span class="hljs-keyword">AND</span> 
                <span class="hljs-string">"jolokia_agent_url"</span> =~ /^${jolokia:regex}$/<font></font>
            ) <span class="hljs-keyword">AND</span> <font></font>
            $timeFilter<font></font>
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>($granularity), <span class="hljs-string">"Type"</span>, <span class="hljs-string">"name"</span><font></font>
)<font></font>
<span class="hljs-keyword">WHERE</span> $timeFilter
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">time</span>($granularity), <span class="hljs-string">"Type"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah kueri sederhana cepat yang mengembalikan hanya 721 poin per seri dalam 12 jam, ketika dikelompokkan berdasarkan menit: 12 (jam) * 60 (menit) = 720 interval, 721 poin (kosong terakhir). Harap perhatikan bahwa filter waktu diduplikasi. Itu ada dalam subquery dan dalam permintaan pengelompokan: </font><font style="vertical-align: inherit;">
Tanpa </font><b><font style="vertical-align: inherit;">$ timeFilter,</font></b><font style="vertical-align: inherit;"> dalam permintaan pengelompokan eksternal, jumlah poin yang dikembalikan tidak akan 721 dalam 12 jam, tetapi lebih. Karena subquery dikelompokkan untuk interval </font><b><font style="vertical-align: inherit;">dari</font></b><font style="vertical-align: inherit;"> ... </font><b><font style="vertical-align: inherit;">ke</font></b><font style="vertical-align: inherit;"> , dan pengelompokan permintaan eksternal tanpa filter akan menjadi untuk interval </font><b><font style="vertical-align: inherit;">dari</font></b><font style="vertical-align: inherit;"> ... </font><b><font style="vertical-align: inherit;">sekarang</font></b><font style="vertical-align: inherit;"> . Dan jika dalam </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> interval waktu tidak berlangsung X-jam dipilih (tidak seperti itu </font><b><font style="vertical-align: inherit;">untuk</font></b><font style="vertical-align: inherit;"> = </font><b><font style="vertical-align: inherit;">sekarang</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/8s/ab/tg/8sabtg9rebcu-tonmirjck2jdmk.png"></a><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), tetapi untuk interval dari masa lalu ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sekarang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), maka poin kosong dengan nilai nol di akhir seleksi akan muncul. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grafik yang dihasilkan ternyata sederhana, cepat, benar. </font><font style="vertical-align: inherit;">Dengan legenda yang menampilkan metrik ringkasan. </font><font style="vertical-align: inherit;">Dengan tooltip untuk beberapa baris sekaligus. </font><font style="vertical-align: inherit;">Dan juga dengan tampilan semua semburan nilai: </font><font style="vertical-align: inherit;">
Hasilnya tercapai!</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/an/yv/1t/anyv1t7m69cwrl6cnwgl-dwd7xy.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referensi (bukan referensi)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Distribusi alat yang digunakan dalam artikel:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grafana</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (6.5.0)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">influxdb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (1.7.9)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telegraf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (1.13.3)</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jolokia-jvm-1.6.2-agent.jar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (1.6.2)</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dokumentasi tentang kemampuan alat yang digunakan dalam artikel:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esensi</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskripsi</font></font></th>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kebijakan penyimpanan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyimpanan Data InfluxDB</font></font></a></td>
<td>Retention policy <b>montn</b>   30  ,     JVM    .       <b>auto</b>,     .   «  »   <b>telegraf.conf</b>      <b>InfluxDB</b>  ,      <b>Grafana</b></td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">InfluxDB v1.x Output Plugin</a></td>
<td>    <b>Telegraf</b>  <b>InfluxDB</b>.     <b>telegraf.conf</b></td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">agent / interval</a></td>
<td>   ,     2 .   «  »   <b>telegraf.conf</b>.   «1.2.       »  «1.3.       »</td>
</tr>
<tr>
<td>Java 8 / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Interface MemoryPoolMXBean</a></td>
<td>  MemoryPool,  ,     bool,  long.     <b>telegraf.conf</b>    int</td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Jolokia2 Input Plugins</a></td>
<td>  <b>telegraf.conf</b>   MBean-,     <b>InfluxDB</b></td>
</tr>
<tr>
<td>Telegraf / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Converter Processor</a></td>
<td>  <b>telegraf.conf</b>,      <b>float</b>   <b>int</b>    <b>InfluxDB</b>.      <b>Type</b>   <b>Type</b>,        </td>
</tr>
<tr>
<td>Grafana / Variables / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Advanced Formatting Options / Regex</a></td>
<td> Grafana,    Multiselect    ,    ,     ,    <b><code>~ /^<u>${}</u>$/</code></b> — ,  <b><code>~ /^${<u>:regex</u>}$/</code></b></td>
</tr>
<tr>
<td>Grafana / Variables / Global Built-in Variables / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">The $timeFilter or $__timeFilter Variable</a></td>
<td> Grafana- <b>$timeFilter</b>,     </td>
</tr>
<tr>
<td>InfluxDB / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MAX()</a></td>
<td>  <b>MAX()</b>  <b>InfluxDB</b> 1.7,       </td>
</tr>
<tr>
<td>InfluxDB / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SUM()</a></td>
<td>    <b>SUM()</b>  <b>InfluxDB</b> 1.7</td>
</tr>
<tr>
<td>InfluxDB / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Subqueries</a></td>
<td>    <b>InfluxDB</b> 1.7,     3 </td>
</tr>
<tr>
<td>InfluxDB / Transformation / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CUMULATIVE_SUM()</a></td>
<td>  <b>CUMULATIVE_SUM()</b>,        <b>InfluxDB</b>,    <b>NON_NEGATIVE_DERIVATIVE()</b></td>
</tr>
<tr>
<td>InfluxDB / Transformation / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NON_NEGATIVE_DERIVATIVE()</a></td>
<td>  <b>NON_NEGATIVE_DERIVATIVE()</b>,     3 .     <b>CUMULATIVE_SUM()</b> —          3</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Using Grafana’s Query Inspector to troubleshoot issues</a></td>
<td> <b>Query Inspector</b>,         ,        Grafana-</td>
</tr>
<tr>
<td>Grafana / Graph / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Draw Options</a></td>
<td>  Stack, Tooltip,…              «2. Grafana-way.   » </td>
</tr>
<tr>
<td>Grafana / Graph / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Series overrides</a></td>
<td>       (     )  <b>Grafana</b></td>
</tr>
</tbody></table></div><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kombinasi Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> perlu dikenal insinyur pengujian kinerja. Dan dalam bundel ini, banyak tugas sederhana sangat menarik, dan mereka tidak selalu dapat diselesaikan dengan metode pemrograman normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kadang-kadang Anda mungkin memerlukan keterampilan pemrograman abnormal dengan fitur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan seluk-beluk </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bahasa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permintaan </font><b><font style="vertical-align: inherit;">InfluxDB</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel tersebut, empat langkah diperhitungkan dalam penerapan meringkas metrik dengan pengelompokan dengan satu tag, tetapi memiliki beberapa tag. Tugas itu menarik. Dan ada banyak tugas seperti itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sedang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menyiapkan laporan tentang seluk beluk pemrograman dengan </font><b><font style="vertical-align: inherit;">Grafana</font></b><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxDB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Saya akan secara berkala menerbitkan materi tentang topik ini. </font><font style="vertical-align: inherit;">Sementara itu, saya akan senang dengan pertanyaan Anda di artikel saat ini.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id490754/index.html">Editor Kode Kode Visual Studio. Panduan paling terperinci untuk menyiapkan dan memasang plugin untuk pemula</a></li>
<li><a href="../id490756/index.html">Menyebarkan Jenkins sebagai kode</a></li>
<li><a href="../id490758/index.html">Matematikawan telah membuktikan hukum turbulensi universal</a></li>
<li><a href="../id490760/index.html">Ray Casting Visual Search (RCVS). Algoritma sederhana dan cepat untuk menemukan model 3D yang serupa dalam geometri</a></li>
<li><a href="../id490762/index.html">Bagaimana cara meramalkan tiket pesawat?</a></li>
<li><a href="../id490766/index.html">Bagaimana memahami seorang pemula, bahasa apa yang harus dipilih untuk profesi yang diinginkan?</a></li>
<li><a href="../id490768/index.html">Saat game komputer adalah pekerjaan Anda: perangkat internal cloud gaming</a></li>
<li><a href="../id490770/index.html">Hancur dengan hutang teknis! Di TechLead Conf 2020, kami akan menunjukkan caranya</a></li>
<li><a href="../id490772/index.html">Cara menulis dan menerbitkan kontrak pintar di Telegram Open Network (TON)</a></li>
<li><a href="../id490774/index.html">Responsif</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>