<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🔬 🏂🏼 🛂 OPSIを使用して世界をすばやくキャプチャしたり、Windowsコンピューターのネットワークを管理する方法 🙎🏿 📱 📶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="免責事項：
 著者は短くてまっすぐな松葉杖を愛しており、それがもたらす柔軟性とスケーラビリティのために無料のオープンソフトウェアを優しく崇拝しています。この記事の目的は、ロシアのインターネット上では不当に知られていないOPSI（Open PC Server Integration）ソフトウェア管理シ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>OPSIを使用して世界をすばやくキャプチャしたり、Windowsコンピューターのネットワークを管理する方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497826/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免責事項：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
著者は短くてまっすぐな松葉杖を愛しており、それがもたらす柔軟性とスケーラビリティのために無料のオープンソフトウェアを優しく崇拝しています。</font><font style="vertical-align: inherit;">この記事の目的は、ロシアのインターネット上では不当に知られていないOPSI（Open PC Server Integration）ソフトウェア管理システムを宣伝すること、およびそのことについて話すことです。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ilon Maskから電話がかかってきたとき、私はオフィスに座ってコーヒーを飲んでいて、純粋なロシア語で、もう耐えられれば十分だと教えてくれました。今こそ、特定のウイルスと戦うための最高の心を集める時が来ました。 100台のコンピューターがオフィスに持ち込まれ、私は緊急にWindows 10を展開する必要があります。明日の朝、世界中の科学者がオフィスに来てウイルス対策の作業を開始します。</font><font style="vertical-align: inherit;">えーと、一生ずっと待っていたのではないですか。</font><font style="vertical-align: inherit;">優れたツールにふさわしい挑戦です。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計画を実装するには、OPSIシステム-Open PC Server Integrationを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSIはドイツのpythonで書かれており、無料の松葉杖、無料で拡張性も非常に気に入っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的なシステム機能：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動ソフトウェア展開</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは次のように機能します。インストーラーを分析し、そこからopsiパッケージを作成します。これにより、プログラムが正しい方法でインストールされます。</font><font style="vertical-align: inherit;">それはmsiパッケージで最もよく機能します。また、対応できるいくつかのフォーマットを知っています。</font><font style="vertical-align: inherit;">batファイルまたはpowershellスクリプトを実行できますが、原則として、任意のインタープリターを実行できます。</font><font style="vertical-align: inherit;">組み込みのレジストリシステムがあり、一般的には完全なもので、おそらくシステムの最も優れた部分です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーティングシステムの自動インストール</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最速として、イメージからのインストールのみを使用しますが、システムを最初からオフラインでインストールするオプションがあります。</font></font></li>
<li>   <br>
<br>
         ,          ,       ,      ,      windows.  ,   ,    windows,    ,          . </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柔軟な統合</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が</font><font style="vertical-align: inherit;">可能ないくつかの便利な管理インターフェース</font><font style="vertical-align: inherit;">グラフィカルインターフェースを備えたプログラムがあり、コマンドを送信できるhttpインターフェースがあり、サーバーコンソールからOPSIを制御でき、スクリプトにコマンドを埋め込み、Pythonからバックエンドにアクセスできますが、残念ながら私は、私はそのような魔法を所有していませんが。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数のデポサーバー（展開が進行中のソフトウェアを直接含むサーバー）のサポート。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのサーバーを各サブネットまたはコンピューターのグループに追加でき、それぞれが独自のネットワークを提供します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モジュールによって実装されるシステム機能（無料モジュールと有料モジュールがあります）：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LDAPコネクター（有料）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドメインとopsiを単一の全体に接続するコネクター</font></font></li>
<li>  ()<br>
<br>
     : , ...</li>
<li>MySQL  () <br>
<br>
  OPSI  mysql   ,  300 </li>
<li>Nagios  ()<br>
<br>
 </li>
<li>   ()<br>
<br>
 , opsi      ,   ,      .</li>
<li>    ()<br>
<br>
    .</li>
<li>  ()<br>
<br>
  ,   ,      ,  . ,    ansible  puppet,    .    linux  windows      .</li>
<li>WAN  ()<br>
<br>
        ,   . </li>
<li>   ()<br>
<br>
 </li>
<li>OTRS::ITSM  ()<br>
<br>
  </li>
<li>   ()<br>
<br>
 ,      ,            ,   «   »,  ,  . </li>
</ol><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細については、こちらをご覧ください。</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
収益化モデルは次のとおりです。無料になる金額を集めるまでモジュールを販売します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターがオフィスに持ち込まれ、組み立てられている間に、WindowsサーバーにADサーバーをインストールし、その上にドメインdomain.localと、DNSおよびDHCPを生成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワークグループとドメインにOPSIをインストールできます。ドメインにインストールしますが、AD（LDAPコネクタ）にはバインドしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のスキームに従って、Windows 10をコンピューターのネットワークに展開します：すべてのプログラムを含む展開可能なWindows 10イメージを準備し、opsiを介してネットワーク経由で起動し、clonezillaを使用して自動的にファイルに保存し、すべてのコンピューターがopsi経由で自動的にインストールされるように設定し、ネットワーク経由で起動し、自動的に起動しますこのファイルは、tftpを介してブロードキャストネットワークセグメント内のすべてのコンピューターに流出します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、DHCPサーバー領域で、将来のopsiサーバー192.168.1.229のIPにパラメーター番号66を設定し</font></font><br>
<br>
<img src="https://habrastorage.org/webt/at/sl/hj/atslhjfu6ebadvwdih0bcdzzg2q.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、パラメーター67をlinux / pxelinux.0に移動します</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。DNSで、静的アドレス192.168.1.229の下にopsiserver.domain.localを追加します</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、負荷に耐え、速度の点であなたに合う、鉄の上のopsiサーバー用の仮想マシンを作成します。 SSDといくつかのネットワークカードを歓迎します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opsiはすべてのシステムをサポートしているわけではありません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">互換性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リスト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">はこちらにあります</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは英語のロケールですぐにインストールします。このサーバーのどこでもキリル文字を使用しないことを強くお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のお気に入りのdebian 10ディストリビューションでは、opsiserverという名前の最小構成でインストールします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールと再起動後、念のため、ロケールを構成します。</font></font><br>
<br>
<pre><code class="bash hljs">dpkg-reconfigure locales</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
de_ en_およびru_システムがあるすべてを選択しますen_US.UTF8を残します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらにインストールすると、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このチュートリアル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をタスクに合わせて改めて</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">説明</font></a><font style="vertical-align: inherit;">します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバー名が必要なものと異なる場合は変更します。</font></font><br>
<br>
<pre><code class="bash hljs">hostname opsiserver.domain.local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検証：</font></font><br>
<br>
<pre><code class="bash hljs">hostname -f</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ etc / hostsを次の形式にしましょう：</font></font><br>
<br>
<pre><code class="plaintext hljs">127.0.0.1 localhost<font></font>
127.1.1.1 localhost.localdomain<font></font>
192.168.1.229 opsiserver.domain.local opsiserver</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、opsiがこのファイルのコンテンツを要求しているため、その存在を永久に忘れてしまいます。また、ファイルが変更されると、反抗してエラーが発生することがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なパッケージをインストールします。</font></font><br>
<br>
<pre><code class="bash hljs">apt install wget host pigz mc -y</code></pre> <br>
<pre><code class="bash hljs">apt install samba samba-common smbclient cifs-utils -y </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはデフォルトでmysqlサーバーをインストールします。maria-dbが私のために立ち上がって、それも機能します。</font></font><br>
<br>
<pre><code class="bash hljs">apt install default-mysql-server -y</code></pre><br>
<pre><code class="bash hljs">sudo mysql_secure_installation</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rootのパスワードを変更して記憶することで、肯定的な質問に答えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムにOPSIリポジトリを追加します。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://download.opensuse.org/repositories/home:/uibmz:/opsi:/4.1:/stable/Debian_10/ /"</span> &gt; /etc/apt/sources.list.d/opsi.list</code></pre><br>
<pre><code class="bash hljs">wget -nv https://download.opensuse.org/repositories/home:uibmz:opsi:4.1:stable/Debian_10/Release.key -O Release.key<font></font>
apt-key add - &lt; Release.key</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更新しました：</font></font><br>
<br>
<pre><code class="bash hljs">apt update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSIはtftpdと競合するため、tftpdがある場合は削除します。</font></font><br>
<br>
<pre><code class="bash hljs">apt remove tftpd</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
inetdからtftpサポートを削除します。そうであれば、OPSIがそれと競合するためです。</font></font><br>
<br>
<pre><code class="bash hljs">update-inetd --remove tftp<font></font>
apt install opsi-tftpd-hpa</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、opsiサーバーを直接インストールします。</font></font><br>
<br>
<pre><code class="bash hljs">apt install opsi-server</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その過程で、クライアントはサーバーとの暗号化された接続に必要な自己署名証明書を作成するために必要なデータを要求します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windowsサポートをインストールします。</font></font><br>
<br>
<pre><code class="bash hljs">apt install opsi-windows-support</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mysqlバックエンドを構成します。</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --configure-mysql</code></pre><br>
<img src="https://habrastorage.org/webt/b0/7g/zh/b07gzhpoteem9-pgzopqghvkmga.png" width="600" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーアドレス（localhost）、操作元のユーザー（root）、mysqlのルートパスワード（先ほど覚えました）、opsiのデータベースの名前（opsi）、このデータベースで作業するユーザーの名前（opsi）、このユーザーのパスワード（私たちが発明）新着）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、debian 10の場合、PATHに/ usr / sbinを追加する必要があります。</font></font><br>
<br>
<pre><code class="bash hljs">PATH=<span class="hljs-variable">$PATH</span>:/usr/sbin</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じ行をホームディレクトリの.bashrcに追加する必要があります。</font><font style="vertical-align: inherit;">これを行わないと、次のステップで「chpasswd not found」というエラーが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムを初期化し、システムのファイルとディレクトリに必要な権限を設定します。</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --init-current-config<font></font>
opsi-set-rights</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスの再起動：</font></font><br>
<br>
<pre><code class="bash hljs">systemctl restart opsiconfd.service<font></font>
systemctl restart opsipxeconfd.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sambaを構成します。</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --auto-configure-samba</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSIクライアントは、ポート4447のhttpsを介してメインサーバーに接続します。ある種のインストールを呼び出す必要がある場合、クライアントはopsiサーバーからサンバボールをマウントし、そこからソフトウェアをインストールします。</font><font style="vertical-align: inherit;">これを可能にするために、OPSIがsambaを再構成できるようにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sambaの再起動：</font></font><br>
<br>
<pre><code class="bash hljs">systemctl restart smbd.service<font></font>
systemctl restart nmbd.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pcpatchシステムユーザーの管理者パスワードを設定します。 </font></font><br>
<br>
<pre><code class="bash hljs">opsi-admin -d task setPcpatchPassword</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、システムを管理するユーザーを作成します。</font></font><br>
<br>
<pre><code class="bash hljs">useradd -m -s /bin/bash adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼のパスワードを作成します。</font></font><br>
<br>
<pre><code class="bash hljs">passwd adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sambaのパスワードです。システムと同じものを作成します。</font></font><br>
<br>
<pre><code class="bash hljs">smbpasswd -a adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グループに追加：</font></font><br>
<br>
<pre><code class="bash hljs">usermod -aG pcpatch adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ルートの下のOPSIで何かをする場合は、グループにルートを追加する必要があります。</font></font><br>
<br>
<pre><code class="bash hljs">usermod -aG pcpatch root</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう少し松葉杖：</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --patch-sudoers-file</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、パッケージをシステムにダウンロードして、ロード中にコーヒーを飲むことができます。</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-updater -v install</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、次のコマンドでパッケージを更新できます。</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-updater -v update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https：</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> //download.uib.de/opsi4.1/misc/helper/ </font><font style="vertical-align: inherit;">に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">アクセスし</font></a><font style="vertical-align: inherit;">、そこからopsi-configed管理インターフェイスをダウンロードしてインストールし</font></font><br>
<br>
<code>opsi-configed-setup.exe</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、サーバーを入力します。サーバーアドレス、adminuserユーザーとそのパスワードを入力</font></font><br>
<br>
<code>https://opsiserver.domain.local:4447/</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すると、システムが</font><font style="vertical-align: inherit;">起動します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この時点で、サーバーはインストールされています！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a-/yg/ft/a-ygftvat-_6wioezy6v7rmuszq.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1-このサーバーに接続されているすべてのクライアント。ネストされたものを含むグループに分解でき、グループ全体に割り当てを一度に適用できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2-クライアントのタブ、これはopsiによって制御されるコンピューターのリストです。3- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントはリストです。ここでは、目的を適用するためにそれらを任意の順序で選択できます</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4-「製品構成」-翻訳の犠牲者。実際、Windowsにインストールできるパッケージは、opsiという用語にあります-ローカルブート製品</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットブート</font><font style="vertical-align: inherit;">製品-これはネットワーク経由で読み込まれるものすべてです</font><font style="vertical-align: inherit;">6-opsi-mac-address-コンピュータのポピーはネットワークブート中に決定されるものです</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7-opsiHostKeyは、オプシシステム内のクライアントの「パスワード」です。コンピュータopsiクライアント、次にそれを再インストールすると、パスワードは古いままで適切ではなくなるため、機能しません。これはバグであり機能でもあります。そして、あなたはどうしますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、流出するwindows 10イメージを準備します。私たちが使用するClonezillaは、頭字語ほど良くありませんが、小さいディスクから同じまたは大きいディスクにイメージをスピルする方法をまだ知っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なすべてのプログラムとWindows 10用のリモートサーバー管理ツールをシステムに配置しました。Windows10 1903があり、1803用にインストールし、起動に必要なすべてのものをインストールしています。ここからダウンロードできます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.microsoft.com/en-us/download/details.aspx?id=45520</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コンピューターにドメインを自動的に入力できるようにするnetdomユーティリティに必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">//github.com/valmont2k/renamejoin</font></a><font style="vertical-align: inherit;">からc：\ renamejoinディレクトリに</font><font style="vertical-align: inherit;">ファイルをダウンロードします</font><font style="vertical-align: inherit;">。ドメインコントローラー上にドメイン管理者を作成し、Joinadminログインにパスワードpassword1234QWEを使用してコンピューターをドメインにのみ入力できるようにします。攻撃者がこのパスワードを傍受した場合、攻撃者はコンピューターを私たちのドメインにのみ持ち込むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完全に準備されたWindowsの管理コンソールでcreatetesk.txtから行を実行すると、起動時に開始するタスクが作成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スキーム全体は次のように機能します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
イメージをすべてのコンピューターに分割すると、最初の起動時に、Windowsは</font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピューターの名前をに変更し、コンピューターを</font></font><code>win-%random%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再起動し、削除</font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してに名前</font></font><code>C:\renamejoin\step2.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">変更</font><font style="vertical-align: inherit;">するタスク</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">起動します</font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。次回の起動時にWindowsが起動し</font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このコンピューターがドメインに追加され、再起動して削除され</font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。ドメインコンピュータから潜在的に危険なタスクを後で削除できます。もちろんOPSIを通じて！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/58/nn/ft58nnalinh1dzsqyx2clhilaym.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
準備されたウィンドウをイメージに変換する時が来ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラス記号の付いたコンピューターアイコンを使用して、コンピューターをopsi opsi-configed管理インターフェイスに追加し、ポピーアドレスを設定します。</font><font style="vertical-align: inherit;">セーブ。</font><font style="vertical-align: inherit;">私たちは「セットアップ」を置くclonezillaの反対側にネットブート製品を渡します。</font><font style="vertical-align: inherit;">クライアントの構成では、スクリーンショットのようにすべてを公開しています。ファイルの名前と、ディスク全体をイメージに書き込むためのコマンドです。</font><font style="vertical-align: inherit;">WindowsがインストールされているコンピューターのBIOSで、ネットワークからのダウンロードを設定します。</font><font style="vertical-align: inherit;">コンプを再起動します。</font><font style="vertical-align: inherit;">すべてを正しく行った場合は、Windowsが手を使わずにイメージに流れ込むのがわかります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wu/zi/e6/wuzie6bgshbkngnutgpsqw9lfz0.png" width="500" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その間、コンピューターは組み立てられますが、それらはケシのアドレスと一緒にopsiのクライアントとして追加する必要があります。ペンでそれらを追加することは、まったく不思議なことではありませんよね？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解決策は次のとおりです。</font></font><br>
<br>
<pre><code class="bash hljs">apt install tcpdump</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
opsiserverで実行します。</font></font><br>
<br>
<pre><code class="bash hljs">tcpdump -n udp -vvvvv -e port 69 &gt; /var/<span class="hljs-built_in">log</span>/tftp</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、すべてのコンピューターのBIOS設定をネットワーク経由でブートするように設定し（同時にPCI-Eデバイスからウェイクアップし、ネットワーク経由で、後で理由を理解します）、それらをロードします。ブート中にopsiブートメニューの青いウィンドウが表示された</font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/7c/h7/po7ch7eco5daftbhmaqr3fspcjs.png" width="500" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場合</font><font style="vertical-align: inherit;">、問題</font><font style="vertical-align: inherit;">はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブート時に、コンピューターはサーバーにアクセスし、tcpdumpはポピーアドレスをファイル</font><font style="vertical-align: inherit;">に書き込み、すべてのコンピューターがopsiでマークされ、ポピーアドレスをそこに残した後</font></font><code>/var/log/tftp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、repoスクリプト</font></font><code>https://github.com/valmont2k/opsi-hosts-importer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">してopsiserverで実行します。このスクリプトは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https：</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> //download.uib.de/opsi4.1/experimental/documentation/html/opsi-api-documentation/opsi_API.htmlのopsi API </font><font style="vertical-align: inherit;">とちょっとした魔法を使用しています。起動すると、op％serverにwin％random32％.domain.localという形式のクライアントが作成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のステップは、Windowsイメージ（既に実行されているはずです）をすべてのコンピューターにキャストすることです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yn/6g/ik/yn6gikht6l5aizhym_t839uk7mo.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、Windowsをインストールする必要があるすべてのコンピューターと、スクリーンショットのように値を設定する反対側のclonezillaを選択します。コンピューターの電源をオフにしてから、いくつかのコンピューターを順番にオンにして、Windowsが自動的にそれらにロールアップする様子を観察します。コンピューター自体の名前が変更され、ドメインに入力されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これも自動化したい場合は、etherwakeを置き、指定された遅延で/ tmp / newmacsファイルからmac-addressesを取得し、ホストを起動して順番にWindowsをローリングさせるスクリプトを記述します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アップデート1を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はシャンプーの広告からロナウドのジェスチャーを作り、アイロンマスクが再び私の電話を呼び出して追加したとき、すでにコーヒーを詰めていました：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -はい、忘れました、明日</font></font><code>%program%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新のバージョンが</font><font style="vertical-align: inherit;">すべてのコンピュータにインストール</font><font style="vertical-align: inherit;">さ</font><font style="vertical-align: inherit;">れている必要</font><font style="vertical-align: inherit;">があります。それを処理できますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -もちろん、すべてが明日になります！</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はテクノクラートのアイドルを動揺させることができないので、あなたの頭をあなたの手に戻す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
起動時にコンピュータがopsi-client-agentと呼ばれるopsiクライアントを設定するとよいでしょう。これは、ドメイングループポリシーを通じて実行できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストール中にパスワードを入力せずにこれを</font><font style="vertical-align: inherit;">
行う</font><font style="vertical-align: inherit;">には</font></font><br>
<code>/var/lib/opsi/depot/opsi-client-agent/files/opsi/cfg/config.ini</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、opsiserver上</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">に</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーのパスワードをservice_hidden_​​passwordの値として追加する必要があります。</font></font><code>adminuser</code><font style="vertical-align: inherit;"></font><code>base64</code><br>
<br>
<pre><code class="plaintext hljs">[installation]<font></font>
service_user=adminuser<font></font>
service_password=none<font></font>
service_hidden_password=base64HERE</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、setupOPSIドメインにグループポリシーを追加し、そのスクリプトをここから取得します。必ずスクリプトに</font></font><code>https://github.com/valmont2k/opsi-install-opsi-client-agent-over-active-directory-domain-policy</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
値を挿入してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/bq/gr/pibqgrvntzwy6vlhvkwljjs4fki.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてを正しく行った場合、ドメインでの最初の再起動時に、クライアントがをインストール</font></font><code>opsi-client-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して再起動</font></font><code>win-%random%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、OPSI管理インターフェースに</font><font style="vertical-align: inherit;">その名前</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">表示され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">同じケシの住所を持つ古い顧客は削除できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、インストールに進むことができます</font></font><code>%program%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはここに行く</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://forum.opsi.org/viewtopic.php?f=22&amp;t=7573</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とパッケージへのリンクを見つけ</font></font><code>*.opsi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">た名前を持つ</font></font><code>packagebuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、のようなものを</font></font><code>"opsi PackageBuilder Windows (opsi Paket)"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージを</font></font><code>/var/lib/opsi/workbench</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opsiserver </font><font style="vertical-align: inherit;">のディレクトリ</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">ダウンロードします。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /var/lib/opsi/workbench</code></pre><br>
<pre><code class="bash hljs">wget https://opsipackagebuilder.s3.amazonaws.com/opsiPackageBuilder/python/opsipackagebuilder_8.4.4-1.opsi </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてそれをインストールします：</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-manager -d ALL -i opsipackagebuilder_8.4.4-1.opsi</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、opsi管理インターフェイスで、更新ボタンをクリックして、新しいパッケージ</font></font><code>opsipackagebuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">があることを確認します</font></font><code>opsi-setup-detector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windowsのテストマシンの制御インターフェイスを介してそれらを配置します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ときにプログラム</font></font><code>opsipackagebuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>opsi-setup-detector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確立、実行</font></font><code>opsi-setup-detector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストーラプログラムにそれをオフと遊びは</font></font><code>windirstat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、公式サイトの事前プログラムからダウンロードしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールする前に、プログラム設定を構成する必要があります。ボールをテストマシン\\ opsiserver.domain.local \ opsi_workbenchにzドライブとしてマウントします。指定したフィールドに名前とメールを書き込みます。OPSIは、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a3/zx/gz/a3zxgzhluvq6-vb6utpdveqfoqi.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
32と64のインストーラーを同時に使用して1つのパッケージを作成し、システム容量に基づいてそれらを設定します。どこにでも64ビットなので、「単一のファイルを分析...」をクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n-/ev/s9/n-evs94sic7qrqsafbish6zhjno.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検出器がインストールディレクトリを理解していないことがわかります。インストーラーを使用してプログラムをインストールしようとすることで、自分で確認できます。しかし、彼はインストーラーの種類、プログラムのバージョン、アセンブルおよびデプロイされた形式のアプリケーションのサイズ、オフラインインストールキー、オフライン削除キー、および名前アンインストーラーを検出しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/u7/ys/vhu7ysu1f6hjlkxbvuetosk2xcu.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、インストールディレクトリに自分自身を入力し、[次へのステップをクリックします。</font></font><br>
<img src="https://habrastorage.org/webt/wl/lx/nf/wllxnfx3gtvrhtdspigvxznyply.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、我々は（我々の場合には最初の試みを）パッケージを組み立てるために作ることを試みに入れ、あること、そのID、説明、およびパッケージのバージョンを設定し、製品名を追加することができます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ip/_g/fa/ip_gfarn7c49hwtnvhdy0cnxesm.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたは、依存関係を置くことができ、この現在のパッケージをインストールするために、私たちの要件に記載されているパッケージがインストールの</font><font style="vertical-align: inherit;">
ために提示</font><font style="vertical-align: inherit;">されます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/mn/os/bemnosq2zhjnugxp5ywu8ahysqi.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSIパッケージの作成：パッケージ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/s8/-2/vds8-2ho3zriw5pt7l4dtjouhpq.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を作成したので、次の場所でopsiserverに移動する必要があります</font></font><code>/var/lib/opsi/workbench/windirstat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージを収集：</font></font><br>
<br>
<pre><code class="bash hljs">opsi-makepackage</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インストールしてください：</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-manager -d ALL -i windirstat-1.1.2-1.opsi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが順調に進んだら、opsiで構成された管理インターフェースで「更新」ボタンをクリックして</font></font><code>windirstat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ネットワーク上の選択したコンピューターにインストールできる</font><font style="vertical-align: inherit;">新しいパッケージが</font><font style="vertical-align: inherit;">あることを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビンゴ！</font><font style="vertical-align: inherit;">最初のパッケージが組み立てられました！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクを複雑にするために、Powershellを使用して、ポート4441および4447へのクライアントへのアクセスを許可するルールをWindowsファイアウォールで作成し、たとえば、メッセンジャーであるかのように、レジストリの微調整を通じてこのアプリケーションをユーザーに自動ロードさせます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
opsiパッケージビルダー</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ry/35/br/ry35brmfbx9wcefpvejn45ofq1i.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を開く</font><font style="vertical-align: inherit;">：パッケージ</font><font style="vertical-align: inherit;">を開くことを選択し、windirstatでパッケージを開きます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7q/fi/tb/7qfitbgjqlx1kceksjhko2qokc0.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSIはデフォルトで次のように動作します。uninstall.opsiscriptからプログラムを削除すると、delsub.opsiscriptが呼び出され、プログラムが削除されます。 setup.opsiscriptからプログラムをインストールすると、delsub.opsiscriptが呼び出されてプログラムが削除され、setup.opsiscriptによってインストールされます。したがって、setup.opsiscriptで何かを作成するように編集し、delsub.opsiscriptで何かを削除するように編集します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのスクリプトのすべての魔法は、ドキュメント</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://download.uib.de/opsi4.1/documentation/html/en/opsi-winst-manual/opsi-winst-manual.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
setup.opsiscriptを鉛筆アイコンで開くことができ、そしてスクリプトツリーを介したdelsub.opsiscript。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bk/_s/y_/bk_sy_fdgjsl6x4lbokjcrtjhc0.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに完全なファイルメニューがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o9/wc/lb/o9wclbi4d3hob_bx9mdrlibnxwi.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッケージをビルドしようとするたびに1つずつ増やす必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/km/8n/ry/km8nrypi8ie323expcio-ms0kum.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
opsiを介して自動ロードするプログラムを追加します。これには、setup.opsiscriptに行を挿入します。</font></font><br>
<br>
<pre><code class="plaintext hljs">Registry_changes  /AllNTUserdats /64bit<font></font>
[Registry_changes]<font></font>
OpenKey [Software\Microsoft\Windows\CurrentVersion\Run]<font></font>
Set "WinDirStat" = "C:\Program Files (x86)\WinDirStat\windirstat.exe"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、delsub.opsiscriptに次の行を挿入します。</font></font><br>
<br>
<pre><code class="plaintext hljs">Registry_changes  /AllNTUserdats /64bit<font></font>
[Registry_changes]<font></font>
OpenKey [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run]<font></font>
;Set "WinDirStat" = "C:\Program Files (x86)\WinDirStat\windirstat.exe"<font></font>
DeleteVar "WinDirStat"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
powershellスクリプトを実行してファイアウォールにルールを追加します。これには、setup.opsiscriptに次の行を挿入します。</font></font><br>
<br>
<pre><code class="plaintext hljs">DosInAnIcon_PowerShell_ExecutionPolicy<font></font>
ExecWith_PowerShell_NichtPDCAktionen powershell.exe winst /sysnative<font></font>
[DosInAnIcon_PowerShell_ExecutionPolicy]<font></font>
echo "powershell set-executionpolicy RemoteSigned ..."<font></font>
powershell.exe set-executionpolicy RemoteSigned<font></font>
exit %ERRORLEVEL%<font></font>
<font></font>
[ExecWith_PowerShell_NichtPDCAktionen]<font></font>
; hier Dein PS-Code<font></font>
<font></font>
New-NetFirewallRule -DisplayName 'OPSI-Inbound' -Profile @('Domain', 'Private', 'Public') -Direction Inbound -Action Allow -Protocol TCP -LocalPort @('4441', '4447')</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、delsub.opsiscriptに次の行を挿入します。</font></font><br>
<br>
<pre><code class="plaintext hljs">DosInAnIcon_PowerShell_ExecutionPolicy<font></font>
ExecWith_PowerShell_NichtPDCAktionen powershell.exe winst /sysnative<font></font>
[DosInAnIcon_PowerShell_ExecutionPolicy]<font></font>
echo "powershell set-executionpolicy RemoteSigned ..."<font></font>
powershell.exe set-executionpolicy RemoteSigned<font></font>
exit %ERRORLEVEL%<font></font>
<font></font>
[ExecWith_PowerShell_NichtPDCAktionen]<font></font>
; hier Dein PS-Code<font></font>
Remove-NetFirewallRule -DisplayName 'OPSI-Inbound'</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完全なコードは、こちらで確認できます</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">//github.com/valmont2k/WinDirStatOpsiPackageTest</font></a><font style="vertical-align: inherit;"> Ilonが再び私の考えを中断させたため、opsi </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が</font></font><code>%program%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新バージョンをネットワーク全体に</font><font style="vertical-align: inherit;">展開するのを見て、すでにリラックスしてい</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -来週さらに500人が来て、オフィスは既にレンタルされており、コンピューターは輸入されています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -まあ、もちろん、これはロケット科学ではありません-私はそれに応えて疲れて冗談を言いました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハイパーバイザーを使用してopsiserverサーバーを複製し、ブランチに展開します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セントラルオフィスは、少なくとも10 Mbpsの速度でVPNを介してブランチに接続されていると想定しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、デポサーバー、つまりブランチにパッケージを格納するサーバーを作成します。</font><font style="vertical-align: inherit;">ブランチのクライアントはhttpsをメインサーバーにノックし、ソフトウェアをインストールする必要がある場合は、デポサーバーをブランチにマウントしてそこからインストールします。これは、特にオフィスとブランチ間のインターネットチャネルを保存するために行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブランチサーバーopsiserver-2で、ローカルネットワークからの静的アドレスを構成し</font></font><code>/etc/network/interfaces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て、新しいネットワークに従って</font><font style="vertical-align: inherit;">ファイルを変更します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ホスト名とホストを変更します。</font></font><br>
<br>
<pre><code class="bash hljs">sed -i <span class="hljs-string">'s/opsiserver/opsiserver-2/'</span> /etc/hostname<font></font>
sed -i <span class="hljs-string">'s/opsiserver/opsiserver-2/g'</span> /etc/hosts</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ etc / hostsで、新しいIPアドレスをドライブしてデータを更新します </font></font><br>
<br>
<pre><code class="bash hljs">reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
opsiを使用してopsiサーバーの名前を変更します。</font></font><br>
<br>
<pre><code class="bash hljs">opsi-admin --no-depot -d method host_renameOpsiDepotserver opsiserver.domain.local opsiserver-2.domain.local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーopsiserver-2.domain.localから、デポとしてopsiserver.domain.localに接続します。</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --register-depot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいデポ、管理者、およびパスワードを接続するメインサーバーの名前を指定します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/02/y_/yx02y_bcvpikxgkubku2-fl8try.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは何も変更する必要はありません</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/1j/_l/n21j_lmeiwlsn3ghmkcxr4yadgg.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。opsi-configedですべてが正しく行われていることを確認でき</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6u/s9/nu/6us9nurw4d3rsetl0nemcy_x_re.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、クライアントがデポサーバーを自分で選択できるようにシステムを構成する必要があります。私たちはすべての顧客を選択し、動的なデポを設定します。デフォルトでは、クライアントはIPアドレスを調べ、ネットワークからデポを選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vp/4v/mg/vp4vmg0czhi2vmkwobeddecf1dc.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、将来のすべてのクライアントが即座に動的にデポを選択するように構成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h7/-j/c4/h7-jc4kpf-5vyavsz_mckjp44-a.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、新しいデポサーバーのセットアップが完了し、ローカルネットワーク上のコンピューターにopsi-client-agentをインストールできます。以前に本社にインストールしたのと同じスクリプトを使用します。スクリプト内でIPアドレスを変更するのを忘れています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各ブランチでドメインコントローラーを設定し（読み取り専用にすることができます）、独自のネットワークアドレス指定を行い、windowsドメイン内のdefault-siteをサブサイトに分割します。それぞれのサブサイトを作成し、opsi-client-agentインストールスクリプトを使用してグループポリシーを作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、新しいブランチで繰り返します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はコーヒーを飲み終えて家に帰りました。ネットワークカードのLEDは、新しいシステムと新しいシステムがクーラーのノイズに</font><font style="vertical-align: inherit;">
さらされていることを示しています</font><font style="vertical-align: inherit;">... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更新1：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">判明しましたが、スクリプトを実行する必要はありません。opsi-configedを使用すると、マウスがシーダラーを介してクライアントの覚醒をクリックすることができます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja497814/index.html">不可避を受け入れる5つの段階、または自動プロファイリングのプログラムの開発方法</a></li>
<li><a href="../ja497816/index.html">ロシア鉄道は私に誰かのチケットを送ります</a></li>
<li><a href="../ja497818/index.html">Citrixを使用してGPUでVMにリモートアクセス</a></li>
<li><a href="../ja497820/index.html">それらに対する誤った逆問題の統計的正則化。Turchin（パート1）</a></li>
<li><a href="../ja497822/index.html">瓶の中の男</a></li>
<li><a href="../ja497828/index.html">2 in 1：セキュリティ保護付きの暗号化</a></li>
<li><a href="../ja497830/index.html">OWASPモスクワ2020/1レコーディング</a></li>
<li><a href="../ja497832/index.html">VestaCPの背後に隠されているもの</a></li>
<li><a href="../ja497834/index.html">Laravelの高度なリソース認証システム。パート2.ゲートウェイ、ポリシー</a></li>
<li><a href="../ja497836/index.html">ニューラルネットワークのトレーニングの問題を解決する例を使用したプログラミング言語の速度の比較</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>