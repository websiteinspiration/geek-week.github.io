<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ…°ï¸ ğŸ™‹ğŸ¿ ğŸ‘µğŸ» Mettre le jeu "Snake" sur la planche Ã  pain. Partie 1: machines d'Ã©tat ğŸ¤µğŸ½ âœ”ï¸ ğŸ’±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ã€ loisir, mon fils et moi Ã©tudions l'Ã©lectronique numÃ©rique. RÃ©cemment, nous sommes arrivÃ©s au chapitre sur les machines Ã  Ã©tats finis. Cette rubrique...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mettre le jeu "Snake" sur la planche Ã  pain. Partie 1: machines d'Ã©tat</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502370/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã€ loisir, mon fils et moi Ã©tudions l'Ã©lectronique numÃ©rique. RÃ©cemment, nous sommes arrivÃ©s au chapitre sur les machines Ã  Ã©tats finis. Cette rubrique regorge de tÃ¢ches typiques, telles qu'un sÃ©maphore ou un distributeur automatique. Mais ils sont tous ternes et trop simples, et certains sont gÃ©nÃ©ralement, franchement, farfelus. AprÃ¨s avoir Ã©tudiÃ© des exemples simples, je voulais faire quelque chose de plus intÃ©ressant et complexe. Le jeu classique Â«serpentÂ» a attirÃ© mon attention (mon fils l'a jouÃ© au tÃ©lÃ©phone), et j'ai suggÃ©rÃ© de le faire sur des machines d'Ã‰tat. AprÃ¨s tout, l'Ã©tat du jeu est assez final (surtout si vous vous limitez Ã  un petit champ), et Ã  partir des entrÃ©es, il n'y a que 4 boutons. Et c'est ce que nous avons obtenu.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/9e/m3/wq9em3hfdynwkdketucwhzg6x38.gif"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le jeu Snake (c'est un serpent, un python, un boa constrictor, etc.) est largement connu de tous. Elle vient des annÃ©es 70 lointaines, mais je ne vais pas rÃ©pÃ©ter son histoire, que vous pouvez lire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur Wikipedia</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombreux </font></font></u></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">articles</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur HabrÃ©. Le jeu a des rÃ¨gles assez simples et en mÃªme temps un gameplay addictif)) GrÃ¢ce Ã  cela, il est souvent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilisÃ©</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutoriels</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;">des </font></u></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemples de </font></font></u></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans les langages de programmation de haut niveau, faire un tel jeu est assez simple. Mais dans des conditions plus limitÃ©es, la plus intÃ©ressante commence, par exemple, une implÃ©mentation sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LabVIEW</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il existe Ã©galement de nombreuses options sur FPGA: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lien 4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mais il n'y a pas eu une seule option sur des puces TTL distinctes de sÃ©rie standard. Câ€™est ce que nous allons faire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semblerait que les solutions FPGA soient les plus proches pour nous, et vous pouvez emprunter beaucoup Ã  partir de lÃ ? Mais dans toutes les options que j'ai examinÃ©es, elles sont facilement dispersÃ©es dans les registres gauche et droit. Par exemple, trÃ¨s souvent, un bit ou un numÃ©ro distinct est attribuÃ© Ã  chaque cellule de champ. Nous ne pouvons pas le faire avec de la poudre libre, car chaque nouveau registre est un microcircuit sÃ©parÃ© qui doit Ãªtre placÃ© quelque part, puis connectÃ©. Par consÃ©quent, nous rayons toute l'expÃ©rience accumulÃ©e par d'autres dÃ©veloppeurs et ferons tout Ã  partir de zÃ©ro. En bonus, nous collecterons tout sur les puces domestiques (et mieux - soviÃ©tiques) de la sÃ©rie k555 / kr1533, Ã  l'exception des ROMs, qui devront Ãªtre renouvelÃ©es.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulation du problÃ¨me</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous aurons de telles restrictions: un champ de taille 8 Ã— 8 cellules ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrice LED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> chinoise </font><font style="vertical-align: inherit;">), une longueur de queue de 8 cellules. </font><font style="vertical-align: inherit;">Un serpent peut traverser les murs, mais nous ne traiterons pas l'intersection avec la queue dans un premier temps (afin de ne pas compliquer la conception, vous pouvez l'ajouter plus tard). </font><font style="vertical-align: inherit;">Pour dÃ©crire l'Ã©tat complet du jeu, nous avons besoin de:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Position de la tÃªte (X = 0..7, Y = 0..7, 6 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sens de dÃ©placement (â†‘ â†“ â† â†’, 2 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Position Apple (X, Y, 6 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Longueur de queue (0..7, 3 bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La position des cellules de la queue (de 0 Ã  7 morceaux de 6 bits chacun)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, 65 bits sont obtenus, mÃªme si nous prenons des registres de 8 bits chacun, seuls 8 de ces microcircuits (et un dÃ©clencheur de plus) sont nÃ©cessaires pour stocker l'Ã©tat, c'est beaucoup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais la queue ne peut pas Ãªtre situÃ©e oÃ¹ elle veut, elle "pousse" de la tÃªte. </font><font style="vertical-align: inherit;">Par consÃ©quent, nous pouvons stocker non pas les coordonnÃ©es complÃ¨tes de chaque section de la queue, mais uniquement la direction dans laquelle la direction de la cellule (ou tÃªte) prÃ©cÃ©dente doit Ãªtre dessinÃ©e. </font><font style="vertical-align: inherit;">Ensuite, au lieu de 6 Ã— 8 = 48 bits, nous avons besoin de 4 Ã— 8 = 16 bits, ce qui reprÃ©sente une Ã©conomie de quatre cas de registre!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Machines automatiques</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons de tout faire sur des machines similaires Ã  Moore ou Miles. </font><font style="vertical-align: inherit;">Pour implÃ©menter un tel automate, il suffit d'avoir un peu de mÃ©moire d'Ã©tat (registre) et de logique combinatoire pour basculer entre eux. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/o-/oq/f4o-oqkcsvqo5ohkwugmxc7vwb4.png"><br clear="all">
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Image de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Habituellement, une machine Ã  Ã©tats est dÃ©crite comme un graphique des Ã©tats et des transitions entre eux. </font><font style="vertical-align: inherit;">Parfois, il est plus pratique de crÃ©er un tableau de transitions vers un nouvel Ã©tat, l'exemple le plus simple (de Wikipedia): </font></font><br>
<img src="https://habrastorage.org/webt/dm/e6/3i/dme63iuq9yaq1jelbizwkcxyi-y.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous pouvez trouver plus d'informations et de belles images, par exemple, dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cet article sur HabrÃ©</font></font></a></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Petite digression</font></font></b>
                        <div class="spoiler_text">  , ,        .     ,  ROM       ,        ROM. <i>(  ,      )</i>.<br>
<br>
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">, , </a>. <br>
<br>
<img src="https://habrastorage.org/webt/ni/sb/99/nisb99zh_hwtazsponzz_ksr_ua.png"><br>
        ,      Â« Â»       .<br>
<br clear="all">
<hr></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un serpent de diffÃ©rents Ã©tats (si vous ne tenez pas compte de la position de la pomme) peut avoir 2 ^ 8 + 2 ^ 10 + ... + 2 ^ 24 â‰ˆ 32 millions. </font><font style="vertical-align: inherit;">Il n'est pas possible de les Ã©crire dans le tableau, et encore plus de dessiner un graphe de transition. </font><font style="vertical-align: inherit;">Mais la plupart des transitions sont tout Ã  fait les mÃªmes (la tÃªte ne dÃ©place qu'une seule cellule adjacente et la queue se dÃ©place d'une section par tour). </font><font style="vertical-align: inherit;">Dans ce cas, nous ne pouvons pas dÃ©crire chaque Ã©tat individuel, mais formuler un nouvel Ã©tat en fonction du prÃ©cÃ©dent. </font><font style="vertical-align: inherit;">De plus, on peut diviser l'ensemble du jeu en plusieurs automates parallÃ¨les: 1) une machine automatique de direction, 2) une machine automatique de position de la tÃªte, 3) une machine automatique pour la queue. </font><font style="vertical-align: inherit;">Et pour rÃ©gler chacun d'eux comme il sera plus pratique:</font></font><br>
<br>
<pre><code class="plaintext hljs">1) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†        â†/â†“/â†‘     â”‚ â†<font></font>
   â†          â†’       â”‚ â†’<font></font>
   â†‘        â†‘/â†/â†’     â”‚ â†‘<font></font>
   â†‘          â†“       â”‚ â†“<font></font>
   ......          â”‚<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">2) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†             (x,y) â”‚ (x-1, y)<font></font>
   â†’             (x,y) â”‚ (x+1, y)<font></font>
   â†‘             (x,y) â”‚ (x, y-1)<font></font>
   â†“             (x,y) â”‚ (x, y+1)<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">3) ,                       â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†            (t1,t2,t3,t4,t5,t6,t7,t8)  â”‚ (â†,t1,t2,t3,t4,t5,t6,t7)<font></font>
   ......                               â”‚<font></font>
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direction</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CommenÃ§ons par la machine directionnelle. </font><font style="vertical-align: inherit;">Si vous rÃ©flÃ©chissez bien, vous pouvez l'assembler sur une logique distincte. </font><font style="vertical-align: inherit;">Mais, comme la tÃ¢che dans son ensemble est dÃ©jÃ  assez grande, j'ai dÃ©cidÃ© qu'il serait plus facile de crÃ©er une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">recherche Ã </font></a><font style="vertical-align: inherit;"> partir de l'EEPROM et d'Ã©crire la table de transition manuellement. </font><font style="vertical-align: inherit;">Il aura 6 entrÃ©es, ce qui signifie seulement 64 valeurs, que nous pouvons simplement insÃ©rer dans l'Ã©diteur hexadÃ©cimal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/08/hw/vb08hwgm-lxgjmqawc6zkeigrmm.jpeg"><br>
<a name="snake_head"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TÃªte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une machine de position de tÃªte, l'Ã©criture d'une telle table sera beaucoup plus difficile. Mais il ne contient essentiellement que 2 opÃ©rations: +1 et -1. Ils peuvent Ãªtre implÃ©mentÃ©s sur un additionneur 4 bits K155IM6. Pour +1, nous ajouterons nos coordonnÃ©es avec b'0001, et pour -1 avec b'1111 (qui est en fait -1 dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code supplÃ©mentaire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Nous aurons besoin de deux additionneurs (pour x et y), un peu de logique, et nous stockerons l'Ã©tat dans le registre IR27 Ã  8 bits (nous en avons encore besoin de beaucoup):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gy/d_/zb/gyd_zbcbp4jntzurp2_-zjo2jbk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assemblons-le sur la carte, et pour vÃ©rification, nous connecterons immÃ©diatement la matrice LED avec deux dÃ©codeurs. Le dÃ©codeur Ã  sorties inverses est ID7, et pour le direct il serait possible de prendre K561ID1 (CD4028), mais je ne lâ€™avais pas sous la main. Une autre option est de prendre 8 transistors comme clÃ©s, mais je ne voulais pas le faire, j'ai donc dÃ» bÃªtement dÃ©penser une autre EEPROM (y Ã©crire seulement 8 cellules). </font><i><font style="vertical-align: inherit;">La logique de la nouvelle position de la tÃªte sur une carte sÃ©parÃ©e en haut </font></i><b><font style="vertical-align: inherit;">Une autre digression</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/ur/bi/oz/urbiozx7zqk7bi33vx3k7oxkglo.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenons une courte pause et sauvons la planche Ã  pain (et quelques cas de puces). </font><font style="vertical-align: inherit;">Nous profiterons Ã  nouveau du fait que tout circuit combinÃ© peut Ãªtre remplacÃ© par une LUT en Ã©crivant le tableau dans la ROM. </font><font style="vertical-align: inherit;">Mais comment faire cela pour une si grande table? </font><font style="vertical-align: inherit;">Nous allons utiliser une autre astuce - nous ferons le contraire: remplacer l'EEPROM par notre circuit logique et le mettre dans le programmateur. </font><sub><i><font style="vertical-align: inherit;">Les jambes inutilisÃ©es sont connectÃ©es Ã  la terre via des rÃ©sistances. </font></i></sub><sub><i><font style="vertical-align: inherit;">(Cela ne pourrait pas Ãªtre fait si vous plongiez dans les paramÃ¨tres du programmeur)</font></i></sub><font style="vertical-align: inherit;"> 
Maintenant, nous allons lire notre diagramme logique en tant que ROM et obtenir un tableau. </font><font style="vertical-align: inherit;">Nous l'Ã©crivons avec le mÃªme programmeur dans une vÃ©ritable EEPROM, que nous mettons Ã  la place d'un circuit d'Ã©lÃ©ments sÃ©parÃ©s.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/fr/0d/ve/fr0dve-4fubq-v6y-8ilwnqomfs.jpeg"></a><br>
<sub><i><font style="vertical-align: inherit;"></font></i></sub><br>
<br><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/u0/bm/5u/u0bm5uhoa8tbq9_k79djxlhcnfc.jpeg"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queue</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La queue a une longueur (dans nos limites) de 2 Ã  8 cellules. </font><font style="vertical-align: inherit;">Pour stocker cette longueur, vous pouvez utiliser un compteur conventionnel avec une entrÃ©e de rÃ©solution de compte. </font><font style="vertical-align: inherit;">En fait, ce sera la mÃªme machine Ã  Ã©tats finis, dans laquelle le nouvel Ã©tat S 'sera Ã©gal Ã  S + 1 ou juste S (si le compte est interdit). </font><font style="vertical-align: inherit;">La queue elle-mÃªme (ou plutÃ´t, la direction oÃ¹ elle pousse), nous allons stocker dans deux registres de 8 bits. </font><font style="vertical-align: inherit;">ThÃ©oriquement, on pouvait prendre des registres Ã  dÃ©calage prÃªts Ã  l'emploi (par exemple, IR8), mais ils n'Ã©taient pas Ã  portÃ©e de main, donc les mÃªmes IR27 ont Ã©tÃ© utilisÃ©s. </font><font style="vertical-align: inherit;">Ã€ chaque Ã©tape, la direction actuelle du mouvement de la tÃªte est Ã©crite dans le premier bit du registre et la valeur de la prÃ©cÃ©dente dans le second et le suivant. </font><font style="vertical-align: inherit;">Pour obtenir la direction de la croissance de la queue, il suffit d'inverser un bit. </font><font style="vertical-align: inherit;">Vous pouvez le faire tout de suite lors de l'enregistrement, mais j'ai dÃ©cidÃ© qu'il valait mieux laisser l'inverse pour le circuit restant.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SchÃ¨me</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, notre machine du prochain mouvement prend cette forme: </font><i><font style="vertical-align: inherit;">Cette image (comme tout le monde) est cliquable. </font></i><font style="vertical-align: inherit;">
Il s'agit d'une partie plutÃ´t Â«pureÂ» (d'un point de vue thÃ©orique) du schÃ©ma. </font><font style="vertical-align: inherit;">Exemple presque parfait pour </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">une machine Moore codÃ©e en sortie</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">U1 est responsable de la nouvelle direction, U2 de la position de la tÃªte, qui sont stockÃ©es dans U5. </font><font style="vertical-align: inherit;">U3 et U4 sont utilisÃ©s pour la queue, et sa longueur est stockÃ©e (et augmentÃ©e) dans U6. </font><font style="vertical-align: inherit;">
Ensuite, nous devrons afficher tout ce que nous avons Ã  l'Ã©cran, et il y aura Ã©galement un vaisseau spatial, uniquement sous une forme plus sale. </font><font style="vertical-align: inherit;">Ainsi qu'un gÃ©nÃ©rateur de nombres alÃ©atoires primitifs, une transition entre des circuits avec un signal d'horloge diffÃ©rent et d'autres hacks.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/vs/ou/yl/vsouyl-r2rmfrwnnniwue9hojuq.png"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'espÃ¨re que cet article vous a intÃ©ressÃ© et j'essaierai de terminer rapidement la deuxiÃ¨me partie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et si vous Ãªtes dÃ©jÃ  dÃ©chirÃ© par la bataille, rempli de maquettes, de microcircuits et d'Ã©crans Ã  points, un fichier avec le circuit ROM et le firmware est joint Ã  cet article. </font><font style="vertical-align: inherit;">Mini-spoiler: pour rÃ©pÃ©ter la conception, vous aurez besoin d'environ 6 prototypes, 4 EEPROM 28C16 et un peu plus de deux douzaines d'autres puces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, comme il se doit: aimer, partager, retweets, s'inscrire, appuyer sur la cloche, etc ...)) Et pour aujourd'hui tout, merci de votre attention! </font><font style="vertical-align: inherit;">Ã€ suivreâ€¦</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archive avec firmware ROM et schÃ©ma</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
UPD </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">gÃ©nÃ©ral</font></a><font style="vertical-align: inherit;"> : la deuxiÃ¨me partie est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502358/index.html">ImplÃ©mentation de MVP basÃ©e sur ApplicationController et IoC dans une application WinForms</a></li>
<li><a href="../fr502360/index.html">DÃ©charges Grizzly ou Super Drill</a></li>
<li><a href="../fr502362/index.html">Apprentissage du traÃ§age d'Ã©vÃ©nements pour Windows: thÃ©orie et pratique</a></li>
<li><a href="../fr502366/index.html">Comparez le travail de Python open source - bibliothÃ¨ques pour la reconnaissance des entitÃ©s nommÃ©es</a></li>
<li><a href="../fr502368/index.html">Nous pompons le tapis roulant</a></li>
<li><a href="../fr502372/index.html">ProblÃ¨mes et principes de personnalisation de la version en boÃ®te de Bitrix24</a></li>
<li><a href="../fr502374/index.html">Protocole de communication FT8 - Fonctionnement</a></li>
<li><a href="../fr502380/index.html">CÃ©leri + asyncio</a></li>
<li><a href="../fr502382/index.html">Interface VÃ©los Toxic Grandfather. "Mensonges, menaces et chantage." (s1 e6)</a></li>
<li><a href="../fr502384/index.html">La thÃ©orie des jeux et son application dans la vie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>