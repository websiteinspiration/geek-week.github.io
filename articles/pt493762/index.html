<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§µüèΩ üèõÔ∏è üéà Como organizar o back-end de um aplicativo m√≥vel? üÜë ü§Ωüèª üîé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O que estamos fazendo? Servi√ßo de registro e autoriza√ß√£o de usu√°rio para um aplicativo m√≥vel
 
 Em projetos para animais de estima√ß√£o de cada desenvol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como organizar o back-end de um aplicativo m√≥vel?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493762/"><img src="https://habrastorage.org/webt/cx/ck/zj/cxckzjwahn-3ez4gx8w1tlrzspq.jpeg" alt="imagem"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que estamos fazendo? Servi√ßo de registro e autoriza√ß√£o de usu√°rio para um aplicativo m√≥vel</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em projetos para animais de estima√ß√£o de cada desenvolvedor m√≥vel, mais cedo ou mais tarde, chega um momento em que voc√™ precisa, rapidamente e sem muita dor de cabe√ßa, criar um servidor para seu aplicativo. N√£o importa qual fun√ß√£o o servidor deve executar: se √© armazenamento de dados ou registro / autoriza√ß√£o do usu√°rio. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como regra, no come√ßo todo mundo segue (bem ou quase tudo) pelo caminho de menor resist√™ncia.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Estamos procurando uma solu√ß√£o pronta para uso e ver com que rapidez ela pode ser adaptada √†s nossas necessidades.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta fase, a primeira coisa que voc√™ pode "google" s√£o os servi√ßos Firebase, cujos limites gratuitos s√£o mais que suficientes para organizar o back-end de um pequeno aplicativo m√≥vel. </font><font style="vertical-align: inherit;">Mas, neste caso, considerando exatamente o desenvolvedor russo, corremos o risco de adotar nossa legisla√ß√£o - transfer√™ncia de dados e armazenamento transfronteiri√ßo de dados pessoais do usu√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Lei Federal 152 ‚ÄúSobre dados pessoais‚Äù, artigo 12, cap√≠tulo 2) A </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tenta√ß√£o de usar o Firebase √© grande, mas se queremos nos proteger contra barulho desnecess√°rio com v√°rias ag√™ncias de supervis√£o, come√ßamos a procurar op√ß√µes alternativas.</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O pr√≥ximo est√°gio √© o uso de um servidor VDS com algum tipo de solu√ß√£o de c√≥digo-fonte aberto ou freemium, em que o "servi√ßo como servi√ßo" ou uma solu√ß√£o pronta para implantar funcionalidade semelhante √© tomada como base.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° v√°rios anos, no Habr√©, eu j√° escrevi um guia de configura√ß√£o detalhado do BaasBox (o artigo foi removido do p√∫blico devido a informa√ß√µes desatualizadas) em um servidor alugado e dei um exemplo do uso de v√°rias chamadas no aplicativo iOS para a linguagem Objective C. Mas o BaasBox √© realmente ‚Äúpesado‚Äù e determina seu m√≠nimo para um servidor alugado. Tendo brincado um pouco com ele, decidiu-se usar uma solu√ß√£o diferente. Naquela √©poca, o servidor Parse foi recentemente colocado em desenvolvimento de c√≥digo aberto pelo Facebook, n√£o tinha tantos adaptadores quanto atualmente, mas seus recursos eram mais do que suficientes para projetos pessoais e aplicativos de clientes particulares (muitos projetos ainda est√£o existir e trabalhar de forma est√°vel).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ser justo, vale a pena notar que o servidor de an√°lise amadureceu muito e est√° se desenvolvendo ativamente. No momento, quase todas as funcionalidades dispon√≠veis em um ancestral comercial foram recriadas. Voc√™ pode escrever seus pr√≥prios ganchos, notifica√ß√µes push localizadas, um gerenciador de processos e at√© existe uma assinatura para alterar objetos com base em soquetes (ParseLiveQuery - se for interessante, escreverei um artigo separado sobre a configura√ß√£o do ParseLiveQuery).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o servidor de an√°lise deixou de ser interessante precisamente no momento em que era necess√°rio implementar um tipo de dados n√£o padr√£o, dif√≠cil de trabalhar com base nos tipos definidos no sistema. Isso tamb√©m interfere no fato de que, por n√£o ser um desenvolvedor de servidor especializado, eu anteriormente n√£o atribu√≠a import√¢ncia √† implanta√ß√£o mais eficiente do ambiente e muitos arquivos de configura√ß√£o eram feitos √† m√£o, enquanto as a√ß√µes eram repetidas constantemente em cada novo servidor. √â nesse momento que se entende que uma solu√ß√£o em caixa n√£o √© uma solu√ß√£o para todos os problemas e voc√™ deve prosseguir para o pr√≥ximo est√°gio de organiza√ß√£o do servidor para um aplicativo m√≥vel. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recentemente, minha principal linguagem de desenvolvimento √© Swift.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, √© ele quem me interessa principalmente ao escrever o c√≥digo do servidor. </font><font style="vertical-align: inherit;">O Swift em si √© f√°cil de instalar em um sistema unix, mas n√£o oferece vantagens √≥bvias. </font><font style="vertical-align: inherit;">Em sua ess√™ncia, ser√° semelhante ao desenvolvimento de um aplicativo de console com l√≥gica complexa. </font><font style="vertical-align: inherit;">Levar√° muito tempo para recriar os m√©todos b√°sicos necess√°rios no servidor. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como em muitos outros idiomas, o server swift possui estruturas e comunidades pr√≥prias envolvidas no desenvolvimento dessas solu√ß√µes. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No momento, existem tr√™s solu√ß√µes mais importantes para o desenvolvimento r√°pido do lado do servidor:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perfeito</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vapor </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kitura</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem outras op√ß√µes, mas elas n√£o valem a pena mencionar por causa de seu longo desenvolvimento e morte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em termos de documenta√ß√£o e suporte, gosto mais do Vapor, mas √© uma quest√£o de gosto. Outras solu√ß√µes estar√£o perto de algu√©m. De um jeito ou de outro, em muitos momentos eles s√£o semelhantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturalmente, ao longo do ciclo de artigos em meus exemplos, usarei o Vapor. Com base nisso, implementamos o servi√ßo de registro / autoriza√ß√£o do usu√°rio, enviando e confirmando e-mails, a capacidade de redefinir e alterar a senha. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vw/cb/al/vwcbalyvknowex3y_gfdmut4gzg.png" alt="imagem"><img src="https://habrastorage.org/webt/3p/vg/os/3pvgos4ozvoxeqhby2co5gd53b8.png" alt="imagem"><br>
<img src="https://habrastorage.org/webt/tj/r3/qb/tjr3qbenlq1jqhmuwfasf4mduqq.png" alt="imagem"><img src="https://habrastorage.org/webt/hj/kb/vy/hjkbvy9ei-pojewwbv4z6ywnu84.png" alt="imagem"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vale a pena fazer uma implementa√ß√£o sem benef√≠cio pr√°tico?</font></font></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Provavelmente n√£o! Portanto, faremos o servi√ßo mais adulto que voc√™ pode executar e usar para organizar a l√≥gica para armazenar dados do usu√°rio em seu servidor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se a decis√£o for adulta, isso implica o uso de decis√µes deliberadas. </font><font style="vertical-align: inherit;">Devemos simplificar o dimensionamento, implementar a valida√ß√£o de dados e fornecer o armazenamento da sess√£o do usu√°rio, para n√£o for√ß√°-lo a inserir seu nome de usu√°rio e senha a cada vez. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do que precisamos para isso?</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VAPOR 4 (sim, ainda em beta, mas o lan√ßamento est√° chegando, como prometido pelos desenvolvedores)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL (existe um excelente adaptador para trabalhar com este banco de dados)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL (feche todos os nossos pedidos do cliente para o servidor usando um certificado)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Localhost (considere o m√©todo de desenvolvimento localmente, para n√£o se conectar √† rede e trabalhar na estrada sem problemas)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, vamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">empacotar tudo isso no Docker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para garantir o mesmo trabalho, independente do ambiente de tempo de execu√ß√£o atual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Honestamente, eu era c√©tico em rela√ß√£o √† janela de encaixe de uma s√≥ vez, mas deveria ter examinado mais de perto essa tecnologia. O objetivo do artigo n√£o √© explicar seu trabalho e aprender a trabalhar com ele (suspeito que eu ainda precise aprender muitos recursos interessantes da janela de encaixe). Mas aqueles que n√£o sabem o que √© e como trabalhar com ele podem se familiarizar com o Docker de forma independente por meio do link oficial: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.docker.com</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Olhando para o futuro, deixarei um link √∫til para o aplicativo Kitematic, projetado para simplificar o trabalho com cont√™ineres do docker : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kitematic.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (deve ter para quem n√£o gosta de usar o terminal).</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, vamos come√ßar instalando o Docker em um computador Mac: </font></font></b><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Siga o</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
link </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub.docker.com/editions/community/docker-ce-desktop-mac</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e fa√ßa o download do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get Docker Desktop For Mac (Est√°vel).</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/-2/kn/cl/-2knclw93ax6stjjuiijrsr02fq.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Abra a imagem resultante e n√£o instale nada difere da c√≥pia padr√£o do aplicativo no diret√≥rio do programa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/0o/t1/ea0ot1fxqjce-px54lvazivob7q.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, basta iniciar o aplicativo e aguardar a inicializa√ß√£o completa do servi√ßo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tc/fp/pc/tcfppc1iaj4q8ozy5cpgfziywfo.png" alt="imagem"><img src="https://habrastorage.org/webt/yp/_h/1s/yp_h1sn62l0sbk0fugzerwpqyhe.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se ainda n√£o houver um ID do Docker, ele dever√° ser criado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub.docker.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, se houver, basta fazer login no aplicativo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wy/xv/iq/wyxviqdri5ynenssj2-oayiy5mi.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© tudo, a prepara√ß√£o para o uso do Docker est√° conclu√≠da. Resta apenas verificar a vers√£o atual e informa√ß√µes sobre o ambiente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&gt; vers√£o do </font></font><br>
<img src="https://habrastorage.org/webt/8g/yb/_k/8gyb_kqje0p5rsbelsf9wpzf9fm.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
docker&gt; informa√ß√µes do docker</font></font><br>
<img src="https://habrastorage.org/webt/oc/g5/x1/ocg5x1slt4bmqm4srhm7adobq2i.png" alt="imagem"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso conclui a prepara√ß√£o para o desenvolvimento do servi√ßo de autoriza√ß√£o. </font><font style="vertical-align: inherit;">Na pr√≥xima parte, veremos como voc√™ pode usar cont√™ineres de v√°rios servi√ßos, trataremos do docker-composite para automatizar a montagem do nosso ambiente e come√ßar a escrever c√≥digo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS: Um pequeno conselho da experi√™ncia pessoal. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando desenvolvemos servi√ßos em nossa m√°quina local, o Docker aloca recursos padr√£o para nosso uso. </font><font style="vertical-align: inherit;">Se quisermos visualizar o comportamento esperado do servi√ßo em um servidor remoto, devemos cuidar dos recursos na m√°quina local, o mais pr√≥ximo poss√≠vel das caracter√≠sticas do servidor. </font><font style="vertical-align: inherit;">Voc√™ pode fazer isso nas configura√ß√µes do aplicativo Docker Desktop, que </font><font style="vertical-align: inherit;">
baixamos </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hs/h9/ds/hsh9dspn18hwwbsqywrj-hjjuds.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
: Autor do artigo: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vitaly Podolsky, professor HackerU</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt493748/index.html">Interesse no coronav√≠rus COVID-19 na Internet. O que eles est√£o procurando, quanto, onde e como? Vamos ver o Yandex.Wordstat e o Google. Trends</a></li>
<li><a href="../pt493752/index.html">CAPTCHA para codeigniter 4</a></li>
<li><a href="../pt493756/index.html">Como iniciar uma startup em mercados estrangeiros durante a quarentena: Reddit, Product Hunt, recursos na Am√©rica Latina</a></li>
<li><a href="../pt493758/index.html">A intelig√™ncia artificial criar√° primeiro um corpus de manuscritos eslavos antigos</a></li>
<li><a href="../pt493760/index.html">Tecnologia Li-Ion: o custo unit√°rio diminui mais rapidamente do que o previsto</a></li>
<li><a href="../pt493768/index.html">Reagir lista nativa</a></li>
<li><a href="../pt493772/index.html">As 10 principais dicas e truques do Kubernetes</a></li>
<li><a href="../pt493792/index.html">Relat√≥rios do segundo Meetup do ROS sobre navega√ß√£o por rob√¥s</a></li>
<li><a href="../pt493794/index.html">Como o escrit√≥rio da FunCorp em Moscou mudou para udalenka em 1 dia</a></li>
<li><a href="../pt493796/index.html">4 melhores padr√µes de design para testes automatizados (e 86 mais)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>