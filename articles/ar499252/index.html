<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คท๐พ ๐ต๐ผ ๐ฆ ุฅูุดุงุก ูุนุจุฉ ุณุจุงู ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ๐ฉ๐ผโโ๏ธ โ๏ธ ๐๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุนูุฏูุง ููุช ุทููุงู ุ ูุงุฏุฑูุง ูุง ุฐูุจุช ุฅูู ุฃุฑููุฉ ุงูุฃุฑููุฉ ูุฃููู ูู ุฃูู ุจุญุงุฌุฉ ุฅูููุง ุญููุง ุ ูุฃู ูุฏู ุฃูุนุงุจ ุฑุงุฆุนุฉ ูู C64 ูู ุงูููุฒู ... ูููู ููุงู ุซูุงุซ ุฃูุนุงุจ ุฃุฑููุฏ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุฅูุดุงุก ูุนุจุฉ ุณุจุงู ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499252/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d16/6e3/cff/d166e3cff9c2a3cefeb68f5c1ddc02d1.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ููุช ุทููุงู ุ ูุงุฏุฑูุง ูุง ุฐูุจุช ุฅูู ุฃุฑููุฉ ุงูุฃุฑููุฉ ูุฃููู ูู ุฃูู ุจุญุงุฌุฉ ุฅูููุง ุญููุง ุ ูุฃู ูุฏู ุฃูุนุงุจ ุฑุงุฆุนุฉ ูู C64 ูู ุงูููุฒู ... ูููู ููุงู ุซูุงุซ ุฃูุนุงุจ ุฃุฑููุฏ ููุช ุฃููู ุงููุงู ููุง ุฏุงุฆููุง - Donkey Kong ู Dragons Lair ู Outrun ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ูุฃุญุจุจุช ุญูุง Outrun - ุงูุณุฑุนุฉ ูุงูุชูุงู ูุฃุดุฌุงุฑ ุงููุฎูู ูุงูููุณููู ุ ุญุชู ูู ุงูุฅุตุฏุงุฑ ุงูุถุนูู ูู C64.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/48e/aee/56f/48eaee56f43d8a25e840c6ae13268db4.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ูุฑุฑุช ุฃู ุฃุญุงูู ูุชุงุจุฉ ูุนุจุฉ ุณุจุงู ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุดุจู ูุฏููุฉ ุจุฃุณููุจ Outrun ุฃู Pitstop ุฃู Pole position. </font><font style="vertical-align: inherit;">ุฃูุง ูุง ุฃุฎุทุท ูุชุฌููุน </font><font style="vertical-align: inherit;">ูุนุจุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงููุฉ ููุงููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ูุจุฏู ูู ุฃูู ุณูููู ูู ุงููุซูุฑ ููุงูุชูุงู ุฅุนุงุฏุฉ ูุญุต ุงูุขููุงุช ุงูุชู ุฃุฏุฑูุช ุจูุง ูุฐู ุงูุฃูุนุงุจ ุญูููุง. </font><font style="vertical-align: inherit;">ุงูููุญููุงุช ูุงูุชูุงู ูุงูุนูุงุฑูุช ูุงูุดุนูุฑ ุจุงูุณุฑุนุฉ ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐู ุ ูุฐุง ูู "ูุดุฑูุน ููุงูุฉ ุงูุฃุณุจูุน" ุ ุงูุฐู ุงุณุชุบุฑู ูู ููุงูุฉ ุงููุทุงู ุฎูุณุฉ ุฃู ุณุชุฉ ุฃุณุงุจูุน ูู ุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ec/27b/d28/7ec27bd28630dbbaf7b81c87233c28ac.png"></div><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุนุจ ูุนุจุฉ</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฒ ุงููุตุฏุฑ</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุณุฎุฉ ุงููุงุจูุฉ ููุนุจ ุชุดุจู ุนุฑุถูุง ุชููููุง ุฃูุซุฑ ูู ููููุง ูุนุจุฉ ุญููููุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุฅุฐุง ููุช ุชุฑูุฏ ุฅูุดุงุก ุณุจุงู ุฒุงุฆู ุซูุงุซู ุงูุฃุจุนุงุฏ ุญูููู ุ ูุณูููู ูุฐุง ูู ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฃุณุงุณ ุงูุฐู ุชุญุชุงุฌู ูุชุญูููู ุชุฏุฑูุฌููุง ุฅูู ูุนุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูู ุบูุฑ ูุตููู ุ ูุจูุญ ููููุงู ุ ููููู ูุนูู ุจูุงูู ุทุงูุชู. </font><font style="vertical-align: inherit;">ุณุฃูุถุญ ูู ููููุฉ ุชูููุฐูุง ุจููุณู ูู ุฃุฑุจุน ุฎุทูุงุช ุจุณูุทุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุฃูุถุง ุงููุนุจ</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูุทุฑูู ุงููุจุงุดุฑ</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุฑุถ ุงูุชูุถูุญู ูุน ุงูููุญููุงุช</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุฑุถ ุงูุชูุถูุญู ูุน ุงูุชูุงู</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุฎุฉ ุงูููุงุฆูุฉ</font></font></a></li>
</ul><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนู ุงูุฃุฏุงุก</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุชูุฏ ุฃุฏุงุก ูุฐู ุงููุนุจุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ูุจูุฑ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุงูุฌูุงุฒ / ุงููุชุตูุญ. </font><font style="vertical-align: inherit;">ูู ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ ุ ูุนูู ุจุดูู ุฌูุฏ ุ ุฎุงุตุฉ ูู ุชูู ุงูุชู ุชุญุชูู ุนูู ุชุณุฑูุน GPU ููุงุด ุ ูููู ูููู ุฃู ูุชุณุจุจ ุจุฑูุงูุฌ ุชุดุบูู ุงูุฑุณููุงุช ุงูุณูุฆ ูู ุชุฌููุฏู. </font><font style="vertical-align: inherit;">ูู ุงููุนุจุฉ ุ ููููู ุชุบููุฑ ุฏูุฉ ุงูุนุฑุถ ููุณุงูุฉ ุงูุนุฑุถ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูู ุจููุฉ ุงูููุฏ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุฏุซ ุฃู ุชู ุชูููุฐ ุงููุดุฑูุน ูู Javascript (ุจุณุจุจ ุจุณุงุทุฉ ุงูููุงุฐุฌ ุงูุฃูููุฉ) ุ ูููู ููุณ ุงูููุตูุฏ ููู ุฅุธูุงุฑ ุชูููุงุช ุฃู ุชูููุงุช Javascript ุงูููุตู ุจูุง. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุณูููุฉ ุงูููู ุ ูุชู ุชุถููู ุฌุงูุง ุณูุฑูุจุช ููู ูุซุงู ูุจุงุดุฑุฉ ูู ุตูุญุฉ HTML (ุงูุฑุนุจ!) ุ </font><font style="vertical-align: inherit;">ูุงูุฃุณูุฃ ูู ุฐูู ุฃููุง ุชุณุชุฎุฏู ุงููุชุบูุฑุงุช ูุงููุธุงุฆู ุงูุนุงูููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุฃููู ุจุฅูุดุงุก ูุนุจุฉ ุญููููุฉ ุ ูุณุชููู ุงูุดูุฑุฉ ุฃูุซุฑ ุชูุธูููุง ูุชุจุณูุทูุง ุ ูููู ูุธุฑูุง ูุฃู ูุฐุง ุนุฑุถ ุชูุถูุญู ุชููู ููุนุจุฉ ุณุจุงู ุ ููุฏ ูุฑุฑุช ุงูุชูุณู ุจู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KISS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 1. ุงูุทุฑู ุงููุณุชูููุฉ.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ููู ูุจุฏุฃ ูู ุฅูุดุงุก ูุนุจุฉ ุณุจุงู ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุฒุงุฆูุฉุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ูุญู ุจุญุงุฌุฉ</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฑ ุนูู ุงููุซูุซุงุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฐูุฑ ุฃุณุงุณูุงุช ุงูุฅุณูุงุท ุซูุงุซู ุงูุฃุจุนุงุฏ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุญููุฉ ูุนุจุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฒูู ุตูุฑ ุงูุนูุฑูุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงุก ููุฏุณุฉ ุงูุทุฑู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุนู ุงูุฎูููุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฌุนู ุงูุทุฑูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุนู ุงูุณูุงุฑุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐ ุฏุนู ููุญุฉ ุงูููุงุชูุญ ููุชุญูู ูู ุงููุงูููุฉ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุจู ุฃู ูุจุฏุฃ ุ ุฏุนูุง ููุฑุฃ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lou's Pseudo 3d Page</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุฌูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุจุฑู] - ุงููุตุฏุฑ ุงููุญูุฏ ูููุนูููุงุช (ุงูุชู ูููููู ุงูุนุซูุฑ ุนูููุง) ุญูู ููููุฉ ุฅูุดุงุก ูุนุจุฉ ุณุจุงู psevdotrohmernuyu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชููุช ูู ูุฑุงุกุฉ ููุงู ููุ </font><font style="vertical-align: inherit;">ุบุฑุงูุฉ! </font><font style="vertical-align: inherit;">ุณูููู ุจุฅูุดุงุก ูุฌููุนุฉ ูุชููุนุฉ ูู ุชูุงูู ุงููุงูุนูุฉ ุจุงุณุชุฎุฏุงู ุชูููุฉ ุงูุดุฑุงุฆุญ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ. </font><font style="vertical-align: inherit;">ุณูููู ุจุฐูู ุชุฏุฑูุฌูุงู ุฎูุงู ุงูุฃุฌุฒุงุก ุงูุฃุฑุจุนุฉ ุงูุชุงููุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุณูุจุฏุฃ ุงูุขู ุ ูุน ุงูุฅุตุฏุงุฑ v1 ุ ูููุดุฆ ููุฏุณุฉ ุทุฑูู ูุณุชููู ุจุณูุทุฉ ููุบุงูุฉ ุนู ุทุฑูู ุนุฑุถู ุนูู ุนูุตุฑ ููุญุฉ HTML5.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฑุคูุฉ ุงูุนุฑุถ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููู ูู ุนูู ุงููุซูุซุงุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุฃู ูุจุฏุฃ ูู ุงูุชูููุฐ ุ ุฏุนูุง ูุณุชุฎุฏู ุฃุณุงุณูุงุช ุนูู ุงููุซูุซุงุช ูุชุฐูุฑ ููููุฉ ุฅุจุฑุงุฒ ููุทุฉ ูู ุงูุนุงูู ุซูุงุซู ุงูุฃุจุนุงุฏ ุนูู ุดุงุดุฉ ุซูุงุฆูุฉ ุงูุฃุจุนุงุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุจุณุท ุงูุญุงูุงุช ุ ุฅุฐุง ูู ุชููุณ ุงููุชุฌูุงุช ูุงููุตูููุงุช ุ ูุณูุชู ุงุณุชุฎุฏุงู ูุงููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุซูุซุงุช ุงููุชุดุงุจูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฅุณูุงุท ุซูุงุซู ุงูุฃุจุนุงุฏ </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ูุณุชุฎุฏู ุงูุฑููุฒ ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = ุงุฑุชูุงุน ุงููุงููุฑุง</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = ุงููุณุงูุฉ ูู ุงููุงููุฑุง ุฅูู ุงูุดุงุดุฉ</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = ุงููุณุงูุฉ ูู ุงููุงููุฑุง ุฅูู ุงูุณูุงุฑุฉ</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = ุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ </font><strong><font style="vertical-align: inherit;">y</font></strong></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูููููุง ุงุณุชุฎุฏุงู ูุงููู ุงููุซูุซุงุช ุงููุชุดุงุจูุฉ ููุญุณุงุจ </font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y = h * d / z</font></font></strong></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูู ููุถุญ ูู ุงูุฑุณู ุงูุจูุงูู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/949/0ab/47b/9490ab47bb570b61218e46e5913c18bb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุฃูุถูุง ุฑุณู ุฑุณู ุชุฎุทูุทู ููุงุซู ูู ุนุฑุถ ุนููู ุจุฏูุงู ูู ุนุฑุถ ุฌุงูุจู ุ ูุงุดุชูุงู ูุนุงุฏูุฉ ููุงุซูุฉ ูุญุณุงุจ ุฅุญุฏุงุซูุงุช </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุดุงุดุฉ:</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณ = ุซ * ุฏ / ุถ</font></font></strong></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญูุซ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = ูุตู ุนุฑุถ ุงูุทุฑูู (ูู ุงููุงููุฑุง ุฅูู ุญุงูุฉ ุงูุทุฑูู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑู ุ ุจุงููุณุจุฉ ุฅูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><font style="vertical-align: inherit;">ูุฅููุง ูููุณูุง ุจุนุงูู</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏ / ุถ</font></font></strong></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธู ุงูุฅุญุฏุงุซูุงุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูู ุฑุณู ุชุฎุทูุทู ุ ูุจุฏู ุฌููููุง ูุจุณูุทูุง ุ ูููู ุนูุฏูุง ุชุจุฏุฃ ูู ุงูุชุฑููุฒ ุ ููููู ุงูุญุตูู ุนูู ุงููููู ูู ุงูุงุฑุชุจุงู ุ ูุฃููุง ุงุฎุชุฑูุง ุฃุณูุงุก ุนุดูุงุฆูุฉ ุ ูููุณ ูู ุงููุงุถุญ ูุง ุญุฏุฏูุง ุฅุญุฏุงุซูุงุช ุงูุนุงูู ุซูุงุซู ุงูุฃุจุนุงุฏ ุ ููุง ูู ุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ ุซูุงุฆูุฉ ุงูุฃุจุนุงุฏ. </font><font style="vertical-align: inherit;">ููุชุฑุถ ุฃูุถูุง ุฃู ุงููุงููุฑุง ูู ูุฑูุฒ ุฃุตู ุงูุนุงูู ุ ุนูู ุงูุฑุบู ูู ุฃููุง ุณุชุชุจุน ุงูุขูุฉ ูู ุงููุงูุน. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุงูุชุฑุจุช ุจุดูู ุฃูุซุฑ ุฑุณููุฉ ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุชูููุฐ:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญููู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฅุญุฏุงุซูุงุช ุงูุนุงูู ุฅูู ุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ</font></font></li>
<li><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุณู ูุงููุฑุง </font><strong><font style="vertical-align: inherit;">ุงูุนุฑุถ</font></strong><font style="vertical-align: inherit;"> ุนูู ูุณุชูู ุนุฑุถ ุนุงุฏู</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฌูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุญุฏุงุซูุงุช ุงููุณูุทุฉ ูุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ ุงููุงุฏูุฉ (ูู ุญุงูุชูุง ุ ูุฐุง ููุงุด)</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b59/5d2/30f/b595d230f4f45b9b0c9409266d5804d8.png"></div><br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ูู ุงููุธุงู ุซูุงุซู ุงูุฃุจุนุงุฏ ุงูุญุงูู </font><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ูุชู ุชูููุฐ ูุฑุญูุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏูุฑุงู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูู ุงููุฑุญูุชูู 1 ู 2 </font><font style="vertical-align: inherit;">ุ ูููู ูุธุฑูุง ูุฃููุง ุณูููู ุจูุญุงูุงุฉ ุงูููุญููุงุช ุ ูุฅููุง ูุง ูุญุชุงุฌ ุฅูู ุฏูุฑุงู.</font></font></em></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุจุค</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชูุซูู ูุนุงุฏูุงุช ุงูุฅุณูุงุท ุงูุฑุณููุฉ ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/edb/246/e18/edb246e187e7fe0eb027b53c58790c34.png"></div><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุญุชุณุงุจ ููุทุฉ </font><font style="vertical-align: inherit;">ูุนุงุฏูุงุช ุงูุชุญููู ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุฌูุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุจุงููุณุจุฉ ููุบุฑูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงุฏูุงุช ุงูุฅุณูุงุท ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดุฑูุน</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูู ุงุฎุชูุงูุงุช ูู "ูุงููู ุงููุซูุซุงุช ุงููุชุดุงุจูุฉ" ุงูููุถุญุฉ ุฃุนูุงู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงุฏูุงุช ุงูููุงุณ ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุงุณ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงููุฑู ุจูู:</font></font><br>
<ul>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑูุงุถูุงุช</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ 0ุ0 ูู ุงููุฑูุฒ ูุงููุญูุฑ ุต ูุฃุนูู ุ ู</font></font></li>
<li><em></em>,  0,0     ,   y  :</li>
</ul></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/11f/050/aad/11f050aadea0d1c537baefcb06f7c2f0.png"></div><br>
<blockquote><em>:   3d-         <code>Vector</code>  <code>Matrix</code>     3d-,      ,      WebGL (  )โฆ       .           Outrun.</em></blockquote><br>
<h2>  </h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b7/27b/1bd/3b727b1bdb285d874bd659c29db13522.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุชููู ุงููุทุนุฉ ุงูุฃุฎูุฑุฉ ูู ุงููุบุฒ ุทุฑููุฉ ูุญุณุงุจ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงููุณุงูุฉ ูู ุงููุงููุฑุง ุฅูู ูุณุชูู ุงูุนุฑุถ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏูุงู ูู ูุชุงุจุฉ ูููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุญุฏุฏุฉ ุจุดุฏุฉ </font><font style="vertical-align: inherit;">ุ ุณูููู ูู ุงููููุฏ ุญุณุงุจูุง ูู ูุฌุงู ุงูุฑุคูุฉ ุงูุฑุฃุณู ุงููุทููุจ. </font><font style="vertical-align: inherit;">ูุจูุถู ูุฐุง ุ ุณูุชููู ูู "ุชูุจูุฑ / ุชุตุบูุฑ" ุงููุงููุฑุง ุฅุฐุง ูุฒู ุงูุฃูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุงูุชุฑุถูุง ุฃููุง ูุนุฑุถ ุนูู ูุณุชูู ุฅุณูุงุท ุนุงุฏู ุ ุชููู ุฅุญุฏุงุซูุงุชู โโูู ุงููุทุงู ูู -1 ุฅูู +1 ุ </font><font style="vertical-align: inherit;">ููููู ุญุณุงุจ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 1 / ุชุงู (ููู / 2)</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฎูุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฑูู fov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุบูุฑ (ูู ุงูุนุฏูุฏ) ูู ุงููุชุบูุฑุงุช ุ ูููููุง ุถุจุท ุงููุทุงู ูุถุจุท ุฎูุงุฑุฒููุฉ ุงูุนุฑุถ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ููุฏ ุฌุงูุง ุณูุฑูุจุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุฏุงูุฉ ุงูููุงู ุ ุณุจู ุฃู ููุช ุฃู ุงูุฑูุฒ ูุง ูุชูุงูู ุชูุงููุง ูุน ุงููุจุงุฏุฆ ุงูุชูุฌูููุฉ ููุชุงุจุฉ ุฌุงูุง ุณูุฑูุจุช - ุฅูู ุนุฑุถ "ุณุฑูุน ููุฐุฑ" ูุน ูุชุบูุฑุงุช ููุธุงุฆู ุนุงูููุฉ ุจุณูุทุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุธุฑูุง ูุฃููู ุณุฃููู ุจุฅูุดุงุก ุฃุฑุจุนุฉ ุฅุตุฏุงุฑุงุช ูููุตูุฉ (ูุณุชููู ุ ููุญููุงุช ุ ุชูุงู ูุนูุงุฑูุช) ุ ูุณุฃููู ุจุชุฎุฒูู ุจุนุถ ุงูุทุฑู ุงูุชู ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงููุง ุฏุงุฎู </font></font><code>common.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุฏุงุช ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dom</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุนุฏุฏ ูููู ูู ูุธุงุฆู ูุณุงุนุฏ DOM ุงูุซุงูููุฉ.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Util</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงููุฑุงูู ุงูุนุงูุฉ ุ ูุฎุงุตุฉ ุงููุธุงุฆู ุงูุฑูุงุถูุฉ ุงููุณุงุนุฏุฉ.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนุจุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุธุงุฆู ุฏุนู ุงูุฃูุนุงุจ ุงูุนุงูุฉ ุ ูุซู ุชูุฒูู ุงูุตูุฑ ูุญููุฉ ุงููุนุจุฉ.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุธุงุฆู ุชูุฏูู ุงููุณุงุนุฏ ุนูู ููุงุด.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฃุดุฑุญ ุจุงูุชูุตูู ุงูุฃุณุงููุจ ูู </font></font><code>common.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุท ุฅุฐุง ูุงูุช ุชุชุนูู ุจุงููุนุจุฉ ููุณูุง ุ ูููุณุช ูุฌุฑุฏ ูุธุงุฆู ุฑูุงุถูุฉ ูุณุงุนุฏุฉ ุฃู DOM. </font><font style="vertical-align: inherit;">ูุฃูู ูู ุงูุงุณู ูุงูุณูุงู ุฃู ูุชุถุญ ูุง ูุฌุจ ุฃู ุชูุนูู ุงูุฃุณุงููุจ.</font></font><br>
<br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุนุงุฏุฉ ุ ููุฏ ุงููุตุฏุฑ ููุฌูุฏ ูู ุงููุซุงุฆู ุงูููุงุฆูุฉ.</font></font></em></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููุฉ ูุนุจุฉ ุจุณูุทุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุชูุฏูู ุดูุก ูุง ุ ูุญุชุงุฌ ุฅูู ุญููุฉ ูุนุจุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชูุฑุฃ ุฃู ูู ููุงูุงุชู ุงูุณุงุจูุฉ ุญูู ุงูุฃูุนุงุจ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฉ ุงูุทุงููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุฑุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุฑูุณ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุซุนุงุจูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boulderdash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ุ ุซู ุฑุฃูุชู ุจุงููุนู ุฃูุซูุฉ ูู ุจูุฏู ุฏูุฑุฉ ุงููุนุจุฉ ุงูููุถูุฉ ูุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทูุฉ ุฒูููุฉ ูุญุฏุฏุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุชุนูู ูู ุงูุชูุงุตูู ุ ูุฃููู ุจุจุณุงุทุฉ ุจุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุฌุฒุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุงูุฃูุนุงุจ ุงูุณุงุจูุฉ ูุฅูุดุงุก ุญููุฉ ูุนุจุฉ ุจุฎุทูุฉ ุฒูููุฉ ุซุงุจุชุฉ ุจุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestAnimationFrame</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุจุฏุฃ ูู ุฃู ูู ูู ุงูุฃูุซูุฉ ุงูุฃุฑุจุนุฉ ุงูุฎุงุตุฉ ุจู ูููููุง ุงูุงุชุตุงู </font></font><code>Game.run(...)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุณุชุฎุฏุงู ูุณุฎูุง ุงูุฎุงุตุฉ</font></font><br>
<br>
<ul>
<li><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุญุฏูุซ ุนุงูู ุงููุนุจุฉ ุจุฎุทูุฉ ุฒูููุฉ ูุญุฏุฏุฉ.</font></font></li>
<li><code>render</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุญุฏูุซ ุนุงูู ุงููุนุจุฉ ุนูุฏูุง ูุณูุญ ุงููุชุตูุญ.</font></font></li>
</ul><br>
<pre><code class="javascript hljs">run: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{<font></font>
<font></font>
  Game.loadImages(options.images, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">images</span>) </span>{<font></font>
<font></font>
    <span class="hljs-keyword">var</span> update = options.update,    <span class="hljs-comment">// method to update game logic is provided by caller</span>
        render = options.render,    <span class="hljs-comment">// method to render the game is provided by caller</span>
        step   = options.step,      <span class="hljs-comment">// fixed frame step (1/fps) is specified by caller</span>
        now    = <span class="hljs-literal">null</span>,<font></font>
        last   = Util.timestamp(),<font></font>
        dt     = <span class="hljs-number">0</span>,<font></font>
        gdt    = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">frame</span>(<span class="hljs-params"></span>) </span>{<font></font>
      now = Util.timestamp();<font></font>
      dt  = <span class="hljs-built_in">Math</span>.min(<span class="hljs-number">1</span>, (now - last) / <span class="hljs-number">1000</span>); <span class="hljs-comment">// using requestAnimationFrame have to be able to handle large delta's caused when it 'hibernates' in a background or non-visible tab</span><font></font>
      gdt = gdt + dt;<font></font>
      <span class="hljs-keyword">while</span> (gdt &gt; step) {<font></font>
        gdt = gdt - step;<font></font>
        update(step);<font></font>
      }<font></font>
      render();<font></font>
      last = now;<font></font>
      requestAnimationFrame(frame);<font></font>
    }<font></font>
    frame(); <span class="hljs-comment">// lets get this party started</span><font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฉ ุฃุฎุฑู ุ ูุฐู ุทุจุนุฉ ุฌุฏูุฏุฉ ูู ุงูุฃููุงุฑ ูู ุฃูุนุงุจู ุงูููุงุดูุฉ ุงูุณุงุจูุฉ ุ ูุฐูู ุฅุฐุง ููุช ูุง ุชููู ููู ุชุนูู ุญููุฉ ุงููุนุจุฉ ุ ูุงุฑุฌุน ุฅูู ุฅุญุฏู ุงูููุงูุงุช ุงูุณุงุจูุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุตูุฑ ูุงูุนูุงุฑูุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุจุฏุก ุฏูุฑุฉ ุงููุนุจุฉ ุ ูููู ุจุชุญููู ุตูุญุชูู ูููุตูุชูู (ุฃูุฑุงู ุงูุฑููุฒ ุงููุชุญุฑูุฉ):</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูููุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุซูุงุซ ุทุจูุงุช ุงูููุธุฑ ููุณูุงุก ูุงูุชูุงู ูุงูุฃุดุฌุงุฑ</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุงุฑูุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><strong><font style="vertical-align: inherit;">ุงูุนูุงุฑูุช</font></strong><font style="vertical-align: inherit;"> ุงูุขููุฉ (ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃุดุฌุงุฑ ูุงูููุญุงุช ุงูุฅุนูุงููุฉ ุงูุชู ุณุชุชู ุฅุถุงูุชูุง ุฅูู ุงูุฅุตุฏุงุฑ ุงูููุงุฆู)</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f6f/111/acc/f6f111accbba448459e25c6fe761ff05.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุฅูุดุงุก ูุฑูุฉ ุงูุนูุฑูุช ุจุงุณุชุฎุฏุงู ูููุฉ ุตุบูุฑุฉ Rake and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruby Gem sprite-factory</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููู ูุฐู ุงููููุฉ ุจุฅูุดุงุก ุฃูุฑุงู ุงูุฑููุฒ ุงููุชุญุฑูุฉ ุงููุฏูุฌุฉ ุจุงูุฅุถุงูุฉ ุฅูู ุฅุญุฏุงุซูุงุช x ู y ู w ู h ุงูุชู ุณูุชู ุชุฎุฒูููุง ูู ุงูุซูุงุจุช </font></font><code>BACKGROUND</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>SPRITES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ููุฏ ููุช ุจุฅูุดุงุก ุงูุฎูููุงุช ุจุงุณุชุฎุฏุงู Inkscape ุ ููุนุธู ุงูุฑููุฒ ุงููุชุญุฑูุฉ ูู ุฑุณููุงุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฎูุฐุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฅุตุฏุงุฑ Outrun ุงููุฏูู ูู Genesis ูุชุณุชุฎุฏู ูุฃูุซูุฉ ุชุฏุฑูุจูุฉ.</font></font></em></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุบูุฑุงุช ุงููุนุจุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุตูุฑ ุงูุฎูููุงุช ูุงูุนูุงุฑูุช ุ ุณูุญุชุงุฌ ุฅูู ุงูุนุฏูุฏ ูู ูุชุบูุฑุงุช ุงููุนุจุฉ ุ ููู:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> fps           = <span class="hljs-number">60</span>;                      <span class="hljs-comment">// how many 'update' frames per second</span>
<span class="hljs-keyword">var</span> step          = <span class="hljs-number">1</span>/fps;                   <span class="hljs-comment">// how long is each frame (in seconds)</span>
<span class="hljs-keyword">var</span> width         = <span class="hljs-number">1024</span>;                    <span class="hljs-comment">// logical canvas width</span>
<span class="hljs-keyword">var</span> height        = <span class="hljs-number">768</span>;                     <span class="hljs-comment">// logical canvas height</span>
<span class="hljs-keyword">var</span> segments      = [];                      <span class="hljs-comment">// array of road segments</span>
<span class="hljs-keyword">var</span> canvas        = Dom.get(<span class="hljs-string">'canvas'</span>);       <span class="hljs-comment">// our canvas...</span>
<span class="hljs-keyword">var</span> ctx           = canvas.getContext(<span class="hljs-string">'2d'</span>); <span class="hljs-comment">// ...and its drawing context</span>
<span class="hljs-keyword">var</span> background    = <span class="hljs-literal">null</span>;                    <span class="hljs-comment">// our background image (loaded below)</span>
<span class="hljs-keyword">var</span> sprites       = <span class="hljs-literal">null</span>;                    <span class="hljs-comment">// our spritesheet (loaded below)</span>
<span class="hljs-keyword">var</span> resolution    = <span class="hljs-literal">null</span>;                    <span class="hljs-comment">// scaling factor to provide resolution independence (computed)</span>
<span class="hljs-keyword">var</span> roadWidth     = <span class="hljs-number">2000</span>;                    <span class="hljs-comment">// actually half the roads width, easier math if the road spans from -roadWidth to +roadWidth</span>
<span class="hljs-keyword">var</span> segmentLength = <span class="hljs-number">200</span>;                     <span class="hljs-comment">// length of a single segment</span>
<span class="hljs-keyword">var</span> rumbleLength  = <span class="hljs-number">3</span>;                       <span class="hljs-comment">// number of segments per red/white rumble strip</span>
<span class="hljs-keyword">var</span> trackLength   = <span class="hljs-literal">null</span>;                    <span class="hljs-comment">// z length of entire track (computed)</span>
<span class="hljs-keyword">var</span> lanes         = <span class="hljs-number">3</span>;                       <span class="hljs-comment">// number of lanes</span>
<span class="hljs-keyword">var</span> fieldOfView   = <span class="hljs-number">100</span>;                     <span class="hljs-comment">// angle (degrees) for field of view</span>
<span class="hljs-keyword">var</span> cameraHeight  = <span class="hljs-number">1000</span>;                    <span class="hljs-comment">// z height of camera</span>
<span class="hljs-keyword">var</span> cameraDepth   = <span class="hljs-literal">null</span>;                    <span class="hljs-comment">// z distance camera is from screen (computed)</span>
<span class="hljs-keyword">var</span> drawDistance  = <span class="hljs-number">300</span>;                     <span class="hljs-comment">// number of segments to draw</span>
<span class="hljs-keyword">var</span> playerX       = <span class="hljs-number">0</span>;                       <span class="hljs-comment">// player x offset from center of road (-1 to 1 to stay independent of roadWidth)</span>
<span class="hljs-keyword">var</span> playerZ       = <span class="hljs-literal">null</span>;                    <span class="hljs-comment">// player relative z distance from camera (computed)</span>
<span class="hljs-keyword">var</span> fogDensity    = <span class="hljs-number">5</span>;                       <span class="hljs-comment">// exponential fog density</span>
<span class="hljs-keyword">var</span> position      = <span class="hljs-number">0</span>;                       <span class="hljs-comment">// current camera Z position (add playerZ to get player's absolute Z position)</span>
<span class="hljs-keyword">var</span> speed         = <span class="hljs-number">0</span>;                       <span class="hljs-comment">// current speed</span>
<span class="hljs-keyword">var</span> maxSpeed      = segmentLength/step;      <span class="hljs-comment">// top speed (ensure we can't move more than 1 segment in a single frame to make collision detection easier)</span>
<span class="hljs-keyword">var</span> accel         =  maxSpeed/<span class="hljs-number">5</span>;             <span class="hljs-comment">// acceleration rate - tuned until it 'felt' right</span>
<span class="hljs-keyword">var</span> breaking      = -maxSpeed;               <span class="hljs-comment">// deceleration rate when braking</span>
<span class="hljs-keyword">var</span> decel         = -maxSpeed/<span class="hljs-number">5</span>;             <span class="hljs-comment">// 'natural' deceleration rate when neither accelerating, nor braking</span>
<span class="hljs-keyword">var</span> offRoadDecel  = -maxSpeed/<span class="hljs-number">2</span>;             <span class="hljs-comment">// off road deceleration is somewhere in between</span>
<span class="hljs-keyword">var</span> offRoadLimit  =  maxSpeed/<span class="hljs-number">4</span>;             <span class="hljs-comment">// limit when off road deceleration no longer applies (e.g. you can always go at least this speed even when off road)</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชุฎุตูุต ุจุนุถูุง ุจุงุณุชุฎุฏุงู ุนูุงุตุฑ ุชุญูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุชุบููุฑ ุงูููู ุงูุญุฑุฌุฉ ุฃุซูุงุก ุชูููุฐ ุงูุจุฑูุงูุฌ ุญุชู ุชุชููู ูู ุฑุคูุฉ ููููุฉ ุชุฃุซูุฑูุง ุนูู ุนุฑุถ ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุขุฎุฑูู ูู ููู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุฎุตุตุฉ ูู ุงูุทุฑููุฉ </font></font><code>reset()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏูุฑ ููุฑุงุฑู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชูููุฐ ุนูููุงุช ุงูุฑุจุท ุงูุฑุฆูุณูุฉ </font></font><code>Game.run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุชููุฑ ุฅุฏุฎุงููุง ุจุณูุทูุง ูููุญุฉ ุงูููุงุชูุญ ูููู ุจุชุนููู ุฃู ุฅุนุงุฏุฉ ุชุนููู ุงููุชุบูุฑุงุช ุงูุชู ุชุดูุฑ ุฅูู ุงูุฅุฌุฑุงุกุงุช ุงูุญุงููุฉ ููุงุนุจ:</font></font><br>
<br>
<pre><code class="javascript hljs">Game.run({<font></font>
  ...<font></font>
  keys: [<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.LEFT,  KEY.A], <span class="hljs-attr">mode</span>: <span class="hljs-string">'down'</span>, <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keyLeft   = <span class="hljs-literal">true</span>;  } },<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.RIGHT, KEY.D], <span class="hljs-attr">mode</span>: <span class="hljs-string">'down'</span>, <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keyRight  = <span class="hljs-literal">true</span>;  } },<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.UP,    KEY.W], <span class="hljs-attr">mode</span>: <span class="hljs-string">'down'</span>, <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keyFaster = <span class="hljs-literal">true</span>;  } },<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.DOWN,  KEY.S], <span class="hljs-attr">mode</span>: <span class="hljs-string">'down'</span>, <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keySlower = <span class="hljs-literal">true</span>;  } },<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.LEFT,  KEY.A], <span class="hljs-attr">mode</span>: <span class="hljs-string">'up'</span>,   <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keyLeft   = <span class="hljs-literal">false</span>; } },<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.RIGHT, KEY.D], <span class="hljs-attr">mode</span>: <span class="hljs-string">'up'</span>,   <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keyRight  = <span class="hljs-literal">false</span>; } },<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.UP,    KEY.W], <span class="hljs-attr">mode</span>: <span class="hljs-string">'up'</span>,   <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keyFaster = <span class="hljs-literal">false</span>; } },<font></font>
    { <span class="hljs-attr">keys</span>: [KEY.DOWN,  KEY.S], <span class="hljs-attr">mode</span>: <span class="hljs-string">'up'</span>,   <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ keySlower = <span class="hljs-literal">false</span>; } }<font></font>
  ],<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงูุชุญูู ูู ุญุงูุฉ ุงููุงุนุจ ูู ุฎูุงู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุฑุนุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><strong><font style="vertical-align: inherit;">ุงูุณุฑุนุฉ</font></strong><font style="vertical-align: inherit;"> ุงูุญุงููุฉ.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุถุน</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><strong><font style="vertical-align: inherit;">ุงูููุถุน</font></strong><font style="vertical-align: inherit;"> Z ุงูุญุงูู ุนูู ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ูุงุญุธ ุฃู ูุฐุง ูู ูุถุน ุงููุงููุฑุง ุ ูููุณ ููุฑุงุฑู.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">playerX</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุถุน ุงููุงุนุจ ุงูุญุงูู ุนูู X ุนูู ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ุชุทุจูุน ูู ุงููุทุงู ูู -1 ุฅูู +1 ุ ุญุชู ูุง ุชุนุชูุฏ ุนูู ุงููููุฉ ุงููุนููุฉ </font></font><code>roadWidth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุนููู ูุฐู ุงููุชุบูุฑุงุช ุฏุงุฎู ุงูุทุฑููุฉ </font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุชููุฐ ุงูุฅุฌุฑุงุกุงุช ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญุฏูุซุงุช </font></font><code>position</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงุก ุนูู ุงูุชูุงุฑ </font></font><code>speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญุฏูุซุงุช </font></font><code>playerX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุถุบุท ุนูู ุงูููุชุงุญ ุงูุฃูุณุฑ ุฃู ุงูุฃููู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒูุฏ </font></font><code>speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุงูุถุบุท ุนูู ุงูููุชุงุญ ูุฃุนูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฎูุถ </font></font><code>speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุงูุถุบุท ุนูู ููุชุงุญ ูุฃุณูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู </font></font><code>speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ูุชู ุงูุถุบุท ุนูู ุงูููุชุงุญูู ูุฃุนูู ููุฃุณูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู </font></font><code>speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู </font></font><code>playerX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุนูู ุญุงูุฉ ุงูุทุฑูู ูุนูู ุงูุนุดุจ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุฉ ุงูุทุฑู ุงููุจุงุดุฑุฉ ุ ุชููู ุงูุทุฑููุฉ </font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุถุญุฉ ูุจุณูุทุฉ ุชูุงููุง:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params">dt</span>) </span>{<font></font>
<font></font>
  position = Util.increase(position, dt * speed, trackLength);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> dx = dt * <span class="hljs-number">2</span> * (speed/maxSpeed); <span class="hljs-comment">// at top speed, should be able to cross from left to right (-1 to 1) in 1 second</span><font></font>
<font></font>
  <span class="hljs-keyword">if</span> (keyLeft)<font></font>
    playerX = playerX - dx;<font></font>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (keyRight)<font></font>
    playerX = playerX + dx;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (keyFaster)<font></font>
    speed = Util.accelerate(speed, accel, dt);<font></font>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (keySlower)<font></font>
    speed = Util.accelerate(speed, breaking, dt);<font></font>
  <span class="hljs-keyword">else</span><font></font>
    speed = Util.accelerate(speed, decel, dt);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (((playerX &lt; <span class="hljs-number">-1</span>) || (playerX &gt; <span class="hljs-number">1</span>)) &amp;&amp; (speed &gt; offRoadLimit))<font></font>
    speed = Util.accelerate(speed, offRoadDecel, dt);<font></font>
<font></font>
  playerX = Util.limit(playerX, <span class="hljs-number">-2</span>, <span class="hljs-number">2</span>);     <span class="hljs-comment">// dont ever let player go too far out of bounds</span>
  speed   = Util.limit(speed, <span class="hljs-number">0</span>, maxSpeed); <span class="hljs-comment">// or exceed maxSpeed</span><font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชููู ุ ุณูุตุจุญ ุงูุฃูุฑ ุฃูุซุฑ ุตุนูุจุฉ ุนูุฏูุง ูุถูู ุงูุนูุงุฑูุช ูุงูุชุนุฑู ุนูู ุงูุชุตุงุฏู ูู ุงููุณุฎุฉ ุงูููุงุฆูุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏุณุฉ ุงูุทุฑู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุฃู ูุชููู ูู ุชูุฏูู ุนุงูู ุงููุนุจุฉ ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุฌููุนุฉ ูู </font></font><code>segments</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ุงูุทุฑููุฉ </font></font><code>resetRoad()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุชู ุนุฑุถ ูู ุฌุฒุก ูู ูุฐู ุงูุฃุฌุฒุงุก ูู ุงูุทุฑูู ูู ุงูููุงูุฉ ูู ุฅุญุฏุงุซูุงุช ุงูุนุงูู ุจุญูุซ ูุชุญูู ุฅูู ูุถูุน ุซูุงุฆู ุงูุฃุจุนุงุฏ ูู ุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ. </font><font style="vertical-align: inherit;">ููู ููุทุน ุ ูููู ุจุชุฎุฒูู ููุทุชูู ุ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฑูุฒ ุงูุญุงูุฉ ุงูุฃูุฑุจ ุฅูู ุงููุงููุฑุง ุ ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฑูุฒ ุงูุญุงูุฉ ุงูุฃุจุนุฏ ุนู ุงููุงููุฑุง.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/53a/fa4/076/53afa40768a00b49833703b1457a6941.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุนูู ุงูุฏููู ูููููุฉ ุ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p2 ูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุฌุฒุก ูุทุงุจู ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p1 ูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุทุน ุงูุณุงุจู ุ ูููู ูุจุฏู ูู ุฃูู ูู ุงูุฃุณูู ุชุฎุฒูููุง ูููุงุท ูููุตูุฉ ูุชุญููู ูู ุฌุฒุก ุนูู ุญุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ูููุตู ุนู </font></font><code>rumbleLength</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุถูุง ูุฃูู ูููููุง ุงูุญุตูู ุนูู ููุญููุงุช ูุชูุงู ุชูุตูููุฉ ุฌูููุฉ ุ ูููู ูู ููุณ ุงูููุช ุฎุทูุท ุฃูููุฉ. ุฅุฐุง ูุงู ููู ููุทุน ูุงุญู ููู ูุฎุชูู ุ ูุณูุคุฏู ุฐูู ุฅูู ุฅูุดุงุก ุชุฃุซูุฑ ุณุชุฑูุจ ุณูุก. ูุฐูู ุ ูุฑูุฏ ุฃู ูููู ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุฃุฌุฒุงุก ุงูุตุบูุฑุฉ ุ ูููู ูุฌูุนูุง ูุนูุง ูุชุดููู ุฎุทูุท ุฃูููุฉ ูููุตูุฉ.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetRoad</span>(<span class="hljs-params"></span>) </span>{<font></font>
  segments = [];<font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span> ; n &lt; <span class="hljs-number">500</span> ; n++) { <span class="hljs-comment">// arbitrary road length</span><font></font>
    segments.push({<font></font>
       <span class="hljs-attr">index</span>: n,
       <span class="hljs-attr">p1</span>: { <span class="hljs-attr">world</span>: { <span class="hljs-attr">z</span>:  n   *segmentLength }, <span class="hljs-attr">camera</span>: {}, <span class="hljs-attr">screen</span>: {} },
       <span class="hljs-attr">p2</span>: { <span class="hljs-attr">world</span>: { <span class="hljs-attr">z</span>: (n+<span class="hljs-number">1</span>)*segmentLength }, <span class="hljs-attr">camera</span>: {}, <span class="hljs-attr">screen</span>: {} },
       <span class="hljs-attr">color</span>: <span class="hljs-built_in">Math</span>.floor(n/rumbleLength)%<span class="hljs-number">2</span> ? COLORS.DARK : COLORS.LIGHT<font></font>
    });<font></font>
  }<font></font>
<font></font>
  trackLength = segments.length * segmentLength;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชููุฆุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุท ุจุฅุญุฏุงุซูุงุช ุงูุนุงูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฃููุง ูุง ูุญุชุงุฌ ุณูู ุงูุทุฑู ุงููุณุชูููุฉ. ุงูุฅุญุฏุงุซูุงุช </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุต</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณุชููู ุฏุงุฆููุง 0 ุ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุนุชูุฏ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุญุฏุงุซูุงุช </font><strong><font style="vertical-align: inherit;">ุณ</font></strong><font style="vertical-align: inherit;"> ุฏุงุฆููุง ุนูู ุงููููุฉ ุงููุชุฏุฑุฌุฉ </font></font><code>+/- roadWidth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุงุญููุง ุ ุนูุฏูุง ูุถูู ููุญููุงุช ูุชูุงู ุ ุณูุชุบูุฑ ูุฐุง ุงูุฌุฒุก. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ุฃูุถูุง ุจุชุนููู ูุงุฆูุงุช ูุงุฑุบุฉ ูุชุฎุฒูู ุชูุซููุงุช ูุฐู ุงูููุงุท ูู ุงููุงููุฑุง ูุนูู ุงูุดุงุดุฉ ุญุชู ูุง ูุชู ุฅูุดุงุก ูุฌููุนุฉ ูู ุงููุงุฆูุงุช ุงููุคูุชุฉ ูู ูู ูููุง </font></font><code>render</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุชูููู ุฌูุน ุงูููุงูุฉ ุ ูุฌุจ ุนูููุง ุชุฌูุจ ุชุฎุตูุต ุงููุงุฆูุงุช ุฏุงุฎู ุญููุฉ ุงููุนุจุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ุชุตู ุงูุณูุงุฑุฉ ุฅูู ููุงูุฉ ุงูุทุฑูู ุ ูุนูุฏ ุจุจุณุงุทุฉ ุฅูู ุจุฏุงูุฉ ุงูุฏูุฑุฉ. </font><font style="vertical-align: inherit;">ูุชุจุณูุท ุฐูู ุ ุณููุดุฆ ุทุฑููุฉ ููุนุซูุฑ ุนูู ุฌุฒุก ูุฃู ูููุฉ ูู Z ุ ุญุชู ุฅุฐุง ุชุฌุงูุฒุช ุทูู ุงูุทุฑูู:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findSegment</span>(<span class="hljs-params">z</span>) </span>{
  <span class="hljs-keyword">return</span> segments[<span class="hljs-built_in">Math</span>.floor(z/segmentLength) % segments.length];<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏูู ุงูุฎูููุฉ</font></font></h2><br><font style="vertical-align: inherit;"></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุฏุฃ </font><font style="vertical-align: inherit;">
ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุจุฌุนู ุตูุฑุฉ ุงูุฎูููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุฃุฌุฒุงุก ุงูุชุงููุฉ ุ ุญูุซ ุณูุถูู ููุญููุงุช ูุชูุงู ุ ุณูุญุชุงุฌ ุฅูู ุงูุฎูููุฉ ูุฃุฏุงุก ุชูุฑูุฑ ุงูููุธุฑ ุ ูุฐูู ุณูุจุฏุฃ ุงูุขู ูู ุงูุชุญุฑู ูู ูุฐุง ุงูุงุชุฌุงู ุ ููุง ูุฌุนู ุงูุฎูููุฉ ุซูุงุซ ุทุจูุงุช ูููุตูุฉ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{<font></font>
<font></font>
  ctx.clearRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height);<font></font>
<font></font>
  Render.background(ctx, background, width, height, BACKGROUND.SKY);<font></font>
  Render.background(ctx, background, width, height, BACKGROUND.HILLS);<font></font>
  Render.background(ctx, background, width, height, BACKGROUND.TREES);<font></font>
<font></font>
  ...</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏูู ุงูุทุฑูู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ุชุชูุฑุฑ ูุธููุฉ ุงูุชุฌุณูุฏ ูู ุฎูุงู ุฌููุน ุงูุฃุฌุฒุงุก ูุงููุดุงุฑูุน </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ููุทุน ูู ุฅุญุฏุงุซูุงุช ุงูุนุงูู ุฅูู ุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ ุ ูุชูููู ุงูููุทุน ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูุนุฑุถู ุจุทุฑููุฉ ุฃุฎุฑู:</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-keyword">var</span> baseSegment = findSegment(position);
  <span class="hljs-keyword">var</span> maxy        = height;
  <span class="hljs-keyword">var</span> n, segment;
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; drawDistance ; n++) {<font></font>
<font></font>
    segment = segments[(baseSegment.index + n) % segments.length];<font></font>
<font></font>
    Util.project(segment.p1, (playerX * roadWidth), cameraHeight, position, cameraDepth, width, height, roadWidth);<font></font>
    Util.project(segment.p2, (playerX * roadWidth), cameraHeight, position, cameraDepth, width, height, roadWidth);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> ((segment.p1.camera.z &lt;= cameraDepth) || <span class="hljs-comment">// behind us</span>
        (segment.p2.screen.y &gt;= maxy))          <span class="hljs-comment">// clip by (already rendered) segment</span>
      <span class="hljs-keyword">continue</span>;<font></font>
<font></font>
    Render.segment(ctx, width, lanes,<font></font>
                   segment.p1.screen.x,<font></font>
                   segment.p1.screen.y,<font></font>
                   segment.p1.screen.w,<font></font>
                   segment.p2.screen.x,<font></font>
                   segment.p2.screen.y,<font></font>
                   segment.p2.screen.w,<font></font>
                   segment.color);<font></font>
<font></font>
    maxy = segment.p2.screen.y;<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนูุงู ุ ุฑุฃููุง ุจุงููุนู ุงูุญุณุงุจุงุช ุงููุงุฒูุฉ ูุฅุณูุงุท ููุทุฉ ุ ุชุฌูุน ูุณุฎุฉ ุฌุงูุง ุณูุฑูุจุช ุจูู ุงูุชุญููู ูุงูุฅุณูุงุท ูุงูููุงุณ ูู ุทุฑููุฉ ูุงุญุฏุฉ:</font></font><br>
<br>
<pre><code class="javascript hljs">project: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p, cameraX, cameraY, cameraZ, cameraDepth, width, height, roadWidth</span>) </span>{<font></font>
  p.camera.x     = (p.world.x || <span class="hljs-number">0</span>) - cameraX;<font></font>
  p.camera.y     = (p.world.y || <span class="hljs-number">0</span>) - cameraY;<font></font>
  p.camera.z     = (p.world.z || <span class="hljs-number">0</span>) - cameraZ;<font></font>
  p.screen.scale = cameraDepth/p.camera.z;<font></font>
  p.screen.x     = <span class="hljs-built_in">Math</span>.round((width/<span class="hljs-number">2</span>)  + (p.screen.scale * p.camera.x  * width/<span class="hljs-number">2</span>));<font></font>
  p.screen.y     = <span class="hljs-built_in">Math</span>.round((height/<span class="hljs-number">2</span>) - (p.screen.scale * p.camera.y  * height/<span class="hljs-number">2</span>));<font></font>
  p.screen.w     = <span class="hljs-built_in">Math</span>.round(             (p.screen.scale * roadWidth   * width/<span class="hljs-number">2</span>));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุญุณุงุจ ุงูุดุงุดุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุงุดุฑ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ููุทุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P2ุ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุญู ูุณุชุฎุฏู ููุณ ุงูุญุณุงุจุงุช ุงูุฅุณูุงุท ูุญุณุงุจ ุงูุนุฑุถ ุงููุชููุน ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูู ูุฐุง ุงูุฌุฒุก. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฎูุงู ุฅุญุฏุงุซูุงุช ุงูุดุงุดุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุทุชูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุนุฑุถ ุงููุชููุน ููุทุฑูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููููุง ุจุณูููุฉ ุญุณุงุจ ุจูุณุงุนุฏุฉ ูุธููุฉ ูุณุงุนุฏุฉ </font></font><code>Render.segment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌููุน ุงููุถูุนุงุช ุงููุงุฒูุฉ ูุนุฑุถ ุงูุนุดุจ ูุงูุทุฑูู ูุงูุฎุทูุท ุงูุฃูููุฉ ูุฎุทูุท ุงูุชูุณูู ุ ุจุงุณุชุฎุฏุงู ุงููุธููุฉ ุงูุฅุถุงููุฉ ุงูุนุงูุฉ </font></font><code>Render.polygon</code> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุงูุธุฑ . </font></font><code>common.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏูู ุณูุงุฑุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ุขุฎุฑ ุดูุก ุชุญุชุงุฌู ุงูุทุฑููุฉ </font></font><code>render</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุนุฑุถ ููุฑุงุฑู:</font></font><br>
<br>
<pre><code class="javascript hljs">  Render.player(ctx, width, height, resolution, roadWidth, sprites, speed/maxSpeed,<font></font>
                cameraDepth/playerZ,<font></font>
                width/<span class="hljs-number">2</span>,<font></font>
                height);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณูู ูุฐู ุงูุทุฑููุฉ </font></font><code>player</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููุณ </font></font><code>car</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฃูู ูู ุงููุณุฎุฉ ุงูููุงุฆูุฉ ูู ุงููุนุจุฉ ุณูููู ููุงู ุณูุงุฑุงุช ุฃุฎุฑู ุนูู ุงูุทุฑูู ุ ููุฑูุฏ ูุตู ููุฑุงุฑู ุงููุงุนุจ ุนู ุงูุณูุงุฑุงุช ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุชุณุชุฎุฏู </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธููุฉ ุงููุณุงุนุฏ </font></font><code>Render.player</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ููุงุดูุฉ ุชุณูู </font></font><code>drawImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูุนูุฑูุช ุ ุจุนุฏ ุฃู ูุงูุช ุจููุงุณูุง ูุณุจููุง ุจุงุณุชุฎุฏุงู ููุณ ูููุงุณ ุงูุฅุณูุงุท ุงูุฐู ุชู ุงุณุชุฎุฏุงูู ูู ูุจู:</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถ</font></font></strong></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญูุซ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐู ุงูุญุงูุฉ ูู ุงููุณุงูุฉ ุงููุณุจูุฉ ูู ุงูุขูุฉ ุฅูู ุงููุงููุฑุง ุ ุงููุฎุฒูุฉ ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">playerZ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุชุบูุฑ </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฅู ุงููุธููุฉ "ุชูุฒ" ุงูุณูุงุฑุฉ ููููุงู ุจุณุฑุนุงุช ุนุงููุฉ ุ ููุง ูุถูู ุงููููู ูู ุงูุนุดูุงุฆูุฉ ุฅูู ูุนุงุฏูุฉ ุงูุชุญุฌูู ุ ุงุนุชูุงุฏูุง ุนูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุฑุนุฉ / maxSpeed</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฐุง ูุง ุญุตููุง ุนููู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/845/dfd/3e8/845dfd3e88ef0a22b2c9fd021140ff3b.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ูููุง ุจูุฏุฑ ูุจูุฑ ูู ุงูุนูู ููุท ูุฅูุดุงุก ูุธุงู ุจุทุฑู ูุณุชูููุฉ. </font><font style="vertical-align: inherit;">ุฃุถููุง</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">ุฏูู</font></strong><font style="vertical-align: inherit;"> ูุญุฏุฉ ูุณุงุนุฏ ุนุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูู</font></font></strong></li>
<li><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู</font></strong><font style="vertical-align: inherit;"> ูุญุฏุฉ ุงูุฑูุงุถูุงุช ุงูุนุงูุฉ</font></font><strong><font style="vertical-align: inherit;"></font></strong></li>
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุฏุฉ ูุณุงุนุฏ ููุงุด ุนุงูุฉ </font><font style="vertical-align: inherit;">...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... ุจูุง ูู ุฐูู </font></font><code>Render.segment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>Render.polygon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู</font></font><code>Render.sprite</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูุฑุฉ ูุนุจุฉ ุซุงุจุชุฉ ุงูููุนุจ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฒูู ุงูุตูุฑุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌ ููุญุฉ ุงูููุงุชูุญ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุธุฑ ุงูุฎูููุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุฉ ุงูุนูุฑูุช ูุน ุงูุณูุงุฑุงุช ูุงูุฃุดุฌุงุฑ ูุงูููุญุงุช ุงูุฅุนูุงููุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฏุณุฉ ุงูุจุฏุงุฆูุฉ ููุทุฑูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญูู ูู ุงูุฌูุงุฒ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฏูู ุงูุฎูููุฉ ูุงูุทุฑูู ูุณูุงุฑุฉ ุงููุงุนุจ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงูุฉ HTML5 </font></font><code>&lt;audio&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ููุณููู ุงูุณุจุงู (ููุงูุฃุฉ ูุฎููุฉ!)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ูุงูุชู ุฃุนุทุชูุง ุฃุณุงุณูุง ุฌูุฏูุง ููุฒูุฏ ูู ุงูุชุทููุฑ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 2. ุงูููุญููุงุช.</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98f/c3d/6d1/98fc3d6d13cc16f12847d253e112fcb2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ุงูุฌุฒุก ุ ุณูุดุฑุญ ุจูุฒูุฏ ูู ุงูุชูุตูู ููู ุชุนูู ุงูููุญููุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฌุฒุก ุงูุณุงุจู ุ ูููุง ุจุชุฌููุน ููุฏุณุฉ ุงูุทุฑูู ุนูู ุดูู ูุฌููุนุฉ ูู ุงูุฃุฌุฒุงุก ุ ูู ูููุง ูุญุชูู ุนูู ุฅุญุฏุงุซูุงุช ุนุงูููุฉ ูุชู ุชุญููููุง ุจุงููุณุจุฉ ูููุงููุฑุง ุซู ูุชู ุนุฑุถูุง ุนูู ุงูุดุงุดุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชุงุฌ ููุท ุฅูู ุชูุณูู ุงูุนุงูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ููุทุฉ ุ ูุฃูู ุนูู ุงูุทุฑู ุงููุณุชูููุฉ ุ ูุงู ูู ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุงูู ุตูุฑ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c78/551/359/c78551359ef7c11e4af48b4285d61842.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุฃุฑุฏูุง ุฅูุดุงุก ูุธุงู ุซูุงุซู ุงูุฃุจุนุงุฏ ูุนูู ุจูุงูู ุทุงูุชู ุ ููููููุง ุชูููุฐ ุงูููุญููุงุช ุจุญุณุงุจ </font><font style="vertical-align: inherit;">ุฎุทูุท </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุถูุนุงุช ุงูููุถุญุฉ ุฃุนูุงู. ููุน ุฐูู ุ ุณูููู ูุฐุง ุงูููุน ูู ุงูููุฏุณุฉ ุตุนุจูุง ุฅูู ุญุฏ ูุง ุ ูููุฐุง ุณูููู ูู ุงูุถุฑูุฑู ุฅุถุงูุฉ ูุฑุญูุฉ ุงูุชุฏููุฑ ุซูุงุซู ุงูุฃุจุนุงุฏ ุฅูู ูุนุงุฏูุงุช ุงูุฅุณูุงุท ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ุฅุฐุง ุฐูุจูุง ุจูุฐู ุงูุทุฑููุฉ ุ ูุณูููู ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู WebGL ุฃู ูุธุงุฆุฑูุง ุ ูููู ูุฐุง ุงููุดุฑูุน ููุณ ูุฏูู ููุงู ุฃุฎุฑู ููุดุฑูุนูุง. ูุฑูุฏ ููุท ุงุณุชุฎุฏุงู ุญูู ุฒุงุฆูุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ุงููุฏุฑุณุฉ ุงููุฏููุฉ ููุญุงูุงุฉ ุงูููุญููุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ุฑุจูุง ุณุชูุงุฌุฃ ุนูุฏูุง ุชุนูู ุฃููุง ูู ูุญุณุจ ุงูุฅุญุฏุงุซูุงุช </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุฌุฒุงุก </font><font style="vertical-align: inherit;">ุงูุทุฑูู ุนูู ุงูุฅุทูุงู ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูุงู ูู ุฐูู ุ ุณูุณุชุฎุฏู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูุญุฉ ูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูููุญ ุงูุทุฑูู ุ ูุง ุนููู ุณูู ุชุบููุฑ ููุถุน ุฎุท ุงูููุชุตู ูุดูู ุงูููุญูู ... ุจุฏุกูุง ูู ุงูุฌุฒุก ุงูุณููู ูู ุงูุดุงุดุฉ ุ ูุฒุฏุงุฏ ููุฏุงุฑ ุชุบูุฑ ูุฑูุฒ ุงูุทุฑูู ุฅูู ุงููุณุงุฑ ุฃู ุงููููู ุชุฏุฑูุฌููุง</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><em><font style="vertical-align: inherit;">"</font></em></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุชูุง ุ ุงูุฎุท ุงููุฑูุฒู ูู ุงููููุฉ ุงูุชู ูุชู </font></font><code>cameraX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฑูุฑูุง ุฅูู ุญุณุงุจุงุช ุงูุฅุณูุงุท. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุนูุฏูุง ูุคุฏู </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฌุฒุก ูู ุงูุทุฑูู ุ ููููู ูุญุงูุงุฉ ุงูููุญููุงุช ุนู ุทุฑูู ุชุบููุฑ ุงููููุฉ </font></font><code>cameraX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนู ุทุฑูู ุฒูุงุฏุฉ ุงููููุฉ ุชุฏุฑูุฌููุง.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8a/569/19e/c8a56919e67d6f19cc737074ce92fffb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุนุฑูุฉ ููุฏุงุฑ ุงูุชุบููุฑ ุ ูุญุชุงุฌ ุฅูู ุชุฎุฒูู ูููุฉ ูู ูู ุฌุฒุก </font></font><code>curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุดูุฑ ูุฐู ุงููููุฉ ุฅูู ููุฏุงุฑ ูุง ูุฌุจ ุฅุฒุงุญุฉ ุงูููุทุน ูู ุงูุฎุท ุงููุฑูุฒู ูููุงููุฑุง. </font><font style="vertical-align: inherit;">ูู ุณุชููู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุจู ูููุญููุงุช ุงูุงุณุชุฏุงุฑุฉ ูููุณุงุฑ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุฌุงุจู ููููุญููุงุช ุงูุชู ุชุชุญูู ุฅูู ุงููููู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ูููุญููุงุช ูุงุนูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฒูุฏ ููููุญููุงุช ุงูุญุงุฏุฉ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงุฎุชูุงุฑ ุงูููู ููุณูุง ุจุดูู ุชุนุณูู ุชูุงููุง ุ </font><font style="vertical-align: inherit;">ูู ุฎูุงู ุงูุชุฌุฑุจุฉ ูุงูุฎุทุฃ ุ ูููููุง ุฃู ูุฌุฏ ููููุง ุฌูุฏุฉ ุชุจุฏู ุนูุฏูุง ุงูููุญููุงุช "ุตุญูุญุฉ":</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> ROAD = {
  <span class="hljs-attr">LENGTH</span>: { <span class="hljs-attr">NONE</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">SHORT</span>:  <span class="hljs-number">25</span>, <span class="hljs-attr">MEDIUM</span>:  <span class="hljs-number">50</span>, <span class="hljs-attr">LONG</span>:  <span class="hljs-number">100</span> }, <span class="hljs-comment">// num segments</span>
  <span class="hljs-attr">CURVE</span>:  { <span class="hljs-attr">NONE</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">EASY</span>:    <span class="hljs-number">2</span>, <span class="hljs-attr">MEDIUM</span>:   <span class="hljs-number">4</span>, <span class="hljs-attr">HARD</span>:    <span class="hljs-number">6</span> }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุงุฎุชูุงุฑ ุงูููู ุงูุฌูุฏุฉ ููููุญููุงุช ุ ูุญุชุงุฌ ุฅูู ุชุฌูุจ ุฃู ุซุบุฑุงุช ูู ุงูุชุญููุงุช ุนูุฏูุง ูุชุญูู ุงูุฎุท ุฅูู ููุญูู (ุฃู ุงูุนูุณ). </font><font style="vertical-align: inherit;">ูููู ุชุญููู ุฐูู ุนู ุทุฑูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุงูุฏุฎูู ูุงูุฎุฑูุฌ ูู ุงูููุญููุงุช. </font><font style="vertical-align: inherit;">ุณูููู ุจุฐูู ุนู ุทุฑูู ุฒูุงุฏุฉ (ุฃู ุชูููู) ูููุฉ </font></font><code>curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฌุฒุก </font><font style="vertical-align: inherit;">ุชุฏุฑูุฌููุง </font><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุธุงุฆู ุงูุชูุนูู ุงูุชูููุฏูุฉ ุญุชู ุชุตู ุฅูู ุงููููุฉ ุงููุทููุจุฉ:</font></font><br>
<br>
<pre><code class="javascript hljs">easeIn:    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b,percent</span>) </span>{ <span class="hljs-keyword">return</span> a + (b-a)*<span class="hljs-built_in">Math</span>.pow(percent,<span class="hljs-number">2</span>);                           },
<span class="hljs-attr">easeOut</span>:   <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b,percent</span>) </span>{ <span class="hljs-keyword">return</span> a + (b-a)*(<span class="hljs-number">1</span>-<span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">1</span>-percent,<span class="hljs-number">2</span>));                     },
<span class="hljs-attr">easeInOut</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a,b,percent</span>) </span>{ <span class="hljs-keyword">return</span> a + (b-a)*((-<span class="hljs-built_in">Math</span>.cos(percent*<span class="hljs-built_in">Math</span>.PI)/<span class="hljs-number">2</span>) + <span class="hljs-number">0.5</span>);        },</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ุ ุงูุขู ุ ูุน ูุฑุงุนุงุฉ ูุธููุฉ ุฅุถุงูุฉ ุฌุฒุก ูุงุญุฏ ุฅูู ุงูููุฏุณุฉ ...</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSegment</span>(<span class="hljs-params">curve</span>) </span>{
  <span class="hljs-keyword">var</span> n = segments.length;<font></font>
  segments.push({<font></font>
     <span class="hljs-attr">index</span>: n,
        <span class="hljs-attr">p1</span>: { <span class="hljs-attr">world</span>: { <span class="hljs-attr">z</span>:  n   *segmentLength }, <span class="hljs-attr">camera</span>: {}, <span class="hljs-attr">screen</span>: {} },
        <span class="hljs-attr">p2</span>: { <span class="hljs-attr">world</span>: { <span class="hljs-attr">z</span>: (n+<span class="hljs-number">1</span>)*segmentLength }, <span class="hljs-attr">camera</span>: {}, <span class="hljs-attr">screen</span>: {} },
     <span class="hljs-attr">curve</span>: curve,
     <span class="hljs-attr">color</span>: <span class="hljs-built_in">Math</span>.floor(n/rumbleLength)%<span class="hljs-number">2</span> ? COLORS.DARK : COLORS.LIGHT<font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ุฅูุดุงุก ุทุฑููุฉ ููุฏุฎูู ุงูุณูุณ ูุงูุนุซูุฑ ูุงูุฎุฑูุฌ ุงูุณูุณ ูู ุทุฑูู ููุญูู:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRoad</span>(<span class="hljs-params">enter, hold, leave, curve</span>) </span>{
  <span class="hljs-keyword">var</span> n;
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; enter ; n++)<font></font>
    addSegment(Util.easeIn(<span class="hljs-number">0</span>, curve, n/enter));
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; hold  ; n++)<font></font>
    addSegment(curve);<font></font>
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; leave ; n++)<font></font>
    addSegment(Util.easeInOut(curve, <span class="hljs-number">0</span>, n/leave));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ููู ุงูุฃุนูู ุ ููููู ูุฑุถ ููุฏุณุฉ ุฅุถุงููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุญููุงุช ุนูู ุดูู ุญุฑู S:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSCurves</span>(<span class="hljs-params"></span>) </span>{<font></font>
  addRoad(ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM,  -ROAD.CURVE.EASY);<font></font>
  addRoad(ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM,   ROAD.CURVE.MEDIUM);<font></font>
  addRoad(ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM,   ROAD.CURVE.EASY);<font></font>
  addRoad(ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM,  -ROAD.CURVE.EASY);<font></font>
  addRoad(ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM, ROAD.LENGTH.MEDIUM,  -ROAD.CURVE.MEDIUM);<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุบููุฑุงุช ุนูู ุทุฑููุฉ ุงูุชุญุฏูุซ ()</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุบููุฑุงุช ุงููุญูุฏุฉ ุงูุชู ูุฌุจ ุฅุฌุฑุงุคูุง ุนูู ุงูุทุฑููุฉ </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุทุจูู ููุน ูู ููุฉ ุงูุทุฑุฏ ุงููุฑูุฒู ุนูุฏูุง ุชุชุญุฑู ุงูุขูุฉ ุนูู ุทูู ุงูููุญูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ุจุชุนููู ุนุงูู ุชุนุณูู ูููู ุชุนุฏููู ููููุง ูุชูุถููุงุชูุง.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> centrifugal = <span class="hljs-number">0.3</span>;   <span class="hljs-comment">// centrifugal force multiplier when going around curves</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุนุฏ ุฐูู ุณูููู ููุท ุจุชุญุฏูุซ ุงููููู </font></font><code>playerX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงุกู ุนูู ุณุฑุนุชู ุงูุญุงููุฉ ููููุฉ ุงูููุญูู ููุถุงุนู ููุฉ ุงูุทุฑุฏ ุงููุฑูุฒู:</font></font><br>
<br>
<pre><code class="javascript hljs">playerX = playerX - (dx * speedPercent * playerSegment.curve * centrifugal);</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏูู ุงูููุญูู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ุฃุนูุงู ุฃูู ููููู ุชูุฏูู ููุญููุงุช ูุญุงูุงุฉ ูู ุฎูุงู ุชุบููุฑ ุงููููุฉ </font></font><code>cameraX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชุฎุฏูุฉ ูู ุญุณุงุจุงุช ุงูุฅุณูุงุท ุฃุซูุงุก ุชูููุฐ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฌุฒุก ูู ุงูุทุฑูู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8a/569/19e/c8a56919e67d6f19cc737074ce92fffb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุงู ุจุฐูู ุ ุณูููู ุจุชุฎุฒูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุบูุฑ ูุญุฑู ุงูุฃูุฑุงุต </font><font style="vertical-align: inherit;">ุ ูุฒูุงุฏุฉ ููู ููุทุน ุจูููุฉ </font></font><code>curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุฐูู ุงููุชุบูุฑ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ุณูุชู ุงุณุชุฎุฏุงูู ูุฅุฒุงุญุฉ ูููููุฉ </font></font><code>cameraX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชุฎุฏูุฉ ูู ุญุณุงุจุงุช ุงูุฅุณูุงุท. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูููุฐ ุงูููุญููุงุช ุ ูุญุชุงุฌ ุฅูู ูุง ููู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุณูุงุท </font><strong><font style="vertical-align: inherit;">p1</font></strong><font style="vertical-align: inherit;"> ููู ูุทุนุฉ ุจููุฏุงุฑ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong></li>
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุณูุงุท </font><strong><font style="vertical-align: inherit;">p2</font></strong><font style="vertical-align: inherit;"> ููู ูุทุนุฉ ุจููุฏุงุฑ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dx</font></font></strong></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒูุงุฏุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x </font></font></strong><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">ููููุทุน</font></strong><font style="vertical-align: inherit;"> ุงูุชุงูู ุจููุฏุงุฑ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dx</font></font></strong></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ูู ุฃุฌู ุชุฌูุจ ุงูุชุญููุงุช ุงูููุฒูุฉ ุนูุฏ ุนุจูุฑ ุญุฏูุฏ ุงูููุงุทุน ุ ูุฌุจ ุฃู ูุฌุนู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุฃูุง ุจุงููููุฉ ุงููุญุฑูุฉ ูููุญูู ุงูููุงุทุน ุงูุฃุณุงุณูุฉ ุงูุญุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุชุบููุฑ ุงูุทุฑููุฉ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ููู:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> baseSegment = findSegment(position);
<span class="hljs-keyword">var</span> basePercent = Util.percentRemaining(position, segmentLength);
<span class="hljs-keyword">var</span> dx = - (baseSegment.curve * basePercent);
<span class="hljs-keyword">var</span> x  = <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; drawDistance ; n++) {<font></font>
<font></font>
  ...<font></font>
<font></font>
  Util.project(segment.p1, (playerX * roadWidth) - x,      cameraHeight, position - (segment.looped ? trackLength : <span class="hljs-number">0</span>), cameraDepth, width, height, roadWidth);<font></font>
  Util.project(segment.p2, (playerX * roadWidth) - x - dx, cameraHeight, position - (segment.looped ? trackLength : <span class="hljs-number">0</span>), cameraDepth, width, height, roadWidth);<font></font>
<font></font>
  x  = x + dx;<font></font>
  dx = dx + segment.curve;<font></font>
<font></font>
  ...<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุธุฑ ุงูุฎูููุฉ ุงูุชูุฑูุฑ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ูุญุชุงุฌ ุฅูู ุชูุฑูุฑ ุทุจูุงุช ุฎูููุฉ ุงูููุธุฑ ุ ูุชุฎุฒูู ุงูุฅุฒุงุญุฉ ููู ุทุจูุฉ ...</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> skySpeed    = <span class="hljs-number">0.001</span>; <span class="hljs-comment">// background sky layer scroll speed when going around curve (or up hill)</span>
<span class="hljs-keyword">var</span> hillSpeed   = <span class="hljs-number">0.002</span>; <span class="hljs-comment">// background hill layer scroll speed when going around curve (or up hill)</span>
<span class="hljs-keyword">var</span> treeSpeed   = <span class="hljs-number">0.003</span>; <span class="hljs-comment">// background tree layer scroll speed when going around curve (or up hill)</span>
<span class="hljs-keyword">var</span> skyOffset   = <span class="hljs-number">0</span>;     <span class="hljs-comment">// current sky scroll offset</span>
<span class="hljs-keyword">var</span> hillOffset  = <span class="hljs-number">0</span>;     <span class="hljs-comment">// current hill scroll offset</span>
<span class="hljs-keyword">var</span> treeOffset  = <span class="hljs-number">0</span>;     <span class="hljs-comment">// current tree scroll offset</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ูุฒูุงุฏุชู ุฎูุงู ุงูููุช </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุนุชูุงุฏูุง ุนูู ูููุฉ ุงูููุญูู ููุทุงุน ุงููุดุบู ุงูุญุงูู ูุณุฑุนุชู ...</font></font><br>
<br>
<pre><code class="javascript hljs">skyOffset  = Util.increase(skyOffset,  skySpeed  * playerSegment.curve * speedPercent, <span class="hljs-number">1</span>);<font></font>
hillOffset = Util.increase(hillOffset, hillSpeed * playerSegment.curve * speedPercent, <span class="hljs-number">1</span>);<font></font>
treeOffset = Util.increase(treeOffset, treeSpeed * playerSegment.curve * speedPercent, <span class="hljs-number">1</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ุซู ุงุณุชุฎุฏู ูุฐุง ุงูุฅุฒุงุญุฉ ุนูุฏ ุนูู </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุจูุงุช ุงูุฎูููุฉ.</font></font><br>
<br>
<pre><code class="javascript hljs">Render.background(ctx, background, width, height, BACKGROUND.SKY,   skyOffset);<font></font>
Render.background(ctx, background, width, height, BACKGROUND.HILLS, hillOffset);<font></font>
Render.background(ctx, background, width, height, BACKGROUND.TREES, treeOffset);</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐู ุ ููุง ูุญุตู ุนูู ููุญููุงุช ุฒุงุฆูุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98f/c3d/6d1/98fc3d6d13cc16f12847d253e112fcb2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฌุฒุก ุงูุฑุฆูุณู ูู ุงูุฑูุฒ ุงูุฐู ุฃุถููุงู ูู ุจูุงุก ููุฏุณุฉ ุงูุทุฑูู ุจุงููููุฉ ุงูููุงุจูุฉ </font></font><code>curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุชุญููู ุฐูู ุ ุฅุถุงูุฉ ููุฉ ุงูุทุฑุฏ ุงููุฑูุฒู ุฎูุงู ุงูููุช </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูู ุจูุซูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชูุฏูู ุงูููุญูู ูู ุจุถุนุฉ ุฃุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูููู ูุฏ ูููู ูู ุงูุตุนุจ ููู (ููุตู) ูุง ูุญุฏุซ ุจุงูุถุจุท ููุง. ููุงู ุงูุนุฏูุฏ ูู ุงูุทุฑู ููุญุงูุงุฉ ุงูููุญููุงุช ููู ุงูุณูู ุฌุฏูุง ุงูุชุฌูู ุนูุฏ ุชูููุฐูุง ูู ุทุฑูู ูุณุฏูุฏ. ูู ุงูุฃุณูู ุฃู ุชูุฌุฑู ูู ูููุฉ ุฎุงุฑุฌูุฉ ูุชุญุงูู ุงูููุงู ุจูู ุดูุก "ุจุดูู ุตุญูุญ" ุ ูุจู ุฃู ุชุฏุฑู ุฐูู ุ ุณุชุจุฏุฃ ูู ุฅูุดุงุก ูุธุงู ุซูุงุซู ุงูุฃุจุนุงุฏ ูุนูู ุจูุงูู ุทุงูุชู ูุน ุงููุตูููุงุช ูุงูุชูุงูุจ ูุงูููุฏุณุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ุงูุญููููุฉ ... ูุงูุชู ุ ููุง ููุช ุ ููุณุช ูููุชูุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ูุชุจุช ูุฐุง ุงูููุงู ุ ููุช ุนูู ูููู ูู ุฃูู ูุงูุช ููุงู ุจุงูุชุฃููุฏ ูุดุงูู ูู ุชูููุฐ ุงูููุญููุงุช. </font><font style="vertical-align: inherit;">ูู ูุญุงููุฉ ูุชุตูุฑ ุงูุฎูุงุฑุฒููุฉ ุ ูู ุฃููู ููุงุฐุง ุฃุญุชุงุฌ ุฅูู ูููุชูู ููุญุฑูุงุช ุงูุฃูุฑุงุต </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฏูุงู ูู ูุงุญุฏุฉ ... ูุฅุฐุง ูู ุฃุชููู ูู ุดุฑุญ ุดูุก ูุง ุชูุงููุง ุ ููุฏ ุญุฏุซ ุฎุทุฃ ูุง ูู ููุงู ูุง </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ูููู ููุช ุนูู ุงููุดุฑูุน </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ููุฏ ุงูุชุดุบูู ููุงูุฉ ุงูุฃุณุจูุน</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุฑูุจูุง "ุ ูุจุตุฑุงุญุฉ ุ ุชุจุฏู ูู ุงูููุญููุงุช ุฌูููุฉ ุฌุฏูุง ุ ููู ุงูููุงูุฉ ุ ูุฐุง ูู ุงูุฃูู.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar499240/index.html">ูู ุฎูุงู ุงูุฃุดูุงู ุฅูู ุงููุฌูู ุ ุฃู ุชุญููู ุงูุจูุงูุงุช ูู ุดุคูู ุงูุณูุงุก</a></li>
<li><a href="../ar499242/index.html">ูุงู ุงูุจุงุญุซูู ุจููู ุงูุจูุงูุงุช ูู ุฌูุงุฒ ููุจููุชุฑ ุณุทุญ ุงูููุชุจ ูู ุฎูุงู ุงูุงูุชุฒุงุฒุงุช ุนุจุฑ ุทุงููุฉ</a></li>
<li><a href="../ar499244/index.html">ุงูููุธูุงุช ุงูุชุขุฒุฑูุฉ. ุงูุฌุฒุก ุงูุซุงูู</a></li>
<li><a href="../ar499246/index.html">ุงูุชุญููู ูู ุงููุธููุฉ ุงูููุฌุณุชูุฉ ููุงููู ูุชุทููุฑ ุงูุตูุงุนุฉ</a></li>
<li><a href="../ar499248/index.html">ููู ูุชุนุฑู ุนูู ูุนุฏุงุช ุงูุญูุงูุฉ ุงูุดุฎุตูุฉ</a></li>
<li><a href="../ar499254/index.html">ูุฌูุจ ุนุถู ูุฌูุฉ ุจุฑูุงูุฌ PyConRu 2020 ุนู ุฃุณุฆูุฉ ุญูู Python: ูุธุฑุฉ ุญุฏูุซุฉ ููููู ูู ุงูุจุงุฑุณููุชุงูุฌ</a></li>
<li><a href="../ar499262/index.html">hackathon ุงูููุงุฆู ุนุจุฑ ุงูุฅูุชุฑูุช ู SMZhack ุงูุนุงูููู ูุญุณุงุจูู ุงูุฎุงุต: ุงููุดุงุฑูุน ุงูุชู ุณุชุถุฑุจ ุงููุงุณ</a></li>
<li><a href="../ar499268/index.html">ุงููุนู ุงูููุงูู: ูุง ุงูุฐู ูููู ุฃู ุชูุนูู ูุธุงุฑุงุช Hololensุ</a></li>
<li><a href="../ar499272/index.html">ููููุงุช ุงููุญุงู 0201. ุนุตุจูุฉ ุ ูุฑุฌู ุงูุงุจุชุนุงุฏ ุนู ุงูุดุงุดุงุช</a></li>
<li><a href="../ar499274/index.html">ูููุง ุจุชูููู ุงููุจุณููุฉ ุงูุฌุฏูุฏุฉ. ูุญู ูุนุฑู ุนุฏุฏ ุงููููุฑููููุงุช ูููู ุชุนูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>