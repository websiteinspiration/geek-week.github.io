<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌃 🎼 🧖 Raucherkennungskomplex per Foto oder Video basierend auf Intel NUC 🧒🏼 👸🏿 🛌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Beitrag werden wir darüber sprechen, wie wir das Problem der Ermittlung der Tatsache des Rauchens durch Objektvideoanalyse auf Intel NUC gel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Raucherkennungskomplex per Foto oder Video basierend auf Intel NUC</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intel/blog/493726/"><img src="https://habrastorage.org/getpro/habr/post_images/0c8/395/be4/0c8395be4749da9c4a122bb0f0bbcc1f.jpg" alt="Intel NUC8i5BEK"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beitrag werden wir darüber sprechen, wie wir das Problem der Ermittlung der Tatsache des Rauchens durch Objektvideoanalyse auf Intel NUC gelöst haben. </font><font style="vertical-align: inherit;">Am Eingang werden Videostreams von Überwachungskameras, die decodiert werden, auf dem Computer in Frames geschnitten, und dann wird jeder Frame (unter Berücksichtigung des Frameratenteilers) einem neuronalen Netzwerk übergeben, das das Vorhandensein einer Tatsache des Rauchens erkennt und die Wahrscheinlichkeit eines Ereignisses zurückgibt.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns nun die Probleme, die Hauptunterschiede zu den auf dem Markt vorhandenen Lösungen sowie die erhaltenen Indikatoren für Geschwindigkeit und Anzahl der Threads genauer betrachten. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allgemeine Fragen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Russland sind am 1. Juni 2014 neue Normen des Anti-Tabak-Gesetzes in Kraft getreten. Das Tabakgesetz regelt die Beziehungen im Bereich des Schutzes der Gesundheit der Bürger vor den Auswirkungen des Tabakrauchs in der Umgebung und den Folgen des Tabakkonsums: Das Rauchen ist in Fernzügen, auf Fahrgastplattformen, in Wohnheimen und Hotels, in Einzelhandelsgeschäften, auf Märkten, in Cafés, Bars und Restaurants verboten . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um das Rauchen zu bekämpfen, haben viele Staaten ein Gesetz eingeführt, das das Rauchen an öffentlichen Orten verbietet. In allen Büros und Theatern wurden „Raucherzimmer“ beseitigt und Raucherzimmer in Catering-Einrichtungen entfernt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Einführung der oben beschriebenen Verbote impliziert die Überwachung der Einhaltung der festgelegten Regeln und Vorschriften. </font><font style="vertical-align: inherit;">Bisher werden zu diesem Zweck verschiedene Staubsensoren und Gasanalysatoren (z. B. CO2) verwendet. </font><font style="vertical-align: inherit;">Das allgemeine Funktionsprinzip dieser Geräte lautet wie folgt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/81/rm/fi/81rmfi5soiqy-n0fhcydxczgume.png" alt="Das allgemeine Funktionsprinzip verschiedener Staubsammelsensoren und Gasanalysatoren"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Sensor erkennt Änderungen in der Umgebung und der Steuerungsmikrocontroller erzeugt ein Reaktionsereignis gemäß einem vorbestimmten Algorithmus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Alternative zu Staubsammelsensoren und Gasanalysatoren kann die Objektvideoanalyse unter Verwendung neuronaler Netze sein, wobei die Eingabe ein Foto- oder Videostream von einer Überwachungskamera ist und die Ausgabe die Wahrscheinlichkeit des Vorhandenseins von Tabak oder anderen Verbindungen in dem Rahmen oder Satz von Rahmen ist.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allgemeines Blockschaltbild eines Hardware-Software-Komplexes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt verschiedene Möglichkeiten, den Komplex zu implementieren:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Separates System in kompakter Bauweise für die Installation vor Ort</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentrales System mit Datenübertragung und -verarbeitung im Rechenzentrum mit der Möglichkeit, vorhandene Videoüberwachungssysteme zu verwenden</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine hybride Option, wenn ein Teil der Daten in unmittelbarer Nähe der Datenquelle und ein Teil im Rechenzentrum mit zentraler Speicherung der Ergebnisse beider Systeme verarbeitet wird</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten wir sie genauer: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fm/k-/zj/fmk-zjhn4x5ohukja8jmpfje9fc.png" alt="Allgemeines Blockschaltbild eines Hardware-Software-Komplexes zur Raucherkennung"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammensetzung des Komplexes bei Verwendung in unmittelbarer Nähe der Datenquelle:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IP-Kamera / Kamera mit direktem Anschluss oder eine Reihe von Kameras (als Datenquelle verwendet).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Switch (beim Anschließen mehrerer Datenquellen).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Executive-Gerät, Intel NUC8i5BEK-Rechner.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit den geringen Kosten des Hardware- und Softwarekomplexes werden viele wichtige Sicherheitsaufgaben gelöst, wie z.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überwachung der Einhaltung der Brandschutzvorschriften mit hoher Genauigkeit und Fotoaufzeichnung der Tat (einschließlich Angaben zu Uhrzeit, Datum und Ort der Straftat) </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ermittlung von Tatsachen über Straftaten in gefährlichen Industrien und Unternehmen, deren Tätigkeiten mit der Verwendung von brennbaren Stoffen sowie Brennstoffen und Schmiermitteln verbunden sind</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überwachung der Einhaltung der internen Vorschriften in sensiblen Einrichtungen</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein gültiger Anwendungsfall ist eine Serverarchitektur, bei der Daten von Kameras zur weiteren Verarbeitung an das Rechenzentrum übertragen werden: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-r/tg/xh/-rtgxh2gboodzm8nbhvslb6z6i8.png" alt="Serverarchitektur, bei der Daten von Kameras zur weiteren Verarbeitung an das Rechenzentrum übertragen werden"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Skalierung und Verwendung dieses Schemas als Gerät für zentralisierte Inferenz wird davon ausgegangen, dass derselbe Intel NUC8i5BEK verwendet wird, jedoch in einem anderen Formfaktor (Server 1U). ::</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j2/3b/t7/j23bt7laybcszwbzlp8zid7l9a0.png" alt="Server zur Ausführung neuronaler Netze basierend auf 8 Intel NUC8i5BEK"><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung des Prinzips der Erkennung der Tatsache des Rauchens</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Tatsache des Rauchens auf dem Foto (Frames des eingehenden Videostreams) zu erkennen, wird die neuronale Netzwerktopologie SSD Mobilenet v2 aus dem Open Model Zoo verwendet. Das Netzwerk ist im COCO-Datensatz vorab geschult und im Tensorflow weiter geschult. Als nächstes wird das Modell über Intel OpenVINO für den weiteren Betrieb auf der CPU / GPU konvertiert, um die Kosten für FPS zu optimieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1c/u-/st/1cu-stxijzjwy1xrf__dqdrjqa8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modellleistung </font><font style="vertical-align: inherit;">nach Konvertierung: </font><font style="vertical-align: inherit;">Insgesamt können auf einem einzelnen Intel NUC8i5BEK mit einem Frame-Divider-Wert von 5 (25 FPS / 5 = 5 FPS am Eingang) bis zu 40 Streams verarbeitet werden, ohne die Kosten für die Decodierung zu berücksichtigen. Bei Verwendung der VAAPI-Hardware-Dekodierung und des neuesten Intel-Media-Treibers sind die Dekodierungskosten minimal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einer der Vorteile des Intel OpenVINO-Frameworks ist die Möglichkeit, Netzwerke zwischen verschiedenen Geräten zu übertragen. Beispielsweise kann dasselbe Modell mit minimalen Änderungen auf CPU, GPU, FPGA, VPU und anderen Geräten ausgeführt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für das Experiment wurde auf dem Intel Neural Compute Stick 2 basierend auf Myriad X ein Modell zur Erkennung des Rauchens auf den </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fn/xi/0m/fnxi0mymffxhuo3jqesocolcozu.png"><br>
<br>
<img src="https://habrastorage.org/webt/0j/lo/54/0jlo5481awaudqqack7ksqbt_sa.png" alt="Raucherkennung auf Intel Neural Compute Stick 2 basierend auf Myriad X gestartet"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Markt gebracht. </font><font style="vertical-align: inherit;">Ergebnisse: </font><font style="vertical-align: inherit;">Basierend auf Industrie-PCs mit Motherboards von AAEON oder anderen Herstellern mit integrierten MyriadX-Chips können Sie bereits Industrielösungen erhalten und verwenden. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/55b/328/1b4/55b3281b45f08a53629d28d400c92a3e.jpg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den Betrieb eines neuronalen Netzwerks zu demonstrieren, wurde der Telegramm-Bot implementiert - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://t.me/smokers_recognition_bot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Eingabe ist das Bild, und die Ausgabe ist die Wahrscheinlichkeit, dass darauf geraucht wird. </font><font style="vertical-align: inherit;">Wir versuchen, beobachten, experimentieren ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Störung wird auf der Intel NUC8i5BEK GPU ausgeführt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i2/u3/ja/i2u3jaaxtfnuf531-sqs57ioyxs.png"><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lösungsvorteile</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgende Vorteile können festgestellt werden:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verfügbarkeit der Verarbeitung von Daten aus mehreren Quellen an einem Ort</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Möglichkeit, die Tatsache des Rauchens in einer Entfernung zu erkennen, die nur durch die Brennweite der Kamera, der Datenquelle, beispielsweise 5, 50 oder 100 m, begrenzt ist (solche Anzeigen können mit klassischen Sensoren und / oder Geräten nicht erhalten werden). </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Möglichkeit, das Rauchen nicht nur klassischer Zigaretten, sondern auch anderer Geräte (z. B. Vapes oder Rauchmischungen) zu erkennen </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Möglichkeit, die Tatsache der Straftat (Foto- und Ereignismetadaten wie Datum, Uhrzeit, Ort) zu speichern, wenn an den falschen Orten geraucht wird</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Möglichkeit der Nachrüstung bestehender Kammern mit der Funktion, das Rauchen und die Reaktionen auf dieses Ereignis festzustellen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verfügbarkeit der Integration in vorhandene Überwachungssysteme und Videoüberwachungssysteme, z. B. Zabbix, Telegraf, Hikvision NVR usw. </font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungsbereiche</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie einige Objekte und Probleme für die Anwendung des beschriebenen Hardware-Software-Komplexes zur Raucherkennung im Videostream:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Korridore von Geschäftszentren und anderen Gebäuden und Strukturen, Treppenhäuser</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schulen und Kindergärten (aufgrund der Ineffizienz von Rauchmeldern und anderen vorhandenen Lösungen im offenen Raum und in Blaszonen)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tankstelle (aufgrund der Ineffizienz von Rauchsensoren und anderen vorhandenen Lösungen im offenen Raum und in den Blaszonen)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metro (aufgrund der großen Fläche, der Deckenhöhe und der Möglichkeit, mehrere Kameras in einem einzigen System zu verbinden)</font></font></li>
<li>    (-  ,          )</li>
<li> ,  (-  ,  ,        )</li>
<li>    (      )</li>
<li>,  (      )</li>
<li> (      )</li>
</ul><br>
<div class="spoiler"><b class="spoiler_title"> ,          </b><div class="spoiler_text"><img src="https://habrastorage.org/webt/eh/xg/w2/ehxgw27opqk-iolhzbfv-qa9rpy.png"><br>
<img src="https://habrastorage.org/webt/4m/c3/gl/4mc3glbwrk3nk4fgnl8g8_-aqhy.png"><br>
<img src="https://habrastorage.org/webt/ue/fl/uq/uefluqsubwa62mhb5q_pvftiube.png"><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de493714/index.html">Sicherheits-Spickzettel: Nodejs</a></li>
<li><a href="../de493716/index.html">Typinferenz mit TypeScript unter Verwendung des Konstrukts as const und des Schlüsselworts infer</a></li>
<li><a href="../de493718/index.html">Diskussion: Standard-UNIX-Dienstprogramme, die nur wenige verwendet haben und derzeit verwenden</a></li>
<li><a href="../de493720/index.html">Der perfekte Sturm: Wie Technologie die Food-Service-Branche verändert</a></li>
<li><a href="../de493724/index.html">RPA | Prozessrobotisierung mit den Augen eines Analysten</a></li>
<li><a href="../de493728/index.html">Neun Tipps eines Meteorologen zum Thema: Wie man mit der Wettervorhersage in diesem Frühjahr (anlässlich des 23. März) nicht in eine Pfütze gerät</a></li>
<li><a href="../de493730/index.html">So schützen Sie Ihre Systeme nicht in der Cloud</a></li>
<li><a href="../de493732/index.html">Gestern war es unmöglich, aber heute ist es notwendig: Wie kann man aus der Ferne arbeiten und kein Leck verursachen?</a></li>
<li><a href="../de493734/index.html">Perfektionismus, Stornierung: Wie technische Spezialisten Artikel schreiben</a></li>
<li><a href="../de493736/index.html">Sicherheitswoche 13: Sicherheit zu Hause</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>