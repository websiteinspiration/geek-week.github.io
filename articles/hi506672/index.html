<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯИ║ ЁЯША ЁЯТ╗ рдЕрд▓рдорд╛рд░рд┐рдпреЛрдВ рдкрд░ рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ: рдПрдиреАрдореЗрд╢рди, рднрд╛рдЧ 2 ЁЯжУ ЁЯТУ ЁЯЪХ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SwiftUI рдореЗрдВ рдПрдиреАрдореЗрд╢рди рдХрд╣рд╛рдиреА рдХрд╛ рдпрд╣ рджреВрд╕рд░рд╛ рднрд╛рдЧ рд╣реИред рдкрд╣рд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рд╣рдордиреЗ рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдореЗрдВ рдПрдиреАрдореЗрд╢рди рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдореВрд▓ рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ред...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>рдЕрд▓рдорд╛рд░рд┐рдпреЛрдВ рдкрд░ рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ: рдПрдиреАрдореЗрд╢рди, рднрд╛рдЧ 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506672/"><img src="https://habrastorage.org/webt/1u/td/t6/1utdt6xa6tcsov4biwj2ura36s0.png" alt="рдЫрд╡рд┐"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SwiftUI рдореЗрдВ рдПрдиреАрдореЗрд╢рди рдХрд╣рд╛рдиреА рдХрд╛ рдпрд╣ рджреВрд╕рд░рд╛ рднрд╛рдЧ рд╣реИред рдкрд╣рд▓реЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦ рдореЗрдВ,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдордиреЗ рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдореЗрдВ рдПрдиреАрдореЗрд╢рди рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдореВрд▓ рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ред рдЗрд╕ рднрд╛рдЧ рдореЗрдВ, рд╣рдо рдФрд░ рдЖрдЧреЗ рдмрдврд╝реЗрдВрдЧреЗ, рдФрд░ рд╣рдо рдЗрдВрджреНрд░рдзрдиреБрд╖ рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рд╛рде рдШреЛрд╖рд┐рдд рдЙрджрд╛рд╣рд░рдг рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВрдЧреЗред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d7/am/oa/d7amoa5ktffdezfstl4a1pisyjw.gif" alt="рдЫрд╡рд┐"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХрдЯ рдХреЗ рдиреАрдЪреЗ рдЖрдкрдХреЛ рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рдордп рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдорд┐рд▓реЗрдЧрд╛, рд▓реВрдкреЗрдб рд▓реАрдирд┐рдпрд░ рдПрдиреАрдореЗрд╢рди рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рдЯрд╛рдЗрдорд┐рдВрдЧ рд╡рдХреНрд░ рддрдВрддреНрд░ рдмрдирд╛рдирд╛, рд╡рд┐рднрд┐рдиреНрди рдЧреНрд░реЗрдбрд┐рдПрдВрдЯреНрд╕ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдЙрджрд╛рд╣рд░рдг рдФрд░ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдЯреНрд░рд┐рдХ рдЬреЛ рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдПрдиреАрдореЗрд╢рди рд╣реВрдб рдХреЗ рддрд╣рдд рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рдирд╛ рд╣реИ рдХрд┐ рдореИрдВ рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдПрдиреАрдореЗрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд╡рд┐рдЪрд╛рд░ рдЬрд╛рд╕реВрд╕реА рдХрд░рддреЗ рд╣реИрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред рд╡рд╣рд╛рдВ, рд▓реЗрдЦрдХреЛрдВ рдиреЗ рдХрдо рд╕реЗ рдХрдо рдкреНрд░рддрд┐рд░реЛрдз рдХрд╛ рд░рд╛рд╕реНрддрд╛ рдЕрдкрдирд╛рдпрд╛, рдФрд░ рдЖрдХрд╛рд░ рдХреЛ рдПрдирд┐рдореЗрдЯ рдХрд░рдХреЗ рдЗрд╕ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рд╕реНрдкрд╖реНрдЯ рддрд░реАрдХрд╛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ред рд╕рд┐рджреНрдзрд╛рдВрдд рд╕рд░рд▓ рд╣реИ: рдкреНрд░рддреНрдпреЗрдХ рд▓рд╣рд░ рдПрдХ рдмреЗрдЬрд╝рд┐рдпрд░ рд╡рдХреНрд░ рджреНрд╡рд╛рд░рд╛ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдПрдХ рд╕рдореЛрдЪреНрдЪ рд╣реИ, рдФрд░ "рд╕рдордп" рдкреИрд░рд╛рдореАрдЯрд░ рдЗрд╕ рд▓рд╣рд░ рдХреА рд╕рд╣реА рд╕реАрдорд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╣реИ рдХрд┐ рд╕рдорд╛рдкреНрдд рдПрдиреАрдореЗрд╢рди рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7a7/cbf/7a0/7a7cbf7a05561123ceff4be47fff5ed6.gif" alt="рдЫрд╡рд┐"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП, рдореИрдВ рддрд░рдВрдЧреЛрдВ рдХреЛ рдереЛрдбрд╝рд╛ рд▓рдВрдмрд╡рдд рдлреИрд▓рд╛рдКрдВрдЧрд╛ред рдпрд╣ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ, рдореИрдВрдиреЗ рдЕрднреА-рдЕрднреА NotchWave рдХреЗ рдЕрдВрдд рдореЗрдВ рдЬреЛрдбрд╝рд╛ рд╣реИ рдЬреЛ рдкреВрд░реЗ рд╕рдореЛрдЪреНрдЪ рдХреЛ рд▓рд╣рд░ рдХреА рдКрдВрдЪрд╛рдИ рддрдХ рд▓реЗ рдЬрд╛рддрд╛ рд╣реИ, рдПрдиреАрдореЗрд╢рди рдХреЗ рд╡рд░реНрддрдорд╛рди рдЪрд░рдг рдХреЗ рдЕрдиреБрд╕рд╛рд░:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">return</span> p.applying(.<span class="hljs-keyword">init</span>(translationX: <span class="hljs-number">0</span>, y: height * <span class="hljs-keyword">self</span>.phase))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдФрд░ .drowingGroup () рдпрд╣ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордд рднреВрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ - рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЫрд╡рд┐ рдирд┐рд╢реНрдЪрд┐рдд рдлреНрд░реЗрдо рдХреА рд╕реАрдорд╛рдУрдВ рд╕реЗ рдкрд░реЗ рдЬрд╛рддреА рд╣реИред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z3/zv/bi/z3zvbiseywno8t1fnt-i0ugcqgm.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕рд░рд▓ рд╣реИ, рдпрд╣ рд╡рд╛рдВрдЫрд┐рдд рдкрд░рд┐рдгрд╛рдо рдкреИрджрд╛ рдХрд░рддрд╛ рд╣реИ ... рд▓реЗрдХрд┐рди рдпрд╣ рдореБрдЭреЗ рдмрд╣реБрдд рдЙрдмрд╛рдК рд▓рдЧ рд░рд╣рд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рдореЗрд░рд╛ рд░рд╛рд╕реНрддрд╛ рдмрд╣реБрдд рд▓рдВрдмрд╛ рд╣реЛ рдЧрдпрд╛, рдФрд░ рдореИрдВ рдпрд╣ рдирд╣реАрдВ рдХрд╣реВрдВрдЧрд╛ рдХрд┐ рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо рдХрдо рд╕реЗ рдХрдо рдХреБрдЫ рдмреЗрд╣рддрд░ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдпрд╣ рд░рд╛рд╕реНрддреЗ рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдк рдЕрднреА рднреА рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдореЗрдВ рдПрдиреАрдореЗрд╢рди рдХрд╛рд░реНрдп рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рд╕реЗ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╡рд╛рдХрд┐рдл рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдореИрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛ рдкрдврд╝рдиреЗ рдХреА рдЕрддреНрдпрдзрд┐рдХ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдФрд░ рдореИрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреАрдереВрдм</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рддрд▓реНрд▓реАрди рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреНрд░реЗрдбрд┐рдПрдВрдЯ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдореИрдВрдиреЗ рдПрдХ рдЕрд▓рдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЪреБрдирд╛ред рдореБрдЭреЗ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╡рд┐рд╕реНрдерд╛рдкрди рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд░реВрдкреЛрдВ рдХреЗ рдПрдиреАрдореЗрд╢рди рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдЙрдкрдпреЛрдЧреА рд▓рдЧрд╛ (рдореИрдВ рдЕрднреА рднреА рдкреНрд░рдкрддреНрд░ рдХреА рдЖрдХреГрддрд┐ рд╕рдВрд░рдЪрдирд╛ рдХрд╣рддрд╛ рд╣реВрдВ)ред рдСрдлрд╕реЗрдЯ рдХреБрдЫ рднреА рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ - рд╡рд┐рднрд┐рдиреНрди рдЖрдХрд╛рд░, рдЪрд┐рддреНрд░, рдЕрдиреНрдп рджреГрд╢реНрдпред рдПрдХ рд╢реИрдХреНрд╖рд┐рдХ рдХрд╛рд░реНрдп рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ рдПрдХ рд▓рд╣рд░ рд╕реЗ рджреВрд╕рд░реЗ рддрд░рдВрдЧ рдкрд░ рдПрдХ рдЪрд┐рдХрдиреА рд░рдВрдЧ рд╕рдВрдХреНрд░рдордг рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ред рдореВрд▓ рдЕрд╡рдзрд╛рд░рдгрд╛ рдореЗрдВ, рдРрд╕рд╛ рдХреБрдЫ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, SwiftIUI рдЧреНрд░реЗрдбрд┐рдПрдВрдЯ рдХреЗ рддреАрди рд╕рдВрднрд╛рд╡рд┐рдд рдЙрдкрдпреЛрдЧ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ - рд░реИрдЦрд┐рдХ, рдкрд░рд┐рдкрддреНрд░ рдФрд░ рдХреЛрдгреАрдпред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t7/o6/7d/t7o67dwcm_v5svufist7tfp0kwe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЛрдб рдореЗрдВ, рдпрд╣ рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреЗ рдмреНрд▓реЙрдХ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдЬреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдкреВрд░реА рд▓рд╣рд░ рдХреИрд╕реЗ рдЦрдВрдбрд┐рдд рд╣реИред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wa/af/el/waafeltt9cgiasfzxg1gjexwc8i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рд░реЗрдЦреАрдп рдврд╛рд▓ рдврд╛рд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рд╢реБрд░реБрдЖрдд рдФрд░ рдЕрдВрдд рдмрд┐рдВрджреБ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпреЗ рдкреВрд░реНрдг рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рд╕рд╛рде CGPoint рдЕрдВрдХ рдирд╣реАрдВ рд╣реИрдВ (x: y :), рд▓реЗрдХрд┐рди UnitPoint рдЕрдВрдХ, рдЕрд░реНрдерд╛рддреНред </font><font style="vertical-align: inherit;">рд╕рд╛рдкреЗрдХреНрд╖ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ, рдЬрд╣рд╛рдВ x: y: рдЗрд╕ рджреГрд╢реНрдп рдХреЗ рд▓рд┐рдП рдЪрдпрдирд┐рдд рдХреНрд╖реЗрддреНрд░ рдХреА рдЪреМрдбрд╝рд╛рдИ рдФрд░ рдКрдВрдЪрд╛рдИ рдХреЗ рдЕрдВрд╢реЛрдВ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдХреЛрдиреЛрдВ (.topLeading, .bottomTrailing, рдЖрджрд┐) рдФрд░ рдкрдХреНрд╖реЛрдВ рдХреЗ рдордзреНрдпрдмрд┐рдВрджреБ (.top, .trailing, рдЖрджрд┐) рдХреЗ рдЕрдиреБрд░реВрдк рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдмрд┐рдВрджреБ рднреА рд╣реИрдВред</font></font><br>
<br>
<pre><code class="swift hljs">
<span class="hljs-type">Rectangle</span>()<font></font>
    .fill(<span class="hljs-type">LinearGradient</span>(<font></font>
         gradient: <span class="hljs-type">Gradient</span>(stops: [<font></font>
             .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.end, location: <span class="hljs-number">0</span>),<font></font>
             .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.middle, location: <span class="hljs-number">1</span> - <span class="hljs-keyword">self</span>.middleGradientStop),<font></font>
             .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.start, location: <span class="hljs-number">1</span>)]),<font></font>
          startPoint: .leading,<font></font>
          endPoint: .trailing))<font></font>
    .frame(width: <span class="hljs-keyword">self</span>.gradientLength)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд░реИрдЦрд┐рдХ рдврд╛рд▓ рдЦрдВрдб "рд░рдмрд░" рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреА рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЪреМрдбрд╝рд╛рдИ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рдКрдВрдЪрд╛рдИ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдпрд╣ рдкреНрд░рджрд╛рди рдХреА рдЧрдИ рдкреВрд░реА рд░рд╛рд╢рд┐ рдХреЛ рднрд░ рджреЗрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рд╡реГрддреНрддрд╛рдХрд╛рд░ рдврд╛рд▓ рдХреЗ рд╕рд╛рде рдереЛрдбрд╝реА рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдХрд╣рд╛рдиреАред </font><font style="vertical-align: inherit;">рд╣рдо рдмрд┐рдВрджреБ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ - рд╕рд░реНрдХрд▓ рдХрд╛ рдХреЗрдВрджреНрд░, рдЧреНрд░реЗрдбрд┐рдПрдВрдЯ рдХреА рд╢реБрд░реБрдЖрдд рдХрд╛ рддреНрд░рд┐рдЬреНрдпрд╛ рдФрд░ рдЧреНрд░реЗрдбрд┐рдПрдВрдЯ рдХреЗ рдЕрдВрдд рдХрд╛ рддреНрд░рд┐рдЬреНрдпрд╛ред </font><font style="vertical-align: inherit;">рддреНрд░рд┐рдЬреНрдпрд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреВрд░реНрдг рд╢рдмреНрджреЛрдВ рдореЗрдВ рд╣реИрдВ, рдЕрд░реНрдерд╛рддреНред </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдХ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд░реНрдХрд▓ рдХрд╛ рдХреЗрдВрджреНрд░ рдЕрднреА рднреА UnitPoint рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рд╣реИред</font></font><br>
<br>
<pre><code class="swift hljs">
<span class="hljs-type">Rectangle</span>()<font></font>
     .fill(<span class="hljs-type">RadialGradient</span>(<font></font>
          gradient: <span class="hljs-type">Gradient</span>(stops: [<font></font>
              .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.start, location: <span class="hljs-number">0</span>),<font></font>
              .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.middle, location: <span class="hljs-keyword">self</span>.middleGradientStop),<font></font>
              .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.end, location: <span class="hljs-number">1</span>)]),<font></font>
          center: .bottomTrailing,<font></font>
          startRadius: <span class="hljs-keyword">self</span>.topRadius,<font></font>
          endRadius: <span class="hljs-keyword">self</span>.topRadius + <span class="hljs-keyword">self</span>.gradientLength)<font></font>
                )<font></font>
    .frame(height: <span class="hljs-keyword">self</span>.topRadius)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╢реАрд░реНрд╖ рд╕рд░реНрдХрд▓ рдХреЗ рд╕рд╛рде рдПрдХ рдЯреБрдХрдбрд╝рд╛ рдореЗрдВ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдКрдВрдЪрд╛рдИ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрд╖реИрддрд┐рдЬ рд░реВрдк рд╕реЗ рдлреИрд▓рддреА рд╣реИред рдЖрдЦрд┐рд░рдХрд╛рд░, рд╣рдо рд╡рд┐рд╢рд┐рд╖реНрдЯ рдирд┐рд╢реНрдЪрд┐рдд рд░реЗрдбреА рдХреЛ рдмрд┐рдВрджреБрдУрдВ рдореЗрдВ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдмреЗрд╕ рд░рдВрдЧ рдХреА рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реНрдЯреНрд░реЗрдЪрд┐рдВрдЧ рдЖрдпрдд рдХреЛ рдЧреЛрдВрдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдПрдХ рд░реИрдЦрд┐рдХ рдврд╛рд▓ рдХреЗ рд╕рд╛рде рд╣реЛрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдХрдард┐рди рдПрдХ рдХреЛрдгреАрдп рдврд╛рд▓ рд╣реИред рдпрд╣ рд╢реБрд░реБрдЖрдд рдФрд░ рдЕрдВрдд рдХреЛрдг, рд╕рд╛рде рд╣реА рджрд┐рд╢рд╛ рджреНрд╡рд╛рд░рд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдХреЛрдб рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдХреЛрдиреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдирд╣реАрдВ рд╣реИред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдкрдХреЛ рдЖрд╡рд╢реНрдпрдХ рдХреЛрдг рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреНрд░рд┐рдХреЛрдгрдорд┐рддрд┐ рдХреЗ рд╕реНрдХреВрд▓ рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЛ рдпрд╛рдж рд░рдЦрдирд╛ рд╣реЛрдЧрд╛, рдЕрдЧрд░ рдЖрдкрдХреЛ рдПрдХ рдмрд┐рдВрджреБ рдкрд░ рдХреЛрдгреАрдп рдврд╛рд▓ рд╢реБрд░реВ рдХрд░рдиреЗ рдФрд░ рджреВрд╕рд░реЗ рдкрд░ рдЦрддреНрдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред</font></font><br>
<br>
<pre><code class="swift hljs">       
<span class="hljs-type">Rectangle</span>()<font></font>
      .fill(<span class="hljs-type">AngularGradient</span>(<font></font>
            gradient: <span class="hljs-type">Gradient</span>(stops: [<font></font>
                  .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.end, location: <span class="hljs-number">0</span>),<font></font>
                  .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.middle, location: <span class="hljs-number">1</span> - <span class="hljs-keyword">self</span>.angularGradientMiddleStop(blockWidth: geometry.size.width)),<font></font>
                  .<span class="hljs-keyword">init</span>(color: <span class="hljs-keyword">self</span>.start, location: <span class="hljs-number">1</span>)]),<font></font>
            center: .bottomLeading,<font></font>
            startAngle: <span class="hljs-keyword">self</span>.directionTo(gradientPart: <span class="hljs-keyword">self</span>.start, blockWidth: geometry.size.width),<font></font>
            endAngle: <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">360</span>)))<font></font>
<font></font>
...<font></font>
   <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">directionTo</span><span class="hljs-params">(gradientPart: Color, blockWidth: CGFloat)</span></span> -&gt; <span class="hljs-type">Angle</span>{
        <span class="hljs-keyword">let</span> angleOf = gradientAngles(blockWidth: blockWidth)
        <span class="hljs-keyword">var</span> angle = <span class="hljs-type">Angle</span>.zero
        <span class="hljs-keyword">switch</span> gradientPart{
            <span class="hljs-keyword">case</span> start: angle = angleOf.start
            <span class="hljs-keyword">case</span> middle: angle = angleOf.middle
            <span class="hljs-keyword">case</span> end: angle = angleOf.end
            <span class="hljs-keyword">default</span>: <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"there is no gradient stop with that color: \(gradientPart)"</span>)<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> angle<font></font>
    }<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">gradientAngles</span><span class="hljs-params">(blockWidth: CGFloat)</span></span> -&gt; (start: <span class="hljs-type">Angle</span>, middle: <span class="hljs-type">Angle</span>, end: <span class="hljs-type">Angle</span>){
        <span class="hljs-keyword">let</span> blockHeight = <span class="hljs-keyword">self</span>.bottomRadius
        <span class="hljs-keyword">let</span> center = <span class="hljs-type">CGPoint</span>(x: <span class="hljs-number">0</span>, y: blockHeight)
        <span class="hljs-keyword">let</span> topRight = <span class="hljs-type">CGPoint</span>(x: blockWidth, y: blockHeight - <span class="hljs-keyword">self</span>.gradientLength)
        <span class="hljs-keyword">let</span> topGradientStarts = <span class="hljs-type">CGPoint</span>(x: blockWidth, y: blockHeight - <span class="hljs-keyword">self</span>.gradientLength * (<span class="hljs-number">1</span> - <span class="hljs-keyword">self</span>.middleGradientStop))
        <span class="hljs-keyword">let</span> startAngle = center.radialDirection(to: topRight)
        <span class="hljs-keyword">let</span> middleAngle = center.radialDirection(to: topGradientStarts)
        <span class="hljs-keyword">let</span> endAngle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">360</span>)
        <span class="hljs-keyword">return</span> (start: startAngle, middle: middleAngle, end: endAngle)<font></font>
    }<font></font>
<font></font>
...<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">CGPoint</span></span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">radialDirection</span><span class="hljs-params">(to point: CGPoint)</span></span> -&gt; <span class="hljs-type">Angle</span>{
        <span class="hljs-keyword">let</span> deltaX =  point.x - <span class="hljs-keyword">self</span>.x
        <span class="hljs-keyword">let</span> deltaY =  point.y - <span class="hljs-keyword">self</span>.y
        <span class="hljs-keyword">var</span> angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">0</span>)
        <span class="hljs-keyword">if</span> deltaX == <span class="hljs-number">0</span>{
            <span class="hljs-keyword">if</span> deltaY &gt; <span class="hljs-number">0</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">90</span>)<font></font>
            }<span class="hljs-keyword">else</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">270</span>)<font></font>
            }<font></font>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> deltaY == <span class="hljs-number">0</span>{
            <span class="hljs-keyword">if</span> deltaX &gt; <span class="hljs-number">0</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">0</span>)<font></font>
            }<span class="hljs-keyword">else</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">180</span>)<font></font>
            }<font></font>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> deltaX &gt; <span class="hljs-number">0</span> &amp;&amp; deltaY &gt; <span class="hljs-number">0</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(radians: atan(<span class="hljs-type">Double</span>(deltaY / deltaX)))<font></font>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> deltaX &gt; <span class="hljs-number">0</span> &amp;&amp; deltaY &lt; <span class="hljs-number">0</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">270</span>) + <span class="hljs-type">Angle</span>(radians: atan(<span class="hljs-type">Double</span>(deltaX / -deltaY)))<font></font>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> deltaX &lt; <span class="hljs-number">0</span> &amp;&amp; deltaY &gt; <span class="hljs-number">0</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">90</span>) + <span class="hljs-type">Angle</span>(radians: atan(<span class="hljs-type">Double</span>(-deltaX / deltaY)))<font></font>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> deltaX &lt; <span class="hljs-number">0</span> &amp;&amp; deltaY &lt; <span class="hljs-number">0</span>{<font></font>
                angle = <span class="hljs-type">Angle</span>(degrees: <span class="hljs-number">180</span>) + <span class="hljs-type">Angle</span>(radians: atan(<span class="hljs-type">Double</span>(deltaY / deltaX)))<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> angle<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЛрдгреАрдп рдврд╛рд▓, рдЬреЛ рд▓рд╣рд░ рдХреА рдкреВрдВрдЫ рд╣реИ, рд░рдмрд░ рднреА рд╣реИ, рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЪреМрдбрд╝рд╛рдИ рдореЗрдВ - рдпрд╣ рд╢реЗрд╖ рдЖрдХрд╛рд░ рдХрд╛ рдЖрдзрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд░рдЦрддрд╛ рд╣реИред рджрд░рдЕрд╕рд▓, рдЗрд╕реАрд▓рд┐рдП рдЗрддрдиреА рддреНрд░рд┐рдХреЛрдгрдорд┐рддрд┐ рд╣реИред рдореИрдВ рд╕реНрдХреНрд░реАрди рдХреА рд╕реАрдорд╛ рдкрд░ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдмрд┐рдВрджреБрдУрдВ рдХреА рд╕реНрдерд┐рддрд┐ рдЬрд╛рдирддрд╛ рд╣реВрдВ рдЬрд╣рд╛рдВ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд░рдВрдЧ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП (рдХреНрдпреЛрдВрдХрд┐ рдореИрдВ рдПрдХ рдХреЛрдгреАрдп рдХреЗ рд╕рд╛рде рдПрдХ рдкрд░рд┐рдкрддреНрд░ рдврд╛рд▓ рдХреЛ рдЧреЛрдВрдж рдХрд░ рд░рд╣рд╛ рд╣реВрдВ)ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХреЛрдгреЛрдВ рдХреЗ рдорд╛рди рди рдХреЗрд╡рд▓ рдирд┐рдЪрд▓реЗ рдЧреНрд░реЗрдбрд┐рдПрдВрдЯ рдХреА рддреНрд░рд┐рдЬреНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреЗ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдврд╛рд▓ рдХреЗ рд╕рд╛рде рдмреНрд▓реЙрдХ рдХреА рдЪреМрдбрд╝рд╛рдИ рдкрд░ рднреА рдирд┐рд░реНрднрд░ рдХрд░рддреЗ рд╣реИрдВред рд╕реНрдХреВрд▓ рдХреЗ рдмрд╛рдж рдкрд╣рд▓реА рдмрд╛рд░, рдореИрдВрдиреЗ рдПрдХ рдкреЗрдВрд╕рд┐рд▓ рдЙрдард╛рдИ рдФрд░ рдмреАрдЬрдЧрдгрд┐рдд рдХреЛ рдпрд╛рдж рдХрд┐рдпрд╛ :)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рднреА рддреАрди рд╡рд┐рдХрд▓реНрдк рдврд╛рд▓ рдХреЗ рднреАрддрд░ рд░рдВрдЧреЛрдВ рдХреЗ рдПрдХрд▓ рд╡рд┐рд╡рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рдПрдХ рд╕рд░рдгреА рдореЗрдВ рд░рдВрдЧреЛрдВ рдХреА рдПрдХ рд╕рд░рд▓ рд╕реВрдЪреА рд╣реИред </font><font style="vertical-align: inherit;">рдЙрдирдХрд╛ рд╡рд┐рддрд░рдг рдХрд┐рд╕реА рджрд┐рдП рдЧрдП рд╕реЗрдЧрдореЗрдВрдЯ рдореЗрдВ рдПрдХ рд╕рдорд╛рди рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЖрдк рд░реЛрдХ рддрддреНрд╡реЛрдВ рдХреА рдПрдХ рд╕рд░рдгреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд┐рддрд░рдг рдХреЛ рдкрд░рд┐рд╖реНрдХреГрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рд░рдВрдЧреЛрдВ рдХреА рд╕рдорд╛рди рдЧрдгрдирд╛ рд╣реИ, рдХреЗрд╡рд▓ рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдХрд▓ рдЦрдВрдб рдкрд░ рд╕рдордиреНрд╡рдпрд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рдпрд╣ рд╕реНрдерд┐рдд рд╣реЛрдЧрд╛ рдпрд╣ рднреА рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдореИрдВрдиреЗ рдореВрд▓ рдЕрд╡рдзрд╛рд░рдгрд╛ рдореЗрдВ рд▓рдЧрднрдЧ рдЙрд╕реА рдЖрдХрд╛рд░ рдХреА рдПрдХ рд▓рд╣рд░ рдмрдирд╛рдИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд░рдВрдЧ рд╕реЗ рджреВрд╕рд░реЗ рд░рдВрдЧ рдореЗрдВ рд╕рдВрдХреНрд░рдордг рдЕрдм рддреЗрдЬ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╕реНрдореВрде рд╣реИ, рдЬреЛ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдПрдиреАрдореЗрд╢рди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рдВрдЧ рд╡рд╣ рдирд╣реАрдВ рд╣реИ рдЬреЛ рджрд┐рдЦрддрд╛ рд╣реИ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд░рдВрдЧ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдПрдХ рдмрд┐рдВрджреБ рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХ рд░реЛрд▓рд┐рдВрдЧ рд▓рд╣рд░ рдХреЗ рдкреНрд░рднрд╛рд╡ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рд░рдВрдЧреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдХреНрд░рдордг рдХреЛ рд░реИрдЦрд┐рдХ рдмрдирд╛рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдмрд╛рд░реАрдХреА рд╕реЗ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдврд╛рд▓ рдХрд┐рдирд╛рд░реЗ рдкрд░ рд╣реА рддреЗрдЬ рд╣реИ, рдФрд░ рдХрд┐рдирд╛рд░реЗ рд╕реЗ рджреВрд░, рдЪрд┐рдХрдиреА рдпрд╣ рдореБрдЦреНрдп рд░рдВрдЧ рдореЗрдВ рдмрд╣рддреА рд╣реИред </font></font><br>
<img src="https://habrastorage.org/webt/hb/k-/f-/hbk-f-u1tcrri8furxdgeg8tx50.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВрдиреЗ рдЗрд╕реЗ рдордзреНрдпрд╡рд░реНрддреА рд░рдВрдЧ рдХреА рдЧрдгрдирд╛ рдХрд░рдХреЗ, рдФрд░ рдЗрд╕ рд╡рд┐рддрд░рдг рдХреЗ рд╕рд╛рде рдПрдХ рдврд╛рд▓ рдмрдирд╛рдХрд░ рд╣рд╛рд╕рд┐рд▓ рдХрд┐рдпрд╛:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд░рдВрдЧ - 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдордзреНрдпрд╡рд░реНрддреА рд░рдВрдЧ - 0.3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдВрддрд┐рдо рд░рдВрдЧ - 1</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджреЛ рд░рдВрдЧреЛрдВ рдХреЗ рдФрд╕рдд рдХреА рдЧрдгрдирд╛ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рдЙрддреНрдкрдиреНрди рд╣реБрдИред SwiftUI рдХрд╛ рдЕрд░реНрде рд╣реИ рдЧреНрд░реЗрдбрд┐рдПрдВрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдХрд▓рд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛, рдФрд░ рдореБрдЭреЗ рдмрд╣рдХрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрджрд┐ рдЖрдк RGB рд╡рд╕реНрддреБрдУрдВ рдХреА рддрд░рд╣ рд╣реА рд░рдВрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╢реБрд░реВ рдореЗрдВ рдЕрдкрдиреЗ рдореЙрдбрд▓ рдореЗрдВ UIColor рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдХреНрдпреЛрдВрдХрд┐ Color рдореЗрдВ рд░рдВрдЧ рдХреА рд╕реАрдзреА рдкрд╣реБрдБрдЪ рдирд╣реАрдВ рд╣реИред рдЖрдк рдЗрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ UIColor рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред рдПрдХрдорд╛рддреНрд░ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдирд╣реАрдВ)</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░реНрдпрд╛рдкреНрдд рд╕рдорд╛рдзрд╛рди рдЬреЛ рдореИрдВрдиреЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд╛рдпрд╛ рд╣реИ рдХрд┐ </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд╕рд╛рде рдорд┐рд░рд░ рдкреНрд░рддрд┐рдмрд┐рдВрдм рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реИред рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдмреЙрдпрд▓рд░рдкреНрд▓реЗрдЯ, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рдХреЛрдИ рдЕрдиреНрдп рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рд╣реИрдВред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдпрд╣ рдХреЛрдИ рдЧрд▓рддреА рдирд╣реАрдВ рд╣реИ, рдПрдХ рдЪреВрдХ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдореБрджреНрджрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдХрд▓рд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ SwiftUI UIColor рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреА рдирдХрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдкрдХреЛ рдЖрд░рдЬреАрдмреА рдЪреИрдирд▓реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ - рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">SwiftUI рдореЗрдВ рд░рдВрдЧ рдПрдХ рдРрд╕рд╛ рджреГрд╢реНрдп рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХреБрдЫ рдореВрд▓ рд░рдВрдЧ рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рдирдХрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдореВрд▓реНрдп рдЖрдХрд╛рд╢ рдореЗрдВ рддрд╛рд░реЛрдВ рдХреЗ рд╕реНрдерд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдереЛрдбрд╝рд╛ рднрд┐рдиреНрди рд╣реЛ рд╕рдХрддрд╛ рд╣реИ - рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд░рдЬреАрдмреА рд░рдВрдЧ рдХреЗрд╡рд▓ рд╕реНрдХреНрд░реАрди рдкрд░ рдбреНрд░рд╛рдЗрдВрдЧ рдХреЗ рд╕рдордп рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рджрд╕реНрддрд╛рд╡реЗрдЬ рдХрд╣рддрд╛ рд╣реИ</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUI рдХреЗрд╡рд▓ рдХрд┐рд╕реА рджрд┐рдП рдЧрдП рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЗрд╕реЗ рдПрдХ рдареЛрд╕ рдореВрд▓реНрдп рдХреЗ рд▓рд┐рдП рд╣рд▓ рдХрд░рддрд╛ рд╣реИред</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдкрд░реНрдпрд╛рд╡рд░рдг рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ: рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкреАрда рдХреЗ рдкреАрдЫреЗ рдХреА рджреАрд╡рд╛рд░ рдХрд╛ рд░рдВрдЧ, рдпрд╛ рдЖрдИрдУрдПрд╕ рдбрд┐рдЬрд╛рдЗрди рд╡рд┐рд╖рдп рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдпрд╣ рдЖрдкрдХреЛ рд╕реВрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ UIColor рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрддрд╣реАрди рдПрдиреАрдореЗрд╢рди</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдирд┐рдореЗрд╢рди .animation () рд╕рдВрд╢реЛрдзрдХ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ </font><font style="vertical-align: inherit;">рдЪрд░ </font></font><code>.onAppear()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдХреЗ </font><font style="vertical-align: inherit;">рд╕рдВрд╢реЛрдзрдХ рдореЗрдВ рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ рдЖрд░рдВрдн рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдирддреАрдЬрддрди, рд╕рдВрд╢реЛрдзрдХ </font></font><code>.rotationEffect()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдЯрд╛рдЗрдорд░" рд╕реЗ "рдмрди рдЧрдпрд╛", рд╕рд┐рд╕реНрдЯрдо рдЯрд╛рдЗрдорд░ рдХреЗ рд╕рд╛рде рд╕рдВрдЧрдд рдореЗрдВ animatableData рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдордиреЗ рдкрд┐рдЫрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдереАред</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AnimatedRectObservedObject</span>: <span class="hljs-title">View</span></span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> angle: <span class="hljs-type">Double</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
       <span class="hljs-keyword">return</span> <span class="hljs-type">VStack</span>{
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">Rectangle</span>()<font></font>
                .fill(<span class="hljs-type">Color</span>.green)<font></font>
                .frame(width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)<font></font>
                .rotationEffect(<span class="hljs-type">Angle</span>(degrees: angle))<font></font>
                .animation(<span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>))
            <span class="hljs-type">Spacer</span>()<font></font>
       }<font></font>
       .onAppear{<font></font>
            <span class="hljs-keyword">self</span>.angle += <span class="hljs-number">90</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/fl/dw/_0/fldw_0xguydvz5fe_-2tpcp3qkm.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЕрдВрддрд╣реАрди рдПрдиреАрдореЗрд╢рди рдЪрд▓рд╛рдиреЗ рд╕реЗ, рдЖрдкрдХреЛ рд╕рдордЭрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдПрдирд┐рдореЗрдЯреЗрдб рд╕рдВрд╢реЛрдзрдХ рдореЗрдВ рдХреЛрдИ рднреА рдмрд╛рдж рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдЗрд╕реЗ "рддреЛрдбрд╝" рджреЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ, рдЖрдк рдХреЛрдг рдХреЗ рдорд╛рди рдХреЛ 0 рдореЗрдВ рдмрджрд▓рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдпрд╣ рдкреНрд░рднрд╛рд╡ рдорд┐рд▓рддрд╛ рд╣реИ:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ad/vi/iv/adviivgxhwuw0rwwv1itknh2kie.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреНрдпреЛрдВ? рдЗрд╕рдХрд╛ рдЙрддреНрддрд░ рдПрдХ рдПрдиреАрдореЗрд╢рди рд╕реЗ рджреВрд╕рд░реЗ рдореЗрдВ рд╕рдВрдХреНрд░рдордг рдХреЗ рдПрдиреАрдореЗрд╢рди рддрдВрддреНрд░ рдореЗрдВ рд╣реИред рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдЬрдм рд╕реНрдХреНрд░реАрди рдкрд░ рджреГрд╢реНрдп рдХреА рдкрд╣рд▓реА рдЙрдкрд╕реНрдерд┐рддрд┐, рд╣рдордиреЗ 0 рд╕реЗ 90 рддрдХ рдПрдХ рдПрдирд┐рдореЗрдЯреЗрдб рд╕рдВрдХреНрд░рдордг рд╢реБрд░реВ рдХрд┐рдпрд╛ред рджреГрд╢реНрдп рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреЗрд╡рд▓ 90 рдХреЗ рдЕрдВрддрд┐рдо рдореВрд▓реНрдп рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ 0 рдХрд╛ рдореВрд▓ рдореВрд▓реНрдп рдХрд╣реАрдВ рднреА рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рд╣реИред рдПрдиреАрдореЗрд╢рди рдЗрдВрдЬрди рдПрдиреАрдореЗрд╢рди рдХреЗ рд╡рд░реНрддрдорд╛рди рд╕рдордп рдХреА рд╕реНрдерд┐рддрд┐, рдФрд░ рдПрдирд┐рдореЗрдЯрд┐рдбрдбрд╛рдЯрд╛ рдХреЗ рд╡рд░реНрддрдорд╛рди рдореВрд▓реНрдп рдХреЛ рдЬрд╛рдирддрд╛ рд╣реИред рд╕рдордп рдмрд┐рдВрджреБ реж.рел рдкрд░, рдпрд╣ рекрел рд╣реЛрдЧрд╛ред рдпрджрд┐ рдЗрд╕ рдХреНрд╖рдг рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ реж рдорд╛рди рдХреЛ рдмрджрд▓ рджреЗ рддреЛ рдХреНрдпрд╛ рд╣реЛрдЧрд╛? рдЙрддреНрддрд░: рдорд╛рди рдХреЛ 45 рд╕реЗ 0 рдореЗрдВ рдмрджрд▓рдиреЗ рдХрд╛ рдПрдиреАрдореЗрд╢рди рд╢реБрд░реВ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдиреЗрддреНрд░рд╣реАрди, рдЪрдХреНрд░ рдмрдВрдж рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЯреВрдЯрд╛ рд╣реБрдЖ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдРрд╕реЗ рдорд╛рдорд▓реЗ рднреА рд╣реЛрддреЗ рд╣реИрдВ рдЬрдм рдПрдиреАрдореЗрд╢рди рднреА "рдмреНрд░реЗрдХ" рдХрд░рддрд╛ рд╣реИ рдпрджрд┐ рдЖрдкрдХрд╛ рджреГрд╢реНрдп @ObservedObject, рдпрд╛ рдЕрдиреНрдп рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╡реНрдпреВ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, .animation рд╕рдВрд╢реЛрдзрдХ рдореЗрдВ рдПрдХ .animation (: рдорд╛рди :) рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИред рд╡рд╣рд╛рдВ рдорд╛рди рдХреЛ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рд░реЗрдВрдбрд░рд░ рдХреЛ рд╕рдВрдХреЗрдд рджреЗрддреЗ рд╣реИрдВ рдХрд┐ рдПрдиреАрдореЗрд╢рди рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬрдм рдпрд╣ рдорд╛рди рдмрджрд▓рддрд╛ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдЗрдП рдЬрд╛рдиреЗрдВ рдХрд┐ рдпрджрд┐ рд╣рдореЗрдВ рдЕрдм рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рддреЛ рдПрдиреАрдореЗрд╢рди рдХреЛ рдХреИрд╕реЗ рд░реЛрдХреЗрдВред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рджреЛ рдЪреАрдЬреЗрдВ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдЬрд╛рд╣рд┐рд░ рд╣реИ, рд╣рдореЗрдВ рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдХреЛ рдмрддрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЕрдВрддрд╣реАрди рдПрдиреАрдореЗрд╢рди рдХреА рдЕрдм рд╕рд╛рдорд╛рдиреНрдп, рдЕрдВрддрд┐рдо рдЬрдЧрд╣ рдирд╣реАрдВ рд╣реИред рд▓реЗрдХрд┐рди рдЗрддрдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред .Animation () рд╕рдВрд╢реЛрдзрдХ рдПрдХ рдирд┐рд░реНрджреЗрд╢ рд╣реИ рдЬрд┐рд╕ рдкрд░ рд╕рдордп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд░реЛрдЯреЗрд╢рди рдХреЛ рд╣реА .rotationEffect () рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдЕрдВрджрд░ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЯрд╛рдЗрдорд░ рджреНрд╡рд╛рд░рд╛ рд░реЛрдЯреЗрд╢рди рдХреЛрдг рдХреЗ рдирдП рдореВрд▓реНрдпреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдпрд╛ рд╣реИред рд░реЛрдЯреЗрд╢рди рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЗрд╕рдХреЗ рдореВрд▓реНрдп рдХреЛ рднреА рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ред</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AnimatedRectStopButton</span>: <span class="hljs-title">View</span></span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> angle: <span class="hljs-type">Double</span> = <span class="hljs-number">0</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> animation = <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-type">VStack</span>{
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">Rectangle</span>()<font></font>
                .fill(<span class="hljs-type">Color</span>.green)<font></font>
                .frame(width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)<font></font>
                .rotationEffect(<span class="hljs-type">Angle</span>(degrees: angle))<font></font>
                .animation(animation)<font></font>
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">Text</span>(<span class="hljs-string">"toggle Animation"</span>).onTapGesture {
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.angle == <span class="hljs-number">90</span>{
                    <span class="hljs-keyword">self</span>.angle = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">self</span>.animation = .<span class="hljs-keyword">default</span>
                }<span class="hljs-keyword">else</span>{
                    <span class="hljs-keyword">self</span>.angle = <span class="hljs-number">90</span>
                    <span class="hljs-keyword">self</span>.animation = <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>)<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
        .onAppear{<font></font>
            <span class="hljs-keyword">self</span>.angle = <span class="hljs-number">90</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/-o/-d/ui/-o-dui_0ep12qm5zwovo2iedvjm.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд╣рд▓реЗ рдХреА рддрд░рд╣, рдХреЛрдг рдХреЗ рдореВрд▓реНрдп рдХреЛ рдмрджрд▓рдиреЗ рд╕реЗ рдПрдХ рдирдпрд╛ рдПрдиреАрдореЗрд╢рди рд╢реБрд░реВ рд╣реБрдЖ (рдЬреЛ рдЯреВрдЯрд╛ рд╣реБрдЖ рджрд┐рдЦрддрд╛ рдерд╛), рдпрд╣ рдкрд░рд┐рд╡рд░реНрддрди рднреА рдПрдирд┐рдореЗрдЯреЗрдб рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдЕрдм рд╕рд╛рдорд╛рдиреНрдп рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рдордп рдХреЗ рд╕рд╛рдеред рдпрд╣реА рдХрд╛рд░рдг рд╣реИ рдХрд┐, рд╣рдорд╛рд░рд╛ рд╡рд░реНрдЧ рддреБрд░рдВрдд рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдорд╛рдиреЛ рдордВрджреА рдХреЗ рд╕рд╛рде рдШреВрдордирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдк рдПрдХ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реА рдмрд╛рд░ рдЪрд╛рд▓реВ / рдмрдВрдж рдкреНрд░рдХрд╛рд░ рдХреЗ </font><font style="vertical-align: inherit;">рд╕рднреА рдХрд╛рд░реНрдпрд╢реАрд▓рддрд╛ рдХреЛ рдирд┐рд▓рдВрдмрд┐рдд рдХрд░ рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕реЗ рдереЛрдбрд╝рд╛ рдФрд░ рд╕рд░рд▓ рддрд░реАрдХреЗ рд╕реЗ рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AnimatedRectStopButton</span>: <span class="hljs-title">View</span></span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> isStarted = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">let</span> animation = <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-type">VStack</span>{
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">Rectangle</span>()<font></font>
                .fill(<span class="hljs-type">Color</span>.green)<font></font>
                .frame(width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)<font></font>
                .rotationEffect(<span class="hljs-type">Angle</span>(degrees: isStarted ? <span class="hljs-number">90</span> : <span class="hljs-number">0</span>))<font></font>
                .animation(isStarted ? animation : .<span class="hljs-keyword">default</span>)
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">Text</span>(<span class="hljs-string">"toggle Animation"</span>).onTapGesture {
                <span class="hljs-keyword">self</span>.isStarted.toggle()<font></font>
            }<font></font>
        }<font></font>
        .onAppear{<font></font>
            <span class="hljs-keyword">self</span>.isStarted.toggle()<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдмрд┐рдВрджреБ рддрдХ, рд╕рдм рдХреБрдЫ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдЖрд╕рд╛рди рдерд╛ред рд▓реЗрдХрд┐рди рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣рд╛рдВ рд╕рднреА рдШрдЯрдирд╛рдПрдБ рджреГрд╢реНрдп рдХреЗ рдЕрдВрджрд░ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВред </font></font><code>.onAppear{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕реЗ </font></font><code>onTapGesture{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ </font><font style="vertical-align: inherit;">рд╕рд┐рд╕реНрдЯрдо рдФрд░ </font><font style="vertical-align: inherit;">, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, </font><font style="vertical-align: inherit;">рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдпрджрд┐ рдЖрдк рдПрдХ рджреГрд╢реНрдп рдХреЗ рдЕрдВрджрд░ рдкреВрд░реЗ рдПрдиреАрдореЗрд╢рди рдХреЛ рдЗрдирдХреИрдкреНрд╕реБрд▓реЗрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЗрд╕реЗ рдХреЗрд╡рд▓ / рдмрдВрдж рдкрд░ рдкрд╛рд╕ рдХрд░рдирд╛? SwiftUI рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдХрд┐рд╕реА рднреА рдореВрд▓ рддрд░реАрдХреЛрдВ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХрд╛ рдЕрд░реНрде рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рд░реВрдк рд╕реЗ, рдЖрдк рдмрдЪреНрдЪреЗ рдХреЗ рджреГрд╢реНрдп рдХреЛ рдПрдХ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреА рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрдЪреНрдЪреЗ рдХреЗ рдЪрд░ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдирд╣реАрдВ рдмрджрд▓реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдореИрдВрдиреЗ рдХреЛрд╢рд┐рд╢ рдХреА - рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХреБрдЫ рдХрд░рдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рдХреЙрдореНрдмреАрдиреЗрд╢ рдХреЗ рдкреЙрдЯрд╢реНрд░реВрд╢рд░рдмреНрдпреВрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ, рдЬреИрд╕рд╛ рдЖрдкрдиреЗ рд▓реЗрдЦ рдореЗрдВ рдХрд┐рдпрд╛ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕рдм рдХреБрдЫ рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИред рдпрджрд┐ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рд┐рд░ рдореЗрдВ рдЕрд▓рдорд╛рд░рд┐рдпреЛрдВ рдкрд░ рд░рдЦреА рдЬрд╛рддреА рд╣реИ, рддреЛ</font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╣ рджреГрд╢реНрдп рдХреА рдЖрдВрддрд░рд┐рдХ рд╕реНрдерд┐рддрд┐ рд╣реИ, рдФрд░ рдЗрд╕реЗ рдмрд╛рд╣рд░ рд╕реЗ рд╣реЗрд░рдлреЗрд░ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реИ, рд╕рд╣реА рд╕рдорд╛рдзрд╛рди рдмрд╣реБрдд рд╕рд░рд▓ рд╣реЛрдЧрд╛:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AnimatedRectStopButtonFromOutside</span>: <span class="hljs-title">View</span></span>{
    <span class="hljs-keyword">var</span> isStarted: <span class="hljs-type">Bool</span>
    <span class="hljs-keyword">let</span> animation = <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-type">VStack</span>{
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">Rectangle</span>()<font></font>
                .fill(<span class="hljs-type">Color</span>.green)<font></font>
                .frame(width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)<font></font>
                .rotationEffect(<span class="hljs-type">Angle</span>(degrees: isStarted ? <span class="hljs-number">90</span> : <span class="hljs-number">0</span>))<font></font>
                .animation(isStarted ? animation : .<span class="hljs-keyword">default</span>)
            <span class="hljs-type">Spacer</span>()<font></font>
        }<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AnimatedRectParentView</span>: <span class="hljs-title">View</span></span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> isOn = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-type">VStack</span>{
            <span class="hljs-type">AnimatedRectStopButtonFromOutside</span>(isStarted: isOn)
            <span class="hljs-type">Text</span>(<span class="hljs-string">"toggle Animation"</span>).onTapGesture {
                <span class="hljs-keyword">self</span>.isOn.toggle()<font></font>
            }<font></font>
        }.onAppear(){<font></font>
            <span class="hljs-keyword">self</span>.isOn = <span class="hljs-literal">true</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╣рдореЗрдВ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд╛рдЗрд▓реНрдб рд╡реНрдпреВ рдХреЗ рдЕрдВрджрд░ рд╡реНрдпреВ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреА </font><font style="vertical-align: inherit;">рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ </font><font style="vertical-align: inherit;">- рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдкреВрд░реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдкрдбреЗрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рдкреИрд░рд╛рдореАрдЯрд░ рдмрд╛рд╣рд░реА рдЗрд╕реЗ рдмрджрд▓рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдХрднреА-рдХрднреА рдпрд╣ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдХрднреА-рдХрднреА рд╣рдо рдмрдЪреНрдЪреЗ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рдПрдХ рдмрд╛рд░ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕рд▓рд┐рдП рдПрдиреАрдореЗрд╢рди рдХреЛ рддреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рдпрд╛ init () рдХреБрдЫ рдЬрдЯрд┐рд▓ рдФрд░ рд╕рдВрд╕рд╛рдзрди-рдЧрд╣рди рдЧрдгрдирд╛ (рдкреНрд░рд╢реНрди, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП) рд╣реЛрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЗрди рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рд╕рдВрд╕реНрдерд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдмрджрд▓рд╛рд╡реЛрдВ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдСрдирд░реЗрдЯрд┐рд╡ рдореЛрдбрд┐рдлрд╛рдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреГрд╢реНрдп рдЕрджреНрдпрддрди рдХреЗ рджреМрд░рд╛рди рд╕рдВрд╢реЛрдзрд┐рдд рд╕реНрдерд┐рддрд┐</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХрд╡рд░реЗрдЬ рдХреЗ рдпреЛрдЧреНрдп рдПрдХ рдФрд░ рдЪреАрдЬ рд╣реИред рд╣рдордиреЗ 0 рдФрд░ 90 рдбрд┐рдЧреНрд░реА рдХреЗ рдХреЗрд╡рд▓ рджреЛ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛ред рдПрдиреАрдореЗрд╢рди рдмрдВрдж рдХрд░рдиреЗ рд╕реЗ рдХреЛрдг 0 рдкрд░ рд░реАрд╕реЗрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдЗрд╕ рд╕рдордп рдПрдиреАрдореЗрд╢рди рдХреЛ рд░реЛрдХрдирд╛ рд╕рдВрднрд╡ рд╣реИ, рдЬрд┐рд╕ рд╕рдордп рд╣рдордиреЗ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд┐рдпрд╛ рдерд╛ рдФрд░ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рдкрд░ рдЙрд╕реА рд╕реНрдерд╛рди рд╕реЗ рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рдЬрд╛рд░реА рд░рдЦреЗрдВ? рдЖрдЗрдП рдЙрд╕ рдХреЛрдб рдХреЛ рджреЗрдЦреЗрдВ рдЬреЛ рдЗрд╕реЗ рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AnimatedRect</span>: <span class="hljs-title">View</span></span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> startTime: <span class="hljs-type">Date</span> = <span class="hljs-type">Date</span>()<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> angle: <span class="hljs-type">Double</span> = <span class="hljs-number">0</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> internalStarted: <span class="hljs-type">Bool</span>
    <span class="hljs-keyword">let</span> externalStarted = <span class="hljs-literal">true</span>
    <span class="hljs-keyword">var</span> animation: <span class="hljs-type">Animation</span> = <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">init</span>(started externalStarted: <span class="hljs-type">Bool</span>){
        <span class="hljs-keyword">self</span>.externalStarted = externalStarted
        <span class="hljs-keyword">self</span>._internalStarted = <span class="hljs-type">State</span>(initialValue: !externalStarted)<span class="hljs-comment">//forse to start animation</span><font></font>
    }<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-comment">//thats wrong. It just hiding a problem from SwiftUI not solving it</span>
        <span class="hljs-type">DispatchQueue</span>.main.async {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.internalStarted &amp;&amp; <span class="hljs-keyword">self</span>.externalStarted == <span class="hljs-literal">false</span>{
                <span class="hljs-comment">// print("stop animation")</span>
                 <span class="hljs-keyword">let</span> timePassed = <span class="hljs-type">Date</span>().timeIntervalSince(<span class="hljs-keyword">self</span>.startTime)
                 <span class="hljs-keyword">let</span> fullSecondsPassed = <span class="hljs-type">Double</span>(<span class="hljs-type">Int</span>(timePassed))
                 <span class="hljs-keyword">let</span> currentStage = timePassed - fullSecondsPassed
                 <span class="hljs-keyword">self</span>.internalStarted = <span class="hljs-literal">false</span>
                 <span class="hljs-keyword">let</span> newAngle = <span class="hljs-keyword">self</span>.angle - <span class="hljs-number">90</span> + currentStage * <span class="hljs-number">90</span>
                 <span class="hljs-keyword">self</span>.angle = newAngle<font></font>
            }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.internalStarted == <span class="hljs-literal">false</span> &amp;&amp; <span class="hljs-keyword">self</span>.externalStarted {
             <span class="hljs-comment">//    print("start animation")</span>
                 <span class="hljs-keyword">self</span>.startTime = <span class="hljs-type">Date</span>()
                 <span class="hljs-keyword">self</span>.internalStarted = <span class="hljs-literal">true</span>
                 <span class="hljs-keyword">self</span>.angle += <span class="hljs-number">90</span><font></font>
             }<font></font>
       }<font></font>
         <font></font>
       <span class="hljs-keyword">return</span>  <span class="hljs-type">VStack</span>{
            <span class="hljs-type">Rectangle</span>()<font></font>
                .fill(<span class="hljs-type">Color</span>.red)<font></font>
                .frame(width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)<font></font>
                .rotationEffect(<span class="hljs-type">Angle</span>(degrees: angle))<font></font>
                .animation(internalStarted ? animation : .<span class="hljs-keyword">default</span>)
            <span class="hljs-type">Spacer</span>()<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/e9/ci/ge/e9cigegcoxid1l9skuw2qxle238.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореБрдЦреНрдп рд╡рд┐рдЪрд╛рд░ рдПрдиреАрдореЗрд╢рди рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╕рдордп рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдирд╛ рд╣реИред рдХреБрдЫ рд╕рдордп рдмрд╛рдж, рдЬрдм рдпрд╣ рдПрдиреАрдореЗрд╢рди рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдКрдкрд░ рд╣реИ, рддреЛ рд╣рдо рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдВрдЧреЗ рдХрд┐ рдХрд┐рддрдиреЗ рдкреВрд░реНрдг рдПрдиреАрдореЗрд╢рди рдЪрдХреНрд░ рдмреАрдд рдЪреБрдХреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╣рдо рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХрд┐рд╕ рд╡рд░реНрдЧ рдХреЗ рд░реЛрдЯреЗрд╢рди рдХреЛ рджреЗрдЦ рд░рд╣реЗ рд╣реИрдВред рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдо </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдорд╛рди рдХреЛ рд░реЛрдЯреЗрд╢рди рдПрдВрдЧрд▓ рд╡реИрд░рд┐рдПрдмрд▓ рдкрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ </font><font style="vertical-align: inherit;">рдЕрд╕рд╛рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХрд╛рдо рдХреЗ рд▓рд┐рдП рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдиреАрдореЗрд╢рди рдХреА рд╢реБрд░реБрдЖрдд рдФрд░ рдЕрдВрдд рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред Init () рдирд╣реАрдВ рдЪрд▓реЗрдЧрд╛ред </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдиреАрдореЗрд╢рди рдХреЗ рдкрд┐рдЫрд▓реЗ рдкреНрд░рд╛рд░рдВрдн рд╕рдордп рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рд╣рдо рдореМрдЬреВрджрд╛ </font><font style="vertical-align: inherit;">рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред рдпрд╣ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░ рдХрд╛ </font><font style="vertical-align: inherit;">рдЯреЛрдХрди рд╣реИ </font><font style="vertical-align: inherit;">ред рдЗрдирд┐рдЯ рдХреЗ рдЕрдВрджрд░, рдЖрдк рдХреЗрд╡рд▓ рдЗрд╕ рд╡реИрд░рд┐рдПрдмрд▓ рдХреА рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдерд┐рддрд┐ рдХреЛ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдХреЗ рдЕрдВрдд рдореЗрдВ, рдпрджрд┐ рд╡реНрдпреВ рдЗрдирд┐рдЯ () рд╕реЗ рдкрд╣рд▓реЗ рд╣реА рдореМрдЬреВрдж рд╣реИ, рддреЛ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реИрд░рд┐рдПрдмрд▓ </font><font style="vertical-align: inherit;">рдХрд╛ рдорд╛рди </font><font style="vertical-align: inherit;">рдмрд╣рд╛рд▓ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рдпрд╣рд╛рдВ рдмрд╛рд╣рд░реА рдПрдХреНрд╕рдЯрд╛рд░реНрдЯреЗрдб рдкреИрд░рд╛рдореАрдЯрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдЬрд┐рд╕реЗ рд╣рдо рдмрд╛рд╣рд░ рд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ), рдФрд░ рдЖрдВрддрд░рд┐рдХ рдкреИрд░рд╛рдореАрдЯрд░ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var internalStarted, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╣рдо рд╕реАрдзреЗ рдПрдиреАрдореЗрд╢рди рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЗрд╡рд▓ рдПрдХ рд▓рд╛рдкрддрд╛ рдерд╛ - рдХреБрдЫ рд╕рдВрд╢реЛрдзрдХ рдЬреЛ рдЙрдирдХреЗ рдЕрдиреБрдкрд╛рд▓рди рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдЕрджреНрдпрддрди рдХрд░реЗрдВ, рдЬреИрд╕реЗ .onRieve (), рдХреЗрд╡рд▓ рдкреНрд░рддреНрдпреЗрдХ рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред </font><font style="vertical-align: inherit;">рдФрд░ рдлрд┐рд░ рдореИрдВрдиреЗ рд╕реЛрдЪрд╛ - рдЖрдЦрд┐рд░рдХрд╛рд░, рд╢рд░реАрд░ рдХреЛ рд╣рд░ рдбреНрд░рд╛рдЗрдВрдЧ рдХреЗ рд▓рд┐рдП рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЬрд╛рдВрдЪ рд╕реАрдзреЗ рдЗрд╕рдореЗрдВ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ SwiftUI рдмрд╣реБрдд рд╢рдкрде рд▓реЗрддреА рд╣реИ, рдЕрдЧрд░ рд░реЗрдВрдбрд░рд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди рд╡реНрдпреВ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░ </font><font style="vertical-align: inherit;">рдХрд╛ рдореВрд▓реНрдп рдмрджрд▓ </font><font style="vertical-align: inherit;">рджреЗрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рджреЗрддрд╛ рд╣реИ</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреГрд╢реНрдп рдЕрджреНрдпрддрди рдХреЗ рджреМрд░рд╛рди рд╕реНрдерд┐рддрд┐ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛, рдпрд╣ рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ред</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рд░реЛрдХрддрд╛ рд╣реИред рдлрд┐рд░ рдореИрдВ рдПрдХ рдЧрдВрджреЗ рд╣реИрдХ рдХреЗ рд▓рд┐рдП рдЧрдпрд╛, рдФрд░ DispatchQueue.main.async рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред рд▓реЗрдХрд┐рди рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдПрдХ рдЧрдВрджрд╛ рд╣реИрдХ рдХреНрдпреЛрдВ рд╣реИ, рдФрд░ рдРрд╕рд╛ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рд╣реИред рдЕрдЧрд░ рд╣рдо рд╢рд░реАрд░ рдХреЗ рдЕрдВрджрд░ рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рдореВрд░реНрдЦрддрд╛ рдЬреИрд╕реЗ i + = 1 рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдБ рдореИрдВ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╣реВрдБ</font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░, рдлрд┐рд░ рд╣рдореЗрдВ рдПрдХ рдЕрдирдВрдд рд▓реВрдк рдорд┐рд▓рддрд╛ рд╣реИред рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рд╕рдордп, рд╣рдо рдореЗрдореЛрд░реА рдХреЛ рд╡реНрдпреВ рдХреЛ рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдирд╣реАрдВ рдмрдирд╛рддреЗ рд╣реИрдВ - рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд╢реБрд░реБрдЖрддреА рдбреЗрдЯрд╛ рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд░реЗрдВрдбрд░рд┐рдВрдЧ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж, рд╣рдорд╛рд░рд╛ рд╡реНрдпреВ рд░реА-рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдХрддрд╛рд░рдмрджреНрдз рд╣реЛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рд╣рдо рддреБрд░рдВрдд рдЗрд╕реЗ рдЕрдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдмрдирд╛ рджреЗрдВрдЧреЗред рд╣рдо рдЕрдкрдиреЗ рд╣рд╛рдереЛрдВ рд╕реЗ рдПрдХ рдЕрдВрддрд╣реАрди рдЪрдХреНрд░ рдмрдирд╛рддреЗ рд╣реИрдВред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдПрдХ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдХреЙрд▓ рдХреБрдЫ рднреА рдирд╣реАрдВ рдмрджрд▓рддрд╛ рд╣реИред рдпрд╣ рдХреЗрд╡рд▓ рдЕрдЧрд▓реЗ рд░рд╛рдЙрдВрдб рдХреА рджреАрдХреНрд╖рд╛ рдХреЛ "рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рддреБрд░рдВрдд рдмрд╛рдж" рдереЛрдбрд╝рд╛ рд╢рд┐рдлреНрдЯ рдХрд░рддрд╛ рд╣реИред рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдХреЙрд▓ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдЗрд╕реЗ рдкреНрд░рдЪреНрдЫрдиреНрди рдХрд░рддрд╛ рд╣реИ, рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдХреЛ рдЕрдкрдиреА рдирд╛рдХ рдХреЗ рд╕рд╛рде рд╣рдореЗрдВ рд░реЛрдХрдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИред рдпрд╣ рдПрдХ рдХрд╛рд░ рдХреА рддрд░рд╣ рд╣реИ "рдЪреЗрдХ рдЗрдВрдЬрди" рдкреНрд░рдХрд╛рд╢ рдмрд▓реНрдм рдлрдЯрд╛ рд╣реБрдЖ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рддрд░рдл, рдЗрд╕рдореЗрдВ рдХреНрдпрд╛ рдЧрд▓рдд рд╣реИ? рдХрд┐рд╕реА рднреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдореЗрдВ, рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдкреИрд░ рдореЗрдВ рдЧреЛрд▓реА рдорд╛рд░рдиреЗ рдХреЗ рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВ рдпрджрд┐ рдЖрдк рдпрд╣ рдирд╣реАрдВ рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдХреНрдпрд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВред рд▓реЗрдХрд┐рди рджреВрд╕рд░реА рдУрд░, рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдХреЛ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред рд░рдирдЯрд╛рдЗрдо рдореЗрдВ рд╡реНрдпреВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЦрд░рд╛рдм рд╣реИред рд╣рд╛рдВ, рдЖрдк рдЕрдкрдиреА рдПрдбрд╝реА рдХреЛ рдЫрд╛рддреА рдореЗрдВ рдорд╛рд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рдЖрдк рд╣рдореЗрд╢рд╛ рд╕рд╣реА рдХреЛрдб рд▓рд┐рдЦрддреЗ рд╣реИрдВ рдЬреЛ рдПрдХ рдЕрдВрддрд╣реАрди рд▓реВрдк рдореЗрдВ рдХрднреА рдЦрддреНрдо рдирд╣реАрдВ рд╣реЛрдЧрд╛ ... рд▓реЗрдХрд┐рди рдпрд╣ рдПрдХ рд╡рд┐рдХрд▓реНрдк рдХреА рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрддрд┐ рдХреЗ рд╕рд╛рде рд╣реИ - рдпрд╣ рд╕рд┐рд░реНрдл рдмреБрд░рд╛ рдЕрднреНрдпрд╛рд╕ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рдХрд╣рд╛, рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдЖрдкрдХреЛ PassthroughSubject рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдирдпрд╛ рдорд╛рди рдкрд╛рд╕ рдХрд░рдХреЗ рдХреЙрдореНрдмрд╛рдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред рд▓реЗрдХрд┐рди рдЖрдк рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдЕрд╡рд▓реЛрдХрди рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AnimatedRectObservedObject</span>: <span class="hljs-title">View</span></span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> startTime: <span class="hljs-type">Date</span> = <span class="hljs-type">Date</span>()<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> angle: <span class="hljs-type">Double</span> = <span class="hljs-number">0</span>
    @<span class="hljs-type">ObservedObject</span> <span class="hljs-keyword">var</span> animationHandler: <span class="hljs-type">AnimationHandlerTest</span>
    <span class="hljs-keyword">let</span> animation: <span class="hljs-type">Animation</span> = <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">init</span>(animationHandler: <span class="hljs-type">AnimationHandlerTest</span>){
        <span class="hljs-keyword">self</span>.animationHandler = animationHandler<font></font>
    }<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-type">VStack</span>{
            <span class="hljs-type">Rectangle</span>()<font></font>
                .fill(<span class="hljs-type">Color</span>.green)<font></font>
                .frame(width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)<font></font>
                .rotationEffect(<span class="hljs-type">Angle</span>(degrees: angle))<font></font>
                .animation(animationHandler.isStarted ? animation : .<span class="hljs-keyword">default</span>)<font></font>
       }.onReceive(animationHandler.objectWillChange){<font></font>
            <span class="hljs-keyword">let</span> newValue = <span class="hljs-keyword">self</span>.animationHandler.isStarted
            <span class="hljs-keyword">if</span> newValue == <span class="hljs-literal">false</span>{
                 <span class="hljs-keyword">let</span> timePassed = <span class="hljs-type">Date</span>().timeIntervalSince(<span class="hljs-keyword">self</span>.startTime)
                 <span class="hljs-keyword">let</span> fullSecondsPassed = <span class="hljs-type">Double</span>(<span class="hljs-type">Int</span>(timePassed))
                 <span class="hljs-keyword">let</span> currentStage = timePassed - fullSecondsPassed
                 <span class="hljs-keyword">let</span> newAngle = <span class="hljs-keyword">self</span>.angle - <span class="hljs-number">90</span> + currentStage * <span class="hljs-number">90</span>
                withAnimation(.<span class="hljs-keyword">none</span>){<span class="hljs-comment">//not working:(((</span>
                 <span class="hljs-keyword">self</span>.angle = newAngle<font></font>
                }<font></font>
            }<span class="hljs-keyword">else</span> {
                 <span class="hljs-keyword">self</span>.startTime = <span class="hljs-type">Date</span>()
                 <span class="hljs-keyword">self</span>.angle += <span class="hljs-number">90</span><font></font>
             }<font></font>
        }<font></font>
       .onAppear{<font></font>
            <span class="hljs-keyword">self</span>.angle += <span class="hljs-number">90</span>
            <span class="hljs-keyword">self</span>.startTime = <span class="hljs-type">Date</span>()<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдВ рд╡рд┐рд╡рд╛рджрд╛рд╕реНрдкрдж рдмрд┐рдВрджреБ рдпрд╣ рд╣реИ рдХрд┐ рдЕрдзрд┐рд╕реВрдЪрдирд╛ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ рдореЗрдВ рд╣реА рд╡рд╕реНрддреБ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд╕реНрддреБ рдХреЗрд╡рд▓ рдмрджрд▓ рдЬрд╛рдПрдЧреАред </font><font style="vertical-align: inherit;">рдЕрдм рддрдХ, рдореЗрд░реЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ, рдореЗрд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдВрд╢реЛрдзрд┐рдд рд╡рд╕реНрддреБ рд╣реИред </font><font style="vertical-align: inherit;">рдЬрд╛рд╣рд┐рд░ рд╣реИ, рд╕реВрдЪрдирд╛рдПрдВ рдХреБрдЫ рдЕрдВрддрд░рд╛рд▓ рдХреЗ рд╕рд╛рде рдЖрддреА рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдореИрдВ рдпрд╣ рдЧрд╛рд░рдВрдЯреА рдирд╣реАрдВ рджреЗ рд╕рдХрддрд╛ рдХрд┐ рдпрд╣ рд╣рдореЗрд╢рд╛ рд╣реА рд░рд╣реЗрдЧрд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдпрд╛ рддреЛ рд╕реНрд╡-рдирд┐рд░реНрдорд┐рдд рдбрд┐рдбреЗрдХ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдпрд╛ PassthroughSubject, рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирдпрд╛ рдорд╛рди рдкрд╛рд╕ рдХрд░реЗрдВред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wj/ou/nd/wjoundfihtxhnar7iucx7rrkvnm.gif"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдирд┐рдореЗрд╢рди рдПрдирд┐рдореЗрд╢рди рдкрд░рд┐рд╡рд░реНрддрди</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд┐рдлрд╝ рдкрд░ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдПрдиреАрдореЗрд╢рди рддреБрд░рдВрдд рдмрдВрдж рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрд╕реЗ рдХреБрдЫ рд╕рдордп рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЬрдм рд╣рдо рдХреЛрдг рдкрд░ рдПрдХ рдордзреНрдпрд╡рд░реНрддреА рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдПрдиреАрдореЗрд╢рди - рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдХ рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред</font></font><br>
<br>
<pre><code class="swift hljs">.animation(animationHandler.isStarted ? animation : .<span class="hljs-keyword">default</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд╕реЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╡реНрдпрд╡рд╣рд╛рд░ рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдореЗрд░реЗ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдгрд┐рдд рд╣рд░ рдЪреАрдЬ рдХреА рд╕рд╛рдкреЗрдХреНрд╖ рд╕рд╛рджрдЧреА рдХреЗ рдмрд╛рд╡рдЬреВрдж, рдмрд╛рддрдЪреАрдд рдХреА рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рд╣реБрдб рдХреЗ рдиреАрдЪреЗ рд░рд╣рддрд╛ рд╣реИ рддрд╛рдХрд┐ рддрд╕реНрд╡реАрд░ рд╣рдореЗрд╢рд╛ рдЪрд┐рдХрдиреА рджрд┐рдЦреЗ, рднрд▓реЗ рд╣реА рд▓рд╛рдкрд░рд╡рд╛рд╣ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдиреЗ рдХреБрдЫ рд╕рдВрдХреЗрдд рдирд╣реАрдВ рджрд┐рдпрд╛ рд╣реЛред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдиреАрдореЗрд╢рди рд╡рд╕рдВрдд рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рднреМрддрд┐рдХреА рдХреЗ рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрдХрд░рдг рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЙрдкрдпреБрдХреНрдд рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдпрд╣ рдПрдХ рдЫреЛрдЯрд╛ рдПрдиреАрдореЗрд╢рди рд╣реИ, рд▓рдЧрднрдЧ 0.2 рд╕реЗрдХрдВрдбред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдПрдХ рдирдП рд░рд╛рдЬреНрдп рдореЗрдВ рд╕рдВрдХреНрд░рдордг рдХрд╛ рдПрдиреАрдореЗрд╢рди (рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдЧрдгрдирд╛ рдФрд░ рд╕рдВрдХреЗрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдХреЛрдг) рд╕реБрдВрджрд░ рд░реВрдк рд╕реЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ 0.2 рд╕реЗрдХрдВрдб рдореЗрдВ рдлрд┐рдЯ рд╣реЛрдиреЗ рдХрд╛ рд╕рдордп рдирд╣реАрдВ рд╣реИ, рддреЛ рд╡рд░реНрддрдорд╛рди рдПрдиреАрдореЗрд╢рди рдЧрддрд┐ рд╕реЗ рдПрдХ рдкреВрд░реНрдг рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрдВрджрд░ рдордВрджреА рдХреЗ рд╕рд╛рде рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдЦреБрдж рдХреЛ рдЕрдВрддрд╣реАрди рдПрдиреАрдореЗрд╢рди рдХрд╛ рдПрдХ рдФрд░ рд▓реВрдк рдЬреЛрдбрд╝ рджреЗрдЧрд╛, рдЬреЛ рддреНрд╡рд░рд┐рдд рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдЦреЗрд▓рд╛ рдЬрд╛рдПрдЧрд╛ред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z0/b0/so/z0b0soljlzjqudxhek_irdxgyoy.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдиреАрдореЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред </font><font style="vertical-align: inherit;">рдиреАрдЪреЗ рдХреЗ рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рд░реЛрдЯреЗрд╢рди рд╕реНрдЯреЙрдк рдПрдиреАрдореЗрд╢рди рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛:</font></font><br>
<br>
<pre><code class="swift hljs">                
.animation(animationHandler.isStarted ? animation : <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">0</span>))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╛, рдЖрдк рд░реЛрдХрддреЗ рд╕рдордп рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдЖрд╡рд╢реНрдпрдХ рдореВрд▓реНрдп рдХреА рдЕрдзрд┐рдХ рд╕рдЯреАрдХ рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рди рдХреЗрд╡рд▓ рдПрдиреАрдореЗрд╢рди рдХреЗ рд╡рд░реНрддрдорд╛рди рдХреНрд╖рдг рдХреЛ рдорд╛рдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдмрд▓реНрдХрд┐ рдЗрд╕реЗ рдареАрдХ рд╕реЗ рдЬрд╛рди рд▓реЗрдВред </font><font style="vertical-align: inherit;">рдореИрдВ рдиреАрдЪреЗ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдПрдиреАрдореЗрд╢рди рдореЗрдВ рдХрдИ рддрд░рдВрдЧреЛрдВ рдХреА рдЧрддрд┐</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрдВрджреНрд░рдзрдиреБрд╖ рдПрдиреАрдореЗрд╢рди рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВред </font><font style="vertical-align: inherit;">рддреЛ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЦреБрдж рд╣реА рд▓рд╣рд░реЗрдВ рд╣реИрдВ, рдЪрд▓реЛ рдЙрдиреНрд╣реЗрдВ рдЪрд▓рдирд╛ рд╕рд┐рдЦрд╛рдПрдВред </font><font style="vertical-align: inherit;">рдкрд╣рд▓реА рдЪреАрдЬ рдЬреЛ рдореИрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рд╡рд╣ рдПрдХ рдЕрдВрддрд╣реАрди рдПрдиреАрдореЗрд╢рди рд╣реИред </font><font style="vertical-align: inherit;">рдореИрдВрдиреЗ рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛: рдореЗрд░реЗ рдкрд╛рд╕ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдиреАрдореЗрд╢рди рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ </font><font style="vertical-align: inherit;">рдПрдХ </font><font style="vertical-align: inherit;">рдЪрд░ </font><font style="vertical-align: inherit;">рд╣реЛрдЧрд╛ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд░рд╛рдЬреНрдп 0 рдкрд░, рдкрд╣рд▓реА рд▓рд╣рд░ рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╣реЛрдЧреА, рдФрд░ рдЖрдЦрд┐рд░реА рдЫреЛрд░ рдкрд░ред </font><font style="vertical-align: inherit;">рд▓рд╣рд░реЗрдВ рдЦреБрдж рд╣реА рдУрд╡рд░рд▓реИрдк рд╣реЛ рдЬрд╛рдПрдВрдЧреАред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдкреНрд░рддреНрдпреЗрдХ рддрд░рдВрдЧ рдХреЗ рджреГрд╢реНрдп рднрд╛рдЧ рдХреА рд▓рдВрдмрд╛рдИ рддрд░рдВрдЧреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧреАред </font><font style="vertical-align: inherit;">рдореИрдВрдиреЗ рдЗрд╕реЗ ZStack рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛, рдЬреЛ рд╕рднреА рддрд░рдВрдЧреЛрдВ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдореЗрд░реЗ рд╕реНрд╡рдпрдВ рдХреЗ .wavePosition рд╕рдВрд╢реЛрдзрдХ, рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рдореИрдВ рдПрдиреАрдореЗрд╢рди рдХреЗ рдХреНрд╖рдг рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рддрд░рдВрдЧ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реВрдВ, рдФрд░ рдЬрд┐рд╕ рдХреНрд░рдо рдореЗрдВ рд╡реЗ рдУрд╡рд░рд▓реИрдк рдХрд░рддреЗ рд╣реИрдВред</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрдб</font></font></b>
                        <div class="spoiler_text"><pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SharpWavePosition</span>: <span class="hljs-title">AnimatableModifier</span> </span>{
    <span class="hljs-keyword">let</span> wave: <span class="hljs-type">WaveDescription</span>
    <span class="hljs-keyword">let</span> animationHandler: <span class="hljs-type">AnimationHandler</span>
    <span class="hljs-keyword">var</span> time: <span class="hljs-type">CGFloat</span>
    <span class="hljs-keyword">var</span> currentPosition: <span class="hljs-type">CGFloat</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> animatableData: <span class="hljs-type">CGFloat</span> {
        <span class="hljs-keyword">get</span> { time}
        <span class="hljs-keyword">set</span> {
                <span class="hljs-keyword">self</span>.time = newValue
            <span class="hljs-keyword">let</span> currentTime = newValue - <span class="hljs-type">CGFloat</span>(<span class="hljs-type">Int</span>(newValue))
            <span class="hljs-keyword">self</span>.currentPosition = <span class="hljs-type">SharpWavePosition</span>.calculate(forWave: wave.ind, ofWaves: wave.totalWavesCount, overTime: currentTime)<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">init</span>(wave: <span class="hljs-type">WaveDescription</span>, time: <span class="hljs-type">CGFloat</span>, animationHandler: <span class="hljs-type">AnimationHandler</span>){
        <span class="hljs-keyword">self</span>.wave = wave
        <span class="hljs-keyword">self</span>.time = time
        <span class="hljs-keyword">self</span>.animationHandler = animationHandler
        <span class="hljs-keyword">self</span>.currentPosition = <span class="hljs-number">0</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">calculate</span><span class="hljs-params">(forWave: Int, ofWaves: Int, overTime: CGFloat)</span></span> -&gt; <span class="hljs-type">CGFloat</span>{<font></font>
<font></font>
        <span class="hljs-keyword">let</span> time = overTime - <span class="hljs-type">CGFloat</span>(<span class="hljs-type">Int</span>(overTime))
        <span class="hljs-keyword">let</span> oneWaveWidth = <span class="hljs-type">CGFloat</span>(<span class="hljs-number">1</span>) / <span class="hljs-type">CGFloat</span>(ofWaves)
        <span class="hljs-keyword">let</span> initialPosition = oneWaveWidth * <span class="hljs-type">CGFloat</span>(forWave)
        <span class="hljs-keyword">let</span> currentPosition = initialPosition + time
        <span class="hljs-keyword">let</span> fullRounds = <span class="hljs-type">Int</span>(currentPosition)
        <span class="hljs-keyword">var</span> result = currentPosition - <span class="hljs-type">CGFloat</span>(fullRounds)
        <span class="hljs-keyword">if</span> fullRounds &gt; <span class="hljs-number">0</span> &amp;&amp; result == <span class="hljs-number">0</span>{
            <span class="hljs-comment">// at the end of the round it should be 1, not 0</span>
            result = <span class="hljs-number">1</span><font></font>
        }<font></font>
 <span class="hljs-comment">//       print("wave \(forWave) in time \(overTime) was at position \(result)")</span>
        <span class="hljs-keyword">return</span> result<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">body</span><span class="hljs-params">(content: Content)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-keyword">let</span> oneWaveWidth = <span class="hljs-type">CGFloat</span>(<span class="hljs-number">1</span>) / <span class="hljs-type">CGFloat</span>(wave.totalWavesCount)
        <span class="hljs-keyword">var</span> thisIsFirstWave = <span class="hljs-literal">false</span>
        <span class="hljs-keyword">if</span> currentPosition &lt; oneWaveWidth{<font></font>
            thisIsFirstWave = <span class="hljs-literal">true</span><font></font>
        }<font></font>
        <span class="hljs-keyword">return</span>
            <span class="hljs-type">Group</span>{<font></font>
                content<font></font>
                            .offset(x: -wave.width + currentPosition * (wave.width +  wave.gradientLength),<font></font>
                            <span class="hljs-comment">//to watch how waves move uncoment this</span>
                           <span class="hljs-comment">// y: CGFloat(self.waveInd * 20))</span>
                        y:<span class="hljs-number">0</span>)<font></font>
                    .zIndex(-<span class="hljs-type">Double</span>(currentPosition))<font></font>
                    .transition(.identity)<font></font>
                    .animation(<span class="hljs-literal">nil</span>)<font></font>
<font></font>
                <span class="hljs-keyword">if</span> thisIsFirstWave{<font></font>
                    content<font></font>
                        .offset(x: wave.gradientLength, y: <span class="hljs-number">0</span>)<font></font>
                        .zIndex(-<span class="hljs-number">2</span>)<font></font>
                        .transition(.identity)<font></font>
                        .animation(<span class="hljs-literal">nil</span>)<font></font>
                }<font></font>
            }<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">View</span></span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">positionOfSharp</span><span class="hljs-params">(wave: WaveDescription, inTime: CGFloat, animationHandler: AnimationHandler)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.modifier(<span class="hljs-type">SharpWavePosition</span>(wave: wave, time: inTime, animationHandler: animationHandler))<font></font>
    }<font></font>
}<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SharpRainbowView</span>: <span class="hljs-title">View</span></span>{
    <span class="hljs-keyword">let</span> waves: [<span class="hljs-type">SharpGradientBorder</span>]
    <span class="hljs-keyword">var</span> animation: <span class="hljs-type">Animation</span> = <span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">1</span>).repeatForever(autoreverses: <span class="hljs-literal">false</span>)
    <span class="hljs-comment">//@ObservedObject</span>
    <span class="hljs-keyword">var</span> animationHandler: <span class="hljs-type">AnimationHandler</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> rainbowPosition: <span class="hljs-type">CGFloat</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">init</span>(animationHandler: <span class="hljs-type">AnimationHandler</span>,<font></font>
        backgroundColor: <span class="hljs-type">Color</span> = .clear<font></font>
    ){<font></font>
        <span class="hljs-keyword">self</span>.animationHandler = animationHandler
        <span class="hljs-keyword">let</span> bottomRadius = animationHandler.waveGeometry.bottomRadius
        <span class="hljs-keyword">let</span> topRadius = animationHandler.waveGeometry.topRadius
        <span class="hljs-keyword">let</span> gradientLength = animationHandler.waveGeometry.gradientLength
        <span class="hljs-keyword">let</span> rainbowColors = animationHandler.rainbowColors
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">var</span> lastColor = rainbowColors.last <span class="hljs-keyword">else</span> {<span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"no colors to display in rainbow"</span>)}
        <span class="hljs-keyword">var</span> allWaves = [<span class="hljs-type">SharpGradientBorder</span>]()
        <span class="hljs-keyword">for</span> color <span class="hljs-keyword">in</span> rainbowColors{
            <span class="hljs-keyword">let</span> view = <span class="hljs-type">SharpGradientBorder</span>(start: color,<font></font>
                                      end: lastColor,<font></font>
                                      bottomRadius: bottomRadius,<font></font>
                                      topRadius: topRadius,<font></font>
                                      gradientLength: gradientLength)<font></font>
            allWaves.append(view)<font></font>
            lastColor = color<font></font>
        }<font></font>
        <span class="hljs-keyword">self</span>.waves = allWaves<font></font>
    }<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-type">GeometryReader</span>{geometry <span class="hljs-keyword">in</span>
            <span class="hljs-type">VStack</span>{
                <span class="hljs-type">ZStack</span>{
                    <span class="hljs-type">ForEach</span>(<span class="hljs-keyword">self</span>.waves.<span class="hljs-built_in">indices</span>, id: \.<span class="hljs-keyword">self</span>){ind <span class="hljs-keyword">in</span>
                        <span class="hljs-keyword">self</span>.waves[ind]<font></font>
                            .positionOfSharp(wave: <span class="hljs-type">WaveDescription</span>(ind: ind,<font></font>
                                                    totalWavesCount: <span class="hljs-keyword">self</span>.waves.<span class="hljs-built_in">count</span>,<font></font>
                                                    width: geometry.size.width,<font></font>
                                                    baseColor: <span class="hljs-keyword">self</span>.waves[ind].end,<font></font>
                                                    gradientLength: <span class="hljs-keyword">self</span>.waves[ind].bottomRadius + <span class="hljs-keyword">self</span>.waves[ind].topRadius),<font></font>
                                             inTime: <span class="hljs-keyword">self</span>.rainbowPosition,<font></font>
                                             animationHandler: <span class="hljs-keyword">self</span>.animationHandler)<font></font>
                            .animation(<span class="hljs-keyword">self</span>.animationHandler.isStarted ? <span class="hljs-keyword">self</span>.animation : .linear(duration: <span class="hljs-number">0</span>))<font></font>
                    }<font></font>
                }<font></font>
     <span class="hljs-comment">//           .clipped()</span><font></font>
            }<font></font>
<font></font>
        }<font></font>
        .onAppear(){<font></font>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.animationHandler.isStarted{
                <span class="hljs-keyword">self</span>.rainbowPosition = <span class="hljs-number">1</span><font></font>
            }<font></font>
        }<font></font>
        .onReceive(animationHandler.objectWillChange){<font></font>
             <span class="hljs-keyword">let</span> newValue = <span class="hljs-keyword">self</span>.animationHandler.isStarted
             <span class="hljs-keyword">if</span> newValue == <span class="hljs-literal">false</span>{
                <span class="hljs-keyword">let</span> newPosition = <span class="hljs-keyword">self</span>.animationHandler.currentAnimationPosition
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"animated from \(self.rainbowPosition - 1) to \(self.rainbowPosition) stopped at \(newPosition)"</span>)
                    <span class="hljs-keyword">self</span>.rainbowPosition = newPosition<font></font>
             }<span class="hljs-keyword">else</span> {
                  <span class="hljs-keyword">self</span>.rainbowPosition += <span class="hljs-number">1</span><font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
 </code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд╣рд▓реА рдмрд╛рд░ рд╕реНрдХреНрд░реАрди рдкрд░ рд╡реНрдпреВ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рд╣рдо рд░рд╛рдЬреНрдп рдХреЛ 0 рд╕реЗ 1 рддрдХ рдмрджрд▓рддреЗ рд╣реИрдВ, рдЬреЛ рдШреЛрд╖рд┐рдд рд░реИрдЦрд┐рдХ рдПрдиреАрдореЗрд╢рди рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рддрд░рдВрдЧреЛрдВ рдХреЛ рд╕реНрдХреНрд░реАрди рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдЕрдВрддрд╣реАрди рд░реВрдк рд╕реЗ рдЪрд▓рд╛рддрд╛ рд╣реИред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bg/vr/ym/bgvrymyoubpekjmpgnsrtxxgco8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬрдм рд▓рд╣рд░ рдХрд╛ рдХрд┐рдирд╛рд░рд╛ рджрд╛рд╣рд┐рдиреЗ рдХрд┐рдирд╛рд░реЗ рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХреА рдЕрдЧрд▓реА рд╕реНрдерд┐рддрд┐ рд╕реНрдХреНрд░реАрди рдХреЗ рдХрд┐рдирд╛рд░реЗ рд╕реЗ рдкрд░реЗ, рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╣реЛрдЧреАред рдРрд╕рд╛ рд▓рдЧреЗрдЧрд╛ рдЬреИрд╕реЗ рдХрд┐ рдпрд╣ рд▓рд╣рд░ рдХреЗ рдЕрдВрдд рд╕реЗ рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдкреГрд╖реНрдарднреВрдорд┐ рд╕рдмреНрд╕рдЯреНрд░реЗрдЯ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░реЗрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рд╣рдо рдмрдЪрдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗред рдЗрд╕ рдкреНрд░рдпреЛрдЬрди рдХреЗ рд▓рд┐рдП, рдЕрдЧрд░ {...} рдмреНрд▓реЙрдХ рдореЙрдбрд┐рдлрд╝рд╛рдпрд░, рдмреЙрдбреА () рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕реНрдХреНрд░реАрди рд╕реЗ рдЧрд╛рдпрдм рдкрд╣рд▓реА рд▓рд╣рд░ рдХреА рдПрдХ рдкреНрд░рддрд┐ рдЦреАрдВрдЪреА рдЬрд╛рддреА рд╣реИред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/6m/vt/si6mvtiimlv73kxy4c4imperxc4.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдореБрдЭреЗ рдкреНрд░рддреНрдпреЗрдХ рд▓рд╣рд░ рдХреА рдЬреНрдпрд╛рдорд┐рддреАрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд╕рдВрд╢реЛрдзрдХ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рд╕рдорд╕реНрдпрд╛ рдпрд╣ рдереА рдХрд┐ рдореБрдЭреЗ рд╡рд░реНрддрдорд╛рди рдПрдиреАрдореЗрд╢рди рдЪрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкреНрд░рддреНрдпреЗрдХ рддрд░рдВрдЧ рдХреЗ z-рд╕реВрдЪрдХрд╛рдВрдХ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред </font><font style="vertical-align: inherit;">рдореИрдВ рдЕрдВрджрд░ рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ рд╡рд╛рд▓реА GeometryReader {} рд╕рдВрд╢реЛрдзрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреГрд╢реНрдп рдХреНрд╖реЗрддреНрд░ рдХреА рдЪреМрдбрд╝рд╛рдИ рдирд┐рдХрд╛рд▓ рд╕рдХрддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореБрдЭреЗ рдЗрд╕ рддрдереНрдп рд╕реЗ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ рдХрд┐ рдпрд╣ рддрд░рдВрдЧреЛрдВ рдХреЗ рд╕реБрдкрд░рдкреЛрдЬрд┐рд╢рди рдХреЗ рдХреНрд░рдо рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">.ZIndex () рд╕рдВрд╢реЛрдзрдХ рдХреЗрд╡рд▓ рдкрд╣рд▓реЗ ZStack {} рдХрдВрдЯреЗрдирд░ рдХреЛ рд╡реНрдпреВ рдкрджрд╛рдиреБрдХреНрд░рдо рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GeometryReader рдЗрд╕ рдХрдиреЗрдХреНрд╢рди рдХреЛ рдХрд╛рдЯ рджреЗрддрд╛ рд╣реИ, рдФрд░ zIndex () рдХрд╛рдо рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЗрд╕ рдмрд┐рдВрджреБ рддрдХ рдЖрдкрдиреЗ рд╕реЛрдЪрд╛ рдХрд┐ рд╡рд░реНрддрдорд╛рди рджреГрд╢реНрдп рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреНрдпрд╛рдорд┐рддрд┐ рд░рд╛рдЗрдбрд░ рдПрдХ рд╣рд╛рдирд┐рд░рд╣рд┐рдд рддрд░реАрдХрд╛ рд╣реИ, рддреЛ рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдЪ рдирд╣реАрдВ рд╣реИред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд╡рд╛рд╣ рдПрдиреАрдореЗрд╢рди</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рдФрд░ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд┐рдВрджреБ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдЕрдВрджрд░ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдПрдиреАрдореЗрд╢рди рдХреЛ рд╕рдордЭ рд░рд╣рд╛ рд╣реИред рдХреБрдЫ рдмрд┐рдВрджреБ рдкрд░, рдкреНрд░рддреНрдпреЗрдХ рд▓рд╣рд░ рд╕реНрдХреНрд░реАрди рдХреЗ рдХрд┐рдирд╛рд░реЗ рдкрд░ рдкрд╣реБрдВрдЪрддреА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЕрдзрд┐рдХрддрдо рдХреНрд╖реИрддрд┐рдЬ рдСрдлрд╕реЗрдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдиреНрдпреВрдирддрдо рдСрдлрд╕реЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ, рд╢реБрд░реБрдЖрддреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдХреЗ рд╕рдорд╛рди рдкрд░рд┐рд╡рд░реНрддрди рд╣реИ, рдФрд░ рдпрд╣ рдПрдирд┐рдореЗрдЯреЗрдб рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдиреАрдореЗрд╢рди рдХреЗ рдЕрдВрджрд░ рднреАред рдЖрдЦрд┐рд░рдХрд╛рд░, рдПрдиреАрдореЗрд╢рди рдХреЗрд╡рд▓ рд╕рдВрд╢реЛрдзрдХ рдХреЗ рд▓рд┐рдП рдореВрд▓реНрдпреЛрдВ рдХрд╛ рдПрдХ рдмрд╣реБрдд рд╣реА рдЕрдХреНрд╕рд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рдг рд╣реИ, рдФрд░ рдпрд╣ рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рд╛рде рднреА рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЪрд╛рд╣реЗ рдХрд┐рддрдирд╛ рднреА рдЕрдЬреАрдм рд▓рдЧрддрд╛ рд╣реЛред рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдПрдиреАрдореЗрд╢рди рдХреЗ рдЕрдВрджрд░, рдЗрд╕ рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдЕрдВрджрд░ рдПрдХ рдирдпрд╛ рдорд╛рди рдЧреБрдЬрд░ рд░рд╣рд╛ рд╣реИ, рд╣рдо рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рдЧрддрд┐ рдПрдиреАрдореЗрд╢рди рдХреЗ рдЕрдВрддрд┐рдо рдмрд┐рдВрджреБ рдХреЛ рдмрджрд▓рддреЗ рд╣реИрдВред рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд▓рд╣рд░, рд╕реНрдХреНрд░реАрди рдХреЗ рдХрд┐рдирд╛рд░реЗ рддрдХ рдкрд╣реБрдВрдЪрддреА рд╣реИ, рдШреВрдорддреА рд╣реИ рдФрд░ рд╡рд╛рдкрд╕ рддреИрд░рддреА рд╣реИред рд▓реЗрдХрд┐рди рдпрд╣ рдпрд╛ рддреЛ рд╢реБрд░реБрдЖрдд рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЬрд▓реНрджреА рдпрд╛ рдмрд╛рдж рдореЗрдВ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╕реНрдерд┐рддрд┐ рдХреЗ рд╕рд╛рде рдкрдХрдбрд╝ рд▓реЗрддрд╛ рд╣реИ,рдФрд░ рдлрд┐рд░ рдмрд╛рдПрдВ рд╕реЗ рджрд╛рдПрдВ рдлрд┐рд░ рд╕реЗ рдЪрд▓рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/aj/xp/ky/ajxpkyp6nxn-e6ixzzrv7y-g-c4.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдк .animation (nil) рд╕рдВрд╢реЛрдзрдХ рдХреЛ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдХреЗ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдореИрдВ рдкрд╛рда рдореЗрдВ рдКрдкрд░ рд▓рд╛рдЧреВ рд╕рднреА рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдПрдиреАрдореЗрд╢рди рдХреЛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реВрдВред рдпрд╣ рдХрд┐рд╕реА рднреА рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдХрд╛рд░реНрдп рдХрд╛ рд╕рд╛рдорд╛рдиреНрдп рддрд░реНрдХ рд╣реИ: рдпрд╣ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕рдХреЗ рдЗрдирдкреБрдЯ рдкрд░ рдХреНрдпрд╛ рд╣реИ, рдФрд░ рдЗрдирдкреБрдЯ рдкрд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкрд┐рдЫрд▓реЗ рд╕рднреА рд╕рдВрд╢реЛрдзрдХ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдорд╛рдиреНрдпрддрдпрд╛, рд╡рд┐рднрд┐рдиреНрди рдПрдирд┐рдореЗрд╢рдиреЛрдВ рдХреА рдПрдХ рдкреВрд░реА рдкрджрд╛рдиреБрдХреНрд░рдо рдпрд╣рд╛рдБ рдХрд╛рдо рдХрд░рддреА рд╣реИред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡рд╣ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕рднреА рд╕рдВрд╢реЛрдзрдХ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрдм рддрдХ рдХрд┐ рдЖрдк рдЕрдкрдиреЗ рджреГрд╢реНрдп рдХреЗ рд▓рд┐рдП рдЕрдиреНрдпрдерд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рди рдХрд░реЗрдВред рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдирд┐рд╖реНрдкрд╛рджрди рдХрд╛ рдПрдХ рдзрд╛рдЧрд╛ рд╣реИ (рдорд╛рди рд▓реЗрдВ рдХрд┐ рдпрд╣ рдореБрдЦреНрдп рд╣реИ), рдЬрд┐рд╕рдХреЗ рднреАрддрд░ рд╢рд░реАрд░ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдЗрд╕рдореЗрдВ .animation рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИ, рдЬрд┐рд╕реЗ рд╣рд░ рдмрд╛рд░ рдЬрд╛рдБрдЪрдиреЗ рдкрд░ рдПрдХ рдирдпрд╛ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред рдпрджрд┐ рд╕рдВрд╢реЛрдзрдХ рдПрдиреАрдореЗрд╢рди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ (AnimatableModifier рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХрд╛ рдЕрдиреБрдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ), рдФрд░ рдПрдиреАрдореЗрд╢рди рд╕реНрдЯреНрд░реАрдо рдХреЗ рд▓рд┐рдП рд╕рдХреНрд╖рдо рд╣реИ (рдХреБрдЫ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдиреАрдореЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рди рдХрд┐ .none рдпрд╛ nil), рдкрд░рд┐рд╡рд░реНрддрди рдПрдирд┐рдореЗрдЯреЗрдб рд╣реЛрдЧрд╛ред рдпрд╣ рд╡рд╣реА рд╣реИ рдЬреЛ рд╣рдо рдХрд░рддреЗ рд╣реИрдВ, </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">withAnimation {} рдмреНрд▓реЙрдХ рдореЗрдВ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ </font><font style="vertical-align: inherit;">рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдХреЛрдб рд╕рдВрд▓рдЧреНрди рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">- рд╣рдо рд╡рд░реНрддрдорд╛рди рдереНрд░реЗрдб рдореЗрдВ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдПрдиреАрдореЗрд╢рди рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рд╣рдо рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░рддреЗ рд╣реИрдВ</font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░ред рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, withAnimation {}, рдпрд╣ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд▓реЗрдирджреЗрди рд╕рдорддреБрд▓реНрдп рд╣реИ, рдФрд░ рдЗрд╕ рд▓реЗрдирджреЗрди рдореЗрдВ рдХрд┐рдП рдЧрдП рд╕рднреА рдкрд░рд┐рд╡рд░реНрддрди рдПрдирд┐рдореЗрдЯреЗрдб рд╣реЛрдВрдЧреЗред рдирддреАрдЬрддрди, рдПрдХ рд╣реА рд╕реНрдЯреНрд░реАрдо рдХреЗ рдЕрдВрджрд░, рдЗрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рд╕рднреА рдирд┐рд░реНрднрд░ рджреГрд╢реНрдп рдореЗрдВ рдЕрдиреБрд╡рд╛рдж рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЪрдХреНрд░ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдЗрди рд╡реНрдпреВ рдХреЗ рд╕рдВрд╢реЛрдзрдХ рдХреЛ рдПрдХ рдирдпрд╛ рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдПрдирд┐рдореЗрдЯрд┐рдбрдбрд╛рдЯрд╛ рдХреЗ рдордзреНрдпрд╡рд░реНрддреА рдореВрд▓реНрдпреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдиреАрдореЗрд╢рди рдХреЗ рдРрд╕реЗ рддрддреНрд╡ рд╣реИрдВ рдЬрд┐рдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЖрдк рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕реНрд▓рд╛рдЗрдбрд░ рдХреА рд╕реНрдерд┐рддрд┐ рдЖрдВрддрд░рд┐рдХ рддрдВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдЕрдкрдиреЗ рдЖрдк рдореЗрдВ рдПрдирд┐рдореЗрдЯреЗрдб рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдкреНрд░рдХрд╛рд░, withAnimation () рдкреНрд░рджрд░реНрд╢рди рдХреА рдЬрд╛ рд░рд╣реА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдиреАрдореЗрд╢рди рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИред рд▓реЗрдХрд┐рди рдХреБрдЫ рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдк .animation () рд╕рдВрд╢реЛрдзрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдПрдиреАрдореЗрд╢рди рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╕рдВрд╢реЛрдзрдХ рдФрд░ рдкреНрд░рдкрддреНрд░ рдЬреЛ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдкрд╛рд╕ рдХрд░ рджреЗрддреЗ рд╣реИрдВредред () (рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХреЛрдб рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рд╕рдм рдХреБрдЫ)ред () рдФрд░ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕реНрдЯреНрд░реАрдо рдПрдиреАрдореЗрд╢рди рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдиреЗ рдХреЗ рд╕рдордп рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореЗрд░реЗ рд╡реЗрд╡рдкреЛрдЬрд┐рд╢рди рд╕рдВрд╢реЛрдзрдХ рдореЗрдВ, рдореИрдВ рдмрд┐рд▓реНрдЯ-рдЗрди рдСрдлрд╕реЗрдЯ рдПрдиреАрдореЗрд╢рди рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП .animation (nil) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдореБрдЭреЗ рд╡рд░реНрддрдорд╛рди рд╕реНрдЯреНрд░реАрдо рдПрдиреАрдореЗрд╢рди рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрджреЗрд╢ рджреЗрддрд╛ рд╣реВрдВред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдВрдб рдХреИрдк рд╡рд╛рд▓реА рд╡рд╣реА рдХрд╣рд╛рдиреАред рдореБрдЭреЗ рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдХреЗ рдирд┐рд╖реНрдХрд░реНрд╖ рдХреА рдпрд╛рдж рджрд┐рд▓рд╛рддреЗ рд╣реИрдВред рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдорд╛рд░реА рдПрди рдореЗрдореЛрд░реА рдореЗрдВ рдПрди рд╡реЗрд╡рдкреЛрдЬрд┐рд╢рди рд╕рдВрд╢реЛрдзрдХ рд╕рдВрд░рдЪрдирд╛рдПрдВ рд╣реИрдВ, рдкреНрд░рддреНрдпреЗрдХ рддрд░рдВрдЧ рдХреЗ рд▓рд┐рдП рдПрдХред рдФрд░ рд╡реЗ рд╕рднреА рд╕рд┐рд╕реНрдЯрдо рдЯрд╛рдЗрдорд░ рд╕реЗ рдПрдХ рдирдпрд╛ рд╕реНрдерд╛рди рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдордп рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рддрд░рдВрдЧ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреНрд░рддреНрдпреЗрдХ рддрд░рдВрдЧ рдХреЗ рд▓рд┐рдП рдПрди рдПрдВрдб рдХреИрдк рднреА рд╣реИрдВред рдпрд╣ рд╕рд┐рд░реНрдл рдЗрддрдирд╛ рд╣реИ рдХрд┐ рдЙрдирдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рдХреЛ рдХрд┐рд╕реА рднреА рд╕рдордп рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЕрдЧрд░ {} рдмреНрд▓реЙрдХ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд╣реА рдмреНрд▓реЙрдХ рд╣рдореЗрдВ рдПрдХ рд╕реБрдЕрд░ рджреЗрддрд╛ рд╣реИред рджреГрд╢реНрдп рдХрд╛ рд▓реБрдкреНрдд рд╣реЛрдирд╛ рдФрд░ рджрд┐рдЦрдирд╛ рднреА рд╕реНрдЯреНрд░реАрдо рдХреЗ рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ .transition рд╕рдВрд╢реЛрдзрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╕реНрдерд┐рддрд┐ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рдмрд╛рдж рджреГрд╢реНрдп рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдФрд░ рдЧрд╛рдпрдм рд╣реЛрдиреЗ рдХреЛ рдЪреЗрддрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЖрдорддреМрд░ рдкрд░ .opacity рдХрд╛ рдЙрдкрдпреЛрдЧ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗред рдореЗрд░реЗ рд▓рд┐рдП рдЗрд╕рдХреЗ рдмрдЬрд╛рдп .lide рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рди рддреЛ рдХреЛрдИ рдореБрдЭреЗ рд╕реВрдЯ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдЗрд╕ рдПрдиреАрдореЗрд╢рди рдХреЛ рд░рджреНрдж рдХрд░ рджрд┐рдпрд╛,рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ .transition (ред рдШрдЯрдирд╛)ред</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпреБрдкреАрдбреАред </font><font style="vertical-align: inherit;">рдЬрдм рдореИрдВ рд▓реЗрдЦ рддреИрдпрд╛рд░ рдХрд░ рд░рд╣рд╛ рдерд╛, рддреЛ Xcode 11.4 рд╕рд╛рдордиреЗ рдЖрдпрд╛, рдЬрд┐рд╕рдореЗрдВ, рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдВрдХреНрд░рдордг рдХреЛ рдлрд┐рд░ рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рдХрдо рд╕реЗ рдХрдо рдЕрдм рдореИрдВрдиреЗ рдмрд┐рдирд╛ рдХрд┐рд╕реА рд╕рдорд╕реНрдпрд╛ рдХреЗ .transition (.identity) рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЯрд┐рдкреНрдкрдгреА рдХреА рдФрд░ рдЙрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг рдореБрдЭреЗ рдЗрд╕реЗ рдЬреЛрдбрд╝рдирд╛ рдкрдбрд╝рд╛ред</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдирд┐рдореЗрд╢рди рдЯрд╛рдЗрдорд┐рдВрдЧ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЕрдм рд╣рдо рдЕрдВрддрддрдГ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╕рд╡рд╛рд▓ рдкрд░ рдЖрддреЗ рд╣реИрдВ: рддрд░рдВрдЧреЛрдВ рдХреЛ рдХреИрд╕реЗ рддреЗрдЬ рдХрд┐рдпрд╛ рдЬрд╛рдП? </font><font style="vertical-align: inherit;">рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдореИрдВ рдмрд╣реБрдд рджреВрд░ рд╕реЗ рдЖрддрд╛ рд╣реВрдБред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджрд░рдЕрд╕рд▓, рдПрдиреАрдореЗрд╢рди рдХрд┐рд╕реА рджрд┐рдП рдЧрдП рдПрдиреАрдореЗрд╢рди рдХреА рдЧрддрд┐ рдХрд╛ рд╡рд░реНрдгрди рд╣реИред рд╣рдо рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдЕрдВрджрд░ рдмрд┐рдВрджреБ A рд╕реЗ рдмрд┐рдВрджреБ B рддрдХ рдХреЗ рдорд╛рд░реНрдЧ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди SwiftUI рдпрд╣ рддрдп рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХрдм рдФрд░ рдХрд┐рд╕ рддрд░рд╣ рдХрд╛ рдПрдирд┐рдореЗрдЯреАрдбреЗрдЯрд╛ рдорд╛рди рдЗрд╕реЗ рдкрд╛рд╕ рдХрд░реЗред рдРрд╕рд╛ рд╡рд╣ рдЯрд╛рдЗрдорд┐рдВрдЧ рд╡рдХреНрд░ рдХреЗ рд╕рд╛рде рдХрд░рддрд╛ рд╣реИред рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдо рдмрд┐рдВрджреБ A рдХреЛ рдЙрддреНрдкрддреНрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗрддреЗ рд╣реИрдВ, рдФрд░ рдмрд┐рдВрджреБ B рдХреЛ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ (1; 1) рдХреЗ рд╕рд╛рде рдмрд┐рдВрджреБ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддреЗ рд╣реИрдВред рдХреНрд╖реИрддрд┐рдЬ рд╣рдо рдмреАрддреЗ рд╣реБрдП рд╕рдордп рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВрдЧреЗ (рдмрд┐рдВрджреБ рдП рд╕реЗ рдмрд┐рдВрджреБ рдмреА рддрдХ рдЖрдВрджреЛрд▓рди рдХреЛ рдареАрдХ 1 рдпреВрдирд┐рдЯ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ)ред рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ - рджреВрд░реА рдПрдХ рдЗрдХрд╛рдИ рдХреЗ рдЕрдВрд╢реЛрдВ рдореЗрдВ рдпрд╛рддреНрд░рд╛ рдХреАред рд░реИрдЦрд┐рдХ рдПрдиреАрдореЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рд╣рдо рдкреНрд░рддреНрдпрдХреНрд╖ рд╣реЛрддреЗ рд╣реИрдВред рдпрджрд┐ рд╣рдо рдЖрдВрджреЛрд▓рди рдХреЛ рд╡рд░реНрддрдорд╛рди рдХреЗ рд╕рдорд╛рди рдереЛрдбрд╝рд╛ рд╕рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдкрд╣рд▓реЗ рд╣рдореЗрдВ рддреНрд╡рд░рдг рдкрд░ рдереЛрдбрд╝рд╛ рд╕рдордп рдмрд┐рддрд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ, рдФрд░ рдЕрдВрдд рдореЗрдВ рдмреНрд░реЗрдХрд┐рдВрдЧ рдкрд░ред рд╕рд╣реА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╡рдХреНрд░ рдХреЛ рдЦреАрдВрдЪрдХрд░ рдФрд░ рдорд╛рдирдХ рд▓реЛрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдЗрд╕рдХреА рдЧрддрд┐ рдПрдиреАрдореЗрд╢рди рдХреА рддреБрд▓рдирд╛ рдХрд░рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде рдЦреЗрд▓ рд╕рдХрддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдореЗрдВ, рдмреЗрдЬрд╝рд┐рдпрд░ рд╡рдХреНрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдПрдиреАрдореЗрд╢рди рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдпрд╣ (0; 0) рдкрд░ рд╢реБрд░реВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ (1; 1) рдкрд░ рд╕рдорд╛рдкреНрдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рд▓рд╛рдЗрди рдХреА рд╡рдХреНрд░рддрд╛ рдирд┐рдпрдВрддреНрд░рдг рдмрд┐рдВрджреБрдУрдВ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░реИрдЦрд┐рдХ рдЕрдВрддрд╣реАрди рдПрдиреАрдореЗрд╢рди рдХреЗ рдЕрдВрджрд░ рдиреЗрд╕реНрдЯреЗрдб рдЯрд╛рдЗрдорд┐рдВрдЧ рд╡рдХреНрд░</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреЛ, рд░реИрдЦрд┐рдХ рд▓реВрдкреЗрдб рдПрдиреАрдореЗрд╢рди рдХреЗ рдЕрдВрджрд░ рдкреНрд░рддреНрдпреЗрдХ рддрд░рдВрдЧ (рд╕рд╣рдЬрддрд╛) рдХреЗ рддреНрд╡рд░рд┐рдд рдЖрдВрджреЛрд▓рди рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рдХреНрдпрд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рдЯреВрдЯреЗ-рдлреВрдЯреЗ рд╡рд┐рдХрд▓реНрдк рдЬреЛ рдореИрдВ рдЕрдкрдиреЗ рд╕рд╛рде рд▓рд╛ рд╕рдХрддрд╛ рдерд╛, рд╡рд╣ рдерд╛ рдХрд┐ рдореИрдВ рдЕрдкрдиреА рдЯрд╛рдЗрдорд┐рдВрдЧ рд╡рдХреНрд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реВрдВ, рдФрд░ рд╕рдордп рдХреЗ рд░реИрдЦрд┐рдХ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХреА .easeIn рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░реВрдВред </font><font style="vertical-align: inherit;">рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рд╕реЗ, рдЖрдк рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕рдордЭ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд┐рдЪрд╛рд░ рд╕рд░рд▓ рд╣реИред рд╣рдо рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ рд╡рд░реНрдЧ рдмрдирд╛рдПрдВрдЧреЗ, рдЬреЛ рдХрд┐ рдкрде рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрдЧрд╛ - рдмреЗрдЬрд┐рдпрд░ рд╡рдХреНрд░ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╣рдо рдмрд┐рдВрджреБ рдП рд╕реЗ рдмрд┐рдВрджреБ рдмреА рддрдХ рдХреА рджреВрд░реА рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВрдЧреЗ, рдЬрд┐рд╕реЗ рд╕рдордп рдкрд░ рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдмрд┐рдВрджреБ рдкрд░ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдФрд░ рдЗрд╕реА рддрд░рд╣ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╡рд╛рд▓реЗ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдврд╛рдВрдЪреЗ рдореЗрдВ рдПрдиреАрдореЗрд╢рди рдмрд┐рд▓реНрдХреБрд▓ рдЗрд╕реА рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдПрдХ рдЯрд╛рдЗрдорд┐рдВрдЧ рдХрд░реНрд╡, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕реЗрдХрдВрдб рдФрд░ рдорд┐рд▓реАрд╕реЗрдХрдВрдб (рдЬреЛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рдкреНрд░рд╡рд╛рд╣рд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдлрд┐рд░ рднреА, рд░реИрдЦрд┐рдХ рд░реВрдк рд╕реЗ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреВрд░реА рдХреЗ рдЕрдВрд╢реЛрдВ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ (рдЕрдзрд┐рдХ рд╕рдЯреАрдХ рд░реВрдк рд╕реЗ, рдПрдирд┐рдореЗрдЯреЗрдб рдЦрдВрдб рдХреЗ рдЕрдВрд╢ - рдПрдирд┐рдореЗрдЯреАрдбрд╛рдЯрд╛ рд╡реЗрдХреНрдЯрд░, рдЬреЛ рдХрд┐рдП рдЧрдП рдкрд░рд┐рд╡рд░реНрддрди рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ)ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдБ рдореЗрд░рд╛ рдкрд╣рд▓рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИ:</font></font><br>
<br>
<pre><code class="swift hljs">    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getActualPosition</span><span class="hljs-params">(of position: CGFloat)</span></span> -&gt; <span class="hljs-type">CGFloat</span>{
        <span class="hljs-keyword">let</span> correctPosition = <span class="hljs-built_in">max</span>(<span class="hljs-built_in">min</span>(position, <span class="hljs-number">1</span>), <span class="hljs-number">0</span>) / duration
        <span class="hljs-keyword">let</span> trimmingCurve = <span class="hljs-type">TimingCurve</span>.superEaseInPath
        <span class="hljs-keyword">if</span> correctPosition &lt; <span class="hljs-number">0.0000001</span>{
            <span class="hljs-keyword">let</span> reversedCurve = <span class="hljs-type">Path</span>(<span class="hljs-type">UIBezierPath</span>(cgPath: trimmingCurve.cgPath).reversing().cgPath)
            <span class="hljs-comment">//trim to start point is impossible, so reverce the curve and get last point</span>
            <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> point = reversedCurve.currentPoint <span class="hljs-keyword">else</span>{<span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"cant get current timing curve start point"</span>)}
            <span class="hljs-keyword">return</span> point.y<font></font>
        }<font></font>
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> point = trimmingCurve.trimmedPath(from: <span class="hljs-number">0</span>, to: correctPosition).currentPoint <span class="hljs-keyword">else</span>{<span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"cant get current timing curve point at \(position)"</span>)}
        <span class="hljs-keyword">return</span> point.y * <span class="hljs-keyword">self</span>.duration<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдореИрдВ рдереЛрдбрд╝рд╛ рдореВрд░реНрдЦ рдерд╛ред рдкрд░рд┐рднрд╛рд╖рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдореБрдЭреЗ X рдХреЗ рджрд┐рдП рдЧрдП рдорд╛рди рдХреЗ рдЕрдиреБрд░реВрдк рд╡рдХреНрд░ рдкрд░ рдПрдХ рдмрд┐рдВрджреБ рдвреВрдВрдврдирд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ Y рдкрд░ рд╡рд╛рдкрд╕ рдХрд░рдирд╛ рд╣реИред рдореБрдЭреЗ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорд╛рдирдХ рдирд┐рд░реНрдорд┐рдд рд╡рд┐рдзрд┐ рдпрд╛ рдПрдХ рд▓реЛрдХрдкреНрд░рд┐рдп рдкреИрдЯрд░реНрди рдирд╣реАрдВ рдорд┐рд▓рд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдЗрди рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдореМрдЬреВрджрд╛ рдЯреНрд░рд┐рдо рд╡рд┐рдзрд┐ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред ) рдореИрдВрдиреЗ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдореИрдВ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдкрд░ рдкреБрдирд░реНрд╡рд┐рдЪрд╛рд░ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ, рдФрд░ рдпрд╛рддреНрд░рд╛ рдХреА рдЧрдИ рджреВрд░реА рдХреЗ рдЕрдВрд╢ рдХреЗ рдЕрдиреБрд░реВрдк рдкрде рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдХреЗ рд╡рд╛рдВрдЫрд┐рдд рдмрд┐рдВрджреБ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред рд╢реВрдиреНрдп рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╡рд┐рдзрд┐ 0 рд▓реМрдЯреЗрдЧреА, 1 рдХреЗ рд▓рд┐рдП рдпрд╣ 1 рд▓реМрдЯреЗрдЧреА, рдареАрдХ рд╣реИ, рдмреАрдЪ рдореЗрдВ, рд╢рд╛рдпрдж, рд╕рдм рдХреБрдЫ рднреА рд▓рдЧрднрдЧ рд╕рд╣реА рд╣реЛрдЧрд╛ред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореБрдЭреЗ рдкрддрд╛ рдерд╛ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХрд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдмрд╣реБрдд рд╕рдЯреАрдХ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рджреЗрдЧрд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╕рдорд╕реНрдпрд╛ рдХреА рдЧрдВрднреАрд░рддрд╛ рдмрд╛рдж рдореЗрдВ рд╕рд╛рдордиреЗ рдЖрдИ рдЬрдм рдореИрдВрдиреЗ рдорд╛рдирдХ рддрд░реАрдХреЗ рд╕реЗ рдПрдХ рд╣реА рдПрдиреАрдореЗрд╢рди рдХреЛ рдкреБрди: рдкреЗрд╢ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред рдореБрдЭреЗ рдЖрд╢реНрдЪрд░реНрдп рд╣реБрдЖ рдХрд┐ рдпрд╣ рдХрд┐рддрдирд╛ рдЕрд▓рдЧ рд╣реИ, рдФрд░ рдЧреНрд░рд╛рдл рдкрд░ рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдЕрдВрдХ рдореВрд▓ рд╡рдХреНрд░ рд╕реЗ рдХрд┐рддрдиреА рджреВрд░ рд╣реЛрдВрдЧреЗред рдирддреАрдЬрд╛ рдореБрдЭреЗ рдЦреБрд╢ рдирд╣реАрдВ рдХрд┐рдпрд╛ред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/ed/s-/fleds-cdj4f8ellnui32gn-kiyk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рди рдХреЗрд╡рд▓ рд╡рд╛рдВрдЫрд┐рдд рд╡рдХреНрд░ рд╕реЗ рджреВрд░ рдХреЗ рдмрд┐рдВрджреБ рд╣реИрдВ, рд╡рдХреНрд░ рдХреА рдкреНрд░рдХреГрддрд┐ рдмрд╣реБрдд рд╡рд┐рдХреГрдд рд╣реИред рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд┐рдВрдХ рд╣реИ, рдЬрд┐рд╕рдХреА рдореБрдЭреЗ рдмрд┐рд▓реНрдХреБрд▓ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред рдирддреАрдЬрддрди, рдореБрдЭреЗ рдЕрднреА рднреА рдПрдХ рд╕рдЯреАрдХ рддрд░реАрдХреЗ рд╕реЗ рдПрдХ рдмреЗрдЬрд┐рдпрд░ рд╡рдХреНрд░ рдкрд░ рдПрдХ рдмрд┐рдВрджреБ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдирд╛ рдерд╛, рдХреЗрд╡рд▓ рдПрдХ рд╕рдордиреНрд╡рдп рдХреЛ рдЬрд╛рдирддреЗ рд╣реБрдП:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореБрдЭреЗ рдореЗрдореЛрд░реА рдХреЛ рдмрд╣реБрдд рд╕реЗ рд╕реЗрдЧрдореЗрдВрдЯ рдореЗрдВ рд╕реНрдЯреЛрд░ рдХрд░рдирд╛ рдерд╛, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдЫреЛрд░ рджрд┐рдП рдЧрдП рдХрд░реНрд╡ рдкрд░ рдкрдбрд╝реЗ рдереЗред рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде рджрд┐рдП рдЧрдП рдПрдХреНрд╕ рджреНрд╡рд╛рд░рд╛ рд╡рд╛рдИ рдХреЗ рд▓рд┐рдП рдПрдХ рдЦреЛрдЬ рдЗрд╕реА рдЦрдВрдб рдХреЗ рд▓рд┐рдП рдПрдХ рдЦреЛрдЬ рд╣реИ, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЖрдзреЗ рдореЗрдВ рдЗрд╕рдХрд╛ рд╡рд┐рднрд╛рдЬрди, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЦрдВрдб рдХреА рд╕реАрдорд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╡рд╛рдВрдЫрд┐рдд рдмрд┐рдВрджреБ рдХреЗ рдХрд░реАрдм рдкрд░реНрдпрд╛рдкреНрдд рд░реВрдк рд╕реЗ рдирд┐рд╣рд┐рдд рд╣реИред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдЗрд╕ рдЦрдВрдб рдкрд░ рдкрдбрд╝реЗ рд╣реБрдП рдЖрд╡рд╢реНрдпрдХ рдПрдХреНрд╕ рдХреЛрдСрд░реНрдбрд┐рдиреЗрдЯ рдХреЗ рд╕рд╛рде рдмрд┐рдВрджреБ рдкрд╛рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рд╡рд╛рдИ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рджреЗрддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдк рдПрдХ рджрд┐рдП рдЧрдП рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдмреЗрдЬрд┐рдпрд░ рд╡рдХреНрд░ рдкрд░ рд╕реНрдерд┐рдд рдмрд┐рдВрджреБ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд╕рд░рд▓ рддрд░реАрдХреЗ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд▓рд┐рдЦреЗрдВред рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХрдИ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдирддреАрдЬрддрди, рдЕрдВрдХ рдЪрд╛рд░реНрдЯ рдХреЗ рдмрд╣реБрдд рдХрд░реАрдм рд╣реИрдВ:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wx/bk/qi/wxbkqitda0fmf516tl1vjarqgoq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВрдиреЗ рдирд┐рдпрдВрддреНрд░рдг рдмрд┐рдВрджреБрдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯрд╛рдЗрдорд┐рдВрдЧ рд╡рдХреНрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд┐рдВрдЧрд▓рдЯрди рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдпрд╛ рдФрд░ рдЙрди рдЦрдВрдбреЛрдВ рдХреА рд╕рд░рдгреА рдХреЛ рдХреИрд╢ рдХрд┐рдпрд╛, рдЬрд┐рдирдХреЗ рд╕рд╛рде Y рдХреЛ рдЦреЛрдЬрд╛ рдЧрдпрд╛ред рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╕рднреА рдХреЛ рдореБрдЭреЗ рд╡рдХреНрд░ рдкрд░ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдмрд┐рдВрджреБ рдЦреЛрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЙрд╕ рдЦрдВрдб рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рдпрд╣ рдмрд┐рдВрджреБ рдЭреВрда рд╣реЛрдЧрд╛, рдЗрд╕реЗ рд╣рд┐рд╕реНрд╕реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░реЗрдВред рдЬрдм рддрдХ рдЦрдВрдб рдХреЗ рд╕рд┐рд░реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдЗрд╕ рдмрд┐рдВрджреБ рдХреЗ рдХрд░реАрдм рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ, рддрдм рддрдХ рджрд┐рдП рдЧрдП рддреНрд░реБрдЯрд┐ рдореЗрдВ рдЧрд┐рд░ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рджрд┐рдП рдЧрдП X рдХреЗ рд╕рд╛рде Y рдХреЗ рдореВрд▓реНрдп рдХреЛ рд░реИрдЦрд┐рдХ рд░реВрдк рд╕реЗ рдкреНрд░рдХреНрд╖реЗрдкрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЗрд╕ рдЦрдВрдб рджреНрд╡рд╛рд░рд╛ рд╡рдХреНрд░ рдХрд╛ рднрд╛рдЧ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИред рдореИрдВ рдпрд╣ рджрд╛рд╡рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рдХрд┐ рдпрд╣ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ, рдФрд░ рдпрд╣ рд╕рднреА рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред рдлрд┐рд░ рд╕реЗ, рдпрджрд┐ рдЖрдк рдмреЗрд╣рддрд░ рддрд░реАрдХреЗ рдЬрд╛рдирддреЗ рд╣реИрдВ рддреЛ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд▓рд┐рдЦреЗрдВред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рддрд░рд╣ рдХреЗ рдЙрдкрдХрд░рдг рдХреА рдорджрдж рд╕реЗ, рд░реИрдЦрд┐рдХ рдПрдиреАрдореЗрд╢рди рдХрд╛ рдЧреИрд░-рд░реИрдЦрд┐рдХ рдореЗрдВ рд░реВрдкрд╛рдВрддрд░рдг рд╕рд░рд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╕рднреА рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рджреЛ рдирд┐рдпрдВрддреНрд░рдг рдмрд┐рдВрджреБрдУрдВ рджреНрд╡рд╛рд░рд╛ рд╡рдХреНрд░ рдХрд╛ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рдЬрд╛рдП, рдФрд░ рдЗрд╕ рд╡рдХреНрд░ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЦрдВрдб рдкрд░ рд╕реНрдерд┐рддрд┐ рдХреА рдкреБрдирд░реНрдЧрдгрдирд╛ рдХреА рдЬрд╛рдПред </font><font style="vertical-align: inherit;">рдпрджрд┐ рд╡рд┐рднрд┐рдиреНрди рдЕрд╡рдзрд┐рдпреЛрдВ рдХреЗ рдПрдиреАрдореЗрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рд╣рдо рдЕрднреА рднреА рдПрдХреНрд╕-рд╕рдордиреНрд╡рдп рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдЧреБрдгрд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдЗрдХрд╛рдИ рд╡рдХреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред</font></font><br>
<br>
<pre><code class="swift hljs">        
<span class="hljs-keyword">self</span>.timing = <span class="hljs-type">TimingCurve</span>.superEaseIn(duration: <span class="hljs-number">1</span>)
<span class="hljs-keyword">let</span> animatedPosition = timing.getY(onX: currentPosition)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдХреИрд╕реЗ рдПрдиреАрдореЗрд╢рди рджрд┐рдЦрддрд╛ рд╣реИ, рдХреА рддрд░рд╣ рд╣рдорд╛рд░реЗ рд╕рдордп рдХреА рдЕрд╡рд╕реНрдерд╛ рдХреЗ рд╕рд╛рде рд╣реИ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vf/f0/fe/vff0fe07bgvlvqhhuok5vy_w8ga.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкреВрд░реНрдг рдХреЛрдб рдХреЗ рд▓рд┐рдП, рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , TimingCurveView рдлрд╝рд╛рдЗрд▓ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк 100% рд╕рдордЭ рдЬрд╛рдПрдВрдЧреЗ рдХрд┐ рдПрдиреАрдореЗрд╢рди рдЯрд╛рдЗрдорд┐рдВрдЧ рдХреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдХреИрд╕реЗ рдХреА рдЬрд╛рддреА рд╣реИред </font><font style="vertical-align: inherit;">рд╡реИрд╕реЗ, рдЖрдк рдЗрд╕ рдЬреНрдЮрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ SwiftUI рдЖрдкрдХреЛ рд╕рдордп-рд╕реАрдорд╛ () рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рдмрд┐рдВрджреБрдУрдВ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рд╕рдордп рд╡рдХреНрд░ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдФрд░ рдХрд┐рд╕реА рдЕрдиреНрдп рдПрдиреАрдореЗрд╢рди рдХреА рддрд░рд╣ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдХреНрд░рдордг</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╕рд╣рди рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдЕрдВрддрд╣реАрди рдПрдиреАрдореЗрд╢рди рд╣реИред рдпрд╣ рдХреЗрд╡рд▓ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд░рд╣рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдХреИрд╕реЗ рдЪрд╛рд▓реВ рдФрд░ рдмрдВрдж рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЛ рдПрдирд┐рдореЗрдЯ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдПрдиреАрдореЗрд╢рди рдмреНрд▓реЙрдХ рдХреЛ рдХреЗрд╡рд▓ рдЙрд╕ рд╕реНрдерд╛рди рдкрд░ рджрд┐рдЦрд╛рдИ рджреЗрдирд╛ рд╣реИ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЪрд╛рд▓реВ рд╣реИ, рд▓реЗрдХрд┐рди рдерд┐рдПрдЯрд░ рдореЗрдВ рдкрд░реНрджреЗ рдХреА рддрд░рд╣, рдкрд░реНрджреЗ рдХреЛ рдЗрд╕рд╕реЗ рд╡рд╛рдкрд╕ рдЦреАрдВрдЪ рд▓рд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдпрджрд┐ рд╣рдо рдПрдиреАрдореЗрд╢рди рдХреЗ рдЕрдВрджрд░ рддрд░рдВрдЧреЛрдВ рдХреА рдЧрддрд┐ рдХреЗ рд╕рд╛рде рдкрд░реНрджреЗ рдХреА рдЧрддрд┐ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдкрд░реНрджреЗ рдореЗрдВ рд╣реА рдкреГрд╖реНрдарднреВрдорд┐ рд░рдВрдЧ рд╕реЗ рд╡рд░реНрддрдорд╛рди рдШрдЯрдирд╛ рддрд░рдВрдЧ рдХреЗ рд░рдВрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рдврд╛рд▓ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдПрдХ рджреГрд╢реНрдп рдкреНрд░рднрд╛рд╡ рдорд┐рд▓рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдпрд╣ рдкрд░реНрджрд╛ рдкрд╣рд▓реА рд░реЛрд▓рд┐рдВрдЧ рд▓рд╣рд░ рд╣реИред рдЧрддрд┐ рдХреА рдЧрддрд┐ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рддрд░рдВрдЧ рдХреЗ рдЖрдВрджреЛрд▓рди рдХреЛ рдПрдирд┐рдореЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╕ рдЙрд╕реА рд╕рдордпрд░реЗрдЦрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рд╣рдо рдЕрдм рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИред</font></font><br>
<br>
<pre><code class="swift hljs">   <span class="hljs-keyword">let</span> animation = <span class="hljs-type">Animation</span>.timingCurve(<span class="hljs-type">Double</span>(<span class="hljs-type">TimingCurve</span>.control.point1.x),
                                <span class="hljs-type">Double</span>(<span class="hljs-type">TimingCurve</span>.control.point1.y),
                                <span class="hljs-type">Double</span>(<span class="hljs-type">TimingCurve</span>.control.point2.x),
                                <span class="hljs-type">Double</span>(<span class="hljs-type">TimingCurve</span>.control.point2.y),<font></font>
                                duration: <span class="hljs-number">1</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдирд┐рдореЗрд╢рди.рдЯрд╛рдЗрдорд┐рдВрдЧ рдХрд░реНрд╡ (x: y :) рдЖрдкрдХреЛ рдмреЗрдЬрд╝рд┐рдпрд░ рдХрд░реНрд╡реНрд╕ рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рдмрд┐рдВрджреБрдУрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЕрдкрдиреА рд╕реНрд╡рдпрдВ рдХреА рдПрдиреАрдореЗрд╢рди рдЯрд╛рдЗрдорд┐рдВрдЧ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЖрдЙрдЯрдкреБрдЯ рдкрд░, рд╣рдореЗрдВ рдПрдХ рдкрд░рд┐рдЪрд┐рдд рдПрдиреАрдореЗрд╢рди рдСрдмреНрдЬреЗрдХреНрдЯ рдорд┐рд▓рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдкрд░рд┐рдЪрд┐рдд .linear (рдЕрд╡рдзрд┐: 1), рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рдмрд┐рдирд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдпрд╣ рджреЗрдЦрддреЗ рд╣реБрдП рдХрд┐ рдореИрдВ рддрд░рдВрдЧ рдПрдиреАрдореЗрд╢рди рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрдХреБрд▓ рдЙрд╕реА рдирд┐рдпрдВрддреНрд░рдг рдмрд┐рдВрджреБ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рдПрдиреАрдореЗрд╢рди рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╣реЛрдЧрд╛ред</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдб рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдирд╛ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реЛрдЧрд╛ ...</font></font></b>
                        <div class="spoiler_text">   .<br>
<br>
 ,           ,    ,          тАж     ,     ,     .  -  ,        тАФ    .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдиреАрдореЗрд╢рди рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдирд╛ рдЙрд╕реА рддрд░рд╣ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдХреЗрд╡рд▓ рдПрдиреАрдореЗрд╢рди рдмреНрд▓реЙрдХ рдкрд░ рдкрд░реНрджреЗ рдХреЛ рд░реЗрдВрдЧрдирд╛ рдЪрд╛рд╣рд┐рдП, рдзреАрд░реЗ-рдзреАрд░реЗ рдЗрд╕реЗ рдмрдВрдж рдХрд░рдирд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд╣рд▓реА рд╕рдорд╕реНрдпрд╛ рдЙрд╕ рд╕рдордп рдкреИрджрд╛ рд╣реБрдИ рдЬрдм рдореБрдЭреЗ рдкрд░реНрджреЗ рдХреЗ рд░рдВрдЧ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдиреАрдореЗрд╢рди рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред </font><font style="vertical-align: inherit;">рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдПрдХ ObservableObject рдмрдирд╛рдпрд╛, рдЬрд┐рд╕реЗ рдореИрдВ рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдЕрдВрджрд░ рд╕реЗ рдЧреБрдЬрд░рддрд╛ рд╣реВрдВ, рдФрд░ рдЬрд┐рд╕реЗ рдореИрдВ AnimatableData рд╕реЗрдЯрд░ рдХреЗ рдЕрдВрджрд░ рдмрджрд▓рддрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рдпрд╣ рд╕рдордЭрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ 60 рдмрд╛рд░ рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб @ рд╕рдВрдкрддреНрддрд┐ рдХреЛ рдмрджрд▓рдирд╛ рдЖрдкрдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╣реИ рдХрд┐ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд┐рд╕реА рдмреЙрдбреА рдмреНрд▓реЙрдХ рдХреЗ рдЕрдВрджрд░ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ </font><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдмрджрд▓реЗрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬрдм рдПрдиреАрдореЗрд╢рди рдХреА рд╕реНрдерд┐рддрд┐ рдмрджрд▓ рдЬрд╛рддреА рд╣реИ рддреЛ рд╣рдореЗрдВ рдХреБрдЫ рднреА рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдореЗрдВ рдЬрд░реВрд░рдд рд╣реИ, рддреЛ рд╣рдо рдХрд┐рд╕реА рднреА рд╕рдордп рдПрдиреАрдореЗрд╢рди рдХреА рд╕реНрдерд┐рддрд┐ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br>
<br>
<pre><code class="swift hljs">  <span class="hljs-keyword">public</span> <span class="hljs-keyword">var</span> animatableData: <span class="hljs-type">CGFloat</span> {
        <span class="hljs-keyword">get</span> { time}
        <span class="hljs-keyword">set</span> {
            <span class="hljs-keyword">if</span> animationHandler.isStarted{
                <span class="hljs-keyword">self</span>.time = newValue
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.time != <span class="hljs-keyword">self</span>.animationHandler.currentAnimationPosition{
                    <span class="hljs-keyword">self</span>.animationHandler.currentAnimationPosition = <span class="hljs-keyword">self</span>.time<font></font>
                }<font></font>
            }<font></font>
            <span class="hljs-keyword">let</span> currentTime = newValue - <span class="hljs-type">CGFloat</span>(<span class="hljs-type">Int</span>(newValue))
            <span class="hljs-keyword">self</span>.currentPosition = <span class="hljs-type">SharpWavePosition</span>.calculate(forWave: wave.ind, ofWaves: wave.totalWavesCount, overTime: currentTime)
            <span class="hljs-keyword">if</span> currentPosition &lt; <span class="hljs-number">0.01</span>{<font></font>
                animationHandler.currentWaveBaseColor = wave.baseColor<font></font>
            }<font></font>
        }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣реА рдХрд╛рд░рдг рд╣реИ рдХрд┐ рдореИрдВрдиреЗ рдПрдирд┐рдореЗрд╢рдирд╣реИрдВрдбрд▓рд░ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП SharpRainbowView рд╕рд╛рдЗрди рдЕрдк рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ: </font></font><br>
<br>
<pre><code class="swift hljs">   <span class="hljs-comment">//@ObservedObject</span>
    <span class="hljs-keyword">var</span> animationHandler: <span class="hljs-type">AnimationHandler</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрди рдкрд░реНрджреЛрдВ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ .clipped () рдкрд░ рдЯрд┐рдкреНрдкрдгреА рдХрд░рдХреЗ рд╡реНрдпреВ рдХреЗ рдмрд╛рд╣рд░ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ рдЙрд╕рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдЪрд╛рд▓реВ рдХрд░ рджреВрдВрдЧрд╛ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП, рдПрдиреАрдореЗрд╢рди рдХреЗ рдКрдкрд░ рдкрд░реНрджреЗ рдХреЛ рдереЛрдбрд╝рд╛ рдЖрдЧреЗ рдмрдврд╝рд╛рдКрдВрдЧрд╛ред рдЕрдм рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ, рд╣реИ рдирд╛? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6s/uf/0k/6suf0klfghhgxj95qfnrxd29zpe.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд░реНрджреЗ рдХреЛ рдЫреЛрдЯрд╛ рд╣реЛрдирд╛ рдерд╛ рддрд╛рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд▓рд╣рд░ рджреНрд╡рд╛рд░рд╛ рдпрд╛рддреНрд░рд╛ рдХреА рдЧрдИ рдкрде рдФрд░ рдкрд░реНрджреЗ рдХрд╛ рд╕рдВрдпреЛрдЧ рд╣реЛ (рдЕрдиреНрдпрдерд╛ рдпрд╣ рдПрдХ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдПрдиреАрдореЗрд╢рди рдХреЛ рдЪрд╛рд▓реВ рдХрд░реЗрдЧрд╛), рд▓реЗрдХрд┐рди рд╕рд╛рде рд╣реА, рд╡рд╣ рд╕реНрдХреНрд░реАрди рд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЧрд╛рдпрдм рд╣реЛ рдЧрдИред рдЗрд╕реА рд╕рдордп, рдкрд░реНрджреЗ рдХреЛ рддреАрди рд░рдВрдЧреЛрдВ рдХреЗ рдврд╛рд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдмрдВрдж рдкрд░реНрджреЗ рдкрд░ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред рдЗрд╕рдХреА рд╡рдЬрд╣ рд▓рдВрдмреА рдкреВрдВрдЫ рд╣реИ рдЬреЛ рдореБрдЭреЗ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдмрд╣реБрдд рдкрд╕рдВрдж рдЖрдИ рдереАред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдкрд╣рд▓реА рд▓рд╣рд░ рд╕рдВрдЪрд░рд┐рдд рд╕рд░рдгреА рдХреЗ рдЕрдВрддрд┐рдо рдФрд░ рдкрд╣рд▓реЗ рд░рдВрдЧреЛрдВ рдХрд╛ рдврд╛рд▓ рд╣реИред рдЙрдирдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рдкреГрд╖реНрдарднреВрдорд┐ рдХреЗ рд░рдВрдЧ рд╕реЗ рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдкрд░реНрджреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред рдкрд░реНрджреЗ рдХреЛ рджреЛ-рдЯреЛрди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреГрд╖реНрдарднреВрдорд┐ рд░рдВрдЧ рд╕реЗ рдкрд╣рд▓реА рд▓рд╣рд░ рдХреЗ рдЖрдзрд╛рд░ рд░рдВрдЧ рддрдХ, рдкрд░реНрджреЗ рдХреА рд▓рдВрдмрд╛рдИ рдиреЗ рдореБрдЭреЗ рд░реЛрдХрд╛ред рдпрд╣ рдХреЗрд╡рд▓ рдкрд╣рд▓реА рд▓рд╣рд░ рдХреА рд▓рдВрдмреА рдкреВрдВрдЫ рдХреЛ рдУрд╡рд░рд▓реИрдк рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдПрдХ рд░рдВрдЧ рдХреА рд╕реАрдорд╛ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рджреВрд╕рд░реЗ рдХреА рдкреВрдВрдЫред рдЗрд╕рд▓рд┐рдП, рдореБрдЭреЗ рдкрд░реНрджреЗ рдХреЛ рддреАрди-рд░рдВрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдмрдирд╛рдирд╛ рдерд╛ - рдкрд╣рд▓реЗ рдкреГрд╖реНрдарднреВрдорд┐ рд╕реЗ рдЖрдЦрд┐рд░реА рд▓рд╣рд░ рдХреЗ рд░рдВрдЧ рддрдХ, рдФрд░ рдлрд┐рд░ рдЖрдЦрд┐рд░реА рд▓рд╣рд░ рдХреЗ рд░рдВрдЧ рд╕реЗ рдкрд╣рд▓реА рддрдХред рдлрд┐рд░ рдкрд╣рд▓реА рд▓рд╣рд░ рдХреА рдкреВрдВрдЫ рдкрд░реНрджреЗ рдХреА рд╕реАрдорд╛ рдХреЗ рд╕рд╛рде рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдлрд┐рдЯ рд╣реЛрддреА рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓рдЧрднрдЧ рдЙрдиреНрд╣реАрдВ рдХрд╛рд░рдгреЛрдВ рд╕реЗ, рдЙрдиреНрд╣реЛрдВрдиреЗ рдмрдВрдж рдкрд░реНрджреЗ рдХреЛ рднреА рддрд┐рд░рдВрдЧрд╛ рдмрдирд╛ рджрд┐рдпрд╛ред рдЕрдиреНрдпрдерд╛, рд╕реАрдорд╛ рдЕрдкреНрд░рд╛рдХреГрддрд┐рдХ рджрд┐рдЦрддреА рдереАред рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдкрд╣рд▓реЗ "рд▓рд╣рд░" (рдФрд░ рдЕрдм рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ Transition.truncate рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдкрд░реНрджрд╛ рд╣реИ) рдЫреЛрдЯрд╛ рд╣реЛ рдЧрдпрд╛ред рдФрд░ рдпрджреНрдпрдкрд┐ рдпрд╣ рдкрд╣рд▓реА рд▓рд╣рд░ рдХреЗ рд╕рд╛рде рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд░рддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддред рддреНрд╡рд░рд┐рдд, рдФрд░ рд░реИрдЦрд┐рдХ рдирд╣реАрдВ, рдЗрд╕рдХреА рдЪреМрдбрд╝рд╛рдИ рд╕рдордп рдХреЗ рд╕рд╛рде рдирд╣реАрдВ рдмрджрд▓рддреА, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдмрд╛рдж рдХреА рддрд░рдВрдЧреЛрдВ рдХреА рдЪреМрдбрд╝рд╛рдИ рдиреЗрддреНрд░рд╣реАрди рдмрдврд╝ рдЬрд╛рддреА рд╣реИред рдпрд╣ рдкрд░реНрджреЗ рдХреА рдЪреМрдбрд╝рд╛рдИ рдХреЛ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдмрджрд▓рдХрд░ рд╣рд░рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЖрд▓рд╕реА рдерд╛ред рдЖрдЗрдП рдЗрд╕реЗ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд╣реЛрдорд╡рд░реНрдХ рдорд╛рдиреЗрдВ рдЬреЛ рдЗрди рддрдВрддреНрд░реЛрдВ рдореЗрдВ рдЧреЛрддрд╛ рд▓рдЧрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдХреЛрдб рдзреВрдореНрд░рдкрд╛рди рдХрд░рддреЗ рд╣реИрдВ (рдореИрдВ рдРрд╕реЗ рд▓реЛрдЧреЛрдВ рд╕реЗ рдкрд╣рд▓реЗ рд╕реЗ рдорд╛рдлреА рдорд╛рдВрдЧрддрд╛ рд╣реВрдВ, рдореЗрд░реЗ рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдирд┐рд╢рд╛рди рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рднреНрд░рдорд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ)ред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдЕрд╕рдлрд▓ рд╕рдордп рдкрд░ рдмрдЯрди рджрдмрд╛рддреЗ рд╣реИрдВ, рддреЛ рдмрдВрдж рдкрд░реНрджреЗ рдореБрд╢реНрдХрд┐рд▓ рд╕реЗ рдЕрдЧрд▓реА рд▓рд╣рд░ рдХреЛ рдХрд╡рд░ рдХрд░реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">рдЖрдк рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рд╛рде рджреГрд╢реНрдп рдХреЛ рдЫрд┐рдкрд╛рдиреЗ рдореЗрдВ рдереЛрдбрд╝реА рджреЗрд░реА рдХрд╛ рдкрд░рд┐рдЪрдп рджреЗрдХрд░ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдиреАрдореЗрд╢рди рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИ, рд╣рдореЗрдВ рдмрд╕ рд╕рдВрдХреНрд░рдордг рдХреА рд╢реБрд░реБрдЖрдд рдХреЛ рдереЛрдбрд╝рд╛ рд╕реНрдердЧрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдЕрдВрддрд┐рдо рд▓рд╣рд░ рд╣рдореЗрд╢рд╛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рджрд┐рдЦрд╛рдИ рдЬрд╛рдПрдЧреАред</font></font><br>
<br>
<pre><code class="swift hljs">    <span class="hljs-type">Text</span>(<span class="hljs-string">"toggle animation"</span>).onTapGesture {<font></font>
                withAnimation(){<font></font>
                    <span class="hljs-keyword">var</span> delay: <span class="hljs-type">Double</span> = <span class="hljs-number">0</span>
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.isShown{
                        <span class="hljs-keyword">let</span> waveChangeTime: <span class="hljs-type">Double</span> = <span class="hljs-type">Double</span>(<span class="hljs-number">1</span>) /  <span class="hljs-type">Double</span>(<span class="hljs-keyword">self</span>.animationHandler.rainbowColors.<span class="hljs-built_in">count</span>)
                        <span class="hljs-keyword">let</span> currentTime = <span class="hljs-type">Double</span>(<span class="hljs-keyword">self</span>.animationHandler.currentAnimationPosition)
                        <span class="hljs-keyword">let</span> wavesPassed = <span class="hljs-type">Double</span>(<span class="hljs-type">Int</span>(currentTime / waveChangeTime))<font></font>
                        delay =  (wavesPassed + <span class="hljs-number">1</span>) * waveChangeTime - currentTime<font></font>
                        delay = <span class="hljs-built_in">max</span>(delay - <span class="hljs-number">0.05</span>, <span class="hljs-number">0</span>)
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">"currentTime: \(currentTime); delay \(delay)"</span>)<font></font>
                    }<font></font>
                    <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() + delay) {
                        <span class="hljs-keyword">self</span>.isShown.toggle()<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмреЗрд╢рдХ, рдЖрдк рдкреГрд╖реНрдарднреВрдорд┐ рдФрд░ рдкрд░реНрджреЗ рдХреЗ рдмреАрдЪ рд╕реАрдорд╛ рдХреА рд╡рд┐рднрд┐рдиреНрди рдЧрддрд┐ рдХрд╛ рднреНрд░рдо рдкреИрджрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪрд░ рдЪреМрдбрд╝рд╛рдИ рдХрд╛ рдкрд░реНрджрд╛ рднреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдкрд░реНрджрд╛ рдФрд░ рдкрд╣рд▓реА рд▓рд╣рд░, рд▓реЗрдХрд┐рди рдЕрдм рдкрд╣рд▓реА рд▓рд╣рд░ рдереЛрдбрд╝реА рдЕрдкреНрд░рд╛рдХреГрддрд┐рдХ рджрд┐рдЦрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрд░реЗрд╢рд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд▓рд╕реА рд╣реВрдВред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдХреНрд░рдордг рдПрдХ рд╕реБрдЕрд░ рдХреЛ рдЕрд╕реНрддрд░ рдХрд░рдирд╛ рдкрд╕рдВрдж рдХрд░рддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдореЗрд░реЗ рд▓рд┐рдП рдЙрдкрд╕реНрдерд┐рддрд┐ рдФрд░ рдЧрд╛рдпрдм рд╣реЛрдиреЗ рдХреЗ рдПрдирд┐рдореЗрд╢рди рдПрдХ рдмрд╣реБрдд рд╣реА рд╢рд╛рдВрдд рдЙрдкрдХрд░рдг рд╣реИрдВред рд▓реЗрдХрд┐рди рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЕрд╡рдзрд╛рд░рдгрд╛ рдирдИ рд╣реИ, рдФрд░ рд╕рднреА рдЙрдкрдХрд░рдг рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдЗрд╕реЗ рд╕рдВрднрд╛рд▓ рдирд╣реАрдВ рдкрд╛рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреЛ, .rotation3DEffect () рд╕рдВрд╢реЛрдзрдХ рдХрд╛рдлреА рдХреБрдЫ рдЕрдВрджрд░ рдХреЗ рдЬрдЯрд┐рд▓ рдПрдирд┐рдореЗрд╢рди рдХреЗ рд╕рд╛рде рд╡реНрдпреВ рдХреЛ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЗрдиреНрд╡рд░реНрдЯ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдЗрдирд╡рд░реНрдЯ рдХреИрд╕реЗ рдХрд░реЗрдВред рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдХреЛрдб рд▓рд┐рдЦрдирд╛ рдмрд╣реБрдд рдирд┐рд░рд╛рд╢рд╛рдЬрдирдХ рдерд╛, рджреЗрдЦреЗрдВ рдХрд┐ рдЖрдкрдХреА рддрд░рдВрдЧреЗрдВ рд╕реНрдХреНрд░реАрди рдХреЗ рдХреЗрдВрджреНрд░ рд╕реЗ рджреВрд░ рдХреИрд╕реЗ рдмрд┐рдЦрд░рддреА рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рджреЗрдЦреЗрдВ рдХрд┐ рдмрд╛рдИрдВ рдУрд░ рдкрд░реНрджреЗ рдмрд╛рдИрдВ рдУрд░ рд╕реЗ рджрд╛рдИрдВ рдУрд░ рдЪрд▓рддреА рд╣реИрдВред рдореБрдЭреЗ рдмреЙрдпрд▓рд░рдкреНрд▓реЗрдЯ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рд▓рд┐рдЦрдирд╛ рдерд╛, рддрд╛рдХрд┐ рд╕рдВрдХреНрд░рдордг рд╕рдВрд╢реЛрдзрдХ рджреЛрдиреЛрдВ рджрд┐рд╢рд╛рдУрдВ рдореЗрдВ рдХрд╛рдо рдХрд░ рд╕рдХреЗред</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/3c/fg/pn3cfg8f6zsersnfgdv5_ixrqu8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдбреНрд░реЛрдЧрд┐рдВрдЧрдЧреНрд░реБрдк () рд╕рдВрд╢реЛрдзрдХ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдк GPU рд╕реЗ ZStack рд░реЗрдВрдбрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореЗрдЯрд▓ рдХреЛ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдиреЗрд╕реНрдЯреЗрдб рд╡реНрдпреВ рдХреЗ рд╕рд╛рде рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЧреНрд░реЗрдбрд┐рдПрдВрдЯреНрд╕ рдХреЗ рд╕рд╛рде рджреЗрдЦреЗрдВ, рд╕рдВрдХреНрд░рдордг рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ред </font><font style="vertical-align: inherit;">рд╡рд╣ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдгрд┐рдд рдЙрдкрд╕реНрдерд┐рддрд┐ рдФрд░ рдЧрд╛рдпрдм рд╣реЛрдиреЗ рдХреЗ рдПрдиреАрдореЗрд╢рди рдХреЛ рдирд╣реАрдВ рд╕рдордЭрддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдХреБрдЫ рдХреЗ рд╕рд╛рде рдмрджрд▓ рджреЗрддрд╛ рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╣рдо рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдХреЛ рдХреИрд╕реЗ рдЫрд┐рдкрд╛рддреЗ рд╣реИрдВ?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмрд╣реБрдд рдЖрд╕рд╛рдиред SwiftUI рдореЗрдВ .statisBar (рдЫрд┐рдкрд╛ рд╣реБрдЖ :) рд╕рдВрд╢реЛрдзрдХ рд╣реИред рдпрд╣рд╛рдБ рдХреЗрд╡рд▓ рд╕реНрдерд┐рддрд┐ рдкрдЯреНрдЯреА рдХреЗ рд▓рд┐рдП рд╕рдВрдХреНрд░рдордг рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Api рд╣реИрдВ, SwiftUI рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ UIKit рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдирд╛ рд╣реЛрдЧрд╛ред SceneDelegate рдлрд╝рд╛рдЗрд▓ SwiftUI View рдХреЛ UIKit ViewController рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП UIHostingController рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИред рдпрд╣ рдЗрд╕ рд╕реНрддрд░ рдкрд░ рд╣реИ рдХрд┐ рдпрд╣ рдХреБрдЫ рд╡реИрд╢реНрд╡рд┐рдХ UIKit рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛, рдпрд╛ рд╕реНрдХреНрд░реАрди рдХреЗ рдХрд┐рдирд╛рд░реЗ рд╕реЗ рдЬреБрдбрд╝реЗ рд╕рд┐рд╕реНрдЯрдо рдЬреЗрд╕реНрдЪрд░ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рдирд╛ (рд╡рд░реАрдпрд╕реНрдХреНрд░реАрдирд╕реНрдХреНрд░реАрдирдбреЗрд╕рд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдорд╕рд┐рд╕реНрдЯрдо)ред рдЖрдк UIHostingController рд╕реЗ рдХреБрдЫ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЙрдкрд░реНрдЯреАрдЬ рдХреЗ рдорд╛рдиреЛрдВ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рдХреЗ рдЗрдирд╣реЗрд░рд┐рдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЕрдкрдиреЗ рд╡реНрдпреВ рдХреЛ rootViewController рдХреЛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╡рдВрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдХреЗрд╡рд▓ рд╕реАрдорд┐рдд рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдмрджрд▓рд╛рд╡ рд╣реА рд╕реНрдерд┐рддрд┐ рдмреЛрдз рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: .fade, .slide, рдФрд░ .none рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдлреАрдХрд╛ рд╣реИ,рдФрд░ рдпрд╣ рдпрд╣рд╛рдВ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рд╡реИрд╕реЗ рд╣реА рд░рд╣рдиреЗ рджреЗрдВред рдЖрдЗрдП рдЖрд╢рд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЕрднреА рднреА рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХреА рдЬрд╛рдПрдЧреАред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓рд╣рд░ рдХреА рдЧрддрд┐ рдХреЗ рд╕рд╛рде рдЫрд┐рдкрдиреЗ рдФрд░ рд╕реНрдерд┐рддрд┐ рдкрдЯреНрдЯреА рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдПрдХ рдЕрд▓рдЧ рджреГрд╢реНрдп рдмрдирд╛рдпрд╛, рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рдореИрдВ рдард╣рд░рд╛рд╡ рдХреЗ рд╕рд╛рде рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдорд╛рди рдмрджрд▓рддрд╛ рд╣реВрдВ:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">StatusBarHider</span>: <span class="hljs-title">View</span></span>{
    <span class="hljs-keyword">var</span> isShown: <span class="hljs-type">Bool</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">var</span> internalIsShown = <span class="hljs-literal">true</span>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span>{
        <span class="hljs-keyword">if</span> isShown == <span class="hljs-literal">false</span> &amp;&amp; <span class="hljs-keyword">self</span>.internalIsShown == <span class="hljs-literal">true</span>{
            <span class="hljs-type">DispatchQueue</span>.main.asyncAfter(deadline: .now() + <span class="hljs-number">0.7</span>){
                <span class="hljs-keyword">self</span>.internalIsShown = <span class="hljs-keyword">self</span>.isShown<font></font>
            }<font></font>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> isShown == <span class="hljs-literal">true</span> &amp;&amp; <span class="hljs-keyword">self</span>.internalIsShown == <span class="hljs-literal">false</span>{
            <span class="hljs-type">DispatchQueue</span>.main.async(){
                <span class="hljs-keyword">self</span>.internalIsShown = <span class="hljs-keyword">self</span>.isShown<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-type">Spacer</span>()<font></font>
            .statusBar(hidden: internalIsShown)<font></font>
            .animation(<span class="hljs-type">Animation</span>.linear(duration: <span class="hljs-number">0.3</span>))<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╕реНрдкреЗрд╕рд░ () рдпрд╣рд╛рдВ рдмрдирддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреА рдореБрдЭреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрд░реВрд░рдд рдереА, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдКрдкрд░ рд╕реНрдЯреЗрдЯрд╕рдмрд╛рд░ рд╕рдВрд╢реЛрдзрдХ рдШрд╛рд╡ рд╣реИред рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрд╣ рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Apple рдХреЗ рд▓рд┐рдП рдЕрддрд╛рд░реНрдХрд┐рдХ рдерд╛, рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдЙрд╕ рд╡рд┐рд╢рд┐рд╖реНрдЯ рджреГрд╢реНрдп рдкрд░ рд▓рд╛рдЧреВ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЬрд╛рд╣рд┐рд░ рддреМрд░ рдкрд░ рдЕрднреА рдпрд╣ рдкрддрд╛ рдирд╣реАрдВ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдмреЗрд╣рддрд░ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдПред рдмрд╣реБрдд рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рдПрдХ рдФрд░ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдЙрд╕реА рдЧрдВрджреЗ рд╣реИрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдкрд╣рд▓реЗ рдорд╛рдирд╛ рдерд╛: рд╢рд░реАрд░ рдХреЗ рдЕрдВрджрд░, рдореИрдВ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░ </font><font style="vertical-align: inherit;">рдореЗрдВ рдХреБрдЫ рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рддрд╛ рд╣реВрдВ, рдЬрдмрдХрд┐ </font><font style="vertical-align: inherit;">рдЪрд░ </font><font style="vertical-align: inherit;">рдХреЗ рдореВрд▓реНрдп рдХреЛ </font><font style="vertical-align: inherit;">рдмрджрд▓рддрд╛ рд╣реИред рдПрдХ рдкреВрд░реЗ рдХреЗ рд░реВрдк рдореЗрдВ рддрд░реНрдХ рдПрдХ рд╣реА рд╣реИ, рдПрдХ рд╕рдВрд░рдЪрдирд╛ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИ рдЬреЛ рдмрд╛рд╣рд░ рд╕реЗ рдкреНрд░реЗрд╖рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдПрдХ </font></font><code>@State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░ рдЬрд┐рд╕реЗ рдХреБрдЫ рд╕рдордп рдмрд╛рдж рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╕реНрдерд┐рддрд┐ рдкрдЯреНрдЯреА рдЧрд╛рдпрдм рд╣реЛ рдЬрд╛рддреА рд╣реИ рдпрд╛ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореБрдЭреЗ рдЗрд╕ рд╣реИрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА рдХреНрдпреЛрдВрдХрд┐ рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдПрдиреАрдореЗрд╢рди рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдирд╛ рдПрдХ UIKit рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реИ рдЬреЛ рдЕрднреА рднреА рдмрд╣реБрдд рдЦрд░рд╛рдм рд░реВрдк рд╕реЗ SwiftUI рдореЗрдВ рд╡рд┐рдХрд╕рд┐рдд рд╣реИред </font><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдореИрдВ рджреЗрд░реА рд╢реБрд░реВ рдПрдиреАрдореЗрд╢рди рдХреЛ .statusBar (рдЫрд┐рдкрд╛ рд╣реБрдЖ :) рд╕рдВрд╢реЛрдзрдХ рдореЗрдВ рдкреЗрдВрдЪ рдХрд░реВрдБрдЧрд╛, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЫреБрдкрд╛рдиреЗ рдХрд╛ рдПрдиреАрдореЗрд╢рди рдФрд░ рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдХрд╛ рджрд┐рдЦрдирд╛ рддрдп рд╣реИ, рдФрд░ рдЗрд╕реЗ SwiftUI рджреНрд╡рд╛рд░рд╛ рдирд╣реАрдВ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХреБрдЫ рднреА рдореБрдЭреЗ рдЗрд╕ рдмрджрд▓рд╛рд╡ рдХреЗ рд╕рд╛рде рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╡рд╛рдВрдЫрд┐рдд рджреЗрд░реА рд╕реЗ рд░реЛрдХрдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ, рдЗрд╕ рджреГрд╢реНрдп рдХреЗ рдЕрдВрджрд░ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдорд╛рддрд╛-рдкрд┐рддрд╛ рдореЗрдВ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдиреЗ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд┐рдпрд╛ - рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдПрдХ рд╕реНрдорд╛рд░рдХ рдХреЗ рд░реВрдк рдореЗрдВ рдЫреЛрдбрд╝ рджреЗрдВ, рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдореЗрд░реЗ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рд╣реИ (рдФрд░ рдмрддрд╛рдиреЗ рдХрд╛ рдПрдХ рдФрд░ рдХрд╛рд░рдг рдпрд╣ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП)ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ @Environment рдореЗрдВ рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдХрд╛ рдЖрдХрд╛рд░ рдФрд░ рд╕реНрдерд┐рддрд┐ рдХреИрд╕реЗ рднрд░реА рд╣реБрдИ рдереА?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
@Environment (@EnvironmentObject рдХреЗ рд╕рд╛рде рднреНрд░рдорд┐рдд рдирд╣реАрдВ рд╣реЛрдирд╛) рдПрдХ рдЖрд╡рд░рдг рд╣реИ рдЬреЛ рдЪрд░ рдХреА рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕реВрдЪреА рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХреЗ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕реНрдХреНрд░реАрди рдУрд░рд┐рдПрдВрдЯреЗрд╢рди рдпрд╛ OS рд░рдВрдЧ рдереАрдоред рд╡рд╣реА рдЖрд╡рд░рдг рдЖрдкрдХреЗ рд╡рд┐рдЪрд╛рд░ рдХреЛ рдЗрди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд╕реВрдЪреА рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдореБрдЭреЗ рд▓рдЧрд╛ рдХрд┐ @ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЗ рдкрд╛рд╕ рд╕реНрдерд┐рддрд┐ рдкрдЯреНрдЯреА рдХреЗ рдЖрдХрд╛рд░ рдФрд░ рд╕реНрдерд┐рддрд┐ рддрдХ рдкрд╣реБрдВрдЪ рд╕рд╣реА рд╣реЛрдЧреАред рдпрд╣рд╛рдБ рджреЗрдЦреЗрдВ рдХрд┐ рдореИрдВрдиреЗ рдпрд╣ рдХреИрд╕реЗ рдХрд┐рдпрд╛:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">StatusBarFrame</span>: <span class="hljs-title">EnvironmentKey</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> defaultValue: <span class="hljs-type">CGRect</span> {
        <span class="hljs-type">CGRect</span>()<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">EnvironmentValues</span> </span>{
    <span class="hljs-keyword">var</span> statusBarFrame: <span class="hljs-type">CGRect</span>{
        <span class="hljs-keyword">get</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>[<span class="hljs-type">StatusBarFrame</span>.<span class="hljs-keyword">self</span>]<font></font>
        }<font></font>
        <span class="hljs-keyword">set</span> {
            <span class="hljs-keyword">self</span>[<span class="hljs-type">StatusBarFrame</span>.<span class="hljs-keyword">self</span>] = newValue<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВрдиреЗ рдПрдХ рд╕реНрдерд┐рд░ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдИред </font><font style="vertical-align: inherit;">рдлрд┐рд░, рдореИрдВрдиреЗ рдЕрдкрдиреА рд╕реНрд╡рдпрдВ рдХреА рдЧрдгрдирд╛ рдХреА рдЧрдИ рд╕рдВрдкрддреНрддрд┐ рдХреЛ рдЬреЛрдбрд╝рдХрд░ SystemValues тАЛтАЛрд╕рд┐рд╕реНрдЯрдо рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд┐рдпрд╛, рдЬреЛ рдХрд┐ рдЧреЗрдЯрд░ рдФрд░ рд╕реЗрдЯрд░ рдХреЛ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рдЧрдП рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдпрд╣рд╛рдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ EnvironmentValues тАЛтАЛрдПрдХ рд╕рдмрд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЖрдк рдЯрд╛рдЗрдк рдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдиреБрд░реВрдк рд╕рдВрдЧреНрд░рд╣реАрдд рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдореВрд▓реНрдп рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╢рд░реНрдд рд╢рдмреНрджрдХреЛрд╢ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдореВрд▓реНрдп рд╣реИ, рдЬрд╣рд╛рдВ рдкреНрд░рдХрд╛рд░ рд╕реНрд╡рдпрдВ рдХреБрдВрдЬреА рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
@Environment рдореЗрдВ рдорд╛рди keyPath \ .statusBarFrame рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкрджрд╛рдиреБрдХреНрд░рдо рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рд╡рд░рдг рдорд╛рди рдХреЛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:</font></font><br>
<br>
<pre><code class="swift hljs">.environment(\.statusBarFrame, statusBarFrame) 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рд╕реНрдЯреЛрд░ рд╕реЗ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рдпрдВ рджреЗрдЦреЗрдВ:</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">Environment</span>(\.statusBarFrame) <span class="hljs-keyword">var</span> statusBarframe: <span class="hljs-type">CGRect</span> 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡реИрд╕реЗ, IOS 13 рдореЗрдВ UIWindowScene рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕реНрдЯреЗрдЯрдмреЗрд░рдореИрди рд╡рд┐рд╢реЗрд╖рддрд╛ рджрд┐рдЦрд╛рдИ рджреА рд╣реИред </font><font style="vertical-align: inherit;">рдХреБрдЫ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдЗрд╕рд╕реЗ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЕрдм рдЖрдк рдЙрдиреНрд╣реЗрдВ рдкреНрд░рдмрдВрдзрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред </font><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рдЗрд╕реЗ рд╕рдордЭрддрд╛ рд╣реВрдВ, рдкрд╣рд▓реЗ ViewController рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рддрдХ рдкрд╣реБрдВрдЪрдирд╛ рд╕рдВрднрд╡ рдерд╛ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдм рд╡реНрдпреВ рдЬреЛрдбрд╝реЗрдВред </font><font style="vertical-align: inherit;">рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдЙрдиреНрд╣реЛрдВрдиреЗ рдмреЗрдВрдЪ рдХреЛ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдо рддреМрд░ рдкрд░, рдореИрдВ .statusBar (рдЫрд┐рдкреА рд╣реБрдИ :) рд╕рдВрд╢реЛрдзрдХ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдпрд╣рд╛рдБ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реВрдБрдЧрд╛, рдпрд╣рд╛рдБ рдпрд╣ рдореЗрд░реЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдЙрдкрдпреБрдХреНрдд рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЬрд▓реНрджреА рдпрд╛ рдмрд╛рдж рдореЗрдВ, рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рдкрд╣реБрдВрдЪреЗрдВрдЧреЗред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд╖реНрдХрд░реНрд╖</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЦреИрд░, рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рдЖрдХрд░реНрд╖рдХ рдЙрджрд╛рд╣рд░рдг рдкрд░, рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдиреАрдореЗрд╢рди рдореЗрдВ рдПрдХ рднреНрд░рдордг рдХреЛ рдкреВрд░рд╛ рдорд╛рдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рдореБрдЦреНрдп рдПрдиреАрдореЗрд╢рди рдЯреВрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА, рдмрддрд╛рдпрд╛ рдХрд┐ рд╡реЗ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╣реБрдб рдХреЗ рдиреАрдЪреЗ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпреЛрдВред рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрдард┐рдирд╛рдЗрдпрд╛рдБ рджрд┐рдЦрд╛рдИрдВ рдЬреЛ рдЖрдкрдХреЗ рд╕рд╛рдордиреЗ рдЖ рд╕рдХрддреА рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рджреВрд░ рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреНрдпрд╛ рдореЗрд░реЗ рдХреЛрдб рдиреЗ рдЙрдкрд░реЛрдХреНрдд рд▓реЗрдЦ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХреА рддреБрд▓рдирд╛ рдореЗрдВ, рдХреНрд▓реАрдирд░, рд╕реНрдкрд╖реНрдЯ, рдЫреЛрдЯрд╛, рдпрд╛ рд╢рд╛рдпрдж рдЗрд╕реЗ рдмрдирд╛рдП рд░рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реИ? рд╢рд╛рдпрдж рдирд╣реАрдВред рдХреНрдпрд╛ рдпрд╣ рдХрдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддрд╛ рд╣реИ? рдХрд╛рд╢, рдирд╣реАрдВред рд╢рд╛рдпрдж рдореЗрд░рд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЕрдзрд┐рдХ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдЯреАрдХ рдирд╣реАрдВ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рдХрд╛рдо рд╣реИ рдХрд┐ рд╡рд╣ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдмреЗрд╣рддрд░ рдкреНрд░рджрд░реНрд╢рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рд╣реБрдб рдХреЗ рддрд╣рдд рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдмрд╣реБрдд рдЧрд╣рд░рд╛ рджрд┐рдЦрд╛рддрд╛ рд╣реИред рдЗрд╕рдХреЗ рд╕рд╛рде, рдЖрдк рдПрдиреАрдореЗрд╢рди рдХреЛ рдЕрдкрдиреЗ рд╕рд┐рд░ рдореЗрдВ рдЕрд▓рдорд╛рд░рд┐рдпреЛрдВ рдкрд░ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдЕрдкрдиреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдореЗрдВ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SwiftUI рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рдЖрд░рд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдм рднреА, рдкрд╣рд▓реЗ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреЗ рджреЛ рд╣рдлреНрддреЗ рдмрд╛рдж, рдЕрдм, рдХреЛрдб рдХреЛ Xcode рдХреЗ рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдЬрд╛рдБрдЪрддреЗ рд╣реБрдП, рдореИрдВ рджреЗрдЦрддрд╛ рд╣реВрдБ рдХрд┐ рдореБрдЭреЗ рдХрд┐рд╕ рддрд░рд╣ рдХреЗ рдЪрдХреНрдХрд░ рдХрд╛рдЯрдиреЗ рдкрдбрд╝реЗ, рдпрд╣ рдкрд╣рд▓реЗ рд╣реА рддрдп рд╣реЛ рдЪреБрдХрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдореИрдВ рд▓реЗрдЦ рдХреЗ рд╕рд╛рде рдереЛрдбрд╝рд╛ рдард╣рд░ рдЧрдпрд╛ред </font><font style="vertical-align: inherit;">рдЕрдкреНрд░рд╛рд╕рдВрдЧрд┐рдХрддрд╛ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдФрд░ рдХрд╛рдЯрдирд╛ рдкрдбрд╝рд╛, рдФрд░ рдмрд╛рдХреА рд╕рдм - рдбрдмрд▓-рдЪреЗрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред </font><font style="vertical-align: inherit;">рдФрд░ рдпрд╣ рдкреНрд░рд╕рдиреНрди рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╕реНрд╡рд┐рдлреНрдЯреБрдИ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рджреЗрд╢реА рдЖрдИрдУрдПрд╕ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рднрд╡рд┐рд╖реНрдп рд╣реИ, рдФрд░ рдЗрд╕рдХреА рдЙрддреНрдкрддреНрддрд┐ рдкрд░ рдЦрдбрд╝реЗ рд░рд╣рдирд╛ рдФрд░ рдпрд╣ рджреЗрдЦрдирд╛ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдмрд╣реБрдд рдЬрд╛рдирдХрд╛рд░реАрдкреВрд░реНрдг рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрддрднрд╛рд╖рдг</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рд╕рд╛рдордЧреНрд░реА рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдореИрдВрдиреЗ рдЕрдкрдиреЗ рд╕рд┐рд░ рдореЗрдВ рдмрд╣реБрдд рд╕реА рдЪреАрдЬреЗрдВ рдЕрдкрдиреЗ рд╕рд┐рд░ рдореЗрдВ рдбрд╛рд▓ рд▓реАрдВред </font><font style="vertical-align: inherit;">рдореБрдЭреЗ рдмрд╣реБрдд рд╕рд╛рд░реА рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдХрд╛ рдкрддрд╛ рдЪрд▓рд╛, рдЬрд┐рдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореБрдЭреЗ рддрдм рдкрддрд╛ рдирд╣реАрдВ рдерд╛ рдЬрдм рдореИрдВрдиреЗ рдЗрд╕реЗ рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдореИрдВ рдЙрди рд╕рднреА рд╕реЗ рдЖрдЧреНрд░рд╣ рдХрд░рддрд╛ рд╣реВрдВ рдЬрд┐рдирдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕реНрд╡рд┐рдлреНрдЯрдпреВрдЖрдИ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдЕрдиреБрднрд╡ рд╣реИ - рд╢рд░реНрдореАрд▓реА рдордд рдмрдиреЛ, рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдФрд░ рдЬреНрдЮрд╛рди рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдореБрджрд╛рдп рдХреЗ рд▓рд┐рдП рдФрд░ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЬреНрдЮрд╛рди рдХреА рдкреВрд░реНрдгрддрд╛ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбрдХрд▓рд┐рдВрдЧ рд╡рд┐рдзрд┐ рдХреА</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рддреБрд▓рдирд╛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдореЗрдВ</font></a><font style="vertical-align: inherit;"> рдардВрдбрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рдФрд░ рдЙрддреНрддрд░ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЙрддреНрддрд░ рдХреА рддрд▓рд╛рд╢ рдореЗрдВ рдЖрд▓рд╕реА рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рдбрд╝рдХреЛрдВ рдХреЛ рджрд┐рдЦрд╛рдиреЗ рдХреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓рд┐рдП рд╢рд░реНрдордирд╛рдХ рди рд╣реЛ </font><font style="vertical-align: inherit;">ред</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi506648/index.html">рд▓рд╛рд░рд╡реЗрд▓ рдбрд╛рдЗрдЬреЗрд╕реНрдЯ (8-14 рдЬреВрди, 2020)</a></li>
<li><a href="../hi506658/index.html">GitLab 13.0 Gitaly рдХреНрд▓рд╕реНрдЯрд░реНрд╕ рдХреЗ рд╕рд╛рде рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЧрдпрд╛, рд░реЛрдбрдореИрдк рдкрд░ рдорд╣рд╛рдХрд╛рд╡реНрдп рдкрджрд╛рдиреБрдХреНрд░рдо рдФрд░ ECS рдХреЗ рд▓рд┐рдП рд╕реНрд╡рдд: рдкрд░рд┐рдирд┐рдпреЛрдЬрди</a></li>
<li><a href="../hi506662/index.html">2 рдФрд░ 3 рдХреНрд░рдо рдмреЗрдЬрд╝рд┐рдпрд░ рдШрдЯрддрд╛ рдХреЗ рдЕрдиреБрдХреВрд▓реА рд╡рд┐рднрд╛рдЬрди</a></li>
<li><a href="../hi506664/index.html">рдЕрдВрддрд┐рдо рд╕рдкреНрддрд╛рд╣ рд╕рдВ 419 (8-14 рдЬреВрди, 2020) рдХреЗ рд▓рд┐рдП рдлреНрд░рдВрдЯ-рдПрдВрдб рдХреА рджреБрдирд┐рдпрд╛ рд╕реЗ рддрд╛рдЬрд╛ рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдкрд╛рдЪрди</a></li>
<li><a href="../hi506666/index.html">рдУрдЖрд░рдПрдо рдмрдирд╛рд╡рдЯ, рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдпрд╣ рдЗрд╕рдХреЗ рд▓рд╛рдпрдХ рд╣реИ?</a></li>
<li><a href="../hi506676/index.html">рдХрддрд░: рдкреНрд░рддреНрдпрд╛рд░реЛрдкрдг рдФрд░ рд░рд╛рдд рд╢рд╣рд░ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реНрд╡ рдХреЗрдВрджреНрд░</a></li>
<li><a href="../hi506680/index.html">.NET рдХреЛрд░ рдмрдирд╛рдо Node.js. рддрд░реНрдХ рдФрд░ рддрдереНрдп</a></li>
<li><a href="../hi506684/index.html">рдореИрдВрдиреЗ github рдкреГрд╖реНрдареЛрдВ рдкрд░ рд╕рдорд░реНрдкрд┐рдд.ru рдХреЛ рдХреИрд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдФрд░ рд╕рдВрддреБрд╖реНрдЯ рдерд╛</a></li>
<li><a href="../hi506686/index.html">рдорд╛рд╕реНрдХреЛ рдореЗрдВ 15 рд╕реЗ 21 рдЬреВрди рддрдХ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi506688/index.html">15 рд╕реЗ 21 рдЬреВрди рддрдХ рд╕реЗрдВрдЯ рдкреАрдЯрд░реНрд╕рдмрд░реНрдЧ рдореЗрдВ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>