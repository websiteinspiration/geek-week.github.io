<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¸ğŸ¾ ğŸ‘©ğŸ¿â€ğŸ”§ ğŸš« Kubernetes: open source vs fournisseur ğŸ‘ğŸ½ ğŸ‘´ğŸ½ ğŸ›€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, je m'appelle Dmitry Krasnov. Depuis plus de cinq ans maintenant, j'administre des clusters Kubernetes et je construis des architectures de mi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes: open source vs fournisseur</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/500728/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, je m'appelle Dmitry Krasnov. </font><font style="vertical-align: inherit;">Depuis plus de cinq ans maintenant, j'administre des clusters Kubernetes et je construis des architectures de microservices complexes. </font><font style="vertical-align: inherit;">Plus tÃ´t cette annÃ©e, nous avons lancÃ© le service de gestion de cluster Kubernetes basÃ© sur Containerum. </font><font style="vertical-align: inherit;">Profitant de cette opportunitÃ©, je vais vous dire ce qu'est ce Kubernetes et en quoi l'intÃ©gration avec le fournisseur diffÃ¨re de l'open source. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, qu'est-ce que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il s'agit d'un systÃ¨me de gestion de conteneurs sur un grand nombre d'hÃ´tes. </font><font style="vertical-align: inherit;">Du grec, d'ailleurs, il est traduit par Â«piloteÂ» ou Â«timonierÂ». </font><font style="vertical-align: inherit;">DÃ©veloppÃ© Ã  l'origine par Google, aprÃ¨s quoi la Cloud Native Computing Foundation, une organisation internationale Ã  but non lucratif qui rassemble les principaux dÃ©veloppeurs mondiaux, les utilisateurs finaux et les fournisseurs de technologies de conteneurs, a Ã©tÃ© transfÃ©rÃ©e en tant que contribution technologique.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/lu/gn/jjlugngazzbnhu-fyxvlpchazjw.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piloter un grand nombre de conteneurs </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant de quel type de conteneurs il s'agit. </font><font style="vertical-align: inherit;">Cette application avec tout son environnement - principalement les bibliothÃ¨ques dont dÃ©pend le programme. </font><font style="vertical-align: inherit;">Tout cela est emballÃ© dans des archives et prÃ©sentÃ© sous la forme d'une image qui peut Ãªtre exÃ©cutÃ©e indÃ©pendamment du systÃ¨me d'exploitation, testÃ©e et pas seulement. </font><font style="vertical-align: inherit;">Mais il y a un problÃ¨me - la gestion des conteneurs sur un grand nombre d'hÃ´tes est trÃ¨s difficile. </font><font style="vertical-align: inherit;">Par consÃ©quent, Kubernetes a Ã©tÃ© crÃ©Ã©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une image conteneur est une application plus ses dÃ©pendances. L'application, ses dÃ©pendances et l'image du systÃ¨me de fichiers OS sont situÃ©es dans diffÃ©rentes parties de l'image, les couches dites. Les couches peuvent Ãªtre rÃ©utilisÃ©es pour diffÃ©rents conteneurs. Par exemple, pour toutes les applications de l'entreprise, la couche de base Ubuntu peut Ãªtre utilisÃ©e. Lors du dÃ©marrage de conteneurs, il n'est pas nÃ©cessaire de stocker plusieurs copies d'une couche de base sur l'hÃ´te. Cela vous permet d'optimiser le stockage et la livraison des images.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous voulons dÃ©marrer l'application Ã  partir du conteneur, les couches nÃ©cessaires sont superposÃ©es les unes aux autres et un systÃ¨me de fichiers de superposition est formÃ©. Une couche d'enregistrement est superposÃ©e sur le dessus, qui, lorsque le conteneur est arrÃªtÃ©, est supprimÃ©e. Cela garantit que lorsque vous dÃ©marrez le conteneur, l'application aura toujours le mÃªme environnement, qui ne peut pas Ãªtre modifiÃ©. Cela garantit la reproductibilitÃ© de l'environnement sur diffÃ©rents systÃ¨mes d'exploitation hÃ´tes. Que ce soit Ubuntu ou CentOS, l'environnement sera toujours le mÃªme. De plus, le conteneur est isolÃ© de l'hÃ´te Ã  l'aide des mÃ©canismes intÃ©grÃ©s au noyau Linux. Les applications dans le conteneur ne voient pas les fichiers, les processus de l'hÃ´te et les conteneurs voisins. Cette isolation des applications du systÃ¨me d'exploitation hÃ´te fournit une couche de sÃ©curitÃ© supplÃ©mentaire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe de nombreux outils pour gÃ©rer les conteneurs sur l'hÃ´te. </font><font style="vertical-align: inherit;">Le plus populaire d'entre eux est Docker. </font><font style="vertical-align: inherit;">Il vous permet d'assurer le cycle de vie complet des conteneurs. </font><font style="vertical-align: inherit;">Cependant, cela ne fonctionne que sur un seul hÃ´te. </font><font style="vertical-align: inherit;">Si vous devez gÃ©rer des conteneurs sur plusieurs hÃ´tes, Docker peut transformer la vie des ingÃ©nieurs en enfer. </font><font style="vertical-align: inherit;">C'est pourquoi Kubernetes a Ã©tÃ© crÃ©Ã©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La demande pour Kubernetes est prÃ©cisÃ©ment due Ã  la capacitÃ© de diriger des groupes de conteneurs sur plusieurs hÃ´tes en tant qu'entitÃ©s uniques. </font><font style="vertical-align: inherit;">La popularitÃ© du systÃ¨me permet de crÃ©er des DevOps ou des opÃ©rations de dÃ©veloppement, dans lesquelles Kubernetes est utilisÃ© pour dÃ©marrer les processus de ce DevOps lui-mÃªme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/4k/fm/l14kfmzc4n0ohovryr9sb0m1pbc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 1. ReprÃ©sentation schÃ©matique du fonctionnement de Kubernetes</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatisation complÃ¨te</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevOps, en principe, est une automatisation du processus de dÃ©veloppement. En gros, les dÃ©veloppeurs Ã©crivent du code qui est versÃ© dans le rÃ©fÃ©rentiel. Ensuite, ce code peut Ãªtre automatiquement collectÃ© immÃ©diatement dans un conteneur avec toutes les bibliothÃ¨ques, testÃ© et dÃ©ployÃ© Ã  l'Ã©tape suivante - Staging, puis immÃ©diatement en Production. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec Kubernetes, DevOps vous permet d'automatiser ce processus afin qu'il se dÃ©roule avec peu ou pas de participation des dÃ©veloppeurs eux-mÃªmes. Pour cette raison, l'assemblage est considÃ©rablement accÃ©lÃ©rÃ©, car le dÃ©veloppeur n'a pas Ã  le faire sur son ordinateur - il Ã©crit simplement un morceau de code, pousse le code dans le rÃ©fÃ©rentiel, puis le pipeline dÃ©marre, ce qui peut inclure l'assemblage, les tests, le processus de dÃ©ploiement. Et cela se produit Ã  chaque validation, les tests sont donc en cours.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le mÃªme temps, l'utilisation du conteneur vous permet d'Ãªtre sÃ»r que l'environnement entier de ce programme entrera en production exactement sous la forme dans laquelle il a Ã©tÃ© testÃ©. </font><font style="vertical-align: inherit;">Autrement dit, il n'y aura pas de problÃ¨mes de la catÃ©gorie "sur le test, il y avait des versions, en production - d'autres, mais une fois rÃ©glÃ©es - tout est tombÃ©". </font><font style="vertical-align: inherit;">Et depuis aujourd'hui, nous avons une tendance vers l'architecture de microservices, alors qu'au lieu d'une Ã©norme application, il y en a des centaines de petites, afin de les administrer manuellement, vous aurez besoin d'un Ã©norme personnel. </font><font style="vertical-align: inherit;">C'est pourquoi nous utilisons Kubernetes.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour, Pour, Pour</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous parlons des avantages de Kubernetes en tant que plate-forme, alors il prÃ©sente des avantages importants en termes de gestion de l'architecture de microservices. </font></font><br>
<br>
<ul>
<li> <b>  .</b>   â€”      .    , â€”         .          .     ,  Kubernetes      . </li>
<li> <b> .</b>   Kubernetes         .       .       ,     .     Kubernetes  ,        Service Discovery.       IP-       Kubernetes.   health check`         .</li>
<li> <b> . </b>         .    Kubernetes    ConfigMap`.             .         ,     . </li>
<li> <b>Persistent Volumes. </b>          ,    ,  .        .      Kubernetes      â€” Persistent Volumes.       ,      ,   .        ,        .</li>
<li> <b>Load Balancer.</b>   ,   Kubernetes      Deployment, StatefulSet  ..,            .         . Kubernetes         .     ,   ?        ,        .      Kubernetes    Load Balancer.             .              .       ,     .        Kubernetes.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes est le meilleur pour lancer des architectures de microservices. </font><font style="vertical-align: inherit;">La mise en Å“uvre d'un systÃ¨me dans l'architecture classique est possible, mais inutile. </font><font style="vertical-align: inherit;">Si l'application ne peut pas fonctionner dans plusieurs rÃ©pliques, quelle est la diffÃ©rence - dans Kubernetes ou non?</font></font><br>
 <br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes open source</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Open source Kubernetes est une grande chose: il a installÃ© et fonctionne. </font><font style="vertical-align: inherit;">Vous pouvez dÃ©ployer sur vos serveurs de fer, sur votre infrastructure, mettre des assistants et des travailleurs sur lesquels toutes les applications s'exÃ©cuteront. </font><font style="vertical-align: inherit;">Et surtout - tout cela est gratuit. </font><font style="vertical-align: inherit;">Cependant, il y a des nuances.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le premier est l'exactitude des connaissances et de l'expÃ©rience des administrateurs et des ingÃ©nieurs qui dÃ©ploieront et accompagneront tout cela. </font><font style="vertical-align: inherit;">Le client bÃ©nÃ©ficiant d'une totale libertÃ© d'action dans le cluster, il porte la responsabilitÃ© de l'opÃ©rabilitÃ© du cluster. </font><font style="vertical-align: inherit;">Et tout casser ici est trÃ¨s simple.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le deuxiÃ¨me est le manque d'intÃ©gration. </font><font style="vertical-align: inherit;">Si vous exÃ©cutez Kubernetes sans une plate-forme de virtualisation populaire, vous n'obtiendrez pas tous les avantages du programme. </font><font style="vertical-align: inherit;">Telles que l'utilisation des volumes persistants et des services d'Ã©quilibrage de charge.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/yl/qy/s-/ylqys-vszsb7e9t4pmjylyhhh0u.png"> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 2. L'architecture k8s</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes du vendeur</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'intÃ©gration avec un fournisseur de cloud offre deux options: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tout d'abord, une personne peut simplement cliquer sur le bouton Â«crÃ©er un clusterÂ» et obtenir un cluster dÃ©jÃ  configurÃ© et prÃªt Ã  fonctionner.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DeuxiÃ¨mement, le fournisseur lui-mÃªme met en place un cluster et configure l'intÃ©gration avec le cloud.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment cela se passe-t-il avec nous. L'ingÃ©nieur qui lance le cluster indique le nombre de travailleurs dont il a besoin et avec quels paramÃ¨tres (par exemple, 5 travailleurs, chacun avec 10 CPU, 16 Go de RAM et, disons, 100 Go de disque). Il accÃ¨de ensuite au cluster dÃ©jÃ  formÃ©. Dans le mÃªme temps, les travailleurs sur lesquels la charge est lancÃ©e sont entiÃ¨rement remis au client, mais l'ensemble du plan de gestion reste dans la zone de responsabilitÃ© du fournisseur (dans le cas oÃ¹ le service est fourni selon le modÃ¨le de service gÃ©rÃ©).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, un tel schÃ©ma a ses inconvÃ©nients. </font><font style="vertical-align: inherit;">Ã‰tant donnÃ© que le plan de gestion reste avec le fournisseur, le fournisseur ne donne pas un accÃ¨s complet au client, ce qui rÃ©duit la flexibilitÃ© de travailler avec Kubernetes. </font><font style="vertical-align: inherit;">Il arrive parfois que le client veuille associer certaines fonctionnalitÃ©s spÃ©cifiques Ã  Kubernetes, par exemple, l'authentification via LDAP, et la configuration du plan de gestion ne le permet pas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/xi/lp/mexilpixodhnuve_i3i2kop5rko.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 3. Un exemple de cluster Kubernetes d'un fournisseur de cloud</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que choisir: open source ou fournisseur</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, Kubernetes open source ou fournisseur? </font><font style="vertical-align: inherit;">Si nous prenons Kubernetes open source, alors l'utilisateur veut faire ce qu'il fait. </font><font style="vertical-align: inherit;">Mais une grande chance de se tirer une balle dans la jambe. </font><font style="vertical-align: inherit;">Avec les Ã©diteurs, c'est plus compliquÃ©, car tout est pensÃ© et configurÃ© pour l'entreprise. </font><font style="vertical-align: inherit;">Le plus gros inconvÃ©nient de l'open source Kubernetes est l'exigence de spÃ©cialistes. </font><font style="vertical-align: inherit;">Avec un vendeur, l'entreprise est Ã©pargnÃ©e par ce mal de tÃªte, mais elle devra dÃ©cider de payer ses spÃ©cialistes ou le vendeur. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/te/g1/uu/teg1uu2nmmwdork-m0khn56_3ru.png"><br>
<br>
<img src="https://habrastorage.org/webt/-2/fi/vf/-2fivf91q1hgvh5j515dccobviy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, les avantages sont Ã©vidents, les inconvÃ©nients sont Ã©galement connus. </font><font style="vertical-align: inherit;">Invariablement, une chose: Kubernetes rÃ©sout de nombreux problÃ¨mes en automatisant la gestion de plusieurs conteneurs. </font><font style="vertical-align: inherit;">Et lequel choisir, open source ou fournisseur - chacun dÃ©cide pour lui-mÃªme. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'article a Ã©tÃ© prÃ©parÃ© par Dmitry Krasnov, architecte en chef du service Containerum du fournisseur #CloudMTS</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500712/index.html">Coronavirus numÃ©rique - une combinaison de ransomware et d'infostealer</a></li>
<li><a href="../fr500718/index.html">EPAM en mode distant: comment cela fonctionne</a></li>
<li><a href="../fr500720/index.html">Nouvelles normes de sÃ©curitÃ© de l'information: rendre la vie plus difficile aux attaquants</a></li>
<li><a href="../fr500722/index.html">"Cuire jusqu'Ã  ce que prÃªt": qui enregistre des enregistrements sur bande rares d'une maniÃ¨re si inhabituelle</a></li>
<li><a href="../fr500724/index.html">Comment les autoritÃ©s financiÃ¨res amÃ©ricaines limitent l'impact nÃ©gatif du jeu sur la baisse</a></li>
<li><a href="../fr500732/index.html">L'intelligence artificielle et la crise des thÃ©ories de la conscience</a></li>
<li><a href="../fr500734/index.html"># GitLab 12.10 publiÃ© avec gestion des exigences et mise Ã  l'Ã©chelle automatique des CI sur AWS Fargate</a></li>
<li><a href="../fr500744/index.html">Â«Pour mieux entendre que toi, mon interlocuteurÂ»: comment mieux diffuser depuis chez soi</a></li>
<li><a href="../fr500746/index.html">Rack de boxe pour SMD et autres petites choses</a></li>
<li><a href="../fr500752/index.html">MASK-RCNN pour trouver des toits Ã  partir d'images de drones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>