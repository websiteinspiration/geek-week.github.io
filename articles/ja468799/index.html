<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🅱️ 🎷 🧑🏾 初心者のための反応または悪いヒントのアンチパターン 🐒 🐒 🐢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル。
 
 Reactを勉強してからちょうど1年が経ちました。この間、React Nativeで記述されたいくつかの小さなモバイルアプリケーションをリリースし、ReactJSを使用したWebアプリケーションの開発に参加することができました。まとめて、なんとか踏み出したレーキを振り返る...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>初心者のための反応または悪いヒントのアンチパターン</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468799/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reactを勉強してからちょうど1年が経ちました。この間、React Nativeで記述されたいくつかの小さなモバイルアプリケーションをリリースし、ReactJSを使用したWebアプリケーションの開発に参加することができました。まとめて、なんとか踏み出したレーキを振り返ると、自分の経験を記事の形で表現するというアイデアがありました。リアクションの調査を始める前に、c ++、pythonでの3年の開発経験があり、フロントエンド開発には何も複雑ではなく、すべてを理解することは難しくないという意見があることを予約します。したがって、最初の数か月間は、教育資料を読むことを怠り、基本的にはGoogleの既成のコード例だけを読みました。したがって、最初にドキュメンテーションを研究する模範的な開発者は、おそらく、ここでは自分にとって何も新しいものを見つけられませんが、私はまだ考えています新しいテクノロジーを研究するとき、かなりの数の人々が実践から理論への道を好むということです。ですから、この記事が誰かを熊手から救うなら、私は無駄にしようとしませんでした。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒント1.フォームの操作</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
古典的な状況：ユーザーがデータを入力し、ボタンをクリックするいくつかのフィールドを持つフォームがあり、入力されたデータは外部APIに送信され、状態に保存され、画面に表示されます-必要なものに下線を付けます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション1.しない方法</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reactでは、DOMノードまたはReactコンポーネントへのリンクを作成できます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">this</span>.myRef = React.createRef();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ref属性を使用して、作成されたリンクを必要なコンポーネント/ノードにアタッチできます。</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;input id=<span class="hljs-string">"data"</span> type=<span class="hljs-string">"text"</span> ref={<span class="hljs-keyword">this</span>.myRef} /&gt; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、フォームの各フィールドにrefを作成し、ボタンがクリックされたときに呼び出される関数の本文で、必要なリンクにアクセスしてフォームからデータを取得することで、上記の問題を解決できます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BadForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);
    <span class="hljs-keyword">this</span>.myRef = React.createRef();
    <span class="hljs-keyword">this</span>.onClickHandler = <span class="hljs-keyword">this</span>.onClickHandler.bind(<span class="hljs-keyword">this</span>);<font></font>
  }<font></font>
<font></font>
  onClickHandler() {<font></font>
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">this</span>.myRef.current.value;<font></font>
    alert(data);<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"data"</span>&gt;</span>Bad form:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"data"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{this.myRef}</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"OK"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onClickHandler}</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
      <span class="hljs-tag">&lt;/&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内側の猿がこの決定を正当化しようとする方法：</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能する主なものは、まだ100500のタスクがあり、</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テレビ番組は視聴され</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ていませんチケットは閉じられていません。</font><font style="vertical-align: inherit;">そのままにして、変更します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォームを処理するために必要なコードが少ないことを確認してください。</font><font style="vertical-align: inherit;">参照を宣言し、どこからでもデータにアクセスできます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値を状態に保存すると、入力データを変更するたびに、アプリケーション全体が再度レンダリングされ、最終的なデータのみが必要になります。</font><font style="vertical-align: inherit;">したがって、この方法も最適化に適していることがわかります。そのままにしておきます。</font></font></li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サルが間違っている理由：上記の</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
例は、Reactの古典的なアンチパターンであり、単一方向のデータストリームの概念に違反しています。</font><font style="vertical-align: inherit;">この場合、アプリケーションはデータの状態に保存されないため、入力中のデータ変更に応答できません。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション2.クラシックソリューション</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各フォームフィールドについて、入力結果が格納される状態で変数が作成されます。</font><font style="vertical-align: inherit;">value属性にはこの変数が割り当てられます。</font><font style="vertical-align: inherit;">onhange属性には、stateの変数の値がsetState（）によって変更される関数が割り当てられています。</font><font style="vertical-align: inherit;">したがって、すべてのデータは状態から取得され、データが変更されると状態が変更され、アプリケーションが再度レンダリングされます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GoodForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);
    <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">data</span>: <span class="hljs-string">''</span> };
    <span class="hljs-keyword">this</span>.onChangeData = <span class="hljs-keyword">this</span>.onChangeData.bind(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.onClickHandler = <span class="hljs-keyword">this</span>.onClickHandler.bind(<span class="hljs-keyword">this</span>);<font></font>
  }<font></font>
<font></font>
  onChangeData(event) {<font></font>
    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">data</span>: event.target.value });<font></font>
  }<font></font>
<font></font>
  onClickHandler(event) {<font></font>
    <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">this</span>.state;<font></font>
    alert(data);<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">this</span>.state;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"data"</span>&gt;</span>Good form:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"data"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{data}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.onChangeData}</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"OK"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onClickHandler}</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
      <span class="hljs-tag">&lt;/&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション3.詳細。</font><font style="vertical-align: inherit;">形が多くなると</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のオプションにはいくつかの欠点があります。大量の標準コードで、フィールドごとにonhangeメソッドを宣言し、状態に変数を追加する必要があります。</font><font style="vertical-align: inherit;">入力されたデータを検証してエラーメッセージを表示することになると、コードの量はさらに増加し​​ます。</font><font style="vertical-align: inherit;">フォームでの作業を容易にするために、フォーム</font><font style="vertical-align: inherit;">のメンテナンスに関連する問題を処理し、検証スキームを簡単に追加できる</font><font style="vertical-align: inherit;">優れた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ</font><font style="vertical-align: inherit;">があります。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { Formik } <span class="hljs-keyword">from</span> <span class="hljs-string">'formik'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Yup <span class="hljs-keyword">from</span> <span class="hljs-string">'yup'</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> SigninSchema = Yup.object().shape({
  <span class="hljs-attr">data</span>: Yup.string()<font></font>
    .min(<span class="hljs-number">2</span>, <span class="hljs-string">'Too Short!'</span>)<font></font>
    .max(<span class="hljs-number">50</span>, <span class="hljs-string">'Too Long!'</span>)<font></font>
    .required(<span class="hljs-string">'Data required'</span>),<font></font>
});<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Formik</span>
      <span class="hljs-attr">initialValues</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">data:</span> '' }}
      <span class="hljs-attr">validationSchema</span>=<span class="hljs-string">{SigninSchema}</span>
      <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(values)</span> =&gt;</span> {
          alert(values.data);
      }}
      render={(props) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{props.handleSubmit}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Formik form:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{props.handleChange}</span>
            <span class="hljs-attr">onBlur</span>=<span class="hljs-string">{props.handleBlur}</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{props.values.data}</span>
            <span class="hljs-attr">name</span>=<span class="hljs-string">"data"</span>
          /&gt;</span>
          {props.errors.data &amp;&amp; props.touched.data ? (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{props.errors.data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ) : null}
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Ok<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
      )}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒント2.変異を避ける</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単なタスクリストアプリケーションを考えてみましょう。コンストラクターでは、to-doリストが格納される変数を状態で定義します。 render（）メソッドで、リストにケースを追加するフォームを表示します。次に、状態をどのように変更できるかを考えます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列の変更につながる間違ったオプション：</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">this</span>.state.data.push(item);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、配列は実際に変更されていますが、Reactはそれについて何も認識していません。つまり、render（）メソッドは呼び出されず、変更は表示されません。実際、JavaScriptでは、新しい配列またはオブジェクトを作成すると、リンクはオブジェクト自体ではなく変数に保存されます。したがって、データ配列に新しい要素を追加すると、配列自体は変更されますが、リンクは変更されません。つまり、状態に格納されているデータ値は変更されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JavaScriptの変異はあらゆる場面で発生する可能性があります。データの変更を回避するには、配列、フィルター（）およびマップ（）メソッドのいずれかに対してスプレッド演算子を使用し、オブジェクトに対しては、スプレッド演算子または割り当て（）メソッドを使用します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> newData = [...data, item];
<span class="hljs-keyword">const</span> copy = <span class="hljs-built_in">Object</span>.assign({}, obj);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションに戻って、状態を変更するための正しいオプションは、setState（）メソッドを使用することです。</font><font style="vertical-align: inherit;">Reactイデオロギーと矛盾するため、コンストラクター以外の場所で直接状態を変更しないでください。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そんなことしたらダメ！</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">this</span>.state.data = [...data, item];</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、状態の変更も避けてください。</font><font style="vertical-align: inherit;">setState（）を使用した場合でも、最適化しようとするとミューテーションによってバグが発生する可能性があります。</font><font style="vertical-align: inherit;">たとえば、変異したオブジェクトを小道具を介して子PureComponentに渡すと、このコンポーネントは受信した小道具が変更されたことを理解できず、再レンダリングされません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そんなことしたらダメ！</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">this</span>.state.data.push(item);
<span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">data</span>: <span class="hljs-keyword">this</span>.state.data });</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正しいオプション：</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">this</span>.state;
<span class="hljs-keyword">const</span> newData = [...data, item];
<span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">data</span>: newData });</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、上記のオプションでも微妙なバグにつながる可能性があります。</font><font style="vertical-align: inherit;">実際のところ、データ変数を状態から受け取ってから新しい値を状態に書き込むまでに経過した時間の間、状態自体が変化しないことを誰も保証しません。</font><font style="vertical-align: inherit;">したがって、行った変更の一部を失うリスクがあります。</font><font style="vertical-align: inherit;">したがって、以前の値を使用して状態の変数の値を更新する必要がある場合は、次のようにします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正しいオプションは、次の状態が現在の状態に依存する場合です。</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> {<span class="hljs-attr">data</span>: [...state.data, item]};<font></font>
});</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒント3.マルチページアプリケーションのエミュレーション</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションが開発中であり、ある時点で、マルチページが必要であることに気付きました。</font><font style="vertical-align: inherit;">しかし、Reactは単一ページのアプリケーションなので、どうすればよいでしょうか。</font><font style="vertical-align: inherit;">この時点で、次のクレイジーなアイデアが思い浮かぶかもしれません。</font><font style="vertical-align: inherit;">たとえば、reduxストアを使用して、現在のページの識別子をアプリケーションのグローバル状態に保つことを決定します。</font><font style="vertical-align: inherit;">目的のページを表示するには、条件付きレンダリングを使用し、ページを切り替えて、目的のペイロードでアクションを呼び出し、それによってストアreduxの値を変更します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.js</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./App.css'</span>;
<span class="hljs-keyword">import</span> Page1 <span class="hljs-keyword">from</span> <span class="hljs-string">'./Page1'</span>;
<span class="hljs-keyword">import</span> Page2 <span class="hljs-keyword">from</span> <span class="hljs-string">'./Page2'</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> mapStateToProps = <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({ <span class="hljs-attr">page</span>: state.page });<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AppCon</span>(<span class="hljs-params">props</span>) </span>{
  <span class="hljs-keyword">if</span> (props.page === <span class="hljs-string">'Page1'</span>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Page1</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Page2</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
  );<font></font>
}<font></font>
<span class="hljs-keyword">const</span> App = connect(mapStateToProps)(AppCon);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page1.js</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> { setPage } <span class="hljs-keyword">from</span> <span class="hljs-string">'./redux/actions'</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDispatchToProps</span>(<span class="hljs-params">dispatch</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">setPageHandle</span>: <span class="hljs-function">(<span class="hljs-params">page</span>) =&gt;</span> dispatch(setPage(page)),<font></font>
  };<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Page1Con</span>(<span class="hljs-params">props</span>) </span>{
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span> Page 1 <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
            <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">"Go to page2"</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> props.setPageHandle('Page2')}
        /&gt;
      <span class="hljs-tag">&lt;/&gt;</span></span><font></font>
    );<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> Page1 = connect(<span class="hljs-literal">null</span>, mapDispatchToProps)(Page1Con);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Page1;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜこれが悪いのですか？</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このソリューションは、原始的な自転車の例です。</font><font style="vertical-align: inherit;">あなたがそのような自転車をうまく作る方法を知っていて、あなたが何をしているのかを理解しているなら、それは私があなたに助言することではありません。</font><font style="vertical-align: inherit;">そうしないと、コードが暗黙的で混乱を招き、不必要に複雑になります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">訪問の履歴は保存されないため、ブラウザの[戻る]ボタンを使用できません。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを解決するには？</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">react-routerを</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">だけ</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これは、アプリケーションを複数ページに簡単に変換できる優れたパッケージです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒント4. APIリクエストを配置する場所</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ある時点で、アプリケーションの外部APIにリクエストを追加する必要がありました。</font><font style="vertical-align: inherit;">そしてここであなたは疑問に思っています：あなたのアプリケーションのどこでリクエストを実行する必要がありますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現時点では、Reactコンポーネントをマウントするときのライフサイクルは次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクター（） </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的getDerivedStateFromProps（） </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レンダリング（） </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">componentDidMount（） </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのオプションを順番に分析してみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンストラクター（）メソッドでは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメンテーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は以下以外のことは推奨しません。</font></font><br>
<br>
<ul>
<li>      this.state. </li>
<li>    . </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
apiの呼び出しはこのリストには含まれていません。次に進みましょう。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ドキュメンテーション</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
によるgetDerivedStateFromProps（）メソッド</font><font style="vertical-align: inherit;">は、状態がプロップの変更に依存するまれな状況で存在します。</font><font style="vertical-align: inherit;">繰り返しますが、私たちのケースではありません。</font><font style="vertical-align: inherit;">
最も一般的な間違いは、render（）メソッドでAPIリクエストを実行するコードの場所です。</font><font style="vertical-align: inherit;">これにより、リクエストが正常に実行されるとすぐに、コンポーネントの状態で結果が保存される可能性が高くなり、これにより、render（）メソッドが新しく呼び出され、APIへのリクエストが再度実行されます。</font><font style="vertical-align: inherit;">したがって、コンポーネントは無限のレンダリングになり、これは明らかに必要なものではありません。</font><font style="vertical-align: inherit;">
したがって、componentDidMount（）メソッドは、外部APIにアクセスするための理想的な場所です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード例は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubにあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja468785/index.html">インテルStratix 10 DXがStratix 10 FPGAラインを完成</a></li>
<li><a href="../ja468789/index.html">2. Check Point Maestroの一般的な使用例</a></li>
<li><a href="../ja468791/index.html">知っておく価値のある2つの興味深い人間の脳の実験</a></li>
<li><a href="../ja468793/index.html">私たちは暗号通貨天秤座を扱います。細部</a></li>
<li><a href="../ja468797/index.html">目の焦点距離。それは何ですか？（更新）</a></li>
<li><a href="../ja468803/index.html">ワークフローエンジンの作成方法</a></li>
<li><a href="../ja468805/index.html">System.Console、Mono、NCurses</a></li>
<li><a href="../ja468811/index.html">Technologies Yandex Turbo Pagesとeコマース向けGoogle AMP</a></li>
<li><a href="../ja468815/index.html">Apache、ViewState、および逆シリアル化</a></li>
<li><a href="../ja468817/index.html">公開鍵標準に基づく暗号ワークステーション。SSL証明書を発行します。エピローグ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>