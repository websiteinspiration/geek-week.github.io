<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶é ‚òÉÔ∏è üßëüèæ Trusted Types - a new way to protect web application code from XSS attacks üß¶ üöá üë©üèª‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Google has developed an API that allows modern web applications to protect their front-end from XSS attacks, and more specifically, from JavaScript in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Trusted Types - a new way to protect web application code from XSS attacks</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/495862/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google has </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">developed an</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> API that allows modern web applications to protect their front-end from XSS attacks, and more specifically, from JavaScript injections into DOM (DOM-Based Cross Site Scripting). </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cross-site scripting</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (XSS) is the most common type of attack related to the vulnerability of modern web applications. This is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recognized</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> not only by Google, but the entire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">industry</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Experience has shown that developing a web application resistant to an XSS attack is still a non-trivial task, especially when it comes to complex projects. If the developers successfully solve this problem on the backend, then on the front-end everything is much more complicated. As part of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google's Vulnerability Reward Program</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> more and more awards are received by developers who have proposed a solution to protect against DOM XSS attacks.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You may ask, how did we get to such a life? </font><font style="vertical-align: inherit;">Probably ask. </font><font style="vertical-align: inherit;">The fact is that modern web applications have two serious and unrelated problems ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XSS is easy to embed in code</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DOM XSS is a type of attack in which unfiltered data coming from the side of the user or other browser APIs, along with the implemented js injections, fall into the DOM. </font><font style="vertical-align: inherit;">For example, consider a snippet designed to load a stylesheet for a certain user interface template that an application uses:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> templateId = location.hash.match(<span class="hljs-regexp">/tplid=([^;&amp;]*)/</span>)[<span class="hljs-number">1</span>];
<span class="hljs-comment">// ...</span>
<span class="hljs-built_in">document</span>.head.innerHTML += <span class="hljs-string">`&lt;link rel="stylesheet" href="./templates/<span class="hljs-subst">${templateId}</span>/style.css"&gt;`</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this case, the script introduced by the attacker in location.hash (in this case plays the role of the data source, that is, source) will fall into innerHTML (plays the role of the data receiver, that is, sink). Using this vulnerability, an attacker could spoof the URL that the victim will go to:</font></font><br>
<br>
<pre><code class="javascript hljs">https:<span class="hljs-comment">//example.com#tplid="&gt;&lt;img src=x onerror=alert(1)&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This injection can easily be overlooked, especially if the code changes frequently. </font><font style="vertical-align: inherit;">For example, once upon a time templateId could be generated and checked on the server and after that it would never occur to anyone to check it again. </font><font style="vertical-align: inherit;">When we write something in innerHTML, we only know for sure that its value is a string. </font><font style="vertical-align: inherit;">But should you trust the contents of this line? </font><font style="vertical-align: inherit;">Where did it actually come from? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moreover, the problem is not limited to innerHTML. </font><font style="vertical-align: inherit;">In a typical DOM, there are more than 60 methods and properties that have the same problem. </font><font style="vertical-align: inherit;">So, the DOM API is unsafe by default and requires a special approach to prevent XSS.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XSS is hard to track</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The above code is just a good example, so it‚Äôs easy to see the error there. In practice, the values ‚Äã‚Äãof </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sink</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are often in completely different parts of the application. Are there any functions that perform sanitation and data verification on the way from </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sink</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? But how to determine when and what function to call? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Looking only at the source code, it's hard to see if it contains DOM XSS scripts. Moreover, grep is not enough for .js files with case sensitivity settings. After all, case-sensitive functions are often used inside various wrappers, so real vulnerabilities are well disguised and may look, for example, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">like this</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And sometimes, even if you carefully read the entire code, it is impossible to determine if there is a vulnerability in the code base. </font><font style="vertical-align: inherit;">Take a look at this expression:</font></font><br>
<br>
<pre><code class="javascript hljs">obj[prop] = templateID;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If obj points to a location object (the location.hash above) and the value of prop is 'href', then this is most likely the XSS DOM. </font><font style="vertical-align: inherit;">However, you can probably find out only in the process of code execution. </font><font style="vertical-align: inherit;">Since any part of your application can hypothetically write something to the DOM, all code must pass a manual security check, and the reviewer must be extremely careful to detect an error. </font><font style="vertical-align: inherit;">But one cannot completely rely on such a verification method, since the human factor has not been canceled.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trusted types</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trusted Types</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a new browser API that will help to fundamentally eliminate the problems listed above, including protecting web applications from the DOM XSS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Trusted Types API is built on a set of classes (policies) that allows you to block malicious injections. With it, the DOM ceases to be vulnerable: its elements receive values ‚Äã‚Äãnot through a string, but through a special object. In order to use Trusted Types, you need to initialize a special field in the header of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Content Security Policy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (CSP) </font><font style="vertical-align: inherit;">HTTP response </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs">Content-Security-Policy: trusted-types *</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSP is an additional layer of security that can recognize and eliminate certain types of attacks, such as Cross Site Scripting (XSS) and data injection attacks. </font><font style="vertical-align: inherit;">In order to enable CSP, you must configure the server so that it uses the Content-Security-Policy HTTP header in its responses. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And then no one will be able to write an arbitrary string to the element of your DOM:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> templateId = location.hash.match(<span class="hljs-regexp">/tplid=([^;&amp;]*)/</span>)[<span class="hljs-number">1</span>];
<span class="hljs-comment">// typeof templateId == "string"</span>
<span class="hljs-built_in">document</span>.head.innerHTML += templateId <span class="hljs-comment">//     (TypeError).</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now for this you have to create and use special typed objects. </font><font style="vertical-align: inherit;">These objects can be created in your application only with the help of specially designed functions called Trusted Type Policies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For instance:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> templatePolicy = TrustedTypes.createPolicy(<span class="hljs-string">'template'</span>, {
  <span class="hljs-attr">createHTML</span>: <span class="hljs-function">(<span class="hljs-params">templateId</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> tpl = templateId;
    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^[0-9a-z-]$/</span>.test(tpl)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;link rel="stylesheet" href="./templates/<span class="hljs-subst">${tpl}</span>/style.css"&gt;`</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>();<font></font>
  }<font></font>
});<font></font>
<font></font>
<span class="hljs-keyword">const</span> html = templatePolicy.createHTML(location.hash.match(<span class="hljs-regexp">/tplid=([^;&amp;]*)/</span>)[<span class="hljs-number">1</span>]);
<span class="hljs-comment">// html ‚Äî    TrustedHTML</span>
<span class="hljs-built_in">document</span>.head.innerHTML += html;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we create a policy for the template template that checks the passed ID parameter and creates the resulting HTML. The set of create * methods calls the corresponding user-defined function and wraps the result in a Trusted Type object. For example, templatePolicy.createHTML calls the validation function for templateId and returns an object of type TrustedHTML containing (see the very first example). At the same time, the browser allows you to write data to an object of type TrustedHTML in innerHTML (which in theory expects normal HTML). </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition to the TrustedHTML class, you can use the TrustedScript, TrustedURL, and TrustedScriptURL classes.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
It might seem that the only advantage of the new API was the ability to add this check:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^[0-9a-z-]$/</span>.test(tpl)) { <span class="hljs-comment">/* allow the tplId */</span> }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indeed, this line is necessary to protect against XSS. </font><font style="vertical-align: inherit;">But in fact, everything is much more interesting. </font><font style="vertical-align: inherit;">Using Trusted Types, resolving DOM vulnerabilities boils down to properly enforcing policies. </font><font style="vertical-align: inherit;">No other code checks the data from the source to the sink. </font><font style="vertical-align: inherit;">Thus, only improper work with politicians can lead to security problems. </font><font style="vertical-align: inherit;">In our example, it doesn‚Äôt matter where the value of templateId comes from, since the policy always first of all checks whether it passed validation. </font><font style="vertical-align: inherit;">So, in the area for which a certain policy is responsible, any XSS attack will be repelled:</font></font><br>
<br>
<code>Uncaught TypeError: Failed to set the ‚ÄôinnerHTML‚Äô property on ‚ÄôElement‚Äô: This document requires `TrustedHTML` assignment.</code><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Policy Limitations</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Did you notice the * value that we used in the Content-Security-Policy header? It indicates that the application can create an arbitrary number of policies, provided that each of them has a unique name. If the application can freely create too many policies, this can lead to confusion and it will be more difficult to implement protection against the DOM XSS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, we can limit this number by explicitly specifying a list of policy names that we will use. For instance:</font></font><br>
<br>
<pre><code class="javascript hljs">Content-Security-Policy: trusted-types template</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This ensures that only one policy is created with the name template. </font><font style="vertical-align: inherit;">Then we can easily identify it in the source code and test its operation. </font><font style="vertical-align: inherit;">Thanks to this, we can be sure that the application will be protected from the DOM XSS. </font><font style="vertical-align: inherit;">And you will be happy! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In practice, modern web applications need a small number of policies. </font><font style="vertical-align: inherit;">A general recommendation is to create policies where client code generates HTML or URLs ‚Äî in script loaders, HTML template libraries, or in an HTML sanitizer. </font><font style="vertical-align: inherit;">All of the many dependencies that are not related to the DOM do not need to use policies. </font><font style="vertical-align: inherit;">And then the proper use of Trusted Types is guaranteed to protect us from XSS.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fast start</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following is a short introduction to the API. </font><font style="vertical-align: inherit;">Over time, more and more code examples, tutorials, and documentation appear on how to write and rewrite applications using Trusted Types. </font><font style="vertical-align: inherit;">We believe that the web development community has long been ready to start experimenting with this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To use the new API on your site, it must be </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">activated</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directly in the browser. </font><font style="vertical-align: inherit;">If you just want to run it locally, starting with Chrome 73, the feature can be enabled on the command line:</font></font><br>
<br>
<pre><code class="javascript hljs">chrome --enable-blink-features=TrustedDOMTypes</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
or</font></font><br>
<br>
<pre><code class="javascript hljs">chrome --enable-experimental-web-platform-features</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you use Google Chrome, you can enter in the address bar </font></font><code>chrome://flags/#enable-experimental-web-platform-features</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">All of these options for launching the API make it active for one session. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you experience a malfunction, use --enable-features \ u003d BlinkHeapUnifiedGarbageCollection as a workaround. </font><font style="vertical-align: inherit;">See the discussion of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">error 929601 for more details</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is also a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">polyphile</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that allows you to use Trusted Types in many other browsers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can discuss the project </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">It is also </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on GitHub.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495850/index.html">Everyday life of Scrum-Masters: team and self transformation</a></li>
<li><a href="../en495852/index.html">LDA on LiveJournal articles + visualization</a></li>
<li><a href="../en495854/index.html">How to escape from Covid and from surveillance?</a></li>
<li><a href="../en495856/index.html">Intel DevCloud for oneAPI - a cloud service for developers who sit at home</a></li>
<li><a href="../en495858/index.html">Remote and self-isolation: space experience to help earthlings</a></li>
<li><a href="../en495864/index.html">Creating a design system for the game: a detailed analysis of the approach</a></li>
<li><a href="../en495870/index.html">Tips & tricks working with Ceph in busy projects</a></li>
<li><a href="../en495880/index.html">The book ‚ÄúHead First. Learning Go ¬ª</a></li>
<li><a href="../en495882/index.html">The 9 best open source finds for March 2020</a></li>
<li><a href="../en495884/index.html">Time Series Prediction Using Recurrent Neural Networks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>