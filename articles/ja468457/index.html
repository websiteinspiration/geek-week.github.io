<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏭 🍅 👨🏿‍🚀 ダミーのための簡単な算術例のジェネレーターだけでなく、 😥 🔬 🍔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！
 
 この「記事」、つまりエッセイでは、latexとpythonの非常に基本的なことを理解する非常に簡単な方法を示します。
 
 
 
 
 何のために？
 まあ、あなたは子供たちが数えるための簡単な表現を生成することができます。またはちょうどそのように。はい、あなたが私と同じくらい狂...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ダミーのための簡単な算術例のジェネレーターだけでなく、</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468457/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この「記事」、つまりエッセイでは、latexとpythonの非常に基本的なことを理解する非常に簡単な方法を示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f1/-j/h2/f1-jh2nzd35gg2r3mv3rpfsvi9u.jpeg"><br>
<br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何のために？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、あなたは子供たちが数えるための簡単な表現を生成することができます。</font><font style="vertical-align: inherit;">またはちょうどそのように。</font><font style="vertical-align: inherit;">はい、あなたが私と同じくらい狂信的であるならば、少なくとも壁紙をかぶせてください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはどのように機能するはずですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイデアは本当にとてもシンプルで、絶対に誰でもそのようなプログラムを書くことができます。</font><font style="vertical-align: inherit;">ある数n（ユーザーが入力する）に等しい式を生成したいとします。</font><font style="vertical-align: inherit;">たとえば、3 = 1 + 2のように、任意の数値を算術式で置き換えることができます。また、2は4/2です。このようにして、3 = 1 + 4/2を生成しました。</font><font style="vertical-align: inherit;">同様に、いくつかの異なる操作を紹介し、これを数式言語であるLaTeXでラップします。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要になるだろう...</font></font></b><div class="spoiler_text">    python  matplotlib.  .<br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主なメカニズム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
式を解析して、そこから数値を取得できるようにする必要があります。</font><font style="vertical-align: inherit;">私たちのクラスを問題のジェネレーターと呼びましょう（私たちはみんなそれをとても恋しく思います！）</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> random
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log
<span class="hljs-keyword">import</span> math
<span class="hljs-keyword">import</span> sys<font></font>
sys.setrecursionlimit(<span class="hljs-number">1000</span>)   <span class="hljs-comment">#      </span><font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProblemGenerator</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">extract_nums</span>(<span class="hljs-params">self, exp</span>):</span><font></font>
        symbols = list(exp)<font></font>
        NUM = <span class="hljs-string">"1234567890."</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(symbols)):<font></font>
            symbols[i] = <span class="hljs-string">"N"</span> <span class="hljs-keyword">if</span> symbols[i] <span class="hljs-keyword">in</span> NUM <span class="hljs-keyword">else</span> <span class="hljs-string">"T"</span><font></font>
        begins = []<font></font>
        ends = []<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(symbols) - <span class="hljs-number">1</span>):<font></font>
            fn = symbols[i] + symbols[i + <span class="hljs-number">1</span>]
            <span class="hljs-keyword">if</span> fn == <span class="hljs-string">"TN"</span>:<font></font>
                begins.append(i)<font></font>
            <span class="hljs-keyword">elif</span> fn == <span class="hljs-string">"NT"</span>:<font></font>
                ends.append(i)<font></font>
        <span class="hljs-keyword">if</span> exp[<span class="hljs-number">-1</span>] <span class="hljs-keyword">in</span> NUM:<font></font>
            ends.append(len(exp) - <span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> exp[<span class="hljs-number">0</span>] <span class="hljs-keyword">in</span> NUM:<font></font>
            begins = [<span class="hljs-number">-1</span>] + begins
        <span class="hljs-keyword">return</span> [(x + <span class="hljs-number">1</span>, y + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> zip(begins, ends)]<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
extract_nums関数の意味は、n組の数値（a、b）を取得することです。ここで、aは最初の文字の位置、bは最後の文字の位置+ 1です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次のコードを実行すると、</font></font><br>
<br>
<pre><code class="python hljs">gen = ProblemGenerator()<font></font>
print(gen.extract_nums(<span class="hljs-string">"13+256/355+25"</span>))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
様子を見よう：</font></font><br>
<br>
<pre><code class="plaintext hljs">[(0, 2), (3, 6), (7, 10), (11, 13)]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、それはタプル配列です。</font><font style="vertical-align: inherit;">（0、2）は、0（両端を含む）から2（両端を含まない）までの数値があることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、さまざまな演算子を作成したいと思います。乗算と合計から始めましょう。</font><font style="vertical-align: inherit;">3つの関数を宣言する</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unmin</span>(<span class="hljs-params">*args, acc=<span class="hljs-number">2</span></span>):</span><font></font>
    r = []<font></font>
    <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> args:<font></font>
        f = round(arg, acc)<font></font>
        <span class="hljs-keyword">if</span> f &gt; <span class="hljs-number">0</span>:<font></font>
            f = str(f)<font></font>
        <span class="hljs-keyword">else</span>:<font></font>
            f = <span class="hljs-string">"("</span> + str(f) + <span class="hljs-string">")"</span><font></font>
        r.append(f)<font></font>
    <span class="hljs-keyword">return</span> r<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__c_sum</span>(<span class="hljs-params">num</span>):</span>
    a = round(random.random() * <span class="hljs-number">100</span>, <span class="hljs-number">3</span>)<font></font>
    b = num - a<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> a + <span class="hljs-string">" + "</span> + b<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__c_mul</span>(<span class="hljs-params">num</span>):</span>
    a = num / (random.random() * <span class="hljs-number">100</span> + <span class="hljs-number">10</span>)
    <span class="hljs-keyword">if</span> a == <span class="hljs-number">0.0</span>:<font></font>
        b = random.random()<font></font>
    <span class="hljs-keyword">else</span>:<font></font>
        b = num / a<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> a + <span class="hljs-string">" * "</span> + b<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
unmin関数の本質は、単にすべての引数を文字列に変換することだけでなく、あるオペランドがゼロよりも小さい場合にそれを括弧で囲むことです。</font><font style="vertical-align: inherit;">たとえば、a = 3、b = -4という数値を取得しました。</font><font style="vertical-align: inherit;">書けば</font></font><br>
<br>
<pre><code class="python hljs">a = <span class="hljs-number">3</span>
b = <span class="hljs-number">-4</span><font></font>
a, b = unmin(a, b)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、a = "3"、b = "（-4）" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、残りの関数は明確です。__c_sumは、 "13 + 4"、および__c_mul "13 * 4"という形式の文字列を返します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これら2つの要素を組み合わせて、式の各数値を式に置き換えるだけです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ProblemGeneratorに次のコードを追加します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProblemGenerator</span>:</span><font></font>
...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
        self.funcs = []<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_expander</span>(<span class="hljs-params">self, func</span>):</span><font></font>
        self.funcs.append(func)<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">complexify</span>(<span class="hljs-params">self, num</span>):</span>
        <span class="hljs-keyword">return</span> random.choice(self.funcs)(num)<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__rxp__</span>(<span class="hljs-params">self, exp</span>):</span><font></font>
        x, y = random.choice(self.extract_nums(exp))<font></font>
        exp = exp[:x] + <span class="hljs-string">"("</span> + self.complexify(float(exp[x:y])) + <span class="hljs-string">")"</span> + exp[y:]
        <span class="hljs-keyword">return</span> exp<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">randexpr</span>(<span class="hljs-params">self, ans, steps</span>):</span><font></font>
        e = str(ans)<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(steps):<font></font>
            e = self.__rxp__(e)<font></font>
        <span class="hljs-keyword">return</span> e<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
complexifyはいくつかの数値を取り、文字列-複雑な式を返します。</font><font style="vertical-align: inherit;">たとえば、次のように書いた場合：</font></font><br>
<br>
<pre><code class="python hljs">gen = ProblemGenerator()<font></font>
gen.add_expander(__c_sum)<font></font>
print(gen.complexify(<span class="hljs-number">13</span>))
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々が得る：</font></font><br>
<br>
<pre><code class="plaintext hljs">31.2 + (-18.2)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
__rxp__はどのように機能しますか？</font><font style="vertical-align: inherit;">式から数値の位置をランダムに選択し（たとえば、「13 + 35/45」という式がある場合、（3、5）を選択したとします）、この数値をその数値に等しい式に置き換えます。</font><font style="vertical-align: inherit;">であり、Iはたいと：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"13 + 45分の35" -ランダム数（3、5）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"13+" + "（12 + 23）" + "/ 45" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"13 +（12 + 23）/ 45" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と__rxp__は機能します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、randexprは非常に簡単に機能します。</font><font style="vertical-align: inherit;">たとえば、4つのステップがある場合、式は次のように開きます。</font></font><br>
<br>
<pre><code class="plaintext hljs">13<font></font>
(5.62 + 7.38)<font></font>
((20.63 + (-15.01)) + 7.38)<font></font>
((20.63 + (-(67.5 + (-52.49)))) + 7.38)<font></font>
((20.63 + (-((15.16 + 52.34) + (-52.49)))) + 7.38)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行してみましょう：</font></font><br>
<br>
<pre><code class="python hljs">gen = ProblemGenerator()<font></font>
gen.add_expander(__c_sum)<font></font>
gen.add_expander(__c_mul)<font></font>
exp = gen.randexpr(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)<font></font>
print(exp)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果：</font></font><br>
<br>
<pre><code class="plaintext hljs">((6.63 + (56.62 + 16.8)) + (-((60.53 + 3.61) + 14.91)))
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラテックス</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
奇妙なことに、最も単純なままです。</font><font style="vertical-align: inherit;">いくつかの異なるLaTeXオペレーターを発表します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_sum</span>(<span class="hljs-params">num</span>):</span>
    a = <span class="hljs-number">100</span> ** (random.random() * <span class="hljs-number">2</span>)<font></font>
    b = num - a<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> a + <span class="hljs-string">" + "</span> + b<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_div</span>(<span class="hljs-params">num</span>):</span>
    a = num * (random.random() * <span class="hljs-number">100</span> + <span class="hljs-number">10</span>)
    <span class="hljs-keyword">if</span> a == <span class="hljs-number">0.0</span>:<font></font>
        b = random.random()<font></font>
    <span class="hljs-keyword">else</span>:<font></font>
        b = a / num<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\frac{"</span> + a + <span class="hljs-string">"}{"</span> + b + <span class="hljs-string">"}"</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_pow</span>(<span class="hljs-params">num</span>):</span>
    <span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> str(random.randint(<span class="hljs-number">2</span>, <span class="hljs-number">7</span>)) + <span class="hljs-string">"^{-\\infty}"</span>
    a = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) + <span class="hljs-number">3</span><font></font>
    b = math.log(abs(num), a)<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> (<span class="hljs-string">"-"</span> <span class="hljs-keyword">if</span> num &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>) + a + <span class="hljs-string">"^{"</span> + b + <span class="hljs-string">"}"</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_sqrt</span>(<span class="hljs-params">num</span>):</span>
    a = num ** <span class="hljs-number">0.5</span>
    a = unmin(a)[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\sqrt{"</span> + a + <span class="hljs-string">"}"</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_int</span>(<span class="hljs-params">num</span>):</span><font></font>
    patterns = [<font></font>
        (<span class="hljs-string">"x^{2}"</span>, (<span class="hljs-number">3</span> * num) ** (<span class="hljs-number">1</span>/<span class="hljs-number">3</span>), <span class="hljs-string">"dx"</span>),<font></font>
        (<span class="hljs-string">"y^{3}"</span>, (<span class="hljs-number">4</span> * num) ** (<span class="hljs-number">1</span>/<span class="hljs-number">4</span>), <span class="hljs-string">"dy"</span>),<font></font>
        (<span class="hljs-string">"\sqrt{t}"</span>, (<span class="hljs-number">1.5</span> * num) ** (<span class="hljs-number">2</span>/<span class="hljs-number">3</span>), <span class="hljs-string">"dt"</span>)<font></font>
    ]<font></font>
    p, b, f = random.choice(patterns)<font></font>
    b = str(round(b, <span class="hljs-number">3</span>))
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\int_{0}^{"</span> + b + <span class="hljs-string">"} "</span> + p + <span class="hljs-string">" "</span> + f<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_sig</span>(<span class="hljs-params">num</span>):</span>
    a = random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<font></font>
    b = random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>) + a<font></font>
    s = sum([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(a, b + <span class="hljs-number">1</span>)])<font></font>
    c = num / s<font></font>
    a, b, c = unmin(a, b, c)<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\sum_{i="</span> + a + <span class="hljs-string">"}^{"</span> + b + <span class="hljs-string">"} i*"</span> + c<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての関数をgenに追加します。</font></font><br>
<br>
<pre><code class="python hljs">gen = ProblemGenerator()<font></font>
gen.add_expander(__l_sum) <span class="hljs-comment">#   </span>
gen.add_expander(__l_div)   <span class="hljs-comment"># </span>
gen.add_expander(__l_pow) <span class="hljs-comment"># </span>
gen.add_expander(__l_sqrt) <span class="hljs-comment">#  </span>
gen.add_expander(__l_int)   <span class="hljs-comment">#  </span>
gen.add_expander(__l_sig)   <span class="hljs-comment">#  </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、結果の出力を追加します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<font></font>
plt.axis(<span class="hljs-string">"off"</span>)<font></font>
latex_expression = gen.randexpr(<span class="hljs-number">1</span>, <span class="hljs-number">30</span>)  <span class="hljs-comment"># 30  .    1</span>
plt.text(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-string">"$"</span> + latex_expression + <span class="hljs-string">"$"</span>, horizontalalignment=<span class="hljs-string">'center'</span>, verticalalignment=<span class="hljs-string">'center'</span>, fontsize=<span class="hljs-number">20</span>)<font></font>
plt.show()<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全コード</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> random
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log
<span class="hljs-keyword">import</span> math
<span class="hljs-keyword">import</span> sys<font></font>
sys.setrecursionlimit(<span class="hljs-number">1000</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProblemGenerator</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">extract_nums</span>(<span class="hljs-params">self, exp</span>):</span><font></font>
        symbols = list(exp)<font></font>
        NUM = <span class="hljs-string">"1234567890."</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(symbols)):<font></font>
            symbols[i] = <span class="hljs-string">"N"</span> <span class="hljs-keyword">if</span> symbols[i] <span class="hljs-keyword">in</span> NUM <span class="hljs-keyword">else</span> <span class="hljs-string">"T"</span><font></font>
        begins = []<font></font>
        ends = []<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(symbols) - <span class="hljs-number">1</span>):<font></font>
            fn = symbols[i] + symbols[i + <span class="hljs-number">1</span>]
            <span class="hljs-keyword">if</span> fn == <span class="hljs-string">"TN"</span>:<font></font>
                begins.append(i)<font></font>
            <span class="hljs-keyword">elif</span> fn == <span class="hljs-string">"NT"</span>:<font></font>
                ends.append(i)<font></font>
        <span class="hljs-keyword">if</span> exp[<span class="hljs-number">-1</span>] <span class="hljs-keyword">in</span> NUM:<font></font>
            ends.append(len(exp) - <span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> exp[<span class="hljs-number">0</span>] <span class="hljs-keyword">in</span> NUM:<font></font>
            begins = [<span class="hljs-number">-1</span>] + begins
        <span class="hljs-keyword">return</span> [(x + <span class="hljs-number">1</span>, y + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> zip(begins, ends)]<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
        self.funcs = []<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_expander</span>(<span class="hljs-params">self, func</span>):</span><font></font>
        self.funcs.append(func)<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">complexify</span>(<span class="hljs-params">self, num</span>):</span>
        <span class="hljs-keyword">return</span> random.choice(self.funcs)(num)<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__rxp__</span>(<span class="hljs-params">self, exp</span>):</span><font></font>
        x, y = random.choice(self.extract_nums(exp))<font></font>
        exp = exp[:x] + <span class="hljs-string">"("</span> + self.complexify(float(exp[x:y])) + <span class="hljs-string">")"</span> + exp[y:]
        <span class="hljs-keyword">return</span> exp<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">randexpr</span>(<span class="hljs-params">self, ans, steps</span>):</span><font></font>
        e = str(ans)<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(steps):<font></font>
            e = self.__rxp__(e)<font></font>
        <span class="hljs-keyword">return</span> e<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unmin</span>(<span class="hljs-params">*args, acc=<span class="hljs-number">2</span></span>):</span><font></font>
    r = []<font></font>
    <span class="hljs-keyword">for</span> arg <span class="hljs-keyword">in</span> args:<font></font>
        f = round(arg, acc)<font></font>
        <span class="hljs-keyword">if</span> f &gt; <span class="hljs-number">0</span>:<font></font>
            f = str(f)<font></font>
        <span class="hljs-keyword">else</span>:<font></font>
            f = <span class="hljs-string">"("</span> + str(f) + <span class="hljs-string">")"</span><font></font>
        r.append(f)<font></font>
    <span class="hljs-keyword">return</span> r<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__c_sum</span>(<span class="hljs-params">num</span>):</span>
    a = round(random.random() * <span class="hljs-number">100</span>, <span class="hljs-number">3</span>)<font></font>
    b = num - a<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> a + <span class="hljs-string">" + "</span> + b<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__c_mul</span>(<span class="hljs-params">num</span>):</span>
    a = num / (random.random() * <span class="hljs-number">100</span> + <span class="hljs-number">10</span>)
    <span class="hljs-keyword">if</span> a == <span class="hljs-number">0.0</span>:<font></font>
        b = random.random()<font></font>
    <span class="hljs-keyword">else</span>:<font></font>
        b = num / a<font></font>
    a, b = unmin(a, b, acc=<span class="hljs-number">5</span>)
    <span class="hljs-keyword">return</span> a + <span class="hljs-string">" * "</span> + b<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__c_sub</span>(<span class="hljs-params">num</span>):</span>
    a = num + <span class="hljs-number">100</span> ** (random.random() * <span class="hljs-number">2</span>)<font></font>
    b = (a - num)<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> a + <span class="hljs-string">" - "</span> + b<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__c_log</span>(<span class="hljs-params">num</span>):</span>
    fr = random.randint(<span class="hljs-number">300</span>, <span class="hljs-number">500</span>)<font></font>
    a = math.e ** (num / fr)<font></font>
    a, fr = unmin(a, fr, acc=<span class="hljs-number">5</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"log("</span> + a + <span class="hljs-string">") * "</span> + fr<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_sum</span>(<span class="hljs-params">num</span>):</span>
    a = <span class="hljs-number">100</span> ** (random.random() * <span class="hljs-number">2</span>)<font></font>
    b = num - a<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> a + <span class="hljs-string">" + "</span> + b<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_div</span>(<span class="hljs-params">num</span>):</span>
    a = num * (random.random() * <span class="hljs-number">100</span> + <span class="hljs-number">10</span>)
    <span class="hljs-keyword">if</span> a == <span class="hljs-number">0.0</span>:<font></font>
        b = random.random()<font></font>
    <span class="hljs-keyword">else</span>:<font></font>
        b = a / num<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\frac{"</span> + a + <span class="hljs-string">"}{"</span> + b + <span class="hljs-string">"}"</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_pow</span>(<span class="hljs-params">num</span>):</span>
    <span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> str(random.randint(<span class="hljs-number">2</span>, <span class="hljs-number">7</span>)) + <span class="hljs-string">"^{-\\infty}"</span>
    a = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) + <span class="hljs-number">3</span><font></font>
    b = math.log(abs(num), a)<font></font>
    a, b = unmin(a, b)<font></font>
    <span class="hljs-keyword">return</span> (<span class="hljs-string">"-"</span> <span class="hljs-keyword">if</span> num &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>) + a + <span class="hljs-string">"^{"</span> + b + <span class="hljs-string">"}"</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_sqrt</span>(<span class="hljs-params">num</span>):</span>
    a = num ** <span class="hljs-number">0.5</span>
    a = unmin(a)[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\sqrt{"</span> + a + <span class="hljs-string">"}"</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_int</span>(<span class="hljs-params">num</span>):</span><font></font>
    patterns = [<font></font>
        (<span class="hljs-string">"x^{2}"</span>, (<span class="hljs-number">3</span> * num) ** (<span class="hljs-number">1</span>/<span class="hljs-number">3</span>), <span class="hljs-string">"dx"</span>),<font></font>
        (<span class="hljs-string">"y^{3}"</span>, (<span class="hljs-number">4</span> * num) ** (<span class="hljs-number">1</span>/<span class="hljs-number">4</span>), <span class="hljs-string">"dy"</span>),<font></font>
        (<span class="hljs-string">"\sqrt{t}"</span>, (<span class="hljs-number">1.5</span> * num) ** (<span class="hljs-number">2</span>/<span class="hljs-number">3</span>), <span class="hljs-string">"dt"</span>)<font></font>
    ]<font></font>
    p, b, f = random.choice(patterns)<font></font>
    b = str(round(b, <span class="hljs-number">3</span>))
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\int_{0}^{"</span> + b + <span class="hljs-string">"} "</span> + p + <span class="hljs-string">" "</span> + f<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__l_sig</span>(<span class="hljs-params">num</span>):</span>
    a = random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<font></font>
    b = random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>) + a<font></font>
    s = sum([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(a, b + <span class="hljs-number">1</span>)])<font></font>
    c = num / s<font></font>
    a, b, c = unmin(a, b, c)<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\\sum_{i="</span> + a + <span class="hljs-string">"}^{"</span> + b + <span class="hljs-string">"} i*"</span> + c<font></font>
<font></font>
gen = ProblemGenerator()<font></font>
gen.add_expander(__l_sum)<font></font>
gen.add_expander(__l_div)<font></font>
gen.add_expander(__l_pow)<font></font>
gen.add_expander(__l_sqrt)<font></font>
gen.add_expander(__l_int)<font></font>
gen.add_expander(__l_sig)<font></font>
<font></font>
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<font></font>
plt.axis(<span class="hljs-string">"off"</span>)<font></font>
latex_expression = gen.randexpr(<span class="hljs-number">1</span>, <span class="hljs-number">30</span>)  <span class="hljs-comment"># 30  .    1</span>
plt.text(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-string">"$"</span> + latex_expression + <span class="hljs-string">"$"</span>, horizontalalignment=<span class="hljs-string">'center'</span>, verticalalignment=<span class="hljs-string">'center'</span>, fontsize=<span class="hljs-number">15</span>)<font></font>
plt.show()<font></font>
<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結果（3スクリーンショット）</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/hj/rd/-m/hjrd-matww-zx0rpwrsk_geioc8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/zx/8l/1d/zx8l1dmiv82imgkdihrajacadgi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/dk/wh/ix/dkwhix8voabixv2yjmmgsz59g0s.jpeg"><br>
<br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja468443/index.html">9月23日から29日までのモスクワでのデジタルイベント</a></li>
<li><a href="../ja468445/index.html">FirefoxとChromeはDNSクエリを暗号化し、検閲を回避します</a></li>
<li><a href="../ja468447/index.html">Laragon-自動ローカルドメインのWAMP</a></li>
<li><a href="../ja468453/index.html">MBLT19 ::レポート、製品の戦い、およびテスト</a></li>
<li><a href="../ja468455/index.html">素晴らしいGPSとそのダークサイド</a></li>
<li><a href="../ja468459/index.html">特徴的なレーダー探知機の概要：フラッグシップのPlayme Silent 2</a></li>
<li><a href="../ja468463/index.html">パーティショニングとインデックス作成によるZabbix + PostgreSQLのパフォーマンスの向上</a></li>
<li><a href="../ja468465/index.html">弁護士の見解：IT企業は有毒な政府顧客との契約をどのように終了できるか</a></li>
<li><a href="../ja468471/index.html">AngularConnect 2019の概要。パート1</a></li>
<li><a href="../ja468479/index.html">「人々は無料は価値がないと考えています。私は彼らを納得させることができたように思えました」-ルソル学校についてのユーリ・ヤルツェフ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>