<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ ğŸ•‹ ğŸ› Membuat keyboard MIDI dari synthesizer anak-anak tua ğŸ˜´ ğŸ‘¨ğŸ»â€ğŸŒ¾ ğŸ‘¨ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Suatu hari, kembali ke rumah, di dekat saluran sampah di pintu masuk, saya melihat synthesizer mainan anak-anak tua. Lewat, karena â€œberdosaâ€ untuk men...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Membuat keyboard MIDI dari synthesizer anak-anak tua</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500450/"><img src="https://habrastorage.org/webt/-g/1_/nu/-g1_nu7zf-kudqjkv5ygvqjysao.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suatu hari, kembali ke rumah, di dekat saluran sampah di pintu masuk, saya melihat synthesizer mainan anak-anak tua. Lewat, karena â€œberdosaâ€ untuk mengambilnya dari tempat sampah, tetapi dalam hati saya ingin menyeretnya keluar dari sana. Sudah larut malam, sekitar jam 2, saya memutuskan untuk melihat apakah dia masih berdiri di sana. Dan ya, dia masih di sana! Dalam penampilan, dia benar-benar utuh dan bersih, sehingga tidak ada mual agar tidak membawanya. Jadi ya, saya membawanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya sudah lama menginginkan piano untuk diri saya sendiri, saya bukan musisi profesional, tetapi hanya untuk bersenang-senang - mengapa tidak? Membeli sesuatu "demi memanjakan" Aku "dicekik oleh katak", dan di sini - mainan gratis. Ketika saya mengambilnya dari tempat sampah, saya bahkan tidak berpikir untuk menggunakannya sebagai mainan anak-anak, saya langsung berpikir: "Ohhhh ..., dasar yang bagus untuk mencoba membuat keyboard MIDI."</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena saya sudah memiliki pengalaman berkomunikasi dengan keyboard profesional dan keyboard MIDI, saya segera memahami semua kerugian dari ide saya. Artinya, mainan sebenarnya akan tetap menjadi mainan. Atas dasar itu tidak mungkin untuk menyadari kekuatan penekanan tombol. Kunci plastik "ringan" itu sendiri, yang juga tidak lengkap, tidak akan memungkinkan untuk melakukan sesuatu yang layak padanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama, synthesizer mainan dibongkar "ke sekrup", semua plastik dicuci dengan baik dengan sabun. Papan dan grup kontak kunci juga dibersihkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah pembongkaran, sebuah pemahaman datang tentang mengapa orang membuangnya. Sebuah mainan (saya tidak tahu mengapa: dari waktu ke waktu, dari kualitas komponen Tiongkok atau operasi yang berat) pertama: speaker internal berantakan, dan kedua: konektor yang rusak dari mereka tertahan di jack headphone, jadi praktis tidak ada cara untuk mengeluarkannya . Mungkin, setelah mainan berhenti bermain dengan speaker internal, mereka menggunakannya dengan headphone, dan kemudian setelah mereka merusak konektor di sana, mereka hanya membuangnya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di dalam, synthesizer mainan terdiri dari tiga papan yang saling terhubung oleh loop kabel. Dewan pusat, yang bertanggung jawab untuk menghasilkan suara dan hal-hal lain, segera dibebaskan dari dua papan lainnya dan disisihkan. Di dua papan lainnya ada kontak untuk tombol di panel depan mainan dan tuts piano itu sendiri. Saya menyolder konektor PBS kepada mereka, terutama karena lubang pitch di papan hanya 2,54 mm. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/mh/qc/bpmhqcxmblsmtoqy7zu7wfbqwm4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/nj/dr/us/njdrusxpjqa57hm8ezczbzidcu0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, saya menghabiskan beberapa jam membuat diagram papan-papan ini dengan kunci. Ternyata, skema tersebut adalah keyboard matriks sederhana. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/uh/m6/ytuhm6oamte_d4mo60zuvzucqfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada gambar dalam lingkaran kuning, angkanya adalah angka dari kontak "horisontal", dan angka pada tombol adalah angka dari kontak "vertikal" pada konektor PBS-13 pada papan keyboard.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m6/qc/lk/m6qclkogjo6vprfkk4ywi2qtqzq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n0/lz/tf/n0lztfhulhpdeytl2ltfl0zxqna.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bw/w2/pa/bww2pa-cgsmxubbn2ixa2sr373w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, semua ini dilemparkan ke sudut dan dibersihkan selama setahun. Dan kemudian periode isolasi diri dimulai ... Itu menjadi membosankan dan saya ingin melakukan sesuatu dengan tangan saya sendiri, terutama karena tidak ada tempat untuk pergi, dan itu tidak mungkin ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhirnya, saya memutuskan untuk mencoba menyelesaikan mainan ini setidaknya sedikit. Papan Arduino diambil sebagai dasar untuk pengontrol, dan karena jumlah gantungan kunci lebih besar dari jumlah pin Arduino UNO, saya memutuskan untuk menggunakan register geser 74HC595 dan 74HC165. Akibatnya, kami mendapat skema seperti itu.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/y9/m9/_jy9m906okczf38_zjmeyvy9qbc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sirkuit ini awalnya dirakit di papan tempat memotong roti tanpa solder. Untuk menguji operabilitas rangkaian (bahwa tidak ada kesalahan dalam koneksi di mana pun), program uji dikembangkan yang menunjukkan bahwa semuanya tampak berfungsi. Algoritme program uji sederhana: salah satu output dari chip output shift dihidupkan dan nilai dibaca dalam satu siklus dari chip input shift, sambil menekan tombol. Pada pandangan pertama, tidak ada yang meramalkan masalah ... dan semuanya tampak bekerja dengan baik ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bx/uh/an/bxuhanfuxtixrojargnmaeqv5oe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa hari berikutnya, saya perlahan mengerjakan "pekerjaan rumah," yaitu, dengan hati-hati menyolder semua komponen papan ke papan tempat memotong roti. Saya mengumpulkan semuanya dari apa yang ada di tempat saya. Dia mengambil Arduino NANO sebagai papan kontrol.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2o/h9/f-/2oh9f-a8fplwk8bqnt5dultsxee.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Sandwich" seperti itu dari papan disebabkan oleh kenyataan bahwa dua papan mainan (satu dengan tombol, dan yang lainnya dengan keyboard) terletak pada tingkat yang berbeda, dan sebelum saya menyolder semuanya saya berpikir: "Apakah mungkin entah bagaimana menghubungkannya bersama-sama menggunakan komponen yang saya miliki di rumah terlihat kurang lebih baik? " Dan ternyata desain dua papan ini saling terhubung oleh konektor. Dari sudut pandang saya, untuk opsi rumah, ketika kita duduk sendiri, ternyata cukup baik. Yang harus saya lakukan adalah memotong papan tempat memotong roti dan sedikit memodifikasi tubuh mainan sehingga Anda dapat menghubungkan kabel USB ke papan Arduino.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bb/xz/md/bbxzmdv5zabj-jq6hlyg7jhjpxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesadaran bahwa perangkat tidak bekerja persis seperti yang saya inginkan datang ketika saya menyelesaikan program pengujian. Algoritma itu sederhana: nyalakan setiap output dari chip 74HC595, dengan mempertimbangkan keadaan input dari chip 74HC165, dan tulis hasilnya dalam variabel yang terpisah. Secara total, 5 output dari 74HC595 terhubung ke keyboard, jadi pada akhirnya saya mendapat 40 bit (5 * 8) data setelah jajak pendapat ini. String 40 bit dikeluarkan ke konsol, dan tombol ditekan untuk melihat bagaimana perangkat menangani penekanan tombol secara bersamaan dari beberapa tombol.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d0/ra/o7/d0rao77gsxvrvtbeumy1ufguxsw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sinilah masalah muncul: jika Anda menekan satu tombol, semuanya baik-baik saja, tetapi ketika Anda mencoba untuk menekan lebih dari 2 tombol pada saat yang sama muncul situasi ketika tidak mungkin untuk memprediksi apa yang akan dibaca. Hasilnya bisa benar dengan satu kombinasi, dan dengan yang lain itu bisa benar-benar tidak dapat diprediksi. Masalahnya adalah bahwa fitur skema ini tidak diperhitungkan. Ketika beberapa tombol ditekan pada saat yang sama, tidak hanya beberapa vertikal dari pemindaian keyboard dikunci (ini diperbolehkan), tetapi beberapa garis horizontal dapat ditutup melalui tombol (yang tidak berarti diizinkan). Anda dapat membaca lebih lanjut tentang masalah ini dan bagaimana menyelesaikannya di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Saya memilih "solusi utama" dari masalahnya, yaitu: Saya memutuskan bahwa untuk setiap tombol di keyboard akan ada dioda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam benak saya, secara mental saya sudah mulai berpikir bagaimana saya harus memotong jejak di papan tulis dan meletakkan dioda di kasing SMD di celah. Saya naik ke ruang penyimpanan dan melihat bahwa saya tidak punya begitu banyak dioda dalam kasing SMD (jangan lupa bahwa kita semua duduk sendiri dan pergi ke toko untuk komponen radio sangat tidak mungkin - karena ini jelas bukan barang yang penting). Sedikit kesal, saya memutuskan untuk melihat lebih dekat pada papan: mungkin untuk menempatkan dioda keluaran pada beberapa trek (saya juga punya beberapa di antaranya). Dan kemudian saya melihat bahwa setiap tombol memiliki jumper (papan satu sisi) dan rangkaian dibuat sehingga alih-alih jumper ini Anda dapat meletakkan dioda. Segera saya pikir - Anda bahkan tidak perlu memotong apa pun, Anda hanya perlu meletakkan dioda keluaran daripada jumper di mana-mana.Saya juga tidak memiliki sejumlah dioda keluaran. Sebuah pemikiran muncul di kepalaku: "mungkin LED?" Rangkaian beroperasi pada +5V dan jika Anda menempatkan LED merah yang memiliki drop tegangan minimum (di antara LED), maka pada akhirnya harus ada tingkat logis untuk penentuan yang benar: kunci ditekan atau tidak.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ff/1c/37/ff1c37wrrsclbwl0d7edw1x-ork.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan pemikiran ini, saya naik ke saham saya lagi dan mengambil LED merah dari mana pun memungkinkan. Ada persis sebanyak tombol pada keyboard! Ini pertanda, saya pikir, dan menyolder beberapa LED alih-alih jumper untuk pengujian. Hasil tes menunjukkan bahwa solusinya bekerja. Setelah itu, saya menyolder LED yang tersisa, bukan jumper. Program pengujian menunjukkan bahwa Anda dapat menekan setidaknya semua tombol pada saat bersamaan, dan semuanya dibaca dengan benar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/i0/-b/g8i0-b1rwc2ykc3oq1hcecu-ohs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memutuskan untuk tidak meletakkan dioda pada tombol tambahan yang ada di mainan, karena tidak mungkin mereka akan ditekan oleh beberapa bagian sekaligus. Selain itu, dalam program ini saya belum memiliki pemrosesan untuk mengklik tombol-tombol ini. Yah, saya belum memutuskan bagaimana cara menggunakannya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Waktunya telah tiba untuk mencari tahu bagaimana membuat perangkat ini muncul di komputer Anda sebagai keyboard MIDI dan dalam format apa Anda perlu mengirim data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Informasi yang ditemukan di Internet mengatakan kepada saya bahwa adalah mungkin untuk membuat keyboard MIDI dari Arduino dengan sangat mudah dan hanya dengan menuangkan firmware ke dalamnya, yang akan membuat komputer melihatnya bukan sebagai port COM, tetapi sebagai keyboard MIDI. Awalnya, saya </font><font style="vertical-align: inherit;">dibimbing </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oleh keputusan ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tidak secara khusus membahas bagaimana penerapannya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, ketika saya mendapatkannya dan membacanya dengan saksama, saya menyadari bahwa papan NANO Arduino saya tidak akan cocok untuk solusi ini, karena memiliki port COM berdasarkan chip CH340. </font><font style="vertical-align: inherit;">Untuk menggunakan firmware dari tautan di atas, hanya kartu-kartu yang memiliki port USB yang sudah ada pada controller (misalnya: AtMega32u4) yang cocok atau komunikasi melalui port COM tidak dilakukan pada chip konversi jenis FT232RL atau sejenisnya, tetapi pada mikrokontroler AtMega. </font><font style="vertical-align: inherit;">Oleh karena itu, firmware di papan harus mengirim data dalam format MIDI ke port COM, dan pada komputer Anda harus menginstal dan mengkonfigurasi perangkat lunak yang akan mencegat data ini dan mengirimkannya ke port MIDI virtual. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algoritma untuk membaca kunci dan menghasilkan perintah MIDI adalah sebagai berikut:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/-2/d6/jj-2d67yncypthxguaeyvotcvue.jpeg"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Program untuk pengontrol Arduino NANO sekarang terlihat seperti ini.</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">//    +5V<font></font>
//   ST_CP  74HC595<font></font>
#define latchPin      11<font></font>
//   SH_CP  74HC595<font></font>
#define clockPin      13<font></font>
//   DS  74HC595<font></font>
#define dataPin       12<font></font>
<font></font>
//     +5V<font></font>
#define latchPin_IN   9<font></font>
#define clockPin_IN   10<font></font>
#define dataPin_IN    8<font></font>
<font></font>
// ,       1-16    <font></font>
#define BUT_OUT0      7<font></font>
#define BUT_OUT1      6<font></font>
#define BUT_OUT2      5<font></font>
#define BUT_OUT3      4<font></font>
<font></font>
byte but_out[4] = {BUT_OUT0, BUT_OUT1, BUT_OUT2, BUT_OUT3};<font></font>
//       <font></font>
byte kbd_in[5] = {0, 0, 0, 0, 0};<font></font>
byte kbd_in_new[5] = {0, 0, 0, 0, 0};<font></font>
<font></font>
//       <font></font>
byte btn_in[4] = {0, 0, 0, 0};<font></font>
byte btn_in_new[4] = {0, 0, 0, 0};<font></font>
<font></font>
//  3  -   (1 - , 0 - )<font></font>
byte kbd_out = 0b11100000;<font></font>
<font></font>
//  <font></font>
void init_electronics() {<font></font>
  //  ,   +5V<font></font>
  //  OUTPUT<font></font>
  pinMode(latchPin, OUTPUT);<font></font>
  pinMode(clockPin, OUTPUT);<font></font>
  pinMode(dataPin, OUTPUT);<font></font>
<font></font>
  //  ,   +5V<font></font>
  pinMode(latchPin_IN, OUTPUT);<font></font>
  pinMode(clockPin_IN, OUTPUT);<font></font>
  pinMode(dataPin_IN, INPUT);<font></font>
<font></font>
  //          <font></font>
  for (byte i = 0; i &lt; 4; i++) pinMode(but_out[i], OUTPUT);<font></font>
}<font></font>
<font></font>
//      74HC595<font></font>
void write_5V(byte a) {<font></font>
    digitalWrite(latchPin, LOW);<font></font>
    //    dataPin<font></font>
    shiftOut(dataPin, clockPin, MSBFIRST, a); <font></font>
     //"" ,      <font></font>
    digitalWrite(latchPin, HIGH); <font></font>
}<font></font>
<font></font>
void read_5V(byte *btn, byte *kbd) {<font></font>
  digitalWrite(clockPin_IN, HIGH);<font></font>
  digitalWrite(latchPin_IN, LOW);<font></font>
  digitalWrite(latchPin_IN, HIGH);<font></font>
  <font></font>
  //    -    <font></font>
  *btn = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
  <font></font>
  //    -    <font></font>
  *kbd = shiftIn(dataPin_IN, clockPin_IN, LSBFIRST);<font></font>
}<font></font>
<font></font>
void setup() {<font></font>
  init_electronics();<font></font>
  write_5V(kbd_out);<font></font>
  Serial.begin(115200);<font></font>
}<font></font>
<font></font>
//       ,   <font></font>
void read_kbd_and_btn_state(byte *btn, byte *kbd) {<font></font>
 byte tmp;<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    write_5V(kbd_out | (1 &lt;&lt; i));<font></font>
    read_5V(&amp;tmp, &amp;kbd[i]);<font></font>
  }<font></font>
}<font></font>
<font></font>
void noteOn(int cmd, int pitch, int velocity) {<font></font>
  Serial.write(cmd);<font></font>
  Serial.write(pitch);<font></font>
  Serial.write(velocity);<font></font>
}<font></font>
<font></font>
//     num  ,   <font></font>
// 0 -  0,  0<font></font>
// 1 -  0,  1<font></font>
// 2 -  1,  1<font></font>
// 3 -  1,  0<font></font>
byte compare_bit(byte old_state, byte new_state, byte num) {<font></font>
  byte tmp_old, tmp_new;<font></font>
  tmp_old = (old_state &gt;&gt; num) &amp; 1;<font></font>
  tmp_new = (new_state &gt;&gt; num) &amp; 1;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 0)) return 0;<font></font>
  if ((tmp_old == 0) &amp;&amp; (tmp_new == 1)) return 1;<font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 1)) return 2; <font></font>
  if ((tmp_old == 1) &amp;&amp; (tmp_new == 0)) return 3;  <font></font>
}<font></font>
<font></font>
void loop() {<font></font>
  read_kbd_and_btn_state(btn_in_new, kbd_in_new);<font></font>
  for (byte i = 0; i &lt; 5; i++) {<font></font>
    for (byte j = 0; j &lt; 8; j++) {<font></font>
      switch (compare_bit(kbd_in[i], kbd_in_new[i], 7 - j)) {<font></font>
        //  <font></font>
        case 1: noteOn(0x90, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 2: //noteOn(0x00, 0x1D + (8 * i + j), 0x7F);<font></font>
                break;<font></font>
        //  <font></font>
        case 3: noteOn(0x90, 0x1D + (8 * i + j), 0x00);<font></font>
                break;<font></font>
      }<font></font>
    }<font></font>
    kbd_in[i] = kbd_in_new[i];<font></font>
  }<font></font>
} <font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak masuk akal untuk melukis secara detail cara bekerja dengan data MIDI, karena dapat dibaca di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Saya akan membahas lebih rinci tentang perangkat lunak untuk komputer dan masalah yang saya temui. Masalah muncul, hanya karena kurangnya dokumentasi normal untuk perangkat lunak ini. Jadi, agar komputer dapat berhasil menerima data MIDI dari perangkat seperti milik saya, Anda akan membutuhkan dua program: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loopMIDI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serial-Midi Converter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Untuk Konial-MIDI Konverter, Anda juga perlu menginstal Java, jika tidak diinstal pada komputer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memulai program loopMIDI dan membuat dua port virtual. Saya memanggil mereka Arduino IN dan Arduino OUT. Program ini akan menjadi perangkat MIDI virtual.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/e8/do/hee8doojjloz3jiocd58qpugocg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, jalankan Serial-MIDI Converter dan saat startup kita pergi melalui proses pengaturannya. Sayangnya, Anda harus melakukan ini setiap kali Anda memulainya, tetapi itu tidak terlalu menakutkan, ini dilakukan secara harfiah dalam empat penekanan tombol pada keyboard. Nomor port COM mungkin berbeda, muncul di komputer ketika papan Arduino NANO terhubung. Kecepatan port diatur dalam firmware Arduino NANO. Panah merah menunjukkan pengaturan saya, di mana semuanya bekerja untuk saya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zu/qj/l0/zuqjl0ruk96yomobfupdvbstgps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya, proses pengaturan telah selesai dan Anda sudah dapat menggunakan beberapa perangkat lunak yang akan memutar suara dengan menerima penekanan tombol dari perangkat. Dalam pengaturan perangkat lunak, Anda harus memilih "Arduino_OUT" sebagai input. Pada gambar di bawah, contoh pengaturan Kontakt Player. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qs/eu/uu/qseuuugs_lbaywuoplve0qgc2wg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini akhirnya bekerja seperti ini:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cOnQOAYKlg0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa berikutnya? </font><font style="vertical-align: inherit;">Dan kemudian semuanya terjadi persis seperti yang saya harapkan - mainan itu tetap menjadi mainan dengan segala kekurangan yang saya sebutkan di awal. </font><font style="vertical-align: inherit;">Mungkin, anak akan memainkan yang ini dalam gebrakan, tetapi untuk orang dewasa, setelah instrumen keyboard normal ... Lebih mudah untuk membeli keyboard MIDI bekas dengan harga murah dan itu akan jauh lebih baik daripada mainan ini. </font><font style="vertical-align: inherit;">Saya memutuskan untuk meninggalkan mainan ini apa adanya, tetapi membuat beberapa modifikasi dengan itu:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tinggalkan case aslinya.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pasang speaker yang berfungsi dan buat amplifier untuk mereka.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadikan itu bekerja dalam mode "mainan anak-anak" tanpa menghubungkan ke komputer, yaitu, sehingga dapat memutar suara itu sendiri.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buatlah mungkin untuk menghubungkan FootSwitch (pedal yang sama pada piano di bawah) sehingga Anda dapat menahan suara setelah melepaskan tombol, seperti pada instrumen normal.</font></font></li>
<li>    ,       .</li>
<li>    ,      -,      .</li>
</ol><br>
<img src="https://habrastorage.org/webt/qa/79/bk/qa79bkjnapd9sf84teo-y_nxn0g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak dapat melakukan implementasi sebagian besar poin sementara kita semua bersama-sama "di rumah," karena saya tidak memiliki semua komponen yang diperlukan untuk ini di rumah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menerapkan paragraf 3 di Internet, sebuah solusi ditemukan disebut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SamplerBox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Inti dari proyek ini adalah Anda dapat menghubungkan keyboard MIDI ke papan Raspberry Pi, yang memproses perintah MIDI dari keyboard dan memainkan suara atau beralih instrumen, dll. Tetap hanya untuk menempatkan papan Raspberry Pi di dalam badan mainan, tanpa kemungkinan mengganti kartu SD (tanpa membongkar kasing), mengkonfigurasi tombol pada badan mainan sehingga mereka beralih alat dan ini akan cukup untuk meninggalkan proyek ini dalam bentuk ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi semua ini akan terjadi setelah periode isolasi diri berakhir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harap seseorang akan menemukan pengalaman saya yang berguna.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id500436/index.html">Datang dari jaringan saraf biner berdasarkan neuron acak dan fungsi logis</a></li>
<li><a href="../id500438/index.html">SFTP dan FTPS</a></li>
<li><a href="../id500444/index.html">9 Keterampilan pemrograman Python yang membedakan pemula dari yang berpengalaman</a></li>
<li><a href="../id500446/index.html">Beberapa kata tentang R2DBC dan PostgreSQL</a></li>
<li><a href="../id500448/index.html">Prometheus: Pemantauan HTTP melalui eksportir Blackbox</a></li>
<li><a href="../id500452/index.html">Alasan Tinggi dalam Pembelajaran Mendalam</a></li>
<li><a href="../id500454/index.html">"Marina apa?" atau kami mengontrol pengontrol via bluetooth menggunakan aplikasi seluler di Xamarin (Android)</a></li>
<li><a href="../id500456/index.html">BpfTrace - akhirnya, pengganti lengkap untuk Dtrace di Linux</a></li>
<li><a href="../id500458/index.html">Fitur Teknis Ucapan Online: Paket Pemula</a></li>
<li><a href="../id500462/index.html">Mendeteksi perubahan adegan dan menyimpan klip video h264 ke Raspberry Pi tanpa decoding</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>