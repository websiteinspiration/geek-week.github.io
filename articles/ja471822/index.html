<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🎤 👨🏼‍💻 🍁 Home Assistantとの最初の知り合い 🥐 😷 🏂🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Home Assistantは、スマートホームを整理するための人気のあるオープンソースアプリケーションです。著者のHome Assistantの最初の体験は、スマート炊飯器をそれに統合する試みに基づいています。著者は、このアプリケーションの主要なコンポーネントと機能を説明しようと試みます。この記事は...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Home Assistantとの最初の知り合い</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471822/"><img width="25%" align="right" src="https://habrastorage.org/webt/sj/wt/mu/sjwtmujve5xdbroiyxjiebxbc5o.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Home Assistantは、スマートホームを整理するための人気のあるオープンソースアプリケーションです。</font><font style="vertical-align: inherit;">著者のHome Assistantの最初の体験は、スマート炊飯器をそれに統合する試みに基づいています。</font><font style="vertical-align: inherit;">著者は、このアプリケーションの主要なコンポーネントと機能を説明しようと試みます。</font><font style="vertical-align: inherit;">この記事は、ある意味ではレビューであり、ある意味ではHome Assistantを使い始めたい人のためのガイドです。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自由時間がほとんどない人のために、私はあなたが言っていることをスキップすることをお勧めします-最初の章-と次の章にまっすぐ行くことです。</font><font style="vertical-align: inherit;">Xiaomiのスマートな中国炊飯器を使用することを知っておく必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマート炊飯器</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">炊飯器は明らかに炊飯器です。ウィキでは、紀元前1250年にさかのぼる大英博物館の陶器製蒸し器を紹介しています。 1945年、三菱商事は日本で最初の自家製電気炊飯器会社になりました。私たちのモデル、Xiaomiの炊飯器は、米だけでなく炊飯もできます。 「これは米だけでなく、他の種類の料理を作るための素晴らしい装置です。スープやペストリーなどを調理できます。しかし、最も重要なことは、wi-fiモジュール、自動化機能を備えたソフトウェア、および200以上のソフトウェアがインストールされたレシピの可用性です。 「胃を通るスマートホームへの道は正しい」と著者は考え、決定した。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Xiaomiライスクッカーは、デジタルデバイスにふさわしい外見上非常に魅力的で、丸い形状と一般的なミニマリズムが気に入っています。それを構成して使用するために、製造元はMi Homeアプリケーションを提供しています。 Miアカウントを登録すると、プログラムは簡単に新しいデバイスを検索し、ローカルネットワークに登録します。アプリケーションインターフェイスは最悪ではなく、基本的な自動化ツールを提供し、デバイスから通知を受信できます。ただし、重大な欠点があります。すべてのユーザーが、各ユーザーのクリックに関する情報を開発者に送信することに満足できるわけではありません。そして、今日よく言われる国民色は、不愉快な表情です。 200以上のレシピではなく、4つだけが翻訳され、外国語で利用できます。残りは中国人専用です。あなたの「スマート」炊飯器が約束された料理の義務をすべて果たすことができないとき、あなたは見るでしょう、それは悲しくなります。しばらくインターネットをさまよった後、悲しい著者が次の興味深いことに出会いました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（著者にとっての永遠の利益）。</font><font style="vertical-align: inherit;">これは、特定のHome Assistant用のモジュールの開発に特化していることがわかりました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホームアシスタント</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、一般的な情報です。</font><font style="vertical-align: inherit;">我々は上言われたよう</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAのホームページ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、「これは、ローカルの管理やプライバシーに焦点を当てたスマートホームオートメーションのためのオープンソースソフトウェアです。</font><font style="vertical-align: inherit;">マニアのオープンコミュニティの活動によって開発された、Raspberry Piまたはローカルサーバーでの作業に最適です。」</font><font style="vertical-align: inherit;">プロジェクトは5年以上前のもので、PythonとApache 2.0ライセンスを使用しています。</font><font style="vertical-align: inherit;">これらの行を記述した時点でのリリースバージョンは0.99.3です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HAは、個別のモジュール（統合、またはコンポーネント）を使用してデバイスを管理します。</font><font style="vertical-align: inherit;">作成は非常に簡単です。</font><font style="vertical-align: inherit;">サイトでは、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">基本的なの</font></a><font style="vertical-align: inherit;">カタログを見つけることができます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（コミュニティが承認およびサポート）モジュール。それらの総数（1485個）の中には、amazon、google、xiaomi、およびyandexがカタログにリストされた後でも、完全に多様な名前があります。</font><font style="vertical-align: inherit;">Linuxデスクトップの仮想環境にHA </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インストールして</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みましょう</font><font style="vertical-align: inherit;">。 python3とpipパッケージマネージャーが必要です。</font></font><br>
<pre><code class="bash hljs">python3 -m venv homeassistant <span class="hljs-comment">#   </span>
<span class="hljs-built_in">cd</span> homeassistant
<span class="hljs-built_in">source</span> bin/activate <span class="hljs-comment">#   </span>
python3 -m pip install homeassistant <span class="hljs-comment">#  Home Assistant</span>
hass --open-ui <span class="hljs-comment">#  Home Assistant</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、</font><font style="vertical-align: inherit;">HA </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">http：// localhost：8123で</font></a><font style="vertical-align: inherit;">利用可能</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">なります。初めてログインするときは、ユーザーアカウントを作成する必要があります。 HA Webインターフェースは非常に膨大です。最初に言及する価値のある重要な要素は、「構成」→「一般」タブです。このタブでは、構成ファイルまたはサーバー自体を簡単に再ロードできます。また、エラーログを確認できる開発者ツールのリストの情報ページ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linuxの場合、HAは必要なすべてのユーザーデータを「〜/ .homeassistant」設定フォルダーに保存します。設定ファイルは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">YAML</font></a><font style="vertical-align: inherit;">形式で書き込まれます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そして主なものは「configuration.yaml」です。</font><font style="vertical-align: inherit;">モジュール、オートメーションなどからのデータを統合します。</font><font style="vertical-align: inherit;">インポート機能を使用すると、設定を論理的に編成された個別のファイルに分割できます。</font><font style="vertical-align: inherit;">モジュールは、「components」（組み込み）および「custom_components」のサブフォルダーに格納されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この知識は、新しいモジュールをインストールするのに十分なはずです。</font><font style="vertical-align: inherit;">「xiaomi_cooker」フォルダをリポジトリから「〜/ .homeassistant / custom_components」にコピーします。</font><font style="vertical-align: inherit;">説明に従って、モジュール設定を「configuration.yaml」ファイルに追加します。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration.yaml</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">xiaomi_cooker: <span class="hljs-comment">#  </span>
    name: <span class="hljs-string">'Akari'</span> <span class="hljs-comment">#  </span>
    host: 192.168.1.10 <span class="hljs-comment"># IP  </span>
    token: <span class="hljs-string">'4921def609273302248d040a24243a25'</span> <span class="hljs-comment">#   Xiaomi</span>
    model: chunmi.cooker.normal2 <span class="hljs-comment">#  </span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
できました。</font><font style="vertical-align: inherit;">HAの再起動後、新しいモジュールエントリがWebインターフェイスのGeneral→Integrationsセクションに表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのモジュールは、特定のオブジェクト（エンティティ）とサービス（本質的にはサービス-サービス）のセットです。オブジェクトは、デバイスから受信したさまざまなデータを格納します。たとえば、sensor.xiaomi_cooker_temperatureは炊飯器の温度で、sun.sunは太陽の位置です。オブジェクトのデータは、1つの基本的な値-ステータス（状態）と、追加の属性（属性）の任意のセットで表されます。サービスは、コマンドと値をデバイスに送信するために使用されます。たとえば、xiaomi_cooker.start-炊飯器の操作を開始するコマンド、またはhomeassistant.check_config-HA設定ファイル内のエラーの検索の初期化。 Webインターフェイスの開発者ツールリストには[サービス]セクションがあり、利用可能なサービスのリストを表示して、その通話を試すことができます。近くには州のセクションがあり、それに応じてオブジェクトの値を表示および変更できます。状態セクションのオブジェクトの値の変更は一方的なものであることに注意してください。それら。たとえば、lights.stateオブジェクトの状態をオフからオンに変更した場合、これはデバイスの実際の状態には影響しません。次にデバイスからのデータが更新されると、オブジェクトの値は実際に上書きされます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オートメーション</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートホームの主な管理ツールは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">一般→自動化セクションのグラフィカルインターフェイスを使用するか、「automations.yaml」ファイルで直接、それらを追加および編集できます。</font><font style="vertical-align: inherit;">自動化の主な機能は、特定の条件が満たされたときにサービスを呼び出すことです。</font><font style="vertical-align: inherit;">オブジェクトの値を呼び出すための条件を設定するための基本的なツール。</font><font style="vertical-align: inherit;">時間データ。</font><font style="vertical-align: inherit;">イベントなど、もう少し具体的な解決策があります。</font><font style="vertical-align: inherit;">簡単な自動化の例として、著者のプラスネスデータを15分の期間で更新するコードを示します。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automations.yaml</font></font></b><div class="spoiler_text"><pre><code class="bash hljs"> - id: <span class="hljs-string">'1565889970818'</span> <span class="hljs-comment"># ID </span>
   <span class="hljs-built_in">alias</span>: Umpiro decharging <span class="hljs-comment"># </span>
   trigger: <span class="hljs-comment">#  </span>
   - platform: time_pattern <span class="hljs-comment">#   - </span>
     minutes: /15 <span class="hljs-comment">#   (   –    15 )</span>
   condition: [] <span class="hljs-comment">#   </span>
   action: <span class="hljs-comment">#   </span>
   - data: <span class="hljs-comment"># ,    </span>
       entity_id: sensor.umpiro_charge <span class="hljs-comment">#  (: )</span>
     service: homeassistant.update_entity <span class="hljs-comment">#   </span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでのところ、グラフィカルインターフェイスを介してyamlコードを編集せずに利用可能なすべての自動化（たとえば、上記）を構成できるわけではありませんが、開発者はこの欠点を解消するために積極的に取り組んでいると述べています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレート</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動化が終わったら、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（テンプレート）について説明します。 yamlファイルのさまざまな設定要素により</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、jinja2スクリプト言語で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">挿入を使用できます</font><font style="vertical-align: inherit;">。これらの要素の多くは、service_templateやtrigger_templateなどの「テンプレート」という共通名で結合されています。テンプレートを使用して、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HA内</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">オブジェクト</font></a><font style="vertical-align: inherit;">の値にアクセスし、</font><font style="vertical-align: inherit;">このデータを複雑な数式および論理式で使用できるため、潜在能力が大幅に拡大します。例として、「configuration.yaml」に書き留められたsensor.umpiro_chargeのもう少し複雑なコードを見てみましょう。これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template_sensorです</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つまり、「他のオブジェクトの値に基づいてデータを形成するセンサー」。</font><font style="vertical-align: inherit;">私たちのセンサーは、徐々に放電されるバッテリーのいくつかのアナログになります：</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration.yaml</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">sensor: <span class="hljs-comment">#  </span>
    platform: template <span class="hljs-comment">#   - </span>
    sensors: <span class="hljs-comment">#  </span>
        <span class="hljs-comment">#   – sensor.umpiro_charge</span><font></font>
        umpiro_charge:<font></font>
            <span class="hljs-comment">#      UI ()</span>
            unit_of_measurement: <span class="hljs-string">'%'</span>
            <span class="hljs-comment"># ,   </span><font></font>
            value_template: &gt;-<font></font>
                <span class="hljs-comment">#    –   ‘int’</span>
                <span class="hljs-comment"># +    </span>
                {% <span class="hljs-keyword">if</span> states(<span class="hljs-string">'sensor.umpiro_charge'</span>)|int(<span class="hljs-string">'unknown'</span>) is number %}
                    <span class="hljs-comment">#      </span>
                    <span class="hljs-comment">#        </span>
                    {% <span class="hljs-built_in">set</span> value = (states(<span class="hljs-string">'sensor.umpiro_charge'</span>)|int - (as_timestamp(now()) - as_timestamp(states.sensor.umpiro_charge.last_updated))/60/15)|round %}
                    <span class="hljs-comment">#      </span><font></font>
                    {{ [[0, value]|max, 100]|min }}<font></font>
                {% <span class="hljs-keyword">else</span> %}
                    <span class="hljs-comment"># ,  HA  </span>
                    <span class="hljs-comment">#     </span>
                    {{ <span class="hljs-string">'unknown'</span> }}<font></font>
                {% endif %}<font></font>
            <span class="hljs-comment"># ID  ,    </span>
            <span class="hljs-comment">#     </span><font></font>
            entity_id: []<font></font>
            friendly_name: <span class="hljs-string">'Charge'</span> <span class="hljs-comment">#  </span>
            <span class="hljs-comment">#      UI ()</span><font></font>
            device_class: battery<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
entity_idは空のままにしました。これは、オブジェクトのデータを個別に更新する自動化をすでに追加しているためです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonスクリプト</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、新しいサービスの作成には、シンプルなツールの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonスクリプト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Pythonスクリプト）を使用します。</font><font style="vertical-align: inherit;">「configuration.yaml」に「python script：」という行を追加すると、「〜/ .homeassistant / python_scripts」フォルダーに配置した拡張子「.py」のすべてのファイルが、「python_scripts」という名前のサービスとして利用できるようになります。&lt; file_name&gt;」。</font><font style="vertical-align: inherit;">それらのコードは事前定義された環境で実行されます。データとhass変数は、サービス呼び出しの引数だけでなく、HAオブジェクトとサービスへのアクセスを提供します。</font><font style="vertical-align: inherit;">例として、サービス「python_scripts.charge_set」のファイル「charge_set.py」のコードを示します。</font><font style="vertical-align: inherit;">その機能は、バッテリーの充電を設定することです：</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python_scripts / charge_set.py</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#     </span>
name = data.get(<span class="hljs-string">'name'</span>, <span class="hljs-string">'sensor.umpiro_charge'</span>)
<span class="hljs-comment">#    </span>
new_state = data.get(<span class="hljs-string">'charge'</span>, <span class="hljs-string">'100'</span>)
<span class="hljs-comment">#   </span><font></font>
attributes = hass.states.get(name).attributes<font></font>
<span class="hljs-comment">#   </span>
hass.states.set(name, new_state, attributes)</code></pre><br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合の作成</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレートとPythonスクリプトの助けを借りて行ったすべてのこと、おそらく別のモジュールを書くことでこれを行う方が簡単でしょう。</font><font style="vertical-align: inherit;">すでに述べたように、非公式のモジュールは「custom_components」フォルダに格納されています。</font><font style="vertical-align: inherit;">将来的には、炊飯器の現在のレシピに関する情報を格納するオブジェクトと、このデータを変更できるサービスが必要になります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントの例に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基づいて、</font><font style="vertical-align: inherit;">このための新しいモジュール「overmind」を作成します。</font><font style="vertical-align: inherit;">最初のステップは、custom_components / overmind / __ init__.pyファイルです。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">custom_components / overmind / __ init__.py</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#    </span>
DOMAIN = <span class="hljs-string">'overmind'</span>
<span class="hljs-comment">#       ()</span><font></font>
DEFAULT_RECIPE = {<font></font>
<span class="hljs-string">"title"</span>: <span class="hljs-string">"Habr post"</span>,
<span class="hljs-string">"description"</span>: <span class="hljs-string">"Post an article on habr.com"</span>,
 <span class="hljs-string">"profile"</span>: <span class="hljs-string">"471822"</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">#   </span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setup</span>(<span class="hljs-params">hass, config</span>):</span>
    <span class="hljs-comment">#   </span>
    hass.states.set(<span class="hljs-string">'overmind.current_recipe'</span>, <span class="hljs-string">'on'</span>, DEFAULT_RECIPE)<font></font>
<font></font>
    <span class="hljs-comment">#      </span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_set</span>(<span class="hljs-params">call</span>):</span>
    <span class="hljs-comment">#   </span><font></font>
    recipe = call.data.get(‘recipe’, DEFAULT_RECIPE)<font></font>
    <span class="hljs-comment">#   -   </span>
    hass.states.set(<span class="hljs-string">'overmind.current_recipe'</span>, <span class="hljs-string">'set'</span>, recipe)<font></font>
<font></font>
<span class="hljs-comment">#      </span>
hass.services.register(DOMAIN, <span class="hljs-string">'recipe_set'</span>, handle_set)
<span class="hljs-keyword">return</span> <span class="hljs-literal">True</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、新しいモジュールを構成ファイル「configuration.yaml」に報告し、モジュール名「overmind：」を含む行を追加します。</font><font style="vertical-align: inherit;">問題は解決された。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lovelace UI</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、使用されている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フロントエンド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HAの名前です</font><font style="vertical-align: inherit;">。通常のユーザーがスマートホームを制御するために招待されるこのグラフィカルインターフェイスは、HA Webインターフェイスのフロントページです。 LUIインターフェースはさまざまなタイプのカードで構成されており、オブジェクトの値を反映したり、関数やその他のタスクを呼び出したりすることができます。カードは、ブラウザのブックマークと同様に、ページ（ビュー）で配布できます。セットアップは同じグラフィカルインターフェースを介して便利に構成されていますが、組み込みのテキストエディターもあるyaml-codeを介してアクセスすることもできます。</font><font style="vertical-align: inherit;">LUI設定のいくつかの異なる例があり、それらを簡単に確認、クリック、および変更できる場所</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://demo.home-assistant.io/をご覧になる</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことをお勧めします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/64/bd/zf/64bdzfwclc_3sqnoek13735wgqq.png"><br>
<i><font color="grey"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラフィカルインターフェースのカスタマイズの例インターフェース</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の欠点について言えば、残念ながら、開発者自身がプロジェクトがデスクトップとスマートフォンの椅子に同時に座っていることを認めています。 LUIはデフォルトで、カードの位置とサイズを個別に決定することを好みます。これにより、モニター上では正常に見えるページがスマートフォンの画面上で乱雑になり、逆の場合もあります。インターフェイスを簡素化するための簡単なツールがいくつかありますが、私の経験では、それらは常に効果的ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフィカルツールを使用したインターフェースの作成について説明するのはあまり意味がないと思うので、使用したyamlコードの形式でいくつかの例を示します。</font><font style="vertical-align: inherit;">炊飯器用に別のページ（ビュー）を作成したら、スマートフォンの画面を使用したときに拒否されないように、最も必要な要素をそのページに入力してみます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、これらの非常にシンプルなインターフェース注文ツールを試してみます。これらは、水平スタックと垂直スタックです。</font><font style="vertical-align: inherit;">最初に、エンティティボタンとセンサータイプのカードから垂直スタックを作成します。</font><font style="vertical-align: inherit;">1つ目は炊飯器の起動に使用し、2つ目は温度を表示します。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直スタック</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">cards: <span class="hljs-comment">#   </span>
  - <span class="hljs-built_in">type</span>: entity-button <span class="hljs-comment">#     </span>
      entity: sensor.xiaomi_cooker_state <span class="hljs-comment"># ,    </span>
      icon: <span class="hljs-string">'mdi:selection'</span> <span class="hljs-comment">#    </span>
      icon_height: 100px <span class="hljs-comment">#  </span>
      name: Offline <span class="hljs-comment">#   </span>
      show_icon: <span class="hljs-literal">true</span> <span class="hljs-comment">#</span>
      show_name: <span class="hljs-literal">true</span> <span class="hljs-comment">#</span>
      tap_action: <span class="hljs-comment">#   </span>
      action: call-service <span class="hljs-comment">#  –  </span>
      service: script.turn_on <span class="hljs-comment">#  –  </span>
      service_data: <span class="hljs-comment">#   </span>
      entity_id: script.order_cooker_start <span class="hljs-comment">#  –  </span>
      hold_action: <span class="hljs-comment">#   </span>
      action: none <span class="hljs-comment">#</span>
  - <span class="hljs-built_in">type</span>: sensor <span class="hljs-comment">#     </span>
      entity: sensor.xiaomi_cooker_temperature <span class="hljs-comment"># ,    </span>
      name: Temper <span class="hljs-comment">#  </span>
<span class="hljs-built_in">type</span>: vertical-stack <span class="hljs-comment">#   –  </span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Home Assistantには、</font><font style="vertical-align: inherit;">適切な名前（たとえば、mdi：selection）を使用して設定項目で使用できる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マテリアルデザインアイコンの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーカイブが含ま</font><font style="vertical-align: inherit;">れています。</font><font style="vertical-align: inherit;">サービスの呼び出しに使用したスクリプト（この場合、python-ではなくyaml-）も、便利なHAツールの1つです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、上記の縦型スタックを、現在の横型スタックにある私たちの縦向きのカードと組み合わせます。</font><font style="vertical-align: inherit;">すべてが同じくらい簡単になります：</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水平スタック</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">ards: <span class="hljs-comment">#   </span>
  - <span class="hljs-built_in">type</span>: picture <span class="hljs-comment">#  </span>
    image: /<span class="hljs-built_in">local</span>/akari_r.jpg <span class="hljs-comment">#   </span>
  - <span class="hljs-comment">#        </span>
<span class="hljs-built_in">type</span>: horizontal-stack <span class="hljs-comment">#   –  </span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで 'image：'という行をマークする必要があります。</font><font style="vertical-align: inherit;">フォルダ「〜/ .homeassistant / www」に配置するすべてのファイルは、リンク</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// localhost / local / filenameで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用可能になり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のステップは、作成したサービス呼び出しボタンを少し操作することです。</font><font style="vertical-align: inherit;">それがトグルスイッチとして機能した場合、つまり、</font><font style="vertical-align: inherit;">オン/オフであり、現在の方法ではありません。</font><font style="vertical-align: inherit;">これは、条件付きカードを使用して実現できます。条件付きカードは、特定の条件を設定することによって画面上の表示を調整できます。</font><font style="vertical-align: inherit;">以下はカードのコードです。これは炊飯器をオフにするボタンであり、炊飯器が料理を準備しているときにのみ表示されます。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件付き</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">card: <span class="hljs-comment">#   </span>
     entity: sensor.xiaomi_cooker_state <span class="hljs-comment">#</span>
          icon: <span class="hljs-string">'mdi:star-box-outline'</span> <span class="hljs-comment">#</span>
          icon_height: 100px <span class="hljs-comment">#</span>
          name: Running <span class="hljs-comment">#</span>
          tap_action: <span class="hljs-comment">#</span>
            action: call-service <span class="hljs-comment">#</span>
            service: xiaomi_cooker.stop <span class="hljs-comment">#</span>
          <span class="hljs-built_in">type</span>: entity-button <span class="hljs-comment">#</span>
      conditions: <span class="hljs-comment">#  </span>
          <span class="hljs-comment"># ,   </span><font></font>
          entity: sensor.xiaomi_cooker_mode<font></font>
          <span class="hljs-comment">#  ,    </span><font></font>
          state: Running<font></font>
<span class="hljs-built_in">type</span>: conditional <span class="hljs-comment">#  </span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前に作成した電源ボタンコードを同様の方法で書き換え、これと組み合わせると、1つのボタンがオンとオフの両方で機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、別のカードで私たちの興味を補足します-調理の終わりまでの時間表示（温度カードと同様）と、準備されているレシピの詳細（カスタム：レシピカード）を備えた別のカード。</font><font style="vertical-align: inherit;">その結果、次のようなものが得られます。</font></font><br>
<div style="text-align:center;"><img width="50%" src="https://habrastorage.org/webt/k6/kv/zq/k6kvzqqugn8sizjtsemxyufquo8.jpeg"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムカード</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホームアシスタントは、組み込みのカードタイプセットの豊富さに加えて、もちろん、独自のカードタイプを作成する機能を提供します。</font><font style="vertical-align: inherit;">このようなカードはカスタムカードと呼ばれ、JavaScriptを使用して作成されます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つの簡単なコードの例です。</font><font style="vertical-align: inherit;">ネットワーク</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまな</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">愛好家</font></a><font style="vertical-align: inherit;">によって作成された既製のカードを見つけるのは簡単</font><font style="vertical-align: inherit;">です。自分で実験したい場合は、</font><font style="vertical-align: inherit;">新しい</font><font style="vertical-align: inherit;">カードの作成</font><font style="vertical-align: inherit;">作業を簡略化するために作成された</font><font style="vertical-align: inherit;">特別な</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">js-modules</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があることを確認すると便利です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私のjavascriptの経験はそれほど望ましくありません。したがって、例として、現在のレシピを選択して表示するために使用されるカードコードのほんの一部のみを示します。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www / recipe-card.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {
<span class="hljs-comment">//     lit-element</span><font></font>
    LitElement,<font></font>
    html,<font></font>
    css<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">"https://unpkg.com/lit-element@latest/lit-element.js?module"</span>;<font></font>
<font></font>
<span class="hljs-comment">//     </span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RecipeCard</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">LitElement</span> </span>{ 
    <span class="hljs-comment">//     HA</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">properties</span>() {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">hass</span>: {},
            <span class="hljs-attr">config</span>: {}<font></font>
        };<font></font>
    }<font></font>
    <span class="hljs-comment">//   </span><font></font>
    callServiceEx() {<font></font>
        <span class="hljs-keyword">this</span>.hass.callService(<span class="hljs-string">'persistent_notification'</span>, <span class="hljs-string">'create'</span>, {<span class="hljs-attr">message</span>: <span class="hljs-string">'example'</span>});<font></font>
    }<font></font>
    <span class="hljs-comment">//  html- </span><font></font>
    render() {<font></font>
        <span class="hljs-comment">//    ,    </span>
        <span class="hljs-keyword">const</span> entityId = <span class="hljs-keyword">this</span>.config.entity;
        <span class="hljs-comment">//   </span>
        <span class="hljs-keyword">const</span> state = <span class="hljs-keyword">this</span>.hass.states[entityId];
        <span class="hljs-comment">//   </span>
        <span class="hljs-keyword">const</span> titleStr = state ? state.attributes.title : <span class="hljs-string">'unavailable'</span>;
        <span class="hljs-keyword">const</span> descrStr = state ? state.attributes.description : <span class="hljs-string">'unavailable'</span>;
        <span class="hljs-comment">//   </span>
        <span class="hljs-keyword">return</span> html`<span class="xml">
            <span class="hljs-tag">&lt;<span class="hljs-name">ha-card</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top:16px;"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">ha-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"mdi:bowl"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ha-icon</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"name"</span>&gt;</span>Recipe<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex info"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-bottom:16px;"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"recipe-title"</span>&gt;</span></span><span class="hljs-subst">${titleStr}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"recipe-descr"</span>&gt;</span></span><span class="hljs-subst">${descrStr}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ha-card</span>&gt;</span>
        `</span>;<font></font>
 }<font></font>
<span class="hljs-comment">//    </span>
customElements.define(<span class="hljs-string">'recipe-card'</span>, RecipeCard);</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいカードを使用するには、LUI設定ファイルの先頭に次のコードを追加する必要があります。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レシピカード</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">resources: <span class="hljs-comment">#   </span>
 - <span class="hljs-built_in">type</span>: module <span class="hljs-comment">#   – </span>
   url: /<span class="hljs-built_in">local</span>/recipe-card.js <span class="hljs-comment">#  </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてカードのリストの中で：</font></font><br>
<pre><code class="bash hljs"> - <span class="hljs-built_in">type</span>: <span class="hljs-string">'custom:recipe-card'</span> <span class="hljs-comment">#  </span>
   entity: overmind.current_recipe <span class="hljs-comment"># ,    </span>
</code></pre><br>
<br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">お知らせ</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートホームの必要な部分は、ユーザーにメッセージを送信することです。 HAでは、このようなメッセージは通知と呼ばれ、通知には2つの基本的なタイプがあります。 1つは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">永続的な通知です。それらを送信するには、組み込みサービス「persistent_notification.create」が使用されます。このようなメッセージのリストは、グラフィカルインターフェイスのベルアイコンから利用できます。これらのメッセージは、マークダウンマークアップを使用しており、基本的に非常に単純です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つの、より興味深いツールは組み込み通知モジュールです。追加のモジュールをインストールすると、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サードパーティのプラットフォーム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してメッセージを送信できます</font><font style="vertical-align: inherit;">。例として、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電報用</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">モジュールを</font></a><font style="vertical-align: inherit;">考え</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このモジュールを使用するには、まず電報自体にボットを作成する必要があります。</font><font style="vertical-align: inherit;">セットアップ時には、ユーザーのchat_idとトークンボットAPIが必要です。</font><font style="vertical-align: inherit;">このデータを取得する方法-上記のリンクで詳細に説明されているように、準備ができていると想定しています。</font><font style="vertical-align: inherit;">モジュールのインストールに直接移動します。最初に、既に行ったように、そのソースコードをcomponentsフォルダーにコピーしてから、その設定を「configuration.yaml」ファイルに追加します。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration.yaml</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">telegram_bot: <span class="hljs-comment">#   telegram</span>
   platform: polling <span class="hljs-comment">#  </span>
   api_key: XXXXXXXXXXXXX <span class="hljs-comment"># API Token  </span><font></font>
   allowed_chat_ids:<font></font>
       XXXXXXX <span class="hljs-comment"># chat_id   </span>
   proxy_url: socks5://XXXXXXXXXXXXX <span class="hljs-comment">#    </span><font></font>
   proxy_params:<font></font>
       username: umpiro<font></font>
       password: umpiro_password</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、通知モジュールの設定：</font></font><br>
<pre><code class="bash hljs">notify: <span class="hljs-comment">#   notify</span>
    name: notify_send <span class="hljs-comment">#   (   –  notify.notify_send)</span>
    platform: telegram <span class="hljs-comment">#  </span>
    chat_id: XXXXXXX <span class="hljs-comment"># chat_id  </span></code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
電報モジュールを使用すると、メッセージ、写真、またはビデオを送信できます。</font><font style="vertical-align: inherit;">例として、料理の準備が完了したことを通知する写真付きのメッセージを送信する自動化を作成します。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automations.yaml</font></font></b><div class="spoiler_text"><pre><code class="bash hljs"> - id: <span class="hljs-string">'1571074941908'</span> <span class="hljs-comment"># ID </span>
   <span class="hljs-built_in">alias</span>: EOC <span class="hljs-comment">#  </span>
   trigger: <span class="hljs-comment">#   </span>
      <span class="hljs-comment"># ,  </span><font></font>
    - entity_id: sensor.xiaomi_cooker_mode<font></font>
      from: Running <span class="hljs-comment">#   </span>
     <span class="hljs-comment">#   –   </span><font></font>
      platform: state<font></font>
      to: Waiting <span class="hljs-comment">#   </span>
   condition: [] <span class="hljs-comment">#  </span>
   action: <span class="hljs-comment">#   </span>
    - service: notify.notify_send <span class="hljs-comment">#  –  </span>
      data: <span class="hljs-comment"># ,    </span>
         title: End of Cooking <span class="hljs-comment"># </span>
         message: <span class="hljs-string">"EOC"</span> <span class="hljs-comment"># </span>
         data: <span class="hljs-comment">#   </span>
           photo: <span class="hljs-comment">#   - </span>
              <span class="hljs-comment">#  </span><font></font>
            - file: /home/umpiro/.homeassistant/www/cat.jpg<font></font>
              <span class="hljs-comment">#  </span>
              caption: “EOC”</code></pre><br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あとがき</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホームアシスタントは、スマートホームのローカル管理を整理しようとするユーザーにとって興味深いものです。これは、コミュニティの努力により、幅広く、興味深く、公然と積極的に開発しているプロジェクトです。さまざまなHome Assistantツールは喜ばずにはいられません（いくつかの重要なツールについて言及する時間はありませんでした）。マイナスとして、ドキュメントの相対的な複雑さと不完全さについて言及できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、10月10日に、これをリリース、つまりプロジェクトのバージョン0.99からバージョン0.100への移行と呼ぶことができるかどうかわかりません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースノートからの引用：</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに別のすばらしいリリースのリリースノートへようこそ！</font><font style="vertical-align: inherit;">いいえ、1.0は使用しません。0.100を使用します。</font><font style="vertical-align: inherit;">1.0の目標はまだ整っていないように感じますが、日々進歩しています。</font><font style="vertical-align: inherit;">私たちが考えていることのこっそりしたピークについては</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、Home Assistant 1.0の</font></a><font style="vertical-align: inherit;">ブログ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Simpleモードを</font></a><font style="vertical-align: inherit;">チェックしてください</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471810/index.html">Active Directoryの変更を監査するためのツールを比較する：Quest Change AuditorとNetwrix Auditor</a></li>
<li><a href="../ja471812/index.html">ソフトウェア開発者向けの無料のWolframエンジンライブラリ</a></li>
<li><a href="../ja471814/index.html">WolframClientForPython | Python用の新しいWolfram言語クライアントライブラリ</a></li>
<li><a href="../ja471816/index.html">macOS Catalina 10.15のアプリに署名する方法</a></li>
<li><a href="../ja471820/index.html">電話詐欺師。ステップ3、銀行のセルが作成されたという文書を受け取ります</a></li>
<li><a href="../ja471824/index.html">ディスケットカメラ：Sony Mavica MVC-FD85に関する8つの興味深い事実（多くの写真）</a></li>
<li><a href="../ja471836/index.html">自動化されたPythonコードの視覚化。パート4：ドキュメントのサポート</a></li>
<li><a href="../ja471838/index.html">数学の愛</a></li>
<li><a href="../ja471840/index.html">面接に行く理由</a></li>
<li><a href="../ja471844/index.html">カザフスタンのEPAM INSIDERを訪れる5つの理由</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>