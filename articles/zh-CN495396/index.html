<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤® ğŸ™ğŸ¾ ğŸ’„ æ¦‚å¿µçš„ç¬¬ä¸€å°è±¡ ğŸ¥‰ ğŸ¯ ğŸ˜ƒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘å†³å®šå¤„ç†æ–°çš„C ++ 20åŠŸèƒ½-æ¦‚å¿µã€‚
 
 æ¦‚å¿µï¼ˆæˆ–è®²ä¿„è¯­çš„Wikiæ‰€å†™çš„æ¦‚å¿µï¼‰æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£ä¸”æœ‰ç”¨çš„åŠŸèƒ½ï¼Œé•¿æœŸä»¥æ¥ä¸€ç›´ç¼ºä¹ã€‚
 
 æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯åœ¨è¾“å…¥æ¨¡æ¿å‚æ•°ã€‚
 
 C ++ 20ä¹‹å‰çš„æ¨¡æ¿çš„ä¸»è¦é—®é¢˜æ˜¯æ‚¨å¯ä»¥æ›¿æ¢å…¶ä¸­çš„ä»»ä½•å†…å®¹ï¼ŒåŒ…æ‹¬æ ¹æœ¬æ²¡æœ‰è®¾è®¡çš„å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡æ¿ç³»ç»Ÿæ˜¯å®Œå…¨æ²¡æœ‰ç±»å‹çš„ã€‚ç»“æœ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æ¦‚å¿µçš„ç¬¬ä¸€å°è±¡</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495396/"><img src="https://habrastorage.org/webt/qd/ja/kc/qdjakcxd4173w_juzv5fx3bf0_o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å†³å®šå¤„ç†æ–°çš„C ++ 20åŠŸèƒ½-æ¦‚å¿µã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¦‚å¿µ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆæˆ–</font><font style="vertical-align: inherit;">è®²ä¿„è¯­çš„Wikiæ‰€å†™çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¦‚å¿µ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£ä¸”æœ‰ç”¨çš„åŠŸèƒ½ï¼Œé•¿æœŸä»¥æ¥ä¸€ç›´ç¼ºä¹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯åœ¨è¾“å…¥æ¨¡æ¿å‚æ•°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C ++ 20ä¹‹å‰çš„æ¨¡æ¿çš„ä¸»è¦é—®é¢˜æ˜¯æ‚¨å¯ä»¥æ›¿æ¢å…¶ä¸­çš„ä»»ä½•å†…å®¹ï¼ŒåŒ…æ‹¬æ ¹æœ¬æ²¡æœ‰è®¾è®¡çš„å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¨¡æ¿ç³»ç»Ÿæ˜¯å®Œå…¨æ²¡æœ‰ç±»å‹çš„ã€‚ç»“æœï¼Œå°†é”™è¯¯çš„å‚æ•°ä¼ é€’ç»™æ¨¡æ¿æ—¶ï¼Œå‡ºç°äº†éš¾ä»¥ç½®ä¿¡çš„æ¼«é•¿ä¸”å®Œå…¨æ— æ³•è¯»å–çš„é”™è¯¯æ¶ˆæ¯ã€‚ä»–ä»¬è¯•å›¾å€ŸåŠ©ä¸åŒçš„è¯­è¨€æŠ€å·§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»€è‡³ä¸æƒ³æåŠï¼ˆå°½ç®¡æˆ‘ä¸å¾—ä¸å¤„ç†ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¾è®¡æ¦‚å¿µæ˜¯ä¸ºäº†çº æ­£è¿™ç§è¯¯è§£ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬åœ¨æ¨¡æ¿ä¸­æ·»åŠ äº†æ‰“å­—ç³»ç»Ÿï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œåœ¨äº†è§£äº†è¯¥ç³»ç»Ÿçš„åŠŸèƒ½ä¹‹åï¼Œæˆ‘å¼€å§‹ç ”ç©¶Internetä¸Šçš„å¯ç”¨èµ„æ–™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦ç™½è¯´ï¼Œæˆ‘æœ‰ç‚¹éœ‡æƒŠï¼šï¼‰ C ++æ˜¯ä¸€ç§å·²ç»å¾ˆå¤æ‚çš„è¯­è¨€ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªå€Ÿå£ï¼šå®ƒå‘ç”Ÿäº†ã€‚</font><font style="vertical-align: inherit;">è®¾è®¡è¯­è¨€æ—¶ï¼Œå‘ç°è€Œä¸æ˜¯æ”¾ä¸‹å¯¹æ¨¡æ¿çš„å…ƒç¼–ç¨‹ã€‚</font><font style="vertical-align: inherit;">ç„¶åï¼Œåœ¨å¼€å‘è¯¥è¯­è¨€çš„ä¸‹ä¸€ç‰ˆæœ¬æ—¶ï¼Œç”±äºä¸–ç•Œä¸Šç¼–å†™äº†è®¸å¤šä»£ç ï¼Œå› æ­¤ä»–ä»¬ä¸å¾—ä¸é€‚åº”è¿™ç§â€œå‘ç°â€ã€‚</font><font style="vertical-align: inherit;">æ¦‚å¿µä»æ ¹æœ¬ä¸Šæ¥è¯´æ˜¯ä¸€ä¸ªæ–°çš„æœºä¼šã€‚</font><font style="vertical-align: inherit;">è€Œä¸”ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒä»¬çš„å®ç°ä¸­å·²ç»å­˜åœ¨ä¸€äº›ä¸é€æ˜æ€§ã€‚</font><font style="vertical-align: inherit;">ä¹Ÿè®¸è¿™æ˜¯éœ€è¦è€ƒè™‘å¤§é‡ç»§æ‰¿åŠŸèƒ½çš„ç»“æœå—ï¼Ÿ</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬å°è¯•å¼„æ¸…æ¥š...</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€èˆ¬ä¿¡æ¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¦‚å¿µæ˜¯åŸºäºæ¨¡æ¿è¯­æ³•çš„æ–°è¯­è¨€å®ä½“ã€‚</font><font style="vertical-align: inherit;">æ¦‚å¿µå…·æœ‰åç§°ï¼Œå‚æ•°å’Œä¸»ä½“-è°“è¯ï¼Œè¯¥è°“è¯æ ¹æ®æ¦‚å¿µçš„å‚æ•°è¿”å›å¸¸æ•°ï¼ˆå³åœ¨ç¼–è¯‘é˜¶æ®µè®¡ç®—çš„ï¼‰é€»è¾‘å€¼ã€‚</font><font style="vertical-align: inherit;">åƒè¿™æ ·ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">int</span> I&gt; 
<span class="hljs-keyword">concept</span> Even = I % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>;  <font></font>
<font></font>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">concept</span> FourByte = <span class="hljs-keyword">sizeof</span>(T)==<span class="hljs-number">4</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»æŠ€æœ¯ä¸Šè®²ï¼Œæ¦‚å¿µä¸åƒboolè¿™æ ·çš„æ¨¡æ¿constexprè¡¨è¾¾å¼éå¸¸ç›¸ä¼¼ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">int</span> I&gt;
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">bool</span> EvenX = I % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>; <font></font>
<font></font>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">bool</span> FourByteX = <span class="hljs-keyword">sizeof</span>(T)==<span class="hljs-number">4</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨ç”šè‡³å¯ä»¥åœ¨å¸¸ç”¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ¦‚å¿µï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">bool</span> b1 = Even&lt;<span class="hljs-number">2</span>&gt;; </code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥æ¦‚å¿µçš„ä¸»è¦æ€æƒ³æ˜¯å¯ä»¥ä½¿ç”¨å®ƒä»¬ä»£æ›¿æ¨¡æ¿ä¸­çš„typenameæˆ–classå…³é”®å­—ã€‚</font><font style="vertical-align: inherit;">åƒå…ƒç±»å‹ï¼ˆâ€œç±»å‹çš„ç±»å‹â€ï¼‰ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œé™æ€ç±»å‹è¢«å¼•å…¥åˆ°æ¨¡æ¿ä¸­ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;FourByte T&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(T <span class="hljs-keyword">const</span> &amp; t)</span> </span>{}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å°†intç”¨ä½œæ¨¡æ¿å‚æ•°ï¼Œé‚£ä¹ˆç»å¤§å¤šæ•°æƒ…å†µä¸‹çš„ä»£ç éƒ½å¯ä»¥ç¼–è¯‘ï¼›</font><font style="vertical-align: inherit;">å¦‚æœåŠ å€ï¼Œåˆ™å°†å‘å‡ºç®€çŸ­æ˜“æ‡‚çš„é”™è¯¯æ¶ˆæ¯ã€‚</font><font style="vertical-align: inherit;">ç®€å•æ¸…æ™°åœ°è¾“å…¥æ¨¡æ¿ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡æ­£å¸¸ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦æ±‚</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯ä¸€ä¸ªæ–°çš„â€œä¸Šä¸‹æ–‡â€ C ++ 20å…³é”®å­—ï¼Œå…·æœ‰åŒé‡ç”¨é€”ï¼šrequireå­å¥å’Œrequireè¡¨è¾¾å¼ã€‚</font><font style="vertical-align: inherit;">å¦‚ç¨åæ‰€ç¤ºï¼Œè¿™ç§å¥‡æ€ªçš„å…³é”®å­—èŠ‚çœå¯¼è‡´ä¸€äº›æ··ä¹±ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éœ€è¦è¡¨è¾¾</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œè€ƒè™‘éœ€è¦è¡¨è¾¾ã€‚</font><font style="vertical-align: inherit;">è¿™ä¸ªæƒ³æ³•éå¸¸å¥½ï¼šè¿™ä¸ªè¯åœ¨æ‹¬å·ä¸­æœ‰ä¸€ä¸ªå—ï¼Œå…¶ä¸­çš„ä»£ç å°†è¿›è¡Œç¼–è¯‘è¯„ä¼°ã€‚</font><font style="vertical-align: inherit;">çš„ç¡®ï¼Œé‚£é‡Œçš„ä»£ç ä¸åº”è¯¥ç”¨</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼–å†™</font><b><font style="vertical-align: inherit;">ï¼Œè€Œåº”è¯¥ä½¿ç”¨ä¸€ç§æ¥è¿‘C ++çš„ç‰¹æ®Šè¯­è¨€ï¼Œä½†</font></b><font style="vertical-align: inherit;">è¦æœ‰</font><b><font style="vertical-align: inherit;">è‡ªå·±çš„ç‰¹ç‚¹</font></b><font style="vertical-align: inherit;">ï¼ˆè¿™æ˜¯ç¬¬ä¸€ä¸ªå¥‡æ€ªçš„äº‹æƒ…ï¼Œå¾ˆå¯èƒ½åªç¼–å†™C ++ä»£ç ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœä»£ç æ­£ç¡®-requireè¡¨è¾¾å¼è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</font><font style="vertical-align: inherit;">å½“ç„¶ï¼Œä»£ç æœ¬èº«æ°¸è¿œä¹Ÿä¸ä¼šè¿›å…¥ä»£ç ç”Ÿæˆï¼Œå°±åƒsizeofæˆ–decltypeçš„è¡¨è¾¾å¼ä¸€æ ·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªè¯æ˜¯ä¸Šä¸‹æ–‡çš„ï¼Œä»…åœ¨æ¨¡æ¿å†…éƒ¨æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ¨¡æ¿å¤–éƒ¨æ— æ³•ç¼–è¯‘ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">bool</span> b = <span class="hljs-keyword">requires</span> { <span class="hljs-number">3.14</span> &gt;&gt; <span class="hljs-number">1</span>; };</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶åœ¨æ¨¡æ¿ä¸­-è¯·ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">bool</span> Shiftable = <span class="hljs-keyword">requires</span>(T i) { i&gt;&gt;<span class="hljs-number">1</span>; };</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒå°†èµ·ä½œç”¨ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">bool</span> b1 = Shiftable&lt;<span class="hljs-keyword">int</span>&gt;; <span class="hljs-comment">// true</span>
<span class="hljs-keyword">bool</span> b2 = Shiftable&lt;<span class="hljs-keyword">double</span>&gt;; <span class="hljs-comment">// false</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
requireè¡¨è¾¾å¼çš„ä¸»è¦ç”¨é€”æ˜¯æ¦‚å¿µçš„åˆ›å»ºã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œè¿™æ˜¯æ£€æŸ¥ç±»å‹ä¸­å­—æ®µå’Œæ–¹æ³•æ˜¯å¦å­˜åœ¨çš„æ–¹å¼ã€‚</font><font style="vertical-align: inherit;">ä¸€ä¸ªéå¸¸å—æ¬¢è¿çš„æ¡ˆä¾‹ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">template &lt;typename T&gt;<font></font>
concept Machine = <font></font>
  requires(T m) {  //   `m` ,   Machine<font></font>
	m.start();     //    `m.start()` <font></font>
	m.stop();      //   `m.stop()`<font></font>
};  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¿…é¡»åœ¨æ‹¬å·ä¸­çš„requireè¡¨è¾¾å¼ä¸­å£°æ˜æµ‹è¯•ä»£ç ä¸­å¯èƒ½éœ€è¦çš„æ‰€æœ‰å˜é‡ï¼ˆä¸ä»…æ˜¯æ¨¡æ¿å‚æ•°ï¼‰ã€‚</font><font style="vertical-align: inherit;">ç”±äºæŸäº›åŸå› ï¼Œæ ¹æœ¬ä¸å¯èƒ½å£°æ˜å˜é‡ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†…éƒ¨ç±»å‹æ£€æŸ¥è¦æ±‚</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™å°±æ˜¯è¦æ±‚ä»£ç å’Œæ ‡å‡†C ++ä¹‹é—´çš„åŒºåˆ«æ‰€åœ¨ã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†æ£€æŸ¥è¿”å›çš„ç±»å‹ï¼Œä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼šå°†å¯¹è±¡æ”¾åœ¨å¤§æ‹¬å·ä¸­ï¼Œæ”¾ç½®ä¸€ä¸ªç®­å¤´ï¼Œç„¶ååœ¨å…¶åå†™å‡ºè¯¥ç±»å‹å¿…é¡»æ»¡è¶³çš„æ¦‚å¿µã€‚</font><font style="vertical-align: inherit;">æ­¤å¤–ï¼Œä¸å…è®¸ç›´æ¥ä½¿ç”¨ç±»å‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ£€æŸ¥å‡½æ•°çš„è¿”å›å€¼å¯ä»¥è½¬æ¢ä¸ºintï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">requires</span>(T v, <span class="hljs-keyword">int</span> i) {<font></font>
  { v.f(i) } -&gt; <span class="hljs-built_in">std</span>::convertible_to&lt;<span class="hljs-keyword">int</span>&gt;;<font></font>
}  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ£€æŸ¥è¿”å›å‡½æ•°æ˜¯å¦â€‹â€‹æ­£å¥½æ˜¯intï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">requires</span>(T v, <span class="hljs-keyword">int</span> i) {<font></font>
  { v.f(i) } -&gt; <span class="hljs-built_in">std</span>::same_as&lt;<span class="hljs-keyword">int</span>&gt;; <font></font>
}  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆstd :: same_aså’Œstd :: convertible_toæ˜¯æ ‡å‡†åº“ä¸­çš„æ¦‚å¿µï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœä¸ä½¿ç”¨å¤§æ‹¬å·æ£€æŸ¥å…¶ç±»å‹çš„è¡¨è¾¾å¼ï¼Œåˆ™ç¼–è¯‘å™¨å°†æ— æ³•ç†è§£å®ƒä»¬çš„è¦æ±‚ï¼Œè€Œæ˜¯å°†æ•´ä¸ªå­—ç¬¦ä¸²è§£é‡Šä¸ºéœ€è¦æ£€æŸ¥ä»¥è¿›è¡Œç¼–è¯‘çš„å•ä¸ªè¡¨è¾¾å¼ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éœ€è¦é‡Œé¢è¦æ±‚</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
requireå…³é”®å­—åœ¨requireè¡¨è¾¾å¼å†…éƒ¨å…·æœ‰ç‰¹æ®Šå«ä¹‰ã€‚</font><font style="vertical-align: inherit;">åµŒå¥—çš„require-expressionsï¼ˆå·²ç»ä¸å¸¦èŠ±æ‹¬å·ï¼‰ä¸è¿›è¡Œç¼–è¯‘æ£€æŸ¥ï¼Œè€Œæ˜¯æ£€æŸ¥æ˜¯å¦ä¸ºtrueæˆ–falseã€‚</font><font style="vertical-align: inherit;">å¦‚æœå‘ç°è¿™æ ·çš„è¡¨è¾¾å¼ä¸ºå‡ï¼Œåˆ™å°é—­çš„è¡¨è¾¾å¼ç«‹å³ä¸ºå‡ï¼ˆå¹¶ä¸”è¿›ä¸€æ­¥çš„ç¼–è¯‘åˆ†æå°†ä¸­æ–­ï¼‰ã€‚</font><font style="vertical-align: inherit;">ä¸€èˆ¬å½¢å¼ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">requires</span> { <font></font>
  expression;         <span class="hljs-comment">// expression is valid</span>
  <span class="hljs-keyword">requires</span> predicate; <span class="hljs-comment">// predicate is true</span>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œä¸ºè°“è¯ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨å…ˆå‰å®šä¹‰çš„æ¦‚å¿µæˆ–ç±»å‹ç‰¹å¾ã€‚</font><font style="vertical-align: inherit;">ä¾‹ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">requires</span>(Iter it) {
  <span class="hljs-comment">//     (   Iter   *  ++)</span><font></font>
  *it++;<font></font>
 <font></font>
  <span class="hljs-comment">//    -  </span>
  <span class="hljs-keyword">requires</span> <span class="hljs-built_in">std</span>::convertible_to&lt;<span class="hljs-keyword">decltype</span>(*it++), <span class="hljs-keyword">typename</span> Iter::value_type&gt;;<font></font>
 <font></font>
  <span class="hljs-comment">//    -  </span>
  <span class="hljs-keyword">requires</span> <span class="hljs-built_in">std</span>::is_convertible_v&lt;<span class="hljs-keyword">decltype</span>(*it++), <span class="hljs-keyword">typename</span> Iter::value_type&gt;;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ—¶ï¼Œä½¿ç”¨æ‹¬å·ä¸­çš„ä»£ç å…è®¸åµŒå¥—çš„require-expressionsè¿›è¡Œæœ‰æ•ˆæ€§æ£€æŸ¥ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä»…åœ¨å¦ä¸€ä¸ªå†…éƒ¨ç¼–å†™ä¸€ä¸ªrequire-expressionï¼Œåˆ™å°†ä»…æ£€æŸ¥åµŒå¥—è¡¨è¾¾å¼ï¼ˆåŒ…æ‹¬åµŒå¥—çš„requireå…³é”®å­—åœ¨å†…çš„æ‰€æœ‰å†…å®¹ï¼‰çš„æœ‰æ•ˆæ€§ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">requires</span> (T v) { 
  <span class="hljs-keyword">requires</span> (<span class="hljs-keyword">typename</span> T::value_type x) { ++x; }; <span class="hljs-comment">//     , </span>
												<span class="hljs-comment">//     !</span>
};  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œå‡ºç°äº†ä¸€ä¸ªå¸¦æœ‰åŒé‡çš„å¥‡æ€ªå½¢å¼ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">requires</span> (T v) { 
  <span class="hljs-function"><span class="hljs-keyword">requires</span> <span class="hljs-title">requires</span> <span class="hljs-params">(<span class="hljs-keyword">typename</span> T::value_type x)</span> </span>{ ++x; }; <span class="hljs-comment">//       "++x"</span>
};  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯æ¥è‡ªâ€œ requiresâ€çš„ä¸€ä¸ªæœ‰è¶£çš„è½¬ä¹‰åºåˆ—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ºä¾¿è¯´ä¸€å¥ï¼Œè¿™ä¸¤ä¸ªæ¡ä»¶çš„å¦ä¸€ä¸ªç»„åˆæ˜¯æ­¤æ—¶é—´å­å¥ï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰å’Œè¡¨è¾¾å¼ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-function"><span class="hljs-keyword">requires</span> <span class="hljs-title">requires</span><span class="hljs-params">(T x, T y)</span> </span>{ <span class="hljs-keyword">bool</span>(x &lt; y); }
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">equivalent</span><span class="hljs-params">(T <span class="hljs-keyword">const</span>&amp; x, T <span class="hljs-keyword">const</span>&amp; y)</span>
</span>{
  <span class="hljs-keyword">return</span> !(x &lt; y) &amp;&amp; !(y &lt; x);<font></font>
};</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦æ±‚æ¡æ¬¾</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­ä½¿ç”¨éœ€æ±‚ä¸€è¯çš„å¦ä¸€ç§ç”¨æ³•-å£°æ˜æ¨¡æ¿ç±»å‹çš„é™åˆ¶ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ä½¿ç”¨æ¦‚å¿µåç§°ä»£æ›¿ç±»å‹åç§°çš„æ›¿ä»£æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰ä¸‰ç§æ–¹æ³•éƒ½æ˜¯ç­‰æ•ˆçš„ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//  require</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Cont&gt;
	<span class="hljs-keyword">requires</span> Sortable&lt;Cont&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(Cont&amp; container)</span></span>;<font></font>
<font></font>
<span class="hljs-comment">//   require (  )</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Cont&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(Cont&amp; container)</span> <span class="hljs-keyword">requires</span> Sortable&lt;Cont&gt;</span>;<font></font>
<font></font>
<span class="hljs-comment">//    typename</span>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;Sortable Cont&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(Cont&amp; container)</span>  </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
requireå£°æ˜å¯ä»¥ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ç»„åˆçš„å¤šä¸ªè°“è¯ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-function"><span class="hljs-keyword">requires</span> is_standard_layout_v&lt;T&gt; &amp;&amp; is_trivial_v&lt;T&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span></span>; <font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> s;<font></font>
 <font></font>
  fun(<span class="hljs-number">1</span>);  <span class="hljs-comment">// ok</span>
  fun(s);  <span class="hljs-comment">// compiler error</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œç”±äºå‘ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œåªéœ€åè½¬æ¡ä»¶ä¹‹ä¸€ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-function"><span class="hljs-keyword">requires</span> is_standard_layout_v&lt;T&gt; &amp;&amp; !is_trivial_v&lt;T&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span></span>; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯ä¸€ä¸ªä¸ä¼šç¼–è¯‘çš„ç¤ºä¾‹</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-keyword">requires</span> !<span class="hljs-function">is_trivial_v&lt;T&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span></span>;	</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸå› æ˜¯è§£ææŸäº›è¡¨è¾¾å¼æ—¶å‡ºç°æ­§ä¹‰ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œåœ¨è¿™æ ·çš„æ¨¡æ¿ä¸­ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt; 
  <span class="hljs-keyword">requires</span> (<span class="hljs-keyword">bool</span>)&amp;<span class="hljs-function">T::<span class="hljs-keyword">operator</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°šä¸æ¸…æ¥šå°†unsignedå½’äºä»€ä¹ˆ-è¿ç®—ç¬¦æˆ–fooï¼ˆï¼‰å‡½æ•°çš„åŸå‹ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œå¼€å‘äººå‘˜å†³å®šåœ¨æ²¡æœ‰æ‹¬å·çš„æƒ…å†µä¸‹ï¼ˆä½œä¸ºå‚æ•°requireå­å¥ä½¿ç”¨ï¼‰ï¼Œåªèƒ½ä½¿ç”¨éå¸¸æœ‰é™çš„å®ä½“é›†-trueæˆ–falseæ–‡å­—ï¼Œboolç±»å‹çš„å­—æ®µåç§°ï¼Œå…¶å½¢å¼ä¸ºvalueï¼Œvalueï¼ŒT :: valueï¼Œns :: trait :: valueï¼Œç±»å‹ä¸ºConceptçš„æ¦‚å¿µåç§°ï¼Œå¹¶éœ€è¦è¡¨è¾¾å¼ã€‚</font><font style="vertical-align: inherit;">å…¶ä»–æ‰€æœ‰å†…å®¹éƒ½åº”æ”¾åœ¨æ‹¬å·ä¸­ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-keyword">requires</span> (!is_trivial_v&lt;T&gt;)
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span></span>;</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨å…³äºrequireå­å¥ä¸­çš„è°“è¯åŠŸèƒ½</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€ƒè™‘å¦ä¸€ä¸ªä¾‹å­ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-function"><span class="hljs-keyword">requires</span> is_trivial_v&lt;<span class="hljs-keyword">typename</span> T::value_type&gt; 
<span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span></span>; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œrequireä½¿ç”¨å–å†³äºåµŒå¥—value_typeç±»å‹çš„ç‰¹å¾ã€‚</font><font style="vertical-align: inherit;">äº‹å…ˆä¸çŸ¥é“ä»»æ„ç±»å‹æ˜¯å¦å…·æœ‰å¯ä»¥ä¼ é€’ç»™æ¨¡æ¿çš„åµŒå¥—ç±»å‹ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œå¦‚æœå°†ç®€å•çš„intç±»å‹ä¼ é€’ç»™è¿™æ ·çš„æ¨¡æ¿ï¼Œåˆ™ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æ¨¡æ¿è¿›è¡Œäº†ä¸¤ç§ç‰¹æ®ŠåŒ–ï¼Œåˆ™ä¸ä¼šæœ‰é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">åªä¼šé€‰æ‹©å¦ä¸€ä¸ªä¸“ä¸šã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-function"><span class="hljs-keyword">requires</span> is_trivial_v&lt;<span class="hljs-keyword">typename</span> T::value_type&gt; 
<span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span> </span>{ <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"1"</span>; } <font></font>
 <font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span> </span>{ <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"2"</span>; } <font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
  fun(<span class="hljs-number">1</span>);  <span class="hljs-comment">// displays: "2"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œä¸ä»…å½“requireå­å¥è°“è¯è¿”å›falseæ—¶ï¼Œè€Œä¸”åœ¨äº‹å®è¯æ˜å®ƒä¸æ­£ç¡®æ—¶ï¼Œä¹Ÿå°†æ”¾å¼ƒä¸“é—¨åŒ–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è°“è¯å‘¨å›´çš„æ‹¬å·æ˜¯ä¸€ä¸ªé‡è¦çš„æé†’ï¼Œå³åœ¨requireå­å¥ä¸­ï¼Œè°“è¯çš„é€†ä¸è°“è¯æœ¬èº«ä¸æ˜¯ç›¸åçš„ã€‚</font><font style="vertical-align: inherit;">æ‰€ä»¥ï¼Œ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">requires</span> is_trivial_v&lt;<span class="hljs-keyword">typename</span> T::value_type&gt; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¡¨ç¤ºç‰¹å¾æ­£ç¡®ï¼Œå¹¶è¿”å›trueã€‚</font><font style="vertical-align: inherit;">å…¶ä¸­</font></font><br>
<br>
<pre><code class="cpp hljs">!is_trivial_v&lt;<span class="hljs-keyword">typename</span> T::value_type&gt; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¡¨ç¤ºâ€œç‰¹å¾æ­£ç¡®ä¸”è¿”å›å‡â€ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼Œç¬¬ä¸€ä¸ªè°“è¯</font><font style="vertical-align: inherit;">çš„</font><font style="vertical-align: inherit;">çœŸæ­£é€»è¾‘åè½¬ä¸æ˜¯ï¼ˆâ€œç‰¹å¾æ­£ç¡®ä¸”è¿”å›çœŸâ€ï¼‰==â€œç‰¹å¾ä¸æ­£ç¡®æˆ–è¿”å›å‡â€ â€“è¿™æ˜¯é€šè¿‡æ¦‚å¿µçš„æ˜¾å¼å®šä¹‰ä»¥ç¨å¾®å¤æ‚çš„æ–¹å¼å®ç°çš„ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">concept</span> value_type_valid_and_trivial <font></font>
  = is_trivial_v&lt;<span class="hljs-keyword">typename</span> T::value_type&gt;; <font></font>
 <font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-keyword">requires</span> (!value_type_valid_and_trivial&lt;T&gt;)
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v)</span></span>; </code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿è¯å’Œæå–è¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€»è¾‘åˆå–è¿ç®—ç¬¦å’Œæå–è¿ç®—ç¬¦çœ‹èµ·æ¥åƒå¾€å¸¸ä¸€æ ·ï¼Œä½†å®é™…ä¸Šå·¥ä½œæ–¹å¼ä¸æ™®é€šC ++ç•¥æœ‰ä¸åŒã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€ƒè™‘ä¸¤ä¸ªéå¸¸ç›¸ä¼¼çš„ä»£ç æ®µã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¬¬ä¸€ä¸ªæ˜¯ä¸å¸¦æ‹¬å·çš„è°“è¯ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> U&gt;
  <span class="hljs-keyword">requires</span> <span class="hljs-built_in">std</span>::is_trivial_v&lt;<span class="hljs-keyword">typename</span> T::value_type&gt;<font></font>
		|| <span class="hljs-function"><span class="hljs-built_in">std</span>::is_trivial_v&lt;<span class="hljs-keyword">typename</span> U::value_type&gt;
<span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v, U u)</span></span>; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¬¬äºŒä¸ªæ˜¯å¸¦æœ‰æ–¹æ‹¬å·çš„ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> U&gt;
  <span class="hljs-keyword">requires</span> (<span class="hljs-built_in">std</span>::is_trivial_v&lt;<span class="hljs-keyword">typename</span> T::value_type&gt;<font></font>
		 || <span class="hljs-built_in">std</span>::is_trivial_v&lt;<span class="hljs-keyword">typename</span> U::value_type&gt;)
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(T v, U u)</span></span>; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒºåˆ«ä»…åœ¨äºæ–¹æ‹¬å·ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯æ­£å› ä¸ºå¦‚æ­¤ï¼Œåœ¨ç¬¬äºŒä¸ªæ¨¡æ¿ä¸­ï¼Œæ²¡æœ‰ä¸¤ä¸ªçº¦æŸç”±â€œéœ€æ±‚å­å¥â€è”åˆï¼Œè€Œæ˜¯ä¸€ä¸ªçº¦æŸä¸é€šå¸¸çš„é€»è¾‘â€œæˆ–â€è”åˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥å·®å¼‚å¦‚ä¸‹ã€‚</font><font style="vertical-align: inherit;">è€ƒè™‘ä»£ç </font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">std</span>::optional&lt;<span class="hljs-keyword">int</span>&gt; oi {};
<span class="hljs-keyword">int</span> i {};<font></font>
fun(i, oi);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæ¨¡æ¿ç”±intå’Œstd ::å¯é€‰ç±»å‹å®ä¾‹åŒ–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œint :: value_typeç±»å‹æ— æ•ˆï¼Œå› æ­¤ä¸æ»¡è¶³ç¬¬ä¸€ä¸ªé™åˆ¶ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ç±»å‹å¯é€‰:: :: value_typeæ˜¯æœ‰æ•ˆçš„ï¼Œç¬¬äºŒä¸ªç‰¹å¾è¿”å›trueï¼Œå¹¶ä¸”ç”±äºçº¦æŸä¹‹é—´å­˜åœ¨ORè¿ç®—ç¬¦ï¼Œå› æ­¤æ•´ä¸ªè°“è¯éƒ½å¯ä»¥æ»¡è¶³ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…å«æ— æ•ˆç±»å‹çš„å•ä¸ªè¡¨è¾¾å¼ï¼Œç”±äºè¯¥è¡¨è¾¾å¼é€šå¸¸æ— æ•ˆï¼Œå› æ­¤ä¸æ»¡è¶³è¯¥è°“è¯ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œç®€å•çš„æ‹¬å·ä¼šåœ¨ä¸çŸ¥ä¸è§‰ä¸­æ”¹å˜æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…çš„å«ä¹‰ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç„¶ï¼Œæ­¤å¤„æœªæ˜¾ç¤ºæ¦‚å¿µçš„æ‰€æœ‰åŠŸèƒ½ã€‚æˆ‘åªæ˜¯æ²¡æœ‰èµ°å¾—æ›´è¿œã€‚ä½†æ˜¯ï¼Œä½œä¸ºç¬¬ä¸€å°è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£çš„æƒ³æ³•ï¼Œå¹¶ä¸”æœ‰äº›å¥‡æ€ªçš„å®ç°ã€‚é‡å¤çš„æœ‰è¶£è¯­æ³•è¦æ±‚ï¼Œè¿™ç¡®å®ä»¤äººå›°æƒ‘ã€‚è‹±è¯­ä¸­çœŸçš„æœ‰é‚£ä¹ˆå°‘çš„å•è¯ï¼Œæ‚¨ä¸å¾—ä¸å°†ä¸€ä¸ªå•è¯ç”¨äºå®Œå…¨ä¸åŒçš„ç›®çš„å—ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¸¦æœ‰ç¼–è¯‘ä»£ç çš„æƒ³æ³•ç»å¯¹æ˜¯ä¸ªå¥½ä¸»æ„ã€‚å®ƒç”šè‡³æœ‰ç‚¹ç±»ä¼¼äºè¯­æ³•å®ä¸­çš„â€œå‡†å¼•ç”¨â€ã€‚ä½†æ˜¯ï¼Œå€¼å¾—æ··ç”¨æ£€æŸ¥è¿”å›ç±»å‹çš„ç‰¹æ®Šè¯­æ³•å—ï¼Ÿæ•æˆ‘ç›´è¨€ï¼Œä¸ºæ­¤ï¼Œåªéœ€è¦åšä¸€ä¸ªå•ç‹¬çš„å…³é”®å­—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ä¸€ä¸ªå †ä¸­éšå¼æ··åˆä½¿ç”¨â€œ true / falseâ€å’Œâ€œ compiles / not compileâ€çš„æ¦‚å¿µï¼Œå› æ­¤ï¼Œå¸¦æœ‰æ‹¬å·çš„ç¬‘è¯ä¹Ÿæ˜¯é”™è¯¯çš„ã€‚</font><font style="vertical-align: inherit;">è¿™äº›æ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œå®ƒä»¬å¿…é¡»ä¸¥æ ¼å­˜åœ¨äºä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ï¼ˆå°½ç®¡æˆ‘äº†è§£å®ƒçš„æ¥æº-SFINAEè§„åˆ™ï¼Œæœªç¼–è¯‘çš„ä»£ç åªæ˜¯é»˜é»˜åœ°æ’é™¤äº†ç‰¹æ®Šæ€§ï¼‰ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œå¦‚æœè¿™äº›æ¦‚å¿µçš„ç›®æ ‡æ˜¯ä½¿ä»£ç å°½å¯èƒ½æ˜ç¡®ï¼Œé‚£ä¹ˆå°†æ‰€æœ‰è¿™äº›éšå¼å†…å®¹æ‹–åˆ°æ–°åŠŸèƒ½ä¸­æ˜¯å¦å€¼å¾—ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ç¯‡æ–‡ç« ä¸»è¦åŸºäº</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akrzemi1.wordpress.com/2020/01/29/requires-expression </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akrzemi1.wordpress.com/2020/03/26/requires-clause</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ï¼ˆæœ‰æ›´å¤šç¤ºä¾‹å’Œæœ‰è¶£åŠŸèƒ½ï¼‰</font><font style="vertical-align: inherit;">æ’°å†™</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼Œè€Œæˆ‘çš„è¡¥å……æ¥è‡ªå…¶ä»–æ¥æºï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯ä»¥æ£€æŸ¥æ‰€æœ‰ç¤ºä¾‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wandbox.org</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN495380/index.html">å¤§åŸƒåŠé˜²ç«å¢™</a></li>
<li><a href="../zh-CN495384/index.html">æˆ‘åœ¨Microsoft Redmondçš„å®ä¹ ç»å†å¹¶è·å¾—å½•å–é€šçŸ¥</a></li>
<li><a href="../zh-CN495388/index.html">1970å¹´ä»£ç”µè§†èŠ‚ç›®æˆä¸ºç”µå­ç«æŠ€çš„å§‹ç¥–</a></li>
<li><a href="../zh-CN495390/index.html">STM32CubeMonitorå€¼å¾—ä¸€è¯•</a></li>
<li><a href="../zh-CN495392/index.html">å¦‚ä½•åœ¨å‰ç«¯æœç´¢é”™è¯¯ï¼š4ä¸ªä¸»è¦é˜¶æ®µ</a></li>
<li><a href="../zh-CN495398/index.html">ç½—Â·é‡ŒÂ·é›·</a></li>
<li><a href="../zh-CN495400/index.html">é€šè¿‡SPIæ¥å£ä½¿ç”¨SDå¡ã€‚VHDLå®æ–½</a></li>
<li><a href="../zh-CN495402/index.html">å»å¹´ï¼Œæˆ‘ä»¬ç»ˆäºæ‹æ‘„äº†ä¸€ä¸ªé»‘æ´ã€‚æ€ä¹ˆåŠï¼Ÿ</a></li>
<li><a href="../zh-CN495404/index.html">è‚¡å¸‚ä¸‹è·Œæ˜¯å¦æœ‰å¸Œæœ›ï¼Ÿè®©æˆ‘ä»¬ç”¨pythonåˆ†æ</a></li>
<li><a href="../zh-CN495408/index.html">ï¼ƒ02-æ•´ä¸ªå­—èŠ‚è¿˜ä¸å¤Ÿ... | å˜åŒ–çš„åå­—æ¶</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>