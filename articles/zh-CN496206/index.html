<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏽 😨 🔆 在0.3秒内在数据库中进行十亿次操作。不要将OLTP与OLAP进行比较，而将QuestDB与PostgreSQL进行比较 🎺 🅾️ 👨🏽‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在我作为软件开发人员和团队负责人15年的经验中，我经常遇到同一件事。编程变成一种信仰-很少有人尝试根据合理的选择，合理地考虑限制，可移植性，评估对供应商的依恋程度，实际价格，技术前景和许可自由来引入技术。开发人员参加会议或阅读文章-开始大肆宣传，他们的IT主管和经理不仅饱受事件，各种有远见的人，销售...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>在0.3秒内在数据库中进行十亿次操作。不要将OLTP与OLAP进行比较，而将QuestDB与PostgreSQL进行比较</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496206/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我作为软件开发人员和团队负责人15年的经验中，我经常遇到同一件事。编程变成一种信仰-很少有人尝试根据合理的选择，合理地考虑限制，可移植性，评估对供应商的依恋程度，实际价格，技术前景和许可自由来引入技术。开发人员参加会议或阅读文章-开始大肆宣传，他们的IT主管和经理不仅饱受事件，各种有远见的人，销售人员和顾问的故事的光明敏捷的未来。事实证明，这些技术都在项目中，没有考虑到开发和实施的便利性，项目的非功能性要求，而是因为它被炒作而google本身使用，亚马逊建议（尽管他们的空缺说他们自己不经常使用它）或公司管理层已做出最高决策来实施“此”。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/5o/oc/gw5ooc3vrg7l1posp3i32i1r5ng.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是特别有趣的是选择数据库。存储的信息量越大，项目中的数据结构及其更改/演化越复杂，对响应时间或性能的要求越高，在项目后期开始时选择错误的代价就越大。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我知道为什么会这样-简而言之，然后对不同的技术进行原型设计和比较是“昂贵的”（时间，许可，培训或逆向工程），并且倾向于开启古老的直觉，从耗时的证据部分转向有趣而简单，触动了非理性的深渊。我也这样做了，而且我也看到了最可笑的事情是如何在我和我的朋友的工作中发生的，而不仅仅是技术专家的决定。因此，可以根据网络中的帖子，会议报告，Gartner的管理人员手册或算命书，很好地选择编程语言，框架，消息队列或云提供商。很遗憾我不能讲很多我的作品，因为我担心那之后的生活...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么影响数据库的选择</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从我的角度来看，在选择数据库时，我必须至少解决以下权衡问题：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时交易处理或在线分析处理</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直或水平扩展</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在分布式基础上-数据一致性/可用性/抗分离性（CAP定理）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定的数据方案和数据库或存储中不需要数据方案的限制</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据模型-键值，层次结构，图形，文档或关系型</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理逻辑尽可能接近数据或应用程序中的所有处理</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要在RAM或磁盘子系统中工作</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通用解决方案或专业</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在数据库中使用了不适合项目要求的现有专业知识，或者在适当但不熟悉的培训中“血汗”开发了一个新的专家（这不仅适用于开发，而且适用于操作）</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置或在其他进程/网络中</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">潮人或逆行</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，我们对实现的解决方案有一个“礼物”：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“外星人”查询语言</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一的用于处理数据库的本机API，这会使向其他数据库的转换复杂化（花费了时间，团队精力和项目预算）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他平台/语言/操作系统的驱动程序不可用</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺少源代码，磁盘上数据格式的描述（或禁止使用逆向工程许可，尤其是具有Coherence缺陷的Oracle）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许可证成本逐年增长</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自己的生态系统和寻找专家的困难</font></font></li>
<li>    ,  , </li>
<li></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
系统的水平扩展非常复杂，需要团队专业知识。经验丰富的开发人员在市场上非常昂贵，而分布式应用程序更难以开发，调试和测试。因此，如果有可能将服务器更改为功能更强大的服务器，并且系统允许的数据量较大，则他们通常会这样做。现在，服务器上可以拥有TB级的RAM和数百个处理器核心。因此，前所未有地重要的是，最大限度地利用所有服务器资源。数据库许可证的成本也很重要，如果以处理器内核出售它们，那么即使是纵向扩展，其运行预算也可能要花费超大型空间计划的费用。因此，记住这一点很重要，以免由于许可证而无法扩展数据库性能。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显然，在市场营销的帮助下，他们将试图说服您只有某个公司的解决方案才能解决您的所有问题（但他们对出现多少新问题保持沉默）。没有一个理想的数据库可以适合所有人并且适合所有情况。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，在可预见的将来，我们仍将支持几个不同的数据库，以便为不同系统中的不同类型的查询处理相同的数据。没有数据缓存就没有Data Fabric解决方案，就性能和查询优化而言，Data Lake尚无法与大规模并行架构的数据库进行比较。事务性数据仍将存储在PostgreSQL，Oracle，MS Sql Server，Citus，Greenplum，Snowflake，Redshift，Vertica，Impala，Teradata中的分析查询中，HDFS / S3 / ADLS（Azure）中的原始数据沼泽将由Dremio管理。 ，Redshift Spectrum，Apache Spark，Presto。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是上面列出的解决方案不适合用于分析响应时间短的时间序列数据。</font><font style="vertical-align: inherit;">根据其在处理时间序列数据中的受欢迎程度，现在它已成为InfluxDB的最爱。</font><font style="vertical-align: inherit;">在内存数据库利基市场中，kdb +和memSQL保留了自己的位置。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拥有Apache许可证的</font><font style="vertical-align: inherit;">
所有这些</font><font style="vertical-align: inherit;">开源</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决方案都可以反对什么</font><font style="vertical-align: inherit;">？</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试最大程度地利用硬件来执行分析查询-聚合函数的矢量化，通过内存映射文件处理数据</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL作为DML查询和DDL操作的语言，用于管理数据库结构</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持特定于时间序列数据库的联接表</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持SQL中的窗口和聚合功能</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在JVM上的应用程序中嵌入数据库的能力</font></font></li>
<li>        JVM,        ServiceLoader</li>
<li> Influx DB line protocol (ILP)  UDP  Telegraf.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">«What makes QuestDB faster than InfluxDB»</a></li>
<li> PostgreSql 11           PostgreSQL: JDBC, ODBC   psql <br>
</li>
<li>   web    -  REST endpoint  ,     SQL      json <br>
</li>
<li>       ,    <br>
</li>
<li>          zero-GC API,       .<br>
</li>
<li>                  (        )<br>
</li>
<li> 64  Windows, Linux, OSX, ARM Linux    FreeBSD<br>
</li>
<li>,    open source,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当此数据库对您有用时-如果您正在以低延迟在JVM上开发财务系统，并且需要用于RAM中数据分析的解决方案。</font><font style="vertical-align: inherit;">由于许可证费用，因此可以替代kdb +。</font><font style="vertical-align: inherit;">如果使用Influx / Telegraf协议收集指标，但是InfluxDB的性能和可用性并不令人满意。</font><font style="vertical-align: inherit;">如果您的项目在JVM上运行，并且您需要一个内置数据库来存储仅添加而不更新的指标或应用程序数据。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
支持SIMD指令的新版本4.2.0引起</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了Reddit的热议</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了让粉丝参加现代硬件知识及其有效编程的竞赛，我建议在评论中与数据库的作者（bluestreak01）交谈！</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIMD操作</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该项目团队</font><font style="vertical-align: inherit;">对综合数据</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行了测试</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并将QuestDB 4.2.0与kdb 4.0 </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">进行了</font></a><font style="vertical-align: inherit;">比较，以利用处理器的SIMD指令汇总十亿个值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在Intel 8850H平台上：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/-z/vy/bh-zvyhql33d-ezkf9h0mudxia0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在AMD Ryzen 3900X平台上：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/f7/_d/baf7_d-6mpkifdhg8wiwtay2xle.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显然，所有这些测试都是在“真空”中进行的，但是如果您的项目使用kdb并与社区共享结果，则可以对数据进行比较。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行docker数据库镜像</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该数据库</font><font style="vertical-align: inherit;">随每个发行版</font><font style="vertical-align: inherit;">发布在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dockerhub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上。</font><font style="vertical-align: inherit;">有关更多详细信息，请参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
获取QuestDB图像：</font></font><br>
<br>
<pre><code class="bash hljs">docker pull questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们推出：</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -it -p 9000:9000 -p 8812:8812 questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，您可以使用PostgreSQL协议连接到端口8812，Web控制台在端口9000上可用。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jdbc访问</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据我们的项目，我们添加PostrgreSQL jdbc驱动程序</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.postgresql：postgresql：42.2.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，对于该测试，我将</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB模块用于testcontainers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该测试可</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在github上与构建脚本一起使用：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.assertj.core.api.Assertions.*;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbDriverTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">containerIsUpTestByJdbcInvocation</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">try</span> (Connection connection = DriverManager.getConnection(<span class="hljs-string">"jdbc:tc:questdb:///?user=admin&amp;password=quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
运行docker会导致额外的开销，这可以通过简单地实现</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.questdb：core：jar：4.2.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为对项目的依赖关系并运行io.questdb.ServerMain来避免。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.ServerMain;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbJdbcTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">embeddedServerStartTest</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        ServerMain.main(<span class="hljs-keyword">new</span> String[]{<span class="hljs-string">"-d"</span>, tempDir.toString()});
        <span class="hljs-keyword">try</span> (DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:8812/"</span>, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌入Java应用程序</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但这是使用进程内Java API处理数据库的最快方法：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.cairo.CairoEngine;
<span class="hljs-keyword">import</span> io.questdb.cairo.DefaultCairoConfiguration;
<span class="hljs-keyword">import</span> io.questdb.griffin.CompiledQuery;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlCompiler;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlExecutionContextImpl;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TruncateExecuteTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">truncate</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        SqlExecutionContextImpl executionContext = <span class="hljs-keyword">new</span> SqlExecutionContextImpl();<font></font>
        DefaultCairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(tempDir.toAbsolutePath().toString());
        <span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {
            <span class="hljs-keyword">try</span> (SqlCompiler compiler = <span class="hljs-keyword">new</span> SqlCompiler(engine)) {<font></font>
                CompiledQuery createTable = compiler.compile(<span class="hljs-string">"create table tr_table(id long,name string)"</span>, executionContext);<font></font>
                compiler.compile(<span class="hljs-string">"truncate table tr_table"</span>, executionContext);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络控制台</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该项目包括一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web控制台，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于查询QuestDB并将</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5v/_w/bb/5v_wbbpw-roh7cbrv7jpivazvgc.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数据通过浏览器以csv格式下载到数据库。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/ya/lu/fwyalug09h88tp3iyaeyotztxoo.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您是否需要另一个数据库？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这个项目还很年轻，仍然缺乏一些公司特征，但是它发展很快，一些贡献者正在积极地从事这个项目。</font><font style="vertical-align: inherit;">自去年</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">八月</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以来，</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">我一直在</font></a><font style="vertical-align: inherit;">关注</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">QuestDB</font></a><font style="vertical-align: inherit;">，并为此项目开发了几个扩展（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jdbc函数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osquery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），并将</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">该项目与testcontainer</font></a><font style="vertical-align: inherit;">集成</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一起</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。现在，我正在尝试使用QuestDB通过增量数据上传，数据分区和对生产中的数据源的冗长事务来解决Dremio中的当前问题，并通过数据导出功能对其进行补充。我计划在以下出版物中分享我的经验。我可以在我熟悉的平台上调试功能和数据库，编写以光速运行的单元测试，这尤其使我受贿。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您决定作为经验丰富的开发人员。再一次，QuestDB不能替代OLTP数据库-PostgreSQL，Oracle，MS Sql Server，DB2甚至是</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">H2</font></a><font style="vertical-align: inherit;">替代</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在JVM中。</font><font style="vertical-align: inherit;">这是一个功能强大的专业开源数据库，支持PostgreSQL，Influx / Telegraf网络协议。</font><font style="vertical-align: inherit;">如果您的使用方案适合其中实现的功能以及使用列数据库的主要方案，那么选择是合理的！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN496192/index.html">从Go调用Rust函数</a></li>
<li><a href="../zh-CN496194/index.html">关于精细结构断层图像的二值化</a></li>
<li><a href="../zh-CN496196/index.html">DEFCON会议26.摇尾巴：秘密的被动监视。第1部分</a></li>
<li><a href="../zh-CN496198/index.html">关于训练机器人主题的第二次ROS Meetup的演示</a></li>
<li><a href="../zh-CN496204/index.html">CI / CD流程更新：准备和计划</a></li>
<li><a href="../zh-CN496208/index.html">JIT如何内联我们的C＃代码（启发式）</a></li>
<li><a href="../zh-CN496210/index.html">生物多样性可能是从玩剪刀布的原则演变而来的</a></li>
<li><a href="../zh-CN496212/index.html">＃04-整个字节不足... | 以牛角骑BK</a></li>
<li><a href="../zh-CN496214/index.html">AdColony：89％的移动应用和游戏发行商使用促销视频</a></li>
<li><a href="../zh-CN496216/index.html">黑暗商店：您已经在考虑这个吗？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>