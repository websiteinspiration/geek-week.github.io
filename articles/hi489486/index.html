<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯФж ЁЯСйтАНЁЯОд ЁЯРЫ рд╣рдо рдШрд░ рдЦрд░реАрджрдиреЗ рдХреЗ рд╢рд╛рдВрддрд┐рдкреВрд░реНрдг рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕рд╛рдЗрдВрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ ЁЯП┤єаБзєаБвєаБ╖єаБмєаБ│єаБ┐ ЁЯС╝ЁЯП╗ ЁЯЪ┤ЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдХреБрдЫ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдмреЗрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рдХреБрдЫ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЦрд░реАрджрдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреИрд╕рд╛ рдирд╣реАрдВ рд╣реИред 
 - рдкреНрд░реЛрд╕реНрдЯреЛрдХрд╡рд╛рд╢рд┐рдиреЛ рд╕реЗ рддреАрди
 рдкрд░рд┐рдЪрдп
 

рдРрд╕рд╛ рд╣реБрдЖ рдХрд┐ рдореИрдВ рдореЙрдиреН...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>рд╣рдо рдШрд░ рдЦрд░реАрджрдиреЗ рдХреЗ рд╢рд╛рдВрддрд┐рдкреВрд░реНрдг рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕рд╛рдЗрдВрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489486/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдЫ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдмреЗрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рдХреБрдЫ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЦрд░реАрджрдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреИрд╕рд╛ рдирд╣реАрдВ рд╣реИред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - рдкреНрд░реЛрд╕реНрдЯреЛрдХрд╡рд╛рд╢рд┐рдиреЛ рд╕реЗ рддреАрди</font></font></blockquote><br>
<h1 id="vvedenie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдЪрдп</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдРрд╕рд╛ рд╣реБрдЖ рдХрд┐ рдореИрдВ рдореЙрдиреНрдЯреНрд░рд┐рдпрд▓ рдореЗрдВ рдЕрдкрдиреЗ рдЕрдкрд╛рд░реНрдЯрдореЗрдВрдЯ (рдпрд╛ рд╕реНрдерд╛рдиреАрдп рдХреЛрдВрдбреЛ) рдореЗрдВ рд░рд╣рддрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рдФрд░ рдПрдХ рдмрд╛рд░, рд▓рдЧрднрдЧ рдПрдХ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдореБрдЭреЗ рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рд╕реЗ рджреМрд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдХрд┐ рдЖрдкрдХреЗ рдЕрдкрдиреЗ рдШрд░ рдореЗрдВ рдЬрд╛рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдореЗрд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЖрд╡рд╛рд╕ рдЦрд░реАрджрдиреЗ рдФрд░ рдмреЗрдЪрдиреЗ рдХрд╛ рдХреБрдЫ рдЕрдиреБрднрд╡ рдерд╛ рдФрд░, рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдЗрд╕ рдореБрджреНрджреЗ рдкрд░ рдмрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛, рдЬреИрд╕рд╛ рдХрд┐ рдЕрдзрд┐рдХрд╛рдВрд╢ рд╕реНрдерд╛рдиреАрдп рдирд┐рд╡рд╛рд╕реА рдХрд░рддреЗ рд╣реИрдВ: рдПрдХ рд░рд┐рдпрд╛рд▓реНрдЯрд╛рд░ рдХреЛ рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдВ рдФрд░ рдЙрд╕реЗ рд╕рднреА рдореБрджреНрджреЛрдВ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рджреЗрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдЙрдмрд╛рдК рдФрд░ рдирд┐рд░реНрдмрд╛рдз рд╣реЛрдЧрд╛ред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдореИрдВрдиреЗ рдЗрд╕ рдорд╛рдорд▓реЗ рдХреЛ рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рд░реВрдк рд╕реЗ рдЕрдкрдирд╛рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рдПрдХ рдХрд╛рд░реНрдп рд╣реИ: рдЖрдкрдХреЛ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдореЗрд░реЗ рдкрд╛рд╕ рдХрд┐рддрдирд╛ рдореВрд▓реНрдп рд╣реИ, рдФрд░ рд╡рд╣ рд╣реИ рдЬреЛ рдореИрдВ рд╡рд╣рди рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рдЦреИрд░, рдПрдХ рдЧреБрдЬрд░ рд╕рд╡рд╛рд▓ - рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд╣рд╛рдВ рд╣рд╡рд╛ рдЪрд▓ рд░рд╣реА рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрд░</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ рднреВ-рд╕реНрдерд╛рдирд┐рдХ рдЧрдгрдирд╛рдУрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ </font><font style="vertical-align: inherit;">ред</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдпрд╣ рддреБрд░рдВрдд рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдерд╛ рдХрд┐ рдЕрдЧрд░ рдореИрдВ рдПрдХ рд╕рднреНрдп рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд░рд╣рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдФрд░ рдПрдХ рджреИрдирд┐рдХ рдмрд╛рдЗрдХ рдХреА рд╕рд╡рд╛рд░реА рдХреЗ рд╕рд╛рде рдЧреНрд▓реЛрдмрд▓ рд╡рд╛рд░реНрдорд┐рдВрдЧ рдХреЛ рдорд╛рд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рддреЛ рдореИрдВ рд╕рд┐рд░реНрдл рдПрдХ рдЕрд▓рдЧ рдкрд░рд┐рд╡рд╛рд░ (рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ) рдирд╣реАрдВ рдЦреАрдВрдЪреВрдВрдЧрд╛ред </font><font style="vertical-align: inherit;">рдПрдХ рдФрд░ рдЖрдо рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдХрд▓реНрдк рджреНрд╡реИрдз рдпрд╛ рдЯреНрд░рд┐рдкрд▓ рдЦрд░реАрджрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИ, рдЕрд░реНрдерд╛рддред </font><font style="vertical-align: inherit;">рдЬрд┐рди рдШрд░реЛрдВ рдореЗрдВ рджреЛ рдпрд╛ рддреАрди рдЕрдкрд╛рд░реНрдЯрдореЗрдВрдЯ рд╣реИрдВ: рдЖрдк рдПрдХ рдореЗрдВ рд░рд╣рддреЗ рд╣реИрдВ,</font></font><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╛рдХреА рдореЗрдВ рдЖрдк рдЦрд░рдЧреЛрд╢реЛрдВ рдХрд╛ рдкреНрд░рдЬрдирди рдХрд░рддреЗ рд╣реИрдВ</font></font></del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╛рдХреА рдХрд┐рд░рд╛рдпреЗрджрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рдордиреЗ рдЖрддреНрдорд╕рдорд░реНрдкрдг рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдлрд┐рд░ рдПрдХ рдФрд░ рдЕрдЬреНрдЮрд╛рдд рдорд╛рддреНрд░рд╛ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИ - рдХрд┐рд░рд╛рдпреЗ рдХреА рдЖрдпред</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдореИрдВ рдмрд┐рдХреНрд░реА, рдХрд┐рд░рд╛рдпреЗ рдХреА рдХреАрдорддреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╛рд╕ рдХреА рдХреАрдорддреЛрдВ рдХреЗ рд╕рд╛рде рд╢рд╣рд░ рдХрд╛ рдирдХреНрд╢рд╛ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛, рдФрд░ рдпрд╣ рднреА рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдерд╛ рдХрд┐ рдпрд╣ рд╕рдордп рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдмрджрд▓рддрд╛ рд╣реИред </font></font></p><br>
<p>  zillow,        ,     ,         ,   ,    ,   : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">https://apciq.ca/en/real-estate-market/</a>.         ,     ,     .</p><br>
<p> ,               ,    ,  ,           ,       ,     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">https://github.com/Froren/realtorca</a></p><br>
<p>      тАФ     ,              ,    -   requests  beatifulsoap,         . </p><br>
<p>     тАФ    ,   ,  ,  ,      , ;         ,      .</p><br>
<p> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">   </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">openstreet map</a>,      . </p><br>
<h1 id="obrabotka-dannyh"> </h1><br>
<p> тАФ   ,      ,     sqlite  ,         ,        .   ,   ,     ,   ,      .. </p><br>
<p>     R,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">tidy-verse</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">Simple Features for R</a>,          тАФ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">-  Geocomputation with R</a>,     ggplot2 (   tidyverse),  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">tmap</a>. </p><br>
<p>     ,        ,    (join?)      . </p><br>
<h1 id="otslezhivanie-lokalnoy-ceny-kvartiry">   </h1><br>
<p> ,          ,   <em>dplyr</em>   ,         :</p><br>
<p>    R       ,        :</p><br>
<pre><code class="plaintext hljs">library(tidyverse)<font></font>
library(sf)<font></font>
<font></font>
property&lt;-read_csv("....") %&gt;% <font></font>
 st_as_sf(coords=c("lng","lat"), crs=4326) %&gt;% <font></font>
 st_transform(crs=32188)</code></pre><br>
<p>      :</p><br>
<pre><code class="plaintext hljs">neighbourhood&lt;-geojson_sf("quartierreferencehabitation.geojson") %&gt;%<font></font>
 st_transform(32188) %&gt;% <font></font>
 filter(nom_qr %in% c("Saint-Louis", "Milton-Parc")) %&gt;% <font></font>
 summarize() %&gt;% <font></font>
 st_buffer(dist=0)</code></pre><br>
<p>     :</p><br>
<pre><code class="plaintext hljs">neighbors &lt;- st_join(property, neighbourhood, left=F)</code></pre><br>
<p>     openstreetmap       :</p><br>
<pre><code class="plaintext hljs">osm_neighbourhood&lt;-read_osm(st_bbox(neighbourhood%&gt;%st_transform(4326)), ext=1.5, type="esri")</code></pre><br>
<p>       tmap :</p><br>
<pre><code class="plaintext hljs">library(tmap)<font></font>
library(tmaptools)<font></font>
<font></font>
tm_shape(osm_neighbourhood) + tm_rgb(alpha=0.7)+<font></font>
  tm_shape(neighbourhood) + tm_borders(col='red',alpha=0.8)  + <font></font>
  tm_shape(neighbors) + tm_symbols(shape=3,size=0.2,alpha=0.8) +<font></font>
  tm_shape(ref_home) + tm_symbols(col='red',shape=4,size=0.5,alpha=0.8)+<font></font>
  tm_compass(position=c("right", "bottom"))+<font></font>
  tm_scale_bar(position=c("right", "bottom"))</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/58e/efc/c29/58eefcc29df996dec0d1acb0d83a1c02.svg" alt="рдЫрд╡рд┐"><br>
   ,        :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/b55/211/d9f/b55211d9f54e4351d5b5a1e750a180b3.svg" alt="рдЫрд╡рд┐"></p><br>
<p>     (    ):</p><br>
<pre><code class="plaintext hljs">lm(price ~ parking:area_interior)</code></pre><br>
<p>  :</p><br>
<pre><code class="plaintext hljs">## Coefficients:<font></font>
##                            Estimate Std. Error t value Pr(&gt;|t|)    <font></font>
## (Intercept)                33776.10   22175.97   1.523    0.129    <font></font>
## parkingFALSE:area_interior   444.28      23.54  18.876   &lt;2e-16 ***<font></font>
## parkingTRUE:area_interior    523.01      19.65  26.614   &lt;2e-16 ***</code></pre><br>
<p>..             444$     33,    +523$.</p><br>
<p>   ,    443k$,    [433k$ тАФ 453k$] </p><br>
<p>,      ,            : </p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/219/fd7/792/219fd7792c21cbb1115694cb164e24c5.svg" alt="рдЫрд╡рд┐"></p><br>
<p>..      , ..            .  ,         . ,   ,  ,        <em>generalized linear model</em>    <em>inverse Gaussian distribution</em>    , -  ,   :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/007/2ad/d56/0072add564f8de13689123c86bfaf745.svg" alt="рдЫрд╡рд┐"></p><br>
<p>  : 435k$,  95%  [419k$ тАФ 450k$] тАФ ,         . </p><br>
<p>,        ,   ,       тАФ   .<br>
      ,  ,            тАФ ..           ,   ,          ( X  X  )    . </p><br>
<p>,          ()  ,       (<del> ,     </del>).</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/969/080/2ae/9690802aeccabd043ad9f734a38a2b14.svg" alt="рдЫрд╡рд┐"></p><br>
<p>   <em>generalized linear model</em>    <em>inverse Gaussian</em> distribution    :</p><br>
<pre><code class="plaintext hljs">glm(price_sqft ~ parking + bedrooms,family=inverse.gaussian(link="log")</code></pre><br>
<p>   :</p><br>
<pre><code class="plaintext hljs">## (Intercept)    parkingTRUE   bedrooms2   bedrooms3   bedrooms4 <font></font>
## 503.1981961   1.1215828   0.9720589   0.9662187   0.8325715</code></pre><br>
<p>..   ,   503$,   12%   ,   тАФ    2.8%, 3  тАФ  3.3%, 4   17%,          .<br>
     430k$ [ 413k$ тАФ 448k$] </p><br>
<h1 id="vremennaya-dinamika"> </h1><br>
<p>           .         <del>    </del>  .<br>
         - ,  - ,    тАФ  -    ,           ?<br>
 ,       <em>loess</em>.<br>
<img src="https://habrastorage.org/getpro/habr/post_images/971/703/3e7/9717033e7236995e67b49e244c69e7a2.svg" alt="рдЫрд╡рд┐"></p><br>
<p>     ,   тАФ -       .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/28f/d7f/831/28fd7f831faa836dfbd6553d6721d016.svg" alt="рдЫрд╡рд┐"></p><br>
<p>,             . ,             (     )    . </p><br>
<p>        тАЬ  тАЭ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow">Generalized additive model</a></p><br>
<p>     ,                    .  R     <em>mgcv</em>   <em>gam</em>:</p><br>
<pre><code class="plaintext hljs">gam(price_sqft ~ parking + bedrooms + s(start_date, k=24), family=inverse.gaussian(link="log"))</code></pre><br>
<p>    ,    ,    inverse Gaussian distribution,     ,    ,       24 .    gam тАФ    ,    k       . </p><br>
<p>      (  2    ):</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/677/cbf/c8f/677cbfc8fef6f08880e15c8442ffbfcf.svg" alt="рдЫрд╡рд┐"></p><br>
<p> ,    : 429k [413k-447k], .        .       ,     . </p><br>
<h1 id="skolko-vremeni-uydyot-na-prodazhu">    </h1><br>
<p>   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"> </a>               ,    .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5c6/3d2/02e/5c63d202e56401475ad563c6229359c6.svg" alt="рдЫрд╡рд┐"></p><br>
<p>,        60 .          ,       . </p><br>
<h1 id="ocenivaem-doma"> </h1><br>
<p>,          ,         .       ,       1,      - :</p><br>
<pre><code class="plaintext hljs">#     <font></font>
selected_mls=17758383 <font></font>
#    2<font></font>
max_distance=2000  <font></font>
#       <font></font>
plex_pe&lt;-prop_geo_p %&gt;% filter(type!='Apartment', type!='House')<font></font>
ref&lt;-plex_pe%&gt;%filter(mls==selected_mls) <font></font>
<font></font>
#     <font></font>
search_roi &lt;- st_buffer(ref, max_distance) <font></font>
#      ,    -  <font></font>
result &lt;- st_intersection(plex_pe %&gt;% filter(mls!=selected_mls), search_roi) %&gt;% <font></font>
filter(area_interior&lt;10000, area_interior&gt;100,area_land&gt;0,price&lt;1e7,price&gt;100 ) </code></pre><br>
<p> :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/4e1/587/1d7/4e15871d7535aab6a74659f9c6146a69.svg" alt="рдЫрд╡рд┐"></p><br>
<p>   :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/035/34b/dd6/03534bdd6c6ec801eb352f0dc62d3a71.svg" alt="рдЫрд╡рд┐"></p><br>
<p>,           ,          ,   -  тАФ        ,      (          XX ),         ..<br>
       ,    523k$,   [ 570k$ тАФ 620k$] </p><br>
<h1 id="risuem-karty-so-srednimi-cenami">    </h1><br>
<p>       ,        .  ,         .      sf   :</p><br>
<p>    ,       (),      ,       :</p><br>
<pre><code class="plaintext hljs">aggregate(filter(kijiji_geo_p,bedrooms==2)%&gt;%dplyr::select(price), mtl_p, median, join = st_contains)</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/895/498/c1d/895498c1d59478b1b0e18cea42c2e2b0.svg" alt="рдЫрд╡рд┐"></p><br>
<p>       ,   .              .        .<br>
   ,         :</p><br>
<pre><code class="plaintext hljs">gam(price_sqft ~ type + bedrooms + parking + s(x,y,k=100), family=inverse.gaussian(link="log"))</code></pre><br>
<p>   ,   100:</p><br>
<pre><code class="plaintext hljs">pred_rent_whole &lt;- raster(extent(mtl_land),res=100)<font></font>
crs(pred_rent_whole)&lt;-crs(mtl_land)<font></font>
my_predict&lt;-function(...) predict(...,type="response")<font></font>
pred_rent_whole&lt;- raster::interpolate(pred_rent_whole, model_rent_geo_whole, fun=my_predict, xyOnly=T,const=data.frame(bedrooms=2))<font></font>
<font></font>
#      <font></font>
pred_rent_whole &lt;- mask(pred_rent_whole, mtl_land)</code></pre><br>
<p>      <em>tmap</em>:</p><br>
<pre><code class="plaintext hljs">tm_shape(osm_mtl)+tm_rgb(alpha=0.6)+<font></font>
  tm_shape(mtl_arr) + tm_borders(alpha=0.8, col='black')+<font></font>
  tm_shape(pred_rent_whole)+tm_raster(style="cont",alpha=0.7, title='$')+  tm_shape(subway_stop_p%&gt;%dplyr::select(stop_name))+tm_symbols(col='blue',alpha=0.2,size=0.03)+<font></font>
  tm_shape(subway_p)+tm_lines(col='blue',alpha=0.2)+<font></font>
  tm_compass(position=c("right", "bottom"))+<font></font>
  tm_scale_bar(position=c("left", "bottom"))+<font></font>
  tm_layout(scale=1.5)</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/47e/a93/8fd/47ea938fd524dc1027091bba03b7f1d5.svg" alt="рдЫрд╡рд┐"><br>
  тАФ  .</p><br>
<p>   ,    .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b3f/272/789/b3f272789dd8ba919eb026a9b37a23aa.svg" alt="рдЫрд╡рд┐"></p><br>
<p>,      .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a89/de3/2a7/a89de32a720f8a50b8fc0fdaf1e8a052.svg" alt="рдЫрд╡рд┐"></p><br>
<p>     ,        (    /(    * ).<br>
         .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/c81/269/8a9/c812698a9809d34bd26cdead72c6fd00.svg" alt="рдЫрд╡рд┐"></p><br>
<p>   (   /  ).<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b88/b94/4ec/b88b944ecca7908d3e78bf5b83fd3c84.svg" alt="рдЫрд╡рд┐"></p><br>
<p>  ,     ,        (       ).</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/3b5/6bf/684/3b56bf6845a7558258397b1e07b90e74.svg" alt="рдЫрд╡рд┐"></p><br>
<h1 id="zaklyuchenie"></h1><br>
<p> ,        R  <del>   </del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░реЗрдВ рдХрд┐ рдХреНрдпрд╛, рдХрдм рдФрд░ рдХрд╣рд╛рдВ рдЦрд░реАрджрдирд╛ рдпрд╛ рдмреЗрдЪрдирд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЬреАрд╡рди рдПрдХ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЪреАрдЬ рд╣реИ, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдмрд┐рдХреНрд░реА рдореВрд▓реНрдп рдХрд╛ рдкрд░реНрдпрд╛рдкреНрдд рдЬреНрдЮрд╛рди рдирд╣реАрдВ рд╣реИ (рд╣рдорд╛рд░реЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдпрд╣ рдХреЗрд╡рд▓ рдкрдВрдЬреАрдХреГрдд рд░рд┐рдпрд▓реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдЙрдореНрдореАрдж рдирд╣реАрдВ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП рдХрд┐ рдкреНрд░рд╛рдкреНрдд рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди 100% рддрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЬрд┐рд╕рдиреЗ рднреА рдирд╣реАрдВ рдЫрд┐рдкрд╛рдпрд╛ рд╡рд╣ рдореЗрд░реА рдЧрд▓рддреА рдирд╣реАрдВ рд╣реИред</font></font></p><br>
<h1 id="ishodnyy-kod"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></h1><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рдбреЗрдЯрд╛ рдФрд░ рд╕реНрд░реЛрдд рдХреЛрдб рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд╣реИрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рд╣рд╛рдереА рдЦрд░реАрджреЗрдВ!</font></font></em></p><br>
<h2 id="bonus-dlya-teh-kto-dochital-do-konca"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рддрдХ рдкрдврд╝реЗ рд╣реБрдП рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдмреЛрдирд╕</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░рдПрдХреНрдЯрд┐рд╡ рдирдХреНрд╢рд╛: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.ilmarin.info/re_mtl/</font></font></a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi489470/index.html">рдмреЗрд╕реАрдЬ-рдЬреИрд╕реЗ рд╕рд┐рдореБрд▓реЗрд╢рди рдХреА рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзреА рдХреНрд╖рдорддрд╛</a></li>
<li><a href="../hi489472/index.html">рд╡реЗрдм рд╕рдВрдЧреНрд░рд╣: рдЖрдпрд╛рдд рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди</a></li>
<li><a href="../hi489474/index.html">рдлрд╛рд╕реНрдЯрдЯреЗрдХреНрд╕реНрдЯ рдореЙрдбрд▓ рдХреЛ 100 рдмрд╛рд░ рдХреИрд╕реЗ рдХрдВрдкреНрд░реЗрд╕ рдХрд░реЗрдВ</a></li>
<li><a href="../hi489476/index.html">CSS3 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдЯрд╛рдЗрд▓ рдЪреЗрдХрдмреЙрдХреНрд╕ рдФрд░ рд░реЗрдбрд┐рдпреЛ рдмрдЯрди</a></li>
<li><a href="../hi489482/index.html">рдХреНрдпрд╛ рдЖрдк рдХреЛ рдкрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЖрдк рдХреЛрдбрд╛рдВрддрд░рдХ рд╕реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХреА рдЬрд░реВрд░рдд рд╣реИ</a></li>
<li><a href="../hi489488/index.html">рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП DevOps (рдпрд╛ рдЙрдирдХреЗ рдЦрд┐рд▓рд╛рдл?)</a></li>
<li><a href="../hi489490/index.html">рдЯрд┐рдХ рдЯреАрдПрд╕реА рдХреЛ рдкреИрд░ рдХреА рдЕрдВрдЧреБрд▓реА (рдкрд┐рдХреНрд╕реАрдЬреЗрдПрд╕)</a></li>
<li><a href="../hi489492/index.html">╨п╨╜╨┤╨╡╨║╤Б.╨Ф╨╕╤Б╨║ ╨╖╨░╨┐╤А╨╡╤В╨╕╨╗ ╨╕╤Б╨┐╨╛╨╗╤М╨╖╨╛╨▓╨░╨╜╨╕╨╡ open source ╤Г╤В╨╕╨╗╨╕╤В╤Л rclone. UPD тАФ ╤Б╨╜╨╛╨▓╨░ ╤А╨░╨▒╨╛╤В╨░╨╡╤В</a></li>
<li><a href="../hi489494/index.html">рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдПрдВ</a></li>
<li><a href="../hi489496/index.html">рдХрд░реНрдордЪрд╛рд░рд┐рдпреЛрдВ рдФрд░ рдиреМрдХрд░реА рдХреА рдЦреЛрдЬ рдЦреЛрдЬреЗрдВ: рдЕрдВрджрд░ рдФрд░ рдмрд╛рд╣рд░ рд╕реЗ рдореЗрд░рд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>