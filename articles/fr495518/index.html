<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèª ü§ô üóìÔ∏è R√©agir au d√©veloppement du formulaire. Les principes KISS, YAGNI, DRY en pratique üí• ‚õ∑Ô∏è ü§ë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, dans ce tutoriel, nous verrons comment d√©velopper un formulaire tr√®s simple mais contr√¥l√© dans React, en se concentrant sur la qualit√© du cod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>R√©agir au d√©veloppement du formulaire. Les principes KISS, YAGNI, DRY en pratique</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495518/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, dans ce tutoriel, nous verrons comment d√©velopper un formulaire tr√®s simple mais contr√¥l√© dans React, en se concentrant sur la qualit√© du code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du d√©veloppement de notre formulaire, nous suivrons les principes de "KISS", "YAGNI", "DRY". </font><font style="vertical-align: inherit;">Pour r√©ussir ce tutoriel, vous n'avez pas besoin de conna√Ætre ces principes, je vais les expliquer en cours de route. </font><font style="vertical-align: inherit;">Cependant, je pense que vous ma√Ætrisez bien le javascript moderne et que vous pouvez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penser dans React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a> <br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Structure du didacticiel:</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour la cause! </font><font style="vertical-align: inherit;">√âcrire un formulaire simple en utilisant KISS et YAGNI</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring et SEC</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que peut-on faire d'autre?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh non! </font><font style="vertical-align: inherit;">Ne le faites pas, s'il vous pla√Æt!</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></a></li>
</ul><br>
<br>
<hr><br>
<a name="react-form-with-kiss-and-yagni"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour la cause! </font><font style="vertical-align: inherit;">√âcrire un formulaire simple en utilisant KISS et YAGNI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginons donc que nous ayons pour t√¢che de mettre en place un formulaire d'autorisation:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> logInData = {
  <span class="hljs-attr">nickname</span>: <span class="hljs-string">'Vasya'</span>,
  <span class="hljs-attr">email</span>: <span class="hljs-string">'pupkin@gmail.com'</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'Reac5$$$'</span>,<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/um/1u/vm/um1uvmjncpnlgaabmaui6rscw0s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commen√ßons notre d√©veloppement en analysant les principes de KISS et YAGNI, en oubliant temporairement le reste des principes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KISS - "Laissez le code simple et stupide." Je pense que vous connaissez le concept de code simple. Mais que signifie le code ¬´stupide¬ª? √Ä ma connaissance, il s'agit d'un code qui r√©sout le probl√®me en utilisant le nombre minimum d'abstractions, tandis que l'imbrication de ces abstractions les unes dans les autres est √©galement minime. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YAGNI - "Vous n'en aurez pas besoin." Le code ne doit pouvoir faire que ce pour quoi il est √©crit. Nous ne cr√©ons pas de fonctionnalit√©s qui pourraient √™tre n√©cessaires ult√©rieurement ou qui am√©liorent l'application √† notre avis. Nous ne faisons que ce qui est n√©cessaire sp√©cifiquement pour la mise en ≈ìuvre de la t√¢che. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suivons strictement ces principes, mais consid√©rons √©galement:</font></font><br>
<br>
<ul>
<li><code>initialData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>onSubmit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vient d'en haut (c'est une technique utile, surtout quand le formulaire doit pouvoir √™tre trait√© </font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en m√™me temps)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doit avoir pour chaque champ </font></font><code>label</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, manquons la stylisation, car elle n'est pas int√©ressante pour nous, et valide, car c'est un sujet pour un tutoriel s√©par√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez mettre en ≈ìuvre le formulaire vous-m√™me, en suivant les principes d√©crits ci-dessus.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impl√©mentation de mon formulaire</font></font></b><div class="spoiler_text"> <div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"> <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your nickname
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your email
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your password
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
    </code></pre><br>
 </div></div><br>
 <img src="https://habrastorage.org/webt/kv/i6/l0/kvi6l0hduiubopcittxuxczjqby.png"><br>
</div></div><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Votre d√©cision est probablement quelque peu diff√©rente, car chaque d√©veloppeur pense diff√©remment. </font><font style="vertical-align: inherit;">Vous pouvez cr√©er votre propre √©tat pour chaque champ ou placer des fonctions de gestionnaire dans une variable distincte, en tout cas ce n'est pas important. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si vous avez imm√©diatement cr√©√© une fonction de gestionnaire pour tous les champs, ce n'est plus la solution ¬´la plus stupide¬ª au probl√®me. </font><font style="vertical-align: inherit;">Et notre objectif √† ce stade est de cr√©er le code le plus simple et le plus "stupide" afin que plus tard nous puissions regarder l'image enti√®re et s√©lectionner la meilleure abstraction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez exactement le m√™me code, c'est cool et signifie que notre pens√©e converge! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, nous travaillerons avec ce code. </font><font style="vertical-align: inherit;">C'est simple, mais encore loin d'√™tre id√©al.</font></font><br>
<br>
<hr><br>
<a name="refactoring-and-dry"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactoring et SEC</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de traiter avec le principe DRY. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SEC, libell√© simplifi√© - "ne dupliquez pas votre code." </font><font style="vertical-align: inherit;">Le principe semble simple, mais il a un hic: pour se d√©barrasser de la duplication de code, il faut cr√©er des abstractions. </font><font style="vertical-align: inherit;">Si ces abstractions ne sont pas assez bonnes, nous violerons le principe KISS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est √©galement important de comprendre que DRY n'est pas n√©cessaire pour √©crire du code plus rapidement. </font><font style="vertical-align: inherit;">Sa t√¢che est de simplifier la lecture et le support de notre solution. </font><font style="vertical-align: inherit;">Par cons√©quent, ne vous pr√©cipitez pas pour cr√©er des abstractions tout de suite. </font><font style="vertical-align: inherit;">Il est pr√©f√©rable de faire une impl√©mentation simple d'une partie du code, puis d'analyser les abstractions que vous devez cr√©er afin de simplifier la lecture du code et de r√©duire le nombre de places pour les modifications lorsqu'elles sont n√©cessaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liste de contr√¥le de l'abstraction correcte:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le nom de l'abstraction est parfaitement conforme √† son objectif</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'abstraction effectue une t√¢che sp√©cifique et compr√©hensible</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la lecture du code dont l'abstraction a √©t√© extraite s'est am√©lior√©e</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, passons √† la refactorisation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et nous avons prononc√© un code en double:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/sl/u5/1t/slu51tnyjsk5ki1kowgso6qx5mk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce code duplique une composition de 2 √©l√©ments: </font></font><code>label</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Fusionnons-les dans une nouvelle abstraction </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ff/wi/j5/ffwij5ors822a6fu8n7_ciuwe3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, le n√¥tre </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ressemble √† ceci:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ns/ah/yi/nsahyidxew9tz3tqub5mcz09184.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lecture est devenue plus facile. </font><font style="vertical-align: inherit;">Le nom de l'abstraction correspond √† la t√¢che qu'elle r√©sout. </font><font style="vertical-align: inherit;">Le but du composant est √©vident. </font><font style="vertical-align: inherit;">Le code est devenu moins. </font><font style="vertical-align: inherit;">Nous allons donc dans la bonne direction! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, il est clair que la </font></font><code>InputField.onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logique est dupliqu√©e. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui s'y passe peut √™tre divis√© en 2 √©tapes:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> stage1 = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.target.value;
<span class="hljs-keyword">const</span> stage2 = <span class="hljs-function"><span class="hljs-params">password</span> =&gt;</span> setLogInData({ ...logInData, password });
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/n-/_o/dq/n-_odqnut4_5zg9-48xvusajjlg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re fonction d√©crit les d√©tails de l'obtention de la valeur de l'√©v√©nement </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nous avons le choix entre 2 abstractions dans lesquelles nous pouvons stocker cette logique: </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de d√©terminer correctement √† laquelle des abstractions nous devons renvoyer notre code, nous devrons nous tourner vers la formulation compl√®te du principe DRY: "Chaque partie de la connaissance devrait avoir une repr√©sentation unique, coh√©rente et faisant autorit√© au sein du syst√®me." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une partie des connaissances de l'exemple concret consiste √† savoir comment tirer le meilleur parti de l'√©v√©nement </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si nous stockons ces connaissances dans les n√¥tres </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, il est √©vident que lorsque nous utilisons notre</font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sous une autre forme, nous devrons dupliquer nos connaissances, ou les mettre dans une abstraction distincte et les utiliser √† partir de l√†. </font><font style="vertical-align: inherit;">Et sur la base du principe KISS, nous devrions avoir le nombre minimum d'abstractions possible. </font><font style="vertical-align: inherit;">En effet, pourquoi devons-nous cr√©er une autre abstraction si nous pouvons simplement mettre cette logique dans la n√¥tre </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et que le code externe ne saura rien sur le fonctionnement de l'entr√©e √† l'int√©rieur </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Il prendra simplement un sens pr√™t √† l'emploi, le m√™me qu'il passe vers l'int√©rieur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous n'√™tes pas certain d'avoir besoin d'un √©v√©nement √† l'avenir, n'oubliez pas le principe YAGNI. </font><font style="vertical-align: inherit;">Vous pouvez toujours ajouter un accessoire suppl√©mentaire </font></font><code>onChangeEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† notre composant </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusque-l√†, cela </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ressemblera √† ceci:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ label, type, value, onChange }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    {label}
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/cz/bc/bg/czbcbgp-xlbirtjno8_5enjc9lk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, l'uniformit√© du type est observ√©e lors de l'entr√©e et de la sortie dans le composant et la vraie nature de ce qui se passe pour le code externe est cach√©e. </font><font style="vertical-align: inherit;">Si, √† l'avenir, nous avons besoin d'un autre composant ui, par exemple, une case √† cocher ou une s√©lection, nous y maintiendrons √©galement l'uniformit√© du type en entr√©e-sortie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche nous donne une flexibilit√© suppl√©mentaire, car notre formulaire peut fonctionner avec toutes les sources d'entr√©e-sortie sans avoir besoin de produire des gestionnaires uniques suppl√©mentaires pour chacun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette astuce heuristique est int√©gr√©e par d√©faut dans de nombreux frameworks. </font><font style="vertical-align: inherit;">Par exemple, c'est l'id√©e principale </font></font><code>v-model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans </font></font><code>Vue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">laquelle beaucoup de gens aiment pour sa facilit√© √† travailler avec des formulaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revenons aux affaires, mettons √† jour notre composant </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en fonction des changements dans </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{nickname</span> =&gt;</span> setLogInData({ ...logInData, nickname })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{email</span> =&gt;</span> setLogInData({ ...logInData, email })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{password</span> =&gt;</span> setLogInData({ ...logInData, password })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/6b/cq/wb/6bcqwbfusg_fmw1pqbc8yxhxlsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela a d√©j√† l'air plut√¥t bien, mais nous pouvons faire encore mieux! </font></font><br>
<br>
<code>Callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui est pass√© fait </font></font><code>onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toujours la m√™me chose. </font><font style="vertical-align: inherit;">Seule la cl√© y est modifi√©e: mot de passe, email, pseudo. </font><font style="vertical-align: inherit;">Ainsi, nous pouvons le </font><font style="vertical-align: inherit;">remplacer par un appel √† la fonction: </font></font><code>handleChange('password')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Impl√©mentons cette fonction:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setLogInData({<font></font>
      ...logInData,<font></font>
      [fieldName]: fieldValue,<font></font>
    });<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/z7/po/o5/z7poo5vlkkdxtc939hzlt1gendk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, la fonction re√ßoit l'argument et le stocke dans la fermeture du gestionnaire, et le gestionnaire retourne imm√©diatement au code externe. </font><font style="vertical-align: inherit;">Les fonctions qui semblent prendre des arguments un par un pour un appel sont √©galement appel√©es curry. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons le code r√©sultant:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
      setLogInData({<font></font>
        ...logInData,<font></font>
        [fieldName]: fieldValue,<font></font>
      });<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
  <font></font>
  <span class="hljs-comment">// InputField.js</span>
  <span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ type, label, value, onChange }</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
      {label}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/bm/nu/td/bmnutdzasqokociudliqjyhli_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce code est une impl√©mentation courte, concise et mod√©r√©ment d√©clarative de la t√¢che. </font><font style="vertical-align: inherit;">Une refactorisation plus pouss√©e dans le contexte de la t√¢che, √† mon avis, n'a pas de sens.</font></font><br>
<br>
<hr><br>
<a name="what-else-can-we-do"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que peut-on faire d'autre?</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez plusieurs formulaires dans le projet, vous pouvez placer le calcul handleChange dans un crochet distinct </font></font><code>useFieldChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-comment">// hooks/useFieldChange.js</span>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: fieldValue,<font></font>
    }));<font></font>
  };<font></font>
  <span class="hljs-comment">// LogInForm.js</span>
  <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/eb/b8/eg/ebb8egvqobm-n27dn3tsuflcvly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisqu'il s'agit d'une fonction pure (c'est-√†-dire la premi√®re fois qu'elle est appel√©e car elle renvoie toujours la m√™me fonction), elle n'a pas besoin d'√™tre un crochet. </font><font style="vertical-align: inherit;">Mais le crochet semble conceptuellement une solution plus correcte et naturelle pour React. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez √©galement ajouter une prise </font></font><code>callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font><font style="vertical-align: inherit;">charge </font></font><code>fieldValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur </font><font style="vertical-align: inherit;">place </font><font style="vertical-align: inherit;">pour reproduire compl√®tement le comportement habituel √† </font></font><code>setState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir de </font></font><code>React</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> isFunc = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"function"</span>;<font></font>
<font></font>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: isFunc(fieldValue) ? fieldValue(state[fieldName]) : fieldValue,<font></font>
    }));<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/fz/t5/pd/fzt5pdldmj5gdy7duoycglqqrfe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple d'utilisation avec notre formulaire:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);
    <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/os/zb/ua/oszbuaygonezp9c2epw4st-msqy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si votre candidature ne comporte qu'un seul formulaire, vous n'avez pas besoin de faire tout cela! </font><font style="vertical-align: inherit;">Parce qu'il contredit le principe YAGNI, selon lequel nous ne devons pas faire ce dont nous n'avons pas besoin pour r√©soudre un probl√®me sp√©cifique. </font><font style="vertical-align: inherit;">Si vous n'avez qu'une seule forme, les avantages r√©els de tels mouvements ne suffisent pas. </font><font style="vertical-align: inherit;">Apr√®s tout, nous n'avons r√©duit le code de notre composant que de 3 lignes, mais avons introduit une abstraction suppl√©mentaire, cachant une certaine logique de la forme, qu'il vaut mieux garder en surface.</font></font><br>
<br>
<hr><br>
<a name="do-not-do-that-please"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh non! </font><font style="vertical-align: inherit;">Ne le faites pas, s'il vous pla√Æt!</font></font></h2><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulaires de configuration en forme</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les configurations verrouill√©es sont comme une configuration webpack, uniquement pour la forme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mieux avec un exemple, regardez ce code:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/0t/ro/cn/0trocndcco4vp8yld7cl6qfc0pa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il peut sembler √† certains que le code est dupliqu√© ici, car nous appelons le m√™me composant InputField, en y passant les m√™mes param√®tres label, value et onChange. </font><font style="vertical-align: inherit;">Et ils commencent √† DRY-yav leur propre code pour √©viter la duplication imaginaire. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Souvent, ils font √ßa comme ceci:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> fields = [<font></font>
  {<font></font>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'nickname'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your nickname'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your email'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your password'</span>,<font></font>
  },<font></font>
];<font></font>
<font></font>
<span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
    {fields.map(({ type, name, label }) =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">{label}</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state[name]}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(name)}</span>
      /&gt;</span>
    ))}
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/qi/f4/b4/qif4b4hwl1wjsinh3d7pi5xtv74.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, avec 17 lignes de code jsx, nous obtenons 16 lignes de la configuration. </font><font style="vertical-align: inherit;">Bravo! </font><font style="vertical-align: inherit;">C'est ce que je comprends SEC. </font><font style="vertical-align: inherit;">Si nous avons 100 de ces entr√©es ici, nous obtenons respectivement 605 et 506 lignes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, en cons√©quence, nous avons obtenu un code plus complexe, violant le principe KISS. </font><font style="vertical-align: inherit;">En effet, il se compose d√©sormais de 2 abstractions: des champs et un algorithme (oui, un algorithme est aussi une abstraction), ce qui en fait un arbre d'√©l√©ments React. </font><font style="vertical-align: inherit;">Lors de la lecture de ce code, nous devrons constamment sauter entre ces abstractions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le plus gros probl√®me avec ce code est son support et son extension. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez ce qui lui arrivera si:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d'autres types de champs avec diff√©rentes propri√©t√©s possibles seront ajout√©s</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les champs sont rendus ou non rendus en fonction de la saisie d'autres champs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certains champs n√©cessitent un traitement suppl√©mentaire lors du changement</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les valeurs dans les s√©lections d√©pendent des s√©lections pr√©c√©dentes</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette liste peut √™tre prolong√©e pendant longtemps ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'impl√©menter, vous devrez toujours stocker certaines fonctions dans votre configuration, et le code qui rend la configuration se transformera progressivement en Frankenstein, en prenant un tas d'accessoires diff√©rents et en les jetant sur diff√©rents composants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code qui a √©t√© √©crit auparavant, bas√© sur la composition des composants, se d√©veloppera discr√®tement, changera comme vous le souhaitez, sans devenir tr√®s compliqu√© en raison du manque d'abstraction interm√©diaire - un algorithme qui construit un arbre d'√©l√©ments React √† partir de notre configuration. </font><font style="vertical-align: inherit;">Ce code n'est pas en double. </font><font style="vertical-align: inherit;">Il suit simplement un certain mod√®le de conception, et par cons√©quent, il semble "√† motifs".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimisation inutile</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s l'apparition des crochets dans React, il y avait une tendance √† envelopper tous les gestionnaires et composants sans discrimination dans </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">S'il te pla√Æt ne fait pas √ßa! </font><font style="vertical-align: inherit;">Ces crochets n'ont pas √©t√© fournis par les d√©veloppeurs de React car React est lent et tout doit √™tre optimis√©. </font><font style="vertical-align: inherit;">Ils permettent d'optimiser votre application en cas de probl√®mes de performances. </font><font style="vertical-align: inherit;">Et m√™me si vous rencontrez de tels probl√®mes, vous n'avez pas besoin d'envelopper l'ensemble du projet dans </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Utilisez le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">profileur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour identifier les probl√®mes et ne m√©morisez ensuite qu'au bon endroit. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La m√©morisation rendra toujours votre code plus compliqu√©, mais pas toujours plus productif. </font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons le code d'un vrai projet. </font><font style="vertical-align: inherit;">Comparez √† quoi ressemble la fonction avec </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et sans:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> applyFilters = useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  }, [selectedMetricsStatus, onApplyFilterClick]);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> applyFilters = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/nh/iq/r1/nhiqr1y0yajlgo101b-dytdcq0u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lisibilit√© du code a clairement augment√© apr√®s le retrait du wrapper, car le code id√©al est son manque. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les performances de ce code n'ont pas augment√©, car cette fonction est utilis√©e comme ceci:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copier le code</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;RightFooterButton onClick={applyFilters}&gt;APPLY&lt;/RightFooterButton&gt;
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/wb/-7/a3/wb-7a33k1c2cjctumjl9wqi7ztu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'o√π </font></font><code>RightFooterButton</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- c'est juste </font></font><code>styled.button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>styled-components</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui sera mis √† jour tr√®s rapidement. </font><font style="vertical-align: inherit;">Mais la consommation de m√©moire augmente notre application car React gardera toujours en m√©moire </font></font><code>selectedMetricsStatus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>onApplyFilterClick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et la version de la fonction </font></font><code>applyFilters</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pertinente pour ces d√©pendances. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si ces arguments ne vous suffisent pas, lisez l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui aborde ce sujet plus largement.</font></font><br>
<br>
<hr><br>
<a name="conclusions"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les formulaires de r√©action sont faciles. </font><font style="vertical-align: inherit;">Des probl√®mes avec eux surviennent en raison des d√©veloppeurs eux-m√™mes et de la documentation React, dans laquelle ce sujet n'est pas divulgu√© de mani√®re suffisamment d√©taill√©e.</font></font><br>
 </li>
<li>           aka value  onChange  .      useFieldChange,  ,     ,      <code>v-model</code>  <code>Vue</code>   .<br>
 </li>
<li>         KISS  YAGNI.    DRY,  ,      .</li>
<li>       ,         ,        React-    .<br>
 </li>
<li>  ,      .</li>
</ul><br>
<br>
<hr><br>
<h3>P.S.</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au d√©part, j'avais pr√©vu d'√©crire sur la validation d√©clarative des formulaires imbriqu√©s complexes. </font><font style="vertical-align: inherit;">Mais, finalement, j'ai d√©cid√© de pr√©parer le public √† cela, afin que l'image soit aussi compl√®te que possible. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le tutoriel suivant portera sur la validation du formulaire simple impl√©ment√© dans ce tutoriel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un grand merci √† tous ceux qui ont lu jusqu'√† la fin! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peu importe comment vous √©crivez du code ou ce que vous faites, l'essentiel est d'en profiter.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495500/index.html">Alexey Klyanin: ¬´Jusqu'en 2018, je n'utilisais OSM que comme substrat dans mon blog¬ª</a></li>
<li><a href="../fr495504/index.html">Kingston KC600 512 Go: Solid Rocket</a></li>
<li><a href="../fr495508/index.html">Le navigateur a-t-il besoin d'une voix?</a></li>
<li><a href="../fr495512/index.html">Quelle est la meilleure fa√ßon de r√©chauffer une pizza?</a></li>
<li><a href="../fr495516/index.html">Le mod√®le Visitor est d√©conseill√© pour Kotlin, mais il vaut la peine de le savoir</a></li>
<li><a href="../fr495520/index.html">Liste de contr√¥le pour un architecte</a></li>
<li><a href="../fr495524/index.html">Quel langage de programmation apprendre pour que les grandes entreprises RH cherchent pour vous</a></li>
<li><a href="../fr495526/index.html">Organisation de l'acc√®s √† distance via Fortinet</a></li>
<li><a href="../fr495530/index.html">Convertisseur mat√©riel HDMI-RGB (18/24 bits)</a></li>
<li><a href="../fr495532/index.html">Comment les grandes entreprises informatiques ont transf√©r√© leur personnel au travail √† distance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>