<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥛 🆘 👩🏼 開発と並行してリファクタリング：私たちの経験と2つのチェックリスト 💲 👩‍💼 🈴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="多くのチームにとって、リファクタリングは苦痛です。リファクタリングを行うと、主な製品を開発できず、そうしないと、プロジェクトの技術的負債が増えるためです。ある時点で、チームは「リファクタリングと開発を区別して、たとえば、工数の20％と、残りの時間は開発に従事し続ける時間を割り当てましょう」と考えまし...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>開発と並行してリファクタリング：私たちの経験と2つのチェックリスト</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skyeng/blog/468579/"><img src="https://habrastorage.org/webt/3n/8w/10/3n8w10cwh92hq1p82rishnhmqbm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのチームにとって、リファクタリングは苦痛です。リファクタリングを行うと、主な製品を開発できず、そうしないと、プロジェクトの技術的負債が増えるためです。ある時点で、チームは「リファクタリングと開発を区別して、たとえば、工数の20％と、残りの時間は開発に従事し続ける時間を割り当てましょう」と考えました。このアイデアは悪くありません。唯一のことは、100開発時間ごとに、純粋な20時間のリファクタリングを取得できないことです。 「開発」はコードだけで機能するわけではないためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要なポイントに押し込まれた3〜5人のミニチームではなく、成熟したチームについて話している場合、「開発」には、コードの作成に加えて、チームのさまざまなアクティビティ全体が含まれます。</font><font style="vertical-align: inherit;">「開発」では、多くの人に愛されていない会議を書き留めたり、ドキュメントを操作したり、タスクマネージャでレポートを管理したりできます。</font><font style="vertical-align: inherit;">これらすべてが、開発に割り当てられた時計の約30％を占めています。</font><font style="vertical-align: inherit;">そして、何とか気付かれないように、「コードの80時間、リファクタリングの20時間」という図の代わりに、直接リファクタリング自体が約13時間という見苦しい数字になっていることがわかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下では、プロジェクトの技術的負債が雪だるまのように大きくならないように、開発とリファクタリングを組み合わせる方法を説明するだけでなく、時間の正しい配分と優先順位付けについても説明します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リファクタリングがなぜ多くの問題を引き起こすのですか？まず、チームが自分のリソースを適切に評価し、このプロセスを開発と組み合わせることができないためです。就業日が1日8時間（週40時間）の場合、40時間すべてが開発に従事していると思われます。本当じゃない。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発プロセス全体は2つの部分に分けることができます。これらはサイドアクティビティと、コードに直接関連するすべてのものです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ld/gs/xg/ldgsxgaz7voxqu4db83ernju2ba.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発チームの1人の時間配分は次のようになります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
読者は、「この図をどのように作成しましたか？」そして今、私たちは答えを出そうとします。データは上限から取得されたものではなく、内部統計に基づいています。開発者はJiraでの活動を追跡します。このような個人の作業ログは、4つのセクションで構成されています。コードレビュー、技術的なディスカッション、特定のチケット、および「その他すべて」です。このかなり単純で透過的な分類のおかげで、開発の各側面にどのチームが費やしたかを分析しました。すべての作業時間の3分の1が会議、スタンドアップ、レビューに当てはまる場合-すべてが通常の範囲内です。 33％以上がこれらのアクティビティに費やされている場合、チームには問題があり、対処する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここには問題点はなく、すべてが論理的ですが、このストーリーにリファクタリングをどのように組み込むことができますか？ 「リファクタリングの1か月」を宣言し、開発のスコアを記入しますか？ただし、市販の製品には独自のスケジュールがあり、それを抜け出すことは非常に望ましくありません。それでもリファクタリングは泥沼のようなものです。もしそれを処理し始めたなら、止めるのが難しく、この底に引き寄せられます。リファクタリングはチームの注意の焦点をそれ自体に移し、プロジェクトをより明るい未来に移動するのではなく、すでに記述されたコードの「順序を元に戻す」ことに大きな偏見を与えます。それでは、時間を配分する方法は？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のスライドはいくつかの答えを示しています：</font><i><font style="vertical-align: inherit;">時間ログを保持し</font></i><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bj/uu/q3/bjuuq39xcz86gro9tuqeii7uonu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは非常に便利です</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのアクティビティは可能な限り最適化され、十分最小限に保たれていると考えられるため、ミーティングやレビューはそのまま残ります（ミーティングやコードレビューで70％の時間を費やしたチームで作業した人は私たちの言葉を確認します）。</font><font style="vertical-align: inherit;">したがって、開発からコードとバグ修正をリファクタリングするために時間をかけます。</font><font style="vertical-align: inherit;">そしてここでも、「1と2/3」のアプローチを適用し、受け取った工数を「リファクタリング」と「バグ」に分割して、これらの概念を明確に分離しています。</font><font style="vertical-align: inherit;">このようなモデルは実行可能であり、少なくとも技術的負債を増やすことなく、プロジェクトをクリーンアップする時間を見つけることができます。</font><font style="vertical-align: inherit;">「開発」時間をあまりにも多く費やすと、プロジェクトは停止します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちはリファクタリングプロセスに正しく取り組みます</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトを最初から書き直すのではなく、リファクタリングすることにしたとします。</font><font style="vertical-align: inherit;">しかし、ここでは、最初のものを取得して軍のように「ここから昼食まで」リファクタリングすることはできません。</font><font style="vertical-align: inherit;">私たちのリソースは限られており、私たちの目標は技術的負債の増加を止めること（そして理想的にはその規模を縮小すること）であるため、私たちはこの課題に慎重に取り組む必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最善の解決策は、チームリーダーまたは別の開発マネージャーが作業の範囲を決定し、タスクを割り当て、リファクタリングを続行できるようにすることです。</font><font style="vertical-align: inherit;">しかし、このオプションには重大な欠陥があります。</font><font style="vertical-align: inherit;">ティムリッドは私たちのチームの指揮者ですが、地元のミュージシャンの問題は、指揮者にとって必ずしも明白ではありません。</font><font style="vertical-align: inherit;">あなたが堅い垂直の支持者であり、リファクタリングがどのように行われるかを一人が決めるモデルであるなら、あなたは自発的に、壊れたブレーキで山から奈落の底に突入する燃えるカマズに座ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの経験によると、イベント開発の堅牢なバージョンは、リファクタリングの特定の領域の集合的な定義であり、開発者は将来の作業のリストの編集に参加する必要があります。コードの直接の作成者のみが、このセクションが適切に閉じられたか、または時間の不足のためにさまざまな松葉杖が積み上げられたかを正直に認めることができます。さらに、テクノロジーの最先端にいる開発者が、プロジェクトのどの要素をリファクタリングする必要があるか、どの要素に手を加えてはいけないかを賢明に評価できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たち自身がこのアプローチを思いつきました。各開発者はプロジェクトのデリケートな場所を覚え、カードを書きます。それをより良くするために何をする必要があるかを書きます。これらのカードでは、タスクが決定されます。確かに、ニュアンスがあります。最初に受け取ったカードがコンテキストなしで「うまくいっている」というスタイルの後で、私たちはこのまさにコンテキストを圧縮形式で要求し始めました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/ji/-m/myji-mbkgzjvru6r4styhn5zxsy.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じカード</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、タスクを定義するだけでは、実装を開始することはできません。したがって、そのようなカードごとにチェックリストを作成する必要があります。チェックリストは、「並行して何かを行う必要があるか」などの一連の簡単な質問に答えます。または「このタスクを完了するのを妨げる要因はありますか？」このようなチェックリストに記入した後、開発者は、準備作業の段階で解決する必要があるすべての考えられる問題とブロッカーの具体的なリストを受け取ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つの必須のステップは、プロジェクトのどの領域に誰が最も精通しているかを判別することです。これにより、リファクタリングプロセスが最適化され、チームメンバーが自分自身を最も証明できる領域のタスクが提供されます。確かに、1人半の人がプロジェクトの1つの側面を通常理解している状況に直面した後、この問題でさえ解決することができます。情報の空白を解消するには、チームの他のメンバーが通過する領域でまだ「不機嫌」である開発者が知識を共有する必要があります。これは、ドキュメンテーション、ある種のミニプレゼンテーション、コードの説明付きのビデオでさえあります。同僚に情報を伝え、ダークスポットをできるだけ少なくすることが重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして最後に、チームは「技術的負債の規模はどのくらいか」という質問に明確に回答する必要があります。</font><font style="vertical-align: inherit;">「Cグレード」、「合格」、「10分の5」、「あなたが生きられる」などのグレードは機能しなくなりました。</font><font style="vertical-align: inherit;">以前は、プロジェクトの1つについて、サービスステーションからの同様の質問に「10分の5」と回答し、技術的負債のサイズを数値に換算すると、650時間でした。</font><font style="vertical-align: inherit;">ぎこちなかった。</font><font style="vertical-align: inherit;">この質問に対する明確な回答のみが、今後の作業の範囲を慎重に評価するのに役立ちます。</font><font style="vertical-align: inherit;">「無限の」タスクはチームメンバーのモチベーションを低下させ、ビジネスを激化させるため、これは重要です。開発者と管理者の両方が、チームが努力する具体的なエンドポイントを確認する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">優先順位付け</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作業の最前線を定義したら、リファクタリングと開発を組み合わせる必要があります。明らかに、プロジェクトのさまざまな部分でのフィーチャーソーイングを停止したり、このイベントに特別な時間を割り当てたりすることはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが最も難しい部分の始まりです。開発チームは、特にコードのこの時点で一部の機能が使用されている場合は特に、開発がより重要で、リファクタリングが重要であるタイミングを慎重に判断する必要があります。おそらく、リファクタリングの後、さらなる開発が容易になり、場合によっては機能を完成させてからリファクタリングすることができます。私たちは製品と通信し、決定を議論し、注文がどうなるかについて同意します。例：「最初のリファクタリングをしましょう-気分が良いだけでなく、最終的には全体の用語が少なくなるためです。」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も重要なことは、私たちの目標が製品の開発であることを忘れないことであり、完璧なコードまたは技術的負債の完全な排除のために完璧なコードを書くことではありません。</font><font style="vertical-align: inherit;">この点に関して、開発は完全に適切である必要があります。リファクタリングが現在のビジネス開発タスクに悪影響を及ぼしている場合は、新しいコードの一部を書き終えてから、古いコードを修正します。</font><font style="vertical-align: inherit;">プロジェクトがこのセクションをリファクタリングする方が収益性が高いと言う状況の場合（作業の最前線がどんなに厄介であっても）、その後の作業はより単純で楽しいので、リファクタリングする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチは、垂直管理モデルにはあま​​り適合せず、顧客の前で決定を守る必要がある状況に遭遇する場合があります。</font><font style="vertical-align: inherit;">しかし、それ以外は何もありません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結果として何が得られますか</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明したアプローチにより、リファクタリングプロセスを現在の開発に有機的に統合し、技術的負債のサイズを削減（または成長を停止）します。これらすべてに大きな犠牲を払うことなく行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、リファクタリングを行うために、新しい機能を開発する時間を短縮する必要があります。これにより、時間は長くなりますが、選択肢は少ないです。開発と並行してリファクタリングするか、遅かれ早かれ、そのような松葉杖、問題、バグの山に来て、プロジェクトをゼロから書き直すのが簡単になります。したがって、チームの作業を重視する場合は、将来的に書き直すのではなく、リファクタリングについて考える必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有用な資料：</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1.リファクタリングに関するAlexei Kataevのレポート：実践からのより多くの例、および...までリファクタリングしたくなかったGlebマネージャーの驚くべき話...</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/-yRyaN3XhMA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスクについて話し合うためのスケジュール</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
3. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェックリストのコードレビュー</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja468561/index.html">セキュリティウィーク39：セキュリティと一般的なミス</a></li>
<li><a href="../ja468563/index.html">ウォッチメンウォッチ：宇宙追跡施設の現状</a></li>
<li><a href="../ja468565/index.html">ESP8266の自家製ガイガーカウンターとタッチスクリーン</a></li>
<li><a href="../ja468573/index.html">postgres_exporterおよび複数のデータベースでのPostgreSQLインスタンスの監視</a></li>
<li><a href="../ja468577/index.html">Patch'ti-カウントしない：顔と色のパッチ管理の物語</a></li>
<li><a href="../ja468581/index.html">共有、釣り、迅速かつ完全に</a></li>
<li><a href="../ja468583/index.html">「救いに来る」注文からのゲームの例（例を含む12のインシデントの分析）</a></li>
<li><a href="../ja468589/index.html">共通コンポーネントのライブラリでの作業を整理する方法</a></li>
<li><a href="../ja468595/index.html">HuaweiでWi-Fiを構築した方法</a></li>
<li><a href="../ja468597/index.html">土星の六角形または自宅でオックスフォード大学の科学者の実験を再現する方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>