<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛳️ 👩🏼‍🌾 🖖🏼 Prueba de código JavaScript con Jest para tontos. Parte 1 ✊🏻 👨🏾‍💻 🚶🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Esta guía es la primera parte de una serie planificada de artículos sobre un marco de prueba tan bueno como Jest. El material será útil par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Prueba de código JavaScript con Jest para tontos. Parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502302/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola Habr! </font><font style="vertical-align: inherit;">Esta guía es la primera parte de una serie planificada de artículos sobre un marco de prueba tan bueno como Jest. </font><font style="vertical-align: inherit;">El material será útil para principiantes y para aquellos que recién se están familiarizando con las pruebas, y les gustaría estudiar este marco. </font><font style="vertical-align: inherit;">En la primera parte analizaremos: cómo comenzar con broma, cómo escribir una prueba simple y qué métodos existen para comparar los valores que se deben comparar con los esperados. </font><font style="vertical-align: inherit;">¿A quién le importa? ¡Bienvenido a Kat!</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué es broma?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se indica en la página de inicio del proyecto:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jest es un increíble entorno de prueba de JavaScript con un enfoque en la simplicidad.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y de hecho, Jest es muy simple. </font><font style="vertical-align: inherit;">No requiere configuraciones adicionales, fácil de entender y usar, y también tiene bastante buena documentación. </font><font style="vertical-align: inherit;">Ideal para proyectos con Node, React, Angular, Vue, Babel, TypeScript y más. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También es de código abierto y es compatible con Facebook.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalación</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instalar Jest en su proyecto, haga:</font></font><br>
<br>
<pre><code class="bash hljs">npm install --save-dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si está utilizando hilo:</font></font><br>
<br>
<pre><code class="bash hljs">yarn add --dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de la instalación, puede actualizar la sección de scripts de su package.json:</font></font><br>
<br>
<pre><code class="json hljs">“scripts” : {<font></font>
     “test”: “jest”<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con esta simple llamada, ya podemos ejecutar nuestras pruebas (de hecho, jest requerirá al menos una prueba para existir). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También puede instalarlo globalmente (pero no recomendaría hacerlo, ya que para mí la instalación global de módulos es una mala práctica):</font></font><br>
<br>
<pre><code class="bash hljs">npm install jest --global</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y en consecuencia para hilo:</font></font><br>
<br>
<pre><code class="bash hljs">yarn global add jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de eso, puede usar jest directamente desde la línea de comandos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al llamar al comando jest --init en la raíz del proyecto, después de responder algunas preguntas, obtendrá el archivo de configuración jest.config.js. </font><font style="vertical-align: inherit;">O puede agregar la configuración directamente a su package.json. </font><font style="vertical-align: inherit;">Para hacer esto, agregue la clave "jest" a la raíz json y en el objeto correspondiente puede agregar la configuración que necesita. </font><font style="vertical-align: inherit;">Analizaremos las opciones ellos mismos más tarde. </font><font style="vertical-align: inherit;">Esto no es necesario en esta etapa, ya que jest se puede usar de inmediato, sin configuraciones adicionales.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primer examen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creemos el archivo first.test.js y escribamos nuestra primera prueba:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">10</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ejecute nuestras pruebas usando npm run test o directamente con el comando jest (si está instalado globalmente). </font><font style="vertical-align: inherit;">Después del lanzamiento, veremos un informe sobre cómo pasar las pruebas.</font></font><br>
<br>
<pre><code class="plaintext hljs"> &lt;b&gt;PASS&lt;/b&gt;  ./first.test.js<font></font>
  ✓ My first test (1 ms)<font></font>
<font></font>
Test Suites: 1 passed, 1 total<font></font>
Tests:       1 passed, 1 total<font></font>
Snapshots:   0 total<font></font>
Time:        0.618 s, estimated 1 s<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rompamos nuestra prueba y corramos broma nuevamente:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">5</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como podemos ver, ahora nuestra prueba no pasa la prueba. Jest muestra información detallada sobre dónde ocurrió el problema, cuál fue el resultado esperado y qué obtuvimos en su lugar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora analicemos el código de la prueba en sí. Función de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prueba</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usado para crear una nueva prueba. Se necesitan tres argumentos (en el ejemplo usamos una llamada con dos argumentos). La primera es una línea con el nombre de la prueba, su broma se mostrará en el informe. La segunda es una función que contiene la lógica de nuestra prueba. También puede usar el tercer argumento: tiempo de espera. Es opcional y su valor predeterminado es de 5 segundos. Se establece en milisegundos. Este parámetro es necesario cuando trabajamos con código asincrónico y devolvemos una promesa de la función de prueba. Indica cuánto tiempo debe esperar la broma para que se resuelva la promesa. Después de este tiempo, si la promesa no fue permitida, broma considerará que la prueba falló. En las siguientes partes encontrará más información sobre cómo trabajar con llamadas asincrónicas. Alternativamente, </font><font style="vertical-align: inherit;">puede usarlo </font><i><font style="vertical-align: inherit;">() en</font></i><font style="vertical-align: inherit;"> lugar de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">().</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. No hay diferencia entre tales llamadas. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es solo un alias en la función </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro de la función de prueba, primero llamamos a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wait ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A él le pasamos el valor que queremos verificar. En nuestro caso, este es el resultado de llamar a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Math.max (1, 5, 10)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expect ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devuelve un objeto contenedor que tiene varios métodos para comparar el valor resultante con el esperado. Uno de estos métodos que utilizamos es </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBe</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos el principal de estos métodos:</font></font><br>
<br>
<ul>
<li><b>toBe()</b> — ,                ,     .     <i>Object.is()</i>.    ===     0  -0,   NaN c NaN.</li>
<li><b>toEqual()</b> — ,        .        .    .       .<br>
<br>
<pre><code class="javascript hljs">test(<span class="hljs-string">'toEqual with objects'</span>, () =&gt; {<font></font>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">// </span>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">num</span>: <span class="hljs-number">0</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">//    .</span><font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'toEqual with arrays'</span>, () =&gt; {<font></font>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]); <span class="hljs-comment">// </span>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>]); <span class="hljs-comment">// </span><font></font>
});<font></font>
</code></pre><br>
</li>
<li><b>toContain()</b> —       .     ===.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'apple'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'banana'</span>];<font></font>
expect(arr).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(arr)).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-string">'apple, orange, banana'</span>).toContain(<span class="hljs-string">'banana'</span>);
</code></pre><br>
</li>
<li><b>toContainEqual()</b> —        .<br>
<br>
<pre><code class="javascript hljs">expect([{<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>}, {<span class="hljs-attr">b</span>: <span class="hljs-number">2</span>}]).toContainEqual({<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>});
</code></pre><br>
</li>
<li><b>toHaveLength()</b> —    length    .<br>
<br>
<pre><code class="javascript hljs">expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]).toHaveLength(<span class="hljs-number">4</span>);<font></font>
expect(<span class="hljs-string">'foo'</span>).toHaveLength(<span class="hljs-number">3</span>);<font></font>
expect({ <span class="hljs-attr">length</span>: <span class="hljs-number">1</span> }).toHaveLength(<span class="hljs-number">1</span>);
</code></pre><br>
</li>
<li><b>toBeNull()</b> —     null.</li>
<li><b>toBeUndefined()</b> —     undefined.</li>
<li><b>toBeDefined()</b> — <i> toBeUndefined</i>.    !== undefined.</li>
<li><b>toBeTruthy()</b> —        true.     false, null, undefined, 0, NaN   .</li>
<li><b>toBeFalsy()</b> —  <i>toBeTruthy()</i>.        false.</li>
<li><b>toBeGreaterThan()</b>  <b>toBeGreaterThanOrEqual()</b> —        ,   &gt;,       &gt;=.</li>
<li><b>toBeLessThan()</b>  <b>toBeLessThanOrEqual()</b> —  <i>toBeGreaterThan()</i>  <i>toBeGreaterThanOrEqual()</i></li>
<li><b>toBeCloseTo()</b> —       ,         ,        .             .<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> num = <span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>; <span class="hljs-comment">// 0.30000000000000004</span>
expect(num).toBeCloseTo(<span class="hljs-number">0.3</span>);<font></font>
expect(<span class="hljs-built_in">Math</span>.PI).toBeCloseTo(<span class="hljs-number">3.14</span>, <span class="hljs-number">2</span>);
</code></pre><br>
</li>
<li><b>toMatch()</b> —     .<br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-string">'Banana'</span>).toMatch(<span class="hljs-regexp">/Ba/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toThrow ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : se usa cuando es necesario verificar la excepción. </font><font style="vertical-align: inherit;">Puede verificar tanto el hecho del error en sí como las excepciones de una determinada clase, ya sea por el mensaje de error o por la correspondencia del mensaje con la expresión regular.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithError</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'some error'</span>);<font></font>
}   <font></font>
expect(funcWithError).toThrow();<font></font>
expect(funcWithError).toThrow(<span class="hljs-built_in">Error</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-string">'some error'</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-regexp">/some/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : esta propiedad le permite verificar la desigualdad. </font><font style="vertical-align: inherit;">Proporciona un objeto que tiene todos los métodos enumerados anteriormente, pero funcionarán al revés.</font></font><br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-literal">true</span>).not.toBe(<span class="hljs-literal">false</span>);<font></font>
expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }).not.toEqual({});<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithoutError</span>(<span class="hljs-params"></span>) </span>{}<font></font>
expect(funcWithoutError).not.toThrow();<font></font>
</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escribamos un par de pruebas simples. </font><font style="vertical-align: inherit;">Primero, cree un módulo simple que contendrá varios métodos para trabajar con círculos.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/circle.js</span>
<span class="hljs-keyword">const</span> area = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-built_in">Math</span>.PI * radius ** <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> circumference = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI * radius;
<span class="hljs-built_in">module</span>.exports = { area, circumference };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, agregue las pruebas:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/circle.test.js</span>
<span class="hljs-keyword">const</span> circle = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/circle'</span>);<font></font>
<font></font>
test(<span class="hljs-string">'Circle area'</span>, () =&gt; {<font></font>
    expect(circle.area(<span class="hljs-number">5</span>)).toBeCloseTo(<span class="hljs-number">78.54</span>);<font></font>
    expect(circle.area()).toBeNaN();<font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'Circumference'</span>, () =&gt; {<font></font>
    expect(circle.circumference(<span class="hljs-number">11</span>)).toBeCloseTo(<span class="hljs-number">69.1</span>, <span class="hljs-number">1</span>);<font></font>
    expect(circle.circumference()).toBeNaN();<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En estas pruebas, verificamos el resultado de 2 métodos: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">área</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">circunferencia</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Usando el método </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeCloseTo,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verificamos el resultado esperado. </font><font style="vertical-align: inherit;">En el primer caso, verificamos o el área calculada del círculo con un radio de 5 es aproximadamente igual a 78.54, mientras que la diferencia con el valor obtenido (será 78.53981633974483) no es grande y se contará la prueba. </font><font style="vertical-align: inherit;">En el segundo, indicamos que estamos interesados ​​en verificar hasta 1 lugar decimal. </font><font style="vertical-align: inherit;">También llamamos a nuestros métodos sin argumentos y verificamos el resultado usando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeNaN</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Como el resultado de su ejecución será NaN, las pruebas se pasarán con éxito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tomemos otro ejemplo. </font><font style="vertical-align: inherit;">Creemos una función que filtre una variedad de productos por precio:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/productFilter.js</span>
<span class="hljs-keyword">const</span> byPriceRange = <span class="hljs-function">(<span class="hljs-params">products, min, max</span>) =&gt;</span>
         products.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.price &gt;= min &amp;&amp; item.price &lt;= max);
<span class="hljs-built_in">module</span>.exports = { byPriceRange };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y agregue una prueba:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/product.test.js</span>
<span class="hljs-keyword">const</span> productFilter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/producFilter'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> products = [<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'onion'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">12</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> }<font></font>
];<font></font>
<font></font>
test(<span class="hljs-string">'Test product filter by range'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> FROM = <span class="hljs-number">15</span>;
    <span class="hljs-keyword">const</span> TO = <span class="hljs-number">30</span>;
    <span class="hljs-keyword">const</span> filteredProducts = productFilter.byPriceRange(products, FROM, TO);<font></font>
<font></font>
    expect(filteredProducts).toHaveLength(<span class="hljs-number">2</span>);<font></font>
    expect(filteredProducts).toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> });<font></font>
    expect(filteredProducts).toEqual([{ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> }, { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> }]);<font></font>
    expect(filteredProducts[<span class="hljs-number">0</span>].price).toBeGreaterThanOrEqual(FROM);<font></font>
    expect(filteredProducts[<span class="hljs-number">1</span>].price).toBeLessThanOrEqual(TO);<font></font>
    expect(filteredProducts).not.toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> });<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta prueba, verificaremos el resultado de la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">función</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> byRangePrice </font><font style="vertical-align: inherit;">. Primero, verificamos la correspondencia de la longitud de la matriz resultante con la esperada - 2. La siguiente verificación requiere que el elemento contenga el elemento - {nombre: 'tomate', precio: 26}. El objeto en la matriz y el objeto pasado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> son dos objetos diferentes, no una referencia al mismo. Pero </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comparará cada propiedad. Como ambos objetos son idénticos, la verificación será exitosa. A continuación, usamos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para verificar la estructura de toda la matriz y sus elementos. Los </font><i><font style="vertical-align: inherit;">métodos </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeGreaterThanOrEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeLessThanOrEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nos ayudarán a verificar el precio del primer y segundo elemento de la matriz. Y finalmente, llamando a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not.toContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comprobará si el elemento está contenido en la matriz - {nombre: 'naranja', precio: 38}, que, por condición, no debería estar allí. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En estos ejemplos, escribimos algunas pruebas simples utilizando las funciones de verificación descritas anteriormente. </font><font style="vertical-align: inherit;">En las siguientes partes, discutiremos el trabajo con código asíncrono, las funciones de broma que no se cubrieron en esta parte del tutorial, hablaremos sobre su configuración y mucho más.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es502276/index.html">Método Kanban: Ejemplo PNZ No. 2: Capacitación y cursos</a></li>
<li><a href="../es502278/index.html">Cómo no editar pruebas de Python</a></li>
<li><a href="../es502286/index.html">Robots de fuego</a></li>
<li><a href="../es502292/index.html">Escribimos un autotest usando Selenium Webdriver, Java 8 y el patrón Page Object</a></li>
<li><a href="../es502298/index.html">Diagrama de flujo acumulativo (CFD) como indicador de la salud de su proyecto</a></li>
<li><a href="../es502306/index.html">De la historia de la transmisión satelital "no estándar"</a></li>
<li><a href="../es502308/index.html">¿Qué evita que el mercado de valores caiga a gran escala y qué tiene que ver la compañía de tecnología con él?</a></li>
<li><a href="../es502312/index.html">Reglas de vuelo visual e instrumental.</a></li>
<li><a href="../es502316/index.html">FCC abre la banda de 6 GHz para redes inalámbricas: ¿por qué no todos piensan que es una buena idea?</a></li>
<li><a href="../es502318/index.html">Lentejuelas inteligentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>