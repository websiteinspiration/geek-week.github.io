<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👁‍🗨 🚵🏾 🙏🏻 SnakeでSwiftを理解する 🚦 🌨️ 👨🏿‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！コースの開始を見越して「iOS-開発者。ベーシックコース」もう一つのオープンレッスンを開催しました このウェビナーは、任意の言語とプラットフォームでの開発経験があり、Swift言語を学び、iOSの開発をマスターしたい人向けに設計されています。このレッスンでは、主な開発ツールに精...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SnakeでSwiftを理解する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/469537/"><img src="https://habrastorage.org/webt/go/ti/3z/goti3zbe-douszd51y8huhfg3ki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
みなさん、こんにちは！</font><font style="vertical-align: inherit;">コースの開始を見越して</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「iOS-開発者。</font><font style="vertical-align: inherit;">ベーシックコース」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もう一つの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンレッスン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を開催し</font><font style="vertical-align: inherit;">ました </font><font style="vertical-align: inherit;">このウェビナーは、任意の言語とプラットフォームでの開発経験があり、Swift言語を学び、iOSの開発をマスターしたい人向けに設計されています。</font><font style="vertical-align: inherit;">このレッスンでは</font><font style="vertical-align: inherit;">、主な開発ツールに精通した</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swift言語の構文と主要な構成を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳しく調べました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<hr><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ウェビナーの参加者は次のことを学びました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swift言語とは何か、その機能は何か。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xcode開発環境がどのように役立つか</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iOS用のシンプルなゲームを作成する方法。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このウェビナーは</font><font style="vertical-align: inherit;">、YandexのiOS開発者である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexei Sobolevsky</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が主催しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自分でできるか自分でできるか</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作業には、統合開発</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">環境Xcode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、アップルが作成した便利で無料の機能的な環境です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当初、私たちは新しいプロジェクトを作成し、基本的なファイルのセット「ゲーム」を選択しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vs/lu/hg/vsluhgmqy_6rxlvmyqttv0filci.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それ以上の手間をかけることなく、彼らはプロジェクトを「スネーク」と呼びました。</font><font style="vertical-align: inherit;">すべての設定はデフォルトで残され、SpriteKitがゲームテクノロジーラインにあることを確認しました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトの作成の詳細。</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のアクションを実行すると、プロジェクト用に自動的に作成されたファイルのリストがウィンドウの左側に表示されます。</font><font style="vertical-align: inherit;">最も重要なファイルの1つは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AppDelegate.swiftです</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、アプリケーションの重要なイベント（起動、プッシュ、リンクのクリックなど）が発生したときにシステムがコードと通信するのに役立ちます。</font><font style="vertical-align: inherit;">このファイルのコード：</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  AppDelegate.swift</span>
<span class="hljs-comment">//  SnakeGame</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by Alexey Sobolevsky on 15/09/2019.</span>
<span class="hljs-comment">//  Copyright  2019 Alexey Sobolevsky. All rights reserved.</span>
<span class="hljs-comment">//</span><font></font>
 <font></font>
<span class="hljs-keyword">import</span> UIKit<font></font>
 <font></font>
<span class="hljs-meta">@UIApplicationMain</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppDelegate</span>: <span class="hljs-title">UIResponder</span>, <span class="hljs-title">UIApplicationDelegate</span> </span>{<font></font>
 <font></font>
    <span class="hljs-keyword">var</span> window: <span class="hljs-type">UIWindow?</span><font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">application</span><span class="hljs-params">(<span class="hljs-number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: <span class="hljs-keyword">Any</span>]?)</span></span> -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-comment">// Override point for customization after application launch.</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><font></font>
    }<font></font>
 <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様に重要なファイルは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScene.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameViewController.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">GameSceneクラスがシーンを作成し、GameViewControllerが表示するアプリケーションの1画面（1画面-1 GameViewController）を担当します。</font><font style="vertical-align: inherit;">もちろん、このルールは常にサポートされているわけではありませんが、一般的には機能します。</font><font style="vertical-align: inherit;">アプリケーションは非常にシンプルなので、GameViewControllerは1つだけです。</font><font style="vertical-align: inherit;">彼から始めましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameViewControllerの作成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトのコードを削除します。ビューコントローラには、画面の状態に応じて機能するいくつかのメソッドがあります。たとえば、</font></font><code>viewDidLoad()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての画面要素が既に読み込まれていて、画面がスマートフォンに表示されようとしているときに機能します。私たちはゲームを持っているので、ビューコントローラーにゲームシーンを配置する必要があります（これがヘビが実行され、ゲームの他のすべてのイベントが発生する場所です）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シーンを作成します。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> scene = <span class="hljs-type">GameScene</span>(size: view.bounds.size)</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">let</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は定数およびキーワードです。</font><font style="vertical-align: inherit;">Swiftは、変数の定義に必要なvarキーワードも使用します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用すると</font><font style="vertical-align: inherit;">、プログラムの実行中に変数の値を何度も変更できます。</font><font style="vertical-align: inherit;">letを使用すると、初期化後に変数の値を変更できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、作成したシーンを配置するビューが目的のタイプに対応していることを確認する必要があります。</font><font style="vertical-align: inherit;">これを行うには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクトを使用します。</font><font style="vertical-align: inherit;">これはと同じ</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですが、反対の場合（そうでない場合）です。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> skView = view <span class="hljs-keyword">as</span>? <span class="hljs-type">SKView</span> <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
screen要素が目的のタイプと一致していることを確認した後、シーンをそれに追加します。</font></font><br>
<br>
<pre><code class="swift hljs">skView.presentScene(scene)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1秒あたりのフレーム数（FPS）も表示する必要があります。</font></font><br>
<br>
<pre><code class="swift hljs">skView.showsFPS = <span class="hljs-literal">true</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、シーン上のすべてのタイプの要素の数を表示します。</font></font><br>
<br>
<pre><code class="swift hljs"> skView.showsNodeCount = <span class="hljs-literal">true</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、要素の階層における順序に関係なく、要素を画面に表示させましょう。</font></font><br>
<br>
<pre><code class="swift hljs">skView.ignoresSiblingOrder = <span class="hljs-literal">true</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、シーンが画面の幅いっぱいに広がることを忘れないでください。</font></font><br>
<br>
<pre><code class="swift hljs">scene.scaleMode = .resizeFill</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameViewController.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ファイルの最終的なコードは次の</font><font style="vertical-align: inherit;">とおり</font><font style="vertical-align: inherit;">です</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> SpriteKit
<span class="hljs-keyword">import</span> GameplayKit<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameViewController</span>: <span class="hljs-title">UIViewController</span> </span>{<font></font>
 <font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewWillLayoutSubviews</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.viewWillLayoutSubviews()<font></font>
 <font></font>
        setup()<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> skView = view <span class="hljs-keyword">as</span>? <span class="hljs-type">SKView</span> <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span><font></font>
        }<font></font>
 <font></font>
        <span class="hljs-keyword">let</span> scene = <span class="hljs-type">GameScene</span>(size: view.bounds.size)<font></font>
        skView.showsFPS = <span class="hljs-literal">true</span>
        skView.showsNodeCount = <span class="hljs-literal">true</span>
        skView.ignoresSiblingOrder = <span class="hljs-literal">true</span><font></font>
        scene.scaleMode = .resizeFill<font></font>
        skView.presentScene(scene)<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameViewController.swiftファイルの作成の詳細。</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、シーンを作成しましたが、それは空なので、今エミュレーターを実行すると、黒い画面しか表示されません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameSceneの作成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前回同様、ほとんどのコードを削除</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してから、シーンに必要な設定を行います</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、独自のメソッドがあります。</font><font style="vertical-align: inherit;">たとえば、シーンをViewControllerに追加したので、次のメソッドが必要です</font></font><code>didMove()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">didMove</span><span class="hljs-params">(to view: SKView)</span></span> {<font></font>
        setup(<span class="hljs-keyword">in</span>: view)<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ゲームが開始すると、各フレームに対してメソッド呼び出しが行われます</font></font><code>Update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-number">_</span> currentTime: TimeInterval)</span></span> {<font></font>
        snake?.move()<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、画面をタップするためのハンドラーもいくつか必要です。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">touchesEnded</span><span class="hljs-params">(<span class="hljs-number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> touchedNode = findTouchedNode(with: touches) <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }</code></pre><br>
<pre><code class="swift hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">touchesCancelled</span><span class="hljs-params">(<span class="hljs-number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> touchedNode = findTouchedNode(with: touches) <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご存知のように、Swiftは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構文糖の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在で有名です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">構文糖-これらは、開発者の生活を簡素化し、コードの記述をスピードアップする技術的な側面です。</font><font style="vertical-align: inherit;">これらはすべて、シーンのセットアップに大きく役立ちます。</font><font style="vertical-align: inherit;">まず、色を設定します。</font></font><br>
<br>
<pre><code class="swift hljs">backgroundColor = <span class="hljs-type">SKColor</span>.white</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘビは平面で動作するので、物理演算は必要ありません。重力によってヘビが落ちないように、物理をオフにすることができます。</font><font style="vertical-align: inherit;">また、スピンなどのゲームは必要ありません。</font></font><br>
<br>
<pre><code class="swift hljs">physicsWorld.gravity = .zero<font></font>
        physicsWorld.contactDelegate = <span class="hljs-keyword">self</span>
        physicsBody = <span class="hljs-type">SKPhysicsBody</span>(edgeLoopFrom: frame)<font></font>
        physicsBody?.allowsRotation = <span class="hljs-literal">false</span>
        physicsBody?.categoryBitMask = <span class="hljs-type">CollisionCategories</span>.edgeBody<font></font>
        physicsBody?.collisionBitMask = <span class="hljs-type">CollisionCategories</span>.snake | <span class="hljs-type">CollisionCategories</span>.snakeHead<font></font>
        view.showsPhysics = <span class="hljs-literal">true</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次にボタンを作成します。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> counterClockwiseButton = <span class="hljs-type">ControlsFactory</span>.makeButton(at: <span class="hljs-type">CGPoint</span>(x: scene.frame.minX + <span class="hljs-number">30</span>, y: scene.frame.minY + <span class="hljs-number">50</span>),<font></font>
                                             name: .counterClockwiseButtonName)<font></font>
        addChild(counterClockwiseButton)<font></font>
 <font></font>
        <span class="hljs-keyword">let</span> clockwiseButton = <span class="hljs-type">ControlsFactory</span>.makeButton(at: <span class="hljs-type">CGPoint</span>(x: scene.frame.maxX - <span class="hljs-number">90</span>, y: scene.frame.minY + <span class="hljs-number">50</span>),<font></font>
                                             name: .clockwiseButtonName)<font></font>
        addChild(clockwiseButton)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを記述したら、将来</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再利用</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できるように、コードを改善またはリファクタリングできるかどうかを検討する必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">基本的に、画面には2つのボタンがあり、その作成には同じコードが使用されています。</font><font style="vertical-align: inherit;">したがって、このコードは別の関数で取り出すことができます。</font><font style="vertical-align: inherit;">これを行うには</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいクラスを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">作成し</font></a><font style="vertical-align: inherit;">、それに応じ</font><font style="vertical-align: inherit;">て、次のコードを含む</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ControlsFactory.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">を作成します。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SpriteKit<font></font>
 <font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControlsFactory</span> </span>{<font></font>
 <font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeButton</span><span class="hljs-params">(at position: CGPoint, name: String)</span></span> -&gt; <span class="hljs-type">SKShapeNode</span> {
        <span class="hljs-keyword">let</span> button = <span class="hljs-type">SKShapeNode</span>()<font></font>
        button.path = <span class="hljs-type">UIBezierPath</span>(ovalIn: <span class="hljs-type">CGRect</span>(x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span>, width: <span class="hljs-number">45</span>, height: <span class="hljs-number">45</span>)).cgPath<font></font>
        button.position = position<font></font>
        button.fillColor = .gray<font></font>
        button.strokeColor = <span class="hljs-type">UIColor</span>.lightGray.withAlphaComponent(<span class="hljs-number">0.7</span>)<font></font>
        button.lineWidth = <span class="hljs-number">10</span><font></font>
        button.name = name<font></font>
        <span class="hljs-keyword">return</span> button<font></font>
    }<font></font>
 <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
蛇が「食べる」ランダムなリンゴを描くには</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Appleクラス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apple.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">作成し</font></a><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SpriteKit<font></font>
 <font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Apple</span>: <span class="hljs-title">SKShapeNode</span> </span>{
    <span class="hljs-keyword">let</span> diameter: <span class="hljs-type">CGFloat</span> = <span class="hljs-number">10</span><font></font>
 <font></font>
    <span class="hljs-keyword">convenience</span> <span class="hljs-keyword">init</span>(at point: <span class="hljs-type">CGPoint</span>) {
        <span class="hljs-keyword">self</span>.<span class="hljs-keyword">init</span>()<font></font>
 <font></font>
        path = <span class="hljs-type">UIBezierPath</span>(ovalIn: <span class="hljs-type">CGRect</span>(x: -diameter/<span class="hljs-number">2</span>, y: -diameter/<span class="hljs-number">2</span>, width: diameter, height: diameter)).cgPath<font></font>
        fillColor = .red<font></font>
        strokeColor = <span class="hljs-type">UIColor</span>.red.withAlphaComponent(<span class="hljs-number">0.7</span>)<font></font>
        lineWidth = <span class="hljs-number">5</span><font></font>
        position = point<font></font>
        physicsBody = <span class="hljs-type">SKPhysicsBody</span>(circleOfRadius: diameter / <span class="hljs-number">2</span>, center: .zero)<font></font>
        physicsBody?.categoryBitMask = <span class="hljs-type">CollisionCategories</span>.apple<font></font>
    }<font></font>
 <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして</font></font><code>createApple()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AppleScene</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">GameScene.swiftで</font></b><font style="vertical-align: inherit;">記述します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createApple</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">let</span> padding: <span class="hljs-type">UInt32</span> = <span class="hljs-number">15</span>
        <span class="hljs-keyword">let</span> randX = <span class="hljs-type">CGFloat</span>(arc4random_uniform(<span class="hljs-type">UInt32</span>(gameFrameRect.maxX) - padding) + padding)
        <span class="hljs-keyword">let</span> randY = <span class="hljs-type">CGFloat</span>(arc4random_uniform(<span class="hljs-type">UInt32</span>(gameFrameRect.maxY) - padding) + padding)
        <span class="hljs-keyword">let</span> apple = <span class="hljs-type">Apple</span>(at: <span class="hljs-type">CGPoint</span>(x: randX, y: randY).relative(to: gameFrameRect))<font></font>
        gameFrameView.addChild(apple)<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、蛇の番です。</font><font style="vertical-align: inherit;">ボディ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SnakeBodyPart.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）とヘッド（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SnakeHead.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">の2つの部分で構成されます</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">SnakeBodyPart.swift</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コード</font><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SpriteKit<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SnakeBodyPart</span>: <span class="hljs-title">SKShapeNode</span> </span>{<font></font>
 <font></font>
    <span class="hljs-keyword">init</span>(at point: <span class="hljs-type">CGPoint</span>, diameter: <span class="hljs-type">CGFloat</span> = <span class="hljs-number">10.0</span>) {
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>()<font></font>
        path = <span class="hljs-type">UIBezierPath</span>(ovalIn: <span class="hljs-type">CGRect</span>(x: -diameter/<span class="hljs-number">2</span>, y: -diameter/<span class="hljs-number">2</span>, width: diameter, height: diameter)).cgPath<font></font>
        fillColor = .green<font></font>
        strokeColor = <span class="hljs-type">UIColor</span>.green.withAlphaComponent(<span class="hljs-number">0.7</span>)<font></font>
        lineWidth = <span class="hljs-number">5</span><font></font>
        position = point<font></font>
 <font></font>
        physicsBody = <span class="hljs-type">SKPhysicsBody</span>(circleOfRadius: diameter - <span class="hljs-number">4</span>, center: .zero)<font></font>
        physicsBody?.isDynamic = <span class="hljs-literal">true</span>
        physicsBody?.categoryBitMask = <span class="hljs-type">CollisionCategories</span>.snake<font></font>
        physicsBody?.contactTestBitMask = <span class="hljs-type">CollisionCategories</span>.edgeBody | <span class="hljs-type">CollisionCategories</span>.apple<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">init</span>?(coder aDecoder: <span class="hljs-type">NSCoder</span>) {
        <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"init(coder:) has not been implemented"</span>)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SnakeHead.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コード</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SpriteKit<font></font>
 <font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SnakeHead</span>: <span class="hljs-title">SnakeBodyPart</span> </span>{<font></font>
 <font></font>
    <span class="hljs-keyword">init</span>(at point: <span class="hljs-type">CGPoint</span>) {
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(at: point, diameter: <span class="hljs-number">20</span>)<font></font>
 <font></font>
        physicsBody?.categoryBitMask = <span class="hljs-type">CollisionCategories</span>.snakeHead<font></font>
        physicsBody?.contactTestBitMask = <span class="hljs-type">CollisionCategories</span>.edgeBody | <span class="hljs-type">CollisionCategories</span>.apple<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">init</span>?(coder aDecoder: <span class="hljs-type">NSCoder</span>) {
        <span class="hljs-built_in">fatalError</span>(<span class="hljs-string">"init(coder:) has not been implemented"</span>)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScene.swiftファイル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およびその他のクラス</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の作成の詳細が</font></a><font style="vertical-align: inherit;">ビデオによく表示されている</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ため、</font></a><font style="vertical-align: inherit;">各行の説明に退屈することはありません</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameScene.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の最終コードのみを表示します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SpriteKit
<span class="hljs-keyword">import</span> GameplayKit<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GameScene</span>: <span class="hljs-title">SKScene</span> </span>{<font></font>
 <font></font>
    <span class="hljs-keyword">var</span> gameFrameRect: <span class="hljs-type">CGRect</span> = .zero
    <span class="hljs-keyword">var</span> gameFrameView: <span class="hljs-type">SKShapeNode!</span>
    <span class="hljs-keyword">var</span> startButton: <span class="hljs-type">SKLabelNode!</span>
    <span class="hljs-keyword">var</span> stopButton: <span class="hljs-type">SKLabelNode!</span>
    <span class="hljs-keyword">var</span> snake: <span class="hljs-type">Snake?</span><font></font>
 <font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">didMove</span><span class="hljs-params">(to view: SKView)</span></span> {<font></font>
        setup(<span class="hljs-keyword">in</span>: view)<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-number">_</span> currentTime: TimeInterval)</span></span> {<font></font>
        snake?.move()<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">touchesBegan</span><span class="hljs-params">(<span class="hljs-number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> touchedNode = findTouchedNode(with: touches) <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span><font></font>
        }<font></font>
 <font></font>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> shapeNode = touchedNode <span class="hljs-keyword">as</span>? <span class="hljs-type">SKShapeNode</span>,<font></font>
            touchedNode.name == .counterClockwiseButtonName || touchedNode.name == .clockwiseButtonName {<font></font>
            shapeNode.fillColor = .green<font></font>
            <span class="hljs-keyword">if</span> touchedNode.name == .counterClockwiseButtonName {<font></font>
                snake?.moveCounterClockwise()<font></font>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> touchedNode.name == .clockwiseButtonName {<font></font>
                snake?.moveClockwise()<font></font>
            }<font></font>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> touchedNode.name == .startButtonName {<font></font>
            start()<font></font>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> touchedNode.name == .stopButtonName {<font></font>
            stop()<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">touchesEnded</span><span class="hljs-params">(<span class="hljs-number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> touchedNode = findTouchedNode(with: touches) <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span><font></font>
        }<font></font>
 <font></font>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> shapeNode = touchedNode <span class="hljs-keyword">as</span>? <span class="hljs-type">SKShapeNode</span>,<font></font>
            touchedNode.name == .counterClockwiseButtonName || touchedNode.name == .clockwiseButtonName {<font></font>
            shapeNode.fillColor = .gray<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">touchesCancelled</span><span class="hljs-params">(<span class="hljs-number">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> touchedNode = findTouchedNode(with: touches) <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span><font></font>
        }<font></font>
 <font></font>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> shapeNode = touchedNode <span class="hljs-keyword">as</span>? <span class="hljs-type">SKShapeNode</span>,<font></font>
            touchedNode.name == .counterClockwiseButtonName || touchedNode.name == .clockwiseButtonName {<font></font>
            shapeNode.fillColor = .gray<font></font>
        }<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-comment">// MARK: -</span><font></font>
 <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">start</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> scene = scene <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<font></font>
 <font></font>
        snake = <span class="hljs-type">Snake</span>(at: <span class="hljs-type">CGPoint</span>(x: scene.frame.midX, y: scene.frame.midY))<font></font>
        gameFrameView.addChild(snake!)<font></font>
 <font></font>
        createApple()<font></font>
 <font></font>
        startButton.isHidden = <span class="hljs-literal">true</span>
        stopButton.isHidden = <span class="hljs-literal">false</span><font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span> {<font></font>
        snake = <span class="hljs-literal">nil</span><font></font>
        gameFrameView.removeAllChildren()<font></font>
 <font></font>
        startButton.isHidden = <span class="hljs-literal">false</span>
        stopButton.isHidden = <span class="hljs-literal">true</span><font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setup</span><span class="hljs-params">(<span class="hljs-keyword">in</span> view: SKView)</span></span> {<font></font>
        backgroundColor = <span class="hljs-type">SKColor</span>.white<font></font>
 <font></font>
        physicsWorld.gravity = .zero<font></font>
        physicsWorld.contactDelegate = <span class="hljs-keyword">self</span>
        physicsBody = <span class="hljs-type">SKPhysicsBody</span>(edgeLoopFrom: frame)<font></font>
        physicsBody?.allowsRotation = <span class="hljs-literal">false</span>
        physicsBody?.categoryBitMask = <span class="hljs-type">CollisionCategories</span>.edgeBody<font></font>
        physicsBody?.collisionBitMask = <span class="hljs-type">CollisionCategories</span>.snake | <span class="hljs-type">CollisionCategories</span>.snakeHead<font></font>
        view.showsPhysics = <span class="hljs-literal">true</span><font></font>
 <font></font>
        <span class="hljs-keyword">let</span> margin: <span class="hljs-type">CGFloat</span> = <span class="hljs-number">20</span>
        <span class="hljs-keyword">let</span> gameFrame = frame.inset(by: view.safeAreaInsets)<font></font>
        gameFrameRect = <span class="hljs-type">CGRect</span>(x: margin, y: margin + view.safeAreaInsets.top + <span class="hljs-number">55</span>,<font></font>
                               width: gameFrame.width - margin * <span class="hljs-number">2</span>, height: gameFrame.height - margin * <span class="hljs-number">2</span> - <span class="hljs-number">55</span>)<font></font>
        drawGameFrame()<font></font>
 <font></font>
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> scene = view.scene <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span><font></font>
        }<font></font>
 <font></font>
        <span class="hljs-keyword">let</span> counterClockwiseButton = <span class="hljs-type">ControlsFactory</span>.makeButton(at: <span class="hljs-type">CGPoint</span>(x: scene.frame.minX + <span class="hljs-number">30</span>, y: scene.frame.minY + <span class="hljs-number">50</span>),<font></font>
                                                                name: .counterClockwiseButtonName)<font></font>
        addChild(counterClockwiseButton)<font></font>
 <font></font>
        <span class="hljs-keyword">let</span> clockwiseButton = <span class="hljs-type">ControlsFactory</span>.makeButton(at: <span class="hljs-type">CGPoint</span>(x: scene.frame.maxX - <span class="hljs-number">90</span>, y: scene.frame.minY + <span class="hljs-number">50</span>),<font></font>
                                                         name: .clockwiseButtonName)<font></font>
        addChild(clockwiseButton)<font></font>
 <font></font>
        startButton = <span class="hljs-type">SKLabelNode</span>(text: <span class="hljs-string">"S T A R T"</span>)<font></font>
        startButton.position = <span class="hljs-type">CGPoint</span>(x: scene.frame.midX, y: <span class="hljs-number">55</span>)<font></font>
        startButton.fontSize = <span class="hljs-number">40</span><font></font>
        startButton.fontColor = .green<font></font>
        startButton.name = .startButtonName<font></font>
        addChild(startButton)<font></font>
 <font></font>
        stopButton = <span class="hljs-type">SKLabelNode</span>(text: <span class="hljs-string">"S T O P"</span>)<font></font>
        stopButton.position = <span class="hljs-type">CGPoint</span>(x: scene.frame.midX, y: <span class="hljs-number">55</span>)<font></font>
        stopButton.fontSize = <span class="hljs-number">40</span><font></font>
        stopButton.fontColor = .red<font></font>
        stopButton.name = .stopButtonName<font></font>
        stopButton.isHidden = <span class="hljs-literal">true</span><font></font>
        addChild(stopButton)<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">final</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">drawGameFrame</span><span class="hljs-params">()</span></span> {<font></font>
        gameFrameView = <span class="hljs-type">SKShapeNode</span>(rect: gameFrameRect)<font></font>
        gameFrameView.fillColor = .lightGray<font></font>
        gameFrameView.lineWidth = <span class="hljs-number">2</span><font></font>
        gameFrameView.strokeColor = .green<font></font>
        addChild(gameFrameView)<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">findTouchedNode</span><span class="hljs-params">(with touches: Set&lt;UITouch&gt;)</span></span> -&gt; <span class="hljs-type">SKNode?</span> {
        <span class="hljs-keyword">return</span> touches.<span class="hljs-built_in">map</span> { [<span class="hljs-keyword">unowned</span> <span class="hljs-keyword">self</span>] touch <span class="hljs-keyword">in</span> touch.location(<span class="hljs-keyword">in</span>: <span class="hljs-keyword">self</span>) }<font></font>
            .<span class="hljs-built_in">map</span> { atPoint($<span class="hljs-number">0</span>) }<font></font>
            .first<font></font>
    }<font></font>
 <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createApple</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">let</span> padding: <span class="hljs-type">UInt32</span> = <span class="hljs-number">15</span>
        <span class="hljs-keyword">let</span> randX = <span class="hljs-type">CGFloat</span>(arc4random_uniform(<span class="hljs-type">UInt32</span>(gameFrameRect.maxX) - padding) + padding)
        <span class="hljs-keyword">let</span> randY = <span class="hljs-type">CGFloat</span>(arc4random_uniform(<span class="hljs-type">UInt32</span>(gameFrameRect.maxY) - padding) + padding)
        <span class="hljs-keyword">let</span> apple = <span class="hljs-type">Apple</span>(at: <span class="hljs-type">CGPoint</span>(x: randX, y: randY).relative(to: gameFrameRect))<font></font>
        gameFrameView.addChild(apple)<font></font>
    }<font></font>
 <font></font>
}<font></font>
 <font></font>
<span class="hljs-comment">// MARK: - SKPhysicsContactDelegate</span><font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">GameScene</span>: <span class="hljs-title">SKPhysicsContactDelegate</span> </span>{<font></font>
 <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">didBegin</span><span class="hljs-params">(<span class="hljs-number">_</span> contact: SKPhysicsContact)</span></span> {
        <span class="hljs-keyword">var</span> contactMask = contact.bodyA.categoryBitMask | contact.bodyB.categoryBitMask<font></font>
        contactMask ^= <span class="hljs-type">CollisionCategories</span>.snakeHead<font></font>
 <font></font>
        <span class="hljs-keyword">switch</span> contactMask {
        <span class="hljs-keyword">case</span> <span class="hljs-type">CollisionCategories</span>.apple:
            <span class="hljs-keyword">let</span> apple = contact.bodyA.node <span class="hljs-keyword">is</span> <span class="hljs-type">Apple</span> ? contact.bodyA.node : contact.bodyB.node<font></font>
            snake?.addBodyPart()<font></font>
            apple?.removeFromParent()<font></font>
            createApple()<font></font>
 <font></font>
        <span class="hljs-keyword">case</span> <span class="hljs-type">CollisionCategories</span>.edgeBody:<font></font>
            stop()<font></font>
            <span class="hljs-keyword">break</span><font></font>
 <font></font>
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">break</span><font></font>
        }<font></font>
    }<font></font>
 <font></font>
}<font></font>
 <font></font>
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">String</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> counterClockwiseButtonName = <span class="hljs-string">"counterClockwiseButton"</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> clockwiseButtonName = <span class="hljs-string">"clockwiseButton"</span><font></font>
 <font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> startButtonName = <span class="hljs-string">"startButton"</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> stopButtonName = <span class="hljs-string">"stopButton"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作業の結果、最もシンプルなスネークゲーム</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x7/i7/wt/x7i7wtj2zk-1y-xb-hkj4z-prg0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
が完成しました。ゲームの作成には約1時間半かかりました。</font><font style="vertical-align: inherit;">Swiftでプログラミングスキルを習得したい場合は、すべての手順を自分で繰り返します。</font><font style="vertical-align: inherit;">ちなみに、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、このプロジェクトで使用されたすべてのコードファイルに完全にアクセスできます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469525/index.html">鉱山掘削機の自動制御システム</a></li>
<li><a href="../ja469527/index.html">インターホンはスパイの耳ですか？</a></li>
<li><a href="../ja469529/index.html">テキストのレンダリングはあなたを嫌います</a></li>
<li><a href="../ja469531/index.html">「プログラミング言語をより悪い基準で比較することは、完全にばかげた職業です。」</a></li>
<li><a href="../ja469533/index.html">生体認証の問題と脅威</a></li>
<li><a href="../ja469541/index.html">werfとGitLab CIを使用した同じタイプのマイクロサービスの組み立てとデプロイ</a></li>
<li><a href="../ja469543/index.html">DirectumRXサービスのRedisのスケーラビリティとフェイルオーバー</a></li>
<li><a href="../ja469545/index.html">Linuxカーネル5.3の新機能-ネットワークサブシステムのグラフィックスドライバー、仮想化、および変更</a></li>
<li><a href="../ja469549/index.html">Windows VPSの99ルーブルの関税をどうやって達成したか</a></li>
<li><a href="../ja469551/index.html">ビデオカードを備えたVDS-私たちは倒錯についてよく知っています</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>