<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€âš–ï¸ ğŸ¦‰ ğŸ¤œğŸ¾ @ NonNull / @ Nullableã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ ğŸ‘¨ğŸ¿â€ğŸŒ¾ ğŸ‘¨ğŸ¾â€ğŸ”¬ ğŸ™‰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã€Œå°‚ç”¨ã€ã®ä»£ã‚ã‚Šã«
 ä»¥ä¸‹ã«èª¬æ˜ã™ã‚‹ã‚¿ã‚¹ã‚¯ã¯é©æ–°çš„ã§ã‚‚å®Ÿç”¨çš„ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ç§ãŒåƒã„ã¦ã„ã‚‹ä¼šç¤¾ã¯ãã‚Œã®ãŸã‚ã«åˆ©ç›Šã‚’å—ã‘å–ã‚Šã¾ã›ã‚“ãŒã€ç§ã¯ãƒœãƒ¼ãƒŠã‚¹ã«ãªã‚Šã¾ã™ã€‚
 
 ã—ã‹ã—ã€ã“ã®å•é¡ŒãŒã‚ã£ãŸãŸã‚ã€è§£æ±ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚
 
 ã¯ã˜ã‚ã«
 ã‚ãªãŸãŒãƒ­ãƒ³ãƒœã‚¯ã¨ã„ã†è¨€è‘‰ã«ã—ã°ã—ã°å‡ºä¼šã†è¨˜äº‹ã§ã¯ã€å«Œ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>@ NonNull / @ Nullableã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464939/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€Œå°‚ç”¨ã€ã®ä»£ã‚ã‚Šã«</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹ã«èª¬æ˜ã™ã‚‹ã‚¿ã‚¹ã‚¯ã¯é©æ–°çš„ã§ã‚‚å®Ÿç”¨çš„ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ç§ãŒåƒã„ã¦ã„ã‚‹ä¼šç¤¾ã¯ãã‚Œã®ãŸã‚ã«åˆ©ç›Šã‚’å—ã‘å–ã‚Šã¾ã›ã‚“ãŒã€ç§ã¯ãƒœãƒ¼ãƒŠã‚¹ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ã‹ã—ã€ã“ã®å•é¡ŒãŒã‚ã£ãŸãŸã‚ã€è§£æ±ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã˜ã‚ã«</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚ãªãŸãŒãƒ­ãƒ³ãƒœã‚¯ã¨ã„ã†è¨€è‘‰ã«ã—ã°ã—ã°å‡ºä¼šã†è¨˜äº‹ã§ã¯ã€å«Œæ‚ªè€…ã«çµè«–ã«æ€¥ãŒã‚Œãªã„ã‚ˆã†ã«ãŠé¡˜ã„ã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã¯ãƒ­ãƒ³ãƒœã‚¯ã‚„ãã®ä¸åœ¨ã®ãŸã‚ã«ã€Œæººã‚Œã‚‹ã€ã¤ã‚‚ã‚Šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¸ã‚§ãƒ©ãƒ«ãƒˆã‚µãƒ—ã‚³ã‚¦ã‚¹ã‚­ãƒ¼ã®ã‚ˆã†ã«ã€ä¸­ç«‹ã«ãªã‚‹ã‚ˆã†ã«å¿ƒãŒã‘ã¾ã™ã€‚ãƒ­ãƒ³ãƒœã‚¯ã®æœ‰ç„¡ã«ã‹ã‹ã‚ã‚‰ãšã€ä¸–ç´€ä¸­ã«éœ‡ãˆãšã«ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ã‹ã—ã€ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€å‰è¿°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ãŒå­˜åœ¨ã—ã€ä½•ã‹ãŒç§ãŸã¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã‘ã§ã¯ãªã„ã“ã¨ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã ã‹ã‚‰ã“ã“ã«ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‰å›ã®Javaã§ã¯ç¢ºã‹ã«annotashkiã«å‘ã‹ã†å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ã‚§ã‚¤ãƒ«ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®æ „å…‰ã¯ã€å¤šãã®å ´åˆã€ãƒ¡ã‚½ãƒƒãƒ‰æ³¨é‡ˆä»˜ãã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³@NonNullã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§ã™ï¼ˆãã®ãŸã‚ã€ãã‚ŒãŒãªããªã£ãŸå ´åˆ- </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å·¦</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹ãŒã‚Šï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œï¼ˆã¾ãŸã¯ã‚¤ãƒ‡ã‚ªãƒ­ã‚®ãƒ¼ã§åŒæ§˜ã®æ³¨é‡ˆï¼‰ã«ã¯å¤šãã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ãŒã€ã™ã§ã«æ˜ã‚‰ã‹ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> lombok.NonNull;</code></pre><cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ï¼ˆã¾ãŸã¯åŒæ§˜ã®ï¼‰æ³¨é‡ˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ãƒ†ã‚¹ãƒˆã§ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚‹å¥‘ç´„ãŒã‚ã‚Šã€é™çš„ã‚³ãƒ¼ãƒ‰ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ãŒè¦ªåˆ‡ã«é€šçŸ¥ã—ã¾ã™ï¼ˆSonarãŒæ­£ç¢ºã«é€šçŸ¥ã—ã¾ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ä½¿ç”¨ã—ã¦ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ã¯éå¸¸ã«ç°¡å˜ã§ã™ã€‚å•é¡Œã¯ã€ãã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§æ˜¥ã®ã‚¦ã‚µã‚®ã®é€Ÿåº¦ã§å¢—åŠ ã—ã€ã‚¦ã‚µã‚®ãŒã”å­˜çŸ¥ã®ã‚ˆã†ã«DRYã®åŸå‰‡ã«é•åã™ã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€@ NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®å°ã•ãªãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’è¨˜è¿°ã—ã¾ã™ï¼ˆã“ã‚Œã«ã‚ˆã‚Šã€SonarãŒå„ä»‹ãªèµ¤ã„ãƒ©ã‚¤ãƒˆã§ç›®ã«æ˜ ã‚‰ãªã„ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼‰ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›²ã®åå‰ã¯ã€PowerWolfãƒãƒ³ãƒ‰ã®æ›²ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¾—ãŸã‚‚ã®ã§ã€ç§ãŒåå‰ã‚’æ›¸ã„ãŸã¨ãã«ï¼ˆgollyã§ï¼‰å†ç”Ÿã•ã‚Œã¾ã—ãŸï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«ã§ã¯ã€åå‰ã¯ã‚ˆã‚Šãƒã‚¸ãƒ†ã‚£ãƒ–ã«èã“ãˆã¾ã™ï¼‰</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸»è¦éƒ¨åˆ†</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã¯ã€æ¬¡ã®ã‚ˆã†ãªæ³¨é‡ˆã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">methodNameWithNullArgumentThrowException</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">try</span> {<font></font>
      instance.getAnyType(<span class="hljs-keyword">null</span>);<font></font>
      fail(<span class="hljs-string">"Exception not thrown"</span>);<font></font>
    } <span class="hljs-keyword">catch</span> (<span class="hljs-keyword">final</span> NullPointerException e) {<font></font>
      assertNotNull(e);<font></font>
    }<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½¼ã‚‰ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã€@ NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒä»˜ã‘ã‚‰ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦nullã‚’æ¸¡ã—ã¾ã—ãŸã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½¼ã‚‰ã¯NPEã‚’å¾—ã¦ã€æº€è¶³ã—ã¾ã—ãŸï¼ˆã‚½ãƒŠãƒ¼ã‚‚å¹¸ã›ã§ã—ãŸï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®å¾Œã€å½¼ã‚‰ã¯åŒã˜ã“ã¨ã‚’å§‹ã‚ã¾ã—ãŸãŒã€ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã‚’ä»‹ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã‚ˆã‚ŠãŠã—ã‚ƒã‚ŒãªassertThrowã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼ˆãƒ©ãƒ ãƒ€ãŒå¤§å¥½ãã§ã™ï¼‰ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@TestUnitRepeatOnce</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">methodNameWithNullArgumentThrowException</span><span class="hljs-params">()</span> </span>{<font></font>
    assertThrows(NullPointerException.class, () -&gt; instance.getAnyType(<span class="hljs-keyword">null</span>));<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ã€‚ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒŠãƒ–ãƒ«ã€‚é’å¹´</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çµ‚äº†ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒã€æ³¨é‡ˆã¯ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã®å•é¡Œï¼ˆå•é¡Œã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ãã‚Œã§ã‚‚ï¼‰ã¯ã€ã‚ã‚‹æ—¥ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã—ãŸã¨ãã« "ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—"ã—ã€æ­£å¸¸ã«æ©Ÿèƒ½ã—ã¾ã—ãŸã€‚ãã®å¾Œã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«@NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒãªã„ã“ã¨ã«æ°—ä»˜ãã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã¯ç†è§£ã§ãã¾ã™ï¼šwhenï¼ˆï¼‰/ thenï¼ˆï¼‰ã‚’é€šã˜ã¦ã€moqueã‚¯ãƒ©ã‚¹ã®å‹•ä½œã‚’è¨˜è¿°ã›ãšã«ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚å®Ÿè¡Œä¸­ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã¯ã€ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„ï¼ˆã¾ãŸã¯ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ãŒã€whenï¼ˆï¼‰/ thenï¼ˆï¼‰ï¼‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã—ã§NPEã‚’ã‚­ãƒ£ãƒƒãƒã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®ã©ã“ã‹ã«å®‰å…¨ã«ãƒ¡ã‚½ãƒƒãƒ‰ã«å…¥ã‚Šã€è­¦å‘Šã©ãŠã‚ŠNPEã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒ†ã‚¹ãƒˆã¯ç·‘è‰²ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®å ´åˆã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãªããƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸãŒã€ä½•ãŒæ˜ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã®ã§ã€ãƒ¡ã‚½ãƒƒãƒ‰ã«ã•ã‚‰ã«æ·±ãå…¥ã‚Šè¾¼ã‚€å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆã—ãã„å€¤ã«è½ã¡ã‚‹ï¼‰ã€‚</font></font><cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lombokã®@NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯1ã¤ã®æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚NPEã‹ã‚‰ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»è¡Œã™ã‚‹ã¨ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼åãŒã‚¨ãƒ©ãƒ¼ã«æ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã¯ã“ã‚Œã«é–¢ä¸ã—ã€NPEã‹ã‚‰è½ã¡ãŸå¾Œã€æ¬¡ã®ã‚ˆã†ã«ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã•ã‚‰ã«ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs">exception.getCause().getMessage().equals(parameter.getName())</code></pre> <br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦ã„ããªã‚Š...</font></font></b><div class="spoiler_text">    Lombok      stacktrace    null,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">JVM TI</a>     JVM,    -   .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ãŒä½•ã‚‚ãªã„ã‚ˆã†ã§ã™ãŒã€ä»Šä½•ãŒå¿…è¦ã‹ã‚’å®Ÿéš›ã«ç¢ºèªã—ã¦ã„ã¾ã™ãŒã€ã€Œã‚¦ã‚µã‚®ã€ã®å•é¡Œã¯è§£æ±ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã¨ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ãŒæ¬²ã—ã„ã®ã§ã™ãŒã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@TestUnitRepeatOnce</span>
  <span class="hljs-meta">@SneakyThrows</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">nonNullAnnotationTest</span><span class="hljs-params">()</span> </span>{<font></font>
    assertNonNullAnnotation(YourPerfectClass.class);<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦å½¼è‡ªèº«ãŒã€æŒ‡å®šã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã®ã™ã¹ã¦ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ã€ãã‚Œã‚‰ã®ã™ã¹ã¦ã®@NonNullãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ†ã‚¹ãƒˆã§ãƒã‚§ãƒƒã‚¯ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚ãªãŸã¯è¨€ã£ã¦ã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–å¾—ã—ã€@ NonNullãŒãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ã‚‹ã‹ã©ã†ã‹ã€ãã‚Œã«ãƒŒãƒ«ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã¯ä½•ã‚‚ã‚ã‚Šã¾ã›ã‚“ãŒã€RetentionPolicyã¯ãã†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯RetentionPolicyãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‚Šã€SOURCEã€CLASSã€ãŠã‚ˆã³RUNTIMEã®3ã¤ã®ã‚¿ã‚¤ãƒ—ã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€Lombokã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§RetentionPolicy.SOURCEãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€ã“ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«è¡¨ç¤ºã•ã‚Œãšã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§è¦‹ã¤ã‘ã‚‰ã‚Œãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã®ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«æ³¨é‡ˆãŒä»˜ã‘ã‚‰ã‚Œï¼ˆãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã¯ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã›ã‚“ï¼‰ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒnullã«ã§ããªã„ã“ã¨ãŒç†è§£ã•ã‚Œã¦ã„ã‚‹å ´åˆã€åå¯¾ãŒç¤ºå”†ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯Spring @Nullableã«ã‚ˆã£ã¦æ³¨é‡ˆãŒä»˜ã‘ã‚‰ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«é–¢ä¸ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚@ Nullableã¨ãƒãƒ¼ã‚¯ã•ã‚Œã¦ãŠã‚‰ãšã€ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã§ã¯ãªã„ã™ã¹ã¦ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã¨ã€ãã®ä¸­ã®ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æ¢ã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»–ã®ã™ã¹ã¦ã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€@ NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«ä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾¿å®œä¸Šã€å¯èƒ½ãªé™ã‚Šã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã£ã¦ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†æ•£ã—ã¾ã™ã€‚æœ€åˆã«ã€ã™ã¹ã¦ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å–å¾—ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;Method&gt; <span class="hljs-title">getPublicMethods</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Class clazz)</span> </span>{
    <span class="hljs-keyword">return</span> Arrays.stream(clazz.getDeclaredMethods())<font></font>
        .filter(METHOD_FILTER)<font></font>
        .collect(toList());<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã€METHOD_FILTERã¯ã€æ¬¡ã®ã‚ˆã†ã«è¨€ã†é€šå¸¸ã®è¿°èªã§ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã¯ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã¯åˆæˆçš„ã§ã‚ã£ã¦ã¯ãªã‚Šã¾ã›ã‚“ï¼ˆãã—ã¦ã“ã‚Œã¯ç”Ÿã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¤ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹ã¨ãã«èµ·ã“ã‚Šã¾ã™ï¼‰ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ½è±¡ã§ã‚ã£ã¦ã¯ãªã‚Šã¾ã›ã‚“ï¼ˆæŠ½è±¡ã‚¯ãƒ©â€‹â€‹ã‚¹ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã§å€‹åˆ¥ã«ï¼‰ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰åã¯ç­‰å·ã§ã‚ã£ã¦ã¯ãªã‚Šã¾ã›ã‚“ï¼ˆã‚ã‚‹æ‚ªæ„ã®ã‚ã‚‹äººãŒPOJOãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å…¥åŠ›ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã•ã‚ŒãŸç­‰å·ï¼ˆï¼‰ã‚’ã‚¯ãƒ©ã‚¹ã«è¨­å®šã™ã‚‹ã“ã¨ã‚’æ±ºå®šã—ãŸå ´åˆï¼‰</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¿…è¦ãªã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å–å¾—ã—</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã‚‰ã€</font><font style="vertical-align: inherit;">ãƒ«ãƒ¼ãƒ—å†…ã§ãã‚Œã‚‰ã®ä¸¦ã¹æ›¿ãˆã‚’é–‹å§‹ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒãªã„å ´åˆã€ã“ã‚Œã¯å€™è£œã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">if</span> (method.getParameterCount() == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">continue</span>;<font></font>
      }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯ã€@ NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆã¾ãŸã¯ã€ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è«–ç†</font></font></b><div class="spoiler_text"><ul>
<li>public method </li>
<li> @Nullable </li>
<li>  </li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ãƒãƒƒãƒ—ã‚’ä½œæˆã—ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã«å¾“ã£ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ãã®ä¸­ã«é…ç½®ã—ã¾ã™ã€‚ãã®åå¯¾ã«ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³@NonNullã‚’ä¸Šã«ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¤ºã™ãƒ•ãƒ©ã‚°ã‚’é…ç½®ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">int</span> nonNullAnnotationCount = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>;<font></font>
      val parameterCurrentMethodArray = method.getParameters();<font></font>
      val notNullAnnotationParameterMap = <span class="hljs-keyword">new</span> HashMap&lt;Integer, Boolean&gt;();
      <span class="hljs-keyword">for</span> (val parameter : parameterCurrentMethodArray) {
        <span class="hljs-keyword">if</span> (isNull(parameter.getAnnotation(Nullable.class)) &amp;&amp; isFalse(parameter.getType().isPrimitive())) {<font></font>
          notNullAnnotationParameterMap.put(index++, <span class="hljs-keyword">true</span>);<font></font>
          nonNullAnnotationCount++;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          notNullAnnotationParameterMap.put(index++, <span class="hljs-keyword">false</span>);<font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-keyword">if</span> (nonNullAnnotationCount == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">continue</span>;<font></font>
      }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒãƒƒãƒ—ã¯ã€æœ€åˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã ã‘ã§ãªãã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³@NonNullã‚’æŒã¤ã™ã¹ã¦ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«nullã‚’é †ç•ªã«æ¸¡ã™ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nonNullAnnotationCountãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®@NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒä»˜ã‘ã‚‰ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å„ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘¼ã³å‡ºã—çµ±åˆå¯¾è©±ã®æ•°ãŒæ±ºã¾ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¡ãªã¿ã«ã€@ NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒãªã„å ´åˆï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã™ãŒã€ã™ã¹ã¦ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã¾ãŸã¯@Nullableã§ã™ï¼‰ã€æ¬¡ã«èª¬æ˜ã™ã‚‹ã“ã¨ã¯ä½•ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<pre><code class="java hljs">
<span class="hljs-keyword">if</span> (nonNullAnnotationCount == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">continue</span>;<font></font>
      }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰‹å…ƒã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ãƒãƒƒãƒ—ãŒã‚ã‚Šã¾ã™ã€‚ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™å›æ•°ã¨nullã®ä½ç½®ã¯ã‚ã‹ã£ã¦ã„ã‚‹ã®ã§ã€å•é¡Œã¯å°ã•ã„ã§ã™ï¼ˆç§ã¯å˜ç´”ã«ç†è§£ã—ã¦ã„ãªã‹ã£ãŸã®ã§ï¼‰ã€ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¦ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒã©ã®ã‚ˆã†ã«ç•°ãªã‚‹ã‹ã‚’ç†è§£ã™ã‚‹ã¨å•é¡ŒãŒå§‹ã¾ã‚Šã¾ã™ï¼šã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒ1ã¤ã®ã‚¯ãƒ©ã‚¹ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒ1ã¤ã‚ã‚‹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã€ãã®ã‚ˆã†ãªã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã€æŠ½è±¡ã‚¯ãƒ©ã‚¹ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚‚ã‚ã‚Šã€ã“ã‚Œã‚‰ã‚‚ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã§ã™ï¼‰ã¾ãŸã€ãƒ†ã‚¹ãƒˆã‚‚å¿…è¦ã§ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ãƒ•ãƒƒã‚¯ã¾ãŸã¯ã‚¯ãƒ«ãƒƒã‚¯ã«ã‚ˆã£ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ§‹ç¯‰ã—ãŸã¨ãã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’invokeãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã€ã“ã“ã§ã‚‚æ‹¡å¼µã—ã¾ã™ã€‚æœ€çµ‚çš„ãªã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã¯ï¼Ÿã¨åˆ—æŒ™å‹ï¼Ÿãã—ã¦åŸå§‹ï¼Ÿãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã®é…åˆ—ï¼ˆã“ã‚Œã‚‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Šã€æ³¨é‡ˆã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã¦ã€é †ç•ªã«ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®ã‚±ãƒ¼ã‚¹ã¯ã€1ã¤ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‚’æŒã¤ã‚¯ãƒ©ã‚¹ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">if</span> (ONLY_ONE_PRIVATE_CONSTRUCTOR_FILTER.test(clazz)) {<font></font>
            notNullAnnotationParameterMap.put(currentNullableIndex, <span class="hljs-keyword">false</span>);<font></font>
            method.invoke(clazz, invokeMethodParameterArray);<font></font>
            makeErrorMessage(method);<font></font>
          }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€invokeãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã€å¤–éƒ¨ã‹ã‚‰æ¥ãŸclazzã‚’ãƒ†ã‚¹ãƒˆã«æ¸¡ã—ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³@NonNullã®ãƒ•ãƒ©ã‚°ã‚’ä½¿ç”¨ã—ã¦æœ€åˆã®ä½ç½®ã«nullãŒã™ã§ã«ãƒãƒ£ãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®é…åˆ—ã‚’æ¸¡ã—ã¾ã™ï¼ˆä¸Šã§ã€ãƒãƒƒãƒ—@ NonNullsã‚’ä½œæˆã—ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ï¼‰ã€‚ãƒ«ãƒ¼ãƒ—ã§å®Ÿè¡Œã—ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®é…åˆ—ã‚’ä½œæˆã—ã€nullãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ä½ç½®ã‚’äº¤äº’ã«å¤‰æ›´ã—ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™å‰ã«ãƒ•ãƒ©ã‚°ã‚’ã‚¼ãƒ­ã«ã—ã¦ã€æ¬¡ã®çµ±åˆã§ä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒnullã«ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ‰ã§ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs">val invokeMethodParameterArray = <span class="hljs-keyword">new</span> Object[parameterCurrentMethodArray.length];
        <span class="hljs-keyword">boolean</span> hasNullParameter = <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">int</span> currentNullableIndex = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; invokeMethodParameterArray.length; i++) {
          <span class="hljs-keyword">if</span> (notNullAnnotationParameterMap.get(i) &amp;&amp; isFalse(hasNullParameter)) {<font></font>
            currentNullableIndex = i;<font></font>
            invokeMethodParameterArray[i] = <span class="hljs-keyword">null</span>;<font></font>
            hasNullParameter = <span class="hljs-keyword">true</span>;<font></font>
          } <span class="hljs-keyword">else</span> {<font></font>
            mappingParameter(parameterCurrentMethodArray[i], invokeMethodParameterArray, i);<font></font>
          }<font></font>
        }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã®æœ€åˆã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æ•´ç†ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®ä»–ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã§ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã—ã¦ä½œæˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼ˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã•ãˆã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">if</span> (INTERFACE_FILTER.test(clazz)) {<font></font>
            notNullAnnotationParameterMap.put(currentNullableIndex, <span class="hljs-keyword">false</span>);<font></font>
            method.invoke(createInstanceByDynamicProxy(clazz, invokeMethodParameterArray), invokeMethodParameterArray);<font></font>
            makeErrorMessage(method);<font></font>
          }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
createInstanceByDynamicProxyã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å°‘ãªãã¨ã‚‚1ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹å ´åˆã€ã¾ãŸã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è‡ªä½“ã§ã‚ã‚‹å ´åˆã«ã€ã‚¯ãƒ©ã‚¹ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹</font></font></b><div class="spoiler_text"> ,        ,   (  - Comparable),    ,        instance    <br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸­ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> Object <span class="hljs-title">createInstanceByDynamicProxy</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Class clazz, <span class="hljs-keyword">final</span> Object[] invokeMethodParameterArray)</span> </span>{
    <span class="hljs-keyword">return</span> newProxyInstance(<font></font>
        currentThread().getContextClassLoader(),<font></font>
        <span class="hljs-keyword">new</span> Class[]{clazz},<font></font>
        (proxy, method1, args) -&gt; {<font></font>
          Constructor&lt;Lookup&gt; constructor = Lookup.class<font></font>
              .getDeclaredConstructor(Class.class);<font></font>
          constructor.setAccessible(<span class="hljs-keyword">true</span>);<font></font>
          constructor.newInstance(clazz)<font></font>
              .in(clazz)<font></font>
              .unreflectSpecial(method1, clazz)<font></font>
              .bindTo(proxy)<font></font>
              .invokeWithArguments(invokeMethodParameterArray);<font></font>
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    );<font></font>
  }</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¬ãƒ¼ã‚­</font></font></b><div class="spoiler_text">      ,     ,   ,       Lookup.class<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆç§ã®ãŠæ°—ã«å…¥ã‚Šï¼‰ã¯æŠ½è±¡ã‚¯ãƒ©ã‚¹ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã“ã“ã§å‹•çš„ãƒ—ãƒ­ã‚­ã‚·ã¯ç§ãŸã¡ã‚’åŠ©ã‘ã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã€æŠ½è±¡ã‚¯ãƒ©ã‚¹ãŒã‚ã‚‹ç¨®ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã€ã“ã‚Œã¯æ˜ã‚‰ã‹ã«ç§ãŸã¡ãŒæœ›ã‚€ã‚¿ã‚¤ãƒ—ã§ã¯ãªã„ã‹ã‚‰ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãã®ã‚ˆã†ã«ã€æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‹ã‚‰newInstanceï¼ˆï¼‰ã‚’å–å¾—ã—ã¦ä½œæˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§CGLIBãŒå½¹ç«‹ã¡ã¾ã™ã€‚ç¶™æ‰¿ã«åŸºã¥ã„ã¦ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½œæˆã™ã‚‹ã‚¹ãƒ—ãƒªãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ãŒã€å•é¡Œã¯ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¯ãƒ©ã‚¹ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãªã—ï¼‰ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒå¿…è¦ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚´ã‚·ãƒƒãƒ—</font></font></b><div class="spoiler_text">        Spring 4 CGLIB     ,  : <b> !</b><br>
</div></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">if</span> (isAbstract(clazz.getModifiers())) {<font></font>
            createInstanceByCGLIB(clazz, method, invokeMethodParameterArray);<font></font>
            makeErrorMessage();<font></font>
          }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
makeErrorMessageï¼ˆï¼‰ã¯ã™ã§ã«ã‚³ãƒ¼ãƒ‰ä¾‹ã§ç¢ºèªã•ã‚Œã¦ã„ã¾ã™ãŒã€ãƒ†ã‚¹ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã®@NonNullãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã€nullã‚’æ¸¡ã—ã€ãã‚ŒãŒå¤±æ•—ã—ãªã‹ã£ãŸå ´åˆã€ãƒ†ã‚¹ãƒˆã¯æ©Ÿèƒ½ã›ãšã€å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ã®å ´åˆã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã¨ãƒ¡ã‚½ãƒƒãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ä¸¡æ–¹ã‚’ãƒãƒƒãƒ—ã—ã¦ãƒ­ãƒƒã‚¯ã§ãã‚‹å…±é€šã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒ1ã¤ã‚ã‚Šã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mappingParameter</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Parameter parameter, <span class="hljs-keyword">final</span> Object[] methodParam, <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> index)</span>
      <span class="hljs-keyword">throws</span> InstantiationException, IllegalAccessException </span>{
    <span class="hljs-keyword">if</span> (isFinal(parameter.getType().getModifiers())) {
      <span class="hljs-keyword">if</span> (parameter.getType().isEnum()) {<font></font>
        methodParam[index] = Enum.valueOf(<font></font>
            (Class&lt;Enum&gt;) (parameter.getType()),<font></font>
            parameter.getType().getEnumConstants()[<span class="hljs-number">0</span>].toString()<font></font>
        );<font></font>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parameter.getType().isPrimitive()) {<font></font>
        mappingPrimitiveName(parameter, methodParam, index);<font></font>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parameter.getType().getTypeName().equals(<span class="hljs-string">"byte[]"</span>)) {<font></font>
        methodParam[index] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">0</span>];<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
        methodParam[index] = parameter.getType().newInstance();<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      methodParam[index] = mock(parameter.getType());<font></font>
    }<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enumï¼ˆãƒã‚§ãƒªãƒ¼ã‚ªãƒ³ã‚¶ã‚±ãƒ¼ã‚­ï¼‰ã®ä½œæˆã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ä¸€èˆ¬çš„ã«ã€Enumã‚’å–å¾—ã—ã¦ä½œæˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã¯ã€æœ€çµ‚çš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ç‹¬è‡ªã®ãƒãƒƒãƒ”ãƒ³ã‚°ã€æœ€çµ‚çš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ç‹¬è‡ªã®ãƒãƒƒãƒ”ãƒ³ã‚°ã€ãã—ã¦å˜ç´”ã«ãƒ†ã‚­ã‚¹ãƒˆï¼ˆã‚³ãƒ¼ãƒ‰ï¼‰ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½œæˆã—ãŸå¾Œã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs">val firstFindConstructor = clazz.getConstructors()[<span class="hljs-number">0</span>];<font></font>
          val constructorParameterArray = <span class="hljs-keyword">new</span> Object[firstFindConstructor.getParameters().length];
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; constructorParameterArray.length; i++) {<font></font>
            mappingParameter(firstFindConstructor.getParameters()[i], constructorParameterArray, i);<font></font>
          }<font></font>
          notNullAnnotationParameterMap.put(currentNullableIndex, <span class="hljs-keyword">false</span>);<font></font>
          createAndInvoke(clazz, method, invokeMethodParameterArray, firstFindConstructor, constructorParameterArray);<font></font>
          makeErrorMessage(method);</code></pre><cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ‰ã®ã“ã®æ®µéšã«é”ã—ã¦ã„ã‚‹ãŸã‚ã€å°‘ãªãã¨ã‚‚1ã¤ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒã‚ã‚Šã€ä»»æ„ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã€‚æœ€åˆã«å–å¾—ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã—ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã€ãªã„å ´åˆã¯ã€å‘¼ã³å‡ºã—ã¾ã™ãã†ï¼š</font></font><br>
<br>
<pre><code class="java hljs">method.invoke(spy(clazz.getConstructors()[<span class="hljs-number">0</span>].newInstance()), invokeMethodParameterArray);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã‚ã€ã“ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹å ´åˆï¼š</font></font><br>
<pre><code class="java hljs">method.invoke(spy(clazz.getConstructors()[<span class="hljs-number">0</span>].newInstance()), invokeMethodParameterArray);</code></pre><cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ã€å°‘ã—ä¸Šã§è¦‹ãŸcreateAndInvokeï¼ˆï¼‰ãƒ¡ã‚½ãƒƒãƒ‰ã§ç™ºç”Ÿã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã§ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¹ãƒã‚¤ãƒ©ãƒ¼ã®ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®å®Œå…¨ç‰ˆã§ã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‰ãƒ©ãƒ•ãƒˆã«æ›¸ã„ãŸã‚ˆã†ã«gitã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã›ã‚“ã§ã—ãŸãŒã€å®Ÿéš›ã«ã¯ã€ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã§ç¶™æ‰¿ã—ã¦ä½¿ç”¨ã§ãã‚‹ã‚¯ãƒ©ã‚¹ã®1ã¤ã«ã™ãã¾ã›ã‚“ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="java hljs">
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestUtil</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Predicate&lt;Method&gt; METHOD_FILTER = method -&gt;<font></font>
      isPublic(method.getModifiers())<font></font>
          &amp;&amp; isFalse(method.isSynthetic())<font></font>
          &amp;&amp; isFalse(isAbstract(method.getModifiers()))<font></font>
          &amp;&amp; isFalse(method.getName().equals(<span class="hljs-string">"equals"</span>));<font></font>
<font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Predicate&lt;Class&gt; ONLY_ONE_PRIVATE_CONSTRUCTOR_FILTER = clazz -&gt;<font></font>
      clazz.getConstructors().length == <span class="hljs-number">0</span> &amp;&amp; isFalse(clazz.isInterface());<font></font>
<font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Predicate&lt;Class&gt; INTERFACE_FILTER = clazz -&gt;<font></font>
      clazz.getConstructors().length == <span class="hljs-number">0</span>;<font></font>
<font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> BiPredicate&lt;Exception, Parameter&gt; LOMBOK_ERROR_FILTER =<font></font>
      (exception, parameter) -&gt; isNull(exception.getCause().getMessage())<font></font>
          || isFalse(exception.getCause().getMessage().equals(parameter.getName()));<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">assertNonNullAnnotation</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Class clazz)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
    <span class="hljs-keyword">for</span> (val method : getPublicMethods(clazz)) {
      <span class="hljs-keyword">if</span> (method.getParameterCount() == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">continue</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">int</span> nonNullAnnotationCount = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>;<font></font>
      val parameterCurrentMethodArray = method.getParameters();<font></font>
      val notNullAnnotationParameterMap = <span class="hljs-keyword">new</span> HashMap&lt;Integer, Boolean&gt;();
      <span class="hljs-keyword">for</span> (val parameter : parameterCurrentMethodArray) {
        <span class="hljs-keyword">if</span> (isNull(parameter.getAnnotation(Nullable.class)) &amp;&amp; isFalse(parameter.getType().isPrimitive())) {<font></font>
          notNullAnnotationParameterMap.put(index++, <span class="hljs-keyword">true</span>);<font></font>
          nonNullAnnotationCount++;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          notNullAnnotationParameterMap.put(index++, <span class="hljs-keyword">false</span>);<font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-keyword">if</span> (nonNullAnnotationCount == <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">continue</span>;<font></font>
      }<font></font>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; nonNullAnnotationCount; j++) {<font></font>
        val invokeMethodParameterArray = <span class="hljs-keyword">new</span> Object[parameterCurrentMethodArray.length];
        <span class="hljs-keyword">boolean</span> hasNullParameter = <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">int</span> currentNullableIndex = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; invokeMethodParameterArray.length; i++) {
          <span class="hljs-keyword">if</span> (notNullAnnotationParameterMap.get(i) &amp;&amp; isFalse(hasNullParameter)) {<font></font>
            currentNullableIndex = i;<font></font>
            invokeMethodParameterArray[i] = <span class="hljs-keyword">null</span>;<font></font>
            hasNullParameter = <span class="hljs-keyword">true</span>;<font></font>
          } <span class="hljs-keyword">else</span> {<font></font>
            mappingParameter(parameterCurrentMethodArray[i], invokeMethodParameterArray, i);<font></font>
          }<font></font>
        }<font></font>
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">if</span> (ONLY_ONE_PRIVATE_CONSTRUCTOR_FILTER.test(clazz)) {<font></font>
            notNullAnnotationParameterMap.put(currentNullableIndex, <span class="hljs-keyword">false</span>);<font></font>
            method.invoke(clazz, invokeMethodParameterArray);<font></font>
            makeErrorMessage(method);<font></font>
          }<font></font>
          <span class="hljs-keyword">if</span> (INTERFACE_FILTER.test(clazz)) {<font></font>
            notNullAnnotationParameterMap.put(currentNullableIndex, <span class="hljs-keyword">false</span>);<font></font>
            method.invoke(createInstanceByDynamicProxy(clazz, invokeMethodParameterArray), invokeMethodParameterArray);<font></font>
            makeErrorMessage(method);<font></font>
          }<font></font>
          <span class="hljs-keyword">if</span> (isAbstract(clazz.getModifiers())) {<font></font>
            createInstanceByCGLIB(clazz, method, invokeMethodParameterArray);<font></font>
            makeErrorMessage();<font></font>
          }<font></font>
          val firstFindConstructor = clazz.getConstructors()[<span class="hljs-number">0</span>];<font></font>
          val constructorParameterArray = <span class="hljs-keyword">new</span> Object[firstFindConstructor.getParameters().length];
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; constructorParameterArray.length; i++) {<font></font>
            mappingParameter(firstFindConstructor.getParameters()[i], constructorParameterArray, i);<font></font>
          }<font></font>
          notNullAnnotationParameterMap.put(currentNullableIndex, <span class="hljs-keyword">false</span>);<font></font>
          createAndInvoke(clazz, method, invokeMethodParameterArray, firstFindConstructor, constructorParameterArray);<font></font>
          makeErrorMessage(method);<font></font>
        } <span class="hljs-keyword">catch</span> (<span class="hljs-keyword">final</span> Exception e) {
          <span class="hljs-keyword">if</span> (LOMBOK_ERROR_FILTER.test(e, parameterCurrentMethodArray[currentNullableIndex])) {<font></font>
            makeErrorMessage(method);<font></font>
          }<font></font>
        }<font></font>
      }<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-meta">@SneakyThrows</span>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createAndInvoke</span><span class="hljs-params">(
      <span class="hljs-keyword">final</span> Class clazz,
      <span class="hljs-keyword">final</span> Method method,
      <span class="hljs-keyword">final</span> Object[] invokeMethodParameterArray,
      <span class="hljs-keyword">final</span> Constructor firstFindConstructor,
      <span class="hljs-keyword">final</span> Object[] constructorParameterArray
  )</span> </span>{
    <span class="hljs-keyword">if</span> (firstFindConstructor.getParameters().length == <span class="hljs-number">0</span>) {<font></font>
      method.invoke(spy(clazz.getConstructors()[<span class="hljs-number">0</span>].newInstance()), invokeMethodParameterArray);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      method.invoke(spy(clazz.getConstructors()[<span class="hljs-number">0</span>].newInstance(constructorParameterArray)), invokeMethodParameterArray);<font></font>
    }<font></font>
  }<font></font>
<font></font>
<span class="hljs-meta">@SneakyThrows</span>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createInstanceByCGLIB</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Class clazz, <span class="hljs-keyword">final</span> Method method, <span class="hljs-keyword">final</span> Object[] invokeMethodParameterArray)</span> </span>{<font></font>
    MethodInterceptor handler =<font></font>
        (obj, method1, args, proxy) -&gt; proxy.invoke(clazz, args);<font></font>
    <span class="hljs-keyword">if</span> (clazz.getConstructors().length &gt; <span class="hljs-number">0</span>) {<font></font>
      val firstFindConstructor = clazz.getConstructors()[<span class="hljs-number">0</span>];<font></font>
      val constructorParam = <span class="hljs-keyword">new</span> Object[firstFindConstructor.getParameters().length];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; constructorParam.length; i++) {<font></font>
        mappingParameter(firstFindConstructor.getParameters()[i], constructorParam, i);<font></font>
      }<font></font>
      <span class="hljs-keyword">for</span> (val constructor : clazz.getConstructors()) {
        <span class="hljs-keyword">if</span> (constructor.getParameters().length == <span class="hljs-number">0</span>) {<font></font>
          val proxy = Enhancer.create(clazz, handler);<font></font>
          method.invoke(proxy.getClass().newInstance(), invokeMethodParameterArray);<font></font>
        }<font></font>
      }<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> Object <span class="hljs-title">createInstanceByDynamicProxy</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Class clazz, <span class="hljs-keyword">final</span> Object[] invokeMethodParameterArray)</span> </span>{
    <span class="hljs-keyword">return</span> newProxyInstance(<font></font>
        currentThread().getContextClassLoader(),<font></font>
        <span class="hljs-keyword">new</span> Class[]{clazz},<font></font>
        (proxy, method1, args) -&gt; {<font></font>
          Constructor&lt;Lookup&gt; constructor = Lookup.class<font></font>
              .getDeclaredConstructor(Class.class);<font></font>
          constructor.setAccessible(<span class="hljs-keyword">true</span>);<font></font>
          constructor.newInstance(clazz)<font></font>
              .in(clazz)<font></font>
              .unreflectSpecial(method1, clazz)<font></font>
              .bindTo(proxy)<font></font>
              .invokeWithArguments(invokeMethodParameterArray);<font></font>
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    );<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">makeErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
    fail(<span class="hljs-string">"  @NonNull     DefaultConstructor  "</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">makeErrorMessage</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Method method)</span> </span>{<font></font>
    fail(<span class="hljs-string">"    "</span> + method.getName() + <span class="hljs-string">"   @NonNull"</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;Method&gt; <span class="hljs-title">getPublicMethods</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Class clazz)</span> </span>{
    <span class="hljs-keyword">return</span> Arrays.stream(clazz.getDeclaredMethods())<font></font>
        .filter(METHOD_FILTER)<font></font>
        .collect(toList());<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mappingParameter</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Parameter parameter, <span class="hljs-keyword">final</span> Object[] methodParam, <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> index)</span>
      <span class="hljs-keyword">throws</span> InstantiationException, IllegalAccessException </span>{
    <span class="hljs-keyword">if</span> (isFinal(parameter.getType().getModifiers())) {
      <span class="hljs-keyword">if</span> (parameter.getType().isEnum()) {<font></font>
        methodParam[index] = Enum.valueOf(<font></font>
            (Class&lt;Enum&gt;) (parameter.getType()),<font></font>
            parameter.getType().getEnumConstants()[<span class="hljs-number">0</span>].toString()<font></font>
        );<font></font>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parameter.getType().isPrimitive()) {<font></font>
        mappingPrimitiveName(parameter, methodParam, index);<font></font>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parameter.getType().getTypeName().equals(<span class="hljs-string">"byte[]"</span>)) {<font></font>
        methodParam[index] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">0</span>];<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
        methodParam[index] = parameter.getType().newInstance();<font></font>
      }<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      methodParam[index] = mock(parameter.getType());<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">mappingPrimitiveName</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Parameter parameter, <span class="hljs-keyword">final</span> Object[] methodParam, <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> index)</span> </span>{<font></font>
    val name = parameter.getType().getName();<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-string">"long"</span>.equals(name)) {<font></font>
      methodParam[index] = <span class="hljs-number">0L</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"int"</span>.equals(name)) {<font></font>
      methodParam[index] = <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"byte"</span>.equals(name)) {<font></font>
      methodParam[index] = (<span class="hljs-keyword">byte</span>) <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"short"</span>.equals(name)) {<font></font>
      methodParam[index] = (<span class="hljs-keyword">short</span>) <span class="hljs-number">0</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"double"</span>.equals(name)) {<font></font>
      methodParam[index] = <span class="hljs-number">0.0</span>d;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"float"</span>.equals(name)) {<font></font>
      methodParam[index] = <span class="hljs-number">0.0f</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"boolean"</span>.equals(name)) {<font></font>
      methodParam[index] = <span class="hljs-keyword">false</span>;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"char"</span>.equals(name)) {<font></font>
      methodParam[index] = <span class="hljs-string">'A'</span>;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ©Ÿèƒ½ã—ã€æ³¨é‡ˆã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚ç¾æ™‚ç‚¹ã§ã¯ã€å¯èƒ½ãªã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŠ˜ã‚ŠãŸãŸã‚€ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€é¸æŠè‚¢ã¯1ã¤ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¹ã§Lombockã‚»ãƒƒã‚¿ãƒ¼ã‚’å®£è¨€ã—ï¼ˆPojoã‚¯ãƒ©ã‚¹ã§ã‚»ãƒƒã‚¿ãƒ¼ã‚’è¨­å®šã—ãªã„ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆãŒã„ã‚‹å ´åˆã€ãã‚Œã¯ç™ºç”Ÿã—ã¾ã›ã‚“ãŒï¼‰ã€ã‚»ãƒƒã‚¿ãƒ¼ãŒå®£è¨€ã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯æœ€çµ‚ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã€@ NonNullã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒãªã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒã‚ã‚‹ã¨è¦ªåˆ‡ã«è¨€ã„ã¾ã™ã€‚è§£æ±ºç­–ã¯ç°¡å˜ã§ã™ã€‚ãƒ­ã‚¸ãƒƒã‚¯@ NonNull / @ Nullableã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åŸºã¥ã„ã¦ã€ã‚»ãƒƒã‚¿ãƒ¼ã‚’æ˜ç¤ºçš„ã«å®£è¨€ã—ã€ãã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«æ³¨é‡ˆã‚’ä»˜ã‘ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ã‚¹ãƒˆã§ãƒ¡ã‚½ãƒƒãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®åå‰ï¼ˆã¾ãŸã¯ãã®ä»–ï¼‰ã«é–¢é€£ä»˜ã‘ãŸã„å ´åˆã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å¤‰æ•°åã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚arg[0]ã‚„arg [1]ãªã©ãŒè¦‹ã¤ã‹ã‚Šã¾ã™ã€‚ ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ãƒ¡ã‚½ãƒƒãƒ‰åã®è¡¨ç¤ºã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€Mavenãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><font></font>
&lt;plugin&gt;<font></font>
          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;<font></font>
          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;<font></font>
          &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;<font></font>
          &lt;configuration&gt;<font></font>
            &lt;source&gt;${compile.target.source}&lt;/source/&gt;<font></font>
            &lt;target&gt;${compile.target.source}&lt;/target&gt;<font></font>
            &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;<font></font>
            &lt;compilerArgs&gt;&lt;arg&gt;-parameters&lt;/arg&gt;&lt;/compilerArgs&gt;<font></font>
          &lt;/configuration&gt;<font></font>
        &lt;/plugin&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç‰¹ã«ã“ã®ã‚­ãƒ¼ï¼š</font></font><br>
<br>
<pre><code class="java hljs">&lt;compilerArgs&gt;&lt;arg&gt;-parameters&lt;/arg&gt;&lt;/compilerArgs&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èˆˆå‘³ã‚’æŒã£ã¦ã„ãŸã ã‘ã‚Œã°å¹¸ã„ã§ã™ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja464929/index.html">ãƒ–ãƒ©ã‚¦ã‚¶ã®é…å»¶ç”»åƒèª­ã¿è¾¼ã¿ï¼ˆèª­ã¿è¾¼ã¿å±æ€§ï¼‰</a></li>
<li><a href="../ja464931/index.html">ã‚¢ã‚»ãƒ³ãƒ–ãƒ©æŒ¿å…¥... Cã§ï¼Ÿ</a></li>
<li><a href="../ja464933/index.html">Androidã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®é›»å­æ›¸ç±ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ãƒ‘ãƒ¼ãƒˆ4.ã‚²ãƒ¼ãƒ </a></li>
<li><a href="../ja464935/index.html">å¿«é©ãªDevOpsSecï¼šAPIã¨å€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‚™ãˆãŸNGINXç”¨ã®Nemesida WAF Free</a></li>
<li><a href="../ja464937/index.html">ãƒ¢ãƒã‚¤ãƒ«ï¼ƒ312é–‹ç™ºè€…å‘ã‘ã®èˆˆå‘³æ·±ã„è³‡æ–™ã®ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆï¼ˆ8æœˆ19ã€œ25æ—¥ï¼‰</a></li>
<li><a href="../ja464943/index.html">Great Attractorã¨ã¯ä½•ã§ã™ã‹ï¼Ÿãã‚Œã¯ç§ãŸã¡ã‚’ç ´å£Šã—ã¾ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja464947/index.html">8æœˆ25æ—¥ã‹ã‚‰9æœˆ1æ—¥ã¾ã§ã®ãƒ¢ã‚¹ã‚¯ãƒ¯ã§ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ</a></li>
<li><a href="../ja464949/index.html">ã‚‚ã†ä¸€åº¦ã€GCDã€ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ãŠã‚ˆã³ä¸€èˆ¬çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ­´å²ã«ã¤ã„ã¦å°‘ã—èª¬æ˜ã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“Swiftã®ä¾‹ã§ã¯</a></li>
<li><a href="../ja464951/index.html">ã‚¿ã‚¹ã‚¯ãŒå˜ç´”ã§ã‚ã‚‹ã»ã©ã€ç§ã¯èª¤è§£ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„</a></li>
<li><a href="../ja464955/index.html">Iron Mike Tysonã¨ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆFight to Fame</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>