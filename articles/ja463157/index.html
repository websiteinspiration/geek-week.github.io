<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ†˜ ğŸ  ğŸ•ºğŸ½ I2Cã¨SPIãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ¥ç¶šã™ã‚‹ESP32-CAMãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼ ğŸ£ ğŸ’½ ğŸ‘†ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Diymoreã®ã‚«ãƒ¡ãƒ©ä»˜ãESP-32 CAMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
 
 ESP32-CAMãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼
 ä½¿ç”¨ä¾‹ã¯ã“ã¡ã‚‰ã§ã™ã€‚
 
 æœ€åˆã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ArduinoIde Windowsã®Esp32ãƒœãƒ¼ãƒ‰  / Arduino Ide LinuxãŠã‚ˆã³Mac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>I2Cã¨SPIãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ¥ç¶šã™ã‚‹ESP32-CAMãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463157/"><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Diymoreã®</font></a><font style="vertical-align: inherit;">ã‚«ãƒ¡ãƒ©ä»˜ãESP-32 CAMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fe/it/oc/feitoc3nxkss7zc6ocsw7cmuyho.jpeg" width="500"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP32-CAMãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨ä¾‹ã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã¡ã‚‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ArduinoIde Windowsã®</font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esp32ãƒœãƒ¼ãƒ‰</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Arduino Ide LinuxãŠã‚ˆã³Macã®Esp32ãƒœãƒ¼ãƒ‰</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è©³ç´°ãªè¨­å®šã¯è¨˜äº‹ã«ã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã®å ´åˆã€AI-THINKERãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ãŸãŸã‚ã€</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ƒdefine CAMERA_MODEL_AI_THINKER </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã®</font><font style="vertical-align: inherit;">ã‚³ãƒ¡ãƒ³ãƒˆã‚’</font><font style="vertical-align: inherit;">å¤–ã—ã¾ã—ãŸ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">é¡”</font><font style="vertical-align: inherit;">èªè­˜æ©Ÿèƒ½ãŒæ©Ÿèƒ½ã—ã¾ã›ã‚“ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">è¨˜äº‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯å½¹ã«ç«‹ã¡ã¾ã—ãŸã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.02 ESPã‚³ã‚¢ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€é¡”èªè­˜ãŒæ©Ÿèƒ½ã—ãªããªã£ãŸã‚ˆã†ã§ã™ï¼ˆå°‘ãªãã¨ã‚‚ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ï¼‰ã€‚</font><font style="vertical-align: inherit;">1.01ã‚³ã‚¢ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã€ãã®ã‚³ã‚¢ã«å±ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä¿®æ­£ã•ã‚Œã¾ã™</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒª1.01ã®ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹ã¨ã€ã™ã¹ã¦ãŒæ©Ÿèƒ½ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_2/tg/47/_2tg47ntvkqznzh-nr_jhqzitz8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I2C 128x64ã¨TFT SPI 128x128ã®</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®</font></a><font style="vertical-align: inherit;">ãƒšã‚¢ã‚’æŒã£ã¦ã„</font><font style="vertical-align: inherit;">ã¾ã™CAMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãªã„å ´åˆã«ã‚«ãƒ¡ãƒ©ã‚’ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«æ¥ç¶šã™ã‚‹æ–¹æ³•ã‚’</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">FIFOä»˜ãã®</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¨˜äº‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OV7670</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ OV2640ãŠã‚ˆã³OV7670ã‚«ãƒ¡ãƒ©ã®ã‚µãƒãƒ¼ãƒˆ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸ·ç­†æ™‚ç‚¹ã§ã¯ã€ä»¥ä¸‹ã®</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESP32ã‚«ãƒ¡ãƒ©+ Wifiã‚µãƒ¼ãƒãƒ¼+ I2Cãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ï¼ˆAdaFruitï¼‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESP32ã‚«ãƒ¡ãƒ©+ SPIãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤1.44 "TFT 128x128 v1.1ï¼ˆAdaFruitï¼‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESP32ã‚«ãƒ¡ãƒ©+ SPIãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤1.8" TFT 128 * 160 ï¼ˆEspressifãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WiFiãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãŒSPIãƒã‚¹ã¨ç«¶åˆã—ã¾ã™ã€‚åˆ¥ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®å¯èƒ½ãªè§£æ±ºç­–ã€‚ WiFiãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–æ™‚ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸»ãªå•é¡Œã¯ã€ESP32-CAMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ•ãƒªãƒ¼ãƒ¬ãƒƒã‚°ã®æ•°ã«åˆ¶é™ãŒã‚ã‚‹ã“ã¨ã§ã™ã€‚ä¸€éƒ¨ã®ãƒãƒ¼ãƒˆã¯ã‚«ãƒ¡ãƒ©ã«ä½¿ç”¨ã•ã‚Œã€ä¸€éƒ¨ã¯sdã‚«ãƒ¼ãƒ‰ã¨ä¸¦è¡Œã—ã¦ã„ã¾ã™ã€‚ SDã‚«ãƒ¼ãƒ‰ã‚³ãƒã‚¯ã‚¿ã¯ãƒœãƒ¼ãƒ‰ã«å–ã‚Šä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚åˆ¥ã®çµè«–ï¼ˆIO4ï¼‰ã¯ã€LEDæ‡ä¸­é›»ç¯ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I2Cãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤B / Wã¯ã€ã‚«ãƒ¡ãƒ©ã‹ã‚‰å—ã‘å–ã£ãŸç”»åƒã‚’å®Ÿéš›ã«ä½¿ç”¨ã™ã‚‹å ´åˆã¯ç‰¹ã«å•é¡Œã«ãªã‚Šã¾ã›ã‚“ã€‚ TFTã‚«ãƒ©ãƒ¼ã¨é«˜è§£åƒåº¦ã€‚ãã®ä¸Šã§ã‚ãªãŸã¯ã™ã§ã«é¡”ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ã‚ˆã†ãªãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã¾ãŸã¯å°‘ã—é«˜ã„è§£åƒåº¦ã§ã¯ã€ãƒ‰ã‚¢ã‚¢ã‚¤ã‚’ä½œæˆã§ãã¾ã™</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AdaFruitã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯æœ€é€Ÿã§ã¯ãªã„ã¨ã™ãã«è¨€ã„ã¾ã™ã€‚æ¯ç§’æ•°ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ä½ãƒ¬ãƒ™ãƒ«ã§æ©Ÿèƒ½ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒã‚ˆã‚Šæœ‰æœ›ã§ã™ã€‚ã—ã‹ã—ã€ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤1.44 "128x128 SPI V1.1ã§ESP32_TFT_libraryã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãŠãã‚‰ãILI9163ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚1.8" 128 * 160 SPI TFTã‚’ä½¿ç”¨ã—ã€ãªã‚“ã¨ã‹12 FPSã‚’åœ§è¿«ã§ãã¾ã—ãŸã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒ³ã‚¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚ˆã‚Šé€Ÿãå‹•ä½œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ä¸€éƒ¨ã¯esp-32ã«ç§»æ¤ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒ³ã‚¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼š</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.98ç§’Adafruit_ST7735 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.71ç§’ST7735X_kbv </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.30ç§’PDQ_ST7735 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ãƒ‡ã‚ªã¯å°è±¡çš„ã«è¦‹ãˆã¾ã™ï¼š</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HnhsxP0W0m4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2ã¤ã®ãƒãƒ¼ãƒˆ</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ</font><font style="vertical-align: inherit;">ã€ãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®HSPIã¾ãŸã¯VSPIãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒãƒ¼ãƒˆã®1ã¤ã¨ILI9341ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’å‚™ãˆãŸãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã¯ã€æ¯ç§’30ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å—ä¿¡ã§ãã¾ã™ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒ³ã‚¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7a/39/93/7a3993k5m_j9z5f2juglv5s9h9g.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ã‹ã—ã€å…ˆã»ã©ESP32-CAMãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¿°ã¹ãŸã‚ˆã†ã«ã€ä½¿ç”¨ã§ãã‚‹SPIã¯1ã¤ã ã‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã®</font><font style="vertical-align: inherit;">
ãƒ”ãƒ³ã«</font><font style="vertical-align: inherit;">è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO2-DCï¼ˆA0ï¼‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO14-CLK </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO15-CS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO13-MOSIï¼ˆSDAï¼‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO12-MISOï¼ˆå…¥åŠ›ã€‚æœªä½¿ç”¨ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO0-BCKLï¼ˆãƒãƒƒã‚¯ãƒ©ã‚¤ãƒˆã€‚æœªä½¿ç”¨ï¼‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO16-RST </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ob/wr/wy/obwrwyztxqm6ct4dtlxe_fggdim.png"><br>
<br>
<img src="https://habrastorage.org/webt/nr/7e/dg/nr7edg2broaykspjtyxncso2zxy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªIã“ã®AdaFruit SSD1306ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸ</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I2C 128x64ãƒ–ãƒ«ãƒ¼OLEDãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤</font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ec/xl/ji/ecxljimycqq42q16yxswiehsv98.png"></div><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Wire.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Adafruit_GFX.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Adafruit_SSD1306.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SCREEN_WIDTH 128 <span class="hljs-comment">// OLED display width, in pixels</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SCREEN_HEIGHT 64 <span class="hljs-comment">// OLED display height, in pixels</span></span><font></font>
<font></font>
<span class="hljs-comment">// Declaration for an SSD1306 display connected to I2C (SDA, SCL pins)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OLED_RESET     -1 <span class="hljs-comment">// Reset pin # (or -1 if sharing Arduino reset pin)</span></span><font></font>
<font></font>
Adafruit_SSD1306 display;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init_display</span><span class="hljs-params">()</span></span>{<font></font>
    pinMode(<span class="hljs-number">14</span>,INPUT_PULLUP);<font></font>
    pinMode(<span class="hljs-number">15</span>,INPUT_PULLUP);<font></font>
    Wire.begin(<span class="hljs-number">14</span>,<span class="hljs-number">15</span>);<font></font>
    display = Adafruit_SSD1306(SCREEN_WIDTH, SCREEN_HEIGHT, &amp;Wire, OLED_RESET);<font></font>
  <span class="hljs-keyword">if</span>(!display.begin(SSD1306_SWITCHCAPVCC, <span class="hljs-number">0x3C</span>)) { <span class="hljs-comment">// Address 0x3D for 128x64</span>
    Serial.println(F(<span class="hljs-string">"SSD1306 allocation failed"</span>));
    <span class="hljs-keyword">for</span>(;;); <span class="hljs-comment">// Don't proceed, loop forever</span><font></font>
  }<font></font>
<font></font>
    ....<font></font>
<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">camera_captureï¼ˆï¼‰</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BACKCOLOR 0x0000 <span class="hljs-comment">// Black</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIXELCOLOR 0xFFFF  <span class="hljs-comment">// White</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRAME_WIDTH 320</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRAME_HEIGHT 240</span><font></font>
<font></font>
<span class="hljs-keyword">uint16_t</span> pixel_color = <span class="hljs-number">0</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">esp_err_t</span> <span class="hljs-title">camera_capture</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">//acquire a frame</span>
    <span class="hljs-keyword">camera_fb_t</span> * fb = esp_camera_fb_get();
    <span class="hljs-keyword">if</span> (!fb) {<font></font>
        ESP_LOGE(TAG, <span class="hljs-string">"Camera Capture Failed"</span>);
        <span class="hljs-keyword">return</span> ESP_FAIL;<font></font>
    }<font></font>
  <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<font></font>
  <font></font>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> y = <span class="hljs-number">0</span>; y &lt; SCREEN_HEIGHT; y++){
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>; x &lt; SCREEN_WIDTH; x++){<font></font>
      i = y * FRAME_WIDTH + x; <span class="hljs-comment">// FRAMESIZE_QVGA // 320x240</span>
      <span class="hljs-keyword">char</span> ch = (<span class="hljs-keyword">char</span>)fb-&gt;buf[i];<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (ch &gt; <span class="hljs-number">128</span>)<font></font>
         pixel_color = WHITE;<font></font>
      <span class="hljs-keyword">else</span> <font></font>
         pixel_color = BLACK;<font></font>
<font></font>
      <span class="hljs-comment">// Draw a single pixel in white </span><font></font>
      display.drawPixel(x, y, pixel_color);<font></font>
     }<font></font>
  }<font></font>
    display.display();<font></font>
<font></font>
    <span class="hljs-comment">//return the frame buffer back to the driver for reuse</span><font></font>
    esp_camera_fb_return(fb);<font></font>
    Serial.println(<span class="hljs-string">"Capture frame ok."</span>);
    <span class="hljs-keyword">return</span> ESP_OK;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
esp32ã§ä½œæ¥­ã™ã‚‹å ´åˆã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢I2Cã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">é–¢é€£ã™ã‚‹IO14ãŠã‚ˆã³IO15ã€‚</font><font style="vertical-align: inherit;">H / Wãƒã‚¹ã¯ä½¿ç”¨ã•ã‚Œãšã€ã»ã¨ã‚“ã©ã™ã¹ã¦ã®ç©ºããƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Monochrome 0.96 "i2c OLEDãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ¥ç¶šæ–¹æ³•</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚I2C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒã‚¹ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚¢ãƒ‰ãƒ¬ã‚¹ã«æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚ã“ã®å ´åˆã€0x3C</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPI Display 1.8 "TFT 128 * 160 Espressifãƒ©ã‚¤ãƒ–ãƒ©ãƒª</font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e9/ym/zg/e9ymzg6iukpuzpowfbgvlln89dg.jpeg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/eo/jv/j0/eojvj0nkmzg1dqiubx3jcaoepou.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ç¶šå›³ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO2-A0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO14-SCK </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO15-CS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO13-SDA </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IO16-ãƒªã‚»ãƒƒãƒˆ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fp/v8/iv/fpv8iv79hdpoefoxwnzsc64ychm.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã¯ã€ãƒœãƒ¼ãƒ‰ã®</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IOæ§‹æˆã«</font><font style="vertical-align: inherit;">ã‚‚ã‚ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Configuration for other boards, set the correct values for the display used</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DISP_COLOR_BITS_24	0x66</span>
<span class="hljs-comment">//#define DISP_COLOR_BITS_16	0x55  // Do not use!</span><font></font>
<font></font>
<span class="hljs-comment">// #############################################</span>
<span class="hljs-comment">// ### Set to 1 for some displays,           ###</span>
<span class="hljs-comment">//     for example the one on ESP-WROWER-KIT ###</span>
<span class="hljs-comment">// #############################################</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TFT_INVERT_ROTATION 0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TFT_INVERT_ROTATION1 0</span><font></font>
<font></font>
<span class="hljs-comment">// ################################################</span>
<span class="hljs-comment">// ### SET TO 0X00 FOR DISPLAYS WITH RGB MATRIX ###</span>
<span class="hljs-comment">// ### SET TO 0X08 FOR DISPLAYS WITH BGR MATRIX ###</span>
<span class="hljs-comment">// ### For ESP-WROWER-KIT set to 0x00           ###</span>
<span class="hljs-comment">// ################################################</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TFT_RGB_BGR 0x08</span><font></font>
<font></font>
<span class="hljs-comment">// ##############################################################</span>
<span class="hljs-comment">// ### Define ESP32 SPI pins to which the display is attached ###</span>
<span class="hljs-comment">// ##############################################################</span><font></font>
<font></font>
<span class="hljs-comment">// The pins configured here are the native spi pins for HSPI interface</span>
<span class="hljs-comment">// Any other valid pin combination can be used</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_MISO 12		<span class="hljs-comment">// SPI MISO</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_MOSI 13		<span class="hljs-comment">// SPI MOSI</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_CLK  14		<span class="hljs-comment">// SPI CLOCK pin</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_CS   15		<span class="hljs-comment">// Display CS pin</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_DC   2		<span class="hljs-comment">// Display command/data pin</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_TCS  0		<span class="hljs-comment">// Touch screen CS pin (NOT used if USE_TOUCH=0)</span></span><font></font>
<font></font>
<span class="hljs-comment">// --------------------------------------------------------------</span>
<span class="hljs-comment">// ** Set Reset and Backlight pins to 0 if not used !</span>
<span class="hljs-comment">// ** If you want to use them, set them to some valid GPIO number</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_RST  0  	<span class="hljs-comment">// GPIO used for RESET control</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_NUM_BCKL 0  	<span class="hljs-comment">// GPIO used for backlight control</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_BCKL_ON  0  	<span class="hljs-comment">// GPIO value for backlight ON</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PIN_BCKL_OFF 1  	<span class="hljs-comment">// GPIO value for backlight OFF</span></span>
<span class="hljs-comment">// --------------------------------------------------------------</span><font></font>
<font></font>
<span class="hljs-comment">// #######################################################</span>
<span class="hljs-comment">// Set this to 1 if you want to use touch screen functions</span>
<span class="hljs-comment">// #######################################################</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> USE_TOUCH	TOUCH_TYPE_NONE</span>
<span class="hljs-comment">// #######################################################</span><font></font>
<font></font>
<span class="hljs-comment">// #######################################################################</span>
<span class="hljs-comment">// Default display width (smaller dimension) and height (larger dimension)</span>
<span class="hljs-comment">// #######################################################################</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_TFT_DISPLAY_WIDTH  128</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_TFT_DISPLAY_HEIGHT 160</span>
<span class="hljs-comment">// #######################################################################</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_GAMMA_CURVE 0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_SPI_CLOCK   32000000</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_DISP_TYPE   DISP_TYPE_ST7735B</span>
<span class="hljs-comment">//----------------------------------------------------------------------------</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TFT_INVERT_ROTATION         0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TFT_INVERT_ROTATION1        1</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TFT_INVERT_ROTATION2        0 </span>
</code></pre><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espressif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‹ã‚‰ç’°å¢ƒã¨é–‹ç™ºç’°å¢ƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†æ–¹æ³•ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è©³ç´°ãªæ‰‹é †</font><font style="vertical-align: inherit;">ã€‚</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¢ã‚»ãƒ³ãƒ–ãƒ«ã™ã‚‹ã«ã¯ã€2ã¤ã®ä¿®æ­£ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Makefileï¼š</font></font><br>
<br>
<pre><code class="bash hljs">+ CFLAGS += -Wno-error=tautological-compare \<font></font>
+         -Wno-implicit-fallthrough \<font></font>
+		  -Wno-implicit-function-declaration<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ/ tft / tftspi.cï¼š</font></font><br>
<br>
<pre><code class="cpp hljs">+ <span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"driver/gpio.h
</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â†’&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒƒãƒæ¬¡ã«</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP32ã‚«ãƒ¡ãƒ©ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ§‹æˆï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ƒã€‚</font><font style="vertical-align: inherit;">$ HOME / esp / esp-idf / export.sh </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ƒidf.py menuconfig</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yc/yl/ml/ycylmlzznbfewlweiaris71dbzo.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_3/gn/5s/_3gn5s4bmrqunmhwjeabdtxe9yu.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/x8/jc/g6/x8jcg6ia43npfcol7rebn1taz7e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã¨ç›£è¦–ç”¨ã®USBãƒãƒ¼ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
#sudo chmod 777 / dev / ttyUSB0 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åé›†ã—ã¦å…¥åŠ›ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
#make -j4 &amp;&amp; make flash </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
12FPSã¯ã€send_dataãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ãŸãƒ‘ã‚±ãƒƒãƒˆæ›¸ãè¾¼ã¿ã«ã‚ˆã‚Šå®Ÿç¾ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¨˜éŒ²ã¯ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã§ã¯ãªãã€ç”»é¢ã®å¹…ã«ç­‰ã—ã„è¡Œå…¨ä½“ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">esp_err_t</span> <span class="hljs-title">camera_capture</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">uint32_t</span> tstart, t1, t2;<font></font>
	tstart = clock();<font></font>
    <span class="hljs-comment">//acquire a frame</span>
    <span class="hljs-keyword">camera_fb_t</span> * fb = esp_camera_fb_get();
    <span class="hljs-keyword">if</span> (!fb) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Camera Capture Failed\n"</span>);
        <span class="hljs-keyword">return</span> ESP_FAIL;<font></font>
    }<font></font>
    t1 = clock() - tstart;<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Capture camera time: %u ms\r\n"</span>, t1);<font></font>
<font></font>
    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, bufPos = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-keyword">uint8_t</span> hb, lb;
    <span class="hljs-keyword">color_t</span> color;
    <span class="hljs-keyword">color_t</span> *color_line = heap_caps_malloc(_width*<span class="hljs-number">3</span>, MALLOC_CAP_DMA);<font></font>
<font></font>
    tstart = clock();<font></font>
<font></font>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> y = <span class="hljs-number">0</span>; y &lt; _height; y++)<font></font>
    {<font></font>
  	 bufPos = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>; x &lt; _width; x++)<font></font>
        {<font></font>
            i = (y * FRAME_WIDTH + x) &lt;&lt; <span class="hljs-number">1</span>;<font></font>
<font></font>
            hb = fb-&gt;buf[i] ;<font></font>
            lb = fb-&gt;buf[i + <span class="hljs-number">1</span>];<font></font>
      <font></font>
            color.r = (lb &amp; <span class="hljs-number">0x1F</span>) &lt;&lt; <span class="hljs-number">3</span>;<font></font>
            color.g = (hb &amp; <span class="hljs-number">0x07</span>) &lt;&lt; <span class="hljs-number">5</span> | (lb &amp; <span class="hljs-number">0xE0</span>) &gt;&gt; <span class="hljs-number">3</span>;<font></font>
            color.b =  hb &amp; <span class="hljs-number">0xF8</span>;<font></font>
<font></font>
            color_line[bufPos] = color;<font></font>
            bufPos++;<font></font>
<span class="hljs-comment">//         TFT_drawPixel(0, 0, color, 1);</span><font></font>
       }<font></font>
       disp_select();<font></font>
       send_data(<span class="hljs-number">0</span>, y, _width<span class="hljs-number">-1</span>, y, _width, color_line);<font></font>
       wait_trans_finish(<span class="hljs-number">1</span>);<font></font>
       disp_deselect();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-built_in">free</span>(color_line);<font></font>
<font></font>
    t1 = clock() - tstart;<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Send buffer time: %u ms\r\n"</span>, t1);<font></font>
    esp_camera_fb_return(fb);<font></font>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Capture frame ok.\n"</span>);
    <span class="hljs-keyword">return</span> ESP_OK;<font></font>
}<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚«ãƒ¡ãƒ©æ§‹æˆ</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">// #if defined(CAMERA_MODEL_AI_THINKER)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWDN_GPIO_NUM     32</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> RESET_GPIO_NUM    -1</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> XCLK_GPIO_NUM      0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SIOD_GPIO_NUM     26</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SIOC_GPIO_NUM     27</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y9_GPIO_NUM       35</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y8_GPIO_NUM       34</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y7_GPIO_NUM       39</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y6_GPIO_NUM       36</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y5_GPIO_NUM       21</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y4_GPIO_NUM       19</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y3_GPIO_NUM       18</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y2_GPIO_NUM        5</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> VSYNC_GPIO_NUM    25</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> HREF_GPIO_NUM     23</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PCLK_GPIO_NUM     22</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">camera_init_</span><span class="hljs-params">()</span></span>{
  <span class="hljs-keyword">camera_config_t</span> config;<font></font>
  config.ledc_channel = LEDC_CHANNEL_0;<font></font>
  config.ledc_timer = LEDC_TIMER_0;<font></font>
  config.pin_d0 = Y2_GPIO_NUM;<font></font>
  config.pin_d1 = Y3_GPIO_NUM;<font></font>
  config.pin_d2 = Y4_GPIO_NUM;<font></font>
  config.pin_d3 = Y5_GPIO_NUM;<font></font>
  config.pin_d4 = Y6_GPIO_NUM;<font></font>
  config.pin_d5 = Y7_GPIO_NUM;<font></font>
  config.pin_d6 = Y8_GPIO_NUM;<font></font>
  config.pin_d7 = Y9_GPIO_NUM;<font></font>
  config.pin_xclk = XCLK_GPIO_NUM;<font></font>
  config.pin_pclk = PCLK_GPIO_NUM;<font></font>
  config.pin_vsync = VSYNC_GPIO_NUM;<font></font>
  config.pin_href = HREF_GPIO_NUM;<font></font>
  config.pin_sscb_sda = SIOD_GPIO_NUM;<font></font>
  config.pin_sscb_scl = SIOC_GPIO_NUM;<font></font>
  config.pin_pwdn = PWDN_GPIO_NUM;<font></font>
  config.pin_reset = RESET_GPIO_NUM;<font></font>
  config.xclk_freq_hz = <span class="hljs-number">20000000</span>;<font></font>
  config.fb_count = <span class="hljs-number">2</span>;<font></font>
<font></font>
<span class="hljs-comment">// for display</span><font></font>
  config.frame_size = FRAMESIZE_QVGA;<font></font>
  config.pixel_format = PIXFORMAT_RGB565;<font></font>
  <span class="hljs-comment">// camera init</span>
  <span class="hljs-keyword">esp_err_t</span> err = esp_camera_init(&amp;config);
  <span class="hljs-keyword">if</span> (err != ESP_OK) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Camera init failed with error 0x%x"</span>, err);
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Camera init OK\n"</span>);<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â†’ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gist </font></font></a><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FRAME_WIDTHã¯QVGAã®320ãƒ”ã‚¯ã‚»ãƒ«ã®ãƒ•ãƒ¬ãƒ¼ãƒ å¹…ã§ã™</font></font></u><br>
<br>
<pre><code class="cpp hljs">config.frame_size = FRAMESIZE_QVGA; <span class="hljs-comment">// 320x240</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1ã¤ã®ã‚«ãƒ¡ãƒ©ãƒãƒƒãƒ•ã‚¡ãƒ¼ï¼ˆconfig.fb_count = 1ï¼‰ã‚’ä½¿ç”¨ã—ãŸæ§‹æˆã®å ´åˆ</font></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒ•ãƒ«</font><i><font style="vertical-align: inherit;">ãƒ­ã‚°</font></i><font style="vertical-align: inherit;">ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰128 * 160ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</font><i><font style="vertical-align: inherit;">
ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼ã‚«ãƒ¡ãƒ©æ™‚é–“ï¼š32ãƒŸãƒªç§’</font></i><i><font style="vertical-align: inherit;">
é€ä¿¡ãƒãƒƒãƒ•ã‚¡ãƒ¼æ™‚é–“ï¼š47ãƒŸãƒªç§’</font></i><i><font style="vertical-align: inherit;">
ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ OKã€‚</font></i></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµæœ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 /ï¼ˆ32 + 47ï¼‰= 12.65 FPS</font></font></b><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2ã¤ã®ã‚«ãƒ ã‚³ãƒ¼ãƒ€ãƒ¼ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ä½¿ç”¨ã—ãŸæ§‹æˆã®ãƒ­ã‚°ï¼ˆconfig.fb_count = 2ï¼‰</font></font></b><div class="spoiler_text">Capture camera time: 39 ms<br>
<br>
Send buffer time: 63 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 59 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 34 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 40 ms<br>
<br>
Send buffer time: 64 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 59 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 34 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 40 ms<br>
<br>
Send buffer time: 63 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 60 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 34 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 39 ms<br>
<br>
Send buffer time: 63 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 60 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 1 ms<br>
<br>
Send buffer time: 34 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 40 ms<br>
<br>
Send buffer time: 63 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 60 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 34 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 40 ms<br>
<br>
Send buffer time: 63 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 59 ms<br>
<br>
Capture frame ok.<br>
Capture camera time: 0 ms<br>
<br>
Send buffer time: 35 ms<br>
<br>
Capture frame ok.</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚«ãƒ¡ãƒ©ã®2ç•ªç›®ã®ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ä¸€éƒ¨ã®ã‚µã‚¤ã‚¯ãƒ«ã®ãƒãƒƒãƒ•ã‚¡ãƒ¼ã¯ç¬æ™‚ã«å–å¾—ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€åˆã¯ã€1ã¤æœªæº€ã®ãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ä½¿ç”¨ã—ã¦å®Œå…¨ãªã‚µã‚¤ã‚¯ãƒ«ãŒå–å¾—ã•ã‚Œã¾ã™ãŒã€ä»Šå›ã¯ã€Œå®Ÿè¡Œã€ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚µã‚¤ã‚¯ãƒ«é–“ã®é–“éš”ã¯å¤‰å‹•ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€Œãƒ–ãƒ©ã‚¦ãƒ³ã‚¢ã‚¦ãƒˆæ¤œå‡ºå™¨ãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã¾ã—ãŸã€ã¨ã„ã†ãƒ­ã‚°ã‚’ä½•åº¦ã‹ã‚­ãƒ£ãƒƒãƒã—ãŸãŸã‚ã€æ¤œå‡ºå™¨ã‚’ã‚ªãƒ•ã«ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ESP32-CAMã®3.3Vå‡ºåŠ›ã‹ã‚‰æœ€åˆã«ãƒãƒƒã‚¯ãƒ©ã‚¤ãƒˆãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«é›»åŠ›ã‚’ä¾›çµ¦ã—ãŸãŸã‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"soc/rtc_cntl_reg.h"</span></span><font></font>
...<font></font>
WRITE_PERI_REG(RTC_CNTL_BROWN_OUT_REG, <span class="hljs-number">0</span>); <span class="hljs-comment">//disable brownout detector</span>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESP32ä½ã‚³ã‚¹ãƒˆæ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚</font><font style="vertical-align: inherit;">ãƒœãƒ¼ãƒ‰ã®CAMãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å®Ÿè£…ã•ã‚ŒãŸãƒãƒ¼ãƒˆã«ã¤ã„ã¦ã¯ã€è‡´å‘½çš„ãªçµè«–ãŒãªã„ãŸã‚ã€æœ¬å½“ã«ã‚«ãƒ¡ãƒ©ãŒå¿…è¦ãªå ´åˆã¯CAMãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½¹ç«‹ã¤ãƒªãƒ³ã‚¯</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">randomnerdtutorials.com/esp32-troubleshooting-guide</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">www.instructables.com/id/Select-Color-Display-for-ESP32</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">github.com/gnulabis/UTFT-ESP</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">github.com/Bodmer/TFT_eSPI</a></div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja463143/index.html">Googleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹å…¥é–€ï¼šã‚¢ãƒ—ãƒª+ã‚¦ã‚§ãƒ–</a></li>
<li><a href="../ja463147/index.html">ROSãƒˆãƒ­ãƒªãƒ¼ãƒ­ãƒœãƒƒãƒˆã€‚ãƒ‘ãƒ¼ãƒˆ3.åŠ é€Ÿã€ã‚«ãƒ¡ãƒ©ã®å¤‰æ›´ã€æ­©è¡Œã®ä¿®æ­£</a></li>
<li><a href="../ja463149/index.html">ã‚¢ãƒ©ãƒ³ã‚±ã‚¤ã¯å¤ãã¦å¿˜ã‚Œã‚‰ã‚Œã¦ã„ãŸãŒé‡è¦ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®æœ¬ã‚’èª­ã‚€ã“ã¨ã‚’å‹§ã‚ã¾ã™</a></li>
<li><a href="../ja463151/index.html">è™«çœ¼é¡ã®ä¸‹ã®iOS 13</a></li>
<li><a href="../ja463155/index.html">ãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚ºã¯é»’ã„å››è§’ã‚’æç”»ã—ã¾ã™ã€‚ãƒ‘ãƒ¼ãƒˆ2.ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³</a></li>
<li><a href="../ja463159/index.html">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€æ•°å­—ã€ãƒ¡ãƒ¼ãƒ«ã€ãã—ã¦åºƒå‘Šã«ã¤ã„ã¦</a></li>
<li><a href="../ja463165/index.html">é›»å ±ãŒDPIã‚’å–ã‚Šæ¶ˆã—ã¦ãƒ­ãƒƒã‚¯ã™ã‚‹-å½ã®TLS</a></li>
<li><a href="../ja463167/index.html">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°VRãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºã‚’é–‹å§‹ã™ã‚‹ãŸã‚ã«å¿…è¦ãªè³‡æ–™</a></li>
<li><a href="../ja463169/index.html">ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹è£œè´å™¨-ä»•çµ„ã¿</a></li>
<li><a href="../ja463171/index.html">ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ï¼šã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€ç¬¬6ç« ã€ãƒ‘ãƒ¼ãƒˆ1ï¼šãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>