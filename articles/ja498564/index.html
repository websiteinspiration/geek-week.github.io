<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏿 👦 ⚓️ モバイル向けのレンダリングの最適化、パート2。最新のモバイルGPUの主なファミリー 🈲 🚶🏾 🤰🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="あいさつ、愛する愛好家と専門家、グラフィックプログラマー！モバイル向けのレンダリングの最適化に関する一連の記事の第2部から始めましょう。このパートでは、モバイルのプレイヤーによって提示されるGPUの主要なファミリについて検討します。
 
 
 まず、モバイルGPUを分類できるいくつかの基準を検討しま...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>モバイル向けのレンダリングの最適化、パート2。最新のモバイルGPUの主なファミリー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playrix/blog/498564/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あいさつ、愛する愛好家と専門家、グラフィックプログラマー！</font><font style="vertical-align: inherit;">モバイル向けのレンダリングの最適化に関する一連の記事の第2部から始めましょう。</font><font style="vertical-align: inherit;">このパートでは、モバイルのプレイヤーによって提示されるGPUの主要なファミリについて検討します。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/36d/cf7/711/36dcf7711d7ce68544c97bb8dc69ee32.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、モバイルGPUを分類できるいくつかの基準を検討します。 </font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合または専用のシェーダーカーネル</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
初期のモバイルビデオカードの時代には、複雑な効果が広がる前に、フラグメントシェーダーでは精度を下げた計算のサポートで十分であるという見方がありました。</font><font style="vertical-align: inherit;">実際、典型的な表示モードでは、各カラーチャネルに8ビットまたはそれ以下のビットが使用されます。</font><font style="vertical-align: inherit;">このビューにより、専用のシェーダーコアが使用されるようになりました。</font><font style="vertical-align: inherit;">頂点には、精度を高めた行列変換用に最適化されたカーネルFP24 / FP32（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を使用しました。</font><font style="vertical-align: inherit;">ピクセルの場合、精度が低下したFP16（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）で</font><font style="vertical-align: inherit;">より効率的に動作するコア</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらはサポートされませんでした。</font><font style="vertical-align: inherit;">一見すると、この特殊化により、チップ上のトランジスタのより合理的な分布を実現できます。</font><font style="vertical-align: inherit;">ただし、実際には、これは複雑な効果の開発や、高解像度のテクスチャを使用する場合に困難をもたらします。</font><font style="vertical-align: inherit;">さらに、コアの特殊化は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点/フラグメントのボトルネックに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つながる可能性があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">この用語は、頂点コアとピクセルコアの非対称的な負荷のために、一部のコアが「アイドル」であった状況を指します。&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/307/144/547/30714454751e34703835ce904cf5f40a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、最新のアーキテクチャは統合コアを使用します。</font><font style="vertical-align: inherit;">このようなカーネルは、負荷に応じて、頂点、ピクセル、その他の計算タスクを実行できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ffe/d7c/363/ffed7c363ebecf0d390a0271c1a8b014.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトル（SIMD）またはスカラー命令セット</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コアに特化した、上記のトランジスタを節約したいという精神のもと、一連のシェーダー命令の設計が行われました。 3次元グラフィックスの最も一般的な変換は、4つのコンポーネントベクトルで動作します。したがって、初期のGPUはそのようなオペランドを特に使用していました。シェーダーコードに、オプティマイザーによってベクトル演算にパッケージ化できない異種スカラー演算が含まれている場合、一部の計算能力は使用されませんでした。この現象は次のように説明できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b7/3dd/34a/6b73dd34a79eb4376ed816a37de4a4ae.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的な乗算加算演算を実行するシェーダーがあります。2つのオペランドを乗算してから、3番目のオペランドを加算します。条件付きベクトルアーキテクチャ（Vector ISA = Vector Instruction Set Architecture）でコンパイルすると、</font><font style="vertical-align: inherit;">1クロックで実行される1 </font><font style="vertical-align: inherit;">つのベクトル命令</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vMADDが</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">得られ</font><font style="vertical-align: inherit;">ます。条件付きスカラーアーキテクチャでは、4つのスカラー命令を取得します。これは、改善されたパイプラインのおかげで、1クロックサイクルで実行されます。ここで、2つの演算を実行するが、2つのコンポーネントオペランドに対して実行する高度なシェーダーについて考えます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/333/539/b2f/333539b2fb573f8f93ff518ca25f6e5c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベクトルアーキテクチャの場合、実行には2クロックサイクルを必要とする2つの命令がすでに取得されています。ただし、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.zw</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント</font><font style="vertical-align: inherit;">では</font><font style="vertical-align: inherit;">何</font><font style="vertical-align: inherit;">も行わ</font><font style="vertical-align: inherit;">れず</font><font style="vertical-align: inherit;">、処理能力はアイドル状態です。スカラーアーキテクチャの場合、これらの同じ操作</font><font style="vertical-align: inherit;">を、同じ1クロックサイクルで実行</font><font style="vertical-align: inherit;">される4つのスカラー</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sMADDに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージ化できます</font><font style="vertical-align: inherit;">。したがって、パイプラインの改善によるスカラーアーキテクチャでは、より高密度の計算が実現されます。ただし、以下に示すように、ベクトル</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は依然として関連しています。したがって、シェーダーコードにベクトル化手法を適用することには意味があります。これらを使用すると、ベクトル</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISAを</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用してビデオカードのパフォーマンスを向上させることができます</font><font style="vertical-align: inherit;">。同時に、これは原則として、より現代的なスカラーのパフォーマンスに影響を与えません</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の特性に基づいて、私たちは現代で一般的なモバイルGPUのファミリーを検討します。</font><font style="vertical-align: inherit;">最も一般的な家族から始めましょう。</font><font style="vertical-align: inherit;">多くの人々は、私たちが</font><font style="vertical-align: inherit;">英国の会社</font><strong><font style="vertical-align: inherit;">ARMの</font></strong></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラフィックスカードについて話していることを知ってい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ARMはチップ製造に直接関与しておらず、代わりに知的財産を提供しています。</font><font style="vertical-align: inherit;">他のモバイルビデオカードと同様に、Maliは</font><strong><font style="vertical-align: inherit;">System on Chip（SoC）の</font></strong><font style="vertical-align: inherit;">一部です</font><font style="vertical-align: inherit;">。</font><strong><font style="vertical-align: inherit;">CPU</font></strong><font style="vertical-align: inherit;">、</font><strong><font style="vertical-align: inherit;">GPU</font></strong><font style="vertical-align: inherit;">、バスの</font><font style="vertical-align: inherit;">共有</font><font style="vertical-align: inherit;">メモリ</font><font style="vertical-align: inherit;">で</font><strong><font style="vertical-align: inherit;">動作</font></strong><font style="vertical-align: inherit;">し</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。&nbsp;</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリ・ウットガルド</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2008年、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリウットガルド</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建築の最初の代表者が</font><strong><font style="vertical-align: inherit;">誕生</font></strong><font style="vertical-align: inherit;">し、現在に至るまで関連しています。</font><font style="vertical-align: inherit;">これらのビデオカードは、Mali-4スキーム</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MP </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に従って名前が付けられています</font><font style="vertical-align: inherit;">。ここで、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はモデル番号、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はフラグメントコアの数です。</font><font style="vertical-align: inherit;">では</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリUtgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダコア専門、およびすべてのモデルは頂点のみ1コアが付属しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mali Utgardアーキテクチャの他の機能：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 2.0&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">断片化されたカーネル</font><font style="vertical-align: inherit;">での</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートの欠如</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトル命令セット（計算をベクトル化することは理にかなっています）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
かかわらず</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のOpenGL ESの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様</font><font style="vertical-align: inherit;">、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリUtgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビデオカード</font><strong><font style="vertical-align: inherit;">ドライバが</font></strong><font style="vertical-align: inherit;">正常に使用することをフラグメントシェーダコンパイル</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highpの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度</font><font style="vertical-align: inherit;">（例えば、精度を使用してデフォルトによって設定されている</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精密highpフロートが</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。しかし、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の精度</font><strong><font style="vertical-align: inherit;">は</font></strong><font style="vertical-align: inherit;">実際に使用され</font><font style="vertical-align: inherit;">ます。したがって、そのようなビデオカードでモバイルゲームのすべてのシェーダーをさらにテストすることをお勧めします。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unityが</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">収集したデータによると</font><font style="vertical-align: inherit;">、2019年末に、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリウットガード</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は約10％のプレーヤーのデバイスで作業しました。そして、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">market.yandex.ru</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">適切なフィルターを設定する</font><font style="vertical-align: inherit;">と、2019年に、このアーキテクチャーのビデオカードを搭載した10台を超える新しい電話が発表されたことがわかります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/779/5a9/8ae/7795a98ae2da31ecf49131939087c21e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このオーディエンスを放棄する準備ができている場合は、AndroidManifest.xmlでOpenGL ES 3.0サポートの要件を設定するだけで十分です。 </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">uses-feature</span> <span class="hljs-attr">android:glEsVersion</span>=<span class="hljs-string">"0x00030000"</span> <span class="hljs-attr">android:required</span>=<span class="hljs-string">"true"</span>⁄&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Utgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">
加えて</font><font style="vertical-align: inherit;">、現在、OpenGL ES 3.0のサポートなしに普及しているモバイルGPUはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に注目すべきは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリウットガード</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">での高解像度テクスチャの使用です</font><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中間</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度の仮数の10ビットでは、</font><font style="vertical-align: inherit;">片側が1024を超えるテクスチャ解像度の高品質テクスチャリングには不十分です。</font><font style="vertical-align: inherit;">ただし、</font><strong><font style="vertical-align: inherit;">Mali Utgard</font></strong><font style="vertical-align: inherit;">フラグメントコア</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度</font><font style="vertical-align: inherit;">しかサポートされていませ</font><font style="vertical-align: inherit;">んが、</font><strong><font style="vertical-align: inherit;">変化を</font></strong><font style="vertical-align: inherit;">直接</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">すると、</font><strong><font style="vertical-align: inherit;">fp24</font></strong><font style="vertical-align: inherit;">テクスチャ座標の精度を</font><font style="vertical-align: inherit;">得ることができます</font><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// vertex shader</span><font></font>
varying highp vec2 v_texc;<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    v_texc = …;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  fragment shader</span><font></font>
...<font></font>
varying highp vec2 v_texc;<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    gl_FragColor = texture2D(u_sampler, v_texc); <span class="hljs-comment">//  v_texc </span>
                                                 <span class="hljs-comment">//  </span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部のアーキテクチャのボーナスとして、このアプローチを使用すると</font><font style="vertical-align: inherit;">、</font><strong><font style="vertical-align: inherit;">フラグメントシェーダーを</font></strong><font style="vertical-align: inherit;">実行する前にテクスチャコンテンツ</font><font style="vertical-align: inherit;">を</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プリフェッチ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できます。これにより</font><font style="vertical-align: inherit;">、テクスチャサンプリング結果を待つ間、</font><strong><font style="vertical-align: inherit;">ストール</font></strong><font style="vertical-align: inherit;">を最小限に抑える</font><font style="vertical-align: inherit;">ことができます</font><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリ・ミッドガード</font></font></h2><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリUtgardがされている</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に置き換え</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリミッドガルドの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャ</font><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali-6xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali-7xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali-8xx</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の名前が​​付いたこのアーキテクチャには数世代あります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">8歳の時代にもかかわらず、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Midgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ほとんどの新機能をサポートするモダンアーキテクチャと呼ぶことができます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合されたシェーダーカーネル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 3.2（コンピュート＆ジオメトリシェーダー、テッセレーション...）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、Mali Midgardはベクター</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISAを</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保持してい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">Mali Midgard（聴衆の約25％）が広く使用されていることを考えると、コンピューティングのベクトル化が適切になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mali Midgardのもう1つの機能は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forward Pixel Kill</font></font></strong></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクノロジー</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">各ピクセルは、フラグメントコアの個別のストリームで計算されます。</font><font style="vertical-align: inherit;">ストリームの実行中に、結果のピクセルが別のプリミティブの不透明なピクセルによってブロックされることがわかった場合、ストリームは途中で終了し、解放されたリソースは他の計算に使用されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マリビフロスト</font></font></h2><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Midgardの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に</font><strong><font style="vertical-align: inherit;">、</font></strong></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bifrost</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャ</font><strong><font style="vertical-align: inherit;">は</font></strong><font style="vertical-align: inherit;">、スカラー</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">への移行で</font><strong><font style="vertical-align: inherit;">際立っ</font></strong><font style="vertical-align: inherit;">てい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">以前のアーキテクチャと比較して、コアの最大数が（16から32に）増加し、共有メモリへのコヒーレントアクセスを可能にするCPUとの改善されたインターフェイスがサポートされています。同期を簡略化できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非公式から</font></font></h2><br><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">Linux</font></strong><font style="vertical-align: inherit;">用の</font><strong><font style="vertical-align: inherit;">オープンソース</font></strong><font style="vertical-align: inherit;">ドライバー</font><font style="vertical-align: inherit;">を作成するために</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ビデオカード</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">リバースエンジニアリングする多くの試みが行われてきました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これを行おうとする熱心な人々の作品により、</font><strong><font style="vertical-align: inherit;">Mali</font></strong><font style="vertical-align: inherit;">ビデオカードの文書化されていない機能を見ることができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">したがって、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">PanFrost</font></a><font style="vertical-align: inherit;">プロジェクト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">に</font></a><font style="vertical-align: inherit;">は、</font><strong><font style="vertical-align: inherit;">Mali Midgard / Bifrost</font></strong><font style="vertical-align: inherit;">用の逆</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アセンブラーが</font></a><font style="vertical-align: inherit;">あり、</font><font style="vertical-align: inherit;">これを使用して一連のシェーダー手順を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">理解</font></a><font style="vertical-align: inherit;">できます（このトピックに関する公式の公開情報はありません）。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbd/f31/751/bbdf3175137a886431a23de54239900e.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アドレノ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モバイル</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の2番目に一般的なファミリー</font><font style="vertical-align: inherit;">は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adreno</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">このビデオカードは</font><font style="vertical-align: inherit;">、</font><strong><font style="vertical-align: inherit;">Snapdragon</font></strong><font style="vertical-align: inherit;">ブランド</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">知られる</font><font style="vertical-align: inherit;">、アメリカの会社</font><strong><font style="vertical-align: inherit;">クアルコム</font></strong><font style="vertical-align: inherit;">の</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoC</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">インストールされてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">Snapdragonは、</font><strong><font style="vertical-align: inherit;">Samsung</font></strong><font style="vertical-align: inherit;">、</font><strong><font style="vertical-align: inherit;">Sony</font></strong><font style="vertical-align: inherit;">などの時代</font><font style="vertical-align: inherit;">
の</font><strong><font style="vertical-align: inherit;">最先端の</font></strong><font style="vertical-align: inherit;">スマートフォンにインストールされており、</font><font style="vertical-align: inherit;">現在の</font><strong><font style="vertical-align: inherit;">Adreno</font></strong><font style="vertical-align: inherit;">ビデオカード</font><font style="vertical-align: inherit;">は3xx〜6xxシリーズファミリーです。</font><font style="vertical-align: inherit;">これらのシリーズはすべて、次の機能を組み合わせています。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合されたシェーダーカーネル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">疑似TBR（従来の専用GPUメモリにある大きなタイルサイズ）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シーンの性質に応じた即時モードレンダリングでの自動切り替え（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FlexRender</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スカラー命令セット</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以降では</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">副腎4xxの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ためのサポート、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のOpenGL ES 3.1が導入され</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そしてと</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">副腎の5xx -バルカン</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のOpenGL ES 3.2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adrenoタイルベースのレンダリング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adrenoビデオカードには、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GMEM</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる「従来の」GPUが</font><strong><font style="vertical-align: inherit;">あり</font></strong><font style="vertical-align: inherit;">ます。 128kbから1536kbのボリュームが適用されます。これにより、モバイルGPUの他の開発者のアーキテクチャと比較して、より大きなタイルサイズを使用できます。 Adrenoでは、タイルのサイズは動的であり、使用されるカラーフォーマット、深度バッファー、ステンシルによって異なります。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時モードで</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業している場合</font><strong><font style="vertical-align: inherit;">、</font></strong><font style="vertical-align: inherit;">レンダリングはシステムメモリで行われます。優先モードを指定できるGL ES拡張があります：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QCOM_binning_control</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ただし、Qualcommの最新の推奨事項では、アプリケーションが生成したコマンドバッファーの最も好ましいモードを決定するGPUドライバーに完全に依存することを推奨しています。&nbsp; </font><strong><font style="vertical-align: inherit;">TBR</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
モードで作業する場合</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adrenoは2つの頂点パスを作成します。</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビニングパス</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビン</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によるプリミティブの分布（</font><strong><font style="vertical-align: inherit;">bin</font></strong><font style="vertical-align: inherit;">、タイルの同義語）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在のBinに該当するプリミティブのみをレンダリングするための</font><font style="vertical-align: inherit;">完全な</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点パス</font></font></strong><font style="vertical-align: inherit;"></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビニングパス</font><font style="vertical-align: inherit;">
中</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Adrenoは頂点位置のみを計算します。</font><font style="vertical-align: inherit;">他の属性は計算されず、不要なコードはオプティマイザによって削除されます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式文書</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（9.2最適化頂点処理）、データの残りの部分から別々に計算位置に必要な頂点情報を格納するための勧告があります。</font><font style="vertical-align: inherit;">これにより、頂点データのキャッシュがより効率的になります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フリードレノ</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/83e/c3d/15d/83ec3d15dc03e81e81e7d867cae2b3a3.png" align="left" width="120"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ARMやイマジネーションテクノロジーとは異なり、クアルコムはGPUの内部構造の詳細を共有することに消極的です。</font><font style="vertical-align: inherit;">しかし、リバースエンジニアロブ・クラークの努力のおかげで、ずっとから学ぶことができる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freedrenoの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト</font><font style="vertical-align: inherit;">、オープンソース</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">副腎の</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドライバ</font><font style="vertical-align: inherit;">Linux用。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FreedrenoによるRob Clark</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イマジネーションテクノロジーズのPowerVR</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イマジネーションテクノロジーズ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アップル製品のGPUの開発で有名な英国のファブレス企業です。</font><font style="vertical-align: inherit;">同社は、Appleの内部開発を使用するiPhone 8 / Xが登場するまでこの役割を果たしました。</font><font style="vertical-align: inherit;">変更されていないこれらのチップの最適化に関する推奨事項、およびイマジネーションからのアップルに対する特許クレームは、アップルがイマジネーションからの独自の開発であるPowerVRアーキテクチャの開発を続けたことを示唆しています。</font><font style="vertical-align: inherit;">2020年の初めに、アップル</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イマジネーションテクノロジーズのライセンス慣行に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">戻り</font></a><font style="vertical-align: inherit;">ました。</font><font style="vertical-align: inherit;">iOS / iPadOSを搭載したデバイスに加えて、PowerVRビデオカードが多数のAndroidスマートフォンおよびタブレットにインストールされています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9d/86d/b66/a9d86db66b2293beaf3b01d3d809573f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーの間でまだ見つかるPowerVRグラフィックスカードのファミリを検討してください。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR SGX</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のPowerVR SGXグラフィックスカードは2009年に登場しました。</font><font style="vertical-align: inherit;">このアーキテクチャには、Series5、Series5XT、Series5XEの世代がいくつかあります。</font><font style="vertical-align: inherit;">AppleはこれらのGPUをiPAD 4 / iPhone 5 / iPOD Touch 5まで使用していました。以下のSGX機能が挙げられます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合されたシェーダーカーネル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 2.0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトル命令セット</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダーでの10ビット低精度のサポート</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存するテクスチャ読み取りのパフォーマンスが低い</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらのいくつかについて詳しく説明します。&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低精度</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PowerVR SGXは、</font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハードウェアサポートを</font><strong><font style="vertical-align: inherit;">備え</font></strong><font style="vertical-align: inherit;">た唯一の最新のモバイルGPU </font><font style="vertical-align: inherit;">です。新しいPowerVRモデル、および他のベンダーのすべての最新のGPUは、実際には</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度を使用して</font><strong><font style="vertical-align: inherit;">い</font></strong><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。使用</font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lowpの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PowerVRのSXGにすることで、高い計算密度（サイクルあたりより多くの操作）を達成することができます。同時に、</font><font style="vertical-align: inherit;">他の精度とは異なり</font><font style="vertical-align: inherit;">、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lowp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のスウィズル操作（ベクトルコンポーネントの置換）</font><font style="vertical-align: inherit;">は自由ではありません。この機能と、lowpが提供する値の狭い範囲（[-2,2]）は、その範囲を制限します。同時に、不十分な設定の</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低音</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その結果、SGXファミリのアーティファクトは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediump</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度が実際に使用される他のすべてのグラフィックスカードでは見られません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このため、</font><font style="vertical-align: inherit;">シェーダーでの</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lowpの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用を拒否することを検討する</font><strong><font style="vertical-align: inherit;">必要</font></strong><font style="vertical-align: inherit;">があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存するテクスチャの読み取り</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご存知のように、メモリの読み取り結果を待つ必要があるため、テクスチャサンプリング操作は最も低速です。モバイルSoCの場合は、CPUとの共有システムメモリについて話しています。遅いメモリへのアクセス数を減らすために、テクスチャキャッシュが使用されます。テクスチャを使用したラスタライゼーションの最初のダウンタイムを回避するために、使用済み領域を事前にキャッシュしておくことは理にかなっています。フラグメントシェーダーが頂点シェーダーから渡されたテクスチャ座標を変更せずに使用する場合、キャッシュに必要なテクスチャセクションは、フラグメントシェーダーが実行される前に決定できます。フラグメントシェーダーがテクスチャ座標を変更するか、別のテクスチャのデータを使用してそれを計算する場合、これは常に可能であるとは限りません。その結果、フラグメントシェーダーの実行が遅くなる可能性があります。PowerVR SGXグラフィックカードは、このシナリオでは特に苦痛です。さらに、テクスチャ座標（スウィズル）のコンポーネントの順列を使用しても、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存するテクスチャの読み取り</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存するテクスチャを読み込ま</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ないシェーダープログラムの例</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点プログラム</font></font></strong><br>
<br>
<pre><code class="cpp hljs">attribute highp vec2 a_texc;<font></font>
varying highp vec2 v_texc;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	gl_Position = …<font></font>
	v_texc = a_texc;<font></font>
}<font></font>
<font></font>
</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメントプログラム</font></font></strong><br>
<br>
<pre><code class="cpp hljs">precision mediump <span class="hljs-keyword">float</span>;<font></font>
uniform sampler u_sampler;<font></font>
varying highp vec2 v_texc;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	gl_FragColor = texture2D( u_sampler, v_texc ); <span class="hljs-comment">//  dependent texture read</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合：</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメントプログラム</font></font></strong><br>
<br>
<pre><code class="cpp hljs">precision mediump <span class="hljs-keyword">float</span>;<font></font>
uniform sampler u_sampler;<font></font>
varying highp vec2 v_texc;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	gl_FragColor = texture2D( u_sampler, v_texc.yx ); <span class="hljs-comment">// dependent texture read!</span><font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVRローグ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PowerVRビデオカードは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rogue</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャでさらに開発されました</font><font style="vertical-align: inherit;">。このアーキテクチャには、Series6からSeries9まで、数世代あります。</font><font style="vertical-align: inherit;">すべての</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR Rogueに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、次の機能があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合されたシェーダーカーネル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スカラー命令アーキテクチャ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 3.0+のサポート（3.2まで、および新しい定規のVulkan API）&nbsp;</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerVR TBDR</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての一般的なモバイルGPUと同様に、PowerVRはタイルパイプラインを使用します。しかし、競合他社とは異なり、イマジネーションはさらに進ん</font><font style="vertical-align: inherit;">で、プリミティブの</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遅延</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラスタライズを</font><font style="vertical-align: inherit;">実装しました</font><font style="vertical-align: inherit;">。これにより、レンダリング順序に関係なく、非表示のピクセルのシェーディングをスキップできます。このアプローチは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイルベースの遅延レンダリング</font></font></strong></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">呼ばれ、</font><font style="vertical-align: inherit;">非表示のピクセルを削除するプロセスは</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">隠し面の削除（HSR）</font><font style="vertical-align: inherit;">と呼ば</font><font style="vertical-align: inherit;">れます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff2/2db/1dd/ff22db1dd631bb54e964aa24c96b437f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隠し面の削除</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
不透明なジオメトリを透明に描画し、Zプレパスを使用しないことをお勧めします。これは、ほとんどのシナリオのPowerVRビデオカードの場合、不要な作業につながるためです。</font><font style="vertical-align: inherit;">ただし、混合を考慮して、正しい色を取得するために、互いに重なり合ういくつかの連続した透明ピクセルが完全にシェーディングされます。</font><font style="vertical-align: inherit;">最後の透明なピクセルの後ろに不透明なピクセルが続く場合、それを破棄できます。&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンイマジネーションテクノロジー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PowerVRクリエーターは、他のGPU開発者よりもドキュメントへのオープンアクセスを提供しています。</font><font style="vertical-align: inherit;">グラフィックパイプラインのアーキテクチャと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Rogueアーキテクチャの一連の命令</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について詳しく説明します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">便利なツール</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVRShaderEditor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります。これを使用すると、シェーダーのプロファイリング情報と、Rogueの逆アセンブルされたリストを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">すぐに</font></a><font style="vertical-align: inherit;">受信できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aba/b9a/19e/abab9a19e78e6ff40638d5cdf971615a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Androidベースのデバイスの環境ではPowerVRビデオカードの存在は限られていますが、iOS向けの有能なグラフィックプログラミングのアーキテクチャを研究することは理にかなっています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時モードのモバイルGPU</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モバイルビデオカードの最も一般的なファミリを調べました。</font><font style="vertical-align: inherit;">これらのファミリはすべて、タイルレンダリングアーキテクチャを使用しています。</font><font style="vertical-align: inherit;">ただし、従来の</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時モードの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプローチ</font><font style="vertical-align: inherit;">を使用するモバイルビデオカードがあります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それらの一部を次に示します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nVIdia（Tegra SoC）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近の第11世代を除くすべてのIntelファミリ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vivante GCxxxx（+ Arcturus GC8000）</font></font></li>
</ul><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時モードで</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
動作するモバイルビデオカードの機能</font><font style="vertical-align: inherit;">は、高価なFBOクリーニング操作です。</font><font style="vertical-align: inherit;">タイルアーキテクチャでは、フルスクリーンクリーニングによってレンダリングが高速化され、ドライバーが古いコンテンツのロード操作をタイルメモリに追加できなくなることを思い出してください。</font><font style="vertical-align: inherit;">モバイル</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時モードGPUでは、</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フルスクリーンクリーニングは時間のかかる操作であり、そのようなGPUで「計算」が可能になります。</font><font style="vertical-align: inherit;">クリーンアップを追加しても速度は向上しないがレンダリングが遅くなる場合は、おそらく</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時モードのGPUで</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業してい</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">もちろん、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イミディエイトモードのGPUでは</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ターゲットの変更は「条件付きで無料」の手順である</font><font style="vertical-align: inherit;">ことを忘れないでください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレーヤー間でのモバイルGPUのさまざまなファミリーの分布</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2019年末にプレーヤーから収集されたモバイルGPUの統計は次のとおりです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7f/184/634/e7f1846345e5e8bf798bbf207a11885d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下で「その他」セグメントを開きます</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8a3/f61/604/8a3f61604361a8c8e426ae0ae8920f05.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのデータに基づいて、GPUの主な機能の分布を調べます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b41/b97/3d5/b41b973d5d8d01e817a558d838396d63.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベクトルALU（算術論理演算ユニット）は廃止され、スカラーのものに置き換えられました。現在、ベクトル命令セットを備えたモバイルGPUの大半は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali Midgard</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であり、パフォーマンスは平均的と見なすことができます。なぜなら原則として、ベクトル化はスカラーALUでの実行速度を低下させません;ベクトル化をモバイル用のシェーダーを最適化する実際の手法として検討することは価値があります。&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
専用のシェーダーカーネルは非推奨になり、統合されたものに置き換えられました。骨格メッシュの頂点のボトルネックが怖くなることはなくなりました。専用カーネルは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mali-4xx（Utgard）ファミリで</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみ使用され</font><font style="vertical-align: inherit;">ます。これらのGPUは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL ES 2.0</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみをサポートすることを思い出してください</font><font style="vertical-align: inherit;">。私たちの聴衆はそれらの約3.5％を持っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、モバイルGPUの大部分はタイルアプローチを使用しています。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イミディエイトモードは</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取り残されており、それを使用するビデオカードと共に急速に排除されています。</font><font style="vertical-align: inherit;">プレーヤー</font><font style="vertical-align: inherit;">での</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即時モードGPU</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のシェア</font><font style="vertical-align: inherit;">は約0.7％です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
役立つリンク：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">developer.arm.com/solutions/graphics</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">developer.qualcomm.com/software/adreno-gpu-sdk/tools</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.imgtec.com/developers/powervr-sdk-tools/documentation/</font></font></a></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご清聴ありがとうございました！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズの次の記事では、モバイル用のシェーダーを最適化する手法を検討します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja498548/index.html">Laravel Nova用の独自のパッケージの作成：OptimalImage</a></li>
<li><a href="../ja498552/index.html">リモートサイトのマネージャーはどのような間違いをしますか</a></li>
<li><a href="../ja498556/index.html">ハンス・ピーター・ルンとハッシュ・アルゴリズムの誕生</a></li>
<li><a href="../ja498560/index.html">実際のプロジェクトのWebコンポーネント</a></li>
<li><a href="../ja498562/index.html">隔離とは逆に：インターンシップをリモート形式に転送する方法</a></li>
<li><a href="../ja498566/index.html">レジリエンスエンジニアリング：REDeploy会議からのメモ</a></li>
<li><a href="../ja498568/index.html">AMDの1970年代のAm2901マルチチップ・セクション・マイクロプロセッサーの内部</a></li>
<li><a href="../ja498572/index.html">気まぐれな割引？udalenkaへの移行の際のCRMベンダーのシェア</a></li>
<li><a href="../ja498574/index.html">なぜゲームを開発することにしたのか、または懐かしい旅をゼロにしたのか</a></li>
<li><a href="../ja498576/index.html">メッセンジャー（Gem4me）に新しいメッセージを入力するためのフィールドを開発した方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>