<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍀 🌻 🐰 GITサーバーへのマルチユーザーアクセスの編成 👨🏻‍⚕️ 💃🏿 🙅🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gitサーバーをインストールして構成するときに、複数のユーザーが複数のプロジェクトにアクセスできるようにするという疑問が生じます。私は問題の調査を行い、私のすべての要件を満たすソリューションを見つけました：シンプル、安全、信頼性。
 
 私の希望は次のとおりです。
 
 

- 各ユーザーは自分のア...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>GITサーバーへのマルチユーザーアクセスの編成</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457056/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitサーバーをインストールして構成するときに、複数のユーザーが複数のプロジェクトにアクセスできるようにするという疑問が生じます。</font><font style="vertical-align: inherit;">私は問題の調査を行い、私のすべての要件を満たすソリューションを見つけました：シンプル、安全、信頼性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の希望は次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 各ユーザーは自分のアカウントに接続します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 複数のユーザーが1つのプロジェクトで作業できます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 同じユーザーが複数のプロジェクトで作業できます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 各ユーザーは、自分が作業しているプロジェクトにのみアクセスできます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ある種のWebインターフェースだけでなく、コマンドラインを介して接続できる必要があります</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それも素晴らしいでしょう：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 管理者に読み取り専用権限を付与する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gitでユーザー権限を便利に管理する</font></font></li>
</ul><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GITサーバーにアクセスするためのオプションの概要</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、何を選択するかを理解する必要があるため、Gitプロトコルの概要を説明します。</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssh-特別に作成されたユーザーアカウントを使用してサーバーにアクセスします。</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">奇妙なことに、Gitが単一のアカウントを使用してすべてのリポジトリにアクセスすることを推奨事項から除外していません。</font><font style="vertical-align: inherit;">これは私の要件を満たしていません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数のアカウントを使用できますが、特定のディレクトリへのユーザーアクセスのみを制限するにはどうすればよいですか？</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホームディレクトリへのクローズは、他のユーザーの書き込みアクセスを整理することが難しいため、適切ではありません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitがリンクとして解釈しないため、ホームディレクトリからのシンボリックリンクの使用も困難です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通訳へのアクセスを制限することは可能ですが、これが常に機能するという完全な保証はありません。</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このようなユーザーのために独自のコマンドインタープリターを接続することもできますが、 </font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、これはすでにある種の難しい決定です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして2では、これは回避できます。</font></font></li>
</ul></li>
</ul></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 しかし、おそらくこれはユーザーがコマンドを実行できるという問題ではないでしょうか？..一般的に、この方法を使用する方法を考え出した場合、この方法を除外することはできません。</font><font style="vertical-align: inherit;">後でこのメソッドに戻りますが、今のところ他の代替案を簡単に検討します。おそらくもっと簡単になるでしょう。</font></font><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gitローカルプロトコルはsshfsと組み合わせて使用​​でき、複数のユーザーを使用できますが、これは基本的に前のケースと同じです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http-読み取り専用</font></font></li>
<li>git —   </li>
<li>https —  ,    , -      …  ,  -  .</li>
</ul><br>
<h2>  ssh       Git</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sshプロトコルに戻ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gitにはsshアクセスが使用されるため、サーバーデータのセキュリティを確保する必要があります。 sshを介して接続するユーザーは、Linuxサーバーで自分のログインを使用するため、sshクライアントを介して接続し、サーバーのコマンドラインにアクセスできます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなアクセスを取得することに対する完全な保護はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、ユーザーはLinuxファイルに関心を持つべきではありません。重要な情報はgitリポジトリにのみ保存されます。したがって、コマンドラインを使用してアクセスを制限することはできませんが、Linuxでは、ユーザーが参加しているプロジェクトを除いて、ユーザーがプロジェクトを監視できないようにすることができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかにLinux許可システムを使用しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに述べたように、sshアクセスに使用できるアカウントは1つだけです。この構成は、推奨されるgitオプションのリストに含まれていますが、いくつかのユーザーにとって安全ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
：資料の冒頭に与えられた要件を実装するには、次のディレクトリ構造は、権利と所有者の割り当てを使用して作成された</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1）プロジェクトのディレクトリ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIR1（PROJ1：proj1.0770）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIR2（proj2：proj2.0770）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIR3（proj3：proj3.0770）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font><font style="vertical-align: inherit;">
DIR1、 dir2、dir3-プロジェクトディレクトリ：プロジェクト1、プロジェクト2、プロジェクト</font><font style="vertical-align: inherit;">
3。proj1：proj1、proj2：proj2、proj3：proj3-それぞれのプロジェクトのディレクトリの所有者として任命された特別に作成されたLinuxユーザー。</font></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのディレクトリへの権利は0770に設定されています-所有者と彼のグループへの完全なアクセスと他のすべての人への完全な禁止。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）開発者アカウント</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者1：dev1：dev1、proj1、proj2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者2：dev2：dev2、proj2、proj3 </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要なポイントは、対応するプロジェクトを所有するシステムユーザーの追加グループが開発者に割り当てられることです。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、Linuxサーバー管理者が単一のコマンドとして実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、「開発者1」がproj1およびproj2プロジェクトで機能し、「開発者2」がproj2およびproj3プロジェクトで機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者のいずれかがコマンドラインを介してssh経由で接続する場合、彼の権限は、彼が関与していないプロジェクトディレクトリの内容を表示するのに十分ではありません。</font><font style="vertical-align: inherit;">彼自身はいかなる方法でもそれを変えることはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この原則の基礎はLinuxの権利の基本的なセキュリティであるため、このスキームは信頼できます。</font><font style="vertical-align: inherit;">さらに、このスキームは管理が非常に簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
練習に移りましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinuxサーバーでのGitリポジトリの作成</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックします。</font></font><br>
<br>
<pre><code class="bash hljs">[root@server ~]<span class="hljs-comment"># cd /var/</span>
[root@server var]<span class="hljs-comment"># useradd gitowner</span>
[root@server var]<span class="hljs-comment"># mkdir gitservertest</span>
[root@server var]<span class="hljs-comment"># chown gitowner:gitowner gitservertest</span>
[root@server var]<span class="hljs-comment"># adduser proj1</span>
[root@server var]<span class="hljs-comment"># adduser proj2</span>
[root@server var]<span class="hljs-comment"># adduser proj3</span>
[root@server var]<span class="hljs-comment"># adduser dev1</span>
[root@server var]<span class="hljs-comment"># adduser dev2</span>
[root@server var]<span class="hljs-comment"># passwd dev1</span>
[root@server var]<span class="hljs-comment"># passwd dev2</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手にタイプするのに疲れた...</font></font><br>
<br>
<pre><code class="bash hljs">[root@server gitservertest]<span class="hljs-comment"># sed "s/ /\n/g" &lt;&lt;&lt; "proj1 proj2 proj3" | while read u; do mkdir $u; chown $u:$u $u; chmod 0770 $u; done</span><font></font>
<font></font>
[root@server gitservertest]<span class="hljs-comment"># usermod -aG proj1 dev1</span>
[root@server gitservertest]<span class="hljs-comment"># usermod -aG proj2 dev1</span>
[root@server gitservertest]<span class="hljs-comment"># usermod -aG proj2 dev2</span>
[root@server gitservertest]<span class="hljs-comment"># usermod -aG proj3 dev2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドラインから外部リポジトリにアクセスしたり、その内容を確認したりすることは不可能です。</font></font><br>
<br>
<pre><code class="bash hljs">[dev1@server ~]$ <span class="hljs-built_in">cd</span> /var/gitservertest/proj3<font></font>
-bash: <span class="hljs-built_in">cd</span>: /var/gitservertest/proj3: Permission denied<font></font>
[dev1@server ~]$ ls /var/gitservertest/proj3<font></font>
ls: cannot open directory /var/gitservertest/proj3: Permission denied</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのプロジェクトでの複数の開発者によるGitでのコラボレーション</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つの開発者が新しいファイルを導入した場合、残りの開発者はそれを変更できません。プロジェクトを所有するユーザー（たとえば、proj1）ではなく、彼自身がそれを所有しているためです（たとえば、dev1）。</font><font style="vertical-align: inherit;">サーバーリポジトリがあるので、まず、「。git」ディレクトリの配置方法と、新しいファイルが作成されるかどうかを知る必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカルGitリポジトリを作成してGitサーバーにプッシュする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントマシンに移りましょう。</font></font><br>
<br>
<pre><code class="dos hljs">Microsoft Windows [Version <span class="hljs-number">6</span>.<span class="hljs-number">1</span>.<span class="hljs-number">7601</span>]<font></font>
(c)   (Microsoft Corp.), <span class="hljs-number">2009</span>.   .
<span class="hljs-function">
C:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">init</span> .
<span class="hljs-title">Initialized</span> <span class="hljs-title">empty</span> <span class="hljs-title">Git</span> <span class="hljs-title">repository</span> <span class="hljs-title">in</span> <span class="hljs-title">C</span>:/<span class="hljs-title">gittest</span>/.<span class="hljs-title">git</span>/

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">echo</span> "<span class="hljs-title">test</span> <span class="hljs-title">dev1</span> <span class="hljs-title">to</span> <span class="hljs-title">proj2</span>" &gt; <span class="hljs-title">test1.txt</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">add</span> .

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">status</span>
<span class="hljs-title">On</span> <span class="hljs-title">branch</span> <span class="hljs-title">master</span>
<span class="hljs-title">No</span> <span class="hljs-title">commits</span> <span class="hljs-title">yet</span>
<span class="hljs-title">Changes</span> <span class="hljs-title">to</span> <span class="hljs-title">be</span> <span class="hljs-title">committed</span>:
  (<span class="hljs-title">use</span> "<span class="hljs-title">git</span> <span class="hljs-title">rm</span> --<span class="hljs-title">cached</span> &lt;<span class="hljs-title">file</span>&gt;..." <span class="hljs-title">to</span> <span class="hljs-title">unstage</span>)
        <span class="hljs-title">new</span> <span class="hljs-title">file</span>:   <span class="hljs-title">test1.txt</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">commit</span> -<span class="hljs-title">am</span> "<span class="hljs-title">new</span> <span class="hljs-title">test</span> <span class="hljs-title">file</span> <span class="hljs-title">added</span>"
[<span class="hljs-title">master</span> (<span class="hljs-title">root</span>-<span class="hljs-title">commit</span>) <span class="hljs-title">a7ac614</span>] <span class="hljs-title">new</span> <span class="hljs-title">test</span> <span class="hljs-title">file</span> <span class="hljs-title">added</span>
 1 <span class="hljs-title">file</span> <span class="hljs-title">changed</span>, 1 <span class="hljs-title">insertion</span>(+)
 <span class="hljs-title">create</span> <span class="hljs-title">mode</span> 100644 <span class="hljs-title">test1.txt</span>
 
<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">remote</span> <span class="hljs-title">add</span> <span class="hljs-title">origin</span> "<span class="hljs-title">ssh</span>://<span class="hljs-title">dev1</span>@10.1.1.11/<span class="hljs-title">var</span>/<span class="hljs-title">gitservertest</span>/<span class="hljs-title">proj2</span>"

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">push</span> <span class="hljs-title">origin</span> <span class="hljs-title">master</span>
<span class="hljs-title">dev1:dev1</span>@10.1.1.11'<span class="hljs-title">s</span> <span class="hljs-title">password</span>:
<span class="hljs-title">Counting</span> <span class="hljs-title">objects</span>: 3, <span class="hljs-title">done</span>.
<span class="hljs-title">Writing</span> <span class="hljs-title">objects</span>: 100% (3/3), 243 <span class="hljs-title">bytes</span> | 243.00 <span class="hljs-title">KiB</span>/<span class="hljs-title">s</span>, <span class="hljs-title">done</span>.
<span class="hljs-title">Total</span> 3 (<span class="hljs-title">delta</span> 0), <span class="hljs-title">reused</span> 0 (<span class="hljs-title">delta</span> 0)
<span class="hljs-title">To</span> <span class="hljs-title">ssh</span>://10.1.1.11/<span class="hljs-title">var</span>/<span class="hljs-title">gitservertest</span>/<span class="hljs-title">proj2</span>
 * [<span class="hljs-title">new</span> <span class="hljs-title">branch</span>]      <span class="hljs-title">master</span> -&gt; <span class="hljs-title">master</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、サーバー上で新しいファイルが形成され、それらはプッシュを実行したユーザーに属します</font></font><br>
<br>
<pre><code class="bash hljs">[dev1@server proj2]$ tree<font></font>
.<font></font>
├── 1.txt<font></font>
├── branches<font></font>
├── config<font></font>
├── description<font></font>
├── HEAD<font></font>
├── hooks<font></font>
│&nbsp;&nbsp; ├── applypatch-msg.sample<font></font>
│&nbsp;&nbsp; ├── commit-msg.sample<font></font>
│&nbsp;&nbsp; ├── post-update.sample<font></font>
│&nbsp;&nbsp; ├── pre-applypatch.sample<font></font>
│&nbsp;&nbsp; ├── pre-commit.sample<font></font>
│&nbsp;&nbsp; ├── prepare-commit-msg.sample<font></font>
│&nbsp;&nbsp; ├── pre-push.sample<font></font>
│&nbsp;&nbsp; ├── pre-rebase.sample<font></font>
│&nbsp;&nbsp; └── update.sample<font></font>
├── info<font></font>
│&nbsp;&nbsp; └── exclude<font></font>
├── objects<font></font>
│&nbsp;&nbsp; ├── 75<font></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; └── dcd269e04852ce2f683b9eb41ecd6030c8c841<font></font>
│&nbsp;&nbsp; ├── a7<font></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; └── ac6148611e69b9a074f59a80f356e1e0c8be67<font></font>
│&nbsp;&nbsp; ├── f0<font></font>
│&nbsp;&nbsp; │&nbsp;&nbsp; └── 82ea1186a491cd063925d0c2c4f1c056e32ac3<font></font>
│&nbsp;&nbsp; ├── info<font></font>
│&nbsp;&nbsp; └── pack<font></font>
└── refs<font></font>
    ├── heads<font></font>
    │&nbsp;&nbsp; └── master<font></font>
    └── tags<font></font>
<font></font>
12 directories, 18 files<font></font>
[dev1@server proj2]$ ls -l objects/75/dcd269e04852ce2f683b9eb41ecd6030c8c841<font></font>
-r--r--r--. 1 dev1 dev1 54 Jun 20 14:34 objects/75/dcd269e04852ce2f683b9eb41ecd6030c8c841<font></font>
[dev1@server proj2]$</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更をGitサーバーにアップロードすると、追加のファイルとディレクトリが作成され、同時にアップロードを実行したユーザーが所有者になります。</font><font style="vertical-align: inherit;">ただし、これらのファイルとディレクトリのグループは、このユーザーのメイングループ、つまり、ユーザーdev1のグループdev1とユーザーdev2のグループdev2にも対応しています（開発ユーザーのメイングループを変更しても、複数のプロジェクトでどのように作業するのですか？）。</font><font style="vertical-align: inherit;">この場合、ユーザーdev2は、ユーザーdev1によって作成されたファイルを変更できません。これには、機能違反が伴います。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux chown-通常のユーザーによるファイルの所有者の変更</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルの所有者はその所有権を変更できません。</font><font style="vertical-align: inherit;">しかし、彼は自分に属するファイルのグループを変更でき、このファイルは、同じグループに属する他のユーザーが変更できるようになる場合があります。</font><font style="vertical-align: inherit;">これが必要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gitフックの使用</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フックの作業ディレクトリは、プロジェクトのルートディレクトリです。</font><font style="vertical-align: inherit;">フックは、プッシュを実行するユーザーの下で実行される実行可能ファイルです。</font><font style="vertical-align: inherit;">これを知っていれば、計画を実行できます。</font></font><br>
<br>
<pre><code class="bash hljs">[dev1@server proj2]$ mv hooks/post-update{.sample,}<font></font>
[dev1@server proj2]$ sed -i <span class="hljs-string">'2,$ s/^/#/'</span> hooks/post-update<font></font>
[dev1@server proj2]$ cat &lt;&lt;&lt; <span class="hljs-string">'find . -group $(whoami) -exec chgrp proj2 '</span><span class="hljs-string">"'"</span><span class="hljs-string">'{}'</span><span class="hljs-string">"'"</span><span class="hljs-string">' \;'</span> &gt;&gt; hooks/post-update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらかだけ </font></font><br>
<br>
<pre><code class="bash hljs">vi hooks/post-update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントマシンに戻ります。</font></font><br>
<br>
<pre><code class="dos hljs"><span class="hljs-function">C:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">echo</span> "<span class="hljs-title">dev1</span> 3<span class="hljs-title">rd</span> <span class="hljs-title">line</span>" &gt;&gt; <span class="hljs-title">test1.txt</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">commit</span> -<span class="hljs-title">am</span> "3<span class="hljs-title">rd</span> <span class="hljs-title">from</span> <span class="hljs-title">dev1</span>, <span class="hljs-title">testing</span> <span class="hljs-title">server</span> <span class="hljs-title">hook</span>"
[<span class="hljs-title">master</span> <span class="hljs-title">b045e22</span>] 3<span class="hljs-title">rd</span> <span class="hljs-title">from</span> <span class="hljs-title">dev1</span>, <span class="hljs-title">testing</span> <span class="hljs-title">server</span> <span class="hljs-title">hook</span>
 1 <span class="hljs-title">file</span> <span class="hljs-title">changed</span>, 1 <span class="hljs-title">insertion</span>(+)

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">push</span> <span class="hljs-title">origin</span> <span class="hljs-title">master</span>
<span class="hljs-title">dev1:dev1</span>@10.1.1.11'<span class="hljs-title">s</span> <span class="hljs-title">password</span>:
   <span class="hljs-title">d22c66e</span>..<span class="hljs-title">b045e22</span>  <span class="hljs-title">master</span> -&gt; <span class="hljs-title">master</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gitサーバーで、コミット後、フック更新後スクリプトの操作を確認します。 </font></font><br>
<br>
<pre><code class="bash hljs">[dev1@server proj2]$ find . ! -group proj2
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -空です。すべて元気です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2番目の開発者をGitに接続する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の開発者の作業を真似します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアント上</font></font><br>
<br>
<pre><code class="dos hljs"><span class="hljs-function">C:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">remote</span> <span class="hljs-title">remove</span> <span class="hljs-title">origin</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">remote</span> <span class="hljs-title">add</span> <span class="hljs-title">origin</span> "<span class="hljs-title">ssh</span>://<span class="hljs-title">dev2</span>@10.1.1.11/<span class="hljs-title">var</span>/<span class="hljs-title">gitservertest</span>/<span class="hljs-title">proj2</span>"

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">echo</span> "!!! <span class="hljs-title">dev2</span> <span class="hljs-title">added</span> <span class="hljs-title">this</span>" &gt;&gt; <span class="hljs-title">test1.txt</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">echo</span> "!!! <span class="hljs-title">dev2</span> <span class="hljs-title">wrote</span>" &gt; <span class="hljs-title">test2.txt</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">add</span> <span class="hljs-title">test2.txt</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">commit</span> -<span class="hljs-title">am</span> "<span class="hljs-title">dev2</span> <span class="hljs-title">added</span> <span class="hljs-title">to</span> <span class="hljs-title">test1</span> <span class="hljs-title">and</span> <span class="hljs-title">created</span> <span class="hljs-title">test2</span>"
[<span class="hljs-title">master</span> 55<span class="hljs-title">d49a6</span>] <span class="hljs-title">dev2</span> <span class="hljs-title">added</span> <span class="hljs-title">to</span> <span class="hljs-title">test1</span> <span class="hljs-title">and</span> <span class="hljs-title">created</span> <span class="hljs-title">test2</span>
 2 <span class="hljs-title">files</span> <span class="hljs-title">changed</span>, 2 <span class="hljs-title">insertions</span>(+)
 <span class="hljs-title">create</span> <span class="hljs-title">mode</span> 100644 <span class="hljs-title">test2.txt</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">push</span> <span class="hljs-title">origin</span> <span class="hljs-title">master</span>
<span class="hljs-title">dev2</span>@10.1.1.11'<span class="hljs-title">s</span> <span class="hljs-title">password</span>:
   <span class="hljs-title">b045e22</span>..55<span class="hljs-title">d49a6</span>  <span class="hljs-title">master</span> -&gt; <span class="hljs-title">master</span>
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、サーバー上で...</font></font><br>
<br>
<pre><code class="bash hljs">[dev1@server proj2]$ find . ! -group proj2
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -再び空になり、すべてが機能します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitプロジェクトの削除とGitサーバーからのプロジェクトのダウンロード</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度、すべての変更が保存されていることをもう一度確認できます。</font></font><br>
 <br>
<pre><code class="dos hljs"><span class="hljs-function">C:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">rd</span> /<span class="hljs-title">S</span> /<span class="hljs-title">Q</span> .
      ,       .</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -Gitプロジェクトを削除するには、ディレクトリを完全に消去します。</font><font style="vertical-align: inherit;">このコマンドの現在のディレクトリを削除することは不可能なので、生成されたエラーに我慢しますが、この動作が必要です。</font></font><br>
<br>
<pre><code class="dos hljs"><span class="hljs-function">C:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">dir</span>
   <span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>

21.06.2019  08:43    &lt;<span class="hljs-title">DIR</span>&gt;          .
21.06.2019  08:43    &lt;<span class="hljs-title">DIR</span>&gt;          ..

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">clone</span> <span class="hljs-title">ssh</span>://<span class="hljs-title">dev2</span>@10.1.1.11/<span class="hljs-title">var</span>/<span class="hljs-title">gitservertest</span>/<span class="hljs-title">proj2</span>
<span class="hljs-title">Cloning</span> <span class="hljs-title">into</span> '<span class="hljs-title">proj2</span>'...
<span class="hljs-title">dev2</span>@10.1.1.11'<span class="hljs-title">s</span> <span class="hljs-title">password</span>:

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>&gt;<span class="hljs-title">cd</span> <span class="hljs-title">proj2</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>&gt;<span class="hljs-title">dir</span>
   <span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>

21.06.2019  08:46    &lt;<span class="hljs-title">DIR</span>&gt;          .
21.06.2019  08:46    &lt;<span class="hljs-title">DIR</span>&gt;          ..
21.06.2019  08:46               114 <span class="hljs-title">test1.txt</span>
21.06.2019  08:46                19 <span class="hljs-title">test2.txt</span>
<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>&gt;<span class="hljs-title">type</span> <span class="hljs-title">test1.txt</span>
"<span class="hljs-title">test</span> <span class="hljs-title">dev1</span> <span class="hljs-title">to</span> <span class="hljs-title">proj2</span>"
"<span class="hljs-title">dev1</span> <span class="hljs-title">added</span> <span class="hljs-title">some</span> <span class="hljs-title">omre</span>"
"<span class="hljs-title">dev1</span> 3<span class="hljs-title">rd</span> <span class="hljs-title">line</span>"
"!!! <span class="hljs-title">dev2</span> <span class="hljs-title">added</span> <span class="hljs-title">this</span>"

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>&gt;<span class="hljs-title">type</span> <span class="hljs-title">test2.txt</span>
"!!! <span class="hljs-title">dev2</span> <span class="hljs-title">wrote</span>"</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitでのアクセスの共有</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Gitを介して2番目の開発者が作業していないProj1プロジェクトにアクセスできないようにします。</font></font><br>
<br>
<pre><code class="dos hljs"><span class="hljs-function">C:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">remote</span> <span class="hljs-title">remove</span> <span class="hljs-title">origin</span>

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">remote</span> <span class="hljs-title">add</span> <span class="hljs-title">origin</span> "<span class="hljs-title">ssh</span>://<span class="hljs-title">dev2</span>@10.1.1.11/<span class="hljs-title">var</span>/<span class="hljs-title">gitservertest</span>/<span class="hljs-title">proj1</span>"

<span class="hljs-title">C</span>:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">push</span> <span class="hljs-title">origin</span> <span class="hljs-title">master</span>
<span class="hljs-title">dev2</span>@10.1.1.11'<span class="hljs-title">s</span> <span class="hljs-title">password</span>:
<span class="hljs-title">fatal</span>: '/<span class="hljs-title">var</span>/<span class="hljs-title">gitservertest</span>/<span class="hljs-title">proj1</span>' <span class="hljs-title">does</span> <span class="hljs-title">not</span> <span class="hljs-title">appear</span> <span class="hljs-title">to</span> <span class="hljs-title">be</span> <span class="hljs-title">a</span> <span class="hljs-title">git</span> <span class="hljs-title">repository</span>
<span class="hljs-title">fatal</span>: <span class="hljs-title">Could</span> <span class="hljs-title">not</span> <span class="hljs-title">read</span> <span class="hljs-title">from</span> <span class="hljs-title">remote</span> <span class="hljs-title">repository</span>.

<span class="hljs-title">Please</span> <span class="hljs-title">make</span> <span class="hljs-title">sure</span> <span class="hljs-title">you</span> <span class="hljs-title">have</span> <span class="hljs-title">the</span> <span class="hljs-title">correct</span> <span class="hljs-title">access</span> <span class="hljs-title">rights</span>
<span class="hljs-title">and</span> <span class="hljs-title">the</span> <span class="hljs-title">repository</span> <span class="hljs-title">exists</span>.</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセスを許可する</font></font><br>
<br>
<pre><code class="bash hljs">[root@server ~]<span class="hljs-comment"># usermod -aG proj1 dev2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、すべてが機能します。</font></font><br>
<br>
<pre><code class="dos hljs"><span class="hljs-function">C:\<span class="hljs-title">gittest</span>\<span class="hljs-title">proj2</span>&gt;<span class="hljs-title">git</span> <span class="hljs-title">push</span> <span class="hljs-title">origin</span> <span class="hljs-title">master</span>
<span class="hljs-title">dev2</span>@10.1.1.11'<span class="hljs-title">s</span> <span class="hljs-title">password</span>:
<span class="hljs-title">To</span> <span class="hljs-title">ssh</span>://10.1.1.11/<span class="hljs-title">var</span>/<span class="hljs-title">gitservertest</span>/<span class="hljs-title">proj1</span>
 * [<span class="hljs-title">new</span> <span class="hljs-title">branch</span>]      <span class="hljs-title">master</span> -&gt; <span class="hljs-title">master</span></span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加情報</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ファイルとディレクトリの作成時にデフォルトの権限に問題がある場合は、CentOSで次のコマンドを使用できます。</font></font><br>
<br>
<pre><code class="bash hljs">setfacl -Rd -m o::5 -m g::7 /var/gitservertest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、記事では小さな便利なものに出くわすことができます：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Linuxでディレクトリツリーを構築する方法</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> アドレスの範囲を特定の行からファイルの末尾に転送するためにsedをどのように転送するか、つまり、最初の行を除くすべての行でsedを置き換える</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Linuxで検索語を逆転させる方法</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Linuxシェルで単一の行を介して複数の行をループする方法</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bashで単一引用符をエスケープする方法</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Windowsコマンドラインですべての内容を含むディレクトリを削除する方法</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bash mvを使用して、再度書き直さずにファイルの名前を変更する方法</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご清聴ありがとうございました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja457040/index.html">フリーランサーとしてより多くを行い、モチベーションを失わない方法</a></li>
<li><a href="../ja457042/index.html">複数のスレッドでのツリーウォーク</a></li>
<li><a href="../ja457050/index.html">Facebook Libraを最初に見る</a></li>
<li><a href="../ja457052/index.html">月額100ドルでWeb分析インフラストラクチャを設定する方法</a></li>
<li><a href="../ja457054/index.html">広告指標の辞書。CTR、CPI、CPM、CPC、CR</a></li>
<li><a href="../ja457058/index.html">2019年にGoogleとYandexのインプレッション結果をクリック数に変換する</a></li>
<li><a href="../ja457060/index.html">iOSライター向けの3つのビデオ</a></li>
<li><a href="../ja457062/index.html">スターシティの宇宙飛行士訓練センター</a></li>
<li><a href="../ja457064/index.html">モジュールの質問へ</a></li>
<li><a href="../ja457066/index.html">Как доработали робота FEDOR и кресло для полета на МКС</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>