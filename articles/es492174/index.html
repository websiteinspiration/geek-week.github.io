<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüë©‚Äçüëß‚Äçüëß ü§≥üèΩ ‚õµÔ∏è Monitor inal√°mbrico de humedad del suelo de bricolaje üöó üàµ üé•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬°Saludos a todos los lectores de Habr! Hoy quiero compartir con ustedes mi nuevo proyecto: un sensor inal√°mbrico de humedad del suelo, construido sobr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Monitor inal√°mbrico de humedad del suelo de bricolaje</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492174/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Saludos a todos los lectores de Habr! Hoy quiero compartir con ustedes mi nuevo proyecto: un sensor inal√°mbrico de humedad del suelo, construido sobre la base del conocido m√≥dulo de humedad del suelo con aliexpress. El nuevo sensor es una continuaci√≥n l√≥gica de mi primer proyecto de bricolaje sobre este tema. Pero en la nueva implementaci√≥n, este ya no es un m√≥dulo arduino, sino un dispositivo completo con su propio estuche. Entonces, gachas del hacha, ¬°segunda parte! :)</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k9/ea/gd/k9eagdijc2lxr-garqi6eooxuxm.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√≥dulo de medici√≥n de humedad del suelo chino se basa en un temporizador 555. El m√©todo de medici√≥n es capacitivo. Para mi proyecto, necesitaba una versi√≥n del m√≥dulo con el regulador de voltaje XC6206P332 instalado a 3.3V, que en el futuro tendr√° que ser retirado de la placa del m√≥dulo. El hecho es que en tales versiones usamos una modificaci√≥n del temporizador TLC555 con un umbral inferior para la fuente de alimentaci√≥n de 2V. En las versiones sin estabilizador, los temporizadores NE555 se usan con un umbral de potencia inferior de 5V. Pero en cualquier caso, lo que es m√°s f√°cil de comprar para repetir este proyecto es el negocio de un repetidor. En la primera opci√≥n, soldamos el regulador de voltaje, en la segunda cambiamos el temporizador, por ejemplo a uno como este: LMC555 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hoja de datos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) trabajando incluso desde 1.5V. Para el m√≥dulo inal√°mbrico para el sensor de humedad del suelo chino, eleg√≠ un m√≥dulo de radio de EBYTE E73C en el que est√° instalado el chip nRF52840. El argumento era el precio del m√≥dulo y la cantidad disponible de estos m√≥dulos en mis reservas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/c4/3t/e4c43tfn22ihs1-ywelmsoikjwq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√≥dulo inal√°mbrico result√≥ ser muy simple, LED RGB, un par de botones, un transistor de efecto de campo, una bater√≠a. Incluso la soldadura para principiantes m√°s inexperta puede ensamblar dicho dispositivo. En el sensor de humedad, adem√°s de quitar el estabilizador de voltaje, tambi√©n es necesario soldar el conector y soldar el enchufe macho 3P en su lugar, paso 2.54 mm. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las dimensiones de la placa resultaron ser ligeramente m√°s peque√±as que en el primer proyecto: 42x29 mm, determinadas por el tama√±o del soporte de la bater√≠a.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/oq/sj/twoqsjaebwgnyxb9xl1lzao174m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El caso fue impreso en mi impresora SLA ANYCUBIC dom√©stica. El tiempo de impresi√≥n de las piezas es del orden de un par de horas. El posterior procesamiento posterior tard√≥ aproximadamente media hora. El costo de la resina polim√©rica gastada es de ~ 100r. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consumo en modo reposo - 4.7mA, en modo transmisi√≥n 8mA. El intervalo de medici√≥n es variable, paso 1 minuto. Tiempo de medici√≥n 50 ms (5 mediciones en el programa de prueba), consumo durante la medici√≥n ~ 1 mA. Tambi√©n mide la temperatura del chip, mide el nivel de la bater√≠a. Transferencia de datos al controlador UD a trav√©s de la red Mysensors, transferencia de datos al controlador UD a trav√©s de la red Zigbee. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de los programas de prueba est√° en mi Github. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo de trabajo en la red Mysensors y Mazhordomo UD. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4t/cx/xc/4tcxxc4zmsos7jw_bpb0k_rojc4.png"><br>
<br>
<img src="https://habrastorage.org/webt/lg/ni/c8/lgnic80mcvhmva1ifxmjr_afluy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo de trabajo en la red ZigBee y Mazhordomo UD</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ev/-q/bv/ev-qbvfynpoemmo0w5l7iijqnvw.png"><br>
<br>
<img src="https://habrastorage.org/webt/dh/m6/yh/dhm6yhm6l7o6btdqyfhq2onmlpo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de configuraci√≥n del convertidor en el m√≥dulo zigbee2mqtt para el sensor de humedad (a√∫n no estoy seguro de que sea la soluci√≥n correcta). </font></font><br>
<br>
<pre><code class="javascript hljs">{
        <span class="hljs-attr">zigbeeModel</span>: [<span class="hljs-string">'nrf52840.ru_PWS'</span>],
        <span class="hljs-attr">model</span>: <span class="hljs-string">'nrf52840.ru_PWS'</span>,
        <span class="hljs-attr">vendor</span>: <span class="hljs-string">'nrf52840.ru'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">'Plant watering sensor'</span>,
        <span class="hljs-attr">supports</span>: <span class="hljs-string">'humidity'</span>,
		<span class="hljs-attr">fromZigbee</span>: [fz.humidity2, fz.battery_PWS],
        <span class="hljs-attr">toZigbee</span>: [],
		<span class="hljs-attr">meta</span>: {<span class="hljs-attr">configureKey</span>: <span class="hljs-number">1</span>},
        <span class="hljs-attr">configure</span>: <span class="hljs-keyword">async</span> (device, coordinatorEndpoint) =&gt; {
            <span class="hljs-keyword">const</span> endpoint = device.getEndpoint(<span class="hljs-number">10</span>);
			<span class="hljs-keyword">await</span> bind(endpoint, coordinatorEndpoint, [<span class="hljs-string">'msRelativeHumidity'</span>, <span class="hljs-string">'genPowerCfg'</span>]);
            <span class="hljs-keyword">await</span> configureReporting.humidity(endpoint);
			<span class="hljs-keyword">await</span> configureReporting.batteryVoltage(endpoint);<font></font>
        },<font></font>
    },<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/vs/iv/6f/vsiv6fyhbwc0ns9spmifwe1a5g8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El firmware de prueba fue escrito por uno de los participantes en nuestra comunidad de bricolaje: Lenz, aqu√≠ est√° su </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GIthub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El costo de los componentes que tuvieron que agregarse al medidor de humedad chino fue de aproximadamente 400-500 rublos. </font><font style="vertical-align: inherit;">En mi opini√≥n, es bastante bueno. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Video de operaci√≥n del sensor</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/LTzc0X-ESm4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foto del sensor</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/pw/is/l2/pwisl2sjbuwgpytlnqtttmikphc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/oq/12/oi/oq12oihawzfhxgkf9topgaaohgq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/da/sk/h7/daskh7kfgzsgkqsgytolve37ixg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/yo/nu/34/yonu34vue48s2vdub5vlil9fdne.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/rv/kd/va/rvkdvaawgrkepxu2tb5ho5dmw4c.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/z2/ez/pg/z2ezpg7vbscf6w68ucainaan0b0.jpeg"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Planes adicionales para este proyecto. Me gustar√≠a reemplazar el MK con algo m√°s simple, por ejemplo, con nRF52810 o nRF52811, pero todo depender√° del precio, lo m√°s probable es que tenga que abandonar los m√≥dulos de radio y simplemente hacerlo en un chip. Tal vez piense en agregar un timbre, es muy probable que sea el estabilizador de potencia, ya que ahora debe tener en cuenta el voltaje de suministro al medir. Lleve la versi√≥n Zigbee a un estado estable, cree la versi√≥n BLE, cree una aplicaci√≥n de visualizaci√≥n m√≥vil. En general, definitivamente habr√° algo m√°s. </font></font><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github de este proyecto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si est√° interesado en este proyecto, le propongo ir al grupo de telegramas, siempre habr√° asistencia para dominar el protocolo Maysensors, Zigbee, BLE en nRF5, ayudar√°n a dominar la programaci√≥n nRF52 en Arduino IDE y no solo en √©l. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chat de carrito - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispositivos @DIY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chat de carro - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@MySensors</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492162/index.html">Interfaces oculares. Informar en Yandex</a></li>
<li><a href="../es492164/index.html">Puerta de entrada al cielo, o la ciudad del futuro.</a></li>
<li><a href="../es492166/index.html">Widgets en Android. Una caracter√≠stica rara para descubrir</a></li>
<li><a href="../es492168/index.html">Trabajo frontal en el desarrollo de back-end de los portales m√°s grandes en software de c√≥digo abierto: compartir experiencias</a></li>
<li><a href="../es492172/index.html">Copia de seguridad delgada de sistemas de archivos Linux. C√≥mo crear copias de trabajo de un DBMS MySQL de tres terabytes en 20 segundos</a></li>
<li><a href="../es492178/index.html">Una ruta de siete mil p√≠xeles: evoluci√≥n de las resoluciones de monitor y nuestros requisitos</a></li>
<li><a href="../es492182/index.html">Fundamentos de seguridad de la informaci√≥n en los equipos de Microsoft</a></li>
<li><a href="../es492184/index.html">Forbes habl√≥ con representantes del mercado sobre la preinstalaci√≥n obligatoria del software ruso. Seleccionamos los puntos principales</a></li>
<li><a href="../es492186/index.html">Popularmente sobre art√≠culos en ingl√©s</a></li>
<li><a href="../es492190/index.html">SaaS ruso 2019 - resultados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>