<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüåæ üç• ‚úäüèº Selenium WebDriver at the service of the developer üëà üò∫ üé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Decoding of Dmitry Kostichev‚Äôs report with Backend-stories // Video version inside 
 
 If you suddenly need to integrate on a third-party Internet res...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Selenium WebDriver at the service of the developer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alfa/blog/504886/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decoding of Dmitry Kostichev‚Äôs report with Backend-stories // Video version inside </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you suddenly need to integrate on a third-party Internet resource and have no time to figure it out, Selenium will come to the rescue. </font><font style="vertical-align: inherit;">Dmitry Kostichev told on the example of his project how to automate the work in the browser without leaving your service.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hello everybody. My name is Dmitry and today I will share my experience of using Selenium in Backend development. What is this for? Selenium is needed to automate interaction with some Internet resources, to level out human factors filling in some data, etc. For development, this may be necessary in such cases when, for example, there is no API on the Internet resource and so on. And on the example of my project, the task was to fill in the client data (before that the service had to correctly prepare all the information) and register them on this site, in this case MasterCard.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/wd/pj/4c/wdpj4cshsqqjyvw3xc77kmq3bic.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Upon further consideration of this site, it was revealed that there is no api to which we can reach out and do everything. All processing is performed in JS-scripts, in which nothing is clear and the data is all encoded. The decision was made - to try Selenium for these purposes, that is, we will fasten to Selenium our entire service, which will carry out this registration at some definite moment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the end, what is Selenium and how to work with it? The Selenium project consists of a library that communicates with the web driver interface for a specific browser. A list of available libraries and browsers is shown on the slide. And now I will show how it roughly works on my project. </font></font><br>
<br>
<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Watch a screencast</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or a detailed video at the end of the post.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now the service will generate a file, immediately upload it to this site and check whether everything has been successfully registered. </font><font style="vertical-align: inherit;">Here, in fact, he glues, loads and so on. </font><font style="vertical-align: inherit;">And now he will probably jump on the fact that everything will be successful. </font><font style="vertical-align: inherit;">Automation is fast enough and does not require any large resources. </font><font style="vertical-align: inherit;">Everything, apparently, was perfectly registered. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to cook all this? </font><font style="vertical-align: inherit;">The Selenium library has such basic commands as:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creating an Instance web driver for a specific browser;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Links clicks;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Work with elements: clicks, etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The web driver allows you to receive sessions and cookies as in a normal browser. You can also change them and customize for yourself. You can also execute js scripts on the page. There is a library that extends this functionality of Selenium itself, called Selenide. Its main feature is to hide the creation of Instance drivers. As an example, we see that we simply call the open command, give some kind of link and the browser is already starting, there is no need to configure anything. And the library expands the work with elements, some additional presets. It all looks convenient, you can quickly figure it out and use it all.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When working with online resources, and ultimately with Selenium, there are some design patterns. And one of them is page objects. Its essence lies in the fact that we describe all these elements in a certain class. And then we can reuse it and it looks easier. Here's something like this: we call the open command, give the page objects class and then we can use all its methods, for example, working with elements. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ll/b9/t0/llb9t0lu5zz2xydy1uq96zqh7ig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We search for elements by the DOM model of the HTML page by selectors such as xpath, css and others. Their main differences, for example between xpath and css, are that the xpath can go ‚Äúdeep‚Äù, as well as up and down. And css, on the contrary, is only down. That is, these are the most used selectors.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gv/hn/ah/gvhnahxm1pi2zhrkaytqbmkxxvm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ultimately, we need a browser directly, which Selenoid can help us directly. In essence, it is a framework that controls the creation and modification of these containers with browsers. But it is designed more for loaded systems where these browsers are created in large numbers. And in our situation, this is not much needed, but only use the container itself. And now I will show how this should work already on the server.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, the interaction of the page looks something like this, it is a fairly linear data processing. In this case, I divided into steps - transitions to pages. This is where data is populated and, directly, downloaded by files. In principle, everything is quite simple. This is what a pageobject-class looks like, quite reminiscent of a DTO. We simply describe the elements, for example, here in the current case of PCSS Selectum. This is the syntax of Selenide.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h4/kl/fw/h4klfwrq4elb5on7g9z5whhkfoa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For this to work, we need a description of the Remote driver to connect to the docker container. The main settings that you need to get there are the browser that we will use and, in fact, the resolution and other important lines for the browser. But in order to work with the docker container, you will also need settings such as headless mode. That is, in its current form, it will spin on the server. This mode disables the graphics in the browser, so it will work faster and take up less resources.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Further it will be no Sandbox, which is disabled by Chromium security in this case, and it will be possible to execute your own code, JS or other. The third parameter is needed in order for Chromium to work normally on unix machines, correctly record tempo files. And the fourth, in fact, is needed in order for us to upload files. And most importantly, the Remote driver has a flag that allows you to download a file from the local storage where the application is running, already through the Remove driver.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/on/-d/baon-d0gi-xpyg4yxwdb5vfkd-y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I will show how it works with the docker container. Download the docker container and the application itself. It will also be launched in approximately the same way, that is, in principle, there will be nothing new. Only here we will see the interaction in some sort of logs. In principle, they can also be monitored, work with them, and so on. Therefore, you can understand the interaction that is happening. This is the output from the docker container with Chromium directly where the browser is.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nm/bi/cn/nmbicntdhkeijq7qcffa4c7r5fk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In principle, everything works perfectly with the docker container. Also, everything is checked and registration is successfully completed. Further, what general problems could be encountered in such an approach? I had not so much a problem as ignorance. File transfers in the docker container, as usual, do everything - the turn of volume. But in this case, if you still want to run locally, you need to have two configurations for the project, but, as it turned out, the Remote driver can be configured through the flag. He can transfer this file directly through himself, and no additional gestures are needed.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You will also have to follow the page with which we work - an online resource. </font><font style="vertical-align: inherit;">Because, in my case, this is another system, to which no one has a relationship from my team, and this also needs to be monitored, monitored by logs, and so on. </font><font style="vertical-align: inherit;">As with the browser, it is constantly updated, you need to monitor it, support may drop. </font><font style="vertical-align: inherit;">Well, in principle, you can somehow configure the logs and there will be no problems. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the end, how much easier has it become? </font><font style="vertical-align: inherit;">It seemed to me that I was able to solve the problem of interacting with this site much faster than if I knew the js code. </font><font style="vertical-align: inherit;">That is, to understand Selenium and the interaction can be faster than with the fact that the data is encoded and it is not known how to transcode it back. </font><font style="vertical-align: inherit;">The main thing is speed in development. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Report video - from 16.30</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VvAkcjimXK0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en504866/index.html">Investigation of information security incidents in the wild: unexpected sources of information</a></li>
<li><a href="../en504868/index.html">Home Internet Gateway. Initial setup of a 6-port minicomputer on Ubuntu Server 20.04 LTS</a></li>
<li><a href="../en504878/index.html">109 free courses in Data Science</a></li>
<li><a href="../en504880/index.html">Development, optimization and release of Synthety games on Unity</a></li>
<li><a href="../en504884/index.html">Dangerous Peripherals: Understanding Thunderspy</a></li>
<li><a href="../en504888/index.html">"Calm, only calm!" or less worry</a></li>
<li><a href="../en504890/index.html">Return value from powershell invoke-command to SQL-Server Agent</a></li>
<li><a href="../en504894/index.html">GUI in Russian, or VKS terminal do it yourself</a></li>
<li><a href="../en504902/index.html">Top 9 Trends in Automated Testing in 2020</a></li>
<li><a href="../en504906/index.html">PHP - what is the niche of the language and will PHP8 help solve pressing problems (spoiler: IMHO not)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>