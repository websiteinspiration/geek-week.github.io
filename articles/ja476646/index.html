<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👘 🧓🏿 😣 werfでの3ウェイマージ：Helmを「ステロイド」としてKubernetesにデプロイ 🎧 🛌 👨🏻‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私たちだけでなく）私たちが待ち望んでいたことが起こりました：アプリケーションを構築してKubernetesに配信するためのオープンソースユーティリティであるwerfは、3-way-mergeパッチを使用した変更の適用をサポートします！これに加えて、これらのリソースを再作成することなく、既存のK8リソ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>werfでの3ウェイマージ：Helmを「ステロイド」としてKubernetesにデプロイ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/476646/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちだけでなく）私たちが待ち望んでいたことが起こりました：</font><font style="vertical-align: inherit;">アプリケーションを構築してKubernetesに配信するためのオープンソースユーティリティである</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werfは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、3-way-mergeパッチを使用した変更の適用をサポートします！</font><font style="vertical-align: inherit;">これに加えて、これらのリソースを再作成することなく、既存のK8リソースをHelmリリースに採用することが可能になりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/os/yc/op/osycopyy-kknbg7fnwuf8cjohxi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それが非常に短い場合は、設定し</font></font><code>WERF_THREE_WAY_MERGE=enabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。「</font></font><code>kubectl apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現状のまま」の</font><font style="vertical-align: inherit;">デプロイメントが得られ、</font><font style="vertical-align: inherit;">Helm 2の既存のインストールと互換性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、理論から始めましょう。一般的に3ウェイマージパッチとは何か、人々はどのようにして自分の世代にアプローチし、なぜKubernetesベースのインフラストラクチャによるCI / CDプロセスで重要なのですか？</font><font style="vertical-align: inherit;">その後、werfの3ウェイマージとは何か、デフォルトで使用されるモードとその管理方法を見てみましょう。</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3方向マージパッチとは何ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは、KubernetesのYAMLマニフェストに記述されているリソースをロールアウトするタスクから始めましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リソースを操作するために、Kubernetes APIには、作成、パッチ適用、置換、削除という基本的な操作が用意されています。</font><font style="vertical-align: inherit;">彼らの助けを借りて、クラスターへのリソースの便利な継続的なロールアウトを構築する必要があると想定されています。</font><font style="vertical-align: inherit;">どうやって？</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令型のkubectlチーム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesでオブジェクトを管理する最初のアプローチは、命令的なkubectlコマンドを使用して、これらのオブジェクトを作成、変更、削除することです。</font><font style="vertical-align: inherit;">簡単に言えば：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド</font></font><code>kubectl run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">DeploymentまたはJobを実行できます。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl run --generator=deployment/apps.v1 DEPLOYMENT_NAME --image=IMAGE</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド</font></font><code>kubectl scale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-レプリカの数を変更します。</font></font><br>
<br>
<pre><code class="bash hljs">kubectl scale --replicas=3 deployment/mysql</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなアプローチは、一見すると便利に思えるかもしれません。</font><font style="vertical-align: inherit;">ただし、問題があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動化する</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のは難しい</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をGit </font><font style="vertical-align: inherit;">に</font><b><font style="vertical-align: inherit;">反映するには</font></b><font style="vertical-align: inherit;">どうすればよい</font><font style="vertical-align: inherit;">ですか？</font><font style="vertical-align: inherit;">クラスターで発生する変更を確認するにはどうすればよいですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再起動時に構成の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再現性</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を確保</font><b><font style="vertical-align: inherit;">するには</font></b><font style="vertical-align: inherit;">どうすればよい</font><font style="vertical-align: inherit;">ですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチは、アプリケーションコードとインフラストラクチャをコードとして保存するのに適していないことは明らかです（IaC、または</font><font style="vertical-align: inherit;">より近代的なオプションとしての</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitOpsで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さえ</font><font style="vertical-align: inherit;">、Kubernetesエコシステムで人気を得ています）。</font><font style="vertical-align: inherit;">したがって、これらのチームはkubectlでこれ以上開発されませんでした。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成、取得、置換、および削除操作</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成では、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてが簡単です。マニフェストを</font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kube apiを使用</font><font style="vertical-align: inherit;">してオペレーションに送信し</font><font style="vertical-align: inherit;">、リソースが作成されます。マニフェストのYAML表現はGitに保存でき、コマンドを使用して作成できます</font></font><code>kubectl create -f manifest.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">除去</font></b><font style="vertical-align: inherit;">単純すぎる：同じで代用</font><font style="vertical-align: inherit;">チームにGitリポジトリから</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
この操作</font><font style="vertical-align: inherit;">により、リソースを再作成することなく、リソースの構成を新しい構成に完全に置き換えることができます。これは、リソースに変更を加える前に、オペレーションの現在のバージョンをリクエストし、</font><font style="vertical-align: inherit;">それを変更してオペレーションを更新する</font><font style="vertical-align: inherit;">ことが論理的であることを意味し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。 kube apiserver組み込みの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">楽観的ロック</font></a><font style="vertical-align: inherit;">で、操作</font><font style="vertical-align: inherit;">オブジェクトが変更された後、操作</font><font style="vertical-align: inherit;">が機能しません。</font></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><code>manifest.yaml</code><font style="vertical-align: inherit;"></font><code>kubectl delete -f manifest.yaml</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><code>replace</code></b><font style="vertical-align: inherit;"></font><code>get</code><font style="vertical-align: inherit;"></font><code>replace</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>get</code><font style="vertical-align: inherit;"></font><code>replace</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成をGitに保存し、置換を使用して更新するには、操作を実行し、</font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitからの構成を取得して保持</font><font style="vertical-align: inherit;">し、実行する必要</font><font style="vertical-align: inherit;">があり</font></font><code>replace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。定期的に、kubectlはあなたがコマンドを使用することができます</font></font><code>kubectl replace -f manifest.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>manifest.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたがインストールする必要があること、マニフェスト（我々の場合には、隣接）完全に用意されています。ユーザーがマージマニフェストを実装する必要があることは判明しましたが、これは簡単な問題</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ではあり</font></font><code>manifest.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ません。Gitに格納されていますが、オブジェクトを作成するか更新するかを事前に知ることができないこと</font><font style="vertical-align: inherit;">も注目に値し</font><font style="vertical-align: inherit;">ます-これはユーザーソフトウェアがすべきことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">継続的なロールアウトを構築できますか</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成、置換、削除の助けを借りてのみ、コードと便利なCI / CDでGitのインフラストラクチャの構成を保存できますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的に、次のことを実行できます...これを行うに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マニフェストの</font><b><font style="vertical-align: inherit;">マージ操作と、次の</font></b><font style="vertical-align: inherit;">ようなバインディング</font><b><font style="vertical-align: inherit;">を実装する必要があります</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> クラスター内のオブジェクトの存在を確認し、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> リソースの最初の作成を実行し、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 更新または削除します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更新するときは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後から</font><i><font style="vertical-align: inherit;">変更され</font></i><font style="vertical-align: inherit;">ている</font><i><font style="vertical-align: inherit;">可能性が</font></i><font style="vertical-align: inherit;">あることを考慮に入れ</font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、楽観的ロックのケースを自動的に処理する必要があります。更新を繰り返し試行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、kube-apiserverがリソースを更新する別の方法を提供しているときに、ホイールを再発明する理由：</font></font><code>patch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーから説明された問題の一部を削除</font><font style="vertical-align: inherit;">する操作</font><font style="vertical-align: inherit;">？</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッチ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、パッチに取り掛かりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パッチは、Kubernetesの既存のオブジェクトに変更を適用する主要な方法です。</font><font style="vertical-align: inherit;">操作</font></font><code>patch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は次のように機能します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kube-apiserverユーザーは、パッチをJSON形式で送信し、オブジェクトを指定する必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apiserver自体がオブジェクトの現在の状態を処理し、それを目的の形式にします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合の楽観的ロックは必要ありません。</font><font style="vertical-align: inherit;">この操作は置換と比較してより宣言的ですが、最初は逆に思えるかもしれません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法では：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作を使用して、</font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitのマニフェストからオブジェクトを作成し、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用して</font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-オブジェクトはもはや必要とされない場合は削除し、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘルプ</font></font><code>patch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して、オブジェクトを変更し、Gitで説明されている形式にします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これを行うには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正しいパッチを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm 2でのパッチの動作：2ウェイマージ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リリースを初めてインストールするとき、Helmは</font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャートリソース</font><font style="vertical-align: inherit;">に対して操作</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">実行します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各リソースのHelmリリースを更新する場合：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 前のチャートのリソースのバージョンとチャートの現在のバージョンの間のパッチをカウントし、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> このパッチを適用します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つのマニフェストがその作成に参加するため、</font><font style="vertical-align: inherit;">
このようなパッチを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2-way-mergeパッチ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼びます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 以前のリリースのリソースマニフェスト</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 現在のリソースからのリソースのマニフェスト。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
削除すると、</font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前のリリースで宣言されていたが現在のリリースでは宣言されていないリソースに対して、kube apiserverの</font><font style="vertical-align: inherit;">操作</font><font style="vertical-align: inherit;">が呼び出されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ウェイマージパッチを使用するアプローチには問題があります。これは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クラスター内のリソースの実際の状態とGitのマニフェストの非同期化に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つながり</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題の例</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitでは、グラフに、</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deployment </font><font style="vertical-align: inherit;">フィールド</font><font style="vertical-align: inherit;">に値がある</font><font style="vertical-align: inherit;">マニフェストが格納され</font><font style="vertical-align: inherit;">ます</font></font><code>ubuntu:18.04</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー</font></font><code>kubectl edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がこのフィールドの値</font><font style="vertical-align: inherit;">をに</font><font style="vertical-align: inherit;">変更しました</font></font><code>ubuntu:19.04</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャートを再デプロイしても、Helm </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はパッチを生成しません。</font></font></i><font style="vertical-align: inherit;"></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、以前のバージョンのリリースと現在のチャート</font><font style="vertical-align: inherit;">のフィールド</font><font style="vertical-align: inherit;">が同じであるためです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">繰り返し展開した後、</font><font style="vertical-align: inherit;">グラフには書かれていますが、</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残り</font><font style="vertical-align: inherit;">ます。</font></font><code>ubuntu:19.04</code><font style="vertical-align: inherit;"></font><code>ubuntu:18.04</code><font style="vertical-align: inherit;"></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非同期になり、宣言性が失われました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同期リソースとは何ですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に言えば、</font><font style="vertical-align: inherit;">実行中のクラスターのリソースマニフェストとGitからのマニフェストを</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">対応させることは不可能です。</font><font style="vertical-align: inherit;">実際のマニフェストには、サービスの注釈/ラベル、追加のコンテナー、および一部のコントローラーによってリソースに動的に追加および削除されたその他のデータがある可能性があるためです。</font><font style="vertical-align: inherit;">このデータをGitに保持することはできません。</font><font style="vertical-align: inherit;">ただし、Gitで明示的に指定したフィールドには、ロールアウト時に適切な値を取得する必要があります。</font><b><font style="vertical-align: inherit;">同期されたリソースの</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この一般的な</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルールがわかります。リソース</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をロールアウトすると、Gitのマニフェストで明示的に指定された（または以前のバージョンで登録されていたが現在は削除されている）フィールドのみを変更または削除できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3方向マージパッチ</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3-way-mergeパッチ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の主なアイデア</font><font style="vertical-align: inherit;">：作業クラスターのマニフェストの現在のバージョンを考慮して、Gitのマニフェストの最後に適用されたバージョンとGitのマニフェストのターゲットバージョンの間にパッチを生成します。</font><font style="vertical-align: inherit;">最終パッチは、同期されたリソースルールに準拠する必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ターゲットバージョンに追加された新しいフィールドは、パッチを使用して追加されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 最後に適用されたバージョンに以前に存在し、ターゲットフィールドに存在しないフィールドは、パッチを使用してリセットされます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> マニフェストのターゲットバージョンと異なるオブジェクトの現在のバージョンのフィールドは、パッチを使用して更新されます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この原則により、パッチが生成されます</font></font><code>kubectl apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 最後に適用されたマニフェストのバージョンは、オブジェクト自体の注釈に保存されます。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> target-指定されたYAMLファイルから取得、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 現在-稼働中のクラスターから。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論を理解したところで、werfで何をしたかを説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werfに変更を適用する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前は、Helm 2と同様に、werfは2方向マージパッチを使用していました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッチを修復</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいタイプのパッチ（3ウェイマージ）に切り替えるための最初のステップは、いわゆる</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修復パッチ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を導入すること</font><font style="vertical-align: inherit;">でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デプロイ時には、標準の双方向マージパッチが使用されますが、werfは、リソースの実際の状態をGitで記述されたものと同期するパッチをさらに生成します（このようなパッチは、上記と同じ同期リソースルールを使用して作成されます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rassynchronが発生した場合、デプロイメントの最後に、ユーザーは適切なメッセージとパッチを含む警告を受け取ります。これは、リソースを同期された形式にするために適用する必要があります。また、このパッチは特別な注釈で記録されてい</font></font><code>werf.io/repair-patch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。ユーザーの手があるとする</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その使用は必須ではないWERF：このパッチを適用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
修復パッチの生成は、3-wayマージの原則に基づいてパッチの作成を実際にテストできる一時的な手段ですが、これらのパッチを自動的に適用することはありません。</font><font style="vertical-align: inherit;">現時点では、この動作モードはデフォルトで有効になっています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規リリースのみの3方向マージパッチ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2019年12月1日から、werfのベータ版とアルファ版は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、デフォルトで</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本格的な3ウェイマージパッチ</font><b><font style="vertical-align: inherit;">を使用</font></b><font style="vertical-align: inherit;">して、werf経由で公開された新しいHelmリリースにのみ変更を適用します。</font><font style="vertical-align: inherit;">既存のリリースでは、引き続き2方向マージ+修復パッチアプローチを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この操作モードは、</font></font><code>WERF_THREE_WAY_MERGE_MODE=onlyNewReleases</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今すぐ</font><font style="vertical-align: inherit;">設定することで明示的に有効にすることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：この機能はwerfの複数のリリースで登場しました。アルファチャネルではバージョン</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.0.5-alpha.19</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">、ベータチャネルでは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.0.4-beta.20</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">できるようになりました</font></a><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのリリースの3者間マージパッチ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2019年12月15日以降、werfのベータ版とアルファ版はデフォルトで本格的な3方向マージパッチを使用してすべてのリリースに変更を適用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この操作モードは、</font></font><code>WERF_THREE_WAY_MERGE_MODE=enabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今すぐ</font><font style="vertical-align: inherit;">設定することで明示的に有効にすることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動スケーリングリソースをどうするか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesには、HPA（水平）とVPA（垂直）の2種類の自動スケーリングがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
水平は自動的にレプリカの数、垂直-リソースの数を選択します。両方のレプリカとリソース要求の数は、リソースマニフェスト（参照で指定され</font></font><code>spec.replicas</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、または</font></font><code>spec.containers[].resources.limits.cpu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>spec.containers[].resources.limits.memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及び</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題：ユーザーがグラフ上のリソースを構成してリソースまたはレプリカの特定の値を表示し、このリソースに対してオートスケーラーが有効になっている場合、各werfはこれらの値をグラフのマニフェストに記述されている値にリセットします</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題には2つの解決策があります。</font><font style="vertical-align: inherit;">まず、グラフマニフェストで明示的に指定されている自動スケール値を破棄するのが最善です。</font><font style="vertical-align: inherit;">何らかの理由でこのオプションが適切でない場合（たとえば、グラフで初期リソース制限とレプリカの数を設定すると便利なため）、werfは次の注釈を提供します。</font></font><br>
<br>
<ul>
<li> <code>werf.io/set-replicas-only-on-creation=true</code></li>
<li> <code>werf.io/set-resources-only-on-creation=true</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような注釈がある場合、werfは各展開で対応する値をリセットせず、リソースの最初の作成時にのみ設定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HPA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPAの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトドキュメントを参照してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3方向マージパッチの使用を拒否する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーは、環境変数を使用して、werfでの新しいパッチの使用を引き続き禁止できます</font></font><code>WERF_THREE_WAY_MERGE_MODE=disabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020年3月1日以降、この禁止は機能</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しなくなり、3ウェイマージパッチのみを使用できるようになります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werfでのリソースの採​​用</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3ウェイマージパッチで変更を適用する方法を習得することで、Helmリリースのクラスターに存在するリソースの採​​用などの機能をすぐに実装できました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Helm 2には問題があります。最初からこのリソースを再作成しないと、クラスターに既に存在するチャートマニフェストにリソースを追加できません（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃6031</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃3275を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">リリースで既存のリソースを受け入れるようにwerfに教えました。</font><font style="vertical-align: inherit;">これを行うには、（たとえば、を使用して</font></font><code>kubectl edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">動作中のクラスターからリソースの現在のバージョンに注釈を設定します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">"werf.io/allow-adoption-by-release": RELEASE_NAME</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、リソースをチャートに記載する必要があります。対応する名前のリリースのwerfリリースによる次の展開では、既存のリソースがこのリリースに受け入れられ、その管理下に残ります。</font><font style="vertical-align: inherit;">さらに、解放のためにリソースを受け入れるプロセスで、werfは同じ3方向マージパッチと同期されたリソースルールを使用して、リソースの現在の状態を作業クラスターからグラフに記載された状態にします。</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：この設定</font></font><code>WERF_THREE_WAY_MERGE_MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はリソースの採​​用には影響しません。採用の場合は、常に3方向マージパッチが使用されます。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳細は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にあり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論と今後の計画</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事の後で、3ウェイマージパッチとは何か、なぜパッチが適用されたのかが明確になったことを願っています。</font><font style="vertical-align: inherit;">werfプロジェクトの開発の実用的な観点から見ると、それらの実装はHelmのような配置を改善するためのもう1つのステップでした。</font><font style="vertical-align: inherit;">Helm 2を使用するときによく発生する構成同期の問題を忘れることができるようになりました。同時に、Helmリリースに既にアップロードされているKubernetesリソースの採​​用の新しい便利な機能が追加されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goテンプレートの使用など、Helmのようなデプロイメントにはまだいくつかの問題と困難があり、今後も解決していきます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リソースの更新方法と採用に関する情報は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このドキュメントページに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もあり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兜3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数日前</font><font style="vertical-align: inherit;">
に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リリースされ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">た</font><font style="vertical-align: inherit;">価値のある別の発言。Helmの</font><font style="vertical-align: inherit;">新しいメジャーバージョン-v3-も3ウェイマージパッチを使用し、Tillerを削除します。 Helmの新しいバージョンでは、</font><font style="vertical-align: inherit;">既存のインストールを新しいリリースのストレージ形式に変換するために、それらを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Werfは、</font><font style="vertical-align: inherit;">Helm 2の既存のインストールとの互換性を維持しながら</font><font style="vertical-align: inherit;">、Tillerの使用をすでに排除し、3ウェイマージに切り替え、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに多くの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を追加して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">い</font></a><font style="vertical-align: inherit;">ます（移行スクリプトは不要です）。したがって、werfがHelm 3に切り替わるまで、werfユーザーはHelm 3のHelm 2よりも優れた主な利点を失うことはありません（werfにも存在します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、werfをHelm 3コードベースに切り替えることは避けられず、近い将来に発生します。</font><font style="vertical-align: inherit;">おそらくwerf 1.1またはwerf 1.2になります（現時点では、werfのメインバージョンは1.0です。werfバージョン管理デバイスの詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">この間、Helm 3は安定する時間があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> werfの革新に関する一連のメモ：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werfを使用して複雑なHelmチャートを展開する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werfでのmonorepoとmultirepoのサポートと、Docker Registryがそれと何をするのか</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これで、通常のDockerfileを使用してwerfでDockerイメージを構築できます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。」</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WerfはKubernetesのCI / CD向けのツールです（レビューとビデオレポート）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      werf  GitLab CI</a>»;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Helm 3</a>».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476624/index.html">モバイル開発における質の高いパイプライン、パート1：Android</a></li>
<li><a href="../ja476628/index.html">PVS-Studioがクラウドに移行：GitLab CI / CD</a></li>
<li><a href="../ja476636/index.html">1000人以上のユーザーがいるサイズ691 GBのデータベース用にFirebirdとLinuxをチューニングする</a></li>
<li><a href="../ja476640/index.html">総当たり攻撃やDoS攻撃からのZimbra OSEの保護</a></li>
<li><a href="../ja476644/index.html">言語レイヤー</a></li>
<li><a href="../ja476648/index.html">FINOPOLIS 2019でのLenovo</a></li>
<li><a href="../ja476650/index.html">今日の変化する世界における列挙型の場所</a></li>
<li><a href="../ja476654/index.html">私のスペインへの移動</a></li>
<li><a href="../ja476656/index.html">11月26日、モスクワ-Alfa JS MeetUP＃3</a></li>
<li><a href="../ja476658/index.html">ビデオカードを備えたVPS（パート2）：コンピューティング機能</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>