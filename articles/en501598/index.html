<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßúüèæ üì¢ üë®üèæ‚Äçüíº A modest guide to database schemas ü•† üò° üë©üèº‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geometry of Flowers by Mookiezoolook 
 
 For applications that will scale according to traffic and complexity, it is extremely important to initially ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A modest guide to database schemas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/501598/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/al/m2/zoalm23rpnu233blf2nybyz6tk0.jpeg"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geometry of Flowers by Mookiezoolook</font></font></i></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
For applications that will scale according to traffic and complexity, it is extremely important to initially design a competent database scheme. If you make a bad choice, you will have to spend a lot of effort so that this bad template does not spread to services and backend controllers and, finally, to the frontend.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But how to evaluate which circuit is better? And what does ‚Äúbetter‚Äù mean when we talk about database architecture? The</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> team</font><font style="vertical-align: inherit;">invites you to</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> follow the recommendations of Mike Alcha</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a software development consultant. It seems to us that he rather succinctly summarized some principles of competent architecture.</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tg/ed/6j/tged6jbyakg4f0no_up6r9c-9aw.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Director: </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I think we should build an SQL database </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">. </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">Developer (does he even understand what he‚Äôs talking about, or just saw some kind of advertisement in a business magazine? ..): </font></i><i><font style="vertical-align: inherit;">‚Äú </font></i><i><font style="vertical-align: inherit;">What color do you want the database? </font></i><i><font style="vertical-align: inherit;">". </font></i><i><font style="vertical-align: inherit;">Director: </font></i><i><font style="vertical-align: inherit;">‚Äú </font></i><i><font style="vertical-align: inherit;">Perhaps lilac has the most memory </font></i><i><font style="vertical-align: inherit;">. </font></i><i><font style="vertical-align: inherit;">‚Äù</font></i></font><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A few basic tips</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, it‚Äôs important to strive </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for two main things</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When breaking information into tables, all information is stored.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redundancy of storage is minimal.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for the second point: do we want to reduce redundancy just because of a problem with storage size? </font><font style="vertical-align: inherit;">No, we do this mainly because the presence of redundant data leads to </font></font><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inconsistency problems</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> if you do not update all fields representing the same information during the update. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here are some guidelines </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to get closer to good architecture</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use at least third normal form (in which each non-key attribute "must provide information about the key, the complete key, and nothing but the key", according to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the wording</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> of Bill Kent).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create the last line of defense in the form of restrictions.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Never store whole addresses in one field.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Never store the first and last name in one field.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Set conventions for table and field names and stick to them.</font></font></li>
</ol><br>
<i><div style="text-align:center;"><img src="https://habrastorage.org/webt/qu/lx/pr/qulxprdoqnbq5twc8dgw47qewry.jpeg"></div></i><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- What are you working on? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Äú </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimizing this SQL query.‚Äù </font><font style="vertical-align: inherit;">It slows down, and users begin to complain. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And obscene language in the comments is </font></font></i><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">required</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for optimization? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you saw the </font></font></i><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original</font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> code, you would not ask. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's consider these recommendations in more detail.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Use at least a third normal form</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The database architecture can be divided into the following categories:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first normal form.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second normal form.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Third normal form.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The normal form of Boyce-Codd.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These categories represent a classification by quality. </font><font style="vertical-align: inherit;">We will briefly review all categories and see why at least a third normal form is needed.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First normal form</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the first normal form, each value of each column of each table in the database must be atomic. </font><font style="vertical-align: inherit;">What does atomic mean? </font><font style="vertical-align: inherit;">In short, the atomic value is a ‚Äúsingle thing‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, we have a table like this:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first_name</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last_name</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">age</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">areas</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jhon</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doe</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{‚ÄúWebsite Design‚Äù, ‚ÄúClientele Research‚Äù}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mary</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jane</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{‚ÄúLong-term strategic planning‚Äù, ‚ÄúRecruitment‚Äù}</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tom</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smith</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"Marketing"}</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here, the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">areas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> column </font><font style="vertical-align: inherit;">contains values ‚Äã‚Äãthat are not atomic. </font><font style="vertical-align: inherit;">For example, in a John Doe line, the field stores two entities: Web site design and Client research. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So this table is not in the first normal form. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To bring it to this form, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">only one value should be stored in each field</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Second normal form</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the second normal form, no column that is not part of the primary key (or which can act as part of another primary key) cannot be derived from the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smaller part of the primary key</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What does it mean? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suppose you have such a base architecture (I emphasized the fields corresponding to the primary key in this table):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employee_id</font></font></u></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_id</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hours</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employee_name</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_name</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúWebsite design‚Äù</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">twenty</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mary</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúWebsite design‚Äù</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this project, the employee name can be directly inferred from employeee_id, because the idea is that the employee name is uniquely determined by its identifier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Similarly, the project name is uniquely identified by the project_id identifier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, we have two columns that can be deduced from the primary key part. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each of these examples would be enough to throw this table out of the second normal form. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another conclusion is that if the table was in the first normal form and all primary keys are single columns, then the table is already in the second normal form.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Third normal form</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the table to correspond to the third normal form, it must be in the second normal form, while there should not be any attributes (columns) in it, except the primary one, which are transitively dependent on the primary key. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What does it mean? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's say you have the following architecture (which is far from ideal):</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employee_name</font></font></td>
<td><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employee_id</font></font></u></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">age</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">department_number</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">department_name</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Marketing"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mary</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Operational"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tom</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Marketing"</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this table, department_number can be inferred from employee_id, and department_name can be inferred from department_number. So department_name is transitively dependent on employee_id! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there is such a transitive dependency: employee_id ‚Üí department_number ‚Üí department_name, then this table is not in the third normal form. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What problems arise because of this</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the name of the department can be derived from its number, then storing this field for each employee introduces excessive redundancy. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine that the marketing department changes its name to "Marketing and Sales." To maintain consistency, you will have to update the cell in each row of the table for each employee in this department! In the third normal form, this would not have happened.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, here is what happens if Mary decides to leave the company: we must delete her row from the table, but if she was the only employee in the operations department, then the department will also have to be deleted. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All of these problems can be completely avoided in a third normal form.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c45/93e/423/c4593e423e573702d0039506bdbe562f.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mom's exploits</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Her daughter's name is Help! </font><font style="vertical-align: inherit;">I'm forced to fake passports</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Create the last line of defense in the form of restrictions</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The database you are working with is more than just a group of tables. Certain functionality is built into it. Many of these features help ensure data quality and accuracy. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Restrictions set the rules, what values ‚Äã‚Äãcan be entered in the database fields. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When defining relationships in a database, be sure to set foreign key constraints. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Be sure to specify what should happen when deleting and updating a row associated with other rows in other tables (ON DELETE and ON UPDATE rules). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Be sure to use NOT NULL for all fields that should never be nullified. It may make sense to set a check on the backend, but remember that crashes always happen, so adding this kind of restriction will not hurt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Set CHECK check limits to make sure that the table values ‚Äã‚Äãare in the acceptable range, for example, the price of a product always has a positive value. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An interesting fact</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : in April 2020, precisely such a restriction in software </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prevented trading on the Moscow MICEX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> because the price of WTI oil futures fell below zero. </font><font style="vertical-align: inherit;">Unlike the Moscow stock exchange, the New York Mercantile Exchange NYMEX </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">updated the software a week before the incident</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , so it was able to successfully conduct transactions at a negative price, that is, with a surcharge to the buyer from the seller - approx. </font><font style="vertical-align: inherit;">trans. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All PostgreSQL limitations can be found </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Never store whole addresses in one field</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If your application or website has a form with one field where the user enters his address, then it smells bad. It is very likely that in this case you will also have one field in the database to store the address as a simple string. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what to do if you need to combine customer purchases by city in order to see which city which product is more popular? can you do it? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It will be very hard! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the full address is stored as a string in the database field, you will first have to figure out how much of this string is the city! And this is an almost impossible task, given all the possible address formats in this field. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, be sure to break the universal "Address" field into specific fields: street, house number, city, region, zip code, and so on.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another Address Problem - Anonymous Fields</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is an illustration from Michaels Blach‚Äôs book, The Copper Bullet to Improve Software Quality:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b98/165/d9e/b98165d9e6cd4b9e43350285a75609ba.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What potential problems are visible here? </font><font style="vertical-align: inherit;">Can you easily distinguish the city of Chicago from the streets of Chicago? </font><font style="vertical-align: inherit;">Probably not. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, remember to always give clear column names to each unit of information.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0e/te/dp/0etedpf1hxfr2sci5m1jliwd4zi.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to write a resume</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do you have experience in SQL? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No (No). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So write: NoSQL expert.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Never store the first and last name in one field</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Similar to the situation with addresses: the number of variations of the name and surname is too large to clearly distinguish between them. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, you can separate the name from the last name, if there is a space between them. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, ‚ÄúMike Alche‚Äù ‚Üí the name ‚ÄúMike‚Äù and the surname ‚ÄúAlche‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what if the user entered a middle name? Or does he have a double surname? But what if there is a middle name and a double surname? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to determine where is the name and where is the last name to split the string? Mistakes are inevitable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A way to avoid many problems is to create separate fields (in forms) for the first_name and last_name usernames. In this way, you allow users to share their own names and can store data in a consistent way. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: I am not saying that spaces are forbidden in the fields of the database. </font><font style="vertical-align: inherit;">For example, for names like Juan Martin Del Potro, the first part of Juan Martin is in the first_name field, and Del Potro is in the last_name field. </font><font style="vertical-align: inherit;">Of course, this is </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not perfect</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">You can optionally have the columns middle_name and second_last_name. </font><font style="vertical-align: inherit;">Look in more detail about possible variations of names and surnames in the list ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misconceptions of programmers about names</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù and the article ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misconceptions of programmers about names - with examples</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù. </font><font style="vertical-align: inherit;">You have to agree on some kind of compromise between accuracy and practicality.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Set conventions for table and field names and stick to them</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's pretty annoying to work with data that looks like user.firstName, user.lst_name, user.birthDate and so on. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would advise you to establish underscore naming rules, because not all SQL engines handle uppercase letters the same way, and enclosing everything in quotation marks is very tedious. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Choose the same as calling the tables - in the plural or singular (for example, users in the plural or user in the singular). </font><font style="vertical-align: inherit;">I like the singular more, but all the backend frameworks seem to be plural by default. </font><font style="vertical-align: inherit;">You have to follow the pattern and use the plural. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What else to read</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What database to choose for the project, so that you do not have to choose again</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   IIoT-:  Mail.ru Cloud Solutions       </a>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">      </a>.</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501582/index.html">How dynamic prices on Amazon and AliExpress lead to $ 24 million worth of goods</a></li>
<li><a href="../en501588/index.html">Great testing of processors of various architectures</a></li>
<li><a href="../en501590/index.html">Articles in English: Merciless War of Rules and Exceptions</a></li>
<li><a href="../en501594/index.html">Escape from the Zoo or how I did casual games on iOS</a></li>
<li><a href="../en501596/index.html">How to make life easier when using Git (as well as a selection of materials for deep immersion)</a></li>
<li><a href="../en501600/index.html">Game console stm32</a></li>
<li><a href="../en501604/index.html">Translation of Andrew Un's book, Passion for Machine Learning. Chapters 51 and 52</a></li>
<li><a href="../en501610/index.html">Custom scrollbar in Angular</a></li>
<li><a href="../en501612/index.html">Which graphics card to choose for your computer in 2020</a></li>
<li><a href="../en501614/index.html">PostgreSQL Antipatterns: how deep is the rabbit hole? go through the hierarchy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>