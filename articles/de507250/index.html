<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤘🏾 🤦🏼 🤸🏾 Definieren einer gewinnenden Pokerhand mithilfe von Map / Reduce in JavaScript 🙆🏻 ⚓️ 👩🏽‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sie, wie ich, können manchmal an Mini-Wettbewerben in der Olympiade-Programmierung teilnehmen. Normalerweise habe ich keine Zeit, eine Lösung zu finde...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Definieren einer gewinnenden Pokerhand mithilfe von Map / Reduce in JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/507250/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img height="326" src="https://habrastorage.org/webt/mv/2r/o3/mv2ro3o7alphphi_pz-yzj_wdrg.png"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img align="right" width="355" height="445" src="https://habrastorage.org/webt/ba/-t/s7/ba-ts7ubl-bu6-dwxrnvbk6g8hw.jpeg"></a><br clear="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie, wie ich, können manchmal an Mini-Wettbewerben in der Olympiade-Programmierung teilnehmen. Normalerweise habe ich keine Zeit, eine Lösung zu finden, bei der mehr als ein oder zwei Zeilen eine nicht standardmäßige Funktion verwenden, aber diesmal bestand die Aufgabe darin, die höchsten (gewinnenden) Pokerhände zu ermitteln, und das schien mir so Dies ist eine dieser Aufgaben, die einfach sein sollten! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis ist korrekt, präzise und lesbar (zumindest viel kürzer als die von anderen Teilnehmern vorgeschlagenen Lösungen). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall können Sie natürlich </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redu verwenden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um die erforderlichen Informationen zu erhalten. Ein wirklich gutes Beispiel war die Verwendung dieser Tools zur Lösung praktischer Probleme in mehreren Schritten.</font></font><a name="habracut"></a><blockquote><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="EDISON Software - Webentwicklung"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="EDISON Software - Webentwicklung"></a><br clear="right">
 EDISON      -.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img align="right" width="345" height="230" src="https://habrastorage.org/webt/lu/xa/zr/luxazrrwdkcxwu279m3mzlerbx8.png"></a><br clear="left">
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>,          .<br>
<br>
    ,  « ».          - .<div style="text-align:center;"><img width="770" height="1" src="https://habrastorage.org/webt/mw/wy/cu/mwwycuqpta7m96dxifyx9if7mu8.gif"></div></blockquote><h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es besteht darin, zwei Pokerhände zu vergleichen und den Gewinner zu ermitteln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pokerhände werden durch Linien dargestellt, die Teilzeichenfolgen (die einzelne Karten bezeichnen) mit 2 Zeichen enthalten, die durch Leerzeichen getrennt sind. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2H</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine Zwei von Würmern, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist eine Kreuzung von zehn usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste Zeichen bedeutet Rangfolge. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle möglichen Optionen, sortiert nach Dienstalter: </font></font><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 3 4 5 6 7 8 9 TJQKA</font></font></b></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit den numerischen Bezeichnungen, alles für die Buchstaben klar: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 10 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist die Buchse ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ack), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist die Königin ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ueen), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist der König ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ing),</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ass ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ce). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das zweite Zeichen definiert den Anzug. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mögliche Optionen: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Würmer ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ohren), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kreuze ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lubs), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Peaks ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pades), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tamburine ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iamonds). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel eine solche komplette Linie für die Hand „2C 5C 3C 4C 6C“ - in diesem Fall ist dies ein Cross Straight Flush von zwei auf sechs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Handranking erfolgt wie in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texas Hold'em</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen verstehen, dass es versteckte Schwierigkeiten gibt - die Verwendung zusätzlicher Karten zur Lösung von Ziehungssituationen, die Verwendung des Nennwerts von Paaren usw.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entscheidung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kann man dieses Problem lösen? </font><font style="vertical-align: inherit;">Zuerst müssen Sie eine Vergleichsmethode ermitteln, die das Problem der Rangfolge löst. Wenn die Rangfolge übereinstimmt, wird der Gewinner nach Möglichkeit durch Vergleichen zusätzlicher Karten ermittelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da in der Problemstellung davon ausgegangen wird, dass die Anzüge gleichwertig sind, verwenden wir ein einfaches Objekt, um die Rangfolge der Hände darzustellen:</font></font><br>
<br>
<pre><code class="javascript hljs">{ 
   <span class="hljs-attr">rank</span>: <span class="hljs-number">1</span>,       <span class="hljs-comment">//     1  9,   ,    </span>
   <span class="hljs-attr">value</span>: <span class="hljs-string">'ABCDE'</span> <span class="hljs-comment">//  ,        ,    ASCII-    </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können wir eine einfache Funktion zum Vergleichen von zwei Händen schreiben, die in Form dieser Struktur dargestellt werden:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen wir nur noch ein Objekt aus unseren Händen erstellen - und hier beginnt der Spaß!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir zerlegen die Pokerhand in ihre Bestandteile</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In solchen Fällen müssen die zur Lösung des Problems erforderlichen Basisdaten ermittelt werden. </font><font style="vertical-align: inherit;">Hier besteht unser erstes Problem darin, unsere Hände im Dienstalter zu verbreiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pokerhände können Straight, Flush oder eine Kombination mehrerer Karten mit demselben Nennwert sein. </font><font style="vertical-align: inherit;">Unsere Aufgabe ist es, diese Informationen zuerst aus unserer Eingabezeichenfolge zu sammeln. </font><font style="vertical-align: inherit;">Der erste Schritt besteht darin, zu entscheiden, wie diese Daten analysiert werden sollen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eingehende Daten analysieren</font></font></h3><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> input = <span class="hljs-string">"AH KS TC 9D 3S"</span> <span class="hljs-comment">// -  </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir brauchen sowohl die Farbe als auch den Nennwert jeder Karte. </font><font style="vertical-align: inherit;">Da der einzige Grund, warum wir an einer Farbe interessiert sind, darin besteht, dass die Kombination aus Nennwert und Farbe nicht beibehalten werden muss, wenn die Farbe aller Karten auf der Hand gleich ist. </font><font style="vertical-align: inherit;">Dies macht den Analyseprozess ziemlich einfach:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konvertieren Sie eine eingehende Zeile in eine Folge von Karten.</font></font></b></li>
<li><b> /   ,   .</b><br>
<br>
,      ,  ,        .  , A&gt; K (  ),    Q &gt; J (  ),   ,            . ,   :</li>
<li><b>     .</b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben 5 Karten auf der Hand, am Ende müssen die Handwerte zum Auflösen von Ziehungskollisionen in einer Operation verglichen werden - dies sollte also genau die Linie sein. Daher übersetzen wir den Wert unserer Karten in Zeichen, damit sie später wieder in die Zeichenfolge zurückgegeben werden können. Im Allgemeinen müssen wir das Ass A, König - B, Königin - C, Jack - D, Zehn - E, Neun - G usw. machen.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span> <span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>) <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort() 
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also haben wir hier in separate Karten aufgeteilt und jeder von ihnen seinen Nennwert und seine Farbe zugewiesen. </font><font style="vertical-align: inherit;">Gleichzeitig haben wir die Bezeichnung in eine Einzelbuchstaben-Zeichenfolgendarstellung umgewandelt, beginnend mit A (dies ist die Bezeichnung für ein Ass, der Rest der folgenden Buchstaben entspricht den kleineren Karten auf Par). </font><font style="vertical-align: inherit;">Zu diesem Zweck wurde die Nummer der nominalen Position in der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reihenfolge</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der konstanten Zeichenfolge ausspioniert </font><font style="vertical-align: inherit;">, diese Zahl von 77 subtrahiert und wieder in eine Zeichenfolge konvertiert. </font><font style="vertical-align: inherit;">65 ist der Code für A, daher erhalten wir eine vergleichbare Zeile, die mit A beginnt. Dies ist die beste Option. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben auch nach Nennwert und Anzug sortiert, damit Sie den nächsten Schritt machen können!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie vergleichbare Daten.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Großartig, aber jetzt müssen Sie mehr Daten generieren, damit Sie Code schreiben können, um Ihre Hände zu ordnen.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie den Blitz.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie die Straße.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir ermitteln Duplikate zum Nennwert - sie werden für alle anderen Arten von Händen benötigt.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie den Blitz</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist recht einfach, da wir die eingehende Zeile analysiert und nach Anzügen sortiert haben. </font><font style="vertical-align: inherit;">Wenn die Farbe der letzten Karte mit der Farbe der ersten übereinstimmt, haben wir einen Blitz.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie die Straße</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Straße ist nicht viel komplizierter - wenn alle Karten (unabhängig von der Farbe) eine einheitliche Bezeichnung haben, dann ist dies die richtige. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir beginnen mit der ersten Karte auf der Hand und prüfen bei jeder nächsten Karte, ob ihr Nennwert mit der vorherigen Karte übereinstimmt. </font><font style="vertical-align: inherit;">Verwenden Sie den durch den Rückruf übergebenen Index wie folgt:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Duplikate definieren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Schritt ist etwas komplizierter. </font><font style="vertical-align: inherit;">Wir müssen den Betrag für jeden Nennwert in unserer Hand berechnen. </font><font style="vertical-align: inherit;">Außerdem benötigen Sie eine Möglichkeit, Paare, Tripel usw. zu bestimmen, um die Rangfolge Ihrer Hände auf folgende Weise zu vereinfachen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zählmenge für jeden Nennwert</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konvertieren einer Liste in eine Übermittlung, in der Sie suchen können.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es muss sichergestellt werden, dass es möglich ist, das Vorhandensein der „vier“ (quadratisch) oder drei in der Hand, die Anzahl der Paare (nicht eins, eins oder zwei) usw. zu bestimmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst berechnen wir, wie oft Karten mit jedem Wert gefunden werden:</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
    c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> c<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dann suchen wir nach diesen Berechnungen im wörtlichen Sinne des "Zählens der Berechnungen".</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Handrangliste</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir alle Informationen, die für die Rangfolge der Hände erforderlich sind, ohne mögliche Ziehungssituationen zu berücksichtigen.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher ist ein Straight Flush die stärkste Kombination mit einem Rang von 1 (um dies nicht zu erschweren, halten wir ein Unentschieden für möglich, wenn jemand einen Royal Flush hat), dann ein Vierling, ein Full House usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall wird der Operator </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp;&amp;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fantastisch verwendet </font><font style="vertical-align: inherit;">, der bis zum letzten Wert scannt, wenn die Werte in den vorherigen Klammern korrekt sind. </font><font style="vertical-align: inherit;">Somit wird </font></font><nobr><code>(flush &amp;&amp; direct &amp;&amp; 1)</code> </nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 zurückgegeben, wenn Flush und Direct wahr sind, andernfalls wird false zurückgegeben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gezeichnete Situation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn zwei Hände den gleichen Rang haben, wird der Gewinner nach Möglichkeit zusätzlich durch den Nennwert der Karten bestimmt. </font><font style="vertical-align: inherit;">Einige Regeln sind damit verbunden.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paar gegen Paar. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Paar mit einem höheren Nennwert gewinnt. </font><font style="vertical-align: inherit;">Wenn die Werte übereinstimmen, gewinnt die höchste nächste Karte. </font><font style="vertical-align: inherit;">(Für zwei Paare wird es ähnlich gelöst). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir zum Beispiel die Hand „2H 2D AH KC 3D“ mit der Hand „4H 4C JC TC 3H“ vergleichen, gewinnen vier aus der zweiten Hand, obwohl in der ersten Hand die höchste Karte den höchsten Nennwert hat - ein Ass.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Volles Haus gegen volles Haus</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Das Trio mit dem höheren Nennwert gewinnt. </font><font style="vertical-align: inherit;">Wenn die Bezeichnungen der Dreiergruppen in beiden Händen gleich sind, dann betrachten wir die Bezeichnungen der Zweien.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir verhalten uns ähnlich, wenn wir Hände mit demselben Rang vergleichen - entscheidet über den Nennwert der höchsten Karte in Kombination.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher müssen wir in unserer Ausgangszeile zuerst nach Menge und dann nach Nennwert sortieren. </font><font style="vertical-align: inherit;">Denken Sie daran, dass die gesamte fünfstellige Zeichenfolge verwendet wird, um Fälle mit übereinstimmenden Handrangfolgen zu lösen.</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">let</span> value = faces.sort(byCountFirst).join(<span class="hljs-string">""</span>)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-comment">//    -  ,  </span>
    <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
    <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
    <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und das ist alles!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ganzer Scheiß</font></font></h2><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> order = <span class="hljs-string">"23456789TJQKA"</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHandDetails</span>(<span class="hljs-params">hand</span>) </span>{
    <span class="hljs-keyword">const</span> cards = hand.split(<span class="hljs-string">" "</span>)
    <span class="hljs-keyword">const</span> faces = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode([<span class="hljs-number">77</span> - order.indexOf(a[<span class="hljs-number">0</span>])])).sort()
    <span class="hljs-keyword">const</span> suits = cards.map(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a[<span class="hljs-number">1</span>]).sort()
    <span class="hljs-keyword">const</span> counts = faces.reduce(count, {})
    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-built_in">Object</span>.values(counts).reduce(count, {})
    <span class="hljs-keyword">const</span> flush = suits[<span class="hljs-number">0</span>] === suits[<span class="hljs-number">4</span>]
    <span class="hljs-keyword">const</span> first = faces[<span class="hljs-number">0</span>].charCodeAt(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> straight = faces.every(<span class="hljs-function">(<span class="hljs-params">f, index</span>) =&gt;</span> f.charCodeAt(<span class="hljs-number">0</span>) - first === index)
    <span class="hljs-keyword">let</span> rank =<font></font>
        (flush &amp;&amp; straight &amp;&amp; <span class="hljs-number">1</span>) || <span class="hljs-comment">/* -,     - -        */</span>
        (duplicates[<span class="hljs-number">4</span>] &amp;&amp; <span class="hljs-number">2</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">3</span>) || <span class="hljs-comment">/* - -  +  */</span>
        (flush &amp;&amp; <span class="hljs-number">4</span>) || <span class="hljs-comment">/*  -      */</span>
        (straight &amp;&amp; <span class="hljs-number">5</span>) || <span class="hljs-comment">/*  -       */</span>
        (duplicates[<span class="hljs-number">3</span>] &amp;&amp; <span class="hljs-number">6</span>) || <span class="hljs-comment">/*  -     */</span>
        (duplicates[<span class="hljs-number">2</span>] &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-number">7</span>) || <span class="hljs-comment">/*   */</span>
        (duplicates[<span class="hljs-number">2</span>] &amp;&amp; <span class="hljs-number">8</span>) || <span class="hljs-comment">/* -     */</span>
        <span class="hljs-number">9</span> <span class="hljs-comment">/*     ,      */</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> { rank, <span class="hljs-attr">value</span>: faces.sort(byCountFirst).join(<span class="hljs-string">""</span>) }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byCountFirst</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-comment">//    -  ,  </span>
        <span class="hljs-keyword">const</span> countDiff = counts[b] - counts[a]<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(countDiff) <span class="hljs-keyword">return</span> countDiff <span class="hljs-comment">//   ,  </span>
        <span class="hljs-keyword">return</span> b &gt; a ? <span class="hljs-number">-1</span> : b === a ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count</span>(<span class="hljs-params">c, a</span>) </span>{<font></font>
        c[a] = (c[a] || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> c<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareHands</span>(<span class="hljs-params">h1, h2</span>) </span>{
    <span class="hljs-keyword">let</span> d1 = getHandDetails(h1)
    <span class="hljs-keyword">let</span> d2 = getHandDetails(h2)
    <span class="hljs-keyword">if</span> (d1.rank === d2.rank) {
        <span class="hljs-keyword">if</span> (d1.value &lt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d1.value &gt; d2.value) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> d1.rank &lt; d2.rank ? <span class="hljs-string">""</span> : <span class="hljs-string">""</span>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesamt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen, können wir, wenn wir alles in den Regalen sorgfältig analysieren, mithilfe von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karte</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verkleinerung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> problemlos alle Informationen vorbereiten, die wir zur Lösung dieses Problems benötigen.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de507226/index.html">OCR für PDF in .NET - So extrahieren Sie Text aus unzugänglichen PDF-Dokumenten</a></li>
<li><a href="../de507234/index.html">Schnauben oder Suricata. Teil 2: Installation und Ersteinrichtung von Suricata</a></li>
<li><a href="../de507236/index.html">Wir erhöhen die Effektivität der Interaktion zwischen Designern und Frontend-Entwicklern</a></li>
<li><a href="../de507238/index.html">Wir verwenden DS, um Kundenbewertungen von großen Websites zu verarbeiten</a></li>
<li><a href="../de507242/index.html">Was ist interessant Wi-Fi 6 in der Leistung von Huawei</a></li>
<li><a href="../de507254/index.html">Zabbix - Erweiterung der Makrogrenzen</a></li>
<li><a href="../de507256/index.html">Peter Hinchens: Psychopath Quellcode</a></li>
<li><a href="../de507258/index.html">Boni, Vorteile und Boni in der IT: die Ergebnisse der Habr-Karriereforschung</a></li>
<li><a href="../de507260/index.html">Schneller Lifehack für Anwendungswachstum - ASO in anderen Sprachen</a></li>
<li><a href="../de507264/index.html">Neue Funktionen in Python 3.9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>