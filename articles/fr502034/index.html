<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🎨 🥄 🤬 Les composants contrôlés et non contrôlés de React n'ont pas à être compliqués 👩🏾‍⚖️ 👩🏿‍🔬 🏴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous présente la traduction de l'article "Les entrées de formulaire contrôlées et non contrôlées dans React ne doivent pas être comp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Les composants contrôlés et non contrôlés de React n'ont pas à être compliqués</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502034/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! Je vous présente la traduction de l'article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Les entrées de formulaire contrôlées et non contrôlées dans React ne doivent pas être compliquées"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par Gosha Arinich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous avez peut-être vu de nombreux articles dire: "vous ne devriez pas utiliser" setState ", tandis que les documents affirment que" les références sont mauvaises ". Tout cela est très contradictoire. Parfois, il est difficile de comprendre comment faire les choses correctement, et quels sont les critères de choix entre ces méthodes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, comment créer des formulaires? Après tout, les formulaires sont au cœur de nombreuses applications Web. Et pourtant, le traitement des formulaires dans React est la pierre angulaire, n'est-ce pas? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, ce n'est pas si dur Permettez-moi de vous montrer les différences entre ces approches, ainsi que quand vous devez utiliser chacune d'entre elles.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Composants non gérés</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les composants non gérés</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont comme des formulaires HTML classiques:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils se souviennent de tout ce que vous avez tapé. </font><font style="vertical-align: inherit;">Ensuite, vous pouvez obtenir leur valeur en utilisant ref. </font><font style="vertical-align: inherit;">Par exemple, dans le gestionnaire onClick:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{<font></font>
  handleSubmitClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">this</span>._name.value;
    <span class="hljs-comment">// do something with `name`</span><font></font>
  }<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{input</span> =&gt;</span> this._name = input} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleSubmitClick}</span>&gt;</span>Sign up<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, vous devez «extraire» les valeurs du champ lorsque vous en avez besoin. </font><font style="vertical-align: inherit;">Cela peut être fait lors de la soumission du formulaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit de la manière la plus simple d'implémenter des formulaires. </font><font style="vertical-align: inherit;">Bien sûr, il doit y avoir une bonne raison de l'utiliser, à savoir: les formes les plus simples, soit lors de l'étude de React. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, cette méthode n'est pas si flexible, alors examinons mieux les composants gérés.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Composants gérés:</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le composant géré</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> accepte sa valeur actuelle comme accessoires, ainsi qu'un rappel pour modifier cette valeur. </font><font style="vertical-align: inherit;">Vous pouvez dire que c'est une façon plus «réactive» de contrôler le composant, mais cela ne signifie pas que vous devez toujours utiliser cette méthode.</font></font><a name="habracut"></a><br>
<pre><code class="javascript hljs"><font></font>
&lt;input value={someValue} onChange={handleChange} /&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela est très bien, mais la valeur du formulaire d'entrée doit exister dans un certain état. </font><font style="vertical-align: inherit;">En règle générale, un composant qui rend un formulaire d'entrée (c'est-à-dire un formulaire) les enregistre dans son état:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,<font></font>
    };<font></font>
  }<font></font>
<font></font>
  handleNameChange = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">name</span>: event.target.value });<font></font>
  };<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{this.state.name}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleNameChange}</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Bien sûr, il peut être dans l'état d'un autre composant ou même dans un magasin d'état séparé, par exemple, Redux). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque fois que vous entrez un nouveau caractère, handleNameChange est appelé. </font><font style="vertical-align: inherit;">Il prend la nouvelle valeur du formulaire d'entrée et l'écrit à l'état.</font></font><br>
<br>
<img src="https://d33wubrfki0l68.cloudfront.net/d92387dc57d2689c2b02e5f511b2b13c6b22433b/dbafb/assets/images/controlled-vs-uncontrolled/controlled-flow.png" alt="image"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout commence par une ligne vide - '';</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous entrez la lettre «a» et handleNameChange l'obtient et appelle setState. </font><font style="vertical-align: inherit;">Ensuite, le formulaire d'entrée est rendu à nouveau avec la valeur «a»;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous entrez la lettre «b» et handleNameChange obtient la valeur «ab» et la définit à l'état. </font><font style="vertical-align: inherit;">Le formulaire d'entrée Opet est rendu, mais maintenant avec la valeur 'ab'.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce flux semble «pousser» les modifications dans le formulaire, c'est pourquoi le composant a toujours la valeur actuelle des données d'entrée, sans nécessiter de demande de mise à jour explicite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela signifie que vos données (état) et votre interface utilisateur (formulaire de saisie) sont toujours synchronisées. </font><font style="vertical-align: inherit;">L'état donne de la valeur au formulaire, tandis que le formulaire modifie la valeur de l'état actuel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela signifie également que les formulaires peuvent répondre immédiatement aux changements, ce qui à son tour est nécessaire pour:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rétroaction rapide, comme la validation;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">désactiver un bouton spécifique jusqu'à ce que tous les champs du formulaire soient valides;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permettant le traitement de certains formats de champs de saisie, par exemple les numéros de carte de crédit.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si vous n'en avez pas besoin et que vous pensez que les composants non gérés sont beaucoup plus simples, utilisez-les.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qui rend un composant «gérable»?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, il existe d'autres éléments de formulaire, tels que: cases à cocher, radio, zone de texte et sélectionnez. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un composant devient gérable lorsque vous définissez sa valeur utiliser des accessoires. </font><font style="vertical-align: inherit;">C'est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, chacun des éléments du formulaire a différentes façons de définir la valeur, voici donc un petit tableau pour une compréhension générale:</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Élément</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valeur</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rappel pour changement</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouvelle valeur dans le rappel</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><pre><code class="javascript hljs">&lt;input type=<span class="hljs-string">"text"</span> /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur = "chaîne"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le changement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.value</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;input type=<span class="hljs-string">"checkbox"</span> /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vérifié = {boolean}</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le changement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.checked</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;input type=<span class="hljs-string">"radio"</span> /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vérifié = {boolean}</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le changement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.checked</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;textarea /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur = "chaîne"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le changement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.value</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;select /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur = "valeur d'option"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le changement</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.value</font></font></td>
</tr>
</tbody>
</table></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résultats</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les composants gérés et non gérés présentent des avantages et des inconvénients. </font><font style="vertical-align: inherit;">Évaluez une situation spécifique et choisissez une approche - si cela fonctionne pour vous, alors pourquoi ne pas en profiter? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si votre formulaire est incroyablement simple en termes d'interaction avec l'interface utilisateur, les composants non gérés sont parfaits pour vous. </font><font style="vertical-align: inherit;">Vous n'avez pas à écouter ce que divers articles disent de mauvais. </font></font><br>
<br>
<img src="https://i.imgur.com/D5u8pqE.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, le choix d'un type de composant n'est pas une décision à prendre une fois pour toutes: vous pouvez toujours remplacer des composants non managés par des composants managés. </font><font style="vertical-align: inherit;">La transition de l'un à l'autre n'est pas si difficile.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502000/index.html">12 cours en ligne d'ingénierie des données</a></li>
<li><a href="../fr502004/index.html">Méthode Kanban: comprendre votre processus en tant que processus de renforcement des connaissances collectives - Partie 1 (recettes)</a></li>
<li><a href="../fr502008/index.html">Programmation aux masses</a></li>
<li><a href="../fr502028/index.html">Vanya va à grand-mère ou adaptative JavaScript dynamique</a></li>
<li><a href="../fr502030/index.html">Services Web dans Oracle</a></li>
<li><a href="../fr502038/index.html">Élever un atome, approche 2.0.1</a></li>
<li><a href="../fr502040/index.html">À propos des verbes Phrasal-5 (haut / bas)</a></li>
<li><a href="../fr502046/index.html">Cinq ans de rouille</a></li>
<li><a href="../fr502048/index.html">Comportement complexe sans réseaux neuronaux et sans entraînement. La base philosophique</a></li>
<li><a href="../fr502050/index.html">Quelques notes sur la culture</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>