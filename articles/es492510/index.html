<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤢 🔞 👩🏾‍🔧 Módulos ES6 en el navegador: ¿están listos o no? 🙅🏿 ♍️ ‼️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¿Has oído hablar del uso de módulos ES6 en un navegador? En realidad, estos son módulos ES6 ordinarios. Solo se aplican en el código destinado a los n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Módulos ES6 en el navegador: ¿están listos o no?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/492510/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Has oído hablar del uso de módulos ES6 en un navegador? </font><font style="vertical-align: inherit;">En realidad, estos son módulos ES6 ordinarios. </font><font style="vertical-align: inherit;">Solo se aplican en el código destinado a los navegadores.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/yl/q1/wl/ylq1wlx8jeaaomnc9kwintirrma.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si alguien no lo sabe, así es como se ve. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay una página </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.mjs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">&lt;!--     "module" --&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay un archivo que </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representa un módulo conectado a la página:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { doSomething } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.mjs'</span>;<font></font>
<font></font>
doSomething(<span class="hljs-string">'Make me a sandwich'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este módulo, a su vez, importa la función </font></font><code>doSomething</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">del módulo </font></font><code>utils.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> doSomething = <span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'No.'</span>);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los módulos ES6 han existido durante muchos años. </font><font style="vertical-align: inherit;">Y tal vez estás pensando en probarlos. </font><font style="vertical-align: inherit;">Los usé durante aproximadamente un mes en mi propio proyecto. </font><font style="vertical-align: inherit;">Al mismo tiempo, llegué a la conclusión de que ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Suspensión!</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acerca del soporte del navegador para módulos</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de hablar sobre lo que entiendo, sugiero echar un vistazo al soporte del navegador para módulos. </font><font style="vertical-align: inherit;">Estoy escribiendo este material a principios de 2020, por lo que el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nivel de soporte para los</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> módulos es bastante impresionante del 90%.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/484/cfd/9e6/484cfd9e669b731f483cfdd99a638777.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soporte para módulos con navegadores de acuerdo con caniuse.com</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Estoy bastante satisfecho con este 90% (no tengo en cuenta las necesidades del 10% de los usuarios), aunque es posible que desee ser más responsable. </font><font style="vertical-align: inherit;">Pero, incluso teniendo en cuenta esto, si su proyecto no está diseñado para IE, UC u Opera Mini, este nivel de soporte significa que casi el 100% de su público objetivo podrá trabajar con su proyecto sin problemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es cierto que el soporte del navegador para módulos es solo el comienzo. </font><font style="vertical-align: inherit;">Aquí quiero encontrar la respuesta a tres preguntas que surgieron al comienzo de mi viaje hacia los módulos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿El uso de módulos en los navegadores tiene alguna ventaja?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué pasa con los contras?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estoy seguro de que tenía una tercera pregunta, pero ahora no la recuerdo.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos a resolverlo ...</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Cuáles son las ventajas de usar módulos en los navegadores?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Esto es puro JavaScript! </font><font style="vertical-align: inherit;">Sin proyecto de ensamblaje, sin archivo de configuración Webpack de 400 líneas, sin Babel, sin complementos y ajustes preestablecidos, y sin módulos adicionales de 45 npm. </font><font style="vertical-align: inherit;">Solo tú y tu código. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay algo refrescante en escribir código que se ejecutará en el navegador exactamente en la forma en que fue creado. </font><font style="vertical-align: inherit;">Esto puede requerir un poco más de esfuerzo, pero el resultado es muy agradable. </font><font style="vertical-align: inherit;">Así es como conducir un automóvil con una transmisión manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces. </font><font style="vertical-align: inherit;">Las ventajas de los módulos ES6 son JavaScript puro, esto es la falta de ensamblaje, la configuración del proyecto y el rechazo de las dependencias que se han vuelto innecesarias. </font><font style="vertical-align: inherit;">¿Qué más? </font><font style="vertical-align: inherit;">¿Hay algo mas? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No, nada mas.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Cuáles son las desventajas de usar módulos en los navegadores?</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Comparación de módulos y paquetes</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al pensar en usar módulos ES6 en un navegador, en realidad debe elegir entre usar módulos y paquetes como Webpack, Parcel o Rollup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede (probablemente) usar ambos, pero en realidad, si planea ejecutar el código a través del paquete, no hay razón para usar el diseño </font></font><code>&lt;script type="module"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para cargar los archivos del paquete. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, basado en la suposición de que alguien está considerando la posibilidad de usar módulos ES6 en lugar de un paquete, esto es lo que tendrá que renunciar:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minificación del código terminado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funciones de JavaScript de vanguardia.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sintaxis que es diferente de la sintaxis de JavaScript (React, TypeScript, etc.).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Npm módulos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almacenamiento en caché</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideremos los primeros tres puntos de esta lista con más detalle.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Tamaño de archivo</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tamaño de mi proyecto, que usa módulos, es de 34 Kb. Como no uso el paso de compilación del proyecto, el código transmitido a través de la red contiene nombres de variables muy largos; hay muchos comentarios en él. Además, representa una gran cantidad de archivos pequeños, lo que no es muy bueno en términos de compresión de datos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si pongo todo esto en un paquete usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parcel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , entonces el tamaño de lo que </font><font style="vertical-align: inherit;">resultaría </font><font style="vertical-align: inherit;">sería 18 Kb. Mi calculadora Casual Casio informa que esto es "aproximadamente la mitad" del código del proyecto en el que no se usa el paquete. Esto se debe en parte al hecho de que Parcel minimiza los archivos, pero también porque los materiales con este enfoque se comprimen mejor usando gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La compresión de datos llama nuestra atención sobre otro problema: la forma en que se organizan los archivos (en el sentido de conveniencia de desarrollo) se transfiere directamente a la forma en que se transfieren los archivos a través de la red. Y la forma en que se organizan los archivos durante el desarrollo no se corresponde necesariamente con la forma en que desea verlos en el sitio. Por ejemplo, 150 módulos (archivos) pueden tener sentido mientras se trabaja en un proyecto. Y los mismos materiales transferidos al navegador pueden justificarse para organizarse en 12 paquetes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Explicaré esta idea. No estoy hablando del hecho de que el uso de módulos significa que los archivos no se pueden agrupar y minimizar (el hecho de que esto no se pueda hacer es una ilusión). Solo quiero decir que no tiene sentido hacer ambas cosas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sí, aquí hay una observación graciosa. </font><font style="vertical-align: inherit;">En mi aplicación, hasta que escribí esta sección, se utilizaron módulos (¡enfatizo!). </font><font style="vertical-align: inherit;">Instalé Parcel para calcular el tamaño de ensamblaje correcto. </font><font style="vertical-align: inherit;">Y ahora no veo ninguna razón para volver a los módulos normales. </font><font style="vertical-align: inherit;">Bueno, ¿no es interesante?</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Vida sin transpilación</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A lo largo de los años, estoy muy acostumbrado a usar las últimas construcciones de sintaxis de JavaScript y a la maravillosa herramienta Babel, que las convierte en código que todos los navegadores entienden. Me acostumbré tanto que casi nunca pensé en el soporte del navegador (por supuesto, con la excepción de DOM y CSS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando lo intenté por primera vez </font></font><code>type=«module»</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, iba a hacer todo por mí mismo. Mi objetivo era tener navegadores nuevos, así que pensé que podría usar JavaScript moderno, al que estoy acostumbrado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero la realidad no era tan optimista. Intenta responder las siguientes preguntas rápidamente y sin mirar a ningún lado. ¿Soporta Edge?</font></font><code>flatMap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? ¿Safari admite la asignación destructiva (objetos y matrices)? ¿Chrome admite comas después de los últimos argumentos de función? ¿Firefox admite exponenciación? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, tuve que buscar respuestas a estas preguntas, realizar pruebas de navegador cruzado. Pero usé todo esto por siglos. En cualquier aplicación lo suficientemente grande, esto probablemente conduciría a errores de producción. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto también significa que no podré utilizar la innovación JavaScript más notable desde la llegada del método de matriz </font></font><code>slice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el llamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operador de secuencia opcional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Usé diseños mágicos como</font></font><code>prop?.value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">casi un mes (desde el momento en que la herramienta Create React App comenzó a admitirlos sin ninguna configuración adicional). </font><font style="vertical-align: inherit;">Pero ya es inconveniente para mí trabajar sin ellos.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Cargas de almacenamiento en caché</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El almacenamiento en caché fue para mí el mayor obstáculo. De hecho, el hecho de que la solución al problema de almacenamiento en caché resultó ser bastante interesante resultó ser la razón principal por la que decidí escribir este material. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como está seguro, ya sabe, cuando los materiales se procesan utilizando un paquete, cada uno de los archivos resultantes recibe un nombre único, más o menos </font></font><code>index.38fd9e.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. El contenido de un archivo con este nombre nunca (nunca nunca) cambia. Por lo tanto, puede ser almacenado en caché por el navegador por un período ilimitado. Si dicho archivo se descarga una vez, no tendrá que volver a descargarlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un sistema sorprendente, a menos que intente encontrar la respuesta a la pregunta de cómo borrar el caché. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los módulos se cargan usando un diseño como</font></font><code>&lt;script type="module" src="index.mjs"&gt;&lt;/script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">El hash en el nombre del archivo no se usa. </font><font style="vertical-align: inherit;">¿Cómo, en esta situación, se supone que debe informar al navegador sobre dónde descargarlo </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, desde la memoria caché o desde la red? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cabe señalar que es casi posible hacer que el caché funcione aceptable, pero tomará un poco de esfuerzo. </font><font style="vertical-align: inherit;">Esto es lo que necesitas para esto:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debe establecer el título de todas las respuestas </font></font><code>cache-control</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a un valor </font></font><code>no-cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Increíblemente, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin caché</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no significa "no almacenar en caché". </font><font style="vertical-align: inherit;">Esto significa que el archivo debe almacenarse en caché, pero el archivo no debe "usarse para satisfacer una solicitud posterior sin una verificación exitosa en el servidor de origen".</font></font></li>
<li>    ETag.    —  ()   , ,   ,    .  , <code>38fd9e</code>      .</li>
<li>   CDN-  ,   .     ETag       .     .   CDN-   .       (     ETag)      . (, ,     Firebase).</li>
<li>  -,    ,  «  »  .        ,     ,  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, cuando un visitante vuelve a visitar el sitio, el navegador dirá: “Necesito descargar el archivo </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Veo que este archivo ya existe en mi caché, su ETag es </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Solicitaré este archivo al servidor, pero le diré que me lo envíe solo si su ETag no lo es </font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". El trabajador del servicio interceptará esta solicitud, ignorará ETag y la devolverá </font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de su caché (este archivo entró en la caché cuando se cargó la página la última vez). Luego, el trabajador del servicio redirigirá la solicitud al servidor. El servidor devolverá un mensaje que indica que el archivo no ha cambiado o un archivo que se almacenará en la memoria caché. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi opinión, todo esto es muy problemático. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, si está interesado, el código de trabajador de servicio:</font></font><br>
<br>
<pre><code class="javascript hljs">self.addEventListener(<span class="hljs-string">'fetch'</span>, e =&gt; {<font></font>
&nbsp;&nbsp;e.respondWith(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">async</span> (</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//       </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> cacheResponse = <span class="hljs-keyword">await</span> caches.match(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   (),   </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">// (ETag-    )</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(e.request).then(<span class="hljs-function"><span class="hljs-params">fetchResponse</span> =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;caches<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.open(CACHE_NAME)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.put(e.request, fetchResponse));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (cacheResponse) <span class="hljs-keyword">return</span> cacheResponse;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> fetch(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})()<font></font>
&nbsp;&nbsp;);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Era flojo, por lo que no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estudié</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y no </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">utilicé</font></a><font style="vertical-align: inherit;"> la última propiedad </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">FetchEvent.navigationPreload</font></a><font style="vertical-align: inherit;"> . El hecho es que para ese momento pasaba más tiempo almacenando en caché que escribiendo una solicitud (para su información, pasé 10 y 11 horas en estos asuntos, respectivamente). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sí, quiero señalar que la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propuesta de la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "tarjeta de importación" tiene como objetivo resolver algunos de los problemas anteriores. Le permite organizar algo como mapeo </font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>index.38fd9e.mj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s. Pero para generar un hash, de todos modos, necesita algún tipo de canalización de ensamblaje, las tarjetas de importación deberán estar incrustadas en el archivo HTML. Esto significa que se necesita un paquete aquí ... En realidad, en esta situación, los módulos ya no son necesarios en el navegador.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, aunque fue interesante entender todo esto, se puede comparar con la forma en que conduje en un monociclo durante todo un año. </font><font style="vertical-align: inherit;">Ya no haré esto.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Pero probablemente no todos usan paquetes?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escribí este material asumiendo que todos escriben código en módulos, usando construcciones </font></font><code>import/export</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y luego recopilan el código en paquetes de producción usando Webpack, Grunt, Gulp o algo así. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Hay desarrolladores que no usan paquetes? </font><font style="vertical-align: inherit;">¿Hay alguien que ponga su código JavaScript en varios archivos y los envíe a producción sin agruparlos? </font><font style="vertical-align: inherit;">Tal vez una de estas personas eres tú? </font><font style="vertical-align: inherit;">Si es así, me gustaría saber todo sobre tu vida.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me esfuerzo por tomar todas las decisiones serias, como elegir entre módulos y paquetes, en base a los principios fundamentales del desarrollo efectivo. Esto es productividad y calidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, el uso de módulos en los navegadores no contribuye ni a uno ni a otro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si mañana empiezo a trabajar en un nuevo proyecto, entonces no tendré una pregunta sobre si ejecutar la buena y antigua aplicación create-react. Todas las configuraciones iniciales tomarán unos treinta segundos, y aunque el tamaño inicial del proyecto de 40 Kb es un poco grande, para la mayoría de los sitios esto no tendrá ningún papel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aquí hay una situación diferente. Supongamos que necesitaría reunir un poco de HTML / CSS y JavaScript para algún tipo de experimento, y ese experimento sería un proyecto que incluía un poco más de archivos que "unos pocos". Si, mientras trabajaba en este proyecto, no planeaba pasar tiempo configurando el sistema para construirlo, entonces probablemente usaría los módulos en el navegador. Y luego, si no me importaba el desempeño de este proyecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me interesaría saber cómo funcionan Webpack y sus herramientas relacionadas con los módulos ES6 en un navegador. Creo que en el futuro, cuando la propuesta de "tarjetas de importación" reciba suficiente apoyo, los paquetes probablemente las usarán como un mecanismo para abstraer hashes antiestéticos que se usan hoy en día.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Has utilizado módulos ES6 en tu navegador?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492500/index.html">Science Garage en ruso. Experiencia traduciendo un show americano</a></li>
<li><a href="../es492502/index.html">MIP * = RE: evidencia de la época del campo de la informática que causó el efecto dominó en física y matemáticas</a></li>
<li><a href="../es492504/index.html">¿Qué sucede cuando un módulo JS se importa dos veces?</a></li>
<li><a href="../es492506/index.html">3 formas de renderizar listas grandes en Angular</a></li>
<li><a href="../es492508/index.html">Libro Kubernetes para DevOps</a></li>
<li><a href="../es492512/index.html">CSS: aventuras en la tierra de la translucidez</a></li>
<li><a href="../es492514/index.html">¿Cómo establecer un flujo de documentos electrónicos legalmente significativo de contrapartes en Rusia y Kazajstán?</a></li>
<li><a href="../es492518/index.html">El brote de virus requiere trabajo remoto, lo que significa la firma digital de documentos</a></li>
<li><a href="../es492520/index.html">Modelado 3D parametrizado de la copa del rodamiento en nanoCAD Plus 20</a></li>
<li><a href="../es492522/index.html">Comunicación remota en equipo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>