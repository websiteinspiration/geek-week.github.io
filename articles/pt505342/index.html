<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—ï¸ ğŸ’– ğŸœ A injeÃ§Ã£o de dependÃªncia e o princÃ­pio de inversÃ£o de dependÃªncia NÃƒO SÃƒO UM E MESMO ğŸ˜‹ ğŸ˜– ğŸ¤¸ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A traduÃ§Ã£o do artigo foi preparada antes do inÃ­cio do curso "Desenvolvedor C ++" .
 
 
 
 Era uma vez, quando comecei a escrever no blog LosTechies, e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A injeÃ§Ã£o de dependÃªncia e o princÃ­pio de inversÃ£o de dependÃªncia NÃƒO SÃƒO UM E MESMO</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/505342/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A traduÃ§Ã£o do artigo foi preparada antes do inÃ­cio do curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Desenvolvedor C ++"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sa/sl/j7/saslj70zbwjvfx4rubfcof0jouo.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Era uma vez, quando comecei a escrever no blog LosTechies, escrevi vÃ¡rios artigos sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InversÃ£o de DependÃªncia (DI)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , InjeÃ§Ã£o de DependÃªncia (tambÃ©m DI) e, Ã© claro, sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como finalmente Comecei a entender a essÃªncia da injeÃ§Ã£o de dependÃªncia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Naquela Ã©poca, eu pensava que os dois DIs eram apenas variaÃ§Ãµes do nome da mesma tÃ©cnica - quer vocÃª chamasse de â€œinjeÃ§Ã£oâ€ ou â€œinversÃ£oâ€.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InjeÃ§Ã£o! = InversÃ£o</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cerca de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
um ano apÃ³s essas duas publicaÃ§Ãµes, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">escrevi um artigo para a Code Magazine sobre os princÃ­pios do desenvolvimento de software SOLID</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">No processo de escrita, perguntei ao meu entÃ£o colaborador </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Derek Greer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seja um revisor deste artigo. Acabou sendo a melhor coisa que eu jÃ¡ fiz para entender o SOLID, porque Derek teve a gentileza (e paciente com a minha teimosia) para me mostrar onde meu entendimento sobre inversÃ£o de dependÃªncia era diferente do correto. Ele levou um tempo para me guiar pelos artigos originais do tio Bob, explicar onde eu misturei injeÃ§Ã£o de dependÃªncia com inversÃ£o e, finalmente, esclareceu esse tÃ³pico para mim. Como resultado, recebi um Ã³timo artigo, que ainda Ã© bastante popular - e sou muito grato a Derek pela ajuda na correÃ§Ã£o do meu entendimento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, atÃ© hoje continuo vendo como outras pessoas cometem o mesmo erro - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mesmo em rubi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Portanto, para ajudar outras pessoas a entender o que Ã© inversÃ£o de dependÃªncia e o que nÃ£o Ã©, republico aqui uma seÃ§Ã£o sobre isso no meu artigo do SOLID. </font><font style="vertical-align: inherit;">Entendo que parte do texto nÃ£o farÃ¡ sentido fora do contexto do restante do artigo. </font><font style="vertical-align: inherit;">No entanto, o princÃ­pio geral deve ser Ã³bvio, e vocÃª tem a oportunidade a qualquer momento de seguir o link do artigo para esclarecer seus pontos. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Formalidade jurÃ­dica: o texto a seguir apareceu originalmente na ediÃ§Ã£o de </font><font style="vertical-align: inherit;">janeiro / fevereiro de 2010 </font><font style="vertical-align: inherit;">da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revista CODE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e Ã© reproduzido aqui com a permissÃ£o deles)</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PrincÃ­pio de InversÃ£o de DependÃªncia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O princÃ­pio de inversÃ£o de dependÃªncia (DIP) consiste em duas partes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os mÃ³dulos de nÃ­vel superior nÃ£o devem depender dos mÃ³dulos de nÃ­vel inferior. </font><font style="vertical-align: inherit;">Esses e outros devem depender de abstraÃ§Ãµes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As abstraÃ§Ãµes nÃ£o devem depender dos detalhes. </font><font style="vertical-align: inherit;">Os detalhes devem depender de abstraÃ§Ãµes.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualize a Ãºltima vez que vocÃª quis acender a lÃ¢mpada para iluminar parte da sala. </font><font style="vertical-align: inherit;">Era necessÃ¡rio fazer um buraco na parede, cavar em busca de fiaÃ§Ã£o, expor e soldar a lÃ¢mpada diretamente na fiaÃ§Ã£o da casa? </font><font style="vertical-align: inherit;">Claro que nÃ£o (pelo menos espero que nÃ£o!). </font><font style="vertical-align: inherit;">Uma tomada elÃ©trica fornece uma interface padrÃ£o para isso. </font><font style="vertical-align: inherit;">NinguÃ©m na maioria dos paÃ­ses industrializados espera que uma lÃ¢mpada convencional a solda diretamente na fiaÃ§Ã£o elÃ©trica de um edifÃ­cio. </font><font style="vertical-align: inherit;">AlÃ©m disso, ninguÃ©m espera poder inserir apenas uma lÃ¢mpada na tomada. </font><font style="vertical-align: inherit;">Estamos acostumados a conectar lÃ¢mpadas, computadores, televisores, aspiradores de pÃ³ e outros dispositivos. </font><font style="vertical-align: inherit;">Uma tomada elÃ©trica padrÃ£o de 120 volts e 60 hertz se tornou uma parte onipresente da sociedade nos Estados Unidos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mesmo princÃ­pio se aplica ao desenvolvimento de software. </font><font style="vertical-align: inherit;">Em vez de trabalhar com um conjunto de classes fortemente interconectadas, vocÃª gostaria de trabalhar com uma interface padrÃ£o. </font><font style="vertical-align: inherit;">AlÃ©m disso, vocÃª gostaria de garantir que vocÃª possa substituir a implementaÃ§Ã£o sem violar as expectativas dessa interface, de acordo com o LSP (PrincÃ­pio de substituiÃ§Ã£o de Liskov - PrincÃ­pio de substituiÃ§Ã£o de Liskov). </font><font style="vertical-align: inherit;">Portanto, se vocÃª trabalha com uma interface e deseja substituÃ­-la, precisa trabalhar apenas com a interface e nÃ£o com uma implementaÃ§Ã£o especÃ­fica. </font><font style="vertical-align: inherit;">Ou seja, o cÃ³digo que depende de uma interface deve conhecer apenas os detalhes sobre essa interface. </font><font style="vertical-align: inherit;">Ele nÃ£o deve estar ciente de nenhuma classe especÃ­fica que implemente essa interface.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relacionamentos de polÃ­ticas, detalhes e abstraÃ§Ãµes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parafraseando um pouco o princÃ­pio da inversÃ£o, podemos dizer que a polÃ­tica (alto nÃ­vel) nÃ£o deve depender dos detalhes (implementaÃ§Ã£o), e os detalhes devem depender da polÃ­tica. Uma polÃ­tica de nÃ­vel superior deve definir a abstraÃ§Ã£o Ã  qual se referirÃ¡, onde alguma implementaÃ§Ã£o da parte executa a aÃ§Ã£o solicitada. Essa perspectiva ajuda a ilustrar por que Ã© o princÃ­pio da </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inversÃ£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><font style="vertical-align: inherit;">dependÃªncia, e nÃ£o apenas o princÃ­pio da abstraÃ§Ã£o de dependÃªncia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como exemplo de por que a dependÃªncia de uma parte em uma polÃ­tica Ã© inversa a uma dependÃªncia, considere o cÃ³digo que escrevemos no FormatReaderService. </font><font style="vertical-align: inherit;">O serviÃ§o de leitor de arquivo formatado Ã© uma polÃ­tica. </font><font style="vertical-align: inherit;">Ele define o que a interface IFileFormatReader deve fazer - o comportamento esperado desses mÃ©todos. </font><font style="vertical-align: inherit;">Isso permite que vocÃª se concentre na prÃ³pria polÃ­tica, determinando como o serviÃ§o de leitura funciona, sem levar em conta a implementaÃ§Ã£o de detalhes - leitores de formatos individuais. </font><font style="vertical-align: inherit;">Assim, os leitores dependem da abstraÃ§Ã£o fornecida pelo serviÃ§o do leitor. </font><font style="vertical-align: inherit;">No final, o serviÃ§o e os leitores individuais dependem da abstraÃ§Ã£o da interface do leitor de formato.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzindo a conectividade invertendo dependÃªncias</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VocÃª sabe que nÃ£o ter dependÃªncias (ter zero conectividade) Ã© impraticÃ¡vel para uma classe. VocÃª nÃ£o teria um conjunto de classes utilizÃ¡vel se nÃ£o tivesse conectividade zero. No entanto, vocÃª tambÃ©m gostaria de se livrar da conexÃ£o direta sempre que possÃ­vel. VocÃª gostaria de dividir seu sistema para que ele permita alterar suas partes individuais sem alterar nada alÃ©m dessas mesmas partes. O princÃ­pio da inversÃ£o de dependÃªncia Ã© a chave para esse conceito. Confiando apenas em uma abstraÃ§Ã£o, como uma interface ou uma classe base, vocÃª pode reduzir a conectividade entre diferentes partes do seu sistema. Isso permite que vocÃª reconstrua o sistema com vÃ¡rias implementaÃ§Ãµes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere as vÃ¡rias classes que precisam ser instanciadas em uma hierarquia clara para que vocÃª possa obter algumas das funcionalidades necessÃ¡rias. A maneira mais fÃ¡cil Ã© criar uma instÃ¢ncia da classe um nÃ­vel mais baixo usando a classe do nÃ­vel mais alto (a que vocÃª deseja chamar), usando-a para instanciar a classe ainda mais em nÃ­vel, e assim por diante. A Figura 14 mostra um grÃ¡fico de objetos nos quais um objeto de nÃ­vel superior (polÃ­tica) depende e estÃ¡ diretamente conectado a um objeto de nÃ­vel inferior (detalhe). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7i/zd/jv/7izdjvplld2jiet956hwk3ttlte.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 14: PolÃ­tica associada Ã  peÃ§a.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso implementa a hierarquia necessÃ¡ria, mas vincula diretamente as classes. VocÃª nÃ£o pode usar Foo sem arrastar a barra. Se vocÃª deseja separar essas classes, pode facilmente inserir uma interface que o Bar implementarÃ¡ e da qual o Foo dependerÃ¡. A Figura 15 mostra uma interface IBar simples que vocÃª pode criar com base na API pÃºblica da classe Bar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gi/ed/cx/giedcxlbprh_liaxhbew-59rggg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 15: SeparaÃ§Ã£o usando abstraÃ§Ã£o.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nesse cenÃ¡rio, vocÃª pode separar a implementaÃ§Ã£o do Bar do seu uso no Foo, introduzindo uma interface. No entanto, vocÃª apenas separa a implementaÃ§Ã£o selecionando a interface. VocÃª ainda nÃ£o inverteu a estrutura de dependÃªncia e nÃ£o corrigiu todos os problemas de conectividade neste esquema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que acontece quando, nesse cenÃ¡rio, vocÃª deseja alterar Bar? Dependendo das mudanÃ§as que vocÃª deseja fazer, vocÃª pode provocar uma reaÃ§Ã£o em cadeia que o forÃ§a a alterar a interface do IBar. O Foo depende da interface do IBar, portanto vocÃª tambÃ©m deve alterar a implementaÃ§Ã£o do Foo. VocÃª pode ter separado a implementaÃ§Ã£o do Bar, mas deixou o Foo dependente das alteraÃ§Ãµes no Bar. Ou seja, a polÃ­tica ainda depende dos detalhes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se vocÃª deseja inverter a estrutura das dependÃªncias para que a Parte se torne dependente da PolÃ­tica, primeiro vocÃª deve mudar sua perspectiva. O desenvolvedor que trabalha com este sistema deve entender que vocÃª nÃ£o apenas abstraiu a implementaÃ§Ã£o da interface. Sim, essa separaÃ§Ã£o Ã© necessÃ¡ria, mas nÃ£o o suficiente. VocÃª precisa entender a quem a abstraÃ§Ã£o pertence - PolÃ­tica ou Detalhes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O princÃ­pio da inversÃ£o de dependÃªncia afirma que os detalhes devem depender das polÃ­ticas. Isso significa que vocÃª deve ter uma polÃ­tica que defina e possua a abstraÃ§Ã£o que a peÃ§a implementa. No script Foo-&gt; IBar-&gt; Bar, vocÃª precisa considerar o IBar como parte do Foo, e nÃ£o apenas como um invÃ³lucro para o Bar. Embora nada tenha mudado estruturalmente, a perspectiva de propriedade mudou, como mostra a Figura 16. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dv/x8/13/dvx813ddp0l2nuaqdj6z_nsm5sm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 16: PolÃ­tica possui abstraÃ§Ã£o. Os detalhes dependem da polÃ­tica.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o Foo tiver uma abstraÃ§Ã£o do IBar, vocÃª poderÃ¡ colocar essas duas construÃ§Ãµes em um pacote independente de Bar. VocÃª pode colocÃ¡-los em seu prÃ³prio espaÃ§o para nome, em sua prÃ³pria montagem etc. Isso pode aumentar bastante a visibilidade de qual classe ou mÃ³dulo depende de qual. Se vocÃª perceber que o AssemblyA contÃ©m Foo e IBar e o AssemblyB fornece uma implementaÃ§Ã£o do IBar, Ã© mais fÃ¡cil perceber que a granularidade de Bar depende da polÃ­tica definida por Foo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se vocÃª inverter corretamente a estrutura das dependÃªncias, a reaÃ§Ã£o em cadeia Ã s mudanÃ§as na polÃ­tica e / ou nos detalhes tambÃ©m estarÃ¡ correta. </font><font style="vertical-align: inherit;">Quando vocÃª altera a implementaÃ§Ã£o do Bar, nÃ£o observa mais uma cadeia ascendente de alteraÃ§Ãµes. </font><font style="vertical-align: inherit;">Isso ocorre porque Bar precisa estar em conformidade com a abstraÃ§Ã£o fornecida por Foo - os detalhes nÃ£o determinam mais uma mudanÃ§a na polÃ­tica. </font><font style="vertical-align: inherit;">EntÃ£o, quando vocÃª altera as necessidades do Foo, causando alteraÃ§Ãµes na interface do IBar, suas alteraÃ§Ãµes se espalham por toda a estrutura. </font><font style="vertical-align: inherit;">A barra (detalhe) serÃ¡ forÃ§ada a mudar, dependendo das alteraÃ§Ãµes de polÃ­tica.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SeparaÃ§Ã£o e inversÃ£o de dependÃªncias do sistema de envio de email</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinando nossa base de cÃ³digos, vocÃª pode perceber que o IFileFormatReader jÃ¡ Ã© um exemplo de inversÃ£o de dependÃªncia. A classe FormatReaderService possui uma definiÃ§Ã£o de interface de leitor de formato. Se as necessidades do serviÃ§o de leitor de arquivos formatados forem alteradas, vocÃª provavelmente verÃ¡ uma cadeia de alteraÃ§Ãµes descendo para os leitores de formato. No entanto, se o leitor de um formato de arquivo especÃ­fico for alterado, Ã© improvÃ¡vel que vocÃª veja que essas alteraÃ§Ãµes afetarÃ£o o serviÃ§o de leitura de arquivos formatados. Isso faz vocÃª se perguntar onde mais vocÃª pode inverter as dependÃªncias do sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira coisa que vocÃª deseja fazer Ã© separar a lÃ³gica de receber mensagens de log e enviÃ¡-las por email do formulÃ¡rio de envio. VocÃª nÃ£o se importa com os links para os dois serviÃ§os de leitura e envio de e-mail, mas a questÃ£o de quando e o que causar gera dÃºvidas. VocÃª percebe que o processo Ã© realmente duplicado no formulÃ¡rio: uma vez para enviar de um arquivo e outra para enviar de um banco de dados. E entÃ£o vocÃª se lembra de todos os outros departamentos que tambÃ©m usam isso e comeÃ§a a se perguntar sobre a real extensÃ£o do processo de duplicaÃ§Ã£o. AlÃ©m disso, alguns de seus amigos conversaram recentemente sobre "testes de unidade". Eles dizem que vocÃª deve se certificar de que a lÃ³gica real do processo que vocÃª estÃ¡ testando esteja encapsulada em objetos que nÃ£o tenham referÃªncias a sistemas externos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E com tudo isso em mente, vocÃª decide criar um objeto chamado ProcessingService. Depois de alguns minutos para alternar o cÃ³digo para tentar consolidar o processo, vocÃª percebe que nÃ£o deseja que o serviÃ§o de processamento seja conectado diretamente ao leitor de banco de dados ou aos serviÃ§os de leitura de arquivo. ApÃ³s um pouco de reflexÃ£o, vocÃª percebe um padrÃ£o entre eles: o mÃ©todo GetMessageBody. Usando esse mÃ©todo como base, vocÃª cria uma nova interface IMessageInfoRetriever e a implementa como um leitor de banco de dados e como um leitor de arquivos.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> interface IMessageInfoRetriever<font></font>
{ <font></font>
  <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">GetMessageBody</span><span class="hljs-params">()</span></span>; <font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FileReaderService</span>:</span> IMessageInfoRetriever<font></font>
{<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GetMessageBody</span><span class="hljs-params">()</span> </span>{<span class="hljs-comment">/* ... */</span>}<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseReaderService</span>:</span> IMessageInfoRetriever<font></font>
{<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GetMessageBody</span><span class="hljs-params">()</span> </span>{<span class="hljs-comment">/* ... */</span>}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa interface permite fornecer qualquer implementaÃ§Ã£o para os serviÃ§os de processamento necessÃ¡rios. </font><font style="vertical-align: inherit;">Em seguida, preste atenÃ§Ã£o ao serviÃ§o de email, que estÃ¡ atualmente diretamente vinculado ao serviÃ§o de processamento. </font><font style="vertical-align: inherit;">A interface simples IEmailService resolve esse problema. </font><font style="vertical-align: inherit;">A Figura 17 mostra a estrutura resultante. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nv/np/aa/nvnpaagcxk8lp-aupfuydbylwu0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 17: Invertendo as dependÃªncias do serviÃ§o de processamento e do serviÃ§o de leitura de arquivos. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A transmissÃ£o de interfaces de recuperaÃ§Ã£o de mensagens e serviÃ§os de email para o serviÃ§o de processamento garante que exista uma instÃ¢ncia de qualquer classe que implemente essas interfaces, sem a necessidade de conhecer tipos especÃ­ficos de instÃ¢ncias.</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saiba mais sobre o curso.</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt505314/index.html">SincronizaÃ§Ã£o de hora do Linux: NTP, Chrony e systemd-timesyncd</a></li>
<li><a href="../pt505322/index.html">Despachante do futuro: como mudarÃ¡ seu papel na empresa de serviÃ§os?</a></li>
<li><a href="../pt505330/index.html">Como nÃ£o criar uma criptomoeda do zero em 3 anos</a></li>
<li><a href="../pt505336/index.html">Como: Manet ou Monet? A rede neural responde</a></li>
<li><a href="../pt505340/index.html">FuncionÃ¡rios do Walmart tentam provar que a IA anti-roubo nÃ£o funciona</a></li>
<li><a href="../pt505362/index.html">Vite - desenvolvimento de leads sem pacotes no Vue</a></li>
<li><a href="../pt505378/index.html">Todo esse marketing: como trabalhar com pontos de contato em uma empresa de TI?</a></li>
<li><a href="../pt505386/index.html">Instalando o Debian no Netgear Stora</a></li>
<li><a href="../pt505388/index.html">Treezor - LÃ­der em serviÃ§os bancÃ¡rios na SociÃ©tÃ© GÃ©nÃ©rale</a></li>
<li><a href="../pt505390/index.html">Fundador da comunidade F #: â€œOOP e FA do cÃ©rebro devem morrerâ€ // Estamos condenados # 7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>