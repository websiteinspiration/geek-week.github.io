<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☝🏿 🎅🏽 🍙 Masker permainan berbasis wajah di Instagram, atau klik dua kali mata 🖕🏼 🤲🏾 👩🏾‍🤝‍👩🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Omong kosong, menurutmu. Jenis kata apa yang tidak berarti? Tapi, sayang atau sorakan - seseorang seperti itu, hari ini ini bukan omong kosong, tetapi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Masker permainan berbasis wajah di Instagram, atau klik dua kali mata</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486498/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qr/9p/o1/qr9po1b7d633kt3pmdsf2esb9io.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Omong kosong, menurutmu. Jenis kata apa yang tidak berarti? Tapi, sayang atau sorakan - seseorang seperti itu, hari ini ini bukan omong kosong, tetapi kenyataan. Artikel ini akan membahas tentang game yang saya tulis untuk Instagram di mana wajah Anda digunakan sebagai pengontrol, atau lebih tepatnya, tidak hanya itu, tetapi terkadang seluruh kepala. Bergerak di sekitar lapangan bermain dilakukan dengan memutar dan memiringkan kepala, dan pilihan tindakan adalah dengan membuka mulut atau menggandakan mata "mengklik" (berkedip). Kedipan ganda mungkin layak disebut ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh dunia baru yang berani! Mungkin, hipsters masa depan akan mengembangkan skrip untuk menghasilkan asap berwarna-warni yang indah di belakang kapsul ruang mereka yang ringan atau menulis shader untuk memberikan efek visual yang menarik ke gerbang hitam dari teleport pribadi, seperti kepingan salju yang jatuh (Web 100.0) atau kabut fraktal (WebGL 100.0) atau ... Tidak, mungkin Saya tidak memiliki imajinasi yang cukup untuk membayangkan omong kosong seperti apa yang dapat kita tangani di masa depan: Saya mencoba untuk berpikir terlalu logis. Tetapi sekitar 30 tahun yang lalu, kita tentu saja, tanpa mimpi, dalam keadaan apa pun, bahkan dapat berpikir bahwa hari ini kita akan membuat topeng untuk jejaring sosial bernama Instagram. Dan terlebih lagi, bahwa di dalam topeng ini permainan yang lengkap akan muncul. Saya menjadi takut dan menarik. Semua dalam semua, sangat menarik. Dan, seperti yang sudah Anda pahami, saya tidak bisa menahan diri dan juga menulis permainan seperti itu.Tentu saja, untuk memainkannya, Anda harus memiliki smartphone di Android atau iOS dengan kamera depan dan aplikasi Instagram yang diinstal.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Game ini adalah Tic Tac Toe. </font><font style="vertical-align: inherit;">Secara umum, ini adalah salah satu game pertama yang saya buat dalam hidup saya, dan mungkin bahkan yang pertama - saya tidak akan mengingatnya sekarang. </font><font style="vertical-align: inherit;">Tapi saya menulisnya kembali di Pascal, lalu saya seret algoritma lama itu ke Delphi. </font><font style="vertical-align: inherit;">Setelah itu, permainan, tentu saja, juga muncul di web, di situs web saya: yah, di mana di halaman pribadi Anda tanpa tic-tac-toe pribadi Anda ... Dan sekarang saatnya untuk menempatkan game epik ini di Instagram. </font><font style="vertical-align: inherit;">Secara umum, jika saya adalah belati atau tac toe dalam permainan ini (lebih tepatnya, mungkin jari kaki), saya bisa menceritakan banyak hal tentang hidup saya yang panjang dan menarik ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Topeng apa ini?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai permulaan - penyimpangan sejarah singkat. Masker di Instagram muncul berkat tim Belarusia yang mengembangkan aplikasi selfie MSQRD. Setelah aplikasi ini dibeli oleh Facebook, tim dalam korporasi terus mengintegrasikan teknologinya ke dalam produk Facebook. Jadi ada platform yang menawarkan fitur augmented reality, Spark AR. Pada bulan Agustus 2019, platform ini meninggalkan status beta dan menjadi tersedia untuk semua pengguna yang sekarang dapat membuat konten augmented reality untuk Facebook dan Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masker dikandung sebagai filter untuk memberikan efek lucu pada fisiognomi mereka dengan penempatan selfie berikutnya di jejaring sosial. Adapun permainan bertopeng, saya tidak menemukan begitu banyak dari mereka. Ada Wajah Terbang, analog dari Flappy Bird, di mana seekor burung terbang melintasi layar, dan Anda perlu mencegahnya menabrak rintangan, berkedip pada saat yang tepat. Saya juga melihat permainan di mana Anda perlu menangkap makanan jatuh dari atas ke bawah. Seorang penembak seperti Penjajah. Dan pelari 3D di mana karakter berjalan di sepanjang jalan kota dan melompati rintangan. Mungkin ada lagi. Secara umum, topiknya cukup baru.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proses pembuatan konten berlangsung di lingkungan pengembangan Spark AR Studio, yang dapat diunduh untuk Windows secara gratis. Selain itu, ada baiknya mengunduh aplikasi Spark AR Player untuk menguji efek yang Anda buat pada perangkat seluler Andrioid atau iOS, yang sebenarnya ditujukan untuk efek ini. Koneksi ke komputer adalah melalui kabel USB, setidaknya dalam kasus saya dengan smartphone Android. Setelah mengunduh topeng melalui komponen Facebook / sparkarhub dan melewati moderasi, topeng Anda (atau game) akan tersedia untuk semua pengguna Instagram dari Internet. Topeng dapat diperoleh dengan tautan langsung atau dari halaman pembuatnya di Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memahami cara bekerja di Spark AR Studio sama sekali tidak sulit. </font><font style="vertical-align: inherit;">Saya tidak akan membahas hal ini secara rinci, terutama karena internet penuh dengan pelajaran tentang topik ini. </font><font style="vertical-align: inherit;">Saya hanya akan mencatat bahwa ada dua cara untuk mengembangkan aplikasi yang kurang lebih interaktif yang melibatkan sesuatu yang lebih dari sekadar menerapkan semacam sprite statis pada wajah Anda: membuat apa yang disebut tambalan dan skrip penulisan. </font><font style="vertical-align: inherit;">Metode pertama secara visual menyerupai bekerja dengan bahan dalam editor 3D, dan yang kedua hanya pemrograman dalam Javascript menggunakan api khusus. </font><font style="vertical-align: inherit;">Saya memilih opsi kedua. </font><font style="vertical-align: inherit;">Namun, tidak ada yang melarang menggabungkan kedua metode: dari skrip ada kemungkinan akses ke segala sesuatu yang terjadi di tambalan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seni grafis</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, sebagai permulaan, alangkah baiknya untuk membuat beberapa elemen grafis yang akan digunakan dalam game. </font><font style="vertical-align: inherit;">Buka program pemodelan 3D favorit Anda dan buat. </font><font style="vertical-align: inherit;">Saya menggunakan Blender. </font><font style="vertical-align: inherit;">Pada prinsipnya, Anda dapat membuat hanya sprite terpisah, dan kemudian meminta mereka beberapa logika perilaku menggunakan Spark AR dan tidak menggunakan editor 3D sama sekali. </font><font style="vertical-align: inherit;">Tetapi saya memutuskan untuk membuat banyak salib dan jari kaki, jadi saya tidak bisa melakukannya tanpa editor seperti itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal pertama yang harus dilakukan adalah membuat tekstur 2D. </font><font style="vertical-align: inherit;">Gabungkan semua tekstur dalam satu atlas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9y/ii/n8/9yiin8wu1jf3emkzbnyjn88jmgq.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satin tekstur</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang tentang model 3D. Sebagai ruang permainan 3D, sebuah pesawat dua segitiga digunakan, di mana tanda medan direntangkan (di sini adalah fragmen jala besar dari atlas tekstur). Atlas itu sendiri dengan saluran alpha transparan. 9 kotak biru, masing-masing juga terdiri dari dua segitiga, akan dimasukkan ke dalam bidang. Selain itu, selain sembilan yang biru, model 3D akan berisi koordinat 9 kotak hijau dan merah yang sama yang akan disembunyikan di awal permainan. Artinya adalah bahwa dalam kondisi normal, warna semua kuadrat bidang adalah biru, dan hijau dan merah digunakan sebagai kursor untuk memilih posisi di mana Anda ingin mengatur salib atau nol, masing-masing. Selain itu, hijau dan merah digunakan untuk menyoroti deretan kemenangan tiga sel di akhir setiap putaran. Itu sudah cukup, tentu saja,gunakan 9 kotak biru dan hanya 3 kotak hijau dan merah, tetapi kemudian Anda harus, selain menunjukkan / menyembunyikan, mengatur mereka semacam logika gerakan. Tampaknya bagi saya bahwa menyembunyikan dan menampilkannya tanpa manipulasi koordinat di ruang angkasa akan lebih mudah, dan model 3D akan memuatnya secara tidak signifikan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vy/fk/bs/vyfkbs_c_hezcstqfoebd2xyjoy.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lapangan bermain</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dalam permainan, posisi tiga kotak di masing-masing dari sembilan kelompok, tentu saja, bertepatan. Di sini, saya hanya menyebarkannya secara vertikal di salah satu sel untuk menunjukkan dengan jelas apa model 3D secara keseluruhan. Perhatikan bahwa kotak diberi nama (pada gambar di sebelah kanan) dengan cara tertentu: dari b11 ke b33, dari g11 ke g33 dan dari r11 ke r33, di mana setiap digit berubah dalam kisaran dari 1 hingga 3. Dengan kata lain, huruf menunjukkan warna, dan angkanya adalah baris dan kolom. Ini diperlukan untuk mengakses kotak (jerat, dalam terminologi 3D) dengan nama-nama dari skrip, sehingga mudah untuk menyembunyikan dan menampilkannya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lalu aku membuat model salib dan jari kaki mereka sendiri, menempatkan mereka juga berpasangan di setiap sel. </font><font style="vertical-align: inherit;">(Untuk kejelasan, dia mengangkat salah satu nol). Jangan melihat fakta bahwa tekstur mereka begitu "ceria" sejauh ini. </font><font style="vertical-align: inherit;">Saya melakukan ini untuk kenyamanan menerapkan pemindaian UV. </font><font style="vertical-align: inherit;">Kemudian, di atlas tekstur, saya mengganti tekstur dari angka-angka dengan yang lebih tenang, yang dapat Anda lihat dalam permainan itu sendiri.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/qc/cp/qqqccp5siugamnwegcpegomgank.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Potongan permainan</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Akhirnya, saya memodelkan 4 panah datar yang akan menunjukkan arah kursor bergerak dalam permainan. </font><font style="vertical-align: inherit;">Saya menerapkan satu tekstur pada geometri mereka: pada lembar sprite, ini adalah panah segitiga putih dalam satu pukulan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengekspor semua model 3D (ketiganya, yaitu bidang, bentuk, dan panah) ke format FBX, yang memerlukan Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impor ke Spark AR Studio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, luncurkan Spark AR Studio dan impor model 3D di sana. Mereka akan muncul di daftar Aset di kiri bawah. Pada saat yang sama, kita akan membuat sendiri topeng bertema dengan cat perang dalam bentuk "tato" dari salib dan jari kaki di wajah. Anda dapat mempelajari tentang cara membuat topeng bertekstur dari ribuan pelajaran di jaringan global atau dari dokumentasi resmi di platform, saya tidak akan fokus pada hal ini. Singkatnya: unduh "kosong", buka di editor grafis favorit Anda, gambar sesuatu di atas, simpan, impor gambar ke Spark AR Studio, sesuaikan parameter bahan dan tekstur.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/-d/aw/pv-dawxo7-dqxkgd2rxga-umd7w.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seret model kami dari Aset ke daftar Adegan di atas. Selain itu, kita perlu mereka dirender dalam urutan tertentu: pertama bidang (field.fbx), kemudian model angka (fieldxo.fbx) dan, akhirnya, panah (arrows.fbx). Selain itu, di lapisan bawah juga akan ada faceTracker dengan faceMesh - ini adalah topeng untuk wajah Anda. Anda mungkin dapat melempar model ke atas panggung dalam urutan apa pun, namun, saya bermaksud mematikan Pengujian Kedalaman dan Uji Kedalaman dan Menulis ke Penyangga Kedalaman (dalam properti material) untuk semua material (kecuali angka), jadi biarkan mereka membuat dalam urutan yang saya atur secara manual: topeng - bidang - angka - panah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam bahan dari setiap lapisan, atur Blend Mode = Alpha sehingga objek menjadi transparan di bagian-bagian di mana ini ditentukan dalam tekstur. </font><font style="vertical-align: inherit;">Dan kita akan mengatur Texting Filtering = Medium untuk smoothing. </font><font style="vertical-align: inherit;">(Jika Anda memilih bahan atau tekstur dari daftar di sebelah kiri, semua properti yang tersedia untuk mereka akan ditampilkan di sisi kanan jendela.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, tambahkan elemen Script ke Aset (dengan mengklik elemen kiri bawah + Tambah Aset). </font><font style="vertical-align: inherit;">Dan selain model 3D, script.js akan muncul dalam daftar, dengan mengklik di mana editor teks skrip eksternal Anda akan terbuka. </font><font style="vertical-align: inherit;">Ketika Anda menyimpan di editor, program Anda restart di Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemrograman</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di awal skrip, sambungkan modul-modul yang kami butuhkan dalam proyek ini. </font><font style="vertical-align: inherit;">Ini adalah adegan, pelacakan wajah, modul untuk bekerja dengan waktu, suara, dan animasi.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> Scene = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Scene'</span>);
<span class="hljs-keyword">const</span> FaceTracking = <span class="hljs-built_in">require</span>(<span class="hljs-string">'FaceTracking'</span>);
<span class="hljs-keyword">const</span> Time = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Time'</span>);
<span class="hljs-keyword">const</span> Audio = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Audio'</span>);
<span class="hljs-keyword">const</span> Animation = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Animation'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada banyak cara untuk mengimplementasikan tic-tac-toe di Javascript. </font><font style="vertical-align: inherit;">Artikel ini bukan tentang mengimplementasikan game ini dalam bahasa pemrograman tertentu, tetapi tentang mengelola dengan bantuan seseorang. </font><font style="vertical-align: inherit;">Saya akan menjelaskan poin-poin penting khusus untuk interaksi dengan sistem Spark AR sehingga prinsip tersebut dipahami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akses ke fragmen bernama model 3D (mesh), misalnya, ke kotak biru di baris pertama, kolom kedua dari bidang bermain:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'b12'</span>);</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Ingat b12 - ini adalah bagaimana kami menyebutnya jala ini di editor 3D.)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Akses ke salib pada posisi ini:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'x12'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menyembunyikan jari kaki (o), mengatur tanda silang (x) dan mewarnai dengan warna hijau (g) ​​sel-sel bidang '32' (baris ketiga, kolom kedua):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// figure</span>
Scene.root.find(<span class="hljs-string">'o32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'x32'</span>).hidden = <span class="hljs-literal">false</span>;
<span class="hljs-comment">// background</span>
Scene.root.find(<span class="hljs-string">'b32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'g32'</span>).hidden = <span class="hljs-literal">false</span>;<font></font>
Scene.root.find(<span class="hljs-string">'r32'</span>).hidden = <span class="hljs-literal">true</span>;</code></pre><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/xg/bz/tkxgbzthiw7ubagtismtw7pmedk.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanda silang hijau dengan lampu latar hijau di bidang '32'.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Berlangganan acara memutar kepala dan memiringkan untuk bergerak di sekitar bidang.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//vert: fov+ back-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationX.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//hor: rt+ dn-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationY.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya sangat sederhana di sini. </font><font style="vertical-align: inherit;">Kami mengambil dari peristiwa nilai rotasi kepala atau kemiringan (event.newValue) dan memeriksa apakah mereka berada di luar rentang tertentu. </font><font style="vertical-align: inherit;">Jika ya, maka gerakkan kursor (kotak hijau) secara visual ke arah yang diinginkan. </font><font style="vertical-align: inherit;">Nilai negatif dari rotasi kepala sesuai dengan rotasi ke kiri, positif - ke kanan. </font><font style="vertical-align: inherit;">Demikian pula - untuk memiringkan kepala bolak-balik untuk bergerak di sepanjang garis. </font><font style="vertical-align: inherit;">Seluruh rentang adalah dari -1 hingga +1. </font><font style="vertical-align: inherit;">Dengan demikian, Anda dapat menerapkan gerakan kursor dan ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan kemudian saya sadar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tiba-tiba menyadari bahwa mengendalikan kursor pada bidang dengan cara yang saya pilih tidak nyaman: Anda perlu memutar kepala untuk memindahkan satu sel, lalu mengembalikan kepala Anda ke posisi semula, lalu putar lagi untuk langkah selanjutnya dan seterusnya. Dan mengapa tidak hanya menggunakan nilai fraksional dari memutar kepala ke sisi dan memiringkan bolak-balik agar segera fokus pada sel yang diinginkan di lapangan? Yaitu, bagaimana menunjukkan ke kursor posisinya dengan melihat, atau lebih tepatnya, dengan arah kepala. Dan kemudian metode pertama adalah latihan yang terlalu sulit untuk leher. Pendidikan jasmani tentu saja baik, tetapi tidak pada tingkat yang sama. Tentu, kita akan mengingat posisi saat ini di suatu tempat di ap.cur = {x: 1, y: 1} untuk menghapus kursor pada posisi sebelumnya dan menyimpan koordinat posisi baru, yang selanjutnya diperlukan untuk "klik". Ngomong-ngomongpanah visual untuk menunjukkan arah pergerakan kursor tidak lagi diperlukan: kita melempar satu model 3D (panah. fbx) dari proyek. Anda juga dapat menghapus gambar panah dari tekstur.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kedip ganda?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sekarang kita sampai pada yang paling menarik. </font><font style="vertical-align: inherit;">Klik dua kali mata. </font><font style="vertical-align: inherit;">Akui saja, Anda ingin melakukan ini sejak Anda mempelajarinya di awal artikel? </font><font style="vertical-align: inherit;">Sekarang Anda akan memberi tahu teman-teman Anda bahwa mouse sudah ketinggalan jaman dan kedip-kedip ganda digunakan untuk klik hari ini! </font><font style="vertical-align: inherit;">Kedip ganda. </font><font style="vertical-align: inherit;">Mengapa ganda? </font><font style="vertical-align: inherit;">Semuanya sederhana: satu orang tidak sadar secara berkala, jadi untuk menggantungkan peristiwa pada satu kedipan akan menjadi sadis.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qb/ke/8j/qbke8jqkze91tmgkb2xrhxhjrbm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di Spark AR, ada acara leftEye.openness dan rightEye.openness, dengan berlangganan, Anda bisa mendapatkan nilai pembukaan setiap mata di event.newValue dalam kisaran dari 0 hingga 1. Kami akan mempertimbangkan mata tertutup dengan nilai kurang dari 0,1. </font><font style="vertical-align: inherit;">Dan kami akan memanggil fungsi pemrosesan blink ap.blink1 () (ap adalah namespace, hanya lebih nyaman bagi saya).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).leftEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).rightEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam fungsi pemrosesan kedipan itu sendiri, kami menetapkan interval minimum antara kedipan dari 200 milidetik sehingga fungsi ini tidak langsung bekerja dua kali saat berkedip dengan kedua mata, karena panggilannya digantung di setiap mata. </font><font style="vertical-align: inherit;">Saya pikir itu jelas. </font><font style="vertical-align: inherit;">Kami juga menentukan waktu kedip ganda maksimum - 1 detik. </font><font style="vertical-align: inherit;">Jika kita masuk ke dalam kisaran ini, fungsi action () akan berfungsi, yang menampilkan tanda silang pada posisi saat ini. </font><font style="vertical-align: inherit;">Pada saat yang sama, kami akan menggantung aksi () di acara mulut.pembukaan - sehingga pemain memiliki pilihan apakah akan memberikan umpan silang pada kedip ganda atau saat membuka mulut.</font></font><br>
<br>
<pre><code class="javascript hljs">blink1:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">var</span> tmNew = <span class="hljs-built_in">Date</span>.now();
	<span class="hljs-keyword">if</span>  (tmNew - ap.blinkStart &gt; <span class="hljs-number">200</span>) {<font></font>
		ap.blinkCount++;<font></font>
		<span class="hljs-keyword">if</span>  (ap.blinkCount &gt; <span class="hljs-number">1</span>) {
			<span class="hljs-comment">//action</span>
			<span class="hljs-keyword">if</span> (tmNew - ap.blinkStart &lt; <span class="hljs-number">1000</span>) {<font></font>
				ap.action();<font></font>
			};<font></font>
			ap.blinkCount = <span class="hljs-number">0</span>;<font></font>
			ap.blinkStart = <span class="hljs-number">0</span>;<font></font>
		} <span class="hljs-keyword">else</span> {<font></font>
			ap.blinkStart = tmNew;<font></font>
		};<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-attr">action</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">if</span>  (ap.fProc == <span class="hljs-literal">false</span>) {<font></font>
		ap.fProc = <span class="hljs-literal">true</span>;<font></font>
		xo.putx();<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-comment">//mouth</span>
FaceTracking.face(<span class="hljs-number">0</span>).mouth.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &gt; <span class="hljs-number">0.2</span>) {<font></font>
		ap.action();<font></font>
	};<font></font>
});</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kedengarannya</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menemukan mereka di bagian bebas royalti dari berbagai situs efek suara. Detail penting: Spark AR memerlukan file suara dengan format tertentu, yaitu, M4A, mono, 44,1 kHz, 16 bit. Konverter online dari wav dan mp3 ke m4a tersedia di jaringan global. Saya menambahkan suara ke empat acara: bergerak, menangkan belati, menangkan tac toe dan menggambar. Volume total semua suara setelah konversi adalah 105 Kb. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menggunakan suara dalam skrip, Anda perlu menghubungkan modul audio dalam skrip, tambahkan jumlah speaker yang diinginkan ke adegan dengan jumlah suara (saya mendapat Speaker0, Speaker1, Speaker2, Speaker3), tambahkan modul Playback Controllers ke Asset, buat jumlah sub-item audioPlaybackController yang diperlukan sesuai jumlah suara. dan pasang suara ke setiap speaker.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/ib/s8/zzibs8wwtsk_0dzinsuzxu4klb4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, Anda dapat memutar suara dari skrip sebagai berikut (misalnya, suara klik):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> audioClick = Audio.getPlaybackController(<span class="hljs-string">'audioPlaybackControllerClick'</span>);<font></font>
audioClick.reset();<font></font>
audioClick.setPlaying(<span class="hljs-literal">true</span>);</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bangunan terakhir</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membuat build untuk semua perangkat seluler yang didukung (Android, iOs), cukup klik File -&gt; Export. Volume gim untuk setiap platform seluler dengan semua model dan tekstur 3D dalam kasus saya adalah sekitar 1 Mb. Maka Anda harus pergi melalui browser ke Hub AR Spark di Facebook / sparkarhub dan mengunggah file yang diekspor di sana. Anda juga perlu mengisi deskripsi, mencari kata kunci, dan mengunduh video demo. Selain itu, itu harus diambil di telepon melalui kamera Instagram. Untuk melakukan ini, di hub ada bagian "Pratinjau Kamera" yang berisi tautan. Tautan ini dapat dibuka di perangkat seluler. Aplikasi Instagram akan mulai dan topeng Anda (game) akan terbuka di dalamnya. Tautan juga dapat dikirim untuk pengujian ke semua teman Anda, yang, tentu saja, harus memiliki smartphone dengan aplikasi Instagram terinstal.Sampai akhir proses moderasi, mask tidak akan terlihat oleh semua pengguna dan mereka tidak akan dapat menambahkannya ke daftar efek mereka sampai terlihat hanya oleh tautan ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proses moderasi biasanya memakan waktu beberapa hari (bisa memakan waktu hingga 10 hari kerja). Seperti yang saya pahami, awalnya efeknya mengalami pengujian mesin, setidaknya video demo - pasti, karena sedetik setelah mengirim saya menerima pesan bahwa moderasi tidak lulus. Alasan - video berisi teks. Secara umum, untuk beberapa alasan, teks bertopeng pada dasarnya tidak diterima, seperti yang dikatakan peraturan. Saya harus mendesain ulang antarmuka permainan sehingga skor tidak menggantung terus-menerus di atas kepala pemain, seperti yang saya lakukan sebelumnya, tetapi hanya muncul di akhir setiap putaran. Dan rekam ulang videonya. Setelah melakukan semua perubahan, saya mengirimkan kembali permainan saya untuk moderasi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tiga hari kemudian, permainan disetujui, setelah memindahkannya ke bagian "Gaya Kamera". </font><font style="vertical-align: inherit;">Jujur, saya tidak ingat bagian yang saya masukkan awalnya (dan bagian, atau, dengan kata lain, kategori, perlu dipilih). </font><font style="vertical-align: inherit;">Ini tidak jelas, karena tidak ada bagian permainan untuk Instagram. </font><font style="vertical-align: inherit;">Tapi, oke, sekarang kita akan tahu di mana harus meletakkan game baru. </font><font style="vertical-align: inherit;">Jika game akan muncul di masa depan, maka, mungkin, Instagram harus menambahkan bagian baru.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat mencoba topeng dengan membuka profil pembuatnya di Instagram dan mengklik ikon topengnya di bawah ini (emoticon dengan dua plus). </font><font style="vertical-align: inherit;">Hal yang sama berlaku untuk game bertopeng. </font><font style="vertical-align: inherit;">Sebelumnya, selama pengujian beta topeng, itu juga perlu berlangganan ke penulis. </font><font style="vertical-align: inherit;">Namun sekarang aturan ini telah dibatalkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mereka tidak membayar uang untuk membuat topeng dan tidak ada toko topeng berbayar tempat mereka bisa dijual, seperti aplikasi di toko-toko terkenal. Selain itu, Anda tidak perlu membayar untuk penempatan masker yang Anda buat di profil Anda. Hanya perlu menunggu berlalunya moderasi. Namun, banyak blogger dan perusahaan memesan pengembangan masker bermerek untuk mereka sendiri. Yah, tentu saja, Anda dapat meminta pelanggan Anda untuk mencoba topeng yang Anda buat, dan memainkan game Anda, menyiarkan semua ini ke cerita Instagram. Tindakan tersebut dapat menghasilkan apa yang disebut efek virus, terutama jika gim ini menarik. Ini dapat membantu mempromosikan akun Anda. Namun, sekarang semua orang tidak terlalu malas untuk melakukan topeng. Tapi ide game bertopeng Instagram masih cukup baru. Selain itu, ada ambang masuk yang lebih tinggi dan lebih sedikit kompetisi,karena tidak setiap pembuat topeng adalah pemrogram untuk menulis permainan yang lengkap.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id486480/index.html">Waymo Robocars (Google) mulai mengirimkan paket di Phoenix, AS</a></li>
<li><a href="../id486482/index.html">Wajah unik: menghitung pengunjung, mencari orang luar, identifikasi dalam sistem pengenalan</a></li>
<li><a href="../id486484/index.html">Novel Coronavirus nCOV / 2019-nCoV / NCP / COVID19: Prakiraan, Statistik, Perlindungan, Berita [cetak ulang ke-4, rev.07.03]</a></li>
<li><a href="../id486488/index.html">Sistem Operasi Sivelkiriya: Deskripsi Pendahuluan</a></li>
<li><a href="../id486492/index.html">ICloud phisher dan di mana mereka tinggal</a></li>
<li><a href="../id486500/index.html">Komponen Web dan Standar Terbuka</a></li>
<li><a href="../id486506/index.html">Edisi # 30: Pelatihan TI - masalah saat ini dan tantangan dari perusahaan terkemuka</a></li>
<li><a href="../id486510/index.html">Menampilkan Informasi Pengecualian Sebelum Keluar Darurat</a></li>
<li><a href="../id486512/index.html">Secara singkat tentang cara mengajar Brother MFP untuk memindai di Windows Server</a></li>
<li><a href="../id486514/index.html">Weekend Reading: 10 bahan tentang replika kartu suara, perpustakaan suara terbuka dan perangkat lunak audio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>