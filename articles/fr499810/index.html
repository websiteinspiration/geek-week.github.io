<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî∞ üßôüèº üòë Pourquoi sommes-nous pass√©s √† Selenide en √©crivant plus de 200 nouveaux autotests en cours de route üç¥ „äóÔ∏è ‚ôüÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, je suis un outil d'automatisation des tests pour l'un des projets d'une grande entreprise. Dans cet article, je vais vous expliquer pourquoi ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pourquoi sommes-nous pass√©s √† Selenide en √©crivant plus de 200 nouveaux autotests en cours de route</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/maxilect/blog/499810/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, je suis un outil d'automatisation des tests pour l'un des projets d'une grande entreprise. </font><font style="vertical-align: inherit;">Dans cet article, je vais vous expliquer pourquoi nous avons d√©cid√© de passer de Serenity √† Selenide. </font><font style="vertical-align: inherit;">Nous avons une t√¢che √† grande √©chelle, et bien que le changement de la pile technologique ait pris un certain temps, plus tard, il s'est plus que pay√© en acc√©l√©rant la r√©daction des tests et en effectuant une r√©gression.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/cu/r3/wzcur3lohguxx4c6qnnjfp9wgri.jpeg" alt="image"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant d'arriver au point, un peu sur la t√¢che dans son ensemble. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, je ne peux pas divulguer les d√©tails du projet selon les termes de la NDA. En fait, ce sont quelques-uns des outils pour un centre d'appels d'une grande entreprise - acheminement des appels, s√©paration des op√©rateurs par th√®me d'appels, etc. dans une belle interface utilisateur. L'interface, soit dit en passant, est fournie non seulement aux op√©rateurs, mais √©galement aux contr√¥leurs qui √©coutent et √©valuent les appels s√©lectionn√©s. Surtout, il existe un syst√®me de diff√©renciation des droits et un panneau d'administration qui vous permet de configurer toutes les fonctions int√©gr√©es - de la t√©l√©phonie aux classements disponibles pour les contr√¥leurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ensemble du volume de fonctionnalit√©s est divis√© en plusieurs projets: t√©l√©phonie, panneau utilisateur et panneau d'administration. </font><font style="vertical-align: inherit;">Les trois projets sont en d√©veloppement actif. </font><font style="vertical-align: inherit;">Et ma t√¢che est d'automatiser les tests sur ces projets au sens large du terme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour certaines des fonctionnalit√©s d√©velopp√©es, des tests automatiques existaient d√©j√†, mais le sp√©cialiste qui les a d√©velopp√©s a quitt√© l'entreprise, il est donc apparu un certain devoir technique d'automatiser les tests. </font><font style="vertical-align: inherit;">Au total, une cinquantaine d'autotests ont √©t√© r√©dig√©s, mais la grande majorit√© d'entre eux sont compl√®tement obsol√®tes, car </font><font style="vertical-align: inherit;">la fonctionnalit√© est all√©e tr√®s loin. </font><font style="vertical-align: inherit;">Par cons√©quent, au d√©part, la t√¢che consistait √† mettre √† jour tout cela.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise √† jour de la pile</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les autotests existants ont √©t√© √©crits √† l'aide de la biblioth√®que Serenity. En fait, ils ont d√ª √™tre r√©√©crits √† nouveau, il √©tait donc inutile de conserver les d√©veloppements existants. La biblioth√®que elle-m√™me m'√©tait famili√®re, mais personnellement, je ne la consid√®re pas comme un outil optimal. Donc, comprenant la quantit√© de travail, j'ai d√©cid√© de passer √† Selenide d√®s le d√©but. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selenide est un outil assez populaire pour lequel il existe de nombreuses solutions toutes faites. Certaines des fonctionnalit√©s de Selenide sont √©galement disponibles pour les analogues - Atlas, Selenium, HTMLElements, etc. Mais chacun √† sa mani√®re ne nous convenait pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le s√©l√©nium est la base du s√©l√©niure. Mais pour nous, c'est un niveau trop bas. Cela n'a aucun sens de r√©inventer la roue quand il existe une solution toute faite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlas est apparu r√©cemment. Il est suffisamment brut et ne prend pas en charge Groovy.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HtmlElements est bon pour tout le monde, mais est obsol√®te et non pris en charge. Il existe √©galement JDI, mais il pr√©sente des probl√®mes de multithreading. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Serenity, pr√©c√©demment utilis√© sur le projet, √©tait trop lourd. Tout y est tellement interconnect√© que pour ajouter un nouveau gestionnaire d'√©v√©nements ou un intercepteur, une douzaine de classes ont d√ª √™tre r√©√©crites (et cela n'a pas abouti √† chaque fois). De plus, Surenity n'a pas pu connecter Allure, la norme r√©elle de l'industrie et de l'entreprise pour g√©n√©rer des rapports de test. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Selenide, du point de vue de l'automatisation, tout est beaucoup plus simple. Par exemple, il n'est pas n√©cessaire de d√©crire s√©par√©ment les √©tapes - attacher aux m√©thodes, etc. √âtant donn√© qu'il prend en charge Allure pr√™t √† l'emploi, toutes les actions li√©es √† l'utilisation des √©l√©ments Web tombent automatiquement dans le rapport de test.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, Selenide prend en charge PageFactory, Page Object et PageElement. Cela rend le code plus lisible. De plus, il existe des attentes internes pour le moment o√π l'√©l√©ment appara√Æt - il n'est pas n√©cessaire d'indiquer explicitement que vous devez arr√™ter le test pendant quelques secondes avant de continuer (le d√©lai d'expiration est d√©fini dans les configurations). Les attentes explicites existent s√©par√©ment - vous pouvez explicitement red√©finir le d√©lai d'expiration des √©l√©ments n√©cessaires √† chaque √©tape du test. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Id√©alement, Selenide dispose d'un ensemble de diff√©rentes m√©thodes pr√™tes √† l'emploi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que j'√©tais seul dans l'√©quipe au d√©but de la transition de Serenity √† Selenide, l'avantage suppl√©mentaire √©tait que j'avais d√©j√† une exp√©rience suffisante avec Selenide et Groovy, afin que je puisse rapidement mettre en ≈ìuvre des solutions toutes faites et par la suite d√©penser moins d'efforts pour les soutenir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La transition a √©t√© presque indolore. Nous avons impl√©ment√© Selenide en collaboration avec Allure. Allure vous permet de cr√©er des rapports lisibles et m√™me quelque peu beaux, qui montrent clairement quelles √©tapes ont √©chou√© et avec quelle erreur. Pr√™t √† l'emploi, vous pouvez joindre des captures d'√©cran de pages Web aux rapports. Nous ajoutons m√™me une vid√©o de la course, le code source de la page, les logs du navigateur et du pilote web.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La migration des tests existants a n√©cessit√© un minimum d'effort. </font><font style="vertical-align: inherit;">Ce que Serenity a, ce que Selenide a, ce sont des PageObjects avec des annotations @FindBy. </font><font style="vertical-align: inherit;">Serenity et Allure utilisent les m√™mes annotations Step. </font><font style="vertical-align: inherit;">J'ai d√ª mettre √† jour le mod√®le, l'imbrication des √©l√©ments les uns dans les autres, l'ordre d'appeler les √©tapes de test. </font><font style="vertical-align: inherit;">Certains tests ont √©t√© compl√®tement supprim√©s, certains ont √©t√© r√©√©crits √† partir de z√©ro, et quelque part une simple mise √† jour des localisateurs √©tait suffisante. </font><font style="vertical-align: inherit;">En fait, le d√©placement est devenu une t√¢che triviale √† laquelle la plupart des automatiseurs d'interface utilisateur doivent faire face lors de la conception d'une application Web.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise √† jour du test</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir mis √† jour la pile technologique, ils ont repris les tests eux-m√™mes. Soit dit en passant, une partie de ce travail a d√©j√† √©t√© achev√©e dans le cadre de la transition vers une nouvelle pile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de l'arri√©r√© accumul√© de la fonctionnalit√© des projets, ils devraient quand m√™me √™tre r√©√©crits - c'est plus rentable dans le temps que de rechercher des incoh√©rences dans un tel volume de code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, environ 220 autotests ont √©t√© √©crits en ce moment pour le front-end et le back-end. L'accent sera mis sur le backend dans le d√©veloppement ult√©rieur, car la plupart des √©l√©ments fonctionnels du front-end sont d√©j√† impliqu√©s dans les autotests. Dans le m√™me temps, il est en constante √©volution, de sorte que plus il y a de tests sur le front-end, plus il faut consacrer de forces √† leur soutien.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ayant des ressources de temps infinies, nous essayons toujours de diriger les efforts vers ce qui nous permettra de r√©duire les co√ªts de main-d'≈ìuvre pour le support, en couvrant autant que possible les fonctionnalit√©s. </font><font style="vertical-align: inherit;">D√©sormais, la couverture des autotests d√©passe l√©g√®rement 50%.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tests r√©√©crits sur Selenide sont devenus plus compacts et pr√©cis en raison de la r√©utilisation r√©p√©t√©e du code - tout cela gr√¢ce aux capacit√©s de la biblioth√®que elle-m√™me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mettant √† jour les tests, nous avons pris en compte qu'ils doivent √™tre ex√©cut√©s simultan√©ment (dans plusieurs threads). </font><font style="vertical-align: inherit;">Les tests √©taient auparavant ex√©cut√©s sur des machines virtuelles distinctes. </font><font style="vertical-align: inherit;">Mais la transition vers Selenide nous a permis de parall√©liser encore plus la t√¢che, en les ex√©cutant dans plusieurs threads.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En gros, la transition vers un nouveau cadre lui-m√™me a augment√© le nombre de threads lanc√©s simultan√©ment de 3 √† 8, et l'optimisation ult√©rieure des tests - jusqu'√† 50. En cons√©quence, 100 tests d'interface utilisateur s'ex√©cutent en seulement 10 minutes.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le multithreading, soit dit en passant, est un autre avantage pour lequel nous avons choisi Selenide. Ce n'est pas une grosse couche de passe-partout, vous √©crivez un minimum de code. Il n'y a pas d'√©criture superflue dont Selenium a besoin pour pr√©parer le projet au lancement. Tout ce dont vous avez besoin pour ex√©cuter les tests est d√©j√† pr√™t √† l'emploi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parall√®lement √† la mise √† jour et √† l'√©criture de nouveaux tests, j'ai organis√© une formation pour les gars du d√©partement des tests, les aidant √† passer du test manuel au test complet, de sorte qu'il soit arriv√© dans le r√©giment d'automatisation du projet. La pile technologique utilis√©e a un seuil d'entr√©e inf√©rieur et Internet regorge de documentation et de vid√©os sur la fa√ßon de r√©soudre certains probl√®mes. Un mois plus tard, j'ai √©t√© rejoint par quelques testeurs qui pouvaient effectuer des t√¢ches li√©es √† l'automatisation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√©j√† toute une √©quipe, nous avons pu optimiser les tests de r√©gression. Si auparavant la r√©gression a pris 7 jours √† l'√©quipe, maintenant les m√™mes t√¢ches sont effectu√©es pendant 4 jours, soit Nous avons r√©duit le temps des tests de pr√®s de 2 fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe de nombreux sc√©narios √† venir qui doivent encore √™tre automatis√©s. Nous avons automatis√© les tests de fum√©e presque compl√®tement, mais nous sommes maintenant pass√©s aux sc√©narios de test les plus exigeants en main-d'≈ìuvre. Cela contribuera √† r√©duire davantage les temps de recours. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturellement, nous d√©velopperons une infrastructure de test. Pr√©voit d'introduire un serveur Mock. Maintenant, nous testons tout sur un vrai stand, g√©n√©rant des donn√©es de test. Cela prend du temps et des ressources. Le faux serveur vous permettra d'ex√©cuter des autotests sans cette pr√©paration pr√©alable (nous avons √©crit sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faux serveur pour un autre projet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pr√©voyons √©galement d'introduire un enregistrement d'autotest afin que vous puissiez √©crire un script TestRail bas√© sur une pi√®ce obtenue en cliquant directement sur l'interface dans le navigateur. </font><font style="vertical-align: inherit;">En sortie, on obtient une sorte de prototype d'autotest. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auteur de l'article: Yuri Kudryavtsev, sp√©cialiste des tests de logiciels automatis√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Nous publions nos articles sur plusieurs sites du Runet. </font><font style="vertical-align: inherit;">Abonnez-vous √† nos pages sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VK</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instagram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cha√Æne Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour en savoir plus sur toutes nos publications et autres actualit√©s Maxilect.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr499798/index.html">Deux tapas √† l'argent: comment nous avons d√©velopp√© un bot de chat financier avec √©mission instantan√©e de cartes en Azerba√Ødjan</a></li>
<li><a href="../fr499802/index.html">Gamedev, cyberpunk et philosophie √©ternelle: 3 mini-s√©ries de week-end</a></li>
<li><a href="../fr499804/index.html">Comment travailler efficacement avec des probl√®mes sur des probl√®mes sur GitHub</a></li>
<li><a href="../fr499806/index.html">Savez-vous l'anglais? D√©couvrez jusqu'o√π vous pouviez aller dans le pass√©</a></li>
<li><a href="../fr499808/index.html">Exp√©rience client - comment r√©fl√©chir et garantir une exp√©rience client de qualit√©</a></li>
<li><a href="../fr499812/index.html">Num√©ro 37: Formation informatique - probl√®mes et d√©fis actuels des grandes entreprises</a></li>
<li><a href="../fr499814/index.html">Comment nos capteurs ont pass√© leur premier hiver</a></li>
<li><a href="../fr499816/index.html">Publication des sp√©cifications et des prix du processeur Intel Core de 10e g√©n√©ration</a></li>
<li><a href="../fr499818/index.html">Marketing de t√©l√©gramme ouzbek</a></li>
<li><a href="../fr499820/index.html">Pourquoi nous avons choisi Kotlin comme l'une de nos langues cibles. Partie 2: Kotlin Multiplatform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>