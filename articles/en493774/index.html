<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äç‚úàÔ∏è üîö üïë Optimization of cloud services in AnyConnect VPN tunnel on Cisco ASA üë©üèΩ‚Äçüé§ üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® üëÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many companies are switching to using cloud services in their business around the world, including office applications, BigData services, chat / video...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Optimization of cloud services in AnyConnect VPN tunnel on Cisco ASA</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cisco/blog/493774/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Many companies are switching to using cloud services in their business around the world, including office applications, BigData services, chat / video / audio communication for rallies / training, and many others. </font><font style="vertical-align: inherit;">However, due to the mass transfer to remote work of employees, one way or another, access to the corporate network is required</font></font><del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(unless of course the customer does not fully work on the cloud platform)</font></font></del><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, in order to make access secure, as a rule, services such as </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote-Access VPN are used</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Classically, such services can either completely direct all traffic of the remote client to the VPN tunnel, or selectively direct or exclude traffic from the tunnel based on IPv4 / IPv6 subnets.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Many security guards will decide that the best option would be to use the full tunnelall traffic option to fully control all user traffic at the time of connection to the corporate network and the inability to parallel output data through an uncontrolled Internet connection. </font><font style="vertical-align: inherit;">However, there is another scales ...</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">organize Box / Dropbox / SharePoint file sharing directly to the cloud</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with the speed of a home Internet channel, bypassing a slow corporate VPN?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to organize </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a Webex / Skype connection directly with a subscriber</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> without having it through an HQ VPN gateway, creating communication delays and reducing the quality of communication?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to make</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> only </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certain cloud services work outside the VPN tunnel</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> so that the user uses them directly through the home Internet and control the rest of the untrusted services centrally?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effectively reduce the load on the VPN gateway</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> without passing traffic through trusted cloud applications through it?</font></font></li>
</ul><a name="habracut"></a><br>
<p>  <strong>   </strong>     <strong> VPN-</strong>,                       VPN-,  ,  <strong>         VPN</strong>.         VPN, :</p><br>
<ul>
<li>     ( Office365, Webex  ..)</li>
<li>            (Webex, Skype, Jabber  ..)  /      .</li>
</ul><br>
<p>    VPN              .</p><br>
<p>       VPN,    : </p><br>
<ul>
<li>          IP          IP;</li>
<li>IP         ,       ;</li>
</ul><br>
<p>                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Dynamic Split Tunneling</a>,         ,    <strong>Cisco AnyConnect 4.6</strong>   VPN   <strong>Cisco ASA</strong>.</p><br>
<p> <strong>Dynamic Split Tunneling</strong>   <strong></strong>  <strong></strong>,  <strong>   VPN-  ,    </strong>. </p><br>
<p><strong>  .</strong></p><br>
<p>    Cisco ASA    /        AnyConnect    Group-Policy.  , VPN               (   IP    )        /   .</p><br>
<p><strong>  </strong></p><br>
<p>  AnyConnect VPN  Cisco ASA       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> ASA VPN Load-Balancing </a></p><br>
<ol>
<li>  AnyConnect,      :<br>
<pre><code class="plaintext hljs">!<font></font>
ASA(config)# webvpn<font></font>
ASA(config-webvpn)# anyconnect-custom-attr dynamic-split-exclude-domains description dynamic-split-exclude-domains<font></font>
!</code></pre></li>
<li><p>       ,            (MS Skype for Business, MS Exchange Online, MS Sharepoint Online, MS O365, Cisco AMP for Endpoints, Cisco Webex) <strong>(  Group-Policy     !      510 )</strong>:</p><br>
<ul>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Microsoft </a>;</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Cisco AMP</a>;</li>
<li>  Cisco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Webex Teams</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Cisco Webex Meetings</a></li>
</ul><br>
<pre><code class="plaintext hljs">!<font></font>
ASA(config)# anyconnect-custom-data dynamic-split-exclude-domains SKYPE skype.com, lync.com, teams.microsoft.com, skypeforbusiness.com<font></font>
!<font></font>
ASA(config)# anyconnect-custom-data dynamic-split-exclude-domains EXCHANGE-ONLINE outlook.office.com, outlook.office365.com, smtp.office365.com, outlook.com, office.com<font></font>
!<font></font>
ASA(config)# anyconnect-custom-data dynamic-split-exclude-domains SHAREPOINT-ONLINE sharepoint.com<font></font>
!<font></font>
ASA(config)# anyconnect-custom-data dynamic-split-exclude-domains O365 online.office.com, officeapps.live.com, msappproxy.net, msftidentity.com, account.activedirectory.windowsazure.com, windows.net, microsoftonline.com, autologon.microsoftazuread-sso.com, microsoftonline-p.net, graph.microsoft.com, graph.windows.net, login.microsoft.com, login.windows.net, office.com, cloudappsecurity.com, admin.microsoft.com<font></font>
!<font></font>
ASA(config)# anyconnect-custom-data dynamic-split-exclude-domains CISCO-AMP amp.cisco.com, amp.sourcefire.com, panacea.threatgrid.com, panacea.threatgrid.eu<font></font>
!<font></font>
ASA(config)# anyconnect-custom-data dynamic-split-exclude-domains CISCO-WEBEX wbx2.com, webex.com, ciscospark.com, webexcontent.com, activate.cisco.com, webapps.cisco.com, accompany.com, huron-dev.com, sparkpostmail1.com, giphy.com, safebrowsing.googleapis.com, walkme.com, s3.walkmeusercontent.com, speech.googleapis.com, texttospeech.googleapis.com, crashlytics.com, eum-appdynamics.com, amplitiude.com, segment.com, segment.io<font></font>
!</code></pre><br>
<p>       Webex, AMP  Skype</p><br>
<pre><code class="plaintext hljs">!<font></font>
ASA(config)# anyconnect-custom-data dynamic-split-exclude-domains CLOUD-SERVICES webex.com, wbx2.com, webexcontent.com, amp.cisco.com, amp.sourcefire.com, panacea.threatgrid.com, panacea.threatgrid.eu, skype.com, lync.com, teams.microsoft.com, skypeforbusiness.com<font></font>
!</code></pre><br>
<p>  ,   ,       ,        .  ,     <strong>webex.com</strong>,   <strong>cisco.webex.com</strong>    .</p><br>
</li>
<li>      Group-Policy:<br>
<pre><code class="plaintext hljs">!<font></font>
ASA(config)# group-policy ASHES-VPN attributes<font></font>
ASA(config-group-policy)# anyconnect-custom dynamic-split-exclude-domains value CLOUD-SERVICES<font></font>
!</code></pre></li>
<li><p>  VPN,      ,        VPN! </p><br>
<ul>
<li>        VPN       :<br>
<img src="https://habrastorage.org/webt/3f/l_/17/3fl_178cpnwvrqlev1nxlwxug3w.png"><br>
        <strong>webex.com</strong>    <strong>cisco.webex.com</strong>:<br>
<img src="https://habrastorage.org/webt/cx/8l/pq/cx8lpqjvq2a5bng6z0ffpiydsk8.png"></li>
<li>          ,   <strong>tunelall</strong> :<br>
<img src="https://habrastorage.org/webt/u2/eu/gb/u2eugb-lc3uemm2g3v0rn__vhc8.png"></li>
</ul><br>
</li>
</ol><br>
<p><strong>UPDATE: </strong>    Microsoft  ,          Webex  Office365,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</p><br>
<p><strong></strong>   ,     ()     Office365   , Skype  Webex            VPN-      .              ,         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</p><br>
<p>  !</p><br>
<p>P.S.     ,       "" =)</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493758/index.html">Artificial intelligence will first create a corpus of ancient Slavic manuscripts</a></li>
<li><a href="../en493760/index.html">Li-Ion technology: unit cost decreases faster than predicted</a></li>
<li><a href="../en493762/index.html">How to organize the backend of a mobile application?</a></li>
<li><a href="../en493768/index.html">React Native Listing</a></li>
<li><a href="../en493772/index.html">Top 10 Kubernetes Tips and Tricks</a></li>
<li><a href="../en493790/index.html">Where did COVID-19 come from, and how to deal with it?</a></li>
<li><a href="../en493792/index.html">Reports of the second ROS Meetup on robot navigation</a></li>
<li><a href="../en493794/index.html">How the Moscow office of FunCorp switched to udalenka in 1 day</a></li>
<li><a href="../en493796/index.html">4 best design patterns for automated testing (and 86 more)</a></li>
<li><a href="../en493798/index.html">There is no design in 1C UX / UI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>