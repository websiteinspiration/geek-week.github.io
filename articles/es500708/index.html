<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§£ üßï ‚òÉÔ∏è Seguridad y DBMS: lo que necesita recordar al elegir herramientas de protecci√≥n ü¶ä üëßüèæ ü§òüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mi nombre es Denis Rozhkov, soy el jefe de desarrollo de software en Gazinformservice, en el equipo de productos de Jatoba . La legislaci√≥n y las regu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Seguridad y DBMS: lo que necesita recordar al elegir herramientas de protecci√≥n</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/500708/"><h1><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e1/315/3ed/1e13153edc98d4ac4b2de6858a7ea48c.png"></div></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi nombre es Denis Rozhkov, soy el jefe de desarrollo de software en Gazinformservice, en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">equipo de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> productos de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">Jatoba</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La legislaci√≥n y las regulaciones corporativas imponen ciertos requisitos para la seguridad del almacenamiento de datos. </font><font style="vertical-align: inherit;">Nadie quiere que terceros obtengan acceso a informaci√≥n confidencial, por lo tanto, los siguientes problemas son importantes para cualquier proyecto: identificaci√≥n y autenticaci√≥n, gesti√≥n del acceso a datos, garantizar la integridad de la informaci√≥n en el sistema, registrar eventos de seguridad. </font><font style="vertical-align: inherit;">Por lo tanto, quiero hablar sobre algunos puntos interesantes con respecto a la seguridad DBMS.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este art√≠culo fue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">@Databases Meetup,</font></a><font style="vertical-align: inherit;"> alojado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si no quieres leer, puedes ver:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/n-54j9FHaMU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El art√≠culo tendr√° tres partes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥mo proteger las conexiones.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© es una auditor√≠a de acciones y c√≥mo registrar lo que est√° sucediendo por parte de la base de datos y conectarse a ella?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥mo proteger los datos en la base de datos y qu√© tecnolog√≠as existen para esto.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a7d/19f/d89/a7d19fd894a9ea6e3f0ff7a0ad42db36.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los tres componentes de la seguridad DBMS: protecci√≥n de conexi√≥n, auditor√≠a de actividad y protecci√≥n de datos.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protecci√≥n de conexi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede conectarse a la base de datos directa o indirectamente a trav√©s de aplicaciones web. </font><font style="vertical-align: inherit;">Como regla general, el usuario del lado del negocio, es decir, la persona que trabaja con el DBMS, no interact√∫a directamente con √©l. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de hablar sobre la seguridad de las conexiones, debe responder preguntas importantes que dependen de c√≥mo se construir√°n las medidas de seguridad:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si un usuario comercial es equivalente a un usuario DBMS;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øSe proporciona acceso a los datos de DBMS solo a trav√©s de la API que usted controla, o hay acceso a las tablas directamente?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si el DBMS est√° asignado en un segmento protegido separado, qui√©n interact√∫a con √©l y c√≥mo;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si se usa agrupaci√≥n / proxy y middleware, lo que puede cambiar la informaci√≥n sobre c√≥mo se construye la conexi√≥n y qui√©n usa la base de datos.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora veamos qu√© herramientas se pueden usar para proteger las conexiones:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilice soluciones de clase de firewall de base de datos. </font><font style="vertical-align: inherit;">Una capa adicional de protecci√≥n, al menos, aumentar√° la transparencia de lo que est√° sucediendo en el DBMS, como m√°ximo: puede proporcionar protecci√≥n de datos adicional.</font></font></li>
<li>  .     ,    .    ‚Äî      -,    ,   .    ,  ,      .<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>,    MS SQL Vulnerability Assessmen   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>.&nbsp;</li>
<li>    .   ,   ,       ,         , ,    .      .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure SSL, si no tiene una separaci√≥n de red del DBMS de los usuarios finales, no est√° en una VLAN separada. </font><font style="vertical-align: inherit;">En tales casos, es necesario proteger el canal entre el consumidor y el propio DBMS. </font><font style="vertical-align: inherit;">Las herramientas de protecci√≥n son de c√≥digo abierto.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo afectar√° esto el rendimiento de DBMS?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos un ejemplo de PostgreSQL de c√≥mo SSL afecta la carga de la CPU, aumentando los tiempos y disminuyendo el TPS, si se destinar√°n demasiados recursos si lo habilita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cargamos PostgreSQL usando pgbench: es un programa simple para ejecutar pruebas de rendimiento. </font><font style="vertical-align: inherit;">Ejecuta repetidamente una secuencia de comandos, posiblemente en sesiones de bases de datos paralelas, y luego calcula la velocidad promedio de transacci√≥n. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba 1 sin SSL y usando SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : se establece una conexi√≥n con cada transacci√≥n:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require&nbsp;<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vs</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba 2 sin SSL y usando SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : todas las transacciones se realizan en una conexi√≥n:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vs</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otras configuraciones</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">scaling factor: 1<font></font>
query mode: simple<font></font>
number of clients: 10<font></font>
number of threads: 1<font></font>
number of transactions per client: 5000<font></font>
number of transactions actually processed: 50000/50000</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados de la prueba</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIN SSL</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL</font></font></strong></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La conexi√≥n se establece en cada transacci√≥n</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">promedio de latencia</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">171,915 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">187,695 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps incluyendo conexiones que establecen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.168112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53,278062</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps excluyendo conexiones que establecen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64.084546</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.725846</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPC</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todas las transacciones se realizan en una conexi√≥n.</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">promedio de latencia</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6,722 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6,342 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps incluyendo conexiones que establecen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1587.657278</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1576.792883</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps excluyendo conexiones que establecen</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1588.380574</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1577.694766</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPC</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A cargas ligeras, el efecto de SSL es comparable al error de medici√≥n. Si la cantidad de datos transferidos es muy grande, la situaci√≥n puede ser diferente. Si establecemos una conexi√≥n para cada transacci√≥n (esto es raro, generalmente la conexi√≥n se comparte entre los usuarios), tiene una gran cantidad de conexiones / desconexiones, el efecto puede ser un poco m√°s. Es decir, puede haber riesgos para la degradaci√≥n del rendimiento, sin embargo, la diferencia no es tan grande como para no usar protecci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que existe una gran diferencia al comparar los modos de funcionamiento: dentro de la misma sesi√≥n, usted trabaja o es diferente. Esto es comprensible: se gastan recursos en la creaci√≥n de cada conexi√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tuvimos un caso cuando conectamos Zabbix en modo de confianza, es decir, no verificamos md5, no hab√≠a necesidad de autenticaci√≥n. Luego, el cliente solicit√≥ habilitar el modo de autenticaci√≥n md5. Esto dio una gran carga en la CPU, el rendimiento baj√≥. Comenzaron a buscar formas de optimizar. Una de las posibles soluciones al problema es implementar una restricci√≥n de red, crear VLAN separadas para el DBMS, agregar configuraciones para que quede claro qui√©n se conecta desde d√≥nde y eliminar la autenticaci√≥n. Tambi√©n puede optimizar la configuraci√≥n de autenticaci√≥n para reducir los costos de habilitar la autenticaci√≥n, pero generalmente usando diferentes m√©todos la autenticaci√≥n afecta el rendimiento y requiere que se tengan en cuenta estos factores al dise√±ar la potencia inform√°tica de los servidores (hardware) para un DBMS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusi√≥n: en una serie de soluciones, incluso peque√±os matices de autenticaci√≥n pueden afectar en gran medida el proyecto y es malo cuando queda claro solo cuando se implementa en un producto.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auditoria de acciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una auditor√≠a puede ser no solo un DBMS. </font><font style="vertical-align: inherit;">La auditor√≠a es la recepci√≥n de informaci√≥n sobre lo que est√° sucediendo en diferentes segmentos. </font><font style="vertical-align: inherit;">Puede ser tanto un firewall de base de datos como el sistema operativo en el que se basa el DBMS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En los DBMS comerciales de nivel empresarial con auditor√≠a, todo est√° bien, en c√≥digo abierto, no siempre. </font><font style="vertical-align: inherit;">Esto es lo que tiene PostgreSQL:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">registro predeterminado: registro incorporado;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensiones: pgaudit: si no tiene suficiente registro predeterminado, puede usar configuraciones separadas que resuelvan algunos de los problemas.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adici√≥n al informe en el video:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚ÄúEl registro b√°sico de operadores se puede proporcionar con la instalaci√≥n de registro est√°ndar con log_statement = all. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es aceptable para el monitoreo y otros usos, pero no proporciona el nivel de detalle que generalmente se necesita para una auditor√≠a. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No es suficiente tener una lista de todas las operaciones realizadas con la base de datos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n deber√≠a ser posible encontrar declaraciones espec√≠ficas que sean de inter√©s para el auditor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La herramienta de registro est√°ndar muestra lo que solicit√≥ el usuario, mientras que pgAudit se centra en los detalles de lo que sucedi√≥ cuando la base de datos realiz√≥ la solicitud. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, el auditor puede querer asegurarse de que se haya creado una tabla espec√≠fica en una ventana de mantenimiento documentada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto puede parecer una tarea simple para la auditor√≠a b√°sica y grep, pero qu√© pasa si te encuentras con algo como esto (intencionalmente confuso) ejemplo: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EJECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FIN $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El registro est√°ndar le dar√° esto: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LOG: instrucci√≥n: DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EJECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FIN $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que la b√∫squeda de una tabla de inter√©s puede requerir cierto conocimiento del c√≥digo en los casos en que las tablas se crean din√°micamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto no es ideal, ya que ser√≠a preferible simplemente buscar por nombre de tabla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ es donde pgAudit ser√° √∫til. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la misma entrada, generar√° esta salida en el registro:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDITOR√çA: SESI√ìN, 33.1, FUNCI√ìN, HACER ,,, "HACER $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
COMENZAR </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EJECUTAR 'CREAR TABLA importaci√≥n' || </font><font style="vertical-align: inherit;">'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; " </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIT: SESSION, 33,2, DDL, CREATE TABLE, TABLE, public.important_table, CREATE TABLE important_table (id INT) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No solo se registra el bloque DO, sino tambi√©n el texto completo CREATE TABLE con el tipo de operador, tipo de objeto y nombre completo, lo que facilita la b√∫squeda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en la conducci√≥n de la revista de operadores SELECT y DML pgAudit se puede configurar para registrar una entrada separada para cada relaci√≥n, a la que se hace referencia en la declaraci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No es necesario analizar para encontrar todas las declaraciones relacionadas con una tabla espec√≠fica ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) " .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo afectar√° esto el rendimiento de DBMS?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejecutemos las pruebas con la auditor√≠a completa habilitada y veamos qu√© sucede con el rendimiento de PostgreSQL. </font><font style="vertical-align: inherit;">Permitimos el registro m√°ximo de la base de datos en todos los aspectos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Casi no cambiamos nada en el archivo de configuraci√≥n, desde el importante: active el modo debug5 para obtener la m√°xima informaci√≥n. </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postgresql.conf</font></font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log_destination = 'stderr' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
logging_collector = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_truncate_on_rotation = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_age = 1d </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_size = 10MB </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_min_messages = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_error_statement = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_duration_statement = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_parse =</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug_print_rewritten = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_plan = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_pretty_print = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_checkpoints = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_connections = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_disconnections = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_duration = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_hostname = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_lock_waits = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_replication_commands = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_temp_files = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_timezone = </font><font style="vertical-align: inherit;">0</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En un DBMS PostgreSQL con par√°metros de 1 CPU, 2,8 GHz, 2 GB de RAM, 40 GB de HDD, realizamos tres pruebas de carga con los siguientes comandos:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ pgbench -p 3389 -U postgres -i -s 150 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 50 -j 2 -P 60 -T 600 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 150 -j 2 -P 60 -T 600 benchmark</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados de la prueba:</font></font></strong><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin iniciar sesi√≥n</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con registro</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiempo total de llenado de la base de datos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43,74 segundos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53,23 segundos</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPC</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">91%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba 1 (50 conexiones)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫mero de transacciones en 10 minutos.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">74169</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32445</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transacci√≥n / seg.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retraso medio</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">405 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">925 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba 2 (150 conexiones a 100 posibles)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫mero de transacciones en 10 minutos.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">81727</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31429</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transacci√≥n / seg.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">136</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">52</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retraso medio</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">550 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1432 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre tama√±os</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tama√±o DB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2251 MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2262 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tama√±o del registro de la base de datos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 Mb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4587 Mb</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pocas palabras: una auditor√≠a completa no es muy buena. </font><font style="vertical-align: inherit;">Los datos de la auditor√≠a resultar√°n en volumen, como los datos en la base de datos en s√≠, o incluso m√°s. </font><font style="vertical-align: inherit;">La cantidad de registro que se genera cuando se trabaja con el DBMS es un problema com√∫n en el producto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos fijamos en otros par√°metros:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La velocidad no cambia mucho: sin registro: 43.74 segundos, con registro: 53.23 segundos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El rendimiento en RAM y CPU se hundir√°, ya que debe crear un archivo con la auditor√≠a. </font><font style="vertical-align: inherit;">Tambi√©n se nota en lo productivo.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con un aumento en el n√∫mero de conexiones, por supuesto, el rendimiento se deteriorar√° ligeramente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En las corporaciones con auditor√≠a, es a√∫n m√°s dif√≠cil:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hay muchos datos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La auditor√≠a es necesaria no solo a trav√©s de syslog en SIEM, sino tambi√©n en archivos: de repente algo sucede con syslog, el archivo en el que se guardan los datos debe estar cerca de la base de datos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la auditor√≠a requiere un estante separado, para no hundirse en los discos de E / S, ya que ocupa mucho espacio;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sucede que los empleados de IS necesitan GOST en todas partes, requieren identificaci√≥n de invitado.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restricci√≥n de acceso a datos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos las tecnolog√≠as que se utilizan para proteger los datos y acceder a ellos en DBMS comerciales y de c√≥digo abierto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que se puede usar como un todo:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cifrado y ofuscaci√≥n de procedimientos y funciones (envoltura), es decir, herramientas y utilidades separadas que hacen que el c√≥digo sea ilegible del c√≥digo legible. </font><font style="vertical-align: inherit;">Es cierto, entonces no se puede cambiar ni refactorizar. </font><font style="vertical-align: inherit;">Tal enfoque a veces se requiere al menos en el lado de DBMS: la l√≥gica de las restricciones de licencia o la l√≥gica de autorizaci√≥n se encripta precisamente a nivel de procedimiento y funci√≥n.</font></font></li>
<li>     (RLS) ‚Äî       ,      ,   - -     .</li>
<li>   (Masking) ‚Äî          ,   ,    -    .  ,        .</li>
<li>  Security DBA/Application DBA/DBA ‚Äî , ,      ,        database-  application-.  open source   ,     .  ,        .</li>
<li>       .   ,    ,         .</li>
<li>     ‚Äî    .</li>
<li>End-to-end encryption   ‚Äî  client-side       .</li>
<li> . ,   ‚Äî    ,     .</li>
</ol><br>
<h3>     ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos un ejemplo de cifrado de columna en PostgreSQL. </font><font style="vertical-align: inherit;">Hay un m√≥dulo pgcrypto, que le permite almacenar campos seleccionados en forma cifrada. </font><font style="vertical-align: inherit;">Esto es √∫til cuando solo algunos datos son valiosos. </font><font style="vertical-align: inherit;">Para leer los campos cifrados, el cliente pasa la clave de descifrado, el servidor descifra los datos y los emite al cliente. </font><font style="vertical-align: inherit;">Sin una clave con sus datos, nadie puede hacer nada. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probemos con pgcrypto</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cree una tabla con datos cifrados y datos regulares. </font><font style="vertical-align: inherit;">A continuaci√≥n se muestra el comando para crear tablas, en la primera l√≠nea un comando √∫til es crear la extensi√≥n en s√≠ con el registro del DBMS:</font></font><br>
<br>
<pre><code class="plaintext hljs">CREATE EXTENSION pgcrypto;<font></font>
CREATE TABLE t1 (id integer, text1 text, text2 text);<font></font>
CREATE TABLE t2 (id integer, text1 bytea, text2 bytea);<font></font>
INSERT INTO t1 (id, text1, text2)<font></font>
VALUES (generate_series(1,10000000), generate_series(1,10000000)::text, generate_series(1,10000000)::text);<font></font>
INSERT INTO t2 (id, text1, text2) VALUES (<font></font>
generate_series(1,10000000),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, intentaremos hacer un muestreo de datos de cada tabla y ver los tiempos de ejecuci√≥n. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selecci√≥n de la tabla sin funci√≥n de cifrado</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select * from t1 limit 1000;" "host=192.168.220.129 dbname=taskdb<font></font>
user=postgres sslmode=disable" &gt; 1.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cron√≥metro est√° encendido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">texto1 | </font><font style="vertical-align: inherit;">texto2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
------ + ------- + ------- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 | </font><font style="vertical-align: inherit;">2 | </font><font style="vertical-align: inherit;">2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">3 | </font><font style="vertical-align: inherit;">3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
997 | </font><font style="vertical-align: inherit;">997 </font><font style="vertical-align: inherit;">997 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
998 | </font><font style="vertical-align: inherit;">998 </font><font style="vertical-align: inherit;">998,999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">999 </font><font style="vertical-align: inherit;">999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">1000 | </font><font style="vertical-align: inherit;">1000 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 filas) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiempo: 1.386 ms. </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muestreo de una tabla con funci√≥n de cifrado:</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select id, decrypt(text1, 'key'::bytea, 'bf'),<font></font>
decrypt(text2, 'key'::bytea, 'bf') from t2 limit 1000;"<font></font>
"host=192.168.220.129 dbname=taskdb user=postgres sslmode=disable" &gt; 2.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cron√≥metro est√° encendido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">descifrar | </font><font style="vertical-align: inherit;">descifrar </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
----- + -------------- + ------------ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">\ x31 | </font><font style="vertical-align: inherit;">\ x31 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 | </font><font style="vertical-align: inherit;">\ x32 | </font><font style="vertical-align: inherit;">\ x32 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">\ x33 | </font><font style="vertical-align: inherit;">\ x33 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
999 | </font><font style="vertical-align: inherit;">\ x393939 | </font><font style="vertical-align: inherit;">\ x393939 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">\ x31303030 | </font><font style="vertical-align: inherit;">\ x31303030 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 l√≠neas) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiempo: 50.203 ms </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados de la prueba</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin cifrado</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pgcrypto (descifrar)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B√∫squeda de 1000 filas</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,386 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50,203 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPC</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quince%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td>&nbsp;</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 5%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cifrado tiene un gran impacto en el rendimiento. </font><font style="vertical-align: inherit;">Se puede ver que el tiempo ha aumentado, ya que las operaciones de descifrado de datos cifrados (y el descifrado generalmente todav√≠a est√° envuelto en su l√≥gica) requieren recursos significativos. </font><font style="vertical-align: inherit;">Es decir, la idea de cifrar todas las columnas que contienen alg√∫n tipo de datos est√° cargada de un rendimiento reducido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, el cifrado no es una bala de plata que resuelve todos los problemas. </font><font style="vertical-align: inherit;">Los datos descifrados y la clave de descifrado en el proceso de descifrado y transferencia de datos se encuentran en el servidor. </font><font style="vertical-align: inherit;">Por lo tanto, las claves pueden ser interceptadas por aquellos que tienen acceso total al servidor de la base de datos, por ejemplo, un administrador del sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando toda la columna para todos los usuarios tiene una clave (incluso si no es para todos, pero para un conjunto limitado de clientes), esto no siempre es bueno y correcto. </font><font style="vertical-align: inherit;">Es por eso que comenzaron a hacer cifrado de extremo a extremo, en el DBMS comenzaron a considerar opciones para cifrar datos del cliente y el servidor, aparecieron los mismos repositorios de almac√©n de claves: productos separados que proporcionan administraci√≥n de claves en el lado de DBMS.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a97/d2d/cb2/a97d2dcb29c95253ff37b99f2bf1be40.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un ejemplo de tal cifrado en MongoDB</font></font></i></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funciones de seguridad en DBMS comerciales y de c√≥digo abierto</font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las funciones</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un tipo</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica de contrase√±as</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auditor√≠a</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protecci√≥n del c√≥digo fuente para procedimientos y funciones</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RLS</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cifrado</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Or√°culo</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Msql</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jatoba</font></font></strong></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensiones</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gratis</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensiones</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensiones</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensiones</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mongodb</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gratis</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disponible solo en MongoDB Enterprise</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tabla est√° lejos de estar completa, pero la situaci√≥n es la siguiente: en productos comerciales, los problemas de seguridad se han resuelto durante mucho tiempo, en c√≥digo abierto, por regla general, algunos complementos se utilizan para la seguridad, muchas funciones no son suficientes, a veces hay que agregar algo. Por ejemplo, pol√≠ticas de contrase√±a: en PostgreSQL hay muchas extensiones diferentes ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) que implementan pol√≠ticas de contrase√±a, pero, en mi opini√≥n, ninguna cubre todas las necesidades del segmento corporativo nacional. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© hacer si en ninguna parte es lo que se necesita</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Por ejemplo, quiero usar un DBMS espec√≠fico, en el que no hay funciones que requiera el cliente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego puede utilizar soluciones de terceros que funcionan con diferentes DBMS, por ejemplo, "Crypto DB" o "Garda DB". Si hablamos de soluciones del segmento dom√©stico, entonces ellos saben sobre GOST mejor que en c√≥digo abierto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La segunda opci√≥n es escribir lo que necesita, implementar el acceso a los datos y el cifrado en la aplicaci√≥n a nivel de procedimiento. Es cierto, con GOST ser√° m√°s dif√≠cil. Pero, en general, puede ocultar los datos seg√∫n sea necesario, ponerlos en el DBMS, luego obtenerlos y descifrarlos como deber√≠a, justo en el nivel de la aplicaci√≥n. Al mismo tiempo, piense inmediatamente en c√≥mo proteger√° estos algoritmos en la aplicaci√≥n. En nuestra opini√≥n, esto debe hacerse a nivel DBMS, porque funcionar√° m√°s r√°pido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta charla se realiz√≥ por primera vez en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Databases Meetup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por Mail.ru Cloud Solutions. Mira el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://www.youtube.com/redirect%3Fq%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otras apariciones e inscr√≠base para los anuncios de eventos de Telegram </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Around Kubernetes en Mail.ru Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu√© m√°s leer sobre el tema</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√°s que Ceph: MCS Block Cloud Storage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥mo elegir una base de datos para el proyecto, para no volver a seleccionar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es500696/index.html">C√≥mo los zapatos para correr est√°n tratando de adaptarse al pie femenino</a></li>
<li><a href="../es500698/index.html">Evgeny Katyshev: "OpenStreetMap no es adecuado para ninguna informaci√≥n"</a></li>
<li><a href="../es500700/index.html">Soporte para TLS1.3 y expansi√≥n de su cuenta personal: lo que se ha hecho para el primer trimestre de 2020</a></li>
<li><a href="../es500704/index.html">Los unicornios (Airbnb, Uber, Lyft, Careem) despiden a miles de empleados en medio de problemas durante la pandemia de coronavirus</a></li>
<li><a href="../es500706/index.html">Actualizaci√≥n de MySQL (Servidor Percona) de 5.7 a 8.0</a></li>
<li><a href="../es500712/index.html">Coronavirus digital: una combinaci√≥n de ransomware e infostealer</a></li>
<li><a href="../es500718/index.html">EPAM en modo remoto: c√≥mo funciona</a></li>
<li><a href="../es500720/index.html">Nuevos est√°ndares de seguridad de la informaci√≥n: hacen la vida m√°s dif√≠cil para los atacantes</a></li>
<li><a href="../es500722/index.html">"Hornear hasta que est√© listo": qui√©n guarda grabaciones de cintas raras de una manera tan inusual</a></li>
<li><a href="../es500724/index.html">C√≥mo las autoridades financieras de los Estados Unidos limitan el impacto negativo del juego en el declive</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>