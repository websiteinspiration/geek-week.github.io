<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òîÔ∏è üõçÔ∏è üî¥ Zabbix: a topologia de rede √© clara e autom√°tica üöÇ üë• üé∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gerenciar uma rede maior que um host local? N√£o controle, mas quer aprender? Convidamos voc√™ para o curso ‚ÄúLinux. N√≠vel 5. Zabbix. Monitorando a infra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zabbix: a topologia de rede √© clara e autom√°tica</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/486814/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerenciar uma rede maior que um host local? N√£o controle, mas quer aprender? Convidamos voc√™ para o curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúLinux. N√≠vel 5. Zabbix. Monitorando a infraestrutura de TI de uma empresa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">‚Äù</font></a><font style="vertical-align: inherit;"> No semin√°rio gratuito do centro de treinamento de especialistas da Universidade T√©cnica do Estado de Bauman Moscou, voc√™ aprender√° como ensinar o Zabbix a monitorar a rede automaticamente: encontre os existentes e adicione novos n√≥s, desenhe e atualize a topologia. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iv/1c/ut/iv1cutamccowubgbjxpirduuwwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O semin√°rio ser√° realizado pelo professor principal do centro "Especialista" em Bauman MSTU, o principal administrador do sistema da rede do MSTU. N.E. Bauman Vyacheslav Aleksandrovich Lokhturov. Inscreva-se (ou veja as grava√ß√µes) em nossos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semin√°rios gratuitos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ol√° a todos! </font><font style="vertical-align: inherit;">Meu nome √© Vyacheslav Lokhturov. </font><font style="vertical-align: inherit;">Trabalho como engenheiro na Universidade T√©cnica Estadual de Bauman Moscou. </font><font style="vertical-align: inherit;">Desde que me formei em 1997, trabalho como engenheiro. </font><font style="vertical-align: inherit;">Ao mesmo tempo, ensino no centro de treinamento n¬∫ 1 "especialista" - uma empresa amiga do MSTU. </font><font style="vertical-align: inherit;">Muitos outros professores e funcion√°rios trabalham l√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tema do webinar far√° parte do meu trabalho como engenheiro - um maravilhoso sistema de monitoramento ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Topologia de rede: plano de fundo, Wikipedia Baumanka, fontes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A grava√ß√£o do webinar pode ser visualizada neste link: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://wiki.val.bmstu.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - um formato wiki. Meus endere√ßos de email s√£o: val@bmstu.ru, val@specialist.ru. Este </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eu uso como engenheiro. Existem muitos materiais diferentes. Se voc√™ n√£o gostar, existem muitos materiais na Internet sobre o seu t√≥pico conosco ("Zabbix"). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do ponto de vista do material did√°tico e do ensino, uso a se√ß√£o "Materiais sobre a metodologia dos cursos de leitura": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/xt/bc/dxxtbcel7fbzpfzncdnohifiopy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E h√° uma se√ß√£o com webinars. Para cada uma das leituras feitas por mim, h√° um registro aqui: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y9/sy/on/y9syon5yqio6tinrekmuwju2qec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
eu imediatamente disse: ‚ÄúSe fizermos, vamos fazer o melhor! Vamos mostrar como a topologia de rede √© criada automaticamente no Zabbix. Em 45 minutos tenho que contar isso.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em rela√ß√£o √† topologia de rede: na Bauman MSTU, uma enorme rede; consequentemente, a topologia de rede √© o que realmente precisamos por um longo tempo. Historicamente, o Zabbix n√£o era o sistema que usamos no est√°gio inicial. Como todas as pessoas de departamentos como ci√™ncia da computa√ß√£o, gerenciamento, sistema de computadores, complexo e rede, todos gostamos de nos programar e agora programamos ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos uma pequena Wikipedia usada para o trabalho. E entre os elementos desta Wikipedia, h√° uma se√ß√£o dedicada √† comuta√ß√£o de rede. O acesso a esta Wikipedia ainda est√° fechado por uma pequena VPN: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/th/kw/nwthkwj2jsj-srqt6xkqrvgpps0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
agora mostrarei a apar√™ncia da topologia de rede em nossa universidade. Vale a pena ver; e depois compare com o resultado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ma/a2/7h/maa27hc-e9fct-_lqqkig-pn6gs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece-me que tudo est√° claro: todos os comutadores e seu caminho para o comutador raiz; </font><font style="vertical-align: inherit;">se algo estiver faltando, recuperaremos rapidamente desse arquivo de texto. </font><font style="vertical-align: inherit;">A topologia de rede √© criada diariamente. </font><font style="vertical-align: inherit;">Tudo est√° bem, mas n√£o espetacular, √© claro. </font><font style="vertical-align: inherit;">Dif√≠cil de vender. </font><font style="vertical-align: inherit;">Portanto, temos esse esquema na universidade.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A topologia de rede √© necess√°ria quando algum switch desaparece. </font><font style="vertical-align: inherit;">Para entender onde ele estava conectado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar ver algo mais espetacular. E uma certa refer√™ncia ao que faremos √© este artigo no f√≥rum: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kj/an/rq/kjanrq-tf4gagfaq3sclcshi7ji.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5r/uw/v-/5ruwv-zvi6w7keseask1zaxrctm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diz que h√° algum tipo de script maravilhoso escrito em minha antiga linguagem favorita, Perl, que o equipamento de rede pesquisa, faz algumas conclus√µes e, de alguma forma, milagrosamente fornece os resultados ao Zabbix. Mas n√£o usaremos o Perl, mas usaremos outra coisa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s dizemos adeus ao que temos. Vamos seguir praticando. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fu/jf/vx/fujfvxfzwxeijmvenkvnsghzxzs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ficarei feliz se voc√™ puder reproduzir tudo isso em casa e tentar se preparar para isso tudo o que for poss√≠vel. Ap√≥s o webinar, voc√™ desejar√° repetir tudo e come√ßar com o fato de precisar implantar o Zabbix, uma m√°quina virtual, uma rede. Como fazer isso?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em casa, voc√™ digita o comando ipconfig e v√™ que possui uma rede IP em casa (talvez uma diferente, mas geralmente essa): Eu tenho o </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/0m/sd/nw0msdf_bqqc1rbf2v9poyhvd8m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quinto endere√ßo (192.168.1.5) aqui e voc√™ pode ter o 20 ou 30 ... Certamente, existe um roteador Wi-Fi que emite esses endere√ßos. </font><font style="vertical-align: inherit;">Portanto, agora vou desenhar uma topologia baseada no que pode estar em sua casa, para que voc√™ possa reproduzi-la:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z_/il/pv/z_ilpvbesmx9x8x0ntvfyvgz6by.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ tem um roteador WIFI.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O sistema em que voc√™ deseja reproduzir o webinar.</font></font></li>
<li>  192.168.1/24 ‚Äì 1-  WI-FI-,  5-, , ‚Äì   .<br>
   .   ,    ‚Äì   ,     2, 10, 20 ,     .  ,   linux-,    ¬´¬ª.            ,     100. ,       192.168.1.100.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde conseguir um carro? </font><font style="vertical-align: inherit;">Nada impede a distribui√ß√£o Linux. </font><font style="vertical-align: inherit;">Eu sou um grande f√£ desta distribui√ß√£o. </font><font style="vertical-align: inherit;">N√£o criaremos hol√≠voros - eu o amo, eu o escolho, eu o uso em cursos. </font><font style="vertical-align: inherit;">Voc√™ pode instalar e instalar neste site: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/0p/7_/fw0p7_zevdd2b-hy4_myzkofi78.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que n√£o passemos 45 minutos instalando o Debian, vou tirar uma imagem pr√©-instalada. </font><font style="vertical-align: inherit;">Quem precisa - escreva para o correio, enviarei a voc√™ esta imagem, embora n√£o exista nada particularmente destacado (para n√£o perder tempo instalando): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hd/sv/ju/hdsvju1d3xv2tlcppgmw7ze0fhk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto estiver instalado, voc√™ pode ver a se√ß√£o no manual ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implanta√ß√£o de estande</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° uma hist√≥ria sobre o comando ipconfig: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/3m/a3/uz3ma3gdidyrxl4ni-foi1xerse.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ent√£o, quando a m√°quina gira: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1r/by/6n/1rby6nfa4-ie37px_jgo2gzdmsg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode dar um nome nas configura√ß√µes, dar mais RAM: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yb/ru/el/ybruel8q66rozvw0tlyjxg3gaxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
existem virtualiza√ß√µes diferentes - o VirtualBox √© bom para uso dom√©stico. Na empresa, n√≥s e meus amigos usamos o VSphere (estamos muito satisfeitos com o produto da VMware), mas existem cursos mais do que suficientes para o VirtualBox. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rede: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9s/ie/ao/9sieaok8u0wwjefjyo8fgmze0y4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
como estamos dizendo que esta m√°quina ser√° conectada √† nossa rede, podemos trabalhar com ela - ela deve ser conectada por uma ponte a um adaptador f√≠sico. Regenerarei o endere√ßo do Mac. Eu lancei nossa m√°quina virtual:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jx/tu/vw/jxtuvw-er7hyjbhh8de-zowhqcg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E depois de iniciar, fa√ßo uma configura√ß√£o. </font><font style="vertical-align: inherit;">O manual lista os arquivos que precisam ser editados: atribua um nome √† m√°quina, √© desej√°vel editar o arquivo hosts, resolv.conf (respons√°vel pelo cliente DNS) e o endere√ßo IP escolhido por n√≥s - esses quatro arquivos devem ser editados. </font><font style="vertical-align: inherit;">Vou tentar faz√™-lo o mais r√°pido poss√≠vel.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implanta√ß√£o do Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A senha deste usu√°rio (root) √© definida imediatamente na imagem - nunca use-a na pr√°tica! Apenas para economizar tempo, uso uma conta privilegiada: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cf/dk/mt/cfdkmtiq3gditwh0q8d5obxhqyw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O manual lista os arquivos que precisam ser editados. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ou/ww/7a/ouww7abmkynaldx0c53orqbq1fi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, dou o nome √† nossa m√°quina (servidor de monitoramento Zabbix): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o7/aw/ey/o7aweyooy2otoditfxa76k4g6dw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arquivo Hosts: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/zu/m3/xkzum3abl5tgowzag-aq0eew_us.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Altere o endere√ßo para o 100¬∫ e o nome do nosso dom√≠nio inventado (cada ouvinte em nossos cursos tem seu pr√≥prio indiv√≠duo, como uma rede com um dom√≠nio): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/sk/g3/imskg32tktggjcqyi-ue7phl_ww.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que mais resta? Resolv.conf (cliente DNS): o </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/_d/pb/dj_dpbav7eoi7w59gjgnaclace4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Corp1.un se encaixa em nomes curtos, e seu roteador WIFI geralmente funciona como um servidor DNS: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nc/ao/mv/ncaomvyveyk93fjj6zklqzpvfni.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que resta? O arquivo grande e mais importante √© a rede / interfaces. Aqui est√° um modelo para diferentes cursos, muitas interfaces:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/yw/ak/dmywakkly3qdswu_mkrpp1dxy0u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas nosso carro ter√° uma interface. </font><font style="vertical-align: inherit;">Ser√° um servidor de monitoramento com o 100¬∫ endere√ßo e passar√° √† Internet pelo 1¬∫: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2h/og/jv/2hogjvlx7gd5uxfxlvgmbalopdq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez, n√£o seja necess√°rio, mas mais r√°pido para usar todos os arquivos - reinicie a m√°quina.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalando e iniciando um servi√ßo no Debian</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os Zabbiks podem ser instalados de v√°rias maneiras. De acordo com o Zabbix, existe um excelente site com documenta√ß√£o (a prop√≥sito, em russo, a se√ß√£o ativa √© suportada). Nesse sentido, v√°rias op√ß√µes s√£o oferecidas aqui. Eu sou um grande defensor da instala√ß√£o de software de um reposit√≥rio regular. N√£o √© por coincid√™ncia que eu escolhi o Debian: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-9/eu/2c/-9eu2cfgrndehx_bvjyjxo_gjwg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/pk/ha/la/pkhalax-z8jy1_vivipznmnozem.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, se tudo for bem feito, agora eu devo ser capaz de me conectar ao meu sistema. Vamos tentar fazer isso. Pego meu cliente SSH favorito e conecto ao sistema 192.168.1.100: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sf/me/tr/sfmetrwaaftvvrjxe9jetdjpv3a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lucky: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/qe/zb/reqezbzkzbnynazdnxp9blstocq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente, n√£o √© muito correto que a raiz seja permitida aqui: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/5j/_e/bu5j_eloihgsp4_8heomyuedskc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nunca fa√ßa isso em uma empresa! Aqui est√° apenas economizando tempo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/kr/k6/enkrk6smoeftphgdxai8xooemcu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora temos que instalar o Zabbix. </font><font style="vertical-align: inherit;">Sendo um grande amante e defensor do uso de software b√°sico e um oponente da conex√£o de reposit√≥rios de terceiros, colocarei a vers√£o que est√° neste Debian. </font><font style="vertical-align: inherit;">Mais uma vez, gra√ßas aos autores do "Debian" - basta discar a instala√ß√£o de um pacote assim: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/id/ad/4z/idad4z6qgksfxjtpl0zh8z6wu3c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lembrei de mais uma coisa! </font><font style="vertical-align: inherit;">Acabamos de instalar o sistema - precisamos sincronizar o reposit√≥rio (apt update): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/ho/1w/suho1w8zayqwukaczax17o2acgo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, basta digitar o comando de instala√ß√£o do zabbix-server com suporte para o banco de dados (DB) de suas informa√ß√µes no SQL, pois muitos componentes ser√£o instalados (alguns minutos devem ser instalados) :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/1y/ok/hj1yokti8khkpotcwlzkfu-lnji.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em que consiste o Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Zabbix consiste nos seguintes componentes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor "Zabbix";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele est√° trabalhando ativamente com a configura√ß√£o, que iremos configurar manual e automaticamente;</font></font></li>
<li>      ,       ;        MySQL (   ‚Äì   ),    ( ¬´¬ª      ‚Äì PostgreSQL,  Oracle ).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para trabalharmos com o Zabbix, √© usado o chamado front-end. O Frontend Zabbix √© um aplicativo escrito provavelmente em PHP (talvez n√£o tudo, mas a maioria). Consequentemente, o pr√≥prio aplicativo usa um servidor web. At√© agora, apenas esta parte foi colocada (agora vamos aguardar sua instala√ß√£o): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-p/f7/x1/-pf7x13a5ap9clor_mxdrs3nj2i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclu√≠do. Agora, como o Zabbix usa o banco de dados, precisamos cri√°-lo seguindo a documenta√ß√£o. Para criar um banco de dados, usarei um script simples: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/7j/lz/az7jlzl5ymcajcp1lkhebgv1nxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n√£o detalharei quais comandos significam o que. Se algu√©m trabalhou com o DBMS, ver√° algo familiar - o nome do banco de dados e assim por diante ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/bd/kk/6vbdkkjydgvlkrnslc9_6s5xvr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, usando este script, eu crio o banco de dados:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9-/ds/v2/9-dsv2o62nrjbkpzx6jevg4ax_q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E preencha esse banco de dados com metadados. Existem v√°rios arquivos que descrevem quais tabelas devem ser, quais atributos, par√¢metros e assim por diante (tudo isso √© feito novamente, de acordo com a documenta√ß√£o): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/31/sd/zj31sdartmnaavfhghqy7im32bq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, agora no MySQL estamos empilhando metadados que o Zabbix usar√° para armazenar a configura√ß√£o e os resultados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ro/1p/0b/ro1p0baiwev54t9ttf1k-36zyj4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o Passarei um tempo olhando o que ele criar√° l√° (haver√° um grande n√∫mero de tabelas criadas). O Zabbix como um produto est√° em desenvolvimento h√° mais de dez anos e est√° constantemente se esfor√ßando para se tornar cada vez melhor; portanto, a estrutura de dados √© bastante pesada. Mas tudo isso est√° "escondido". N√≥s, como administradores, trabalharemos com um aplicativo front-end externo, com o qual tudo ser√° simples, claro e acess√≠vel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acordo com a documenta√ß√£o, por algum motivo, v√°rios arquivos. Mas desde que eles fizeram isso, isso significa que eles sabem o que precisam! O banco de dados est√° pronto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/sf/pg/qlsfpgwecdjkq43bvi7-ddnbr4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, de acordo com a documenta√ß√£o, este componente precisa ser explicado: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u-/n0/vl/u-n0vlfpaz12mtjtdkvjekaf1za.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Explique que ele deve funcionar com o banco de dados, conectando-se sob um login e senha espec√≠ficos. Isso √© feito atrav√©s do arquivo de configura√ß√£o: </font><font style="vertical-align: inherit;">
Insira no </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5x/pm/aa/5xpmaappvlhi6dtjmzb90m8dbb4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
final do arquivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/89/gh/ul/89ghulcpbzbzw913qbznnaecsjm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n8/oo/_y/n8oo_yuz-elzo7w8scuvnwsjxo8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui descrevemos que o servidor de banco de dados est√° aqui em nossa conta: O </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u5/vt/wi/u5vtwiauap-aibs5mbmgersdnji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pacote ‚ÄúDebian‚Äù para o ‚ÄúZabbix‚Äù n√£o significa inicializa√ß√£o autom√°tica. Aqui est√° uma equipe do grande e terr√≠vel SystemD, sobre o qual existem muitos hol√≠sticos: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4t/mw/_9/4tmw_9on0khv1_i8flmuoufthkm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Torna o lan√ßamento do Zabbix autom√°tico ap√≥s a inicializa√ß√£o do servidor. Inicie o Zabbix: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/66/kt/aj/66ktajsilnljqvtg8rff03vw5ki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses dois componentes est√£o em execu√ß√£o:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/pp/ih/jfppihb3mhcy6oc9ma6rzmxhqsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ j√° pode monitorar, preencher a configura√ß√£o. </font><font style="vertical-align: inherit;">Mas √© dif√≠cil fazer algo bom at√© que o frontend esteja definido ... No entanto, a princ√≠pio - o est√°gio perdido ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implanta√ß√£o do Zabbix </font><font style="vertical-align: inherit;">Localiza√ß√£o do fuso hor√°rio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desdobrei a imagem e a hora errada: a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/mw/-r/xumw-rual8waq_g1bs36hd660g8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
data est√° correta. </font><font style="vertical-align: inherit;">Nosso fuso hor√°rio est√° errado, ent√£o eu o corrigi dessa maneira:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/if/st/aq/ifstaqnjg4rrepsxshjhw_4o9p0.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chegando ao frontend. </font><font style="vertical-align: inherit;">Instalando e Ativando a Interface da Web</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Debian deve instalar esse pacote (ap√≥s a instala√ß√£o do servidor Apache): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/al/pt/i5/alpti55pbgnyvxlkwg6cusjayje.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP, uma biblioteca para conectar programas escritos em PHP com MySQL, ser√° instalado. Em geral, estou iniciando: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/fx/ow/ohfxown1obtvst8-eqn988l5kjy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voc√™ n√£o precisa executar nenhuma a√ß√£o por um longo tempo, tudo ser√° feito automaticamente: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/gr/6q/fdgr6qma4k3n_ii43xiia9xpkmc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
agora estamos instalando esse componente - o front-end do Zabbix; um servidor web, e explicaremos a ele que ele precisa trabalhar com o servidor Zabbix e o DBMS: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/xo/by/vuxobykpvrchotjwrd6locuvp7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
atrav√©s do servidor web, gerenciaremos o Zabbix e atrav√©s dele veremos o que ele monitorou l√°.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est√° quase estabelecido, e agora veremos que ele tem um relacionamento pr√≥ximo com o nosso pa√≠s. </font><font style="vertical-align: inherit;">Foi desenvolvido como uma aplica√ß√£o de algu√©m que trabalhava em um banco. </font><font style="vertical-align: inherit;">Ele decidiu configurar o monitoramento e o pegou e escreveu seu programa em vez de usar o programa finalizado. </font><font style="vertical-align: inherit;">Ele trabalhou em Riga, e voc√™ e eu estamos em Moscou: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/p-/uu/rdp-uuppjegozljjxljdvkcyctk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
neste arquivo ‚Üë a inicializa√ß√£o do PHP √© necess√°ria ‚Üì para fazer isso: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/zd/w6/afzdw6duwvdchcizhxre6pg-owm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n9/uv/11/n9uv119oq-21nip3nyevkey0c50.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n√£o irei me aprofundar sobre como o aplicativo da Web est√° configurado no Debian. </font><font style="vertical-align: inherit;">Basta conectar a configura√ß√£o que veio do pacote Zabbix e reiniciar o servidor da web Apache:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/wq/dw/cjwqdwnivhxabf6kbey1qs3yyso.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conecte-se ao front-end para configurar o Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quase pronto para se conectar ao frontend. </font><font style="vertical-align: inherit;">Resta apenas explicar a ele onde o servidor de banco de dados est√° localizado. </font><font style="vertical-align: inherit;">Existem duas op√ß√µes, e faremos isso atrav√©s do Assistente. </font><font style="vertical-align: inherit;">Para isso, √© necess√°rio um arquivo no qual as configura√ß√µes ser√£o gravadas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/hh/1i/nphh1imvszjdktstdx-insdzihs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um servidor da web deve ter permiss√µes de grava√ß√£o para este arquivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x7/dj/_o/x7dj_oz6sci-rbq_xqem-hyt_sg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o qual voc√™ pode tentar conectar-se a um navegador. </font><font style="vertical-align: inherit;">Voc√™ pode pelo endere√ßo IP. </font><font style="vertical-align: inherit;">Meu DNS est√° configurado, ent√£o aproveito a oportunidade: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0n/1h/lf/0n1hlfvvisfesceo4d-rv2mra7g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos o Assistente do Zabbix, onde clicarei em Avan√ßar, pois a maioria j√° o instalou: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5m/co/dc/5mcodckrskfsyf0rlu0omicrlnc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qo/qt/o_/qoqto_wcxr0gc_kwsr3ia12muhw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5w/1r/pu/5w1rpu_jvw5veghgbvrjltn722g.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/zg/jw/ng/zgjwngenwdojjj-jkx6um7kfnaa.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/li/i7/t2/lii7t2ybvosn2l1dg0wc4tf2exm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lz/gv/va/lzgvvams559x1iofedcqifizxy0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso Zabbix est√° pronto para conex√£o. </font><font style="vertical-align: inherit;">N√≥s inserimos o nome de usu√°rio e a senha: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jx/tf/53/jxtf53atwbmrcyx9pjsiaqauffy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configura√ß√£o, hosts ... N√£o monitora nenhum host - at√© agora, o ‚ÄúZabbix‚Äù est√° pronto para se monitorar, se instalarmos o Zabbix Agent:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/58/97/zv/5897zvb2kgkutggf-ccxvkpqlsy.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expanda a nuvem de switches</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas n√£o haver√° agentes Zabbix para o nosso webinar. √â muito simples e desinteressante! Voc√™ e eu estaremos monitorando uma rede distribu√≠da, cadeias de comutadores de comunica√ß√£o, por isso precisamos dessa cadeia de comutadores. Onde consegui-los? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sugeri o uso da virtualiza√ß√£o do Virtual Box. Ele permite que voc√™ emule PCs (computadores), e agora vou apresentar outro emulador, tamb√©m usado em nossos cursos. Um √≥timo produto √© chamado Graphical Network Simulator (GNS): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/f8/d_/bef8d_bgqsw6r8xweossqbswqp8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
este emulador permite emular equipamentos da Cisco. Aqui vamos implantar nossa nuvem de switches. Ser√° necess√°rio criar o nome do projeto novamente (vamos salvar a configura√ß√£o, e se amanh√£ for necess√°rio):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vr/cw/xi/vrcwxiidkq-rt6rlkrw3bohkee8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ quiser aprender a trabalhar com os equipamentos da Cisco em casa, instale esse GNS por conta pr√≥pria e fa√ßa o que fazemos no semin√°rio, a saber, agora implantaremos uma nuvem de switches. O problema √© que o GNS n√£o possui comutadores (n√£o h√° emula√ß√£o aqui) - apenas emula√ß√£o do roteador. Portanto, temos que colocar o roteador (arraste com o cursor do mouse): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3q/kf/w9/3qkfw98g1cll_antal4ffvb3j8e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, de alguma forma, troc√°-lo. Como fazer a emula√ß√£o de switch no GNS? Precisamos pegar o roteador da 36¬™ s√©rie. Voc√™ pode cham√°-lo de switch (clique com o bot√£o direito do mouse no switch): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/hg/zr/dshgzra7cwuo96scx-s5vzxxgmc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode desenhar um switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dw/zb/xk/dwzbxklfnlvwgmewwyagg9ax61s.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/kh/ht/zl/khhtzlj_kwjdmmgofbbzrs1yove.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/v8/ly/wa/v8lywaans322t7f3vnrllvhidic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece? Mas isso se tornar√° uma op√ß√£o real somente quando voc√™ adicionar uma placa assim:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/x9/qk/cix9qkmxc6ow8v5iwqk-atxl_fu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta linha de roteadores Cisco, voc√™ pode colocar uma placa Ethernet de 16 portas. E para um grande n√∫mero de trabalhos de laborat√≥rio relacionados a switches, essa placa √© bastante adequada. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Precisamos ter uma nuvem de switches, ent√£o agora vou fazer essa nuvem (altere o nome, imagine e insira o quadro). Vamos come√ßar com tr√™s comutadores e, se tivermos tempo, adicionaremos um quarto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/ti/rv/bftirv6azk16f-do5lt1uqntz4m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nos conectaremos, n√£o visando especificamente onde. Nossa topologia ter√° que ser criada automaticamente: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/4d/uf/n24dufxk_bsi44_xj95nvga6afi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/mq/9b/lq/mq9blquvwehjkbmvt5pjlplgsjs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclu√≠do: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wj/gt/f8/wjgtf8aqoy1vnx-h2-kiaw8oa7q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora estou iniciando este neg√≥cio: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/e6/f1/pwe6f1uu9h0idchwsfqj6xpu_ae.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parab√©ns aos que est√£o assistindo pela primeira vez como a Cisco funciona - para que voc√™ possa configurar rapidamente o switch Cisco. Enquanto isso, eles come√ßam conosco ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© o nosso sistema Windows (Windows 7) e o Debian: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i6/ve/uk/i6veukk0v9begz_gtkanjnx5sme.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui a virtualiza√ß√£o GNS3 e a nuvem de switches:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/jw/6t/xujw6t_eaje5nbl_56akrkthhwk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora est√° claro o que est√° acontecendo: dois sistemas de virtualiza√ß√£o s√£o usados ‚Äã‚Äãna estrutura de uma m√°quina. Virtualiza√ß√£o de sistemas PC (√† direita) e virtualiza√ß√£o de sistemas Cisco (√† esquerda): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/66/hx/m2/66hxm25qeoexjawmjhhqpxy0yqa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â necess√°rio fazer o servidor monitorar o equipamento: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/ek/fz/yoekfz41z6ls3l72ik5yv6hltps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E para que ele possa monitor√°-lo, este equipamento deve ter endere√ßos na mesma rede: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/rk/8x/verk8xxlqj_ldywe8dgkr7nw974.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, sem pensar por muito tempo, eu Decidi atribuir esses endere√ßos aos switches (pontos 101, 102, 103 para os 1¬∫, 2¬∫ e 3¬∫ switches, respectivamente). A cent√©sima √© o nosso Linux: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/xr/nf/fhxrnfp__tatacrxnf0i1egxato.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voc√™ pode configurar isso da seguinte maneira: v√° para um curso autorizado da Cisco e eles lhe dir√£o a baixo custo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o switch seja acess√≠vel para administra√ß√£o, √© necess√°rio fazer as seguintes configura√ß√µes - entrar no modo de configura√ß√£o, atribuir um nome adequado, atribuir um endere√ßo IP √† interface e copiar o resultado para a mem√≥ria de longo prazo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xr/hs/of/xrhsof2vqmanjxahxyeeuwkitwy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
prepararei o peixe para n√£o gastar muito tempo nele. O primeiro comutador ser√° chamado switch1, o endere√ßo IP √© o 101¬∫. Copio esta configura√ß√£o no comutador: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/4q/tc/he4qtcdsyugl9n7zlbsuvv1vdfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clique duas vezes no comutador desejado (agora - comutador1): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/ga/d5/uxgad5fmtc4q8xsr5tiry-yhkma.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gc/mn/75/gcmn75v8xtwb9icgrakorfvo_o4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configure o comutador1. Agora - a configura√ß√£o para o segundo comutador: chamada switch2, IP - 102: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/h_/g6/rzh_g6y2i_5c3jxkrm2e3flbu-i.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/w3/5a/p6/w35ap6gewzm3zpsggptzpljb6xc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dessa forma, agimos com o terceiro comutador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, ser√° muito legal se n√£o apenas nosso servidor estiver dispon√≠vel em nosso computador com Windows, mas tamb√©m o que configuramos agora:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/va/jr/4yvajrk9agiaacpycpxs6ojp6gq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GNS3 √© um bom sistema. </font><font style="vertical-align: inherit;">Fa√ßo essa √™nfase porque h√° problemas suficientes: √© um buggy, um pouco ... Mas, para aprender, basta. </font><font style="vertical-align: inherit;">Essa pausa √© alarmante para mim - espero que tudo d√™ certo e nossa mudan√ßa responda depois de algum tempo: Mas </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/3q/sl/gq3qslehu1-r-_skqokqhowkvqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n√£o, n√£o responder√°, n√£o importa o quanto eu espere! </font><font style="vertical-align: inherit;">A comunica√ß√£o n√£o √© suficiente entre o nosso computador e o GNS. </font><font style="vertical-align: inherit;">GNS, ent√£o mais um elemento est√° faltando:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/14/vf/v914vfcq1mexkh_tyr96b_b4qe4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connect Cloud</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que essas op√ß√µes sejam disponibilizadas, voc√™ deve usar o objeto Cloud: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/uw/wq/riuwwqk1kguxglmtswubooqglas.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoje, a Cloud o usa em um sentido completamente diferente. Autores do GNS como provedor de servi√ßos de Internet. Nas configura√ß√µes deste objeto, posso conect√°-lo √† minha placa de rede: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/ri/r-/gwrir-quzcq745winbjfqhdry88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
parece assustador, mas √© a mesma placa de rede: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/zq/ux/ylzquxupsoni1diu2tm2zuwbbwc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lb/pl/sk/lbplskyzgznkrrla6utigrs0qr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
coloquei Cloud. Agora voc√™ precisa conectar um dos comutadores √† nuvem (somente uma conex√£o poder√° aparecer): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e9/kz/40/e9kz40sqnsx0avn3qmpijjuc7lu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
suspeito que, no nosso caso, seja mais r√°pido reiniciar o comutador para que tudo funcione corretamente. A √∫nica coisa que quero ter certeza de que sua configura√ß√£o seja salva. A prop√≥sito, dentro dos comutadores de ping j√° devem estar: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/dl/hw/v6dlhwwha_rpetf4u-mvds8sqkg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cisco real! O primeiro pacote desaparece, tudo o resto est√° l√°:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ju/nm/dz/junmdzk7lnakhvcrpzjmmkydkgm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, n√£o √© usada emula√ß√£o natural aqui, mas iOS. Portanto, paro o 1¬∫ comutador e recome√ßo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nq/vf/vo/nqvfvonfdf78rrmvlfy2bti50t4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/e-/hl/jo/e-hljocq_u863hcwtqwuoy7ulzi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
se tudo estiver em ordem, devemos ver a conex√£o atrav√©s da nuvem - meu Windows 7 ser√° conectado a este equipamento atrav√©s de uma placa de rede (o equipamento possui endere√ßos IP na mesma rede que o Windows) . Em geral, este √© o ponto de conex√£o entre o GNS e o Windows. Vamos </font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/vo/dh/dbvodhj8-wdkwxqf4iycwymwheu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
verificar se </font><font style="vertical-align: inherit;">h√° uma conex√£o: </font><font style="vertical-align: inherit;">Vamos ver como ele se sente ... A partir daqui, ele responde: Foda-se </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/zm/or/lrzmorkfuglvex1hz7ir5togsti.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
! Veja bem, a conex√£o apareceu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/hr/gh/-chrghapsw8pu8kmycxcjyixida.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
eu amo o GNS porque √© gratuito, funciona ... Mas nem tudo √© simples! Aqui est√° uma situa√ß√£o engra√ßada: nosso Linux responde ao sistema Windows, nosso switch responde ao Windows, mas o switch n√£o responde ao sistema Linux:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1f/wu/re/1fwureh4q3tz4quhdcm7nybwwh8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o o professor pode ficar cinza! Voc√™ est√° conduzindo uma li√ß√£o, mas o estande n√£o funciona para as pessoas ... Bem, nada, vamos convencer! Gratuito, barato e alegre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A experi√™ncia tem mostrado: para a conex√£o para estar entre os tr√™s elementos (a partir do Windows - para Linux, a partir do Linux - a GNS), voc√™ precisa ir para as configura√ß√µes da placa de rede e selecione o estranho op√ß√£o - ‚Äúmodo Inaud√≠vel‚Äù ( ‚ÄúPermitir todos‚Äù): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fp/w8/op/fpw8opcow_frnq3ph1ksbtivq6w.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/jr/jv/ve/jrjvveot5clomchekaw9_xmyxc0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Venha Virtualiza√ß√£o! Este modo indiscriminado est√° em todas as decis√µes (e tamb√©m na "Esfera"). Est√° associado √† passagem de pacotes Ethernet, endere√ßos MAC e assim por diante. Venha para o curso de virtualiza√ß√£o, os detalhes est√£o l√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iniciamos nosso sistema novamente na esperan√ßa de que a conectividade seja restaurada: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/8t/cy/my8tcyvvejsf5bt-cb5sh-va_lu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somente agora ser√° poss√≠vel configurar o monitoramento de nossos comutadores a partir do Zabbix. Vamos ver como isso acontece:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/ku/6m/geku6mzbdiqubhvfjx4pevfuiau.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A funda√ß√£o est√° lan√ßada. </font><font style="vertical-align: inherit;">Se tivermos uma conex√£o agora, tudo estar√° pronto. </font><font style="vertical-align: inherit;">No "Zabbix" muitos "Tsiska", habilmente conectados entre si - voc√™ pode come√ßar a monitorar. </font><font style="vertical-align: inherit;">N√≥s nos conectamos ao usu√°rio root com uma senha e verificamos o ping: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/ln/pc/wqlnpckl6msf6vp_rmiyt_q2a5s.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/g7/9y/8z/g79y8z6hx_bix4mvyje3ju34uia.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo est√° pronto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4m/qw/1q/4mqw1qfbb61ytex0d4ldrwaklee.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
como administrador do DNS local, tamb√©m possibilitei o envio por nomes de ping.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o Zabbix pode monitorar o equipamento Cisco?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O agente n√£o pode ser instalado no equipamento Cisco. Muitos de voc√™s sabem que o equipamento Cisco √© perfeitamente monitorado usando SNMP. Agora vamos preparar o cen√°rio para isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos preparar o cen√°rio para isso. Para monitorar equipamentos usando o protocolo SNMP, primeiro, voc√™ precisa instalar o suporte SNMP no pr√≥prio servidor de monitoramento: O </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/pj/d_/rxpjd_oqrxzg3kyshufud5ydoik.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix n√£o inclui esse suporte, usa bibliotecas externas inclu√≠das nesses pacotes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y7/6r/v4/y76rv4b1ulvxexqwi69yhhqld1u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n√£o vou lhe dizer o que √© a base de informa√ß√µes de gerenciamento - Nos cursos sobre intera√ß√£o entre Lunux e Cisco, √© descrito em detalhes. E agora colocamos os pacotes necess√°rios para o monitoramento no Linux: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0x/ze/ed/0xzeedg4nazeeohex3hvh-zqjho.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/yn/lo/pr/ynloprjiladptnptxhd2nowybrc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E colocamos elementos de configura√ß√£o em nossa Cisco que nos permitir√£o monitor√°-los.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/yj/yt/u6yjyteqwobo-tckmhdnhm8clt4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, o servidor SNMP simplesmente come√ßa com a seguinte senha: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/ie/zo/9tiezomf0b9sk_r6tqf3a9hg8zw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E fazemos isso em todos os tr√™s de nossos comutadores: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k-/cu/-v/k-cu-vr3kzxuq3fcelvdhwyuo3e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s essas etapas, verificaremos se nosso servidor de monitoramento pode acessar o equipamento Cisco (qualquer um desses comutadores) via SNMP e, por exemplo, descobrir alguma coisa. </font><font style="vertical-align: inherit;">Existem op√ß√µes de teste aqui: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/yj/yt/u6yjyteqwobo-tckmhdnhm8clt4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode pesquisar nossos switches usando os chamados OIDs (identificadores de objeto). </font><font style="vertical-align: inherit;">Aqui interrogamos o comutador (solicitamos os valores do par√¢metro switch1): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dh/qr/ek/dhqreksw-lbhj1_ky-kitwkcbdu.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E vemos que este Oid se refere ao nome do comutador, ou seja, podemos extrair o nome de cada comutador (√© muito √∫til para a topologia): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8e/ro/de/8erodew0gy2koqyma4o2k5xo5qi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E voc√™ pode usar mais textos humanos e textuais - solicitamos sysName do switch (o mesmo pode ser solicitado no switch2, etc.):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/rk/ih/tirkihmj9zh3mbtljm-8mzuuva4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instale o console SNMP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra a√ß√£o n√£o √© √≥bvia: de </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9l/bh/if/9lbhif1jx-4eees2yl4g2n6sse4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/rf/xs/2f/rfxs2forhqzmhx1vb1pxzyecjzi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5r/c6/qi/5rc6qi5sesktvgwhchqnlk14hwy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
acordo com o contrato de licen√ßa, √© necess√°rio comentar as linhas deste arquivo ... Este √© um comando maravilhoso do pica-pau que limpou o conte√∫do do arquivo, que dizia: ‚ÄúPara confirmar a licen√ßa, comente tudo o que estiver l√°‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, o servidor Zabbix deve ser reiniciado porque instalamos as bibliotecas que ser√£o usadas por ele: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nh/n2/rv/nhn2rvgejooztpw-t-6iyqigdjw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/8u/j9/dw/8uj9dwokqg4-byvjdxbp59fhwdc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
muitas pessoas sabem que agora √© suficiente entrar na se√ß√£o Host, criar um host e selecionar o protocolo SNMP. </font><font style="vertical-align: inherit;">Especifique o endere√ßo IP:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/cs/ug/gzcsuga-vjjumzjitkwe0zvy2ak.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bi/gv/kc/bigvkcnw1ji20omf739p434dzaa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas n√£o estamos aqui para isso. </font><font style="vertical-align: inherit;">Vamos tentar fazer com que o Zabbix encontre automaticamente todos os nossos switches. </font><font style="vertical-align: inherit;">Temos tr√™s deles, e em Baumanka existem mais de cem (120, ao que parece). </font><font style="vertical-align: inherit;">N√£o seria t√£o divertido adicionar 100 switches, portanto √© um b√¥nus: veremos como o Zabbix encontra nossos switches.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicionar dispositivos automaticamente ao Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
P√°gina "Adicionando dispositivos automaticamente ao Zabbix": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/4h/3a/op4h3abcnttdjkx_h-zzpzb0zge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, iremos para a se√ß√£o "Configura√ß√£o" (subse√ß√£o Descoberta) e n√£o criaremos uma nova regra l√°, mas usaremos a existente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso indica corretamente que voc√™ precisa verificar esta rede ... Voc√™ reconhece a nossa? </font><font style="vertical-align: inherit;">Para n√£o esperar muito, indicarei um intervalo limitado de 100-110 (o suficiente para mim).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digitalizar uma vez por hora √© um pouco demais; </font><font style="vertical-align: inherit;">colocar - a cada 60 segundos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em dispositivos digitalizados, nosso Zabbix agora est√° procurando um agente Zabbix. </font><font style="vertical-align: inherit;">Prometi que voc√™ e eu n√£o ter√≠amos nenhum agente, ent√£o eu o excluo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E digo que, de fato, nosso dispositivo √© acess√≠vel via SNMPv2, comunidade - p√∫blica; </font><font style="vertical-align: inherit;">solicitamos esse OID:</font></font></li>
<li>       ,     . ,    .       (   ):</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, a cada minuto, o Zabbix percorre esses endere√ßos IP e solicita o nome do dispositivo via SNMP. Se houver um dispositivo e suportar o protocolo SNMP, ele responder√°: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ha/xg/-o/haxg-ohyxs1bfr23wjr10quhgoa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o √© suficiente para que nossos dispositivos apare√ßam nesta lista: Voc√™ </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1f/qq/ij/1fqqijogq1obsqxxxnqmd06l6l8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
precisa configurar a√ß√µes. Criaremos um novo (eu o nomeio, copiando do manual de treinamento): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/ds/hi/zjdshidzytis9o614hr8ebunnsi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qb/vr/7g/qbvr7grb1zx-e375rrkrndjtf0y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Condi√ß√£o: a solicita√ß√£o deve retornar informa√ß√µes de que essa √© uma op√ß√£o. Por "coincid√™ncia de sorte", temos todos os comutadores chamados switch (switch1, switch2, switch3), portanto, o valor recebido deve se parecer com (como) no switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/-q/ww/jo-qwwjs6zrndbxbnzinyj2gxog.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tudo isso est√° no manual de treinamento. Resta indicar o que fazer com ele - ‚ÄúOpera√ß√µes‚Äù: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z_/q2/bo/z_q2boros4ugh7rmz9gkmg9uico.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
primeiro de tudo, voc√™ precisa adicion√°-lo a algum grupo. Vou usar o grupo de hosts Descobertos j√° prontos:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t-/na/jf/t-najf0u9b3jw2js5xuu0mb0gfg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gk/lj/7h/gklj7honujvnwncitifax5zcrfy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, mais importante, devemos explicar o que monitorar neste equipamento. </font><font style="vertical-align: inherit;">Nesse caso, usaremos um modelo pronto que √© adequado para um grande n√∫mero de v√°rios dispositivos SNMP: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ze/lw/1n/zelw1nlbpyv9fnu82tieuv7klh0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/7v/a4/fe/7va4fejt0_p6_m83ru9xsdnr80o.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/km/ca/om/kmcaomawjtebabjjgaofcz1irls.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/2v/ma/et/2vmaet5v9zmyfx-gtmgbzpcyypw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bd/_7/4_/bd_74_jpcajgez4osptj4gswxqy.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/j8/x6/jw/j8x6jwcwob9zgdcu4qexixn2kk8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/6h/do/_o/6hdo_oq76rh6esxpq-yc2hep0s8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tudo for feito corretamente, depois de algum tempo, tr√™s switches aparecer√£o milagrosamente em nosso Zabbix. </font><font style="vertical-align: inherit;">N√≥s esperamos. </font><font style="vertical-align: inherit;">Eles aparecer√£o na se√ß√£o Hosts. </font><font style="vertical-align: inherit;">Existe uma conex√£o (marcada apenas no caso): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/d9/o9/mpd9o9nieg8be0a1nkw_nwjenkq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apareceu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/eb/zc/9oebzchr5zpdmq9wux7pjfiih28.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tiv√©ssemos 100 switches, 100 switches apareceriam. </font><font style="vertical-align: inherit;">Agora podemos falar sobre o t√≥pico principal - a constru√ß√£o autom√°tica da topologia de rede.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie um mapa de rede</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em "Zabbix" na se√ß√£o "Monitoramento" - subse√ß√£o "Mapas de rede". Voc√™ pode criar seu pr√≥prio mapa com qualquer nome arbitr√°rio (assim como nos manuais - mapa de comutadores): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/fo/pi/djfopijhurrskrzaa1vdz2xqb7w.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/91/u6/2n/91u62nyrphdsb1u2ypo1rsnjrx8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n3/6d/m_/n36dm_svkvrglkplk7fl345msr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voc√™ pode adicionar dispositivos a este mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/t1/df/tyt1df6wfkeq4j2amt9evassz88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
temos uma opera√ß√£o bastante chata para adicionar centenas de comutadores aqui: adiciono um </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w9/g7/ih/w9g7ihwj13mcrzevcdh4xbu1seo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
novo elemento e digo ao sistema que ele est√° ativado na verdade, o host que voc√™ est√° monitorando; host switch1:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/uw/7x/npuw7xcetykmgf0mzoo_wf84obe.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/iw/kf/7o/iwkf7on2ppl3_k6pbqtp7ddwgxo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As pessoas costumam perguntar se esse processo pode ser feito automaticamente. Resposta: "√â poss√≠vel!". Mas ent√£o precisamos resolver o problema fascinante: "Como podemos entender onde colocar quais op√ß√µes?" Essa √© a geometria. Uma solu√ß√£o em potencial: voc√™ pode especificar uma marca de localiza√ß√£o geogr√°fica no comutador (um par√¢metro como ‚Äúvoc√™ est√° no 6¬∫ andar, pr√©dio AZLK, 666¬∫ audit√≥rio), desenhar o pr√©dio do laborat√≥rio educacional, todas as suas audi√™ncias ... Em geral, esse √© um bom aluno para o 4¬∫ aluno Curso de inform√°tica. N√£o temos planos para isso!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora adicionarei todos os 3 switches manualmente, mas prometo que n√£o tra√ßarei linhas de comunica√ß√£o entre eles. Voc√™ adiciona a 101¬™ op√ß√£o, n√≥s a adicionamos automaticamente ao Zabbix - se voc√™ o desenha no mapa com canetas. Um momento desagrad√°vel, mas h√° um lugar para estar. N√£o h√° uma solu√ß√£o simples para esse problema, por 45 minutos, com certeza. E o que obtemos parecer√° interessante para mim. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu adiciono rapidamente tr√™s op√ß√µes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/q4/5m/htq45ms1qrynn5vv6rbfltivtag.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
eu disse que n√£o adicionarei linhas? Eu vou, mas apenas para que mais tarde possamos entender como desenh√°-los. Vou conectar esses dois comutadores (n√£o </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/yy/3v/huyy3v7rbnxbz-vcvvcfscrc3nu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
conectamos o </font><font style="vertical-align: inherit;">1¬∫ ao 3¬∫): </font><font style="vertical-align: inherit;">Vou conect√°-los (o comutador1 e o comutador3 est√£o destacados): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/xx/4w/ygxx4wbqysq3gqcuqbdb8h7vdlo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso sistema ter√° que corrigir esse problema: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/p1/da/1op1danyvogme8oxdl5mjy_c_sg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â importante n√£o esquecer de salvar o resultado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wb/gg/wk/wbggwkhsx0s5v1n-2rximlephs0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/fu/vp/ld/fuvpldfvuoweq4md4vtd9tzpmgi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, sobre o GNS - voc√™ pode faz√™-lo lindamente ... Esconda o nome do host, fa√ßa um switch e coloque-o um no outro, criando uma nuvem de switches:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ne/uz/f7/neuzf7ylh_eb46psuqp7sq0nsp8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/fa/uh/iy/fauhiyblbluxal-l8g7mbu5gws4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3l/cl/0o/3lcl0ofm4pg0qh8weeshyayu1pg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/oh/is/fv/ohisfv9b9hvxjtax_u2l73ysmfw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ua/1c/px/ua1cpxoki5x5akr4imn0wakcvxi.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como constru√≠mos uma topologia? </font><font style="vertical-align: inherit;">Configurar cria√ß√£o e atualiza√ß√£o autom√°ticas de linhas de comunica√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que a topologia seja criada automaticamente, precisamos receber informa√ß√µes sobre ela automaticamente. Na universidade, usamos equipamentos Cisco, por isso amamos o protocolo chamado Cisco Discovery Protocol - basta digitar show cdp neighbours em qualquer dispositivo e ele informar√° que o switch1 est√° conectado √† 5a interface: a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u8/yg/vu/u8ygvuncowttw3o0nn6tjjzhep8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lj/vo/rh/ljvorhmvhikkk-3r8ykhwgc2zoi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
alternativa ao cdp √© lldp (temos um segmento interruptores da empresa "assustador" Nortel - h√° LLDP). Veja bem, existem dois comutadores: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-h/qq/vf/-hqqvfloaxvhgsplf-dz87zfr1y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o servidor Zabbix deve de alguma forma extrair essas informa√ß√µes (eu as vejo na pr√≥pria Cisco). Existem muitos caminhos. Um dos mais r√°pidos, mas mais est√∫pidos, √© usar o protocolo RSH. Um protocolo muito denso, e eu o conhe√ßo apenas por causa da minha idade:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/44/xz/y-/44xzy-rmyoe9q-yl1c-pxipc61c.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ed/hq/o5/edhqo5l9mzpdzkgydqpi9hvrm4c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As pessoas normais do RSH n√£o sabem, mas voc√™ pode us√°-lo rapidamente para fazer algo remotamente com a Cisco. </font><font style="vertical-align: inherit;">Ou, se estamos falando de algum tipo de rede de gerenciamento em que n√£o h√° estranhos, voc√™ pode us√°-lo na produ√ß√£o. </font><font style="vertical-align: inherit;">No entanto, os pontos de seguran√ßa ainda s√£o uma costura completa! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, configurei o suporte para acessar o protocolo RSH nos meus servidores Cisco a partir deste endere√ßo IP: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_r/fi/tt/_rfittxipjyhnofewteuvyojncu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora eu posso instalar o cliente RSH no servidor ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-i/ji/ns/-ijinsihdodtgzniujj7ps7iv-q.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k4/zm/yj/k4zmyjbq64rg_kuh5vzd7eovoyu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... e demonstrar como √© f√°cil agora seguir as instru√ß√µes que acabamos de seguir conectando diretamente ao equipamento Cisco da esta√ß√£o de gerenciamento - no switch1, seguirei esta instru√ß√£o: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/87/nr/vn/87nrvnudd8y_alfjxwsbusezjdw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k7/kh/fz/k7khfzefhkhfbfip2whrfe7yick.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, ele deve aparecer no switch2:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_k/tk/3x/_ktk3xdve_dtksfm1aj50nanqfa.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conex√£o do servidor de monitoramento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais longe. Os gerentes escrevem para mim: ‚ÄúVyacheslav, um pedido chegou do ouvinte. Ele quer se aprofundar em Bash, Csh, Sed e Awk. ‚Äù Estes s√£o utilit√°rios Unix densos que as pessoas conheciam em um ano desgrenhado. Neste momento, haver√° um pouco de Unix denso. Instalaremos este pacote (precisamos formatar a sa√≠da para que fique melhor estruturada): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/db/fg/zmdbfgngl98kq1y3gyimzhhl5u8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E toda a equipe ficar√° assim: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vx/wg/5b/vxwg5buzmtotxsyuz45_tkjmuj8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o vou dizer como o c√≥digo de retorno no Dos difere do Unix. Em seguida, filtrarei apenas as linhas que cont√™m a op√ß√£o, excluirei os espa√ßos extras e cortarei os campos necess√°rios pelos espa√ßos:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/97/gz/dc/97gzdcixffxvpmffvo8nyjfo2t8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ck/oh/-o/ckoh-o4tmxqmak6u8yitnf3rv9a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver o resultado e voc√™ ver√° como ele difere do anterior. Um pouco mais de Unix "m√°gico". Processando a transforma√ß√£o de informa√ß√µes em estruturadas (por exemplo, switch2). Em vez dessas informa√ß√µes n√£o estruturadas (muitos espa√ßos, algumas teclas estranhas): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/ph/pu/lhphpuqqnrpivefwhm3r-26culq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A sa√≠da aparece: O </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/j6/wr/myj6wrr8s8yjn1xt5xduyuww43k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
switch2 est√° conectado ao switch3 atrav√©s das interfaces Fas 0/6 (do switch2) e Fas 0/5 (do switch3). A tabela mostra: algum tipo de switch com o qual as interfaces est√£o conectadas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto estiver neste protocolo, RSH e CDP partem. Agora, tendo recebido essas informa√ß√µes, desenhamos esses links em todos os switches. Para fazer isso, precisamos de informa√ß√µes sobre quais switches nos conectar. Voc√™ pode obter um arquivo de texto, onde listar todas as op√ß√µes ... Mas n√£o √© esporte!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s s√≥ precisamos adicionar o switch fisicamente, e ele deve ser detectado automaticamente pelo Zabbix. </font><font style="vertical-align: inherit;">J√° temos um banco de dados de switches no Zabbix. </font><font style="vertical-align: inherit;">Como um aplicativo pode obter informa√ß√µes sobre os switches do Zabbix?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API do Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A API do Zabbix √© escrita usando o protocolo JSON "maravilhoso". Eu terminei de programar naqueles dias em que o JSON ainda n√£o era, portanto, para mim, assim como para o administrador ... Atualmente, n√£o havia esse lixo! Aqui est√° um arquivo de texto para mim - isso √© normal, mas JSON ... ( </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
brincando </font><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">JSON √© t√£o JSON! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSON √© o formato usado para a troca de dados com o servidor da Web, e o utilit√°rio cURL √© um daqueles utilit√°rios √∫teis que permitem enviar qualquer solicita√ß√£o ao servidor da Web: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/xy/fh/xkxyfhqtn9p-kllijsbwfda5pus.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/po/g0/qt/pog0qtpuciskhncsbhfespkg1n0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o </font><font style="vertical-align: inherit;">irei </font><font style="vertical-align: inherit;">aprofundar o que √© uma solicita√ß√£o POST, solicita√ß√£o GET e Eu direi brevemente. No Zabbix, que funciona aqui: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xb/5x/bb/xb5xbbtwehskdqcmeygzyqczwfs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este aplicativo entra: O </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/jf/gu/tijfguw4winkqmkpfbjusomxmbw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
que est√° pronto para aceitar essa solicita√ß√£o em chaves "assustadoras" (isso √© JSON):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/an/cs/ezancsh3w2vyw6byftum-vjaoye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta solicita√ß√£o indica o que eu quero fazer com o Zabbix, os par√¢metros s√£o indicados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/46/h8/e-/46h8e-jkhyzj4dljmuo-rd3i1g8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Zabbix fornece uma resposta. </font><font style="vertical-align: inherit;">Aqui est√° um exemplo que diz: "Zabbix", por favor, me d√™ uma string de autentica√ß√£o para que eu possa enviar mais solicita√ß√µes. " </font><font style="vertical-align: inherit;">Confirmo minhas credenciais com login e senha: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/8b/5n/ti8b5n7de63oqwt3emjs8wzf45u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, uma solicita√ß√£o JSON retornar√° uma resposta JSON para n√≥s: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/zw/af/orzwaf9ssguutgd98_tf0qk-yyy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E nessa resposta JSON haver√° uma linha: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/fw/qa/dmfwqa_ulb9csqhjwlaw8vuphd8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um autenticador que pode ser usado para as solicita√ß√µes restantes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabalhar com objetos host</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembramos por que come√ßamos a estudar JSON: queremos obter o banco de dados de comutadores do Zabbix. Quais op√ß√µes para interrogar? Vamos sair daqui! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conhe√ßa: a API do Zabbix inclui, entre outras coisas, o m√©todo host.get: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6h/9s/i9/6h9si95adtk44qyqujquhvjbkru.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Host - esses s√£o nossos hosts. Obter √© um dar. Depois, aponto: me d√™ informa√ß√µes sobre o host! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/qh/jv/_hqhjvdgxtsbtlypqmjkrdbdndo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos par√¢metros, eu digo: produza tudo o que voc√™ sabe sobre hosts: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g2/jp/as/g2jpasm8v_0jb59cmy2kcjgdcty.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas devo acompanhar minha solicita√ß√£o com esta linha: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/os/jj/qyosjjbate8nm6rcazxw_rz-bwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos demonstrar. Para torn√°-lo conveniente, </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/xl/lr/foxllrj0twd3dauxqpkdgt3key8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
copiarei </font><font style="vertical-align: inherit;">esta solicita√ß√£o: </font><font style="vertical-align: inherit;">E insiro o autenticador que o Zabbix retornou para mim: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/ve/mu/cqvemull9ck4ohbobg57x99mbuw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, Zabbix Api: vimos como solicitar ao Zabbix um autenticador para acesso. E ent√£o eu demonstro como usar esse autenticador para obter algum tipo de resposta:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/c1/pn/dfc1pnn8ohqpvdto28ls6glrskg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu acho que est√° tudo claro. Voc√™ pode at√© ver se voc√™ usa uma lupa. Voc√™ reconhece switch1? Em algum lugar existe um switch2 ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/2h/ev/702hevhmrlcdiegys1ae9dh6ndc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu quebrei os olhos por um longo tempo e depois decidi ler como trabalhar com esse JSON na linha de comando. E uma das recomenda√ß√µes foi: use JSON Query. Ela √© muito saud√°vel, ilumina a resposta, veja: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9a/ei/jz/9aeijz-slee1ekq2iu1tq86cqle.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ha/jz/26/hajz26f3jvrfymevvidztnzizl8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, tudo ficou colorido - j√° √© bom; segundo, switch2, switch1 s√£o claramente vis√≠veis aqui:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/84/tp/qv84tptvurpqfkfqtmdbkfvh_wa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, um pouco de ajustes no JSON Query, veremos muitas coisas interessantes. </font><font style="vertical-align: inherit;">E para n√£o copiar esses ‚Äúcrocodilos‚Äù do caderno toda vez, proponho determinar o que iremos programar para trabalhar com o nosso ‚ÄúZabbix‚Äù. </font><font style="vertical-align: inherit;">Existe uma API do Zabbix - isto √© JSON, existem v√°rias linguagens de programa√ß√£o. </font><font style="vertical-align: inherit;">O JSON parece estar relacionado a um script Java, mas, de fato, outras linguagens s√£o usadas com mais freq√º√™ncia para trabalhar com o Zabbix - por exemplo, Perl, um script Perl que faz alguma coisa.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazendo solicita√ß√µes na forma de scripts Bash</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perl n√£o √© uma linguagem da moda hoje, obsoleta. Se eu recome√ßasse a vida, provavelmente come√ßaria a aprender Pyton. E √© definitivamente sabido que em "Python" existe uma biblioteca conveniente para trabalhar com "Zabbix". Mas, como nos reunimos aqui e n√£o daremos prefer√™ncia a nenhum idioma, eu uso este idioma: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/fv/xp/skfvxpn5j9scrpc3evf7eyrvnj0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O idioma do administrador do sistema, ou seja, eu - Bash! Portanto, farei estas solicita√ß√µes ao Zabbix: </font><font style="vertical-align: inherit;">
Eu as </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/3i/mb/zh3imb6ja0rkpyvy7bl-gpospwc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
emitirei na forma de scripts: Os </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i0/fk/rg/i0fkrgjljz1l8gdq20zzqirqmno.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scripts est√£o prontos, eu os copiarei. Eles parecem um inferno. Eu acho que um bom c√≥digo Python ser√° muito mais leg√≠vel. Mas, como eu mesmo n√£o conhe√ßo "Python" e n√£o quero dar nenhuma prefer√™ncia, escreverei sobre o que est√° pr√≥ximo ao cora√ß√£o do administrador do sistema:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/01/qj/z2/01qjz2tstbcljo7hlnjbiq-ri7m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o vou lhe dizer quais s√£o essas barras invertidas (e que Deus as aben√ßoe). Mas a cadeia de autentica√ß√£o ser√° enquadrada na forma de uma vari√°vel que precisamos exportar antes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ni/uc/xf/niucxfqzrmv1ouy4jrin3lrs7mg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/tt/wa/37/ttwa37gjveh9lxyfbqgnkoxhg-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
que valor isso tinha para n√≥s? E agora, em vez de copiar as linhas longas, posso simplesmente executar o script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/b0/xb/ggb0xbiuppm37ndovdlqev-81_u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O script retorna uma costura completa. Usando o JSON Query, voc√™ pode obter isso bonito: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lq/0r/ai/lq0raiqvp0e8ant2sj7ww2ruxkg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wh/k7/qg/whk7qgnjyn8amh0goeai98e05ne.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembre </font><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">se da tarefa: obtenha o banco de dados de switches que est√£o no Zabbix! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou desenhar imediatamente o resultado. N√£o vou contar por muito tempo e dar uma olhada no que est√° aqui e como. Temos uma tarefa assustadora: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/ku/f9/uokuf9cd68jhy4n_3tke1cc9bge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aqui est√° esse resultado, veja o que ele cont√©m. Diz aqui que temos esses comutadores no Zabbix, e este (10105, 10106, 10107) √© o identificador interno do comutador "Zabbiksk":</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/l0/ub/hxl0ubkxevyy-ngfijnfw3k3vsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado foi um arquivo simples. </font><font style="vertical-align: inherit;">Ao adicionar cada nova op√ß√£o, voc√™ deve executar este script para criar um arquivo. </font><font style="vertical-align: inherit;">Para que n√£o tenhamos esses "crocodilos", incluirei esta linha no pr√≥prio script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/em/jh/l1emjhywmibe_ehavajfptgx4r0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/kq/el/r6/kqelr6wblri6snfkbwk0jfvuhtc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ele retornar√° uma exibi√ß√£o elegante da tabela conosco. </font><font style="vertical-align: inherit;">Agora eu vou mostrar. </font><font style="vertical-align: inherit;">Eu executo o script, ele exibe e salva imediatamente esse arquivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-h/u0/dz/-hu0dz2hoymtx7eepiys0v4grhi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O utilit√°rio tee √© um bom utilit√°rio que grava o resultado em um arquivo e o distribui. </font><font style="vertical-align: inherit;">Agora temos 3 comutadores e um arquivo de texto no qual todos os comutadores est√£o listados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/bu/fz/urbufz8s11mczfb2uld8b_oxo8k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ pode consultar cada um desses comutadores atrav√©s do RSH e descobrir quem est√° conectado com o qu√™. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, n√≥s temos o banco de dados do switch. </font><font style="vertical-align: inherit;">Nosso objetivo final √© mapas!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtendo uma lista de mapas e seus elementos no Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como trabalhar com cart√µes? Vamos aprender a ler informa√ß√µes sobre cart√µes do Zabbix. Copiarei este script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6t/9_/mb/6t9_mbgxpoyrttupz3cf-zsrmeg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/pz/g0/gw/pzg0gw6tel-pjkfgzxcqrsy0lf4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quem quiser, pode pegar todos esses scripts. Tentei simplific√°-los o m√°ximo poss√≠vel - n√£o funciona mais f√°cil. Se voc√™ descobrir como simplific√°-lo, escreva, eu o corrigirei: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/ex/kt/ojexktdpilhdilffqxopetdrgws.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este script ‚Üë passa para o Zabbix com uma solicita√ß√£o map.get e diz: ‚ÄúFale sobre os links e sobre os elementos em que esses links se conectam.‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora eu executo este script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/96/us/zf96uszqpiityn1vqaezvxj2odc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E mostro o resultado: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/nn/ep/fdnnepoivtufayskrat49ak6nu4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim como as informa√ß√µes sobre hosts, √© muito f√°cil obter informa√ß√µes sobre cart√µes do Zabbix. Cada cart√£o tem seu nome: A </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5n/wl/jt/5nwljtoelbudy0igqcrclgo6_v0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
seguir, est√£o os elementos deste cart√£o. Voc√™ reconhece o n√∫mero? Este √© o elemento interno do Zabbix:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/yk/cz/myykczkfzf6iev4s2s_vz-co5nk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mais desagrad√°vel √© que no Zabbix os elementos s√£o numerados novamente. </font><font style="vertical-align: inherit;">√Ä esquerda est√° o elemento id, √† direita est√° a numera√ß√£o do elemento dentro do mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/ek/xi/wzekxi5xnw70eazz4fswo75s9-a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, no Zabbix, cada host possui um n√∫mero e no mapa h√° outro n√∫mero - essa cadeia √© obtida. </font><font style="vertical-align: inherit;">Ou seja, o switch1 √© chamado 10105 no Zabbix e 2 no mapa (uma pequena complica√ß√£o da tarefa √© obtida).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reunimos tudo atrav√©s do CDP e RSH, descobrimos a conex√£o de switches com interfaces</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A parte final deste script √© que eu tenho que obter informa√ß√µes de quais identificadores do Zabbix est√£o associados a quais identificadores no mapa. Veja, em ‚ÄúZabbix‚Äù, aqui est√° este identificador (10105, 10106, etc.) e no mapa - 2, 3, etc .: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/e2/kq/tde2kqrnxxq8mw2xvrmckzu-cr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tradicionalmente, salvarei isso em um arquivo de texto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o6/ts/wi/o6tswi34dpttupdmkapyier25ki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
agora temos quase tudo. H√° informa√ß√µes sobre quais op√ß√µes est√£o neste arquivo (quais identificadores dentro do Zabbix s√£o usados): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/uh/jn/yruhjnqamivzhfuufaefldqm-ya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E temos informa√ß√µes sobre qual identificador no cart√£o est√° associado a qual identificador Zabbix (por exemplo, o switch1 tem o n√∫mero 10105 no Zabbix e em o n√∫mero do cart√£o 10105 tem o identificador 2):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/uh/jn/yruhjnqamivzhfuufaefldqm-ya.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/2e/ug/7s/2eug7srj1krpadc4iasvh1mtdye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o √© minha culpa! Os caras escreveram isso no Zabbix. Mas tenho certeza de que h√° uma raz√£o pela qual eles n√£o usam identificadores diretos no mapa. Talvez porque o mesmo objeto possa ser exibido no mapa v√°rias vezes e precise ter um identificador exclusivo. Portanto, a corrente √© mais longa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E aqui, provavelmente vou comentar sobre esse pequeno inferno. Reproduzir: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/rs/tq/g8rstq6pvpa0xqgrofdazuk_txm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No loop, li as linhas que descrevem qual comutador com o qual identificador Zabbix </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ii/nh/eq/iinhequuyybluby-ybxdu7lkghw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/8h/xa/er8hxamulabcynmqppzokznfl-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
eu </font><font style="vertical-align: inherit;">conecto a cada comutador do Zabbix via RSH: </font><font style="vertical-align: inherit;">leio em quais hosts ele est√° conectado. Redireciono esse resultado para outro ciclo: O </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/hr/pl/olhrpl7refin5zcmakahdqgec4a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
qual, por sua vez, l√™ os identificadores e descobre quem est√° conectado com quem: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/98/wz/ww/98wzwwnjkx3qp65cl3iqlzfxlza.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mostrarei os resultados desse script (chmod + x):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oi/qb/qy/oiqbqymkxfur8kd-i7xqglyxqd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No mapa, o segundo comutador √© conectado ao terceiro (lembre-se de que os identificadores no mapa) atrav√©s das interfaces correspondentes (Fas 0/5 - para o segundo, Fas 0/6 - para o terceiro ‚Üë). </font><font style="vertical-align: inherit;">Devemos desenhar esses nomes nos links, criar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se at√© esse momento apenas lemos informa√ß√µes do Zabbix (hosts, cart√µes foram lidos etc.), agora teremos que escrever informa√ß√µes no Zabbix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos salvar o resultado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gs/uh/wt/gsuhwt_0qiojiuheizaq3gt3wcg.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenhando linhas de comunica√ß√£o no Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Decidi escrever um script simples que mudaria algo no Zabbix. Sinceramente, estudei a API dessa maneira - era importante para mim que algo simples funcionasse: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/ke/s0/ygkes0eksoonvbajier32-c0dw4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gz/5g/_a/gz5g_anpr_docgcrlaxfm0jn-mw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro script n√£o estar√° relacionado √†s tarefas - ele mudar√° o nome do mapa (para ver como √© feito). Se queremos mudar algo no Zabbix, tamb√©m devemos aplicar a solicita√ß√£o POST e descrev√™-la no JSON, mas usando o m√©todo map.update. Entre os par√¢metros, devemos indicar explicitamente: MAPID, que encontrar√° o mapa desejado, e MAPNAME, que alterar√° o nome do mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/ms/3p/kkms3p-ixoafs4ifvpccikv1nd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© o conjunto m√≠nimo de par√¢metros. Estes par√¢metros s√£o eles mesmos: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/fw/yv/imfwyviqvbgelp9gjmoeelpedic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passe pelas vari√°veis ‚Äã‚Äãos argumentos do script. Eu fa√ßo o script execut√°vel (chmod + x): eu o executo </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/xj/uz/hxxjuzo5h4galmyprunx1ftd7so.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, conforme escrito no manual de treinamento. Se tudo estiver correto, o cart√£o deve se chamar Super MAP:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/va/qd/ervaqdxvi_h0twak7rxcz9zjh8u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Monitoramento - Mapas - voila: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/vf/yq/68vfyqjmwq8mlq6pacsj_c7mbnc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√°cil de alterar - Super MAP2: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yf/xi/zx/yfxizx_w2ycib6jifb9cw_2qh5u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo funciona: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vx/eh/7o/vxeh7o3axqtxzzggktfy1g1hqqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas nossa tarefa √© complicada - alterar as linhas de comunica√ß√£o! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/j2/pb/vej2pbmp87qsuylhj6vx7sw5doo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â necess√°rio gerar JSON, que descrever√° nosso mapa e todas as linhas de comunica√ß√£o. Para fazer isso, crio outro script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vc/aj/fd/vcajfdntlvggtwxr0qffvjyb-de.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/o6/o_/p5/o6o_p5msbpvhw27e-jo0xjfi6lg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O fato de eu ter muitos scripts n√£o significa que isso deve ser feito na empresa. Na empresa, voc√™ precisa usar uma linguagem normal que voc√™ conhe√ßa ("Python", "Pearl" ou outra coisa) e programar o que est√° aqui usando uma linguagem normal. Esses tijolos, cada um dos quais √© simples, permitem entender o que, por que e como faz√™-lo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro script que serve mais para entender o que precisa ser feito e n√£o para copiar (n√£o vou vender o produto final para voc√™ aqui): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v7/l8/uw/v7l8uwgwtmqbfuacxtnuqg89ery.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/cw/yn/ud/cwynudseywryxw-gkcajcp9vdua.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este script l√™ este arquivo:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/gj/bt/iugjbtn5qbfhwnjw3ednxvxnqea.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que indica qual elemento no mapa com qual elemento no mapa por meio de quais interfaces ele est√° conectado. Mais precisamente, pegaremos um elemento no mapa, um elemento no mapa e um r√≥tulo. Este √© um elemento no mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/yf/ae/fdyfaeounbojncqky7ionmzjaa0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E esta assinatura deve ser: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9z/ge/lp/9zgelpwjnjlu_bvsxbvwmkqgkzc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estou lendo este arquivo. Eu ordeno todos os elementos no mapa: eu </font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/th/ls/lathlszamnf7drlctykzoe7rmlc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
programo links - descri√ß√£o dos links na forma de JASON. A solicita√ß√£o final √© assim: atualize o mapa (n√∫mero do cart√£o ‚Üì): Os </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sr/bp/ga/srbpgaaeocsxrerwasxiw4eww-o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
links ser√£o descritos nesta vari√°vel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_s/jv/sb/_sjvsbsea4dfxn8xdhxu6wvq61s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Formada neste ciclo (todos os elementos e assinaturas dos cart√µes foram enumerados): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tm/tr/le/tmtrleu4iz3hj-tpihsmg60ai6m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente, temos uma tarefa assustadora e a descrevemos em detalhes no Shell ... Certamente muitos de voc√™s n√£o programaram no Shell. Voc√™ s√≥ precisa olhar para esses textos e programar o que for mais conveniente para voc√™.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tenho uma expectativa de que agora tudo deve acontecer. Lan√ßou um script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z6/ku/aj/z6kuajchdcyhzdsafzrgdwxrhbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recarregue a p√°gina Mapas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j_/36/6p/j_366pbhfsxwdf6r6-ptm-ajfqc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, como? Pelo menos funciona! Vamos adicionar outra op√ß√£o e executar o script novamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s pegamos o interruptor, chamamos de switch4: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/w6/2w/kiw62wjjoudkeqlbyqpwi8w_rum.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s desenhamos que √© o interruptor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/1f/jv/4c1fjvsupwx_ujkfykki_nlytbk.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/4k/qe/qu/4kqequ32eiap57vjw0ntpguworm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configure </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">N√≥s o </font><font style="vertical-align: inherit;">conectamos </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3y/vg/51/3yvg51etfkdm13nua1ricw7hkge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
como queremos (com um asterisco, voc√™ pode desenhar uma lingui√ßa): </font><font style="vertical-align: inherit;">N√≥s </font><font style="vertical-align: inherit;">configuramos o </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_e/-z/3e/_e-z3ebtugz-banoljrocvnnhkc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
interruptor. Eu </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/cm/vm/focmvm2m5meqrgmfpbrstofgpsg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
inicio </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Tudo o que fizemos anteriormente (basta mudar para switch4 e o endere√ßo √© 104): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/jh/hu/qrjhhudyhklwds0vqvel8bl7oxq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clique duas vezes no switch (cole o que voc√™ copiou): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0b/ng/ga/0bnggamteyi65nog6igvrnzbw3s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente, ser√° mais r√°pido reiniciar o terceiro switch (switch3), salvando a configura√ß√£o:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dv/k2/mr/dvk2mrpw11vgl6jraypfd1t7vva.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto isso, ele √© reinicializado, verifique se est√° dispon√≠vel em nosso novo switch via SNMP. Quando o Zabbik encontra, a primeira coisa a perguntar √© o nome do host SNMP. Portanto, adicionamos esse design ao nosso novo comutador: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fb/yo/t2/fbyot2e9x1ugheuhu-du6jrf5gg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wx/ft/by/wxftbyv_y5abyoswch-ctg9cp3y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora estamos aguardando a disponibilidade do comutador. O 101¬∫, o 102¬∫ est√£o dispon√≠veis, o 103¬∫ reinicia: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/kq/q-/udkqq-alaw8aoldd5re6a0wgoow.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O 103¬∫ </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/fr/ox/ftfroxxsep7orgxpyqhghouetsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
respondeu </font><font style="vertical-align: inherit;">: o </font><font style="vertical-align: inherit;">104¬∫ respondeu. Verifique se o SNMP est√° dispon√≠vel via SNMP4: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mx/ts/rd/mxtsrdsg1tvvdd6y_cjuigbnhxi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dispon√≠vel! Temos todas as chances de v√™-lo na lista de hosts. Vamos esperar um minuto (a cada minuto, temos uma rede digitalizada): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/3c/ff/kb3cffka032ra7i5is9ayhewjya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois que ela aparece, voltamos ao primeiro script. Ele descarregou informa√ß√µes de n√≥s quais comutadores em geral s√£o:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/ea/zo/npeazo2te4hbnfd2ncdm0vsr32y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seu cabo funcionou, eles travaram um novo switch, voc√™ levantou o link e ele apareceu automaticamente no Zabbix. </font><font style="vertical-align: inherit;">Portanto, aqui devemos ver que a quarta op√ß√£o apareceu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v2/q-/kt/v2q-ktdybfjkhgn_sz0vee3toum.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso banco de dados √© preenchido automaticamente.</font></font><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consertamos o material (adicionamos switch4), executamos o script final</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, infelizmente, voc√™ precisa fugir e exibir nosso switch no mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/4a/5k/ux4a5kwj5gpfzmxbxnsqvncarpc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
n√£o apenas seus telefonistas correram, como tamb√©m configurou o link - voc√™ ainda precisa ir aqui e dizer: "Estamos adicionando um novo switch". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g-/iz/nf/g-iznfb3qf_fillb6w40lmetgxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Localize onde deve estar e indique que temos o host, switch4, e tamb√©m desenhe qual √© esse switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y3/bp/pm/y3bppmrcdmfoaerjlafxilst_gk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E atualize (ainda n√£o estamos desenhando a linha de comunica√ß√£o!): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gs/fa/fk/gsfafkqzwjjpiwihul-lfc1nzfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora lembramos que nossos scripts de linha de comunica√ß√£o s√£o constru√≠dos com base no protocolo CDP. E para obter informa√ß√µes do CDP do switch, voc√™ precisa configurar o acesso RSH a ele. Lembre-se, eu decidi usar esse m√©todo?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/84/q5/df/84q5dfhi0d4spzqawa1uumbn9gm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wq/kl/xn/wqklxnrebbym3uce1hrsg-izdmy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tudo estiver bem, posso tentar, ent√£o posso tentar o RSH - solicitar informa√ß√µes sobre sua conex√£o no 4¬∫ comutador. Aqui ele diz: "Estou conectado √† terceira, do meu lado - a 10, por outro lado - √† 8¬™ interface". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/_a/ug/cy_augy2yrbswanujdpjpdkcwqc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles o adicionaram ao cart√£o e temos uma tabela de correspond√™ncia entre os identificadores no Zabbix e os identificadores no cart√£o (veja, √© o quinto no mapa): eles </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-i/t8/vs/-it8vsr54h_fnue2-srk6zxcwzs.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/je/j5/at/jej5atlnmnnazwy6aga4k8n5sfi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aumentaram o RSH. Agora podemos construir uma conex√£o: quais comutadores est√£o conectados por quais links (obtemos o arquivo de texto): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/hl/zm/abhlzmj1mez4py4iecfw4e0mgs8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/g7/st/qm/g7stqmpv_mu4qsylijjuxwwibac.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos tentar executar o script final, que ler√° esse arquivo de texto e gerar√° uma solicita√ß√£o JASON para atualizar os mapas, redesenhando todos os links no mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/aq/iy/ctaqiy_1gdpvipgk4t3pzzc86os.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/dq/ld/ue/dqldueagtxz_ap1rbmxphccytba.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/c3/6v/fp/c36vfphix1om8_etfenkvo9oeco.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, como? Impressionante? N√£o administrei em 45 minutos planejados, mas ainda assim rapidamente (cerca de 75 minutos) - provavelmente n√£o funcionar√° mais r√°pido.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos! </font><font style="vertical-align: inherit;">Sou amigos muito felizes - deu certo. </font><font style="vertical-align: inherit;">O manual de treinamento est√° aqui: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://wiki.val.bmstu.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se voc√™ n√£o encontrar, escreva para o e-mail: val@bmstu.ru, val@specialist.ru - enviarei com prazer. </font><font style="vertical-align: inherit;">Um webinar ser√° exibido no site especialista.ru - vou verificar isso com certeza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o mais importante, meus amigos, que tudo isso n√£o foi em v√£o, mas com o objetivo astuto de convencer voc√™ ou seus colegas ao nosso curso de dois dias, que compreende um grande n√∫mero de tarefas relacionadas ao Zabbix: detec√ß√£o e ajuste de baixo n√≠vel ... N√£o no topo, como est√° agora, mas em detalhes, com os de laborat√≥rio - voc√™ far√°: at√© que voc√™ fa√ßa, eu n√£o vou deixar voc√™ sair. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ficarei feliz em v√™-lo, seus colegas! </font><font style="vertical-align: inherit;">Escrever cartas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Te vejo em breve!</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZrNScBG9TnU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pouco de publicidade :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado por ficar com a gente. Voc√™ gosta dos nossos artigos? Deseja ver materiais mais interessantes? Ajude-nos fazendo um pedido ou recomendando aos seus amigos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS na nuvem para desenvolvedores a partir de US $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anal√≥gico exclusivo de servidores de n√≠vel b√°sico que foi inventado por n√≥s para voc√™: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toda a verdade sobre o VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10 GB DDR4 480 GB SSD 1 Gbps de US $ 19 ou como dividir o servidor?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 vezes mais barato no data center Equinix Tier IV em Amsterd√£?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Somente n√≥s temos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 TVs Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV a partir de US $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na Holanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - a partir de US $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leia sobre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como criar um pr√©dio de infraestrutura. </font><font style="vertical-align: inherit;">classe c usando servidores Dell R730xd E5-2650 v4 que custam 9.000 euros por um centavo?</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt486800/index.html">Cassandra. Como n√£o morrer se voc√™ conhece apenas Oracle</a></li>
<li><a href="../pt486802/index.html">As pessoas conhecem os sistemas de recomenda√ß√£o. Fatora√ß√£o</a></li>
<li><a href="../pt486804/index.html">Inform√°tica em Sa√∫de Global: Tecnologias em Nuvem</a></li>
<li><a href="../pt486808/index.html">Teste de gravidez eletr√¥nico em uma farm√°cia: como funciona</a></li>
<li><a href="../pt486810/index.html">Novo frontend do Odnoklassniki: iniciando o React em Java. parte II</a></li>
<li><a href="../pt486818/index.html">Portando o Quake para o iPod Classic</a></li>
<li><a href="../pt486820/index.html">70 perguntas da entrevista sobre Javascript</a></li>
<li><a href="../pt486822/index.html">[Pelas docas] Flutter. Parte 4. Para desenvolvedores web</a></li>
<li><a href="../pt486824/index.html">Maus conselhos ao trabalhar com a ANTLR</a></li>
<li><a href="../pt486826/index.html">Criando um Viberbot completo no Django 2 e na API Riber do Viber. Parte Um - Webhook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>