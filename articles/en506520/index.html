<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚ÄçüöÄ üë®‚Äçüé® üë©üèæ‚Äçüé§ Conference DEVOXX UK. Choose a framework: Docker Swarm, Kubernetes or Mesos. Part 1 üòñ üôéüèº üìÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Docker Swarm, Kubernetes, and Mesos are the most popular container orchestration frameworks. In his speech, Arun Gupta compares the following aspects ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Conference DEVOXX UK. Choose a framework: Docker Swarm, Kubernetes or Mesos. Part 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/506520/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker Swarm, Kubernetes, and Mesos are the most popular container orchestration frameworks. </font><font style="vertical-align: inherit;">In his speech, Arun Gupta compares the following aspects of the work of Docker, Swarm, and Kubernetes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Local development.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deployment Features</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multicontainer applications.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service discovery service discovery.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scaling service.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run-once assignments.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integration with Maven.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A "rolling" update.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creating a Couchbase database cluster.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, you will get a clear idea of ‚Äã‚Äãwhat each orchestration instrument has to offer, and learn how to use these platforms effectively. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arun Gupta is Amazon Web Services' premier open-source product technologist who has been developing Sun, Oracle, Red Hat, and Couchbase developer communities for over 10 years. He has extensive experience working in leading cross-functional teams involved in the development and implementation of marketing campaigns and programs. He led the Sun engineering team, is one of the founders of the Java EE team and the creator of the American branch of Devoxx4Kids. Arun Gupta is the author of more than 2 thousand posts in IT blogs and has made presentations in more than 40 countries.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/uu/h0/ce/uuh0ceuils4gahmm6ajpuwvqhr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good afternoon, I know this is the last performance before dinner, but I hope you have some more energy left from breakfast to listen to me. My name is Arun Gupta, I work for AWS, which we will talk about now, as well as Docker and Kubernetes, so you can choose the most suitable of these frameworks for yourself. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am the captain of Docker, which I am very proud of; there are only 70 people around the world recognized by Docker in this status. We started with the earliest version of the 0.3 system, I wrote a book about Docker, so I know something about this technology. In addition, I have been a JavaOne rock star for 4 years in a row, so I understand the topic. I always learn from my audience and exchange useful tips with her, so thank you for participating.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We begin our consideration of the issue from the highest level. This is not Docker 1.01, so don't expect me to teach you the basics. Raise your hands, who is using Docker in any form today?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/yu/pf/ggyupfn4lcwxr_apfsttjzi_afs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Excellent, almost 90% of those present. So, globally, the Docker workflow consists of 3 main components: the client part, the Docker host, and the Docker registry. Suppose you want to run a container for a specific image. You tell the client: ‚ÄúDownload this image and launch the containers!‚Äù. To communicate with the host, the client uses the docker build, docker pull, and docker run commands. He gives a command to the host, he says: ‚ÄúYeah, I don‚Äôt have this image!‚Äù, Then by default he accesses the registry of the Docker hub at hubdocker.com, downloads the desired image, saves it and runs it in containers. In this sense, the client has absolutely no states outside the working location, it just gives a command like CLI by wire, it arrives at the host as a REST API, and the host, understanding the API requirementsdownloads an image from a hub or an automated registry of Amazon ECR Docker containers, and then launches containers based on that image. This is a completely static state, managed only on the host. In this case, we have one host, but it is easy enough to use a multi-host solution.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is exactly what the orchestration framework is for - you do not want to create a distributed application system on a single host, because this is the weakest point, which, in case of a failure, will bring down the entire system. You want to distribute the task across multiple hosts to avoid a global failure. For example, you want to run a Java application that uses an application server, database server, caching, many different components. Moreover, it often requires the simultaneous operation of several instances of this application, since a typical Java application is a multi-container application that uses containers on multiple hosts. Therefore, you need an orchestration framework, not only for planning containerization, but also for creating the ability to manage your cluster,life cycles and other necessary operations.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this presentation, I will tell you how the two main application orchestration tools differ - Docker and Kubernetes, their capabilities, the pros and cons of using it. I will consider these issues from the point of view of a developer who begins to create any application with a key, fundamental concept. This concept includes components such as a cluster, a single container, many containers, their interaction with each other, discovery of services (or cataloging of services that allows them to know about each other), load balancing, persistent storage intended for stateful containers , as well as knowledge of how local development will be performed.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/zs/wd/zfzswdthfine382s9vbnihugv8a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the Dev perspective, we will move on to the Ops perspective, to the architectural side of the system: how to multiply the master node, how the scheduler algorithm should work when working on multiple hosts, what are the rules and restrictions with which I can run the container on a specific host, how can I perform monitoring and rolling updates, how to use cloud support. Today we‚Äôll talk about all this.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with Docker Swarm - this is one of the features of the Docker Engine, starting with version 1.2, a standard clustering tool. It converts a set of Docker hosts into a single sequential Swarm cluster. If you go to docker.com, you can download one of two editions: Community Edition or Enterprise Edition (today these versions are called Stable and Edge). The first build is what I use, it is stable and updated every 3 months, unlike the latest Edge build, which is updated every month. I am using the Docker CE version for Mac. So, when I download Docker CE to my computer, during installation I mark the Swarm contained in it, and after that I can immediately start creating clusters, orchestrating and planning containers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please note that the Docker Swarm module requires communication with the host, so when using a network card with a multi-host system, you need to listen to a specific Docker host address using the docker swarm unit - - listen-addr: 2377 command. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A yellow icon indicates a single master node by default. The wizard gives me a worker-token control token, I take it and use it to attach a new work node, a physical or virtual machine, it does not matter.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2s/ul/zh/2sulzhylgnuqbsym4avabufpyss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This token indicates that this node should join the original master. Using worker-token, I can form my own Docker cluster. Thus, using Docker, it is very easy to create a cluster of several nodes. The next slide shows a cluster of one master node and 5 working nodes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ul/pl/df/ulpldfpatcvyh1r_ielat4fsycg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With the same ease, you can create clusters with several master nodes - the primary master node and the secondary master node, linking them to work nodes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0t/nv/sx/0tnvsxqge_pm8lwagqikx2at8cg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the client side, when you send a request to the secondary master, it as a proxy redirects it to the primary master, and that one already executes the request, distributing the load between the work nodes. By default, your container can also work in a manager node, but when creating a cluster, containers should be placed only in work nodes, and the manager will only administer the cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following basic concept, a cluster, means an architecture of several master nodes and several working nodes in which containers are running. This is a strictly consistent scheme, replicated based on the Raft consensus algorithm, with the highest speed due to reading from RAM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/9m/7t/fe9m7tme58vndrflduiu7al5aba.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I highly recommend using a template with the Raft protocol, because if you split the networks, the system does not have to think about who now plays the role of a wizard, because with Raft, the selection will be made automatically. At the bottom level are Swarm working nodes that communicate with each other via the Gossip protocol. You see that red containers work on 3 nodes, and green containers on two nodes - this suggests that Swarm Worker allows you to start and perform several different tasks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How does the Docker Replicated Service concept work? Since I am a Java developer, in this case I use the WildFly container.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/pa/ve/shpave-t3ap10-irlpc0lclp1ss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To do this, through the Docker command line, I enter the command docker service create - - replicas 3 - - name web jboss / wildfly, indicating the number of replicas I need, the name of the service is web, and add a wildfly image. This image will be uploaded to the 3 Docker hosts and launch the container. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another important concept is the failure of the Node Failure node. What happens?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cb/li/ez/cbliezm9xg3zuwwjdw0ps8-o6ok.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Docker sees that the current state of the system does not match the desired one, one node fell out of the cluster, which means that it is necessary to transfer containers from this node to another host. </font><font style="vertical-align: inherit;">That is, if you declared the need for three replicas to work, Docker will make sure that these 3 replicas exist under any conditions. </font><font style="vertical-align: inherit;">A situation may occur when a container failure occurs in a working node. </font><font style="vertical-align: inherit;">Similar to the previous case, Docker keeps track of the specified number of containers, and if it decreases, a scheduler is activated that immediately restores the container, bringing the current state of the cluster to the desired state. </font><font style="vertical-align: inherit;">That is, if you announced 3 replicas, all these replicas should work at any given time. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conference DEVOXX UK. </font><font style="vertical-align: inherit;">Choose a framework: Docker Swarm, Kubernetes or Mesos. </font><font style="vertical-align: inherit;">Part 2</font></font></a><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1dgUXNVQS5o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit of advertising :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for staying with us. Do you like our articles? Want to see more interesting materials? Support us by placing an order or recommending to your friends, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud VPS for developers from $ 4.99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unique analog of entry-level servers that was invented by us for you: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The whole truth about VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps from $ 19 or how to divide the server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (options are available with RAID1 and RAID10, up to 24 cores and up to 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 times cheaper at the Equinix Tier IV data center in Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Only we have </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV from $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the Netherlands!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - from $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read about</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> How to Build Infrastructure Bldg. </font><font style="vertical-align: inherit;">class c using Dell R730xd E5-2650 v4 servers costing 9,000 euros for a penny?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en506498/index.html">Resources for studying finance in English (USA), or How to evaluate a company</a></li>
<li><a href="../en506506/index.html">Mapping json data to a C ++ structure</a></li>
<li><a href="../en506508/index.html">Hammock Driven Development: ‚ÄúSleep is an important part of a programmer‚Äôs work‚Äù</a></li>
<li><a href="../en506510/index.html">Burnout [% state employee%] = factor (Maybe <market_economy>)</a></li>
<li><a href="../en506516/index.html">Save the password: a fabulous implementation of the Shamir secret sharing scheme in Python</a></li>
<li><a href="../en506524/index.html">HackTheBox. Walkthrough Monteverde. Brute SMB and LPE through Azure Admins</a></li>
<li><a href="../en506530/index.html">How to choose a UPS</a></li>
<li><a href="../en506532/index.html">Through thorns to the stars: make a device for pointing a laser pointer at any celestial object</a></li>
<li><a href="../en506538/index.html">How Wikipedia can reveal your personal data and how it actually uses it</a></li>
<li><a href="../en506542/index.html">DIY video recording to the cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>