<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí© üê∞ ‚ÜïÔ∏è O que fazer quando o CSS bloqueia a an√°lise de p√°gina? ‚ö∞Ô∏è üìÅ üòæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, conduzi uma auditoria em um site e me deparei com um padr√£o preload/polyfillque j√° vi em v√°rios clientes. Hoje, o uso desse padr√£o anter...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>O que fazer quando o CSS bloqueia a an√°lise de p√°gina?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/490628/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recentemente, conduzi uma auditoria em um site e me deparei com um padr√£o </font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que j√° vi em v√°rios clientes. </font><font style="vertical-align: inherit;">Hoje, o uso desse padr√£o anteriormente popular n√£o √© recomendado. </font><font style="vertical-align: inherit;">No entanto, √© √∫til consider√°-lo para ilustrar a import√¢ncia do uso cuidadoso do mecanismo de pr√©-carregamento de materiais pelos navegadores da web. </font><font style="vertical-align: inherit;">Tamb√©m √© interessante porque permite demonstrar um exemplo real de como a ordem dos elementos em um documento pode afetar o desempenho (√© o que √© discutido </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maravilhoso artigo de Harry Roberts). </font><font style="vertical-align: inherit;">
O material, cuja tradu√ß√£o publicamos hoje, √© dedicado √† an√°lise de situa√ß√µes nas quais o manuseio inadequado e prematuro dos recursos de CSS afeta o desempenho das p√°ginas da web.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/j9/ku/dh/j9kudhouixuhlvhywk7misjih8w.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre loadCSS</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sou um grande f√£ do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filament Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eles lan√ßam uma quantidade incr√≠vel de √≥timos projetos. Al√©m disso, eles constantemente criam ferramentas valiosas e as compartilham para melhorar a Web. Uma dessas ferramentas √© o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loadCSS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que por muito tempo foi a mesma ferramenta que eu recomendei que todos usassem para carregar recursos CSS n√£o cr√≠ticos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora isso tenha mudado agora (e o Filament Group tenha publicado um excelente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre o que seus funcion√°rios preferem usar atualmente), ainda assim, quando audito sites, frequentemente vejo como eles o </font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usam na produ√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dos padr√µes que me deparei √© o padr√£o</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Usando essa abordagem, todos os arquivos com estilos s√£o carregados no modo de pr√©-carregamento (o atributo dos </font></font><code>rel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">links correspondentes √© definido como </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Depois disso, quando estiverem prontos para uso, aplique seus eventos </font></font><code>onload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para conect√°-los √† p√°gina.</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"path/to/mystylesheet.css"</span> <span class="hljs-keyword">as</span>=<span class="hljs-string">"style"</span> onload=<span class="hljs-string">"this.rel='stylesheet'"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"path/to/mystylesheet.css"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como nem todos os navegadores suportam o design </font></font><code>&lt;a href="https://caniuse.com/#feat=link-rel-preload"&gt;&lt;link rel="preload"&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o projeto </font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fornece aos desenvolvedores um polyfill conveniente, que √© adicionado √† p√°gina ap√≥s a descri√ß√£o dos links relevantes:</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"path/to/mystylesheet.css"</span> <span class="hljs-keyword">as</span>=<span class="hljs-string">"style"</span> onload=<span class="hljs-string">"this.rel='stylesheet'"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"path/to/mystylesheet.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ ... }());
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desordem nas prioridades da rede</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu nunca fui um f√£ ardente desse padr√£o. </font><font style="vertical-align: inherit;">O pr√©-carregamento √© uma ferramenta rude. </font><font style="vertical-align: inherit;">Os materiais baixados usando links de atributo s√£o </font></font><code>rel="preload"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bem-sucedidos com outros materiais para recursos de rede. </font><font style="vertical-align: inherit;">O uso </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pressup√µe que as folhas de estilo carregadas de forma ass√≠ncrona devido ao fato de n√£o desempenharem um papel cr√≠tico na sa√≠da de uma p√°gina recebam uma prioridade muito alta dos navegadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A imagem a seguir, tirada do WebPageTest, demonstra esse problema muito bem. </font><font style="vertical-align: inherit;">Nas linhas 3-6, voc√™ pode ver o carregamento ass√≠ncrono de arquivos CSS usando um padr√£o </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas, embora os desenvolvedores considerem esses arquivos n√£o t√£o importantes que o download deles impediria a renderiza√ß√£o, use</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> significa que eles ser√£o carregados antes que o navegador receba os recursos restantes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f9/07f/75a/8f907f75ae91cafe98091b00c2e7750e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os arquivos CSS que usam o padr√£o de pr√©-carregamento quando carregados chegam ao navegador mais cedo do que outros recursos, mesmo que n√£o sejam extremamente necess√°rios para a renderiza√ß√£o inicial da p√°gina</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bloqueio do analisador HTML</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os problemas associados √† prioridade do carregamento de recursos j√° s√£o suficientes para evitar o uso do padr√£o na maioria das situa√ß√µes </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas, neste caso, a situa√ß√£o √© agravada pela presen√ßa de outra folha de estilo, carregada da maneira usual.</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"path/to/main.css"</span> /&gt;<font></font>
&lt;link rel="preload" href="path/to/mystylesheet.css" as="style" onload="this.rel='stylesheet'"&gt;<font></font>
&lt;noscript&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="path/to/mystylesheet.css"&gt;<font></font>
&lt;/noscript&gt;<font></font>
&lt;script&gt;<font></font>
/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */<font></font>
(function(){ ... }());<font></font>
&lt;/script&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os mesmos problemas ao usar os </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leads levam ao fato de que os arquivos mais importantes n√£o t√™m alta prioridade. Mas √© t√£o importante, e talvez menos √≥bvio, que efeito isso tem na capacidade do navegador de analisar a p√°gina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente, isso j√° foi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em detalhes </font><font style="vertical-align: inherit;">, por isso recomendo a leitura desse material para entender melhor o que est√° acontecendo. Aqui vou falar sobre isso brevemente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, o carregamento de estilos bloqueia a renderiza√ß√£o da p√°gina. O navegador precisa consultar e analisar estilos para poder exibir a p√°gina. No entanto, isso n√£o impede que o navegador analise o restante do c√≥digo HTML. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os scripts, por outro lado, bloqueiam o analisador se n√£o estiverem marcados como </font></font><code>defer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o navegador deve assumir que o script pode estar manipulando o conte√∫do da pr√≥pria p√°gina ou os estilos aplicados a ela, ele precisa ter cuidado com a execu√ß√£o desse script. </font><font style="vertical-align: inherit;">Se o navegador souber que algum c√≥digo CSS est√° carregando, ele aguardar√° a chegada desse c√≥digo CSS e depois executar√° o script. </font><font style="vertical-align: inherit;">E como o navegador n√£o pode continuar analisando o documento at√© que o script seja executado, isso significa que os estilos n√£o bloqueiam mais a renderiza√ß√£o. </font><font style="vertical-align: inherit;">Eles impedem o navegador de analisar o HTML. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse comportamento √© verdadeiro para scripts externos e scripts incorporados na p√°gina. </font><font style="vertical-align: inherit;">Se o CSS for carregado, os scripts embutidos n√£o ser√£o executados at√© que este CSS chegue ao navegador.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estudo de problemas</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maneira mais compreens√≠vel de visualizar esse problema √© usar as ferramentas de desenvolvedor do Chrome (eu realmente gosto do n√≠vel em que essas ferramentas cresceram). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre as ferramentas do Chrome, h√° uma guia </font></font><code>Performance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com a qual voc√™ pode gravar o perfil de carregamento da p√°gina. Eu recomendo desacelerar artificialmente a conex√£o de rede para que o problema se manifeste mais claramente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, testei usando a configura√ß√£o de rede 3G r√°pida. Se voc√™ observar atentamente o que acontece com o encadeamento principal, poder√° entender que a solicita√ß√£o para carregar o arquivo CSS ocorre no in√≠cio da an√°lise de HTML (cerca de 1,7 segundos ap√≥s o carregamento da p√°gina).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/40b/881/a00/40b881a0060365bcbb5e4944b6784a2d.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pequeno ret√¢ngulo abaixo do bloco de an√°lise HTML representa uma solicita√ß√£o para receber um arquivo CSS</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Durante o pr√≥ximo per√≠odo de tempo, que √© aproximadamente um segundo, o encadeamento principal fica inativo. </font><font style="vertical-align: inherit;">Aqui voc√™ pode ver pequenas ilhas de atividade. </font><font style="vertical-align: inherit;">√â um acionamento de eventos indicando a conclus√£o do carregamento de estilos; √© o envio pelo mecanismo de pr√©-carregamento de recursos de outras solicita√ß√µes. </font><font style="vertical-align: inherit;">Mas o navegador para completamente de analisar o HTML.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/059/fca/6f1/059fca6f1820ca9a3b841140ab912d4e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ observar o cen√°rio geral, ap√≥s o in√≠cio do carregamento do CSS, o encadeamento principal ficar√° inativo por mais de 1,1 segundos.Portanto</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
, 2,8 segundos se passaram, o estilo foi carregado e o navegador o processou. </font><font style="vertical-align: inherit;">Somente ent√£o vemos o processamento do script interno e, depois disso, o navegador finalmente retorna √† an√°lise de HTML.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65a/a96/da2/65aa96da21d2e1ac6db4116ad54a8f80.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O CSS chega em cerca de 2,8 segundos, ap√≥s o que vemos que o navegador continua analisando o HTML</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox √© uma boa exce√ß√£o</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O comportamento acima √© comum para Chrome, Edge e Safari. </font><font style="vertical-align: inherit;">O Firefox √© uma boa exce√ß√£o √† lista de navegadores populares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os outros navegadores suspendem a an√°lise de HTML, mas usam um analisador proativo (um meio de pr√©-carregamento de materiais) para exibir o c√≥digo dos links para recursos externos e para atender √†s solicita√ß√µes de carregamento desses recursos. </font><font style="vertical-align: inherit;">O Firefox, no entanto, d√° um passo adiante neste assunto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">constr√≥i</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especulativamente </font><font style="vertical-align: inherit;">uma √°rvore DOM, embora espere que o script seja executado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menos que o script manipule o DOM, o que leva √† necessidade de descartar os resultados da an√°lise especulativa, essa abordagem permite que o Firefox aproveite. Obviamente, se o navegador tiver que descartar a √°rvore DOM especulativamente constru√≠da, significa que, ao construir essa √°rvore, ela n√£o serviu para nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √© uma abordagem interessante. Fiquei terrivelmente curioso para saber como √© eficaz. Agora, no entanto, n√£o h√° informa√ß√µes sobre isso no Firefox Performance Profiler. N√£o √© poss√≠vel descobrir se o analisador especulativo funcionou, se √© necess√°rio refazer o trabalho realizado e se ainda precisa ser refeito, como isso afetar√° o desempenho.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conversei com os respons√°veis ‚Äã‚Äãpelas ferramentas de desenvolvedor do Firefox e posso dizer que eles t√™m id√©ias interessantes sobre como apresentar essas informa√ß√µes no criador de perfil no futuro. </font><font style="vertical-align: inherit;">Espero que tenham sucesso.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solu√ß√£o para o problema</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No caso do cliente, que mencionei no in√≠cio, o primeiro passo para resolver esse problema parecia extremamente simples: livrar-se do padr√£o </font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O pr√©-carregamento de CSS n√£o cr√≠tico n√£o faz sentido. </font><font style="vertical-align: inherit;">Aqui voc√™ precisa mudar para usar, em vez de </font></font><code>rel="preload"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um atributo </font></font><code>media="print"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">√â exatamente isso que os especialistas do Grupo de Filamentos recomendam. </font><font style="vertical-align: inherit;">Al√©m disso, essa abordagem permite que voc√™ se livre completamente do polyfill.</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"/path/to/my.css"</span> media=<span class="hljs-string">"print"</span> onload=<span class="hljs-string">"this.media='all'"</span>&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso j√° nos coloca em uma posi√ß√£o melhor: agora as prioridades da rede est√£o muito mais alinhadas com a real import√¢ncia dos downloads. E tamb√©m nos livramos do script embutido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, ainda h√° outro script interno localizado no cabe√ßalho do documento, abaixo da linha que inicia a solicita√ß√£o para carregar CSS. Se voc√™ mover esse script para que fique na frente da linha que carrega o CSS, isso eliminar√° o bloqueio do analisador. Se voc√™ analisar a p√°gina novamente usando as Ferramentas do desenvolvedor do Chrome, a diferen√ßa ser√° completamente √≥bvia.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d16/c64/170/d16c64170a5ae365154626fc77eea21f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de fazer altera√ß√µes no c√≥digo da p√°gina, o analisador HTML parou na linha 1939, tendo encontrado um script interno, e permaneceu aqui por cerca de um segundo. Ap√≥s a otimiza√ß√£o, ele conseguiu chegar √† linha 5281</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Anteriormente, o analisador parou na linha 1939 e aguardava o carregamento do CSS, mas agora atinge a linha 5281. L√°, no final da p√°gina, existe outro script interno que interrompe o analisador novamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √© uma solu√ß√£o r√°pida para o problema. Esta n√£o √© a op√ß√£o que representa a solu√ß√£o final para o problema. Alterar a ordem dos elementos e se livrar do padr√£o</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© apenas o primeiro passo. Voc√™ pode resolver esse problema da melhor maneira, incorporando c√≥digo CSS cr√≠tico em uma p√°gina, em vez de carreg√°-lo de um arquivo externo. padronizar</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projetado para ser usado al√©m do CSS embutido. </font><font style="vertical-align: inherit;">Isso nos permite ignorar completamente os problemas associados aos scripts e garantir que o navegador, ap√≥s executar a primeira solicita√ß√£o, tenha todos os estilos necess√°rios para renderizar a p√°gina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, por enquanto, deve-se observar que podemos obter um bom aumento de desempenho fazendo pequenas altera√ß√µes no projeto, relacionadas √† maneira como os estilos s√£o carregados e √† ordem dos elementos no DOM.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ usar um </font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">padr√£o </font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, v√° para o padr√£o de carregamento de estilos </font></font><code>print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ tiver estilos externos carregados da maneira usual (ou seja, usando links regulares para arquivos desses estilos), mova todos os scripts internos que podem ser movidos acima dos links para carregar estilos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incorpore estilos cr√≠ticos na p√°gina para garantir o in√≠cio da renderiza√ß√£o mais r√°pido poss√≠vel.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ encontrou problemas para diminuir a renderiza√ß√£o da p√°gina devido ao CSS? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O PS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RUVDS parabeniza todos os profissionais de TI em 8 de mar√ßo! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ano, decidimos n√£o dar tulipas e n√£o fazer uma sele√ß√£o de presentes nerd. </font><font style="vertical-align: inherit;">Seguimos um caminho diferente e criamos a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√°gina IT is female</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para mostrar a presen√ßa de especialistas femininas em TI.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt490618/index.html">Buffers de pilha da Goroutine</a></li>
<li><a href="../pt490620/index.html">Quando ou√ßo as palavras "restaurou a rede neural", subo para verificar os backups</a></li>
<li><a href="../pt490622/index.html">Combate a vazamentos de mem√≥ria em aplicativos da web</a></li>
<li><a href="../pt490624/index.html">Controle de cabe√ßalho HTTP da pol√≠tica de recursos e navegador da Web</a></li>
<li><a href="../pt490626/index.html">Um guia completo para dados- * atributos HTML</a></li>
<li><a href="../pt490630/index.html">Carregando matrizes NumPy do disco: Comparando memmap () e Zarr / HDF5</a></li>
<li><a href="../pt490634/index.html">Eventos digitais em Moscou de 2 a 8 de mar√ßo</a></li>
<li><a href="../pt490636/index.html">Eventos digitais em S√£o Petersburgo, de 2 a 8 de mar√ßo</a></li>
<li><a href="../pt490640/index.html">Sobrecarga em C ++. Parte III Sobrecarregando novas instru√ß√µes / exclus√£o</a></li>
<li><a href="../pt490642/index.html">Plug-in para monitorar aplicativos K8s DevOpsProdigy KubeGraf v1.3.0: nova vers√£o e novos recursos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>