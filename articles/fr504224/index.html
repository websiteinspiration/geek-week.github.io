<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∏ üéØ üö≤ Comment avons-nous surv√©cu √† la forte augmentation de la charge x10 sur le site distant et quelles conclusions üßúüèæ ü¶ä ü§∏üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Les deux derniers mois, nous avons v√©cu une situation tr√®s int√©ressante et je voudrais partager notre histoire de mise √† l'√©chelle des ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment avons-nous surv√©cu √† la forte augmentation de la charge x10 sur le site distant et quelles conclusions</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sbermarket/blog/504224/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font><font style="vertical-align: inherit;">Les deux derniers mois, nous avons v√©cu une situation tr√®s int√©ressante et je voudrais partager notre histoire de mise √† l'√©chelle des infrastructures. </font><font style="vertical-align: inherit;">Pendant ce temps, SberMarket a multipli√© par 4 ses commandes et a lanc√© un service dans 17 nouvelles villes. </font><font style="vertical-align: inherit;">La croissance explosive de la demande de produits alimentaires nous a oblig√©s √† agrandir notre infrastructure. </font><font style="vertical-align: inherit;">Lisez les d√©couvertes les plus int√©ressantes et utiles sous le chat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ln/el/ry/lnelryyy8ylmld9qzjuwsdfrafo.gif"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'appelle Dima Bobylev, je suis le directeur technique de SberMarket. </font><font style="vertical-align: inherit;">Comme il s'agit du premier article de notre blog, je vais dire quelques mots sur moi et sur l'entreprise. </font><font style="vertical-align: inherit;">L'automne dernier, j'ai particip√© au concours des jeunes leaders du Runet. </font><font style="vertical-align: inherit;">Pour le concours, j'ai </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crit une courte histoire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur la fa√ßon dont nous, chez SberMarket, voyons la culture interne et l'approche du d√©veloppement du service. </font><font style="vertical-align: inherit;">Et bien qu'il n'ait pas √©t√© possible de gagner le concours, j'ai formul√© pour moi-m√™me les principes de base pour le d√©veloppement de l'√©cosyst√®me informatique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la gestion d'une √©quipe, il est important de comprendre et de trouver un √©quilibre entre les besoins de l'entreprise et les besoins de chaque d√©veloppeur sp√©cifique. Maintenant, SberMarket cro√Æt 13 fois d'ann√©e en ann√©e, ce qui affecte le produit, n√©cessitant une augmentation constante du volume et du rythme de d√©veloppement. Malgr√© cela, nous consacrons suffisamment de temps aux d√©veloppeurs pour l'analyse pr√©liminaire et l'√©criture de code de haute qualit√©. L'approche form√©e aide non seulement √† cr√©er un produit fonctionnel, mais √©galement √† poursuivre sa mise √† l'√©chelle et son d√©veloppement. Gr√¢ce √† cette croissance, SberMarket est d√©j√† devenu un leader des services de livraison de nourriture: nous livrons environ 18 000 commandes par jour chaque jour, m√™me si d√©but f√©vrier, il y en avait environ 3 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7v/jy/m7/7vjym762x2sa2ehkkvlwtzgi-og.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">500. Une fois qu'un client a demand√© au coursier SberMarket de lui livrer des produits sans contact - directement sur le balcon</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais passons aux d√©tails. </font><font style="vertical-align: inherit;">Au cours des derniers mois, nous avons activement mis √† l'√©chelle l'infrastructure de notre entreprise. </font><font style="vertical-align: inherit;">Un tel besoin s'explique par des facteurs externes et internes. </font><font style="vertical-align: inherit;">Parall√®lement √† l'expansion de la client√®le, le nombre de magasins connect√©s est pass√© de 90 en d√©but d'ann√©e √† plus de 200 √† la mi-mai. </font><font style="vertical-align: inherit;">Bien s√ªr, nous avons pr√©par√©, r√©serv√© l'infrastructure principale et compt√© sur la possibilit√© de mise √† l'√©chelle verticale et horizontale de toutes les machines virtuelles situ√©es dans le cloud Yandex. </font><font style="vertical-align: inherit;">Cependant, la pratique a montr√©: "Tout ce qui peut mal tourner va mal". </font><font style="vertical-align: inherit;">Et aujourd'hui, je veux partager les situations les plus int√©ressantes qui se sont produites au cours de ces semaines. </font><font style="vertical-align: inherit;">J'esp√®re que notre exp√©rience vous sera utile.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esclave en pleine alerte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√™me avant le d√©but de la pand√©mie, nous √©tions confront√©s √† une augmentation du nombre de demandes adress√©es √† nos serveurs principaux. La tendance √† commander des produits avec livraison √† domicile a commenc√© √† prendre de l'ampleur, et avec l'introduction des premi√®res mesures d'auto-isolement en rapport avec COVID-19, la charge a augment√© de fa√ßon spectaculaire sous nos yeux toute la journ√©e. Il √©tait n√©cessaire de d√©charger rapidement les serveurs ma√Ætres de la base de donn√©es principale et de transf√©rer une partie des demandes de lecture vers les serveurs de r√©plique (esclaves). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous pr√©parions √† l'avance pour cette √©tape, et pour une telle man≈ìuvre, 2 serveurs esclaves avaient d√©j√† √©t√© lanc√©s. Ils ont principalement travaill√© sur des t√¢ches batch de g√©n√©ration de flux d'informations pour l'√©change de donn√©es avec des partenaires. Ces processus ont cr√©√© une charge suppl√©mentaire et, √† juste titre, ont √©t√© mis ¬´en dehors des supports¬ª quelques mois plus t√¥t.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme il y avait une r√©plication sur Slave, nous avons adh√©r√© au concept selon lequel les applications ne peuvent fonctionner qu'avec elles en mode lecture seule. Le plan de reprise apr√®s sinistre a sugg√©r√© qu'en cas de catastrophe, nous pourrions simplement monter l'esclave √† la place du ma√Ætre et basculer toutes les demandes d'√©criture et de lecture sur l'esclave. Cependant, nous voulions √©galement utiliser des r√©pliques pour les besoins du d√©partement analytique, de sorte que les serveurs n'√©taient pas compl√®tement transf√©r√©s en lecture seule, et chaque h√¥te avait son propre ensemble d'utilisateurs, et certains avaient des autorisations d'√©criture pour enregistrer les r√©sultats de calcul interm√©diaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'√† un certain niveau de charge, nous avions suffisamment d'assistants pour √©crire et lire lors du traitement des requ√™tes http. √Ä la mi-mars, juste au moment o√π Sbermarket a d√©cid√© de passer compl√®tement √† un site distant, nous avons commenc√© une augmentation multiple du RPS. De plus en plus de nos clients ont opt√© pour l'auto-isolement ou le travail √† domicile, comme en t√©moignent les indicateurs de charge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les performances du ¬´ma√Ætre¬ª n'√©taient plus suffisantes, nous avons donc commenc√© √† subir certaines des demandes de lecture les plus lourdes pour une r√©plique. Pour envoyer de mani√®re transparente des demandes d'√©criture au ma√Ætre et de lecture √† l'esclave, nous avons utilis√© ruby ‚Äã‚Äãgem ¬´ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Octopus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". Nous avons cr√©√© un utilisateur sp√©cial avec le suffixe _readonly sans autorisation d'√©criture. Mais en raison d'une erreur dans la configuration de l'un des h√¥tes, une partie des demandes d'√©criture est all√©e au serveur esclave au nom d'un utilisateur disposant des droits appropri√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le probl√®me ne s'est pas manifest√© imm√©diatement, car une charge accrue a augment√© le d√©calage de l'esclave. L'incoh√©rence des donn√©es a √©t√© r√©v√©l√©e le matin lorsque, apr√®s les importations nocturnes, les esclaves n'ont pas ¬´rattrap√©¬ª le ma√Ætre. Nous avons attribu√© cela √† la charge √©lev√©e sur le service lui-m√™me et √† l'importation associ√©e au lancement de nouveaux magasins. Mais donner des informations sur les nombreuses heures de retard √©tait inacceptable, et nous sommes pass√©s au deuxi√®me processus analytique l'esclave, car il avait utilis√© </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur des</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ressources lshie et n'√©tait pas charg√© de requ√™tes de lecture (et nous nous sommes expliqu√©s √† l'absence de retard de r√©plication).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous avons compris les raisons du ¬´fluage¬ª de l'esclave principal, l'analyse a d√©j√† √©chou√© pour la m√™me raison. Malgr√© la pr√©sence de deux serveurs suppl√©mentaires, sur lesquels nous avions pr√©vu de transf√©rer la charge en cas de crash principal, suite √† une malheureuse erreur, il s'est av√©r√© qu'√† un moment critique il n'y en avait pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais comme nous n'avons pas seulement vid√© la base de donn√©es (le reste √† ce moment-l√† √©tait d'environ 5 heures), mais aussi un serveur ma√Ætre d'instantan√©s, nous avons r√©ussi √† d√©marrer la r√©plique dans les 2 heures. Certes, apr√®s cela, nous devions rouler le journal de r√©plication pendant une longue p√©riode (car le processus est en mode monothread, mais c'est une histoire compl√®tement diff√©rente).</font></font><br>
<br>
<blockquote><strong>:</strong>     ,            readonly  .      ,        .</blockquote><br>
<h3>      ¬´  ¬ª </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que nous mettions constamment √† jour le catalogue sur le site, les demandes que nous avons faites aux serveurs Slave ont permis un l√©ger d√©calage de la part de Master. Le temps pendant lequel nous avons d√©couvert et √©limin√© le probl√®me des ¬´abandons soudains de la distance¬ª des esclaves √©tait plus qu'une ¬´barri√®re psychologique¬ª (pendant ce temps, les prix auraient pu √™tre mis √† jour et les clients auraient vu des donn√©es obsol√®tes), et nous avons d√ª basculer toutes les demandes vers le serveur de base de donn√©es principal. . En cons√©quence, le site a fonctionn√© lentement ... mais au moins il a fonctionn√©. Et pendant que l'esclave r√©cup√©rait, nous n'avions pas d'autre choix que d'optimiser.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant que les serveurs esclaves se r√©tablissaient, les minutes tra√Ænaient lentement, le ma√Ætre restait surcharg√© et nous avons consacr√© tous nos efforts √† l'optimisation des t√¢ches actives selon la r√®gle de Pareto: nous avons s√©lectionn√© les requ√™tes TOP qui donnent la majeure partie de la charge et avons commenc√© √† r√©gler. Cela a √©t√© fait directement "√† la vol√©e".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un effet int√©ressant a √©t√© que MySQL charg√© dans le globe oculaire r√©pond m√™me √† une l√©g√®re am√©lioration des processus. </font><font style="vertical-align: inherit;">L'optimisation d'une paire de demandes, qui ne repr√©sentait que 5% de la charge totale, montrait d√©j√† un d√©chargement tangible du processeur. </font><font style="vertical-align: inherit;">En cons√©quence, nous avons pu fournir un approvisionnement acceptable en ressources pour que Master puisse travailler avec la base de donn√©es et obtenir le temps n√©cessaire pour restaurer les r√©pliques.&nbsp;</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√™me une petite optimisation vous permet de "survivre" pendant une surcharge pendant plusieurs heures. </font><font style="vertical-align: inherit;">C'√©tait juste assez pour nous lors de la r√©cup√©ration des serveurs avec des r√©pliques. </font><font style="vertical-align: inherit;">Soit dit en passant, nous discuterons du c√¥t√© technique de l'optimisation des requ√™tes dans l'un des articles suivants. </font><font style="vertical-align: inherit;">Alors abonnez-vous √† notre blog si cela peut vous √™tre utile.</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organiser le suivi des performances des services partenaires</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes engag√©s dans le traitement des commandes des clients, et donc nos services interagissent constamment avec des API tierces - ce sont des passerelles pour envoyer des SMS, des plates-formes de paiement, des syst√®mes de routage, un g√©ocodeur, le Federal Tax Service et de nombreux autres syst√®mes. Et lorsque la charge a commenc√© √† augmenter rapidement, nous avons commenc√© √† nous reposer sur les limitations API de nos partenaires de service, auxquelles nous n'avions m√™me pas pens√© auparavant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exc√®s inattendu de quotas pour les services d'affiliation peut entra√Æner des temps d'arr√™t de votre choix. De nombreuses API bloquent les clients qui d√©passent les limites et, dans certains cas, un exc√®s de demandes peut surcharger la production avec un partenaire.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, au moment d'augmenter le nombre de livraisons, les services d'accompagnement ne pouvaient pas faire face aux t√¢ches de leur distribution, d√©termination des itin√©raires. En cons√©quence, il s'est av√©r√© que les commandes ont √©t√© pass√©es et le service cr√©ant l'itin√©raire ne fonctionne pas. Je dois dire que nos logisticiens ont rendu cela presque impossible dans ces conditions, et l'interaction claire de l'√©quipe a aid√© √† compenser les pannes de service temporaires. Mais un tel volume d'applications est impossible √† traiter manuellement manuellement, et apr√®s un certain temps, nous rencontrerions un √©cart inacceptable entre les ordres et leur ex√©cution.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un certain nombre de mesures organisationnelles ont √©t√© prises et le travail coordonn√© de l'√©quipe a permis de gagner du temps pendant que nous convenions de nouvelles conditions et attendions la modernisation des services de certains partenaires. Il existe d'autres API qui vous plairont avec une endurance √©lev√©e et des tarifs impies en cas de trafic √©lev√©. Par exemple, au d√©but, nous avons utilis√© une API de mappage bien connue pour d√©terminer l'adresse d'un point de livraison. Mais √† la fin du mois, ils ont re√ßu une bonne facture de pr√®s de 2 millions de roubles. Apr√®s cela, ils ont d√©cid√© de le remplacer rapidement. Je ne ferai pas de publicit√©, mais je dirai que nos d√©penses ont consid√©rablement diminu√©.</font></font><br>
<img src="https://habrastorage.org/webt/mn/3x/qr/mn3xqrx5sj531isw8dmeoezlz1g.png"><br>
<blockquote><strong>: </strong>            .    ,    ¬´  ¬ª,   ,        . , ,    &nbsp;      .&nbsp;</blockquote><br>
<h3> ,  ¬´<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>¬ª ()  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes habitu√©s √† ¬´brancher¬ª la base de donn√©es principale ou les serveurs d'applications, mais lors de la mise √† l'√©chelle, des probl√®mes peuvent appara√Ætre l√† o√π ils n'√©taient pas attendus. Pour la recherche en texte int√©gral sur le site, nous utilisons le moteur Apache Solr. Avec une augmentation de la charge, nous avons not√© une diminution du temps de r√©ponse, et la charge du processeur serveur a atteint 100%. Quoi de plus simple - nous donnerons plus de ressources au conteneur avec Solr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu du gain de performances attendu, le serveur est simplement ¬´mort¬ª. Il s'est imm√©diatement charg√© √† 100% et a r√©pondu encore plus lentement. Au d√©part, nous avions 2 c≈ìurs et 2 Go de RAM. Nous avons d√©cid√© de faire ce qui aide habituellement - nous avons donn√© au serveur 8 c≈ìurs et 32 ‚Äã‚ÄãGo. Tout est devenu bien pire (exactement comment et pourquoi - nous le dirons dans un article s√©par√©).&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant plusieurs jours, nous avons compris les subtilit√©s de ce probl√®me et atteint des performances optimales avec 8 c≈ìurs et 32 ‚Äã‚ÄãGo. </font><font style="vertical-align: inherit;">Cette configuration nous permet de continuer √† augmenter la charge aujourd'hui, ce qui est tr√®s important car la croissance n'est pas seulement en termes de clients, mais aussi en nombre de magasins connect√©s - sur 2 mois leur nombre a doubl√©.&nbsp;</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les m√©thodes standard telles que ¬´ajouter plus de fer¬ª ne fonctionnent pas toujours. </font><font style="vertical-align: inherit;">Ainsi, lors de l'extension d'un service, vous devez bien comprendre comment il utilise les ressources et pr√©-tester son fonctionnement dans de nouvelles conditions.&nbsp;</font></font><br>
</blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sans √©tat - la cl√© d'une mise √† l'√©chelle horizontale facile</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, notre √©quipe adh√®re √† une approche bien connue: les services ne doivent pas avoir d'√©tat sans √©tat et doivent √™tre ind√©pendants de l'environnement d'ex√©cution. Cela nous a permis de survivre √† la croissance de la charge par une simple mise √† l'√©chelle horizontale. Mais nous avions une exception de service - un gestionnaire pour les longues t√¢ches en arri√®re-plan. Il √©tait engag√© dans l'envoi d'emails et de sms, le traitement d'√©v√©nements, la g√©n√©ration de flux, l'importation de prix et de stocks et le traitement d'images. Il se trouve que cela d√©pendait du stockage de fichiers local et √©tait en une seule copie.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque le nombre de t√¢ches dans la file d'attente du processeur a augment√© (et cela s'est naturellement produit avec une augmentation du nombre de commandes), les performances de l'h√¥te h√©bergeant le processeur et le stockage de fichiers sont devenues un facteur limitant. </font><font style="vertical-align: inherit;">En cons√©quence, la mise √† jour de l'assortiment et des prix, l'envoi de notifications aux utilisateurs et de nombreuses autres fonctions critiques bloqu√©es dans la file d'attente ont cess√©. </font><font style="vertical-align: inherit;">L'√©quipe Ops a rapidement migr√© le stockage de fichiers vers un stockage r√©seau de type S3, ce qui nous a permis d'√©lever plusieurs machines puissantes pour adapter le gestionnaire de t√¢ches en arri√®re-plan.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La r√®gle des apatrides doit √™tre respect√©e pour tous les composants, sans exception, m√™me s'il semble "que nous ne d√©rangions pas du tout". </font><font style="vertical-align: inherit;">Il vaut mieux consacrer un peu de temps √† la bonne organisation du travail de tous les syst√®mes que de r√©√©crire le code √† la h√¢te et de r√©parer le service qui subit une surcharge.</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7 principes pour une croissance intense</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgr√© la disponibilit√© de capacit√©s suppl√©mentaires, dans le processus de croissance, nous avons march√© sur quelques r√¢teaux. </font><font style="vertical-align: inherit;">Pendant ce temps, le nombre de commandes a augment√© de plus de 4 fois. </font><font style="vertical-align: inherit;">Maintenant, nous livrons d√©j√† plus de 17 000 commandes par jour dans 62 villes et pr√©voyons d'√©tendre encore notre g√©ographie - au premier semestre 2020, le service devrait √™tre lanc√© dans toute la Russie. </font><font style="vertical-align: inherit;">Afin de faire face √† la charge croissante, en tenant compte des bosses d√©j√† pleines, nous avons d√©velopp√© pour nous-m√™mes 7 principes de base du travail dans des conditions de croissance constante:</font></font><br>
<br>
<ol>
<li><strong>-</strong>.     Jira,   &nbsp;    .          .       ‚Äî         .   ,    ,    ,      ,         .</li>
<li><strong> </strong>      .            ¬´ ¬ª   .  ,        ,      .           ,     .</li>
<li><strong> </strong>      . -,        . -,     ,           .</li>
<li><strong>   stateless. </strong>   ,        .      .          , ,   S3.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> https://12factor.net</a>.         ,             .</li>
<li><strong>    . </strong>          ,     .  ,       ,  -    .         ,    .&nbsp;</li>
<li><strong>   . </strong>  ,       .         ,      SMS       .        ,     .</li>
<li><strong> .</strong>      ,       .     , ,    .       API,    -.      .</li>
</ol><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non sans pertes, mais nous avons surv√©cu √† cette √©tape, et aujourd'hui nous essayons d'adh√©rer √† tous les principes trouv√©s, et chaque machine a la possibilit√© d'augmenter facilement les performances x4 pour faire face √† toutes les surprises.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les articles suivants, nous partagerons notre exp√©rience en mati√®re d'enqu√™te sur la subsidence des performances dans Apache Solr, ainsi que sur l'optimisation des requ√™tes et la fa√ßon dont l'interaction avec le FTS permet √† l'entreprise d'√©conomiser de l'argent. </font><font style="vertical-align: inherit;">Abonnez-vous √† notre blog pour ne rien manquer et dites-nous dans les commentaires si vous avez eu de tels probl√®mes pendant la croissance du trafic.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/ky/jx/iakyjxz9atsneo1adhjxi_qpwyi.jpeg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504214/index.html">Le d√©veloppement de DATA VAULT et la transition vers BUSINESS DATA VAULT</a></li>
<li><a href="../fr504216/index.html">Quel √¢ge a cette maison. Comment j'ai fait une carte de l'√¢ge des maisons √† Saint-P√©tersbourg</a></li>
<li><a href="../fr504218/index.html">Productivit√©, stagiaires, seniors et perte d'esprit de la Silicon Valley. La grande interview de Zuckerberg sur le travail √† distance</a></li>
<li><a href="../fr504220/index.html">Service de v√©rification d'en-t√™te HTTP du serveur</a></li>
<li><a href="../fr504222/index.html">L'hydrog√®ne est √† la t√™te de tout: comment l'√©nergie est g√©n√©r√©e √† partir de d√©bris plastiques pour un h√¥tel japonais</a></li>
<li><a href="../fr504226/index.html">Le condens√© des √©v√©nements pour les recruteurs RH et IT en juin 2020</a></li>
<li><a href="../fr504228/index.html">RangeAmp - une nouvelle vuln√©rabilit√© permet des attaques DDoS avec un facteur d'amplification de dizaines de milliers</a></li>
<li><a href="../fr504230/index.html">NextDNS hors b√™ta - protection de la vie priv√©e, contournement de la censure de l'√âtat et blocage des publicit√©s pour l'ensemble du r√©seau domestique</a></li>
<li><a href="../fr504232/index.html">Comment un ing√©nieur devient Techlida</a></li>
<li><a href="../fr504236/index.html">D√©ployer l'image Docker sur Dokku avec Ansible</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>