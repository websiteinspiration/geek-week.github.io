<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥀 🥄 🚧 最高速度での賢いフルシチョフ 👆🏻 🔓 ⤴️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ワイヤードスマートホームに関する私の記事はハブレで人気があり（159千回）、そこでアイデアから新しい建物にスマートホームを実装するまでの前向きな経験について説明しました。
 
 同時に、私は古い家との統合の経験があります-5年間建てられた70年代の典型的なソビエトの5階建てのレンガ造りの家のアパート...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>最高速度での賢いフルシチョフ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503646/"><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワイヤードスマートホームに関する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私の記事</font><font style="vertical-align: inherit;">はハブレで人気があり（159千回）、そこでアイデアから新しい建物にスマートホームを実装するまでの前向きな経験について説明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、私は古い家との統合の経験があります-5年間建てられた70年代の典型的なソビエトの5階建てのレンガ造りの家のアパートは自動化されています。</font><font style="vertical-align: inherit;">異なるサブシステム用の単一のコントロールパネルがあり、クラウドサービスに依存していません。</font><font style="vertical-align: inherit;">新しい建物とは異なり、この5階建てのアパートはすぐには自動化されませんでしたが、次のようなさまざまな制御や制御への関心が高まるにつれて、数年かけて段階的に自動化されました。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計量装置の監視;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制御センサー：インターホン、温度、ノイズ、ドアの開閉、...;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートホームの単一のコントロールパネル。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビデオ監視にアクセスします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">窓の外の現在の時間と温度の壁掛けディスプレイ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「すべてをオフにする」ボタンを含むアパートの照明。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アパートの遠隔停電。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重なり合う水。</font></font></li>
</ol><br>
<img src="https://habrastorage.org/getpro/habr/post_images/119/076/4ec/1190764ec677be37929f3a263b1fbc55.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sweet Home 3Dでペイントされた、自動化された47平方メートルのこの2部屋のアパートの3Dモデル</font></font></i><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水道と電気メーターの監視</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初から話を始めます。2016年には、アパートのメーターの読み取り値のリモートコレクションが必要でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このため、「読み取りパッド」を設置しないためには、いずれの場合も、従来の水道メーターと電気メーターを適切なインターフェースのメーターに交換する必要がありました。</font><font style="vertical-align: inherit;">また、このインターフェースには2つのオプションしかありませんでした。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デジタルRS485。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パルス出力。 </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
水道メーターについて言えば、これら2つのオプションの価格の差は約10倍でした。パルス出力を備えた通常の水道メーターのコストは通常​​より200ルーブル、つまり約400〜600ルーブルであり、RS485を備えた水道メーターのコストは約3〜5千ルーブルです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
価格の差が大きいため、パルス出力の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valtec VLF-R-IL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルを選択しました</font><font style="vertical-align: inherit;">（現在、このモデルは生産されていません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私がペルミに住んでいるという事実による別の機能がありました-パルス出力でこれらのメーターを見つけて購入するだけの問題がありました-それらは利用できず、実際に私はロシアでの配達を待つために丸一ヶ月費やしました-中国で購入するだけではありませんメーターとインストール-これは「確認」され、適切な証明書が必要な機器です。それ以外の場合は登録されません。モスクワでは、私の知る限り、そのような問題はありませんし、その逆も同様です。管理会社は、パルス出力の水道メーターを設置するように強制しています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/004/54f/f5e/00454ff5e9afdf7f4bc4612783c97dae.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設置および密閉直後のパルス出力付き水道メーター</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の次のステップは電気エネルギーメーターの選択でした。ここでも、登録に必要なすべての書類と証明書が必要であることを覚えておく必要があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の-「報告」-会計のために、電力会社に。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2番目-ホームオートメーションで使用するために最初の直後にインストールされる、人気のある中国のサイトからのロシア語のドキュメントなし-リモートで測定値を読み取ることができます。</font><font style="vertical-align: inherit;">通常はデジタルRS485インターフェースを介して。</font></font></li>
</ol><br>
<img src="https://habrastorage.org/getpro/habr/post_images/c24/511/2be/c245112be9bfe55a225b1818473e70ce.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単相単一料金メーターMercury 201.5の設置と密閉直後</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
2016年に、RS485を介してサーバーのコマンドラインから電気メーターの読み取り値を読み取り、スマートホームの単一のコントロールパネルにプッシュする方法がわからなかったため、パルス出力の単一レートメーターを選択しました。集めようとしていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
後で判明するように、マーキュリーの単相電気メーターはホームオートメーションで非常に人気があり、他のメーカーの同様のメーターに匹敵する対価で、最新のホームオートメーションシステムと完全に互換性のあるデバイスを入手できます。これを行うには</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">、USBアダプター</font></a><font style="vertical-align: inherit;">のみが必要です</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; RS485</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そのコストは（中国で）100ルーブル未満です。このアダプターは、たとえばホームオートメーションのサーバーとしてよく使用されるRaspberry PiラインからのUSBポートを備えた任意のマイクロコンピューターと連携して、ホームアシスタント</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">やその他の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェアハブ</font><font style="vertical-align: inherit;">を起動</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">でき</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
電気メーターMercuryの調査スクリプトは、愛好家によって作成され、コマンドラインから実行されます。また、任意のホームオートメーションシステムに統合することもできます。 Mercury 200がインストールされている別のアパートでRS485を統合する具体的な例は、後で</font><font style="vertical-align: inherit;">行います</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォーラムで表示し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たり、検索でオプション</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検索したり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">でき</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f94/c64/9d1/f94c649d19899438a58644fa4927ef5f.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mercury 200電気メーターからデータを受信するためのスクリプト要素</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ただし、2016年に、デジタルRS485なしでメーターをインストールした後、これらのパルス用のリーダーが必要でした。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アカウンティングと管理コントローラーの選択</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パルス出力を備えた3つのカウンターを選択してインストールしたので、常にそれらに接触し、これらのパルスを24時間体制で読み取り、「人間の形式」に変換するようなデバイスが必要でした。</font><font style="vertical-align: inherit;">私は同様のコントローラーを探し始め、いくつかのオプションを見つけました：</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラマブルロジックAriesを備えたコントローラー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまなメーカーのパルスカウンターモジュール（たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちら）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートホームシステムに統合できる</font><font style="vertical-align: inherit;">ユニバーサル</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メガ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワイヤードコントローラー</font><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてについて詳しくお話しします。</font><font style="vertical-align: inherit;">何かを購入する前に、私は最初に見つかったオプションを尋ねることに決めました-ARIESとそのテクニカルサポートでは、私のアイデアにはかなりの費用がかかると書いてありました。</font><font style="vertical-align: inherit;">テクニカルサポートの回答：</font></font><br>
<br>
<pre><code class="plaintext hljs">"      +      – .<font></font>
...<font></font>
   ,  WEB-   .   Scada    . WEB-   323  207.      WEB  .<font></font>
<font></font>
,   ,        (  WEB-). ,       iRidium Mobile     /,   . ,  ,  110 [02].  Ethernet  .<font></font>
     http://www.owen.ru/projects    «     ».<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトは非常に費用がかかる可能性があることがわかりました。これに数万ルーブルを費やすことはしたくありませんでしたが、それでもリモートアカウンティングが必要なので、次のオプションに進みました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のオプションは、ロシアのメーカーの1つからのパルスをカウントするためのハードウェアソフトウェアソリューションでしたが、このシステムは閉じられ、パルスのみを考慮することができました。デシベルノイズレベルの検出やライザーの温度監視など、スマートホームの他の機能が必要でした。</font><font style="vertical-align: inherit;">私が覚えているように、このオプションの質問の価格は約5000ルーブルでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、私はさらにグーグルで3番目のオプションを探し続け、最終的にメガに出会いました。これは、単純な趣味から商業プロジェクトへと成長したトリアッティ市のAndrei Burtovoyによるプロジェクトです。</font><font style="vertical-align: inherit;">それは、価格と宣言された機能の比率を賄いました-価格で、セット（ハードウェアで構成可能な入力のみを備えたコントローラーとモジュール）は、2番目のオプションのレベルで出ました-Webインターフェースを備えた単純なパルスカウンター。</font><font style="vertical-align: inherit;">しかし同時に、既存の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェアハブ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">との統合が可能になりました</font><font style="vertical-align: inherit;">。</font><i><font style="vertical-align: inherit;">2016年に</font></i></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/bc0/c2e/c1b/bc0c2ec1ba14bbae9284b3692ca18a01.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
機器を選んで設置したところ、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートになり始めるマンションの「心」はこんな感じ。</font><font style="vertical-align: inherit;">次に、豊富な電源を取り除きました（下の写真）</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワイヤーはまだ必要です</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
見つかった3つのソリューションはすべて配線されていたため、ツイストペアUTP cat.5Eを各カウンターに引き寄せる必要がありました。</font><font style="vertical-align: inherit;">安価なセンサーもいくつか追加したかったのですが、選択したメガコントローラーが配線されていたので、ワイヤーのすべてのニーズを満たすために何をどこに伸ばすかというスキームを開発する必要がありました。</font><font style="vertical-align: inherit;">また、次のセンサーを設置することにしました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">台所のガスの存在をとらえる（家の中にガスがあるので）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路上での温度、湿度、気圧、および現在の照明レベルを表示する温度センサー。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バッテリーの温度を知るセンサー。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドアオープンセンサー-シンプルなリードスイッチ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冷温水用の温度センサー。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リビングルームのノイズセンサー。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ツイストペアを描く方法は、次のようになっています</font><i><font style="vertical-align: inherit;">。47平方メートルの2部屋のアパートにツイストペアを置く方法。 m。そして</font></i><font style="vertical-align: inherit;"> 
アパート</font><i><font style="vertical-align: inherit;">の</font></i><font style="vertical-align: inherit;"> Shtrob </font><i><font style="vertical-align: inherit;">の着陸は</font></i><font style="vertical-align: inherit;">行われませんでした-ツイストペア全体がベースボードのレベルのすぐ上にあるプラスチックの箱（サイズ15x10 mm）でストレッチすることができました。</font><font style="vertical-align: inherit;">
この時点で、既存の良好な修理に入るのは非常に問題があると言う必要がありますが、このアパートではそこにはなく、失うものはありませんでした。</font><font style="vertical-align: inherit;">
また、センサーをコントローラーに直接接続する方法も開発する必要がありました。以下の2016バージョンで</font><i><font style="vertical-align: inherit;">センサーをMegaに接続するスキーム</font></i><font style="vertical-align: inherit;">：</font><i><font style="vertical-align: inherit;">センサーをMega-328に接続するスキーム</font></i></font><br>
<br>
<i><img src="https://habrastorage.org/getpro/habr/post_images/f5b/8cd/a67/f5b8cda670c47af032f440102c7abff4.png"><br>
</i><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4b0/a45/86b/4b0a4586bf01c0fe33309d1dec424247.png"><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2018年の数年後、Mega-328を新しい2561に交換し、アナログセンサーを取り除きました。アナログセンサーは時々正しく機能せず、ハングしました。修正のために、コントローラーの完全な再起動が必要でした。</font><font style="vertical-align: inherit;">交換後、I2Cインターフェースを備えたより正確なデジタルセンサーをいくつかのポートに組み合わせてインストールしました</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b67/82f/ed1/b6782fed1e248f604e22f9ca6bef70b3.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Mega-2561の接続図</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">温度センサー</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
温度を測定するために、DS18B20センサーがよく使用されます。これは、-55〜125°Cの範囲で測定値を取得できる1-Wireインターフェイスを備えたデジタル温度計です。特に私のDS18B20コントローラーの場合、センサーはバスで接続できます。これは、ポートごとにいくつかのセンサーを意味し、ポートを節約します。これにより、自動化がさらに安価になります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e87/082/96b/e8708296bcfe8fefdd49863d84b7c265.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒーターバッテリーへの取り付けを固定するためのDS18B20センサーの外観</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Home Assistantでは、このデータは1つのポートから非常に簡単に分析されます。これらの温度センサーのそれぞれに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固有のアドレスがあり、それによってコントローラーによって認識され</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DS18B20の主な欠点は、それらが非常に小さいため、電気技師がそれらを扱うのが困難で珍しいことです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9fb/755/0fe/9fb7550fea126c4853379cbb471d04ba.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加熱バッテリーに取り付けられた収縮DS18B20センサー</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システム全体でのアパートのインターホンの統合</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アパートのインターホンも一般的なシステムに接続されていますが、情報モードでのみ-通話は表示されていますが、ドアを開けることはできません。</font><font style="vertical-align: inherit;">接続は</font><font style="vertical-align: inherit;">、インターホンハンドセット（座標インターホン）に並列に接続され</font><font style="vertical-align: inherit;">ている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uセンサー（5V）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を介して行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
参考までに-私は最近、通話を確認できるだけでなく、ドアを開けることもできる解決策を見つけましたが、これまでのところ、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の誰かの記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でのみそれについて読んでいます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冷温水用の温度センサー</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつもお湯がそれほど熱くないということを何度も繰り返したので、水に温度センサーを追加し、水温に問題がある場合は管理会社に連絡するため、継続的に温度を記録することにしました。</font><font style="vertical-align: inherit;">水温センサーとして、</font><font style="vertical-align: inherit;">防水をはじめとするさまざまなバージョンの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デジタル温度計DS18B20</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用することにしました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7d9/488/851/7d9488851562d2cddf11dd271899ffa7.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリードに取り付けられた1線式インターフェースのデジタル温度計DS18B20。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドアディスプレイ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habréに関する私の記事で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドアのコントロールパネルの理想的な形式を見つけました</font><font style="vertical-align: inherit;">が、これは2020年の初めにのみ起こりました。</font><font style="vertical-align: inherit;">正面玄関の窓の外の時間と天気を表示するこのディスプレイは、この瞬間の数年前のはるか以前に設置され、現在も機能しています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/793/121/4d0/7931214d0ae1d48d774c50757bbf7b7a.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外観-SSD1306の128x64 OLEDディスプレイとI2Cコントロール（工場で製造されたボックス）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ディスプレイを制御する必要があり、この場合は、メガコントローラーを介して制御ソフトウェアハブから制御信号を送信します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openHAB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Home Assistantの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このディスプレイを管理するための私のオプションを次に示します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートホーム内のノイズセンサー</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは別の非常に長い話で、安価なセンサーを使用したかったために数年に渡って検索されましたが、結局のところ、デシベル単位でノイズレベルを正しく取得することは不可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜノイズにさえ興味があるのですか？許容できる騒音レベルがあり、これは住民の衛生および疫学的福祉に関する法律、ならびにSanPiN 2.1.2.2645-10およびSN 2.1.8.562-96で確立されています。これらのルールによると、昼は7:00〜23:00、夜-23:00〜7:00の時間です。リビングルームとアパートメントの通常のバックグラウンドノイズレベルは、日中40デシベル、夜間30デシベルです。断続的なノイズの最大レベルは、昼間で55デシベル、夜間で45デシベルです。違反とは、基準を超え、大晦日以外の時間に居住者に干渉する音です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ノイズ検出モジュールとして宣言されている安価なモジュール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">して、MegaのADCに接続し、ノイズレベルを決定</font><font style="vertical-align: inherit;">しようとしまし</font><font style="vertical-align: inherit;">たが、決定的ではありませんでした。下の写真の試みの1つ：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b83/a18/113/b83a181139ef246c7176a19121777e50.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Megaアナログデジタルコンバーター（ADC）に接続されているセンサーの1つ</font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9e2/c90/134/9e2c9013479ea0aa34b5066c1dab1bfa.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、Mega Webインターフェイスの上のセンサーが次のように見えたものです</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。実際の騒音レベルはまったく相関していませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の2年間、非常に間接的ではありましたが、</font><font style="vertical-align: inherit;">openHABから呼び出されたbashスクリプトを介して、Raspberry Piポートに接続され</font><font style="vertical-align: inherit;">た</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USBマイク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からノイズレベルを取得する</font><font style="vertical-align: inherit;">ことができました。</font></font><code>#!/bin/bash</code><br>
<br>
<pre><code class="plaintext hljs">/usr/bin/arecord -D plughw:1,0 -d 15 -f S16_LE /home/openhabian/USB_dB.wav 2&gt;/dev/null;<font></font>
sleep 15;<font></font>
sox /home/openhabian/USB_dB.wav -n stat 2&gt;&amp;1 | sed -n 's#^Maximum amplitude:[^0-9]*\([0-9.]*\)$#\1#p';<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub上の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私のスクリプト</font><font style="vertical-align: inherit;">です。結果のボリューム調整値は、すでに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenHAB自動化ルール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内のデシベルに変換されています</font><font style="vertical-align: inherit;">。もちろん、それは「松葉杖」でしたが、少なくとも間接的には機能しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2016年には、Nexus 5のサウンドレベルメーターとUSBマイクから取得した値に基づいて正しいデシベルノイズレベルを計算する式を見つけて表示しました（下のスクリーンショット</font></font><code>y = -0,0000067x3+...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。これは数か月間機能しましたが、その後、マイクから受信した数値のレベルが突然浮き上がり、二度と戻りませんでした。その後、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別の数式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を見つけました</font><font style="vertical-align: inherit;">。</font></font><code>[dB = 20 x log10(A)]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openHABのルール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルに示されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/747/933/f36/747933f360c7a087a433a2e9a6824293.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nexus 5のサウンドレベルメーターとUSBマイクから取得した値に基づいて式を導き出そうとしました。USBマイク</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用したソリューションの欠点は次のとおりです。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機密性の侵害の可能性-通常の意味での音声は録音されず、wavファイルのみが分析されましたが、それでもUSBマイクでした。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取り外し不可能-USBケーブルを3メートルx 3メートル以上延長することはできません。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不正確さ-測定レベルは変動しており、ある時点でグラフからノイズが増大していることは明らかでしたが、実際にどの程度発生したかは明らかではありませんでした。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手頃な価格のソリューションを求めての叙事詩は、私がソリューション</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-DFRobot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Gravity：Analog Sound Level Meterボードを</font></a><font style="vertical-align: inherit;">求められたときにのみ終了</font><font style="vertical-align: inherit;">しましたが、約3.5千ルーブルの価格で出ましたが、距離とプライバシー、およびもちろん正確に。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f4d/174/55e/f4d17455eeebd07a69c4d100c83554a3.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アメリカのメーカーDFRobotのノイズレベル測定ボード</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ノイズレベル測定モジュールの場合、複雑な再計算ルールも必要ありませんでした。ホームアシスタント内では、これ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は要素の記述レベルで行われます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">  - platform: mqtt<font></font>
    name: " "<font></font>
    device_class: signal_strength<font></font>
    state_topic: "megad/7/36"<font></font>
    value_template: "{{ (value_json.value|float/1023*3.3*50) | round(1) }}"    <font></font>
    unit_of_measurement: "dBA"<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アパートの自動化に関する記事は非常に大きくなることが判明したため、2つの部分に分割することにしました。最初の部分は現在目の前にあり、さまざまなセンサーからアパートの状態に関する情報を収集する方法と2番目の部分のみを追加します（後で追加します） 2週間以内に準備が整います）すべてのシステムの管理を開始し、実行してきた方法について話します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての照明の完全なワイヤレスオートメーション。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「すべてオフにする」ボタン。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アパートの完全なリモート電源オフ（コントローラーを備えた管理サーバー自体を含む）およびリバースリモートスイッチオン。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水栓用電子パッド（回転装置）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、第2部では、数年後、今やった場合に私が別の方法で行うことを説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
著者：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ミハイル・シャーディン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2020年6月1日</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja503634/index.html">Vueソースコードで作成された5つの興味深いJavaScript検索</a></li>
<li><a href="../ja503636/index.html">サーバーのどのような負荷がネットワークメカニズムを作成しますか？</a></li>
<li><a href="../ja503638/index.html">驚くべきことに、ごく一部のプログラマーだけが持っている6つの有用な習慣</a></li>
<li><a href="../ja503640/index.html">JavaScriptプログラマーの毎日の改善について</a></li>
<li><a href="../ja503642/index.html">LinkedIn、Facebook、Googleでシリコンバレーを利用する方法</a></li>
<li><a href="../ja503648/index.html">「ss -s」の出力はどういう意味ですか</a></li>
<li><a href="../ja503650/index.html">VKCup 2020ステージI.長い道のり</a></li>
<li><a href="../ja503652/index.html">5月25日から5月31日までのモスクワでのデジタルイベント</a></li>
<li><a href="../ja503654/index.html">ユーザーがオンラインでコミュニケーションの文化を独自に維持できるWebサービス</a></li>
<li><a href="../ja503656/index.html">トモグラフィー再構成の品質を改善するためのツールとしての画像のバンド抑制アルゴリズム</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>