<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïë ü§±üèø ‚úçüèº C√≥mo aprendimos a recomendar pel√≠culas y por qu√© no debes confiar solo en las calificaciones üë®üèø‚Äçüöí ü§∂üèº üë©üèº‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine que quiere pasar la tarde viendo una pel√≠cula, pero no sabe cu√°l elegir. Los usuarios de Yandex a menudo se encuentran en la misma situaci√≥n, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>C√≥mo aprendimos a recomendar pel√≠culas y por qu√© no debes confiar solo en las calificaciones</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/497390/"><img src="https://habrastorage.org/webt/vu/_4/oo/vu_4oolbpa8pde7nsycpg5vpokq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que quiere pasar la tarde viendo una pel√≠cula, pero no sabe cu√°l elegir. Los usuarios de Yandex a menudo se encuentran en la misma situaci√≥n, por lo que nuestro equipo desarrolla recomendaciones que se pueden encontrar en Search y Air. Parece que esto es complicado: tomamos calificaciones de los usuarios, con su ayuda entrenamos el autom√≥vil para encontrar pel√≠culas que probablemente den 5 puntos, obtenemos una lista de pel√≠culas listas para usar. Pero este enfoque no funciona. ¬øPor qu√©? De eso es de lo que te hablar√© hoy.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un poco de historia. En 2006, Netflix lanz√≥ el concurso de aprendizaje autom√°tico Netflix Prize. Si de repente lo olvid√≥, la compa√±√≠a a√∫n no ha transmitido en Internet, sino que alquil√≥ pel√≠culas en DVD. Pero incluso entonces, era importante para ella predecir la calificaci√≥n del usuario para recomendarle algo. Por lo tanto, la esencia de la competencia: predecir las calificaciones de los espectadores es un 10% mejor (seg√∫n la m√©trica RMSE) que Cinematch, el sistema de recomendaci√≥n de Netflix. Esta fue una de las primeras competiciones masivas de este tipo. El inter√©s aument√≥ un enorme conjunto de datos (m√°s de 100 millones de calificaciones), as√≠ como un premio de $ 1 mill√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La competencia termin√≥ en 2009. </font><font style="vertical-align: inherit;">Los equipos de BellKor's Pragmatic Chaos y The Ensemble llegaron a la meta con el mismo resultado (RMSE = 0.8567), pero The Ensemble ocup√≥ el segundo lugar porque enviaron la soluci√≥n 20 minutos m√°s tarde que los competidores. </font><font style="vertical-align: inherit;">Los resultados y el trabajo se pueden encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pero lo m√°s interesante es diferente. </font><font style="vertical-align: inherit;">Si cree en las historias repetidas en conferencias especializadas, los algoritmos ganadores no aparecieron en producci√≥n en el servicio de transmisi√≥n de video que se lanz√≥ pronto. </font><font style="vertical-align: inherit;">No puedo hablar sobre los motivos de las decisiones de otras personas, pero les dir√© por qu√© hicimos lo mismo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valoraci√≥n personal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde hace bastante tiempo, los usuarios de Yandex pueden calificar las pel√≠culas que han visto. Y no solo en KinoPoisk, sino tambi√©n en los resultados de b√∫squeda. Con el tiempo, hemos acumulado cientos de millones de estimaciones de decenas de millones de personas. En alg√∫n momento, decidimos usar estos datos para ayudar a los usuarios a comprender cu√°nto les gustar√≠a una pel√≠cula. De hecho, resolvimos el mismo problema que en el concurso del Premio Netflix, es decir, predijimos qu√© calificaci√≥n le dar√≠a el usuario a la pel√≠cula. En ese momento, las calificaciones de KinoPoisk e IMDB ya exist√≠an, que se construyeron sobre la base de las calificaciones de las personas. Creamos una calificaci√≥n personal, por lo que decidimos usar una escala separada como porcentaje para evitar similitudes y confusi√≥n visual.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/tk/h7/ddtkh7i3ud_9q5lmqtvw-4ambgc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, la necesidad de correlacionar la escala de puntos y el porcentaje es un dolor de cabeza independiente y no obvio, por lo que hablar√© brevemente al respecto. </font><font style="vertical-align: inherit;">Parece que para una escala de 10 puntos, tome el 10% para cada punto, y el punto est√° en el sombrero. </font><font style="vertical-align: inherit;">Pero no. </font><font style="vertical-align: inherit;">La raz√≥n es psicolog√≠a y h√°bitos. </font><font style="vertical-align: inherit;">Por ejemplo, desde el punto de vista de los usuarios, una calificaci√≥n de 8/10 es mucho mejor que el 80%. </font><font style="vertical-align: inherit;">¬øC√≥mo correlacionar esto? </font><font style="vertical-align: inherit;">Con crowdsourcing! </font><font style="vertical-align: inherit;">Y as√≠ lo hicimos: lanzamos la tarea en Tolok, en la que los tiradores describieron las expectativas de las pel√≠culas con un cierto puntaje o porcentaje de calificaci√≥n personal. </font><font style="vertical-align: inherit;">En base a este marcado, seleccionamos una funci√≥n que traduce la predicci√≥n de la puntuaci√≥n de punto a porcentaje para que se mantengan las expectativas del usuario.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplos de misiones en Tolok</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/tw/fv/ux/twfvuxxkjd7rnkave0yuudmzs5q.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es √∫til predecir las expectativas de la pel√≠cula, pero tambi√©n ser√≠a bueno crear recomendaciones. </font><font style="vertical-align: inherit;">Es decir, mostrarle inmediatamente a la persona una lista de buenas pel√≠culas. </font><font style="vertical-align: inherit;">En ese momento, muchos de ustedes podr√≠an pensar: "Y clasifiquemos las pel√≠culas que el usuario no ha visto por calificaci√≥n personal". </font><font style="vertical-align: inherit;">Nosotros tambi√©n lo pensamos al principio. </font><font style="vertical-align: inherit;">Pero luego tuve que resolver dos problemas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problema de la herramienta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando un usuario busca una pel√≠cula en particular (o quiere alquilar un DVD espec√≠fico), el servicio debe predecir la calificaci√≥n de esta pel√≠cula en particular. Exactamente este problema se resolvi√≥ en el concurso del Premio Netflix, donde se utiliz√≥ la m√©trica RMSE. Pero las recomendaciones resuelven un problema diferente: no necesita adivinar la calificaci√≥n, sino encontrar una pel√≠cula que eventualmente se ver√°. Y la m√©trica RMSE hace un mal trabajo en esto. Por ejemplo, la penalizaci√≥n por predecir una calificaci√≥n de 2 en lugar de 1 es exactamente la misma que para 5 en lugar de 4. ¬°Pero nuestro sistema nunca deber√≠a recomendar pel√≠culas en las que el usuario ponga 2! Las m√©tricas basadas en listas son mucho m√°s adecuadas para esta tarea, como Precision @ K, Recall @ K, MRR o NDCG. No puedo evitar contarte un poco m√°s sobre ellos (pero si no est√°s interesado en las m√©tricas, solo omite el siguiente p√°rrafo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos con la m√©trica.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MRR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (rango rec√≠proco medio). Veremos qu√© posici√≥n en el ranking ser√° la pel√≠cula con la que el usuario interactu√≥ (por ejemplo, visto o alabado) en el per√≠odo de prueba. La m√©trica MRR es la posici√≥n inversa promediada por el usuario de dicha pel√≠cula. Es decir</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.7ex" height="4.259ex" viewBox="0 -1132.2 10204.2 1833.9" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-52" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-52" x="1811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-3D" x="2848" y="0"></use><g transform="translate(3626,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5367,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7833,0)"><g transform="translate(286,0)"><rect stroke="none" width="1964" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-31" x="1138" y="582"></use><g transform="translate(60,-403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-61" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-6E" x="981" y="0"></use><g transform="translate(1118,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-75" x="737" y="-213"></use></g></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>‚àë</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-1">MRR = \frac{1}{|U|} \sum_{u=1}^{|U|} \frac{1}{rank_u}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tal m√©trica, a diferencia de RMSE, eval√∫a la lista completa, pero, desafortunadamente, solo mira el primer elemento adivinado. Sin embargo, es f√°cil modificar la m√©trica para deshacerse de este inconveniente. Podemos calcular la suma de las posiciones inversas de todas las pel√≠culas con las que interactu√≥ el usuario. Esta m√©trica se llama Rango de golpe rec√≠proco promedio. Esta m√©trica tiene en cuenta todas las pel√≠culas adivinadas en el tema. Tenga en cuenta que la posici√≥n k en el pago recibe un peso de 1 / k para una pel√≠cula adivinada y un peso de 0 para otra pel√≠cula. A menudo, se usa 1 / log (k) en lugar de 1 / k: es m√°s probable que esto se corresponda con la probabilidad de que el usuario se desplace a la posici√≥n k. El resultado es una m√©trica DCG (ganancia acumulada con descuento)</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.927ex" height="4.384ex" viewBox="0 -1186 16329.6 1887.7" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-43" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-47" x="1589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-3D" x="2653" y="0"></use><g transform="translate(3431,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5172,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7805,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJSZ1-2211" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-4E" x="1494" y="675"></use><g transform="translate(1056,-287)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-73" x="989" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-3D" x="1458" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-31" x="2237" y="0"></use></g></g><g transform="translate(10897,0)"><g transform="translate(286,0)"><rect stroke="none" width="5025" height="60" x="0" y="220"></rect><g transform="translate(1421,614)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-61" x="480" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-69" x="1010" y="0"></use><g transform="translate(958,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-6E" x="0" y="0"></use><g transform="translate(424,-107)"><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-73" x="989" y="0"></use></g></g></g><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-78" x="1334" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-28" x="1862" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-31" x="2252" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-2C" x="2752" y="0"></use><g transform="translate(2143,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-6C"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-6F" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-67" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-28" x="4310" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-70" x="4700" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-6F" x="5203" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMATHI-73" x="5689" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-29" x="6158" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgohtjHHxShKP7qu3FPLJRLrtNkXQ#MJMAIN-29" x="6548" y="0"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>‚àë</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><munderover><mo>‚àë</mo><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits="true" form="prefix">max</mo><mo stretchy="false">(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>‚Å°</mo><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">DCG = \frac{1}{|U|} \sum_{u=1}^{|U|} \sum_{pos=1}^{N} \frac{gain_{pos}}{\max(1, \log(pos))}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero la contribuci√≥n de diferentes usuarios a la m√©trica es diferente: para alguien adivinamos todas las pel√≠culas, para alguien que no adivinamos nada. </font><font style="vertical-align: inherit;">Por lo tanto, como regla, esta m√©trica est√° normalizada. </font><font style="vertical-align: inherit;">Divida el DCG de cada usuario en el mejor DCG de clasificaci√≥n para ese usuario. </font><font style="vertical-align: inherit;">La m√©trica resultante se llama </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDCG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ganancia acumulada descontada normalizada). </font><font style="vertical-align: inherit;">Es ampliamente utilizado para evaluar la calidad de la clasificaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, cada tarea tiene su propia m√©trica. </font><font style="vertical-align: inherit;">Pero el siguiente problema no es tan obvio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problema de elecci√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bastante dif√≠cil de describir, pero lo intentar√©. Resulta que las personas dan altas calificaciones no a las pel√≠culas que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suelen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ver. Las obras maestras de pel√≠culas raras, los cl√°sicos, las obras de arte obtienen las mejores calificaciones, pero esto no detiene a las personas en la noche despu√©s del trabajo con el placer de ver una buena comedia, una nueva pel√≠cula de acci√≥n o una espectacular √≥pera espacial. Agregue a esto que los usuarios de Yandex no apreciaron todas las pel√≠culas que hab√≠an visto alguna vez. Y si nos centramos solo en las calificaciones m√°s altas, corremos el riesgo de obtener un feed de pel√≠cula recomendado que se ver√° l√≥gico, los usuarios incluso pueden reconocer su calidad, pero al final no ver√°n nada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, as√≠ es como se ver√≠a mi feed de pel√≠culas si lo clasific√°ramos por calificaci√≥n personal y no supi√©ramos nada sobre mis vistas en el pasado. Grandes peliculas. Pero no quiero revisarlos hoy.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5y/gz/ot/5ygzotyougvrodtwyb_nlbp03va.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta que en las condiciones de calificaciones dispersas y la escasez de pel√≠culas con altas calificaciones, vale la pena mirar no solo la calificaci√≥n. Bueno, entonces entrenamos el auto para predecir la visualizaci√≥n de la pel√≠cula recomendada, y no la calificaci√≥n. Parecer√≠a l√≥gico, porque el usuario quiere esto. ¬øQu√© puede salir mal? El problema es que la cinta estar√° llena de pel√≠culas, cada una de las cuales es bastante adecuada para un pasatiempo f√°cil en la noche, pero su calificaci√≥n personal ser√° baja. Los usuarios, por supuesto, prestar√°n atenci√≥n al hecho de que no hay "obras maestras" en la cinta, lo que significa que la credibilidad de las recomendaciones se ver√° socavada, no ver√°n lo que de otro modo ver√≠an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, llegamos a la comprensi√≥n de que se necesita un equilibrio entre los dos extremos. Es necesario entrenar la m√°quina para que se tenga en cuenta tanto el potencial de visualizaci√≥n como la percepci√≥n de la recomendaci√≥n de una persona.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥mo funcionan nuestras recomendaciones</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro sistema es parte de la b√∫squeda, por lo que debemos elaborar recomendaciones muy r√°pidamente: el tiempo de respuesta del servicio debe ser inferior a 100 milisegundos. </font><font style="vertical-align: inherit;">Por lo tanto, intentamos realizar tantas operaciones pesadas como sea posible sin conexi√≥n, en la etapa de preparaci√≥n de datos. </font><font style="vertical-align: inherit;">Todas las pel√≠culas y usuarios en el sistema de recomendaci√≥n est√°n representados por perfiles (es importante no confundirlos con la cuenta), que incluyen claves de objetos, contadores e incrustaciones (en otras palabras, vectores en un espacio determinado). </font><font style="vertical-align: inherit;">Los perfiles de pel√≠culas se preparan todos los d√≠as en YT ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le√≠dos como "Yt"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) y se cargan en la RAM de las m√°quinas que responden a las solicitudes. </font><font style="vertical-align: inherit;">Pero con los usuarios, todo es un poco m√°s complicado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los d√≠as tambi√©n creamos el perfil de usuario principal en YT y lo enviamos a la tienda Yandex, desde donde puede obtener el perfil en un par de decenas de milisegundos. Pero los datos se vuelven obsoletos r√°pidamente si una persona mira y eval√∫a activamente el video. No es bueno si las recomendaciones comienzan a retrasarse. Por lo tanto, leemos el flujo de eventos del usuario y formamos la parte din√°mica del perfil. Cuando una persona ingresa una solicitud, combinamos el perfil del repositorio con un perfil din√°mico y obtenemos un perfil √∫nico, que puede retrasarse con respecto a la realidad por solo unos segundos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto ocurre sin conexi√≥n (es decir, de antemano), y ahora pasamos directamente al tiempo de ejecuci√≥n. Aqu√≠ el sistema de recomendaci√≥n consta de dos pasos. Para clasificar la base de datos completa de pel√≠culas durante demasiado tiempo, entonces, en el primer paso, simplemente seleccionamos varios cientos de candidatos, es decir, encontramos pel√≠culas que pueden ser de inter√©s para el espectador. Esto incluye tanto pinturas populares como aquellas cercanas al usuario en algunas incrustaciones. Hay varios algoritmos para encontrar r√°pidamente a los vecinos m√°s cercanos, utilizamos HNSW (Hierarchical Navigable Small World). Con √©l, encontramos las pel√≠culas m√°s cercanas al usuario en solo unos pocos milisegundos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el segundo paso, extraemos caracter√≠sticas (a veces tambi√©n se les llama factores) por pel√≠culas, usuario y par de usuarios / pel√≠culas y clasificamos a los candidatos usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CatBoost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Perm√≠tame recordarle: ya nos dimos cuenta de que necesitamos centrarnos no solo en las vistas, sino tambi√©n en otras caracter√≠sticas de calidad de las recomendaciones, por lo que para la clasificaci√≥n llegamos a una combinaci√≥n de varios modelos CatBoost capacitados para varios objetivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para encontrar candidatos, utilizamos incrustaciones de varias descomposiciones matriciales: desde la versi√≥n cl√°sica de ALS, que predice la evaluaci√≥n, hasta variaciones m√°s complejas basadas en SVD ++. </font><font style="vertical-align: inherit;">Como caracter√≠sticas para la clasificaci√≥n, se utilizan tanto contadores de eventos de usuario simples como pel√≠culas, CTR para varios eventos, as√≠ como modelos pre-entrenados m√°s complejos. </font><font style="vertical-align: inherit;">Por ejemplo, la predicci√≥n de ALS tambi√©n act√∫a como una caracter√≠stica. </font><font style="vertical-align: inherit;">Uno de los modelos m√°s √∫tiles es la red neuronal DSSM del Recomendador, de la que probablemente hablar√© un poco m√°s.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recomendador DSSM</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSSM es una red neuronal de dos torres. Cada torre construye su propia incrustaci√≥n, luego se considera la distancia del coseno entre las incrustaciones, este n√∫mero es la salida de la red. Es decir, la red aprende a evaluar la proximidad de los objetos en las torres izquierda y derecha. Se utilizan redes neuronales similares, por ejemplo, en una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b√∫squeda web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para encontrar documentos relevantes para una consulta. Para la tarea de b√∫squeda, se env√≠a una solicitud a una de las torres y un documento a la otra. Para nuestra red, el papel de la solicitud es desempe√±ado por el usuario, y las pel√≠culas act√∫an como documentos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La torre de la pel√≠cula construye incrustaciones basadas en los datos sobre la pel√≠cula: este es el t√≠tulo, la descripci√≥n, el g√©nero, el pa√≠s, los actores, etc. Esta parte de la red es bastante similar a la de b√∫squeda. Sin embargo, para el espectador queremos usar su historia. Para hacer esto, agregamos la incorporaci√≥n de pel√≠culas de la historia con el desvanecimiento en el tiempo desde el momento del evento. Luego, adem√°s de la incrustaci√≥n total, aplicamos varias capas de la red y, como resultado, obtenemos una incrustaci√≥n de tama√±o 400.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/3k/v0/lt3kv0xtsbzqiyxq_333j3sgkua.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tiene en cuenta de inmediato todo el historial del usuario en la inserci√≥n, esto ralentizar√° en gran medida la capacitaci√≥n. </font><font style="vertical-align: inherit;">Por lo tanto, vamos al truco y aprendemos la red en dos etapas. </font><font style="vertical-align: inherit;">Primero, aprenda el InnerDSSM m√°s simple. </font><font style="vertical-align: inherit;">En la entrada, recibe solo los √∫ltimos 50 eventos del historial del usuario sin dividirlos en tipos de eventos (vistas, calificaciones ...). </font><font style="vertical-align: inherit;">Luego volvemos a entrenar el InnerDSSM resultante a lo largo del historial del usuario, pero con un desglose por tipos de eventos. </font><font style="vertical-align: inherit;">Entonces obtenemos OuterDSSM, que se usa en tiempo de ejecuci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El uso de una red en tiempo de ejecuci√≥n en la frente requiere muchos recursos inform√°ticos. </font><font style="vertical-align: inherit;">Por lo tanto, guardamos las incrustaciones de la torre de pel√≠culas en la base de datos, y las incrustaciones de acuerdo con el historial del usuario se actualizan casi en tiempo real. </font><font style="vertical-align: inherit;">Por lo tanto, durante el procesamiento de la solicitud, debe aplicar solo una peque√±a parte de OuterDSSM y calcular los cosenos, esto no lleva mucho tiempo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora nuestras recomendaciones ya est√°n disponibles en nuestra b√∫squeda (por ejemplo, por solicitud </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[qu√© ver]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), en el servicio Yandex.Air, y tambi√©n se usa una versi√≥n adaptada de esta tecnolog√≠a en Yandex.Stations. </font><font style="vertical-align: inherit;">Pero esto no significa que podamos relajarnos. </font><font style="vertical-align: inherit;">Capacitamos constantemente nuevos modelos, aplicamos m√°s y m√°s datos, probamos nuevos enfoques de capacitaci√≥n y nuevas m√©tricas de calidad. </font><font style="vertical-align: inherit;">En mi opini√≥n, cuanto m√°s antigua es el √°rea, m√°s dif√≠cil es desarrollarla. </font><font style="vertical-align: inherit;">Pero este es el principal inter√©s para los especialistas.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497376/index.html">Qu√© hacer con las mejillas rojas para que no te crezca la nariz</a></li>
<li><a href="../es497382/index.html">8 dificultades de los equipos √°giles durante la pandemia: "Ndagwurugwu nke anya mmiri", ·ª•j·ªç, oke iwe, ag·ªçnar, COVID-19</a></li>
<li><a href="../es497384/index.html">C√≥mo establecer un acceso seguro a los servidores en modo remoto</a></li>
<li><a href="../es497386/index.html">Los becarios VK Fellowship hablan sobre el futuro del aprendizaje a distancia, la disciplina y la socializaci√≥n</a></li>
<li><a href="../es497388/index.html">Un millon√©simo tirador desde cero: una ruta de desarrollador independiente</a></li>
<li><a href="../es497392/index.html">¬øC√≥mo pasar de ser estudiante a ingeniero de software?</a></li>
<li><a href="../es497394/index.html">Diez recursos con cursos de inform√°tica disponibles de forma gratuita en abril</a></li>
<li><a href="../es497396/index.html">Colegas: ni amigos ni enemigos, pero ¬øc√≥mo?</a></li>
<li><a href="../es497398/index.html">Procesadores de servidor AMD EPYC Rome 7x32: registro de rendimiento de n√∫cleo √∫nico</a></li>
<li><a href="../es497402/index.html">¬øC√≥mo crear un lenguaje de programaci√≥n Python?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>