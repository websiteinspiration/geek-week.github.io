<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤧 👄 👟 Warum sind wir zu Selenide gewechselt, indem wir mehr als 200 neue Autotests geschrieben haben? 🗑️ 👊🏼 👨‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, ich bin ein Testautomatisierungstool für eines der Projekte eines großen Unternehmens. In diesem Artikel werde ich erklären, warum wir uns ents...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Warum sind wir zu Selenide gewechselt, indem wir mehr als 200 neue Autotests geschrieben haben?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/maxilect/blog/499810/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo, ich bin ein Testautomatisierungstool für eines der Projekte eines großen Unternehmens. </font><font style="vertical-align: inherit;">In diesem Artikel werde ich erklären, warum wir uns entschieden haben, von Serenity zu Selenide zu wechseln. </font><font style="vertical-align: inherit;">Wir haben eine große Aufgabe, und obwohl das Ändern des technologischen Stapels einige Zeit in Anspruch nahm, hat es sich später mehr als bezahlt gemacht, indem das Schreiben von Tests beschleunigt und eine Regression durchgeführt wurde.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/cu/r3/wzcur3lohguxx4c6qnnjfp9wgri.jpeg" alt="Bild"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir zum Punkt kommen, ein wenig über die Aufgabe als Ganzes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider kann ich die Details des Projekts gemäß den Bestimmungen der NDA nicht offenlegen. In der Tat sind dies einige der Tools für ein Callcenter eines großen Unternehmens - Anrufweiterleitung, Trennung der Betreiber nach Anrufthema usw. in einer schönen Benutzeroberfläche. Die Schnittstelle ist übrigens nicht nur für Bediener vorgesehen, sondern auch für Controller, die ausgewählte Anrufe abhören und auswerten. Vor allem gibt es ein System zur Differenzierung von Rechten und ein Admin-Panel, mit dem Sie alle integrierten Funktionen konfigurieren können - von der Telefonie bis zu den Bewertungen, die den Controllern zur Verfügung stehen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das gesamte Funktionsvolumen ist in mehrere Projekte unterteilt: Telefonie, Benutzerpanel und Admin-Panel. </font><font style="vertical-align: inherit;">Alle drei Projekte befinden sich in aktiver Entwicklung. </font><font style="vertical-align: inherit;">Meine Aufgabe ist es, das Testen dieser Projekte im weiteren Sinne des Wortes zu automatisieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für einige der entwickelten Funktionen gab es bereits automatische Tests, aber der Spezialist, der sie entwickelt hat, hat das Unternehmen verlassen, sodass eine gewisse technische Pflicht zur Automatisierung der Tests bestand. </font><font style="vertical-align: inherit;">Insgesamt wurden ungefähr 50 Autotests geschrieben, aber die überwiegende Mehrheit von ihnen ist völlig veraltet, weil </font><font style="vertical-align: inherit;">Die Funktionalität ist weit fortgeschritten. </font><font style="vertical-align: inherit;">Daher bestand die Aufgabe zunächst darin, all dies zu aktualisieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stapelaktualisierung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bestehende Autotests wurden mithilfe der Serenity-Bibliothek geschrieben. Tatsächlich mussten sie erneut umgeschrieben werden, sodass es keinen Sinn machte, an den bestehenden Entwicklungen festzuhalten. Die Bibliothek selbst war mir vertraut, aber ich persönlich halte sie nicht für ein optimales Werkzeug. Nachdem ich den Arbeitsaufwand verstanden hatte, entschied ich mich von Anfang an, zu Selenide zu wechseln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selenid ist ein ziemlich beliebtes Werkzeug, für das es viele vorgefertigte Lösungen gibt. Einige der Funktionen von Selenide sind auch für Analoga verfügbar - Atlas, Selen, HTMLElements usw. Aber jeder von ihnen passte auf seine Weise nicht zu uns. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selen ist die Basis von Selenid. Aber für unsere Zwecke ist es zu niedrig. Es macht keinen Sinn, das Rad neu zu erfinden, wenn es eine fertige Lösung gibt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlas erschien vor kurzem. Es ist roh genug und hat keine Groovy-Unterstützung.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HtmlElements ist gut für alle, aber veraltet und wird nicht unterstützt. Es gibt auch JDI, aber es gibt Multithreading-Probleme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Serenity, die zuvor für das Projekt verwendet wurde, war zu umständlich. Alles darin ist so miteinander verbunden, dass wir ein Dutzend Klassen neu schreiben mussten, um einen neuen Ereignishandler oder Interceptor hinzuzufügen (und dies führte nicht jedes Mal zum Erfolg). Außerdem konnte Surenity Allure, den aktuellen Branchen- und Unternehmensstandard für die Erstellung von Testberichten, nicht verbinden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Selenide ist aus Sicht der Automatisierung alles viel einfacher. Zum Beispiel müssen die Schritte nicht separat beschrieben werden - Anhängen an Methoden usw. Da die Allure-Unterstützung sofort verfügbar ist, werden alle Aktionen im Zusammenhang mit der Arbeit mit Webelementen automatisch in den Testbericht aufgenommen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich unterstützt Selenide PageFactory, Page Object und PageElement. Dies macht den Code besser lesbar. Außerdem gibt es interne Erwartungen für den Moment, in dem das Element angezeigt wird. Es muss nicht explizit angegeben werden, dass Sie den Test einige Sekunden lang anhalten müssen, bevor Sie fortfahren (das Zeitlimit ist in den Konfigurationen festgelegt). Explizite Erwartungen existieren separat - Sie können das Zeitlimit für die erforderlichen Elemente in jedem Testschritt explizit neu definieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Praktischerweise verfügt Selenide über eine ganze Reihe verschiedener vorgefertigter Methoden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da ich zu Beginn des Übergangs von Serenity zu Selenide allein im Team war, bestand der zusätzliche Vorteil darin, dass ich bereits über ausreichende Erfahrungen mit Selenide und Groovy verfügte, sodass ich schnell vorgefertigte Lösungen implementieren und anschließend weniger Aufwand aufwenden konnte, um sie zu unterstützen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Übergang war fast schmerzlos. Wir haben Selenide in Zusammenarbeit mit Allure implementiert. Mit Allure können Sie lesbare und sogar etwas schöne Berichte erstellen, die deutlich zeigen, welche Schritte mit welchem ​​Fehler gefallen sind. Standardmäßig können Sie Screenshots von Webseiten an Berichte anhängen. Wir fügen sogar ein Video des Laufs, den Quellcode der Seite, die Protokolle des Browsers und den Webtreiber hinzu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Migrieren vorhandener Tests erforderte einen minimalen Aufwand. </font><font style="vertical-align: inherit;">Was Serenity hat, was Selenide hat, sind PageObjects mit @ FindBy-Annotationen. </font><font style="vertical-align: inherit;">Serenity und Allure verwenden dieselben Step-Annotationen. </font><font style="vertical-align: inherit;">Ich musste das Modell aktualisieren, die Verschachtelung der Elemente ineinander, die Reihenfolge der Aufrufe der Testschritte. </font><font style="vertical-align: inherit;">Einige Tests wurden vollständig gelöscht, andere wurden von Grund auf neu geschrieben, und irgendwo genügte es, nur die Locators zu aktualisieren. </font><font style="vertical-align: inherit;">Tatsächlich ist das Verschieben zu einer trivialen Aufgabe geworden, mit der die meisten Benutzeroberflächenautomaten beim Entwerfen einer Webanwendung konfrontiert sind.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test Update</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Aktualisierung des technologischen Stacks nahmen sie die Tests selbst auf. Ein Teil dieser Arbeiten wurde übrigens bereits im Rahmen des Übergangs zu einem neuen Stack abgeschlossen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angesichts der akkumulierten Verzögerung hinter der Funktionalität von Projekten müssten sie ohnehin noch neu geschrieben werden - dies ist zeitlich rentabler, als nach Inkonsistenzen in einem solchen Codevolumen zu suchen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt wurden derzeit etwa 220 Autotests sowohl für das Front-End als auch für das Back-End geschrieben. Der Schwerpunkt bei der Weiterentwicklung liegt auf dem Backend, da die meisten Funktionselemente im Frontend bereits an Autotests beteiligt sind. Gleichzeitig ändert es sich ständig. Je mehr Tests im Front-End erscheinen, desto mehr Kräfte müssen für ihre Unterstützung aufgewendet werden.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit unendlichen Zeitressourcen versuchen wir immer, die Anstrengungen auf das zu lenken, was es uns ermöglicht, die Arbeitskosten für den Support zu senken und die maximale Funktionalität abzudecken. </font><font style="vertical-align: inherit;">Jetzt lag die Abdeckung der Autotests leicht über 50%.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die umgeschriebenen Tests zu Selenide sind aufgrund der wiederholten Wiederverwendung des Codes kompakter und genauer geworden - alles dank der Funktionen der Bibliothek selbst. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Aktualisierung der Tests haben wir berücksichtigt, dass sie gleichzeitig ausgeführt werden müssen (in mehreren Threads). </font><font style="vertical-align: inherit;">Tests wurden zuvor auf separaten virtuellen Maschinen ausgeführt. </font><font style="vertical-align: inherit;">Durch den Übergang zu Selenide konnten wir die Aufgabe jedoch noch weiter parallelisieren und in mehreren Threads ausführen.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grob gesagt erhöhte der Übergang zu einem neuen Framework die Anzahl der gleichzeitig gestarteten Threads von 3 auf 8 und die anschließende Optimierung von Tests auf bis zu 50. Infolgedessen werden 100 UI-Tests in nur 10 Minuten ausgeführt.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Multithreading ist übrigens ein weiterer Vorteil, für den wir uns für Selenide entschieden haben. Dies ist keine große Schicht Boilerplate, Sie schreiben ein Minimum an Code. Es gibt keine überflüssige Schrift, die Selen benötigt, um das Projekt für den Start vorzubereiten. Alles, was Sie zum Ausführen der Tests benötigen, ist bereits im Lieferumfang enthalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parallel zum Aktualisieren und Schreiben neuer Tests führte ich Schulungen für die Mitarbeiter der Testabteilung durch, um ihnen zu helfen, vom manuellen zum Full-Stack-Test zu wechseln, sodass es im Automatisierungsregiment des Projekts ankam. Der verwendete Technologie-Stack hat eine niedrigere Einstiegsschwelle, und das Internet ist voll von Dokumentationen und Videos zur Lösung bestimmter Probleme. Einen Monat später kamen einige Tester hinzu, die Aufgaben im Zusammenhang mit der Automatisierung ausführen konnten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bereits als ganzes Team konnten wir Regressionstests optimieren. Wenn die Regression früher 7 Tage vom Team gedauert hat, werden jetzt die gleichen Aufgaben 4 Tage lang ausgeführt, d. H. Wir haben die Testzeit um fast das Zweifache reduziert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stehen viele Szenarien bevor, die noch automatisiert werden müssen. Wir haben die Rauchtests fast vollständig automatisiert, aber jetzt haben wir zu den arbeitsintensivsten Testszenarien gewechselt. Dies wird dazu beitragen, die Rückgriffszeiten weiter zu verkürzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich werden wir eine Testinfrastruktur entwickeln. Pläne zur Einführung eines Mock-Servers. Jetzt testen wir alles auf einem realen Stand und generieren Testdaten. Es braucht Zeit und Ressourcen. Mit dem Mock-Server können Sie Autotests ohne diese vorbereitende Vorbereitung ausführen (wir haben über den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mock-Server für ein anderes Projekt geschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir planen auch die Implementierung eines Autotest-Datensatzes, damit Sie ein TestRail-Skript basierend auf einem Werkstück schreiben können, das Sie erhalten, indem Sie direkt auf eine Oberfläche in einem Browser klicken. </font><font style="vertical-align: inherit;">Am Ausgang erhalten wir eine Art Autotest-Prototyp. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikelautor: Yuri Kudryavtsev, Spezialist für automatisierte Softwaretests. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Wir veröffentlichen unsere Artikel auf mehreren Websites der Runet. </font><font style="vertical-align: inherit;">Abonnieren Sie unsere Seiten auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VK</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instagram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegrammkanal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um mehr über alle unsere Veröffentlichungen und andere Maxilect-Nachrichten zu erfahren.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de499798/index.html">Zwei Tapas zu Geld: Wie wir in Aserbaidschan einen Finanz-Chat-Bot mit sofortiger Kartenausgabe entwickelt haben</a></li>
<li><a href="../de499802/index.html">Gamedev, Cyberpunk und ewige Philosophie: 3 Wochenend-Miniserien</a></li>
<li><a href="../de499804/index.html">Wie man effektiv mit Problemen bei Problemen auf GitHub arbeitet</a></li>
<li><a href="../de499806/index.html">Sprechen Sie Englisch? Finden Sie heraus, wie weit Sie in der Vergangenheit gehen konnten</a></li>
<li><a href="../de499808/index.html">Kundenerfahrung - wie man eine qualitativ hochwertige Kundenerfahrung durchdenkt und sicherstellt</a></li>
<li><a href="../de499812/index.html">Problem Nr. 37: IT-Schulung - aktuelle Probleme und Herausforderungen führender Unternehmen</a></li>
<li><a href="../de499814/index.html">Wie unsere Sensoren ihren ersten Winter verbracht haben</a></li>
<li><a href="../de499816/index.html">Spezifikationen und Preise für Intel Core-Prozessoren der 10. Generation veröffentlicht</a></li>
<li><a href="../de499818/index.html">Usbekisches Telegramm-Marketing</a></li>
<li><a href="../de499820/index.html">Warum wir Kotlin als eine unserer Zielsprachen gewählt haben. Teil 2: Kotlin Multiplattform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>