<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔭 🧑🏿‍🤝‍🧑🏾 🍭 ShIoTiny：ウェットルームの換気（プロジェクト例） 👔 🔀 😌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="重要なポイントまたはこの記事について
ESP8266チップをベースにした視覚的にプログラム可能なコントローラー であるShIoTinyに関する一連の記事を続けます。 この記事では、高湿度のバスルームまたはその他の部屋の換気制御プロジェクトの例について、ShIoTinyのプログラムの作成方法について説...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny：ウェットルームの換気（プロジェクト例）</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464485/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/so/ox/uesoox7zwrguyei6o5m_ndp2ufw.jpeg"></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要なポイントまたはこの記事について</font></font></h4><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ESP8266</font></b><font style="vertical-align: inherit;">チップをベースにした視覚的にプログラム可能なコントローラー</font><font style="vertical-align: inherit;">
である</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関する一連の記事を続け</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
この記事では、高湿度のバスルームまたはその他の部屋の換気制御プロジェクトの例について、</font><b><font style="vertical-align: inherit;">ShIoTinyの</font></b><font style="vertical-align: inherit;">プログラムの作成方法について説明し</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズの以前の記事。</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny：小さな自動化、モノのインターネット、または「休暇の6か月前」</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny：ノード、通信とイベント、または描画プログラムの機能</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考文献</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">プロジェクト</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;">サイト</font></b></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイナリファームウェア、コントローラーの図とドキュメント</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ノードの説明と説明</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTブローカーの構成cloudmqtt.com </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android用MQTTダッシュボードコントロールパネル</font></font></a><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
経験以外に理解はありません。これは、時と世代によって検証された真実です。したがって、実際にスキルを習得するには、自分で何かをしようとすることほど優れた方法はありません。そして、何ができるか、何を試す価値がないかを示す例は、ここで役に立ちます。もちろん、他の人の過ちは、自分自身のエラーの発生を防ぐことはできませんが、後者の数を減らすのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前の記事の読者からの質問と手紙は、ShIoTinyノードがどのように機能するかを示すために、換気制御の例である小さなプロジェクトを作成するように促しました。</font><b><font style="vertical-align: inherit;">ShIoTiny</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コントローラー</font><b><font style="vertical-align: inherit;">が登場</font></b><font style="vertical-align: inherit;">した当初のアイデア</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ポンプと灌漑ステーション-すべての人が適しているわけではなく、興味深いものになるでしょう。</font><font style="vertical-align: inherit;">そのため、わかりやすく多くの役立つ換気制御システムを例に挙げて説明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトのアイデアは私</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ものではないと言いますが、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">私はここからそれを取得し、</font></a><font style="vertical-align: inherit;">それを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTinyに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">適合させました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、何が欲しいかを理解する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
栽培プロセスは無限大です。そして、この特性が多くの良いアイデアとプロジェクトを台無しにした。開発者は、リリースする代わりに、理想的ではないにしても機能するものであるとしても、それを改善し続けました。そして彼は、競合他社がそれを回避するまでそれを完成させ、理想的ではないにしても（そして率直に言って悲惨なことですが）実用的な解決策ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、プロジェクトをどこで終わらせるかを知ることは非常に重要です。あるいは、言い換えれば、プロジェクトの最初に持っているものから、プロジェクトの最後に何を取得したいのかを決定する必要があります。ロシア語では、何かを作成する方法を説明するためだけに作成されたドキュメントに対して、美しく短く容量の大きい「計画」という言葉があります。これは、精神薄弱の翻訳者や欠陥のある管理者が、何らかの理由で最近「ロードマップ」を呼び始めたからです。まあ、神はそれらを祝福します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの計画はそのようになります。湿度が劇的に上がることがある部屋があると仮定します。たとえば、バスルームやキッチンなどです。湿度は不快なものであり、それを処理する方法は世界と同じくらい古く、部屋を換気します。かなりの数の放送方法があります。しかし、おそらく、私たちは黒人のようなエキゾチックで昔ながらの方法をウェブで拒否し、通常のファンに立ち寄ります。ファンは安く、私たちの地域でファンを見つけるのは簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要するに、ファンを制御したいのです。それぞれオンにして、オフにしてください。より正確には、必要に応じてオンとオフを切り替えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは決定するために残ります：ファンがどのような状況でオンにする必要があり、どのような状況で-オフにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが明らかです。湿度が所定の制限を超えると、ファンがオンになり、空気を吸い込みます。湿度が正常に戻りました-ファンがオフになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意深い読者は、「与えられた」という言葉にすぐに目を向けます。誰が与えられますか？どのようにプリセットされていますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しきい値湿度を設定する方法はいくつかあります。それらのうち2つを検討します。1つ目は可変抵抗を使用し、2つ目はMQTTプロトコルを介したネットワーク経由です。これらの方法にはそれぞれ利点と欠点があります。これについては後で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わからない人のために、「しきい値湿度」は、ファンをオンにする必要があるそのレベルを超えるような湿度レベルであると説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の質問は、ユーザーにファンを直接オンにする権利を与えるかどうかです。</font><font style="vertical-align: inherit;">つまり、湿度レベルに関係なく、ボタンに触れるだけで？</font><font style="vertical-align: inherit;">そのような機会を提供します。</font><font style="vertical-align: inherit;">結局のところ、ファンは高湿度の場合だけでなく、部屋から取り除くためにも必要になる場合があります。たとえば、「悪臭」と呼ばれる不快な臭いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、私たちは何が欲しいのか、そして少しでもそれがどのように機能するのかを理解しました。</font><font style="vertical-align: inherit;">換気制御システムのすべての機能を簡単に示します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> しきい値湿度レベルの設定（2つのオプション）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 湿度測定;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ファンの自動組み込み。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ファンの自動シャットダウン。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ファンの手動組み込み（ボタンに触れるだけで）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、計画は明確です。</font><font style="vertical-align: inherit;">上記のすべての機能をプログラムに実装する必要があります。</font><font style="vertical-align: inherit;">この「計画」に基づいて行動します。</font><font style="vertical-align: inherit;">まず、デバイスのブロック図を描いてみましょう。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスのブロック図</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に言えば、そのようなスキームは2つあります。 1つ目は、水分レベルのしきい値が可変抵抗によって設定されるオプションです。 2番目のスキームは、MQTTプロトコルを介してネットワークを介してしきい値湿度レベルが設定されるオプション用です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これらのスキームは1つの要素、つまり「しきい値湿度レベルを設定する」可変抵抗器だけが異なるため、1つの構造スキームのみを描画します。もちろん、GOSTによる構造体系は異なって見えます。しかし、私たちはバイソンエンジニアではなく、若い世代に焦点を当てています。したがって、可視性がより重要です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/qh/db/utqhdblfgdlmsv0rkcgqxaztvo8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では、写真では何が見えますか？ファンはリレーに接続されています</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relay1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントローラー</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ファンが高電圧下で生きる仕掛けであることに注目してください。したがって、誰かがこれを自分で行う場合は注意してください。つまり、少なくとも指や測定器を回路に差し込む前に、少なくともファンを取り外してください。そして2点目。ファンが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">250W</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より強力な場合は</font><font style="vertical-align: inherit;">、スターターを介してのみ</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に直接接続し</font><font style="vertical-align: inherit;">ないで</font><b><font style="vertical-align: inherit;">ください</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはファンを見つけました。ファンの「手動オン」ボタンです。入力</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Input1に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続されています</font><font style="vertical-align: inherit;">。これ以上説明することはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
温度および湿度センサー</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHT-11</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHT-22</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはその類似物）。それを接続するには、コントローラーに特別な入力が用意されています</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">図からわかるように、このようなセンサーを接続しても問題は発生しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして最後に、閾値湿度レベルを設定する可変抵抗。</font><font style="vertical-align: inherit;">より正確には、可変抵抗と一定抵抗で構成されるディバイダー。</font><font style="vertical-align: inherit;">接続に問題はありませんが、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内蔵ADC </font><font style="vertical-align: inherit;">は最大1ボルト用に設計されている</font><font style="vertical-align: inherit;">ことを説明し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">したがって、分圧器は約5倍必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、MQTTプロトコルを使用するネットワークを介して湿度レベルのしきい値を設定する場合、このディバイダーは不要であることを改めて思い出します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ElDraw ShIoTinyエディターでデバイスのアルゴリズムの作成を開始します。</font><font style="vertical-align: inherit;">そこに着く方法は、このエディターで、以前の記事、または記事の先頭にあるリンクの説明を読むことができます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション1、最も簡単</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単なものから始めましょう：</font><font style="vertical-align: inherit;">湿度のしきい値が一定時間を超えた</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とき</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に、</font><b><font style="vertical-align: inherit;">Relay1</font></b><font style="vertical-align: inherit;">リレーをオンにし</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/un/8e/kd/un8ekdrb8cy8zvbc6e_ae2ygwyw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、複雑なものは何もありません。ノードは4つしかなく、コメントノードはカウントされません。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHT11</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は実際には温度と湿度のセンサーです（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHT22</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に変更できます</font><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONST-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パーセント単位のしきい値湿度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンパレータ-2つの数値を比較し、指定された条件が満たされている場合は出力1を設定し、条件が満たされていない場合は0を設定するノード。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、この条件は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A&gt; B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">になります。ここで、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はセンサーによって測定された湿度レベルであり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は同じ湿度のしきい値レベルです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
測定された湿度レベル（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）がしきい値湿度レベル（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を超える</font><font style="vertical-align: inherit;">とすぐに、コンパレータ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A&gt; Bの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力に1が</font><font style="vertical-align: inherit;">表示さ</font><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">、リレーがオンになります。逆に、湿度レベルが正常に戻ると（つまり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A &lt;= B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、すぐにコンパレーターの出力に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A&gt; B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0が表示され、リレーがオフになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてクリア？誰がそうでないか-もう一度読むか、手順のノードの説明を見てください。</font><b><font style="vertical-align: inherit;">DHT11</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
センサーからのデータ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">約10秒に1回更新される</font><font style="vertical-align: inherit;">ことに注意してください</font><font style="vertical-align: inherit;">。したがって、リレーは、10秒に1回よりも頻繁にオンとオフを切り替えることができません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてうまくいきますが、可変抵抗器を使用してしきい値湿度レベルを設定したいと思います。何も簡単です！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/qe/oi/ezqeoioucwwf0nm90o2sibwizj0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定数ノードをADCノードに置き換えるだけです。</font><font style="vertical-align: inherit;">結局のところ、分圧器を可変抵抗器でADCに接続しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ADCの入力の電圧は0〜1ボルトです。</font><font style="vertical-align: inherit;">ただし、センサーの出力での湿度は0〜100％です。</font><font style="vertical-align: inherit;">それらをどのように比較しますか？</font><font style="vertical-align: inherit;">すべてが簡単です。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のADCユニットは</font><font style="vertical-align: inherit;">、入力電圧を測定するだけでなく、それを</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケーリングおよびシフトする</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法も知って</font><i><b><font style="vertical-align: inherit;">い</font></b></i><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、ADC1ノード（ADC）の出力では</font><font style="vertical-align: inherit;">、式によって計算された</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の値になります。</font></font><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>X</mi><mo>=</mo><mi>k</mi><mo>&amp;#x22C5;</mo><msub><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x432;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x445;</mo></mrow></mrow></msub><mo>+</mo><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.744ex" height="2.634ex" viewBox="0 -755.5 6348.2 1134.2" role="img" focusable="false" style="vertical-align: -0.88ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMATHI-58" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMAIN-3D" x="1130" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMATHI-6B" x="2186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMAIN-22C5" x="2930" y="0"></use><g transform="translate(3431,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMATHI-75" x="0" y="0"></use><g transform="translate(572,-189)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(38.056) matrix(1 0 0 -1 0 0)"></text><g transform="translate(287,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(38.056) matrix(1 0 0 -1 0 0)"></text></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMAIN-2B" x="4917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMATHI-62" x="5918" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>X</mi><mo>=</mo><mi>k</mi><mo>⋅</mo><msub><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow></mrow></msub><mo>+</mo><mi>b</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">X=k \cdot u_{} +b</script></p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どこ </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x432;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x445;</mo></mrow></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.937ex" height="2.134ex" viewBox="0 -540.2 1264.7 918.9" role="img" focusable="false" style="vertical-align: -0.88ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMATHI-75" x="0" y="0"></use><g transform="translate(572,-189)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(38.056) matrix(1 0 0 -1 0 0)"></text><g transform="translate(287,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(38.056) matrix(1 0 0 -1 0 0)"></text></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-2">u_{}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ADC入力の電圧です（0〜1V）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">範囲（ADC範囲）および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフセット（ADCオフセット）。したがって、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k = 100</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b = 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を設定</font><font style="vertical-align: inherit;">すると、</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0から1の範囲</font><font style="vertical-align: inherit;">で、ADCユニットの出力</font><font style="vertical-align: inherit;">での</font><b><font style="vertical-align: inherit;">X</font></b><font style="vertical-align: inherit;">の値は</font><font style="vertical-align: inherit;">0から100の範囲で変化します。</font><font style="vertical-align: inherit;">
または、単純に、可変抵抗エンジンを回して、しきい値湿度レベルを0から100に設定できます。唯一の不便な点は、ディスプレイデバイスがないことです。しかし実際には、可変抵抗のエンジンが6区分を0％、20％、40％、60％、80％、100％にする場合、これはしきい値湿度レベルを設定するのに十分です。</font><font style="vertical-align: inherit;">
係数</font><b><font style="vertical-align: inherit;">k-</font></b><font style="vertical-align: inherit;">範囲（ADC範囲）および</font><b><font style="vertical-align: inherit;">b-</font></b><font style="vertical-align: inherit;">オフセット（ADCオフセット）</font><font style="vertical-align: inherit;">をどのように設定し</font><font style="vertical-align: inherit;">ますか？はい、蒸しカブより簡単です。ノード</font><b><font style="vertical-align: inherit;">ADC1</font></b><font style="vertical-align: inherit;">へのマウスポインターを</font><b><font style="vertical-align: inherit;">突きます</font></b></font><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>u</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x432;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x445;</mo></mrow></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.937ex" height="2.134ex" viewBox="0 -540.2 1264.7 918.9" role="img" focusable="false" style="vertical-align: -0.88ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/464485/&amp;usg=ALkJrhgKiicIcr7C5MMY8aGKZiP_dcUvxQ#MJMATHI-75" x="0" y="0"></use><g transform="translate(572,-189)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(38.056) matrix(1 0 0 -1 0 0)"></text><g transform="translate(287,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(38.056) matrix(1 0 0 -1 0 0)"></text></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>u</mi><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo></mo></mrow></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-3">u_{}</script><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すると、設定ウィンドウが表示されます。</font><font style="vertical-align: inherit;">その中で、必要なものすべてを設定できます。</font><font style="vertical-align: inherit;">私たちの場合、図のようなウィンドウになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cn/so/ub/cnsoubc9q_rhu-2p6hlffcd_1ig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、私たちは最も簡単な作業ソリューションを持っています。</font><font style="vertical-align: inherit;">それを改善し始めましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、最も簡単なソリューションには、インターネットを必要としないという利点があります。</font><font style="vertical-align: inherit;">それは完全に自律的です。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション2、ボタンを接続する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが機能し、誰もが幸せです。しかし、不運なことに、換気を強制的にオンにすることはできません。</font><font style="vertical-align: inherit;">ボタンが</font><font style="vertical-align: inherit;">入力</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Input1に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続され、湿度センサーに注意を払わずにファンを強制的にオン/オフすることに</font><font style="vertical-align: inherit;">すでに同意してい</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回路プログラムでこのボタンを処理する時が来ました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rn/9h/p8/rn9hp8-41uqwkms65uqiwynd_-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボタンクリック処理ユニットはオレンジ色で強調表示されます。出力の値が1を超えるとゼロにリセットされるボタンクリックカウンターです（緑の線、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ノード出力</font><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが以前のように、ここで、プレーンとして動作します：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CTの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カウンターが</font><font style="vertical-align: inherit;">に接続され、ボタンのクリックカウント</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力1を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。つまり、ボタンを押すたびにこのカウンターの出力の</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
値が</font><font style="vertical-align: inherit;">1ずつ増加します。</font><font style="vertical-align: inherit;">この値が2に等しくなると（つまり、1を超えると）、すぐにコンパレーターの出力に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A&gt; B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が表示されます。そして、この1はカウンター</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をゼロに</font><font style="vertical-align: inherit;">リセット</font><font style="vertical-align: inherit;">します。これはコンパレーターを意味し、スキームに従って低い方のコンパレーターです！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ボタンには2つの状態（0と1）があります。より多くの状態（3または4またはそれ以上）が必要な場合、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONST</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数</font><font style="vertical-align: inherit;">をある値から別の値</font><font style="vertical-align: inherit;">に変更するだけで十分</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ファンをオンにするには、設定された湿度レベルを超えることとボタンを1回押すことの2つの条件があります。いずれかの条件が満たされると、ファンがオンになります。そしてそれはボタンまで機能します</font><b><font style="vertical-align: inherit;">そして</font></b><font style="vertical-align: inherit;">再び押されます</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">湿度が正常に戻りません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、アルゴリズムをさらに複雑にすることもできますが、これを行うことはありません。希望する人のために創造性の余地を残します。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション3、インターネットに接続する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが説明したことはすべて非常に機能的です。</font><font style="vertical-align: inherit;">しかし、見せびらかしはどうですか？</font><font style="vertical-align: inherit;">結局のところ、ニキビにこだわったヒップスターハッカークラッカーは、ペンをひねってボタンを押す人を笑い、スマートフォンからそれを制御しません。</font><font style="vertical-align: inherit;">ハンドルをひねることは「ファッショナブルではない」。</font><font style="vertical-align: inherit;">しかし、スマートフォンで指をクロールして、この指を血の中から消し去ります-ここでは、ヒップスターハッカークラッカーの欲望のピークです（私はそれらすべてを区別することはできなかったので、私が間違いを犯した場合、申し訳ありません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私たちはこれらの個人を尊敬します。インターネットガバナンスには本当の利点があります。まず第一に、それは視覚的です。カールソンコントローラー用の完全に使用可能なコントロールパネルを2、3回のポークで作成できるようにするすべてのプラットフォームのアプリケーションがたくさんあります。第二に、室内の湿度状態をリモートで監視する機会です。そして3番目に、ファンが何をしているか（回転しているかどうか）だけでなく、設定されているしきい値湿度レベルも確認できます。そして-ファンは自動または手動でオンになりました。一般的に、あなたが望むものは何でも。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、一部のファンにとっては非常に名誉があります。しかし、これは単なる例です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、インターネットに接続するために、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクノロジー</font><font style="vertical-align: inherit;">と同じ名前のプロトコルを使用します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このテクノロジーを使用するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTブローカー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要</font><font style="vertical-align: inherit;">です。これは</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">ShTTIny</font></b><font style="vertical-align: inherit;">やスマートフォン</font><font style="vertical-align: inherit;">などの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTクライアント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">サービスを提供する特別なサーバーです</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">MQTT</font></b><font style="vertical-align: inherit;"> 
テクノロジーの本質</font><font style="vertical-align: inherit;">は、任意のクライアントがMQTTブローカー（サーバー</font><font style="vertical-align: inherit;">）で</font><font style="vertical-align: inherit;">特定の名前（</font><b><font style="vertical-align: inherit;">MQTT</font></b><font style="vertical-align: inherit;">用語で</font><font style="vertical-align: inherit;">は</font><b><font style="vertical-align: inherit;">topic</font></b><font style="vertical-align: inherit;">と呼ば</font><font style="vertical-align: inherit;">れます</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">で任意のデータを公開することです</font><font style="vertical-align: inherit;">。他のお客様は、名前（</font><b><font style="vertical-align: inherit;">トピック</font></b><font style="vertical-align: inherit;">）で</font><font style="vertical-align: inherit;">任意のデータをサブスクライブし</font><font style="vertical-align: inherit;">、新しく公開されたデータを受け取ることができます。つまり、データ交換全体がクライアントブローカークライアントの原則に基づいています。</font><font style="vertical-align: inherit;">
私</font><i><b><font style="vertical-align: inherit;">はしません</font></b></i></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><b><font style="vertical-align: inherit;"></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細について詳しく説明します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しくみ</font><font style="vertical-align: inherit;">や、コントロールパネルを作成するためのプログラムの種類</font><font style="vertical-align: inherit;">については、インターネット上に数多くの記事やチュートリアル</font><font style="vertical-align: inherit;">があります。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してデータを受信して​​公開する方法を</font><b><font style="vertical-align: inherit;">紹介し</font></b><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はブローカーとして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.cloudmqtt.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ました</font></a><font style="vertical-align: inherit;">が、原則はどこでも同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTブローカーに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登録済みであると想定します</font><font style="vertical-align: inherit;">。一般に、ブローカーはユーザー名とパスワード（承認用）、および接続用のポートを提供します（または作成する必要があります）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTiny</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTブローカー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">接続する</font><font style="vertical-align: inherit;">には、</font><font style="vertical-align: inherit;">通常の接続と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TLS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）の</font><font style="vertical-align: inherit;">2つの方法</font><b><font style="vertical-align: inherit;">があり</font></b><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShIoTinyの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これらすべてのパラメーターは</font><font style="vertical-align: inherit;">、[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワーク</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]タブの[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーへ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><b><font style="vertical-align: inherit;">MQTT接続</font></b><font style="vertical-align: inherit;"> ] </font><font style="vertical-align: inherit;">セクションで入力</font><b><font style="vertical-align: inherit;">します</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/97/6j/kb/976jkbemm294uso3-pjdcb4wx_4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたの場合は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTブローカーが</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承認を必要としない、（空これらのフィールドを残して）自分のログイン名とパスワードを入力しないでください。</font><b><font style="vertical-align: inherit;">MQTTトピックのプレフィックス</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータに</font><font style="vertical-align: inherit;">は、個別の説明が必要です。</font><font style="vertical-align: inherit;">
接頭辞MQTTパラメータ- </font><font style="vertical-align: inherit;">パブリケーションおよび</font><font style="vertical-align: inherit;">テーマのタイトル（</font><b><font style="vertical-align: inherit;">topic</font></b><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">追加される文字列、</font><font style="vertical-align: inherit;">およびMQTTブローカーへのサブスクリプション。</font><b><font style="vertical-align: inherit;">MQTTプレフィックス</font></b><font style="vertical-align: inherit;">をコントローラーに</font><font style="vertical-align: inherit;">インストールする</font><font style="vertical-align: inherit;">には、入力フィールドに「</font><b><font style="vertical-align: inherit;">件名のプレフィックスMQTT</font></b><font style="vertical-align: inherit;"> »（« </font><b><font style="vertical-align: inherit;">MQTTトピックのプレフィックス</font></b><font style="vertical-align: inherit;"> »）を</font><font style="vertical-align: inherit;">入力する必要があります</font><font style="vertical-align: inherit;">。接頭辞は常にスラッシュ（</font><b><font style="vertical-align: inherit;">「/」で</font></b><font style="vertical-align: inherit;">始まります</font><b><font style="vertical-align: inherit;">。</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）！入力フィールドにスラッシュを入力しない場合は、自動的に追加されます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「＃」</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「+」の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字は、プレフィックスで使用できません</font><font style="vertical-align: inherit;">。他の制限はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、パラメーター「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">status</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">を発行する</font><font style="vertical-align: inherit;">（またはサブスクライブする）場合、プレフィックスが「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ shiotiny /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」に</font><font style="vertical-align: inherit;">設定され</font><font style="vertical-align: inherit;">ていると、ブローカーではこのパラメーターは「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ shiotiny / status</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">という名前で発行され</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。空のプレフィックスセットがある場合、ブローカーのすべてのパラメーターはスラッシュ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「/」</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）で</font><font style="vertical-align: inherit;">始まります</font><font style="vertical-align: inherit;">。「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">status</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」は「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ status</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">として公開され</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、</font><b><font style="vertical-align: inherit;">MQTTブローカーに</font></b><font style="vertical-align: inherit;">登録されていると思います</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー名、パスワード、ポートを取得しました。次に、[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Networking</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]タブ</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">ShIoTiny</font></b><font style="vertical-align: inherit;">コントローラーの</font><font style="vertical-align: inherit;">[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT Connection to server] </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セクションで</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのパラメーターを設定</font><b><font style="vertical-align: inherit;">します</font></b><font style="vertical-align: inherit;">。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接頭辞は「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ room /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」に</font><font style="vertical-align: inherit;">設定されていると考えられ</font><font style="vertical-align: inherit;">ます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、すべての主要なパラメータのステータスを公開します</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Realay1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リレー</font><font style="vertical-align: inherit;">、手動オン状態、自動オン状態、最後に、しきい値と現在の湿度レベルです。まあ、ボーナス-部屋の温度。これを行う方法については、図を参照してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tq/xj/la/tqxjla44g3klhb_apkinf7yudka.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、以前のバージョンとの違いは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT Publish</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ノードのみ</font><font style="vertical-align: inherit;">です。プレフィックスを指定すると、次のパラメーターが公開されます。</font></font><br>
<img src="https://habrastorage.org/webt/hr/9c/wd/hr9cwdccjlb3tnpkgm2g7grdyhe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、システム全体の状態が完全に表示されています。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私たちは見たいだけでなく、コントロールしたいのです。になる方法とても簡単です。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と可変抵抗器</font><font style="vertical-align: inherit;">を使用してしきい値湿度レベルを設定することを拒否し、</font><font style="vertical-align: inherit;">同じ同じしきい値湿度レベルを</font><font style="vertical-align: inherit;">スマートフォンから</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTで</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接設定します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dr/e3/yw/dre3ywd0uyw_cjtw8tnzr-doicq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回路からADCノードを削除し、そこに3つの新しいノード</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">FLASH </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FLASHリストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT記述</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を含めます</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">MQTT記述</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ノードの機能</font><font style="vertical-align: inherit;">は明白です</font><b><font style="vertical-align: inherit;">。MQTT </font></b><b><font style="vertical-align: inherit;">ブローカー</font></b><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">パラメーター</font><b><font style="vertical-align: inherit;">/部屋/ trigHset</font></b><font style="vertical-align: inherit;">（しきい値湿度レベル）を</font><font style="vertical-align: inherit;">受け取ります</font><font style="vertical-align: inherit;">。しかし、彼は次のデータをどのように処理しますか？それらをノードに与えるだけです</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FLASHストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、このデータを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trigH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という名前で不揮発性メモリに</font><b><font style="vertical-align: inherit;">保存し</font></b><font style="vertical-align: inherit;">ます。その後、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FLASH復元</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ノード</font><font style="vertical-align: inherit;">は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trigH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という名前で不揮発性メモリからデータを読み取り</font><b><font style="vertical-align: inherit;">、</font></b><font style="vertical-align: inherit;">次に何が起こるかは既にわかっています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜそのような困難なのか？受信したデータをコンパレータの入力にすぐに送信できないのはなぜですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S・ホームズ同志がよく言ったように、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは初歩的なこと</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です！デバイスの電源を入れた後、</font><b><font style="vertical-align: inherit;">MQTTブローカーに</font></b><font style="vertical-align: inherit;">参加することを誰も保証しません</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして、湿度を測定する必要があります。</font><font style="vertical-align: inherit;">そして、ファンをオンにする必要があります。</font><font style="vertical-align: inherit;">しかし、閾値湿度レベルに関する情報なしでは、これは不可能です！</font><font style="vertical-align: inherit;">したがって、オンにすると、デバイスは以前に保存されたしきい値水分レベルを不揮発性メモリから抽出し、それを意思決定に使用します。</font><font style="vertical-align: inherit;">そして、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTTブローカー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">との接続</font><b><font style="vertical-align: inherit;">が確立され</font></b><font style="vertical-align: inherit;">、誰かが新しい値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ room / trigHsetを公開する</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、この新しい値が使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、あなたが望むものを発明することができます。</font><font style="vertical-align: inherit;">たとえば、湿度に加えて、温度レコードも入力します。</font><font style="vertical-align: inherit;">または、「スマート」照明制御を追加します（未使用の2つのリレーと2つの入力はまだ残しています）。</font><font style="vertical-align: inherit;">すべてあなたの手に！</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、私たちはShIoTinyに基づく最もシンプルなエッセンスコントローラーの実装のいくつかの例を見ました。</font><font style="vertical-align: inherit;">多分それは誰かに役立つでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつものように、提案、希望、質問、タイプミスなど、電子メール：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shiotiny@yandex.ru</font></font></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja464465/index.html">PreplyをKubernetesに移行した方法と理由</a></li>
<li><a href="../ja464467/index.html">私たちはゼロからウェブ分析を学びます。豊富な品揃え</a></li>
<li><a href="../ja464471/index.html">The DudeでのプリンターSNMPモニタリング</a></li>
<li><a href="../ja464479/index.html">「関連分野の初心者プログラマのマニフェスト」またはそのような人生にどうやってやってきたか</a></li>
<li><a href="../ja464481/index.html">スタジオでトレーニングとモチベーションシステムを構築する方法</a></li>
<li><a href="../ja464487/index.html">選択によりドキュメントを入力するためのインターフェースを構築しています</a></li>
<li><a href="../ja464489/index.html">サンプルのビルドボット</a></li>
<li><a href="../ja464491/index.html">Vivaldi 2.7-沈黙の中での激しい生活</a></li>
<li><a href="../ja464495/index.html">管理コミュニケーションチームチームとしてのチーム開発と反省</a></li>
<li><a href="../ja464497/index.html">不眠症と神経衰弱の治療薬としてのJIRA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>