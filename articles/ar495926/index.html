<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คค ๐ ๐ท ูุญู ููุชุจ ุจุฑูุงูุฌูุง ุซุงุจุชูุง ูู TI cc2530 ุนูู Z-Stack 3.0 ูู Zigbee Sonoff BASICZBR3 ูุน ูุณุชุดุนุฑ ds18b20 ๐ถ๐พ ๐จ๐ผโ๐ซ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุงูููุชุฑุถ ุฃู ุงููุงุฑุฆ ูุฏูู ุจุงููุนู ูุนุฑูุฉ ุฃูููุฉ ุจูุบุฉ C ุ ููุนุฑู ุดูุฆูุง ุนู Zigbee ุ ูุดุฑูุญุฉ cc2530 ุ ูุทุฑู ุชุญุฏูุซู ูุงุณุชุฎุฏุงูู ุ ููุง ุฃูู ุนูู ุฏุฑุงูุฉ ุจูุดุงุฑูุน ูุซู zi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ูุญู ููุชุจ ุจุฑูุงูุฌูุง ุซุงุจุชูุง ูู TI cc2530 ุนูู Z-Stack 3.0 ูู Zigbee Sonoff BASICZBR3 ูุน ูุณุชุดุนุฑ ds18b20</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/iobroker/blog/495926/"><img src="https://habrastorage.org/webt/pk/k8/1r/pkk81rmgifam0ccamhmapnesahq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุชุฑุถ ุฃู ุงููุงุฑุฆ ูุฏูู ุจุงููุนู ูุนุฑูุฉ ุฃูููุฉ ุจูุบุฉ C ุ ููุนุฑู ุดูุฆูุง ุนู Zigbee ุ ูุดุฑูุญุฉ cc2530 ุ ูุทุฑู ุชุญุฏูุซู ูุงุณุชุฎุฏุงูู ุ ููุง ุฃูู ุนูู ุฏุฑุงูุฉ ุจูุดุงุฑูุน ูุซู zigbee2mqtt. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุงุณุชุนุฏ ุฃู ุงุฐูุจ ูููุฑุงุกุฉ ุนูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://myzigbee.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.zigbee2mqtt.io/ ุชูุช ูุชุงุจุฉ</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงูููุงูุฉ ุฃููุงู ุจุงูุชูุตูู ุ ูููู ูุชู ุชุณุฑูุนูุง ุชุฏุฑูุฌููุง ููุง ุชุชููู ุนูุฏ ุงูุชูุงุตูู ุ ูููููุง ุชุตู ุฑูุฒ ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ุงูููุงุฆู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุดุฎุต ูุง ุบูุฑ ููุชู ุจุงูููุทู ุ ููุง ุนููู ุณูู ูุชุญ ูุตุงุฏุฑ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ููุฑุงุกุชูุง. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุฏ ุงููุตุฏุฑู ููุจุฑูุงูุฌ ุงูุซุงุจุช ุงูููุงุฆู</font></font></a><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุง ุชุฏุนู ุงูููุฏ ูููุฌ ุงูุชุทููุฑ ุฃููุง ูุซุงููุฉ. </font><font style="vertical-align: inherit;">"ุฃูุง ูุณุช ุณุงุญุฑูุง ุ ุฃูุง ุฃุชุนูู ููุท."</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏู</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุฏู ุงูุฑุฆูุณู ูู ููู ููููุฉ ูุชุงุจุฉ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูู Z-Stack ููุชุฑุฉ ุทูููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฑุฑุช ุชูููุฐ ุจุฑูุงูุฌ ุซุงุจุช ุจุฏูู ูููุนุฏุงุช ุงูููุงุฆูุฉ (ุชู ุงุฎุชูุงุฑ ุชุชุงุจุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sonoff BASICZBR3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุซุงู </font><font style="vertical-align: inherit;">) ูุฅุถุงูุฉ ุงููุฏุฑุฉ ุนูู ุชูุตูู ูุณุชุดุนุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ds18b20 ุงูุดููุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฃุฑุฏุช ุฃู ุฃุนุฑุถ ุนูู ูุทูุฑู Zigbee ูููุจุชุฏุฆูู ูุซุงููุง ุนูู ุชุทููุฑ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุดุฑูุญุฉ TI cc2530 ุนูู Z-Stack.</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. ุงูุชุญุถูุฑ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุก ุงูุชุทููุฑ ุ ุชุญุชุงุฌ ุฅูู ุชูุฒูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z-Stack 3.0.2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุซุจูุชู </font><font style="vertical-align: inherit;">- ูุฐุง ูู SDK ูุชุทููุฑ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุน ุงูุฃูุซูุฉ ูุงููุซุงุฆู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ุชูุฒูู ูุชุซุจูุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IAR Embeded Workbench ูู 8051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุฐู ุจูุฆุฉ ุชุทููุฑ ูุน ุงููุฏุฑุฉ ุนูู ุงูุชุฑุฌูุฉ ูุฑูุงุฆู TI cc2530. </font><font style="vertical-align: inherit;">ูุชุฑุฉ ุงูุงุณุชุฎุฏุงู ุงููุฌุงููุฉ ูู ุดูุฑ ูุงุญุฏ (ูููู ุณูุฌุฏ ุงูุจุงุญุซ ุญูุงู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุฌู ุงูุชุทููุฑ ูุงูุชุตุญูุญ ุ ุฃุณุชุฎุฏู CCDebugger - ููู ูุง ูุณูุญ ููุท ุจูููุถ ุฑูุงุฆู cc2531 / cc2530 ุ ูููู ุฃูุถูุง ุชุตุญูุญ ุงูุชุทุจูู ูู ุจูุฆุฉ IAR. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/aj/pr/_jajpr3cvn5q93lo6_igpenpdly.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุจุณูุท ุงูุชุฌุงุฑุจ ูุงูููุงุฐุฌ ูุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูุชู ุฃููู ุจูุง ุนูู devboard ููุญุฏุฉ cc2530 ุงูููุงุจูุฉ:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/xc/cq/qlxccqkdbxnqt3pcuo8049lj0ci.jpeg"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. ุฅูุดุงุก ุชุทุจูู ุฌุฏูุฏ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ ูุนุชูุฏ ุนูู GenericApp. </font><font style="vertical-align: inherit;">ูุฐุง ูุซุงู ุนูู ุชุทุจูู Z-Stack ุงูุฃุณุงุณู. </font><font style="vertical-align: inherit;">ููู ููุฌูุฏ ูู ูุฌูุฏ Z-Stack 3.0.2 \ Projects \ zstack \ HomeAutomation \ GenericApp. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจูุณุฎู ูู ููุงู ูุฑูุจ ูุฅุนุงุฏุฉ ุชุณููุชู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู DIYRuZRT (ุฏุนูุง ูุทูุจ ุงูุชุทุจูู ูุฌูุงุฒูุง). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฌุฏ ุฏุงุฎู ูุฌูุฏ CC2530DB ูููุงุช:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenericApp.ewd - ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน ูู C-SPY</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenericApp.ewp - ููู ุงููุดุฑูุน</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenericApp.eww - ูุณุงุญุฉ ุงูุนูู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุนุงุฏุฉ ุชุณููุฉ ุงููููุงุช ุฅูู DIYRuZRT.eww ู DIYRuZRT.ewp. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุงุฎู ุฌููุน ุงููููุงุช (ุจูุง ูู ุฐูู ุงููุฌูุฏ ุงููุตุฏุฑ) ุ ูููู ุฃูุถูุง ุจุชุบููุฑ ุฌููุน ุงููุฑุงุฌุน ุฅูู GenericApp ุฅูู DIYRuZRT. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุญ ูุดุฑูุน DIYRuZRT.ewp ุงูุขู ูู IAR. ูุฎุชุงุฑ ุชูููู RouterEB ููููู ุจุฅุฌุฑุงุก Rebuild All. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fb/re/mb/fbremb-ma8rcyafhwdcj6klys9k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุชู ุฅูุดุงุก ูุฌูุฏ RouterEB ูู ูุฌูุฏ CC2530DB ุ ูุณูุธูุฑ ููู DIYRuZRT.d51 ุฏุงุฎู ูุฌูุฏ EXE - ูุฐุง ุงูููู ููุงุณุจ ูููููุถ ูุงูุชุตุญูุญ ูู IAR. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฅุฐุง ุงุญุชุฌูุง ุฅูู ูููุถ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุนุจุฑ SmartRF Flash Programmer ุ ูุณูู ูููู ุจุฅุฌุฑุงุก ุชุบููุฑุงุช ุตุบูุฑุฉ. ููููุงู ุจุฐูู ุ ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน ูู ูุณู ุงูุงุฑุชุจุงุท ูู ุนูุงูุฉ ุงูุชุจููุจ ุงูุฅุฎุฑุงุฌ ุ ูู ุจุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช ูููู ุงูุฅุฎุฑุงุฌ ูุงูุชูุณูู: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r5/cb/xl/r5cbxlrunrutiwxxgt-gytlwjz4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ุณูุชู ุฅูุดุงุก ููู ุงูุจุฑูุงูุฌ ุงูุซุงุจุช DIYRuZRT.hex ูู ูุฌูุฏ EXE ุ ููู ููุงุณุจ ูููููุถ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฃุฏูุงุช ุงูุฃุฎุฑู ูุจุทุฑู ุฃุฎุฑู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุนุฏ ุชุญููู ูุฐู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุ ูุง ูุชุตู ุงูุฌูุงุฒ ุจุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุญุณูุง ุ ุณูู ูููู.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ููููุง ูู ุงููุตุทูุญุงุช</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุชูู ูุตุทูุญุงุช ุฒูุฌุจู ุนูู ุงูููุงููู ุงูุชุงููุฉ:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุฉ ุงูููุงูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><b><font style="vertical-align: inherit;">ููุทุฉ</font></b><font style="vertical-align: inherit;"> ูุตู ุงูุฌูุงุฒ ุงูููุงุฆู. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ูู ุงูุฃุฌูุฒุฉ ุงูุจุณูุทุฉ ููุทุฉ ููุงูุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ุฃู ูููู ููุงู ุงูุนุฏูุฏ ูููุง ูู ุงูุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ ุงููุธุงุฆู ุ ููุฐูู ูู ุงูุฃุฌูุฒุฉ ุฐุงุช ูููุงุช ุชุนุฑูู ุชูุงุนู ูุฎุชููุฉ (ููู ุชุนุฑูู ูุงุญุฏ - ููุทุฉ ููุงูุฉ ูุงุญุฏุฉ).</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฉ (ุงููุชูุฉ)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุฌููุนุฉ ูู ุงูุณูุงุช ูุงูุฃูุงูุฑ ุงููุชุนููุฉ ุจูุธููุฉ ูุงุญุฏุฉ (ุชุดุบูู / ุฅููุงู ุ ุชุนุชูู ุ ููุงุณุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุ ุฅูุฎ). </font><font style="vertical-align: inherit;">ุชุดูุฑ ุงููุชูุฉ ุฅูู ุงููุฑุต ุงูุชู ุญููุชูุง ููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูู ููุทุฉ ููุงูุฉ ูุงุญุฏุฉ ุ ููููู ุชูููุฐ ุนุฏุฉ ูุฌููุนุงุช ูุฎุชููุฉ ุ ูููู ููุณ ููุณ ุงููุฌููุนุงุช.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูุฉ (ุณูุฉ)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุณูุฉ ูู ุณูุงุช ุงููุชูุฉ ุงูุชู ูููู ูุฑุงุกุชูุง ุฃู ูุชุงุจุชูุง. </font><font style="vertical-align: inherit;">ูููู ุฃู ูููู ูููุชูุฉ ุงูุนุฏูุฏ ูู ุงูุณูุงุช.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุฑุณุงูุฉ ุชุญูู ูููู ูููุชูุฉ ูุนุงูุฌุชูุง. </font><font style="vertical-align: inherit;">ูุฏ ูููู ูููุฑูู ูุนููุงุช. </font><font style="vertical-align: inherit;">ูุชู ุชูููุฐ ุฐูู ุจูุงุณุทุฉ ุฏุงูุฉ ูุชู ุชูููุฐูุง ุนูุฏ ุชููู ุฃูุฑ ููุนููุงุช.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชูุญูุฏ ุฃููุงุน ุงููุฌููุนุงุช ูุงูุณูุงุช ูุงูุฃูุงูุฑ ูู ููุชุจุฉ ูุฌููุนุฉ ุฒูุฌุจู. </font><font style="vertical-align: inherit;">ููู ูููู ูููุตูุนูู ุงุณุชุฎุฏุงู ูุฌููุนุงุชูู ุงูุฎุงุตุฉ ุ ูุน ุณูุงุชูู ููุฑููู ุงูุฎุงุตุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุถ ุงูููุชุฌูู ูุฑุซู ููู ูุง ููุชููู ุจุงููุนุงููุฑ ูููุนููู ุดูุฆูุง ุจุดุฃู ุงููุนูุงุฑ. </font><font style="vertical-align: inherit;">ุซู ุนููู ุฃู ุชุชููู ูุนูู. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุชุญุชูู</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุตุทูุญุงุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z-Stack ุฃูุถูุง ุนูู ููุงููู ุฎุงุตุฉ ุจูุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุนูู ุณุจูู ุงููุซุงู:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSAL (ุทุจูุฉ ุชุฌุฑูุฏ ูุธุงู ุงูุชุดุบูู)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุณุชูู ุชุฌุฑูุฏ ูุธุงู ุงูุชุดุบูู. </font><font style="vertical-align: inherit;">ููุง ุชุนูู ูุน ุงูููุงู (ุงูููุงู) ูุงูุฑุณุงุฆู (ุงูุฑุณุงุฆู) ูุงูุฃุญุฏุงุซ (ุงูุฃุญุฏุงุซ) ูุงููููุชุงุช (ุงููุคูุชุงุช) ูุงููุงุฆูุงุช ุงูุฃุฎุฑู.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL (ุทุจูุฉ ุชุฌุฑูุฏ ุงูุฃุฌูุฒุฉ)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุณุชูู ุชุฌุฑูุฏ ุงููุนุฏุงุช. </font><font style="vertical-align: inherit;">ููุง ุชุนูู ูุน ุงูุฃุฒุฑุงุฑ (ุงูููุงุชูุญ) ุ ุงููุตุงุจูุญ (ุงููุตุงุจูุญ) ุ ุงูููุงุทุนุงุช (ุงูููุงุทุนุฉ) ุ ุฅูุฎ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููุฑ ุทุจูุฉ ุงูุฃุฌูุฒุฉ ุนุฒููุง ูุฑูุฒ ุงูุจุฑูุงูุฌ ูุงููุนุฏุงุช ุงูุชู ุชุชุญูู ูููุง. </font><font style="vertical-align: inherit;">ูููุฑ ุงููุณุชูู ุงูุชุดุบููู ุขููุงุช ูุจูุงุก ูุงูุชูุงุนู ุจูู ุนูุงุตุฑ ุงูุชุทุจูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุณุชุฎุฏุงู ูู ูุฐุง ูู ุงูุชุธุงุฑู ุฃุฏูุงู ุ ููู ุญูุซ ุงููุจุฏุฃ ุ ุนูุฏ ุชุทููุฑ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. ูุงุฐุง ูุฏููุง ุฏุงุฎู ุงูุชุทุจูู ุงูุฃุณุงุณูุ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฌุฏ ุฑูุฒ ุงูุชุทุจูู ูู ูุฌูุฏ ุงููุตุฏุฑ:</font></font><br>
<br>
<ul>
<li><i>OSAL_DIYRuZRT.c</i> โ    <br>
</li>
<li><i>zcl_DIYRuZRT.h</i> โ  <br>
</li>
<li><i>zcl_DIYRuZRT.c</i> โ   <br>
</li>
<li><i>zcl_DIYRuZRT_data.c</i> โ  ,   <br>
</li>
</ul><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSAL_DIYRuZRT.c</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงูููู ุงูุฑุฆูุณู ุงูุฐู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ููู ุชุนุจุฆุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุตููู ูุนุงูุฌุงุช ุงูููุงู (ุงููููุฉ)&nbsp; </font><b><font style="vertical-align: inherit;">pTaskEventHandlerFn taskArr </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูููุฐ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธููุฉ ุชููุฆุฉ </font><b><font style="vertical-align: inherit;">osalInitTasks</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุญุงุฌุฉ ุฅูู ูุงูุฉ ุงููููุงุช ุงูุฃุฎุฑู ูุชูููุฐ ูุฐู ุงูุชููุฆุฉ ูุงููุนุงูุฌุงุช. </font><font style="vertical-align: inherit;">ูุชู ููุก </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฆูุฉ ูุนุงูุฌุงุช ุงูููุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pTaskEventHandlerFn rAr ุจูุฑุงุฌุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฏุงูุงุช. ูุชู ุชูุตูู / ูุตู ุจุนุถ ุงูููุงู ุนู ุทุฑูู ุชูุฌููุงุช ุงูุชุฑุฌูุฉ ุงูููุงุจูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุนุฑุถ ูุชูููู ุชูุฌููุงุช ุงูุชุฑุฌูุฉ ูู ุฎูุงุฑุงุช ุจุฑูุงูุฌ ูุชุฑุฌู ุงูุฑููุฒ ุงููุญุฏุฏุฉ:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/tl/u6/pntlu6bioazjsoaywmdfofeloas.png"><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> pTaskEventHandlerFn tasksArr[] = {<font></font>
  macEventLoop,<font></font>
  nwk_event_loop,<font></font>
#<span class="hljs-keyword">if</span> !defined (DISABLE_GREENPOWER_BASIC_PROXY) &amp;&amp; (ZG_BUILD_RTR_TYPE)<font></font>
  gp_event_loop,<font></font>
#endif  <font></font>
  Hal_ProcessEvent,<font></font>
#<span class="hljs-keyword">if</span> defined( MT_TASK )<font></font>
  MT_ProcessEvent,<font></font>
#endif<font></font>
  APS_event_loop,<font></font>
#<span class="hljs-keyword">if</span> defined ( ZIGBEE_FRAGMENTATION )<font></font>
  APSF_ProcessEvent,<font></font>
#endif<font></font>
  ZDApp_event_loop,<font></font>
#<span class="hljs-keyword">if</span> defined ( ZIGBEE_FREQ_AGILITY ) || defined ( ZIGBEE_PANID_CONFLICT )<font></font>
  ZDNwkMgr_event_loop,<font></font>
#endif<font></font>
  <span class="hljs-comment">//Added to include TouchLink functionality</span>
  #<span class="hljs-keyword">if</span> defined ( INTER_PAN )<font></font>
    StubAPS_ProcessEvent,<font></font>
  #endif<font></font>
  <span class="hljs-comment">// Added to include TouchLink initiator functionality</span>
  #<span class="hljs-keyword">if</span> defined ( BDB_TL_INITIATOR )<font></font>
    touchLinkInitiator_event_loop,<font></font>
  #endif<font></font>
  <span class="hljs-comment">// Added to include TouchLink target functionality</span>
  #<span class="hljs-keyword">if</span> defined ( BDB_TL_TARGET )<font></font>
    touchLinkTarget_event_loop,<font></font>
  #endif<font></font>
  zcl_event_loop,<font></font>
  bdb_event_loop,<font></font>
  zclDIYRuZRT_event_loop<font></font>
};<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osalInitTasks</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุธููุฉ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู ุงูุชู ุชุณุฌู ุงูููุงู </font><b><font style="vertical-align: inherit;">ุงูุชู ูุคุฏููุง</font></b><font style="vertical-align: inherit;"> ุงูุชุทุจูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุณุฌูู ุงูููุงู ุจุงูุชุฑุชูุจ ุ ูุชุญุตู ูู ูููุฉ ุนูู ุฑูููุง ุงูุฎุงุต. ูู ุงูููู ุงุชุจุงุน ููุณ ุงูุชุฑุชูุจ ููุง ูู ูุฌููุนุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงูArr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุซู ูุชู ุงุณุชุฏุนุงุก ุงููุนุงูุฌุงุช ููููุง ูุฑูู ุงููููุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">osalInitTasks</span><span class="hljs-params">( <span class="hljs-keyword">void</span> )</span>
</span>{<font></font>
  uint8 taskID = <span class="hljs-number">0</span>;<font></font>
<font></font>
  tasksEvents = (uint16 *)osal_mem_alloc( <span class="hljs-keyword">sizeof</span>( uint16 ) * tasksCnt);<font></font>
  osal_memset( tasksEvents, <span class="hljs-number">0</span>, (<span class="hljs-keyword">sizeof</span>( uint16 ) * tasksCnt));<font></font>
<font></font>
  macTaskInit( taskID++ );<font></font>
  nwk_init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> !defined (DISABLE_GREENPOWER_BASIC_PROXY) &amp;&amp; (ZG_BUILD_RTR_TYPE)</span><font></font>
  gp_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
  Hal_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined( MT_TASK )</span><font></font>
  MT_TaskInit( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
  APS_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined ( ZIGBEE_FRAGMENTATION )</span><font></font>
  APSF_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
  ZDApp_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined ( ZIGBEE_FREQ_AGILITY ) || defined ( ZIGBEE_PANID_CONFLICT )</span><font></font>
  ZDNwkMgr_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
  <span class="hljs-comment">// Added to include TouchLink functionality</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined ( INTER_PAN )</span><font></font>
  StubAPS_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
<span class="hljs-comment">// Added to include TouchLink initiator functionality</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined( BDB_TL_INITIATOR )</span><font></font>
  touchLinkInitiator_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
<span class="hljs-comment">// Added to include TouchLink target functionality</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined ( BDB_TL_TARGET )</span><font></font>
  touchLinkTarget_Init( taskID++ );<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
  zcl_Init( taskID++ );<font></font>
  bdb_Init( taskID++ );<font></font>
  zclDIYRuZRT_Init( taskID );<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฌู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุทุจูููุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนุงูุฌ </font><font style="vertical-align: inherit;">ุงููุธุงุฆู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_event_loop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุธููุฉ ุงูุชููุฆุฉ </font><b><font style="vertical-align: inherit;">zclDIYRuZRT_Init</font></b><font style="vertical-align: inherit;"> . ุชุชู ุฅุถุงูุชูุง ุขุฎุฑ ูู ุงููุงุฆูุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ูู ูุธููุชุงู ุฑุฆูุณูุชุงู ูุชุทุจูููุง. ูุชู ุชูููุฐ ูุฐู ุงููุธุงุฆู ูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zcl_DIYRuZRT.c</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_Init</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุธููุฉ ุชุณุฌูู ุงูููุงู. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIYRuZRT_ENDPOINT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุฑูู ููุทุฉ ุงูููุงูุฉ ุงูุฐู ูููุฐู ุชุทุจูููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชูููุฐ ุฎุทูุงุช ุงูุชุณุฌูู ุงูุชู ุชุตู ุทูุจูุง ุจุงูุชุณูุณู:</font></font><br>
<br>
<ul>
<li><b>bdb_RegisterSimpleDescriptor </b> โ    .    <b>SimpleDescriptionFormat_t zclDIYRuZRT_SimpleDesc</b> โ    ,  , ,    .       <i>OSAL_DIYRuZRT_data.c</i><br>
</li>
<li><b>zclGeneral_RegisterCmdCallbacks </b> โ      <b>zclGeneral_AppCallbacks_t zclDIYRuZRT_CmdCallbacks</b> โ  ,       .<br>
</li>
<li><b>zcl_registerAttrList </b> โ    <b>zclAttrRec_t zclDIYRuZRT_Attrs</b> โ  ,     .<br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zcl_registerForMsg</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุณุฌูู ุงุณุชูุงู ุฑุณุงุฆู ุงูุชุญูู.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RegisterForKeys</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูููุน ูููุชูุง ูุงุณุชูุจุงู ุฃุญุฏุงุซ ุงูููุฑ ุนูู ุงูุฒุฑ.</font></font><br>
</li>
</ul><br>
<pre><code class="cpp hljs"><span class="hljs-comment">/*********************************************************************
 * SIMPLE DESCRIPTOR
 */</span>
<span class="hljs-comment">// This is the Cluster ID List and should be filled with Application</span>
<span class="hljs-comment">// specific cluster IDs.</span>
<span class="hljs-keyword">const</span> cId_t zclDIYRuZRT_InClusterList[] =<font></font>
{<font></font>
  ZCL_CLUSTER_ID_GEN_BASIC,<font></font>
  ZCL_CLUSTER_ID_GEN_IDENTIFY,<font></font>
  <font></font>
  <span class="hljs-comment">// DIYRuZRT_<span class="hljs-doctag">TODO:</span> Add application specific Input Clusters Here. </span>
  <span class="hljs-comment">//       See zcl.h for Cluster ID definitions</span><font></font>
  <font></font>
};<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCLDIYRuZRT_MAX_INCLUSTERS   (sizeof(zclDIYRuZRT_InClusterList) / sizeof(zclDIYRuZRT_InClusterList[0]))</span><font></font>
<font></font>
<font></font>
<span class="hljs-keyword">const</span> cId_t zclDIYRuZRT_OutClusterList[] =<font></font>
{<font></font>
  ZCL_CLUSTER_ID_GEN_BASIC,<font></font>
  <font></font>
  <span class="hljs-comment">// DIYRuZRT_<span class="hljs-doctag">TODO:</span> Add application specific Output Clusters Here. </span>
  <span class="hljs-comment">//       See zcl.h for Cluster ID definitions</span><font></font>
};<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCLDIYRuZRT_MAX_OUTCLUSTERS  (sizeof(zclDIYRuZRT_OutClusterList) / sizeof(zclDIYRuZRT_OutClusterList[0]))</span><font></font>
<font></font>
<font></font>
SimpleDescriptionFormat_t zclDIYRuZRT_SimpleDesc =<font></font>
{<font></font>
  DIYRuZRT_ENDPOINT,                  <span class="hljs-comment">//  int Endpoint;</span>
  ZCL_HA_PROFILE_ID,                     <span class="hljs-comment">//  uint16 AppProfId;</span>
  <span class="hljs-comment">// DIYRuZRT_<span class="hljs-doctag">TODO:</span> Replace ZCL_HA_DEVICEID_ON_OFF_LIGHT with application specific device ID</span>
  ZCL_HA_DEVICEID_ON_OFF_LIGHT,          <span class="hljs-comment">//  uint16 AppDeviceId; </span>
  DIYRuZRT_DEVICE_VERSION,            <span class="hljs-comment">//  int   AppDevVer:4;</span>
  DIYRuZRT_FLAGS,                     <span class="hljs-comment">//  int   AppFlags:4;</span>
  ZCLDIYRuZRT_MAX_INCLUSTERS,         <span class="hljs-comment">//  byte  AppNumInClusters;</span>
  (cId_t *)zclDIYRuZRT_InClusterList, <span class="hljs-comment">//  byte *pAppInClusterList;</span>
  ZCLDIYRuZRT_MAX_OUTCLUSTERS,        <span class="hljs-comment">//  byte  AppNumInClusters;</span>
  (cId_t *)zclDIYRuZRT_OutClusterList <span class="hljs-comment">//  byte *pAppInClusterList;</span><font></font>
};<font></font>
</code></pre><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_event_loop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุธููุฉ ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ </font><b><font style="vertical-align: inherit;">ูุชุทุจูููุง</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุชุชู ูุนุงูุฌุฉ ุฃุญุฏุงุซ ุงููุธุงู ูู ุญููุฉ:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZCL_INCOMING_MSG</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุชู ูุนุงูุฌุฉ ุฃูุงูุฑ ุงูุชุญูู ูู ุงูุฌูุงุฒ ูู zclDIYRuZRT_ProcessIncomingMsg.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KEY_CHANGE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุชู ูุนุงูุฌุฉ ุฃุญุฏุงุซ ุงูููุฑ ุนูู ุงูุฒุฑ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_HandleKeys</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZDO_STATE_CHANGE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุฃุญุฏุงุซ ุชุบููุฑ ุญุงูุฉ ุงูุดุจูุฉ.</font></font><br>
</li>
</ul><br>
<pre><code class="cpp hljs">  <span class="hljs-keyword">if</span> ( events &amp; SYS_EVENT_MSG )<font></font>
  {<font></font>
    <span class="hljs-keyword">while</span> ( (MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( zclDIYRuZRT_TaskID )) )<font></font>
    {<font></font>
      <span class="hljs-keyword">switch</span> ( MSGpkt-&gt;hdr.event )<font></font>
      {<font></font>
        <span class="hljs-keyword">case</span> ZCL_INCOMING_MSG:
          <span class="hljs-comment">// Incoming ZCL Foundation command/response messages</span><font></font>
          zclDIYRuZRT_ProcessIncomingMsg( (zclIncomingMsg_t *)MSGpkt );<font></font>
          <span class="hljs-keyword">break</span>;<font></font>
<font></font>
        <span class="hljs-keyword">case</span> KEY_CHANGE:<font></font>
          zclDIYRuZRT_HandleKeys( ((keyChange_t *)MSGpkt)-&gt;state, ((keyChange_t *)MSGpkt)-&gt;keys );<font></font>
          <span class="hljs-keyword">break</span>;<font></font>
<font></font>
        <span class="hljs-keyword">case</span> ZDO_STATE_CHANGE:<font></font>
          zclDIYRuZRT_NwkState = (devStates_t)(MSGpkt-&gt;hdr.status);<font></font>
<font></font>
          <span class="hljs-comment">// now on the network</span>
          <span class="hljs-keyword">if</span> ( (zclDIYRuZRT_NwkState == DEV_ZB_COORD) ||<font></font>
               (zclDIYRuZRT_NwkState == DEV_ROUTER)   ||<font></font>
               (zclDIYRuZRT_NwkState == DEV_END_DEVICE) )<font></font>
          {<font></font>
            giGenAppScreenMode = GENERIC_MAINMODE;<font></font>
            zclDIYRuZRT_LcdDisplayUpdate();<font></font>
          }<font></font>
          <span class="hljs-keyword">break</span>;<font></font>
<font></font>
        <span class="hljs-keyword">default</span>:
          <span class="hljs-keyword">break</span>;<font></font>
      }<font></font>
<font></font>
      <span class="hljs-comment">// Release the memory</span><font></font>
      osal_msg_deallocate( (uint8 *)MSGpkt );<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุงูู ูู ูุนุงูุฌุฉ ุงูุญุฏุซ ุงูุฎุงุต </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIYRuZRT_EVT_1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงูุฐู ูุญูู ุญุงูุฉ LED </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_LED_2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุจุฏุฃ ุงููุคูุช ููุฏุฉ 500 ูุชุฑ ูุน ููุณ ุงูุญุฏุซ. </font><font style="vertical-align: inherit;">ูุคุฏู ูุฐุง ุฅูู ุจุฏุก ูููุถ LED </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_LED_2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-keyword">if</span> ( events &amp; DIYRuZRT_EVT_1 )<font></font>
  {<font></font>
    <span class="hljs-comment">// toggle LED 2 state, start another timer for 500ms</span><font></font>
    HalLedSet ( HAL_LED_2, HAL_LED_MODE_TOGGLE );<font></font>
    osal_start_timerEx( zclDIYRuZRT_TaskID, DIYRuZRT_EVT_1, <span class="hljs-number">500</span> );<font></font>
    <font></font>
    <span class="hljs-keyword">return</span> ( events ^ DIYRuZRT_EVT_1 );<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุญูููุฉ ูู ุฃูู ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฏุซ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_KEY_SW_1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชู ููู </font><b><font style="vertical-align: inherit;">ุชููุฆุฉ</font></b><font style="vertical-align: inherit;"> ุงููุคูุช </font><b><font style="vertical-align: inherit;">ูุญุฏุซ DIYRuZRT_EVT_1</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฅุฐุง ุถุบุทุช ุนูู ุฒุฑ S2 ุ ูุณูุชููู ุงููููุถ (ูุธู ูุคุดุฑ LED ุงูุฎุงุต ุจู ููุฏ ุงูุชุดุบูู). </font><font style="vertical-align: inherit;">ุงูุถุบุท ุนููู ูุฑุฉ ุฃุฎุฑู ุณูุจุฏุฃ ูู ุงููููุถ.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. ูุงู: ุงููุตุงุจูุญ ูุงูุฃุฒุฑุงุฑ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"ุงูุชุธุฑ ุ ุฃู LED ูุงูุฃุฒุฑุงุฑุ" ุ ุชุณุฃู. </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ุชุฑูุฒ ุฌููุน ุงูุฃูุซูุฉ ูู Z-stack ุนูู ุฃููุงุน ูุฎุชููุฉ ูู ููุญุงุช ุงูุชุตุญูุญ ูุณูุณูุฉ SmartRF05 EB: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tz/bl/ru/tzblrurrrpoze3kghx_dd1zrume.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏู ููุญุฉ ุชุตุญูุญ ูุฎุชููุฉ ููููุงู ููุญุฏุฉ ูุน ุดุฑูุญุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฌุฏ ุฒุฑุงู (+ ุฅุนุงุฏุฉ ุถุจุท) ู 3 ูุตุงุจูุญ LED (+ ูุคุดุฑ ุงูุทุงูุฉ) ุนูู ุงูููุญุฉ. </font><font style="vertical-align: inherit;">ูููุง ููู ูููุถ ูุงุญุฏ ูููู (D2) ุนูุฏูุง ุชุนูู ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุจุดูู ุตุญูุญ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงุณุชุฏุนุงุก ุฌูุงุช ุงูุงุชุตุงู ุ ูุญุฏุฏ ูุฑุงุณูุงุช ุงูุฏุจุงุจูุณ ูุงูุซูุงุฆูุงุช ูุงูุฃุฒุฑุงุฑ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1 - P10</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2 - P11</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D3 - P14</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2 - P20</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S1 - P01</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ HAL ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุจูุฉ ุชุฌุฑูุฏ ุงูุฃุฌูุฒุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ุทุฑููุฉ ููุชุฌุฑูุฏ ูู ุชูููุฐ ุงููุนุฏุงุช. ูุณุชุฎุฏู ุฑูุฒ ุงูุชุทุจูู ูุญุฏุงุช ุงููุงูุฑู ูุงููุธุงุฆู ุงูุชู ุชุนูู ูุน ุงูุชุฌุฑูุฏุงุช ูุซู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒุฑ 1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED 2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุชู ุชุนููู ุงููุฑุงุณูุงุช ุงูุฎุงุตุฉ ุจุงูุชุฌุฑูุฏุงุช ูุงููุนุฏุงุช ุจุดูู ูููุตู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูุฑู ูุง ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน HAL_LED_2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุฉ ููู ุฃู ุฏุจูุณ ูุนูู ุนููู. </font><i><font style="vertical-align: inherit;">ูู ุฎูุงู</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงูุจุญุซ ุ ูุฌุฏ ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_led.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ ูุชู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐู ุงูุซูุงุจุช </font><b><font style="vertical-align: inherit;">ูุงูุฏุงูุฉ HalLedSet</font></b><font style="vertical-align: inherit;"> ุ ุญูุซ ูุชู ุฅุฑุณุงู ุฑูู LED </font><b><font style="vertical-align: inherit;">ููุถุนู</font></b><font style="vertical-align: inherit;"> . ูู ุงูุฏุงุฎู ุ ูุชู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธููุฉ </font><b><font style="vertical-align: inherit;">HalLedOnOff</font></b><font style="vertical-align: inherit;"> ูุชุดุบูู ูุฅููุงู ุชุดุบูู LED ุ ูุงูุฐู ุจุฏูุฑู ูููุฐ ุฅูุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_TURN_ON_LED2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_TURN_OFF_LED2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_TURN_ON_LED2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_TURN_OFF_LED2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ูุญุฏุงุช ุงููุงูุฑู ุงูููุถุญุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชุชุบูุฑ ูุญุฏุงุช ุงููุงูุฑู ููููุง ูุชูููู ุงูุฃุฌูุฒุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุชู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> HAL_TURN_OFF_LED2() &nbsp; &nbsp; &nbsp; st( LED2_SBIT = LED2_POLARITY (0); )</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> HAL_TURN_ON_LED2()&nbsp; &nbsp; &nbsp; &nbsp; st( LED2_SBIT = LED2_POLARITY (1); )</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนูู ููููุงู ูู ุงูููู ูู ูุฑุงุณูุงุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED2_SBIT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED2_POLARITY</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">&nbsp;&nbsp;<span class="hljs-comment">/* 2 - Red */</span>
&nbsp;&nbsp;<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_BV &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BV(1)</span>
&nbsp;&nbsp;<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_SBIT &nbsp; &nbsp; &nbsp; &nbsp; P1_1</span>
&nbsp;&nbsp;<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_DDR&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P1DIR</span>
&nbsp;&nbsp;<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_POLARITY &nbsp; &nbsp; ACTIVE_HIGH</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุนูู ุฃู LED 2 ููุน ุนูู ุฏุจูุณ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1_1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณุชูู ุงูุชุจุฏูู ูุฑุชูุน. </font><font style="vertical-align: inherit;">ูููู ุ ุจูุงุกู ุนูู ุงูุฑูุฒ ุ ูุฌุจ ุฃู ูุฎุฑุฌ ูุคุดุฑ LED ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ ุ ูููู ูุธู ูุนูุง. </font><font style="vertical-align: inherit;">ุฅุฐุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐุง ุงูููู </font><i><font style="vertical-align: inherit;">hal_board_cfg.h</font></i><font style="vertical-align: inherit;"> ุจุชุบููุฑ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_POLARITY &nbsp; &nbsp; ACTIVE_HIGH</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงู</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_POLARITY &nbsp; &nbsp; ACTIVE_LOW</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูุฎุฑุฌ LED ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ S2 ุ ููุง ูุฌุจ ุฃู ูููู ุญุณุจ ุงูููุทู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุฌู ุนุฏู ุชุบููุฑ ุงููููุงุช ุงูุดุงุฆุนุฉ ุงูุชู ูุง ุชุชุนูู ุจุชุทุจูููุง ุ ูู ุงูุฃูุถู ุฃู ุชูุนู ุฎูุงู ุฐูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ูุณุฎุฉ ูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูู </font><i><font style="vertical-align: inherit;">ูุฌูุฏ</font></i><font style="vertical-align: inherit;"> Z-Stack 3.0.2 \ Components \ hal \ target \ CC2530EB \) ูู ุงููุฌูุฏ ุงููุตุฏุฑ ููู </font><i><font style="vertical-align: inherit;">ุจุชุณููุชู</font></i><font style="vertical-align: inherit;"> ุ ุนูู ุณุจูู ุงููุซุงู ุ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg_DIYRuZRT.h</font></font></i><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุฌุนู ูุณุฎุชูุง ูู ุงูููู ูู ุงููุณุฎุฉ ุงูุฃููู (ูุจุงูุชุงูู ุงุณุชุจุนุงุฏ ุงุชุตุงู ุงูููู ุงููุดุชุฑู). </font><font style="vertical-align: inherit;">ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅูุดุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู </font><i><font style="vertical-align: inherit;">preinclude.h</font></i><font style="vertical-align: inherit;"> ูู ูุฌูุฏ ุงููุตุฏุฑ ุงูุฎุงุต ุจูุง </font><font style="vertical-align: inherit;">ูุงูุชุจ ุงูุณุทุฑ ููุงู:</font></font><br>
</li>
</ul><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"hal_board_cfg_DIYRuZRT.h"</span></span></code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดูุฑ ุฅูู ุฃู ุงุชุตุงู ูุฐุง ุงูููู ูู ุงูุฃูู - ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน:</font></font><br>
</li>
</ul><br>
<pre><code class="cpp hljs">$PROJ_DIR$\..\Source\preinclude.h</code></pre><br>
<img src="https://habrastorage.org/webt/jl/_f/j_/jl_fj_oy71xhwehgszprw9jhdiw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูููููุง ุชุบููุฑ ูุนููุงุช ุงููุนุฏุงุช ูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg_DIYRuZRT.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preinclude.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏูู ุงูุญุงุฌุฉ ุฅูู ุชุญุฑูุฑ ุงููููุงุช ุงููุดุชุฑูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ููุช ุจููู ุชูุฌููุงุช ุงููุชุฑุฌู ุฅูู ููุณ ุงูููู preinclude.h ูุญุฐููุง ูู ุฎูุงุฑุงุช ุงููุชุฑุฌู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SECURE 1</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TC_LINKKEY_JOIN</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NV_INIT</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NV_RESTORE</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xZTOOL_P1</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xMT_TASK</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xMT_APP_FUNC</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xMT_SYS_FUNC</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xMT_ZDO_FUNC</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xMT_ZDO_MGMT</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> xMT_APP_CNF_FUNC</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LEGACY_LCD_DEBUG</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LCD_SUPPORTED DEBUG</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MULTICAST_ENABLED FALSE</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_READ</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_WRITE</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_BASIC</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_IDENTIFY</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_SCENES</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_GROUPS</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ููุณ ุงูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg_DIYRuZRT.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุฏ ูุตู ุฒุฑ S1 </font><i><font style="vertical-align: inherit;">ูุฌููุณุชูู</font></i><font style="vertical-align: inherit;"> ุณูุชุฑ ุจุฑุณ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* S1 */</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PUSH1_BV&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BV(1)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PUSH1_SBIT&nbsp; &nbsp; &nbsp; &nbsp; P0_1</span><font></font>
<font></font>
<span class="hljs-comment">/* Joystick Center Press */</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PUSH2_BV&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BV(0)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PUSH2_SBIT&nbsp; &nbsp; &nbsp; &nbsp; P2_0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PUSH2_POLARITY&nbsp; &nbsp; ACTIVE_HIGH</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุชูุงูู ูุน ุฏุจุงุจูุณ ุงูุฃุฒุฑุงุฑ ุงูููุฌูุฏุฉ ุนูู ุงูููุญุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุธุฑุฉ ุนูู ุชููุฆุฉ ุงูุฃุฌูุฒุฉ - ุงููุงูุฑู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_BOARD_INIT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุณ ุงูููู. </font><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ ูุชู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุฌูู </font><b><font style="vertical-align: inherit;">HAL_BOARD_CC2530EB_REV17</font></b><font style="vertical-align: inherit;"> ุ ูุฐูู ููุธุฑ ุฅูู ุฎูุงุฑ ุงููุงูุฑู ุงูููุงุจู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* ----------- Board Initialization ---------- */</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined (HAL_BOARD_CC2530EB_REV17) &amp;&amp; !defined (HAL_PA_LNA) &amp;&amp; \
    !defined (HAL_PA_LNA_CC2590) &amp;&amp; !defined (HAL_PA_LNA_SE2431L) &amp;&amp; \
    !defined (HAL_PA_LNA_CC2592)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> HAL_BOARD_INIT()                                         \
{                                                                \
  uint16 i;                                                      \
                                                                 \
  SLEEPCMD &amp;= ~OSC_PD;                       <span class="hljs-comment">/* turn on 16MHz RC and 32MHz XOSC */</span>                \
  while (!(SLEEPSTA &amp; XOSC_STB));            <span class="hljs-comment">/* wait for 32MHz XOSC stable */</span>                     \
  asm(<span class="hljs-meta-string">"NOP"</span>);                                <span class="hljs-comment">/* chip bug workaround */</span>                            \
  for (i=0; i&lt;504; i++) asm(<span class="hljs-meta-string">"NOP"</span>);          <span class="hljs-comment">/* Require 63us delay for all revs */</span>                \
  CLKCONCMD = (CLKCONCMD_32MHZ | OSC_32KHZ); <span class="hljs-comment">/* Select 32MHz XOSC and the source for 32K clock */</span> \
  while (CLKCONSTA != (CLKCONCMD_32MHZ | OSC_32KHZ)); <span class="hljs-comment">/* Wait for the change to be effective */</span>   \
  SLEEPCMD |= OSC_PD;                        <span class="hljs-comment">/* turn off 16MHz RC */</span>                              \
                                                                 \
  <span class="hljs-comment">/* Turn on cache prefetch mode */</span>                              \
  PREFETCH_ENABLE();                                             \
                                                                 \
  HAL_TURN_OFF_LED1();                                           \
  LED1_DDR |= LED1_BV;                                           \
  HAL_TURN_OFF_LED2();                                           \
  LED2_DDR |= LED2_BV;                                           \
  HAL_TURN_OFF_LED3();                                           \
  LED3_DDR |= LED3_BV;                                           \
  HAL_TURN_OFF_LED4();                                           \
  LED4_SET_DIR();                                                \
                                                                 \
  <span class="hljs-comment">/* configure tristates */</span>                                      \
  P0INP |= PUSH2_BV;                                             \
}</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ุงููุงูุฑู ูุชู ุชููุฆุฉ ุฃูุถุงุน ุงููุนุงูุฌ ูุณุฌูุงุชู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูุงู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED2_DDR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุบูุฑูุง ุณูุชู ุงุณุชุจุฏุงููุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1DIR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุชุณุฌูู ูุฐุง ุงููููุฐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุฏุจุงุจูุณ ูุถุน ุนูููุฉ ุงูุดุญู (ุงูุฅุฏุฎุงู ุฃู ุงูุฅุฎุฑุงุฌ). ููููุง ูุฐูู ุ </font><font style="vertical-align: inherit;">ูุชู ุถุจุท </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED2_BV</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู 1 ููู ุจุช ูู ุงูุทุฑู ุงููุทุงุจู (ูู ุญุงูุชูุง ุ 1 ุจุช ุ ูุงูุฐู ูุชูุงูู ูุน </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1_1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pin </font><font style="vertical-align: inherit;">): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/ed/0y/qred0ypxdrfxxkaleymbpqmjgto.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ูุตู ุฃูุถุงุน ุงูุชุณุฌูู ูุงููุนุงูุฌ ูู ูุซุงุฆู </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ุฏููู ูุณุชุฎุฏู cc253x".</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูููู ูุง ูููู ุฑุคูุฉ ููููุฉ ุชูููู ุงูุฃุฒุฑุงุฑ ูู ุฃู ููุงู. ุชุชู ูุนุงูุฌุฉ ุงูุฃุฒุฑุงุฑ ุจุดูู ูุดุงุจู ุ ูููู ูู ููู ุขุฎุฑ - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_key.c</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุญุฏุฏ ูุนููุงุช ุงูุฃุฒุฑุงุฑ ูุงููุธุงุฆู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HalKeyInit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HalKeyConfig</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HalKeyRead</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HalKeyPoll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฐู ุงููุธุงุฆู ูุณุคููุฉ ุนู ุชููุฆุฉ ุงููุธุงู ุงููุฑุนู ููุนูู ูุน ุงูุฃุฒุฑุงุฑ ูููู ุงููุฑุงุกุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุชูููุฐ ูุนุงูุฌุฉ ุงูุฒุฑ ุนูู ุฌูุงุฒ ุถุจุท ุงูููุช ูู 100 ูููู ุซุงููุฉ. </font><font style="vertical-align: inherit;">ูุชู ุชุนููู ุฏุจูุณ P2_0 ููุชูููู ุงูุญุงูู ุฅูู ุฐุฑุงุน ุงูุชุญูู ููุชู ูุฑุงุกุฉ ุญุงูุชู ุงูุญุงููุฉ ุจููุฑุฉ - ูุจุงูุชุงูู ุ ูุจุฏุฃ ูููุช ูููุถ LED.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. ูููู ุจุชูููู ุงูุฌูุงุฒ ูุฃููุณูุง</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุบููุฑ ูู ุงูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zcl_DIYRuZRT.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIYRuZRT_ENDPOINT ูู 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSAL_DIYRuZRT_data.c</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIYRuZRT_DEVICE_VERSION ูู 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_ManufacturerName ุนูู {6ุ 'D'ุ 'I'ุ 'Y'ุ 'R'ุ 'u'ุ 'Z'}</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_ModelId ูู {9ุ 'D'ุ 'I'ุ 'Y'ุ 'R'ุ 'u'ุ 'Z'ุ '_'ุ 'R'ุ 'T'}</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_DateCode ุนูู {8ุ '2'ุ '0'ุ '2'ุ '0'ุ '0'ุ '4'ุ '0'ุ '5'}</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุชููู ุงูุฌูุงุฒ ูู ุงูุงุชุตุงู ุจุงูุดุจูุฉ ุนูู ุฃู ููุงุฉ (ููุท 11 ุงูุชุฑุงุถููุง ุ ูุญุฏุฏ ูู ุชูุฌูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEFAULT_CHANLIST</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู Tools \ f8wConfig.cfg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุ ูุฌุจ ุนููู ุชุญุฏูุฏ ูุฐู ุงูููุฒุฉ ูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preinclude.h ุนู ุทุฑูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ูููุฉ ุงูุชูุฌูู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุถูู ุฃูุถูุง ุชูุฌูู </font><font style="vertical-align: inherit;">ุงูุชุฑุฌูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DISABLE_GREENPOWER_BASIC_PROXY</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุซ ูุง ูุชู ุฅูุดุงุก ููุทุฉ ููุงูุฉ GREENPOWER ูุฌูุงุฒูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃูุถูุง ุจุฅููุงู ุชุดุบูู ุงูุฏุนู ุบูุฑ ุงูุถุฑูุฑู ูุดุงุดุฉ LCD.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//#define LCD_SUPPORTED DEBUG</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DISABLE_GREENPOWER_BASIC_PROXY</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEFAULT_CHANLIST 0x07FFF800&nbsp; <span class="hljs-comment">// ALL Channels</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุญุงูู ุฌูุงุฒูุง ุงูุงุชุตุงู ุจุงูุดุจูุฉ ุชููุงุฆููุง ุ ุณูุถูู ุงูุงุชุตุงู ุจุงูุดุจูุฉ ูู ุฑูุฒ ุงููุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_Init</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs">bdb_StartCommissioning(BDB_COMMISSIONING_MODE_NWK_STEERING |<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BDB_COMMISSIONING_MODE_FINDING_BINDING);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูู ุจุชูููุฐ Build ุ ูุงููุฃ ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ูู ุงูุดุฑูุญุฉ ูุงุจุฏุฃ ูู ุงูุงูุชุฑุงู ุจุงูููุณู. </font><font style="vertical-align: inherit;">ุฃุชุญูู ูู ุชุดุบูู ุดุจูุฉ Zigbee ูู ioBroker.zigbee ุ ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุจุฏู ุจูุง ุงูุฌูุงุฒ ุงููุชุตู ุงูุฌุฏูุฏ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/ik/ss/umikss4n4f19icobraxj-rb_tj4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑุงุฆุน ุ ุงุชุถุญ ุฃู ุชูุตูู ุงูุฌูุงุฒ!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. ูุญู ูุนูุฏ ุชุดุบูู ุงูุฌูุงุฒ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนูุง ูุญุงูู ุชูููู ุงููุธููุฉ ููููุงู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชู ุนูููุฉ ุชูุตูู ุงูุฌูุงุฒ ุจุงูุดุจูุฉ ุจุงูุถุบุท ููุชุฑุฉ ุทูููุฉ ุนูู ุงูุฒุฑ.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฌูุงุฒ ูุชุตูุงู ุจุงูุดุจูุฉ ุจุงููุนู ุ ูุฅู ุงูุถุบุท ุนููู ููุชุฑุฉ ุทูููุฉ ูุนุฑุถู ูู ุงูุดุจูุฉ.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุถุบุท ุงููุตูุฑ - ูุจุฏู ุญุงูุฉ LED.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุงูุญูุงุธ ุนูู ุญุงูุฉ LED ุนูุฏ ุจุฏุก ุชุดุบูู ุงูุฌูุงุฒ ุจุนุฏ ุงููุทุงุน ุงูุชูุงุฑ ุงูููุฑุจุงุฆู.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฅุนุฏุงุฏ ูุนุงูุฌุฉ ุงูุฃุฒุฑุงุฑ ุงูุฎุงุตุฉ ุจู ุ ููุช ุจุฅูุดุงุก ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIYRuZRT_HalKeyInit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุดุงุจูุฉ ูุชูู ุงูููุฌูุฏุฉ ูู ูุญุฏุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_key.c</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ุญุตุฑููุง ููุฌููุนุฉ ุงูุฃุฒุฑุงุฑ ุงูุฎุงุตุฉ ุจู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//    ()</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DIYRuZRT_HalKeyInit</span><span class="hljs-params">( <span class="hljs-keyword">void</span> )</span>
</span>{
  <span class="hljs-comment">/*      0 */</span>
  halKeySavedKeys = <span class="hljs-number">0</span>;<font></font>
<font></font>
  PUSH1_SEL &amp;= ~(PUSH1_BV); <span class="hljs-comment">/*    - GPIO */</span>
  PUSH1_DIR &amp;= ~(PUSH1_BV); <span class="hljs-comment">/*    -  */</span><font></font>
  <font></font>
  PUSH1_ICTL &amp;= ~(PUSH1_ICTLBIT); <span class="hljs-comment">/*      */</span>
  PUSH1_IEN &amp;= ~(PUSH1_IENBIT);   <span class="hljs-comment">/*     */</span><font></font>
  <font></font>
  PUSH2_SEL &amp;= ~(PUSH2_BV); <span class="hljs-comment">/* Set pin function to GPIO */</span>
  PUSH2_DIR &amp;= ~(PUSH2_BV); <span class="hljs-comment">/* Set pin direction to Input */</span><font></font>
  <font></font>
  PUSH2_ICTL &amp;= ~(PUSH2_ICTLBIT); <span class="hljs-comment">/* don't generate interrupt */</span>
  PUSH2_IEN &amp;= ~(PUSH2_IENBIT);   <span class="hljs-comment">/* Clear interrupt enable bit */</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุช ุฅุถุงูุฉ ุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ุฅูู </font><font style="vertical-align: inherit;">ููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_BOARD_INIT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุงูุฑู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg_DIYRuZRT.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุชุฌูุจ ุงูุชุนุงุฑุถ ุ ูู ุจุชุนุทูู hal_key ุงููุฏูุฌ ูู ููุณ ุงูููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg_DIYRuZRT.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> HAL_KEY FALSE</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงู </font><font style="vertical-align: inherit;">ุชู ุชุนุทูู ูุงุฑุฆ ุงูุฃุฒุฑุงุฑ ุงูููุงุณู ุ ูุณูู ูููู ุจุฐูู ุจุฃููุณูุง. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุธููุฉ ุงูุชููุฆุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_Init</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><font style="vertical-align: inherit;">ูุจุฏุฃ ุงููุคูุช ููุฑุงุกุฉ ุญุงูุงุช ุงูุฃุฒุฑุงุฑ. </font><font style="vertical-align: inherit;">ุณูููู ุงููุคูุช ุจุฅูุดุงุก ุญุฏุซ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_KEY_EVENT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs">osal_start_reload_timer( zclDIYRuZRT_TaskID, HAL_KEY_EVENT, <span class="hljs-number">100</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุญููุฉ ุงูุญุฏุซ ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชุนุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ุญุฏุซ </font><b><font style="vertical-align: inherit;">HAL_KEY_EVENT ุนู ุทุฑูู</font></b><font style="vertical-align: inherit;"> ุงุณุชุฏุนุงุก ุฏุงูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DIYRuZRT_HalKeyPoll</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//  </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DIYRuZRT_HalKeyPoll</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
  uint8 keys = <span class="hljs-number">0</span>;<font></font>
<font></font>
  <span class="hljs-comment">//   1 ?</span>
  <span class="hljs-keyword">if</span> (HAL_PUSH_BUTTON1())<font></font>
  {<font></font>
    keys |= HAL_KEY_SW_1;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-comment">//   2 ?</span>
  <span class="hljs-keyword">if</span> (HAL_PUSH_BUTTON2())<font></font>
  {<font></font>
    keys |= HAL_KEY_SW_2;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">if</span> (keys == halKeySavedKeys)<font></font>
  {<font></font>
    <span class="hljs-comment">//  -  </span>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  <span class="hljs-comment">//        . </span><font></font>
  halKeySavedKeys = keys;<font></font>
<font></font>
  <span class="hljs-comment">//     </span><font></font>
  OnBoard_SendKeys(keys, HAL_KEY_STATE_NORMAL);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุญ ููุง </font><font style="vertical-align: inherit;">
ุญูุธ ุญุงูุฉ ุงูุฃุฒุฑุงุฑ ูู ูุชุบูุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halKeySavedKeys</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุชุญุฏูุฏ ูุญุธุฉ ุงูุชุบููุฑ - ุงูุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ </font><b><font style="vertical-align: inherit;">ูุชุญุฑูุฑูุง</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุงูููุฑ ุนูู ุงูุฒุฑ ุ ุงุจุฏุฃ ุชุดุบูู ุงููุคูุช ููุฏุฉ 5 ุซูุงูู. </font><font style="vertical-align: inherit;">ุฅุฐุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทูุฆ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ุงููุคูุช ุ ูุณูุชู ุฅูุดุงุก ุญุฏุซ </font><b><font style="vertical-align: inherit;">DIYRuZRT_EVT_LONG</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชุญุฑูุฑ ุงูุฒุฑ ุ ุชุชู ุฅุนุงุฏุฉ ุถุจุท ุงููุคูุช. </font><font style="vertical-align: inherit;">ุนูู ุฃู ุญุงู ุ ุฅุฐุง ููุช ุจุงูุถุบุท ุนูู ุงูุฒุฑ ุ ูููู ุจุชุจุฏูู ุญุงูุฉ LED.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">zclDIYRuZRT_HandleKeys</span><span class="hljs-params">( byte shift, byte keys )</span>
</span>{
  <span class="hljs-keyword">if</span> ( keys &amp; HAL_KEY_SW_1 )<font></font>
  {<font></font>
    <span class="hljs-comment">//       - 5 </span>
    osal_start_timerEx(zclDIYRuZRT_TaskID, DIYRuZRT_EVT_LONG, <span class="hljs-number">5000</span>);
    <span class="hljs-comment">//  </span>
    updateRelay(RELAY_STATE == <span class="hljs-number">0</span>);<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    <span class="hljs-comment">//     </span><font></font>
    osal_stop_timerEx(zclDIYRuZRT_TaskID, DIYRuZRT_EVT_LONG);<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุ ุนูุฏ ูุนุงูุฌุฉ ุญุฏุซ ูุทูู ุ ููุชุจู ุฅูู ุงูุญุงูุฉ ุงูุญุงููุฉ ููุดุจูุฉ ูู ุฎูุงู ุณูุฉ ุงูุจููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bdbAttributes.bdbNodeIsOnANetwork</font></font></b><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-comment">//  DIYRuZRT_EVT_LONG</span>
  <span class="hljs-keyword">if</span> ( events &amp; DIYRuZRT_EVT_LONG )<font></font>
  {<font></font>
    <span class="hljs-comment">//    </span>
    <span class="hljs-comment">//      ?</span>
    <span class="hljs-keyword">if</span> ( bdbAttributes.bdbNodeIsOnANetwork )<font></font>
    {<font></font>
      <span class="hljs-comment">//  </span><font></font>
      zclDIYRuZRT_LeaveNetwork();<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span> <font></font>
    {<font></font>
      <span class="hljs-comment">//    </span><font></font>
      bdb_StartCommissioning(<font></font>
        BDB_COMMISSIONING_MODE_NWK_FORMATION | <font></font>
        BDB_COMMISSIONING_MODE_NWK_STEERING | <font></font>
        BDB_COMMISSIONING_MODE_FINDING_BINDING | <font></font>
        BDB_COMMISSIONING_MODE_INITIATOR_TL<font></font>
      );<font></font>
      <span class="hljs-comment">//  ,   </span>
      osal_start_timerEx(zclDIYRuZRT_TaskID, DIYRuZRT_EVT_BLINK, <span class="hljs-number">500</span>);<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">return</span> ( events ^ DIYRuZRT_EVT_LONG );<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูุจ ุฃุจุนุฏ ูู ุฐูู. </font><font style="vertical-align: inherit;">ุณูุชู ุญูุธ ุญุงูุฉ LED ูู ูุชุบูุฑ ุ ูุงูุฐู ุณูุญูุธ ูููุชู ูู ุฐุงูุฑุฉ NV. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุจุฏุฃ ุงูุฌูุงุฒ ุ ุณููุฑุฃ ุงููููุฉ ูู ุงูุฐุงูุฑุฉ ุฅูู ูุชุบูุฑ.</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-comment">//  NVM   RELAY STATE</span>
  <span class="hljs-keyword">if</span> ( SUCCESS == osal_nv_item_init( NV_DIYRuZRT_RELAY_STATE_ID, <span class="hljs-number">1</span>, &amp;RELAY_STATE ) ) {
    <span class="hljs-comment">//   RELAY STATE  </span>
    osal_nv_read( NV_DIYRuZRT_RELAY_STATE_ID, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, &amp;RELAY_STATE );<font></font>
  }<font></font>
  <span class="hljs-comment">//   </span><font></font>
  applyRelay();<font></font>
</code></pre><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">updateRelay</span> <span class="hljs-params">( <span class="hljs-keyword">bool</span> value )</span>
</span>{
  <span class="hljs-keyword">if</span> (value) {<font></font>
    RELAY_STATE = <span class="hljs-number">1</span>;<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    RELAY_STATE = <span class="hljs-number">0</span>;<font></font>
  }<font></font>
  <span class="hljs-comment">//   </span>
  osal_nv_write(NV_DIYRuZRT_RELAY_STATE_ID, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, &amp;RELAY_STATE);
  <span class="hljs-comment">//   </span><font></font>
  applyRelay();<font></font>
}<font></font>
  <font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">applyRelay</span> <span class="hljs-params">( <span class="hljs-keyword">void</span> )</span>
</span>{
  <span class="hljs-comment">//  </span>
  <span class="hljs-keyword">if</span> (RELAY_STATE == <span class="hljs-number">0</span>) {
    <span class="hljs-comment">//    1</span><font></font>
    HalLedSet ( HAL_LED_1, HAL_LED_MODE_OFF );<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">//    1</span><font></font>
    HalLedSet ( HAL_LED_1, HAL_LED_MODE_ON );<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. ุงูุขู ุณูุชุนุงูู ูุน ุฒูุฌุจู</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุชู ุงูุขู ุ ูููุง ุจูุฑุฒ ุงูุฃุฌูุฒุฉ - ุจุงุณุชุฎุฏุงู ุงูุฒุฑ ุงูุฐู ูุชุญูู ูู LED. </font><font style="vertical-align: inherit;">ุงูุขู ูููู ุจุชูููุฐ ููุณ ุงูุดูุก ูู ุฎูุงู Zigbee. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุญูู ูู ุงูุชุชุงุจุน ุ ูููู ููุง ุงุณุชุฎุฏุงู ููุทุฉ ุงูููุงูุฉ ุงููุญูุฏุฉ ูุชูููุฐ ูุฌููุนุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenOnOff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฑุฃูุง ููุงุตูุงุช ููุชุจุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zigbee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cluster Library ููุฌููุนุฉ </font><b><font style="vertical-align: inherit;">GenOnOff</font></b><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zo/9z/z7/zo9zz7ccj2oyfyrxrk3mithxh0i.png"><br>
<br>
<img src="https://habrastorage.org/webt/7b/na/ek/7bnaekoi4gmleiisjwvbfw75hao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชูููุฐ ุงูุณูุฉ OnOff ูุงูุฃูุงูุฑ On ู Off ู Toggle. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุฃุถู ุงูุชูุฌูู ุฅูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preinclude.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_ON_OFF</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุตู ุณูุงุชูุง zclDIYRuZRT_Attrs ูุถูู ุณูุงุช ุงููุชูุฉ ุงูุฌุฏูุฏุฉ:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-comment">// ***  On/Off  ***</span><font></font>
  {<font></font>
    ZCL_CLUSTER_ID_GEN_ON_OFF,<font></font>
    { <span class="hljs-comment">// </span><font></font>
      ATTRID_ON_OFF,<font></font>
      ZCL_DATATYPE_BOOLEAN,<font></font>
      ACCESS_CONTROL_READ,<font></font>
      (<span class="hljs-keyword">void</span> *)&amp;RELAY_STATE<font></font>
    }<font></font>
  },<font></font>
  {<font></font>
    ZCL_CLUSTER_ID_GEN_ON_OFF,<font></font>
    {  <span class="hljs-comment">//  On/Off </span><font></font>
      ATTRID_CLUSTER_REVISION,<font></font>
      ZCL_DATATYPE_UINT16,<font></font>
      ACCESS_CONTROL_READ | ACCESS_CLIENT,<font></font>
      (<span class="hljs-keyword">void</span> *)&amp;zclDIYRuZRT_clusterRevision_all<font></font>
    }<font></font>
  },<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุถูู ุงููุฌููุนุฉ ุฅูู ูุงุฆูุฉ ูุฌููุนุงุช ููุงุท ุงูููุงูุฉ ุงููุงุฑุฏุฉ ุงููุฏุนููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_InClusterList</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูููุฐ ุฃูุงูุฑ ุงูุชุญูู ุ ุฃุถู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌูุง ุฅูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฌุฏูู </font><b><font style="vertical-align: inherit;">zclDIYRuZRT_CmdCallbacks</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/*********************************************************************
 *    ZCL 
 */</span>
<span class="hljs-keyword">static</span> zclGeneral_AppCallbacks_t zclDIYRuZRT_CmdCallbacks =<font></font>
{<font></font>
  zclDIYRuZRT_BasicResetCB,               <span class="hljs-comment">// Basic Cluster Reset command</span>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// Identify Trigger Effect command</span>
  zclDIYRuZRT_OnOffCB,                    <span class="hljs-comment">// On/Off cluster commands</span>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// On/Off cluster enhanced command Off with Effect</span>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// On/Off cluster enhanced command On with Recall Global Scene</span>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// On/Off cluster enhanced command On with Timed Off</span><font></font>
#ifdef ZCL_LEVEL_CTRL<font></font>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// Level Control Move to Level command</span>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// Level Control Move command</span>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// Level Control Step command</span>
  <span class="hljs-literal">NULL</span>,                                   <span class="hljs-comment">// Level Control Stop command</span><font></font>
#endif<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุฐูุง:</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//    OnOff</span>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">zclDIYRuZRT_OnOffCB</span><span class="hljs-params">(uint8 cmd)</span>
</span>{
  <span class="hljs-comment">//  ,   </span>
  <span class="hljs-comment">//    </span><font></font>
  afIncomingMSGPacket_t *pPtr = zcl_getRawAFMsg();<font></font>
  zclDIYRuZRT_DstAddr.addr.shortAddr = pPtr-&gt;srcAddr.addr.shortAddr;<font></font>
  <font></font>
  <span class="hljs-comment">// </span>
  <span class="hljs-keyword">if</span> (cmd == COMMAND_ON) {<font></font>
    updateRelay(TRUE);<font></font>
  }<font></font>
  <span class="hljs-comment">// </span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd == COMMAND_OFF) {<font></font>
    updateRelay(FALSE);<font></font>
  }<font></font>
  <span class="hljs-comment">// </span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmd == COMMAND_TOGGLE) {<font></font>
    updateRelay(RELAY_STATE == <span class="hljs-number">0</span>);<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑุงุฆุน ุ ุงูุขู ูููู ุชุจุฏูู ุงูุชุชุงุจุน ุจุงูุฃูุงูุฑ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/_b/r5/rg_br5mwpw1z8g63trgcdts2o84.png"><br>
<br>
<img src="https://habrastorage.org/webt/sc/s8/-h/scs8-heldl3hz6l7h4ia3jllscw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุฐุง ูุง ูููู. </font><font style="vertical-align: inherit;">ุงูุขู ูุฌุจ ุนูููุง ุฃูุถูุง ุฅุจูุงุบ ุงูููุณู ุนู ุงูุญุงูุฉ ุงูุญุงููุฉ ููุตุจุงุญ LED ุ ุฅุฐุง ูููุง ุจุชุจุฏููู ุจุงุณุชุฎุฏุงู ุงูุฒุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฉ ุฃุฎุฑู ุ ุฃุถู ุงูุชูุฌูู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ZCL_REPORTING_DEVICE</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูู ุจุฅูุดุงุก ุฏุงูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_ReportOnOff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชู ุชุฑุณู ุฑุณุงูุฉ ุญุงูุฉ. </font><font style="vertical-align: inherit;">ุณูู ูุทูู ุนููู ุนูุฏูุง ูุชู ุชุจุฏูู LED ูุนูุฏูุง ูุจุฏุฃ ุงูุฌูุงุฒ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//    </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">zclDIYRuZRT_ReportOnOff</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{
  <span class="hljs-keyword">const</span> uint8 NUM_ATTRIBUTES = <span class="hljs-number">1</span>;<font></font>
<font></font>
  zclReportCmd_t *pReportCmd;<font></font>
<font></font>
  pReportCmd = osal_mem_alloc(<span class="hljs-keyword">sizeof</span>(zclReportCmd_t) +<font></font>
                              (NUM_ATTRIBUTES * <span class="hljs-keyword">sizeof</span>(zclReport_t)));
  <span class="hljs-keyword">if</span> (pReportCmd != <span class="hljs-literal">NULL</span>) {<font></font>
    pReportCmd-&gt;numAttr = NUM_ATTRIBUTES;<font></font>
<font></font>
    pReportCmd-&gt;attrList[<span class="hljs-number">0</span>].attrID = ATTRID_ON_OFF;<font></font>
    pReportCmd-&gt;attrList[<span class="hljs-number">0</span>].dataType = ZCL_DATATYPE_BOOLEAN;<font></font>
    pReportCmd-&gt;attrList[<span class="hljs-number">0</span>].attrData = (<span class="hljs-keyword">void</span> *)(&amp;RELAY_STATE);<font></font>
<font></font>
    zclDIYRuZRT_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;<font></font>
    zclDIYRuZRT_DstAddr.addr.shortAddr = <span class="hljs-number">0</span>;<font></font>
    zclDIYRuZRT_DstAddr.endPoint = <span class="hljs-number">1</span>;<font></font>
<font></font>
    zcl_SendReportCmd(DIYRuZRT_ENDPOINT, &amp;zclDIYRuZRT_DstAddr,<font></font>
                      ZCL_CLUSTER_ID_GEN_ON_OFF, pReportCmd,<font></font>
                      ZCL_FRAME_CLIENT_SERVER_DIR, <span class="hljs-literal">false</span>, SeqNum++);<font></font>
  }<font></font>
<font></font>
  osal_mem_free(pReportCmd);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูู ุงูุณุฌูุงุช ูุฑู ุฑุณุงุฆู ุญูู ุชุบููุฑ ูู ุญุงูุฉ LED.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9. ูู ุจุชูุตูู ูุณุชุดุนุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ds18b20</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุณุชุดุนุฑ ูุชุตู ุจุฃู ุฏุจูุณ ูุฌุงูู (ูู ุญุงูุชู ุ ุงุถุจุท </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P2_1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุถู ุฑูุฒ ุงูุชุฑุงุน ุงููุณุชุดุนุฑ ุฅูู ุงูุชุทุจูู. ุณูุฌุฑู ููุงุจูุงุช ููุชุธูุฉ - ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฏูููุฉ. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฑ ุงูุงุณุชุทูุงุน ุ ุณููุนููู ููุณู ุงูุดุจูุฉ ุจุงููููุฉ ุงูุญุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฑุฃ ููุงุตูุงุช ZCL ูุฅุฑุณุงู ุงูุจูุงูุงุช ูู ูุณุชุดุนุฑุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. ูุญุชุงุฌ ุฅูู </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุณ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุชูุฉ </font><b><font style="vertical-align: inherit;">.</font></b></font><br>
<br>
<img src="https://habrastorage.org/webt/o2/_q/8h/o2_q8h7gtgxs7cjvvz8dumonsgq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุฑู ุฃููุง ุจุญุงุฌุฉ ุฅูู ุชูููุฐ 3 ุณูุงุช ุ ุชูุซู ุฅุญุฏุงูุง ูููุฉ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุถุฑูุจุฉ ูู 100. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ูุถูู ุงูุณูุงุช ุนู ุทุฑูู ุงูููุงุณ ูุน ูุฌููุนุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenOnOff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุณูุชู ุฅุจูุงุบ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญุฏุซ </font><b><font style="vertical-align: inherit;">DIYRuZRT_REPORTING_EVT</font></b><font style="vertical-align: inherit;"> ุ ูุงูุฐู ูุฎุทุท ูู ูู ุงูุจุฏุงูุฉ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุฏูููุฉ. ูู ูุนุงูุฌ ุงูุญุฏุซ ุ ุณูุชุตู</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zclDIYRuZRT_ReportTemp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุชู ุณุชูุฑุฃ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงููุณุชุดุนุฑ ูุชุฑุณู ุฑุณุงูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">zclDIYRuZRT_ReportTemp</span><span class="hljs-params">( <span class="hljs-keyword">void</span> )</span>
</span>{
  <span class="hljs-comment">//  </span><font></font>
  zclDIYRuZRT_MeasuredValue = readTemperature();<font></font>
  <font></font>
  <span class="hljs-keyword">const</span> uint8 NUM_ATTRIBUTES = <span class="hljs-number">1</span>;<font></font>
<font></font>
  zclReportCmd_t *pReportCmd;<font></font>
<font></font>
  pReportCmd = osal_mem_alloc(<span class="hljs-keyword">sizeof</span>(zclReportCmd_t) +<font></font>
                              (NUM_ATTRIBUTES * <span class="hljs-keyword">sizeof</span>(zclReport_t)));
  <span class="hljs-keyword">if</span> (pReportCmd != <span class="hljs-literal">NULL</span>) {<font></font>
    pReportCmd-&gt;numAttr = NUM_ATTRIBUTES;<font></font>
<font></font>
    pReportCmd-&gt;attrList[<span class="hljs-number">0</span>].attrID = ATTRID_MS_TEMPERATURE_MEASURED_VALUE;<font></font>
    pReportCmd-&gt;attrList[<span class="hljs-number">0</span>].dataType = ZCL_DATATYPE_INT16;<font></font>
    pReportCmd-&gt;attrList[<span class="hljs-number">0</span>].attrData = (<span class="hljs-keyword">void</span> *)(&amp;zclDIYRuZRT_MeasuredValue);<font></font>
<font></font>
    zclDIYRuZRT_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;<font></font>
    zclDIYRuZRT_DstAddr.addr.shortAddr = <span class="hljs-number">0</span>;<font></font>
    zclDIYRuZRT_DstAddr.endPoint = <span class="hljs-number">1</span>;<font></font>
<font></font>
    zcl_SendReportCmd(DIYRuZRT_ENDPOINT, &amp;zclDIYRuZRT_DstAddr,<font></font>
                      ZCL_CLUSTER_ID_MS_TEMPERATURE_MEASUREMENT, pReportCmd,<font></font>
                      ZCL_FRAME_CLIENT_SERVER_DIR, <span class="hljs-literal">false</span>, SeqNum++);<font></font>
  }<font></font>
<font></font>
  osal_mem_free(pReportCmd);<font></font>
}<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10. ุตุจ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูู ุงูุฌูุงุฒ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุบููุฑ devboard ุฅูู Sonoff BASICZBR3 ุ ุชุญุชุงุฌ ุฅูู ุถุจุท ูุทุงุจูุฉ ุฏุจุงุจูุณ ูุฃุฒุฑุงุฑ LED. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eg/fu/we/egfuweya8lj53yh-5rarbvslzvk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุนุงุฏุฉ LED 1 ุนูู ุฑูู ุงูุชุนุฑูู ุงูุดุฎุตู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0_7</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุญูู ูู ุงูุชุชุงุจุน. ุงูุชุถููู ูุชู ุจูุงุณุทุฉ ูุณุชูู ุนุงูู ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACTIVE_HIGH</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">ูุนูุฏ ุชุนููู</font></b><font style="vertical-align: inherit;"> ุฒุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุงูุฏุจูุณ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1_3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ู LED ุงููุนูููุงุช 2 ุนูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1_0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุชุฑู ุฌูุงุฒ ุงุณุชุดุนุงุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุนูู ุฏุจูุณ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P2_1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฌุฑู ูู ูุฐู ุงูุชุบููุฑุงุช ูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hal_board_cfg_DIYRuZRT.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุชุญุฏูุฏ ุชูููู ุ ุณูููู ุจุนูู ุชูุฌูู ูููุตู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL_SONOFF</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฅุฐุง ุชู ุชุนูููู ุ ูุณูุชู ุงุณุชุฎุฏุงู ุฅุนุฏุงุฏุงุช Sonoff BASICZBR3 ุ ูุฅูุง ู devboard.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> HAL_SONOFF</span>
  <span class="hljs-comment">/* 1 - P0_7  */</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_BV           BV(7)</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_SBIT         P0_7</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_DDR          P0DIR</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_POLARITY     ACTIVE_HIGH</span><font></font>
<font></font>
  <span class="hljs-comment">/* 2 - P1_0  */</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_BV           BV(0)</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_SBIT         P1_0</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_DDR          P1DIR</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_POLARITY     ACTIVE_LOW</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
  <span class="hljs-comment">/* 1 - P1_0  */</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_BV           BV(0)</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_SBIT         P1_0</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_DDR          P1DIR</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED1_POLARITY     ACTIVE_LOW</span><font></font>
<font></font>
  <span class="hljs-comment">/* 2 - P1_1  */</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_BV           BV(1)</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_SBIT         P1_1</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_DDR          P1DIR</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED2_POLARITY     ACTIVE_LOW</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงู ูุง ุจุฏ ูู ุชุตุญูุญ ูุนููุฉ ูููุฉ ุฃุฎุฑู - ูุฌูุฏ ููุงุฑุชุฒ "ุณุงุนุฉ" ุ ูุฃู </font><font style="vertical-align: inherit;">ุนูู ููุญุฉ Sonoff BASICZBR3 ูุง ูุชู ูุญุงููุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//#define HAL_CLOCK_CRYSTAL</span>
  <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OSC32K_CRYSTAL_INSTALLED FALSE</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูู ูุฐู ุงูุฎูุงุฑุงุช ุ ูุง ูุจุฏุฃ ุงูุจุฑูุงูุฌ ุงูุซุงุจุช (ุฃู ุจุงูุฃุญุฑู ุ ููุณ ุฏุงุฆููุง). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุฌูุน ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ููุชุตู ุจุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ.</font></font><br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจุงู!!! </font><font style="vertical-align: inherit;">ุงูุตู ูุฑุญู Sonoff BASICZBR3 ุนู ุทุงูุฉ ุงูุชูุงุฑ ุงููุชุฑุฏุฏ ูุจู ุฃู ุงุชุตุงู ูุจุฑุงูุฌ ุซุงุจุชุฉ!</font></font></b></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชูุตูู ุฃุณูุงู Sonoff BASICZBR3 ุจุงุณุชุฎุฏุงู CCDebugger ุ ูููุญู ุงูุดุฑูุญุฉ ููููุถ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ุงูุฎุงุตุฉ ุจูุง.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bz/w-/3b/bzw-3bib84ucfczt0kg_mmbajtw.jpeg"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11. ูุจุฏุฃ ุงูุฌูุงุฒ ูู zigbee2mqtt ู ioBroker.Zigbee</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ุธููุฑ ุงูุฌูุงุฒ ูู ูุงุฆูุฉ ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ ููููููุง ุฅุฏุงุฑุชู ุนู ุทุฑูู ุฅุฑุณุงู ุงูุฃูุงูุฑ ุ ูููููุง ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฐูู ุจุดูู ุตุญูุญ - ูุน ุงูุตูุฑ ูุงูุญุงูุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญุตูู ุนูู ุฌูุงุฒ ุฌุฏูุฏ ูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ioBroker.Zigbee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุชุญุชุงุฌ ุฅูู ุชูููุฐ ุฎุทูุชูู:</font></font><br>
<br>
<ol>
<li>     <b>zigbee-herdsman-converters</b>.       ,       <b>zigbee2mqtt</b>.<br>
</li>
<li>    <b>ioBroker.Zigbee</b><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฅุฌุฑุงุก ุฌููุน ุงูุชุบููุฑุงุช ุฃููุงู ูู ุงููููุงุช ุงููุญููุฉ ุ ุซู ุฅุฌุฑุงุก ุงูุนูุงูุงุช ุงูุนุงูุฉ ูู ุงููุณุชูุฏุนุงุช ุงูููุงุจูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุฏ ูููุน ุญุฒูุฉ </font><font style="vertical-align: inherit;">Zigbee-herdsman </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-converters</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ioBroker ุงููุซุจุช (ุฃู zigbee2mqtt). ุฏุงุฎู ุงูุญุฒูุฉ ูุฌุฏ ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devices.js </font></font></i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Koenkk/zigbee-herdsman-converters/blob/master/devices.js</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุญุชูู ูุฐุง ุงูููู ุนูู ุฃูุตุงู ูุฌููุน ุงูุฃุฌูุฒุฉ ุงูุชู ูููู ุฃู ูุนูู </font><b><font style="vertical-align: inherit;">ูุนูุง </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ioBroker.zigbee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zigbee2mqtt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฌุฏ ููู ูุฌููุนุฉ ูู ุฃูุตุงู ุฃุฌูุฒุฉ DIYRuZ (ุจุนุฏ 2300 ุณุทุฑ). ุฃุถู ูุตููุง ููุฌูุงุฒ ุงูุฌุฏูุฏ ุฅูู ูุฐู ุงููุชูุฉ:</font></font><br>
<br>
<pre><code class="javascript hljs">&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">zigbeeModel</span>: [<span class="hljs-string">'DIYRuZ_RT'</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">model</span>: <span class="hljs-string">'DIYRuZ_RT'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">vendor</span>: <span class="hljs-string">'DIYRuZ'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">description</span>: <span class="hljs-string">''</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">supports</span>: <span class="hljs-string">'on/off, temperature'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">fromZigbee</span>: [fz.on_off, fz.temperature],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">toZigbee</span>: [tz.on_off],<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;},<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุณูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fromZigbee ุ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุฏุฏ ุงููุญููุงุช ุงูุชู </font><b><font style="vertical-align: inherit;">ุณุชุนุงูุฌ</font></b><font style="vertical-align: inherit;"> ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ูู ุงูุฌูุงุฒ. ูุชู ุชูุญูุฏ ูุธููุชูู ูุฏููุง. ูููู ูุญูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fz.on_off</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุนุงูุฌุฉ ุฑุณุงูุฉ ุงูุชุดุบูู / ุงูุฅููุงู ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนุงูุฌ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุจูุงูุงุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. ููุถุญ ุฑูุฒ ูุฐู ุงููุญููุงุช (ุงูููุฌูุฏ ูู ูุญููุงุช ุงููููุงุช / fromZigbee.js) ููููุฉ ูุนุงูุฌุฉ ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ูุฃู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ููุณููุฉ ุนูู 100.</font></font><br>
<br>
<pre><code class="javascript hljs">   on_off: {
        <span class="hljs-attr">cluster</span>: <span class="hljs-string">'genOnOff'</span>,
        <span class="hljs-attr">type</span>: [<span class="hljs-string">'attributeReport'</span>, <span class="hljs-string">'readResponse'</span>],
        <span class="hljs-attr">convert</span>: <span class="hljs-function">(<span class="hljs-params">model, msg, publish, options, meta</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (msg.data.hasOwnProperty(<span class="hljs-string">'onOff'</span>)) {
                <span class="hljs-keyword">const</span> property = getProperty(<span class="hljs-string">'state'</span>, msg, model);
                <span class="hljs-keyword">return</span> {[property]: msg.data[<span class="hljs-string">'onOff'</span>] === <span class="hljs-number">1</span> ? <span class="hljs-string">'ON'</span> : <span class="hljs-string">'OFF'</span>};<font></font>
            }<font></font>
        },<font></font>
    },<font></font>
</code></pre><br>
<pre><code class="javascript hljs"> temperature: {
        <span class="hljs-attr">cluster</span>: <span class="hljs-string">'msTemperatureMeasurement'</span>,
        <span class="hljs-attr">type</span>: [<span class="hljs-string">'attributeReport'</span>, <span class="hljs-string">'readResponse'</span>],
        <span class="hljs-attr">convert</span>: <span class="hljs-function">(<span class="hljs-params">model, msg, publish, options, meta</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> temperature = <span class="hljs-built_in">parseFloat</span>(msg.data[<span class="hljs-string">'measuredValue'</span>]) / <span class="hljs-number">100.0</span>;
            <span class="hljs-keyword">return</span> {<span class="hljs-attr">temperature</span>: calibrateAndPrecisionRoundOptions(temperature, options, <span class="hljs-string">'temperature'</span>)};<font></font>
        },<font></font>
    },<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุณูุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toZigbee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><font style="vertical-align: inherit;">ูุญุฏุฏ ุงููุญููุงุช ุงูุชู </font><b><font style="vertical-align: inherit;">ุณุชุนุงูุฌ ุฃูุงูุฑูุง</font></b><font style="vertical-align: inherit;"> ุนูู ุงูุฌูุงุฒ. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ูู ูุญูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tz.on_off</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุจุฏูู ุงูุชุจุฏููุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุช ุฅุถุงูุฉ ูู ุดูุก ุฅูู "ุงููุญููุงุช". </font><font style="vertical-align: inherit;">ูู ูุณุชุฎุฏู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zigbee2mqtt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ููููู ุงุณุชุฎุฏุงูู ุจุงููุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุฒุงู ูุณุชุฎุฏูู ioBroker ูุถูููู ูุตููุง ููุฌูุงุฒ ุฅูู ููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ioBroker.zigbee \ lib \ devices.js</font></font></i><br>
<br>
<pre><code class="javascript hljs">&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">vendor</span>: <span class="hljs-string">'DIYRuZ'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">models</span>: [<span class="hljs-string">'DIYRuZ_RT'</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">icon</span>: <span class="hljs-string">'img/DIYRuZ.png'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">states</span>: [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;states.state,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;states.temperature,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;},<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูููู ุงูุฅุดุงุฑุฉ ุฅูู ููุณ ุงููููุฐุฌ ุจุงูุถุจุท ุ ููู ุจู ุตูุฑุฉ ููุงุฆูุฉ ุจุงูุญุงูุงุช. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ุชููู ุงูููุงูุงุช ููุงุณูุฉ ุฃูุถูุง: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุงูุฉ ุงูุชุชุงุจุน ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนุฑุถ ููู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oz/fu/zm/ozfuzmz72p-e1lwweegnd4fv74q.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12. ูุงุฐุง ุจุนุฏ ุฐููุ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูู ุฃุณุชุทุน ูุนุฑูุฉ ุฌููุน ุงูุฌูุงูุจ ูุงูููุฒุงุช ุงูุชู ูููุฑูุง Z-Stack 3.0. </font><font style="vertical-align: inherit;">ุนูู ุงูุฃุฑุฌุญ ูู ุฃูู ุจุชูููุฐ ููุน ูู ุงููุธุงุฆู ุจุดูู ุตุญูุญ ุฃู ูููู ุงุณุชุฎุฏุงู ุจุนุถ ุงูุขููุงุช ุงููุถููุฉ ูู ุชูููุฐู. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ูููู ุชุญุณูู ูุชุทููุฑ ุงูุญู ุฃุนูุงู. </font><font style="vertical-align: inherit;">ูููุง ููู ุจุนุถ ุงูุงุชุฌุงูุงุช:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃุชููู ูู ุงูุนุซูุฑ ุจุณุฑุนุฉ ุนูู ุญููู ูุฅููุงููุฉ ุชูุตูู ุฃุฌูุฒุฉ ุงูุฃุทูุงู ุนุจุฑ ุงููุฑุญูุงุช. </font><font style="vertical-align: inherit;">ูููู ูุฃุฌูุฒุฉ ุงูุชูุฌูู ุงูุฃุฎุฑู ุชูููุฐ ุงูุฃูุฑ allow_join ูุชูุตูู ุงูุฃุฌูุฒุฉ ุงูุฌุฏูุฏุฉ ูู ุฎูุงู ููุณูุง ุ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุฅุญุถุงุฑ ุงูุฌูุงุฒ ุงูุฌุฏูุฏ ุฅูู ุงูููุณู. </font><font style="vertical-align: inherit;">ูุชู ุชูุซูู ุงูุฌูุงุฒ ุจูุงุณุทุฉ ุฌูุงุฒ ุชูุฌูู ุ ููุชู ุนุฑุถู ุจุดูู ุตุญูุญ ุนูู ุฎุฑูุทุฉ ุงูุดุจูุฉ ุ ููููู ูุฑูุถ ุชูููุฐ ุงูุฃูุฑ "allow_join". </font><font style="vertical-align: inherit;">ุจุชุนุจูุฑ ุฃุฏู ุ ูุชู ุชูููุฐ ุงูุฃูุฑ ุ ูููู ุงูุฃุฌูุฒุฉ ูุง ุชุชุตู ูู ุฎูุงูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถุง ุ ูู ุชููุฐ ุงูุฅุจูุงุบ ุงูุตุญูุญ. </font><font style="vertical-align: inherit;">ูุฐู ุทุฑููุฉ ูุชูููู ุฅุนูุงู ุงูุญุงูุฉ ุนูุฏูุง ููููู ุงุณุชุฎุฏุงู ุงูุฃูุฑ configReport ูุชุญุฏูุฏ ูุงุฆูุฉ ุงูุณูุงุช ูุฅุฑุณุงููุง ูุชูุฑุงุฑ ุงูุฅุนูุงู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูู ูุน ุงููุฌููุนุงุช.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนุงูู ูุน ุงูููุงุทุนุงุช ูุชูููุฐ ุฃุฒุฑุงุฑ ุงูุงูุชุฑุงุน ูู ุฎูุงู ุงูููุงุทุนุงุช.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ุจุงููุณุจุฉ ููุฃุฌูุฒุฉ ุงูุชุงููุฉ ุ ุชุญุชุงุฌ ุฅูู ุงูุชุนุงูู ูุน ุฃูุถุงุน ุงูุทุงูุฉ ูุฅูุดุงุก ุฃุฌูุฒุฉ "ุณููู" ุนูู ุงูุจุทุงุฑูุงุช.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุนูููุงุช ุ ุฃุฏุนูู ุฅูู ููุงูุดุฉ ูุฐุง ูุบูุฑูุง ูู ุงูุฃุฌูุฒุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุฑุฏุดุฉ Telegram ุนูู Zigbee</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฑูุฏ ุฃู ุฃุนุฑุจ ุนู ุงูุชูุงูู ููุฏุนู ูุงููุณุงุนุฏุฉ ูู ุชุทููุฑ ุฒููุงุฆู ูู ุฏุฑุฏุดุฉ Telegram ููุฌุชูุน Zigbee:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t.me/DJONvl</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t.me/antstar</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t.me/Jager_f</font></font></a></li>
</ul><br>
</blockquote><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุฌุน</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุถููู ุงููุซุงุฆู ุงูุฑุฆูุณูุฉ ูู Z-Stack 3.0.2 SDK ููุชู ุชุซุจูุชูุง ูุนู. </font><font style="vertical-align: inherit;">ูููู ุณุฃูุฏู ุฌุฒุกูุง ูู ุงูุฑูุงุจุท ููุง:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSAL ู HAL </font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TI ZIgbee Wiki</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Create New Application For SmartRF05 + CC2530 SWRA231 Version 1.1</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Z-Stack Home Sample Application User's Guide SWRU354 Version 1.3</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Z-Stack Sample Applications SWRA201 Version 1.6</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Z-Stack Developer's Guide SWRA176 Version 1.12</a>&nbsp;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Z-Stack 3.0 Developer's Guide Version 1.14</a>&nbsp;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Z-Stack API SWRA195 Version 1.10</a>&nbsp;</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TI CC253x User's Guide</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/formtapez/ZigUP</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Zigbee Cluster Library rev 6</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   DIYRuZ_RT</a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar495910/index.html">ุชุซุจูุช ROS ูู ุตูุฑุฉ Ubuntu Single-Board IMG</a></li>
<li><a href="../ar495912/index.html">ููุตูุงุช ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุฐููุฉ</a></li>
<li><a href="../ar495918/index.html">ููููุฉ ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุตูุช ุงููุงูุนู ูู ุฃูุนุงุจ ุงูููุจููุชุฑ ูุงููุงูุน ุงูุงูุชุฑุงุถู ูุณุจุจ ุตุนูุจุฉ ุฐูู</a></li>
<li><a href="../ar495920/index.html">ุชูุงุตูู ุชูููุฐ ุจุฑูุชูููู ุชุฒุงูู ุงูููุช PTPv2</a></li>
<li><a href="../ar495924/index.html">ููุงุฐุง ูู ุงูุตุนุจ ุฌุฏูุง ุจูุงุก ูููุฐุฌ ุชูุฒูุน COVID-19 ุฌูุฏุ</a></li>
<li><a href="../ar495932/index.html">ูุง ูู ุงููุนูู ุงูุฎูู ูููุคูููู ูู ุฏููู SCRUM. ุงูุฌุฒุก 1. ุญูู ุงูุนูููุฉ</a></li>
<li><a href="../ar495934/index.html">DataGovernance ูู ุงูููุฒู</a></li>
<li><a href="../ar495938/index.html">ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุงูููุงูุงุช ุญูู ุงูุชุนูู ุงูุขูู: ุงูุญุงูุงุช ูุงูุฃุฏูุฉ ูุงูุฏุฑุงุณุงุช ูุดูุฑ ูุงุฑุณ 2020</a></li>
<li><a href="../ar495942/index.html">ุชูููุฑ ุงูููุช ูุงูุฃุนุตุงุจ ูุณุงุนุงุช ุงูุฑุฌู</a></li>
<li><a href="../ar495944/index.html">ุชุญุฏูุซ TOP50 (ุชุตููู ุงูุญูุงุณูุจ ุงููุงุฆูุฉ CIS): ุงูุฏููุงููุงุช ูุงูุงุชุฌุงูุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>