<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👩‍👧‍👦 ✋🏻 🌪️ テキストのレンダリングはあなたを嫌います 🤶 🎴 ⚰️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="目次

- 1.用語 
- 2.スタイル、レイアウト、フォームは相互に依存していますか？ 
- 3. — 3.1. 3.2. 
- 3.1. 
- 3.2. 
- 4. 
- 5.  — 5.1. 5.2. 
- 5.1. 
- 5.2. 
- 6. 6.1. SVG 6.2. 6.3. — , 6...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>テキストのレンダリングはあなたを嫌います</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469529/"><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目次</font></font></b><div class="spoiler_text"><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.用語</font></font></a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.スタイル、レイアウト、フォームは相互に依存していますか？</font></font></a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">3.  —    </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">3.1.  </a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">3.2.    </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">4.     </a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">5. &nbsp;—  </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">5.1.     </a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">5.2.      </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6. </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6.1.    SVG</a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6.2.     </a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6.3.  —   ,      </a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6.4.   ,   ?</a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6.5.     (  ,    )</a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">6.6.    </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">7.  </a></li>
</ul></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストのレンダリング：どれほど複雑になる可能性がありますか？それは信じられないほど挑戦的であることが判明しました！私の知る限り、文字通り「完全に」表示するシステムはありません。どこか良いところ、どこか悪いところ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行の折り返しとテキスト選択のサポートにより、任意のフォント、色、スタイルの任意のテキストが必要だとします。実際、これらは複雑なテキスト、ターミナルウィンドウ、Webページなどを正しく表示するための最小要件です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、すぐに言ってみましょう</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">連続した正解はなく、すべてがあなたの考えよりもはるかに重要であり、すべてが他のすべてに影響します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単一の概念に統合されていないトピックについて説明します。これらは、Firefoxでのテキストのレンダリングに取り組むために数年にわたって私が対処しなければならなかった問題にすぎません。</font><font style="vertical-align: inherit;">たとえば、私はこれにあまり興味がないので、テキストのセグメンテーションの問題や特定のプラットフォームのさまざまなテキストライブラリの管理についてはあまり詳しく説明しません。</font></font><br>
<a name="habracut"></a><br>
<a name="1"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.用語</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストの性質は複雑で、英語はすべてのニュアンスをうまく伝えていません。</font><font style="vertical-align: inherit;">このドキュメントでは、次の条件を順守するように努めます。</font><font style="vertical-align: inherit;">これらの単語は「正しい」ものではないことに注意してください。言語学の経験がない英語を母国語とする人に主要な概念を伝えるのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャラクター：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スカラー（スカラー）：Unicodeスカラー。Unicodeの「最小単位」です（これもコードポイントです）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字：拡張Unicode書記素クラスター（EGC）、Unicodeで「最大の単位」（複数のスカラーで構成される可能性があります）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グリフ（glyph）：フォントで与えられるレンダリングの最小単位。</font><font style="vertical-align: inherit;">通常、フォントには一意の識別子があります。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合字：複数のスカラーと、場合によっては複数の文字で構成されるグリフ（ネイティブスピーカーは合字を複数の文字として表すことができますが、フォントの場合は1文字だけです）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">絵文字：「フルカラー」のグリフ。 </font></font><img src="https://habrastorage.org/webt/bz/bc/0l/bzbc0lnl6kzkaygl4g6kdufbtpo.png" width="70"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
書体</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォント：文字をグリフにマップするドキュメント。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライティング/スクリプト（スクリプト）：特定の言語を構成するグリフのセット（フォントは、原則として特定のスクリプトを実装します）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手書きフォント（筆記体）：グリフが互いに接触して流れるフォント（アラビア語など）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色：フォントのRGB値とアルファ値（一部のユースケースでは必要ありませんが、これは興味深いものです）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタイル：フォントの太字および斜体修飾子（実際の実装では、ヒント、エイリアス、およびその他の設定も通常提供されます）。</font></font></li>
</ul><br>
<a name="2"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.スタイル、レイアウト、フォームは相互に依存していますか？</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、一般的なテキストレンダリングパイプラインの仕組みを理解するための簡単な概要です。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタイル設定（マークアップの解析、フォントのクエリシステム）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイアウト（テキストを行に分割）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーピング、シェーピング（グリフとその位置の計算）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクスチャアトラス/キャッシュへの必要なグリフのラスタライズ）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成（アトラスから目的の位置へのグリフのコピー）。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、これらの手順は見かけほど簡単ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどのフォントは、実際に必要なすべてのグリフをオンデマンドで提供するわけではありません。グリフが多すぎるため、フォントは通常、特定の文字のみを実装します。エンドユーザーは通常これを知らないか、気にしません。そのため、</font><font style="vertical-align: inherit;">文字が利用できない場合</font><font style="vertical-align: inherit;">、信頼できるシステムは</font><font style="vertical-align: inherit;">他のフォントに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスケード</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">必要</font><font style="vertical-align: inherit;">があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次のテキストのマークアップは、</font><font style="vertical-align: inherit;">いくつかのフォント</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在を</font><i><font style="vertical-align: inherit;">意味するものではあり</font></i><font style="vertical-align: inherit;">ませんが</font><font style="vertical-align: inherit;">、任意のシステムで適切にレンダリングするために必要です</font></font><img src="https://habrastorage.org/webt/s6/z5/b8/s6z5b8fxd5g525xyirad9asxejk.png" width="22"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。helloبببسم好。したがって、ステップ1（スタイリング）がステップ3（シェーピング）に依存し始めるという事実に危険なほど接近しています！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（または、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">能登のアプローチを</font></a><font style="vertical-align: inherit;">取ることができます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての文字を含む1つのUberフォントを使用します。ただし、ユーザーはフォントをカスタマイズできなくなり、すべてのプラットフォームのユーザーに「ネイティブ」テキストインターフェースを提供できなくなります。しかし、より信頼性の高いソリューションが必要だとしましょう）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様に、レイアウトの場合、各テキストが占めるスペースの量を知る必要がありますが、これは整形後にのみ知られます！ステップ2はステップ3の結果に依存しますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、形を整えるには、レイアウトとスタイルを知る必要があるため、行き詰まっているようです。何をすべきか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、様式化はチートを適用します。私たちがが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本当に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全なグリフを取得したい、</font><i><font style="vertical-align: inherit;">スカラーは</font></i><font style="vertical-align: inherit;">スタイリングのための十分な</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。フォントが書き込みを適切にサポートしていない場合、その書き込みのスカラーについて何も知らないと主張しません。したがって、次のようにして「最適な」フォントを簡単に見つけることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキスト内の各文字（EGC）について、リスト（カスケード）内の各フォントをポーリングして、この文字を構成するすべてのスカラーを認識しているかどうかを調べます。もしそうなら、それらを使用してください。結果のないリストの最後に到達すると、tofu（</font></font><img src="https://habrastorage.org/webt/qv/6w/jj/qv6wjjqmos_ob7gzmy_ogneaowy.png" width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、欠けているグリフのインジケーター）が表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
絵文字との出会いは、おそらくすでにこのようなインジケーターを見たことがあるでしょう。一部の絵文字は、実際にはいくつかのより単純な絵文字の合字であるため、フォントは個々のコンポーネントのみを発行することにより、文字のサポートを示すことができます。それはとても</font></font><img src="https://habrastorage.org/webt/vr/mr/yk/vrmrykt5b5kjdkyj8b4nabjhjac.png" width="22"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字通りのように見えることができます</font></font><img src="https://habrastorage.org/webt/6m/yv/6n/6myv6nhjem72asbiysa_wzah8t4.png" width="70"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォントが古すぎて新しい合字を認識できない場合。これは、新しい文字について知らない「古すぎる」Unicode実装があり、スタイルシステムにそのような部分一致を受け入れさせる場合にも発生する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、レイアウトやフォームを参照する必要なく、どのフォントを使用するかが正確にわかりました（シェイプによって色が変わる可能性がありますが、これについては次のセクションで詳しく説明します）。同様に、レイアウトとフォームの相互依存性を処理できますか？番号！段落の区切りのようなものはあなたに厳しい改行を与えますが、形を作る唯一の方法は繰り返し形を作ることです！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストが1行に配置されていると想定し、スペースがなくなるまでこの行を形成する必要があります。</font><font style="vertical-align: inherit;">この時点で、組版操作を実行し、テキストを分割して次の行を開始する場所を見つけることができます。</font><font style="vertical-align: inherit;">すべてが完了するまで繰り返します。</font></font><br>
<br>
<a name="3"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.テキストは個別の文字ではありません</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
英語だけで判断すると、合字はある種の奇妙なナンセンスだと思うかもしれません。</font><font style="vertical-align: inherit;">つまり、「æ」のスペルが「ae」</font><font style="vertical-align: inherit;">である</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">誰が</font><i><font style="vertical-align: inherit;">本当に</font></i><font style="vertical-align: inherit;">気にしているのでしょうか。しかし、一部の言語は本質的に完全に合字で構成されていることがわかりました。たとえば、ड्ببسمは、個々の文字«بببمで構成されます。高度なテキストレンダリングシステム（つまり、メインのブラウザー）では、これらの2行は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">異なって</font><font style="vertical-align: inherit;">見えます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、いいえ。それは、Unicodeスカラーと拡張書記素のクラスターの違いについてではありません。信頼できるUnicodeシステム（たとえば、Swift）にこの行の拡張された書記素のクラスターを提供するように依頼すると、これらの5文字が提供されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シンボルの形状は隣人によって異なります。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキストは、文字の後に文字を正しく表示できません</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、フォームの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ（シェーピングライブラリ）</font><font style="vertical-align: inherit;">を使用する必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ここでの業界標準は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HarfBuzz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であり、これらのタスクを自分で解決することは非常に困難です。</font><font style="vertical-align: inherit;">HarfBuzzを使用してください。</font></font><br>
<br>
<a name="3_1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1。</font><font style="vertical-align: inherit;">テキストオーバーレイ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手書きフォントでは、継ぎ目を避けるためにグリフが重なることが多く、これが問題を引き起こす可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度मनीممنشを見てみましょう。正常に見えますか？拡大してください：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sb/u0/kv/sbu0kvn9ii-lhltb9y7pqnj67pa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだきれいに見えますが、テキストを部分的に透明にします。 SafariまたはEdgeを使用している場合、テキストは正常に表示される可能性があります。しかし、FirefoxやChromeでは見た目がひどいです</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0m/rs/fq/0mrsfqxdecmizkckojpww0o0iju.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。問題は、ChromeとFirefoxが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チート</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しようとしている</font><i><font style="vertical-align: inherit;">こと</font></i><font style="vertical-align: inherit;">です。彼らはテキストを正しく形成しましたが、そのようなグリフに出会うとすぐに、彼らはまだそれらを別々に描画しようとしています。これは通常、そのような調光を生成する透明度とオーバーラップがある場合を除いて、正常に機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「正しい」の実装は、一時的な表面にテキストをもたらす</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことなく、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">透明度、そして透明度のあるシーン</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">FirefoxとChromeは高価で、通常、主要な西洋言語には必要ないため、これを行いません。</font><font style="vertical-align: inherit;">興味深いことに、彼らは絵文字用のスクリプトを特別に処理しているので、問題を本当に理解しています（ただし、これについては後で説明します）。</font></font><br>
<br>
<a name="3_1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2。</font><font style="vertical-align: inherit;">スタイルは合字を変更できます</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わかりました。この例では</font><font style="vertical-align: inherit;">、マークアップがどのように壊れるかについての好奇心から</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析</font><font style="vertical-align: inherit;">していますが、実際に害を及ぼす可能性のある適切なシナリオはわかりません。</font><font style="vertical-align: inherit;">以下は、コンテンツが同じで配色が異なる2つのテキストスニペットです</font></font><br>
 <br>
<img src="https://habrastorage.org/getpro/habr/post_images/450/9ef/bcd/4509efbcddabd9a36f7a77372f99a832.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。Safariでの表示方法は次のとおりです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/cf0/1f5/057/cf01f505710b9a16186cb8671a852a08.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、Chromeで表示されます（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいレイアウト実装</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用している場合</font><font style="vertical-align: inherit;">）：</font></font><br>
 <br>
<img src="https://habrastorage.org/getpro/habr/post_images/efa/a09/2d8/efaa092d8e5df031d1f7efbe0fdc991d.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、Firefoxで表示されます：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/450/9ef/bcd/4509efbcddabd9a36f7a77372f99a832.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果：</font></font><br>
<br>
<ul>
<li>Safari <br>
</li>
<li>Chrome  ,    <br>
</li>
<li>Firefox    ,   </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は誰もがFirefoxにいるべきだと思いますよね？しかし、ズームインすると、彼は非常に奇妙なことをしていることがわかります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/516/9ce/d38/5169ced3843dcd4ab70e98c58b1929ed.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼は単にこの合字を異なる色の4つの等しい部分に分割しただけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題は、ここで何をする</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">べき</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か</font><i><font style="vertical-align: inherit;">について</font></i><font style="vertical-align: inherit;">、本当に合理的な答えがない</font><i><font style="vertical-align: inherit;">ということ</font></i><font style="vertical-align: inherit;">です</font><font style="vertical-align: inherit;">。合字をさまざまなスタイルに分割しました。合字はある意味でレンダリングの「単位」であるため、このような分離をサポートすることを拒否することは理にかなっています（ほとんどの場合）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何らかの理由で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Firefoxの誰かが、よりエレガントな実装を作成することに本当に熱心でした</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。彼のアプローチは、最適なマスクとさまざまな色で合字を数回描くことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有る</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらの「部分的な合字」をサポートすることには</font><i><font style="vertical-align: inherit;">ある程度の</font></i><font style="vertical-align: inherit;">意味があります。特定の合字が表示されるかどうかを知ることができるのはシェーピングだけであり、これはシステムフォントに依存するため、だれもそれを予期しなかった場所に合字が表示される場合があります。</font><font style="vertical-align: inherit;">古典的な英語の例は、ハイパーリンクの境界にユーザーがインストールしたフォントの合字です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
英語ができることをもかなり奇妙である</font></font><font color="blue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meniが</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能</font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STI</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">えっ単語の途中、手書きフォントできないのですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
部分的な合字で行を分割するコードについても質問しないでください。</font></font><br>
<br>
<a name="4"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.絵文字ブレークの色とスタイル</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネイティブシステムと同じように絵文字を表示する場合は、テキストの色設定を無視する必要があります（透明度を除く）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cp/4d/2f/cp4d2fokoxffueesiohd1urszuu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、絵文字には独自のネイティブカラーがあり、肌の色の変更子の場合のように、この色には意味的な意味さえある場合があります。さらに、それらはいくつかの色を持つことができます！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の知る限り、絵文字の前にはそのような問題はなかったので、プラットフォームによって解決方法は異なります。絵文字を立体画像（Apple）として表示するものもあれば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一連のモノクロ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイヤー</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Microsoft）</font><font style="vertical-align: inherit;">として表示するものもあり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
後者のアプローチは悪くありません。既存のテキストレンダリングパイプラインとうまく統合し、グリフを一連のモノクログリフに「ただ」分解して、誰もが使い慣れているからです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これは、「単一の」グリフを描画すると、</font><font style="vertical-align: inherit;">スタイル</font><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">繰り返し</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変化</font><font style="vertical-align: inherit;">する可能性があること</font><i><font style="vertical-align: inherit;">を</font></i><font style="vertical-align: inherit;">意味します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、「1つの」グリフ自体が重なる可能性があり、前のセクションで説明した透明性の問題が発生します。</font><font style="vertical-align: inherit;">それでも、ブラウザーは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本当に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">絵文字のレイヤーの透明度を正しく組み合わせてい</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この不一致は3つの方法で説明できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特別な方法でそれらを処理するために色付きのグリフをすでに探しているので、特別なレイアウトパスを選択するのは簡単です。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">透明度の低い手書きフォントは少し見苦しく見えますが、絵文字は完全に壊れて判読できない文字セットに変わるため、追加の作業は正当化されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">西洋の開発者は、アラビア語やマラーティー語などの言語よりも絵文字を重視しています。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好みに合わせてオプションを選択してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでも、絵文字を斜体または太字で強調するにはどうすればよいですか？</font><font style="vertical-align: inherit;">これらのスタイルを無視しますか？</font><font style="vertical-align: inherit;">それらを合成する必要がありますか？</font><font style="vertical-align: inherit;">誰が知っていますか... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、これらの絵文字は奇妙に小さく見えませんか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、何らかの理由で、多くのシステムが絵文字のフォントサイズを密かに増やして、絵文字をより美しく見せています。</font></font><br>
<br>
<a name="5"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.スムージングは​​地獄</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストの文字は非常に小さく詳細です。</font><font style="vertical-align: inherit;">テキストが読みやすいことが非常に重要です。</font><font style="vertical-align: inherit;">スムーズな作業のように聞こえます！</font><font style="vertical-align: inherit;">地獄、480pは本当に低解像度です。</font><font style="vertical-align: inherit;">よりスムーズに!!! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m9/8x/qa/m98xqayxjlpla-5bgc2rmktqpd8.png" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">したがって、2つの主要なタイプがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グレースケール平滑化 </font></font><img src="https://habrastorage.org/webt/sf/xr/qu/sfxrqug5y1yihdid_djblyqhhii.png" width="22"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブピクセルスムージング </font></font><img src="https://habrastorage.org/webt/i7/pt/mk/i7ptmkl9iwj6tve6ly5ch7dv-y0.png" width="22"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グレースケール平滑化は「自然な」アプローチです。基本的な考え方は、部分的に覆われたピクセルは部分的に透明になるということです。合成中、これによりピクセルが適切な色相を取得し、全体的なディテールが向上します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グレースケールという用語は、1次元の透明度と同様に、1次元の色に使用されます（そうでない場合、グリフは1つの単色で表示されます）。さらに、白い背景に黒いテキストが表示される典型的な状況では、アンチエイリアスは文字通りエッジに沿って灰色の濃淡を表示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サブピクセルのアンチエイリアスは、モニター上のピクセルの通常の配置を悪用するトリックです。これははるかに複雑なので、本当に興味がある場合は、より詳細なドキュメントを読む必要があります。ここでは、高レベルの概念について簡単に説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モニターのピクセルは、実際には赤、緑、青の3つの小さな列です。赤にしたい場合</font><font style="vertical-align: inherit;">は、「白黒黒」</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言って</font><font style="vertical-align: inherit;">ください</font><font style="vertical-align: inherit;">。同様に、青色を取得したい場合は、「黒、黒、白」を指定します。つまり、花をいじくり回すと</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水平解像度</font><font style="vertical-align: inherit;">が</font><i><font style="vertical-align: inherit;">3倍になり、</font></i><font style="vertical-align: inherit;">より詳細な情報を得ることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような「虹」は非常に見苦しいと思うかもしれませんが、実際にはシステムはかなりうまく機能します（ただし、これには同意しません）。人間の脳はパターンを認識し、それらを滑らかにするのが大好きです。それでも、サブピクセルスムージングを使用してテキストのスクリーンショットを撮ると、画像のサイズを変更したり、別のサブピクセルレイアウトでモニターで見たりすると、余分な色がすべてはっきりと表示されます。これが、テキストを含むスクリーンショットが非常に奇妙で見栄えが悪い理由です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（一般に、このシステムは、アイコンの色が、知覚されるサイズと位置を誤って変更する可能性があることも意味します。これは本当に厄介です）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、サブピクセルのアンチエイリアシングは、テキストの明瞭度を大幅に向上させることができる本当にクリーンなハックです！</font><font style="vertical-align: inherit;">しかし、残念ながら、これもお尻の大きな破片です！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どの平滑化システムでも、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブピクセルのグリフシフト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が発生することに注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">常にラスタライズされたグリフをフルピクセルにスナップする必要がありますが、ラスタライズ自体は特定のサブピクセルオフセット（0〜1の値）向けに設計されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを理解するために、グレースケールスムージングを備えた1x1の黒い正方形を想像してください。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブピクセルオフセットが0の場合、ラスタライズ中に黒のピクセルだけが出てきます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブピクセルオフセットが0.5の場合、ラスタライズすると、2つのピクセルが50％グレーで表示されます。</font></font></li>
</ul><br>
<a name="5_1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1。</font><font style="vertical-align: inherit;">サブピクセルオフセットによりグリフキャッシュが壊れる</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グリフをラスタライズするには驚くほどの量の計算が必要になるため、グリフをテクスチャアトラスにキャッシュする方がはるかに優れています。</font><font style="vertical-align: inherit;">しかし、サブピクセルオフセットでテクスチャをキャッシュする方法は？</font><font style="vertical-align: inherit;">各オフセットには独自のラスタライズがあります！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、品質とパフォーマンスの妥協点を見つける必要があります。これは、サブピクセルの変位を最適化することで実行できます。</font><font style="vertical-align: inherit;">英語のテキストの場合、適切なバランスは、整数の4分の1に関連付けられた水平オフセットと垂直サブピクセルの精度の欠如です。</font><font style="vertical-align: inherit;">これにより、4つのサブピクセル位置のみが残ります。これにより、妥当なキャッシュサイズを維持しながら、品質が大幅に向上します。</font></font><br>
<br>
<a name="5_2"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2。</font><font style="vertical-align: inherit;">平滑化サブピクセルは合成できません</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グレーのシェードでのアンチエイリアシングの優れた機能の1つは、自由に操作できることであり、優雅に低下します。たとえば、テキストを使用してテクスチャを変換する場合（スケーリング、回転、または変換）、テクスチャが少しぼやけることがありますが、一般的には正常に見えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じことをサブピクセルアンチエイリアスで行うと、ひどく見えます。彼の全体的な考えは、ディスプレイ上のピクセルを操作することです。表示ピクセルがテクスチャのピクセルと一致しない場合、赤と青のエッジがはっきりと見えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは単に、新しい場所での新しいグリフラスタライズによって「修正」されたと考えるかもしれません。そして実際、変換が静的であれば、これでうまくいくかもしれません。しかし、変換が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アニメーションの場合</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、悪化します。これは実際には非常に一般的なブラウザエラーです。テキストでアニメーションが発生していることが検出されない場合</font><font style="vertical-align: inherit;">、各グリフは各フレームにヒントを付けて異なるサブピクセルバインディング間をジャンプするため</font><font style="vertical-align: inherit;">、文字が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切り替わり</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、ブラウザーには、ページのこの部分（理想的にはサブピクセルの配置）のサブピクセルアンチエイリアスを強制的にオフにするために、そのようなアニメーションを検出するいくつかのヒューリスティックが含まれています。ブラウザに明確な「ヒント」を与えることなく、アニメーションを任意の複雑なJSによってトリガーできるため、これを確実に実装することは非常に困難です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、サブピクセルのスムージングは​​、部分的な透明度が存在する場合には使用が困難です。実際、ここではチャネルR、G、Bを3つの透明度値（各サブピクセルに1つ）をエンコードするように構成していますが、テキスト自体にも色と背景があるため、情報は簡単に失われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グレースケールアンチエイリアスを使用する場合、専用のアルファチャネルがあるため、何も失われません。したがって、ブラウザは通常、灰色の網掛けを使用して半透明のオブジェクトを操作します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... Firefoxを除く。</font><font style="vertical-align: inherit;">繰り返しになりますが、この奇妙な組織では、誰かが本当に夢中になって、何か複雑なことをしました：アルファコンポーネントです。</font><font style="vertical-align: inherit;">実際にサブピクセルアンチエイリアスを使用してテキストを正しく作成できることがわかりますが、これにはR、G、Bの3つの追加の透明度チャネルが必要です。このようなアンチエイリアスによってメモリ消費量が2倍になることは当然のことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸いなことに、長年にわたり、サブピクセルの平滑化はあまり重要ではなくなりました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retinaディスプレイではまったく必要ありません。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">携帯電話のサブピクセルレイアウトはこのトリックをブロックします（深刻な作業なしで）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MacOSの新しいバージョンでは、サブピクセルテキストはデフォルトでOSレベルで無効になっています。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chromeはサブピクセルアンチエイリアスをより積極的に無効にするようです（これが正確なポリシーかどうかはわかりません）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいFirefoxグラフィカルバックエンド（ウェブレンダー）は、単純化のためにAlphaコンポーネントを廃止しました。</font></font></li>
</ul><br>
<a name="6"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.難解な</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この部分は、あまり議論に値しない小さなものの集まりです。</font></font><br>
<br>
<a name="6_1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1。</font><font style="vertical-align: inherit;">フォントにはSVGが含まれる場合があります</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは最悪です。</font><font style="vertical-align: inherit;">これらのフォントはほとんどがAdobeから提供されています。これは、かなり前にSVGにかなり慣れているためです。</font><font style="vertical-align: inherit;">SVGの一部を単に無視できる場合もあります（Source Code Proフォントには技術的にはいくつかのSVGグリフが含まれていると思いますが、実際にはWebサイトでは実際には使用されていません）。ただし、通常、すべてのフォントを正式にサポートするには、SVGサポートを実装する必要があります。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">SVGアニメーションフォント</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
について聞いたことがあり</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か？</font><font style="vertical-align: inherit;">番号？</font><font style="vertical-align: inherit;">良い。</font><font style="vertical-align: inherit;">私はそれらが壊れているか実装されていないかのいずれかであると思います（Firefoxはある種の熱狂的な開発者のためにしばらくの間誤ってそれらをサポートしていました）。</font></font><br>
<br>
<a name="6_2"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2。</font><font style="vertical-align: inherit;">キャラクターは大きくすることができます</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に大きなフォント（または非常に大きなズームレベル）に対するユーザーの要求を単純に満たしたい場合、各文字が画面全体よりも大きくなる可能性があるため、このサイズのグリフアトラスでは極端なメモリ管理の問題が発生します。</font><font style="vertical-align: inherit;">これを処理する方法はいくつかあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グリフの描画を拒否します（悲しいユーザー）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グリフを小さいサイズでラスタライズし、合成中にスケールを大きくします（これは簡単ですが、エッジに沿ってぼかしを形成します）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合成後にグリフを表面に直接ラスタライズします（難しい、潜在的に高価）。</font></font></li>
</ul><br>
<a name="6_3"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3。</font><font style="vertical-align: inherit;">選択はフレームではありませんが、テキストはすべての方向に行きます</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、テキストの主な方向は左から右（英語）、右から左（アラビア語）、または上から下（日本語）のいずれかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから、ここにあなたのための面白いテキストがあります：</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">皆さんこんにちは</font></font><font color="purple"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بسماللهلا</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beep beep !!</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デスクトップでテキストをマウスで左から右に選択すると、選択が断続的になり、不思議なことに途中でひねります。</font><font style="vertical-align: inherit;">これは、テキストが左から右へ、右から左へと1行に混在するためです。これは常に発生します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、右側の選択は選択を増やしますが、突然再び増加し始めるまで選択を減らします。</font><font style="vertical-align: inherit;">これは実際には非常に正確です。選択</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は実際の行で</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">連続</font><i><font style="vertical-align: inherit;">している</font></i><font style="vertical-align: inherit;">だけ</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">したがって、テキストの一部を正しくコピーできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストを選択するためのコードと、レイアウトの改行アルゴリズムで、これを考慮する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それだけではありません。</font></font><br>
<img src="https://habrastorage.org/webt/h5/vm/ee/h5vmee428zjgkmlcs9syoyhzte0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そんなことをしなくてもいいと思います。</font></font><br>
<br>
<a name="6_4"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4。</font><font style="vertical-align: inherit;">書くのが不可能なことを書く方法は？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フォントに文字がない場合は、そのことをユーザーに通知するとよいでしょう。</font><font style="vertical-align: inherit;">グリフ「豆腐」はこのためのものです。</font><font style="vertical-align: inherit;">空の豆腐（長方形）を描き、それだけに制限することができます。</font><font style="vertical-align: inherit;">しかし、本当に役立つ情報を提供したい場合は、不足している文字の値を書き込んでデバッグを簡略化できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、待ってください。テキストを使用して、テキストを出力できないことを説明しますか？</font><font style="vertical-align: inherit;">うーん。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムには常に0〜9の文字とAFを表示する基本的なフォントがあるはずですが、これは弱虫の仮定です。</font><font style="vertical-align: inherit;">ユーザーが自分のツールで本当に自分のツールを破壊した場合、Firefoxは方法を提供します：マイクロフォント！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firefoxの内部には、正確にこれらの16文字の小さなアトラスを備えた、ハードコードされた1ビットピクセルアートの小さな配列があります。</font><font style="vertical-align: inherit;">したがって、豆腐を描くときに、フォントを気にすることなくこれらの文字を転送できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/us/by/n1/usbyn1o8olhyj82uy1b5ljw_pzg.png"><br>
<br>
<a name="6_5"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5。</font><font style="vertical-align: inherit;">スタイルはフォントの一部です（そうでない場合を除く）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
高品質のフォントには、</font><font style="vertical-align: inherit;">これらの効果を美しく表示する簡単なアルゴリズム的な方法がないため、</font><font style="vertical-align: inherit;">最初は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">斜体</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">太字</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などのスタイルが用意されてい</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、一部のフォントにはこれらのスタイルがないため、これらの効果を実現する簡単なアルゴリズム的な方法が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スタイルの正確な検出と処理は、システムと私の専門分野外に大きく依存しているため、詳しく説明することはできません。私はちょうど掘り下げます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webrenderにおけるフォント処理コード</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いずれの場合も、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合成</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォールバック</font><font style="vertical-align: inherit;">が必要</font><font style="vertical-align: inherit;">です。幸い、実装は実際には非常に単純です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合成イタリック体：各グリフを傾けます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合成ボールド：各グリフをテキストの方向に少しずらして数回描きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正直なところ、これらのアプローチはかなりうまくいきます！</font><font style="vertical-align: inherit;">しかし、ユーザーはすべてが「間違っている」ように見えることに気付くでしょう。</font><font style="vertical-align: inherit;">だから努力すればもっと上手くできる。</font></font><br>
<br>
<a name="6_6"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.6。</font><font style="vertical-align: inherit;">完璧なテキストレンダリングがない</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各プラットフォームには、長い間エラー、最適化、および癖があり、美学になっています。</font><font style="vertical-align: inherit;">したがって、特定のものが理想的または重要であると固く信じている場合でも、異なる好みを持つユーザーの巨大なグループが常に存在します。</font><font style="vertical-align: inherit;">堅牢なテキスト視覚化システムは、これらのさまざまな設定をサポートします（妥当なデフォルトを選択する場合）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成では、ユーザーのシステム、特定のフォント、特定のアプリケーション、および特定のテキストを考慮する必要があります。</font><font style="vertical-align: inherit;">また、各プラットフォームのネイティブな「外観」（癖など）を一致させるようにしてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下が含まれます：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブピクセルアンチエイリアシングを無効にする機能（一部は実際にそれを嫌います）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アンチエイリアスを</font><font style="vertical-align: inherit;">オフに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能</font><font style="vertical-align: inherit;">（そうです、これを行います）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大量のプラットフォーム/ヒント、スムージング、バリエーション、ガンマなどのフォーマット固有のプロパティ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネイティブテキストライブラリを使用</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して、各システムの美学（それぞれのプラットフォームのCore Text、DirectWrite、FreeType）を一致</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">さ</font></a><font style="vertical-align: inherit;">せる</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">必要があり</font></a><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<a name="7"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.追加リンク</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、テキストレンダリングの悪夢に関するいくつかの記事を示します。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Windowsは、機能するようにいくつかのTrueTypeフォントにパッチを適用する必要があります」</font></font></a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Firefoxには非常に多くの座標空間があります。」</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469515/index.html">Istioのアプリケーションの準備</a></li>
<li><a href="../ja469521/index.html">転倒ではなく乗るためにバイクを購入しました</a></li>
<li><a href="../ja469523/index.html">JavaScriptでの変数宣言のコンテキストに対するコードパフォーマンスの依存性</a></li>
<li><a href="../ja469525/index.html">鉱山掘削機の自動制御システム</a></li>
<li><a href="../ja469527/index.html">インターホンはスパイの耳ですか？</a></li>
<li><a href="../ja469531/index.html">「プログラミング言語をより悪い基準で比較することは、完全にばかげた職業です。」</a></li>
<li><a href="../ja469533/index.html">生体認証の問題と脅威</a></li>
<li><a href="../ja469537/index.html">SnakeでSwiftを理解する</a></li>
<li><a href="../ja469541/index.html">werfとGitLab CIを使用した同じタイプのマイクロサービスの組み立てとデプロイ</a></li>
<li><a href="../ja469543/index.html">DirectumRXサービスのRedisのスケーラビリティとフェイルオーバー</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>