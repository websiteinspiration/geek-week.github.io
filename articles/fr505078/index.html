<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåπ üôà üë©üèº BLE au microscope (ATT GATT ...) üß† üë©‚Äçüíª „ÄΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="BLE au microscope (ATT GATT ...) Partie 1, aper√ßu
 
 Cela fait un bon moment que la premi√®re sp√©cification pour Bluetooth 4.0 est sortie. Et bien que ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BLE au microscope (ATT GATT ...)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505078/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jc/9m/ea/jc9meakt15qji8lrruuauk5z_fw.png" alt="image"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE au microscope (ATT GATT ...)</font></font></h2> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 1, aper√ßu</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cela fait un bon moment que la premi√®re sp√©cification pour Bluetooth 4.0 est sortie. </font><font style="vertical-align: inherit;">Et bien que le sujet BLE soit tr√®s int√©ressant, il repousse encore de nombreux d√©veloppeurs en raison de sa complexit√©. </font><font style="vertical-align: inherit;">Dans mes articles pr√©c√©dents, je me suis principalement pench√© sur la couche de liaison de niveau le plus bas et la couche physique. </font><font style="vertical-align: inherit;">Cela nous a permis de ne pas aborder des concepts aussi complexes et d√©routants que le protocole d'attribut (ATT) et le profil d'attribut g√©n√©ral (GATT). </font><font style="vertical-align: inherit;">Cependant, nulle part o√π aller sans les comprendre, il est impossible de d√©velopper des appareils compatibles. </font><font style="vertical-align: inherit;">Aujourd'hui, je voudrais partager cette connaissance avec vous. </font><font style="vertical-align: inherit;">Dans mon article, je m'inspirerai d'une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du site Web nordique. </font><font style="vertical-align: inherit;">Alors, commen√ßons.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi tout est-il si difficile?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä mon avis, il √©tait imm√©diatement clair que la gestion des appareils via les smartphones est un sujet tr√®s prometteur et de longue haleine. Par cons√©quent, ils ont d√©cid√© de le structurer imm√©diatement et au maximum. Afin que les fabricants de divers gadgets ne proposent pas leurs propres protocoles, qui seront alors incompatibles. D'o√π la complexit√©. D√©j√† √† la premi√®re √©tape, ils ont essay√© de presser tout ce qui √©tait possible dans le protocole BLE. Et peu importe que cela soit utile ou non. En outre, ils ont pr√©vu la possibilit√© d'√©largir la liste des appareils pour l'avenir.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetons un coup d'≈ìil √† l'image o√π le diagramme du protocole BLE est dessin√©. Il se compose de plusieurs couches. La couche physique la plus basse (PHY) est responsable du canal radio de l'appareil. La couche liaison (LL) contient la s√©quence enti√®re d'octets dans le message transmis. Dans des articles ant√©rieurs, nous l'avons √©tudi√©. L'interface contr√¥leur h√¥te (HCI) est un protocole d'√©change entre les couches BLE ou les micropuces si le contr√¥leur et l'h√¥te sont impl√©ment√©s sur des puces diff√©rentes. Le protocole L2CAP (Logical Link Control and Adaptation Protocol) est responsable de la formation des paquets, divis√©s par les trames, du contr√¥le des erreurs et de l'assemblage des paquets. Le chiffrement des paquets est la responsabilit√© du protocole Security Manager Protocol (SMP). Un profil d'acc√®s partag√© (GAP) est responsable de la communication initiale entre les appareils pour d√©terminer qui est qui. Il comprend √©galement la num√©risation et la publicit√©.Dans cet article, je me concentrerai sur les deux parties restantes du protocole - le GATT et le TCA. Le GATT est un module compl√©mentaire pour ATT, ils sont donc √©troitement li√©s.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/51/qi/ms/51qimsv8ccop7bncjcrllcc7tcg.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour simplifier l'histoire, je voudrais passer √† une analogie. Je l'ai entendue quelque part et j'aimerais la soutenir. Imaginez un appareil BLE comme une biblioth√®que avec plusieurs √©tag√®res. Chaque √©tag√®re est un sujet distinct. Par exemple, nous avons des √©tag√®res avec de la fiction, des math√©matiques, des encyclop√©dies. Sur chaque √©tag√®re sont des livres avec un sujet sp√©cifi√©. Et dans certains livres, il y a m√™me des signets papier avec des notes. De plus, nous avons un petit catalogue papier de tous les livres. Si vous vous souvenez des biblioth√®ques scolaires, il s'agit d'une bo√Æte √©troite avec des cartes en papier. Avec cette analogie, l'armoire est le profil de notre appareil. Les √©tag√®res sont des services, les livres sont des fonctionnalit√©s et un r√©pertoire est une table attributaire. Les signets dans les livres sont des descripteurs, que j'aborderai √©galement plus tard, plus en d√©tail.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous ceux qui ont d√©velopp√© l'appareil savent que de nombreux projets ont des morceaux de code similaires. Le fait est que de nombreux appareils ont des fonctionnalit√©s similaires. Par exemple, si les appareils fonctionnent sur piles, le probl√®me de charge et de contr√¥le de leur niveau sera le m√™me. Il en va de m√™me pour les capteurs. En fait, l'approche orient√©e objet de la programmation </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´offre la possibilit√© de cr√©er des objets qui combinent des propri√©t√©s et des comportements dans une union ind√©pendante, qui peut ensuite √™tre r√©utilis√©e¬ª</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. √Ä mon avis, dans BLE, une approche similaire a √©t√© tent√©e. Le Bluetooth Special Interest Group (SIG) a d√©velopp√© des profils. Les appareils de diff√©rents fabricants avec les m√™mes profils devraient fonctionner sans difficult√©. Les profils, √† leur tour, se composent de services et de services de caract√©ristiques, compl√©t√©s par des descripteurs. En g√©n√©ral, cela peut ressembler √† ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yv/7v/w-/yv7vw-vhvlnavelyabkxtwe8p0e.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, consid√©rons le profil du moniteur de fr√©quence cardiaque (bracelet de fitness). Il se compose de deux services et de plusieurs caract√©ristiques. De l√†, la hi√©rarchie des profils devient imm√©diatement claire. La caract√©ristique de point de contr√¥le remet √† z√©ro le nombre total de calories. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Le service de fr√©quence cardiaque comprend trois caract√©ristiques (0x180D): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;a) Caract√©ristique obligatoire de la fr√©quence cardiaque (0x2A37)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;b) Caract√©ristique facultative de la position du capteur corporel (0x2A38) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;c) Caract√©ristique conditionnelle du point de r√©f√©rence de fr√©quence cardiaque (0x2A39) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Service de la batterie (0x180F): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;a) Caract√©ristique obligatoire du niveau de la batterie (0x2A19)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uuid</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de pouvoir nous r√©f√©rer sans ambigu√Øt√© aux √©l√©ments de profil (services, caract√©ristiques et descripteurs), nous devons tous les num√©roter d'une mani√®re ou d'une autre. √Ä cette fin, un concept tel que l'Universally Unique ID (UUID) ou l'Universal Unique Identifier est introduit. Entre parenth√®ses de chaque ligne, seul UUID est sp√©cifi√©. Et il y a une caract√©ristique. Pour UUID, nous avons d√©cid√© d'utiliser une longueur de code de 16 et 128 bits. Pourquoi demandes-tu? Dans le protocole BLE, tout est soumis √† la conservation de l'√©nergie. Par cons√©quent, la dimension de 16 bits est tout √† fait raisonnable. Il est peu probable que plus de 65 000 soient cr√©√©s dans un avenir proche. services et fonctionnalit√©s uniques. Pour le moment, tout ce qu'ils auraient pu √™tre d√©j√† compt√© (rappelez-vous d'o√π cela vient - "il vous a compt√© aussi" :-)) √âl√©ments num√©rot√©s des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">profils</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">services</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caract√©ristiques</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descripteurs,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez consulter les liens. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, je pense que tout le monde se souvient de l'histoire avec 4 octets d'adresse IP sur Internet. Au d√©but, ils pensaient que c'√©tait suffisant, mais maintenant nous n'allons toujours pas √† l'adresse √† 6 octets. Afin de ne pas r√©p√©ter cette erreur et de laisser de la place aux mains ludiques des fabricants maison, SIG a imm√©diatement d√©cid√© d'introduire √©galement des UUID 128 bits. Cela me rappelle personnellement la bande sans licence de 433 MHz, qui a √©t√© c√©d√©e √† toutes sortes de Kulibin depuis la cha√Æne radio. Dans notre cas, un identifiant de 128 bits de services et de caract√©ristiques a √©t√© donn√©. Cela signifie que nous, pour nos services et appareils, pouvons utiliser presque n'importe quelle valeur de 128 bits. Quoi qu'il en soit, la probabilit√© de trouver le m√™me UUID tend vers z√©ro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, les UUID courts 16 bits ont leur extension jusqu'√† 128 bits. </font><font style="vertical-align: inherit;">Dans la sp√©cification, cette extension est appel√©e UUID de base Bluetooth et a la valeur 00000000-0000-1000-8000-00805F9B34FB. </font><font style="vertical-align: inherit;">Si, par exemple, l'attribut UUID 16 bits a la valeur 0x1234, alors l'UUID 128 bits √©quivalent aura la valeur 00001234-0000-1000-8000-00805F9B34FB. </font><font style="vertical-align: inherit;">Et m√™me la formule correspondante est donn√©e: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;128_bit_value = 16_bit_value * 2 ^ 96 + Bluetooth_Base_UUID </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne sais pas d'o√π vient ce nombre magique. </font><font style="vertical-align: inherit;">Si l'un des lecteurs le sait, laissez-le √©crire dans les commentaires. </font><font style="vertical-align: inherit;">Quant √† l'invention des UUID 128 bits, en principe, vous pouvez utiliser un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g√©n√©rateur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sp√©cial </font><font style="vertical-align: inherit;">qui le fera pour vous.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATT GATT ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 En fait, le plaisir commence. Je rappelle qu'ATT est bas√© sur une relation client-serveur. Nous envisageons maintenant le p√©riph√©rique serveur. Il contient des informations telles que les valeurs des capteurs, l'√©tat de l'interrupteur d'√©clairage, les donn√©es de localisation, etc. Maintenant que tous les "participants √† notre d√©fil√©" sont num√©rot√©s, nous devons en quelque sorte les mettre dans la m√©moire de l'appareil. Pour ce faire, nous les mettons dans une table appel√©e table attributaire. Souvenez-vous bien de cela. C'est le c≈ìur m√™me de BLE. Nous l'envisagerons √† l'avenir. Maintenant, nous appellerons chaque ligne un attribut. Cette table est au fond de la pile et, en r√®gle g√©n√©rale, nous n'y avons pas d'acc√®s direct. Nous l'initialisons et nous y tournons, mais ce qui se passe √† l'int√©rieur nous est cach√© derri√®re sept sceaux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consid√©rez l'image de la sp√©cification, mais avant cela, je tiens √† attirer imm√©diatement l'attention sur la confusion fr√©quente en termes, √† savoir dans les descripteurs. Le r√¥le du descripteur est de compl√©ter la description de la caract√©ristique. Lorsqu'il est n√©cessaire d'√©tendre ses capacit√©s, ils utilisent alors des descripteurs. Ce sont √©galement des attributs, et de la m√™me mani√®re, avec les services et les caract√©ristiques, ils se trouvent dans la table des attributs. Nous les analyserons en d√©tail dans la deuxi√®me partie de l'article. Cependant, parfois les descripteurs sont appel√©s le num√©ro de ligne dans la table attributaire. Il faut garder cela √† l'esprit. Nous, afin de ne pas √™tre confus, utiliserons le terme ¬´pointeur d'attribut¬ª √† ces fins. </font></font><br>
<img src="https://habrastorage.org/webt/a5/rl/lk/a5rllkmo7i3doe3ripvpjd2ztwy.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, un attribut est une valeur discr√®te qui a les propri√©t√©s suivantes qui lui sont associ√©es: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. La poign√©e d'attribut est l'index de la table correspondant √† l'attribut</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Le type d'attribut est l'UUID qui d√©crit son type </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. La valeur d'attribut est les donn√©es index√©es par le pointeur d' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
attribut 4. Les autorisations d'attribut font partie de l'attribut, autorisations qui ne peuvent pas √™tre lu ou √©crit en utilisant le protocole d'attribut </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment comprendre tout cela? Le pointeur d'attribut est, relativement parlant, son num√©ro dans notre table.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il permet au client de se r√©f√©rer √† un attribut dans les demandes de lecture ou d'√©criture. Nous pouvons num√©roter nos lignes (attributs) de 0x0001 √† 0xFFFF. Dans notre association avec une biblioth√®que, c'est le num√©ro de carte dans le catalogue papier. De m√™me, comme dans le catalogue de la biblioth√®que, les fiches sont class√©es par ordre croissant. Le nombre de chaque ligne suivante doit √™tre sup√©rieur √† la pr√©c√©dente. Comme dans la biblioth√®que, certaines cartes sont parfois perdues, nous l'avons donc - il peut y avoir des lacunes dans la num√©rotation des lignes. C'est permis. L'essentiel est qu'ils continuent d'augmenter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le type d'attribut d√©termine ce qu'est cet attribut. Par analogie avec le langage C, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o√π il y a des variables bool√©ennes, num√©riques et des cha√Ænes, alors voici. Par le type d'attribut que nous reconnaissons</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ce √† quoi nous avons affaire et comment continuer √† travailler avec cet attribut. Ci-dessous, nous examinons certains types d'attributs sp√©cifiques. Par exemple, ¬´d√©claration de service¬ª (0x2800), ¬´d√©claration de caract√©ristique¬ª (0x2803), ¬´d√©claration de descripteur¬ª (0x2902). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La valeur de l'attribut est en fait sa valeur, d√©sol√© pour la tautologie. Si le type d'attribut est une cha√Æne, la valeur d'attribut peut √™tre, par exemple, le slogan "Hello World !!!". Si le type d'attribut est une ¬´d√©claration de service¬ª, sa valeur est le service lui-m√™me. Et parfois, ce sont des informations sur o√π trouver d'autres attributs et leurs propri√©t√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les autorisations d'attribut permettent au serveur de comprendre si l'acc√®s en lecture ou en √©criture est autoris√©.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que ces autorisations s'appliquent uniquement √† la valeur d'attribut et non au pointeur, au type et au champ d'autorisations lui-m√™me. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">si l'enregistrement d'attributs est autoris√©, nous pouvons changer, par exemple, la ligne "Bonjour tout le monde !!!" </font><font style="vertical-align: inherit;">sur la ligne "Bonjour". </font><font style="vertical-align: inherit;">Mais nous ne pouvons pas interdire l'enregistrement d'une nouvelle ligne ou, changer le type d'attribut et d√©signer la ligne comme "d√©claration de service". </font><font style="vertical-align: inherit;">Lorsqu'un client acc√®de au serveur, le client demande ses attributs. </font><font style="vertical-align: inherit;">Cela permet au client de d√©couvrir ce que le serveur peut fournir. </font><font style="vertical-align: inherit;">Bien qu'il ne soit pas n√©cessaire de lire et d'√©crire des valeurs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä quoi cela ressemble-t-il</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le concept du GATT est de regrouper les attributs d'une table d'attributs dans un ordre tr√®s sp√©cifique et logique. Examinons de plus pr√®s le profil de fr√©quence cardiaque ci-dessous. La colonne la plus √† gauche de ce tableau est facultative. Il nous d√©crit simplement ce qu'est cette ligne (attribut). Toutes les autres colonnes nous sont d√©j√† famili√®res.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6k/vt/4l/6kvt4lzc9h6ll9kwdu9g6qps22c.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au sommet de chaque groupe, nous avons toujours un attribut d'annonce de service. Son type est toujours 0x2800 et le pointeur d√©pend du nombre d'attributs d√©j√† pr√©sents dans la table. Ses autorisations sont toujours en lecture seule, sans authentification ni autorisation. Nous parlerons de ces concepts un peu plus tard. Une valeur est un autre UUID qui d√©termine de quel type de service il s'agit. Dans le tableau, la valeur est 0x180D, qui est d√©finie par Bluetooth SIG comme un service de fr√©quence cardiaque.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suite √† l'annonce du service, l'annonce de la caract√©ristique. Dans la forme, elle est similaire √† une d√©claration de service. Son UUID est toujours 0x2803 et les autorisations sont √©galement toujours en lecture seule sans authentification ni autorisation. Examinons le champ Valeur d'attribut, qui comprend des donn√©es. Il contient toujours un pointeur, un UUID et un ensemble de propri√©t√©s. Ces trois √©l√©ments d√©crivent la d√©claration ult√©rieure de la valeur caract√©ristique. Le pointeur indique naturellement le lieu de d√©claration de la valeur caract√©ristique dans la table attributaire. L'UUID d√©crit √† quel type d'informations ou de valeur nous pouvons nous attendre. Par exemple, la valeur de la temp√©rature, l'√©tat de l'interrupteur d'√©clairage ou une autre valeur arbitraire. Et enfin, des propri√©t√©s qui d√©crivent comment vous pouvez interagir avec une valeur caract√©ristique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous attendons un autre √©cueil. Il est associ√© aux autorisations d'attribut et aux propri√©t√©s des caract√©ristiques. Regardons l'image des propri√©t√©s du champ de bits de la sp√©cification. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/co/5y/koco5ykz3gqkfwww1k48ssxvjug.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, il existe √©galement des champs qui offrent des capacit√©s de lecture et d'√©criture. Vous vous demandez peut-√™tre pourquoi nous avons des autorisations de lecture / √©criture pour l'attribut et </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
des </font><font style="vertical-align: inherit;">propri√©t√©s de </font><font style="vertical-align: inherit;">lecture / √©criture pour la valeur de caract√©ristique? Ne devraient-ils pas toujours √™tre les m√™mes? Le fait est que les propri√©t√©s de la valeur caract√©ristique ne sont en fait que des recommandations pour le client, utilis√©es dans les couches GATT et d'application. Ce ne sont que des indices sur ce qu'un client peut attendre d'un attribut d'annonce de fonctionnalit√©. Voyons cela plus en d√©tail. Quels types d'autorisations poss√®de l'attribut? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Autorisations d'acc√®s:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - lire </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - √©crire </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - lire et √©crire </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Autorisation d'authentification: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - l'authentification est requise </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - l'authentification n'est pas requise </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Autorisation d'autorisation: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - l'autorisation est requise </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - l'autorisation n'est pas requise</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La principale diff√©rence entre la r√©solution d'attributs et les propri√©t√©s des caract√©ristiques est que les premi√®res concernent les serveurs et les secondes les clients. </font><font style="vertical-align: inherit;">Le serveur peut √™tre autoris√© √† lire la valeur de la caract√©ristique, mais il existe en m√™me temps une exigence d'authentification ou d'autorisation. </font><font style="vertical-align: inherit;">Par cons√©quent, lorsque le client demande des propri√©t√©s de la caract√©ristique, nous obtenons que la lecture est autoris√©e. </font><font style="vertical-align: inherit;">Mais lorsque nous essayons de lire, nous obtenons une erreur. </font><font style="vertical-align: inherit;">Par cons√©quent, nous pouvons parler en toute s√©curit√© de la priorit√© des autorisations sur les propri√©t√©s. </font><font style="vertical-align: inherit;">Nous ne pouvons pas obtenir de connaissances sur les autorisations de l'attribut c√¥t√© client.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripteur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Retour √† notre table. Apr√®s avoir d√©clar√© une valeur de caract√©ristique, les d√©clarations d'attribut suivantes sont possibles: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Nouvelle d√©claration d'une caract√©ristique (il peut y avoir de nombreuses caract√©ristiques dans un service) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Nouvelle d√©claration de service (il peut y en avoir plusieurs dans un tableau) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. D√©claration d'un descripteur</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas d'une caract√©ristique mesurant la fr√©quence cardiaque, dans notre tableau, la d√©claration de la valeur de la caract√©ristique s'accompagne de la d√©claration d'un descripteur. Un descripteur est un attribut contenant des informations suppl√©mentaires sur la caract√©ristique. Il existe plusieurs types de descripteurs. Nous en parlerons en d√©tail dans la deuxi√®me partie de cet article. Maintenant, nous ne parlerons que du descripteur de configuration des caract√©ristiques du client (CCCD). Il a un UUID de 0x2902. En utilisant ce descripteur, le client a la possibilit√© d'activer l'indication ou la notification sur le serveur. La diff√©rence entre eux est faible, mais toujours l√†. La notification ne n√©cessite pas de confirmation de r√©ception par le client. L'indication l'exige, bien qu'elle se produise au niveau du GATT, n'atteignant pas le niveau de l'application. Pourquoi donc, demandez-vous? H√©las, je ne sais pas.Je peux seulement dire que les experts nordiques recommandent d'utiliser la notification. De plus, la v√©rification de l'int√©grit√© des paquets (√† l'aide de CRC) se produit dans les deux cas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la fin de l'article, je voudrais dire ceci. </font><font style="vertical-align: inherit;">Le dernier tableau est quelque peu d√©routant. </font><font style="vertical-align: inherit;">Cependant, je me suis install√© l√†-dessus car il est donn√© dans l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur lequel je m'appuie. </font><font style="vertical-align: inherit;">Dans la deuxi√®me partie de mon article, j'ai l'intention de me plonger dans la sp√©cification BlueTooth 4.0. </font><font style="vertical-align: inherit;">L√†, nous attendons des sch√©mas et des dessins plus corrects. </font><font style="vertical-align: inherit;">Dans la troisi√®me partie, je voudrais analyser le journal obtenu avec l'aide du programme Wireshark √† partir d'un des gadgets et voir ¬´vivre¬ª toute la th√©orie que nous √©tudions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Employ√© du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caesar Satellite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Group of Companies </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pecherskikh Vladimir</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr505052/index.html">Test rapide de Motionia.js et Consoleimg.js</a></li>
<li><a href="../fr505060/index.html">Ins√©rer un tableau numpy dans la base de donn√©es MySQL via Python</a></li>
<li><a href="../fr505064/index.html">Mikrotik split-dns: ils l'ont fait</a></li>
<li><a href="../fr505070/index.html">Masturbation intellectuelle sur la bonne √©criture</a></li>
<li><a href="../fr505074/index.html">H√©bergement et serveurs d√©di√©s: r√©pondez aux questions. Partie 2. Pourquoi un Internet aussi cher dans le centre de donn√©es?</a></li>
<li><a href="../fr505080/index.html">Mutex dans le monde du code asynchrone</a></li>
<li><a href="../fr505090/index.html">√Ä propos de la traduction des mots ¬´utile¬ª / ¬´utiliser¬ª sans utilisation / utile</a></li>
<li><a href="../fr505092/index.html">Comment j'ai obtenu un emploi chez Microsoft</a></li>
<li><a href="../fr505098/index.html">Courte critique du t√©l√©phone IP Snom D717</a></li>
<li><a href="../fr505104/index.html">Comment nous avons d√©velopp√© un service qui est entr√© dans le top 5 des plus grands sites de pharmacie au monde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>