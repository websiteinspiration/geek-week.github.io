<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚜 😋 👨🏿‍⚕️ Snort或Suricata。第1部分：选择免费的IDS / IPS保护企业网络 🙅 🧑🏽‍🤝‍🧑🏻 🤽🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="曾几何时，普通的防火墙和防病毒程序足以保护本地网络，但是抵御现代黑客的攻击和最近繁殖的恶意软件的攻击，这套工具已不再足够有效。老式防火墙仅分析数据包头，根据一组正式规则跳过或阻止它们。他对软件包的内容一无所知，因此他无法识别攻击者的外部合法行为。防病毒程序并不总是能够捕获恶意软件，因此管理员面临监视...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Snort或Suricata。第1部分：选择免费的IDS / IPS保护企业网络</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/506730/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">曾几何时，普通的防火墙和防病毒程序足以保护本地网络，但是抵御现代黑客的攻击和最近繁殖的恶意软件的攻击，这套工具已不再足够有效。老式防火墙仅分析数据包头，根据一组正式规则跳过或阻止它们。他对软件包的内容一无所知，因此他无法识别攻击者的外部合法行为。防病毒程序并不总是能够捕获恶意软件，因此管理员面临监视异常活动和及时隔离受感染主机的任务。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/b9/xb/teb9xbfmq-eyrzd8amgyfwt1dow.jpeg"></div></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有很多方法可以保护公司的IT基础架构。</font><font style="vertical-align: inherit;">今天，我们将讨论开放源代码入侵检测和警告系统，无需购买昂贵的设备和软件许可证即可实施该系统。</font></font><a name="habracut"></a><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDS / IPS分类</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IDS（入侵检测系统）-旨在记录网络或单独计算机系统上的可疑活动。</font><font style="vertical-align: inherit;">她保留事件日志，并通知负责其信息安全的员工。</font><font style="vertical-align: inherit;">以下元素可以区分为IDS的一部分：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于查看网络流量，各种日志等的传感器&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析子系统，用于检测所获取数据中有害影响的迹象；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储主要事件和分析结果的积累；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理控制台。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，IDS是按位置分类的：它们可能专注于保护单个节点（基于主机或主机入侵检测系统-HIDS）或保护整个公司网络（基于网络或网络入侵检测系统-NIDS）。值得一提的是所谓的APIDS（基于应用程序协议的IDS）：它们监视一组有限的应用程序级协议，以检测特定的攻击，并且不对网络数据包进行深入分析。此类产品通常让人联想到代理，并用于保护特定服务：Web服务器和Web应用程序（例如，用PHP编写），数据库服务器等。此类的典型代表是Apache Web服务器的mod_security。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们对支持多种通信协议和深度包检测技术的通用NIDS更加感兴趣。它们监视从数据链路层开始的所有通过的流量，并识别各种网络攻击，以及试图未经授权访问信息。通常，此类系统以分布式体系结构为特征，并且可以与各种活动的网络设备进行交互。请注意，许多现代NIDS是混合的，并且结合了多种方法。根据配置和设置，它们可以解决各种任务-例如，保护一个节点或整个网络。此外，防病毒软件包还接管了工作站的IDS功能，由于信息盗窃特洛伊木马的广泛使用，它已变成多功能防火墙，这也解决了识别和阻止可疑流量的问题。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，IDS只能检测到恶意软件的行为，端口扫描程序的运行或用户违反公司安全策略的行为。</font><font style="vertical-align: inherit;">当发生某个事件时，他们通知了管理员，但是很快就很清楚，仅仅认识到攻击是不够的-需要将其阻止。</font><font style="vertical-align: inherit;">因此，IDS转变为IPS（入侵防御系统）-可以与防火墙交互的入侵防御系统。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检测方法</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
用于检测和防止入侵的现代解决方案使用各种方法来确定恶意活动，这些方法可以分为三类。</font><font style="vertical-align: inherit;">这为我们提供了对系统进行分类的另一种选择：</font></font><br>
<br>
<ul>
<li> IDS/IPS                 .        ,      ;</li>
<li>  IDS    .         (    )      .               ;</li>
<li>   IDS   : if  then .          —      .             .&nbsp;</li>
</ul><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDS发展历程</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Internet和公司网络快速发展的时代始于上世纪90年代，但专家们对先进的网络安全技术稍早有些疑惑。</font><font style="vertical-align: inherit;">1986年，Dorothy Denning和Peter Neumann发布了IDES（入侵检测专家系统）模型，该模型成为大多数现代入侵检测系统的基础。</font><font style="vertical-align: inherit;">她使用专家系统来确定已知的攻击类型，以及统计方法和用户/系统配置文件。</font><font style="vertical-align: inherit;">IDES在Sun工作站上运行，检查网络流量和应用程序数据。</font><font style="vertical-align: inherit;">1993年，发布了新一代入侵检测专家系统NIDES（下一代入侵检测专家系统）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基于Denning和Neumann的工作，1988年，出现了使用P-BEST和LISP的MIDAS（Multics入侵检测和警报系统）专家系统。同时，创建了基于统计方法的干草堆系统。一年后，在洛斯阿拉莫斯国家实验室开发了另一台W＆S统计异常检测器（Wisdom＆Sense）。行业发展很快。例如，在1990年，TIM（基于时间的归纳机器）系统已经使用对顺序用户模式（通用LISP语言）的归纳训练来实现异常检测。 NSM（网络安全监视器）用于比较访问矩阵，而ISOA（信息安全官的助手）则支持各种检测策略：统计方法，个人资料验证和专家系统。 AT＆T贝尔实验室创建的ComputerWatch系统使用统计方法和规则进行验证，而1991年，加利福尼亚大学的开发人员获得了首个分布式IDS原型-DIDS（分布式入侵检测系统）也是一个专家系统。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，IDS是专有的，但到了1998年，国家实验室已经成立。</font><font style="vertical-align: inherit;">伯克利的劳伦斯（Lawrence）发布了Bro（她在2018年更名为Zeek），这是一个开源系统，使用其自己的规则语言来分析libpcap数据。</font><font style="vertical-align: inherit;">同年11月，出现了使用libpcap的APE数据包嗅探器，一个月后将其重命名为Snort，后来成为了成熟的IDS / IPS。</font><font style="vertical-align: inherit;">同时，许多专有解决方案开始出现。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Snort和Suricata</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
许多公司都喜欢免费的开源IDS / IPS。长期以来，标准解决方案就是我们已经提到过的Snort解决方案，但是现在Suricata已经取代了它。更详细地考虑它们的优点和缺点。 Snort将签名方法的优点与实时异常检测结合在一起。除了通过签名识别攻击之外，Suricata还允许您使用其他方法。该系统由一群独立于Snort项目的开发人员创建，并从版本1.4开始支持IPS功能，并且在Snort中后来出现了防止入侵的功能。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
两种流行产品之间的主要区别在于Suricata能够使用GPU在IDS模式下进行计算，以及更高级的IPS。</font><font style="vertical-align: inherit;">该系统最初是为多线程设计的，而Snort是单线程产品。</font><font style="vertical-align: inherit;">由于其悠久的历史和继承的代码，它不能最佳地使用多处理器/多核硬件平台，而普通通用计算机上的Suricata允许它处理高达10 Gb / s的流量。</font><font style="vertical-align: inherit;">可以在很长一段时间内讨论这两个系统之间的异同，但是尽管Suricata发动机速度更快，但对于不太宽的通道，这并不重要。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署选项</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必须放置IPS，以便系统可以监视其控制的网段。通常，这是一台专用计算机，其一个接口在边界设备之后连接，并通过边界设备“查看”到不安全的公共网络（Internet）中。另一个IPS接口连接到受保护网段的输入，以便所有流量都通过系统并进行分析。在更复杂的情况下，可以有几个受保护的网段：例如，在公司网络中，通常会分配一个具有Internet可访问服务的非军事区（DMZ）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gm/jt/jg/gmjtjgzjcjgpqfe3jxhq9t4oeha.jpeg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此类IPS可以通过密码破解，利用邮件服务器，Web服务器或脚本中的漏洞以及其他类型的外部攻击来防止尝试扫描端口或黑客攻击。如果本地网络上的计算机感染了恶意软件，IDS将不允许它们与外部僵尸网络服务器联系。要对内部网络进行更严格的保护，很可能需要使用分布式系统和昂贵的受管交换机进行复杂的配置，这些交换机必须能够镜像连接到端口之一的IDS接口的流量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公司网络经常受到分布式拒绝服务（DDoS）攻击。尽管现代IDS可以处理它们，但是上面的部署选项在这里几乎无济于事。系统会识别恶意活动并阻止虚假流量，但是为此，数据包必须通过外部Internet连接进入其网络接口。取决于攻击的强度，数据通道可能无法应付负载，并且攻击者的目标将得以实现。对于这种情况，我们建议在具有已知更有效的Internet连接的虚拟服务器上部署IDS。您可以通过VPN将VPS连接到本地网络，然后需要通过它配置所有外部流量的路由。然后，如果发生DDoS攻击，您将不必通过与提供商的连接来驱动数据包，它们将在外部主机上被阻止。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u-/k5/8-/u-k58-rpse-gqzsrg14lltja2co.jpeg" alt="图片"><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择问题</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在自由系统中确定领导者非常困难。</font><font style="vertical-align: inherit;">IDS / IPS的选择取决于网络拓扑，必要的保护功能，管理员的个人喜好以及对设置进行修改的愿望。</font><font style="vertical-align: inherit;">尽管Suricata信息也很容易在网上找到，但Snort的历史较长且记录得更好。</font><font style="vertical-align: inherit;">无论如何，要掌握该系统，您都必须付出一些努力，这些努力最终都会得到回报-商业硬件和软件-硬件IDS / IPS相当昂贵，而且并不总是适合预算。</font><font style="vertical-align: inherit;">对不起，花费的时间是不值得的，因为好的管理员总是会以牺牲雇主为代价来提高技能。</font><font style="vertical-align: inherit;">在这种情况下，每个人都会受益。</font><font style="vertical-align: inherit;">在下一篇文章中，我们将介绍一些Suricata部署选项，并在实践中将更现代的系统与经典IDS / IPS Snort进行比较。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/gu/ab/cg/guabcgmwuqoopx1ar80sjpz6keq.png"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/de/0y/l-/de0yl-6ppopvisr_a80b4yuhjj8.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN506706/index.html">现代Java在处理大量数据时的性能，第1部分</a></li>
<li><a href="../zh-CN506708/index.html">VPN / Mikrotik两因素身份验证-简单且可扩展</a></li>
<li><a href="../zh-CN506710/index.html">在Zimbra Collaboration Suite开源版中管理多个通讯录</a></li>
<li><a href="../zh-CN506716/index.html">多线程线性列表：元素存在问题，性能改进和STL关系</a></li>
<li><a href="../zh-CN506726/index.html">使用Rutoken技术进行系统中用户注册和授权的经验（第2部分）</a></li>
<li><a href="../zh-CN506732/index.html">组织范围内对UI组件的重用</a></li>
<li><a href="../zh-CN506734/index.html">电网中的瞬态计算</a></li>
<li><a href="../zh-CN506736/index.html">一个班级应该有多少种方法？</a></li>
<li><a href="../zh-CN506740/index.html">如何在Power BI中使用Microsoft SQL生成报表。以Mindbox为例</a></li>
<li><a href="../zh-CN506742/index.html">为什么像素的中心应位于（0.5; 0.5）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>