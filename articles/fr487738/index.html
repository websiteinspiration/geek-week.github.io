<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎢 ✌🏻 💪🏿 Animation de schéma dans SCADA 🤘🏻 🎆 🏍️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lors de la création d'IHM, la tâche consiste souvent à construire une cartographie d'un circuit complexe d'éléments liés. Il peut s'agir de schémas de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Animation de schéma dans SCADA</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487738/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de la création d'IHM, la tâche consiste souvent à construire une cartographie d'un circuit complexe d'éléments liés. </font><font style="vertical-align: inherit;">Il peut s'agir de schémas de pipelines ramifiés, d'électricité, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez, bien entendu, vous limiter à afficher les éléments clés (vannes d'arrêt, disjoncteurs), mais plus le circuit est grand, plus il est difficile de composer une image complète et d'assurer les actions correctes de l'opérateur. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/js/86/tr/js86trkeud1o6qilw9cdjckia8s.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet article décrit la coloration des éléments de tels schémas, décrit la méthode de solution pour Simatic WinCC v7 et son implémentation dans Simargl SCADA. </font><font style="vertical-align: inherit;">Si vous n'avez pas à travailler avec WinCC, vous pouvez regarder à la fin de l'article - il y a une vidéo curieuse.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une représentation plus visuelle des raisons pour lesquelles tout cela est nécessaire, nous prenons un petit schéma simple.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zm/7-/rm/zm7-rmshnfpa9zuahdxt6m_mdfo.png" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez maintenant ce qui se passera s'il y a une opération. </font><font style="vertical-align: inherit;">Combien de temps faut-il pour suivre le cheminement d'un produit dans un système de pipeline? </font><font style="vertical-align: inherit;">Nous nous armons d'un chronomètre.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prêt? </font><font style="vertical-align: inherit;">Aller!</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/iq/l8/jt/iql8jtcvyifvukrjviudd-s4mxu.png" alt="image"></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon mes observations, cela prend 10 à 15 secondes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et rappelons maintenant que (soudainement) les opérations peuvent être plusieurs en même temps. </font><font style="vertical-align: inherit;">Cela complique «légèrement» la tâche. </font><font style="vertical-align: inherit;">Prêt à vous tester à nouveau?</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aller!</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/zl/oh/-dzloh6cxb2zcwpqzpdiwlolmm0.png" alt="image"></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traduire dans une langue décente les mots de mon collègue: «C'est une opportunité! Pendant que vous suivez le deuxième itinéraire, vous oublierez beaucoup le premier. Quel plan merveilleux et pratique! » </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le schéma est vraiment simple - il n'a même pas de lectures d'instruments et de signatures diverses (un bonjour spécial aux fans pour dessiner des tuyaux "tridimensionnels"). En pratique, les choses peuvent être pires. J'ai rencontré des régimes beaucoup plus importants (plus de 400 vannes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que peut faire un opérateur sur une telle imitation? Dans le meilleur des cas, ouvrez lentement les vannes le long du parcours et espérez qu'il ne s'est pas trompé. Mais que se passe-t-il si la commutation doit être effectuée rapidement et que le coût de l'erreur est élevé?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moyen de sortir de cette situation est évident - il est nécessaire de colorer les lignes le long de l'itinéraire, et il est conseillé de le faire avant l'action de contrôle. </font><font style="vertical-align: inherit;">Curieusement, je n'ai pas vu de solution prête à l'emploi, même avec des packages SCADA coûteux. </font><font style="vertical-align: inherit;">Une tentative de teinter manuellement pour chaque ligne menace de retarder la configuration presque à l'infini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution pour WinCC v7</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai résolu un tel problème basé sur WinCC v7. Malheureusement, aux termes du contrat, je n'ai pas le droit de proposer une solution toute faite, mais je peux décrire une solution possible. Tout à coup, quelqu'un sera utile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je noterai tout de suite qu’il s’agira de la famille de produits WinCC version 7, car il est possible d’utiliser VBA. Il faut avertir, tout ce qui est décrit ci-dessous est plus probablement un hack, est utilisé par désespoir et ne convient pas dans tous les cas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je poursuivrai la discussion en termes de tuyaux et de vannes, bien que, bien sûr, tout sera le même pour les schémas d'alimentation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Divisez mentalement le schéma en sections de sorte que de chaque côté il n'y ait qu'une seule entrée / sortie. Ceux. si une sortie est coupée dans le tuyau, trois sections devront être faites: avant la branche, puis la branche elle-même.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour créer un diagramme, vous devrez utiliser deux types d'objets graphiques standard: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
connecteur (pour dessiner des lignes) et cercle (pour créer des points de contrôle du diagramme). Le connecteur est nécessaire car il vous permet de déterminer quels objets du circuit sont connectés, contrairement à la ligne habituelle. Le cercle standard doit être refait dans CustomObject - cela évitera toute confusion lors du tri des éléments du schéma mnémonique et donnera des noms pratiques aux propriétés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une partie des points de contrôle correspondra aux joints des canalisations et une partie - aux robinets-vannes. Pour ce dernier, nous sélectionnons toute propriété inutilisée et affectons une action VBS, où nous créons une constante et lui attribuons une valeur de chaîne avec le nom de la vanne:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4a/4a/6s/4a4a6sqjj2s_tn7vq-o87itgkhk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous écrivons un script sur VBA qui passera par tous les éléments d'écran et pour chaque connecteur, créer une liste de verrous connectés indirectement, vous permettant finalement de créer du texte VBS pour la propriété BorderColor. Cela peut être obtenu en raison du fait que le connecteur a deux propriétés - TopConnectedObjectName et BottomConnectedObjectName, disponibles dans VBA. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat de ce script ressemblera à ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2j/sg/io/2jsgiom-vpl8c5vahyyd3nsutro.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D1 et D2 - tableaux avec les noms des valves; TubeColor - une fonction qui renvoie la couleur et le style de ligne en fonction de l'état des vannes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un point important: lors de l'écriture d'un script VBS dans un élément, vous devez également modifier les déclencheurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fonction TubeColor, il sera nécessaire de définir toutes les règles de coloration en fonction de la situation technologique. Bien sûr, TubeColor doit être rendu dans le script Global.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, la lutte commencera pour les performances, l'optimisation de VBS, etc., car WinCC peut difficilement transférer de grands diagrammes mnémoniques. </font><font style="vertical-align: inherit;">Mais il faut rendre hommage aux collègues de Siemens, la vitesse de VBS a considérablement augmenté, si je ne me trompe pas, par rapport à la version 7.3, ce qui a grandement simplifié la vie des développeurs de projets appliqués.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description de l'implémentation dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simargl SCADA</font></font></a></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour dessiner des schémas animés, Simargl SCADA comprend deux widgets: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SPipeScene - une scène pour dessiner des lignes et définir des règles de coloration; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SPipe - pour spécifier les points nodaux et afficher les modifications de l'état de l'équipement de terrain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essentiellement, le processus se résume à simplement placer les points nodaux du circuit, lier les propriétés aux valeurs d'étiquette et placer des widgets au-dessus de la scène qui affichent l'état de l'équipement. </font><font style="vertical-align: inherit;">Tout cela ressemble à ceci:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est curieux que pour créer le circuit réel, il n'était pas du tout nécessaire d'écrire du code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez obtenir la version de démonstration de Simargl SCADA, la documentation et les sources du projet à partir de la vidéo sur la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page Facebook</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487720/index.html">Sur le corutinisme concurrentiel (en utilisant la programmation réactive comme exemple)</a></li>
<li><a href="../fr487724/index.html">BlazingPizza: application Blazor du début à la fin. Partie 2. Ajouter un composant</a></li>
<li><a href="../fr487728/index.html">@Pythonetc compilation, janvier 2020</a></li>
<li><a href="../fr487730/index.html">Traitement du langage naturel. Résultats 2019 et tendances 2020</a></li>
<li><a href="../fr487734/index.html">Accélération du noyau Entity Framework</a></li>
<li><a href="../fr487740/index.html">Assemblage d'un magnétomètre portable</a></li>
<li><a href="../fr487742/index.html">Négociation d'arbitrage (algorithme Bellman-Ford)</a></li>
<li><a href="../fr487744/index.html">FARO présente le scanner laser laser FOCUS S 70</a></li>
<li><a href="../fr487746/index.html">Éternel</a></li>
<li><a href="../fr487748/index.html">Clé de chiffrement matériel à 3 $ - est-ce possible?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>