<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游쮫릞 游꺔 游땒 Mil millones de operaciones en la base de datos en 0.3 segundos. No compare OLTP con OLAP, pero QuestDB con PostgreSQL 游뛋游낗 游눲 游놀游낖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muy a menudo, durante mis 15 a침os de experiencia como desarrollador de software y l칤der de equipo, me encuentro con lo mismo. La programaci칩n se convi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mil millones de operaciones en la base de datos en 0.3 segundos. No compare OLTP con OLAP, pero QuestDB con PostgreSQL</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496206/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muy a menudo, durante mis 15 a침os de experiencia como desarrollador de software y l칤der de equipo, me encuentro con lo mismo. La programaci칩n se convierte en una religi칩n: rara vez alguien intenta introducir tecnolog칤a basada en una elecci칩n razonable, razonablemente, teniendo en cuenta las restricciones, la portabilidad, la evaluaci칩n del grado de apego al proveedor, el precio real, las perspectivas de la tecnolog칤a y la libertad de licencias. Los desarrolladores van a conferencias o leen publicaciones: comienzan a exagerar, y sus directores y gerentes de TI se alimentan no solo de historias de un futuro 치gil y brillante en eventos, varios visionarios, ventas y consultores. Y resulta que las tecnolog칤as estaban en el proyecto, sin tener en cuenta la conveniencia del desarrollo y la implementaci칩n, los requisitos no funcionales del proyecto, sino porque es exagerado y Google se usa a s칤 mismo,amazon recomienda (aunque sus vacantes dicen que ellos mismos no lo usan a menudo) o la gerencia de la compa침칤a tom칩 la decisi칩n m치s alta de implementar "esto".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/5o/oc/gw5ooc3vrg7l1posp3i32i1r5ng.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero la diversi칩n especial es elegir una base de datos. Cuanto mayor es el volumen de informaci칩n almacenada, cuanto m치s compleja es la estructura de datos en el proyecto y sus cambios / evoluci칩n, mayores son los requisitos de tiempo de respuesta o rendimiento, m치s costoso es el error de selecci칩n al comienzo en las etapas posteriores del proyecto.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tengo una idea de por qu칠 esto es as칤: en pocas palabras, la creaci칩n de prototipos y la comparaci칩n de diferentes tecnolog칤as es "costosa" (tiempo, licencias, capacitaci칩n o ingenier칤a inversa) y existe la tentaci칩n de activar instintos antiguos y pasar de la parte de evidencia que consume mucho tiempo a divertido y simple, tocando el abismo de la irracionalidad. Tambi칠n hice esto, y tambi칠n vi c칩mo suceden las cosas m치s rid칤culas en el trabajo de mis amigos y yo, y no solo por decisi칩n de especialistas t칠cnicos. Por lo tanto, la elecci칩n de un lenguaje de programaci칩n, marcos, colas de mensajes o proveedores en la nube tambi칠n se puede hacer sobre la base de publicaciones en redes, informes en conferencias, manuales de Gartner para gerentes o adivinaci칩n. Es una pena que no pueda contar muchas historias de mi trabajo, porque tengo miedo por mi vida despu칠s de eso ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo que afecta la elecci칩n de la base de datos.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde mi punto de vista, al elegir una base de datos, tengo que resolver al menos los siguientes compromisos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">procesamiento de transacciones en tiempo real o procesamiento anal칤tico en l칤nea</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escalable vertical u horizontalmente</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el caso de una base distribuida - consistencia de datos / disponibilidad / resistencia de separaci칩n (teorema CAP)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un esquema de datos espec칤fico y restricciones en la base de datos o almacenamiento que no requieren un esquema de datos</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo de datos: clave-valor, jer치rquico, gr치fico, documento o relacional</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l칩gica de procesamiento lo m치s cercana posible a los datos o todo el procesamiento en la aplicaci칩n</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabajar principalmente en RAM o con un subsistema de disco</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soluci칩n universal o especializada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilizamos la experiencia existente en una base de datos que no es particularmente adecuada para los requisitos del proyecto o desarrollamos una nueva en capacitaci칩n adecuada pero no familiar, "sangre y sudor" (lo mismo se aplica no solo al desarrollo, sino tambi칠n a la operaci칩n)</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incorporado o en otro proceso / red</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inconformista o retr칩grado</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo obtenemos un "regalo" para la soluci칩n implementada:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lenguaje de consulta "extranjero"</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la 칰nica API nativa para trabajar con la base de datos, lo que complicar치 la transici칩n a otras bases de datos (se gast칩 tiempo, esfuerzo de equipo y presupuesto del proyecto)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indisponibilidad de controladores para otras plataformas / idiomas / sistemas operativos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falta de c칩digos fuente, descripciones del formato de datos en el disco (o prohibici칩n de licencias de ingenier칤a inversa, especialmente Oracle con la coherencia con errores)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crecimiento de costo de licencia a침o por a침o</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ecosistema propio y dificultad para encontrar especialistas</font></font></li>
<li>    ,  , </li>
<li></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La escala horizontal de los sistemas es bastante compleja y requiere la experiencia del equipo. Los desarrolladores experimentados son bastante caros en el mercado, las aplicaciones distribuidas son m치s dif칤ciles de desarrollar, depurar y probar. Por lo tanto, si es posible cambiar el servidor a uno m치s potente y la cantidad de datos que permite el sistema, a menudo lo hacen. Ahora los servidores pueden tener terabytes de RAM y cientos de n칰cleos de procesador a bordo. Entonces, como nunca antes, es importante usar todos los recursos del servidor de la manera m치s eficiente posible. El costo de las licencias de bases de datos tambi칠n es importante, y si se venden por n칰cleos de procesador, el presupuesto operativo, incluso con escala vertical, puede costar tanto como un programa espacial de superpotencia. Por lo tanto, es importante tener esto en cuenta para no poder escalar el rendimiento de la base de datos debido a las licencias.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est치 claro que con la ayuda del marketing tratar치n de convencerlo de que solo la soluci칩n de una determinada empresa resolver치 todos sus problemas (pero no mencionan cu치ntos nuevos aparecer치n). No existe una base de datos ideal que se adapte a todos y que sea adecuada para todo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, en el futuro previsible, a칰n admitiremos varias bases de datos diferentes para procesar los mismos datos para diferentes tipos de consultas en diferentes sistemas. Sin soluciones para Data Fabric sin almacenamiento en cach칠 de datos, Data Lake a칰n no se puede comparar con bases de datos con arquitectura de paralelo en masa en t칠rminos de rendimiento y optimizaci칩n de consultas. Los datos transaccionales a칰n se almacenar치n en PostgreSQL, Oracle, MS Sql Server, las consultas anal칤ticas en Citus, Greenplum, Snowflake, Redshift, Vertica, Impala, Teradata y los pantanos de datos sin procesar en HDFS / S3 / ADLS (Azure) ser치n administrados por Dremio , Redshift Spectrum, Apache Spark, Presto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero las soluciones enumeradas anteriormente no son adecuadas para analizar datos de series temporales con un tiempo de respuesta bajo. </font><font style="vertical-align: inherit;">Seg칰n su popularidad al trabajar con datos de series temporales, ahora est치 en los favoritos de InfluxDB. </font><font style="vertical-align: inherit;">En el nicho de la base de datos en memoria, kdb + y memSQL mantienen sus lugares.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
쯈u칠 puede oponerse a todas estas soluciones </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c칩digo abierto con una licencia de Apache?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un intento de aprovechar al m치ximo el hardware para realizar consultas anal칤ticas: vectorizaci칩n de funciones de agregaci칩n, trabajar con datos a trav칠s de archivos mapeados en memoria</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL como lenguaje de consultas DML y operaciones DDL para gestionar la estructura de la base de datos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte para tablas de uni칩n espec칤ficas para series temporales DB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte para funciones de ventana y agregaci칩n en SQL</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la capacidad de incrustar una base de datos en una aplicaci칩n en la JVM</font></font></li>
<li>        JVM,        ServiceLoader</li>
<li> Influx DB line protocol (ILP)  UDP  Telegraf.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">춺What makes QuestDB faster than InfluxDB췉</a></li>
<li> PostgreSql 11           PostgreSQL: JDBC, ODBC   psql <br>
</li>
<li>   web    -  REST endpoint  ,     SQL      json <br>
</li>
<li>       ,    <br>
</li>
<li>          zero-GC API,       .<br>
</li>
<li>                  (        )<br>
</li>
<li> 64  Windows, Linux, OSX, ARM Linux    FreeBSD<br>
</li>
<li>,    open source,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cu치ndo puede serle 칰til esta base de datos: si est치 desarrollando sistemas financieros en la JVM con una latencia baja y necesita una soluci칩n para el an치lisis de datos en RAM. </font><font style="vertical-align: inherit;">Como reemplazo de kdb + debido al costo de las licencias. </font><font style="vertical-align: inherit;">Si recopila m칠tricas de acuerdo con el protocolo Influx / Telegraf, pero el rendimiento y la facilidad de uso de trabajar con InfluxDB no son satisfactorios. </font><font style="vertical-align: inherit;">Si su proyecto se ejecuta en la JVM y necesita una base de datos integrada para almacenar m칠tricas o datos de aplicaciones que solo se agregan y no se actualizan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nueva versi칩n 4.2.0 con soporte para instrucciones SIMD caus칩 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ola de comentarios </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">en Reddit</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Para que los fan치ticos participen en la competencia de conocimiento del hardware moderno y su programaci칩n efectiva, 춰recomiendo hablar con el autor de la base de datos (bluestreak01) en los comentarios!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operaciones SIMD</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El equipo del proyecto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realiz칩 una prueba</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de datos sint칠ticos y compar칩 QuestDB 4.2.0 con kdb 4.0 para agregar mil millones de valores, aprovechando las instrucciones SIMD de los procesadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la plataforma Intel 8850H: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/-z/vy/bh-zvyhql33d-ezkf9h0mudxia0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en la </font><font style="vertical-align: inherit;">plataforma </font><font style="vertical-align: inherit;">AMD Ryzen 3900X: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/f7/_d/baf7_d-6mpkifdhg8wiwtay2xle.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
est치 claro que todas estas son pruebas en un "vac칤o", pero puede comparar sus datos si su proyecto usa kdb y compartir los resultados con la comunidad.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejecutando la imagen de la base de datos de Docker</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La base de datos se publica en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dockerhub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con cada versi칩n. </font><font style="vertical-align: inherit;">Se describen m치s detalles en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci칩n del proyecto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenga la imagen de QuestDB:</font></font><br>
<br>
<pre><code class="bash hljs">docker pull questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lanzamos:</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -it -p 9000:9000 -p 8812:8812 questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu칠s de eso, puede conectarse usando el protocolo PostgreSQL al puerto 8812, la consola web est치 disponible en el puerto 9000.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acceso jdbc</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dependiendo de nuestro proyecto, agregamos el controlador jdbc </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostrgreSQL org.postgresql: postgresql: 42.2.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para esta prueba utilizo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mi m칩dulo QuestDB para testcontainers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La prueba est치 disponible</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en github junto con el script de compilaci칩n:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.assertj.core.api.Assertions.*;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbDriverTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">containerIsUpTestByJdbcInvocation</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">try</span> (Connection connection = DriverManager.getConnection(<span class="hljs-string">"jdbc:tc:questdb:///?user=admin&amp;password=quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La ejecuci칩n de Docker genera una sobrecarga adicional, y esto se puede evitar simplemente implementando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.questdb: core: jar: 4.2.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como una dependencia del proyecto y ejecutando io.questdb.ServerMain:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.ServerMain;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbJdbcTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">embeddedServerStartTest</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        ServerMain.main(<span class="hljs-keyword">new</span> String[]{<span class="hljs-string">"-d"</span>, tempDir.toString()});
        <span class="hljs-keyword">try</span> (DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:8812/"</span>, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incrustar en la aplicaci칩n Java</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero esta es la forma m치s r치pida de trabajar con la base de datos utilizando la API de Java en proceso:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.cairo.CairoEngine;
<span class="hljs-keyword">import</span> io.questdb.cairo.DefaultCairoConfiguration;
<span class="hljs-keyword">import</span> io.questdb.griffin.CompiledQuery;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlCompiler;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlExecutionContextImpl;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TruncateExecuteTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">truncate</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        SqlExecutionContextImpl executionContext = <span class="hljs-keyword">new</span> SqlExecutionContextImpl();<font></font>
        DefaultCairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(tempDir.toAbsolutePath().toString());
        <span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {
            <span class="hljs-keyword">try</span> (SqlCompiler compiler = <span class="hljs-keyword">new</span> SqlCompiler(engine)) {<font></font>
                CompiledQuery createTable = compiler.compile(<span class="hljs-string">"create table tr_table(id long,name string)"</span>, executionContext);<font></font>
                compiler.compile(<span class="hljs-string">"truncate table tr_table"</span>, executionContext);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consola web</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proyecto incluye una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consola web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para consultar QuestDB </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5v/_w/bb/5v_wbbpw-roh7cbrv7jpivazvgc.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y descargar datos a una base de datos en formato csv a trav칠s de un navegador.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/ya/lu/fwyalug09h88tp3iyaeyotztxoo.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">쯅ecesitas otra base de datos?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este proyecto es joven y a칰n carece de algunas caracter칤sticas corporativas, pero se est치 desarrollando bastante r치pido y varios colaboradores est치n trabajando activamente en el proyecto. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">He estado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> siguiendo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">QuestDB</font></a><font style="vertical-align: inherit;"> desde agosto pasado y desarroll칠 un par de extensiones para este proyecto ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funci칩n jdbc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osquery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), y tambi칠n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">integr칠 este proyecto con testcontainers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ahora estoy tratando de resolver mis problemas actuales en Dremio con la carga de datos incremental, la partici칩n de datos y las transacciones largas a las fuentes de datos en producci칩n usando QuestDB, complementando con funciones de exportaci칩n de datos. Planeo compartir mi experiencia en las siguientes publicaciones. Me soborna especialmente porque puedo depurar mis funciones y mi base de datos en la plataforma con la que estoy familiarizado, escribir pruebas unitarias que se ejecutan a la velocidad de la luz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T칰 decides como desarrollador experimentado. Una vez m치s, QuestDB no es un reemplazo para las bases de datos OLTP: PostgreSQL, Oracle, MS Sql Server, DB2 o incluso un reemplazo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H2 para las pruebas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la JVM </font><font style="vertical-align: inherit;">Esta es una poderosa base de datos especializada de c칩digo abierto con soporte para los protocolos de red PostgreSQL, Influx / Telegraf. </font><font style="vertical-align: inherit;">Si su escenario de uso se ajusta a las caracter칤sticas que se implementan en 칠l y al escenario principal de usar una base de datos de columnas, 춰entonces la elecci칩n est치 justificada!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es496192/index.html">Funciones de llamada de 칩xido desde Go</a></li>
<li><a href="../es496194/index.html">Sobre la binarizaci칩n de im치genes tomogr치ficas de estructura fina</a></li>
<li><a href="../es496196/index.html">Conferencia DEFCON 26. Meneando la cola: vigilancia pasiva encubierta. Parte 1</a></li>
<li><a href="../es496198/index.html">Presentaciones del segundo ROS Meetup sobre robots de entrenamiento</a></li>
<li><a href="../es496204/index.html">Actualizaci칩n del proceso de CI / CD: preparaci칩n y planificaci칩n</a></li>
<li><a href="../es496208/index.html">C칩mo JIT integra nuestro c칩digo C # (heur칤stica)</a></li>
<li><a href="../es496210/index.html">La biodiversidad puede haber evolucionado desde el principio de jugar piedra, papel o tijera</a></li>
<li><a href="../es496212/index.html"># 04 - Y un byte completo no es suficiente ... | Toma a BK por los cuernos</a></li>
<li><a href="../es496214/index.html">AdColony: el 89% de los editores de aplicaciones y juegos m칩viles usan videos promocionales</a></li>
<li><a href="../es496216/index.html">Tienda oscura: 쯫a est치s pensando en esto?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>