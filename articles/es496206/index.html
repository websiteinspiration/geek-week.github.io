<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏻 🌱 😇 Mil millones de operaciones en la base de datos en 0.3 segundos. No compare OLTP con OLAP, pero QuestDB con PostgreSQL 🚵🏽 💴 👩🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muy a menudo, durante mis 15 años de experiencia como desarrollador de software y líder de equipo, me encuentro con lo mismo. La programación se convi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mil millones de operaciones en la base de datos en 0.3 segundos. No compare OLTP con OLAP, pero QuestDB con PostgreSQL</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496206/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muy a menudo, durante mis 15 años de experiencia como desarrollador de software y líder de equipo, me encuentro con lo mismo. La programación se convierte en una religión: rara vez alguien intenta introducir tecnología basada en una elección razonable, razonablemente, teniendo en cuenta las restricciones, la portabilidad, la evaluación del grado de apego al proveedor, el precio real, las perspectivas de la tecnología y la libertad de licencias. Los desarrolladores van a conferencias o leen publicaciones: comienzan a exagerar, y sus directores y gerentes de TI se alimentan no solo de historias de un futuro ágil y brillante en eventos, varios visionarios, ventas y consultores. Y resulta que las tecnologías estaban en el proyecto, sin tener en cuenta la conveniencia del desarrollo y la implementación, los requisitos no funcionales del proyecto, sino porque es exagerado y Google se usa a sí mismo,amazon recomienda (aunque sus vacantes dicen que ellos mismos no lo usan a menudo) o la gerencia de la compañía tomó la decisión más alta de implementar "esto".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/5o/oc/gw5ooc3vrg7l1posp3i32i1r5ng.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero la diversión especial es elegir una base de datos. Cuanto mayor es el volumen de información almacenada, cuanto más compleja es la estructura de datos en el proyecto y sus cambios / evolución, mayores son los requisitos de tiempo de respuesta o rendimiento, más costoso es el error de selección al comienzo en las etapas posteriores del proyecto.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tengo una idea de por qué esto es así: en pocas palabras, la creación de prototipos y la comparación de diferentes tecnologías es "costosa" (tiempo, licencias, capacitación o ingeniería inversa) y existe la tentación de activar instintos antiguos y pasar de la parte de evidencia que consume mucho tiempo a divertido y simple, tocando el abismo de la irracionalidad. También hice esto, y también vi cómo suceden las cosas más ridículas en el trabajo de mis amigos y yo, y no solo por decisión de especialistas técnicos. Por lo tanto, la elección de un lenguaje de programación, marcos, colas de mensajes o proveedores en la nube también se puede hacer sobre la base de publicaciones en redes, informes en conferencias, manuales de Gartner para gerentes o adivinación. Es una pena que no pueda contar muchas historias de mi trabajo, porque tengo miedo por mi vida después de eso ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo que afecta la elección de la base de datos.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde mi punto de vista, al elegir una base de datos, tengo que resolver al menos los siguientes compromisos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">procesamiento de transacciones en tiempo real o procesamiento analítico en línea</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escalable vertical u horizontalmente</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el caso de una base distribuida - consistencia de datos / disponibilidad / resistencia de separación (teorema CAP)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un esquema de datos específico y restricciones en la base de datos o almacenamiento que no requieren un esquema de datos</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo de datos: clave-valor, jerárquico, gráfico, documento o relacional</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lógica de procesamiento lo más cercana posible a los datos o todo el procesamiento en la aplicación</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabajar principalmente en RAM o con un subsistema de disco</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solución universal o especializada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilizamos la experiencia existente en una base de datos que no es particularmente adecuada para los requisitos del proyecto o desarrollamos una nueva en capacitación adecuada pero no familiar, "sangre y sudor" (lo mismo se aplica no solo al desarrollo, sino también a la operación)</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incorporado o en otro proceso / red</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inconformista o retrógrado</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo obtenemos un "regalo" para la solución implementada:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lenguaje de consulta "extranjero"</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la única API nativa para trabajar con la base de datos, lo que complicará la transición a otras bases de datos (se gastó tiempo, esfuerzo de equipo y presupuesto del proyecto)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indisponibilidad de controladores para otras plataformas / idiomas / sistemas operativos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falta de códigos fuente, descripciones del formato de datos en el disco (o prohibición de licencias de ingeniería inversa, especialmente Oracle con la coherencia con errores)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crecimiento de costo de licencia año por año</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ecosistema propio y dificultad para encontrar especialistas</font></font></li>
<li>    ,  , </li>
<li></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La escala horizontal de los sistemas es bastante compleja y requiere la experiencia del equipo. Los desarrolladores experimentados son bastante caros en el mercado, las aplicaciones distribuidas son más difíciles de desarrollar, depurar y probar. Por lo tanto, si es posible cambiar el servidor a uno más potente y la cantidad de datos que permite el sistema, a menudo lo hacen. Ahora los servidores pueden tener terabytes de RAM y cientos de núcleos de procesador a bordo. Entonces, como nunca antes, es importante usar todos los recursos del servidor de la manera más eficiente posible. El costo de las licencias de bases de datos también es importante, y si se venden por núcleos de procesador, el presupuesto operativo, incluso con escala vertical, puede costar tanto como un programa espacial de superpotencia. Por lo tanto, es importante tener esto en cuenta para no poder escalar el rendimiento de la base de datos debido a las licencias.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Está claro que con la ayuda del marketing tratarán de convencerlo de que solo la solución de una determinada empresa resolverá todos sus problemas (pero no mencionan cuántos nuevos aparecerán). No existe una base de datos ideal que se adapte a todos y que sea adecuada para todo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, en el futuro previsible, aún admitiremos varias bases de datos diferentes para procesar los mismos datos para diferentes tipos de consultas en diferentes sistemas. Sin soluciones para Data Fabric sin almacenamiento en caché de datos, Data Lake aún no se puede comparar con bases de datos con arquitectura de paralelo en masa en términos de rendimiento y optimización de consultas. Los datos transaccionales aún se almacenarán en PostgreSQL, Oracle, MS Sql Server, las consultas analíticas en Citus, Greenplum, Snowflake, Redshift, Vertica, Impala, Teradata y los pantanos de datos sin procesar en HDFS / S3 / ADLS (Azure) serán administrados por Dremio , Redshift Spectrum, Apache Spark, Presto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero las soluciones enumeradas anteriormente no son adecuadas para analizar datos de series temporales con un tiempo de respuesta bajo. </font><font style="vertical-align: inherit;">Según su popularidad al trabajar con datos de series temporales, ahora está en los favoritos de InfluxDB. </font><font style="vertical-align: inherit;">En el nicho de la base de datos en memoria, kdb + y memSQL mantienen sus lugares.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué puede oponerse a todas estas soluciones </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> código abierto con una licencia de Apache?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un intento de aprovechar al máximo el hardware para realizar consultas analíticas: vectorización de funciones de agregación, trabajar con datos a través de archivos mapeados en memoria</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL como lenguaje de consultas DML y operaciones DDL para gestionar la estructura de la base de datos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte para tablas de unión específicas para series temporales DB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soporte para funciones de ventana y agregación en SQL</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la capacidad de incrustar una base de datos en una aplicación en la JVM</font></font></li>
<li>        JVM,        ServiceLoader</li>
<li> Influx DB line protocol (ILP)  UDP  Telegraf.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">«What makes QuestDB faster than InfluxDB»</a></li>
<li> PostgreSql 11           PostgreSQL: JDBC, ODBC   psql <br>
</li>
<li>   web    -  REST endpoint  ,     SQL      json <br>
</li>
<li>       ,    <br>
</li>
<li>          zero-GC API,       .<br>
</li>
<li>                  (        )<br>
</li>
<li> 64  Windows, Linux, OSX, ARM Linux    FreeBSD<br>
</li>
<li>,    open source,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuándo puede serle útil esta base de datos: si está desarrollando sistemas financieros en la JVM con una latencia baja y necesita una solución para el análisis de datos en RAM. </font><font style="vertical-align: inherit;">Como reemplazo de kdb + debido al costo de las licencias. </font><font style="vertical-align: inherit;">Si recopila métricas de acuerdo con el protocolo Influx / Telegraf, pero el rendimiento y la facilidad de uso de trabajar con InfluxDB no son satisfactorios. </font><font style="vertical-align: inherit;">Si su proyecto se ejecuta en la JVM y necesita una base de datos integrada para almacenar métricas o datos de aplicaciones que solo se agregan y no se actualizan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La nueva versión 4.2.0 con soporte para instrucciones SIMD causó </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ola de comentarios </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">en Reddit</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Para que los fanáticos participen en la competencia de conocimiento del hardware moderno y su programación efectiva, ¡recomiendo hablar con el autor de la base de datos (bluestreak01) en los comentarios!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operaciones SIMD</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El equipo del proyecto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realizó una prueba</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de datos sintéticos y comparó QuestDB 4.2.0 con kdb 4.0 para agregar mil millones de valores, aprovechando las instrucciones SIMD de los procesadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la plataforma Intel 8850H: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/-z/vy/bh-zvyhql33d-ezkf9h0mudxia0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en la </font><font style="vertical-align: inherit;">plataforma </font><font style="vertical-align: inherit;">AMD Ryzen 3900X: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/f7/_d/baf7_d-6mpkifdhg8wiwtay2xle.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
está claro que todas estas son pruebas en un "vacío", pero puede comparar sus datos si su proyecto usa kdb y compartir los resultados con la comunidad.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejecutando la imagen de la base de datos de Docker</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La base de datos se publica en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dockerhub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con cada versión. </font><font style="vertical-align: inherit;">Se describen más detalles en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación del proyecto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenga la imagen de QuestDB:</font></font><br>
<br>
<pre><code class="bash hljs">docker pull questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lanzamos:</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -it -p 9000:9000 -p 8812:8812 questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de eso, puede conectarse usando el protocolo PostgreSQL al puerto 8812, la consola web está disponible en el puerto 9000.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acceso jdbc</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dependiendo de nuestro proyecto, agregamos el controlador jdbc </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostrgreSQL org.postgresql: postgresql: 42.2.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para esta prueba utilizo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mi módulo QuestDB para testcontainers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La prueba está disponible</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en github junto con el script de compilación:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.assertj.core.api.Assertions.*;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbDriverTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">containerIsUpTestByJdbcInvocation</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">try</span> (Connection connection = DriverManager.getConnection(<span class="hljs-string">"jdbc:tc:questdb:///?user=admin&amp;password=quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La ejecución de Docker genera una sobrecarga adicional, y esto se puede evitar simplemente implementando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.questdb: core: jar: 4.2.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como una dependencia del proyecto y ejecutando io.questdb.ServerMain:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.ServerMain;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbJdbcTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">embeddedServerStartTest</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        ServerMain.main(<span class="hljs-keyword">new</span> String[]{<span class="hljs-string">"-d"</span>, tempDir.toString()});
        <span class="hljs-keyword">try</span> (DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:8812/"</span>, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incrustar en la aplicación Java</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero esta es la forma más rápida de trabajar con la base de datos utilizando la API de Java en proceso:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.cairo.CairoEngine;
<span class="hljs-keyword">import</span> io.questdb.cairo.DefaultCairoConfiguration;
<span class="hljs-keyword">import</span> io.questdb.griffin.CompiledQuery;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlCompiler;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlExecutionContextImpl;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TruncateExecuteTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">truncate</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        SqlExecutionContextImpl executionContext = <span class="hljs-keyword">new</span> SqlExecutionContextImpl();<font></font>
        DefaultCairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(tempDir.toAbsolutePath().toString());
        <span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {
            <span class="hljs-keyword">try</span> (SqlCompiler compiler = <span class="hljs-keyword">new</span> SqlCompiler(engine)) {<font></font>
                CompiledQuery createTable = compiler.compile(<span class="hljs-string">"create table tr_table(id long,name string)"</span>, executionContext);<font></font>
                compiler.compile(<span class="hljs-string">"truncate table tr_table"</span>, executionContext);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consola web</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proyecto incluye una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consola web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para consultar QuestDB </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5v/_w/bb/5v_wbbpw-roh7cbrv7jpivazvgc.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y descargar datos a una base de datos en formato csv a través de un navegador.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/ya/lu/fwyalug09h88tp3iyaeyotztxoo.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Necesitas otra base de datos?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este proyecto es joven y aún carece de algunas características corporativas, pero se está desarrollando bastante rápido y varios colaboradores están trabajando activamente en el proyecto. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">He estado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> siguiendo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">QuestDB</font></a><font style="vertical-align: inherit;"> desde agosto pasado y desarrollé un par de extensiones para este proyecto ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">función jdbc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osquery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), y también </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">integré este proyecto con testcontainers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ahora estoy tratando de resolver mis problemas actuales en Dremio con la carga de datos incremental, la partición de datos y las transacciones largas a las fuentes de datos en producción usando QuestDB, complementando con funciones de exportación de datos. Planeo compartir mi experiencia en las siguientes publicaciones. Me soborna especialmente porque puedo depurar mis funciones y mi base de datos en la plataforma con la que estoy familiarizado, escribir pruebas unitarias que se ejecutan a la velocidad de la luz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tú decides como desarrollador experimentado. Una vez más, QuestDB no es un reemplazo para las bases de datos OLTP: PostgreSQL, Oracle, MS Sql Server, DB2 o incluso un reemplazo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H2 para las pruebas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la JVM </font><font style="vertical-align: inherit;">Esta es una poderosa base de datos especializada de código abierto con soporte para los protocolos de red PostgreSQL, Influx / Telegraf. </font><font style="vertical-align: inherit;">Si su escenario de uso se ajusta a las características que se implementan en él y al escenario principal de usar una base de datos de columnas, ¡entonces la elección está justificada!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es496192/index.html">Funciones de llamada de óxido desde Go</a></li>
<li><a href="../es496194/index.html">Sobre la binarización de imágenes tomográficas de estructura fina</a></li>
<li><a href="../es496196/index.html">Conferencia DEFCON 26. Meneando la cola: vigilancia pasiva encubierta. Parte 1</a></li>
<li><a href="../es496198/index.html">Presentaciones del segundo ROS Meetup sobre robots de entrenamiento</a></li>
<li><a href="../es496204/index.html">Actualización del proceso de CI / CD: preparación y planificación</a></li>
<li><a href="../es496208/index.html">Cómo JIT integra nuestro código C # (heurística)</a></li>
<li><a href="../es496210/index.html">La biodiversidad puede haber evolucionado desde el principio de jugar piedra, papel o tijera</a></li>
<li><a href="../es496212/index.html"># 04 - Y un byte completo no es suficiente ... | Toma a BK por los cuernos</a></li>
<li><a href="../es496214/index.html">AdColony: el 89% de los editores de aplicaciones y juegos móviles usan videos promocionales</a></li>
<li><a href="../es496216/index.html">Tienda oscura: ¿ya estás pensando en esto?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>