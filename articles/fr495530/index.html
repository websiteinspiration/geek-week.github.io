<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏿 👊🏿 🤽🏾 Convertisseur matériel HDMI-RGB (18/24 bits) 👆🏽 👏🏾 💭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 
 
 
 
 Et encore une fois, mon article sera consacré au convertisseur vidéo. Cette fois, ce sera HDMI-RGB. Je veux consacrer l'article...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Convertisseur matériel HDMI-RGB (18/24 bits)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495530/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iy/fw/jv/iyfwjv5jzvhjv7y3ds2x6l5eujs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et encore une fois, mon article sera consacré au convertisseur vidéo. </font><font style="vertical-align: inherit;">Cette fois, ce sera HDMI-RGB. </font><font style="vertical-align: inherit;">Je veux consacrer l'article non spécifiquement au développement, mais à un problème avec les couleurs qui est survenu lorsque j'ai connecté une matrice 18 bits à un pilote 24 bits.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un de mes précédents articles, j'ai écrit sur le convertisseur HDMI-LVDS, avec conversion intermédiaire en RGB ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDMI-LVDS. De la mise en page à la sortie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Pour la base du nouveau développement, j'ai décidé de prendre la même puce TFP401 (HDMI-RGB) de Texas Instruments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai développé la carte dans les mêmes dimensions, laissé le microcontrôleur avec les mêmes fonctionnalités (contrôle du mode veille, traitement des boutons, contrôle du rétroéclairage matriciel). Comme le contrôleur a été développé pour une matrice spécifique (et, par conséquent, un câble prêt à l'emploi), nous avons également dû installer un connecteur RVB spécifique, avec un pas de 1,25 mm. Il existe deux connecteurs de ce type sur la carte, ainsi que pour la connexion des pilotes de rétro-éclairage, car il est nécessaire de dupliquer l'image sur deux matrices en même temps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un peu distrait. Plus tôt, j'ai déjà fait la duplication des interfaces LVDS et HDMI dans mes projets. Au début, j'ai essayé d'utiliser des microcircuits spécialisés, mais ensuite je les ai refusés, et j'ai commencé à connecter deux connecteurs en parallèle (pour HDMI, I2C doit être arraché pour qu'il n'y ait pas de conflits sur le bus). Cette option fonctionne très bien sur tous les panneaux, y compris plus de 42 pouces. Il n'y a rien à redire sur l'image. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur cette carte aussi, j'ai simplement dupliqué les connecteurs RVB et pris le contrôle des longueurs des conducteurs. Tous les tests ont été effectués sur une matrice. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/n8/ff/pon8fftlexopvxf5k8gl6hqkou4.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1. Image de la matrice</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La première inclusion m'a un peu perplexe. Les distorsions sont particulièrement visibles sur la photo du bas de la figure 1. Il est immédiatement devenu clair que le problème était en «témoin» - il n'y a pas de bits significatifs dans toutes les couleurs. Mais comment trouver un problème, car selon le schéma, tous les bits arrivent à la matrice "un à un"? J'ai déjà vu un problème similaire lors de la connexion de matrices de couleurs 6 bits à mon convertisseur, mais je ne l'ai pas étudié, car nous ne fournissons des produits que pour des matrices 8 bits. Il a commencé à creuser Internet à la recherche d'une solution au problème. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/si/6i/gksi6iun9qyhhsqx9oho28pgj38.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.2. Circuit de sortie RVB avec TFP401</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant longtemps, je n'ai pu trouver aucune information sur l'utilisation du TFP401 en mode 18 bits. Dans la fiche technique, 24 bits est indiqué en noir et blanc. Si vous y réfléchissez, cela ne devrait pas affecter l'image elle-même - juste une perte de qualité et c'est tout. L'expression sur le forum TI (le service d'assistance a répondu aux questions des utilisateurs) que le TFP401 n'est pas en mesure de passer automatiquement en mode de fonctionnement 18 bits (ce qui est déjà clair dans la documentation) et qu'il est nécessaire de «reconnecter» le panneau aidé. Cela suggère qu'il y a encore un moyen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ex/_q/bn/ex_qbnekgcvc0ajo2aibysaq9_a.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.3. Connexion d'une matrice NL6448BC33-70F à partir d'une fiche technique</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, j'ai commencé à étudier la fiche technique sur le panneau - rien n'a changé, 6 bits par canal. En 2014, lors du développement du convertisseur HDMI-LVDS, je suis tombé sur certains documents disant que vous devez décaler les bits pour utiliser le mode 18 bits, mais je ne me souviens pas du nombre de bits. Il recommença à chercher des informations, mais déjà délibérément par le décalage, et, purement par hasard, tomba sur un document dans lequel le tableau ci-dessous apparaissait! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/67/18/bf/6718bfockfyk8300nizesrprj1w.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.4. 24 bits et 18 bits</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ainsi, pour connecter une matrice 18 bits et une puce 24 bits, je dois effectuer la connexion conformément au tableau de la figure 4. Autrement dit, je dois connecter le R0 de l'écran au TFP401 R2 et ainsi de suite. Étant donné que j'ai un connecteur sur le câble, je viens de «retordre» le câble. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/tr/tx/pytrtx7sryvgdnh_tamy9jh9wr0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.5. Image de brochage correcte</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici les mêmes images, mais après le repiquage. </font><font style="vertical-align: inherit;">Tout s'est mis en place. </font><font style="vertical-align: inherit;">La qualité est revenue à des gradients normaux et nets. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/l7/h0/dll7h04e0wnwl6_r8qyg6heqvtw.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.6. </font><font style="vertical-align: inherit;">Apparence du convertisseur avec le pilote connecté (LD1263) et la matrice Fig.7 </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/n7/v8/o2/n7v8o2z-slvuq6xh0sqnaagnhti.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">640 * 480 ....... </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Altium, bien sûr, travailler n'est pas très pratique, mais l'image est excellente. </font><font style="vertical-align: inherit;">Convient pour les tableaux de bord à faible coût, la visualisation de toutes les interfaces, etc., si vous ajoutez une touche, vous pouvez l'utiliser, par exemple, pour les automates. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'à présent, il n'a pas été possible de connecter deux matrices en même temps (la seconde n'est pas disponible), mais je pense qu'il n'y aura pas de problème. </font><font style="vertical-align: inherit;">Plus tard, je me désinscrire et ajouterai une photo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci pour l'attention!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495516/index.html">Le modèle Visitor est déconseillé pour Kotlin, mais il vaut la peine de le savoir</a></li>
<li><a href="../fr495518/index.html">Réagir au développement du formulaire. Les principes KISS, YAGNI, DRY en pratique</a></li>
<li><a href="../fr495520/index.html">Liste de contrôle pour un architecte</a></li>
<li><a href="../fr495524/index.html">Quel langage de programmation apprendre pour que les grandes entreprises RH cherchent pour vous</a></li>
<li><a href="../fr495526/index.html">Organisation de l'accès à distance via Fortinet</a></li>
<li><a href="../fr495532/index.html">Comment les grandes entreprises informatiques ont transféré leur personnel au travail à distance</a></li>
<li><a href="../fr495534/index.html">Conférence Zabbix Russie 2020: la conférence reportée</a></li>
<li><a href="../fr495538/index.html">Le projet "Verre". Partie 2. Sucre, murs isolés et soufflage ou non soufflage</a></li>
<li><a href="../fr495540/index.html">Comment échapper à l'agenda des nouvelles et se détendre: les podcasts, les films et la musique vous aideront</a></li>
<li><a href="../fr495542/index.html">Carte graphique VGA simple faite maison</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>