<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèº ‚ôëÔ∏è üë∂üèø Loghouse 0.3 - the long-awaited update of our logging system in Kubernetes ü§û üïØÔ∏è üôÖüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Flant has a number of Open Source developments, primarily for Kubernetes, and loghouse is one of the most popular. This is our central logging tool in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Loghouse 0.3 - the long-awaited update of our logging system in Kubernetes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/493158/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flant has a number of Open Source developments, primarily for Kubernetes, and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loghouse</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is one of the most popular. </font><font style="vertical-align: inherit;">This is our central logging tool in K8s, which </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">was introduced</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> more than 2 years ago. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ac/qe/lz/acqelzxpdkabvtthknpon8dnv1g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As we mentioned in a recent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article about the logs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , it required refinement, and its relevance only grew over time. </font><font style="vertical-align: inherit;">Today we are pleased to introduce a new version of loghouse - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.3.0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Details about her - under the cut.</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">disadvantages</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have been using loghouse in many Kubernetes clusters all this time, and in general, this solution suits both ourselves and the various clients to whom we also provide access. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Its main </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">advantages</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are its simple and intuitive interface, the ability to execute SQL queries, good compression and low resource consumption when inserting data into the database, as well as low overhead during storage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The most painful </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">problems</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in loghouse during operation:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> use of partition tables joined by a merge table;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lack of a buffer that would smooth out bursts of logs;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Outdated and potentially vulnerable web panel gem</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outdated fluentd ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loghouse-fluentd: latest</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> did not start due to a problematic gemset).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, a significant number of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">issues</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> have accumulated </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">on GitHub</font></a><font style="vertical-align: inherit;"> , which I would also like to solve.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Major changes in loghouse 0.3.0</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, we have accumulated enough changes, but we will highlight the most important ones. </font><font style="vertical-align: inherit;">They can be divided into 3 main groups:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> improving log storage and database schema;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> improved log collection;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the appearance of monitoring.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Improvements in log storage and database design</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Key innovations:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Log storage schemes have changed, the transition </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to work with a single table and the rejection of partition tables has been completed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base cleaning mechanism</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> built into ClickHouse of the latest versions has begun to </font><font style="vertical-align: inherit;">be applied </font><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now you can </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">use an external ClickHouse installation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , even in cluster mode.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compare the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance of the old and new circuits</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in a real project. </font><font style="vertical-align: inherit;">Here is an example of searching for unique URLs in the application logs of the popular online resource </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dtf.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> 
    string_fields.values[indexOf(string_fields.names, <span class="hljs-string">'path'</span>)] <span class="hljs-keyword">AS</span> <span class="hljs-keyword">path</span>, 
    <span class="hljs-keyword">count</span>(*) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">count</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">logs</span>
<span class="hljs-keyword">WHERE</span> (namespace = <span class="hljs-string">'kube-nginx-ingress'</span>) <span class="hljs-keyword">AND</span> ((string_fields.values[indexOf(string_fields.names, <span class="hljs-string">'vhost'</span>)]) <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%foobar.baz%'</span>) <span class="hljs-keyword">AND</span> (<span class="hljs-built_in">date</span> = <span class="hljs-string">'2020-02-29'</span>)
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> string_fields.values[indexOf(string_fields.names, <span class="hljs-string">'path'</span>)]
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">count</span> <span class="hljs-keyword">DESC</span>
<span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selection takes place over tens of millions of records. </font><font style="vertical-align: inherit;">The old scheme worked out in 20 seconds: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qx/ws/cg/qxwscgrtd4sjpjxd5njk4l9cgp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
New - in 14: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sl/ra/n6/slran6jzocb2yzljkocrkeap5vs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you use our </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helm-chart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , then when updating the loghouse the database will be automatically migrated to the new format. </font><font style="vertical-align: inherit;">Otherwise, you will have to do the migration manually. </font><font style="vertical-align: inherit;">The process is described in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In short, just run:</font></font><br>
<br>
<pre><code class="bash hljs">DO_DB_DEPLOY=<span class="hljs-literal">true</span> rake create_logs_tables</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, we started using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL for ClickHouse tables</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This allows you to automatically delete data from the database that is older than the specified time interval:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">logs</span><font></font>
(<font></font>
....<font></font>
)<font></font>
  <span class="hljs-keyword">ENGINE</span> = MergeTree()
  <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> (<span class="hljs-built_in">date</span>)
  <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> (<span class="hljs-built_in">timestamp</span>, nsec, namespace, container_name)<font></font>
  TTL <span class="hljs-built_in">date</span> + toIntervalDay(<span class="hljs-number">14</span>)
  <span class="hljs-keyword">SETTINGS</span> index_granularity = <span class="hljs-number">32768</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examples of database schemas and configs for ClickHouse, including an example of working with the CH cluster, can be found in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Improved log collection</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Key innovations:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffer has been</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> added </font><font style="vertical-align: inherit;">that is designed to smooth out bursts when a large number of logs appear.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implemented the ability to </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">send logs to the loghouse directly</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from the application: over TCP and UDP, in JSON format.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The loghouse battery in loghouse is a new table </font></font><code>logs_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">added to the database schema. </font><font style="vertical-align: inherit;">This table is in-memory, i.e. </font><font style="vertical-align: inherit;">stored in RAM (has a special type of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buffer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ); </font><font style="vertical-align: inherit;">it is she who should smooth the load on the base. </font><font style="vertical-align: inherit;">Thanks </font><font style="vertical-align: inherit;">for the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on adding it.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sovigod</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The implemented sending logs directly to loghouse from the application allows you to do this even through netcat:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">echo</span> <span class="hljs-string">'{"log": {"level": "info", "msg": "hello world"}}'</span> | nc fluentd.loghouse 5170</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These logs can be viewed in the namespace where loghouse is installed in the stream </font></font><code>net</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ii/as/pp/iiasppd5mr1xfl335vemk-cp2h0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Requirements for the data to be sent are minimal: the message must be a valid JSON with a field </font></font><code>log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The field </font></font><code>log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, in turn, can be either a string or nested JSON.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitoring Logging Subsystem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An important improvement was the monitoring of fluentd through Prometheus. </font><font style="vertical-align: inherit;">Now the loghouse comes with a panel for Grafana, which displays all the basic metrics, such as:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> number of fluentd workers;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> number of events sent to ClickHouse;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> free buffer size in percent.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The panel code for Grafana can be seen in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The panel for ClickHouse is</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> made on the basis of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a ready-made product</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - from </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f1yegor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , for which many thanks to the author. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, the panel displays the number of connections to ClickHouse, the use of the buffer, the activity of background tasks and the number of merges. This is enough to understand the state of the system: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/pv/lm/ggpvlmvrkdiqpfwk9pea-7-09re.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The panel for fluentd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shows the active instances of fluentd. This is especially critical for those who do not want / cannot lose logs at all:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gm/sy/si/gmsysi96zdxhm89qhwtzb_a9k30.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to the status of pods, the panel shows the load on the queue for sending logs to ClickHouse. </font><font style="vertical-align: inherit;">In turn, you can understand if ClickHouse is handling the load or not. </font><font style="vertical-align: inherit;">In cases where the log cannot be lost, this parameter also becomes critical. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examples of panels are sharpened for our supply of Prometheus Operator, however, they are easily modified through the variables in the settings. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally, as part of the loghouse monitoring work, we put together an up-to-date Docker image with </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clickhouse_exporter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0.1.0 released by Percona Labs, as the author of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original clickhouse_exporter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abandoned his repository.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Future plans</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Make it possible to deploy a ClickHouse cluster in Kubernetes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Make work with the selection of logs asynchronous and remove it from the Ruby part of the backend. </font></font></li>
<li>  Ruby-    ,     .</li>
<li> ,     Go.</li>
<li>   .</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's nice to see that the loghouse project found its audience, not only winning stars in GitHub (600+), but also encouraging real users to talk about their successes and problems. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Having created loghouse more than 2 years ago, we were not sure of its prospects, expecting that the market and / or the Open Source community would offer the best solutions. </font><font style="vertical-align: inherit;">However, today we see that this is a viable path, which we ourselves still choose and use on the many serviced Kubernetes clusters. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are looking forward to any assistance in improving and developing the loghouse. </font><font style="vertical-align: inherit;">If you are missing something in the loghouse - write in the comments. </font><font style="vertical-align: inherit;">Also, of course, we will be happy to be active on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Read also in our blog:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logs in Kubernetes (and not only) today: expectations and reality</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù;</font></font></li>
<li> ¬´<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> loghouse ‚Äî Open Source-      Kubernetes</a>¬ª.</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493140/index.html">The Adventures of Cipollino: Quarantine IT Quest from Flant</a></li>
<li><a href="../en493142/index.html">‚ÄúLet's use Kubernetes!‚Äù You now have 8 problems</a></li>
<li><a href="../en493146/index.html">Exciting side projects that you can do today</a></li>
<li><a href="../en493150/index.html">"Remote" with a Cisco router</a></li>
<li><a href="../en493152/index.html">Neural networks and Process Mining: trying to make friends</a></li>
<li><a href="../en493160/index.html">How we improved Smart Search on hh.ru in 2019: infographics</a></li>
<li><a href="../en493162/index.html">An open list of online meetings and conferences</a></li>
<li><a href="../en493164/index.html">It turns out that the online business is surviving in the current environment. Why? DNA deleted</a></li>
<li><a href="../en493166/index.html">Ontol: a selection of articles on "burnout" [100+]</a></li>
<li><a href="../en493168/index.html">Pipipax calculator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>