<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😼 🐜 🥅 モノリスの物語 🥇 🏡 🐑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="第1部では、2GIS内部製品の外観と、いくつかのスクリプトから本格的なアプリケーションへのデータ配信システムの進化について、読者が簡単に説明します。
 
 今日は、9年前にDublGISで始まったストーリーをお伝えします。
 
 そこに就職したばかりです。外部製品の大規模な内部システムからデータをエ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>モノリスの物語</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/2gis/blog/464149/"><img src="https://habrastorage.org/webt/ey/y4/pm/eyy4pmvrfn_bptplc1fl0vt9kpu.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1部では、2GIS内部製品の外観と、いくつかのスクリプトから本格的なアプリケーションへのデータ配信システムの進化について、読者が簡単に説明します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日は、9年前にDublGISで始まったストーリーをお伝えします。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこに就職したばかりです。外部製品の大規模な内部システムからデータをエクスポートするためのモジュールを処理する必要がありました。そして、この記事では、このモノリスをいくつかの部分に分割する方法、1つのモンスターが数十の製品を生成する方法、およびこれらすべての製品とプロジェクトがデータレベルでどのように統合されるかについて説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、技術的な詳細のない単なるレビュー記事だと言わざるを得ません。テクニックは、データのエクスポートについて説明する2番目の部分になります。その間、技術について表面的な言及があるマタンなしの軽い読書のみ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行け。 2010年までその後、2GISはまだチューブDoubleGISであり、外部製品からは、デスクトップバージョンとプリミティブオンライン、およびPDAのバージョンがありました。内部は、PCバージョンのユーザー向けのアップデート配信システムとDGPPと呼ばれるモンスターで構成されていました。DGPPは、組織とマップのディレクトリの編集、CRM、および最終製品へのデータのエクスポートのためのツールを組み合わせたものです。データベースはFirebirdにありました。システムは分散化されました。各都市には独自の設備と独自のデータベースがありました。プリミティブ統合は、ファイルのエクスポート/インポートを通じて提供されました。そして、これに関しては、概して、それだけです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dr/pn/d0/drpnd0za0y8keildn8zcfldp9fs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DGPP自体は、一連のVBAスクリプトを備えたC ++アプリケーションでした。当初、サードパーティのオフィスがこのシステムをDublGIS用に開発しましたが、やがて会社はそのシステムを自社開発し、独自のR＆Dを形成しました。 DGPPの開発はますます難しくなっています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これはDublGISの急速な発展の時代でした。新しい都市が開かれていました。スマートフォン向けのモバイル版を準備中。新機能が登場しました。広告モデルが開発されていました。一般に、多数の変更が必要であり、それらは迅速に実行する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DGPPをバラバラに分解し始めた最初のことは、輸出でした。それを別のアプリケーションにプルしました。これは、WPFに銃口を持つWindowsサービスです。並行して、新しいCRMに関する作業が進行中でした。その時の時間を節約するために、Microsoft Dynamics CRMがベースプラットフォームとして選択されました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xp/zn/js/xpznjsn9pclvxk7u958uewha0-y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エクスポートに関しては、Firebirdからデータを抽出し、VBAスクリプトからデータを準備するためのすべてのロジックを引き出す方法を学ぶ必要がありました。さらに、プラスに実装されたトランスポートデータのいくつかのアルゴリズムがありました。彼らは鋭利物に書き直さなければなりませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、1つの点に注意を払う価値があります。私たちのデスクトップDoubleGISは、COMオブジェクトにラップされたC ++ライブラリによって準備された特別なバイナリ形式でデータを消費しました。そして、それを使用することは非常に論理的であり、プロジェクトへの参照として接続するだけでした。最善の解決策ではありませんが、これについては後で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時が経つにつれ、モバイルバージョンと新しいCRMがリリースされました。パブリックAPI 2GISという新しい外部製品が登場しました。また、DGPPから、コードネームがInfoRussiaである組織のディレクトリを操作するためのサブシステムの分離がすでに始まっています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エクスポートでは、古いDGPPと新しいCRMの2つのシステムから広告データを読み取る必要がありました。さらに、CRMの実装は徐々に進んでおり、一部の都市ではこれまでDGPPしか残っていなかった一方で、DGPPはディレクトリとマップ、およびCRMと商業情報を同時に処理する都市もありました。さらに、長期的には、数か月に渡って行われたInfoRussiaのリリースは輝かしいものでした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fn/h9/il/fnh9ilr5bt43khv4yburssepk1y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいシステムは、外観だけでなく複雑さももたらしました。彼らは配備の概念を変えました。すべての都市にあった分散型DGPPとは異なり、これらのシステムは集中化されており、それぞれ独自の肉付きの良いDBMSを備えていました。さらに、彼らはデータを交換する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題を解決するために、Enterprise Service Bus（ESB）を実装しました。当時、私たちにとっていくつかの重要な機能要件を確実に満たす成熟したソリューションはありませんでした：XMLを送信する能力、メッセージの順序、および配信の保証。次に、SQL Server Brokerに立ち寄りました。SQLServer Brokerは、必要なすべてを箱から出しました。確かに、彼はかなり平凡な配達速度を​​持っていましたが、そのとき彼女は私たちにかなり満足していました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後のステップは、フィジーと呼ばれるマップサービスのリリースでした。彼はデータを部分的にバスにアップロードしました。これは、ディレクトリと分類子に関係していました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WPFで記述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">され</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">たフィジークライアント</font></a><font style="vertical-align: inherit;">自体</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">で</font></a><font style="vertical-align: inherit;">も使用されているRest APIを使用して、地理データを取得できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/j7/jd/q-j7jdjhfuv-zvwmdjyfydpyc0q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアーキテクチャでは、エクスポートが中心でした。これにより、すべてのデータストリームが1つのリポジトリにマージされ、最終製品とユーザーに配布されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、それは氷山のほんの一部でした。内部プロセスの自動化、新しい要件と新しい機能の出現により、膨大な数の製品が出現しました。分析を行い、ユーザーフィードバックを処理し、新しい販売モデルと新しい商用製品を導入し、検索、トランスポートアルゴリズム、そして一般的には外部製品を開発する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方では、エクスポートには多数のデータプロバイダーがあり、もう一方には多数のコンシューマーがあり、それぞれが特定の形式のデータを受け取り、特別な準備アルゴリズムを実行したいと考えていました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yf/mr/f1/yfmrf1oaxyyzgbcm_kq6riqkuuu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、私の話は終わりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事の第2部では、エクスポートについてお話しし、彼がこれらのすべての変更をどのように乗り切ったかについてお話しします。</font><font style="vertical-align: inherit;">ストーリーはありませんが、特定のタスクリストを解決するために適用した特定のアプローチがあります。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja464133/index.html">パフォーマンスは単なるCPUではありません：Python用の独自のプロファイラーを作成する</a></li>
<li><a href="../ja464137/index.html">テクニカルサポートMiran：仕組み</a></li>
<li><a href="../ja464141/index.html">Cでのメタクラスのファンタジー＃</a></li>
<li><a href="../ja464143/index.html">個人的ながんの治療法。患者の遺伝子が治療の成功に与える影響</a></li>
<li><a href="../ja464147/index.html">CMake：プロジェクトがそのコードの品質を容認できない場合</a></li>
<li><a href="../ja464151/index.html">Victor Vyalichkin：「自由、平等、友愛はOpenStreetMapだけにあり、すべてが常に見えています」</a></li>
<li><a href="../ja464155/index.html">AIはアフリカで動物の研究を支援</a></li>
<li><a href="../ja464161/index.html">SPAMとGDRP-「そこに」メールを送信する方法</a></li>
<li><a href="../ja464163/index.html">JavaScriptのこのキーワード。完全*マニュアル</a></li>
<li><a href="../ja464165/index.html">Habr Weekly＃14 /グループチャット、独占、危険な情報からの子供たちの保護におけるコミュニケーションのルールについて</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>