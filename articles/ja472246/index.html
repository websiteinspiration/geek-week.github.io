<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â¯ï¸ ğŸ¦ ğŸœ React + IndexDb +è‡ªå‹•æ›´æ–°=ã»ã¨ã‚“ã©AsyncRedux ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ½ âœŠ ğŸ”¡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã®è¨˜äº‹ã§ã¯ã€ReactJSã§ä½œæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«IndexDBï¼ˆæœ€æ–°ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰ã‚’æº–å‚™ã™ã‚‹æ–¹æ³•ã‚’æ®µéšçš„ã«èª¬æ˜ã—ã¾ã™ã€‚ãã®çµæœã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®Reduxã‚¹ãƒˆã‚¢ã«ã‚ã‚‹ã‹ã®ã‚ˆã†ã«ã€IndexDBã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¾¿åˆ©ã«ä½¿ç”¨ã§ãã¾ã™ã€‚
 
 Indexdb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>React + IndexDb +è‡ªå‹•æ›´æ–°=ã»ã¨ã‚“ã©AsyncRedux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472246/"><img width="300" align="right" src="https://habrastorage.org/webt/ak/5r/t4/ak5rt4e4mavxwvxlaidpfgiie0g.jpeg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€ReactJSã§ä½œæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«IndexDBï¼ˆæœ€æ–°ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰ã‚’æº–å‚™ã™ã‚‹æ–¹æ³•ã‚’æ®µéšçš„ã«èª¬æ˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã®çµæœã€</font><font style="vertical-align: inherit;">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxã‚¹ãƒˆã‚¢</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«ã‚ã‚‹ã‹ã®ã‚ˆã†ã«ã€IndexDBã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¾¿åˆ©ã«ä½¿ç”¨ã§ã</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indexdb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ã“ã‚Œã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæŒ‡å‘ã®DBMSã§ã‚ã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶å´ã§æ¯”è¼ƒçš„å°‘é‡ï¼ˆå˜ä½ã¯æ•°åãƒ¡ã‚¬ãƒã‚¤ãƒˆï¼‰ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ™‚çš„ã«ä¿å­˜ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</font><font style="vertical-align: inherit;">IndexDBã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹æ¨™æº–çš„ãªã‚¿ã‚¹ã‚¯ã«ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ãƒ“ã‚¸ãƒã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆå›½ã€éƒ½å¸‚ã€ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹é€šè²¨ã®åå‰ãªã©ï¼‰ãŒå«ã¾ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã«ã‚³ãƒ”ãƒ¼ã—ãŸå¾Œã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã“ã‚Œã‚‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰æ›´æ–°ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã®ã¯ãŸã¾ã«ã§ã™ï¼ˆã¾ãŸã¯å…¨ä½“-å°ã•ã„ï¼‰ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ããŸã³ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
éæ¨™æº–ã§éå¸¸ã«ç‰©è­°ã‚’é†¸ã™ãŒã€IndexDBã‚’ä½¿ç”¨ã™ã‚‹å®Ÿç”¨çš„ãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã¹ã¦ã®</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ã‚¸ãƒã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—</font><font style="vertical-align: inherit;">ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼å´ã§åºƒç¯„ãªä¸¦ã¹æ›¿ãˆæ©Ÿèƒ½ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux Storeã®ä»£ã‚ã‚Šã«IndexDBã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ä¿å­˜ã™ã‚‹</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IndexDBã¨Redux Storeã®3ã¤ã®é‡è¦ãªé•ã„ã¯ã€ç§ãŸã¡ã«ã¨ã£ã¦é‡è¦ã§ã™ã€‚</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexDBã¯ã€ãƒšãƒ¼ã‚¸ã‚’é›¢ã‚Œã‚‹ã¨ãã«ã‚¯ãƒªã‚¢ã•ã‚Œãªã„å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ãã‚Œã¯è¤‡æ•°ã®é–‹ã„ã¦ã„ã‚‹ã‚¿ãƒ–ã§ã‚‚åŒã˜ã§ã™ï¼ˆã“ã‚Œã«ã‚ˆã‚Šã€äºˆæœŸã—ãªã„å‹•ä½œãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexDBã¯å®Œå…¨ã«éåŒæœŸã®DBMSã§ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®æ“ä½œï¼ˆé–‹ãã€èª­ã¿å–ã‚Šã€æ›¸ãè¾¼ã¿ã€æ¤œç´¢ï¼‰ã¯éåŒæœŸã§ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexDBã¯ï¼ˆç°¡å˜ãªæ–¹æ³•ã§ï¼‰JSONã«æ ¼ç´ã§ããšã€Reduxã®æ´—è„³æŠ€è¡“ã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä½œæˆã—ã€ãƒ‡ãƒãƒƒã‚°ã‚’å®¹æ˜“ã«ã—ã€éå»ã«æ—…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ†ãƒƒãƒ—0ï¼šã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã®å…¸å‹çš„ãªä¾‹ã€‚</font><font style="vertical-align: inherit;">ç¾åœ¨ã®å”¯ä¸€ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã§çŠ¶æ…‹ã‚’ä¿å­˜ã™ã‚‹ãƒãƒªã‚¢ãƒ³ãƒˆ</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªã‚¹ãƒˆã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçŠ¶æ…‹ã§ä¿å­˜ã™ã‚‹ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React, { PureComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Button <span class="hljs-keyword">from</span> <span class="hljs-string">'react-bootstrap/Button'</span>;
<span class="hljs-keyword">import</span> counter <span class="hljs-keyword">from</span> <span class="hljs-string">'common/counter'</span>;
<span class="hljs-keyword">import</span> Form <span class="hljs-keyword">from</span> <span class="hljs-string">'react-bootstrap/Form'</span>;
<span class="hljs-keyword">import</span> Table <span class="hljs-keyword">from</span> <span class="hljs-string">'react-bootstrap/Table'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Step0</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">newTaskText</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">tasks</span>: [<font></font>
        { <span class="hljs-attr">id</span>: counter(), <span class="hljs-attr">text</span>: <span class="hljs-string">'Sample task'</span> },<font></font>
      ],<font></font>
    };<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.handleAdd = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">this</span>.setState( <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ( {
        <span class="hljs-attr">tasks</span>: [ ...state.tasks, { <span class="hljs-attr">id</span>: counter(), <span class="hljs-attr">text</span>: state.newTaskText } ],
        <span class="hljs-attr">newTaskText</span>: <span class="hljs-string">''</span>,<font></font>
      } ) );<font></font>
    };<font></font>
    <span class="hljs-keyword">this</span>.handleDeleteF = <span class="hljs-function"><span class="hljs-params">idToDelete</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.setState( <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ( {
      <span class="hljs-attr">tasks</span>: state.tasks.filter( <span class="hljs-function">(<span class="hljs-params"> { id } </span>) =&gt;</span> id !== idToDelete ),<font></font>
    } ) );<font></font>
    <span class="hljs-keyword">this</span>.handleNewTaskTextChange = <span class="hljs-function">(<span class="hljs-params"> { target: { value } } </span>) =&gt;</span> <span class="hljs-keyword">this</span>.setState( {
      <span class="hljs-attr">newTaskText</span>: value || <span class="hljs-string">''</span>,<font></font>
    } );<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">bordered</span> <span class="hljs-attr">hover</span> <span class="hljs-attr">striped</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>#<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Text<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
        { this.state.tasks.map( task =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{task.id}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{task.id}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{task.text}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleDeleteF(</span> <span class="hljs-attr">task.id</span> )}
            <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
            <span class="hljs-attr">variant</span>=<span class="hljs-string">"danger"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span> ) }
        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"+1"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Form.Control</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleNewTaskTextChange}</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"  "</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{this.state.newTaskText</span> || ''} /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleAdd}</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
            <span class="hljs-attr">variant</span>=<span class="hljs-string">"primary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>;<font></font>
  }<font></font>
<font></font>
}<font></font>
</code></pre>(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   github</a>)</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€ã‚¿ã‚¹ã‚¯ã‚’ä¼´ã†ã™ã¹ã¦ã®æ“ä½œã¯åŒæœŸã—ã¦ã„ã¾ã™ã€‚ã‚¿ã‚¹ã‚¯ã®è¿½åŠ ã«3ç§’ã‹ã‹ã‚‹å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯3ç§’é–“ãƒ•ãƒªãƒ¼ã‚ºã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ç§ãŸã¡ã¯ã™ã¹ã¦ã‚’è¨˜æ†¶ã«æ®‹ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œã«ã¤ã„ã¦è€ƒãˆã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã‚µãƒ¼ãƒãƒ¼ã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã®å‡¦ç†ã‚’å«ã‚ã‚‹å ´åˆã¯ã€éåŒæœŸã®ç¾ã—ã„å‡¦ç†ã«ã‚‚æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€ãƒ–ãƒ­ãƒƒã‚¯ã¯ã€è¦ç´ ã‚’è¿½åŠ ã¾ãŸã¯å‰Šé™¤ã—ã¦ã„ã‚‹ã¨ãã«ã€ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã¾ãŸã¯å€‹ã€…ã®è¦ç´ ï¼‰ã‚’å‡¦ç†ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šå¾ŒUIã®èª¬æ˜ã‚’ç¹°ã‚Šè¿”ã•ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€UIã‚’åˆ¥ã®TaskListã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é…ç½®ã—ã¾ã™ã€‚ãã®å”¯ä¸€ã®ã‚¿ã‚¹ã‚¯ã¯ã€ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã®HTMLã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚åŒæ™‚ã«ã€é€šå¸¸ã®ãƒœã‚¿ãƒ³ã‚’ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ãƒœã‚¿ãƒ³ã®ç‰¹åˆ¥ãªãƒ©ãƒƒãƒ‘ãƒ¼ã«ç½®ãæ›ãˆã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã“ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒéåŒæœŸé–¢æ•°ã§ã‚ã£ã¦ã‚‚ã€ãƒœã‚¿ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒãã®å®Ÿè¡Œã‚’å®Œäº†ã™ã‚‹ã¾ã§ãƒœã‚¿ãƒ³ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"> ,     react state</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React, { PureComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> counter <span class="hljs-keyword">from</span> <span class="hljs-string">'common/counter'</span>;
<span class="hljs-keyword">import</span> TaskList <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/TaskList'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Step01</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );
    <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">tasks</span>: [<font></font>
      { <span class="hljs-attr">id</span>: counter(), <span class="hljs-attr">text</span>: <span class="hljs-string">'Sample task'</span> },<font></font>
    ] };<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.handleAdd = <span class="hljs-function"><span class="hljs-params">newTaskText</span> =&gt;</span> {
      <span class="hljs-keyword">this</span>.setState( <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ( {
        <span class="hljs-attr">tasks</span>: [ ...state.tasks, { <span class="hljs-attr">id</span>: counter(), <span class="hljs-attr">text</span>: newTaskText } ],<font></font>
      } ) );<font></font>
    };<font></font>
    <span class="hljs-keyword">this</span>.handleDelete = <span class="hljs-function"><span class="hljs-params">idToDelete</span> =&gt;</span> <span class="hljs-keyword">this</span>.setState( <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ( {
      <span class="hljs-attr">tasks</span>: state.tasks.filter( <span class="hljs-function">(<span class="hljs-params"> { id } </span>) =&gt;</span> id !== idToDelete ),<font></font>
    } ) );<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TaskList</span>
        <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{this.handleAdd}</span>
        <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{this.handleDelete}</span>
        <span class="hljs-attr">tasks</span>=<span class="hljs-string">{this.state.tasks}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>;<font></font>
  }<font></font>
<font></font>
}<font></font>
</code></pre>(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   github</a>)</div></div><br>
<div class="spoiler"><b class="spoiler_title"> ,        </b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React, { PureComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Button <span class="hljs-keyword">from</span> <span class="hljs-string">'./AutoDisableButtonWithSpinner'</span>;
<span class="hljs-keyword">import</span> Form <span class="hljs-keyword">from</span> <span class="hljs-string">'react-bootstrap/Form'</span>;
<span class="hljs-keyword">import</span> Table <span class="hljs-keyword">from</span> <span class="hljs-string">'react-bootstrap/Table'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TaskList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">newTaskAdding</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">newTaskText</span>: <span class="hljs-string">''</span>,<font></font>
    };<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.handleAdd = <span class="hljs-keyword">async</span>() =&gt; {
      <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">newTaskAdding</span>: <span class="hljs-literal">true</span> } );
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">//   ,    </span>
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.props.onAdd( <span class="hljs-keyword">this</span>.state.newTaskText );
        <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">newTaskText</span>: <span class="hljs-string">''</span> } );<font></font>
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">newTaskAdding</span>: <span class="hljs-literal">false</span> } );<font></font>
      }<font></font>
    };<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.handleDeleteF = <span class="hljs-function"><span class="hljs-params">idToDelete</span> =&gt;</span>
      <span class="hljs-keyword">async</span>() =&gt; <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.props.onDelete( idToDelete );<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.handleNewTaskTextChange = <span class="hljs-function">(<span class="hljs-params"> { target: { value } } </span>) =&gt;</span> <span class="hljs-keyword">this</span>.setState( {
      <span class="hljs-attr">newTaskText</span>: value || <span class="hljs-string">''</span>,<font></font>
    } );<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">bordered</span> <span class="hljs-attr">hover</span> <span class="hljs-attr">striped</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>#<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Text<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
        { this.props.tasks.map( task =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{task.id}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{task.id}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>{task.text}<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleDeleteF(</span> <span class="hljs-attr">task.id</span> )}
            <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
            <span class="hljs-attr">variant</span>=<span class="hljs-string">"danger"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span> ) }
        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"+1"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Form.Control</span>
            <span class="hljs-attr">disabled</span>=<span class="hljs-string">{this.state.newTaskAdding}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleNewTaskTextChange}</span>
            <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"  "</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{this.state.newTaskText</span> || ''} /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleAdd}</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
            <span class="hljs-attr">variant</span>=<span class="hljs-string">"primary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>;<font></font>
  }<font></font>
<font></font>
}<font></font>
</code></pre>(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   github</a>)</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã§ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰async / awaitã‚’ç¢ºèªã§ãã¾ã™ã€‚ Async / awaitæ§‹æ–‡ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Promiseã§æ©Ÿèƒ½ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã®é‡ã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã¾ã™ã€‚ awaitã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Promiseã‚’è¿”ã™é–¢æ•°ã‹ã‚‰ã®å¿œç­”ã‚’ã€ãã‚ŒãŒï¼ˆthenï¼ˆï¼‰ã§çµæœã‚’å¾…ã¤ã®ã§ã¯ãªãï¼‰é€šå¸¸ã®é–¢æ•°ã§ã‚ã‚‹ã‹ã®ã‚ˆã†ã«å¾…ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€éåŒæœŸé–¢æ•°ã¯é­”æ³•ã®ã‚ˆã†ã«åŒæœŸé–¢æ•°ã«å¤‰ã‚ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã¨ãˆã°ã€awaitã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å®Ÿè¡Œã‚¹ãƒ¬ãƒƒãƒ‰ãŒä¸­æ–­ã•ã‚Œã¾ã™ã€‚ã—ã‹ã—ã€ã‚³ãƒ¼ãƒ‰ã¯ã‚ˆã‚Šç°¡æ½”ã§ç†è§£ã—ã‚„ã™ããªã‚Šã€awaitã¯ãƒ«ãƒ¼ãƒ—ã¨try / catch / finallyã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã®ä¸¡æ–¹ã§ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŸã¨ãˆã°</font><font style="vertical-align: inherit;">ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã ã‘</font><font style="vertical-align: inherit;">ã§ãªãã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><code> TaskList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘¼ã³å‡ºã—ã¾ã™</font></font></a><font style="vertical-align: inherit;"></font><code>this.props.onAdd</code><font style="vertical-align: inherit;"></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®å ´åˆã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒä½•ã‚‚è¿”ã•ãªã„ã€ã¾ãŸã¯ä»¥å¤–ã®å€¤ã‚’è¿”ã™é€šå¸¸ã®é–¢æ•°ã§ã‚ã‚‹</font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å ´åˆã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯</font><font style="vertical-align: inherit;">é€šå¸¸ã®</font></font><code>TaskList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font></font><code>handleAdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ç¶šè¡Œã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒæˆ»ã‚‹</font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å ´åˆï¼ˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒéåŒæœŸé–¢æ•°ã¨ã—ã¦å®£è¨€ã•ã‚Œã¦ã„ã‚‹å ´åˆã‚’å«ã‚€ï¼‰ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¯</font></font><code>TaskList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Ÿè¡ŒãŒçµ‚äº†ã™ã‚‹ã¾ã§å¾…æ©Ÿã—ã€ãã®å¾Œã«ã®ã¿å¤‰æ•°</font></font><code>newTaskAdding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨ã®</font><font style="vertical-align: inherit;">å€¤ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™</font></font><code>newTaskText</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ†ãƒƒãƒ—1ï¼šReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«IndexDBã‚’è¿½åŠ ã™ã‚‹</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œæ¥­ã‚’ç°¡ç•¥åŒ–ã™ã‚‹ãŸã‚ã«ã€æœ€åˆã«Promiseãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹å˜ç´”ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¨˜è¿°ã—ã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°¡å˜ãªã‚¨ãƒ©ãƒ¼å‡¦ç†ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é–‹ã</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ¤œç´¢ã™ã‚‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ã™ã‚‹</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1ã¤ç›®ã¯æœ€ã‚‚ã€Œé‡è¦ãªã€ã‚‚ã®ã§ã€æœ€å¤§5ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ãƒ­ã‚±ãƒƒãƒˆç§‘å­¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openDatabasePromiseï¼ˆï¼‰-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é–‹ã</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">openDatabasePromise</span>(<span class="hljs-params"> keyPath </span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>( <span class="hljs-function">(<span class="hljs-params"> resolve, reject </span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> dbOpenRequest = <span class="hljs-built_in">window</span>.indexedDB.open( DB_NAME, <span class="hljs-string">'1.0.0'</span> );<font></font>
<font></font>
    dbOpenRequest.onblocked = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
      reject( <span class="hljs-string">'    ,    , '</span> +
        <span class="hljs-string">'      .'</span> );<font></font>
    };<font></font>
<font></font>
    dbOpenRequest.onerror = <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
      <span class="hljs-built_in">console</span>.log( <span class="hljs-string">'Unable to open indexedDB '</span> + DB_NAME );
      <span class="hljs-built_in">console</span>.log( err );<font></font>
      reject( <span class="hljs-string">'   ,       .'</span> +<font></font>
       ( err.message ? <span class="hljs-string">' : '</span> + err.message : <span class="hljs-string">''</span> ) );<font></font>
    };<font></font>
<font></font>
    dbOpenRequest.onupgradeneeded = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> db = event.target.result;
      <span class="hljs-keyword">try</span> {<font></font>
        db.deleteObjectStore( OBJECT_STORE_NAME );<font></font>
      } <span class="hljs-keyword">catch</span> ( err ) { <span class="hljs-built_in">console</span>.log( err ); }<font></font>
      db.createObjectStore( OBJECT_STORE_NAME, { keyPath } );<font></font>
    };<font></font>
<font></font>
    dbOpenRequest.onsuccess = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-built_in">console</span>.info( <span class="hljs-string">'Successfully open indexedDB connection to '</span> + DB_NAME );<font></font>
      resolve( dbOpenRequest.result );<font></font>
    };<font></font>
<font></font>
    dbOpenRequest.onerror = reject;<font></font>
  } );<font></font>
}<font></font>
</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getAllPromise / getPromise / putPromise-Promiseã®ãƒ©ãƒƒãƒ‘ãƒ¼IndexDbå‘¼ã³å‡ºã—</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">//    ObjectStore,   IDBRequest</span>
<span class="hljs-comment">//     Promise</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrap</span>(<span class="hljs-params"> methodName </span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> [ objectStore, ...etc ] = <span class="hljs-built_in">arguments</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>( <span class="hljs-function">(<span class="hljs-params"> resolve, reject </span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> request = objectStore[ methodName ]( ...etc );<font></font>
      request.onsuccess = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> resolve( request.result );<font></font>
      request.onerror = reject;<font></font>
    } );<font></font>
  };<font></font>
}<font></font>
<span class="hljs-keyword">const</span> deletePromise = wrap( <span class="hljs-string">'delete'</span> );
<span class="hljs-keyword">const</span> getAllPromise = wrap( <span class="hljs-string">'getAll'</span> );
<span class="hljs-keyword">const</span> getPromise = wrap( <span class="hljs-string">'get'</span> );
<span class="hljs-keyword">const</span> putPromise = wrap( <span class="hljs-string">'put'</span> );<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã‚’1ã¤ã®IndexedDbRepositoryã‚¯ãƒ©ã‚¹ã«ã¾ã¨ã‚ã‚‹</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndexedDbRepository-IDBDatabaseã®ãƒ©ãƒƒãƒ‘ãƒ¼</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> DB_NAME = <span class="hljs-string">'objectStore'</span>;
<span class="hljs-keyword">const</span> OBJECT_STORE_NAME = <span class="hljs-string">'objectStore'</span>;
<span class="hljs-comment">/* ... */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexedDbRepository</span> </span>{
  <span class="hljs-comment">/* ... */</span>
  <span class="hljs-keyword">constructor</span>( keyPath ) {
    <span class="hljs-keyword">this</span>.error = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.keyPath = keyPath;<font></font>
<font></font>
    <span class="hljs-comment">//     async</span>
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">this</span>.openDatabasePromise = <span class="hljs-keyword">this</span>._openDatabase();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">async</span> _openDatabase( keyPath ) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">this</span>.dbConnection = <span class="hljs-keyword">await</span> openDatabasePromise( keyPath );<font></font>
    } <span class="hljs-keyword">catch</span> ( error ) {
      <span class="hljs-keyword">this</span>.error = error;
      <span class="hljs-keyword">throw</span> error;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">async</span> _tx( txMode, callback ) {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.openDatabasePromise; <span class="hljs-comment">// await db connection</span>
    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">this</span>.dbConnection.transaction( [ OBJECT_STORE_NAME ], txMode );
    <span class="hljs-keyword">const</span> objectStore = transaction.objectStore( OBJECT_STORE_NAME );
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> callback( objectStore );<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">async</span> findAll() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._tx( <span class="hljs-string">'readonly'</span>, objectStore =&gt; getAllPromise( objectStore ) );<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">async</span> findById( key ) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._tx( <span class="hljs-string">'readonly'</span>, objectStore =&gt; getPromise( objectStore, key ) );<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">async</span> deleteById( key ) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._tx( <span class="hljs-string">'readwrite'</span>, objectStore =&gt; deletePromise( objectStore, key ) );<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">async</span> save( item ) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._tx( <span class="hljs-string">'readwrite'</span>, objectStore =&gt; putPromise( objectStore, item ) );<font></font>
  }<font></font>
}<font></font>
</code></pre>(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   github</a>)</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã§ã€ã‚³ãƒ¼ãƒ‰ã‹ã‚‰IndexDBã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> db = <span class="hljs-keyword">new</span> IndexedDbRepository( <span class="hljs-string">'id'</span> ); <span class="hljs-comment">// ,    </span>
    <span class="hljs-keyword">await</span> db.save( { <span class="hljs-attr">id</span>: <span class="hljs-number">42</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Task text'</span> } );
    <span class="hljs-keyword">const</span> item = <span class="hljs-keyword">await</span> db.findById( <span class="hljs-number">42</span> );
    <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> db.findAll();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã€Œãƒªãƒã‚¸ãƒˆãƒªã€ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¥ç¶šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åå¿œã®ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚Œã°ã€ã‚µãƒ¼ãƒãƒ¼ã¸ã®å‘¼ã³å‡ºã—ã¯ã€componentDidMountï¼ˆï¼‰ãƒ¡ã‚½ãƒƒãƒ‰ã§è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> IndexedDbRepository <span class="hljs-keyword">from</span> <span class="hljs-string">'../common/IndexedDbRepository'</span>;
<span class="hljs-comment">/*...*/</span><font></font>
  componentDidMount() {<font></font>
    <span class="hljs-keyword">this</span>.repository = <span class="hljs-keyword">new</span> IndexedDbRepository( <span class="hljs-string">'id'</span> );
    <span class="hljs-comment">//    </span>
    <span class="hljs-keyword">this</span>.repository.findAll().then( <span class="hljs-function"><span class="hljs-params">tasks</span> =&gt;</span> <span class="hljs-keyword">this</span>.setState( { tasks } ) );<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç†è«–çš„ã«ã¯ã€é–¢æ•°</font></font><code>componentDidMount()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’éåŒæœŸã¨ã—ã¦å®£è¨€ã—ã€ï¼ˆï¼‰ã®ä»£ã‚ã‚Šã«éåŒæœŸ/å¾…æ©Ÿã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€</font></font><code>componentDidMount()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€Œç§ãŸã¡ã®ã€æ©Ÿèƒ½ã§ã¯ãªãã€Reactã«ã‚ˆã£ã¦å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»£ã‚ã‚Š</font><font style="vertical-align: inherit;">ã«ãƒªã‚¿ãƒ¼ãƒ³ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€17.xãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã©ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã‹èª°ãŒçŸ¥ã£ã¦ã„ã¾ã™</font></font><code>undefined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã§ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã§ã¯ã€ç©ºã®é…åˆ—ï¼ˆã¾ãŸã¯ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€é…åˆ—ï¼‰ã§åŸ‹ã‚ã‚‹ä»£ã‚ã‚Šã«ã€nullã§åŸ‹ã‚ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãŒå‡¦ç†ã•ã‚Œã‚‹ã®ã‚’å¾…ã¤å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ã“ã®nullã‚’å‡¦ç†ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åŸå‰‡ã¨ã—ã¦ã€ã“ã‚Œã‚’åˆ¥ã€…ã®ãƒ•ãƒ©ã‚°ã«å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€ãªãœã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç”Ÿæˆã™ã‚‹ã®ã§ã™ã‹ï¼Ÿ</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );
    <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">tasks</span>: <span class="hljs-literal">null</span> };
    <span class="hljs-comment">/* ... */</span><font></font>
  }<font></font>
  <span class="hljs-comment">/* ... */</span><font></font>
  render() {<font></font>
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.state.tasks === <span class="hljs-literal">null</span> )
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> <span class="hljs-attr">animation</span>=<span class="hljs-string">"border"</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"span"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"status"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>  ...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/&gt;</span></span>;
    <span class="hljs-comment">/* ... */</span><font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><code>handleAdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font><font style="vertical-align: inherit;">
ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã¯æ®‹ã£ã¦ã„ã¾ã™</font></font><code>handleDelete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-comment">/* ... */</span>
    <span class="hljs-keyword">this</span>.handleAdd = <span class="hljs-keyword">async</span>( newTaskText ) =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.repository.save( { <span class="hljs-attr">id</span>: counter(), <span class="hljs-attr">text</span>: newTaskText } );
      <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">tasks</span>: <span class="hljs-literal">null</span> } );
      <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">tasks</span>: <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.repository.findAll() } );<font></font>
    };<font></font>
    <span class="hljs-keyword">this</span>.handleDelete = <span class="hljs-keyword">async</span>( idToDelete ) =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.repository.deleteById( idToDelete );
      <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">tasks</span>: <span class="hljs-literal">null</span> } );
      <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">tasks</span>: <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.repository.findAll() } );<font></font>
    };<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã©ã¡ã‚‰ã®ãƒãƒ³ãƒ‰ãƒ©ã§ã‚‚ã€æœ€åˆã«ãƒªãƒã‚¸ãƒˆãƒªã‚’å‚ç…§ã—ã¦ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ ã¾ãŸã¯å‰Šé™¤ã—ã€æ¬¡ã«ç¾åœ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã€ãƒªãƒã‚¸ãƒˆãƒªã«æ–°ã—ã„ãƒªã‚¹ãƒˆã‚’å†åº¦è¦æ±‚ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">setStateï¼ˆï¼‰ã®å‘¼ã³å‡ºã—ã¯æ¬¡ã€…ã«è¡Œã‚ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®æœ€å¾Œã®è¡Œã®awaitã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã€findAllï¼ˆï¼‰ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰å–å¾—ã•ã‚ŒãŸPromiseï¼ˆï¼‰ãŒè§£æ±ºã•ã‚ŒãŸå¾Œã«ã®ã¿ã€2ç•ªç›®ã®setStateï¼ˆï¼‰å‘¼ã³å‡ºã—ã‚’ç™ºç”Ÿã•ã›ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ†ãƒƒãƒ—2.å¤‰æ›´ã‚’èã</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã®å¤§ããªæ¬ é™¥ã¯ã€ã¾ãšã€ãƒªãƒã‚¸ãƒˆãƒªãŒå„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚ç¬¬2ã«ã€1ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å¤‰æ›´ã—ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®çµæœã¨ã—ã¦çŠ¶æ…‹ã‚’å†åº¦èª­ã¿å–ã‚‹ã¾ã§ã€ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ãã®ã“ã¨ã‚’çŸ¥ã‚Šã¾ã›ã‚“ã€‚å¿«é©ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã€æ–°ã—ã„RepositoryListenerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å°å…¥ã—ã€2ã¤ã®ã“ã¨ã‚’å®Ÿè¡Œã•ã›ã¾ã™ã€‚ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€æœ€åˆã«ã€ãƒªãƒã‚¸ãƒˆãƒªå†…ã®å¤‰æ›´ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚æ¬¡ã«ã€RepositoryListenerã¯ãã‚Œã‚’ä½œæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã“ã‚Œã‚‰ã®å¤‰æ›´ã«ã¤ã„ã¦é€šçŸ¥ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšã€IndexedDbRepositoryã«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ç™»éŒ²ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IndexedDbRepository</span> </span>{
  <span class="hljs-comment">/*...*/</span>
  <span class="hljs-keyword">constructor</span>( keyPath ) {
  <span class="hljs-comment">/*...*/</span>
    <span class="hljs-keyword">this</span>.listeners = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();
    <span class="hljs-keyword">this</span>.stamp = <span class="hljs-number">0</span>;
  <span class="hljs-comment">/*...*/</span><font></font>
  }<font></font>
  <span class="hljs-comment">/*...*/</span><font></font>
  addListener( listener ) {<font></font>
    <span class="hljs-keyword">this</span>.listeners.add( listener );<font></font>
  }<font></font>
  onChange() {<font></font>
    <span class="hljs-keyword">this</span>.stamp++;
    <span class="hljs-keyword">this</span>.listeners.forEach( <span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> listener( <span class="hljs-keyword">this</span>.stamp ) );<font></font>
  }<font></font>
  removeListener( listener ) {<font></font>
    <span class="hljs-keyword">this</span>.listeners.delete( listener );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã«ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æ¸¡ã—ã¾ã™ã€‚ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¯onChangeï¼ˆï¼‰ã‚’å‘¼ã³å‡ºã™ãŸã³ã«å¤‰æ›´ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€_txãƒ¡ã‚½ãƒƒãƒ‰ã‚’å¤‰æ›´ã—ã¦ã€ãƒ¢ãƒ¼ãƒ‰ã‚’ä¼´ã†ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ã®å‘¼ã³å‡ºã—ã”ã¨ã«ã€</font></font><code>readwrite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã‚ˆã†ã«ã—</font></font><code>onChange()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-keyword">async</span> _tx( txMode, callback ) {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.openDatabasePromise; <span class="hljs-comment">// await db connection</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">this</span>.dbConnection.transaction( [ OBJECT_STORE_NAME ], txMode );
      <span class="hljs-keyword">const</span> objectStore = transaction.objectStore( OBJECT_STORE_NAME );
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> callback( objectStore );<font></font>
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-keyword">if</span> ( txMode === <span class="hljs-string">'readwrite'</span> )
        <span class="hljs-keyword">this</span>.onChange(); <span class="hljs-comment">// notify listeners</span><font></font>
    }<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">Promiseã§</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼•ãç¶šã</font></font><code>then()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>catch()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯</font><font style="vertical-align: inherit;">ã€ã¸ã®å‘¼ã³å‡ºã—ã‚’è¤‡è£½ã™ã‚‹ã‹</font></font><code>onChange()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚µãƒãƒ¼ãƒˆã™ã‚‹Promiseï¼ˆï¼‰ã«ç‰¹åˆ¥ãªãƒãƒªãƒ•ã‚£ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>final()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã•ã„ã‚ã„ã€async / awaitã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä¸è¦ãªã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã‚ãšã«ç°¡å˜ã«ã“ã‚Œã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RepositoryListenerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªä½“ã¯ã€componentDidMountãŠã‚ˆã³componentWillUnmountãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’æ¥ç¶šã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RepositoryListenerã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> IndexedDbRepository <span class="hljs-keyword">from</span> <span class="hljs-string">'./IndexedDbRepository'</span>;
<span class="hljs-keyword">import</span> { PureComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RepositoryListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.prevRepository = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.repositoryListener = <span class="hljs-function"><span class="hljs-params">repositoryStamp</span> =&gt;</span> <span class="hljs-keyword">this</span>.props.onChange( repositoryStamp );<font></font>
  }<font></font>
<font></font>
  componentDidMount() {<font></font>
    <span class="hljs-keyword">this</span>.subscribe();<font></font>
  }<font></font>
<font></font>
  componentDidUpdate() {<font></font>
    <span class="hljs-keyword">this</span>.subscribe();<font></font>
  }<font></font>
<font></font>
  componentWillUnmount() {<font></font>
    <span class="hljs-keyword">this</span>.unsubscribe();<font></font>
  }<font></font>
<font></font>
  subscribe() {<font></font>
    <span class="hljs-keyword">const</span> { repository } = <span class="hljs-keyword">this</span>.props;
    <span class="hljs-keyword">if</span> ( repository <span class="hljs-keyword">instanceof</span> IndexedDbRepository &amp;&amp; <span class="hljs-keyword">this</span>.prevRepository !== repository ) {
      <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.prevRepository !== <span class="hljs-literal">null</span> ) {
        <span class="hljs-keyword">this</span>.prevRepository.removeListener( <span class="hljs-keyword">this</span>.repositoryListener );<font></font>
      }<font></font>
      <span class="hljs-keyword">this</span>.prevRepository = repository;<font></font>
      repository.addListener( <span class="hljs-keyword">this</span>.repositoryListener );<font></font>
    }<font></font>
  }<font></font>
<font></font>
  unsubscribe( ) {<font></font>
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.prevRepository !== <span class="hljs-literal">null</span> ) {
      <span class="hljs-keyword">this</span>.prevRepository.removeListener( <span class="hljs-keyword">this</span>.repositoryListener );
      <span class="hljs-keyword">this</span>.prevRepository = <span class="hljs-literal">null</span>;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.children || <span class="hljs-literal">null</span>;<font></font>
  }<font></font>
}<font></font>
</code></pre>(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   github</a>)</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒªãƒã‚¸ãƒˆãƒªå¤‰æ›´ã®å‡¦ç†ã‚’å«ã‚ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRYåŸå‰‡ã«åŸºã¥ã„ã¦</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€å¯¾å¿œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’</font></font><code>handleAdd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font><font style="vertical-align: inherit;">ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‹ã‚‰å‰Šé™¤ã—ã¾ã™</font></font><code>handleDelete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );
    <span class="hljs-keyword">this</span>.state = { <span class="hljs-attr">tasks</span>: <span class="hljs-literal">null</span> };<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.handleAdd = <span class="hljs-keyword">async</span>( newTaskText ) =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.repository.save( { <span class="hljs-attr">id</span>: counter(), <span class="hljs-attr">text</span>: newTaskText } );<font></font>
    };<font></font>
    <span class="hljs-keyword">this</span>.handleDelete = <span class="hljs-keyword">async</span>( idToDelete ) =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.repository.deleteById( idToDelete );<font></font>
    };<font></font>
    <span class="hljs-keyword">this</span>.handleRepositoryChanged = <span class="hljs-keyword">async</span>() =&gt; {
      <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">tasks</span>: <span class="hljs-literal">null</span> } );
      <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">tasks</span>: <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.repository.findAll() } );<font></font>
    };<font></font>
  }<font></font>
<font></font>
  componentDidMount() {<font></font>
    <span class="hljs-keyword">this</span>.repository = <span class="hljs-keyword">new</span> IndexedDbRepository( <span class="hljs-string">'id'</span> );
    <span class="hljs-keyword">this</span>.handleRepositoryChanged(); <span class="hljs-comment">// initial load</span><font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€æ¥ç¶šã•ã‚ŒãŸRepositoryListenerã‹ã‚‰handleRepositoryChangedã¸ã®å‘¼ã³å‡ºã—ã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs">  render() {
    <span class="hljs-comment">/* ... */</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RepositoryListener</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleRepoChanged}</span> <span class="hljs-attr">repository</span>=<span class="hljs-string">{this.repository}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TaskList</span>
        <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{this.handleAdd}</span>
        <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{this.handleDelete}</span>
        <span class="hljs-attr">tasks</span>=<span class="hljs-string">{this.state.tasks}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RepositoryListener</span>&gt;</span></span>;<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ†ãƒƒãƒ—3.åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ãƒ‡ãƒ¼ã‚¿ã®ãƒ­ãƒ¼ãƒ‰ã¨æ›´æ–°ã‚’è¡Œã†</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã§ãã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€100ä»¥ä¸Šã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒã¤å¤§è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æƒ³åƒã™ã‚‹ã¨</font><font style="vertical-align: inherit;">ã€ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å„</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯æ¬¡ã®ã‚ˆã†ã«å¼·åˆ¶ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒã‚¸ãƒˆãƒªãŒå˜ä¸€ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰æ­£ã—ãæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã«ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã™ã‚‹ </font></font><code>componentDidMount()</code></li>
<li><font style="vertical-align: inherit;"></font><code>RepositoryListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤‰æ›´ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ«ã‚’æä¾›</font><font style="vertical-align: inherit;">ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</font><font style="vertical-align: inherit;">ã‚’</font><font style="vertical-align: inherit;">æ¥ç¶šã—ã¾ã™</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‡è¤‡ã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå¤šã™ãã¾ã›ã‚“ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ãã†ã§ã¯ãªã„ã‚ˆã†ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ä½•ã‹ãŒå¿˜ã‚Œã‚‰ã‚ŒãŸã‚‰ï¼Ÿ</font><font style="vertical-align: inherit;">ã‚³ãƒ”ãƒ¼ãƒšãƒ¼ã‚¹ãƒˆã§è¿·å­ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¿ã‚¹ã‚¯ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã‚’ä½œæˆã—ã€ä½•ã‹é­”æ³•ã®ã‚ˆã†ãªæ–¹æ³•ã§ã“ã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã—ã€ãƒªãƒã‚¸ãƒˆãƒªå†…ã®å¤‰æ›´ã‚’å‡¦ç†ã—ã€ãƒ’ãƒ¼ãƒ—ã®å ´åˆã¯ã“ã‚Œã‚’æ¥ç¶šã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãŠãã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚ãƒªãƒã‚¸ãƒˆãƒªã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">this</span>.doFindAllTasks = <span class="hljs-function">(<span class="hljs-params"> repo </span>) =&gt;</span> repo.findAll();
<span class="hljs-comment">/*...*/</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DataProvider</span>
  <span class="hljs-attr">doCalc</span>=<span class="hljs-string">{</span> <span class="hljs-attr">this.doFindAllTasks</span> }&gt;</span>
{(data) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>...   -,   data...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
<span class="hljs-tag">&lt;/<span class="hljs-name">DataProvider</span>&gt;</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ã«ãŠã‘ã‚‹é‡è¦ãªç¬é–“ã¯ã€doFindAllTaskâ€‹â€‹sï¼ˆï¼‰ãŒPromiseã§ã‚ã‚‹ã“ã¨ã ã‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">ä½œæ¥­ã‚’å®¹æ˜“ã«ã™ã‚‹ãŸã‚ã«ã€Promiseã®å®Ÿè¡Œã‚’å¾…æ©Ÿã™ã‚‹åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã€è¨ˆç®—ã•ã‚ŒãŸå€¤ã§å­å­«ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PromiseComponentã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { PureComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PromiseComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );
    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span>,<font></font>
    };<font></font>
    <span class="hljs-keyword">this</span>.prevPromise = <span class="hljs-literal">null</span>;<font></font>
  }<font></font>
<font></font>
  componentDidMount() {<font></font>
    <span class="hljs-keyword">this</span>.subscribe();<font></font>
  }<font></font>
<font></font>
  componentDidUpdate( ) {<font></font>
    <span class="hljs-keyword">this</span>.subscribe();<font></font>
  }<font></font>
<font></font>
  componentWillUnmount() {<font></font>
    <span class="hljs-keyword">this</span>.unsubscribe();<font></font>
  }<font></font>
<font></font>
  subscribe() {<font></font>
    <span class="hljs-keyword">const</span> { cleanOnPromiseChange, promise } = <span class="hljs-keyword">this</span>.props;
    <span class="hljs-keyword">if</span> ( promise <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span> &amp;&amp; <span class="hljs-keyword">this</span>.prevPromise !== promise ) {
      <span class="hljs-keyword">if</span> ( cleanOnPromiseChange ) <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span> } );
      <span class="hljs-keyword">this</span>.prevPromise = promise;<font></font>
      promise.then( <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.prevPromise === promise ) {
          <span class="hljs-keyword">this</span>.setState( { <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>, value } );<font></font>
        }<font></font>
      } )<font></font>
        .catch( <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.prevPromise === promise ) {
            <span class="hljs-keyword">this</span>.setState( { error, <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span> } );<font></font>
          }<font></font>
        } );<font></font>
    }<font></font>
  }<font></font>
<font></font>
  unsubscribe( ) {<font></font>
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.prevPromise !== <span class="hljs-literal">null</span> ) {
      <span class="hljs-keyword">this</span>.prevPromise = <span class="hljs-literal">null</span>;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">const</span> { children, fallback } = <span class="hljs-keyword">this</span>.props;
    <span class="hljs-keyword">const</span> { error, value } = <span class="hljs-keyword">this</span>.state;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> ( error !== <span class="hljs-literal">null</span> ) {
      <span class="hljs-keyword">throw</span> error;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span> ( value === <span class="hljs-literal">undefined</span> || value === <span class="hljs-literal">null</span> ) {
      <span class="hljs-keyword">return</span> fallback || <span class="hljs-literal">null</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> children( value );<font></font>
<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   github</a>)<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯ã¨å†…éƒ¨æ§‹é€ ã¯ã€RepositoryListenerã¨ã‚ˆãä¼¼ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã©ã¡ã‚‰ã‚‚ã‚¤ãƒ™ãƒ³ãƒˆã«ã€Œç½²åã€ã€ã€Œè´å–ã€ã€ä½•ã‚‰ã‹ã®å½¢ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€è´ãå¿…è¦ã®ã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã‚‚è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ã“ã‚Œã¾ã§ã®ã¨ã“ã‚éå¸¸ã«é­”æ³•ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹DataProviderã¯éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ã«è¦‹ãˆã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> repository <span class="hljs-keyword">from</span> <span class="hljs-string">'./RepositoryHolder'</span>;
<span class="hljs-comment">/*...*/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );
    <span class="hljs-keyword">this</span>.handleRepoChanged = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.forceUpdate();<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RepositoryListener</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleRepoChanged}</span> <span class="hljs-attr">repository</span>=<span class="hljs-string">{repository}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PromiseComponent</span> <span class="hljs-attr">promise</span>=<span class="hljs-string">{this.props.doCalc(</span> <span class="hljs-attr">repository</span> )}&gt;</span>
        {data =&gt; this.props.children( data )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">PromiseComponent</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RepositoryListener</span>&gt;</span></span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€doCalcã¨å‘¼ã°ã‚Œã‚‹ãƒªãƒã‚¸ãƒˆãƒªï¼ˆãŠã‚ˆã³ç¾åœ¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å€‹åˆ¥ã®ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã®RepositoryHolderï¼‰ã‚’å–å¾—ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’this.props.childrenã«è»¢é€ã§ãã‚‹ãŸã‚ã€ã‚¿ã‚¹ã‚¯ã®ãƒªã‚¹ãƒˆã‚’æç”»ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚·ãƒ³ã‚°ãƒ«ãƒ³ãƒˆãƒ³ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã«è¦‹ãˆã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> repository = <span class="hljs-keyword">new</span> IndexedDbRepository( <span class="hljs-string">'id'</span> );
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> repository;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å‘¼ã³å‡ºã—ã‚’DataProviderå‘¼ã³å‡ºã—ã«ç½®ãæ›ãˆã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> repository <span class="hljs-keyword">from</span> <span class="hljs-string">'./RepositoryHolder'</span>;
<span class="hljs-comment">/* ... */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Step3</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );
    <span class="hljs-keyword">this</span>.doFindAllTasks = <span class="hljs-function"><span class="hljs-params">repository</span> =&gt;</span> repository.findAll();
    <span class="hljs-comment">/* ... */</span><font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DataProvider</span>
        <span class="hljs-attr">doCalc</span>=<span class="hljs-string">{this.doFindAllTasks}</span>
        <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> <span class="hljs-attr">animation</span>=<span class="hljs-string">"border"</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"span"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"status"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>  ...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/&gt;</span></span>}&gt;<font></font>
        { tasks =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TaskList</span>
          <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{this.handleAdd}</span>
          <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{this.handleDelete}</span>
          <span class="hljs-attr">tasks</span>=<span class="hljs-string">{tasks}</span> /&gt;</span></span> }<font></font>
      &lt;/DataProvider&gt;;<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§æ­¢ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ã«ã¤ã„ã¦èª¬æ˜ã—ã€åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã“ã®ãƒ‡ãƒ¼ã‚¿ã®å®Ÿéš›ã®å—ä¿¡ã¨æ›´æ–°ã‚’ç›£è¦–ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ–‡å­—é€šã‚Šå°ã•ãªã“ã¨ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã—ãŸï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«ã€ã‚³ãƒ¼ãƒ‰å†…ã®ã©ã“ã‹ã«ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãªã</font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ã€ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹é–¢æ•°ã‚’è¨˜è¿°ã—ã€ã“ã®é–¢æ•°ã‚’DataProviderã«æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataProviderã®å‘¼ã³å‡ºã—ã¯ç´ æ™´ã‚‰ã—ãã€Reactã®ç²¾ç¥ã«å®Œå…¨ã«åŸºã¥ã„ã¦ã„ã¾ã™ãŒã€JSXã®è¦³ç‚¹ã‹ã‚‰ã¯éå¸¸ã«é†œã„ã§ã™ã€‚</font><font style="vertical-align: inherit;">è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã€ç•°ãªã‚‹DataProviderã®2ã¤ã¾ãŸã¯3ã¤ã®ãƒ¬ãƒ™ãƒ«ã®ãƒã‚¹ãƒˆãŒéå¸¸ã«æ··ä¹±ã—ã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ã®å—ä¿¡ãŒ1ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆDataProviderï¼‰ã§è¡Œã‚ã‚Œã€ãã‚Œã‚‰ã®å¤‰æ›´ãŒåˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ã§è¡Œã‚ã‚Œã‚‹ã®ã¯æ‚²ã—ã„ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">åŒã˜ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã§ã“ã‚Œã‚’èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ†ãƒƒãƒ—4.æ¥ç¶šï¼ˆï¼‰</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã§ã«æ¨æ¸¬ã•ã‚Œã¦ã„ã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ã§ã€react-reduxã«ç²¾é€šã—ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ®‹ã‚Šã®éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ã€æ¬¡ã®ãƒ’ãƒ³ãƒˆã‚’å‚è€ƒã«ã—ã¾ã™ã€‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¦å­ï¼ˆï¼‰ã‚’å‘¼ã³å‡ºã™ä»£ã‚ã‚Šã«ã€DataProviderã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã€ãƒ«ãƒ¼ãƒ«ã«åŸºã¥ã„ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å…¥åŠ›ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒªãƒã‚¸ãƒˆãƒªã§ä½•ã‹ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã€æ¨™æº–ã®Reactãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå¤‰æ›´ã•ã‚Œã‚‹ã ã‘ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãŸã‚ã«ã€é«˜æ¬¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å®Ÿéš›ã€è¤‡é›‘ãªã“ã¨ã¯ä½•ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¯ãƒ©ã‚¹ã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦å–ã‚Šã€åˆ¥ã®ã‚ˆã‚Šè¤‡é›‘ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æä¾›ã™ã‚‹é–¢æ•°ã«ã™ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ä½œæˆã™ã‚‹é–¢æ•°ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¯ãƒ©ã‚¹ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚Šã¾ã™</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€é€£ã®ãƒ«ãƒ¼ãƒ«ã€ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã€ãŠã‚ˆã³ã©ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«é…ç½®ã™ã‚‹ã‹ã‚’å—ã‘å…¥ã‚Œã‚‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã®ä½¿ç”¨æ³•ã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-reduxã®connectï¼ˆï¼‰é–¢æ•°ã«</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¼¼ã¦</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ã„</font></a><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®é–¢æ•°ã®å‘¼ã³å‡ºã—ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> mapRepoToProps = <span class="hljs-function"><span class="hljs-params">repository</span> =&gt;</span> ( {
  <span class="hljs-attr">tasks</span>: repository.findAll(),<font></font>
} );<font></font>
<span class="hljs-keyword">const</span> mapRepoToActions = <span class="hljs-function"><span class="hljs-params">repository</span> =&gt;</span> ( {
  <span class="hljs-attr">doAdd</span>: <span class="hljs-function">(<span class="hljs-params"> newTaskText </span>) =&gt;</span> repository.save( { <span class="hljs-attr">id</span>: counter(), <span class="hljs-attr">text</span>: newTaskText } ),
  <span class="hljs-attr">doDelete</span>: <span class="hljs-function">(<span class="hljs-params"> idToDelete </span>) =&gt;</span> repository.deleteById( idToDelete ),<font></font>
} );<font></font>
<span class="hljs-keyword">const</span> Step4Connected = connect( mapRepoToProps, mapRepoToActions )( Step4 );
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®è¡Œã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åå‰ã¨</font></font><code>Step4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰èª­ã¿è¾¼ã¾ã‚Œã‚‹å€¤ã®</font><font style="vertical-align: inherit;">é–“ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’æŒ‡å®š</font><font style="vertical-align: inherit;">ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ¬¡ã¯ã€ã™ã§ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ã„ã‚‹ï¼šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…éƒ¨ã®å ´åˆã«ä½•ãŒèµ·ã“ã‚‹ã‹</font></font><code>Step4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€åŸå› </font></font><code>this.props.doAdd(...)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã¾ãŸã¯</font></font><code>this.props.doDelete(...)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦æœ€å¾Œã®è¡Œã¯ã™ã¹ã¦ã‚’ã¾ã¨ã‚ã¦ã€connecté–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">çµæœã¯æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ï¼ˆã“ã®ãŸã‚ã€ã“ã®æ‰‹æ³•ã¯é«˜æ¬¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨å‘¼ã°ã‚Œã¾ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€å…ƒã®Step4ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ãªãã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">/*...*/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Step4</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{
<span class="hljs-comment">/*...*/</span><font></font>
}<font></font>
<span class="hljs-comment">/*...*/</span>
<span class="hljs-keyword">const</span> Step4Connected = connect( <span class="hljs-comment">/*...*/</span> )( Step4 );
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Step4Connected;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€TaskListã‚’æ“ä½œã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€å˜ç´”ãªãƒ©ãƒƒãƒ‘ãƒ¼ã®ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Step4</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.props.tasks === <span class="hljs-literal">undefined</span> || <span class="hljs-keyword">this</span>.props.tasks === <span class="hljs-literal">null</span>
        ? <span class="xml"><span class="hljs-tag">&lt;&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> <span class="hljs-attr">animation</span>=<span class="hljs-string">"border"</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"span"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"status"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>  ...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/&gt;</span></span>
        : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TaskList</span>
          <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{this.props.doAdd}</span>
          <span class="hljs-attr">onDelete</span>=<span class="hljs-string">{this.props.doDelete}</span>
          <span class="hljs-attr">tasks</span>=<span class="hljs-string">{this.props.tasks}</span> /&gt;</span></span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸Šã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‚‚ã€è¿½åŠ ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã™ã¹ã¦ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®connectï¼ˆï¼‰é–¢æ•°ã«ã‚ˆã£ã¦é…ç½®ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
connectï¼ˆï¼‰é–¢æ•°ãŒã©ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«æ®‹ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥ç¶šï¼ˆï¼‰ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> repository <span class="hljs-keyword">from</span> <span class="hljs-string">'./RepositoryHolder'</span>;
<span class="hljs-comment">/* ... */</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Connected</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>( ...arguments );
    <span class="hljs-keyword">this</span>.handleRepoChanged = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.forceUpdate();<font></font>
  }<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">const</span> { childClass, childProps, mapRepoToProps, mapRepoToActions } = <span class="hljs-keyword">this</span>.props;
    <span class="hljs-keyword">const</span> promises = mapRepoToProps( repository, childProps );
    <span class="hljs-keyword">const</span> actions = mapRepoToActions( repository, childProps );<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RepositoryListener</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleRepoChanged}</span> <span class="hljs-attr">repository</span>=<span class="hljs-string">{repository}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PromisesComponent</span> <span class="hljs-attr">promises</span>=<span class="hljs-string">{promises}</span>&gt;</span>
        { values =&gt; React.createElement( childClass, {
          ...childProps,
          ...values,
          ...actions,
        } )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">PromisesComponent</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RepositoryListener</span>&gt;</span></span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connect</span>(<span class="hljs-params"> mapRepoToProps, mapRepoToActions </span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">childClass</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Connected</span>
    <span class="hljs-attr">childClass</span>=<span class="hljs-string">{childClass}</span>
    <span class="hljs-attr">childProps</span>=<span class="hljs-string">{props}</span>
    <span class="hljs-attr">mapRepoToActions</span>=<span class="hljs-string">{mapRepoToActions}</span>
    <span class="hljs-attr">mapRepoToProps</span>=<span class="hljs-string">{mapRepoToProps}</span> /&gt;</span></span>;<font></font>
}<font></font>
</code></pre>(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">   github</a>)</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¼ãƒ‰ã‚‚ãã‚Œã»ã©è¤‡é›‘ã§ã¯ãªã„ã‚ˆã†ã§ã™...ãƒ€ã‚¤ãƒ“ãƒ³ã‚°ã‚’é–‹å§‹ã™ã‚‹ã¨è³ªå•ãŒç™ºç”Ÿã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€å¾Œã‹ã‚‰èª­ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">é–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã¯ãã“ã§ã™</font></font><code>connect()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">2ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å–ã‚Šã€æ¬¡ã«...ã‚’è¿”ã™é–¢æ•°ã‚’è¿”ã—ã¾ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ã‚ã‚“ã¾ã‚Šã€‚</font><font style="vertical-align: inherit;">å¾Œè€…ã®æ§‹æˆ</font></font><code>props =&gt; &lt;Connected...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€é–¢æ•°ã ã‘ã§ãªã</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reactã®æ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿”ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ConnectedStep4ã‚’ä»®æƒ³ãƒ„ãƒªãƒ¼ã«åŸ‹ã‚è¾¼ã‚€ã¨ã€æ¬¡ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<ul>
<li><i>parent</i> â†’    â†’ Connect â†’ RepositoryListener â†’ PromisesComponent â†’ Step4</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¤§4ã¤ã®ä¸­é–“ã‚¯ãƒ©ã‚¹ã§ã™ãŒã€ãã‚Œãã‚ŒãŒãã®æ©Ÿèƒ½ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚åå‰ã®ãªã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€function </font></font><code>connect()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«</font><font style="vertical-align: inherit;">æ¸¡ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼</font><font style="vertical-align: inherit;">ã€ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¯ãƒ©ã‚¹ã€å‘¼ã³å‡ºã•ã‚ŒãŸã¨ãã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªä½“ã«æ¸¡ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆpropsï¼‰ã‚’</font><font style="vertical-align: inherit;">å–ã‚Šã€</font><font style="vertical-align: inherit;">ãã‚Œã‚‰ã‚’æ—¢ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã—ã¾ã™</font></font><code>Connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</font></font><code>Connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€æ¸¡ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼</font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆè¡Œã‚­ãƒ¼ã¨ãƒ—ãƒ­ãƒŸã‚¹å€¤ã‚’æŒã¤ãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰</font><font style="vertical-align: inherit;">ã‹ã‚‰ã‚»ãƒƒãƒˆã‚’å–å¾—ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><code>PromisesComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å€¤ã®è¨ˆç®—ã‚’æä¾›ã—ã€ãã‚Œã‚‰ã‚’Connectã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«è¿”ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€å…ƒã®è»¢é€ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆpropsï¼‰ã€è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆå€¤ï¼‰ã€ãŠã‚ˆã³properties-actionsï¼ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ã¨ã¨ã‚‚ã«ã€ãã‚Œã‚‰ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«</font></font><code>Step4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆå‘¼ã³å‡ºã—ã‚’ä»‹ã—ã¦</font></font><code>React.createElement(...)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰</font><font style="vertical-align: inherit;">æ¸¡ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚ã¾ã‚ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</font></font><code>RepositoryListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ›´æ–°ã—ã€ãƒªãƒã‚¸ãƒˆãƒªã§ä½•ã‹ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ç´„æŸã‚’å†è¨ˆç®—ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®çµæœã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã„ãšã‚Œã‹ãŒIndexDbã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€1ã¤ã®é–¢æ•°ã‚’æ¥ç¶šã—</font></font><code>connect()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å–å¾—ã™ã‚‹é–¢æ•°ã®é–“ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’æ±ºå®šã—ã¦ã€è¿½åŠ ã®å•é¡Œãªã—ã«ãã‚Œã‚‰ã‚’ä½¿ç”¨ã™ã‚‹</font><font style="vertical-align: inherit;">ã ã‘ã§ååˆ†ã§ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒ†ãƒƒãƒ—5. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ vlsergey / react-indexdb-repo</font></font></a></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«ã€ä»–ã®é–‹ç™ºè€…ãŒãƒ—ãƒ­â€‹â€‹ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã€ã“ã‚Œã‚‰ã™ã¹ã¦ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å½¢å¼ã§é…ç½®ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã®çµæœã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Library </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ vlsergey / react-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> promise-çµæœã®ãƒ¡ãƒ¢åŒ–ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹PromiseComponentãŠã‚ˆã³PromisesComponentã®å®Ÿè£…ï¼ˆå¤‰æ›´ãŒèˆˆå‘³ã‚’æŒãŸãªã„å ´åˆã®UIã®ã€Œã²ã­ã‚Šã€ãŒå°‘ãªããªã‚‹ã‚ˆã†ã«ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ vlsergey / React-indexdb-theãƒªãƒã‚¸ãƒˆãƒª</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -å®Ÿè£…IndexedDbRepositoryã€é–¢æ•°connectï¼ˆï¼‰ãŠã‚ˆã³ã„ãã¤ã‹ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ä¾‹</font></font></a></li>
</ul><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çµè«–ã®ä»£ã‚ã‚Šã«ï¼šèˆ¹å¤–ã«æ®‹ã£ã¦ã„ã‚‹ã‚‚ã®</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ç”£æ¥­ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã™ã‚‹ã®ã«ååˆ†å®Ÿç”¨çš„ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ãã‚Œã§ã‚‚ã€åˆ¶é™ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¸ã«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã™ã‚‹ã¨ã€æ–°ã—ã„ç´„æŸãŒå¾—ã‚‰ã‚Œã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã“ã“ã§ã¯ãƒ¡ãƒ¢åŒ–æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®ãƒ•ãƒ©ã‚°ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€IndexedDbRepositoryã‹ã‚‰ã®ã‚¹ã‚¿ãƒ³ãƒ—ãŒä¾¿åˆ©ãªå ´æ‰€ã§ã™ï¼ˆãŠãã‚‰ãã€ã“ã®ã‚³ãƒ¼ãƒ‰ã®ä¸€éƒ¨ã¯å†—é•·ã«æ€ã‚ã‚ŒãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼‰ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1ã¤ã®å ´æ‰€ã§ã‚ã£ã¦ã‚‚ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã‚ˆã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®æ¥ç¶šã¯é–“é•ã£ã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä½¿ç”¨ã«ç›®ã‚’å‘ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€1ã¤ã®IndexedDBãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’è¤‡æ•°ã®ã‚¿ãƒ–ã§é–‹ãã“ã¨ãŒã§ãã‚‹ã“ã¨ã¯è€ƒæ…®ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€æ©Ÿèƒ½ã®ç‚¹ã§æœ€ã‚‚é‡è¦ãªã‚‚ã®ã€ã¤ã¾ã‚Šã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¨ã‚µãƒ¼ãƒãƒ¼ã®åŒæœŸã«ã¤ã„ã¦ã¯èª¬æ˜ã—ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">æ­£ã—ã„åŒæœŸã«ã¯åˆ¥ã®è¨˜äº‹ãŒå¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">å®Ÿéš›ã€IndexDBã¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ã€Œå®Ÿéš›ã®ã€ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã™ããªã„ã“ã¨ãŒå¤šãã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ç„¡åŠ¹åŒ–ã¯2ã¤ã®æœ€ã‚‚é‡è¦ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å•é¡Œã®1ã¤ã§ã™ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ãŸã€IndexDBã¯Redux Storageã®ä»£ã‚ã‚Šã«ã¯ãªã‚‰ãªã„ã“ã¨ã‚‚è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">éå¸¸ã«ã¾ã‚Œãªã‚±ãƒ¼ã‚¹ã§ã¯ã€IndexDBã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§éå¸¸ã«å„ªã‚ŒãŸãƒ¡ãƒªãƒƒãƒˆãŒå¾—ã‚‰ã‚Œã¾ã™ãŒã€ã“ã‚Œã¯ã™ã¹ã¦ã®çŠ¶æ³ã«å¯¾å¿œã§ãã‚‹ç‰¹åŠ¹è–¬ã¾ãŸã¯ä»£æ›¿å“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã€</font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€‚</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472230/index.html">MLç”¨ãƒãƒƒãƒ—-æ–°è£½å“ã«ã¤ã„ã¦è©±ã™</a></li>
<li><a href="../ja472232/index.html">ã€ŒZX-Spectrumç”¨ã‚«ãƒ©ãƒ¼ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ãƒ€ãƒ¼ã€ã‹ã‚‰ZX-Polyã¸</a></li>
<li><a href="../ja472234/index.html">æš—å·é€šè²¨ï¼šãã‚Œã¯ã¾ã ãƒ•ãƒªãƒ¼ãƒ­ãƒ¼ãƒ€ãƒ¼ã§ã™ã‹ã€ãã‚Œã¨ã‚‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja472240/index.html">ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã€‚ãã‚Œã¯ä½•ã§ã™ã‹ã€ãªãœãã—ã¦ã©ã®ã‚ˆã†ã«ãã‚Œã‚’è¡Œã†ã®ã§ã™ã‹ï¼Ÿé–‹ç™ºè€…ã®å¤–è¦³</a></li>
<li><a href="../ja472242/index.html">Tokioã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ã‚’10å€é«˜é€ŸåŒ–ã—ã¾ã—ãŸ</a></li>
<li><a href="../ja472248/index.html">IT Planetãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ•ã‚¡ã‚¤ãƒŠãƒ«ã‚’ã©ã®ã‚ˆã†ã«çµ±åˆã—ãŸã‹</a></li>
<li><a href="../ja472252/index.html">10æœˆ21æ—¥ã‹ã‚‰28æ—¥ã¾ã§ã®ãƒ¢ã‚¹ã‚¯ãƒ¯ã§ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ</a></li>
<li><a href="../ja472254/index.html">10æœˆ21æ—¥ã‹ã‚‰28æ—¥ã¾ã§ã®ã‚µãƒ³ã‚¯ãƒˆãƒšãƒ†ãƒ«ãƒ–ãƒ«ã‚¯ã§ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆ</a></li>
<li><a href="../ja472258/index.html">ã€Œå­¦ã¶ã“ã¨ã‚’å­¦ã¶ã€æ–¹æ³•-ãƒã‚¤ãƒ³ãƒ‰ãƒ•ãƒ«ãƒã‚¹ã‚’æ”¹å–„ã™ã‚‹</a></li>
<li><a href="../ja472262/index.html">ãƒ¢ãƒã‚¤ãƒ«ï¼ƒ318é–‹ç™ºè€…å‘ã‘ã®èˆˆå‘³æ·±ã„è³‡æ–™ã®ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆï¼ˆ10æœˆ14ã€œ20æ—¥ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>