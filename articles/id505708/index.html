<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙇🏼 🙅🏻 🔝 Mengapa kita tidak menulis kode di pengontrol? 🍄 💓 🤾🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya pikir banyak dari Anda telah mendengar pendapat bahwa seharusnya tidak ada kode dalam pengontrol, dan oleh karena itu pengontrol dengan metode da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mengapa kita tidak menulis kode di pengontrol?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505708/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya pikir banyak dari Anda telah mendengar pendapat bahwa seharusnya tidak ada kode dalam pengontrol, dan oleh karena itu pengontrol dengan metode dalam satu baris dianggap sebagai "Praktik Terbaik." </font><font style="vertical-align: inherit;">Jika Anda memiliki pemikiran yang sama, saya bertanya di bawah kat.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8de/142/358/8de1423581455ddfe4a47f5af5693d62.png" alt="gambar"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Halo semuanya! </font><font style="vertical-align: inherit;">Saya ingin segera mengatakan bahwa pendapat saya tidak benar, dan tujuan dari posting ini adalah untuk mengekspresikan pendapat saya dan mendengar komentar orang lain. </font><font style="vertical-align: inherit;">Semua hal di atas berlaku untuk implementasi API, jika Anda memiliki MVC dengan tampilan, maka kasus ini tidak akan berfungsi, karena dalam hal ini lebih baik hanya menulis logika dengan Lihat di pengontrol</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang salah?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya yakin banyak dari Anda bekerja dengan aplikasi CRUD khas dengan arsitektur 3-layer (ngomong-ngomong, tidak ada lagi layer, tetapi lebih banyak tentang itu di waktu berikutnya). </font><font style="vertical-align: inherit;">Dan dalam arsitektur ini, Anda memiliki lapisan untuk bekerja dengan data (lebih lanjut DA), lapisan logika bisnis (lebih lanjut BL), dan lapisan tampilan (selanjutnya VL). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BL dapat dilakukan dengan berbagai cara, saya bertemu 2 opsi:</font></font><br>
<br>
<ul>
<li>Class —         .    -  ,    , , .         IRepository    ,  API       ,             .</li>
<li>CQS —      DTO (Command\Query) ,       .                  .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode-metode ini memiliki sejumlah aturan mereka sendiri dan salah satunya adalah bahwa penangan tidak dapat memanggil penangan lain, mereka harus benar-benar independen, situasi yang sama persis dalam pelaksanaan melalui kelas biasa dengan banyak metode, metode ini begitu melekat pada fitur sehingga mereka tidak dapat digunakan kembali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan beberapa implementasi dalam gaya ini, dan kemudian saya akan mentransfer kode ke pengontrol dan kami akan menganalisis apa yang telah hilang. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/94a/cec/90b/94acec90b37d7d50e3d2b8154ada6495.png" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/94a/a11/236/94aa11236a0675ae51802682b917003b.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam formulir ini, kami menerapkan semua metode dan kemudian memanggil mereka di tingkat API: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/57a/c90/589/57ac905897f3c4ddfe4807d5e0e2d3f0.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harap Anda mengerti bahwa kode dengan Command -&gt; Handler akan serupa, hanya lebih terbagi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan itu selalu menghantui saya, mengapa saya melakukan pekerjaan ekstra ini?</font></font><br>
<br>
<ul>
<li>  ? — ,         .<br>
<br>
 -       2 ,     —   </li>
<li>      ? — ,     ?      ,         IUserService?</li>
<li>?     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">TestServer</a>    end2end .</li>
</ul><br>
<h2>     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita hapus kelebihannya. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ff0/05d/bcd/ff005dbcd0122ff451e06541214630f3.png" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/80b/44d/fb2/80b44dfb21071c0ebb8ef2e1e1199d42.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajaibnya, kode layanan tidak berbeda dari controller, kami hanya menambahkan beberapa atribut dan siap untuk menangkap permintaan http. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya percaya bahwa ASP NET telah dengan sempurna mengabstraksi kami dari bekerja dengan HTTP, kami memiliki tempat terbaik di mana kami beroperasi dengan tipe kami. </font><font style="vertical-align: inherit;">Saya ulangi, jika Anda memiliki pandangan, maka di controller lebih baik menulis kode hanya untuk Tampilan, dan dalam layanan menulis </font><font style="vertical-align: inherit;">metode yang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">digunakan kembali</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk mendapatkan data untuk Tampilan. </font><font style="vertical-align: inherit;">Namun dalam kenyataan saat ini, semakin sering kita memiliki API + SPA.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Validasi?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASP NET Core Pipeline sangat baik disetel dan memiliki banyak solusi, lihat FluentValidation, Anda akan menambahkan validasi tanpa mengubah kode di controller.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingin lebih banyak pemisahan?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Pisahkan antarmuka dan jika Anda membutuhkan implementasi juga. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a19/389/bca/a19389bca07fbf6521fd5683a861bad5.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai bonus, antarmuka layanan menjadi kontrak tingkat atas, dan dalam kerangka satu proses, itu hanya panggilan langsung kode dari pengontrol, sebagai bagian dari komunikasi client-server, implementasi sederhana dari antarmuka yang sama menggunakan HttpClient diganti.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hubungkan saluran lain</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika mereka memberi tahu saya bahwa kami dapat memiliki saluran lain, misalnya, melalui antrian, saya bisa mendapatkan turunan dari pengontrol dan menggunakannya di saluran lain. </font><font style="vertical-align: inherit;">Kontroler ini mudah diselesaikan dari DI. </font><font style="vertical-align: inherit;">Selain itu, ASP NET cukup fleksibel dan Anda dapat mengajarkan beberapa saluran untuk memprosesnya sendiri, lagi-lagi memodifikasi pipa.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/95d/b6d/75e/95db6d75e8fe8cd3bc3fcd4101a821ad.png" alt="gambar"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fakta yang menyenangkan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas pengujian dengan gaya ini akan dibuang dan ditolak, tetapi Anda memiliki banyak alasan mengapa Anda melakukannya, tetapi jika Anda pergi ke wawancara dan membahas mengapa Anda merancang kode, maka ini mungkin tempat yang bagus dan Anda memiliki spesialis yang sama yang mengerti pemrograman yang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beragam</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda hanya dapat menggunakan kembali layanan berdasarkan jenis repositori, cache, api klien, dll., Tetapi menggunakan kembali logika pemrosesan permintaan tunggal adalah kasus yang sangat jarang, dan kemungkinan besar yang buruk. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendekatan ini, seperti yang lain, perlu diterapkan di tempat yang tepat, menghemat waktu, dan sangat nyaman untuk API (layanan mikro) yang tertutup untuk akses publik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya percaya bahwa controller adalah Layanan BL atau Command \ QueryHandler, dan dalam proyek saya, saya mempraktikkan pendekatan ini dan saya membagikan controller dengan sangat baik, saya sarankan Anda juga mencoba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak meningkatkan tanggung jawab kerangka kerja, itu memiliki tugas:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menerima Permintaan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Petakan mereka dalam suatu model</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panggil kode yang kami tentukan sesuai dengan beberapa aturan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berikan jawaban</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia tinggal bersamanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya benar-benar tidak melihat masalah kritis mengapa ini tidak boleh dilakukan, oleh karena itu saya mengundang Anda untuk berkomentar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika saya tidak banyak terlempar, maka artikelnya adalah tentang antarmuka pada setiap kelas layanan dari sistem, dan apakah ini perlu? </font><font style="vertical-align: inherit;">Apakah perlu menulis solusi agar lebih mudah </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kentut</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> basah.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id505698/index.html">7 situs untuk desain situs web. Apa yang harus dipilih?</a></li>
<li><a href="../id505700/index.html">Saya akan mewawancarai programmer Java. Satu set pertanyaan untuk semua level</a></li>
<li><a href="../id505702/index.html">Perlindungan salinan yang kikuk (hampir secara harfiah)</a></li>
<li><a href="../id505704/index.html">Bekerja pada remote control - yang lama terlupakan</a></li>
<li><a href="../id505706/index.html">Berita FOSS No. 19 - ulasan berita gratis dan sumber terbuka untuk 1-7 Juni 2020</a></li>
<li><a href="../id505710/index.html">WebSockets dan Spring WebFlux</a></li>
<li><a href="../id505720/index.html">Spring Boot + Apache Kafka dan SSL di wadah Docker</a></li>
<li><a href="../id505724/index.html">Penggunaan wajar Rusia: di mana perbatasan hak cipta?</a></li>
<li><a href="../id505736/index.html">Jalankan, PHPUnit, jalankan: bagaimana saya mengoptimalkan waktu eksekusi pengujian</a></li>
<li><a href="../id505738/index.html">Sedikit tentang periodograms dari deret waktu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>