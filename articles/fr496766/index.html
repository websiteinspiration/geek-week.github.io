<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçü§ù‚Äçüë©üèª üßîüèª üë®‚Äçüë©‚Äçüëß‚Äçüëß Qu'est-ce qu'Azure Stack HCI et comment √ßa marche üíÄ üõ•Ô∏è üêÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Aujourd'hui, nous voulons parler de la plate-forme Azure Stack HCI. Y compris ce qu'il est en g√©n√©ral, √† partir de quel mat√©riel est as...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Qu'est-ce qu'Azure Stack HCI et comment √ßa marche</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/496766/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font><font style="vertical-align: inherit;">Aujourd'hui, nous voulons parler de la plate-forme Azure Stack HCI. </font><font style="vertical-align: inherit;">Y compris ce qu'il est en g√©n√©ral, √† partir de quel mat√©riel est assembl√©, quel logiciel contient, comment il fonctionne, et c'est tout. </font><font style="vertical-align: inherit;">Adh√©rer maintenant!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/a8/ns/msa8nsszbolcqdqftfpzhmhkkci.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceci est un post invit√© des gars d'AltaStor. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AltaStor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un int√©grateur de syst√®mes sp√©cialis√© dans la cr√©ation de solutions pour un stockage fiable des donn√©es. </font><font style="vertical-align: inherit;">Gr√¢ce √† l'expertise accumul√©e dans la cr√©ation de clusters de basculement et de HCI, une solution individuelle est s√©lectionn√©e pour chaque client le mieux adapt√© √† ses t√¢ches.</font></font></blockquote><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que Azure Stack HCI?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'une solution hyperconverg√©e qui combine plusieurs produits:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mat√©riel d'un partenaire OEM certifi√© Microsoft.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syst√®me d'exploitation Windows Server 2019 Datacenter.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logiciel Windows Admin Center.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services Microsoft Azure si n√©cessaire.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette solution existe depuis longtemps sur le march√© et certains de nos clients l'utilisent depuis longtemps et avec succ√®s. </font><font style="vertical-align: inherit;">Cependant, ils ne publient pas les r√©sultats des tests de performances de leur installation. </font><font style="vertical-align: inherit;">Nous avons d√©cid√© de combler cette lacune et de parler de notre exp√©rience d'utilisation d'Azure Stack HCI avec un exemple sp√©cifique. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour obtenir de la documentation et des informations g√©n√©rales sur Azure Stack HCI, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cliquez ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disposition du stand</font></font></h2>&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/086/5d0/047/0865d0047d86f46f5e2999f9abac8409.jpg"><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âquipement</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cr√©ation d'une solution n√©cessite une plate-forme mat√©rielle recommand√©e par Microsoft. Les principaux fabricants de mat√©riel serveur - HPE, Dell EMC, Fujitsu, Hitachi, Lenovo, etc. - ont d√©velopp√© leurs configurations, les ont test√©es pour la compatibilit√© et certifi√©s pour Azure Stack HCI. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une liste compl√®te des √©quipements compatibles est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon les types de lecteurs utilis√©s, les composants de la plate-forme varient. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pr√©f√©rons construire de telles solutions sur la base de serveurs Fujitsu avec le syst√®me d'exploitation Windows Server 2019 Datacenter pr√©install√©. Ce fabricant apr√®s la vente prend en charge l'ensemble du complexe logiciel et mat√©riel en tant que solution compl√®te, et pas seulement son mat√©riel. Ceci est important pour nous, en tant que partenaires, et pour le client final.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement, Fujitsu dispose de cinq configurations certifi√©es pour diff√©rents types de disques, mod√®les de serveurs et nombre de n≈ìuds. Le nombre maximal de n≈ìuds pour Azure Stack HCI est de 16, le minimum est de 2, mais certaines configurations sont limit√©es √† 4. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les configurations Fujitsu compatibles peuvent √™tre consult√©es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'installation, nous avons choisi la configuration la plus efficace parmi celles actuellement certifi√©es - Fujitsu Primergy avec des disques SSD pour le stockage des donn√©es, et des modules de m√©moire ultra-rapides Intel Optane connect√©s via l'interface NVMe comme cache syst√®me. Nous nous attendons √† obtenir une baie 100% Flash d√©finie par logiciel avec des performances comparables au stockage classique avec des disques SSD et un cache NVMe.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les syst√®mes de stockage 100% Flash des leaders de l'industrie ont des configurations de type de support similaires. </font><font style="vertical-align: inherit;">Nous savons quels IOPS et mesures de latence peuvent √™tre obtenus dans la pratique √† partir de syst√®mes similaires et attendons avec impatience des performances similaires d'Azure Stack HCI bas√©es sur la configuration Fujitsu s√©lectionn√©e. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/097/a99/1f1/097a991f1f820647f030183802c834e3.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'architecture de cette solution Fujitsu est d√©crite en d√©tail dans un document disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vous recommandons de vous familiariser avec celui-ci avant l'installation. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/468/866/9ae/4688669aee12df9248e368a88c758af0.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le document d√©crit les limites de l'architecture, les sch√©mas de connexion typiques et de nombreuses autres informations utiles au stade de la mise en ≈ìuvre.</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9b5/f47/26c/9b5f4726c82a82d0d12d6dafd967e443.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commutateurs</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La solution de Fujitsu utilise son propre commutateur Ethernet PSWITCH. </font><font style="vertical-align: inherit;">Pour nous, nous avons not√© les avantages suivants:&nbsp;</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les interrupteurs de cette s√©rie sont tr√®s productifs, √† faible co√ªt.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les commutateurs sont assez simples √† configurer et √† utiliser l'interface de type CISCO. </font><font style="vertical-align: inherit;">Les ing√©nieurs n'ont rencontr√© aucune difficult√© lors de l'installation.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'y a aucun exc√®s de propri√©t√© dans l'administration et une documentation comp√©tente est disponible.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©quipement de commutation Fujitsu est l'un des leaders de l'industrie au Japon. </font><font style="vertical-align: inherit;">Il est r√©cemment devenu disponible sur le march√© russe, mais est d√©j√† r√©guli√®rement utilis√© dans les projets de nos architectes et autres partenaires Fujitsu. </font><font style="vertical-align: inherit;">Un nombre limit√© de mod√®les sont actuellement disponibles.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En savoir plus sur les commutateurs Fujitsu sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site officiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serveur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä l'int√©rieur du serveur, les cartes m√©moire Intel Optane occupent une partie importante de l'espace.&nbsp; </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/895/742/c12/895742c127ddef9ed35f44ddbfc2b6fa.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5bb/1dd/77f/5bb1dd77f0079b9babe09973b132156b.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intel accorde une grande attention aux performances en cas de forte demande de chaleur. D'une part, pour un refroidissement de qualit√© maximale, de grands radiateurs sont utilis√©s. En revanche, cela limite le flux d'air de refroidissement √† l'int√©rieur de l'ensemble du serveur.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est l'un des points cl√©s qui est pris en compte lors de la certification de la configuration - il est n√©cessaire de consid√©rer tous les sc√©narios possibles dans lesquels, en raison d'un refroidissement insuffisant, les serveurs sont capables de surchauffer le module Optane, ou vice versa.</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du d√©m√©nagement de la salle des serveurs, nos clients ont plus d'une fois √©t√© confront√©s √† une situation o√π le syst√®me de climatisation n'√©tait pas encore mis en service. Par cons√©quent, nous avons d√©cid√© de v√©rifier √† quel point cette installation est exigeante pour le syst√®me de refroidissement et de mesurer la dur√©e de vie de la plate-forme sous charge √† l'ext√©rieur de la salle des serveurs refroidie.&nbsp;&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tests ont √©t√© effectu√©s √† temp√©rature ambiante, mais nous n'avons rencontr√© aucune limitation thermique, ni diminution des performances, ni apparition d'erreurs dues √† une surchauffe. Nous avons vu de notre propre exp√©rience que les serveurs test√©s prennent en charge la capacit√© de travail d√©clar√©e √† une temp√©rature ambiante allant jusqu'√† +45 degr√©s Celsius.&nbsp; </font></font><br>
&nbsp;<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette exp√©rience ne doit pas √™tre consid√©r√©e comme une recommandation d'abandonner l'utilisation de salles de serveurs sp√©ciales avec une ventilation de haute qualit√©. </font><font style="vertical-align: inherit;">Lorsque vous choisissez un fournisseur de solutions mat√©rielles, assurez-vous de faire attention au package de temp√©rature maximale.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assemblage de plate-forme mat√©rielle</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vue avant: Vue </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b5/53b/5eb/7b553b5eb67aaa8405b3aec5eb7ddfd7.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
arri√®re: </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1db/a71/be8/1dba71be8bf20b34a2874dfb64d2e758.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un seul interrupteur a √©t√© utilis√© dans le test. </font><font style="vertical-align: inherit;">Pour une utilisation commerciale, nous vous recommandons toujours de r√©server des chemins d'acc√®s en utilisant au moins deux commutateurs. </font><font style="vertical-align: inherit;">Selon nos statistiques, la d√©faillance mat√©rielle la plus courante dans les clusters est une rupture accidentelle de c√¢ble ou un contact rompu dans le connecteur.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fujitsu RX1330 a √©t√© utilis√© comme serveur avec un logiciel de contr√¥le. </font><font style="vertical-align: inherit;">Il s'est √©galement vu confier les fonctions d'arbitre et de serveur de quorum.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©ploiement de cluster</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re √©tape a consist√© en l'installation physique des composants mat√©riels, la connexion des c√¢bles d'interface, etc. </font><font style="vertical-align: inherit;">Cela a √©t√© suivi par la configuration du logiciel, comme </font><font style="vertical-align: inherit;">Le syst√®me d'exploitation est d√©j√† pr√©install√©. </font><font style="vertical-align: inherit;">Nous avons d√©ploy√© Storage Space Direct sur chaque serveur et construit un cluster de 2 n≈ìuds et un arbitre. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons ensuite utilis√© l'utilitaire Fujitsu Infrastructure Manager, une extension </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Admin Center</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui s'int√®gre √©troitement avec le mat√©riel du serveur Fujitsu et contient tous les outils de gestion d'Azure, tels que:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Site Recovery fournit une haute disponibilit√© et une reprise apr√®s sinistre en tant que service (DRaaS).</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Monitor est un site centralis√© pour surveiller le fonctionnement des applications, des r√©seaux et de l'infrastructure avec des analyses approfondies bas√©es sur l'IA.</font></font><br>
</li>
<li>¬´-¬ª   Azure          .<br>
</li>
<li> Azure Backup     ,      -.<br>
</li>
<li> ¬´  Azure¬ª          Windows,   Azure    .<br>
</li>
<li>  Azure          Azure  VPN-  ¬´ ‚Äî ¬ª.<br>
</li>
<li> ¬´  Azure¬ª     .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'extension vous permet d'automatiser un certain nombre de t√¢ches qui peuvent √©galement √™tre effectu√©es directement dans le centre d'administration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pool de stockage rassembl√©, cr√©√© des volumes dedans. </font><font style="vertical-align: inherit;">Ces volumes sont par la suite localis√©s des machines virtuelles pour lesquelles nous avons effectu√© des tests de performances. </font><font style="vertical-align: inherit;">Les volumes et les machines virtuelles sont g√©r√©s de mani√®re pratique √† partir d'une seule fen√™tre. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f25/a14/7cf/f25a147cf1d43eb65ce7afab6c5f2e6a.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gr√¢ce √† Fujitsu Infrastructure Manager, il est √©galement pratique de faire beaucoup de choses sur la maintenance planifi√©e et les mises √† jour du microcode. </font><font style="vertical-align: inherit;">L'√©tat de tous les √©quipements est clairement affich√©, beaucoup peut √™tre automatis√©. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/364/a36/bed/364a36bed36a81528668e7d705699c11.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe deux versions de l'utilitaire Fujitsu Infrastructure Manager - payantes et gratuites:</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gratuit. </font><font style="vertical-align: inherit;">Disponible en t√©l√©chargement sur le site Web du fabricant, il suffit amplement pour la gestion du serveur.</font></font><br>
</li>
<li>.       Microsoft Azure HCI ‚Äî      Windows Server     .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une int√©gration profonde de Primergy avec Microsoft Azure Stack HCI, vous avez besoin d'un plug-in de gestion de serveur √† partir de Windows Server, qui n'est disponible que dans la version payante. Par cons√©quent, la solution FUJITSU Integrated System PRIMEFLEX pour Microsoft Azure Stack HCI en fait partie.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus vous avez d'installation, plus l'automatisation fournie par l'utilitaire est pr√©cieuse. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a que 2 n≈ìuds dans notre stand et nous pourrions faire tout le travail manuellement. Si vous avez 4 n≈ìuds ou plus, le logiciel r√©duira consid√©rablement vos efforts d'installation et d'administration. Le co√ªt des services publics repr√©sente moins de 1% du projet, mais acc√©l√®re consid√©rablement la mise en service des √©quipements. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le Centre d'administration Windows, Fujitsu Infrastructure Manager Orchestra est un pack d'extension:</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/03b/747/11d/03b74711d36cdbe8d7809619e3b38e6f.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√™me capture d'√©cran montre la composition du sous-syst√®me de disques du serveur: deux modules Optane sont utilis√©s comme extension de cache et cinq disques SSD comme pool de stockage de niveau 1.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les points importants</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la cr√©ation d'une solution, plusieurs nuances doivent √™tre prises en compte: </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous pouvez g√©rer Microsoft Azure Stack HCI de deux mani√®res: via le Centre d'administration Windows ou Fujitsu Infrastructure Manager.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Admin Center a √©galement ses avantages - vous pouvez le d√©ployer sur n'importe quoi, m√™me sur un ordinateur portable; Il est possible de contr√¥ler √† partir de la ligne de commande. Avec lui, l'administrateur peut faire presque n'importe quoi.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe √©galement Cluster Manager - un outil indispensable pour tout probl√®me avec le cluster.&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du d√©ploiement de Witness (serveur de quorum), il est important de l'ajouter √† Active Directory et de v√©rifier sa disponibilit√© sur tous les n≈ìuds. Les exigences pour cette t√¢che sont minimes et peuvent √™tre plac√©es sur n'importe quel serveur de base.</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/081/cfc/f9b/081cfcf9b862e035a65600f1138f5dfe.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Du point de vue de Windows Server, il existe trois types de p√©riph√©riques de disque: NVMe, SSD et HDD. La logique du travail est la suivante: les p√©riph√©riques NVMe sont le cache de lecture / √©criture, le SSD est le niveau de stockage de niveau 1; HDD - Niveau de stockage Tier-2. Ensuite, vous pouvez configurer des strat√©gies pour d√©placer des donn√©es entre des pools. Les NVDIMM peuvent √©galement √™tre utilis√©s comme cache. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La taille de bloc par d√©faut pour la d√©chirure est 4K, mais peut varier en fonction du type de syst√®me de fichiers dans la machine virtuelle. Cela affectera par la suite les performances. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utilisons des modules NVMe comme cache, donc la vitesse de lecture et d'√©criture des donn√©es sera tr√®s diff√©rente - cela sera clairement visible dans les tests de performances:</font></font><br>
&nbsp;<br>
<ul>
<li>                 ( ),    SSD (Tier-1,  ).<br>
</li>
<li>       NVMe    ,       ,       .    .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de cr√©er un cluster, la validation et tous les tests dans le gestionnaire de cluster de basculement doivent √™tre termin√©s. </font><font style="vertical-align: inherit;">Le rapport doit √™tre enregistr√©, car sans lui, il ne sera pas possible d'ouvrir un appel de service dans le support Microsoft, si n√©cessaire. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'ajout de nouveaux n≈ìuds √† un cluster existant, les n≈ìuds seront automatiquement ajout√©s au pool de stockage. </font><font style="vertical-align: inherit;">Apr√®s 15 minutes, le cluster reconstruira, reconstruira et √©quilibrera automatiquement le pool de stockage. </font><font style="vertical-align: inherit;">Cela peut affecter les performances lors de la reconstruction.</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des tests de performance</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons maintenant √† la partie la plus int√©ressante - les tests de charge. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuration de test:</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deux serveurs Fujitsu PRIMERGY RX2540 assembl√©s en cluster;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaque serveur dispose de deux modules de m√©moire de classe de stockage Intel Optane install√©s, utilis√©s pour √©tendre le cache de lecture / √©criture;</font></font><br>
</li>
<li>      SSD,      ,<br>
</li>
<li>      erasure coding ( RAID-5).<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il s'agit d'un syst√®me de stockage d√©fini par logiciel ex√©cutant Windows Server 2019 Azure Stack HCI. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commen√ßons le premier test avec 12 machines virtuelles ex√©cut√©es sur les deux n≈ìuds. Le profil de chargement en lecture / √©criture est 70:30, la taille du bloc = 8k. La taille de bloc a √©t√© choisie en fonction du fait que la plupart des bases de donn√©es transactionnelles et des charges OLTP modernes utilisent exactement une telle taille de bloc et approximativement le m√™me rapport de lecture / √©criture. </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6b2/d7c/9da/6b2d7c9dac708b1f4d5330e3f0742e00.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les performances du cluster en r√©gime permanent sont de 428 000 IOPS avec un retard de 0,487 ms. C'est un r√©sultat vraiment digne, qui est tout √† fait comparable √† ce que vous pouvez obtenir sur un syst√®me de stockage 100% flash sp√©cialis√© de nombreux fabricants.&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des tests ind√©pendants avec un profil de charge similaire sont fournis sur la ressource spcresults.org - il s'agit du test SPC-1. La diff√©rence avec notre configuration r√©side uniquement dans la taille du bloc - elle est de 4k. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous simplifions consid√©rablement la m√©thodologie de comparaison des r√©sultats, nous pouvons diviser en deux indicateurs IOPS obtenus pour les syst√®mes de stockage 100% flash et les comparer avec les chiffres que nous avons re√ßus au m√™me temps de r√©ponse. Les r√©sultats obtenus sur notre cluster de deux serveurs de niveau interm√©diaire sont assez comparables √† la plupart des syst√®mes de stockage.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, une telle comparaison n'est pas tr√®s correcte, car dans notre cas, une augmentation du nombre de disques affectera les performances et les retards diff√©remment qu'avec un syst√®me de stockage sp√©cialis√©. Mais, m√™me en tenant compte de toutes ces hypoth√®ses, on peut dire qu'il y a quelques ann√©es, de telles performances n'√©taient visibles que sur un syst√®me de stockage externe multi-contr√¥leurs d'un niveau moyen voire sup√©rieur. Aujourd'hui, cela est r√©alisable sur une solution hyperconverg√©e. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'image des performances change consid√©rablement lorsque la d√©duplication et les mesures sont activ√©es avec la taille de bloc pr√©c√©dente = 8k. Si vous activez simplement la d√©duplication sur le m√™me profil de charge, les performances seront inf√©rieures √† 300 000 IOPS.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous ex√©cutons deux profils de charge avec un bloc de 8 Ko o√π un profil est 100% lu et l'autre 100% √©crit, alors ci-dessous sont les meilleurs chiffres que nous avons pu obtenir: </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ed8/e3d/5e3/ed8e3d5e3a387044eb8b52b8fa45ca41.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voyons d'excellents r√©sultats de lecture, surtout si nous prenons en compte un retard de 12 Œºs. </font><font style="vertical-align: inherit;">Ici, Optane fait vraiment un excellent travail en tant que cache de lecture avec des algorithmes proactifs pour le transfert pr√©dictif de donn√©es vers le cache. </font><font style="vertical-align: inherit;">Oui, et le pool de stockage lui-m√™me, situ√© sur le SSD, affiche √©galement de tr√®s bons nombres de lecture. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais la vitesse d'√©criture est tr√®s diff√©rente. </font><font style="vertical-align: inherit;">Voici quelques facteurs s√©rieux:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'architecture de la solution, lorsque des donn√©es tombant dans le cache d'un n≈ìud sont copi√©es sur le r√©seau vers le cache du deuxi√®me n≈ìud.</font></font><br>
</li>
<li>  :         ‚Äî  ,         Optane.          . <br>
<br>
            45%,            ,      ‚Äî ,     .       .<br>
</li>
<li>   SSD       SSD ‚Äî    3D-NAND ,         3D-NAND.<br>
</li>
</ul><br>
<h2></h2><br>
<ul>
<li> OLTP-      ‚Äì       8k    .&nbsp;&nbsp;<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La d√©duplication peut √™tre activ√©e √† tout moment, mais elle r√©duit consid√©rablement les performances. </font><font style="vertical-align: inherit;">L'efficacit√© de la d√©duplication dans nos tests √©tait de 45% avec une baisse de performance de plus de 25%.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela vous donne la libert√© de choix - soit des performances de stockage sup√©rieures, soit presque deux fois plus de capacit√©. </font><font style="vertical-align: inherit;">En outre, beaucoup d√©pendra du profil de charge et de la capacit√© de compresser les donn√©es enregistr√©es.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En raison de l'architecture de la solution, les op√©rations d'√©criture s√©quentielle augmentent consid√©rablement le temps de r√©ponse.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce n'est pas en vain que Microsoft vous oblige √† construire une solution uniquement sur la base de configurations valid√©es de partenaires OEM - cela vous permet d'√©viter de nombreux probl√®mes √† la fois lors de l'installation initiale et lors de travaux ult√©rieurs.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Travailler avec le mat√©riel de Fujitsu, comme toujours, n'a laiss√© qu'une impression positive. </font><font style="vertical-align: inherit;">Il s'agit d'une documentation judicieuse et de nombreux ajouts utiles d'Infrastructure Manager - ce progiciel simplifie consid√©rablement la gestion du syst√®me. </font><font style="vertical-align: inherit;">Ceci est particuli√®rement important lors de l'augmentation du nombre de n≈ìuds.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La solution PRIMEFLEX de Fujitsu comprend un ensemble de scripts qui acc√©l√®re le processus de d√©ploiement. </font><font style="vertical-align: inherit;">Ils facilitent le d√©marrage et la configuration en g√©n√©ral, et les serveurs Fujitsu PRIMERGY en particulier.</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdc/a11/060/fdca11060f83e478d5edd39134097dfa.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ceux qui ne souhaitent pas r√©gler automatiquement la solution, il est possible de conclure un contrat de solution technique avec Fujitsu. </font><font style="vertical-align: inherit;">Dans ce cas, les sp√©cialistes techniques du fournisseur d√©ploieront tout sur une base cl√© en main et fourniront un support suppl√©mentaire.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr496756/index.html">AWS Lambda en action. Partie 2: se familiariser avec les outils de d√©veloppement et de test</a></li>
<li><a href="../fr496758/index.html">Soins de sant√© m√©di√©vaux num√©riques. Transformation technologique mondiale apr√®s COVID-19</a></li>
<li><a href="../fr496760/index.html">Flux d'utilisateurs: comment cr√©er des applications et des sites populaires</a></li>
<li><a href="../fr496762/index.html">Simulation d'√©rosion de surface bas√©e sur les particules</a></li>
<li><a href="../fr496764/index.html">Petit mais fier: DuckDuckGo vs Ad Monsters</a></li>
<li><a href="../fr496768/index.html">Oubliez RVB et HEX</a></li>
<li><a href="../fr496770/index.html">Appartement d'ing√©nieur automatis√©. Partie 1: √©nonc√© du probl√®me, choix du fer</a></li>
<li><a href="../fr496772/index.html">Les v√©hicules sans pilote devraient ¬´garder √† l'esprit¬ª les marques de voitures conduites par les conducteurs les plus exigeants</a></li>
<li><a href="../fr496774/index.html">Nous √©levons notre serveur de jeu Minecraft √† part enti√®re avec des mini-jeux. Partie 3. Installer des mini-jeux</a></li>
<li><a href="../fr496776/index.html">Piratage de v√©hicules sans pilote: qui en sera responsable (√©tude RAND Corporation)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>