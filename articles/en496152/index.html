<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëãüèæ üõ£Ô∏è üôÖüèª Network automation. Case of life üò† ü§∑üèª üéä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! 
 
 In this article we would like to talk about automation of network infrastructure. A working network diagram will be presented, which ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Network automation. Case of life</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496152/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article we would like to talk about automation of network infrastructure. </font><font style="vertical-align: inherit;">A working network diagram will be presented, which operates in one small but very proud company. </font><font style="vertical-align: inherit;">All matches to real network hardware are random. </font><font style="vertical-align: inherit;">We will consider a case that occurred in this network, which could lead to a business shutdown for a long time and serious financial losses. </font><font style="vertical-align: inherit;">The solution of this case fits very well into the concept of "Automation of network infrastructure." </font><font style="vertical-align: inherit;">Using automation tools, we will show how you can effectively solve complex problems in a short time, and reflect on the topic of why these tasks are more promising to be solved in this way and not otherwise </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(through the console)</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disclaimer</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our main automation tools are Ansible (as a means of automation) and Git (as a repository of Ansible's playbooks). I immediately want to make a reservation that this is not a fact-finding article, where we talk about the logic of Ansible or Git, and explain basic things (for example, what are roles \ tasks \ modules \ inventory files \ variables in Ansible, or what happens when you enter git push commands or git commit). This story is not about how you can practice in Ansible, configure it on NTP or SMTP equipment. This is a story about how you can quickly and preferably without errors solve a network problem. It is also desirable to have a good idea of ‚Äã‚Äãhow the network works, in particular, what is the TCP / IP, OSPF, BGP protocol stack. The choice of Ansible and Git is also out of the question. If you still have a choice of a specific solution,we highly recommend reading the book Network Programmability and Automation. Skills for the Next-Generation Network Engineer ‚Äùby Jason Edelman, Scott S. Lowe, and Matt Oswalt.</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now to the point.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulation of the problem</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine a situation: 3 a.m., you sleep soundly and dream. </font><font style="vertical-align: inherit;">The call to the phone. </font><font style="vertical-align: inherit;">The technical director </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 is </font><font style="vertical-align: inherit;">calling: </font><font style="vertical-align: inherit;">- Yes? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - ###, ####, #####, the cluster of firewalls has fallen and does not rise !!! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You rub your eyes, try to realize what is happening and imagine how such a thing could have happened. </font><font style="vertical-align: inherit;">In the tube you can hear the hair tearing on the head of the director, and he asks to call back, because the general calls him on the second line. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After half an hour, you collected the first introductory notes from the shift on duty, woke everyone you could wake up to. </font><font style="vertical-align: inherit;">As a result, the technical director did not lie, everything is so, the main cluster of firewalls has fallen, and no basic gestures bring him to his senses. </font><font style="vertical-align: inherit;">All services that the company offers do not work.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choose a problem for your taste, everyone will remember something different. </font><font style="vertical-align: inherit;">For example, after an overnight update, in the absence of a heavy load, everything worked well, and all satisfied went to bed. </font><font style="vertical-align: inherit;">Traffic went, and interface buffers began to overflow due to a bug in the network card driver. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The situation can well describe Jackie Chan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/nm/20/ltnm203hcpvq05tb8uq3ke6e1qm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thanks, Jackie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The situation is not very pleasant, is it? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's leave for the time of our network bro with his sad thoughts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will discuss how events will develop further. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We offer the following order of presentation of the material</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider the network diagram and analyze how it works;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We will describe how we transfer settings from one router to another using Ansible;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's talk about the automation of IT infrastructure in general.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Network diagram and its description</font></font></h4><br>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scheme</font></font></b></p><br>
<br>
<img src="https://habrastorage.org/webt/wp/0f/zp/wp0fzp8bvlwmylrn-pl7knbplga.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider the logic of our organization. </font><font style="vertical-align: inherit;">We will not name specific manufacturers of equipment, this does not matter within the article </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(The attentive reader himself will guess what</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kind of </font><i><font style="vertical-align: inherit;">equipment is used)</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This is just one of the good advantages of working with Ansible, when setting up, in general, we do not care what kind of equipment it is. </font><font style="vertical-align: inherit;">Just to understand, this equipment is well-known vendors such as Cisco, Juniper, Check Point, Fortinet, Palo Alto ... you can substitute your own version. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have two main tasks for moving traffic:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensure the publication of our services, which are the business of the company;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provide communication with branches, a remote data center and third-party organizations (partners and customers), as well as access to the Internet through the central office.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with the basic elements:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Two border routers (BRD-01, BRD-02);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firewall Cluster (FW-CLUSTER);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kernel Switch (L3-CORE);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A router that will become a lifeline (in the process of solving the problem, we will transfer the network settings from FW-CLUSTER to EMERGENCY) (EMERGENCY);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Switches for managing network infrastructure (L2-MGMT);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Virtual machine with Git and Ansible (VM-AUTOMATION);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A laptop that tests and develops playbooks for Ansible (Laptop-Automation).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A dynamic OSPF routing protocol is configured on the network with the following areas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Area 0 - the area in which the routers responsible for the movement of traffic in the EXCHANGE zone are included;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Area 1 - the area in which the routers responsible for the work of the company's services are included;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Area 2 - the area in which the routers responsible for routing management traffic are included;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Area N - branch network areas.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On border routers it is created on a virtual router (VRF-INTERNET), on which eBGP full view with the corresponding assigned AS is raised. Between VRFs iBGP is configured. The company has a pool of white addresses that are published on these VRF-INTERNETs. Some of the white addresses are routed directly to FW-CLUSTER (addresses on which the company's services operate), some are routed through the EXCHANGE zone (internal company services that require external IP addresses and external NAT addresses for offices). Further, traffic gets to virtual routers created on L3-CORE with white and gray addresses (security zones). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Management networks use dedicated switches and are a physically dedicated network. Management network is also divided into security zones.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The EMERGENCY router physically and logically duplicates the FW-CLUSTER. </font><font style="vertical-align: inherit;">All interfaces are disabled on it except those that look at the management network.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automation and its description</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We figured out how the network works. </font><font style="vertical-align: inherit;">Now let‚Äôs take a look at the steps, what will we do to transfer traffic from FW-CLUSTER to EMERGENCY:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disable the interfaces on the kernel switch (L3-CORE) that connect it to the FW-CLUSTER;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disable the interfaces on the L2-MGMT core switch that connect it to the FW-CLUSTER;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure the EMERGENCY router (by default, all interfaces are disabled on it, except those associated with L2-MGMT):</font></font></li>
</ol><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We include interfaces on EMERGENCY;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure the external ip-address (for NAT), which was on FW-Cluster;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We generate gARP requests so that in the L3-CORE arp tables poppy addresses change from FW-Cluster to EMERGENCY;</font></font></li>
<li>      BRD-01, BRD-02;</li>
<li>  NAT;</li>
<li>  EMERGENCY OSPF Area 1;</li>
<li>  EMERGENCY OSPF Area 2;</li>
<li>    Area 1  10;</li>
<li>     Area 1  10;</li>
<li> ip-,   L2-MGMT ( ,    FW-CLUSTER);</li>
<li> gARP ,   arp- L2-MGMT  -  FW-CLUSTER  EMERGENCY.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again, we return to the original formulation of the problem. Three in the morning, huge stress, a mistake at any stage can lead to new problems. Ready to type commands through the CLI? Yes? Ok, go at least rinse your face, drink coffee and gather your will in a fist. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bruce, please help the guys. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0v/sh/qe/0vshqe7g7ngkcgdjrl4lxvdif4g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, we continue to cut our automation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Below is a diagram of the workbook in terms of Ansible. This diagram reflects what we described just above, just a concrete implementation in Ansible. </font></font><br>
<img src="https://habrastorage.org/webt/yg/oa/hu/ygoahutrkrtb-q7qqteifyuejp0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At this stage, we realized what needs to be done, developed a playbook, conducted testing, now we are ready to launch it.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another small digression. The ease of narration should not mislead you. The process of writing playbooks was not as simple and fast as it might seem. Testing took quite a lot of time, a virtual stand was created, the solution was rolled in many times, about 100 tests were conducted.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
We start ... There is a feeling that everything happens very slowly, somewhere there is an error, something will not work in the end. The feeling of a parachute jump, and the parachute doesn‚Äôt want to open at once ... that's normal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we read the result of the Ansible playbook‚Äôs operations (we replaced the IP addresses for conspiracy purposes):</font></font><br>
<br>
<pre><code class="plaintext hljs">[xxx@emergency ansible]$ ansible-playbook -i /etc/ansible/inventories/prod_inventory.ini /etc/ansible/playbooks/emergency_on.yml <font></font>
<font></font>
PLAY [-------&gt;Emergency on VCF] ********************************************************<font></font>
<font></font>
TASK [vcf_junos_emergency_on : Disable PROD interfaces to FW-CLUSTER] *********************<font></font>
changed: [vcf]<font></font>
<font></font>
PLAY [-------&gt;Emergency on MGMT-CORE] ************************************************<font></font>
<font></font>
TASK [mgmt_junos_emergency_on : Disable MGMT interfaces to FW-CLUSTER] ******************<font></font>
changed: [m9-03-sw-03-mgmt-core]<font></font>
<font></font>
PLAY [-------&gt;Emergency on] ****************************************************<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable EXT-INTERNET interface] **************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Generate gARP for EXT-INTERNET interface] ****************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable static default route to EXT-INTERNET] ****************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change NAT rule to EXT-INTERNET interface] ****************<font></font>
changed: [m9-04-r-04] =&gt; (item=12)<font></font>
changed: [m9-04-r-04] =&gt; (item=14)<font></font>
changed: [m9-04-r-04] =&gt; (item=15)<font></font>
changed: [m9-04-r-04] =&gt; (item=16)<font></font>
changed: [m9-04-r-04] =&gt; (item=17)<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable OSPF Area 1 PROD] ******************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Enable OSPF Area 2 MGMT] *****************************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change OSPF Area 1 interfaces costs to 10] *****************<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1001)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1002)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1003)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1004)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1005)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1006)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1007)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1008)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1009)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1010)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1011)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1012)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1013)<font></font>
changed: [m9-04-r-04] =&gt; (item=VLAN-1100)<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change OSPF area1 default cost for to 10] ******************<font></font>
changed: [m9-04-r-04]<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Change MGMT interfaces ip addresses] ********************<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n.254', u'name': u'VLAN-803'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+1.254', u'name': u'VLAN-805'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+2.254', u'name': u'VLAN-807'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+3.254', u'name': u'VLAN-809'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+4.254', u'name': u'VLAN-820'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+5.254', u'name': u'VLAN-822'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+6.254', u'name': u'VLAN-823'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+7.254', u'name': u'VLAN-824'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+8.254', u'name': u'VLAN-850'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+9.254', u'name': u'VLAN-851'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+10.254', u'name': u'VLAN-852'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+11.254', u'name': u'VLAN-853'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+12.254', u'name': u'VLAN-870'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+13.254', u'name': u'VLAN-898'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+14.254', u'name': u'VLAN-899'})<font></font>
<font></font>
TASK [mk_routeros_emergency_on : Generate gARPs for MGMT interfaces] *********************<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n.254', u'name': u'VLAN-803'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+1.254', u'name': u'VLAN-805'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+2.254', u'name': u'VLAN-807'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+3.254', u'name': u'VLAN-809'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+4.254', u'name': u'VLAN-820'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+5.254', u'name': u'VLAN-822'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+6.254', u'name': u'VLAN-823'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+7.254', u'name': u'VLAN-824'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+8.254', u'name': u'VLAN-850'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+9.254', u'name': u'VLAN-851'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+10.254', u'name': u'VLAN-852'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+11.254', u'name': u'VLAN-853'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+12.254', u'name': u'VLAN-870'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+13.254', u'name': u'VLAN-898'})<font></font>
changed: [m9-04-r-04] =&gt; (item={u'ip': u'..n+14.254', u'name': u'VLAN-899'})<font></font>
<font></font>
PLAY RECAP ************************************************************************</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Done! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, it‚Äôs not quite ready, do not forget about the convergence of dynamic routing protocols and the loading of a large number of routes in the FIB. We cannot influence this in any way. We wait. It came together. Now it‚Äôs ready. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And in the village of Vilabaggio (which does not want to automate the network setup), they continue to wash the dishes. Bruce (albeit already different, but no less cool) is trying to figure out how much more to manually reconfigure equipment. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/4y/hc/zr4yhcq2zpqmjjbjp7lx37rxibg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would also like to dwell on one important point. How do we get everything back? After some time, we will bring our FW-CLUSTER back to life. This is the main equipment, not the backup one, the network should work on it.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Feel like starting to burn at networkers? The technical director will hear a thousand arguments why this is not necessary, why it can be done later. Unfortunately, this is how the network works out of a bunch of patches, pieces, remnants of former luxury. It turns out a quilt. Our task as a whole, not in this particular situation, but generally, in principle, as IT specialists, is to bring the network to the beautiful English word ‚Äúconsistency‚Äù, it is very multifaceted, it can be translated as: consistency, consistency, consistency, coherence, consistency, comparability, connectivity. This is all about him. Only in this state is the network manageable, we clearly understand what and how it works, we clearly understand what needs to be changed, if necessary, we clearly know where to look in case of problems.And only in such a network can you do tricks like those that we just described.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, another playbook was prepared, which returned the settings to their original state. </font><font style="vertical-align: inherit;">The logic of his work is the same (it is important to remember, the order of the tasks is very important), so as not to extend the already long article, we decided not to post the listing of the playbook. </font><font style="vertical-align: inherit;">Having conducted such exercises, you will feel much calmer and more confident in the future, in addition, any crutches that you piled there will immediately find themselves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everyone can write to us and get the source code of all the written code, along with all the palybooks. </font><font style="vertical-align: inherit;">Contacts in the profile.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our opinion, processes that can be automated have not crystallized yet. </font><font style="vertical-align: inherit;">Based on what we encountered and what our Western colleagues are discussing, the following topics are still visible:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Device provisioning;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Data collection;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reporting</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Troubleshooting;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Compliance</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there is interest, we can continue the discussion on one of the given topics. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I also want to speculate a bit on automation. </font><font style="vertical-align: inherit;">What should it be in our understanding:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The system must live without a man, while improving man. </font><font style="vertical-align: inherit;">The system should not depend on the person;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operation must be expert. </font><font style="vertical-align: inherit;">There is no class of specialists who perform routine tasks. </font><font style="vertical-align: inherit;">There are experts who have automated the whole routine, and solve only complex problems;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Routine \ standard tasks are done automatically "by button", resources are not wasted. </font><font style="vertical-align: inherit;">The result of such tasks is always predictable and understandable.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And what should these points lead to:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transparency of IT infrastructure (Less risks of operation, modernization, implementation. Less downtime per year);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The ability to plan IT resources (Capacity-planning system - you can see how much is consumed, how much resources are needed in a single system, and not by letters and visits to the top departments);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ability to reduce the number of IT staff.</font></font></li>
</ul><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authors of the article: Alexander Manov (CCIE RS, CCIE SP) and Pavel Kirillov. </font><font style="vertical-align: inherit;">We are interested in discussing and proposing solutions on the topic of IT infrastructure automation.</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en496136/index.html">Using the ColorPicker library in Android to implement flexible color selection</a></li>
<li><a href="../en496138/index.html">Take and join in musical programming - languages ‚Äã‚Äãthat will help to do this</a></li>
<li><a href="../en496144/index.html">The fruits of isolation: COVID-19 interactive map with historical schedules and migration restrictions</a></li>
<li><a href="../en496146/index.html">Lua on STM32</a></li>
<li><a href="../en496148/index.html">Structural design patterns in ES6 + on the example of the Game of Thrones</a></li>
<li><a href="../en496154/index.html">Customer Service Automation: An End-To-End Solution from DeepPavlov</a></li>
<li><a href="../en496156/index.html">How Traffic Analysis Systems Detect Hacker Tactics by MITER ATT & CK, Part 3</a></li>
<li><a href="../en496160/index.html">We study the Mediastreamer2 VoIP engine. Part 5</a></li>
<li><a href="../en496162/index.html">Terraform, mono repositories and compliance as code</a></li>
<li><a href="../en496164/index.html">During the crisis I lost my job and now I'm afraid to write smart code so as not to frighten off the latest vacancies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>