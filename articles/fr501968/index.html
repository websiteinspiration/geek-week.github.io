<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👐🏽 🔡 👦🏿 Modèle architectural MVI dans Kotlin Multiplatform, Partie 1 🎗️ ⛸️ 💙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a environ un an, je me suis intéressé à la nouvelle technologie Kotlin Multiplatform. Il vous permet d'écrire du code commun et de le compiler po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modèle architectural MVI dans Kotlin Multiplatform, Partie 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/501968/"><img src="https://habrastorage.org/webt/nl/1i/n-/nl1in-q1zjy6mzgvzrr875nd4lq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a environ un an, je me suis intéressé à la nouvelle technologie Kotlin Multiplatform. Il vous permet d'écrire du code commun et de le compiler pour différentes plateformes, tout en ayant accès à leur API. Depuis lors, j'ai expérimenté activement dans ce domaine et fait la promotion de cet outil dans notre entreprise. Un résultat, par exemple, est notre bibliothèque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reaktive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Reactive Extensions for Kotlin Multiplatform. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les applications Badoo et Bumble pour le développement Android, nous utilisons le modèle architectural MVI (pour plus de détails sur notre architecture, lisez l'article de Zsolt Kocsi: « </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture MVI moderne basée sur Kotlin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"). Travaillant sur différents projets, je suis devenu un grand fan de cette approche. Bien sûr, je ne pouvais pas manquer l'occasion d'essayer MVI dans Kotlin Multiplatform. De plus, le cas était approprié: nous devions écrire des exemples pour la bibliothèque Reaktive. Après mes expériences, j'ai été encore plus inspiré par MVI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je fais toujours attention à la façon dont les développeurs utilisent Kotlin Multiplatform et comment ils construisent l'architecture de ces projets. Selon mes observations, le développeur Kotlin Multiplatform moyen est en fait un développeur Android qui utilise le modèle MVVM dans son travail simplement parce qu'il y est tellement habitué. Certains appliquent en outre une «architecture propre». Cependant, à mon avis, MVI est le mieux adapté pour Kotlin Multiplatform, et une «architecture propre» est une complication inutile.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai donc décidé d'écrire cette série de trois articles sur les sujets suivants:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une brève description du modèle MVI, une déclaration du problème et la création d'un module commun à l'aide de Kotlin Multiplatform.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intégration d'un module commun dans les applications iOS et Android.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests unitaires et d'intégration.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le premier article de la série. </font><font style="vertical-align: inherit;">Il intéressera tous ceux qui utilisent déjà ou prévoient d'utiliser Kotlin Multiplatform.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je note tout de suite que le but de cet article n'est pas de vous apprendre à travailler avec le Kotlin Multiplatform lui-même. </font><font style="vertical-align: inherit;">Si vous sentez que vous n'avez pas suffisamment de connaissances dans ce domaine, je vous recommande de vous familiariser d'abord avec l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction et la documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (en particulier les </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">sections</font></a><font style="vertical-align: inherit;"> « </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concurrence</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> » et « </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Immuabilité</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> » pour comprendre les fonctionnalités du modèle de mémoire Kotlin / Native). </font><font style="vertical-align: inherit;">Dans cet article, je ne décrirai pas la configuration du projet, les modules et d'autres choses qui ne sont pas liées au sujet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelons d'abord ce qu'est MVI. </font><font style="vertical-align: inherit;">L'abréviation signifie Model-View-Intent. </font><font style="vertical-align: inherit;">Il n'y a que deux composants principaux dans le système:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle - une couche de logique et de données (le modèle stocke également l'état actuel du système);</font></font></li>
<li> (View) — UI-,     (states)     (intents).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme suivant est probablement déjà familier à beaucoup: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5x/zj/2g/5xzj2gjuwvbtanwvgprrspjyfms.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, nous voyons ces composants très basiques: le modèle et la présentation. Tout le reste, ce sont les données qui circulent entre eux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est facile de voir que les données ne se déplacent que dans une seule direction. Les états viennent du modèle et tombent dans la vue pour l'affichage, les intentions viennent de la vue et vont dans le modèle pour le traitement. Cette circulation est appelée flux de données unidirectionnel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pratique, un modèle est souvent représenté par une entité appelée Store (il est emprunté à Redux). Cependant, cela ne se produit pas toujours. Par exemple, dans notre bibliothèque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVICore, le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modèle est appelé Feature.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient également de noter que le MVI est très étroitement lié à la réactivité. </font><font style="vertical-align: inherit;">La présentation des flux de données et de leur transformation, ainsi que la gestion du cycle de vie des abonnements est très pratique à mettre en œuvre à l'aide de bibliothèques de programmation réactive. </font><font style="vertical-align: inherit;">Un assez grand nombre d'entre eux sont maintenant disponibles, cependant, lors de l'écriture de code général dans Kotlin Multiplatform, nous ne pouvons utiliser que des bibliothèques multi-plateformes. </font><font style="vertical-align: inherit;">Nous avons besoin d'abstraction pour les flux de données, nous avons besoin de pouvoir connecter et déconnecter leurs entrées et sorties, ainsi que d'effectuer des transformations. </font><font style="vertical-align: inherit;">Pour le moment, je connais deux de ces bibliothèques:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notre bibliothèque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reaktive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - implémentation des extensions réactives sur Kotlin Multiplatform;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coroutines et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - implémentation de flux froids avec les coroutines Kotlin.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulation du problème</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le but de cet article est de montrer comment utiliser le modèle MVI dans Kotlin Multiplatform et quels sont les avantages et les inconvénients de cette approche. </font><font style="vertical-align: inherit;">Par conséquent, je ne m'attacherai à aucune implémentation MVI spécifique. </font><font style="vertical-align: inherit;">Cependant, j'utiliserai Reaktive, car les flux de données sont toujours nécessaires. </font><font style="vertical-align: inherit;">Si vous le souhaitez, après avoir compris l'idée, Reaktive peut être remplacé par des coroutines et Flow. </font><font style="vertical-align: inherit;">En général, je vais essayer de rendre notre MVI aussi simple que possible, sans complications inutiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour démontrer MVI, je vais essayer de mettre en œuvre le projet le plus simple qui répond aux exigences suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prise en charge d'Android et iOS;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démonstration du fonctionnement asynchrone (entrée-sortie, traitement des données, etc.);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autant de code commun que possible;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implémentation de l'interface utilisateur avec des outils natifs de chaque plate-forme;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manque de Rx côté plateforme (pour que vous n'ayez pas à spécifier de dépendances sur Rx en tant qu '«api»).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A titre d'exemple, j'ai choisi une application très simple: un écran avec un bouton, en cliquant sur lequel une liste d'images arbitraires de chats sera téléchargée et affichée. </font><font style="vertical-align: inherit;">Pour télécharger des images, j'utiliserai l'API ouverte: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://thecatapi.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cela vous permettra de répondre à l'exigence d'un fonctionnement asynchrone, car vous devez télécharger des listes à partir du Web et analyser le fichier JSON. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez trouver tout le code source du projet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur notre GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise en route: abstractions pour MVI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons d'abord introduire quelques abstractions pour notre MVI. </font><font style="vertical-align: inherit;">Nous aurons besoin des composants très basiques - le modèle et la vue - et quelques typealias.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typealiases</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour traiter les intentions, nous introduisons un acteur (Acteur) - une fonction qui accepte l'intention et l'état actuel et renvoie un flux de résultats (Effet):</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/6cb0694e570e01a126f820ff6767fe5b.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102432667" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpactor-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpactor-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpactor-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typealias </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acteur</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intention</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effet</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intention</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observable</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Effet</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpActor.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons également besoin d'un réducteur (Reducer) - une fonction qui prend effet et l'état actuel et renvoie un nouvel état:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/083d13a424ec0fee93901bfcc63ff1ef.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434310" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpreducer-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpreducer-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpreducer-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typealias </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reducer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Effect</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Effect</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpReducer.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boutique</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Store présentera un modèle de MVI. </font><font style="vertical-align: inherit;">Il doit accepter des intentions et donner un flot d'États. </font><font style="vertical-align: inherit;">Lorsque vous vous abonnez à un flux d'état, l'état actuel doit être émis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Présentons l'interface appropriée:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/76bc9ed85106c836234b957acec63723.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433133" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpstoreinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpstoreinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpstoreinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">out </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consumer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;, </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observable</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;, </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetable</font></font></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpStoreInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, notre magasin a les propriétés suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a deux paramètres génériques: intention d'entrée et état de sortie;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est un consommateur d'intentions (Consumer &lt;Intent&gt;);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est un flux d'état (Observable &lt;Etat&gt;);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il est destructible (jetable).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisqu'il n'est pas très pratique d'implémenter une telle interface à chaque fois, nous aurons besoin d'un certain assistant:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/9cccbb6d90992ae9dfeeb17e38087541.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433272" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpstorehelper-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpstorehelper-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpstorehelper-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreHelper</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">out </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Effect </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpstorehelper-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initialState </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpstorehelper-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">acteur </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">Acteur</font></span><font style="vertical-align: inherit;"> &lt; </font><span class="pl-en"><font style="vertical-align: inherit;">État</font></span><font style="vertical-align: inherit;"> , </font><span class="pl-en"><font style="vertical-align: inherit;">intention</font></span><font style="vertical-align: inherit;"> , </font><span class="pl-en"><font style="vertical-align: inherit;">effet</font></span><font style="vertical-align: inherit;"> &gt;,</font></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpstorehelper-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-smi">reducer</span><span class="pl-k">:</span> <span class="pl-en">Reducer</span>&lt;<span class="pl-en">State</span>, <span class="pl-en">Effect</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpstorehelper-kt-LC5" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">Observable</span>&lt;<span class="pl-en">State</span>&gt;, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpstorehelper-kt-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpstorehelper-kt-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">init</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpstorehelper-kt-LC8" class="blob-code blob-code-inner js-file-line">        ensureNeverFrozen()</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpstorehelper-kt-LC9" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpstorehelper-kt-LC10" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpstorehelper-kt-LC11" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> subject <span class="pl-k">=</span> <span class="pl-en">BehaviorSubject</span>(initialState)</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpstorehelper-kt-LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpstorehelper-kt-LC13" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onIntent</span>(<span class="pl-smi">intent</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpstorehelper-kt-LC14" class="blob-code blob-code-inner js-file-line">        actor(subject.value, intent).subscribeScoped(isThreadLocal <span class="pl-k">=</span> <span class="pl-c1">true</span>, onNext <span class="pl-k">=</span> ::onEffect)</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpstorehelper-kt-LC15" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpstorehelper-kt-LC16" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpstorehelper-kt-LC17" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onEffect</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effet </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effet</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpstorehelper-kt-LC18" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        subject.onNext (réducteur (subject.value, effect))</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpstorehelper-kt-LC19" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpstorehelper-kt-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpstorehelper-kt-LC21" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacer le </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subscribe</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">observateur </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObservableObserver</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpstorehelper-kt-LC22" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        subject.subscribe (observateur)</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpstorehelper-kt-LC23" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpstorehelper-kt-LC24" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpStoreHelper.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StoreHelper est une petite classe qui nous facilitera la création d'un magasin. </font><font style="vertical-align: inherit;">Il a les propriétés suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a trois paramètres génériques: intention et effet d'entrée et état de sortie;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accepte l'état initial par le constructeur, l'acteur et la boîte de vitesses;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est un flux d'États;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destructible (jetable);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non-gel (pour que les abonnés ne soient pas non plus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gelés</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implémente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (interface de Reaktive pour la gestion des abonnements);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accepte et traite les intentions et les effets.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardez le schéma de notre magasin. </font><font style="vertical-align: inherit;">L'acteur et la boîte de vitesses sont des détails d'implémentation: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-l/ss/ct/-lssctmy9h8oat9htzn25q4xbji.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
considérons plus en détail la méthode onIntent:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accepte les intentions comme argument;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appelle l'acteur et lui transmet l'intention et l'état actuel;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s'abonne au flux d'effets renvoyé par l'acteur;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dirige tous les effets vers la méthode onEffect;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La souscription aux effets est effectuée à l'aide du drapeau </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isThreadLocal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (cela évite le gel dans Kotlin / Native).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons maintenant de plus près la méthode onEffect:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prend les effets en argument;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appelle la boîte de vitesses et y transfère l'effet et l'état actuel;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transmet le nouvel état au BehaviorSubject, ce qui conduit à la réception du nouvel état par tous les abonnés.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons maintenant à la présentation. </font><font style="vertical-align: inherit;">Il doit accepter les modèles à afficher et diffuser un flux d'événements. </font><font style="vertical-align: inherit;">Nous ferons également une interface distincte:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/589842b3ed09f58164f295a8cd97f1a9.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433318" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpmviview-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpmviview-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpmviview-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modèle </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">out </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Événement </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpmviview-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">événements </font><span class="pl-k"><font style="vertical-align: inherit;">val </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">observable</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">événement</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpmviview-kt-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpmviview-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendu </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">amusant</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpmviview-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpMviView.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une vue a les propriétés suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a deux paramètres génériques: modèle d'entrée et événement de sortie;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accepte les modèles à afficher à l'aide de la méthode de rendu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">distribue un flux d'événements à l'aide de la propriété events.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai ajouté le préfixe Mvi au nom MviView pour éviter toute confusion avec Android View. </font><font style="vertical-align: inherit;">De plus, je n'ai pas développé les interfaces Consumer et Observable, mais j'ai simplement utilisé la propriété et la méthode. </font><font style="vertical-align: inherit;">Cela vous permet de définir l'interface de présentation sur la plate-forme pour l'implémentation (Android ou iOS) sans exporter Rx en tant que dépendance «api». </font><font style="vertical-align: inherit;">L'astuce est que les clients n'interagiront pas directement avec la propriété «events», mais implémenteront l'interface MviView, développant la classe abstraite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez immédiatement cette classe abstraite pour représenter:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/b988c98e92bd48139a0d3951134c8e9c.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433330" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpabstractmviview-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpabstractmviview-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpabstractmviview-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">abstract</span> <span class="pl-k">class</span> <span class="pl-en">AbstractMviView</span>&lt;<span class="pl-k">in</span> <span class="pl-en">Model</span> <span class="pl-k">:</span> <span class="pl-c1">Any</span>, <span class="pl-en">Event</span> <span class="pl-k">:</span> <span class="pl-c1">Any</span>&gt; <span class="pl-k">:</span> <span class="pl-e">MviView</span>&lt;<span class="pl-en">Model</span>, <span class="pl-en">Event</span>&gt; {</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpabstractmviview-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> subject <span class="pl-k">=</span> <span class="pl-en">PublishSubject</span>&lt;<span class="pl-en">Event</span>&gt;()</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpabstractmviview-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">val</span> events<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Event</span>&gt; <span class="pl-k">=</span> subject</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpabstractmviview-kt-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpabstractmviview-kt-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">protected</span> <span class="pl-k">fun</span> <span class="pl-en">dispatch</span>(<span class="pl-smi">event</span><span class="pl-k">:</span> <span class="pl-en">Event</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpabstractmviview-kt-LC6" class="blob-code blob-code-inner js-file-line">        subject.onNext(event)</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpabstractmviview-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpabstractmviview-kt-LC8" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpAbstractMviView.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette classe nous aidera à émettre des événements, ainsi qu'à sauver la plateforme d'interagir avec Rx. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un diagramme qui montre comment cela fonctionnera: Le </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wu/kr/ad/wukradmtg6czbxwjr_3fqi91txu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
magasin produit des états qui sont transformés en modèles et affichés par la vue. </font><font style="vertical-align: inherit;">Ce dernier produit des événements qui sont convertis en intentions et livrés au magasin pour traitement. </font><font style="vertical-align: inherit;">Cette approche supprime la cohérence entre Store et présentation. </font><font style="vertical-align: inherit;">Mais dans des cas simples, une vue peut fonctionner directement avec les états et les intentions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout ce dont nous avons besoin pour implémenter MVI. </font><font style="vertical-align: inherit;">Écrivons le code général.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code commun</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plan</font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous réaliserons un module général dont la tâche est de télécharger et d'afficher une liste d'images de chats.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI nous résumons l'interface et nous transférerons son implémentation à l'extérieur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous cacherons notre mise en œuvre derrière une façade pratique.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kittenstore</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par l'essentiel - créer un KittenStore qui chargera une liste d'images:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/0a4a907bc8385e21e129c1d45f971714.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433398" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStore </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">scellée </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intention</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recharger </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">État de la </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe de </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">données</font></span><font style="vertical-align: inherit;"> (</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC7" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isLoading </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC8" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC9" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC10" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">Données de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">scellées</font></span><font style="vertical-align: inherit;"> {</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC11" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe de </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">données </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">urls </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> emptyList ()) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC12" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erreur d' </font><span class="pl-k"><font style="vertical-align: inherit;">objet </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC13" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC14" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC15" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons étendu l'interface Store avec des types d'intention et des types d'état. </font><font style="vertical-align: inherit;">Attention: l'interface est déclarée interne. </font><font style="vertical-align: inherit;">Notre KittenStore est les détails d'implémentation du module. </font><font style="vertical-align: inherit;">Notre intention n'est qu'une - Recharger, elle provoque le chargement d'une liste d'images. </font><font style="vertical-align: inherit;">Mais la condition mérite d'être examinée plus en détail:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'indicateur isLoading indique si le téléchargement est en cours ou non;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La propriété data peut prendre l'une des deux options suivantes:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images - une liste de liens vers des images;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Erreur - signifie qu'une erreur s'est produite.</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons maintenant l'implémentation. </font><font style="vertical-align: inherit;">Nous le ferons par étapes. </font><font style="vertical-align: inherit;">Tout d'abord, créez une classe KittenStoreImpl vide qui implémentera l'interface KittenStore:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/4d89b73d8f2ac1d54079b7dc7bd24056.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433730" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl1-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC2" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStore</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacer </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onNext</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacer le </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subscribe</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">observateur </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObservableObserver</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC8" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC9" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl1.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons également implémenté l'interface familière DisposableScope. </font><font style="vertical-align: inherit;">Cela est nécessaire pour une gestion pratique des abonnements. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devrons télécharger la liste des images à partir du Web et analyser le fichier JSON. </font><font style="vertical-align: inherit;">Déclarez les dépendances correspondantes:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/5f7790cf91b5f46e7e83cf2cc02e02e5.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433772" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl2-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">réseau de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">réseau</font></span><font style="vertical-align: inherit;"> ,</font></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l' </font></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">analyseur de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">analyseur</font></span></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span>    </td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC4" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">KittenStore</span>, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC13" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">load</span>()<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">String</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC14" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC15" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC16" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Parser</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC17" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyse </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">amusante</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">- </font></span><span class="pl-en"><font style="vertical-align: inherit;">être</font></span><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;&gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC18" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC19" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl2.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le réseau téléchargera le texte du fichier JSON à partir du réseau et l'analyseur analysera le fichier JSON et renverra une liste de liens d'image. </font><font style="vertical-align: inherit;">En cas d'erreur, Maybe se terminera simplement sans résultat. </font><font style="vertical-align: inherit;">Dans cet article, nous ne sommes pas intéressés par le type d'erreur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Déclarez maintenant les effets et le réducteur:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/bbd8458785d5c77f684023ecf6bf67c6.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433788" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl3-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">réseau de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">réseau</font></span><font style="vertical-align: inherit;"> ,</font></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l' </font></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">analyseur de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">analyseur</font></span></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC4" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">KittenStore</span>, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reduce</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">effect</span><span class="pl-k">:</span> <span class="pl-en">Effect</span>)<span class="pl-k">:</span> <span class="pl-en">State</span> <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC13" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">when</span> (effect) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC14" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Effect</span>.<span class="pl-en">LoadingStarted</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> state.copy(isLoading <span class="pl-k">=</span> <span class="pl-c1">true</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC15" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Effect</span>.<span class="pl-en">LoadingFinished</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> state.copy(isLoading <span class="pl-k">=</span> <span class="pl-c1">false</span>, <span class="pl-k">data</span> <span class="pl-k">=</span> <span class="pl-en">State</span>.<span class="pl-en">Data</span>.<span class="pl-en">Images</span>(urls <span class="pl-k">=</span> effect.imageUrls))</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC16" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Effect</span>.<span class="pl-en">LoadingFailed</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> state.copy(isLoading <span class="pl-k">=</span> <span class="pl-c1">false</span>, <span class="pl-k">data</span> <span class="pl-k">=</span> <span class="pl-en">State</span>.<span class="pl-en">Data</span>.<span class="pl-en">Error</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC17" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC18" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC19" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">sealed</span> <span class="pl-k">class</span> <span class="pl-en">Effect</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC20" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">object</span> LoadingStarted <span class="pl-k">:</span> <span class="pl-e">Effect</span>()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC21" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">data</span> <span class="pl-k">class</span> <span class="pl-en">LoadingFinished</span>(<span class="pl-k">val</span> <span class="pl-smi">imageUrls</span><span class="pl-k">:</span> <span class="pl-c1">List</span>&lt;<span class="pl-c1">String</span>&gt;) <span class="pl-k">:</span> <span class="pl-e">Effect</span>()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC22" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">object</span> LoadingFailed <span class="pl-k">:</span> <span class="pl-e">Effect</span>()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC23" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC25" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC26" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">load</span>()<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">String</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC27" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC28" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC29" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Parser</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC30" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyse </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">amusante</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">- </font></span><span class="pl-en"><font style="vertical-align: inherit;">être</font></span><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;&gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC31" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC32" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl3.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de commencer le téléchargement, nous donnons l'effet LoadingStarted, ce qui provoque la définition de l'indicateur isLoading. </font><font style="vertical-align: inherit;">Une fois le téléchargement terminé, nous émettons LoadingFinished ou LoadingFailed. </font><font style="vertical-align: inherit;">Dans le premier cas, nous effaçons l'indicateur isLoading et appliquons la liste des images, dans le second, nous effaçons également l'indicateur et appliquons l'état d'erreur. </font><font style="vertical-align: inherit;">Veuillez noter que les effets sont l'API privée de notre KittenStore. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous implémentons le téléchargement lui-même:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/0908f90ae8233bb3f164c1f6a518141d.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433858" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl4-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-smi">network</span><span class="pl-k">:</span> <span class="pl-en">Network</span>,</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-smi">parser</span><span class="pl-k">:</span> <span class="pl-en">Parser</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC4" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">KittenStore</span>, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reload</span>(<span class="pl-smi">network</span><span class="pl-k">:</span> <span class="pl-en">Network</span>, <span class="pl-smi">parser</span><span class="pl-k">:</span> <span class="pl-en">Parser</span>)<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Effect</span>&gt; <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC13" class="blob-code blob-code-inner js-file-line">        network</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC14" class="blob-code blob-code-inner js-file-line">            .load()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC15" class="blob-code blob-code-inner js-file-line">            .flatMap(<span class="pl-smi">parser</span>::parse)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC16" class="blob-code blob-code-inner js-file-line">            .map(<span class="pl-smi">Effect</span>::<span class="pl-en">LoadingFinished</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC17" class="blob-code blob-code-inner js-file-line">            .observeOn(mainScheduler)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC18" class="blob-code blob-code-inner js-file-line">            .asObservable()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC19" class="blob-code blob-code-inner js-file-line">            .defaultIfEmpty(<span class="pl-en">Effect</span>.<span class="pl-en">LoadingFailed</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC20" class="blob-code blob-code-inner js-file-line">            .startWithValue(<span class="pl-en">Effect</span>.<span class="pl-en">LoadingStarted</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC21" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC22" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reduce</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">effect</span><span class="pl-k">:</span> <span class="pl-en">Effect</span>)<span class="pl-k">:</span> <span class="pl-en">State</span> <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC23" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC25" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">sealed</span> <span class="pl-k">class</span> <span class="pl-en">Effect</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC26" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC27" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC28" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC29" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC30" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">load</span>()<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">String</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC31" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC32" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC33" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Parser</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC34" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">parse</span>(<span class="pl-smi">json</span><span class="pl-k">:</span> <span class="pl-c1">String</span>)<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">List</span>&lt;<span class="pl-c1">String</span>&gt;&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC35" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC36" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl4.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, il convient de prêter attention au fait que nous avons passé Network and Parser à la fonction de rechargement, malgré le fait qu'ils sont déjà disponibles pour nous en tant que propriétés du constructeur. </font><font style="vertical-align: inherit;">Ceci est fait pour éviter les références à cela et, par conséquent, geler le KittenStore entier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, utilisez StoreHelper et terminez l'implémentation de KittenStore:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/90c8f4d3af71de9b1bababbf24a02f6b.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433888" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl5-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">réseau de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">réseau</font></span><font style="vertical-align: inherit;"> ,</font></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l' </font></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">analyseur de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">analyseur</font></span></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStore</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> helper <span class="pl-k">=</span> <span class="pl-en">StoreHelper</span>(<span class="pl-en">State</span>(), ::handleIntent, ::reduce).scope()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC9" class="blob-code blob-code-inner js-file-line">        helper.onIntent(value)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC13" class="blob-code blob-code-inner js-file-line">        helper.subscribe(observer)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC14" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC15" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC16" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">handleIntent</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">intent</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>)<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Effect</span>&gt; <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC17" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">when</span> (intent) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC18" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Intent</span>.<span class="pl-en">Reload</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> reload(network, parser)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC19" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC21" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reload</span>(<span class="pl-smi">network</span><span class="pl-k">:</span> <span class="pl-en">Network</span>, <span class="pl-smi">parser</span><span class="pl-k">:</span> <span class="pl-en">Parser</span>)<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Effect</span>&gt; <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC22" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reduce</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">effect</span><span class="pl-k">:</span> <span class="pl-en">Effect</span>)<span class="pl-k">:</span> <span class="pl-en">State</span> <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC25" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC26" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC27" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">sealed</span> <span class="pl-k">class</span> <span class="pl-en">Effect</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC28" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC29" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC30" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC31" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC32" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">- </font></span><span class="pl-en"><font style="vertical-align: inherit;">être</font></span><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC33" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC34" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC35" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyseur d' </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interface</font></span><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC36" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyse </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">amusante</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">- </font></span><span class="pl-en"><font style="vertical-align: inherit;">être</font></span><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;&gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC37" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC38" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl5.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre KittenStore est prêt! </font><font style="vertical-align: inherit;">Nous passons à la présentation.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kittenview</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Déclarez l'interface suivante:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/9645de0c34f245bb0af0e331c2771491.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433909" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenviewinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenviewinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">événement</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">modèle de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe de </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">données</font></span><font style="vertical-align: inherit;"> (</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isLoading </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC4" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isError </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC5" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageUrls </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC6" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    )</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">événement de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">scellé</font></span><font style="vertical-align: inherit;"> {</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC9" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RefreshTriggered </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC10" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC11" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenViewInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons annoncé un modèle de vue avec des indicateurs de charge et d'erreur et une liste de liens d'image. </font><font style="vertical-align: inherit;">Nous avons un seul événement - RefreshTriggered. </font><font style="vertical-align: inherit;">Il est émis chaque fois que l'utilisateur invoque une mise à jour. </font><font style="vertical-align: inherit;">KittenView est l'API publique de notre module.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tâche de cette source de données est de télécharger du texte pour un fichier JSON à partir du Web. </font><font style="vertical-align: inherit;">Comme d'habitude, déclarez l'interface:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/cb13bbeabf7bd57f53059b3b71b021da.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433928" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittendatasourceinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittendatasourceinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittendatasourceinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittendatasourceinterface-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittendatasourceinterface-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">charge </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">amusante</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">limite </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">décalage </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">- </font></span><span class="pl-en"><font style="vertical-align: inherit;">être</font></span><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittendatasourceinterface-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittendatasourceinterface-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenDataSourceInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des implémentations de source de données seront effectuées pour chaque plate-forme séparément. </font><font style="vertical-align: inherit;">Par conséquent, nous pouvons déclarer une méthode d'usine en utilisant expect / actual:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/eb5277b5d9684ad992f52edc09140836.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433944" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittendatasourcefactory-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittendatasourcefactory-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittendatasourcefactory-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interne </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attendre </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plaisir </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenDataSourceFactory.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les implémentations de la source de données seront discutées dans la partie suivante, où nous implémenterons des applications pour iOS et Android.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'intégration</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La dernière étape est l'intégration de tous les composants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implémentation de l'interface réseau:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/5ba850187daea56be5b69035ff36aa5c.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433957" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-kittenstorenetwork-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-kittenstorenetwork-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-kittenstorenetwork-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreNetwork</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-kittenstorenetwork-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">private </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dataSource </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-kittenstorenetwork-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Réseau</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-kittenstorenetwork-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacer </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peut </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">- </font></span><span class="pl-en"><font style="vertical-align: inherit;">être</font></span><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dataSource.load (limit </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , offset </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-kittenstorenetwork-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreNetwork.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implémentation de l'interface analyseur:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/d14c01adbef415bb1164ffd00536301c.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433981" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-kittenstoreparser-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-kittenstoreparser-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-kittenstoreparser-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne</font></span><font style="vertical-align: inherit;"> KittenStoreParser </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyseur</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-kittenstoreparser-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacer l' </font></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">analyse </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amusante</font></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><span class="pl-smi"><font style="vertical-align: inherit;">json </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-c1"><font style="vertical-align: inherit;">String</font></span><font style="vertical-align: inherit;"> ) </font><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">Peut </font></span><span class="pl-k"><font style="vertical-align: inherit;">- </font></span><span class="pl-en"><font style="vertical-align: inherit;">être</font></span><font style="vertical-align: inherit;"> &lt; </font><span class="pl-c1"><font style="vertical-align: inherit;">List</font></span><font style="vertical-align: inherit;"> &lt; </font><span class="pl-c1"><font style="vertical-align: inherit;">String</font></span><font style="vertical-align: inherit;"> &gt;&gt; </font><span class="pl-k"><font style="vertical-align: inherit;">=</font></span></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-c1"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-c1"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-k"><font style="vertical-align: inherit;"></font></span></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-kittenstoreparser-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        peut-être de la fonction {</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-kittenstoreparser-kt-LC4" class="blob-code blob-code-inner js-file-line">            <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Json</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JsonConfiguration</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stable</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-kittenstoreparser-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                .parseJson (json)</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-kittenstoreparser-kt-LC6" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                .jsonArray</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-kittenstoreparser-kt-LC7" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                .map {it.jsonObject.getPrimitive ( </font></font><span class="pl-s"><span class="pl-pds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> url </font></font><span class="pl-pds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) .content}</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-kittenstoreparser-kt-LC8" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        }</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-kittenstoreparser-kt-LC9" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            .subscribeOn (computationScheduler)</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-kittenstoreparser-kt-LC10" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            .onErrorComplete ()</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-kittenstoreparser-kt-LC11" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreParser.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous avons utilisé la bibliothèque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kotlinx.serialization</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">L'analyse est effectuée sur un planificateur de calcul pour éviter de bloquer le thread principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Convertir l'état en modèle de vue:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/93b72bd2faa46640b125605b674b7c10.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433991" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpstatetomodel-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpstatetomodel-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpstatetomodel-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État d' </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amusement </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne</font></span><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toModel</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpstatetomodel-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modèle</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpstatetomodel-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        isLoading </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> isLoading,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpstatetomodel-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        isError </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpstatetomodel-kt-LC5" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l' </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les données</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faux</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpstatetomodel-kt-LC6" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l' </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les données</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erreur </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpstatetomodel-kt-LC7" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        },</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpstatetomodel-kt-LC8" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        imageUrls </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpstatetomodel-kt-LC9" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l' </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les données</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .urls</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpstatetomodel-kt-LC10" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l' </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les données</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erreur </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> emptyList ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpstatetomodel-kt-LC11" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpstatetomodel-kt-LC12" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    )</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpStateToModel.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Convertissez les événements en intentions:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/51ee3616f1664dcc2322a206fc2def16.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434002" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpeventtointent-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpeventtointent-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpeventtointent-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">événement </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amusant </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interne</font></span><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toIntent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpeventtointent-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpeventtointent-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quand</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpeventtointent-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpeventtointent-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est un </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">événement</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RefreshTriggered </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recharger</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpeventtointent-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpeventtointent-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpEventToIntent.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Préparation de la façade:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/f425417396ab89af2d098c33577bf7f1.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434013" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittencomponent1-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittencomponent1-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenComponent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC2" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onViewCreated</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vue </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onStart</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC7" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onStop</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC10" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onViewDestroyed</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC13" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDestroy</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC16" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC17" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir brut</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenComponent1.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hébergé avec ❤ par </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Familier du cycle de vie de nombreux développeurs Android. </font><font style="vertical-align: inherit;">C'est génial pour iOS, et même JavaScript. </font><font style="vertical-align: inherit;">Le diagramme de la transition entre les états du cycle de vie de notre façade ressemble à ceci: je vais </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/li/4z/kbli4zpkq5ts6lgucpwfrjegwq0.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
expliquer brièvement ce qui se passe ici:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tout d'abord, la méthode onCreate est appelée, après elle - onViewCreated, puis - onStart: cela met la façade en état de fonctionnement (démarrée);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à un certain moment après cela, la méthode onStop est appelée: cela met la façade dans un état arrêté (arrêté);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à l'arrêt, l'une des deux méthodes peut être appelée: onStart ou onViewDestroyed, c'est-à-dire que la façade peut être redémarrée ou que sa vue peut être détruite;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lorsque la vue est détruite, soit elle peut être recréée (onViewCreated), soit la façade entière peut être détruite (onDestroy).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mise en œuvre de la façade peut ressembler à ceci:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/746d656d5a629e58afd10a5d1a6f41c6.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434056" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittencomponent2-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittencomponent2-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenComponent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">magasin de </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privé </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            network </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreNetwork</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dataSource </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()),</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            parser </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreParser</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC6" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        )</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vue </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privée </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView? </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">privé </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> startStopScope </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope? </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC10" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC11" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onViewCreated</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vue </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC12" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .view </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voir</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC13" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onStart</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC16" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">val</span> view <span class="pl-k">=</span> requireNotNull(view)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC17" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC18" class="blob-code blob-code-inner js-file-line">        startStopScope <span class="pl-k">=</span> disposableScope {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC19" class="blob-code blob-code-inner js-file-line">            store.subscribeScoped(onNext <span class="pl-k">=</span> <span class="pl-smi">view</span>::render)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC20" class="blob-code blob-code-inner js-file-line">            view.events.map(<span class="pl-smi">Event</span>::toIntent).subscribeScoped(onNext <span class="pl-k">=</span> <span class="pl-smi">store</span>::onNext)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC21" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC22" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onStop</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC25" class="blob-code blob-code-inner js-file-line">        start<span class="pl-en">StopScope?</span>.dispose()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC26" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC27" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC28" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onViewDestroyed</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC29" class="blob-code blob-code-inner js-file-line">        view <span class="pl-k">=</span> <span class="pl-c1">null</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC30" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC31" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC32" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onDestroy</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC33" class="blob-code blob-code-inner js-file-line">        store.dispose()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC34" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC35" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">MviKmpKittenComponent2.kt</a>
        hosted with ❤ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment ça fonctionne:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous créons d'abord une instance de KittenStore;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans la méthode onViewCreated, nous nous souvenons du lien vers KittenView;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans onStart, nous signons KittenStore et KittenView l'un à l'autre;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans onStop, nous les reflétons les uns des autres;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans onViewDestroyed, nous effaçons le lien vers la vue;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans onDestroy, détruisez KittenStore.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'était le premier article de ma série MVI chez Kotlin Multiplatform. </font><font style="vertical-align: inherit;">Dans ce document, nous:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rappelé ce qu'est MVI et comment il fonctionne;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fait l'implémentation MVI la plus simple sur Kotlin Multiplatform en utilisant la bibliothèque Reaktive;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créé un module commun pour charger une liste d'images à l'aide de MVI.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez les propriétés les plus importantes de notre module commun:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous avons réussi à mettre tout le code dans le module multiplateforme à l'exception du code UI; </font><font style="vertical-align: inherit;">toute la logique, plus les connexions et les conversions entre la logique et l'interface utilisateur sont communes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la logique et l'interface utilisateur sont complètement indépendantes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'implémentation de l'interface utilisateur est très simple: il vous suffit d'afficher les modèles de vue entrants et de lancer des événements;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'intégration du module est également simple: il vous suffit de:</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implémenter l'interface KittenView (protocole);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer une instance de KittenComponent;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appeler ses méthodes de cycle de vie au bon moment;</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette approche évite le «flux» de Rx (ou coroutine) dans les plateformes, ce qui signifie que nous n'avons à gérer aucun abonnement au niveau de l'application;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toutes les classes importantes sont résumées par des interfaces et testées.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la partie suivante, je montrerai en pratique à quoi ressemble l'intégration de KittenComponent dans les applications iOS et Android. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suivez-moi sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et restez connecté!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr501948/index.html">Comment un train se déplace de gare en gare: fonctionnalités de routage</a></li>
<li><a href="../fr501954/index.html">Que la VR attend Microsoft Kinect ou est-ce l'avenir du jeu - parlons ensemble</a></li>
<li><a href="../fr501956/index.html">Notre expérience de travail avec les données dans etcd Kubernetes-cluster directement (sans K8s API)</a></li>
<li><a href="../fr501960/index.html">Mise à l'échelle de la recherche. Elasticsearch Ses avantages et exigences de base pour l'installation</a></li>
<li><a href="../fr501964/index.html">À quoi servent les ordinateurs industriels?</a></li>
<li><a href="../fr501970/index.html">De quoi avez-vous besoin pour créer un bon donjon en RPG?</a></li>
<li><a href="../fr501976/index.html">Comment apprendre à tester des logiciels</a></li>
<li><a href="../fr501978/index.html">Comment fonctionne l'histogramme Prometheus?</a></li>
<li><a href="../fr501980/index.html">L'histoire d'un projet ou comment j'ai créé un PBX de 7 ans basé sur Asterisk et Php</a></li>
<li><a href="../fr501982/index.html">Comment transférer un shader d'un moteur de jeu vers Substance Painter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>