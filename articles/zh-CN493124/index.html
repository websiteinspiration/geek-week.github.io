<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸš’ ğŸ¦” ğŸ… è‡ªå·±è¿›è¡Œè£¸æœºé…ç½®æˆ–ä»å¤´å¼€å§‹è‡ªåŠ¨æœåŠ¡å™¨å‡†å¤‡ ğŸ’‡ğŸ½ ğŸ¤° ğŸ‘’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å—¨ï¼Œæˆ‘æ˜¯Denisï¼Œæˆ‘çš„æ´»åŠ¨é¢†åŸŸä¹‹ä¸€æ˜¯åœ¨X5ä¸­å¼€å‘åŸºç¡€ç»“æ„è§£å†³æ–¹æ¡ˆã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³ä¸æ‚¨åˆ†äº«å¦‚ä½•éƒ¨ç½²åŸºäºå…¬å¼€å¯ç”¨å·¥å…·çš„è‡ªåŠ¨åŒ–æœåŠ¡å™¨å‡†å¤‡ç³»ç»Ÿã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£ï¼Œç®€å•ä¸”çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚
 
 
 
 å‡†å¤‡çš„æ„æ€æ˜¯ï¼šä»æ–°æœåŠ¡å™¨ä¸­ç›´æ¥åˆ¶é€ ä¸€å°å…·æœ‰OSçš„å®Œå…¨é…ç½®çš„æœåŠ¡å™¨ Linuxæˆ–ESXiè™šæ‹Ÿæœºç®¡ç†ç¨‹åºï¼ˆæœ¬æ–‡ä¸...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>è‡ªå·±è¿›è¡Œè£¸æœºé…ç½®æˆ–ä»å¤´å¼€å§‹è‡ªåŠ¨æœåŠ¡å™¨å‡†å¤‡</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/493124/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å—¨ï¼Œæˆ‘æ˜¯Denisï¼Œæˆ‘çš„æ´»åŠ¨é¢†åŸŸä¹‹ä¸€æ˜¯åœ¨X5ä¸­å¼€å‘åŸºç¡€ç»“æ„è§£å†³æ–¹æ¡ˆã€‚</font><font style="vertical-align: inherit;">ä»Šå¤©ï¼Œæˆ‘æƒ³ä¸æ‚¨åˆ†äº«å¦‚ä½•éƒ¨ç½²åŸºäºå…¬å¼€å¯ç”¨å·¥å…·çš„è‡ªåŠ¨åŒ–æœåŠ¡å™¨å‡†å¤‡ç³»ç»Ÿã€‚</font><font style="vertical-align: inherit;">æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£ï¼Œç®€å•ä¸”çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cs/aj/wx/csajwx5dsd-sdlngyst-pfrollu.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡†å¤‡çš„æ„æ€æ˜¯ï¼šä»æ–°æœåŠ¡å™¨ä¸­ç›´æ¥åˆ¶é€ ä¸€å°å…·æœ‰OSçš„å®Œå…¨é…ç½®çš„æœåŠ¡å™¨ </font><font style="vertical-align: inherit;">Linuxæˆ–ESXiè™šæ‹Ÿæœºç®¡ç†ç¨‹åºï¼ˆæœ¬æ–‡ä¸è®¨è®ºWindows Server Castï¼‰ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¡æ¬¾</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨-éœ€è¦é…ç½®çš„æœåŠ¡å™¨ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰è£…æœåŠ¡å™¨-é€šè¿‡ç½‘ç»œæä¾›æ•´ä¸ªå‡†å¤‡è¿‡ç¨‹çš„ä¸»æœåŠ¡å™¨ã€‚</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨åŒ–ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡è®¾æœ‰ä¸€ä¸ªé—®é¢˜ï¼šä»å¤´å¼€å§‹å¤§è§„æ¨¡å‡†å¤‡æœåŠ¡å™¨-æ¯å¤©30ä¸ªã€‚</font><font style="vertical-align: inherit;">ä¸åŒåˆ¶é€ å•†å’Œå‹å·çš„æœåŠ¡å™¨ï¼Œå¯ä»¥å®‰è£…ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¯èƒ½å­˜åœ¨æˆ–å¯èƒ½ä¸å­˜åœ¨ç®¡ç†ç¨‹åºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¾ç½®è¿‡ç¨‹åŒ…æ‹¬å“ªäº›æ“ä½œï¼ˆæ— è‡ªåŠ¨åŒ–ï¼‰ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†é”®ç›˜ï¼Œé¼ æ ‡ï¼Œæ˜¾ç¤ºå™¨è¿æ¥åˆ°æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®BIOSï¼ŒRAIDï¼ŒIPMIï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡çº§ç»„ä»¶å›ºä»¶ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éƒ¨ç½²æ–‡ä»¶ç³»ç»Ÿæ˜ åƒï¼ˆæˆ–å®‰è£…ç®¡ç†ç¨‹åºå¹¶å¤åˆ¶è™šæ‹Ÿæœºï¼‰ï¼›</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ³¨æ„ã€‚</font><font style="vertical-align: inherit;">æˆ–è€…ï¼Œå¯ä»¥é€šè¿‡å®‰è£…è‡ªåŠ¨åº”ç­”æ–‡ä»¶æ¥éƒ¨ç½²æ“ä½œç³»ç»Ÿã€‚</font><font style="vertical-align: inherit;">ä½†è¿™å°†ä¸åœ¨æœ¬æ–‡ä¸­è®¨è®ºã€‚</font><font style="vertical-align: inherit;">å°½ç®¡æ‚¨ä¼šåœ¨ä¸‹é¢çœ‹åˆ°æ·»åŠ æ­¤åŠŸèƒ½å¾ˆå®¹æ˜“ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®æ“ä½œç³»ç»Ÿå‚æ•°ï¼ˆä¸»æœºåï¼ŒIPç­‰ï¼‰ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ¯ä¸ªæœåŠ¡å™¨ä¸Šé¡ºåºæ‰§è¡Œç›¸åŒçš„è®¾ç½®ã€‚</font><font style="vertical-align: inherit;">è¿™ç§å·¥ä½œçš„æ•ˆç‡å¾ˆä½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è‡ªåŠ¨åŒ–çš„æœ¬è´¨æ˜¯åœ¨å‡†å¤‡æœåŠ¡å™¨çš„è¿‡ç¨‹ä¸­é¿å…äººå·¥å‚ä¸ã€‚</font><font style="vertical-align: inherit;">è¶Šå¤šè¶Šå¥½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºè‡ªåŠ¨åŒ–ï¼Œå‡å°‘äº†æ“ä½œä¹‹é—´çš„åœæœºæ—¶é—´ï¼Œå¹¶ä¸”å¯ä»¥åŒæ—¶å‡†å¤‡å¤šå°æœåŠ¡å™¨ã€‚</font><font style="vertical-align: inherit;">ç”±äºäººä¸ºå› ç´ è€Œå¯¼è‡´é”™è¯¯çš„å¯èƒ½æ€§ä¹Ÿå¤§å¤§é™ä½äº†ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g7/ic/x1/g7icx1q3tb0yanpntf9jmw8n4p4.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•è‡ªåŠ¨é…ç½®æœåŠ¡å™¨ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å°†è¯¦ç»†åˆ†ææ‰€æœ‰æ­¥éª¤ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨æœ‰ä¸€ä¸ªç”¨ä½œPXEå®‰è£…æœåŠ¡å™¨çš„linuxæœåŠ¡å™¨ã€‚</font><font style="vertical-align: inherit;">æœåŠ¡å·²åœ¨å…¶ä¸Šå®‰è£…å’Œé…ç½®ï¼šDHCPï¼ŒTFTPã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡PXEåŠ è½½æœåŠ¡å™¨ï¼ˆéœ€è¦é…ç½®ï¼‰ã€‚</font><font style="vertical-align: inherit;">å›æƒ³ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€‰æ‹©é€šè¿‡ç½‘ç»œå¼•å¯¼çš„æœåŠ¡å™¨ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨å°†åŠ è½½ç½‘å¡çš„PXE-ROMï¼Œå¹¶é€šè¿‡DHCPä¸å®‰è£…æœåŠ¡å™¨è”ç³»ä»¥è·å¾—ç½‘ç»œåœ°å€ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰è£…æœåŠ¡å™¨çš„DHCPæä¾›åœ°å€ï¼Œä»¥åŠé€šè¿‡PXEè¿›ä¸€æ­¥ä¸‹è½½çš„è¯´æ˜ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨é€šè¿‡PXEä»å®‰è£…æœåŠ¡å™¨ä¸‹è½½ç½‘ç»œå¼•å¯¼ç¨‹åºï¼Œè¿›ä¸€æ­¥ä¸‹è½½æ ¹æ®PXEé…ç½®æ–‡ä»¶è¿›è¡Œã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¹æ®æ¥æ”¶åˆ°çš„å‚æ•°ï¼ˆå†…æ ¸ï¼Œinitramfsï¼Œå®‰è£…ç‚¹ï¼Œsquashfsæ˜ åƒç­‰ï¼‰æ‰§è¡Œä¸‹è½½ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ³¨æ„ã€‚</font><font style="vertical-align: inherit;">æœ¬æ–‡ä»‹ç»äº†é€šè¿‡BIOSæ¨¡å¼å¯åŠ¨PXEã€‚</font><font style="vertical-align: inherit;">å½“å‰ï¼Œåˆ¶é€ å•†æ­£åœ¨ç§¯æå¼•å…¥UEFIå¼•å¯¼æ¨¡å¼ã€‚</font><font style="vertical-align: inherit;">å¯¹äºPXEï¼ŒåŒºåˆ«åœ¨äºDHCPæœåŠ¡å™¨çš„é…ç½®å’Œé™„åŠ å¼•å¯¼åŠ è½½ç¨‹åºçš„å­˜åœ¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€ƒè™‘ä¸€ä¸ªPXEæœåŠ¡å™¨é…ç½®ç¤ºä¾‹ï¼ˆpxelinuxèœå•ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–‡ä»¶pxelinux.cfg /é»˜è®¤å€¼ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">default menu.c32<font></font>
prompt 0<font></font>
timeout 100<font></font>
menu title X5 PXE Boot Menu<font></font>
LABEL InstallServer Menu<font></font>
	MENU LABEL InstallServer<font></font>
	KERNEL menu.c32<font></font>
	APPEND pxelinux.cfg/installserver<font></font>
LABEL VMware Menu<font></font>
	MENU LABEL VMware ESXi Install<font></font>
	KERNEL menu.c32<font></font>
	APPEND pxelinux.cfg/vmware<font></font>
LABEL toolkit //   <font></font>
	MENU LABEL Linux Scripting Toolkits<font></font>
	MENU default<font></font>
	KERNEL menu.c32<font></font>
	APPEND pxelinux.cfg/toolkit //    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–‡ä»¶pxelinux.cfg / toolkitï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">prompt 0<font></font>
timeout 100<font></font>
menu title X5 PXE Boot Menu<font></font>
label mainmenu<font></font>
    menu label ^Return to Main Menu<font></font>
    kernel menu.c32<font></font>
    append pxelinux.cfg/default<font></font>
label x5toolkit-auto //   â€”  <font></font>
        menu label x5 toolkit autoinstall<font></font>
        menu default<font></font>
        kernel toolkit/tkcustom-kernel<font></font>
        append initrd=toolkit/tk-initramfs.gz quiet net.ifnames=0 biosdevname=0 nfs_toolkit_ip=192.168.200.1 nfs_toolkit_path=tftpboot/toolkit nfs_toolkit_script=scripts/mount.sh script_cmd=master-install.sh CMDIS2=â€â€¦â€<font></font>
label x5toolkit-shell //   - <font></font>
        menu label x5 toolkit shell<font></font>
        kernel toolkit/tkcustom-kernel<font></font>
        append initrd=toolkit/tkcustom-initramfs.gz quiet net.ifnames=0 biosdevname=0 nfs_toolkit_ip=192.168.200.1 nfs_toolkit_path=tftpboot/toolkit nfs_toolkit_script=scripts/mount.sh script_cmd=/bin/bash CMDIS2=â€â€¦â€</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤é˜¶æ®µçš„å†…æ ¸å’Œinitramfsæ˜¯ä¸­é—´çš„linuxæ˜ åƒï¼Œå€ŸåŠ©è¯¥æ˜ åƒï¼ŒæœåŠ¡å™¨çš„åŸºæœ¬å‡†å¤‡å·¥ä½œå’Œé…ç½®å°†å®Œæˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æ‚¨æ‰€è§ï¼Œå¼•å¯¼ç¨‹åºå°†è®¸å¤šå‚æ•°ä¼ é€’ç»™å†…æ ¸ã€‚</font><font style="vertical-align: inherit;">å…¶ä¸­ä¸€äº›å‚æ•°ç”±å†…æ ¸æœ¬èº«ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥å°†ä¸€äº›ç”¨äºæˆ‘ä»¬è‡ªå·±çš„ç›®çš„ã€‚</font><font style="vertical-align: inherit;">ç¨åå°†å¯¹æ­¤è¿›è¡Œæè¿°ï¼Œä½†æ˜¯ç°åœ¨æ‚¨ä»…å¯ä»¥è®°ä½ï¼Œé€šè¿‡/ proc / cmdlineåœ¨ä¸­é—´çš„Linuxæ˜ åƒä¸­å¯ä»¥ä½¿ç”¨æ‰€æœ‰ä¼ é€’çš„å‚æ•°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†…æ ¸å’Œinitramfsä»å“ªé‡Œè·å¾—ï¼Ÿ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½œä¸ºåŸºç¡€ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä»»ä½•Linuxå‘è¡Œç‰ˆã€‚</font><font style="vertical-align: inherit;">é€‰æ‹©æ—¶æˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼•å¯¼æ˜ åƒå¿…é¡»æ˜¯é€šç”¨çš„ï¼ˆå¯ç”¨é©±åŠ¨ç¨‹åºï¼Œèƒ½å¤Ÿå®‰è£…å…¶ä»–å®ç”¨ç¨‹åºï¼‰ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€æœ‰å¯èƒ½éœ€è¦å®šåˆ¶initramfsã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æˆ‘ä»¬é’ˆå¯¹X5çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œè¿™æ˜¯å¦‚ä½•å®Œæˆçš„ï¼Ÿæˆ‘ä»¬é€‰æ‹©CentOS 7ä½œä¸ºåŸºç¡€ï¼Œè®©æˆ‘ä»¬åšä»¥ä¸‹æŠ€å·§ï¼šå‡†å¤‡å°†æ¥çš„æ˜ åƒç»“æ„ï¼Œå°†å…¶æ‰“åŒ…åˆ°å½’æ¡£æ–‡ä»¶ä¸­å¹¶åˆ›å»ºinitramfsï¼Œåœ¨å…¶ä¸­å°†æˆä¸ºæˆ‘ä»¬çš„æ–‡ä»¶ç³»ç»Ÿå½’æ¡£æ–‡ä»¶ã€‚åŠ è½½æ˜ åƒæ—¶ï¼Œå½’æ¡£æ–‡ä»¶å°†éƒ¨ç½²åˆ°åˆ›å»ºçš„tmpfséƒ¨åˆ†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è·å¾—äº†ä¸€ä¸ªæœ€å°çš„ï¼ŒåŠŸèƒ½é½å…¨çš„å®æ—¶Linuxæ˜ åƒï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰å¿…éœ€çš„å®ç”¨ç¨‹åºï¼Œè¯¥å®ç”¨ç¨‹åºä»…åŒ…å«ä¸¤ä¸ªæ–‡ä»¶ï¼švmkernelå’Œinitramfsã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs"># : <font></font>
<font></font>
mkdir -p /tftpboot/toolkit/CustomTK/rootfs /tftpboot/toolkit/CustomTK/initramfs/bin<font></font>
<font></font>
# :<font></font>
<font></font>
yum groups -y install "Minimal Install" --installroot=/tftpboot/toolkit/CustomTK/rootfs/<font></font>
yum -y install nfs-utils mariadb ntpdate mtools syslinux mdadm tbb libgomp efibootmgr dosfstools net-tools pciutils openssl make ipmitool OpenIPMI-modalias rng-tools --installroot=/tftpboot/toolkit/CustomTK/rootfs/<font></font>
yum -y remove biosdevname --installroot=/tftpboot/toolkit/CustomTK/rootfs/<font></font>
<font></font>
#  initramfs:<font></font>
<font></font>
wget https://busybox.net/downloads/binaries/1.31.0-defconfig-multiarch-musl/busybox-x86_64 -O /tftpboot/toolkit/CustomTK/initramfs/bin/busybox<font></font>
chmod a+x /tftpboot/toolkit/CustomTK/initramfs/bin/busybox<font></font>
cp /tftpboot/toolkit/CustomTK/rootfs/boot/vmlinuz-3.10.0-957.el7.x86_64 /tftpboot/toolkit/tkcustom-kernel<font></font>
<font></font>
#  /tftpboot/toolkit/CustomTK/initramfs/init (  ):<font></font>
<font></font>
#!/bin/busybox sh<font></font>
/bin/busybox --install /bin<font></font>
mkdir -p /dev /proc /sys /var/run /newroot<font></font>
mount -t proc proc /proc<font></font>
mount -o mode=0755 -t devtmpfs devtmpfs /dev<font></font>
mkdir -p /dev/pts /dev/shm /dev/mapper /dev/vc<font></font>
mount -t devpts -o gid=5,mode=620 devpts /dev/pts<font></font>
mount -t sysfs sysfs /sys<font></font>
mount -t tmpfs -o size=4000m tmpfs /newroot<font></font>
echo -n "Extracting rootfs... "<font></font>
xz -d -c -f rootfs.tar.xz | tar -x -f - -C /newroot<font></font>
echo "done"<font></font>
mkdir -p /newroot/dev /newroot/proc /newroot/sys<font></font>
mount --move /sys  /newroot/sys<font></font>
mount --move /proc /newroot/proc<font></font>
mount --move /dev  /newroot/dev<font></font>
exec switch_root /newroot /sbin/init<font></font>
<font></font>
#  rootfs  initramfs:<font></font>
<font></font>
cd /tftpboot/toolkit/CustomTK/rootfs<font></font>
tar cJf /tftpboot/toolkit/CustomTK/initramfs/rootfs.tar.xz --exclude ./proc --exclude ./sys --exclude ./dev .<font></font>
cd /tftpboot/toolkit/CustomTK/initramfs<font></font>
find . -print0 | cpio --null -ov --format=newc | gzip -9 &gt; /tftpboot/toolkit/tkcustom-initramfs-new.gz</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæˆ‘ä»¬æŒ‡å®šäº†åº”è¯¥åŠ è½½çš„å†…æ ¸å’Œinitramfsã€‚</font><font style="vertical-align: inherit;">ç»“æœï¼Œåœ¨æ­¤é˜¶æ®µï¼Œé€šè¿‡PXEä¸‹è½½ä¸­é—´linuxæ˜ åƒï¼Œæˆ‘ä»¬å¾—åˆ°äº†OSæ§åˆ¶å°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¾ˆå¥½ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬éœ€è¦å°†æ§åˆ¶æƒè½¬ç§»åˆ°æˆ‘ä»¬çš„â€œè‡ªåŠ¨åŒ–â€ä¸Šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯ä»¥è¿™æ ·åšã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡è®¾åœ¨åŠ è½½æ˜ åƒä¹‹åï¼Œæˆ‘ä»¬è®¡åˆ’å°†æ§åˆ¶æƒè½¬ç§»åˆ°mount.shè„šæœ¬ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬åœ¨è‡ªåŠ¨è¿è¡Œä¸­åŒ…å«mount.shè„šæœ¬ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦ä¿®æ”¹initramfsï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§£å‹ç¼©initramfsï¼ˆå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸Šè¿°ç‰ˆæœ¬çš„initramfsï¼Œåˆ™ä¸éœ€è¦è¿™æ ·åšï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨å¯åŠ¨ä»£ç ä¸­åŒ…å«å°†åˆ†æé€šè¿‡/ proc / cmdlineä¼ é€’çš„å‚æ•°å¹¶è¿›ä¸€æ­¥ä¼ è¾“æ§åˆ¶çš„ä»£ç ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰“åŒ…initramfsã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ³¨æ„ã€‚å¯¹äºX5å·¥å…·åŒ…ï¼Œå¼•å¯¼æ§åˆ¶å·²è½¬ç§»åˆ°è„šæœ¬ä¸­ï¼Œ</font></font><code>/opt/x5/toolkit/bin/hook.sh   override.conf  getty tty1 (ExecStart=â€¦) </code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œå°†åŠ è½½æ˜ åƒï¼Œå…¶ä¸­mount.shè„šæœ¬å°†åœ¨å¯åŠ¨æ—¶å¯åŠ¨ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨åˆ†æè¿‡ç¨‹ä¸­ï¼Œmount.shè„šæœ¬åˆ†æä¼ é€’çš„å‚æ•°ï¼ˆscript_cmd =ï¼‰å¹¶å¯åŠ¨å¿…è¦çš„ç¨‹åº/è„šæœ¬ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ‡ç­¾å·¥å…·åŒ…- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªåŠ¨</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å†…æ ¸... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é™„åŠ ... nfs_toolkit_script =è„šæœ¬/ mount.sh </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">script_cmd = master-install.sh</font></font><br>
</b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ ‡ç­¾å·¥å…·åŒ…- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤–å£³</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å†…æ ¸... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
append ... nfs_toolkit_script =è„šæœ¬/ mount.sh </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">script_cmd = / bin / bash</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/w9/xc/8b/w9xc8b87fob_jooqjazqiyyiccm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å·¦ä¾§æ˜¯PXEèœå•ï¼Œå³è¾¹æ˜¯æ§åˆ¶æƒè½¬ç§»æ–¹æ¡ˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
éšç€æ§åˆ¶æƒçš„è½¬ç§»ï¼Œæˆ‘ä»¬å¾—ä»¥è§£å†³ã€‚</font><font style="vertical-align: inherit;">æ ¹æ®PXEèœå•çš„é€‰æ‹©ï¼Œå°†å¯åŠ¨è‡ªåŠ¨è°ƒæ•´è„šæœ¬æˆ–è°ƒè¯•æ§åˆ¶å°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è‡ªåŠ¨é…ç½®çš„æƒ…å†µä¸‹ï¼Œå°†å®‰è£…æ¥è‡ªå®‰è£…æœåŠ¡å™¨çš„å¿…è¦ç›®å½•ï¼Œå…¶ä¸­åŒ…å«ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰§æœ¬;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿å­˜å„ç§æœåŠ¡å™¨çš„BIOS / UEFIæ¨¡æ¿ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›ºä»¶;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœåŠ¡å™¨å®ç”¨ç¨‹åºï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ—¥å¿—ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œmount.shè„šæœ¬å°†æ§åˆ¶æƒä»è„šæœ¬ç›®å½•è½¬ç§»åˆ°master-install.shè„šæœ¬ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è„šæœ¬æ ‘ï¼ˆå¯åŠ¨é¡ºåºï¼‰å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸»å®‰è£…</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…±äº«åŠŸèƒ½ï¼ˆé€šç”¨åŠŸèƒ½ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿¡æ¯ï¼ˆä¿¡æ¯è¾“å‡ºï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‹å·ï¼ˆæ ¹æ®æœåŠ¡å™¨å‹å·è®¾ç½®å®‰è£…å‚æ•°ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prepare_utilsï¼ˆå®‰è£…å¿…è¦çš„å®ç”¨ç¨‹åºï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fwupdateï¼ˆå›ºä»¶æ›´æ–°ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯Šæ–­ï¼ˆåŸºæœ¬è¯Šæ–­ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biosconfï¼ˆBIOS / UEFIè®¾ç½®ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clockfixï¼ˆåœ¨ä¸»æ¿ä¸Šè®¾ç½®æ—¶é—´ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">srmconfï¼ˆé…ç½®è¿œç¨‹æ¥å£ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">raidconfï¼ˆé…ç½®é€»è¾‘å·ï¼‰</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹‹ä¸€ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¢„å®‰è£…ï¼ˆå°†æ§åˆ¶æƒè½¬ç§»åˆ°æ“ä½œç³»ç»Ÿæˆ–ç®¡ç†ç¨‹åºçš„å®‰è£…ç¨‹åºï¼Œä¾‹å¦‚ESXiï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå¹¶å®‰è£…ï¼ˆç›´æ¥å¼€å§‹è§£å‹ç¼©æ˜ åƒï¼‰</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨æˆ‘ä»¬çŸ¥é“ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•é€šè¿‡PXEå¼•å¯¼æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•å°†æ§åˆ¶æƒè½¬ç§»åˆ°æ‚¨è‡ªå·±çš„è„šæœ¬ã€‚</font></font></li>
</ul></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬ç»§ç»­ã€‚</font><font style="vertical-align: inherit;">ä»¥ä¸‹é—®é¢˜å·²å˜å¾—ç›¸å…³ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•è¯†åˆ«æˆ‘ä»¬æ­£åœ¨å‡†å¤‡çš„æœåŠ¡å™¨ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å“ªäº›å®ç”¨ç¨‹åºä»¥åŠå¦‚ä½•é…ç½®æœåŠ¡å™¨ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•è·å–ç‰¹å®šæœåŠ¡å™¨çš„è®¾ç½®ï¼Ÿ</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•è¯†åˆ«æˆ‘ä»¬æ­£åœ¨å‡†å¤‡çš„æœåŠ¡å™¨ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¾ˆç®€å•-DMIï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">dmidecode â€“s system-product-name<font></font>
dmidecode â€“s system-manufacturer<font></font>
dmidecode â€“s system-serial-number</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒå…·æœ‰æ‚¨éœ€è¦çš„ä¸€åˆ‡ï¼šä¾›åº”å•†ï¼Œå‹å·ï¼Œåºåˆ—å·ã€‚</font><font style="vertical-align: inherit;">å¦‚æœä¸ç¡®å®šæ­¤ä¿¡æ¯æ˜¯å¦å‡ºç°åœ¨æ‰€æœ‰æœåŠ¡å™¨ä¸­ï¼Œåˆ™å¯ä»¥é€šè¿‡MACåœ°å€è¯†åˆ«å®ƒä»¬ã€‚</font><font style="vertical-align: inherit;">æˆ–è€…ï¼Œå¦‚æœæœåŠ¡å™¨ä¾›åº”å•†ä¸åŒï¼Œå¹¶ä¸”åœ¨æŸäº›å‹å·ä¸ŠåŒæ—¶ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼Œåˆ™åºåˆ—å·ä¿¡æ¯æ ¹æœ¬ä¸å¯ç”¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ¹æ®æ”¶åˆ°çš„ä¿¡æ¯ï¼Œå°†å®‰è£…æ¥è‡ªå®‰è£…æœåŠ¡å™¨çš„ç½‘ç»œæ–‡ä»¶å¤¹ï¼Œå¹¶åŠ è½½æ‰€æœ‰å¿…éœ€çš„æ–‡ä»¶ï¼ˆå®ç”¨ç¨‹åºï¼Œå›ºä»¶ç­‰ï¼‰ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å“ªäº›å®ç”¨ç¨‹åºä»¥åŠå¦‚ä½•é…ç½®æœåŠ¡å™¨ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å°†ä¸ºä¸€äº›åˆ¶é€ å•†æä¾›Linuxå®ç”¨ç¨‹åºã€‚</font><font style="vertical-align: inherit;">æ‰€æœ‰å®ç”¨ç¨‹åºéƒ½å¯ä»¥åœ¨ä¾›åº”å•†çš„å®˜æ–¹ç½‘ç«™ä¸Šæ‰¾åˆ°ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xx/xh/3f/xxxh3f0pg48elgtr8qn9r_wjp4q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰äº†å›ºä»¶ï¼Œæˆ‘è®¤ä¸ºä¸€åˆ‡éƒ½å¾ˆæ¸…æ¥šã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬é€šå¸¸ä»¥æ‰“åŒ…çš„å¯æ‰§è¡Œæ–‡ä»¶å½¢å¼å‡ºç°ã€‚</font><font style="vertical-align: inherit;">å¯æ‰§è¡Œæ–‡ä»¶æ§åˆ¶å›ºä»¶æ›´æ–°è¿‡ç¨‹å¹¶æŠ¥å‘Šè¿”å›ç ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BIOSå’ŒIPMIé€šå¸¸æ˜¯é€šè¿‡æ¨¡æ¿é…ç½®çš„ã€‚</font><font style="vertical-align: inherit;">å¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥åœ¨åŠ è½½ä¹‹å‰ç¼–è¾‘æ¨¡æ¿ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€äº›ä¾›åº”å•†çš„RAIDå®ç”¨ç¨‹åºä¹Ÿå¯ä»¥æ ¹æ®æ¨¡æ¿è¿›è¡Œé…ç½®ã€‚</font><font style="vertical-align: inherit;">å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œåˆ™å¿…é¡»ç¼–å†™é…ç½®è„šæœ¬ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é…ç½®RAIDçš„è¿‡ç¨‹é€šå¸¸å¦‚ä¸‹ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬è¯·æ±‚å½“å‰é…ç½®ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœå·²ç»å­˜åœ¨é€»è¾‘æ•°ç»„ï¼Œåˆ™å°†å…¶åˆ é™¤ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬æŸ¥çœ‹å­˜åœ¨å“ªäº›ç‰©ç†ç£ç›˜ï¼Œä»¥åŠå…¶ä¸­æœ‰å¤šå°‘ç‰©ç†ç£ç›˜ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªæ–°çš„é€»è¾‘æ•°ç»„ã€‚</font><font style="vertical-align: inherit;">å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œæˆ‘ä»¬å°†ä¸­æ–­è¯¥è¿‡ç¨‹ã€‚</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•è·å–ç‰¹å®šæœåŠ¡å™¨çš„è®¾ç½®ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡è®¾æ‰€æœ‰æœåŠ¡å™¨è®¾ç½®éƒ½å­˜å‚¨åœ¨å®‰è£…æœåŠ¡å™¨ä¸Šã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†å›ç­”æˆ‘ä»¬çš„é—®é¢˜ï¼Œæ‚¨é¦–å…ˆéœ€è¦ç¡®å®šï¼šå¦‚ä½•å°†è®¾ç½®è½¬ç§»åˆ°å®‰è£…æœåŠ¡å™¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œå¾ˆå¯èƒ½è¦å¤„ç†æ–‡æœ¬æ–‡ä»¶ã€‚</font><font style="vertical-align: inherit;">ï¼ˆå°†æ¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ–‡æœ¬æ–‡ä»¶ä½œä¸ºä¼ è¾“è®¾ç½®çš„å¤‡ä»½æ–¹å¼ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥åœ¨å®‰è£…æœåŠ¡å™¨ä¸Šâ€œå…±äº«â€æ–‡æœ¬æ–‡ä»¶ã€‚</font><font style="vertical-align: inherit;">å¹¶å°†å…¶æ·»åŠ åˆ°mount.shè„šæœ¬ä¸­ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼Œè¿™äº›è¡Œå°†å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;åºåˆ—å·&gt; &lt;ä¸»æœºå&gt; &lt;å­ç½‘&gt; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›è¡Œå°†ç”±å·¥ç¨‹å¸ˆä»å…¶å·¥ä½œè®¡ç®—æœºè½¬ç§»åˆ°æ–‡ä»¶ä¸­ã€‚</font><font style="vertical-align: inherit;">ç„¶åï¼Œåœ¨è®¾ç½®æœåŠ¡å™¨æ—¶ï¼Œå°†ä»æ–‡ä»¶ä¸­è¯»å–ç‰¹å®šæœåŠ¡å™¨çš„å‚æ•°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå°†æ¥æœ€å¥½ä½¿ç”¨æ•°æ®åº“æ¥å­˜å‚¨è®¾ç½®ï¼ŒçŠ¶æ€å’ŒæœåŠ¡å™¨å®‰è£…æ—¥å¿—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç„¶ï¼Œä¸€ä¸ªæ•°æ®åº“æ— æ³•åšåˆ°ï¼Œæ‚¨å°†éœ€è¦åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯éƒ¨ä»¶ï¼Œå€ŸåŠ©è¯¥å®¢æˆ·ç«¯éƒ¨ä»¶ï¼Œè®¾ç½®å°†è¢«ä¼ è¾“åˆ°æ•°æ®åº“ä¸­ã€‚è¿™æ¯”æ–‡æœ¬æ–‡ä»¶æ›´éš¾å®ç°ï¼Œä½†å®é™…ä¸Šå¹¶ä¸åƒå¬èµ·æ¥é‚£æ ·éš¾ã€‚å®¢æˆ·ç«¯çš„æœ€ä½ç‰ˆæœ¬å¯ä»¥å°†æ•°æ®ç®€å•åœ°ä¼ è¾“åˆ°æ•°æ®åº“ï¼Œè¿™å¯¹äºç¼–å†™è‡ªå·±çš„ç‰ˆæœ¬æ˜¯ç›¸å½“å¯è¡Œçš„ã€‚å°†æ¥ï¼Œä¹Ÿæœ‰å¯èƒ½ä»¥è‡ªç”±æ¨¡å¼ï¼ˆæŠ¥å‘Šï¼Œæ‰“å°æ ‡ç­¾ï¼Œå‘é€é€šçŸ¥ç­‰ï¼‰è¿›è¡Œæ”¹è¿›ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‘æ•°æ®åº“å‘å‡ºç‰¹å®šè¯·æ±‚å¹¶æŒ‡ç¤ºæœåŠ¡å™¨çš„åºåˆ—å·åï¼Œæˆ‘ä»¬è·å¾—äº†é…ç½®æœåŠ¡å™¨æ‰€éœ€çš„å‚æ•°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦å¤–ï¼Œæˆ‘ä»¬ä¸éœ€è¦å‘æ˜ç”¨äºåŒæ­¥è®¿é—®çš„é”ï¼Œå°±åƒæ–‡æœ¬æ–‡ä»¶ä¸€æ ·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®åº“çš„æ‰€æœ‰é˜¶æ®µå†™å…¥é…ç½®æ—¥å¿—ï¼Œå¹¶é€šè¿‡å‡†å¤‡é˜¶æ®µçš„äº‹ä»¶å’Œæ ‡å¿—æ¥æ§åˆ¶å®‰è£…è¿‡ç¨‹ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡PXEåŠ è½½æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æ§åˆ¶æƒè½¬ç§»åˆ°æˆ‘ä»¬çš„è„šæœ¬ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡åºåˆ—å·è¯†åˆ«è¦å‡†å¤‡çš„æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨é€‚å½“çš„å®ç”¨ç¨‹åºé…ç½®æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨å®¢æˆ·ç«¯å°†è®¾ç½®è½¬ç§»åˆ°å®‰è£…æœåŠ¡å™¨æ•°æ®åº“ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº†è§£å¦‚ä½•ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰è£…çš„æœåŠ¡å™¨ä»æ•°æ®åº“æ¥æ”¶å¿…è¦çš„è®¾ç½®ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€æœ‰å‡†å¤‡è¿›åº¦éƒ½è®°å½•åœ¨æ•°æ®åº“ä¸­ï¼ˆæ—¥å¿—ï¼Œäº‹ä»¶ï¼Œé˜¶æ®µæ ‡å¿—ï¼‰ã€‚</font></font></li>
</ul></b><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•å®‰è£…ä¸åŒç±»å‹çš„è½¯ä»¶ï¼Ÿ</font><font style="vertical-align: inherit;">å¦‚ä½•å®‰è£…è™šæ‹Ÿæœºç®¡ç†ç¨‹åºï¼Œå¤åˆ¶VMå¹¶é…ç½®æ‰€æœ‰è¿™äº›ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å°†æ–‡ä»¶ç³»ç»Ÿæ˜ åƒï¼ˆlinuxï¼‰éƒ¨ç½²åˆ°ç¡¬ä»¶çš„æƒ…å†µä¸‹ï¼Œä¸€åˆ‡éƒ½éå¸¸ç®€å•ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®æ‰€æœ‰æœåŠ¡å™¨ç»„ä»¶ä¹‹åï¼Œéƒ¨ç½²æ˜ åƒã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰è£…grubå¼•å¯¼ç¨‹åºã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬åˆ¶ä½œchrootå¹¶é…ç½®æ‰€æœ‰å¿…è¦çš„ä¸œè¥¿ã€‚</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•å°†æ§åˆ¶æƒè½¬ç§»åˆ°OSå®‰è£…ç¨‹åºï¼ˆä»¥ESXiä¸ºä¾‹ï¼‰ã€‚</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬ä½¿ç”¨è‡ªåŠ¨å“åº”æ–‡ä»¶ï¼ˆkickstartï¼‰æ¥ç»„ç»‡ä»è„šæœ¬åˆ°è™šæ‹Ÿæœºç›‘æ§ç¨‹åºå®‰è£…ç¨‹åºçš„æ§åˆ¶è½¬ç§»ï¼š</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ é™¤ç£ç›˜ä¸Šçš„å½“å‰åˆ†åŒºã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ª500MBçš„åˆ†åŒºã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†å…¶æ ‡è®°ä¸ºå¯åŠ¨ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¼å¼ä¸ºFAT32ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å°†ESXiå®‰è£…æ–‡ä»¶å¤åˆ¶åˆ°æ ¹ç›®å½•ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰è£…syslinuxã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†syslinux.cfgå¤åˆ¶åˆ°/ syslinux /</font></font></li>
</ul><br>
<pre><code class="plaintext hljs">default esxi<font></font>
prompt 1<font></font>
timeout 50<font></font>
label esxi<font></font>
kernel mboot.c32<font></font>
append -c boot.cfg</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†mboot.c32å¤åˆ¶åˆ°/ syslinuxã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨boot.cfgä¸­åº”è¯¥æœ‰kernelopt = ks = ftpï¼š// &lt;å®‰è£…æœåŠ¡å™¨çš„IP&gt; /ks_esxi.cfg</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœåŠ¡å™¨é‡æ–°å¼•å¯¼åï¼ŒESXiå®‰è£…ç¨‹åºå°†ä»å…¶ç¡¬ç›˜é©±åŠ¨å™¨å¼•å¯¼ã€‚</font><font style="vertical-align: inherit;">æ ¹æ®æŒ‡å®šçš„è‡ªåŠ¨åº”ç­”æ–‡ä»¶ï¼Œæ‰€æœ‰å¿…éœ€çš„å®‰è£…ç¨‹åºæ–‡ä»¶å°†è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸”ESXiçš„å®‰è£…å°†å¼€å§‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹æ˜¯ks_esxi.cfgè‡ªåŠ¨åº”ç­”æ–‡ä»¶ä¸­çš„å‡ è¡Œï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">%firstboot --interpreter=busybox<font></font>
â€¦<font></font>
#   <font></font>
<font></font>
SYSSN=$(esxcli hardware platform get | grep Serial | awk -F " " '{print $3}')<font></font>
<font></font>
#  IP<font></font>
<font></font>
IPADDRT=$(esxcli network ip interface ipv4 get | grep vmk0 | awk -F " " '{print $2}')<font></font>
LAST_OCTET=$(echo $IPADDRT | awk -F'.' '{print $4}')<font></font>
<font></font>
#  NFS -<font></font>
<font></font>
esxcli storage nfs add -H is -s /srv/nfs_share -v nfsshare1<font></font>
<font></font>
#    ssh,   ssh-<font></font>
<font></font>
mv /etc/ssh /etc/ssh.tmp<font></font>
cp -R /vmfs/volumes/nfsshare1/ssh /etc/<font></font>
chmod go-r /etc/ssh/ssh_host_rsa_key<font></font>
<font></font>
#  ovftool,    ,    <font></font>
<font></font>
cp -R /vmfs/volumes/nfsshare1/ovftool /vmfs/volumes/datastore1/<font></font>
<font></font>
#  <font></font>
<font></font>
/vmfs/volumes/datastore1/ovftool/tools/ovftool --acceptAllEulas --noSSLVerify --datastore=datastore1 --name=VM1 /vmfs/volumes/nfsshare1/VM_T/VM1.ova vi://root:esxi_password@127.0.0.1<font></font>
/vmfs/volumes/datastore1/ovftool/tools/ovftool --acceptAllEulas --noSSLVerify --datastore=datastore1 --name=VM2 /vmfs/volumes/nfsshare1/VM_T/VM2.ova vi://root:esxi_password@127.0.0.1<font></font>
<font></font>
#      <font></font>
<font></font>
ssh root@is "mysql -h'192.168.0.1' -D'servers' -u'user' -p'secretpassword' -e \"SELECT ... WHERE servers.serial='$SYSSN'\"" | grep -v ^$ | sed 's/NULL//g' &gt; /tmp/servers<font></font>
...<font></font>
#    <font></font>
<font></font>
echo '#!/bin/sh' &gt; /vmfs/volumes/datastore1/netconf.sh<font></font>
echo "esxcli network ip interface ipv4 set -i=vmk0 -t=static --ipv4=$IPADDR --netmask=$S_SUB || exit 1" &gt;&gt; /vmfs/volumes/datastore1/netconf.sh<font></font>
echo "esxcli network ip route ipv4 add -g=$S_GW -n=default || exit 1" &gt;&gt; /vmfs/volumes/datastore1/netconf.sh<font></font>
chmod a+x /vmfs/volumes/datastore1/netconf.sh<font></font>
<font></font>
#   guestinfo.esxihost.id,     <font></font>
<font></font>
echo "guestinfo.esxihost.id = \"$SYSSN\"" &gt;&gt; /vmfs/volumes/datastore1/VM1/VM1.vmx<font></font>
echo "guestinfo.esxihost.id = \"$SYSSN\"" &gt;&gt; /vmfs/volumes/datastore1/VM2/VM2.vmx<font></font>
...<font></font>
#    <font></font>
<font></font>
SYSNAME=$(esxcli hardware platform get | grep Product | sed 's/Product Name://' | sed 's/^\ *//')<font></font>
UUID=$(vim-cmd hostsvc/hostsummary | grep uuid | sed 's/\ //g;s/,$//' | sed 's/^uuid="//;s/"$//')<font></font>
ssh root@is "mysql -D'servers' -u'user' -p'secretpassword' -e \"UPDATE servers ... SET ... WHERE servers.serial='$SYSSN'\""<font></font>
ssh root@is "mysql -D'servers' -u'user' -p'secretpassword' -e \"INSERT INTO events ...\""<font></font>
<font></font>
#   SSH<font></font>
<font></font>
rm -rf /etc/ssh<font></font>
mv /etc/ssh.tmp /etc/ssh<font></font>
<font></font>
#    <font></font>
<font></font>
esxcli system hostname set --fqdn=esx-${G_NICK}.x5.ru<font></font>
/vmfs/volumes/datastore1/netconf.sh<font></font>
reboot<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤é˜¶æ®µï¼Œå°†å®‰è£…å’Œé…ç½®è™šæ‹Ÿæœºç›‘æ§ç¨‹åºï¼Œå¹¶å¤åˆ¶è™šæ‹Ÿæœºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨å¦‚ä½•é…ç½®è™šæ‹Ÿæœºï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬ä½œå¼Šï¼šåœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨VM1.vmxæ–‡ä»¶ä¸­è®¾ç½®guestinfo.esxihost.id =â€œ $ SYSSNâ€å‚æ•°ï¼ŒæŒ‡ç¤ºå…¶ä¸­çš„ç‰©ç†æœåŠ¡å™¨çš„åºåˆ—å·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œå¯åŠ¨åï¼Œè™šæ‹Ÿæœºï¼ˆå®‰è£…äº†vmware-toolsè½¯ä»¶åŒ…ï¼‰å¯ä»¥è®¿é—®æ­¤å‚æ•°ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">ESXI_SN=$(vmtoolsd --cmd "info-get guestinfo.esxihost.id")</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹Ÿå°±æ˜¯è¯´ï¼ŒVMå°†èƒ½å¤Ÿæ ‡è¯†è‡ªå·±ï¼ˆçŸ¥é“ç‰©ç†ä¸»æœºçš„åºåˆ—å·ï¼‰ï¼Œå‘å®‰è£…æœåŠ¡å™¨æ•°æ®åº“å‘å‡ºè¯·æ±‚å¹¶è·å–éœ€è¦é…ç½®çš„å‚æ•°ã€‚</font><font style="vertical-align: inherit;">è¿™å…¨éƒ¨åœ¨è„šæœ¬ä¸­æ‰§è¡Œï¼Œè¯¥è„šæœ¬åº”åœ¨guestos vmå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼ˆä½†ä¸€æ¬¡ï¼šRunOnceï¼‰ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡PXEåŠ è½½æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æ§åˆ¶æƒè½¬ç§»åˆ°æˆ‘ä»¬çš„è„šæœ¬ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡åºåˆ—å·è¯†åˆ«è¦å‡†å¤‡çš„æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨é€‚å½“çš„å®ç”¨ç¨‹åºé…ç½®æœåŠ¡å™¨ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨å®¢æˆ·ç«¯å°†è®¾ç½®è½¬ç§»åˆ°å®‰è£…æœåŠ¡å™¨æ•°æ®åº“ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®å„ç§ç±»å‹çš„POï¼ŒåŒ…æ‹¬éƒ¨ç½²esxiç®¡ç†ç¨‹åºå’Œé…ç½®è™šæ‹Ÿæœºï¼ˆä»¥åŠå…¨éƒ¨è‡ªåŠ¨ï¼‰ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº†è§£å¦‚ä½•ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®‰è£…çš„æœåŠ¡å™¨ä»æ•°æ®åº“æ¥æ”¶å¿…è¦çš„è®¾ç½®ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€æœ‰å‡†å¤‡è¿›åº¦éƒ½è®°å½•åœ¨æ•°æ®åº“ä¸­ï¼ˆæ—¥å¿—ï¼Œäº‹ä»¶ï¼Œé˜¶æ®µæ ‡å¿—ï¼‰ã€‚</font></font></li>
</ul></b><br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº•çº¿ï¼š</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æˆ‘è®¤ä¸ºè¯¥è§£å†³æ–¹æ¡ˆçš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå…¶çµæ´»æ€§ï¼Œç®€å•æ€§ï¼ŒåŠŸèƒ½å’Œå¤šåŠŸèƒ½æ€§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯·åœ¨è¯„è®ºä¸­å†™ä¸‹æ‚¨çš„æƒ³æ³•ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN493112/index.html">å¦‚ä½•åœ¨6ä¸ªæœˆè€Œä¸æ˜¯3å¹´å†…å¼€å§‹æ–°ä¸šåŠ¡</a></li>
<li><a href="../zh-CN493114/index.html">æ•°æ®å·¥ç¨‹å¸ˆå¦‚ä½•è§‚çœ‹æ•°æ®</a></li>
<li><a href="../zh-CN493116/index.html">â€œæ›´å¤šçš„äº’åŠ¨æ€§ï¼â€ æˆ–TeamLead Conf 2020å¦‚ä½•</a></li>
<li><a href="../zh-CN493118/index.html">å†…å­˜æ ‡è®°æ‰©å±•æ¦‚è¿°ï¼ˆArmv8.5-Aï¼‰</a></li>
<li><a href="../zh-CN493122/index.html">ä¸‡å²æ¸¸æˆåŠå…¬å®¤ï¼šæ—¥æœ¬åœ¨è«æ–¯ç§‘å¸‚ä¸­å¿ƒ</a></li>
<li><a href="../zh-CN493126/index.html">é¢å‘äº‹ä»¶çš„æ¶æ„çš„åæ¨¡å¼</a></li>
<li><a href="../zh-CN493130/index.html">ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ½Ğµ ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ±Ğ¾ÑÑ‚ÑŒÑÑ ĞºĞ¾Ñ€Ğ¾Ğ½Ğ°Ğ²Ğ¸Ñ€ÑƒÑĞ°: Ğ¼Ğ¸Ñ„Ñ‹ Ğ¸ Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ´Ğ° Ğ¾ COVID-2019</a></li>
<li><a href="../zh-CN493132/index.html">å›´ç»•æ•°æ®è¡¨</a></li>
<li><a href="../zh-CN493136/index.html">Unity Storageä¸­çš„FAST VPï¼šå¦‚ä½•å·¥ä½œ</a></li>
<li><a href="../zh-CN493138/index.html">è·Ÿæˆ‘è¯´è¯ï¼šè¯­éŸ³æœºå™¨äººä»Šå¤©èƒ½åšä»€ä¹ˆ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>