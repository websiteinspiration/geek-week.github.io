<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍✈️ 🌉 🍲 Bagaimana Smartcalls menjadi Voximplant Kit - fitur rebranding dan killer 👩🏽‍🤝‍👨🏻 🌇 👨🏿‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Untuk waktu yang lama kami mempersiapkan pembaruan untuk Smartcalls, editor visual untuk panggilan keluar, dan sekarang hal itu terjadi. Hari ini, di ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bagaimana Smartcalls menjadi Voximplant Kit - fitur rebranding dan killer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/492232/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/by/c2/ih/byc2ihl70ggcz-ftm-a4ziskyvo.png"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk waktu yang lama kami mempersiapkan pembaruan untuk Smartcalls, editor visual untuk panggilan keluar, dan sekarang hal itu terjadi. </font><font style="vertical-align: inherit;">Hari ini, di bawah potongan, kita akan berbicara tentang perubahan UI / UX dan naik di bawah kap mode demo untuk menunjukkan bagaimana kita menjinakkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JointJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang sebenarnya telah berubah?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari yang paling jelas - nama dan URL baru, yang berarti Voximplant Kit tersedia di tautan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voximplant.com/kit yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sesuai </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kami juga memodifikasi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">halaman pendaftaran</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sekarang seperti ini:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cl/jh/vc/cljhvcpw84_miyo3xcr8tsamgwo.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun konsepnya tetap sama, antarmuka produk telah berubah secara signifikan, menjadi lebih ramah pengguna. </font><font style="vertical-align: inherit;">Menu atas bermigrasi ke kiri, yang membuat navigasi blok lebih logis dan nyaman.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/9y/hf/zr9yhfrpoz4qjawojzkqgdl5kpa.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, pengelompokan dan pengurutan skrip dan rekaman audio, pencarian berdasarkan angka, serta kartu kampanye dengan informasi singkat tentang mereka, termasuk indikator baru - durasi rata-rata panggilan yang berhasil dan jumlah total yang dihabiskan, sekarang tersedia.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kg/yf/12/kgyf12bkj5jjx_cffukvfnqnk7g.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adapun integrasi: antarmuka yang ramah pengguna sampai ke pengaturan mail, dan pada tab Dialogflow, SIP, Global Variables, pencarian dan pengurutan file berdasarkan ID dan host muncul.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sr/wm/dj/srwmdjgvejupi9urypqn1iyglzk.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Secara umum, banyak yang baru dan keren! </font><font style="vertical-align: inherit;">Baca lebih lanjut tentang perubahan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di blog kami</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi yang paling penting adalah editor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mode Demo (spoiler: ini adalah fitur pembunuh utama).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7m/po/du/7mpoduas-ap0m6lbi-o12g9eyd0.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eksekusi skrip real-time dengan menyoroti blok yang terlibat, dan setelah eksekusi - hasil panggilan (Flow dan Log), yang membuat skrip debugging lebih mudah dan lebih cepat.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_i/vl/0a/_ivl0ayzlmrojpumqdf_knc99ie.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menonton video dari mode demo di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau mengujinya sendiri setelah mendaftar dengan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voximplant Kit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan bagaimana ini semua diterapkan, kami akan memberi tahu di bagian selanjutnya. </font><font style="vertical-align: inherit;">Fitur baru editor:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">undo / redo (1 pada gambar di bawah);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tombol pintas (2);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menu pop-up di mana Anda dapat menyelaraskan blok dan tautan di antara mereka dengan satu klik, mengubah skala, bekerja dengan miniMap, memperluas skrip ke layar penuh, dan juga membagikannya (salin atau simpan sebagai png) (3);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menu konteks klik kanan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menyalin blok - tidak hanya dalam skrip yang sama, tetapi juga antara skrip yang berbeda dan bahkan akun yang berbeda (!);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengunci / membuka kunci blok - blok yang dikunci dapat dipindahkan, tetapi TIDAK mungkin untuk mengedit untuk menghindari perubahan yang tidak diinginkan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perubahan warna - secara visual Anda dapat memilih beberapa blok "terkait";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cari berdasarkan nama dan isi blok yang digunakan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blok “menu interaktif” - kemampuan untuk menukar port (opsi jawaban) di tempat hanya dengan menyeret dan menjatuhkan.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wp/fw/u4/wpfwu4ddvz--h5gd0yqm9ipcfzs.png" alt="gambar"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengungkapkan kartu</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saatnya untuk mencari tahu bagaimana animasi blok diterapkan dalam kode.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/qo/cz/zoqoczrubc5rvxijm-cshjukoq0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Editor memanggil metode HTTP API kami - StartScenarios - untuk menjalankan skrip cloud. </font><font style="vertical-align: inherit;">Awan Voximplant memulai skrip dan memberikannya ke editor media_access_url. </font><font style="vertical-align: inherit;">Mulai saat ini, editor menarik media_access_url setiap detik, menerima informasi tentang bagaimana script "berjalan" melalui blok-blok sebagai respons - berdasarkan data ini, editor menyoroti blok yang diperlukan dan menjiwai koneksi di antara mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sejarah adalah objek JSON dengan bidang-bidang berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cap waktu;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">idSource - blok awal;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">idTarget - blok terakhir;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">port - port (mungkin ada beberapa output dari 1 blok).</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/qt/ht/wlqthtjgn0l2bnwfoqophwregpy.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan bantuan variabel ubahsuaian dan layanan ini, front-end memahami blok mana yang dilaluinya selama pengujian. </font><font style="vertical-align: inherit;">Bagaimana dia mengerti ini? </font><font style="vertical-align: inherit;">Ketika konstruksi visual terjadi (blok baru ditambahkan), segera diberikan id, yang kemudian digunakan dalam sejarah sebagai idSource / idTarget. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengimplementasikan fungsi ini, kami menggunakan pustaka JointJS, tetapi ada beberapa kode yang ditulis sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita mulai dengan metode selectBlock () utama, ia bekerja sebagai berikut: kita pergi melalui array sejarah pergerakan (idSource, idTarget) dan segera setelah kita menemukan titik awal dan akhir, cari koneksi di antara mereka:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> link = <span class="hljs-keyword">this</span>.editor.getTestLink(sourceCell, portId);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika ada koneksi di antara mereka, maka kami menghidupkan bola yang berjalan di sepanjang jalur komunikasi:</font></font><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (link) <span class="hljs-keyword">this</span>.setLinkAnimation(link);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode selectBlock () dipanggil setelah setiap pembaruan this.testHistory. </font><font style="vertical-align: inherit;">Karena beberapa blok yang dilewati dapat tiba di this.testHistory sekaligus, kami memanggil selectBlock sekali setiap 700 ms (ini adalah perkiraan waktu yang dihabiskan untuk menghidupkan gerakan dari blok ke blok):</font></font><br>
<br>
<pre><code class="javascript hljs">setTimeout(<span class="hljs-keyword">this</span>.selectBlock, <span class="hljs-number">700</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua kode untuk metode ini adalah sebagai berikut. </font><font style="vertical-align: inherit;">Perhatikan metode selectTestBlock dan getTestLink, baris 7 dan 10 - sekarang kita akan membicarakannya secara terpisah:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/5ffed5b2bbb82d4a3eff6df3f153a1ed.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist101791201" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-selectblock-js" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-selectblock-js-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-selectblock-js-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectBlock </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font></span> <span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{</font></font></span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-selectblock-js-LC2" class="blob-code blob-code-inner js-file-line">     <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font></span> <span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></span><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">historyIndex </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></span><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">testHistory </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></span><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">length </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span> <span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{</font></font></span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-selectblock-js-LC3" class="blob-code blob-code-inner js-file-line">       <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const </font></font></span> <span class="pl-s1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ini </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></span><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sejarahIndex </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-selectblock-js-LC4" class="blob-code blob-code-inner js-file-line">       <span class="pl-k">const</span> <span class="pl-s1">targetCellId</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">testHistory</span><span class="pl-kos">[</span><span class="pl-s1">i</span><span class="pl-kos">]</span><span class="pl-kos">.</span><span class="pl-c1">idTarget</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-selectblock-js-LC5" class="blob-code blob-code-inner js-file-line">       <span class="pl-k">const</span> <span class="pl-s1">sourceCellId</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">testHistory</span><span class="pl-kos">[</span><span class="pl-s1">i</span><span class="pl-kos">]</span><span class="pl-kos">.</span><span class="pl-c1">idSource</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-selectblock-js-LC6" class="blob-code blob-code-inner js-file-line">       <span class="pl-k">const</span> <span class="pl-s1">portId</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">testHistory</span><span class="pl-kos">[</span><span class="pl-s1">i</span><span class="pl-kos">]</span><span class="pl-kos">.</span><span class="pl-c1">port</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-selectblock-js-LC7" class="blob-code blob-code-inner js-file-line">       <span class="pl-k">const</span> <span class="pl-s1">targetCell</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">editor</span><span class="pl-kos">.</span><span class="pl-en">selectTestBlock</span><span class="pl-kos">(</span><span class="pl-s1">targetCellId</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-selectblock-js-LC8" class="blob-code blob-code-inner js-file-line">       <span class="pl-k">const</span> <span class="pl-s1">sourceCell</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">editor</span><span class="pl-kos">.</span><span class="pl-en">getCell</span><span class="pl-kos">(</span><span class="pl-s1">sourceCellId</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-selectblock-js-LC9" class="blob-code blob-code-inner js-file-line">       <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">sourceCell</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-s1">targetCell</span><span class="pl-kos">)</span> <span class="pl-kos">{</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-selectblock-js-LC10" class="blob-code blob-code-inner js-file-line">         <span class="pl-k">const</span> <span class="pl-s1">link</span> <span class="pl-c1">=</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">editor</span><span class="pl-kos">.</span><span class="pl-en">getTestLink</span><span class="pl-kos">(</span><span class="pl-s1">sourceCell</span><span class="pl-kos">,</span> <span class="pl-s1">portId</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-selectblock-js-LC11" class="blob-code blob-code-inner js-file-line">         <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">link</span><span class="pl-kos">)</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">setLinkAnimation</span><span class="pl-kos">(</span><span class="pl-s1">link</span><span class="pl-kos">)</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-selectblock-js-LC12" class="blob-code blob-code-inner js-file-line">       <span class="pl-kos">}</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-selectblock-js-LC13" class="blob-code blob-code-inner js-file-line">       <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-c1">historyIndex</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span><span class="pl-kos">;</span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-selectblock-js-LC14" class="blob-code blob-code-inner js-file-line">       <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setTimeout </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></span><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectBlock </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">700 </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-selectblock-js-LC15" class="blob-code blob-code-inner js-file-line">     <span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></span></td>
      </tr>
      <tr>
        <td id="file-selectblock-js-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-selectblock-js-LC16" class="blob-code blob-code-inner js-file-line">   <span class="pl-kos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lihat mentah</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectBlock.js di-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        host dengan ❤ oleh </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat koneksi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode getTestLink () membantu untuk mendapatkan koneksi antara blok - ini didasarkan pada getConnectedLinks (), metode JointJS bawaan yang mengambil input blok dan mengembalikan array tautan. </font><font style="vertical-align: inherit;">Dalam implementasi kami, kami mencari di array yang dihasilkan untuk tautan dengan port, di mana properti sumber memiliki nilai portId:</font></font><br>
<br>
<pre><code class="javascript hljs">link = <span class="hljs-keyword">this</span>.graph.getConnectedLinks(cell, {<span class="hljs-attr">outbound</span> : <span class="hljs-literal">true</span>}).find(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
     <span class="hljs-keyword">return</span> item.get(<span class="hljs-string">'source'</span>).port === portId;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lalu, jika ada tautan, maka sorot:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">return</span> link ? (link.toFront() &amp;&amp; link) : <span class="hljs-literal">null</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode Metode:</font></font><br>
<br>
<pre><code class="javascript hljs">getTestLink(sourceCell: Cell, <span class="hljs-attr">portId</span>: string): Link {
  <span class="hljs-keyword">let</span> link = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">if</span> (sourceCell &amp;&amp; sourceCell.id) {
    <span class="hljs-keyword">let</span> cell = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (sourceCell.type === <span class="hljs-string">'ScenarioStart'</span> || sourceCell.type === <span class="hljs-string">'IncomingStart'</span>) {<font></font>
      cell = <span class="hljs-keyword">this</span>.getStartCell()<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      cell = <span class="hljs-keyword">this</span>.graph.getCell(sourceCell.id);<font></font>
    }<font></font>
    link = <span class="hljs-keyword">this</span>.graph.getConnectedLinks(cell, {<span class="hljs-attr">outbound</span> : <span class="hljs-literal">true</span>}).find(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> item.get(<span class="hljs-string">'source'</span>).port === portId;<font></font>
    });<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> link ? (link.toFront() &amp;&amp; link) : <span class="hljs-literal">null</span>;<font></font>
}<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Animasi bola yang berjalan diimplementasikan sepenuhnya melalui JointJS ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lihat demo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami pindah ke blok saat ini</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memanggil metode selectTestBlock () bila perlu untuk memilih blok terakhir dan memindahkan kanvas ke sana. </font><font style="vertical-align: inherit;">Di sini kita mendapatkan koordinat tengah blok:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> center = cell.getBBox().center();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian panggil setTestCell () untuk mewarnai blok:</font></font><br>
<br>
<pre><code class="javascript hljs">editor.tester.setTestCell(cell);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, kami memperbesar ke pusatnya menggunakan fungsi zoomToCell () yang ditulis sendiri (ini yang paling menarik, tetapi tentangnya di bagian akhir):</font></font><br>
<br>
<pre><code class="javascript hljs">editor.paperController.zoomToCell(center, <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode Metode:</font></font><br>
<br>
<pre><code class="javascript hljs">selectTestBlock(id: string): Cell {
 <span class="hljs-keyword">const</span> cell = (id === <span class="hljs-string">'ScenarioStart'</span>) ? editor.tester.getStartCell() : editor.graph.getCell(id);
 <span class="hljs-keyword">if</span> (cell) {
   <span class="hljs-keyword">const</span> center = cell.getBBox().center();<font></font>
   editor.tester.setTestCell(cell);<font></font>
   editor.paperController.zoomToCell(center, <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<font></font>
 }<font></font>
 <span class="hljs-keyword">return</span> cell;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode pewarnaan: temukan elemen SVG dari blok kami dan tambahkan kelas CSS .is-diuji untuk membuat warna blok:</font></font><br>
<br>
<pre><code class="javascript hljs">setTestCell(cell: Cell): <span class="hljs-keyword">void</span> {
 <span class="hljs-keyword">const</span> view = cell.findView(<span class="hljs-keyword">this</span>.paper);
 <span class="hljs-keyword">if</span> (view) view.el.classList.add(<span class="hljs-string">'is-tested'</span>);<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zoom halus</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akhirnya, zoomToCell ()! JointJS memiliki metode bawaan untuk memindahkan kanvas di sepanjang sumbu X dan Y, pada awalnya mereka ingin mengambilnya. Namun, metode ini menggunakan transformasi sebagai atribut dari tag SVG, itu tidak mendukung animasi yang lancar di browser Firefox + dan hanya menggunakan CPU. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membuat peretasan kecil - kami menulis fungsi kami zoomToCell (), yang pada dasarnya melakukan hal yang sama, tetapi melakukan transformasi sebagai inline CSS, ini memungkinkan rendering menggunakan GPU (karena WebGL terhubung ke proses). Dengan demikian, masalah kompatibilitas lintas-browser terpecahkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi kami tidak hanya memindahkan kanvas dalam XY, tetapi juga memungkinkan kami untuk secara bersamaan skala (zoom) melalui penggunaan matriks transformasi.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Properti akan berubah dari .animate-viewport kelas memberitahu browser bahwa elemen akan diubah dan optimasi harus diterapkan, termasuk penggunaan GPU, dan properti transisi mengatur kelancaran memindahkan kanvas ke blok:</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-selector-class">.animate-viewport</span> {
 <span class="hljs-attribute">will-change</span>: transform;
 <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.5s</span> ease-in-out;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua kode metode kami di bawah ini:</font></font><br>
<br>
<pre><code class="javascript hljs">public zoomToCell(center: g.Point, <span class="hljs-attr">zoom</span>: number, <span class="hljs-attr">offset</span>: boolean = <span class="hljs-literal">true</span>): <span class="hljs-keyword">void</span> {
   <span class="hljs-keyword">this</span>.updateGridSize();
   <span class="hljs-keyword">const</span> currentMatrix = <span class="hljs-keyword">this</span>.paper.layers.getAttribute(<span class="hljs-string">'transform'</span>);
   <span class="hljs-comment">//   svg-,        center</span>
   <span class="hljs-comment">//   ,     style</span>
   <span class="hljs-keyword">const</span> { a, b, c, d, e, f } = <span class="hljs-keyword">this</span>.zoomMatrix(zoom, center, offset);
   <span class="hljs-comment">//  FireFox    ,       </span>
   <span class="hljs-keyword">this</span>.paper.layers.style.transform = currentMatrix;
   <span class="hljs-comment">//    FF  ,     ,    </span>
   setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
     <span class="hljs-comment">//  CSS- .animate-viewport,    - transition;</span>
     <span class="hljs-comment">//    style      - transition</span>
     <span class="hljs-keyword">this</span>.paper.layers.classList.add(<span class="hljs-string">'animate-viewport'</span>);
     <span class="hljs-keyword">this</span>.paper.layers.style.transform = <span class="hljs-string">`matrix(<span class="hljs-subst">${ a }</span>, <span class="hljs-subst">${ b }</span>, <span class="hljs-subst">${ c }</span>, <span class="hljs-subst">${ d }</span>, <span class="hljs-subst">${ e }</span>, <span class="hljs-subst">${ f }</span>)`</span>;
     <span class="hljs-keyword">const</span> duration = <span class="hljs-built_in">parseFloat</span>(getComputedStyle(<span class="hljs-keyword">this</span>.paper.layers)[<span class="hljs-string">'transitionDuration'</span>]) * <span class="hljs-number">1000</span>;
     <span class="hljs-comment">//        style;</span>
     <span class="hljs-comment">//      joint</span>
     setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
       <span class="hljs-keyword">this</span>.paper.layers.classList.remove(<span class="hljs-string">'animate-viewport'</span>);
       <span class="hljs-keyword">this</span>.paper.layers.style.transform = <span class="hljs-literal">null</span>;
       <span class="hljs-keyword">this</span>.paper.matrix(newMatrix);
       <span class="hljs-keyword">this</span>.paper.trigger(<span class="hljs-string">'paper:zoom'</span>);
       <span class="hljs-keyword">this</span>.updateGridSize();
       <span class="hljs-keyword">this</span>.paper.trigger(<span class="hljs-string">'paper:update'</span>);<font></font>
     }, duration);<font></font>
   }, <span class="hljs-number">100</span>);<font></font>
 }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata, kadang-kadang bahkan yang paling canggih pun harus diselesaikan dengan file :) Kami harap Anda menikmati menggali bagian dalam paus (tidak peduli seberapa menyeramkan kedengarannya). </font><font style="vertical-align: inherit;">Semoga Anda berhasil dalam pengembangan dengan Voximplant Kit dan banyak lagi!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id492218/index.html">Aturan Desain Ikon untuk Diingat</a></li>
<li><a href="../id492220/index.html">5 rahasia panda yang tidak diketahui</a></li>
<li><a href="../id492222/index.html">CTFZone Kualifikasi Penulisan 2019: Chicken</a></li>
<li><a href="../id492226/index.html">Perbandingan Harga pada Managed Kubernetes (2020)</a></li>
<li><a href="../id492228/index.html">Seperti Sports.ru menulis editor WYSIWYG mereka</a></li>
<li><a href="../id492234/index.html">Penelitian: mengapa orang siap menerima lebih sedikit dalam proyek sosial</a></li>
<li><a href="../id492242/index.html">M5Stack dan kontaknya</a></li>
<li><a href="../id492244/index.html">Penghapusan untuk periode coronavirus: rumah "penangkapan" atau waktu kesempatan?</a></li>
<li><a href="../id492248/index.html">Debouncing dengan React Hooks</a></li>
<li><a href="../id492254/index.html">Manajemen Proyek, Kategori 30+</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>