<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëéüèΩ ‚úã ‚ûó GUI universal ~ = fim da mis√©ria üç≠ üà≤ üéñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para mim, a GUI ideal √© um aplicativo que n√£o requer programa√ß√£o, design, manuten√ß√£o e √© capaz de funcionar igualmente com qualquer idioma e em qualqu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>GUI universal ~ = fim da mis√©ria</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501678/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para mim, a GUI ideal √© um aplicativo que n√£o requer programa√ß√£o, design, manuten√ß√£o e √© capaz de funcionar igualmente com qualquer idioma e em qualquer plataforma sem ajustes. </font><font style="vertical-align: inherit;">√â poss√≠vel em nossa vida tentarmos descobrir isso.</font></font><br>
<br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â f√°cil aprender algo individualmente com Vue / React, JavaFX, Python PyQt, ... mas obter dados e interagir com o zool√≥gico de software de uma maneira simples e elegante, sem pensar no sistema operacional do usu√°rio / navegadores / plataformas, √© uma tarefa n√£o resolvida para essas ferramentas. N√£o quero entrar na nova estrutura (at√© a antiga, esquecida), alterando a linguagem de programa√ß√£o, varrendo o ancinho e entupindo minha cabe√ßa com lixo. Quero programar exatamente minha tarefa, sem me distrair com a luta com todos os tipos de estruturas de GUI. E eu encontrei uma solu√ß√£o para mim. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como um protocolo de troca, usaremos o Json como o formato principal em termos de popularidade / compreensibilidade / legibilidade / suporte para todas as linguagens de programa√ß√£o em um grau ou outro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servidor envia dados Json, segundo os quais a nossa GUI do aplicativo deve criar uma imagem que satisfa√ßa as especifica√ß√µes de uma bela GUI. </font><font style="vertical-align: inherit;">Hoje, o Google com seu design de materiais √© o padr√£o, ent√£o aceite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os requisitos para uma GUI moderna incluem a presen√ßa de elementos padr√£o, como bot√µes, campos de entrada, tabelas, etc. Vamos estimar como usar o conjunto m√≠nimo de conven√ß√µes para informar √† GUI que precisamos de certos elementos na tela. </font><font style="vertical-align: inherit;">Aqui est√£o os principais:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bot√£o sem estado {'name': 'Push me'}. </font><font style="vertical-align: inherit;">Se o elemento contiver apenas um nome, ser√° um bot√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O campo de entrada √© {'name': 'Edit me', 'value': ''} porque o valor do tipo √© uma sequ√™ncia.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O bot√£o do comutador {'name': 'My state', 'value': false} porque o tipo false √© booleano.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Selecione na lista {'name': 'Alternar algo', valor: 'choice1', options = ['choice1', 'choice2', 'choice3']}</font></font></li>
<li>  {‚Äòname‚Äô:‚ÄôImage, ‚Äòurl'‚Äô: ‚Äô..‚Äô, ‚Äòwidth‚Äô: .., ‚Äòheight‚Äô:‚Ä¶ }</li>
<li>  {‚Äòname‚Äô:‚ÄôMy table‚Äô, 'headers'=[‚ÄòName‚Äô, ‚ÄòSynonym‚Äô], rows = [<br>
 [‚Äòyoung‚Äô, ‚Äòyouthful‚Äô],<br>
 [‚Äòsmall‚Äô, ‚Äò meager‚Äô],<br>
 ...]<br>
}<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para personaliza√ß√£o, voc√™ pode definir o tipo de elemento como {type: 'ButtonSwitcher'} se o tipo selecionado automaticamente pelo JSON n√£o for adequado para voc√™. </font><font style="vertical-align: inherit;">Isso √© poss√≠vel quando o mesmo JSON pode ser exibido de mais de uma maneira. </font><font style="vertical-align: inherit;">Por exemplo, 'Selecionar de uma lista' pode ser representado como um campo de entrada com uma lista suspensa ou tamb√©m pode ser um conjunto horizontal de bot√µes, um dos quais est√° ativo e corresponde ao valor atual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com um pequeno n√∫mero de op√ß√µes, faz sentido usar automaticamente a op√ß√£o de bot√£o, com um n√∫mero grande (mais de 3) - um campo de sele√ß√£o de entrada. </font><font style="vertical-align: inherit;">Nossa pr√≥pria GUI escolhe a melhor maneira de renderizar, mas se voc√™ realmente precisar dela - digite: ... para ajudar. </font><font style="vertical-align: inherit;">Normalmente, o tipo n√£o √© necess√°rio e o designer do carro deve lidar sozinho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos completar a imagem em detalhes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se o nome n√£o deve ser exibido na tela, ele deve come√ßar com _;</font></font></li>
<li>   -  ,  ‚Äòicon‚Äô: ‚Äò   Material Design ‚Äô; push -     {‚Äòname‚Äô: ‚Äò_Check‚Äô, ‚Äòicon‚Äô: ‚Äòcheck‚Äô}</li>
<li>     , Viewers,    ,   ‚Äòcolors‚Äô, ‚Äòparams‚Äô,‚Ä¶           //  .   ‚Äî   ,     . </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Para o agrupamento l√≥gico de elementos, introduzimos o conceito de um bloco que agrupa elementos logicamente relacionados em um bloco visual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
{'name': 'Block 1', 'elems': [{'name': '_Check', 'icon': 'check'}, ...]} </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Dentro do bloco, todos os elementos devem ter nomes exclusivos, porque s√£o id . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, os blocos s√£o constru√≠dos horizontalmente, se eles n√£o podem caber em tudo na tela (eles iniciaram a GUI do aplicativo em um celular, por exemplo), o designer de autom√≥veis os oculta, mas adiciona √≠cones √† barra de ferramentas para abri-los com um toque. Isso oferece a op√ß√£o de trabalhar com uma GUI complexa, mesmo em telas pequenas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O n√≠vel superior da descri√ß√£o √© Tela. Parece que {'name': 'Screan', bloqueia: [..], menu: [{'name': 'Screen', 'icon': ..,}, ..], 'toolbar': [JSON set - elementos (bot√µes, campos, o que for)]}</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione detalhes de implementa√ß√£o para a uniGUI condicional que suporta nosso protocolo JSON. √â um processo separado que se comunica com o servidor de dados Websocket e fornece a exibi√ß√£o de seus dados com relat√≥rios subsequentes de todas as atualiza√ß√µes desses dados importantes para o servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao se conectar ao servidor, o uniGUI espera receber a tela. Depois de receb√™-lo, ele projeta e desenha as informa√ß√µes resultantes de uma maneira ideal para a tela atual do usu√°rio e aguarda uma rea√ß√£o do usu√°rio e do servidor. A partir da imagem de dados constru√≠da, o servidor recebe um fluxo de mensagens JSON que descrevem completamente o que o usu√°rio fez. Eles t√™m a forma ['Block', 'Elem', 'tipo de a√ß√£o', 'value'], onde 'Block' e 'Elem' s√£o os nomes do bloco e do elemento, value √© o valor do evento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servidor pode aceitar a altera√ß√£o ou revert√™-la enviando uma janela de informa√ß√µes sobre a discrep√¢ncia. Ele pode gerar uma caixa de di√°logo, descrita como um bloco, e possui adicional. o par√¢metro 'buttons', que descreve os bot√µes na caixa de di√°logo. O cliente exibe instantaneamente os dados atuais do servidor e suas altera√ß√µes. Apenas objetos alterados pelo servidor s√£o enviados.Para receber eventos e garantir seu processamento, criaremos uma camada Websocket (framework), que converter√° automaticamente as mensagens em chamadas para manipuladores que est√£o associados aos nossos dados (objetos).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toda a m√°gica do servidor se resume ao fato de que nossos dados exibidos devem ser vinculados √† camada de forma que, sem qualquer codifica√ß√£o, garanta sua tradu√ß√£o autom√°tica em JSON e chame notifica√ß√µes de retorno da atividade do usu√°rio. Como depende dos recursos de um idioma espec√≠fico, para cada idioma a camada pode ter op√ß√µes diferentes, tanto arquitetural quanto especificamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, em um caso, a camada possui uma pasta de capturas de tela, cada um dos m√≥dulos nos quais tem uma descri√ß√£o de uma tela no Python. Na inicializa√ß√£o, a camada l√™ as telas, fornece ao usu√°rio uma prioridade global = 0. Todos os dados s√£o transmitidos automaticamente usando o jsonpickle. Elementos complexos t√™m sua pr√≥pria "intelig√™ncia", removendo o cuidado dos detalhes do programador. Por exemplo, uma tabela recebe um conjunto de linhas, nas quais, por padr√£o, a linha de identifica√ß√£o pode estar ausente quando o n√∫mero de dados na linha == o n√∫mero de elementos nos cabe√ßalhos. Nesse caso, quando o usu√°rio seleciona uma linha ou edita seu conte√∫do, o servidor envia a identifica√ß√£o para o √≠ndice na linha como id ee. Se o n√∫mero de dados na linha for um a mais do que nos cabe√ßalhos, o √∫ltimo elemento nas linhas ser√° interpretado como id e ser√° enviado para o servidor. Essa automa√ß√£o simplifica muito a vida em que voc√™ n√£o precisa de detalhes espec√≠ficos,mas se voc√™ precisar de repente, ele estar√° dispon√≠vel da maneira menos trabalhosa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tarefa de fornecer tradu√ß√£o autom√°tica em JSON, seguindo um formato que ocupa uma ou duas p√°ginas, √© completamente solucion√°vel em qualquer idioma (espero que sim). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para n√£o discutir a aplicabilidade dessa abordagem para aplicativos complexos, abaixo est√£o as capturas de tela como as descritas pela uniGUI, escritas em flutter. A escolha recaiu sobre ele em v√°rias plataformas e a falta de camadas adicionais, como JS / chrome. A vibra√ß√£o negativa pode ser um suporte de √°rea de trabalho repugnante e baixa qualidade do c√≥digo da camada superior (elementos da GUI), uma arquitetura desagrad√°vel para atualiza√ß√µes de pontos e gerenciamento de elementos como dados, que, no entanto, s√£o tratados. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4u/9h/2z/4u9h2zlhr0bzbvhbugz5obt8y6a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A GUI do aplicativo de fluxo de mensagens -&gt; servidor √© mais ou menos assim: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [Gloss√°rio, Termos, =, 658] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Detalhes, Links, @, @Folliculitis] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Detalhes, Links, @, @Adolescent]</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [barra de ferramentas, _Back, =, _Back] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [barra de ferramentas, _Forward, =, _Forward] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [barra de ferramentas, _Back, =, _Back] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Detalhes, _Status, =, Virtual] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Detalhes, _Status </font><font style="vertical-align: inherit;">, =, Virtual] </font><font style="vertical-align: inherit;">flutter: [_Detalhes, _Status , =, Stable] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Detalhes, Links, @,</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inflama√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, _Status, =, Virtual] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, _Status, =, Stable] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [barra de ferramentas, _Back, =, _Back] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
flutter: [_Details, Links, @, @Folliculitis] </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Haver√° desacelere essa GUI ao aguardar eventos do servidor. N√£o, porque a GUI funciona no modo de notifica√ß√£o do servidor, reagindo a todas as a√ß√µes do usu√°rio como uma GUI local normal. Por padr√£o, ele considera o sil√™ncio do servidor nas a√ß√µes do usu√°rio como OK. Ao mudar de tela, fica claro que sua descri√ß√£o deve vir. Pode haver um atraso em compara√ß√£o com a GUI incorporada do aplicativo t√≠pico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total. </font><font style="vertical-align: inherit;">Hoje, √© poss√≠vel, nas ferramentas atuais, criar uma GUI que remova 90% do c√≥digo de servi√ßo padr√£o padr√£o e n√£o se preocupe onde e como ele funcionar√°. </font><font style="vertical-align: inherit;">Pelo menos para aplicativos de neg√≥cios / ci√™ncias. </font><font style="vertical-align: inherit;">Este artigo √© uma prova de conceito de que a cria√ß√£o de um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navegador de aplicativos condicional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">√©</font></a><font style="vertical-align: inherit;"> apenas poss√≠vel, mas necess√°ria.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501668/index.html">Fornecer comunica√ß√µes de objetos e ferramentas em movimento para aumentar sua confiabilidade</a></li>
<li><a href="../pt501670/index.html">Quanto custa a vida ou US $ 2,1 milh√µes por inje√ß√£o: uma maravilhosa terapia gen√©tica</a></li>
<li><a href="../pt501672/index.html">Como os mods para jogos Unity s√£o desenvolvidos. Parte 2: escrevendo seu mod</a></li>
<li><a href="../pt501674/index.html">Angular: torne o c√≥digo leg√≠vel para o back-end. B√¥nus: troca de APIs e cache de consultas</a></li>
<li><a href="../pt501676/index.html">Compare operadores c # ?: vs if-else vs switch</a></li>
<li><a href="../pt501680/index.html">Algumas dicas sobre como acelerar a montagem de imagens do Docker. Por exemplo, at√© 30 segundos</a></li>
<li><a href="../pt501684/index.html">Claustro -> f√°cil gerenciamento de cluster OTP</a></li>
<li><a href="../pt501688/index.html">Desempenho adicional de SSR com o servidor Nuxt fullstack (parte 2)</a></li>
<li><a href="../pt501690/index.html">Quem √© um engenheiro de DevOps, o que ele faz, quanto ganha e como se tornar um</a></li>
<li><a href="../pt501696/index.html">Vis√£o geral do Postgresql do painel para postgres_exporter (Prometheus)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>