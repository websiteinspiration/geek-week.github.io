<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👧🏿 👨🏻‍🔧 👨‍🎓 SameSite = Lax par défaut - déjà dans Chrome 80 stable (mais pas encore pour tout le monde) 🧒🏿 🍐 ㊗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'autre jour, une collègue attentive (merci, Lena) a signalé un bug étrange - le serveur a normalement installé un cookie dans le navigateur, mais il ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>SameSite = Lax par défaut - déjà dans Chrome 80 stable (mais pas encore pour tout le monde)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492830/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'autre jour, une collègue attentive (merci, Lena) a signalé un bug étrange - le serveur a normalement installé un cookie dans le navigateur, mais il n'est pas revenu. Tout a fonctionné la veille, mais maintenant le cookie a été défini, mais après quelques secondes, il a disparu comme par magie (bien qu'il devrait durer 24 heures). Il n'a été reproduit que par quelques personnes dans l'équipe et uniquement dans le nouveau Chrome 80, mais le reste dans Chrome avait exactement la même version, tout était en ordre. Dans d'autres navigateurs, tout fonctionnait comme une horloge. Mystique. Ils ont commencé à le comprendre, et après un certain temps, la console Chrome a remarqué un avertissement pour l'en-tête de réponse définissant le cookie:</font></font><br>
<blockquote><code>A cookie associated with a cross-site resource at _your_domain_ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`.</code></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils ont commencé à étudier ce que c'était, et progressivement, il est devenu clair comment l'erreur est survenue et pourquoi tout le monde ne l'a pas montrée. </font><font style="vertical-align: inherit;">Étant donné que notre service doit traiter les demandes de différents domaines, ce </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'est que notre cas. </font><font style="vertical-align: inherit;">Ils ont ajouté </font></font><code>SameSite=None; Secure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et le problème a été résolu pour nous.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi donc?</font></font></h3><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initialement, selon la norme HTTP, le navigateur a envoyé des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cookies</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou simplement des cookies) pour toute demande au domaine correspondant. Cela a ouvert des opportunités pour une attaque CSRF, c'est-à-dire, a permis à des personnes sans scrupules, dans un certain ensemble de circonstances, d'accéder à certaines ressources sous prétexte de bonne foi sans méfiance, simplement en utilisant leurs cookies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En 2016, un attribut a été introduit </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui vous permet de contrôler si le navigateur enverra des cookies si la page envoie une demande à un autre domaine. Les développeurs ont la possibilité de bloquer le transfert de leurs cookies, si la demande est exécutée depuis un site tiers. Pour cela, l'attribut </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devait être explicitement défini sur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strict.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(les cookies sont transmis uniquement sur les demandes et les transitions du domaine auquel ils appartiennent), ou </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lax</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (les cookies sont transmis lors de la transition vers le site à partir d'autres sites par un lien direct, mais ne sont pas transmis sur d'autres demandes de leur part, par exemple, lorsqu'une demande AJAX ou le téléchargement d'images) ) L'absence </font></font><code>SameSite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">était équivalente </font></font><code>SameSite=None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, c'est-à-dire que par défaut, les cookies étaient toujours transmis sur toute demande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mai 2019, les développeurs de Google Chrome ont annoncé qu'ils modifieraient progressivement ce comportement et interpréteraient l'absence de SameSite comme </font></font><code>SameSite=Lax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(plus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) C'est-à-dire - par défaut, le navigateur bloquera la transmission des cookies pour les demandes de la page en cours à toute autre ressource, à l'exception des clics directs sur le lien. Les développeurs de Firefox et Edge ont annoncé qu'au fil du temps, ils mettront également en œuvre ce changement dans leurs navigateurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les utilisateurs, ce comportement du navigateur est plus sécurisé. Les développeurs de sites et de services Web doivent garder à l'esprit que s'ils ont toujours besoin de recevoir leurs cookies lorsqu'ils demandent à partir d'autres sites, ils devront définir explicitement leurs attributs de cookies </font></font><code>SameSite=None, Secure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code>Secure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- car une telle demande, en outre, ne devrait parvenir au serveur que via un canal sécurisé). )</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que l'innovation modifie la norme actuelle et que tous les sites ne pourront pas s'adapter rapidement, la transition vers un nouveau comportement se fait progressivement. </font><font style="vertical-align: inherit;">Initialement, il était activé pour un nombre limité d'utilisateurs de la version bêta de Chrome, et maintenant leur nombre augmente progressivement. </font><font style="vertical-align: inherit;">Les informations réelles sont disponibles </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La dernière entrée sur le lien:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dernière mise à jour le 9 mars 2020. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons commencé à appliquer le nouveau comportement pour Chrome 80 stable, mais pas pour 100% des utilisateurs. </font><font style="vertical-align: inherit;">Le déploiement contrôlé concerne une population initiale limitée,</font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autrement dit, la période de test bêta est en retard, et les développeurs Chrome ont commencé à inclure lentement de nouvelles fonctionnalités parmi les utilisateurs ordinaires. Ce qui est bon en principe, car c'est vraiment plus sûr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez restaurer l'ancien comportement via les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paramètres</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : dans la barre d'adresse de Chrome, entrez </font></font><code>chrome://flags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, accédez à la page, recherchez l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">élément SameSite être les cookies par défaut</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et réglez-le sur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactivé</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mais cela convient mieux aux tests qu'aux utilisateurs ordinaires. De même, si votre Chrome 80 exécute toujours l'ancien comportement, vous pouvez forcer la nouvelle fonctionnalité en définissant le même paramètre sur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Activé</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, si votre site doit recevoir des cookies lors de la demande de différents domaines - soyez prêt pour les changements à venir (et celui qui est prêt est bon pour cela). </font><font style="vertical-align: inherit;">Bon à tous! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouté par:</font></font></b><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xdenser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a indiqué dans les commentaires que certaines anciennes versions de navigateurs ne prennent pas en charge </font></font><code>SameSite=None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, n'acceptent pas ces cookies du tout ou les traitent de manière non standard. </font><font style="vertical-align: inherit;">Parmi eux, des navigateurs pour ordinateurs de bureau et appareils mobiles. </font><font style="vertical-align: inherit;">La page </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.chromium.org/updates/same-site/incompatible-clients</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fournit une liste de navigateurs et une solution possible au problème (en pseudo-code, mais assez détaillé). </font><font style="vertical-align: inherit;">Les auteurs suggèrent de détecter les versions problématiques des navigateurs par titre </font></font><code>useragent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et de ne pas définir du tout leur attribut de cookies </font></font><code>SameSite=None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouté 2:</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cadre de la situation avec COVID-19, à partir du 3 avril 2020, Google suspend temporairement la mise en œuvre des modifications décrites dans le traitement de SameSite, afin d'assurer le bon fonctionnement des services Internet. </font><font style="vertical-align: inherit;">Sur les appareils sur lesquels des modifications sont déjà appliquées, elles seront annulées. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(c) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog.chromium.org/2020/04/temporarily-rolling-back-samesite.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sources: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.dev/samesite-cookies-explained </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.chromium.org/updates/same-site </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.chromestatus.com/ feature / 5088147346030592 </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.chromium.org/updates/same-site/incompatible-clients </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog.chromium.org/2020/04/temporially-rolling-back-samesite.html</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492812/index.html">Essayer d'exécuter des réseaux GAN dans OpenVINO</a></li>
<li><a href="../fr492816/index.html">Trucs et astuces IntelliJ IDEA: 4. Synchronisez et partagez les paramètres</a></li>
<li><a href="../fr492820/index.html">.Net Core Api: obtenir des données dans une demande de différentes sources</a></li>
<li><a href="../fr492822/index.html">Développeurs CSS - pourquoi le monde en a-t-il besoin?</a></li>
<li><a href="../fr492828/index.html">Comment survivre dans un monde enfermé</a></li>
<li><a href="../fr492832/index.html">Passerelle IoT pour les protocoles industriels basés sur i.MX6 et Linux</a></li>
<li><a href="../fr492834/index.html">Qu'est-ce qui est commun entre LVM et matriochka?</a></li>
<li><a href="../fr492838/index.html">Connectez M5Stack au téléviseur</a></li>
<li><a href="../fr492844/index.html">Comment visualiser et animer des modèles (géophysiques). Animation 3D et visualisation des données 4D</a></li>
<li><a href="../fr492850/index.html">Tout le monde ne veut pas passer au travail à distance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>