<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç≥ üèùÔ∏è üé∞ Calificaciones CTFZone 2019: Pollo üëÜüèæ üî™ üë®‚Äçüëß‚Äçüëß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A pesar del aplazamiento de la conferencia OFFZONE 2020 , ¬° habr√° una final de CTFZone ! Este a√±o se llevar√° a cabo por primera vez en l√≠nea y se tran...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Calificaciones CTFZone 2019: Pollo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bizone/blog/492222/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A pesar del aplazamiento de la conferencia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OFFZONE 2020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ¬° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr√°</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> una </font><font style="vertical-align: inherit;">final de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">CTFZone</font></a><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">Este a√±o se llevar√° a cabo por primera vez en l√≠nea y se transmitir√° activamente en las redes sociales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anunciaremos los detalles m√°s adelante, pero por ahora, sugerimos explorar el inicio de la tarea web desde la etapa de calificaci√≥n. </font><font style="vertical-align: inherit;">El an√°lisis de la soluci√≥n nos lo envi√≥ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Devand MacLean</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Canad√°. </font><font style="vertical-align: inherit;">Especialmente para Habr, hemos traducido el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texto de la startup local</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y lo invitamos a descubrir qu√© cadena de vulnerabilidades encontraron los participantes y qu√© tiene que ver el pollo con ella.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/kw/um/qqkwum4pqnrjnrgqxa9__wofqec.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informaci√≥n general</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autor de la tarea:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pavel Sorokin </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puntos:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 470 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫mero de equipos que resolvieron la tarea:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2</font></font><br>
<p><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlaces √∫tiles:</font></font></b></p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://gchq.github.io/CyberChef/</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-3.0</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://jakeydocs.readthedocs.io/en/latest/tutorials/first-mvc-app/adding-view.html</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://blog.mindedsecurity.com/2018/10/from-path-traversal-to-source-code-in.html</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/0xd4d/dnSpy/releases</a></li>
</ul><br>
<h2> </h2><br>
<p>  , - :</p><br>
<ul>
<li>  <b><font color="#ff0000">(/Home/Index)</font></b>;</li>
<li>   <b><font color="#ff0000">(/Home/Hens)</font></b>;</li>
<li>   <b><font color="#ff0000">(/Home/Contact)</font></b>;</li>
<li>   <b><font color="#ff0000">(/Auth/Login)</font></b>.</li>
</ul><br>
<p>, &nbsp; ,   :</p><br>
<ul>
<li>    ;</li>
<li>  &nbsp;API  ,  &nbsp; .</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La p√°gina / Inicio / Gallinas contiene enlaces para descargar "pasaportes" de pollo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7n/nc/1n/7nnc1nhfmbr0yfkok8ra-hqi1fo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de decodificar Base64, encontramos el nombre de archivo del par√°metro: 1.txt. </font><font style="vertical-align: inherit;">Usando CyberChef, codificamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / passwd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en Base64 y seguimos el enlace: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://web-chicken.ctfz.one/File/Download?filename=L2V0Yy9wYXNzd2Q=</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Los contenidos del </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo / etc / passwd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el servidor se </font><font style="vertical-align: inherit;">abren en el navegador </font><font style="vertical-align: inherit;">, lo que significa Tenemos derecho a leer archivos arbitrarios en el sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando intenta encontrar otros archivos en el sistema, puede observar un error que aparece cada vez que solicita un archivo inexistente (o un archivo que no se puede leer con los derechos de usuario de la aplicaci√≥n):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/au/su/ocausuexy92ii3ackgqn2fnh-ta.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habiendo visto que el error se refiere a la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entorno </font><b><font style="vertical-align: inherit;">ASPNETCORE_ENVIRONMENT</font></b><font style="vertical-align: inherit;"> , comenzamos a estudiar los dise√±os de las aplicaciones web ASP.NET Core. </font><font style="vertical-align: inherit;">Y vemos lo siguiente:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dr/oz/7s/droz7stwr6mkzt3buptphi6yt88.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para convertir las rutas y los nombres de archivo necesarios y extraerlos a Base64, escribimos un peque√±o script de Python ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fetch.py</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aq/nv/of/aqnvofypmm8iiotr8xq0koyybtg.png"></div><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando este conocimiento sobre la estructura de la aplicaci√≥n web MVC creada en ASP.NET Core, usando fetch.py ‚Äã‚Äãobtenemos el c√≥digo fuente de los siguientes archivos:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Shared/_Layout.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Home/Index.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Home/Contact.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Home/Hens.cshtml</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">../Views/Auth/Login.cshtml</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez hecho esto y estudiando el c√≥digo fuente de cada p√°gina, encontramos un detalle interesante en Hens.cshtml </font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7w/kp/mq/7wkpmqusqncbmjsdigxelqxxy2c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La l√≠nea 1 contiene la declaraci√≥n de inclusi√≥n @ usando StackHenneryMVCAppProject, que en ASP.NET significa un enlace a un archivo DLL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abrimos ../StackHenneryMVCAppProject.dll, pero no a trav√©s de la utilidad Python en Kali Linux, sino en el navegador de Windows, porque vamos a descompilar este archivo en Windows. A trav√©s de la utilizaci√≥n de tales la URL: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://web-chicken.ctfz.one/File/Download?filename=Li4vU3RhY2tIZW5uZXJ5TVZDQXBwUHJvamVjdC5kbGw=</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
de apertura de archivo DLL en dnSpy (.NET decompilador), ver inmediatamente que en el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialize ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de clase </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Config. La configuraci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se ejecuta cuando se inicia la aplicaci√≥n web, lee el contenido del archivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chicken_domains_internal.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Usando un script de Python, extraemos el contenido de este archivo: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
web-chicken-flag</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
web-chicken-auth </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialize ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se </font><font style="vertical-align: inherit;">conecta a&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web-chicken-flag a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trav√©s del puerto 4321 y recibe varios par√°metros: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secret_token</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA_key</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, no es posible iniciar una conexi√≥n a web-chicken-flag. Pero, cuando configuramos el registro de hosts DNS locales para traducir web-chicken-auth a la direcci√≥n IP externa del servidor ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">34.89.232.240</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), logramos abrir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth /</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interfaz Swagger UI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que se usa para describir y ejecutar comandos a trav√©s de la API REST.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zy/jq/he/zyjqherp-esnmlziil2jnubkram.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al excavar en el archivo DLL descompilado, puede observar que el controlador </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthController</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no solo ten√≠a el </font><font style="vertical-align: inherit;">m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sino tambi√©n el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tz/zb/1c/tzzb1cui_v-acwn19zzbvi-5kbq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando vamos a&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Auth / Change_Password_Test</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vemos este formulario:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hx/-l/we/hx-lwesr4_cxhuu-ryjzb2ku76w.png"></div><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al estudiar el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">entendemos que procesa cuatro par√°metros de tipo String a trav√©s de una solicitud HTTP POST:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre de usuario;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nueva contrase√±a;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrase√±a anterior;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_url.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/ik/qt/qxikqtcwxuiix9mslp_stalz9ea.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un poco m√°s abajo en el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vemos: sin recibir un valor para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , el m√©todo toma el valor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conf.auth_server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web-chicken-auth</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y luego agrega </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al final del valor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_url</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , asignando la cadena resultante a la variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/aa/uj/-daaujfp1ocf8i6l9gtf1rtvemi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la siguiente parte importante del c√≥digo, los valores de cadena del </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><b><font style="vertical-align: inherit;">usuario</font></b><font style="vertical-align: inherit;"> y los&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par√°metros de contrase√±a antigua</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la solicitud HTTP POST, y con ellos el&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secret_token</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la configuraci√≥n, se insertan en la cadena JSON. Luego, se crea un objeto JSON </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StringContent a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> partir de estos datos </font><font style="vertical-align: inherit;">, que se env√≠a como datos HTTP POST a la variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestURI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creada en el paso anterior.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/qd/5b/3wqd5b7hjj1ftppsvtcxvfdpdyi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora el servidor espera a que la solicitud HTTP POST solicite a&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uri que</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devuelva el objeto JSON con el par√°metro de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> igual a 0. Si esto no sucede, llegamos a la rama de c√≥digo que comienza desde la l√≠nea 6 y devuelve la vista </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Vistas / Autenticaci√≥n / Inicio de sesi√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con el error </font><b><font style="vertical-align: inherit;">Ingreso </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no v√°lido / contrase√±a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la solicitud HTTP POST a√∫n </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devuelve</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> un objeto JSON con el par√°metro de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> igual a 0, vamos a la rama de c√≥digo desde la l√≠nea 11. Luego, la variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> obtiene el valor </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se crea otro objeto JSON </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StringContent</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con los par√°metros de la solicitud HTTP POST original, como en la parte anterior, y estos datos se env√≠an a la direcci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;en la solicitud HTTP PUT. Finalmente, el mensaje de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cambio de contrase√±a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se devuelve al cliente </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cj/8y/wh/cj8ywhk0pr5vmdm8uyabhg26cf0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pocas palabras: todo el proceso comienza con una solicitud HTTP POST a&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Auth / Change_Password_Test</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que espera un cierto n√∫mero de par√°metros. Toma estos valores y crea un objeto JSON para enviarlo a&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;base_url&gt; / auth / login a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trav√©s de HTTP POST. Si en respuesta recibe JSON con el par√°metro de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> igual a 0, crea otro objeto JSON y env√≠a una solicitud HTTP PUT a&nbsp; </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / change_password</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al aprender la API REST en Swagger UI, vemos que en el archivo DLL descompilado no solo hab√≠a las rutas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;/ auth / change_password</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sino tambi√©n la ruta para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oh/kn/3p/ohkn3pbbiptuoxndp_xxo-in92q.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta ruta API esperaba un objeto JSON con dos par√°metros: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correo electr√≥nico</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secret_token</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si lo recibi√≥, devolvi√≥ un objeto JSON con una propiedad </font><font style="vertical-align: inherit;">de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de 0 y cadenas de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mensajes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tokens</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qw/a1/j3/qwa1j37cbbppj5gpzr8iz6vdl2q.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta que si de alguna manera </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forzamos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al m√©todo </font><b><font style="vertical-align: inherit;">Check_Password_Test ()</font></b><font style="vertical-align: inherit;"> a </font><font style="vertical-align: inherit;">solicitar inmediatamente la ruta </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery en</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lugar de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para ingresar la rama de cambio de contrase√±a ser√° suficiente ingresar una direcci√≥n de correo electr√≥nico v√°lida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuevamente estudiamos la parte del c√≥digo en el que el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Check_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> asigna el valor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requestUri</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la solicitud HTTP POST original, y entendemos que necesitamos enviar el valor </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / password_recovery #</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como el par√°metro base_url, y requestUri en el final el resultado ser√° </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / password_recovery # / auth / login</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El car√°cter # en la URL HTTP indica que parte de la direcci√≥n de solicitud ha finalizado. Por lo tanto, el servidor que recibe la solicitud simplemente ignorar√° la parte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / login</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/aa/uj/-daaujfp1ocf8i6l9gtf1rtvemi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto, por supuesto, es bueno, pero solo tenemos que descubrir c√≥mo el punto final REST, donde ahora redirigimos la solicitud, recibir√° el valor del </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correo electr√≥nico</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sin este valor, la solicitud fallar√° y no iremos m√°s all√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observamos cuidadosamente c√≥mo el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Check_Password_Test ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> crea datos JSON, y vemos que los datos de entrada no se borran en absoluto, lo que significa que puede implementar f√°cilmente sus par√°metros. Es suficiente enviar los siguientes par√°metros en la solicitud HTTP POST: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
username = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
old_password = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pwned "," email ":" admin@chicken.ctf.zone "," lol ":"</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
new_password = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p0tat0</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
base_url = </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // web-chicken-auth / auth / password_recovery #</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El objeto JSON resultante se env√≠a a&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/02/h8/4-/02h84-3pz0w1c7_bg2hlyqt4k7o.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con estos datos JSON, cumplimos con los requisitos de que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ auth / password_recovery</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deber√≠a devolver una respuesta, despu√©s de lo cual el servidor ingresar√° la rama de cambio de contrase√±a (el objeto JSON contiene la propiedad de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correo electr√≥nico</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Ahora </font><font style="vertical-align: inherit;">ya no necesitamos el </font><font style="vertical-align: inherit;">valor de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">old_password</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En esta rama de c√≥digo, proporcionamos todos los valores necesarios para cambiar la contrase√±a (la propiedad de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre de usuario</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y la propiedad de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contrase√±a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p0tat0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">La solicitud se completa y recibimos un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cambio de contrase√±a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en respuesta.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dl/pa/nw/dlpanwrefhtrjpvetawk6ed2nva.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Solo queda ingresar un nuevo nombre de usuario y contrase√±a en la p√°gina de inicio de sesi√≥n!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/zx/is/eezxiswaxjxezkq8cezfrbinggs.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aqu√≠ est√° nuestra bandera:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/ge/iw/yygeiwxjauomdcsnyqp2pabdcou.png"></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492212/index.html">Desarrollo frontal de portales en software de c√≥digo abierto: comparta experiencia</a></li>
<li><a href="../es492214/index.html">¬øPor qu√© vale la pena hacer reuniones mientras camina? Probado por la ciencia, confirmado por la mafia.</a></li>
<li><a href="../es492216/index.html">Guardar valores en la aplicaci√≥n .Net en la fase de construcci√≥n</a></li>
<li><a href="../es492218/index.html">Reglas de dise√±o de iconos para recordar</a></li>
<li><a href="../es492220/index.html">5 secretos poco conocidos de los pandas</a></li>
<li><a href="../es492226/index.html">Comparaci√≥n de precios en Kubernetes gestionados (2020)</a></li>
<li><a href="../es492228/index.html">Como Sports.ru escribi√≥ su editor WYSIWYG</a></li>
<li><a href="../es492232/index.html">C√≥mo Smartcalls se convirti√≥ en Voximplant Kit - caracter√≠sticas de cambio de marca y asesino</a></li>
<li><a href="../es492234/index.html">Investigaci√≥n: por qu√© las personas est√°n listas para recibir menos en proyectos sociales</a></li>
<li><a href="../es492242/index.html">M5Stack y sus contactos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>