<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐠 🚣🏾 ⭐️ 没入感-FacebookのLibraブロックチェーンプログラミング言語 👩🏾‍💻 👨🏿‍🏫 👨🏾‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="次に、Move言語の主な特徴と、スマートコントラクトで既に人気のある別の言語であるSolidity（Ethereumプラットフォーム上）との主な違いを詳しく調べます。この資料は、利用可能なオンライン26ページのホワイトペーパーの調査に基づいています。
 
 前書き
 Moveは、ユーザートランザクシ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>没入感-FacebookのLibraブロックチェーンプログラミング言語</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459990/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、Move言語の主な特徴と、スマートコントラクトで既に人気のある別の言語であるSolidity（Ethereumプラットフォーム上）との主な違いを詳しく調べます。</font><font style="vertical-align: inherit;">この資料は、利用可能なオンライン26ページのホワイトペーパーの調査に基づいています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moveは、ユーザートランザクションとスマートコントラクトの実行に使用される実行可能なバイトコード言語です。</font><font style="vertical-align: inherit;">次の2つの点に注意してください。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MoveはMove仮想マシンで直接実行できるバイトコード言語ですが、Solidity（Ethereumのスマートコントラクト言語）は、EVM（Ethereum Virtual Machine）で実行される前にバイトコードにコンパイルされる高レベルの言語です）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moveはスマートコントラクトの実装だけでなく、ユーザートランザクションにも使用できます（これについては後で詳しく説明します）。一方、Solidityはスマートコントラクト専用の言語です。</font></font></li>
</ol><a name="habracut"></a><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDEX Protocolプロジェクトチームによる翻訳。</font><font style="vertical-align: inherit;">以前</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Libraプロジェクトを説明</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">多くの資料を</font></a><font style="vertical-align: inherit;">翻訳しました</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">が</font></a><font style="vertical-align: inherit;">、ここでMove言語をもう少し詳しく見ていきます。</font><font style="vertical-align: inherit;">翻訳はハブラザーと組み合わせて行われました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">涼しい</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moveの主要な機能は、線形ロジックセマンティクスでカスタムリソースタイプを定義できることです。リソースをコピーしたり、暗黙的に削除したりすることはできず、移動するだけです。機能的には、これはRust言語の機能に似ています。 Rustの値は、一度に1つの名前にのみ割り当てることができます。別の名前に値を割り当てると、以前の名前ではアクセスできなくなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/px/97/nppx97owkfkamua9ccpc1aovkrg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次のコードフラグメントはエラーをスローします：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動された値 'x'の使用。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、Rustにガベージコレクションがないためです。変数がスコープ外になると、変数が参照するメモリも解放されます。簡単に言えば、データの「所有者」は1人だけです。この例では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が元の所有者であり、次に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい所有者になります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この動作の詳細については、こちらをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンシステムでのデジタル資産の表現</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
物理的資産には、デジタルで表現するのが難しい2つの特性があります。</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">希少性</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（元の希少性-希少性）。</font><font style="vertical-align: inherit;">システム内の資産（問題）の量を制御する必要があります。</font><font style="vertical-align: inherit;">既存の資産の複製は禁止されなければならず、新しいものの作成は特権的な操作です。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセス制御</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">システム参加者は、アクセス制御ポリシーで資産を保護できる必要があります。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これら2つの特性は物理的な資産にとって自然なものであり、資産と見なしたい場合は、デジタルオブジェクトに対して実装する必要があります。</font><font style="vertical-align: inherit;">たとえば、レアメタル-自然な赤字があり、あなただけが（たとえば、手に持って）それにアクセスでき、あなたはそれを販売または費やすことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これら2つのプロパティに到達した方法を説明するために、次の文から始めましょう。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命題1：希少性とアクセス制御のない最も単純なルール</font></font></h4><br>
<img src="https://habrastorage.org/webt/it/ar/vy/itarvy-z1ns775gm4oxu2isimxe.png"><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G [K]：= n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、ブロックチェーンのグローバル状態で</font><font style="vertical-align: inherit;">キー</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によってアクセス可能な数を</font><font style="vertical-align: inherit;">新しい値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nで</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新することを意味します</font><font style="vertical-align: inherit;">。</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクション「</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリス、100」は、アリスのアカウントの残高を100に設定することを意味します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のソリューションには、いくつかの深刻な問題があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリスは、</font><i><font style="vertical-align: inherit;">トランザクション「アリス、100」を</font></i><font style="vertical-align: inherit;">送信するだけで、無制限の数のコインを受け取ることができます</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボブが同じテクニックを使用して無制限の数のコインを自分に送ることができるので、アリスがボブに送るコインは役に立たない。</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提案その2：赤字を考慮する</font></font></h4><br>
<img src="https://habrastorage.org/webt/_1/s4/08/_1s408pxxtmawws6dw_vddgzr-m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在</font><font style="vertical-align: inherit;">、振替取引の前</font><font style="vertical-align: inherit;">に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ka</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コインの数が</font><font style="vertical-align: inherit;">少なくとも</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">なるように状況を監視してい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">それでも、これで不足の問題は解決しますが、誰がアリスのコインを送ることができるかについての情報はありません（誰もがこれを行うことができる限り、主なことは数量制限の規則に違反しないことです）。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命題3：赤字とアクセス制御の組み合わせ</font></font></h4><br>
<img src="https://habrastorage.org/webt/yi/so/hh/yisohh7xhtgmzt8aparwsxdccfc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残高を確認する前に</font><font style="vertical-align: inherit;">
、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verify_sig</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デジタル署名</font><i><font style="vertical-align: inherit;">メカニズムで</font></i><font style="vertical-align: inherit;">この問題を解決します</font><font style="vertical-align: inherit;">。つまり、アリスは秘密鍵を使用してトランザクションに署名し、コインを所有していることを確認します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロックチェーンプログラミング言語</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存のブロックチェーン言語は次の問題に直面しています（それらはすべてMoveで解決されました（注：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残念ながら、この記事の著者は比較でEthereumにのみアピールしているため、このコンテキストでのみそれらを採用する価値があります。たとえば、以下のほとんどはEOSでも解決されます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">））：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">資産の間接的な表現</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。アセットは整数を使用してエンコードされますが、整数値はアセットと同じではありません。実際、ビットコイン/エーテル/ &lt;Any Coin&gt;を表すタイプや値はありません。これにより、資産を使用するプログラムの作成が困難になり、エラーが発生しやすくなります。プロシージャへの/からのアセットの転送や構造へのアセットの格納などのパターンには、特別な言語サポートが必要です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">赤字は拡大不可</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。言語は希少な資産を1つだけ表します。さらに、赤字に対する救済策は、言語自体のセマンティクスに直接組み込まれています。開発者は、ユーザーアセットを作成する場合、リソースのすべての側面を自分で注意深く監視する必要があります。これらは、Ethereumスマートコントラクトの問題にすぎません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーは、ERC-20標準トークンを使用して資産を発行し、整数を使用してコストと総発行量の両方を決定します。新しいトークンが作成されるときはいつでも、スマートコントラクトコードはエミッションルールへのコンプライアンスを個別に検証する必要があります。さらに、資産の間接的な表示は、場合によっては、重大なエラーにつながります-複製、二重の支出、または資産の完全な損失ですらあります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柔軟なアクセス制御の欠如</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。現在使用されている唯一のアクセス制御ポリシーは、非対称暗号を使用した署名方式です。赤字保護と同様に、アクセス制御ポリシーは言語のセマンティクスに深く埋め込まれています。しかし、プログラマーが独自のアクセス制御ポリシーを定義できるように言語を拡張する方法は、多くの場合、非常に簡単な作業です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、スマートコントラクトがアクセス制御用のネイティブ暗号化サポートを持たないイーサリアムにも当てはまります。開発者は、onlyOwner修飾子などを使用して、アクセス制御を手動で指定する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はイーサリアムの大ファンですが、資産のプロパティはセキュリティの目的で言語によってネイティブにサポートされる必要があると思います。特に、Etherからスマートコントラクトへの転送には動的ディスパッチが含まれ、再入可能性の脆弱性と呼ばれる新しい種類のエラーが発生しています。ここで動的ディスパッチとは、コード実行のロジックがコンパイル時（静的）ではなく、実行時（動的）に決定されることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、Solidityでは、コントラクトAがコントラクトBの機能を呼び出すと、コントラクトBがコントラクトAの開発者によって提供されなかったコードを実行する可能性があり、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">再エントリの脆弱性に</font></a><font style="vertical-align: inherit;">つながる可能</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性があります。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （契約Aが誤って契約Bとして機能し、実際に口座残高が差し引かれる前にお金を引き出す）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語設計の基本を移動する</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一次資料</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より高いレベルで言えば、Move言語のモジュール/リソース/プロシージャ間の相互作用は、OOP言語のクラス/オブジェクトとメソッド間の関係に非常に似ています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moveのモジュールは、他のブロックチェーンのスマートコントラクトに似ています。</font><font style="vertical-align: inherit;">モジュールは、宣言されたリソースを作成、破棄、および更新するためのルールを設定するリソースタイプとプロシージャを宣言します。</font><font style="vertical-align: inherit;">しかし、これらはすべて</font><font style="vertical-align: inherit;">、Moveの</font><font style="vertical-align: inherit;">単なる慣例（「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">専門用語</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」）です。</font><font style="vertical-align: inherit;">少し後で、この点について説明します。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柔軟性</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moveは、スクリプティングを通じて天秤座の柔軟性を追加します。 Libraの各トランザクションにはスクリプトが含まれていますが、これは実際にはメインのトランザクション手順です。スクリプトは、指定された受信者のリストに基づく支払いなど、指定された1つのアクションを実行するか、または一般的なロジックが設定されているプロシージャを呼び出すなど、他のリソースを再利用できます。これが、Moveトランザクションスクリプトがより高い柔軟性を提供する理由です。スクリプトは1回限りの動作と繰り返し動作の両方を使用できますが、Ethereumは繰り返しスクリプトのみを実行できます（1つのメソッドでスマートコントラクトメソッドを呼び出すことにより）。 「複数」と呼ばれるのは、スマートコントラクトの機能を複数回実行できるためです。 （注意：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでの瞬間は非常に微妙です。</font><font style="vertical-align: inherit;">一方では、疑似バイトコードの形式のトランザクションスクリプトもビットコインで利用できます。</font><font style="vertical-align: inherit;">一方、私が理解しているように、Moveは実際にこの言語をスマートコントラクトの本格的な言語のレベルに拡張しています</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全性</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Move実行可能形式はバイトコードです。これは、一方ではアセンブラーより高いレベルですが、ソースコードより低いレベルの言語です。</font><font style="vertical-align: inherit;">バイトコードは、バイトコードベリファイアを使用してリソース、タイプ、およびメモリセキュリティの可用性についてチェーン上でチェックされ、インタープリターによって実行されます。</font><font style="vertical-align: inherit;">このアプローチにより、Moveはソースコード固有のセキュリティを提供できますが、コンパイルプロセスがなく、システムにコンパイラを追加する必要がありません。</font><font style="vertical-align: inherit;">バイトコード言語を移動させることは本当に良い解決策です。</font><font style="vertical-align: inherit;">Solidityの場合のように、ソースからコンパイルする必要はありません。コンパイラインフラストラクチャで発生する可能性のあるクラッシュや攻撃を心配する必要はありません。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検証可能性</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはすべてチェーンで行われるため、できるだけ簡単なチェックを実行することを目的としています（注：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オンライン、各トランザクションの処理中に、遅延があるとネットワーク全体の速度が低下します</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。しかし、言語設計は最初は使用可能であり、静的検証のオフチェーン手段。</font><font style="vertical-align: inherit;">これはより望ましいですが、これまでのところ、検証ツール（個別のツールキットとして）の開発は将来に向けて延期されており、現在はランタイム（動的）での動的検証のみがサポートされています。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュール性</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移動モジュールは、データの抽象化を提供し、リソースの重要な操作をローカライズします。</font><font style="vertical-align: inherit;">モジュールによって提供されるカプセル化と、Moveタイプシステムによって提供される保護を組み合わせることにより、モジュールタイプに設定されたプロパティがモジュール外部のコードに違反することがなくなります。</font><font style="vertical-align: inherit;">これはよく考え抜かれた抽象化の設計です。つまり、コントラクト内のデータはコントラクトの実行の一部としてのみ変更でき、外部からは変更できません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rm/co/qe/rmcoqelz3bad4ltayox-u9rpxq0.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レビューを移動</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トランザクションスクリプトの例は、モジュール外のプログラマーの悪意のあるまたは無謀なアクションがモジュールリソースのセキュリティに違反できないことを示しています。</font><font style="vertical-align: inherit;">次に、モジュール、リソース、およびプロシージャを使用して、Libraブロックチェーンをプログラミングする方法の例を見ていきます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ピアツーピア支払い</font></font></h4><br>
<img src="https://habrastorage.org/webt/1a/hr/hh/1ahrhhw3rd4ky7jpfsvzxeohi0e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
金額で指定されたコインの金額は、送信者の残高から受信者に送金されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい点がいくつかあります（赤で強調表示）。</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：モジュールが保存されているアカウントのアドレス</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通貨</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：モジュール名</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コイン</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：リソースタイプ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロシージャによって返されるコイン値は、タイプが0x0.Currency.Coinのリソース値です。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">move（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：値は再び使用できません</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：値は後で使用できます</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを解析します。最初のステップでは、送信者が</font><i><font style="vertical-align: inherit;">0x0.Currencyに</font></i><font style="vertical-align: inherit;">格納されているモジュールから</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">withdraw_from_sender</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">というプロシージャを呼び出します</font><font style="vertical-align: inherit;">。 2番目の段階では、送信者は資金を受信者に転送し、コインリソースの値をモジュール</font><i><font style="vertical-align: inherit;">0x0.Currencyの</font></i><font style="vertical-align: inherit;">入金手順に移動します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
チェックで拒否されるコードのエラーの3つの例を次に示します。</font><b><i><font style="vertical-align: inherit;">移動（コイン）</font></i></b><b><font style="vertical-align: inherit;">コール</font></b><b><font style="vertical-align: inherit;">を</font></b><b><i><font style="vertical-align: inherit;">コピー（コイン）に</font></i></b><b><font style="vertical-align: inherit;">変更する</font></b><b><i><font style="vertical-align: inherit;">こと</font></i></b><b><font style="vertical-align: inherit;">による資金の重複</font></b><font style="vertical-align: inherit;">。リソースは移動のみが可能です。リソースの量を複製しようとすると（たとえば、</font><font style="vertical-align: inherit;">上記の例で</font><i><font style="vertical-align: inherit;">copy（coin）を</font></i><font style="vertical-align: inherit;">呼び出す</font><font style="vertical-align: inherit;">ことにより）、バイトコードのチェック中にエラーが発生します。</font><b><i><font style="vertical-align: inherit;">移動</font></i></b><b><font style="vertical-align: inherit;">指定</font></b><b><i><font style="vertical-align: inherit;">（コイン）</font></i></b><b><font style="vertical-align: inherit;">による資金の再利用</font></b></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二度</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ライン加算</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x0.Currency.deposit（コピー（some_other_payee）、移動（コイン））を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受取人との最初の時間、およびと第二-二回「費用」硬貨の送信者を可能にする上記の例に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">some_other_payeeを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは望ましくない動作であり、物理的な資産では不可能です。</font><font style="vertical-align: inherit;">幸い、Moveはこのプログラムを拒否します。</font><b><i><font style="vertical-align: inherit;">移動の</font></i></b></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">失敗</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（コイン）</font></font></i></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">による資金の損失</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">リソースを移動しない場合（たとえば、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">move（coin）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を含む行を削除することにより</font><font style="vertical-align: inherit;">）、バイトコードをチェックしてエラーが生成されます。</font><font style="vertical-align: inherit;">これにより、Moveプログラマーが偶発的または悪意のある資金の損失から保護されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通貨モジュール</font></font></h3><br>
<img src="https://habrastorage.org/webt/p1/gx/rh/p1gxrhzyyl4cmlmlq5rcr4yhzmc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各アカウントには、0個以上のモジュール（四角形で示されている）と1つ以上のリソース値（シリンダーで示されている）を含めることができます。</font><font style="vertical-align: inherit;">たとえば、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x0の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アカウントに</font><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x0.Currency</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュール</font><font style="vertical-align: inherit;">とタイプ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x0.Currency.Coinの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース値が</font><font style="vertical-align: inherit;">含まれて</font><i><font style="vertical-align: inherit;">い</font></i><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のアカウントに</font><font style="vertical-align: inherit;">は、2つのリソースと1つのモジュールがあります。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のアカウントに</font><font style="vertical-align: inherit;">は、2つのモジュールと1つのリソース値があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少しの間：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションスクリプトはアトミックです-完全に実行されるか、まったく実行されません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュールは、グローバルに利用可能な長期間有効なコードです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グローバル状態はハッシュテーブルとして構造化され、キーはアカウントアドレスになります</font></font></li>
<li>                   (    <i>0x0</i>      <i>0x0.Currency.Coin</i>      <i>Currency</i>)</li>
<li>      (<i>0x0.Currency.Coin</i>  <i>0x1.Currency.Coin</i> —   ,    )</li>
<li>          ,     — (<i>resource TwoCoins {c1: 0x0.Currency.Coin, c2: 0x0.Currency.Coin}</i>)</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">競合することなく名前でリソースを参照できます。たとえば、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TwoCoins.c1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TwoCoins.c2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して2つのリソースを参照できます</font><font style="vertical-align: inherit;">。</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コインリソース広告</font></font></h4><br>
<img src="https://habrastorage.org/webt/az/79/8o/az798o2jkg9ft5tkiisy5fitk2o.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モジュールという名前の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通貨</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と名前のリソースタイプ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コイン</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
いくつかのポイント：</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">u64</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型</font><font style="vertical-align: inherit;">（64ビット符号なし整数）の</font><font style="vertical-align: inherit;">単一フィールド構造です</font></font></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通貨</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュールプロシージャのみが、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コインの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値を作成または破棄できます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のモジュールとスクリプトは、モジュールが提供するオープンプロシージャを通じてのみ、値フィールドを書き込んだり参照したりできます。</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">預金の実装</font></font></h4><br>
<img src="https://habrastorage.org/webt/52/uj/nw/52ujnwxqzafegglfjqrsckqwy50.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この手順では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース</font><font style="vertical-align: inherit;">を入力として受け取り、それを</font><font style="vertical-align: inherit;">受信者のアカウントに保存され</font><font style="vertical-align: inherit;">ている</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースと組み合わせ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コイン入力リソースを破棄し、その値を記録します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受信者のアカウントに保存されている一意のコインリソースへのリンクを取得する。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロシージャが呼び出されたときにパラメーターに渡された値によって、コインの金額の値を変更します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少しの間：</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unpack、BorrowGlobal-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込みの手順</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アンパック&lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、タイプTのリソースを削除する唯一の方法です。プロシージャは、リソースを入力に取り、それを破棄して、リソースのフィールドに関連付けられた値を返します。</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BorrowGlobal &lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はアドレスを入力として受け取り、このアドレスによって公開（所有）されているTの一意のインスタンスへのリンクを返します</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＆mut Coin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">Coin</font></i><font style="vertical-align: inherit;">リソースへのリンクです</font></font><i><font style="vertical-align: inherit;"></font></i></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">withdraw_from_senderを実装する</font></font></h4><br>
<img src="https://habrastorage.org/webt/af/6s/h_/af6sh_tc_6jpvlwzgka0by5cnjo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この手順：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">送信者のアカウントに</font><font style="vertical-align: inherit;">リンクされた一意の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースへのリンクを取得し</font><font style="vertical-align: inherit;">ます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定された金額を参照して</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースの値を減らし</font><font style="vertical-align: inherit;">ます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残高が更新され</font><font style="vertical-align: inherit;">た新しい</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成して返します</font><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少しの間：</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デポジット</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は誰でも呼び出すことができますが、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">withdraw_from_sender</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は呼び出しアカウントのコインにのみアクセスできます</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetTxnSenderAddressは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に似て</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msg.sender</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソリディティに</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RejectUnless</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">Solidityのrequire</font></i><font style="vertical-align: inherit;">と似てい</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このチェックが失敗した場合、トランザクションは停止され、すべての変更がロールバックされます。</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パック&lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も、タイプTの新しいリソースを作成する組み込みプロシージャです。</font></font></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unpack &lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同様に</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pack &lt;T&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はリソース</font><i><font style="vertical-align: inherit;">Tが</font></i><font style="vertical-align: inherit;">記述されているモジュール内でのみ呼び出すことができます。</font></font><i><font style="vertical-align: inherit;"></font></i></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ムーブ言語の主な特徴を調べ、イーサリアムと比較し、基本的なスクリプト構文にも慣れました。</font><font style="vertical-align: inherit;">結論として、私は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の白書</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を一読することを強くお勧めし</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">プログラミング言語設計の原則に関する多くの詳細と、多くの便利なリンクが含まれています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja459978/index.html">Node.js開発者ツール。Webソケットでのリモートプロシージャコール</a></li>
<li><a href="../ja459980/index.html">ハイテクナイジェリアの手紙</a></li>
<li><a href="../ja459982/index.html">Roslynアナライザー。コードをすばやく正確に書く方法</a></li>
<li><a href="../ja459984/index.html">GitLabとAnsibleを使用してコードとしてインフラストラクチャを構築する</a></li>
<li><a href="../ja459988/index.html">彼はニューラルネットワークで犬を食べました</a></li>
<li><a href="../ja459992/index.html">GOST R 57100-2016。それが何だった？</a></li>
<li><a href="../ja459994/index.html">研究：Linux-クラウドで最も人気のあるOS</a></li>
<li><a href="../ja459996/index.html">ドイツ。ミュンヘン。高度な移民ガイド</a></li>
<li><a href="../ja460002/index.html">Service Desk Dreamsの作成方法</a></li>
<li><a href="../ja460004/index.html">幸せなシステム管理者の日 </a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>