<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌂 🤳🏼 👈 Cartes normales idéales pour Unity (et d'autres programmes) 💏 🤞🏼 🐌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="... et comment découvrir ce qui ne va pas avec votre pipeline de création de contenu.
 
 
 Supposons que vous ayez un incroyable modèle en polyéthylèn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cartes normales idéales pour Unity (et d'autres programmes)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487932/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... et comment découvrir ce qui ne va pas avec votre pipeline de création de contenu.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/89e/6f3/877/89e6f38773acdefc8f2680cf7bfd223a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous ayez un incroyable modèle en polyéthylène sur lequel l'artiste a travaillé et que vous souhaitiez l'intégrer dans le jeu. </font><font style="vertical-align: inherit;">L'artiste a montré des captures d'écran du modèle dans son programme et elles sont incroyables. </font><font style="vertical-align: inherit;">Même après avoir préparé des cartes normales pour la version low-poly, cela a toujours fière allure.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a4/810/be8/3a4810be8abd5ad6cb24fca98ee9e61c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Découvrez la grandeur de ce modèle traditionnel pour tester des cartes normales! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puis l'artiste la met dans le jeu, et elle a l'air ... un peu mal.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/350/fa2/e70/350fa2e7020b28db82bf99958d10f958.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ces visages ne devraient-ils pas être plats? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les surfaces, qui devraient être planes, sont encore un peu arrondies, certaines sont même déprimées, et pire encore, d'étranges rayures les longent. </font><font style="vertical-align: inherit;">Situation familière? </font><font style="vertical-align: inherit;">Certains d’entre vous sont probablement tombés dessus, se sont dit: «Eh bien, probablement, ça ne marchera pas mieux», et ils ont continué. </font><font style="vertical-align: inherit;">Peut-être qu'un peu de saleté a été appliqué pour masquer les cas les plus graves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il y a en fait quelque chose qui ne va pas avec votre pipeline de création de contenu. </font><font style="vertical-align: inherit;">Ce n'est pas toujours évident, mais le problème peut être résolu! * </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Si vous supposez que dans certains cas, vous pouvez apporter des modifications au pipeline de contenu.</font></font></i><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Préface</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet article explique comment exporter des cartes normales idéales à partir d'autres applications pour les utiliser dans Unity 5.3 et versions ultérieures. </font><font style="vertical-align: inherit;">Il ne décrit pas comment obtenir des cartes normales de haute qualité, il existe de nombreux autres didacticiels pour cela, donc je ne vais pas aborder ce sujet.</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base d'espace tangent</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le problème est de savoir comment fonctionnent les cartes normales de l'espace tangent. En particulier, comment fonctionne l' </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace tangent</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou base tangente). Je n'irai pas trop loin dans les aspects techniques de ce qu'ils font. Comme d'autres auteurs, j'ai déjà </font></font><a rel="noopener" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parlé de cela</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais en bref, l'espace tangent détermine ce que devrait représenter l'orientation de la direction dans la carte normale. Quelle direction sur la carte normale est en fait "vers l'avant", "vers le haut" ou "vers la droite". En gros, cette orientation est l'orientation des coordonnées UV de la texture et des normales des sommets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est plus important de comprendre que le programme utilisé pour faire cuire la carte normale du maillage highpoly au maillage lowpoly doit calculer son espace tangent</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exactement le même que le programme dans lequel les cartes normales seront utilisées</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Étant donné que différents programmes peuvent utiliser l'espace tangent de différentes manières, les mappages normaux standard pour un maillage ne seront pas nécessairement les mêmes pour toutes les applications. </font><font style="vertical-align: inherit;">Même pour les applications utilisant le même espace tangent!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connais ton ennemi</font></font></h1><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coup d'Etat dû à une erreur évidente</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'erreur la plus courante est le problème «OpenGL vs Direct3D». </font><font style="vertical-align: inherit;">Ils sont également appelés cartes normales Y + et Y-. </font><font style="vertical-align: inherit;">Je les ai inclus ici juste pour être complet. </font><font style="vertical-align: inherit;">Très probablement, la plupart des personnes qui ont rencontré ce problème le savent déjà, ou au moins ont appris comment le résoudre. </font><font style="vertical-align: inherit;">Étant donné que les cartes normales sont générées dans une orientation, elles sont essentiellement inutiles pour une utilisation dans une application conçue pour en utiliser une autre.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39a/064/afd/39a064afd8830af08c8841d279e234bc.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cartes normales en orientation Direct3D dans le moteur Unity, qui attend une orientation OpenGL.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cela peut être compris par le fait que l'éclairage semble être inversé ou tomber de l'autre côté, mais uniquement dans certaines directions d'éclairage. Certains coins ou visages peuvent sembler complètement normaux jusqu'à ce que vous déplaciez la source de lumière.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et avec ce problème, tout est assez clair. </font><font style="vertical-align: inherit;">La plupart des applications normales de création de cartes ont un joli grand bouton ou menu pour basculer entre les options d'orientation OpenGL / Direct3D ou Y. Découvrez quelle orientation l'application cible utilise et créez des cartes. </font><font style="vertical-align: inherit;">Unity utilise OpenGL et Y +. </font><font style="vertical-align: inherit;">Unreal utilise Direct3D et Y-. </font><font style="vertical-align: inherit;">Cela peut être clairement compris en regardant la texture de la carte normale elle-même. </font><font style="vertical-align: inherit;">S'il semble que dans le canal vert, ils sont allumés "d'en haut", alors c'est l'orientation OpenGL. </font><font style="vertical-align: inherit;">Si par le bas, c'est Direct3D.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bizarreries avec sRGB</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre erreur courante consiste à utiliser une texture marquée comme texture sRGB. Cela change la façon dont la texture du GPU est échantillonnée, la forçant à convertir les valeurs de couleur de l'espace sRGB, à partir duquel les gens sélectionnent généralement les valeurs de couleur, en un espace de couleur linéaire. Pour les cartes normales, ce n'est pas nécessaire. Si vous définissez le type sur «Carte normale» pour la texture dans Unity, le moteur désactivera automatiquement cette option, mais vous pouvez également désactiver manuellement l'option «sRGB (Texture couleur)», et la texture fonctionnera comme une carte normale. Au moins dans Unity 2017.1 et plus récent.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eed/4fa/006/eed4fa006eb6dc4cb232b61f6df0d95d.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carte normale avec type de texture par défaut et sRGB activé.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ce problème peut être reconnu par le fait que les cartes normales sont fortement biaisées dans une direction. </font><font style="vertical-align: inherit;">Dans ce modèle, presque tous les visages semblent dirigés vers une source de lumière. </font><font style="vertical-align: inherit;">De toute évidence, ce ne sera pas toujours le cas. </font><font style="vertical-align: inherit;">Dans une carte normale plus détaillée, toutes les parties réagissent à l'éclairage presque correctement, mais se déplacent légèrement sous un certain angle. </font><font style="vertical-align: inherit;">Parfois, il peut sembler que toute la surface du maillage est déformée.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trop différent pour être normal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre problème courant est l'utilisation de différents maillages de cuisson normaux dans l'actif du jeu. </font><font style="vertical-align: inherit;">Comme pour les tangentes, pour que tout fonctionne, elles doivent </font><font style="vertical-align: inherit;">correspondre </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exactement</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cette erreur se produit souvent si les artistes exportent des maillages avec des normales de sommet incorrectes. </font><font style="vertical-align: inherit;">Dans ce cas, toute application qui ouvre le maillage devra les calculer vous-même. </font><font style="vertical-align: inherit;">Il n'y a pas de bonne façon de le résoudre, tout dépend du maillage, alors assurez-vous que vous (ou les artistes) exportez le modèle avec les normales finales!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/26b/196/2f9/26b1962f97b26c1f90e1143007844e30.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cartes normales cuites sur un maillage lissé, affichées comme sur un maillage aux arêtes vives</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/970/07c/51d/97007c51d1aea9f42e5971e1a3d79ef6.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cartes normales cuites sur un maillage aux arêtes vives, affichées comme sur un maillage lissé</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est un autre problème facile à repérer. Si le modèle doit ressembler à des arêtes vives, mais que l'ombrage se plie à partir de ces arêtes, cela signifie que vous avez cuit la carte normale avec des normales lisses, mais elles sont rendues sur un maillage avec une arête vive. Si l'ombrage se penche vers le bord, cela signifie que la carte a été cuite avec un bord net et rendue sur un bord lisse. En fait, dans un modèle, les deux cas peuvent être présents, car il est possible d'indiquer le lissé ou la netteté des bords individuels, et même le degré de lissé. Mais en fait, ils sont garantis être erronés si vous autorisez une autre application à deviner comment cela devrait être. Le modèle présenté ci-dessus est un cas extrême, et souvent tout n'est pas si évident, car de grandes parties du modèle peuvent sembler tout à fait normales. Mais dans le cas général,si vous avez plusieurs arêtes qui semblent particulièrement étranges, cela est probablement dû à un décalage dans les normales des sommets.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace vs Autodesk</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un problème moins visible est que lors de la cuisson de cartes normales 3ds Max ou Maya, elles seront toujours incorrectes dans le moteur Unity. </font><font style="vertical-align: inherit;">Ils auront tort dans Unreal et dans presque tous les autres programmes, à l'exception de celui dans lequel ils ont été cuits. </font><font style="vertical-align: inherit;">Les cartes normales de 3ds Max ne fonctionnent pas dans Maya, et vice versa! </font><font style="vertical-align: inherit;">Chacune de ces applications calcule l'espace tangent à sa manière, ce qui ne correspond pas à d'autres applications. </font><font style="vertical-align: inherit;">Lorsqu'ils sont utilisés indépendamment, ils ont l'air </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parfaits</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et si vous générez des cartes normales à utiliser dans ces programmes, essayez de faire des cartes normales en eux. </font><font style="vertical-align: inherit;">Presque aucun </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autre</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> programme n'est capable de préparer les cartes normales correctes pour ces applications, vous ne semblez donc pas avoir le choix.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La seule solution dans ce cas est de ne pas créer de cartes normales avec ces applications si vous souhaitez les utiliser ailleurs. </font><font style="vertical-align: inherit;">Si vous avez besoin d'un programme gratuit, utilisez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xNormal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il s'agit d'un outil standard de l'industrie. </font><font style="vertical-align: inherit;">Si vous utilisez Substance quelque part dans le pipeline de création de contenu, utilisez-le.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/350/fa2/e70/350fa2e7020b28db82bf99958d10f958.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3ds Max a cuit la carte normale utilisée par Unity La</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
façon la plus simple de remarquer ce problème est de voir que les faces planes ont de petites bosses ou courbures. </font><font style="vertical-align: inherit;">Dans certains cas, cela peut être très discret, en particulier dans les objets organiques. </font><font style="vertical-align: inherit;">Par conséquent, des problèmes de ce type passent souvent inaperçus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nombreuses applications non Autodesk sont passées à une méthode de calcul d'espace tangent appelée </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">XNormal et Substance, ainsi que Blender, Unity, Unreal, Godot, Marmoset, Houdini, Modo et quelques autres, utilisent par défaut MikkTSpace ou au moins le supportent d'une manière ou d'une autre, ce qui améliore considérablement leur compatibilité. </font><font style="vertical-align: inherit;">En fait, au cours des dix dernières années, il est devenu la norme de l'industrie dans tous les cas lorsque des cartes normales de l'espace tangent sont utilisées. </font><font style="vertical-align: inherit;">Vraisemblablement, à un moment donné, 3ds Max ajoutera leur support, mais il n'est pas clair si les développeurs prévoient d'autoriser la cuisson de cartes normales à l'aide de MikkTSpace ou tout simplement de fournir un support pour l'affichage / rendu avec leur aide.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporter les maillages et le peintre de substances</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre problème avec 3ds Max et Maya est que lors de l'exportation de maillages à partir d'eux, il existe une option d'exportation avec «tangentes et binormales». Ils ne seront pas dans les tangentes réelles de MikkTSpace, mais seront basés sur eux. Certaines applications recalculent de force le MikkTSpace correct par défaut (par exemple, xNormal, Unity et Unreal), mais d'autres applications utilisent des maillages tangents (le cas échéant) «tels quels» et calculent MikkTSpace uniquement si le maillage n'a pas de tangentes. Par exemple, Substance Painter utilise des maillages tangents s'ils sont présents tels quels, c'est-à-dire que Painter crée des cartes normales très similaires à 3ds Max! Similaire, mais pas tout à fait la même chose, donc si vous les réimportez dans 3ds Max, ils ne seront pas aussi bons que cuits dans Max.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace vs MikkTSpace?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le problème suivant est qu'il existe plusieurs versions de MikkTSpace! </font><font style="vertical-align: inherit;">Oui, ce ne serait pas la norme si, d'une </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manière</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou d'une </font><em><font style="vertical-align: inherit;">autre, cela</font></em><font style="vertical-align: inherit;"> n'entraînait pas de confusion. </font><font style="vertical-align: inherit;">MikkTSpace détermine comment les données doivent être stockées dans le maillage pour chaque sommet et comment les données sont utilisées pour le rendu. </font><font style="vertical-align: inherit;">Toutes les applications compatibles MikkTSpace calculent les mêmes données de maillage pour les sommets. </font><font style="vertical-align: inherit;">Mais il existe deux façons différentes d' </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utiliser</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ces données dans le rendu. </font><font style="vertical-align: inherit;">MikkTSpace définit comment calculer le vecteur tangent et signer pour chaque sommet en fonction de l'orientation UV. </font><font style="vertical-align: inherit;">Mais lorsque vous utilisez un espace tangent, la tangente à deux points (bitangente) est recalculée soit pour chaque sommet soit pour chaque pixel. </font><font style="vertical-align: inherit;">Ce paramètre doit également être le même pour la cuisson et la visualisation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
xNormal et Substance ont la possibilité de créer des cartes normales en utilisant les deux méthodes. Ces options sont appelées «calculer l'espace tangent par fragment» dans Substance et «calculer binormal dans le pixel shader» dans xNormal. </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous n'avez pas besoin de l'</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utiliser si vous utilisez les méthodes de rendu Unity intégrées. Cependant, cela peut </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valoir la peine de le</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> faire pour SRP, selon le type que vous choisissez!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/288/f49/dc8288f495d420416d8bd2ee5ae401c3.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XNormal «pixel shader binormals» avec rendu intégré intégré Unity</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Visuellement, cela ressemble à l'utilisation d'un espace tangent complètement différent, mais il est généralement beaucoup moins prononcé. Certains visages peuvent sembler un peu déformés et ne présenteront pas de bosses importantes. La solution ici est très simple - ne sélectionnez pas cette option si vous utilisez les méthodes de rendu intégrées d'Unity. Cochez la case si vous faites cuire des moteurs Unreal ou Unity pour HDRP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nombreuses sources disent que Blender et Unity sont identiques, mais en fait ce n'est jamais vrai! Blender, comme Unity, utilise l'orientation MikkTSpace et OpenGL, mais, comme Unreal, utilise des binormals pour chaque fragment binomals.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La bonne nouvelle est que les shaders LWRP, URP et Shader Graph utilisent désormais des binormaux pour chaque sommet et les shaders HDRP intégrés pour chaque pixel. </font><font style="vertical-align: inherit;">Dans une future mise à jour de Shader Graph (7.2.0), la transition vers le calcul pixel par pixel sera effectuée, et après un certain temps, les shaders URP intégrés passeront également à celui-ci. </font><font style="vertical-align: inherit;">Et les méthodes de rendu standard peuvent être modifiées à l'aide de vos propres shaders, si vous choisissez un tel itinéraire.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trianguler, trianguler, trianguler!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le dernier problème concerne différentes manières de trianguler. </font><font style="vertical-align: inherit;">Si vous exportez des maillages sans triangulation préalable, rien ne garantit que d'autres applications trianguleront le modèle de la même manière. </font><font style="vertical-align: inherit;">Cela nuit également aux cartes normales! </font><font style="vertical-align: inherit;">Par conséquent, triangulez les maillages, soit à l'aide des options d'exportation, soit via le modificateur de triangulation.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/271/14f/174/27114f17454f66db812ec2673e72d97c.png"></div><br>
<i>  Substance Painter  ,   Unity  ,   3ds Max   (quads)</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela semble très similaire à un espace tangent complètement faux, comme si des cartes normales étaient cuites dans 3ds Max. Mais dans le cas général, ils sont un peu plus nets, presque courbés et ne ressemblent pas à une concavité lisse. Dans ce maillage, une forme en X est visible sur les faces externes. Ce problème peut être difficile et ennuyeux lorsque plusieurs personnes travaillent avec le modèle dans le pipeline de production de contenu dans différentes applications, car il est souvent utile de ne pas trianguler le maillage et d'enregistrer de beaux polygones. Dans ce cas, vous devez soit accepter les inconvénients, soit créer le dernier outil du pipeline avant d'exporter le modèle dans le jeu également utilisé pour générer un maillage utilisé pour la cuisson des normales. Comme un espace tangent avec des normales de sommets (qui font partie de l'espace tangent),la triangulation doit également correspondre exactement.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste pour créer des cartes normales parfaites pour Unity</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici donc des conseils pour générer des cartes normales d'espace tangent pour les maillages lowpoly à partir des modèles originaux highpoly à utiliser dans Unity:</font></font><br>
<br>
<ul>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pas besoin de faire</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cuire des cartes normales en utilisant 3ds Max, Maya ou toute autre application qui n'a pas l'option tangente </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MikkTSpace</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exportez les maillages sous forme de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">triangles</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , avec des </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normales</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sans</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tangentes.</font></font></strong></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choisissez </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou X + </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Z + comme orientation de la carte normale lors de la cuisson (ainsi que lors de la création d'un projet pour Substance Painter).</font></font></li>
<li><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous n'avez pas besoin d'</font></font></em> </strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> activer les options de tangentes aux deux points "</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par pixel</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " / "</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par fragment</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " lors de la cuisson pour les méthodes de rendu intégrées (proactives ou différées) ou LWRP.</font></font></li>
<li><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inclure des</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> options pour les tangentes aux deux points</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> «par pixel»</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> /</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> «par fragment»</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lors de la cuisson pour HDRP, et bientôt pour URP.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laissez les options d'importation de modèle par défaut pour Unity, avec les normales définies sur "Importer" et les tangentes sur "Calculer Mikktspace".</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout! </font><font style="vertical-align: inherit;">Chaque fois que vous obtenez des cartes normales parfaitement cuites!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a4/810/be8/3a4810be8abd5ad6cb24fca98ee9e61c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hourra! </font><font style="vertical-align: inherit;">La carte normale parfaite!</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bed/daa/477/beddaa477b105ae87e6dda113381e910.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... avec des reflets? </font><font style="vertical-align: inherit;">Ahem ..</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Eh bien, le dernier, nous l'ignorons. </font><font style="vertical-align: inherit;">Aussi «parfait» que possible avec des formats de texture compressés à 8 bits par canal. </font><font style="vertical-align: inherit;">Une carte normale tramée peut sembler un peu meilleure que les rayures, mais, malheureusement, peu d'outils offrent cette option. </font><font style="vertical-align: inherit;">Sinon, vous pouvez utiliser des cartes normales 16 bits. </font><font style="vertical-align: inherit;">Mais c'est un sujet pour un autre article.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur MikkTSpace.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le site semi-officiel de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mikktspace.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> explique bien les principaux avantages de MikkTSpace. En particulier, cet espace fonctionne bien à la fois pour le recomptage et pour le transfert de données tangentes entre des programmes avec un traitement de maillage différent, tout en maintenant l'intégrité des résultats. Le texte du site est une copie de la page wiki de Blender déjà disparue écrite par Morten S. Mikkelsen lui-même. Malheureusement, il ne mentionne que la version avec des tangentes à deux points pour chaque pixel, mais pas la version pour chaque sommet, la valeur par défaut utilisée par Unity et xNormal. Puisque Blender utilise des dérivées de tangentes par pixel, il est logique que seules elles soient mentionnées. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici des commentaires sur ces deux options du fichier </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mikktspace.h d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> origine </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<blockquote>           ,    /.<br>
<br>
<code>bitangent = fSign * cross(vN, tangent);</code><br>
<br>
…<br>
<br>
    (/    )     ,          .<br>
<br>
,   ,       ,    «»  ,       : vT, vB  vN.<br>
<br>
  (  )<br>
<br>
<code>vNout = normalize( vNt.x * vT + vNt.y * vB + vNt.z * vN );</code><br>
<br>
 vNt —    .         «» ,       ,    .<br>
<br>
…<br>
<br>
         ,     ,   ,        .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, dans l'exemple d'origine, la tangente à deux points est recréée dans le vertex shader et transmise au pixel shader comme une autre valeur interpolée. C'est ainsi que les shaders Unity normaux gèrent actuellement les maps normales. Un exemple d'exécution de cette tâche dans un pixel shader est plus un exemple impromptu qu'un exemple «principal». De plus, puisque l'implémentation pour Unity 5.3 (et xNormal?) A été créée par Morten S. Mikkelsen lui-même, et que les deux utilisent des tangentes pour chaque sommet, c'est une autre preuve de notre théorie. Mais Blender a ensuite utilisé des tangentes pixel par pixel, et Morten était également impliqué. Probablement, en fait, c'était juste une option qui a provoqué de petits changements dans les shaders Unity finis, et tandis que pour les graphiques en temps réel, aucune des méthodes n'était considérée comme bien meilleure que l'autre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'avantage de l'implémentation pixel par pixel est l'élimination de deux valeurs interpolées au prix d'un petit surcoût pour ALU (pixel shader math). Cela signifie qu'au lieu des trois valeurs de Vector3 (tangente, tangente à deux points et la normale), nous n'avons besoin que de Vector4 et Vector3 (tangente avec un signe et normale). Sur les GPU modernes, c'est un peu plus rapide. Et il est </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nettement</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus rapide lorsqu'il est exécuté dans le CPU, car il peut être utilisé pour des rendus non en temps réel. De ce point de vue, il est logique que la plupart des industriels aient décidé de recréer la tangente à deux points dans le pixel, et non au sommet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est drôle que lorsque j'ai écrit cet article, Morten ait promu la transition dans Unity SRP vers des tangentes pixel par pixel à deux points! </font><font style="vertical-align: inherit;">C'est juste une malchance que les méthodes de rendu intégrées d'Unity aient un héritage de choix incommodes.</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent dans différentes applications</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que cet article se concentre principalement sur Unity, car aujourd'hui ce moteur est devenu courant, je voulais que mon étude soit plus détaillée. </font><font style="vertical-align: inherit;">Par conséquent, j'ai créé une liste de diverses applications avec des informations sur l'utilisation de l'espace tangent.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unité (5.3+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour les sommets ou pour les pixels * </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notes:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par défaut, le moteur redéfinit de force les tangentes du maillage lors de l'importation pour utiliser MikkTSpace. Pour les utilisateurs avancés, il a des options pour utiliser le maillage tangent, mais cela ne garantit pas la compatibilité avec les cartes normales cuites dans d'autres outils, en particulier lors de l'utilisation de shaders intégrés. Ils peuvent être remplacés par des shaders entièrement propres. Et pour ses shaders intégrés, HDRP utilise des tangentes pixel par pixel à deux points. Au moment de la rédaction de cet article, il était prévu que les shaders URP et Shader Graph passeraient également en tangentes pixel par pixel sur deux points. Avant Unity 5.3, le moteur utilisait des tangentes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://web.archive.org/web/20160306000702/" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lengyel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui peuvent toujours être utilisées en sélectionnant l'option Tangents hérités dans l'importateur de maillage, mais les shaders intégrés ne prennent plus en charge cet espace tangent.</font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout: avant URP 7.2.0, le traitement des cartes normales dans Shader Graph était complètement interrompu! </font><font style="vertical-align: inherit;">Ni MikkTSpace ni même l'espace tangent de Lengyel ne sont utilisés correctement, et il est impossible de résoudre ce problème dans le Shader Graph. </font><font style="vertical-align: inherit;">Si possible, passez à 7.2.0.</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moteur irréel 4</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direct3D Y- </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixel par pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par défaut, le moteur redéfinit les tangentes du maillage lors de l'importation à l'aide de MikkTSpace. </font><font style="vertical-align: inherit;">Pour les utilisateurs avancés, il a des options pour utiliser un maillage tangent, mais cela ne garantit pas la compatibilité avec les cartes normales cuites dans d'autres outils.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Godot</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour chaque sommet </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notes:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s'il n'y a pas de données tangentes, il peut calculer des maillages tangents dans MikkTSpace lors de l'importation. </font><font style="vertical-align: inherit;">La documentation du moteur suggère d'exporter des maillages tangents, mais comme la plupart des outils n'exportent pas le maillage tangent correct, j'ignorerais cette astuce. </font><font style="vertical-align: inherit;">Même si vous utilisez le maillage tangent d'origine, rien ne garantit que les cartes normales auront l'air correctes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Playcanvas</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent: </font></font></strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://web.archive.org/web/20160306000702/" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lengyel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schüler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour chaque sommet / basé sur les dérivées </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notes:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fournit plusieurs méthodes de traitement de l'espace tangent. Les tangentes générées par le code n'utilisent pas MikkTSpace. Il a des options pour utiliser une tangente à deux points pour chaque sommet qui normalise les vecteurs d'espace tangent dans le pixel shader «fastTbn» </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sans normaliser l'</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> espace tangent dans le shader de fragment (dont nous avons </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">besoin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, car cela correspond à l'implémentation de MikkTSpace avec un calcul pour chaque sommet), ou bien ils utilisent le TBN dérivé, emprunté à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Christian Schuler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">il ignore complètement la tangente du maillage et calcule l'espace tangent dans le pixel shader. </font><font style="vertical-align: inherit;">Maintenant, par défaut, des cartes normales basées sur des dérivés sont utilisées, pour lesquelles, pour autant que je sache, il n'y a pas d'outils pour créer des cartes normales exactes. </font><font style="vertical-align: inherit;">Il est possible que vous puissiez importer des maillages avec des données normales et tangentes existantes à partir de MikkTSpace, puis utiliser l'option de matériau «fastTbn» pour faire correspondre les méthodes de rendu intégrées d'Unity, mais je pense que cela devrait être fait en code, pas via l'interface de l'éditeur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filament</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour chaque sommet </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> selon les performances futures, le moteur peut basculer en tangentes pixel par pixel à deux points.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3ds max</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direct3D Y- * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">options</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> natives d' </font><strong><font style="vertical-align: inherit;">exportation de maillage:</font></strong><font style="vertical-align: inherit;"> exportez les fichiers FBX avec Triangulate activé mais Tangents et Binormals désactivés. </font><font style="vertical-align: inherit;">Les normales doivent toujours être exportées. </font><font style="vertical-align: inherit;">Les normales divisées par sommet peuvent être désactivées. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Par défaut, 3ds Max suppose que l'orientation Direct3D est utilisée dans les cartes normales, mais dispose d'options pour inverser les orientations X et Y lors de l'utilisation de textures de carte normales sur les matériaux. </font><font style="vertical-align: inherit;">La cuisson utilise toujours l'orientation Direct3D. </font><font style="vertical-align: inherit;">La prise en charge de MikkTSpace apparaîtra dans les futures versions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maya</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace tangent: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">options</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> natives d' </font><strong><font style="vertical-align: inherit;">exportation de maillage:</font></strong><font style="vertical-align: inherit;"> exportation de fichiers FBX avec Triangulate activé, mais Tangents et Binormals désactivés. </font><font style="vertical-align: inherit;">Les normales sont toujours exportées. </font><font style="vertical-align: inherit;">Les normales divisées par sommet peuvent être désactivées. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> certaines personnes m'ont dit que Maya prend déjà partiellement en charge MikkTSpace, mais je ne sais pas dans quelle mesure.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mélangeur (2.57+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL Y + </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour chaque pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options d'exportation de </font></font></strong><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">maillage </font></strong><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> exportez des fichiers FBX avec une valeur de lissage "Normales uniquement". </font><font style="vertical-align: inherit;">Vous pouvez exporter avec ou sans Tangent Space si l'application cible utilise également MikkTSpace, comme Unity ou Unreal. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Blender n'a pas d'option de triangulation lors de l'exportation vers FBX, utilisez donc d'abord le modificateur Trianguler. </font><font style="vertical-align: inherit;">Les cartes normales cuites dans Blender ne seront pas 100% compatibles avec Unity, mais si vous inversez le canal vert dans une application tierce ou dans du matériel personnalisé, elles fonctionnent parfaitement dans Unreal.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xNormal (3.17.5+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace tangent</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisé </font><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> MikkTSpace * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisé (pour chaque sommet ou pixel) </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options pour la cuisson de cartes normales:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a des options pour inverser les trois axes de la carte normale pendant l'exportation. L'unité a besoin de X + Y + Z +. Il existe également la possibilité d'utiliser des tangentes à deux points pour chaque sommet ou pixel (c'est-à-dire fragment). Par défaut, xNormal utilise des tangentes à deux points pour chaque sommet, mais cela peut être modifié dans le menu Plugins Manager (icône de prise d'alimentation dans le coin inférieur gauche) en cliquant sur le "Calculateur de base tangente", "Mikk - TSpace" et en cliquant sur Configurer. Une fenêtre contextuelle apparaîtra avec la seule option «Calculer binormal dans le pixel shader». Il doit être désactivé pour Unity et activé pour Unreal. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bien que xNormal ne prenne en charge que MikkTSpace, son système de plugin prend en charge théoriquement tout espace tangent. </font><font style="vertical-align: inherit;">Jusqu'à présent, le seul plugin d'espace tangent que je connaisse est conçu pour cuire l'espace tangent Unity 4 et est déjà inutile. </font><font style="vertical-align: inherit;">Autrement dit, si elle est abordée de manière réaliste, l'application prend uniquement en charge MikkTSpace.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peintre de substance</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisable (OpenGL ou Direct3D) </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace tangent:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisable (pour les sommets ou pixels) </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options de cuisson pour les cartes normales:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a des options de cuisson en orientation OpenGL ou Direct3D. Et une option pour utiliser des tangentes à deux points pour chaque sommet ou pixel (fragment), qui est configurée par le paramètre "Calculer l'espace tangent par fragment". Lors de l'exportation pour les méthodes de rendu Unity intégrées, vous devez sélectionner OpenGL et désactiver le calcul de l'espace tangent par fragment dans le projet et les options d'exportation, et lors de l'exportation vers Unreal ou Unity HDRP, faites le contraire. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par défaut, Substance Painter utilise les données tangentes utilisées par le maillage importé. </font><font style="vertical-align: inherit;">Sauf si vous exportez depuis Blender, vous n'en avez pas besoin! </font><font style="vertical-align: inherit;">Mais il n'y a pas d'options pour désactiver cette fonctionnalité. </font><font style="vertical-align: inherit;">Avant d'importer dans Substance Painter, exportez les maillages </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sans</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tangentes. </font><font style="vertical-align: inherit;">Plus tôt dans la documentation de Substance, il a été affirmé à tort que les calculs de tangentes à deux points </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans Blender correspondent à Unity, mais maintenant l'erreur a été corrigée!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marmoset Toolbag 3</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace tangent</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisé </font><strong><font style="vertical-align: inherit;">: </font></strong></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calcul</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisé </font><strong><font style="vertical-align: inherit;">des tangentes à deux points pour MikkTSpace:</font></strong><font style="vertical-align: inherit;"> pixel par pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> il semble que le programme dispose d'options pour afficher ou créer des cartes normales dans presque toutes les configurations existantes. </font><font style="vertical-align: inherit;">Y compris les paramètres prêts à l'emploi pour les espaces tangents 3ds Max et Maya! </font><font style="vertical-align: inherit;">Cependant, l'option d'espace tangent «Mikk / xNormal» utilise des tangentes pixel par pixel sur deux points, et cela ne peut pas être modifié. </font><font style="vertical-align: inherit;">C'est-à-dire que le Marmoset Toolbag 3 ne peut pas afficher correctement ou créer des cartes normales pour les méthodes de rendu Unity intégrées. </font><font style="vertical-align: inherit;">Peut-être que dans les versions futures, la situation changera, car les développeurs sont conscients du problème.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DCoat</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coutume </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace Tangente:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coutume </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calcul des tangentes à deux points pour MikkTSpace</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :? </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques: Il</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dispose de nombreuses options pour afficher et créer des cartes normales. </font><font style="vertical-align: inherit;">Il est parfaitement capable de faire correspondre Blender et UE4, il prend donc en charge les tangentes pixel par pixel à deux points, mais je ne sais pas si les tangentes de sommet à deux points sont utilisées dans le préréglage Unity.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdini (16.0.514+)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace tangent</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisable </font><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> personnalisable * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixel par pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notes:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prend en charge sa propre base de tangentes ou MikkTSpace, à la fois pour l'affichage et pour la cuisson, mais uniquement dans la version pixel par pixel. </font><font style="vertical-align: inherit;">Il semble que par défaut, il n'utilise pas MikkTSpace pour le rendu, mais à partir de Houdini 17.5. </font><font style="vertical-align: inherit;">Les maillages peuvent être modifiés avec des nœuds intégrés pour utiliser le MikkTSpace tangent.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo (10+?)</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace tangent</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisé </font><strong><font style="vertical-align: inherit;">: </font></strong></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calcul</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisé </font><strong><font style="vertical-align: inherit;">des tangentes à deux points pour MikkTSpace:</font></strong><font style="vertical-align: inherit;"> personnalisé (sommet ou pixel par pixel) * </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> il semble qu'il prend en charge le rendu et la cuisson dans différents espaces tangents, ainsi que l'option de tangentes pixel par pixel à deux points pour l'exportation. </font><font style="vertical-align: inherit;">Je n'ai pas testé cela.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Knald</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orientation: </font></font></strong><font style="vertical-align: inherit;"></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">espace tangent</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> personnalisé </font><strong><font style="vertical-align: inherit;">:</font></strong><font style="vertical-align: inherit;"> MikkTSpace </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcul des tangentes à deux points pour MikkTSpace:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pixel par pixel </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Par défaut, il utilise MikkTSpace et redéfinit les tangentes des maillages importés, mais si nécessaire, il existe une option pour utiliser les maillages tangents existants. </font><font style="vertical-align: inherit;">L'orientation des cartes normales peut être inversée avec un paramètre qui s'applique à l'ensemble du projet.</font></font><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finalement</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un aspect important est que si le modèle low-poly sur lequel vous faites cuire n'est qu'un plan (par exemple, pour la texture de carrelage), alors tout ce qui est écrit est sans conséquence et vous pouvez cuire en utilisant n'importe quel outil ... si vous gardez tout simplement dans la bonne orientation ou retournez ensuite les canaux de texture correspondants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En outre, la plupart des problèmes répertoriés dans l'article ne sont visibles que sur les modèles solides. </font><font style="vertical-align: inherit;">Les formes organiques peuvent masquer les différences les plus subtiles, par exemple, la différence entre les tangentes vertex et pixel par pixel à deux points.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487920/index.html">Surcharge en C ++. Partie I. Fonctions et modèles de surcharge</a></li>
<li><a href="../fr487922/index.html">Apprendre à déployer des microservices. Partie 1. Spring Boot et Docker</a></li>
<li><a href="../fr487924/index.html">Kim Dotcom: Caught, la personne la plus recherchée en ligne. 3e partie</a></li>
<li><a href="../fr487926/index.html">En quête d'éducation physique</a></li>
<li><a href="../fr487930/index.html">Soirée conférence je veux gamedev</a></li>
<li><a href="../fr487934/index.html">Comment nous avons optimisé notre serveur DNS à l'aide des outils GO</a></li>
<li><a href="../fr487938/index.html">Présentation d'effector-dom à l'aide de l'exemple de liste de tâches</a></li>
<li><a href="../fr487940/index.html">Informatique reproductible en R. Comment séparer le code et les données?</a></li>
<li><a href="../fr487944/index.html">L'apprentissage automatique dans le secteur de l'énergie, ou pas seulement tout le monde peut regarder demain</a></li>
<li><a href="../fr487948/index.html">Authentification à deux facteurs dans OpenVPN avec bot Telegram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>