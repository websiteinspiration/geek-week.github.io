<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏽 🍕 🔴 气体流量调节器比商用解决方案便宜5倍 👨🏼‍💻 😧 👩🏽‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="气流控制器（RRG）旨在维持用户定义的流速。 RWG用于工业和研究实验室，以组织来自气瓶和公路的气体供应。市场上有Eltochpribor，MKS，Bronkhorst等设备，其价格为1000-2500美元。这项工作的目的是从更易接近的组件中创建一个气流调节器。这个想法是要组织一个包括比例阀和流量计...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>气体流量调节器比商用解决方案便宜5倍</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487402/"><img src="https://habrastorage.org/webt/-h/ul/-l/-hul-lbhy5ca5cfsciofuph5xte.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
气流控制器（RRG）旨在维持用户定义的流速。 RWG用于工业和研究实验室，以组织来自气瓶和公路的气体供应。市场上有Eltochpribor，MKS，Bronkhorst等设备，其价格为1000-2500美元。这项工作的目的是从更易接近的组件中创建一个气流调节器。这个想法是要组织一个包括比例阀和流量计的反馈系统。下面是系统硬件和软件的简要说明，它允许将其复制给在活动中使用RRG的每个人。所有源代码都可以在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub上获得</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们使用了SMC产品，PVQ系列阀门和PFM5系列流量计，但没有指示。</font><font style="vertical-align: inherit;">如图所示，两个RWG的可调流量范围分别为0.2-5 L / min（PVQ13 + PFM510）和1-50 L / min（PVQ31 + PFM550）。</font><font style="vertical-align: inherit;">可以从上面估算一个流量调节器的成本为100美元（PVQ31阀门）+ 80美元（PFM5表）+ 20美元（Arduino Nano微控制器，电源和无线电组件）= 200美元。</font><font style="vertical-align: inherit;">下文所述的所有内容均适用于RWG 1-50 l / min。</font><font style="vertical-align: inherit;">按照相同的方案创建一个0.2-5 l / min的调节器以及其他类似组件的调节器，但细节上可能有所不同。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">硬件</font></font></h4><br>
<img src="https://habrastorage.org/webt/ij/he/sy/ijhesyjtgz47jzjpquizlets53e.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
硬件如图所示，包括：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比例阀PVQ31 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PFM550流量计 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过滤 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电源单元（24V，1A） </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电流控制电路 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Nano微控制器及其电源方案 </font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/7t/3n/hc/7t3nhc2fexnzhtff08igsq7gw9q.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
组件的电气连接图如图所示。</font><font style="vertical-align: inherit;">为了给电路供电，使用24 V，1 A直流电源，如果阀的消耗小于200 mA，仪表的电流小于35 mA，则该电流就足够了。</font><font style="vertical-align: inherit;">PVQ系列比例阀是电流控制的。</font><font style="vertical-align: inherit;">根据文档，不建议通过电压控制对其进行控制。</font><font style="vertical-align: inherit;">可以使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更详细</font><font style="vertical-align: inherit;">讨论的电路来实现电流控制</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">电流控制电路在普通电路（图3）上以虚线矩形突出显示。</font><font style="vertical-align: inherit;">PVQ系列阀门通过两根电源线连接：红色-DC +，黑色-DC-。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电流强度通过微控制器的模拟引脚产生的PWM信号进行调节。默认情况下，基于ATmega328的控制器（Arduino UNO / Nano / Pro Mini）会生成一个8位（0-255值）PWM信号，其频率为488或976 Hz，具体取决于引脚。低PWM信号宽度降低了阀门控制的精度。低频导致其嗡嗡声。这些值可以通过编程方式分别增加到10位（0-1023）和15.6 kHz。我们使用了7.8 kHz的频率。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">这里</font></a><font style="vertical-align: inherit;">和</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">此处</font></a></font><code>setup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要插入</font><font style="vertical-align: inherit;">Arduino固件</font><font style="vertical-align: inherit;">功能的命令的描述</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PFM5系列流量计具有2条信号线（黑色-模拟输出，白色-响应时间设置（未使用））和两根电源线（棕色-DC +，蓝色-DC-）。由24 V直流电源供电，流量计给出的模拟信号范围为1-5 V，1 V的值对应于零气体流速，即5 V-该流量计的最大值。根据文档，流量和电压之间的关系是线性的。同时，定期校准流量计似乎是值得的。来自流量计（黑线）的模拟信号由10位（0-1023）Arduino模拟引脚接收，以进行处理和显示。白线用于设置响应时间，我们不使用它。在这种情况下，响应时间为50毫秒。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino开发板应通过5V引脚供电，电源电压不应超过5.5V。该电源可以从阀门PSU和流量计通过L7805稳定器提供，如图所示（图3）。最有可能需要在稳定器上安装散热器。在测试过程中使用计算机的USB端口供电（图2）是不可取的，因为在这种情况下，使用ADC时参考电压不稳定。有关板电源的更多信息，请参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">软件部分</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
软件部分由Arduino Nano微控制器的固件和在PC上运行的图形用户界面组成。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下载到微控制器的程序周期性地执行以下操作：</font></font><br>
<br>
<ol>
<li>       ,   </li>
<li> ,        </li>
<li>   ,               - </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该系统可以在手动和自动模式下运行。在手动操作过程中，所需的阀开度值</font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">由变量</font><font style="vertical-align: inherit;">（0 &lt;= </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023）表示）</font><font style="vertical-align: inherit;">应发送到串行端口</font><font style="vertical-align: inherit;">。此变量的值确定PWM信号的占用率，该信号通过微控制器的模拟输出发送到电流控制电路和比例阀命令</font></font><code>analogWrite(valvepin, valve)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。打开后，阀门保持在设定位置，直到通过串行端口收到新命令为止。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要切换到自动操作，必须将负号发送到串行端口</font></font><code>-targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。可变值</font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围为0-1023，并确定应保持的气体流速。实际的气体流速由流量计读数确定，流量计读数通过命令</font></font><code>realflow = analogRead(fmpin)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（0 &lt;= </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023）</font><font style="vertical-align: inherit;">从微控制器的模拟输入中读取</font><font style="vertical-align: inherit;">。在自动模式下，系统会</font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过</font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制比例阀</font><font style="vertical-align: inherit;">来保持两者之间的相等性</font><font style="vertical-align: inherit;">。阀门开度值是使用比例积分微分（PID）控制器计算的。你可以阅读关于PID控制器的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">GyverPID</font></a><font style="vertical-align: inherit;">库用于实现控制器</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行一些更改和补充。由于该库已被修改，因此请使用此代码附带的库，而不要从上面的链接下载该库。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要使用PID控制器，必须选择比例</font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，积分</font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和微分</font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分量</font><font style="vertical-align: inherit;">的系数</font><font style="vertical-align: inherit;">以及迭代时间</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须根据系统的惯量选择</font><font style="vertical-align: inherit;">变量的值</font><font style="vertical-align: inherit;">。系统越惰性，应该越多</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。根据相关设备的额定值和测试结果，我们选择值</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 100-330 ms。的系数</font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以固定值选择</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且很大程度上取决于系统。</font><font style="vertical-align: inherit;">有关系数选择的建议可在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处找到</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，微控制器循环执行的算法如下：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(    )<font></font>
	   <span class="hljs-function">inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &gt;= <span class="hljs-number">0</span> &amp;&amp; inp &lt; <span class="hljs-number">1023</span>)</span>
		  
		    inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &lt;= <span class="hljs-number">0</span> &amp;&amp; inp &gt;= <span class="hljs-number">-1023</span>)</span>
		  
		     -inp 
<span class="hljs-title">if</span><span class="hljs-params">(  &amp;&amp;      dtpid )</span>
	      -
	    
<span class="hljs-title">if</span><span class="hljs-params">(     dt )</span>
	   
	   
	   
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
图形用户界面使用PyQt图形框架以Python编写。</font><font style="vertical-align: inherit;">该设计是在Qt Designer程序中创建的，然后将.ui文件的代码转换为Python文件。</font><font style="vertical-align: inherit;">有关GUI开发和PyQt用法的介绍，请参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
图形界面使用库通过串行端口与Arduino固件进行交互</font></font><code>pyserial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Python程序执行以下操作：</font></font><br>
<br>
<ol>
<li>      </li>
<li>          ,        ,     </li>
<li>     0-1023,   ,    </li>
<li>  .3     </li>
<li>    ,     ( 0-1023) </li>
<li>  .5            </li>
</ol><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
借用了用于连接到串行端口的代码</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该模块旨在用于从用户单位传输到0-1023范围</font></font><code>units.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该模块使添加新单元变得容易。</font><font style="vertical-align: inherit;">要求用户指出单位名称和从0-1023到新单位的转换公式。</font><font style="vertical-align: inherit;">该模块提供了详细的注释。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从流量计接收并由微控制器固件输出到串行端口的数据由Python程序从端口读取，并在转换单位后以文本和图形形式显示。</font><font style="vertical-align: inherit;">一个库用来绘制电流消耗图</font></font><code>pyqtgraph</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要开始使用RRG，您需要：刷新微控制器，接通电源，运行Python程序，建立与串行端口的连接。此后，用户可以选择操作模式（手动或自动），并在手动操作模式下设置所需的阀门开度值或在自动模式下设置支持的流量值。当前气体流速显示在相应的字段中，并显示在图表上。达到指定的点数后，将周期性地更新图形，然后将图形清除并重新开始绘图。用户可以选择使用的单位。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1s/kd/jf/1skdjfks-dwbv2_4bxv5lko9rso.png" alt="图片"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该图显示了图形用户界面的外观以及在自动模式下获得的气体流量的图表，并显示了RGG在支持的流量的不同值之间的切换。</font><font style="vertical-align: inherit;">结果以0-1023为单位给出。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了说明保持恒定气体流量的可能性，我们考虑了当比例阀以恒定值“浮动”打开时的流量的情况，如下图的左侧（x &lt;950）所示。</font><font style="vertical-align: inherit;">在图表的右侧可以看到自动维持设定流量的操作结果（x&gt; 1000）。</font><font style="vertical-align: inherit;">测试表明，在自动保持模式下与设定流量的偏差不超过2％。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/ni/5w/cgni5wyzma05n_8uxijteltnacu.png" alt="图片"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备注</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不需要使用Arduino Nano微控制器，因为仅涉及其引脚的一小部分。</font><font style="vertical-align: inherit;">另一方面，最好使用模拟输入/输出的位容量更大的微控制器，以提高测量和调整的精度。</font><font style="vertical-align: inherit;">更改微控制器的类型时，可能有必要实现自己的PID控制器；这不会造成困难，因为算法很简单。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在开发阶段，将电路组装在试验板上（参见图2）。</font><font style="vertical-align: inherit;">为了进一步使用，必须焊接电路并将其放置在外壳中。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文的作者既不是电子工程师也不是程序员，因此，欢迎提出建设性的改进建议。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加材料</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino固件和Python程序的源代码以及所用流量计和比例阀的文档可在</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">GitHub</font></a><font style="vertical-align: inherit;">上</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">致谢</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们感谢我们的同事对这项工作中实施的系统的想法。</font><font style="vertical-align: inherit;">AlexGyver和其他用户慷慨分享了我们在工作中使用的信息的经验。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用由比例阀，流量计和微控制器组成的反馈系统，可以使RRG保持给定的气体流量。</font><font style="vertical-align: inherit;">测试表明与所需流量的偏差在2％以内。</font><font style="vertical-align: inherit;">该系统的成本不到200美元。</font><font style="vertical-align: inherit;">组装好的原型在各种条件下均显示出可操作性。</font><font style="vertical-align: inherit;">进一步使用可能需要改进，包括对电路进行布线，制造外壳等。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN487402/">https://habr.com/ru/post/zh-CN487402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN487388/index.html">自然发展：如何从电子学习过渡到知识管理</a></li>
<li><a href="../zh-CN487390/index.html">没有Shadow DOM的Web组件</a></li>
<li><a href="../zh-CN487392/index.html">磁铁想了解有关其客户的什么信息？</a></li>
<li><a href="../zh-CN487394/index.html">安德鲁·安（Andrew Un）的书《机器学习的激情》第34和35章的翻译</a></li>
<li><a href="../zh-CN487400/index.html">掌握SCADA 4D。ARM上有生命吗？</a></li>
<li><a href="../zh-CN487404/index.html">GoLang和OpenCV（OpenVino && Cuda）</a></li>
<li><a href="../zh-CN487406/index.html">使用binwalk对家用路由器进行反向工程。您信任路由器的软件吗？</a></li>
<li><a href="../zh-CN487408/index.html">创建容错IT基础架构。第3部分。VyOS路由器上的路由组织</a></li>
<li><a href="../zh-CN487412/index.html">带索引的朋友ORDER BY</a></li>
<li><a href="../zh-CN487414/index.html">计算机任务是学习英语单词的绝佳工具</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>