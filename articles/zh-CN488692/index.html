<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏼 #⃣ 💇🏽 如何将大型流程从IBM BPM迁移到Camunda而不停止功能开发 💲 ⛳️ 👏🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="嗨，我叫Denis，我在Tinkoff工作，负责BPM系统。在本文中，我将以大型流程为例，向您介绍如何从IBM BPM遗留系统迁移到开源Camunda流程引擎。最后，我将邀请您参加将于2月27日在莫斯科廷科夫（Vodny Stadion地铁）举行的关于Camunda 的第四次会议。
 
 
 BPM...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>如何将大型流程从IBM BPM迁移到Camunda而不停止功能开发</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/488692/"><img src="https://habrastorage.org/getpro/habr/post_images/862/841/fa0/862841fa0f6cc3595ca621b319e56595.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
嗨，我叫Denis，我在Tinkoff工作，负责BPM系统。</font><font style="vertical-align: inherit;">在本文中，我将以大型流程为例，向您介绍如何从IBM BPM遗留系统迁移到开源Camunda流程引擎。</font><font style="vertical-align: inherit;">最后，我将邀请您</font><font style="vertical-align: inherit;">参加将于2月27日在莫斯科廷科夫（Vodny Stadion地铁）举行的关于Camunda </font><font style="vertical-align: inherit;">的第四</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次会议</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BPMS系统和BPMN作为对其进行编程的一种方式</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过编程可以进行编程的想法</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">广受欢迎</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，市场每年都在增长。</font><font style="vertical-align: inherit;">一些企业获得了非常</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出色的结果。</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了做出好的项目并成功销售，BPMS系统除了“吃” BPMN文件外，还必须能够：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定流程中的特定执行者</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为用户，实施者和管理员提供界面</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">致电外部服务，发送和收听事件等。</font><font style="vertical-align: inherit;">通常，能够“陷入”代码</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供数据建模和存储</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遵守业务规则</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试创建的所有内容</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们在Tinkoff中使用了IBM BPM BPMS，由于它的复杂性和这些功能的可接受范围，它帮助我们进行了开发。</font><font style="vertical-align: inherit;">但是我们决定拒绝它。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放弃IBM BPM的原因</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们意识到，由于BPMS系统的强大功能，我们仅使用：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bpmn文件的解释</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">陷入代码</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其他事物已转移到其他系统，例如：</font></font><br>
<ul>
<li>       ,     — , ,        .         ,     BPMS.          ,    —    CRM Siebel.</li>
<li>     Siebel   CRM-.  Siebel      ,     —       -     UI.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在许多消费者需要对数据进行CRUD操作的情况下，数据存储已转移到Siebel，而在单独的应用程序中。</font><font style="vertical-align: inherit;">IBM BPM允许您以关系样式模拟数据，他为模型创建板。</font><font style="vertical-align: inherit;">但是它将所有内容都存储在一个数据库中以供所有进程使用，从而创建了额外的连接性并增加了数据库的负载。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于业务规则，我们传统上使用IBM ODM，现在我们开始使用我们的Kotlin框架。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，在开发风格中，我们没有学习如何在IBM BPM上测试应用程序。 </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有一些我们不喜欢的一般性问题：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们切换到Kotlin和Spring，这在IBM BPM中很困难。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很少有专家或希望使用此产品的专家。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方案\代码联合开发的困难，本质上是一种垄断的开发模式。 </font></font></li>
<li>   4     3  ( ~40   ),   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另外，值得一提的是邻居吵闹的问题-许可限制迫使我们将许多产品推到一个集群中。</font><font style="vertical-align: inherit;">我们试图在不同的业务流程中重用通用代码，这给修改代码带来了困难。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，有一个SMS发送代码被2种产品使用-现金结算服务和外包会计。</font><font style="vertical-align: inherit;">以前，文本是在组件级别进行硬编码的，但是现在“外包记帐”过程希望从该过程中转移SMS的文本。</font><font style="vertical-align: inherit;">但是CSC流程不希望这样做，但必须在任何地方进行更改。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
或平庸的bug可能会占据整个基础，因此许多产品虽然不应该受到指责，但却无法正常工作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我的同事Nikolai在上一篇</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">文章中</font></a><font style="vertical-align: inherit;">写道，他们为什么选择Camunda </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
</a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么是大过程</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们决定从IBM转移大型流程（但是，起初，我们只培训了一个小型流程）：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每月超过10万个实例。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超过70平方</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与其他系统的30多个集成</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快速增长的积压 </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是在Tinkoff Business中开设活期帐户的过程。</font><font style="vertical-align: inherit;">不可能以一种方法来转移这样的过程，这将需要暂停3-4个月的开发，这对于业务发展的步伐不是很合适。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们决定逐步解决并重构即将出现的一切。</font><font style="vertical-align: inherit;">为了解决嘈杂的邻居的问题，我们提出了一个单独的应用程序，该应用程序仅负责现金结算服务的应用程序。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在顶层，该过程如下所示：</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/191/228/457/191228457c8b6c086fede13bc21ad58e.png" alt="图片"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过渡规则</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1号：停止挖掘</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们决定停止在旧应用程序中添加新功能。</font><font style="vertical-align: inherit;">当任务出现在待办事项列表中时，我们尝试确定与之相关的box \ component \ service，并在Camunda中从头开始重写了此内容。</font><font style="vertical-align: inherit;">有时成本是1.2倍（如果是在IBM，则为x），有时是3倍或5倍。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃2：Camunda对IBM一无所知</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重构后，我们只想关闭旧应用程序，因此我们决定在Camunda中添加新功能，以使它对IBM一无所知。</font><font style="vertical-align: inherit;">两件事帮助了我们：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储在Siebel中的业务数据</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Camuda的现成的API，可帮助您完全了解流程的完成方式。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 结果，我们在IBM进行了启动并从Camunda接收结果的流程：</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/a88/521/478/a8852147810435720aac078fc75e0863.png" alt="图片"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第三：漫长的“手动任务”和粘合过程</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，我们将简单的单步同步调用移至Camunda，一切正常。</font><font style="vertical-align: inherit;">之后，我们开始将这些东西粘贴到正常的“业务流程”中，并开始出现用户的期望。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
用户可以执行多年的任务，因此我们开始有大量任务来手动修复垃圾桶中的流程。</font><font style="vertical-align: inherit;">我们以这种方式赢得了胜利-我们只是开始考虑Camunda中特定任务的类型，而没有考虑可能长时间等待的任务的垃圾桶。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4个：功能切换到前叉</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有些代码太混乱了，以至于从头开始编写并查看它是否工作正常更容易。</font><font style="vertical-align: inherit;">为此，将IBM功能引入网关。</font><font style="vertical-align: inherit;">我们向Camuda发送了一些申请，然后看了一下笔，一切正常。</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/4b8/ac7/540/4b8ac75407b2e38f381bbe7105c4a4bd.png" alt="图片"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将实例从IBM迁移到Camunda</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最终，IBM的流程仅包括对Camunda的调用，而在Camunda收集了3个级别的流程。</font><font style="vertical-align: inherit;">业务流程本身并没有太大变化，因此我们设法将旧实例从IBM转移到Camunda到相同的等待点。</font><font style="vertical-align: inherit;">并关闭IBM。</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/b43/334/cf0/b43334cf00c1813aa3585aade0909ea8.png" alt="图片"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您有类似情况该怎么办</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您想使用BPMS旧版迁移到Camunda，则：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将上下文移到单独的数据库。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将用户界面移动到单独的应用程序。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停止在旧应用程序中编码新功能。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用单向呼叫，以便Camunda不了解旧系统。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从小盒子开始，但不要忘记漫长的自定义任务。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这种方法帮助我们将事件数量减少了14倍，将回归时间减少了4倍，使日常发布成为可能，并将手动测试的成本减少了4倍。</font><font style="vertical-align: inherit;">现在，有5个人正在从事该项目，并且与9个人在IBM从事的工作量相同。</font><font style="vertical-align: inherit;">希望您的结果不会更糟。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Camunda邀请参加第4场比赛</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2020年2月27日（星期四）19:30在莫斯科Golovinskoye Shosse 5A，Vodny商业中心，我们将在Camunda举行另一次会议。</font><font style="vertical-align: inherit;">您可以在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接上</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册并阅读有关扬声器的信息</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">来！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN488674/index.html">图表与Excel和PowerPoint</a></li>
<li><a href="../zh-CN488678/index.html">Node.js对小缓冲区的需求很大</a></li>
<li><a href="../zh-CN488682/index.html">如何测试Python编程技能？Yandex的任务</a></li>
<li><a href="../zh-CN488686/index.html">使用Flowmon网络来监视分布式应用程序和数据库的性能</a></li>
<li><a href="../zh-CN488690/index.html">最小距离字符识别</a></li>
<li><a href="../zh-CN488696/index.html">引领潮流</a></li>
<li><a href="../zh-CN488698/index.html">访问控制即服务：访问控制系统中的云视频监控</a></li>
<li><a href="../zh-CN488700/index.html">实施了微标记，但没有扩展的片段：10个可能的原因</a></li>
<li><a href="../zh-CN488702/index.html">一个自然数列及其元素的模型。多行单元格</a></li>
<li><a href="../zh-CN488706/index.html">2DOOM-基于浏览器的2D致敬传奇射击游戏</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>