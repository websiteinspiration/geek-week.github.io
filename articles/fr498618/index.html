<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎩 🆓 👎🏼 Android dans un contrôleur industriel 🛥️ ✌🏿 👨🏿‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans tout travail d'ingénierie, la pensée évolue de manière à appliquer en développement les solutions les plus adaptées en même temps à tous égards. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Android dans un contrôleur industriel</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans tout travail d'ingénierie, la pensée évolue de manière à appliquer en développement les solutions les plus adaptées en même temps à tous égards. Et dans une industrie où l'automatisation est nécessaire, le contrôle tacite de certains processus, l'intervention humaine est même indésirable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceux. si vous avez besoin de surveiller certains objets dans des ateliers industriels sans contact, sans collecter de longs fils, collecter des statistiques dans une base de données pour analyse, alors pourquoi ne pas essayer depuis longtemps déjà familier ... les smartphones Android.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez des compétences en programmation pour Android, alors, pour ainsi dire, tout le matériel pour le contrôleur industriel sur le smartphone possède déjà: des capteurs, des communications mobiles et une batterie pour une certaine autonomie. Eh bien, l'affichage, bien sûr, est également nécessaire pendant un certain temps. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, si quelqu'un fabriquait soudainement un appareil Android compact et fiable avec du matériel exactement comme un smartphone, mais sans écran - ce serait l'idéal. Et, oui - ce n'est pas seulement un dongle HDMI-WiFi pour un téléviseur, à savoir avec une batterie, un module GSM et un appareil photo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur affectation - aucun capteur ne peut être utilisé, chaud. Très chaud. Ceux. vous devez contrôler le non-contact - rien d'autre qu'une caméra fera l'affaire. Il y a suffisamment de codes QR pour que la caméra contrôle les objets nécessaires. Mais en même temps, le contrôleur doit être situé dans un endroit frais, avec des températures normales. Tout se révèle réel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'Internet mobile est désormais dans les villes, même dans les entreprises - il est tout à fait supportable, au moins l'opérateur peut être capté avec un niveau de signal tolérant. Et même la 4G peut déjà être utilisée, bien que, bien sûr, le niveau du signal puisse être sur le point de s'éteindre - mais plus à ce sujet plus tard. Ainsi, l'envoi de données au serveur (avec accumulation préalable dans la base de données locale) car Internet est disponible n'est pas un problème.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après un développement préliminaire du logiciel et des tests, il s'avère que les conditions de température pour le smartphone sont entièrement fournies, des températures allant jusqu'à 40 degrés. Les batteries au lithium modernes sur les smartphones sont entièrement déclarées jusqu'à 45 ° C, et à 50 - les smartphones modernes qui contrôlent la température avec un capteur intégré dans la batterie - commencent à "crier" à propos de la surchauffe et à désactiver par programme la charge s'il est connecté. Par conséquent, le refroidissement doit être pris en compte. Pour que la faisabilité soit déjà pleinement prouvée, le système est simple dans la structure générale, toutes les pièces du système s'intègrent parfaitement dans la tête - cela signifie, «en avant et avec la chanson», à coder.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit du développement du boîtier du contrôleur, nous incluons un smartphone Android avec un adaptateur secteur, avec une entrée réfléchie dans le câble d'alimentation. Et un système de refroidissement. Ce qui, comme il s'avère plus tard, est très nécessaire, et pas seulement pour refroidir le fer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moment venu, et le système fonctionne déjà pleinement, le serveur montre aux utilisateurs les plaques de données et les graphiques, vérifie les plages des paramètres mesurés et informe les utilisateurs des prochaines f ... k-ups, puis progressivement ... les nuances d'un système structurellement "simple" commencent à apparaître ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non, il n'y a pas de problème avec la batterie, le smartphone est constamment connecté au chargeur, le contrôleur de batterie interne est génial, gonfle et fait son travail continu. Mais il s'avère que pour la reconnaissance fiable des codes QR, l'angle de la caméra, l'éclairage et les ombres couvrant partiellement le code, et l'état du code, qui s'éteint progressivement à haute température, sont importants en même temps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puis, après un mois de tests de «combat», il apparaît soudain que la qualité de reconnaissance des QR codes s'est progressivement dégradée tout ce temps, et maintenant cela ne convient plus du tout: il s'avère que la poussière est constamment présente dans l'air, ce qui n'est pas visible lors d'une brève inspection de l'atelier, mais qui s'installe progressivement sur le verre recouvrant l'objectif de la caméra. Une couche de poussière se rassemble lentement et ... il est clair comment cela se termine, à la fin.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est là que le système de refroidissement est devenu pratique, non seulement pour le refroidissement, mais aussi pour la protection contre la poussière, créant une pression d'air «excessive» de l'intérieur, soufflant autour de l'objectif et empêchant la poussière de se déposer sur l'objectif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant tous ces événements, bien sûr, il y a un débogage continu des logiciels, des algorithmes, sur le matériel, auxquels les développeurs n'ont pas d'accès physique - le tout uniquement par télécommande. Quelques sorties par jour, comme l'algorithme général de fonctionnement des équipements en atelier, décrit à l'avance, parfaitement compris dans les dessins et dessins, contient également en réalité un tas de petites nuances. Et les algorithmes de vérification du code se multiplient continuellement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la gestion à distance et les mises à jour logicielles dans Android, TeamViewer Host est utilisé (utilisé!), Il n'y a eu aucun problème, probablement 4-5 mois, tout était merveilleusement connecté, l'accès à l'écran du smartphone l'était. Tout a fonctionné via Internet 4g d'un opérateur fédéral russe, en mode gratuit. Bien sûr, nous pensions que tôt ou tard, il serait nécessaire d'acquérir une licence commerciale, car composer soi-même l'ensemble du système de télécommande est inopportun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout n'était pas mal tant que les développeurs de TeamViewer n'ont pas commencé à mettre à jour quelque chose sur leur système et que nous n'y avions pas accès. Eh bien, logiquement, nous pensions que cela était dû à une restriction gratuite, alors que c'était un honneur de le savoir, et nous avons acquis une licence (longtemps et pas complètement censurée par surprise à son prix). Mais cela n'a pas aidé - c'était le début des problèmes techniques de TeamViewer, qui ont nécessité la réinstallation du client et des paramètres et une confirmation sur l'écran du smartphone. À laquelle il n'y avait ni accès physique ni virtuel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'accès au système n'a ensuite été restauré qu'en atteignant physiquement le smartphone - j'ai oublié de mentionner que le smartphone était nouveau dans le magasin, avec le firmware officiel. Sans accès root à toutes les fonctions du système d'exploitation. Et cela a plutôt bien fonctionné pendant un certain temps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En bref, à propos de TeamViewer (TV) - après ces premiers tourments, le paiement du compte professionnel a été retourné (uniquement par téléphone, aucun moyen d'obtenir une assistance via Internet n'est irréaliste). Il est devenu clair que nous avions besoin d'alternatives à la télévision. Plus tard, lorsque la situation s'est répétée, pour une raison quelconque, nous avons franchi cette étape pour la deuxième fois avec l'acquisition d'un compte commercial TeamViewer, mais il est devenu clair que nous ne sommes pas tourmentés seuls, mais un groupe d'utilisateurs avec des montagnes d'appareils Android avec une licence commerciale. Et le travail avec ce logiciel a été suspendu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et il est devenu clair que pour tout équipement industriel, la chose la plus importante est la possibilité de redémarrer. Y compris une commande à distance externe. Pour retrouver l'accès au système, quels que soient les problèmes logiciels. Et conformément à cela, il a été décidé de fabriquer un smartphone avec root et de développer son logiciel de contrôle à distance supplémentaire, via son propre serveur, avec bien sûr la possibilité de redémarrer le smartphone. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et un tel logiciel a été développé, et son utilisation a été confirmée plus d'une fois: en plus du contrôle à distance via le serveur, des commandes ont été implémentées via des messages SMS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant tout ce temps, un seul composant du système n'était pas satisfaisant et fonctionnait presque 24 heures sur 24, et même surpris, car Plus de six mois de fonctionnement continu du système via la 4G se sont déjà écoulés. Le smartphone était contrôlé, les données circulaient, la possibilité de redémarrer à distance plusieurs fois a aidé à surmonter les problèmes de son propre logiciel principal qui fonctionne avec l'appareil photo et les codes QR. Internet a disparu très rarement et littéralement en quelques dizaines de secondes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais rien n'est «toujours sous la lune», et une fois que le système a disparu. Absolument. Ni données sur le serveur, ni données de géolocalisation Google, ni réponse via son propre logiciel de télécommande. Eh bien, il est temps de réinitialiser le système via une commande dans un message SMS. Mais la FIG. Et ça n'a pas aidé. Et la commande pour activer la connexion Internet n'a pas aidé.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le même temps, un appel entrant au numéro de la carte SIM insérée dans le smartphone s'est complètement passé, peu importe le nombre de fois que vous vérifiez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pensais déjà que les méchants kulhackers étaient entrés dans le système, avaient supprimé tous mes logiciels Android, et à la fin ils avaient «claqué la porte» - coupant l'Internet mobile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, l'opérateur télécom a répondu que "nous nous excusons, le problème technique avec la cellule que vous utilisez". Mais l'appel fonctionne, mais pas le SMS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et puis je me suis souvenu qu'à une époque j'avais prévu l'inclusion forcée du WiFi dans le logiciel, je ne sais pas pourquoi - cette connexion n'est pas utilisée dans les magasins de l'entreprise. Et le smartphone était autrefois connecté au WiFi au stade du développement, bien sûr. Reste à essayer sur un autre smartphone pour allumer le point d'accès WiFi, nommez-le avec le nom de mon réseau domestique, définissez le mot de passe correspondant au réseau et ... et BINGO - l'ironie est entrée en contact! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pas un seul SMS après le problème de cet opérateur sur Android, mon logiciel ne les a pas reçus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et juste en faisant un redémarrage du morceau de fer alors qu'il y avait le WiFi-Internet, il a été possible de restaurer la carte SIM de l'opérateur et Internet mobile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, la possibilité de redémarrer à l'aide d'un appel entrant régulier est incluse dans le logiciel de télécommande, de sorte qu'un tel montant de l'opérateur n'interfère pas avec le travail.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusion: le système fonctionne pendant environ 10 mois, la batterie du smartphone est OK, l'appareil photo est OK. </font><font style="vertical-align: inherit;">Il n'est donc pas nécessaire d'assembler ou d'acheter un ordinateur industriel coûteux, de lui connecter des périphériques externes - il est tout à fait possible de le faire avec un smartphone Android moderne. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais je suis sûr qu'il ne réussira pas à éviter les «hémorroïdes» et toutes sortes de nuances désagréables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et j'ai fait cette conclusion pour moi-même: les étapes de configuration d'un smartphone Android pour un travail à distance hors ligne dans le cadre d'un contrôleur industriel</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Choisir un appareil à usage industriel - uniquement avec la possibilité d'obtenir Root (pour la possibilité de redémarrer)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tout mettre à jour automatiquement possible et désactiver les mises à jour</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obtenez Root sur l'appareil (!)</font></font></li>
<li>  ()  Google Play Market —  (   ),       </li>
<li>      : «    »</li>
<li>   :  « »</li>
<li>  SIM- –  - ( SIM —  !)</li>
<li>    SIM-:   </li>
<li>    RemoteControl —       </li>
<li>      (AirDroid, Teamviewer Host)  </li>
<li>   -  ( ,  )</li>
<li>     -</li>
<li>   </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installez le lanceur par défaut (application hôte) (si possible, configurez au dernier moment)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installer votre utilitaire RemoteReset - redémarrer Android rooté par SMS et appeler (!) - vérifier le redémarrage et le démarrage automatique de tout ce qui précède (et vérifier le fonctionnement via Internet)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Activez le WiFi et connectez-vous aux réseaux à l'avance: notamment au point d'accès mobile depuis le smartphone de l'opérateur; pour un accès alternatif du smartphone à Internet avec activation locale de ce point d'accès)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Charger la batterie</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lancer l'application hôte principale</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Déconnectez l'appareil jusqu'à ce qu'il soit allumé pendant l'installation</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: les détails plus détaillés, bien sûr, ne permettent pas le partage des obligations commerciales / légales.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr498604/index.html">Supprimez vos enfants de nos écrans bleus, ou pourquoi vous ne pouvez pas acheter Yandex.Station pour un enfant</a></li>
<li><a href="../fr498608/index.html">Making of NES gameinvitro "MULTIDEFENDER"</a></li>
<li><a href="../fr498610/index.html">Comment réutiliser du code avec des bundles symfony 5? Partie 3. Intégration du bundle avec l'hôte: modèles, styles, JS</a></li>
<li><a href="../fr498612/index.html">Ne décidez pas pour le designer la tâche du designer</a></li>
<li><a href="../fr498614/index.html">Analyse d'une série de vidéos promotionnelles pour le jeu Spin Voyage</a></li>
<li><a href="../fr498620/index.html">Toucher le monde: biomécanique des récepteurs de la peau humaine</a></li>
<li><a href="../fr498624/index.html">[Instruction] Création de tests Google (formulaires Google)</a></li>
<li><a href="../fr498628/index.html">Comment construire un accélérateur de fusée pour les scripts PowerCLI </a></li>
<li><a href="../fr498630/index.html">Simulation physique de centaines de milliers de particules sur Unity + DOTS</a></li>
<li><a href="../fr498632/index.html">Peptide pour un beau mulâtre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>