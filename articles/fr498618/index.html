<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé© üÜì üëéüèº Android dans un contr√¥leur industriel üõ•Ô∏è ‚úåüèø üë®üèø‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans tout travail d'ing√©nierie, la pens√©e √©volue de mani√®re √† appliquer en d√©veloppement les solutions les plus adapt√©es en m√™me temps √† tous √©gards. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Android dans un contr√¥leur industriel</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans tout travail d'ing√©nierie, la pens√©e √©volue de mani√®re √† appliquer en d√©veloppement les solutions les plus adapt√©es en m√™me temps √† tous √©gards. Et dans une industrie o√π l'automatisation est n√©cessaire, le contr√¥le tacite de certains processus, l'intervention humaine est m√™me ind√©sirable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceux. si vous avez besoin de surveiller certains objets dans des ateliers industriels sans contact, sans collecter de longs fils, collecter des statistiques dans une base de donn√©es pour analyse, alors pourquoi ne pas essayer depuis longtemps d√©j√† familier ... les smartphones Android.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez des comp√©tences en programmation pour Android, alors, pour ainsi dire, tout le mat√©riel pour le contr√¥leur industriel sur le smartphone poss√®de d√©j√†: des capteurs, des communications mobiles et une batterie pour une certaine autonomie. Eh bien, l'affichage, bien s√ªr, est √©galement n√©cessaire pendant un certain temps. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, si quelqu'un fabriquait soudainement un appareil Android compact et fiable avec du mat√©riel exactement comme un smartphone, mais sans √©cran - ce serait l'id√©al. Et, oui - ce n'est pas seulement un dongle HDMI-WiFi pour un t√©l√©viseur, √† savoir avec une batterie, un module GSM et un appareil photo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur affectation - aucun capteur ne peut √™tre utilis√©, chaud. Tr√®s chaud. Ceux. vous devez contr√¥ler le non-contact - rien d'autre qu'une cam√©ra fera l'affaire. Il y a suffisamment de codes QR pour que la cam√©ra contr√¥le les objets n√©cessaires. Mais en m√™me temps, le contr√¥leur doit √™tre situ√© dans un endroit frais, avec des temp√©ratures normales. Tout se r√©v√®le r√©el. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'Internet mobile est d√©sormais dans les villes, m√™me dans les entreprises - il est tout √† fait supportable, au moins l'op√©rateur peut √™tre capt√© avec un niveau de signal tol√©rant. Et m√™me la 4G peut d√©j√† √™tre utilis√©e, bien que, bien s√ªr, le niveau du signal puisse √™tre sur le point de s'√©teindre - mais plus √† ce sujet plus tard. Ainsi, l'envoi de donn√©es au serveur (avec accumulation pr√©alable dans la base de donn√©es locale) car Internet est disponible n'est pas un probl√®me.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s un d√©veloppement pr√©liminaire du logiciel et des tests, il s'av√®re que les conditions de temp√©rature pour le smartphone sont enti√®rement fournies, des temp√©ratures allant jusqu'√† 40 degr√©s. Les batteries au lithium modernes sur les smartphones sont enti√®rement d√©clar√©es jusqu'√† 45 ¬∞ C, et √† 50 - les smartphones modernes qui contr√¥lent la temp√©rature avec un capteur int√©gr√© dans la batterie - commencent √† "crier" √† propos de la surchauffe et √† d√©sactiver par programme la charge s'il est connect√©. Par cons√©quent, le refroidissement doit √™tre pris en compte. Pour que la faisabilit√© soit d√©j√† pleinement prouv√©e, le syst√®me est simple dans la structure g√©n√©rale, toutes les pi√®ces du syst√®me s'int√®grent parfaitement dans la t√™te - cela signifie, ¬´en avant et avec la chanson¬ª, √† coder.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit du d√©veloppement du bo√Ætier du contr√¥leur, nous incluons un smartphone Android avec un adaptateur secteur, avec une entr√©e r√©fl√©chie dans le c√¢ble d'alimentation. Et un syst√®me de refroidissement. Ce qui, comme il s'av√®re plus tard, est tr√®s n√©cessaire, et pas seulement pour refroidir le fer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moment venu, et le syst√®me fonctionne d√©j√† pleinement, le serveur montre aux utilisateurs les plaques de donn√©es et les graphiques, v√©rifie les plages des param√®tres mesur√©s et informe les utilisateurs des prochaines f ... k-ups, puis progressivement ... les nuances d'un syst√®me structurellement "simple" commencent √† appara√Ætre ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Non, il n'y a pas de probl√®me avec la batterie, le smartphone est constamment connect√© au chargeur, le contr√¥leur de batterie interne est g√©nial, gonfle et fait son travail continu. Mais il s'av√®re que pour la reconnaissance fiable des codes QR, l'angle de la cam√©ra, l'√©clairage et les ombres couvrant partiellement le code, et l'√©tat du code, qui s'√©teint progressivement √† haute temp√©rature, sont importants en m√™me temps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puis, apr√®s un mois de tests de ¬´combat¬ª, il appara√Æt soudain que la qualit√© de reconnaissance des QR codes s'est progressivement d√©grad√©e tout ce temps, et maintenant cela ne convient plus du tout: il s'av√®re que la poussi√®re est constamment pr√©sente dans l'air, ce qui n'est pas visible lors d'une br√®ve inspection de l'atelier, mais qui s'installe progressivement sur le verre recouvrant l'objectif de la cam√©ra. Une couche de poussi√®re se rassemble lentement et ... il est clair comment cela se termine, √† la fin.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est l√† que le syst√®me de refroidissement est devenu pratique, non seulement pour le refroidissement, mais aussi pour la protection contre la poussi√®re, cr√©ant une pression d'air ¬´excessive¬ª de l'int√©rieur, soufflant autour de l'objectif et emp√™chant la poussi√®re de se d√©poser sur l'objectif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant tous ces √©v√©nements, bien s√ªr, il y a un d√©bogage continu des logiciels, des algorithmes, sur le mat√©riel, auxquels les d√©veloppeurs n'ont pas d'acc√®s physique - le tout uniquement par t√©l√©commande. Quelques sorties par jour, comme l'algorithme g√©n√©ral de fonctionnement des √©quipements en atelier, d√©crit √† l'avance, parfaitement compris dans les dessins et dessins, contient √©galement en r√©alit√© un tas de petites nuances. Et les algorithmes de v√©rification du code se multiplient continuellement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la gestion √† distance et les mises √† jour logicielles dans Android, TeamViewer Host est utilis√© (utilis√©!), Il n'y a eu aucun probl√®me, probablement 4-5 mois, tout √©tait merveilleusement connect√©, l'acc√®s √† l'√©cran du smartphone l'√©tait. Tout a fonctionn√© via Internet 4g d'un op√©rateur f√©d√©ral russe, en mode gratuit. Bien s√ªr, nous pensions que t√¥t ou tard, il serait n√©cessaire d'acqu√©rir une licence commerciale, car composer soi-m√™me l'ensemble du syst√®me de t√©l√©commande est inopportun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout n'√©tait pas mal tant que les d√©veloppeurs de TeamViewer n'ont pas commenc√© √† mettre √† jour quelque chose sur leur syst√®me et que nous n'y avions pas acc√®s. Eh bien, logiquement, nous pensions que cela √©tait d√ª √† une restriction gratuite, alors que c'√©tait un honneur de le savoir, et nous avons acquis une licence (longtemps et pas compl√®tement censur√©e par surprise √† son prix). Mais cela n'a pas aid√© - c'√©tait le d√©but des probl√®mes techniques de TeamViewer, qui ont n√©cessit√© la r√©installation du client et des param√®tres et une confirmation sur l'√©cran du smartphone. √Ä laquelle il n'y avait ni acc√®s physique ni virtuel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'acc√®s au syst√®me n'a ensuite √©t√© restaur√© qu'en atteignant physiquement le smartphone - j'ai oubli√© de mentionner que le smartphone √©tait nouveau dans le magasin, avec le firmware officiel. Sans acc√®s root √† toutes les fonctions du syst√®me d'exploitation. Et cela a plut√¥t bien fonctionn√© pendant un certain temps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En bref, √† propos de TeamViewer (TV) - apr√®s ces premiers tourments, le paiement du compte professionnel a √©t√© retourn√© (uniquement par t√©l√©phone, aucun moyen d'obtenir une assistance via Internet n'est irr√©aliste). Il est devenu clair que nous avions besoin d'alternatives √† la t√©l√©vision. Plus tard, lorsque la situation s'est r√©p√©t√©e, pour une raison quelconque, nous avons franchi cette √©tape pour la deuxi√®me fois avec l'acquisition d'un compte commercial TeamViewer, mais il est devenu clair que nous ne sommes pas tourment√©s seuls, mais un groupe d'utilisateurs avec des montagnes d'appareils Android avec une licence commerciale. Et le travail avec ce logiciel a √©t√© suspendu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et il est devenu clair que pour tout √©quipement industriel, la chose la plus importante est la possibilit√© de red√©marrer. Y compris une commande √† distance externe. Pour retrouver l'acc√®s au syst√®me, quels que soient les probl√®mes logiciels. Et conform√©ment √† cela, il a √©t√© d√©cid√© de fabriquer un smartphone avec root et de d√©velopper son logiciel de contr√¥le √† distance suppl√©mentaire, via son propre serveur, avec bien s√ªr la possibilit√© de red√©marrer le smartphone. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et un tel logiciel a √©t√© d√©velopp√©, et son utilisation a √©t√© confirm√©e plus d'une fois: en plus du contr√¥le √† distance via le serveur, des commandes ont √©t√© impl√©ment√©es via des messages SMS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant tout ce temps, un seul composant du syst√®me n'√©tait pas satisfaisant et fonctionnait presque 24 heures sur 24, et m√™me surpris, car Plus de six mois de fonctionnement continu du syst√®me via la 4G se sont d√©j√† √©coul√©s. Le smartphone √©tait contr√¥l√©, les donn√©es circulaient, la possibilit√© de red√©marrer √† distance plusieurs fois a aid√© √† surmonter les probl√®mes de son propre logiciel principal qui fonctionne avec l'appareil photo et les codes QR. Internet a disparu tr√®s rarement et litt√©ralement en quelques dizaines de secondes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais rien n'est ¬´toujours sous la lune¬ª, et une fois que le syst√®me a disparu. Absolument. Ni donn√©es sur le serveur, ni donn√©es de g√©olocalisation Google, ni r√©ponse via son propre logiciel de t√©l√©commande. Eh bien, il est temps de r√©initialiser le syst√®me via une commande dans un message SMS. Mais la FIG. Et √ßa n'a pas aid√©. Et la commande pour activer la connexion Internet n'a pas aid√©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le m√™me temps, un appel entrant au num√©ro de la carte SIM ins√©r√©e dans le smartphone s'est compl√®tement pass√©, peu importe le nombre de fois que vous v√©rifiez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pensais d√©j√† que les m√©chants kulhackers √©taient entr√©s dans le syst√®me, avaient supprim√© tous mes logiciels Android, et √† la fin ils avaient ¬´claqu√© la porte¬ª - coupant l'Internet mobile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, l'op√©rateur t√©l√©com a r√©pondu que "nous nous excusons, le probl√®me technique avec la cellule que vous utilisez". Mais l'appel fonctionne, mais pas le SMS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et puis je me suis souvenu qu'√† une √©poque j'avais pr√©vu l'inclusion forc√©e du WiFi dans le logiciel, je ne sais pas pourquoi - cette connexion n'est pas utilis√©e dans les magasins de l'entreprise. Et le smartphone √©tait autrefois connect√© au WiFi au stade du d√©veloppement, bien s√ªr. Reste √† essayer sur un autre smartphone pour allumer le point d'acc√®s WiFi, nommez-le avec le nom de mon r√©seau domestique, d√©finissez le mot de passe correspondant au r√©seau et ... et BINGO - l'ironie est entr√©e en contact! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pas un seul SMS apr√®s le probl√®me de cet op√©rateur sur Android, mon logiciel ne les a pas re√ßus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et juste en faisant un red√©marrage du morceau de fer alors qu'il y avait le WiFi-Internet, il a √©t√© possible de restaurer la carte SIM de l'op√©rateur et Internet mobile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, la possibilit√© de red√©marrer √† l'aide d'un appel entrant r√©gulier est incluse dans le logiciel de t√©l√©commande, de sorte qu'un tel montant de l'op√©rateur n'interf√®re pas avec le travail.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusion: le syst√®me fonctionne pendant environ 10 mois, la batterie du smartphone est OK, l'appareil photo est OK. </font><font style="vertical-align: inherit;">Il n'est donc pas n√©cessaire d'assembler ou d'acheter un ordinateur industriel co√ªteux, de lui connecter des p√©riph√©riques externes - il est tout √† fait possible de le faire avec un smartphone Android moderne. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais je suis s√ªr qu'il ne r√©ussira pas √† √©viter les ¬´h√©morro√Ødes¬ª et toutes sortes de nuances d√©sagr√©ables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et j'ai fait cette conclusion pour moi-m√™me: les √©tapes de configuration d'un smartphone Android pour un travail √† distance hors ligne dans le cadre d'un contr√¥leur industriel</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Choisir un appareil √† usage industriel - uniquement avec la possibilit√© d'obtenir Root (pour la possibilit√© de red√©marrer)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tout mettre √† jour automatiquement possible et d√©sactiver les mises √† jour</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obtenez Root sur l'appareil (!)</font></font></li>
<li>  ()  Google Play Market ‚Äî  (   ),       </li>
<li>      : ¬´    ¬ª</li>
<li>   :  ¬´ ¬ª</li>
<li>  SIM- ‚Äì  - ( SIM ‚Äî  !)</li>
<li>    SIM-:   </li>
<li>    RemoteControl ‚Äî       </li>
<li>      (AirDroid, Teamviewer Host)  </li>
<li>   -  ( ,  )</li>
<li>     -</li>
<li>   </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installez le lanceur par d√©faut (application h√¥te) (si possible, configurez au dernier moment)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installer votre utilitaire RemoteReset - red√©marrer Android root√© par SMS et appeler (!) - v√©rifier le red√©marrage et le d√©marrage automatique de tout ce qui pr√©c√®de (et v√©rifier le fonctionnement via Internet)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Activez le WiFi et connectez-vous aux r√©seaux √† l'avance: notamment au point d'acc√®s mobile depuis le smartphone de l'op√©rateur; pour un acc√®s alternatif du smartphone √† Internet avec activation locale de ce point d'acc√®s)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Charger la batterie</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lancer l'application h√¥te principale</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> D√©connectez l'appareil jusqu'√† ce qu'il soit allum√© pendant l'installation</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: les d√©tails plus d√©taill√©s, bien s√ªr, ne permettent pas le partage des obligations commerciales / l√©gales.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr498604/index.html">Supprimez vos enfants de nos √©crans bleus, ou pourquoi vous ne pouvez pas acheter Yandex.Station pour un enfant</a></li>
<li><a href="../fr498608/index.html">Making of NES gameinvitro "MULTIDEFENDER"</a></li>
<li><a href="../fr498610/index.html">Comment r√©utiliser du code avec des bundles symfony 5? Partie 3. Int√©gration du bundle avec l'h√¥te: mod√®les, styles, JS</a></li>
<li><a href="../fr498612/index.html">Ne d√©cidez pas pour le designer la t√¢che du designer</a></li>
<li><a href="../fr498614/index.html">Analyse d'une s√©rie de vid√©os promotionnelles pour le jeu Spin Voyage</a></li>
<li><a href="../fr498620/index.html">Toucher le monde: biom√©canique des r√©cepteurs de la peau humaine</a></li>
<li><a href="../fr498624/index.html">[Instruction] Cr√©ation de tests Google (formulaires Google)</a></li>
<li><a href="../fr498628/index.html">Comment construire un acc√©l√©rateur de fus√©e pour les scripts PowerCLI¬†</a></li>
<li><a href="../fr498630/index.html">Simulation physique de centaines de milliers de particules sur Unity + DOTS</a></li>
<li><a href="../fr498632/index.html">Peptide pour un beau mul√¢tre</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>