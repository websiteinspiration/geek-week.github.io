<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¡ ğŸ’ƒğŸ¿ ğŸ‘¨ğŸ¼â€ğŸ”§ ä½¿ç”¨æŸ¥æ‰¾æ´¾ç”Ÿç¤ºä¾‹çš„Cï¼ƒä¸­çš„è¡¨è¾¾å¼æ ‘ï¼ˆè¡¨è¾¾å¼æ ‘è®¿é—®è€…ä¸æ¨¡å¼åŒ¹é…ï¼‰ ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§ ğŸ’¦ ğŸ‘¦ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç¾å¥½çš„ä¸€å¤©ã€‚è¡¨è¾¾å¼æ ‘ï¼Œå°¤å…¶æ˜¯ä¸Visitoræ¨¡å¼ç»“åˆä½¿ç”¨æ—¶ï¼Œä¸€ç›´æ˜¯ä¸€ä¸ªä»¤äººå›°æƒ‘çš„è¯é¢˜ã€‚å› æ­¤ï¼Œæœ‰å…³æ­¤ä¸»é¢˜çš„ä¿¡æ¯è¶Šä¸°å¯Œï¼Œç¤ºä¾‹è¶Šå¤šï¼Œé‚£äº›æœ‰å…´è¶£çš„äººå°†æ›´å®¹æ˜“æ‰¾åˆ°å¯¹ä»–ä»¬è€Œè¨€æ¸…æ™°è€Œæœ‰ç”¨çš„å†…å®¹ã€‚
 
 
 
 è¿™ç¯‡æ–‡ç« ç…§å¸¸æ„å»º-ä»æ¦‚å¿µæ¡†æ¶å’Œå®šä¹‰å¼€å§‹ï¼Œä»¥ç¤ºä¾‹å’Œä½¿ç”¨æ–¹å¼ç»“æŸã€‚ç›®å½•å¦‚ä¸‹ã€‚
 
 è¡¨è¾¾å¼æ ‘çš„åŸºæœ¬çŸ¥è¯†è¡¨è¾¾å¼...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨æŸ¥æ‰¾æ´¾ç”Ÿç¤ºä¾‹çš„Cï¼ƒä¸­çš„è¡¨è¾¾å¼æ ‘ï¼ˆè¡¨è¾¾å¼æ ‘è®¿é—®è€…ä¸æ¨¡å¼åŒ¹é…ï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486972/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¾å¥½çš„ä¸€å¤©ã€‚</font><font style="vertical-align: inherit;">è¡¨è¾¾å¼æ ‘ï¼Œå°¤å…¶æ˜¯ä¸Visitoræ¨¡å¼ç»“åˆä½¿ç”¨æ—¶ï¼Œä¸€ç›´æ˜¯ä¸€ä¸ªä»¤äººå›°æƒ‘çš„è¯é¢˜ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæœ‰å…³æ­¤ä¸»é¢˜çš„ä¿¡æ¯è¶Šä¸°å¯Œï¼Œç¤ºä¾‹è¶Šå¤šï¼Œé‚£äº›æœ‰å…´è¶£çš„äººå°†æ›´å®¹æ˜“æ‰¾åˆ°å¯¹ä»–ä»¬è€Œè¨€æ¸…æ™°è€Œæœ‰ç”¨çš„å†…å®¹ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xt/6c/bf/xt6cbf1-gfkv4-64zs250n_-7pa.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ç¯‡æ–‡ç« ç…§å¸¸æ„å»º-ä»æ¦‚å¿µæ¡†æ¶å’Œå®šä¹‰å¼€å§‹ï¼Œä»¥ç¤ºä¾‹å’Œä½¿ç”¨æ–¹å¼ç»“æŸã€‚</font><font style="vertical-align: inherit;">ç›®å½•å¦‚ä¸‹ã€‚</font></font><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨è¾¾å¼æ ‘çš„åŸºæœ¬çŸ¥è¯†è¡¨è¾¾å¼æ ‘çš„</font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯­æ³•è¡¨è¾¾å¼</font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹</font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å¼åŒ¹é…</font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤©çœŸçš„æ¥è®¿è€…</font></font></a></b><br>
 <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»å…¸æ¥è®¿è€…</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å—¯ï¼Œç›®æ ‡ä¸æ˜¯å¼ºåŠ ç‰¹å®šçš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿä¸æ˜¯è¯´ä¸€ç§è§£å†³æ–¹æ¡ˆæ¯”å¦ä¸€ç§æ›´å¥½ã€‚</font><font style="vertical-align: inherit;">è€ƒè™‘åˆ°æ‚¨æ¡ˆä»¶ä¸­çš„æ‰€æœ‰ç»†å¾®å·®åˆ«ï¼Œæˆ‘å»ºè®®è‡ªå·±å¾—å‡ºç»“è®ºã€‚</font><font style="vertical-align: inherit;">æˆ‘å°†ä»¥æˆ‘çš„æ¦œæ ·å‘è¡¨æ„è§ã€‚</font></font><br>
<br>
<a name="basic"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨è¾¾æ ‘</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºç¡€</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæ‚¨éœ€è¦å¤„ç†è¡¨è¾¾å¼æ ‘ã€‚å®ƒä»¬è¡¨ç¤ºExpressionçš„ç±»å‹æˆ–å…¶ä»»ä½•ç»§æ‰¿äººï¼ˆç¨åå°†è®¨è®ºå®ƒä»¬ï¼‰ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè¡¨è¾¾å¼/ç®—æ³•ä»¥å¯æ‰§è¡Œä»£ç /æŒ‡ä»¤çš„å½¢å¼å‘ˆç°ï¼Œè€Œç”¨æˆ·å¯èƒ½æ²¡æœ‰å¤ªå¤šè¦åšï¼ˆä¸»è¦æ˜¯æ‰§è¡Œï¼‰ã€‚ Expressionç±»å‹å…è®¸æ‚¨å°†è¡¨è¾¾å¼/ç®—æ³•ï¼ˆé€šå¸¸ä¸ºlambdaï¼Œä½†ä¸æ˜¯å¿…éœ€çš„ï¼‰è¡¨ç¤ºä¸ºä»¥ç”¨æˆ·å¯ä»¥è®¿é—®çš„æ ‘ç»“æ„ç»„ç»‡çš„æ•°æ®ã€‚ä»¥æ ‘çŠ¶æ–¹å¼ç»„ç»‡æœ‰å…³ç®—æ³•å’Œç±»åç§°çš„ä¿¡æ¯çš„æ–¹å¼ä¸ºæˆ‘ä»¬æä¾›äº†â€œè¡¨è¾¾å¼æ ‘â€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æ¸…æ¥šèµ·è§ï¼Œæˆ‘ä»¬å°†åˆ†æä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰lambda </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆxï¼‰=&gt; Console.WriteLineï¼ˆx + 5ï¼‰</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¿™å¯ä»¥è¡¨ç¤ºä¸ºä»¥ä¸‹æ ‘</font></font><br>
<br>
<div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/yv/wy/sq/yvwysqugbtttw-gvz07tipuq-oy.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ‘çš„æ ¹æ˜¯</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MethodCall</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„é¡¶éƒ¨ï¼Œ</font><font style="vertical-align: inherit;">æ–¹æ³•çš„å‚æ•°ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œå› æ­¤å®ƒå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„å­ä»£ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œåªæœ‰ä¸€ä¸ªåä»£-â€œ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ArithmeticOperation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â€ </font><font style="vertical-align: inherit;">çš„å³°å€¼</font><font style="vertical-align: inherit;">ã€‚å®ƒåŒ…å«æœ‰å…³å®ƒæ˜¯å“ªç§æ“ä½œçš„ä¿¡æ¯ï¼Œå·¦å³æ“ä½œæ•°ä¹Ÿæ˜¯è¡¨è¾¾å¼ã€‚è¿™æ ·çš„é¡¶ç‚¹å°†å§‹ç»ˆå…·æœ‰2ä¸ªåä»£ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ“ä½œæ•°ç”±å¸¸é‡ï¼ˆ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Constant</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰å’Œå‚æ•°ï¼ˆ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰è¡¨ç¤ºã€‚è¿™æ ·çš„è¡¨è¾¾æ²¡æœ‰åä»£ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›æ˜¯éå¸¸ç®€åŒ–çš„ç¤ºä¾‹ï¼Œä½†å……åˆ†ä½“ç°äº†æœ¬è´¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¡¨è¾¾å¼æ ‘çš„ä¸»è¦ç‰¹å¾æ˜¯å¯ä»¥å¯¹å…¶è¿›è¡Œè§£æï¼Œå¹¶è¯»å–æœ‰å…³ç®—æ³•åº”æ‰§è¡Œçš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ã€‚ä»æŸäº›è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸å±æ€§ç›¸åã€‚å±æ€§æ˜¯å¯¹è¡Œä¸ºè¿›è¡Œå£°æ˜å¼æè¿°çš„ä¸€ç§æ‰‹æ®µï¼ˆéå¸¸æœ‰æ¡ä»¶ï¼Œä½†æœ€ç»ˆç›®æ ‡å¤§è‡´ç›¸åŒï¼‰ã€‚è€Œè¡¨è¾¾å¼æ ‘æ­£åœ¨ä½¿ç”¨å‡½æ•°/ç®—æ³•æ¥æè¿°æ•°æ®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼Œå®ƒä»¬åœ¨</font><font style="vertical-align: inherit;">å®ä½“æ¡†æ¶</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æä¾›ç¨‹åºä¸­ä½¿ç”¨</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¯¥åº”ç”¨ç¨‹åºå¾ˆæ˜æ˜¾-è§£æè¡¨è¾¾å¼æ ‘ï¼Œäº†è§£åœ¨é‚£é‡Œåº”è¯¥æ‰§è¡Œçš„æ“ä½œï¼Œå¹¶æ ¹æ®æ­¤æè¿°åˆ¶ä½œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚é²œä¸ºäººçŸ¥çš„ä¾‹å­æ˜¯ç”¨äºmokingçš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moq</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº“</font><font style="vertical-align: inherit;">ã€‚è¡¨è¾¾å¼æ ‘ä¹Ÿç”¨äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DLRã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆåŠ¨æ€è¯­è¨€è¿è¡Œæ—¶ï¼‰ã€‚</font><font style="vertical-align: inherit;">ç¼–è¯‘å™¨å¼€å‘äººå‘˜ä½¿ç”¨å®ƒä»¬æ¥ç¡®ä¿åŠ¨æ€ç‰¹æ€§å’Œdotnetä¹‹é—´çš„å…¼å®¹æ€§ï¼Œè€Œä¸æ˜¯ç”Ÿæˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MSIL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿˜å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¡¨è¾¾å¼æ ‘æ˜¯ä¸å¯å˜çš„ã€‚</font></font><br>
<a name="syn"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¥æ³•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥å€¼å¾—è®¨è®ºçš„æ˜¯è¯­æ³•ã€‚</font><font style="vertical-align: inherit;">æœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡Expressionç±»çš„é™æ€æ–¹æ³•åˆ›å»ºè¡¨è¾¾å¼æ ‘</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨åœ¨Expressionä¸­ç¼–è¯‘çš„Lambdaè¡¨è¾¾å¼</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨è¾¾å¼ç±»çš„é™æ€æ–¹æ³•</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡Expressionç±»çš„é™æ€æ–¹æ³•åˆ›å»ºè¡¨è¾¾å¼æ ‘çš„ä½¿ç”¨è¾ƒå°‘ï¼ˆå°¤å…¶æ˜¯ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼‰ã€‚è¿™å¾ˆéº»çƒ¦ï¼Œä½†å¾ˆç®€å•ï¼Œæˆ‘ä»¬æœ‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¸å¤šåŸºæœ¬çš„ç§¯æœ¨å¯ä¾›ä½¿ç”¨ï¼Œæ‚¨å¯ä»¥ç”¨å®ƒä»¬æ¥æ„å»ºç›¸å½“å¤æ‚çš„</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸œè¥¿ã€‚åˆ›å»ºæ˜¯é€šè¿‡é™æ€æ–¹æ³•è¿›è¡Œçš„ï¼Œå› ä¸ºè¡¨è¾¾å¼æ„é€ å™¨æœ‰ä¸€ä¸ª</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†…éƒ¨</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿®é¥°ç¬¦</font><font style="vertical-align: inherit;">ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€æ‚¨éœ€è¦å‘ç°åå°„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼Œæˆ‘å°†ä»ä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªè¡¨è¾¾å¼ï¼š</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆxï¼‰=&gt; Console.WriteLineï¼ˆx + 5ï¼‰</font></font></i></b><br>
<br>
<pre><code class="cs hljs">ParameterExpression parameter = Expression.Parameter(<span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
ConstantExpression constant = Expression.Constant(<span class="hljs-number">5</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
BinaryExpression <span class="hljs-keyword">add</span> = Expression.Add(parameter, constant);<font></font>
MethodInfo writeLine = <span class="hljs-keyword">typeof</span>(Console).GetMethod(<span class="hljs-keyword">nameof</span>(Console.WriteLine), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });<font></font>
MethodCallExpression methodCall = Expression.Call(<span class="hljs-literal">null</span>, writeLine, <span class="hljs-keyword">add</span>);<font></font>
Expression&lt;Action&lt;<span class="hljs-keyword">double</span>&gt;&gt; expressionlambda = Expression.Lambda&lt;Action&lt;<span class="hljs-keyword">double</span>&gt;&gt;(methodCall, parameter);<font></font>
Action&lt;<span class="hljs-keyword">double</span>&gt; delegateLambda = expressionlambda.Compile();<font></font>
delegateLambda(<span class="hljs-number">123321</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™å¯èƒ½ä¸æ˜¯å¾ˆæ–¹ä¾¿çš„æ–¹æ³•ï¼Œä½†æ˜¯å®ƒå®Œå…¨åæ˜ äº†è¡¨è¾¾å¼æ ‘çš„å†…éƒ¨ç»“æ„ã€‚</font><font style="vertical-align: inherit;">å¦å¤–ï¼Œæ­¤æ–¹æ³•æä¾›äº†æ›´å¤šçš„åŠŸèƒ½å’Œå¯åœ¨è¡¨è¾¾å¼æ ‘ä¸­ä½¿ç”¨çš„åŠŸèƒ½ï¼šä»å¾ªç¯ï¼Œæ¡ä»¶ï¼Œtry-catchï¼Œgotoï¼Œèµ‹å€¼ï¼Œä»¥æ•…éšœå—ç»“å°¾ï¼Œè°ƒè¯•ä¿¡æ¯ï¼Œæ–­ç‚¹ï¼ŒåŠ¨æ€ç­‰ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lambdaè¡¨è¾¾å¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨lambdaä½œä¸ºè¡¨è¾¾å¼æ˜¯ä¸€ç§æ›´å¸¸è§çš„æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">å®ƒçš„å·¥ä½œéå¸¸ç®€å•-ç¼–è¯‘é˜¶æ®µçš„æ™ºèƒ½ç¼–è¯‘å™¨æŸ¥çœ‹lambdaçš„ç”¨é€”ã€‚</font><font style="vertical-align: inherit;">å¹¶å°†å…¶ç¼–è¯‘ä¸ºå§”æ‰˜æˆ–è¡¨è¾¾å¼ã€‚</font><font style="vertical-align: inherit;">åœ¨ä¸€ä¸ªå·²ç»æŒæ¡çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒçœ‹èµ·æ¥å¦‚ä¸‹</font></font><br>
<br>
<pre><code class="cs hljs">Expression&lt;Action&lt;<span class="hljs-keyword">double</span>&gt;&gt; write =  =&gt; Console.WriteLine( + <span class="hljs-number">5</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å€¼å¾—æ¾„æ¸…è¿™æ ·çš„äº‹æƒ…-è¡¨è¾¾å¼æ˜¯è¯¦å°½çš„æè¿°ã€‚</font><font style="vertical-align: inherit;">è¿™è¶³ä»¥</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è·å¾—ç»“æœã€‚</font><font style="vertical-align: inherit;">è¯¸å¦‚LambdaExpressionæˆ–å…¶åä»£ä¹‹ç±»çš„è¡¨è¾¾å¼æ ‘å¯ä»¥</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è½¬æ¢ä¸ºå¯æ‰§è¡ŒILã€‚</font><font style="vertical-align: inherit;">å…¶ä½™ç±»å‹ä¸èƒ½ç›´æ¥è½¬æ¢ä¸ºå¯æ‰§è¡Œä»£ç ï¼ˆä½†è¿™æ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼‰ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœæœ‰äººæ‰¹è¯„å¿«é€Ÿç¼–è¯‘è¡¨è¾¾å¼ï¼Œå¯ä»¥çœ‹çœ‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™ä¸ª</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬ä¸‰æ–¹é¡¹ç›®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›¸åï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸æ­£ç¡®çš„ã€‚</font><font style="vertical-align: inherit;">ä»£è¡¨ä¸èƒ½åªæ˜¯æ‹¿èµ·å®ƒå¹¶ä»¥è¡¨è¾¾æ–¹å¼ä»‹ç»è‡ªå·±ï¼ˆä½†è¿™ä»ç„¶æ˜¯å¯èƒ½çš„ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¶éæ‰€æœ‰çš„lambdaéƒ½å¯ä»¥è½¬æ¢ä¸ºè¡¨è¾¾å¼æ ‘ã€‚</font><font style="vertical-align: inherit;">è¿™äº›åŒ…æ‹¬ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…å«èµ‹å€¼è¿ç®—ç¬¦</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ¨æ€è´¡çŒ®</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼‚æ­¥</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¦èº«ä½“ï¼ˆå¤§æ‹¬å·ï¼‰</font></font></li>
</ul><br>
<pre><code class="cs hljs"><span class="hljs-keyword">double</span> variable;
<span class="hljs-keyword">dynamic</span> <span class="hljs-keyword">dynamic</span>;<font></font>
Expression&lt;Action&gt; assignment = () =&gt; variable = <span class="hljs-number">5</span>; <span class="hljs-comment">//Compiler error: An expression tree may not contain an assignment operator</span>
Expression&lt;Func&lt;<span class="hljs-keyword">double</span>&gt;&gt; dynamically = () =&gt; <span class="hljs-keyword">dynamic</span>; <span class="hljs-comment">//Compiler error: An expression tree may not contain a dynamic operation</span>
Expression&lt;Func&lt;Task&gt;&gt; asynchon = <span class="hljs-keyword">async</span> () =&gt; <span class="hljs-keyword">await</span> Task.CompletedTask; <span class="hljs-comment">//Compiler error: Async lambda cannot be converted to expresiion trees</span>
Expression&lt;Action&gt; body = () =&gt; { }; <span class="hljs-comment">//Compiler error: A lambda expression with a statement body cannot be converted to an expression tree</span>
</code></pre> <br>
<a name="types"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨è¾¾å¼ç±»å‹</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å»ºè®®å¿«é€Ÿæµè§ˆå¯ç”¨çš„ç±»å‹ï¼Œä»¥è¡¨ç¤ºæˆ‘ä»¬æ‹¥æœ‰çš„æœºä¼šã€‚</font><font style="vertical-align: inherit;">æ‰€æœ‰è¿™äº›éƒ½ä½äº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System.Linq.Expressions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘½åç©ºé—´ä¸­ï¼Œ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å»ºè®®æ‚¨å…ˆç†Ÿæ‚‰ä¸€äº›çœŸæ­£æœ‰è¶£ä¸”ä¸å¯»å¸¸çš„åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">æˆ‘å°†åœ¨å¹³æ¿ç”µè„‘ä¸­æ”¾åœ¨ä¸€èµ·çš„ç®€å•ç±»å‹çš„è¡¨è¾¾å¼è¿›è¡Œç®€è¦è¯´æ˜ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ¨æ€</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨DynamicExpressionï¼Œå¯ä»¥åœ¨è¡¨è¾¾å¼æ ‘ä¸­ä½¿ç”¨åŠ¨æ€åŠå…¶æ‰€æœ‰åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">æœ‰ä¸€ä¸ªç›¸å½“æ··ä¹±çš„APIï¼Œæˆ‘åœ¨æœ¬ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ—¶é—´æ¯”åœ¨æ‰€æœ‰å…¶ä»–ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ—¶é—´æ›´é•¿ã€‚</font><font style="vertical-align: inherit;">æ‰€æœ‰çš„å›°æƒ‘éƒ½æ˜¯ç”±ä¸€å †å„ç§å„æ ·çš„æ ‡å¿—æä¾›çš„ã€‚</font><font style="vertical-align: inherit;">å…¶ä¸­ä¸€äº›ä¸æ‚¨è¦å¯»æ‰¾çš„ç±»ä¼¼ï¼Œä½†ä¸ä¸€å®šã€‚</font><font style="vertical-align: inherit;">å½“ä½¿ç”¨åŠ¨æ€è¡¨è¾¾å¼æ ‘æ—¶ï¼Œå¾ˆéš¾è¯´å‡ºä¸€ä¸ªé”™è¯¯ã€‚</font><font style="vertical-align: inherit;">ä¾‹ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> parameter1 = Expression.Parameter(<span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">object</span>), <span class="hljs-string">"name1"</span>);
<span class="hljs-keyword">var</span> parameter2 = Expression.Parameter(<span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">object</span>), <span class="hljs-string">"name2"</span>); 
<span class="hljs-keyword">var</span> dynamicParam1 = CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, <span class="hljs-literal">null</span>);
<span class="hljs-keyword">var</span> dynamicParam2 = CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, <span class="hljs-literal">null</span>);<font></font>
CallSiteBinder csb = Microsoft.CSharp.RuntimeBinder.Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Add, <span class="hljs-keyword">typeof</span>(Program), <span class="hljs-keyword">new</span>[] { dynamicParam1, dynamicParam2 });
<span class="hljs-keyword">var</span> dyno = Expression.Dynamic(csb, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">object</span>), parameter1, parameter2);<font></font>
Expression&lt;Func&lt;<span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>&gt;&gt; expr = Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>&gt;&gt;(dyno, <span class="hljs-keyword">new</span>[] { parameter1, parameter2 });<font></font>
Func&lt;<span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>, <span class="hljs-keyword">dynamic</span>&gt; action = expr.Compile();
<span class="hljs-keyword">var</span> res = action(<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>);<font></font>
Console.WriteLine(res); <span class="hljs-comment">//12</span>
res = action(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<font></font>
Console.WriteLine(res); <span class="hljs-comment">//3</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æ˜ç¡®æŒ‡å‡ºäº†æ´»é¡µå¤¹çš„æ¥æºï¼Œä»¥é¿å…ä¸System.Reflectionä¸­çš„æ´»é¡µå¤¹æ··æ·†ã€‚</font><font style="vertical-align: inherit;">æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œrefå’Œoutå‚æ•°ï¼Œå‘½åå‚æ•°ï¼Œä¸€å…ƒè¿ç®—ï¼Œå¹¶ä¸”åŸåˆ™ä¸Šå¯ä»¥é€šè¿‡åŠ¨æ€å®Œæˆæ‰€æœ‰æ“ä½œï¼Œä½†è¿™éœ€è¦ä¸€äº›æŠ€å·§ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼‚å¸¸æ•è·å—</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘è¦æ³¨æ„çš„ç¬¬äºŒä»¶äº‹æ˜¯try / catch / finally / faultåŠŸèƒ½ï¼Œæˆ–è€…è¯´ï¼Œ</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬å¯ä»¥è®¿é—®Faultå—ã€‚</font><font style="vertical-align: inherit;">å®ƒåœ¨Cï¼ƒä¸­ä¸å¯ç”¨ï¼Œä½†åœ¨MSILä¸­å¯ç”¨ï¼Œè¿™æ˜¯ä¸€ç§</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€ç»ˆæ¨¡æ‹Ÿï¼Œå°†åœ¨å‘ç”Ÿä»»ä½•å¼‚å¸¸çš„æƒ…å†µä¸‹æ‰§è¡Œã€‚</font><font style="vertical-align: inherit;">åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå°†å¼•å‘å¼‚å¸¸ï¼Œæ­¤åå°†æ˜¾ç¤ºâ€œ Hiâ€ï¼Œç¨‹åºå°†ç­‰å¾…è¾“å…¥ã€‚</font><font style="vertical-align: inherit;">åªæœ‰è¿™æ ·ï¼Œå®ƒæ‰ä¼šå®Œå…¨æ‰è½ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä¸å»ºè®®æ‚¨ä½¿ç”¨è¿™ç§åšæ³•ã€‚</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> throwSmth = Expression.Throw(Expression.Constant(<span class="hljs-keyword">new</span> Exception(), <span class="hljs-keyword">typeof</span>(Exception)));
<span class="hljs-keyword">var</span> log = Expression.Call(<span class="hljs-literal">null</span>, <span class="hljs-keyword">typeof</span>(Console).GetMethod(<span class="hljs-keyword">nameof</span>(Console.WriteLine), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">string</span>) }), Expression.Constant(<span class="hljs-string">"Hi"</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">string</span>)));
<span class="hljs-keyword">var</span> read = Expression.Call(<span class="hljs-literal">null</span>, <span class="hljs-keyword">typeof</span>(Console).GetMethod(<span class="hljs-keyword">nameof</span>(Console.ReadLine)));
<span class="hljs-keyword">var</span> fault = Expression.TryFault(throwSmth, Expression.Block(<span class="hljs-keyword">new</span>[] { log, read }));<font></font>
Expression&lt;Action&gt; expr = Expression.Lambda&lt;Action&gt;(fault);<font></font>
Action compiledExpression = expr.Compile();<font></font>
compiledExpression();<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ç”¨çš„è¡¨è¾¾å¼æ ‘ç±»å‹çš„ç®€è¦è¯´æ˜</font></font></b><div class="spoiler_text"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨</font></font></h4><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ç§</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç®€çŸ­çš„ä»‹ç»</font></font></th>
</tr>
<tr>
<td colspan="2" align="center"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸»è¦çš„</font></font></b></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨è¾¾</font></font></td>
<td> ,      .     ,      </td>
</tr>
<tr>
<td>Expression&lt;TDelegate&gt;</td>
<td>    </td>
</tr>
<tr>
<td colspan="2" align="center"><b> </b></td>
</tr>
<tr>
<td>BinaryExpression</td>
<td>     (+, â€”  )</td>
</tr>
<tr>
<td>UnaryExpression</td>
<td> (+, -),    throw</td>
</tr>
<tr>
<td>ConstantExpression</td>
<td> â€”   </td>
</tr>
<tr>
<td>ParameterExpression</td>
<td> </td>
</tr>
<tr>
<td>MethodCallExpression</td>
<td>  ,  MethodInfo</td>
</tr>
<tr>
<td>IndexExpression</td>
<td></td>
</tr>
<tr>
<td>BlockExpression</td>
<td>,   .      </td>
</tr>
<tr>
<td colspan="2" align="center"><b>  </b></td>
</tr>
<tr>
<td>ConditionalExpression </td>
<td>   â€” if-else</td>
</tr>
<tr>
<td>LabelTarget</td>
<td>   goto</td>
</tr>
<tr>
<td>LabelExpression</td>
<td> ,            .    LabelTarget.    ,    GotoExpression,    â€”   .    void,    .</td>
</tr>
<tr>
<td>GotoExpression</td>
<td>  .    . ( .. Â«breakÂ»)</td>
</tr>
<tr>
<td>LoopExpression</td>
<td> ,    Â«breakÂ»</td>
</tr>
<tr>
<td>SwitchCase</td>
<td>    SwitchExpression</td>
</tr>
<tr>
<td>SwitchExpression</td>
<td>  switch/case</td>
</tr>
<tr>
<td>TryExpression</td>
<td>    try/catch/finally/fault </td>
</tr>
<tr>
<td>CatchBlock</td>
<td>,   ,    </td>
</tr>
<tr>
<td colspan="2" align="center"><b></b></td>
</tr>
<tr>
<td>ElementInit</td>
<td>    IEnumerable.   ListInitExpression</td>
</tr>
<tr>
<td>ListInitExpression</td>
<td>  +   </td>
</tr>
<tr>
<td>DefaultExpression</td>
<td>       </td>
</tr>
<tr>
<td>NewArrayExpression</td>
<td>   +  </td>
</tr>
<tr>
<td>NewExpression</td>
<td> </td>
</tr>
<tr>
<td colspan="2" align="center"><b>  /</b></td>
</tr>
<tr>
<td>MemberAssignment</td>
<td>    </td>
</tr>
<tr>
<td>MemberBinding</td>
<td>  ,    ,  ,        </td>
</tr>
<tr>
<td>MemberExpression</td>
<td>  /</td>
</tr>
<tr>
<td>MemberInitExpression</td>
<td>      </td>
</tr>
<tr>
<td>MemberListBinding</td>
<td> /  </td>
</tr>
<tr>
<td>MemberMemberBinding</td>
<td> / ,    /</td>
</tr>
<tr>
<td colspan="2" align="center"><b></b></td>
</tr>
<tr>
<td>LambdaExpression</td>
<td></td>
</tr>
<tr>
<td>InvocationExpression</td>
<td>   -    </td>
</tr>
<tr>
<td>DebugInfoExpression</td>
<td>       .         </td>
</tr>
<tr>
<td>SymbolDocumentInfo</td>
<td>       ,        .</td>
</tr>
<tr>
<td>DynamicExpression</td>
<td>   ( )</td>
</tr>
<tr>
<td>RuntimeVariablesExpression</td>
<td>   /    </td>
</tr>
<tr>
<td>TypeBinaryExpression</td>
<td>,      (is)</td>
</tr>
</tbody></table></div><br>
      <br>
<br>
<ul>
<li>ExpressionVisitor â€”     .  .</li>
<li>DynamicExpressionVisitor â€”      DynamicExpression ( VisitDynamic)</li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤ä¿¡æ¯è¶³ä»¥å¼€å§‹æ¯”è¾ƒä½¿ç”¨è¡¨è¾¾å¼æ ‘çš„æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">æˆ‘å†³å®šä»¥æ‰¾åˆ°å¯¼æ•°çš„ä¾‹å­æ¥è§£ææ‰€æœ‰è¿™ä¸€åˆ‡ã€‚</font><font style="vertical-align: inherit;">æˆ‘æ²¡æœ‰é¢„è§æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©ï¼Œåªæœ‰åŸºæœ¬çš„é€‰æ‹©ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œå¦‚æœç”±äºæŸç§åŸå› æœ‰äººå†³å®šä¿®æ”¹å’Œä½¿ç”¨å®ƒï¼Œæˆ‘å°†å¾ˆé«˜å…´é€šè¿‡å¯¹æˆ‘çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­˜å‚¨åº“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„è¯·æ±‚åˆ†äº«æ”¹è¿›</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<a name="pm"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å¼åŒ¹é…</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œä»»åŠ¡æ˜¯å¯¹å¾®åˆ†è¿›è¡Œæ¼”ç®—ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ä¼°ç®—ä»¥ä¸‹å†…å®¹ï¼šå¯¹äºä¸åŒç±»å‹çš„è¿ç®—-ä¹˜æ³•ï¼Œé™¤æ³•ç­‰ï¼Œæœ‰ä¸€äº›è§„åˆ™å¯ä»¥æ‰¾åˆ°å¯¼æ•°ã€‚</font><font style="vertical-align: inherit;">æ ¹æ®æ“ä½œï¼Œæ‚¨å¿…é¡»é€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„å…¬å¼ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§å¹³åº¸çš„è¡¨è¿°ä¸­ï¼Œç†æƒ³åœ°å°†ä»»åŠ¡æ”¾åœ¨</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼€å…³/ç›’ä¸Š</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åœ¨æœ€æ–°ç‰ˆæœ¬çš„è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†switch / case 2.0æˆ–</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å¼åŒ¹é…</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™é‡Œå¾ˆéš¾è®¨è®ºä¸€äº›äº‹æƒ…ã€‚</font><font style="vertical-align: inherit;">åœ¨é›†çº¿å™¨ä¸Šï¼Œå¦‚æ­¤å¤§é‡çš„ä»£ç çœ‹èµ·æ¥å¾ˆç¹çä¸”é˜…è¯»æ•ˆæœå¾ˆå·®ï¼Œæ‰€ä»¥æˆ‘å»ºè®®æ‚¨çœ‹ä¸€ä¸‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç”¨ä¸€ä¸ªå¯¼æ•°çš„ä¾‹å­ï¼Œç»“æœåƒè¿™æ ·</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾‹</font></font></b><div class="spoiler_text"><pre><code class="cs hljs">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PatterntMatchingDerivative</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _pow = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Pow));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _log = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Log), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _zero = Expression.Constant(<span class="hljs-number">0</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _one = Expression.Constant(<span class="hljs-number">1</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
		<font></font>
        <span class="hljs-keyword">public</span> Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; ParseDerivative(Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; function)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt;(ParseDerivative(function.Body), function.Parameters);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> Expression <span class="hljs-title">ParseDerivative</span>(<span class="hljs-params">Expression function</span>)</span> =&gt; function <span class="hljs-keyword">switch</span><font></font>
        {<font></font>
            BinaryExpression binaryExpr =&gt; function.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Add =&gt; Expression.Add(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
                ExpressionType.Subtract =&gt; Expression.Subtract(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
<font></font>
                ExpressionType.Multiply =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{	<font></font>
	  	    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression _) =&gt; constant,<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; constant,<font></font>
		    _ =&gt; Expression.Add(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right)))<font></font>
		},<font></font>
<font></font>
                ExpressionType.Divide =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{<font></font>
		    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression parameter) =&gt; Expression.Divide(constant, Expression.Multiply(parameter, parameter)),<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; Expression.Divide(_one, constant),<font></font>
		    _ =&gt; Expression.Divide(Expression.Subtract(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right))), Expression.Multiply(binaryExpr.Right, binaryExpr.Right))<font></font>
	        },<font></font>
            },<font></font>
            MethodCallExpression methodCall <span class="hljs-keyword">when</span> methodCall.Method == _pow =&gt; (methodCall.Arguments[<span class="hljs-number">0</span>], methodCall.Arguments[<span class="hljs-number">1</span>]) <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                (ConstantExpression constant, ParameterExpression _) =&gt; Expression.Multiply(methodCall, Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
                (ParameterExpression param, ConstantExpression constant) =&gt; Expression.Multiply(constant, Expression.Call(<span class="hljs-literal">null</span>, _pow, param, Expression.Constant((<span class="hljs-keyword">double</span>)constant.Value - <span class="hljs-number">1</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>)))),<font></font>
                (ConstantExpression constant, Expression expression) =&gt; Expression.Multiply(Expression.Multiply(ParseDerivative(expression), methodCall), Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
             },<font></font>
             _ =&gt; function.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Constant =&gt; _zero,<font></font>
                ExpressionType.Parameter =&gt; _one,<font></font>
                _ =&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> OutOfMemoryException(<span class="hljs-string">"Bitmap best practice"</span>)<font></font>
             }<font></font>
        };<font></font>
    }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çœ‹èµ·æ¥æœ‰ç‚¹ä¸å¯»å¸¸ï¼Œä½†å¾ˆæœ‰è¶£ã€‚</font><font style="vertical-align: inherit;">å¾ˆé«˜å…´å†™è¿™ç¯‡æ–‡ç« -æ‰€æœ‰æ¡ä»¶æœ‰æœºåœ°ç»“åˆåœ¨ä¸€èµ·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥ç¤ºä¾‹è¯´æ˜äº†ä¸€åˆ‡ï¼Œæ‚¨æ— æ³•ç”¨æ–‡å­—æ›´å¥½åœ°æè¿°å®ƒã€‚</font></font><br>
<a name="nv"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤©çœŸçš„è®¿å®¢</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™æ ·çš„ä»»åŠ¡ä¸­ï¼Œè¡¨æƒ…æ ‘è®¿å®¢ç«‹å³æµ®ç°åœ¨è„‘æµ·ï¼Œè¿™</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ç²‰ä¸</font><font style="vertical-align: inherit;">ä¸­å¼•èµ·äº†å¾ˆå¤§çš„è½°åŠ¨ï¼Œ</font><font style="vertical-align: inherit;">å¹¶å¼•èµ·äº†ç²‰ä¸çš„ææ…Œï¼Œä»–ä»¬åœ¨å¨æˆ¿é‡Œè®¨è®ºæ•æ·é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">â€œä¸è¦æƒ§æ€•æ— çŸ¥ï¼Œè€Œè¦çŸ¥é“è™šå‡çš„çŸ¥è¯†ã€‚</font><font style="vertical-align: inherit;">æœ€å¥½ä»€ä¹ˆéƒ½ä¸çŸ¥é“ï¼Œè€Œä¸æ˜¯è€ƒè™‘çœŸç›¸ï¼Œé‚£æ˜¯ä¸æ­£ç¡®çš„ã€‚â€ </font><font style="vertical-align: inherit;">è®°ä½æ‰˜å°”æ–¯æ³°çš„è¿™ä¸ªç¾å¦™çŸ­è¯­ï¼Œæ‰¿è®¤æ— çŸ¥å¹¶äº‰å–Googleçš„æ”¯æŒï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡å—</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æ‹¥æœ‰çš„é“¾æ¥æ˜¯æŸ¥è¯¢â€œè¡¨è¾¾å¼æ ‘è®¿é—®è€…â€çš„ç¬¬ä¸€ä¸ªé“¾æ¥ï¼ˆåœ¨1949å¹´è¥¿ä¼¯åˆ©äºšä¹‹åï¼‰ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹ä¸€çœ‹ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚</font><font style="vertical-align: inherit;">æœ¬æ–‡çš„æ ‡é¢˜ç¬¦åˆæˆ‘ä»¬çš„æ„æ„¿ï¼Œç¤ºä¾‹ä¸­çš„ç±»å‡ä»¥åç¼€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visitor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘½å</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å›é¡¾äº†æ–‡ç« å¹¶è¿›è¡Œäº†ç±»æ¨ä¹‹åï¼Œé€šè¿‡ç±»æ¯”æˆ‘ä»¬çš„æ´¾ç”Ÿç¤ºä¾‹ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾‹</font></font></b><div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomDerivativeExpressionTreeVisitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; Visit(Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; function)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt;(Visitor.CreateFromExpression(function.Body).Visit(), function.Parameters);<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> MethodInfo Pow = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Pow));
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> MethodInfo Log = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Log), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">readonly</span> ConstantExpression Zero = Expression.Constant(<span class="hljs-number">0</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">readonly</span> ConstantExpression One = Expression.Constant(<span class="hljs-number">1</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Visitor <span class="hljs-title">CreateFromExpression</span>(<span class="hljs-params">Expression node</span>)</span>
            =&gt; node <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                BinaryExpression be =&gt; <span class="hljs-keyword">new</span> BinaryVisitor(be),<font></font>
                MethodCallExpression mce <span class="hljs-keyword">when</span> mce.Method == Pow =&gt; <span class="hljs-keyword">new</span> PowMethodCallVisitor(mce),<font></font>
                _ =&gt; <span class="hljs-keyword">new</span> SimpleVisitor(node),<font></font>
            };<font></font>
        <font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BinaryVisitor</span> : <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> BinaryExpression _node;<font></font>
        <font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BinaryVisitor</span>(<span class="hljs-params">BinaryExpression node</span>)</span><font></font>
        {<font></font>
            _node = node;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>
            =&gt; _node.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Add =&gt; Expression.Add(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
                ExpressionType.Subtract =&gt; Expression.Subtract(ParseDerivative(binaryExpr.Left), ParseDerivative(binaryExpr.Right)),<font></font>
<font></font>
                ExpressionType.Multiply =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{	<font></font>
	  	    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression _) =&gt; constant,<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; constant,<font></font>
		    _ =&gt; Expression.Add(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right)))<font></font>
		},<font></font>
<font></font>
                ExpressionType.Divide =&gt; (binaryExpr.Left, binaryExpr.Right) <span class="hljs-keyword">switch</span><font></font>
		{<font></font>
		    (ConstantExpression _, ConstantExpression _) =&gt; _zero,<font></font>
		    (ConstantExpression constant, ParameterExpression parameter) =&gt; Expression.Divide(constant, Expression.Multiply(parameter, parameter)),<font></font>
		    (ParameterExpression _, ConstantExpression constant) =&gt; Expression.Divide(_one, constant),<font></font>
		    _ =&gt; Expression.Divide(Expression.Subtract(Expression.Multiply(ParseDerivative(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, ParseDerivative(binaryExpr.Right))), Expression.Multiply(binaryExpr.Right, binaryExpr.Right))<font></font>
	        },<font></font>
            };<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PowMethodCallVisitor</span> : <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodCallExpression _node;<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PowMethodCallVisitor</span>(<span class="hljs-params">MethodCallExpression node</span>)</span><font></font>
        {<font></font>
            _node = node;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>
            =&gt; (_node.Arguments[<span class="hljs-number">0</span>], _node.Arguments[<span class="hljs-number">1</span>]) <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                (ConstantExpression constant, ParameterExpression _) =&gt; Expression.Multiply(_node, Expression.Call(<span class="hljs-literal">null</span>, Log, constant)),<font></font>
                (ParameterExpression param, ConstantExpression constant) =&gt; Expression.Multiply(constant, Expression.Call(<span class="hljs-literal">null</span>, Pow, param, Expression.Constant((<span class="hljs-keyword">double</span>)constant.Value - <span class="hljs-number">1</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>)))),<font></font>
                (ConstantExpression constant, Expression expression) =&gt; Expression.Multiply(Expression.Multiply(CreateFromExpression(expression).Visit(), _node), Expression.Call(<span class="hljs-literal">null</span>, Log, constant)),<font></font>
            };<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SimpleVisitor</span> : <span class="hljs-title">Visitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Expression _node;<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SimpleVisitor</span>(<span class="hljs-params">Expression node</span>)</span><font></font>
        {<font></font>
            _node = node;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Visit</span>(<span class="hljs-params"></span>)</span>
            =&gt; _node.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Constant =&gt; Zero,<font></font>
                ExpressionType.Parameter =&gt; One,<font></font>
            };<font></font>
    }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®é™…ä¸Š-æˆ‘ä»¬å°†å¼€å…³æ¡ˆä¾‹åˆ†æ•£åˆ°ä¸åŒçš„ç±»åˆ«ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬ä¸å°‘ï¼Œé­”æ³•æ²¡æœ‰å‡ºç°ã€‚</font><font style="vertical-align: inherit;">æ‰€æœ‰ç›¸åŒçš„æƒ…å†µï¼Œæ›´å¤šè¡Œã€‚</font><font style="vertical-align: inherit;">æ‰¿è¯ºçš„åŒé‡æ´¾é£åœ¨å“ªé‡Œï¼Ÿ</font></font><br>
<a name="cv"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»å…¸è®¿å®¢å’ŒåŒé‡è°ƒåº¦</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæœ‰å¿…è¦ä»‹ç»</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visitor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡æ¿æœ¬èº«</font><font style="vertical-align: inherit;">ï¼Œå®ƒä¹Ÿæ˜¯</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visitor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿™æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expression tree visitor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„åŸºç¡€</font><font style="vertical-align: inherit;">ã€‚è®©æˆ‘ä»¬ä»…ä»¥è¡¨è¾¾å¼æ ‘ä¸ºä¾‹è¿›è¡Œåˆ†æã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¬¬äºŒï¼Œå‡è®¾æˆ‘ä»¬è®¾è®¡äº†è¡¨è¾¾å¼æ ‘ã€‚æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨æˆ·èƒ½å¤Ÿéå†è¡¨è¾¾å¼æ ‘ï¼Œå¹¶æ ¹æ®èŠ‚ç‚¹çš„ç±»å‹ï¼ˆè¡¨è¾¾å¼ç±»å‹ï¼‰æ‰§è¡ŒæŸäº›æ“ä½œã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬ä¸€ç§é€‰æ‹©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä»€ä¹ˆä¹Ÿä¸åšã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼ºè¿«ç”¨æˆ·ä½¿ç”¨å¼€å…³/å¤–å£³ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªåé€‰æ‹©ã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªç»†å¾®å·®åˆ«ï¼šæˆ‘ä»¬æ•£å¸ƒè´Ÿè´£ç‰¹å®šç±»å‹çš„é€»è¾‘ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¤šæ€æ€§å’Œè™šæ‹ŸæŒ‘æˆ˜ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹Ÿç§°ä¸ºåæœŸç»‘å®šï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œå¯ä»¥å°†ç±»å‹å®šä¹‰ç§»è‡³è¿è¡Œæ—¶ï¼Œå¹¶ä»æˆ‘ä»¬çš„ä»£ç ä¸­åˆ é™¤è¿™äº›æ£€æŸ¥ã€‚å¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œå…·æœ‰åˆ›å»ºæ‰€éœ€ç±»å‹çš„å®ä¾‹çš„é€»è¾‘å°±è¶³å¤Ÿäº†ï¼Œç„¶åä¸€åˆ‡å°†ç”±è¿è¡Œæ—¶ä¸ºæˆ‘ä»¬å®Œæˆã€‚</font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬äºŒç§é€‰æ‹©ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†é€»è¾‘å¼•å…¥è™šæ‹Ÿæ–¹æ³•ã€‚é€šè¿‡è¦†ç›–æ¯ä¸ªåç»§å¯¹è±¡ä¸­çš„è™šæ‹Ÿæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥å¼€å…³/å¤§å°å†™ã€‚å¤šæ€è°ƒç”¨çš„æœºåˆ¶å°†ä¸ºæˆ‘ä»¬å†³å®šã€‚æ–¹æ³•è¡¨å°†åœ¨æ­¤å¤„å·¥ä½œï¼Œæ–¹æ³•å°†é€šè¿‡å…¶ä¸­çš„åç§»é‡è¿›è¡Œè°ƒç”¨ã€‚ä½†è¿™æ˜¯æ•´ç¯‡æ–‡ç« çš„ä¸»é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸è¦ç€è¿·ã€‚è™šæ‹Ÿæ–¹æ³•ä¼¼ä¹å¯ä»¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚ä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œä»–ä»¬åˆ›é€ äº†å¦ä¸€ä¸ªã€‚å¯¹äºæˆ‘ä»¬çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ GetDeriviativeï¼ˆï¼‰æ–¹æ³•ã€‚ä½†æ˜¯ç°åœ¨è¡¨è¾¾å¼ç±»æœ¬èº«çœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ‰€æœ‰åœºåˆæ·»åŠ æ­¤ç±»æ–¹æ³•ï¼Œä½†å®ƒä»¬ä¸é€‚åˆè¯¥ç±»çš„ä¸€èˆ¬é€»è¾‘ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬ä»ç„¶æ²¡æœ‰æä¾›è¿›è¡Œç±»ä¼¼äºç”¨æˆ·çš„æ“ä½œçš„æœºä¼šï¼ˆå½“ç„¶æ˜¯é€šè¿‡é€‚å½“çš„æ–¹å¼ï¼‰ã€‚æˆ‘ä»¬éœ€è¦è®©ç”¨æˆ·ä¸ºæ¯ç§ç‰¹å®šç±»å‹å®šä¹‰é€»è¾‘ï¼Œä½†ä¿ç•™å¤šæ€æ€§ï¼ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»…ç”¨æˆ·ä¸ºæ­¤ä»˜å‡ºçš„åŠªåŠ›ä¸ä¼šæˆåŠŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ‰æ˜¯çœŸæ­£çš„è®¿å®¢æ‰€åœ¨ã€‚</font><font style="vertical-align: inherit;">åœ¨å±‚æ¬¡ç»“æ„çš„åŸºæœ¬ç±»å‹ï¼ˆæœ¬ä¾‹ä¸­ä¸ºExpressionï¼‰ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä»¥ä¸‹å½¢å¼çš„æ–¹æ³•</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">virtual</span> Expression <span class="hljs-title">Accept</span>(<span class="hljs-params">ExpressionVisitor visitor</span>)</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ç»§æ‰¿äººä¸­ï¼Œæ­¤æ–¹æ³•å°†è¢«è¦†ç›–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ExpressionVisitoræœ¬èº«æ˜¯ä¸€ä¸ªåŸºç±»ï¼Œå…¶ä¸­åŒ…å«</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹æ¯ç§å±‚æ¬¡ç»“æ„ç±»å‹éƒ½</font><font style="vertical-align: inherit;">å…·æœ‰ç›¸åŒç­¾åçš„è™šæ‹Ÿæ–¹æ³•</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä»¥ExpressionVisitorç±»ä¸ºä¾‹ï¼ŒVisitBinaryï¼ˆ...ï¼‰ï¼ŒVisitMethodCallï¼ˆ...ï¼‰ï¼ŒVisitConstantï¼ˆ...ï¼‰ï¼ŒVisitParameterï¼ˆ...ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›æ–¹æ³•åœ¨å±‚æ¬¡ç»“æ„çš„ç›¸åº”ç±»ä¸­è°ƒç”¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‚£äº›ã€‚</font><font style="vertical-align: inherit;">BinaryExpressionç±»ä¸­çš„Acceptæ–¹æ³•å°†å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="cs hljs">	
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">internal</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">Accept</span>(<span class="hljs-params">ExpressionVisitor visitor</span>)</span><font></font>
{<font></font>
        <span class="hljs-keyword">return</span> visitor.VisitBinary(<span class="hljs-keyword">this</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»“æœï¼Œä¸ºäº†å®šä¹‰æ–°çš„è¡Œä¸ºï¼Œç”¨æˆ·åªéœ€è¦åˆ›å»ºExpressionVisitorç±»çš„ç»§æ‰¿äººï¼Œå³å¯åœ¨å…¶ä¸­é‡æ–°å®šä¹‰ç”¨äºè§£å†³ä¸€ä¸ªé—®é¢˜çš„ç›¸åº”æ–¹æ³•ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºäº†DerivativeExpressionVisitorã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤å¤–ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›Expressionçš„åç»§å¯¹è±¡ï¼Œä½†å“ªäº›æ˜¯æœªçŸ¥çš„ï¼Œä½†ä¸æ˜¯å¿…éœ€çš„ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬ä½¿ç”¨æ‰€éœ€çš„ExpressionVisitorå®ç°è°ƒç”¨è™šæ‹Ÿçš„Acceptæ–¹æ³•ï¼Œå³ä¸DerivativeExpressionVisitorä¸€èµ·ä½¿ç”¨ã€‚ç”±äºé‡‡ç”¨äº†åŠ¨æ€è°ƒåº¦ï¼Œå› æ­¤è°ƒç”¨äº†Acceptçš„é‡å†™å®ç°ï¼Œä¾‹å¦‚è¿è¡Œæ—¶ï¼Œä¾‹å¦‚BinaryExpressionã€‚åœ¨æ­¤æ–¹æ³•çš„ä¸»ä½“ä¸­ï¼Œæˆ‘ä»¬å®Œå…¨ç†è§£æˆ‘ä»¬å¤„äºBinaryExpressionä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“é‡åˆ°äº†å“ªä¸ªExpressionVisitorç»§æ‰¿è€…ã€‚ä½†æ˜¯ç”±äºVisitBinaryä¹Ÿæ˜¯è™šæ‹Ÿçš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦çŸ¥é“ã€‚åŒæ ·ï¼Œæˆ‘ä»¬åªæ˜¯é€šè¿‡å¼•ç”¨åŸºç±»æ¥è°ƒç”¨ï¼Œè¯¥è°ƒç”¨æ˜¯åŠ¨æ€ï¼ˆåœ¨è¿è¡Œæ—¶ï¼‰è°ƒåº¦çš„ï¼Œå¹¶ä¸”è°ƒç”¨äº†è¿è¡Œæ—¶ç±»å‹çš„é‡å†™VisitBinaryå®ç°ã€‚å¯¹äºåŒé‡æ´¾é£è€Œè¨€ï¼Œå¦‚æ­¤ä¹‹å¤š-ä¹’ä¹“çƒçš„é£æ ¼å°±æ˜¯â€œä½ åšâ€-â€œä¸ï¼Œä½ â€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒç»™æˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆã€‚å®é™…ä¸Šï¼Œè¿™ä½¿å¾—å¯ä»¥ä»å¤–éƒ¨â€œæ·»åŠ â€è™šæ‹Ÿæ–¹æ³•ï¼Œè€Œä¸æ˜¯</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¢è¯¾ã€‚</font><font style="vertical-align: inherit;">å¬èµ·æ¥ä¸é”™ï¼Œä½†ä¹Ÿæœ‰ç¼ºç‚¹ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥â€œæ¥å—â€æ–¹æ³•çš„å½¢å¼å‡ºç°çš„ä¸€äº›å·¦æ´¾åˆ†å­ï¼Œå®ƒåŒæ—¶è´Ÿè´£æ‰€æœ‰äº‹åŠ¡</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ªå¥½çš„å“ˆå¸Œå‡½æ•°çš„è¿é”ååº”æ˜¯ï¼Œå½“æ‚¨ä»…å‘å±‚æ¬¡ç»“æ„ä¸­æ·»åŠ ä¸€ä¸ªç»§æ‰¿äººæ—¶ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªäººéƒ½å¿…é¡»å®Œæˆè®¿é—®è€…çš„æ“ä½œ</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ç”±äºä½¿ç”¨è¡¨è¾¾å¼çš„ç‰¹æ®Šæ€§ï¼Œè¡¨è¾¾å¼æ ‘çš„æ€§è´¨å…è®¸è¿™äº›æˆæœ¬ï¼Œå› ä¸ºè¿™ç§è§£å†³æ–¹æ³•æ˜¯å…¶ä¸»è¦åŠŸèƒ½ä¹‹ä¸€ã€‚</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ç”¨äºé‡è½½çš„æ–¹æ³•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å¤–è§‚ã€‚</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°githubã€‚</font></font></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾‹</font></font></b><div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BuildinExpressionTreeVisitor</span> : <span class="hljs-title">ExpressionVisitor</span><font></font>
    {<font></font>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _pow = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Pow));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MethodInfo _log = <span class="hljs-keyword">typeof</span>(Math).GetMethod(<span class="hljs-keyword">nameof</span>(Math.Log), <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>) });
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _zero = Expression.Constant(<span class="hljs-number">0</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConstantExpression _one = Expression.Constant(<span class="hljs-number">1</span>d, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>));<font></font>
<font></font>
        <span class="hljs-keyword">public</span> Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; GetDerivative(Expression&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt; function)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Expression.Lambda&lt;Func&lt;<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>&gt;&gt;(Visit(function.Body), function.Parameters);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitBinary</span>(<span class="hljs-params">BinaryExpression binaryExpr</span>)</span>
            =&gt; binaryExpr.NodeType <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                ExpressionType.Add =&gt; Expression.Add(Visit(binaryExpr.Left), Visit(binaryExpr.Right)),<font></font>
                ExpressionType.Subtract =&gt; Expression.Subtract(Visit(binaryExpr.Left), Visit(binaryExpr.Right)),<font></font>
<font></font>
                ExpressionType.Multiply <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; _zero,<font></font>
                ExpressionType.Multiply <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ParameterExpression =&gt; binaryExpr.Left,<font></font>
                ExpressionType.Multiply <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ParameterExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; binaryExpr.Right,<font></font>
                ExpressionType.Multiply =&gt; Expression.Add(Expression.Multiply(Visit(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, Visit(binaryExpr.Right))),<font></font>
<font></font>
                ExpressionType.Divide <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; _zero,<font></font>
                ExpressionType.Divide <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ConstantExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ParameterExpression =&gt; Expression.Divide(binaryExpr.Left, Expression.Multiply(binaryExpr.Right, binaryExpr.Right)),<font></font>
                ExpressionType.Divide <span class="hljs-keyword">when</span> binaryExpr.Left <span class="hljs-keyword">is</span> ParameterExpression &amp;&amp; binaryExpr.Right <span class="hljs-keyword">is</span> ConstantExpression =&gt; Expression.Divide(_one, binaryExpr.Right),<font></font>
                ExpressionType.Divide =&gt; Expression.Divide(Expression.Subtract(Expression.Multiply(Visit(binaryExpr.Left), binaryExpr.Right), Expression.Multiply(binaryExpr.Left, Visit(binaryExpr.Right))), Expression.Multiply(binaryExpr.Right, binaryExpr.Right)),<font></font>
            };<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitMethodCall</span>(<span class="hljs-params">MethodCallExpression methodCall</span>)</span>
            =&gt; (methodCall.Arguments[<span class="hljs-number">0</span>], methodCall.Arguments[<span class="hljs-number">1</span>]) <span class="hljs-keyword">switch</span><font></font>
            {<font></font>
                (ConstantExpression constant, ParameterExpression _) =&gt; Expression.Multiply(methodCall, Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
                (ParameterExpression param, ConstantExpression constant) =&gt; Expression.Multiply(constant, Expression.Call(<span class="hljs-literal">null</span>, _pow, param, Expression.Constant((<span class="hljs-keyword">double</span>)constant.Value - <span class="hljs-number">1</span>, <span class="hljs-keyword">typeof</span>(<span class="hljs-keyword">double</span>)))),<font></font>
                (ConstantExpression constant, Expression expression) =&gt; Expression.Multiply(Expression.Multiply(Visit(expression), methodCall), Expression.Call(<span class="hljs-literal">null</span>, _log, constant)),<font></font>
            };<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitConstant</span>(<span class="hljs-params">ConstantExpression _</span>)</span> =&gt; _zero;<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Expression <span class="hljs-title">VisitParameter</span>(<span class="hljs-params">ParameterExpression b</span>)</span> =&gt; _one;<font></font>
    }<font></font>
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘ç°</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹Ÿè®¸åƒå¤§å¤šæ•°ç¼–ç¨‹ä»»åŠ¡ä¸€æ ·ï¼Œä¸èƒ½ç»™å‡ºæ˜ç¡®çš„ç­”æ¡ˆã€‚</font><font style="vertical-align: inherit;">ä¸€å¦‚æ—¢å¾€ï¼Œä¸€åˆ‡éƒ½å–å†³äºå…·ä½“æƒ…å†µã€‚</font><font style="vertical-align: inherit;">æˆ‘å–œæ¬¢æœ¬ä¾‹ä¸­çš„å¸¸è§„æ¨¡å¼åŒ¹é…ï¼Œå› ä¸º </font><font style="vertical-align: inherit;">æˆ‘æ²¡æœ‰å°†å…¶å¼€å‘åˆ°å·¥ä¸šå‘å±•çš„è§„æ¨¡ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ­¤è¡¨è¾¾å¼å°†ä¸å—æ§åˆ¶åœ°å¢åŠ ï¼Œåˆ™å€¼å¾—è€ƒè™‘è®¿å®¢ã€‚</font><font style="vertical-align: inherit;">ç”šè‡³æ˜¯å¤©çœŸçš„è®¿é—®è€…éƒ½äº«æœ‰ç”Ÿå‘½æƒ-æ¯•ç«Ÿï¼Œå¦‚æœå±‚æ¬¡ç»“æ„æœ¬èº«æ²¡æœ‰æä¾›æ”¯æŒï¼Œè¿™ä¹Ÿæ˜¯å°†å¤§é‡ä»£ç åˆ†æ•£åˆ°ç±»ä¸­çš„ä¸€ç§å¥½æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">å³ä½¿åœ¨è¿™é‡Œä¹Ÿæœ‰ä¾‹å¤–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œè®¿é—®è€…å¯¹å±‚æ¬¡ç»“æ„çš„æ”¯æŒä¹Ÿå¼•èµ·äº†å¾ˆå¤§äº‰è®®ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯æˆ‘å¸Œæœ›è¿™é‡Œæä¾›çš„ä¿¡æ¯è¶³ä»¥åšå‡ºæ­£ç¡®çš„é€‰æ‹©ã€‚</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN486972/">https://habr.com/ru/post/zh-CN486972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN486948/index.html">å¦‚ä½•é€‰æ‹©ç¼–è¾‘å™¨ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©NeoVimï¼Ÿ</a></li>
<li><a href="../zh-CN486950/index.html">ä¸Šå¤ï¼šæ— æƒ…å‡çº§386ç”µè„‘</a></li>
<li><a href="../zh-CN486962/index.html">HSEæ¸¸æˆå¼€å‘è¯„è®º</a></li>
<li><a href="../zh-CN486964/index.html">å¤šä»»åŠ¡å¤„ç†å’Œå¥½å¥‡ã€‚Javaå† å†›Mitya Alexandrovè®ºITç¤¾åŒºçš„åˆ›å»ºï¼Œâ€œè¿œç¨‹â€å’Œç”Ÿæ´»</a></li>
<li><a href="../zh-CN486966/index.html">ä¸ºä»€ä¹ˆä¾¿åˆ©ä¸å®‰å…¨ä¸æ˜¯æŠ˜è¡·çš„é€‰æ‹©</a></li>
<li><a href="../zh-CN486974/index.html">åœ¨ä¿„ç½—æ–¯æ‰¹é‡ç”Ÿäº§ç”µå­äº§å“ã€‚æµ‹è¯•è‡ªåŠ¨åŒ–</a></li>
<li><a href="../zh-CN486976/index.html">ä¿„ç½—æ–¯ä¿¡æ¯æ•™è‚²çš„é—®é¢˜åŠå…¶å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="../zh-CN486978/index.html">ç°åœºè®°å½•ï¼šæœ€å¤§çš„å¼€æºä¼šè®®ä¹‹ä¸€FOSDEM 2020</a></li>
<li><a href="../zh-CN486980/index.html">Kim Dotcomï¼šæŠ“ä½äº†ï¼Œç½‘ä¸Šæœ€é€šç¼‰çš„äººã€‚ç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN486982/index.html">å¦‚ä½•å­¦ä¹ å‰ç«¯å¼€å‘ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä»½å·¥ä½œè€Œä¸ä¼šé‡åˆ°å›°éš¾</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>