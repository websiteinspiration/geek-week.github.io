<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍜 🔸 ↖️ Kontrollierte und unkontrollierte Komponenten in React müssen nicht kompliziert sein 🚖 🖖🏼 👩‍👦‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Artikels "Kontrollierte und unkontrollierte Formulareingaben in React müssen nicht kompliziert s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kontrollierte und unkontrollierte Komponenten in React müssen nicht kompliziert sein</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502034/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Artikels </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Kontrollierte und unkontrollierte Formulareingaben in React müssen nicht kompliziert sein"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von Gosha Arinich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Möglicherweise haben Sie viele Artikel gesehen, in denen es heißt: "Sie sollten" setState "nicht verwenden, während in den Dokumenten behauptet wird, dass" refs schlecht sind ". Dies ist alles sehr widersprüchlich. Manchmal ist es schwierig herauszufinden, wie man die Dinge richtig macht. und was sind die Kriterien für die Auswahl zwischen diesen Methoden </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
? Wie erstellen Sie Formulare? Schließlich sind Formulare für viele Webanwendungen von zentraler Bedeutung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dennoch </font><font style="vertical-align: inherit;">ist die Formularverarbeitung in React der Eckpfeiler, nicht wahr? </font><font style="vertical-align: inherit;">so schwer Lassen Sie mich Ihnen die Unterschiede zwischen diesen Ansätzen zeigen und wann Sie jeden von ihnen verwenden sollten.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nicht verwaltete Komponenten</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nicht verwaltete Komponenten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sind wie normale HTML-Formulare:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie erinnern sich an alles, was Sie eingegeben haben. </font><font style="vertical-align: inherit;">Dann können Sie ihren Wert mit ref erhalten. </font><font style="vertical-align: inherit;">Zum Beispiel im onClick-Handler:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{<font></font>
  handleSubmitClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">this</span>._name.value;
    <span class="hljs-comment">// do something with `name`</span><font></font>
  }<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{input</span> =&gt;</span> this._name = input} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleSubmitClick}</span>&gt;</span>Sign up<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit anderen Worten, Sie müssen die Werte bei Bedarf aus dem Feld „ziehen“. </font><font style="vertical-align: inherit;">Dies kann beim Absenden des Formulars erfolgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist der einfachste Weg, Formulare zu implementieren. </font><font style="vertical-align: inherit;">Natürlich muss es einen guten Grund dafür geben, nämlich: die einfachsten Formen, entweder während des Studiums von React. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Methode ist jedoch nicht so flexibel. Schauen wir uns also die verwalteten Komponenten genauer an.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwaltete Komponenten:</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die verwaltete Komponente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akzeptiert ihren aktuellen Wert als Requisiten sowie einen Rückruf, um diesen Wert zu ändern. </font><font style="vertical-align: inherit;">Sie können sagen, dass dies eine „reaktivere“ Methode zur Steuerung der Komponente ist. Dies bedeutet jedoch nicht, dass Sie diese Methode immer verwenden sollten.</font></font><a name="habracut"></a><br>
<pre><code class="javascript hljs"><font></font>
&lt;input value={someValue} onChange={handleChange} /&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles sehr gut, aber der Wert des Eingabeformulars muss in einem bestimmten Zustand vorhanden sein. </font><font style="vertical-align: inherit;">In der Regel speichert eine Komponente, die ein Eingabeformular (d. H. Ein Formular) rendert, diese in ihrem Status:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,<font></font>
    };<font></font>
  }<font></font>
<font></font>
  handleNameChange = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">name</span>: event.target.value });<font></font>
  };<font></font>
<font></font>
  render() {<font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{this.state.name}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.handleNameChange}</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Natürlich kann es sich im Status einer anderen Komponente oder sogar in einem separaten Statusspeicher befinden, z. B. Redux). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes Mal, wenn Sie ein neues Zeichen eingeben, wird handleNameChange aufgerufen. </font><font style="vertical-align: inherit;">Es nimmt den neuen Wert des Eingabeformulars und schreibt es in den Status.</font></font><br>
<br>
<img src="https://d33wubrfki0l68.cloudfront.net/d92387dc57d2689c2b02e5f511b2b13c6b22433b/dbafb/assets/images/controlled-vs-uncontrolled/controlled-flow.png" alt="Bild"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles beginnt mit einer leeren Zeile - '';</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie geben den Buchstaben 'a' ein und handleNameChange ruft ihn ab und ruft setState auf. </font><font style="vertical-align: inherit;">Dann wird das Eingabeformular erneut mit dem Wert 'a' gerendert;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie geben den Buchstaben 'b' ein und handleNameChange erhält den Wert 'ab' und setzt ihn auf state. </font><font style="vertical-align: inherit;">Das Opet-Eingabeformular wird gerendert, jetzt jedoch mit dem Wert 'ab'.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Stream scheint Änderungen in das Formular zu "pushen", weshalb die Komponente immer den aktuellen Wert der Eingabedaten hat, ohne dass eine explizite Aktualisierungsanforderung erforderlich ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bedeutet, dass Ihre Daten (Status) und Benutzeroberfläche (Eingabeformular) immer synchron sind. </font><font style="vertical-align: inherit;">Der Status gibt dem Formular einen Wert, während das Formular den aktuellen Statuswert ändert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bedeutet auch, dass Formulare sofort auf Änderungen reagieren können, was wiederum erforderlich ist, um:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schnelles Feedback wie Validierung;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deaktivieren Sie eine bestimmte Schaltfläche, bis alle Formularfelder gültig sind.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktivieren der Verarbeitung bestimmter Eingabefeldformate, z. B. Kreditkartennummern.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie es jedoch nicht benötigen und der Meinung sind, dass nicht verwaltete Komponenten viel einfacher sind, verwenden Sie sie.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was macht eine Komponente „überschaubar“?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich gibt es auch andere Formularelemente wie Kontrollkästchen, Radio, Textbereich und Auswahl. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Komponente wird verwaltbar, wenn Sie ihren Wert mithilfe von Requisiten festlegen. </font><font style="vertical-align: inherit;">Das ist alles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes der Formularelemente verfügt jedoch über unterschiedliche Methoden zum Festlegen des Werts. Hier ist eine kleine Tabelle zum allgemeinen Verständnis:</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Element</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wert</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rückruf zur Änderung</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neuer Wert im Rückruf</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><pre><code class="javascript hljs">&lt;input type=<span class="hljs-string">"text"</span> /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value = "string"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei Änderung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.value</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;input type=<span class="hljs-string">"checkbox"</span> /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geprüft = {boolean}</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei Änderung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.checked</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;input type=<span class="hljs-string">"radio"</span> /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geprüft = {boolean}</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei Änderung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.checked</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;textarea /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value = "string"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei Änderung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.value</font></font></td>
</tr>
<tr>
<td><pre><code class="javascript hljs">&lt;select /&gt;</code></pre></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value = "Optionswert"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei Änderung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event.target.value</font></font></td>
</tr>
</tbody>
</table></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sowohl verwaltete als auch nicht verwaltete Komponenten haben Vor- und Nachteile. </font><font style="vertical-align: inherit;">Bewerten Sie eine bestimmte Situation und wählen Sie einen Ansatz - wenn dies für Sie funktioniert, warum nicht davon profitieren? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihr Formular in Bezug auf die Interaktion mit der Benutzeroberfläche unglaublich einfach ist, sind nicht verwaltete Komponenten perfekt für Sie. </font><font style="vertical-align: inherit;">Sie müssen nicht auf das hören, was verschiedene Artikel für schlecht halten. </font></font><br>
<br>
<img src="https://i.imgur.com/D5u8pqE.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus ist die Auswahl eines Komponententyps keine endgültige Entscheidung: Sie können nicht verwaltete Komponenten jederzeit durch verwaltete ersetzen. </font><font style="vertical-align: inherit;">Der Übergang von einem zum anderen ist nicht so schwierig.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de502000/index.html">12 Data Engineering Online-Kurse</a></li>
<li><a href="../de502004/index.html">Kanban-Methode: Verstehen Sie Ihren Prozess als kollektiven Wissensaufbauprozess - Teil 1 (Rezepte)</a></li>
<li><a href="../de502008/index.html">Programmierung für die Massen</a></li>
<li><a href="../de502028/index.html">Vanya geht zu Großmutter oder dynamischem JavaScript adaptiv</a></li>
<li><a href="../de502030/index.html">Webdienste in Oracle</a></li>
<li><a href="../de502038/index.html">Ein Atom anheben, Ansatz 2.0.1</a></li>
<li><a href="../de502040/index.html">Über Phrasal Verbs-5 (hoch / runter)</a></li>
<li><a href="../de502046/index.html">Fünf Jahre Rost</a></li>
<li><a href="../de502048/index.html">Komplexes Verhalten ohne neuronale Netze und Training. Die philosophische Basis</a></li>
<li><a href="../de502050/index.html">Ein paar Anmerkungen zur Kultur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>