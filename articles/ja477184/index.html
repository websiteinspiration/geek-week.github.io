<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👕 😚 🌻 vk.comのボット哲学者 👩🏿‍🤝‍👨🏽 💒 👲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ボットドライバーに特化した多くの記事に基づいて... 
 
 最近、ソーシャルネットワークvk.com専用の興味深いプロジェクト「ターンキー」を開発しました。タスクは簡単です。会話に追加できるボットを作成し、ランダムに引用することができます。しかし、それは単純すぎるようだったので、偉大な哲学者フリー...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>vk.comのボット哲学者</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477184/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボットドライバーに特化した多くの記事に基づいて... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、ソーシャルネットワークvk.com専用の興味深いプロジェクト「ターンキー」を開発しました。</font><font style="vertical-align: inherit;">タスクは簡単です。会話に追加できるボットを作成し、ランダムに引用することができます。</font><font style="vertical-align: inherit;">しかし、それは単純すぎるようだったので、偉大な哲学者フリードリヒ・ニーチェを復活させなければなりませんでした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mt/s2/bu/mts2buh2gnljp2ocjmctu-adzss.jpeg" alt="画像"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれで複雑なものを何も見なかったので、この種のスクリプトはすぐに書かれました：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承認-&gt;メッセージの読み取り-&gt;回答の分析と生成-&gt;回答</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これはすべて</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Callback API VK v.5.80</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して行われ</font><b><font style="vertical-align: inherit;">ました</font></b><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何も新しいことはありません</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も困難な点は-「分析と応答の形成」。確かに、これは最も重要なことです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、実際には、辞書からランダムなフレーズを発行するだけの「多かれ少なかれスマートなボット」を作成したかったのです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「どうやってそれをやったの？ -読んでほしい… </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さあ、始めましょう！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、ボットの機能はかなり単純ですが、表面的には単純です。より深く行くと、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPで</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記述するため、すべてがはるかに複雑になり</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oO</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
繰り返しますが、見積もりジェネレーターは必要ないので、ボットにいくつかのロジックを尋ねることにしました。ただし、学習は困難な作業であるため、ニューラルネットワークも必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
19世紀の偉大な哲学者、フリードリッヒ・ニーチェを復活させようとしたとき、私は創造性の問題を解決しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、ボットの役割を担うのはニーチェであるため、ランダムな引用でも賢く見えます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、どういうわけか対話者とボットを統合してそれらの間の接続を作成したかった</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ので、対話者のフレーズが基礎として採用され、準備されたデータベースからのセンテンスに基づいて、フィルターによってキーワードに変換されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、あたかも質問者の質問に対する答えが形成されたかのように。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーから次のような新しいメッセージが届きました。</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-comment">// </span>
<span class="hljs-keyword">case</span> <span class="hljs-string">'message_new'</span>:
<span class="hljs-comment">//... id  </span><font></font>
$user_id = $data-&gt;object-&gt;peer_id;<font></font>
<span class="hljs-comment">//  </span><font></font>
$body = $data-&gt;object-&gt;text;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、キーワードを強調表示してデータベース検索にフィードするために、適切な形式でメッセージをもたらしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、末尾の「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a、およびs、am、yami、ah、oh ...</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」など</font><font style="vertical-align: inherit;">を完全</font><font style="vertical-align: inherit;">に削除しました...句読点やその他の記号を削除しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二に、私は前置詞を考慮していません。最初に、単語を最大3文字までの長さに制限しました。しかし、ニーチェの哲学は「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">神、世界、岩、世紀など</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">という言葉によって特徴付けられていたため、これは間違っていました</font><font style="vertical-align: inherit;">。さらに、4文字の単語をフィルタリングした後、エンディングが破棄されたため、3文字の単語がありました。次に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font><i><font style="vertical-align: inherit;">以上、何を、どのように、どこで、どこで</font></i><font style="vertical-align: inherit;">」などの単語に検索を限定しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第三に、ニーチェは自分の本でより多くのことを書いたため、「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなた、あなたは、あなたがあなたを愛し、あなたは私のもの、私の「に」、私は、私ができる、愛することができ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それぞれ「。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このように、対話の種類が得られる。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ベース、ニーチェの本の断片からフレーズ/引用符/ことわざの辞書を作成する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は、フォーマットにニーチェの本のリッターを搭載した</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TXT</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらを一緒に集め、次いで濾過:. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
= 1つのオファー1クオート（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">としてのセパレータを使用して</font></font></i> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">『』 "「「」？ </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このように見えることを基本になっています</font><font style="vertical-align: inherit;">
だけでなく、データベースとユーザーからのフィルターされたメッセージがあります。</font></font><br>
<br>
<code> -  ,     , -   <br>
 ,    ,  , ,    <br>
   ,   ,   :      ,     <br>
   ,  </code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code> : ",      ?"<br>
 : "  "</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検索システムを固定するために残っています。設定が異なると結果も異なるため、これは困難でした。そして、1つのコードが正しい答えを出した場合、他の要求は必要なものを与えませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正規表現を使用せず、次のような組み込み関数と組み合わせて使用​​することにしました</font><font style="vertical-align: inherit;">
。</font><font style="vertical-align: inherit;">
長い比較条件と無限に長いループを使用して、ほぼ望ましい結果を達成しました。</font><font style="vertical-align: inherit;">
検索ロジックは次のようなものです。各文を調べ、この文に存在する着信メッセージから単語を見つけます。</font><font style="vertical-align: inherit;">
単語が見つかった場合、「変数の重み」として+1が追加されます。</font><font style="vertical-align: inherit;">
したがって、文に含まれる単語の数が多いほど、「変数の重み」が大きくなります。</font></font><br>
<br>
<code>substr<br>
stripos<br>
substr_count<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、「道徳と生命」という言葉がデータベースのある文で見つかった場合、これは発行される100％の回答であることを示唆しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、単語がトピックについていて、結果の100％を大量に生成した場合、random（）メソッドはrand（）メソッドによって発行されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、これらは常に短い文章であるとは限らなかったため、そのような常連によって大まかに答えをトリミングする必要がありました。</font></font><br>
<br>
<pre><code class="php hljs"> preg_match(<span class="hljs-string">'/(?:^|\.\s+)([^\.]*?'</span>.$wordpattern.<span class="hljs-string">'[^\.]*?\.+)\s+/i'</span>, $text , $matches);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、すべてが自動です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メッセージを送信します</font></font><br>
<br>
<pre><code class="php hljs">$request_params = <span class="hljs-keyword">array</span>(
<span class="hljs-string">'message'</span> =&gt;  $matches[<span class="hljs-number">1</span>],
<span class="hljs-comment">#'message' =&gt;  $find[0],</span>
<span class="hljs-string">'peer_id'</span> =&gt; $user_id,
<span class="hljs-string">'access_token'</span> =&gt; $token,
<span class="hljs-string">'v'</span> =&gt; <span class="hljs-string">'5.80'</span><font></font>
);<font></font>
$get_params = http_build_query($request_params);<font></font>
file_get_contents(<span class="hljs-string">'https://api.vk.com/method/messages.send?'</span>. $get_params);<font></font>
header(<span class="hljs-string">"HTTP/1.1 200 OK"</span>);
<span class="hljs-keyword">echo</span>(<span class="hljs-string">'ok'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特にすべてのコードをアップロードしたわけではありませんが、コードは比較的小さいです。</font><font style="vertical-align: inherit;">目標は、人工的に訓練されたインテリジェンスではなく、オンデマンドで応答エンジンを作成することでした。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">このリンクで</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ボットをテストでき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">彼にメッセージを書いてください。</font><font style="vertical-align: inherit;">文の最初に、「Nietzsche」を付ける必要があることを知っておくことが重要です。それを参照する場合と同じように、ボットのみが応答します。</font><font style="vertical-align: inherit;">
これはテストバージョンであり、したがって不完全です。したがって、マット、若者の俗語、単語の間違いなど-ボットは考慮に入れず、ベースは10,000フレーズのみです。</font><font style="vertical-align: inherit;">
例として、ダイアログを表示することができます。</font><font style="vertical-align: inherit;">
結論：はい、ボットはユーザーとの双方向通信を持っていません-これは人工知能ではありません。</font><font style="vertical-align: inherit;">しかし、多数の参加者からの会話では、ボットは優れた「対談者」になります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/sf/lf/pksflfu977kmdx1fkalpzfyimd8.png" alt="画像"><br>
<br>
<img src="https://habrastorage.org/webt/qi/bo/hy/qibohyxceqes_tfp1ssk2ahxvpi.png" alt="画像"><br>
<br>
<img src="https://habrastorage.org/webt/nh/3q/kw/nh3qkw3lo1psfd91n1zemcmm244.png" alt="画像"><br>
<br>
<img src="https://habrastorage.org/webt/su/yf/-q/suyf-qgn2vqhxsezugd88eauw1g.png" alt="画像"><br>
<br>
<img src="https://habrastorage.org/webt/p0/y7/he/p0y7heepmhe-fee55gj0urquuxs.png" alt="画像"><br>
<br>
<img src="https://habrastorage.org/webt/fo/6v/g2/fo6vg2bsus5g1yekhvidrgd0nou.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja477170/index.html">21学校での会議に参加した方法</a></li>
<li><a href="../ja477176/index.html">GDPRを満たすために役立つツール</a></li>
<li><a href="../ja477178/index.html">現代のプログラミング：25年間の休憩の後、またはTelegramのボットを書いたときの様子</a></li>
<li><a href="../ja477180/index.html">背景：QoEとは何か、プロバイダーがQoEを使用する理由</a></li>
<li><a href="../ja477182/index.html">[ドックで]フラッター。パート2. iOS開発者向け</a></li>
<li><a href="../ja477186/index.html">リモートサイトでの10年間とその結果</a></li>
<li><a href="../ja477190/index.html">別の方法-LFS、マルチユーザー、現在のインディーアクション/ RPGの進行状況</a></li>
<li><a href="../ja477192/index.html">最小二乗法：プログラマーがプログラマーのために作成したテキスト</a></li>
<li><a href="../ja477194/index.html">話しましょう。衰弱とうつ病について</a></li>
<li><a href="../ja477198/index.html">キーロガーとサプライズ：キーロガーの分析とその開発者の詳細</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>