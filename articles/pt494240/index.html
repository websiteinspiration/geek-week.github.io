<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶É üë©üèæ‚ÄçüöÄ üè¢ Personaliza√ß√£o de sandbox: por que voc√™ precisa agora ü§üüèΩ üñêÔ∏è üîÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A quest√£o da personaliza√ß√£o de imagens de sandbox √© relevante desde o in√≠cio. As primeiras vers√µes desses programas eram solu√ß√µes internas de empresas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Personaliza√ß√£o de sandbox: por que voc√™ precisa agora</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pt/blog/494240/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/w0/kd/as/w0kdasxxfgrntuq6bpubjtse6ym.png"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A quest√£o da personaliza√ß√£o de imagens de sandbox √© relevante desde o in√≠cio. </font><font style="vertical-align: inherit;">As primeiras vers√µes desses programas eram solu√ß√µes internas de empresas de seguran√ßa da informa√ß√£o, mas mesmo assim havia a necessidade de um ajuste cuidadoso de m√°quinas isoladas. </font><font style="vertical-align: inherit;">E n√£o foi apenas a instala√ß√£o de software auxiliar para monitorar o estado do sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At√© 10 anos atr√°s, a l√≥gica de coletar e processar caracter√≠sticas ambientais estava incorporada em amostras maliciosas: nome de usu√°rio e computador, dom√≠nio dom√©stico ou corporativo, direitos de administrador, layout de idioma, n√∫mero de n√∫cleos de processador, vers√£o do sistema operacional, presen√ßa de software antiv√≠rus, sinais de virtualiza√ß√£o e at√© a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presen√ßa de atualiza√ß√µes em sistema</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">At√© o momento, o n√∫mero de par√¢metros e m√©todos para obt√™-los apenas aumentou.</font></font><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T√©cnicas de malware para ignorar o Sandbox</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No in√≠cio, a abordagem era bastante direta: se o malware verificar o usu√°rio com o teste de nome, o chamaremos de John; se usarmos a chave do registro SYSTEM \ CurrentControlSet \ Enum \ SCSI \ Disk &amp; Ven_VMware_ &amp; Prod_VMware_Virtual_S para descobrir se estamos em um ambiente virtual, (se poss√≠vel), substituiremos a chave ou os resultados retornados interceptando a chamada. Como resultado de in√∫meros estudos, uma certa base de conhecimento dos m√©todos de desvio de detec√ß√£o foi recrutada, que foi usada para configurar o ambiente. Os anos se passaram, os criadores de v√≠rus ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e n√£o apenas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) come√ßaram a usar cada vez mais esse conhecimento em seus trabalhos, o que acabou levando ao seguinte.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pergunta "Este √© um ambiente de pesquisa?" </font><font style="vertical-align: inherit;">foi substitu√≠do por "O ambiente √© interessante?" </font><font style="vertical-align: inherit;">E o interesse n√£o √© encontrar tra√ßos de algum cliente FTP para roubo de dados subsequente. </font><font style="vertical-align: inherit;">Agora, se esta √© a m√°quina de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um funcion√°rio de contabilidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que usa software espec√≠fico, ent√£o outra coisa. </font><font style="vertical-align: inherit;">Existem outras abordagens: infectar o usu√°rio com um carregador de inicializa√ß√£o leve, que coleta todas as informa√ß√µes necess√°rias sobre o sistema, envia para o servidor de gerenciamento e ... n√£o recebe a carga √∫til em resposta. </font><font style="vertical-align: inherit;">A l√≥gica do servidor desconhecido decidiu que esta v√≠tima n√£o √© do seu interesse.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, vemos: as caixas de prote√ß√£o configuradas por padr√£o n√£o s√£o uma solu√ß√£o comercial eficaz. </font><font style="vertical-align: inherit;">Os atacantes est√£o cada vez mais confiando n√£o em autodefesa contra a detec√ß√£o, mas em restringir o alcance da busca por alvos interessantes para o desenvolvimento do ataque.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como combatemos eles?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em palavras simples, oferecemos uma imagem √∫nica de um ambiente isolado. </font><font style="vertical-align: inherit;">O objetivo √© recriar um ambiente o mais semelhante poss√≠vel √† esta√ß√£o de trabalho de um funcion√°rio, com acesso atraente para atacantes: um departamento financeiro, um servidor de constru√ß√£o para integra√ß√£o cont√≠nua durante o desenvolvimento, um servidor web, uma m√°quina de administrador de dom√≠nio e, finalmente, uma esta√ß√£o de CEO.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, para essa tarefa, voc√™ pode liberar v√°rios espa√ßos em branco com o software apropriado "on board", mas √© necess√°rio inici√°-los com dados espec√≠ficos que correspondem a uma organiza√ß√£o espec√≠fica: o nome do dom√≠nio, os recursos ou aplicativos usados, os nomes e o conte√∫do dos documentos de trabalho - quanto mais nuances, melhor . </font><font style="vertical-align: inherit;">√Äs vezes, o ambiente precisa ser ajustado com precis√£o, at√© vers√µes e patches de atualiza√ß√£o do sistema. </font><font style="vertical-align: inherit;">No caso mais simples, a imagem pode ser feita simplesmente "cheia de buracos". </font><font style="vertical-align: inherit;">No entanto, se o seu parque de infraestrutura de TI n√£o for mais antigo que determinadas vers√µes, isso tamb√©m poder√° ser levado em considera√ß√£o e eliminado muitos vetores de penetra√ß√£o irrelevantes usando um certo n√∫mero de vulnerabilidades.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, obtemos uma imagem que √© desconhecida pelos criadores de v√≠rus, √© realmente de interesse para eles e, portanto, aumenta muito a probabilidade de detectar um ataque direcionado.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que preciso emular o trabalho de um computador "ativo"? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A emula√ß√£o de a√ß√µes do usu√°rio √© essencial, sem a qual a sandbox perde sua efic√°cia. </font><font style="vertical-align: inherit;">Em alguns casos, a aus√™ncia de a√ß√µes levar√° √† detec√ß√£o da presen√ßa na caixa de prote√ß√£o: por exemplo, se o cursor do mouse n√£o mudar de posi√ß√£o por muito tempo, novas janelas n√£o aparecer√£o, as aplica√ß√µes n√£o ser√£o encerradas ou ser√£o executadas poucas, se novos arquivos n√£o aparecerem em diret√≥rios tempor√°rios, n√£o atividade de rede. </font><font style="vertical-align: inherit;">Em outras situa√ß√µes, isso afetar√° a opera√ß√£o do pr√≥prio malware: por exemplo, para execut√°-lo, √© necess√°rio o consentimento do usu√°rio para incluir macros no documento do escrit√≥rio ou o Trojan mostrar√° uma caixa de di√°logo intermedi√°ria na qual ser√° necess√°rio concordar com algo (ou com algo recusar) continuar seu trabalho.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Äs vezes, a√ß√µes insignificantes s√£o simplesmente necess√°rias: o usu√°rio deve abrir algum documento e anotar algo ou copiar a senha na √°rea de transfer√™ncia para obter mais informa√ß√µes - √© precisamente nesses momentos que um trojan espi√£o pode trabalhar, que interceptar√° dados importantes e o enviar√° ao servidor do autor.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como isso √© feito conosco?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossa solu√ß√£o est√° sendo gradualmente reabastecida com novas a√ß√µes que imitam o trabalho de um usu√°rio vivo. </font><font style="vertical-align: inherit;">Obviamente, as seq√º√™ncias predefinidas de eventos planejados de qualquer complexidade nunca podem ser comparadas √† variedade de uso real. </font><font style="vertical-align: inherit;">Continuamos pesquisando e aprimorando esse lado do produto, aumentando sua efic√°cia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m das fun√ß√µes descritas acima, vale destacar uma caracter√≠stica fundamental: nossa sandbox pertence √† classe das sem agentes. Na maioria das solu√ß√µes, h√° um agente auxiliar dentro da m√°quina virtual, respons√°vel por gerenciar o estado do sistema, recebendo e transmitindo eventos e artefatos interessantes para o servidor host. Apesar das vantagens no monitoramento e do princ√≠pio claro de intera√ß√£o entre o host e as m√°quinas convidadas, esta solu√ß√£o tem uma desvantagem significativa: a necessidade de ocultar e proteger os objetos associados ao agente contra malware. No caso em que n√£o h√° provedor de eventos, surge a pergunta: como, ent√£o, obter informa√ß√µes sobre o que est√° acontecendo dentro da m√°quina virtual? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para isso, usamos a tecnologia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extended Page Table</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(EPT) Intel Corporation. </font><font style="vertical-align: inherit;">√â uma p√°gina de mem√≥ria intermedi√°ria que fica entre a mem√≥ria f√≠sica do convidado e a mem√≥ria f√≠sica do host. </font><font style="vertical-align: inherit;">Em resumo, isso permite que voc√™ fa√ßa o seguinte:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">examine a exibi√ß√£o das p√°ginas de mem√≥ria da m√°quina convidada;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destacar se√ß√µes interessantes (por exemplo, contendo endere√ßos ou c√≥digo de fun√ß√µes nucleares);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">marque as p√°ginas selecionadas para que os direitos de acesso √†s p√°ginas de mem√≥ria no EPT n√£o coincidam com os direitos de acesso √†s p√°ginas na m√°quina convidada;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capturar o recurso para as se√ß√µes marcadas da mem√≥ria (neste momento ocorrer√° um erro de acesso (#PF), como resultado, a m√°quina convidada ser√° suspensa);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analisar o estado, extrair as informa√ß√µes necess√°rias sobre o evento;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">re-layout da p√°gina de mem√≥ria no estado correto;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">restaurar a m√°quina convidada.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O monitoramento de tudo o que acontece √© realizado fora da m√°quina isolada. O malware que est√° dentro n√£o pode detectar o fato da observa√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Executar uma amostra na sandbox e analisar seu comportamento √© apenas um dos componentes de um produto complexo. Ap√≥s o in√≠cio, a mem√≥ria do processo √© verificada quanto a c√≥digos maliciosos, a atividade de rede √© registrada e analisada usando mais de 5000 regras de detec√ß√£o. Al√©m disso, √© poss√≠vel descriptografar intera√ß√µes seguras.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os indicadores de compromisso (COI), que foram capazes de identificar durante o estudo, s√£o verificados por listas de reputa√ß√£o. </font><font style="vertical-align: inherit;">Antes de ser submetida √† an√°lise din√¢mica, a amostra √© enviada para processamento est√°tico: √© pr√©-filtrada em v√°rios antiv√≠rus e verificada por nosso pr√≥prio mecanismo, com regras de detec√ß√£o de especialistas do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">centro de seguran√ßa especializado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (PT Expert Security Center). </font><font style="vertical-align: inherit;">Utilizamos um exame abrangente, inclusive para identificar anomalias nas meta-informa√ß√µes e artefatos incorporados da amostra.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quais tarefas o PT Sandbox faz melhor e por qu√™?</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O PT Sandbox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> combina o conhecimento e a experi√™ncia de v√°rias equipes e produtos para combater ataques direcionados. </font><font style="vertical-align: inherit;">Apesar de o produto poder ser usado no modo de combater amea√ßas (preven√ß√£o), ele ainda √© principalmente um meio de monitorar (detectar) a seguran√ßa dos sistemas de TI. </font><font style="vertical-align: inherit;">A principal diferen√ßa das solu√ß√µes cl√°ssicas de prote√ß√£o de terminais √© que a tarefa da PT Sandbox √© prestar aten√ß√£o √†s anomalias e registrar uma amea√ßa anteriormente desconhecida. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postado por</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Alexey Vishnyakov, especialista s√™nior, Grupo de pesquisa em tecnologias de amea√ßas, Tecnologias positivas</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494228/index.html">Impress√£o 3D na cria√ß√£o do Boeing 777</a></li>
<li><a href="../pt494230/index.html">AI vs. COVID-19: Experi√™ncia em Hubei e na Fl√≥rida</a></li>
<li><a href="../pt494232/index.html">Por que existem erros no c√©rebro?</a></li>
<li><a href="../pt494234/index.html">Uma sele√ß√£o de capacetes VR para aplica√ß√µes industriais</a></li>
<li><a href="../pt494238/index.html">Li√ß√µes aprendidas em 3 anos de trabalho remoto, para permanecer em uma mente s√≥bria e com uma mem√≥ria brilhante</a></li>
<li><a href="../pt494242/index.html">Ninja Bayesiano</a></li>
<li><a href="../pt494244/index.html">Troca e gerenciamento de riscos: 5 dicas para diversificar seu portf√≥lio de investimentos</a></li>
<li><a href="../pt494252/index.html">Impress√£o 3D: tr√™s casas e meia em quatro dias</a></li>
<li><a href="../pt494254/index.html">OpenShift como uma vers√£o corporativa do Kubernetes</a></li>
<li><a href="../pt494256/index.html">Quem mais precisa de sel√™nio? Algu√©m usa o BDD em 2020? Aprendizado de m√°quina no Selenium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>