<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüöí üíÖüèæ üöô Redes neuronales y comercio. Implementaci√≥n pr√°ctica ü¶Å üë©üèæ‚Äçü§ù‚Äçüë®üèΩ üö¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La moda comercial est√° experimentando altibajos junto con el tipo de cambio de Bitcoin. Ahora este tema est√° en un punto bajo despu√©s de un crecimient...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Redes neuronales y comercio. Implementaci√≥n pr√°ctica</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494964/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La moda comercial est√° experimentando altibajos junto con el tipo de cambio de Bitcoin. Ahora este tema est√° en un punto bajo despu√©s de un crecimiento incre√≠ble en 2018. Muchos durante este tiempo lograron familiarizarse con los intercambios de cifrado: profundizaron en el tema, estudiaron, intercambiaron, perdieron dinero e incluso a veces ganaron. Como resultado, la moda pas√≥, pero la experiencia permaneci√≥, aunque negativa. Las palabras "largo", "corto", "extendido", "buzo" se pueden escuchar de aquellos de quienes ciertamente no espera esto. Pero no solo el comercio de "manos" atrajo la atenci√≥n, tambi√©n hay bots comerciales. ¬øQu√© tenemos en esta √°rea, de qu√© est√° hablando la experiencia de los √∫ltimos 2-3 a√±os?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, tampoco hay nada bueno en esta √°rea. Existen muchas herramientas para escribir bots comerciales, pero no hay estrategias rentables estables. En el mejor de los casos, una soluci√≥n de trabajo debe ser atendida constantemente por un par de configuraciones de cambio de comerciante-programador para el mercado actual. El resultado est√°ndar despu√©s de conectar un bot totalmente aut√≥nomo al dep√≥sito es drenar el dep√≥sito.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La √∫ltima esperanza permanece: las redes neuronales. Esto ciertamente deber√≠a suceder, porque la red neuronal aprende como persona y se adapta al mercado. ¬øC√≥mo te va en esta √°rea? Bueno ... lo adivinaste. Todo est√° mal, se habla mucho, pero no hay soluciones que funcionen. ¬°Todo est√° muy mal! Un v√≠vido ejemplo de esto es la tienda de aplicaciones de la comunidad MQL5. Detr√°s de la marca MQL5 hay una plataforma de negociaci√≥n profesional: MetaTrader5 m√°s una gran comunidad de comerciantes y programadores. Entonces, en esta tienda hay una secci√≥n para soluciones basadas en redes neuronales, hay muchos bots, pero ninguno real. Las reglas proh√≠ben agregar un bot usando una red neuronal. Es dif√≠cil de creer, pero lo es. La prohibici√≥n de conectar una API externa excluye la posibilidad de usar redes neuronales, y las herramientas integradas en MQL5 no funcionan en la pr√°ctica. Discut√≠ este problema con el soporte t√©cnico de MQL5,No recib√≠ una respuesta clara. Como resultado, no hay nada realmente fuera de la caja en el mercado, no se tienen en cuenta las soluciones de la serie "ense√±ar a ti mismo" presentada en el github.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, estoy terminando con la introducci√≥n, me estoy poniendo manos a la obra. Logr√© entrenar una red neuronal, hay resultados dignos en el mercado real. Adem√°s, sin entrar en detalles, describir√© c√≥mo se hizo esto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primer y principal error de todos los que intentan ense√±ar a la red neuronal a comerciar es el pensamiento comercial sobre el mercado. Por lo general, un comerciante intenta implementar una soluci√≥n basada en redes neuronales junto con un programador que previamente escribi√≥ bots. El algoritmo de bot comercial resuelve el problema de encontrar el punto de entrada correcto a la posici√≥n y determinar la "toma" y la "detenci√≥n". Si tiene esta tarea en mente al dise√±ar una red neuronal, entonces nada funcionar√°. Puede clasificar infinitamente opciones ingeniosas para datos de entrada, dar o no indicadores, probar diferentes tipos de redes neuronales, sustituir muletas como entrenamiento solo en ciertas √°reas o entrenar mostrando solo patrones conocidos. No trabajar√°.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con una red neuronal, debe verse como un ni√±o, mirar el mundo a trav√©s de sus ojos y comenzar con tareas simples. La pregunta m√°s simple que se puede hacer es "¬øa d√≥nde ir√° el precio a trav√©s de X velas, arriba o abajo?". No importa cu√°nto cambie el precio y no importa que la respuesta no pueda convertirse en una estrategia comercial. Nos olvidamos del comercio, ahora la tarea principal es educar a la red al menos algo, solo obtener la respuesta correcta.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ten√≠a esta tarea inicial resuelta despu√©s de 100,500 selecciones de entrada. </font><font style="vertical-align: inherit;">Se utiliz√≥ TensoFlow plus Keras, una red de densidades secuenciales. </font><font style="vertical-align: inherit;">Conjunto de datos de entrada para 200-300 mil ejemplos, funci√≥n de vector de entrada 250-350. </font><font style="vertical-align: inherit;">La forma de la respuesta se deduce de la red planteada de la pregunta: la clasificaci√≥n binaria "arriba" o "abajo". </font><font style="vertical-align: inherit;">La entrada fue preparada por el bot en MQL5. </font><font style="vertical-align: inherit;">Un bot que ejecuta una historia forma un archivo csv normal, cada l√≠nea es un vector. </font><font style="vertical-align: inherit;">Al final de cada vector, la respuesta correcta es 1: 0 si est√° arriba, 0: 1 si est√° abajo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay algunas sugerencias para quienes lo intenten:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estudia bien dentro del pron√≥stico de 15 minutos a 60 minutos. </font><font style="vertical-align: inherit;">En un per√≠odo m√°s corto, el caos del movimiento de precios crece, en un per√≠odo m√°s grande aumenta la influencia externa: noticias, etc., 15-60 minutos, la zona m√°s "t√©cnica".</font></font></li>
<li>     BTCUSD,    EURUSD.   ‚Äî  .</li>
<li>     ¬´     ?     ?¬ª.          ,   .</li>
<li>               ,   50%  .   ,      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesita comprender con qu√© material estamos tratando. El mercado es un 95% de caos. Cuando enviamos datos de entrenamiento a la red e indicamos la respuesta correcta, en realidad estamos alimentando el caos. Es como tratar de entrenar una red neuronal para distinguir a un gato de un perro, y al entrenar para mostrarle mariposas, estrellas y signos del zodiaco, no habr√° resultado. Por lo tanto, est√° aqu√≠, pero, afortunadamente, el mercado proporciona alrededor del 5% de los patrones realmente operativos que la red puede detectar y esto se reflejar√° en sus respuestas. Por lo tanto, preste atenci√≥n al an√°lisis de los resultados de la prueba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando este enfoque, obtuve el siguiente resultado:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en aproximadamente el 2% de las respuestas, la red adivina el movimiento adicional en la proporci√≥n de 2 respuestas correctas a 1 incorrecta. Al realizar pruebas en el mercado real, esto es exactamente lo que sucede, pero surge otro problema. Despu√©s de todo, solo tenemos el 2% de las preguntas respondidas, ignoremos el resto. Aquellos. lanzamos un neuro en el mercado real en un plazo de 5 minutos y esperamos ... al 2%: ¬°solo se responder√°n cada 50 velas, una respuesta en 4 horas! ¬øY qu√© hacer con eso? Bueno, si la respuesta fue "comprar / vender", entonces 6 transacciones al d√≠a es normal, y aqu√≠ el resumen "arriba / abajo" y luego inexacto, completa decepci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, resolv√≠ este problema con relativa facilidad: solo cada 5 minutos necesita entrevistar no a un modelo, sino a 20-30 modelos, como resultado de las respuestas habr√° suficiente. Los modelos est√°n entrenados en diferentes datos de entrada y, en consecuencia, est√°n entrenados en diferentes patrones. En la pr√°ctica, resulta que las modelos tocan las bocinas de diferentes velas, se activan juntas solo en lugares obvios y predecibles y no se superponen entre s√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resumir, ahora hay algo que se puede lanzar en el mercado real y tener se√±ales de subida / bajada con la miner√≠a promedio. Ya es m√°s divertido, pero el sentido pr√°ctico sigue siendo cero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunas palabras sobre la implementaci√≥n. Me funcion√≥ en un mont√≥n de MQL5 m√°s Keras. Un bot lanzado en MetaTrader5 en cada vela prepar√≥ datos para una red neuronal y pas√≥ a trav√©s de un socket a un script de Python, que a su vez sonde√≥ todos los modelos y, cuando pas√≥ un umbral aceptable, envi√≥ una se√±al al canal de Telegram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, el circuito funciona, pero no se puede aplicar. No fue posible agregar se√±ales a alguna estrategia. El principal inconveniente es la discreci√≥n de las respuestas. La respuesta es un evento al que debe reaccionar de alguna manera: observe la situaci√≥n del mercado, piense si la red es correcta o no, etc. En una vela, un modelo podr√≠a se√±alar hacia arriba y otro hacia abajo, ¬øy cu√°l creer? Como resultado, la idea naci√≥ para abandonar el umbral para pasar la respuesta y comenzar a respetar cada respuesta de la red, aunque con un bajo grado de confianza. Si comienza a promediar todas las respuestas en una sola opini√≥n com√∫n y considera esto como la respuesta de la red, entonces la respuesta se convierte en una calidad completamente diferente. En este caso, el conocimiento de todos los modelos comienza a tomar forma, y ‚Äã‚Äãesto es una gran cantidad de entrenamiento conjunto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cu√°nto tiempo, brevemente, pero despu√©s de todas las alteraciones, comenc√© a recibir respuestas individuales de la red neuronal para cada vela, expresadas como un porcentaje del tiempo de trabajo esperado de -100% a + 100%. El letrero refleja la direcci√≥n hacia arriba / hacia abajo esperada. Qued√≥ claro que ahora hay un sentido en cada respuesta. ¬°Funciona! Yo mismo tengo experiencia comercial y vi c√≥mo el comportamiento de la red frente a mis ojos se volvi√≥ significativo. Algunas veces su l√≥gica era comprensible, otras no, pero sus respuestas siempre sent√≠an su propia visi√≥n del mercado, a menudo parad√≥jica. Adem√°s de esto, result√≥ que cuanto mayor es la confianza de la red, m√°s cercano es el desarrollo esperado al momento adecuado y viceversa. La baja confianza parec√≠a decir "lo que suceder√° en 15 minutos, no lo s√©, pero la tendencia general ha subido".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde este lugar, me di cuenta de que tratar de formalizar todo esto en se√±ales de compra / venta es como martillar clavos con un microscopio. Lo que se necesitaba era alg√∫n tipo de herramienta para visualizar las se√±ales de la red neuronal: una visualizaci√≥n gr√°fica del nivel de "confianza" en cada vela. Una amplia gama de herramientas MQL5 hizo posible poner todo esto en Expert para MetaTrader5. "Experto" a trav√©s de la API recibe las respuestas de la red neuronal y solo se dedica a la representaci√≥n. Aqu√≠ hay un ejemplo de su trabajo en BTCUSD M1: El </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8c5/976/ce2/8c5976ce22fbaa03814683028e479a8f.jpg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√°rea coloreada en la parte superior es el pron√≥stico "abajo", el √°rea debajo es el pron√≥stico "arriba", el grosor es el grado de confianza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, la calidad del pron√≥stico no importa, es importante que la red neuronal demuestre una opini√≥n bastante adecuada sobre la situaci√≥n del mercado. Siempre puede actualizar la red a√∫n m√°s, ¬°lo principal es que funciona!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, hoy hay un experto para MetaTrader5 con dos tipos de pron√≥sticos: a corto y largo plazo. </font><font style="vertical-align: inherit;">Las estad√≠sticas se est√°n acumulando gradualmente, hay comentarios de los comerciantes. </font><font style="vertical-align: inherit;">El resultado obtenido inspira m√°s trabajo, ahora necesitamos llegar a los apreciados equipos de "compra / venta". </font><font style="vertical-align: inherit;">Esto se puede hacer aumentando significativamente la calidad del pron√≥stico. </font><font style="vertical-align: inherit;">Entonces veo esta ruta de desarrollo:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es necesario preparar una docena de pron√≥sticos en el intervalo entre 15 y 60 minutos. </font><font style="vertical-align: inherit;">Aquellos. </font><font style="vertical-align: inherit;">comience a predecir "arriba / abajo" durante 20, 25, 30, 35 minutos y as√≠ sucesivamente hasta 60. Recuerdo que cada pron√≥stico se basa en las respuestas de aproximadamente 20 modelos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con tal volumen de informaci√≥n en cada vela minuto, es posible y necesario analizarlo con otra red neuronal. </font><font style="vertical-align: inherit;">La conexi√≥n entre pron√≥sticos en diferentes intervalos de tiempo puede ser completamente no trivial, por lo tanto, una red neuronal aqu√≠ ser√° apropiada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El conjunto de datos para esta red neuronal no ser√° tan ruidoso como el de sus camaradas m√°s j√≥venes, por lo tanto, debe ser entrenado no en un "arriba / abajo" banal, sino en la predicci√≥n de la fuerza del movimiento de un activo, y esta es una salida directa a "comprar / vender".</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es todo lo que quer√≠a decirte hoy. </font><font style="vertical-align: inherit;">El trabajo contin√∫a, creo que habr√° m√°s art√≠culos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, este Experto para MetaTrader5 se distribuye de forma gratuita, si desea ver el trabajo de una red neuronal en el mercado real, p√≥ngase en contacto.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es494940/index.html">DevOps: ¬øqu√© es, por qu√© y cu√°nto demanda?</a></li>
<li><a href="../es494942/index.html">CGI en casa con Unreal Engine y iPhone</a></li>
<li><a href="../es494948/index.html">Cree un buz√≥n VIP en Zimbra Collaboration Open-Source Edition</a></li>
<li><a href="../es494950/index.html">Algunas tendencias de almacenamiento a tener en cuenta</a></li>
<li><a href="../es494956/index.html">Data Byte Life</a></li>
<li><a href="../es494966/index.html">SCRUM: un poema sobre el amor y el dolor.</a></li>
<li><a href="../es494968/index.html">Cables submarinos de Internet: qui√©n los enruta</a></li>
<li><a href="../es494970/index.html">Introversi√≥n: aleatoriedad dentro del margen de error, o mecanismo evolutivo de conservaci√≥n de especies?</a></li>
<li><a href="../es494972/index.html">SEMrush vs SimilarWeb: ¬øqui√©n es m√°s preciso?</a></li>
<li><a href="../es494978/index.html">¬øQu√© es Windows PowerShell y qu√© come? Parte 4: trabajar con objetos, clases personalizadas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>