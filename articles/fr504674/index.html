<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂🏾 🤟🏻 🧑🏿‍🤝‍🧑🏽 Base pour un grand SPA modulaire sur Laravel + Vue + ElementUI avec générateur CRUD 🎍 ⛎ 👁‍🗨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au cours des dernières années, j'ai réussi à travailler sur plusieurs projets de grande envergure et peu nombreux utilisant différents frameworks back...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Base pour un grand SPA modulaire sur Laravel + Vue + ElementUI avec générateur CRUD</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504674/"><img src="https://habrastorage.org/webt/h7/m7/kt/h7m7kt-cpub7kcte0htso38oqio.jpeg" alt="image" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au cours des dernières années, j'ai réussi à travailler sur plusieurs projets de grande envergure et peu nombreux utilisant différents frameworks back-end et front-end. Face à divers problèmes qui se sont posés au fur et à mesure de la croissance de l'application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je peux maintenant conclure à partir de quelles solutions ont réussi et lesquelles n'ont pas été très réussies. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant l'expérience accumulée, je me suis mis à collecter toutes les meilleures solutions, à mon avis, et à créer ma propre fondation pour SPA.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment créer un site sur Laravel ou ce qu'est le SPA, je ne le dirai pas. </font><font style="vertical-align: inherit;">Il y a suffisamment de telles informations sur Internet. </font><font style="vertical-align: inherit;">Cet article est destiné aux développeurs plus ou moins expérimentés, donc je vais manquer quelques détails. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qui ne peut pas attendre, à la fin de l'article est un lien vers mon référentiel github. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les principales technologies ont été sélectionnées par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laravel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> car c'est ma pile principale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un développement rapide, j'ai pris le Kit UI - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ElementUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'objectif principal</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour créer les bases d'un projet de moyenne et grande envergure qui:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aidera à éviter la cohésion rigide des modules</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compréhensible pour un programmeur avec peu d'expérience</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aider à éviter la duplication de code</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sera facile à étendre</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réduire l'heure de début du projet</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réduire le temps de prise en charge du projet et de navigation dans le code</font></font></li>
<li>     </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour rendre la vie aussi simple que possible, à ne pas confondre avec le projet, vous devez bien structurer votre ego. Initialement, l'application doit être divisée en niveaux de responsabilité, tels que l'interface utilisateur, la base de données, la logique métier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, chaque couche doit d'abord être divisée par fonctionnalité, puis chaque module fonctionnel doit être divisé en fonction du modèle sélectionné. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inspiré par la philosophie DDD, j'ai décidé de diviser le front-end et le back-end en modules sémantiques. Mais ce ne sont pas les domaines classiques décrits par Evans. Son modèle n'est pas non plus parfait. Dans toute application, au fil du temps, les relations entre les composants apparaissent toujours - les mêmes relations entre les modèles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a laissé les modèles comme une couche distincte, car ils semblaient dupliquer la base de données, avec toutes ses connexions. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Création d'un répertoire à l'avant</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ressources / js / modules</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dans lesquels se trouvent différents modules. Chacun aura des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - des méthodes pour travailler avec le back-end, des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">composants</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tous les composants et les pages, le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stockage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - le stockage et les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itinéraires</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<pre><code class="bash hljs">{moduleName}/<font></font>
│<font></font>
├── routes.js<font></font>
│<font></font>
├── api/<font></font>
│   └── index.js<font></font>
│<font></font>
├── components/<font></font>
│   ├── {ModuleName}List.vue<font></font>
│   ├── {ModuleName}View.vue<font></font>
│   └── {ModuleName}Form.vue<font></font>
│<font></font>
└── store/<font></font>
    ├── store.js<font></font>
    ├── types.js<font></font>
    └── actions.js<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resources / js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le dossier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">principal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est créé </font><font style="vertical-align: inherit;">, où se trouvent les principaux composants du système. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe également des programmes d'amorçage et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comprend des</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dossiers </font><font style="vertical-align: inherit;">pour configurer des bibliothèques et des utilitaires supplémentaires, respectivement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le projet utilise le chargement dynamique des modèles. </font><font style="vertical-align: inherit;">A savoir, dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core / routes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">core / states,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous chargeons automatiquement les fichiers de routage et de stockage correspondants (rien n'a besoin d'être enregistré). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chargement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> automatique de </font><font style="vertical-align: inherit;">store.js </font><i><font style="vertical-align: inherit;">à</font></i><font style="vertical-align: inherit;"> partir de différents modules.</font></font><br>
 <br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Load store modules dynamically.</span>
<span class="hljs-keyword">const</span> requireContext = <span class="hljs-built_in">require</span>.context(<span class="hljs-string">'../../modules'</span>, <span class="hljs-literal">true</span>, /store\.js$/) <font></font>
 <font></font>
<span class="hljs-keyword">let</span> modules = requireContext.keys() <font></font>
    .map(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> 
        [file.replace(<span class="hljs-regexp">/(^.\/)|(\.js$)/g</span>, <span class="hljs-string">''</span>), requireContext(file)] <font></font>
    )<font></font>
    .reduce(<span class="hljs-function">(<span class="hljs-params">modules, [path, <span class="hljs-built_in">module</span>]</span>) =&gt;</span> { 
        <span class="hljs-keyword">let</span> name = path.split(<span class="hljs-string">'/'</span>)[<span class="hljs-number">0</span>] 
        <span class="hljs-keyword">return</span> { ...modules, [name]: <span class="hljs-built_in">module</span>.store } <font></font>
    }, {})<font></font>
 <font></font>
modules = {...modules, core} <font></font>
 <font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.Store({<font></font>
    modules<font></font>
})<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le backend dans le répertoire de l'application, il y aura des modules similaires. </font><font style="vertical-align: inherit;">Chaque module contiendra des dossiers </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrôleurs, Demandes, Ressources</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le fichier avec les routes a également été déplacé ici - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">routes_api.php</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<pre><code class="bash hljs">{ModuleName}/<font></font>
│<font></font>
├── routes_api.php<font></font>
│<font></font>
├── Controllers/<font></font>
│   └──{ModuleName}Controller.php<font></font>
│<font></font>
├── Requests/<font></font>
│   └──{ModuleName}Request.php<font></font>
│<font></font>
└── Resources/<font></font>
    └── {ModuleName}Resource.php<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autres modèles de conception tels que les événements, les emplois, les politiques, etc. ne seront pas inclus dans les modules, car ils sont moins utilisés et il est plus logique de les conserver dans une couche distincte. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les manipulations avec le chargement dynamique des modules sont effectuées de sorte qu'un engagement minimal bat entre eux. Cela vous permet d'ajouter et de supprimer des modules sans conséquences. Vous pouvez maintenant faire la commande artisan make pour créer un tel module. Avec son aide, nous pouvons rapidement remplir le projet avec les entités nécessaires ainsi que la fonctionnalité CRUD. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir exécuté la commande </font></font><code>php artisan make:module {ModuleName}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nous aurons tous les fichiers nécessaires, y compris le modèle et les migrations, pour que le CRUD complet fonctionne. Il vous suffit de terminer la migration</font></font><code>php artisan migrate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et tout fonctionnera. Très probablement, vous devrez ajouter des champs supplémentaires, donc avant de migrer, n'oubliez pas de les ajouter au modèle, à la migration et également à la sortie vers vue.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0qKNlrmhgNg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce modèle, la technologie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JWT-Auth a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> été utilisée pour l'authentification </font><font style="vertical-align: inherit;">, mais elle peut être redondante et doit être refaite pour Laravel Sanctum. </font><font style="vertical-align: inherit;">À son tour, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vue-auth est</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisé sur le front-end </font><font style="vertical-align: inherit;">, il facilite la gestion des autorisations et des rôles des utilisateurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'avenir, j'aimerais améliorer le système. </font><font style="vertical-align: inherit;">Ajoutez un bus d'événements global, connectez des websockets. </font><font style="vertical-align: inherit;">Ajoutez des tests. </font><font style="vertical-align: inherit;">Il est possible de créer une option de gestion des rôles dans des branches distinctes ou de créer des branches avec un autre kit d'interface utilisateur. </font><font style="vertical-align: inherit;">Ce serait bien d'entendre des recommandations, des commentaires. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initialement, ce modèle a été développé pour vos besoins, mais maintenant j'espère qu'il sera utile pour d'autres utilisateurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout le code peut être consulté dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mon référentiel github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504662/index.html">Dessiner de la musique: danse du cercueil dans Pure Data</a></li>
<li><a href="../fr504664/index.html">Ajout intelligent de groupes musicaux à Google Sheets via VK API, Tampermonkey et Telegram bot</a></li>
<li><a href="../fr504668/index.html">Le condensé de matériaux intéressants pour le développeur mobile # 346 (25 - 31 mai)</a></li>
<li><a href="../fr504670/index.html">Examen d'État unifié en informatique ou en souffrance</a></li>
<li><a href="../fr504672/index.html">DEVOXX UK. Kubernetes en production: déploiement bleu / vert, mise à l'échelle automatique et automatisation du déploiement. Partie 2</a></li>
<li><a href="../fr504676/index.html">Ajoutez une pincée de hasard à votre jeu</a></li>
<li><a href="../fr504678/index.html">ITMO Research_ podcast: comment aborder la synchronisation du contenu AR avec le spectacle à l'échelle de l'ensemble du stade</a></li>
<li><a href="../fr504680/index.html">Présentation de la bibliothèque NLP de SpaL</a></li>
<li><a href="../fr504682/index.html">Nostalgia Post: j2me, Gravity Defied, 64kb</a></li>
<li><a href="../fr504686/index.html">Comment dessiner un chat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>